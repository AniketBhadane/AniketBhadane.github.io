var B3=Object.create;var Km=Object.defineProperty,q3=Object.defineProperties,j3=Object.getOwnPropertyDescriptor,W3=Object.getOwnPropertyDescriptors,U3=Object.getOwnPropertyNames,Oh=Object.getOwnPropertySymbols,z3=Object.getPrototypeOf,$m=Object.prototype.hasOwnProperty,_S=Object.prototype.propertyIsEnumerable;var mS=(n,e,t)=>e in n?Km(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ie=(n,e)=>{for(var t in e||={})$m.call(e,t)&&mS(n,t,e[t]);if(Oh)for(var t of Oh(e))_S.call(e,t)&&mS(n,t,e[t]);return n},Ie=(n,e)=>q3(n,W3(e));var Zm=(n,e)=>{var t={};for(var i in n)$m.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&Oh)for(var i of Oh(n))e.indexOf(i)<0&&_S.call(n,i)&&(t[i]=n[i]);return t};var Xm=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var H3=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of U3(e))!$m.call(n,r)&&r!==t&&Km(n,r,{get:()=>e[r],enumerable:!(i=j3(e,r))||i.enumerable});return n};var Ta=(n,e,t)=>(t=n!=null?B3(z3(n)):{},H3(e||!n||!n.__esModule?Km(t,"default",{value:n,enumerable:!0}):t,n));var jw=Xm((exports,module)=>{(function(){"use strict";var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&typeof module=="object"&&module.exports,AMD=typeof define=="function"&&define.amd,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(n){return typeof n=="object"&&n.buffer&&n.buffer.constructor===ArrayBuffer});var createOutputMethod=function(n,e){return function(t){return new Sha256(e,!0).update(t)[n]()}},createMethod=function(n){var e=createOutputMethod("hex",n);NODE_JS&&(e=nodeWrap(e,n)),e.create=function(){return new Sha256(n)},e.update=function(r){return e.create().update(r)};for(var t=0;t<OUTPUT_TYPES.length;++t){var i=OUTPUT_TYPES[t];e[i]=createOutputMethod(i,n)}return e},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(n){if(typeof n=="string")return crypto.createHash(algorithm).update(n,"utf8").digest("hex");if(n==null)throw new Error(ERROR);return n.constructor===ArrayBuffer&&(n=new Uint8Array(n)),Array.isArray(n)||ArrayBuffer.isView(n)||n.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(n)).digest("hex"):method(n)};return nodeMethod},createHmacOutputMethod=function(n,e){return function(t,i){return new HmacSha256(t,e,!0).update(i)[n]()}},createHmacMethod=function(n){var e=createHmacOutputMethod("hex",n);e.create=function(r){return new HmacSha256(r,n)},e.update=function(r,s){return e.create(r).update(s)};for(var t=0;t<OUTPUT_TYPES.length;++t){var i=OUTPUT_TYPES[t];e[i]=createHmacOutputMethod(i,n)}return e};function Sha256(n,e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=n}Sha256.prototype.update=function(n){if(!this.finalized){var e,t=typeof n;if(t!=="string"){if(t==="object"){if(n===null)throw new Error(ERROR);if(ARRAY_BUFFER&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!Array.isArray(n)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(n)))throw new Error(ERROR)}else throw new Error(ERROR);e=!0}for(var i,r=0,s,o=n.length,a=this.blocks;r<o;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),e)for(s=this.start;r<o&&s<64;++r)a[s>>2]|=n[r]<<SHIFT[s++&3];else for(s=this.start;r<o&&s<64;++r)i=n.charCodeAt(r),i<128?a[s>>2]|=i<<SHIFT[s++&3]:i<2048?(a[s>>2]|=(192|i>>6)<<SHIFT[s++&3],a[s>>2]|=(128|i&63)<<SHIFT[s++&3]):i<55296||i>=57344?(a[s>>2]|=(224|i>>12)<<SHIFT[s++&3],a[s>>2]|=(128|i>>6&63)<<SHIFT[s++&3],a[s>>2]|=(128|i&63)<<SHIFT[s++&3]):(i=65536+((i&1023)<<10|n.charCodeAt(++r)&1023),a[s>>2]|=(240|i>>18)<<SHIFT[s++&3],a[s>>2]|=(128|i>>12&63)<<SHIFT[s++&3],a[s>>2]|=(128|i>>6&63)<<SHIFT[s++&3],a[s>>2]|=(128|i&63)<<SHIFT[s++&3]);this.lastByteIndex=s,this.bytes+=s-this.start,s>=64?(this.block=a[16],this.start=s-64,this.hash(),this.hashed=!0):this.start=s}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,e=this.lastByteIndex;n[16]=this.block,n[e>>2]|=EXTRA[e&3],this.block=n[16],e>=56&&(this.hashed||this.hash(),n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.hBytes<<3|this.bytes>>>29,n[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var n=this.h0,e=this.h1,t=this.h2,i=this.h3,r=this.h4,s=this.h5,o=this.h6,a=this.h7,l=this.blocks,c,u,d,h,p,g,A,v,b,E,O;for(c=16;c<64;++c)p=l[c-15],u=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,p=l[c-2],d=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,l[c]=l[c-16]+u+l[c-7]+d<<0;for(O=e&t,c=0;c<64;c+=4)this.first?(this.is224?(v=300032,p=l[0]-1413257819,a=p-150054599<<0,i=p+24177077<<0):(v=704751109,p=l[0]-210244248,a=p-1521486534<<0,i=p+143694565<<0),this.first=!1):(u=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),d=(r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7),v=n&e,h=v^n&t^O,A=r&s^~r&o,p=a+d+A+K[c]+l[c],g=u+h,a=i+p<<0,i=p+g<<0),u=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),d=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),b=i&n,h=b^i&e^v,A=a&r^~a&s,p=o+d+A+K[c+1]+l[c+1],g=u+h,o=t+p<<0,t=p+g<<0,u=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),d=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),E=t&i,h=E^t&n^b,A=o&a^~o&r,p=s+d+A+K[c+2]+l[c+2],g=u+h,s=e+p<<0,e=p+g<<0,u=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),d=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),O=e&t,h=O^e&i^E,A=s&o^~s&a,p=r+d+A+K[c+3]+l[c+3],g=u+h,r=n+p<<0,n=p+g<<0;this.h0=this.h0+n<<0,this.h1=this.h1+e<<0,this.h2=this.h2+t<<0,this.h3=this.h3+i<<0,this.h4=this.h4+r<<0,this.h5=this.h5+s<<0,this.h6=this.h6+o<<0,this.h7=this.h7+a<<0},Sha256.prototype.hex=function(){this.finalize();var n=this.h0,e=this.h1,t=this.h2,i=this.h3,r=this.h4,s=this.h5,o=this.h6,a=this.h7,l=HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[i&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15];return this.is224||(l+=HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]),l},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var n=this.h0,e=this.h1,t=this.h2,i=this.h3,r=this.h4,s=this.h5,o=this.h6,a=this.h7,l=[n>>24&255,n>>16&255,n>>8&255,n&255,e>>24&255,e>>16&255,e>>8&255,e&255,t>>24&255,t>>16&255,t>>8&255,t&255,i>>24&255,i>>16&255,i>>8&255,i&255,r>>24&255,r>>16&255,r>>8&255,r&255,s>>24&255,s>>16&255,s>>8&255,s&255,o>>24&255,o>>16&255,o>>8&255,o&255];return this.is224||l.push(a>>24&255,a>>16&255,a>>8&255,a&255),l},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(this.is224?28:32),e=new DataView(n);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),n};function HmacSha256(n,e,t){var i,r=typeof n;if(r==="string"){var s=[],o=n.length,a=0,l;for(i=0;i<o;++i)l=n.charCodeAt(i),l<128?s[a++]=l:l<2048?(s[a++]=192|l>>6,s[a++]=128|l&63):l<55296||l>=57344?(s[a++]=224|l>>12,s[a++]=128|l>>6&63,s[a++]=128|l&63):(l=65536+((l&1023)<<10|n.charCodeAt(++i)&1023),s[a++]=240|l>>18,s[a++]=128|l>>12&63,s[a++]=128|l>>6&63,s[a++]=128|l&63);n=s}else if(r==="object"){if(n===null)throw new Error(ERROR);if(ARRAY_BUFFER&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!Array.isArray(n)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(n)))throw new Error(ERROR)}else throw new Error(ERROR);n.length>64&&(n=new Sha256(e,!0).update(n).array());var c=[],u=[];for(i=0;i<64;++i){var d=n[i]||0;c[i]=92^d,u[i]=54^d}Sha256.call(this,e,t),this.update(u),this.oKeyPad=c,this.inner=!0,this.sharedMemory=t}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var n=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(n),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&define(function(){return exports}))})()});var Lm=Xm((Fm,D3)=>{(function(n,e){typeof Fm=="object"&&typeof D3<"u"?e(Fm):typeof define=="function"&&define.amd?define(["exports"],e):e((n=typeof globalThis<"u"?globalThis:n||self).indicators={})})(Fm,function(n){"use strict";var e=function(q,S){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,P){I.__proto__=P}||function(I,P){for(var F in P)Object.prototype.hasOwnProperty.call(P,F)&&(I[F]=P[F])})(q,S)},t=function(){return(t=Object.assign||function(q){for(var S,I=arguments,P=1,F=arguments.length;P<F;P++)for(var Y in S=I[P])Object.prototype.hasOwnProperty.call(S,Y)&&(q[Y]=S[Y]);return q}).apply(this,arguments)};function i(){for(var q=arguments,S=0,I=0,P=arguments.length;I<P;I++)S+=q[I].length;var F=Array(S),Y=0;for(I=0;I<P;I++)for(var $=arguments[I],pe=0,_e=$.length;pe<_e;pe++,Y++)F[Y]=$[pe];return F}var r=function(){function q(S,I,P,F,Y,$){$===void 0&&($=null),this.forked=!1,this.forkedAt=0,this.lastForkY=null,this.step=F,this.index=Y,this.length=0,this.startPoint=$?{y:S?$.h:$.l,x:$.x}:{y:S||I,x:P},this.init(S,I,P),this.thisPoint=this.startPoint}return q.prototype.init=function(S,I,P){this.type||(this.type=S?"h":"l"),this.candlePoint={y:this.type=="h"?S:I,x:P},this.thisPoint&&(this.prevPoint=this.thisPoint,this.nextPoint&&(this.thisPoint=this.nextPoint),this.nextPoint={y:this.k*(this.candlePoint.x+this.step)+this.b,x:this.candlePoint.x+this.step})},q.prototype.update=function(S,I,P){var F=null;if(this.length++,this.init(S,I,P),this.k&&!isNaN(this.k)||(this.k=(this.candlePoint.y-this.startPoint.y)/(this.candlePoint.x-this.startPoint.x),this.b=this.candlePoint.y-this.k*this.candlePoint.x,this.prevPoint=this.startPoint,this.thisPoint=this.candlePoint,this.nextPoint={y:this.k*(this.candlePoint.x+this.step)+this.b,x:this.candlePoint.x+this.step},F={condition:this.type=="h"?"lt":"gt",value:this.nextPoint.y,action:"fork",lineIndex:this.index}),this.type=="h"&&this.thisPoint.y<=this.candlePoint.y||this.type=="l"&&this.thisPoint.y>=this.candlePoint.y){this.k=(this.candlePoint.y-this.startPoint.y)/(this.candlePoint.x-this.startPoint.x),this.b=this.candlePoint.y-this.k*this.candlePoint.x,this.thisPoint=this.candlePoint,this.length=0,this.nextPoint={y:this.k*(this.candlePoint.x+this.step)+this.b,x:this.candlePoint.x+this.step};var Y=this.rollback?this.rollback.length:0,$=this.candlePoint.y-this.prevPoint.y;(this.type=="h"?$>0:$<0)?(this.rollback={k:$,b:this.candlePoint.y-$*this.candlePoint.x,length:Y+1,lastForkTime:this.forkedAt||(this.rollback?this.rollback.lastForkTime:0),lastForkValue:this.forkedValue||(this.rollback?this.rollback.lastForkValue:0)},this.forked=!1,this.forkedAt=null,this.forkedValue=null):(this.forkedAt=this.candlePoint.x,this.forkedValue=this.candlePoint.y,this.forked=!0,this.rollback=null),F={condition:this.type=="h"?"lt":"gt",value:this.nextPoint.y,action:"fork",lineIndex:this.index}}else this.rollback=null;return F},q.prototype.updateStep=function(S){this.step=S},q}(),s=function(){function q(S){this.lineIndex=0,this.forkDiffH=null,this.forkDiffL=null,this.step=S,this.list=[[],[]],this.id={}}return q.prototype.add=function(S,I,P,F,Y){F===void 0&&(F=null),Y===void 0&&(Y=null);var $,pe,_e,Ne=null;if(Y==null?($=this.lineIndex,this.lineIndex++,S!=null?this.list[0].push($):this.list[1].push($)):($=Y,Ne=this.id[$].lastForkY||(S!=null?F.h:F.l)),this.id[$]=new r(S,I,P,this.step,$,F),Ne&&(this.id[$].lastForkY=Ne),$>1||Y!=null&&this.id[Y]!=null){pe=Y??this.list[this.id[$].type=="h"?0:1][this.list[this.id[$].type=="h"?0:1].indexOf($)-1],_e=Y??this.list[this.id[$].type=="h"?0:1][this.list[this.id[$].type=="h"?0:1].indexOf($)-2];var ve=this.id[pe].lastForkY;_e&&!ve&&(ve=this.id[_e].lastForkY);var Ge=S!=null?F.h:F.l;ve&&(S?this.forkDiffH=ve>=Ge?-pe-1:pe+1:this.forkDiffL=ve>=Ge?-pe-1:pe+1),this.id[pe].lastForkY=Ge}return $},q.prototype.update=function(S,I,P,F){return this.id[S].update(I,P,F)},q.prototype.delete=function(S){this.id[S]&&(this.id[S].type=="h"?this.list[0].splice(this.list[0].indexOf(S),1):this.list[1].splice(this.list[1].indexOf(S),1),delete this.id[S])},q}(),o=function(){function q(S,I){this.kdiff=[],this.env=I,this.lines=S,this.in={state:null,lineIndex:null,line:null},this.is={state:null,lineIndex:null,line:null,start:null,size:0},this.was={state:null,lineIndex:null,line:null,size:null},this.width=0,this.speed=0,this.at=0}return q.prototype.update=function(S,I){var P=this;if(S.length>1?this.hlMaxDuration=S.map(function(Me){return P.lines.id[Me]}).filter(function(Me){return!P.is.line||(Me.forkedAt?Me.forkedAt>P.is.line.startPoint.x:!!Me.rollback&&Me.rollback.lastForkTime>P.is.line.startPoint.x)}).reduce(function(Me,Zt){return Me.length>Zt.length?Me:Zt},this.lines.id[S[0]]):this.hlMaxDuration=this.lines.id[S[0]],I.length>1?this.llMaxDuration=I.map(function(Me){return P.lines.id[Me]}).filter(function(Me){return!P.is.line||(Me.forkedAt?Me.forkedAt>P.is.line.startPoint.x:!!Me.rollback&&Me.rollback.lastForkTime>P.is.line.startPoint.x)}).reduce(function(Me,Zt){return Me.length>Zt.length?Me:Zt},this.lines.id[I[0]]):this.llMaxDuration=this.lines.id[I[0]],this.is.state==null&&this.was.state==null&&(this.is.line=this.llMaxDuration&&this.llMaxDuration.length>this.env.minLength&&this.hlMaxDuration.length<this.env.minLength?this.llMaxDuration:this.hlMaxDuration&&this.hlMaxDuration.length>this.env.minLength&&this.llMaxDuration.length<this.env.minLength?this.hlMaxDuration:null,this.is.line&&(this.is.lineIndex=this.is.line.index,this.is.state=this.is.line.type=="h"?"fall":"rise",this.is.start=this.is.line.candlePoint)),this.is.state){this.is.size=Math.max(this.is.size,Math.abs(this.is.start.y-this.is.line.candlePoint.y));var F,Y=this.lines.id[this.is.lineIndex]||this.lines.id[this.is.line.type=="h"?0:1],$=null,pe=null,_e=this.lines.list[Y.type=="h"?1:0].filter(function(Me){return P.lines.id[Me].forked&&P.lines.id[Me].thisPoint.x-P.lines.id[Me].forkedAt>12});_e.length>1?_e[1]:_e.length>0&&_e[0];var Ne=_e.filter(function(Me){return P.lines.id[Me].forkedAt>P.is.start.x});if(Y&&this.lines.list[Y.type=="h"?0:1].forEach(function(Me,Zt){var kt=P.lines.id[Me];if(Me>=Y.index&&kt.rollback!=null){F=P.lines.list[Y.type=="h"?0:1][Zt-1];var Pi=P.env.deltaModel==1&&Zt>1&&F&&P.lines.id[F]?Zt>1&&F&&P.lines.id[F].lastForkY:P.lines.id[Me>0?Me-1:0];pe=Pi?P.lines.id[Me>1?F:Y.type=="h"?0:1].lastForkY-kt.candlePoint.y:kt.rollback?kt.rollback.lastForkValue-kt.candlePoint.y:0,kt.rollback.lastForkValue>0&&kt.thisPoint.x-kt.rollback.lastForkTime>P.env.minRightLeg&&(P.is.state=="fall"?P.llMaxDuration.length>1:P.hlMaxDuration.length>1)&&((Y.type=="h"?pe<0:pe>0)||kt.rollback.length>P.env.rollbackLength||2*P.is.size/3>Math.abs(P.is.start.y-P.is.line.candlePoint.y)&&P.is.size>P.is.line.candlePoint.y*P.env.minIsSizeOnRollback&&Ne.length>1||(Y.type=="h"?kt.candlePoint.y>P.is.start.y&&P.lines.list[0].length==1:kt.candlePoint.y<P.is.start.y&&P.lines.list[1].length==1))&&(kt.candlePoint.x-kt.rollback.lastForkTime>P.env.forkDurationMin&&kt.candlePoint.x-kt.rollback.lastForkTime<P.env.forkDurationMax||(Y.type=="h"?kt.candlePoint.y>kt.startPoint.y:kt.candlePoint.y<kt.startPoint.y)||(Y.type=="h"?kt.candlePoint.y>P.is.start.y&&P.lines.list[0].length==1:kt.candlePoint.y<P.is.start.y&&P.lines.list[1].length==1))&&($=Me+1)}}),$){this.in.size=(this.was.size||0)+this.is.size;var ve=this.lines.id[0].candlePoint.y-this.is.start.y,Ge=this.is.state=="rise"?ve>=0:ve<0;this.was.size&&(this.in.state=this.was.size>this.is.size?this.was.state:this.is.state),this.was=t({},this.is),this.was.success=Ge,this.is.line=this.is.state=="fall"?this.llMaxDuration:this.hlMaxDuration,this.is.state=this.is.line.type=="h"?"fall":"rise",this.is.lineIndex=this.is.line.index,this.is.start=this.lines.id[0].candlePoint,this.is.size=0}}},q}(),a=function(){function q(S){this.hLineDirectives=[],this.lLineDirectives=[],this.step=1,this.i=0,this.localCounter=0,this.prevPoint=null,this.env=Object.assign({step:1,minLength:5,minRightLeg:3,maxForks:500,minLog:0,maxLog:0,rollbackLength:3,deltaModel:1,minIsSizeOnRollback:.05},S),this.env.minLength=Math.round(this.env.minLength/this.env.step)||1,this.env.minRightLeg=Math.round(this.env.minRightLeg/this.env.step)||1,this.env.rollbackLength=Math.round(this.env.rollbackLength/this.env.step)||1,this.env.forkDurationMin=Math.round(this.env.forkDurationMin/this.env.step)||1,this.env.forkDurationMax=Math.round(this.env.forkDurationMax/this.env.step)||1,this.lines=new s(this.step),this.trend=new o(this.lines,this.env)}return q.prototype.log=function(S){for(var I=arguments,P=[],F=1;F<arguments.length;F++)P[F-1]=I[F];this.consoleWindow=this.env.minLog<this.localCounter&&this.localCounter<this.env.maxLog,this.consoleWindow&&console.log.apply(console,i([S],P))},q.prototype.nextValue=function(S,I,P,F){var Y,$=this;this.localCounter++,this.lLineDirectives.length>0&&this.lLineDirectives.forEach(function(_e,Ne){var ve=$.lines.id[_e.lineIndex];_e.condition=="gt"&&F>_e.value&&_e.action=="fork"&&ve&&(_e.lineIndex!=null&&ve!=null&&ve.k<0?$.lines.add(null,F,$.i-1,$.prevPoint,_e.lineIndex):(ve.forked=!0,ve.forkedAt=ve.thisPoint.x,ve.forkedValue=ve.thisPoint.y,$.lines.add(null,F,$.i-1,$.prevPoint)))}),this.hLineDirectives.length>0&&this.hLineDirectives.forEach(function(_e,Ne){var ve=$.lines.id[_e.lineIndex];_e.condition=="lt"&&P<_e.value&&_e.action=="fork"&&ve&&(ve.k>0?$.lines.add(P,null,$.i-1,$.prevPoint,_e.lineIndex):(ve.forked=!0,ve.forkedAt=ve.thisPoint.x,ve.forkedValue=ve.thisPoint.y,$.lines.add(P,null,$.i-1,$.prevPoint)))}),this.hLineDirectives.length=0,this.lLineDirectives.length=0,this.lines.list[0].length<1?(this.lines.add(P,null,this.i),this.lines.add(null,F,this.i)):this.lines.list.forEach(function(_e){return _e.forEach(function(Ne){var ve=$.lines.id[Ne];if(ve&&ve.type){Y=null,ve&&ve.startPoint.x<$.i&&(Y=$.lines.update(Ne,P,F,$.i));var Ge=ve.type;Y&&(Ge=="h"?$.hLineDirectives.push(Y):$.lLineDirectives.push(Y))}})});var pe=[];return this.lines.list.forEach(function(_e){_e&&(pe=[],_e.forEach(function(Ne,ve){var Ge=$.lines.id[_e[ve]],Me=$.lines.id[_e[ve-1]];(ve>0&&Ge&&Me&&Ge.type=="h"&&Ge.thisPoint&&Me.thisPoint.y<=Ge.thisPoint.y||ve>$.env.maxForks||ve>0&&Ge&&Me&&Ge.type=="l"&&Ge.thisPoint&&Me.thisPoint.y>=Ge.thisPoint.y||ve>$.env.maxForks)&&pe.push(Ne)}),pe.forEach(function(Ne){return $.lines.delete(Ne)}))}),this.prevPoint={x:this.i,h:P,l:F},this.trend.update(this.lines.list[0],this.lines.list[1]),this.i++,this.lines},q}(),l=Object.freeze({__proto__:null,Indicator:a}),c=function(){function q(S){this.length=S,this.filled=!1,this.pointer=0,this.buffer=new Array(S),this.maxIndex=S-1}return q.prototype.push=function(S){var I=this.buffer[this.pointer];return this.buffer[this.pointer]=S,this.iteratorNext(),I},q.prototype.pushback=function(S){this.iteratorPrev();var I=this.buffer[this.pointer];return this.buffer[this.pointer]=S,I},q.prototype.peek=function(){return this.buffer[this.pointer]},q.prototype.forEach=function(S){for(var I=this.pointer,P=0;P!==this.length;)S(this.buffer[I],P),I=(this.length+I+1)%this.length,P++},q.prototype.forEachRight=function(S){for(var I=(this.length+this.pointer-1)%this.length,P=this.length-1;P!==this.length;)S(this.buffer[I],P),I=(this.length+I-1)%this.length,P--},q.prototype.fill=function(S){this.buffer.fill(S),this.filled=!0},q.prototype.toArray=function(){return this.buffer},q.prototype.iteratorNext=function(){this.pointer++,this.pointer>this.maxIndex&&(this.pointer=0,this.filled=!0)},q.prototype.iteratorPrev=function(){this.pointer--,this.pointer<0&&(this.pointer=this.maxIndex)},q}(),u=function(q){function S(I,P){I===void 0&&(I=100);var F=q.call(this,I)||this;return F.period=I,F.mode=P,F.comparator=P==="max"?F.maxComporator:F.mminComporator,F}return function(I,P){function F(){this.constructor=I}e(I,P),I.prototype=P===null?Object.create(P):(F.prototype=P.prototype,new F)}(S,q),S.prototype.nextValue=function(I){return this.push(I),this.getExtremum()},S.prototype.momentValue=function(I){var P=this.push(I),F=this.getExtremum();return this.pushback(P),F},S.prototype.maxComporator=function(I,P){return I>P},S.prototype.mminComporator=function(I,P){return I<P},S.prototype.getExtremum=function(I){var P=(this.length+this.pointer-2)%this.length,F=this.mode==="max"?-1/0:1/0;if(!this.filled)return 0;for(;P!==this.pointer;){var Y=this.buffer[(this.length+P-1)%this.length],$=this.buffer[(this.length+P+1)%this.length],pe=this.buffer[P];if(this.comparator(pe,F)&&this.comparator(pe,Y)&&this.comparator(pe,$)){if(F=pe,this.prevIx===P)return null;if(this.prevIx=P,I)return F}P=(this.length+P-1)%this.length}return isFinite(F)?F:(this.prevIx=null,null)},S}(c),d=function(){function q(S){this.period=S,this.sum=0,this.circular=new c(S)}return q.prototype.nextValue=function(S){var I=this;if(this.circular.push(S),this.sum+=S,this.circular.filled)return this.nextValue=function(P){return I.sum=I.sum-I.circular.push(P)+P,I.sum/I.period},this.momentValue=function(P){return(I.sum-I.circular.peek()+P)/I.period},this.sum/this.period},q.prototype.momentValue=function(S){},q}(),h=function(){function q(S){this.period=S,this.smooth=1/this.period,this.sma=new d(this.period)}return q.prototype.nextValue=function(S){return this.wema?this.wema=(S-this.wema)*this.smooth+this.wema:this.wema=this.sma.nextValue(S)},q.prototype.momentValue=function(S){return this.wema?(S-this.wema)*this.smooth+this.wema:this.sma.momentValue(S)},q}(),p=function(){function q(S){this.period=S,this.smooth=2/(this.period+1),this.sma=new d(this.period)}return q.prototype.nextValue=function(S){var I=this,P=this.sma.nextValue(S);return P&&(this.ema=P,this.nextValue=function(F){return I.ema=(F-I.ema)*I.smooth+I.ema},this.momentValue=function(F){return(F-I.ema)*I.smooth+I.ema}),P},q.prototype.momentValue=function(S){},q}(),g=function(){function q(S,I){this.indicator=S,this.samples=I,this._indicators=[]}return q.prototype.create=function(){for(var S,I=arguments,P=[],F=0;F<arguments.length;F++)P[F]=I[F];for(var Y=0;Y<this.samples;Y++)this._indicators.push(new((S=this.indicator).bind.apply(S,i([void 0],P))))},q.prototype.nextValue=function(S){for(var I=0;I<this.samples;I++)if((S=this._indicators[I].nextValue(S))===void 0)return S;return S},q.prototype.momentValue=function(S){for(var I=0;I<this.samples;I++)if((S=this._indicators[I].momentValue(S))==null)return S;return S},q}(),A=function(){function q(S,I,P,F,Y){S===void 0&&(S=.85),F===void 0&&(F=1),Y===void 0&&(Y=1),this.redunant=S,this.multiplier=F,this.offset=Y,this.prevValue=0,this.lastUpperValue=0,this.lastLowerValue=0,this.samplerUp=new g(I,P),this.samplerLow=new g(I,P)}return q.prototype.create=function(){for(var S,I,P=arguments,F=[],Y=0;Y<arguments.length;Y++)F[Y]=P[Y];(S=this.samplerUp).create.apply(S,F),(I=this.samplerLow).create.apply(I,F)},q.prototype.nextValue=function(S){this.lastUpperValue=S>0?Math.max(S,this.prevValue):Math.max(0,this.lastUpperValue)*this.redunant,this.lastLowerValue=S<=0?Math.min(S,this.prevValue):Math.min(0,this.lastLowerValue)*this.redunant;var I=(S<=0?S:this.lastLowerValue)*this.multiplier,P=(S>=0?S:this.lastUpperValue)*this.multiplier;return[this.samplerUp.nextValue(P)+this.offset,this.samplerLow.nextValue(I)-this.offset]},q}(),v=function(){function q(S,I,P,F){P===void 0&&(P=.85),F===void 0&&(F="WEMA"),this.period=S,this.samples=I,this.redunant=P,this.type=F,this.upper=0,this.lower=0,this.lastUpperValue=0,this.lastLowerValue=0,this.sample1Up=this.createSample(),this.sample2Up=this.createSample(),this.sample3Up=this.createSample(),this.sample1Low=this.createSample(),this.sample2Low=this.createSample(),this.sample3Low=this.createSample()}return q.prototype.nextValue=function(S){return S>0?(this.upper=this.getUp(S),this.lastLowerValue*=this.redunant,this.lower=this.getDown(this.lastLowerValue),this.lastUpperValue=S):S<0&&(this.lower=this.getDown(S),this.lastUpperValue*=this.redunant,this.upper=this.getUp(this.lastUpperValue),this.lastLowerValue=S),{upper:this.upper,lower:this.lower}},q.prototype.getUp=function(S){var I=this.sample1Up.nextValue(S),P=null;return this.samples===1?I:(I&&(P=this.sample2Up.nextValue(I)),this.samples===2?P:P?this.sample3Up.nextValue(P):null)},q.prototype.getDown=function(S){var I=this.sample1Low.nextValue(S),P=null;return this.samples===1?I:(I&&(P=this.sample2Low.nextValue(I)),this.samples===2?P:P?this.sample3Low.nextValue(P):null)},q.prototype.createSample=function(){switch(this.type){case"EMA":return new p(this.period);case"WEMA":return new h(this.period);case"SMA":return new d(this.period)}},q}(),b=function(){function q(S){this.period=S,this.SMAx=new d(this.period),this.SMAy=new d(this.period),this.pricesX=new c(this.period),this.pricesY=new c(this.period)}return q.prototype.nextValue=function(S,I){this.pricesX.push(S),this.pricesY.push(I),this.SMAxValue=this.SMAx.nextValue(S),this.SMAyValue=this.SMAy.nextValue(I);for(var P=0,F=0,Y=0,$=0;$<this.period;$++){var pe=this.pricesX.toArray()[$],_e=this.pricesY.toArray()[$];P+=(pe-this.SMAxValue)*(_e-this.SMAyValue),F+=Math.pow(pe-this.SMAxValue,2),Y+=Math.pow(_e-this.SMAyValue,2)}return P/Math.sqrt(F*Y)},q}(),E=function(){function q(S){this.period=S,this.denominator=S*(S+1)/2,this.buffer=new c(S),this.values=[]}return q.prototype.nextValue=function(S){var I=this;if(this.buffer.push(S),this.buffer.filled){var P=0;return this.buffer.forEach(function(F,Y){P+=F*(Y+1)/I.denominator}),P}},q.prototype.momentValue=function(S){var I=this,P=this.buffer.push(S);if(this.buffer.filled){var F=0;return this.buffer.forEach(function(Y,$){F+=Y*($+1)/I.denominator}),this.buffer.pushback(P),F}this.buffer.pushback(P)},q}(),O=function(){function q(S){S===void 0&&(S=.2),this.alpha=S,this.filled=!1}return q.prototype.nextValue=function(S){var I=this.alpha*S+(1-this.alpha)*(this.prevValue||1);if(this.filled=this.filled||this.prevValue!==void 0,this.prevValue=I,this.filled)return I},q.prototype.momentValue=function(S){if(this.filled)return this.alpha*S+(1-this.alpha)*(this.prevValue||1)},q}(),T=function(){function q(S){this.period=S,this.sum=0,this.avg=0,this.filled=!1,this.fill=0}return q.prototype.nextValue=function(S){var I=this;return this.filled?(this.nextValue=function(P){return I.avg=(I.avg*(I.period-1)+P)/I.period},this.nextValue(S)):(this.sum+=S,this.fill++,this.fill===this.period?(this.filled=!0,this.avg=this.sum/this.period,this.avg):void 0)},q.prototype.momentValue=function(S){if(this.filled)return(this.avg*(this.period-1)+S)/this.period},q}(),k=function(){function q(S){S===void 0&&(S=14),this.period=S,this.alpha=1/S,this.sma=new d(this.period)}return q.prototype.nextValue=function(S){var I=this;return this.prevValue?(this.prevValue=this.alpha*S+(1-this.alpha)*this.prevValue,this.nextValue=function(P){return I.prevValue=I.alpha*P+(1-I.alpha)*I.prevValue,I.prevValue}):this.prevValue=this.sma.nextValue(S),this.prevValue},q.prototype.momentValue=function(S){if(this.prevValue)return this.alpha*S+(1-this.alpha)*this.prevValue},q}(),D=function(){function q(S,I){S===void 0&&(S=5),I===void 0&&(I=34),this.smaSlow=new d(I),this.smaFast=new d(S)}return q.prototype.nextValue=function(S,I){var P=this;if(this.smaSlowValue=this.smaSlow.nextValue((S+I)/2),this.smaFastValue=this.smaFast.nextValue((S+I)/2),this.smaSlowValue!==void 0&&this.smaFastValue!==void 0)return this.nextValue=function(F,Y){return P.smaSlowValue=P.smaSlow.nextValue((F+Y)/2),P.smaFastValue=P.smaFast.nextValue((F+Y)/2),P.smaFastValue-P.smaSlowValue},this.momentValue=function(F,Y){return P.smaFast.momentValue((F+Y)/2)-P.smaSlow.momentValue((F+Y)/2)},this.smaFastValue-this.smaSlowValue},q.prototype.momentValue=function(S,I){},q}(),M=function(){function q(){this.sma=new d(5),this.ao=new D}return q.prototype.nextValue=function(S,I){var P=this;if(this.aoValue=this.ao.nextValue(S,I),this.aoValue!==void 0&&(this.smaValue=this.sma.nextValue(this.aoValue),this.smaValue!==void 0))return this.nextValue=function(F,Y){return P.aoValue=P.ao.nextValue(F,Y),P.smaValue=P.sma.nextValue(P.aoValue),P.aoValue-P.smaValue},this.momentValue=function(F,Y){return P.ao.momentValue(F,Y)-P.sma.momentValue(P.aoValue)},this.aoValue-this.smaValue},q.prototype.momentValue=function(S,I){},q}(),N=function(){function q(S){S===void 0&&(S=14),this.positiveMoneyFlowSum=0,this.negativeMoneyFlowSum=0,this.pevTypicalPrice=0,this.posCircular=new c(S),this.negCircular=new c(S)}return q.prototype.nextValue=function(S,I,P,F){var Y=(S+I+P)/3,$=Y*F;if(this.pevTypicalPrice){var pe=Y>this.pevTypicalPrice?$:0,_e=Y<this.pevTypicalPrice?$:0;this.pevTypicalPrice=Y,this.negativeMoneyFlowSum+=_e,this.positiveMoneyFlowSum+=pe;var Ne=this.posCircular.push(pe),ve=this.negCircular.push(_e);if(this.posCircular.filled)return this.negativeMoneyFlowSum-=ve||0,this.positiveMoneyFlowSum-=Ne||0,100-100/(1+this.positiveMoneyFlowSum/this.negativeMoneyFlowSum)}else this.pevTypicalPrice=Y},q.prototype.momentValue=function(S,I,P,F){var Y=(S+I+P)/3,$=Y*F;if(this.pevTypicalPrice){var pe=Y>this.pevTypicalPrice?$:0,_e=Y<this.pevTypicalPrice?$:0;if(this.posCircular.filled){var Ne=this.posCircular.peek(),ve=this.negCircular.peek(),Ge=this.negativeMoneyFlowSum+_e-ve;return 100-100/(1+(this.positiveMoneyFlowSum+pe-Ne)/Ge)}}},q}(),L=function(q,S){return(q-S)/S*100},B=function(){function q(S){this.period=S,this.value=0,this.changes=new c(S)}return q.prototype.nextValue=function(S){if(this.prevPrice){var I=L(S,this.prevPrice);return this.calculate(I),this.prevPrice=S,this.value}this.prevPrice=S},q.prototype.calculate=function(S){return this.value+=S,this.value-=this.changes.push(S),this.value},q}();function H(q){return q.consolidate=0,q.power=0,q.streak=0,q.diff=0,q.startPrice=0,q.prevPeak=0,q}var Z=function(){function q(){this.up={consolidate:0,power:0,streak:0,startPrice:0,diff:0,prevPeak:0},this.down={consolidate:0,power:0,streak:0,startPrice:0,diff:0,prevPeak:0}}return q.prototype.nextValue=function(S,I,P,F){if(S<I||this.up.streak&&this.up.prevPeak<F){this.up.startPrice||(this.up.startPrice=S),this.down.streak&&H(this.down);var Y=I-S;this.up.streak++,this.up.prevPeak=F,this.up.diff>Y?this.up.consolidate++:this.up.consolidate=0,this.up.diff=Y,this.up.power=L(I,this.up.startPrice)}return(S>I||this.down.streak&&this.down.prevPeak>P)&&(this.down.startPrice||(this.down.startPrice=S),this.up.streak&&H(this.up),Y=S-I,this.down.streak++,this.down.prevPeak=P,this.down.diff>Y?this.down.consolidate++:this.down.consolidate=0,this.down.diff=Y,this.down.power=L(I,this.down.startPrice)),S===I&&(this.up.streak++,this.down.streak++,this.up.diff=this.down.diff=0),this.up.streak>this.down.streak?t({},this.up):t({},this.down)},q}(),re=function(){function q(S){this.max=-1/0,this.highest=new c(S)}return q.prototype.filled=function(){return this.highest.filled},q.prototype.nextValue=function(S){return this.max<S&&(this.max=S),this.highest.push(S)===this.max&&S!==this.max&&(this.max=function(I){for(var P=-1/0,F=I.length-1;F>=0;F--){var Y=I[F];P<Y&&(P=Y)}return P}(this.highest.toArray())),this.max},q.prototype.momentValue=function(S){return this.max>S?this.max:S},q}(),Q=function(){function q(S){this.min=1/0,this.lowest=new c(S)}return q.prototype.filled=function(){return this.lowest.filled},q.prototype.nextValue=function(S){return this.min>S&&(this.min=S),this.lowest.push(S)===this.min&&S!==this.min&&(this.min=function(I){for(var P=1/0,F=I.length-1;F>=0;F--){var Y=I[F];P>Y&&(P=Y)}return P}(this.lowest.toArray())),this.min},q.prototype.momentValue=function(S){return this.min<S?this.min:S},q}(),G=function(){function q(S,I){S===void 0&&(S=14),I===void 0&&(I=3),this.period=S,this.smaPeriod=I,this.sma=new d(this.smaPeriod),this.max=new re(S),this.min=new Q(S)}return q.prototype.nextValue=function(S,I,P){var F=this.max.nextValue(S),Y=this.min.nextValue(I);if(this.max.filled()){var $=(P-Y)/(F-Y)*100;return{k:$,d:this.sma.nextValue($)}}},q.prototype.momentValue=function(S,I,P){if(this.max.filled()){var F=this.max.momentValue(S),Y=this.min.momentValue(I),$=(P-Y)/(F-Y)*100;return{k:$,d:this.sma.momentValue($)}}},q}(),ae=function(){function q(S){this.avgGain=new T(S),this.avgLoss=new T(S)}return q.prototype.nextValue=function(S){var I=S-this.prev;if(this.prev){var P=I>0?I:0,F=I<0?I:0,Y=this.avgGain.nextValue(P),$=this.avgLoss.nextValue(F);return this.prev=S,{upAvg:Y,downAvg:$}}this.prev=S},q.prototype.momentValue=function(S){var I=S-this.prev,P=I>0?I:0,F=I<0?I:0;return{upAvg:this.avgGain.momentValue(P),downAvg:this.avgLoss.momentValue(F)}},q}(),ne=function(){function q(S){S===void 0&&(S=14),this.period=S,this.change=new ae(this.period)}return q.prototype.nextValue=function(S){var I=this.change.nextValue(S)||{},P=I.downAvg,F=I.upAvg;if(F!==void 0&&P!==void 0)return 100-100/(1+F/-P)},q.prototype.momentValue=function(S){var I=this.change.momentValue(S)||{},P=I.downAvg,F=I.upAvg;if(F!==void 0&&P!==void 0)return 100-100/(1+F/-P)},q}(),De=function(){function q(S,I,P,F){S===void 0&&(S=14),I===void 0&&(I=3),P===void 0&&(P=3),F===void 0&&(F=14),this.rsi=new ne(S),this.sma1=new d(I),this.sma2=new d(P),this.max=new re(F),this.min=new Q(F)}return q.prototype.nextValue=function(S){var I=this.rsi.nextValue(S);if(I!==void 0){var P=this.max.nextValue(I),F=this.min.nextValue(I);if(this.max.filled()){var Y=(I-F)/(P-F)*100,$=this.sma1.nextValue(Y);if($!==void 0)return{k:$,d:this.sma2.nextValue($),stochRsi:Y}}}},q.prototype.momentValue=function(S){if(this.max.filled()){var I=this.rsi.momentValue(S),P=this.max.momentValue(I),F=this.min.momentValue(I),Y=(I-F)/(P-F)*100,$=this.sma1.momentValue(Y);return{k:$,d:this.sma2.momentValue($),stochRsi:Y}}},q}(),ue=function(){function q(S){this.period=S,this.values=new c(S)}return q.prototype.nextValue=function(S,I){if(I)return this.nextValue=this.pureNextValue,this.momentValue=this.pureMomentValue,this.pureNextValue(S,I);this.values.push(S)},q.prototype.momentValue=function(S,I){},q.prototype.pureNextValue=function(S,I){var P=this;return this.values.push(S),this.values.toArray().reduce(function(F,Y){return F+P.positiveDelta(I,Y)},0)/this.period},q.prototype.pureMomentValue=function(S,I){var P=this,F=this.values.push(S),Y=this.values.toArray().reduce(function($,pe){return $+P.positiveDelta(I,pe)},0);return this.values.pushback(F),Y/this.period},q.prototype.positiveDelta=function(S,I){return S>I?S-I:I-S},q}(),le=function(){function q(S){S===void 0&&(S=20),this.md=new ue(S),this.sma=new d(S)}return q.prototype.nextValue=function(S,I,P){var F=(S+I+P)/3,Y=this.sma.nextValue(F),$=this.md.nextValue(F,Y);return $&&(F-Y)/(.015*$)},q.prototype.momentValue=function(S,I,P){var F=(S+I+P)/3,Y=this.sma.momentValue(F),$=this.md.momentValue(F,Y);return $&&(F-Y)/(.015*$)},q}(),ee=function(){function q(S){this.period=S,this.arr=[],this.filled=!1,this.devider=0,this.lastSum=0,this.devider=function(I){for(var P=0,F=I.length;F>0;)P+=I[--F];return P}(Array.from(Array(this.period).keys()).map(function(I){return I+1}))}return q.prototype.nextValue=function(S){if(this.filled=this.filled||this.arr.length===this.period,this.arr.push(S),this.filled)return this.arr.shift(),this.arr.reduce(function(I,P,F){return I+P*(F+1)},0)/this.devider},q.prototype.momentValue=function(S){if(this.filled){var I=this.arr.slice(1);return I.push(S),I.reduce(function(P,F,Y){return P+F*(Y+1)},0)/this.devider}},q}();function fe(q,S,I){if(I){var P=q-S,F=q>I?q-I:I-q,Y=S>I?S-I:I-S;return P>=F&&P>=Y?P:F>=P&&F>=Y?F:Y}}var ye=function(){function q(S,I){switch(S===void 0&&(S=14),I===void 0&&(I="WEMA"),I){case"SMA":this.avg=new d(S);break;case"EMA":this.avg=new p(S);break;case"SMMA":this.avg=new T(S);break;case"WEMA":this.avg=new h(S);break;case"LWMA":this.avg=new ee(S);break;case"EWMA":this.avg=new O(.2);break;case"RMA":this.avg=new k(S)}this.prevClose=0}return q.prototype.nextValue=function(S,I,P){var F=fe(S,I,this.prevClose);if(this.prevClose=P,F!==void 0)return this.avg.nextValue(F)},q.prototype.momentValue=function(S,I){var P=fe(S,I,this.prevClose);if(P!==void 0)return this.avg.momentValue(P)},q}(),ke=function(){function q(S){S===void 0&&(S=5),this.values=new c(S)}return q.prototype.nextValue=function(S){var I=this.values.push(S);if(I)return(S-I)/I*100},q.prototype.momentValue=function(S){var I=this.values.peek();if(I)return(S-I)/I*100},q}(),Qe=function(){function q(S){S===void 0&&(S=20),this.maxProvider=new re(S),this.minProvider=new Q(S)}return q.prototype.nextValue=function(S,I){var P=this.maxProvider.nextValue(S),F=this.minProvider.nextValue(I);return{upper:P,middle:(P+F)/2,lower:F}},q.prototype.momentValue=function(S,I){var P=this.maxProvider.momentValue(S),F=this.minProvider.momentValue(I);return{upper:P,middle:(P+F)/2,lower:F}},q}(),Ee=function(){function q(S){this.period=S,this.fill=0,this.values=new c(S)}return q.prototype.nextValue=function(S){var I=this;if(this.values.push(S),this.fill++,this.fill===this.period)return this.nextValue=function(P){var F=I.calc(P);return I.values.push(P),F},this.momentValue=this.calc,this.calc(S)},q.prototype.momentValue=function(S){},q.prototype.calc=function(S){var I=0;return this.values.toArray().forEach(function(P){P<=S&&I++}),I/this.period*100},q}(),Ve=function(){function q(S,I,P){S===void 0&&(S=3),I===void 0&&(I=2),P===void 0&&(P=100),this.period=S,this.rsi=new ne(this.period),this.updownRsi=new ne(I),this.roc=new ke(1),this.percentRank=new Ee(P),this.updownPeriod=0,this.prevClose=0}return q.prototype.nextValue=function(S){var I=this.rsi.nextValue(S),P=this.percentRank.nextValue(this.roc.nextValue(S));if(this.updownPeriod=this.getUpdownPeriod(S),this.prevClose=S,this.updownValue=this.updownRsi.nextValue(this.updownPeriod),this.updownValue)return(I+this.updownValue+P)/3},q.prototype.momentValue=function(S){var I=this.rsi.momentValue(S),P=this.percentRank.momentValue(this.roc.momentValue(S)),F=this.getUpdownPeriod(S),Y=this.updownRsi.momentValue(F);if(Y!==void 0)return(I+Y+P)/3},q.prototype.getUpdownPeriod=function(S){var I=this.updownPeriod;return S>this.prevClose?(this.updownPeriod<0&&(I=0),I++):S<this.prevClose?(this.updownPeriod>0&&(I=0),I--):I=0,I},q}(),Ce=function(){function q(S){this.period=S,this.values=new c(S)}return q.prototype.nextValue=function(S,I){return this.values.push(S),Math.sqrt(this.values.toArray().reduce(function(P,F){return P+Math.pow(F-I,2)},0)/this.period)},q.prototype.momentValue=function(S,I){var P=this.values.push(S),F=Math.sqrt(this.values.toArray().reduce(function(Y,$){return Y+Math.pow($-I,2)},0)/this.period);return this.values.pushback(P),F},q}(),Pe=function(){function q(S,I){S===void 0&&(S=20),I===void 0&&(I=2),this.period=S,this.stdDev=I,this.fill=0,this.sma=new d(S),this.sd=new Ce(S)}return q.prototype.nextValue=function(S){var I=this,P=this.sma.nextValue(S),F=this.sd.nextValue(S,P);if(this.fill++,this.fill===this.period){var Y=P-this.stdDev*F,$=P+this.stdDev*F;return this.nextValue=function(pe){var _e=I.sma.nextValue(pe),Ne=I.sd.nextValue(pe,_e);return{lower:_e-I.stdDev*Ne,middle:_e,upper:_e+I.stdDev*Ne}},{lower:Y,middle:P,upper:$}}},q.prototype.momentValue=function(S){var I=this.sma.momentValue(S),P=this.sd.momentValue(S,I);return{lower:I-this.stdDev*P,middle:I,upper:I+this.stdDev*P}},q}(),be=function(){function q(S,I,P){S===void 0&&(S=12),I===void 0&&(I=26),P===void 0&&(P=9),this.periodEmaFast=S,this.periodEmaSlow=I,this.periodSignal=P,this.emaFastIndicator=new p(S),this.emaSlowIndicator=new p(I),this.emaSignalIndicator=new p(P)}return q.prototype.nextValue=function(S){var I=this.emaFastIndicator.nextValue(S),P=this.emaSlowIndicator.nextValue(S),F=I-P,Y=F&&this.emaSignalIndicator.nextValue(F)||void 0,$=F-Y||void 0;if(!isNaN(F))return{macd:F,emaFast:I,emaSlow:P,signal:Y,histogram:$}},q.prototype.momentValue=function(S){var I=this.emaFastIndicator.momentValue(S),P=this.emaSlowIndicator.momentValue(S),F=I-P,Y=F&&this.emaSignalIndicator.momentValue(F);return{macd:F,emaFast:I,emaSlow:P,signal:Y,histogram:F-Y}},q}(),Ye=function(){function q(){this.prevOpen=0,this.prevClose=0}return q.prototype.nextValue=function(S,I,P,F){var Y=this.calculate(S,I,P,F);return this.prevClose=Y.c,this.prevOpen=Y.o,Y},q.prototype.momentValue=function(S,I,P,F){return this.calculate(S,I,P,F)},q.prototype.calculate=function(S,I,P,F){return F=(S+I+P+F)/4,this.prevOpen&&(S=(this.prevOpen+this.prevClose)/2),{o:S,h:I=Math.max(I,S,F),l:P=Math.min(P,S,F),c:F}},q}(),lt=function(){function q(S){switch(S===void 0&&(S="classic"),this.mode=S,this.mode){case"classic":this.calculator=this.classic;break;case"camarilla":this.calculator=this.camarilla;break;case"woodie":this.calculator=this.woodie;break;case"fibonacci":this.calculator=this.fibonacci}}return q.prototype.nextValue=function(S,I,P){return this.calculator(S,I,P)},q.prototype.classic=function(S,I,P){var F=(S+I+P)/3;return{r3:S+2*(F-I),r2:F+(S-I),r1:2*F-I,pp:F,s1:2*F-S,s2:F-(S-I),s3:I-2*(S-F)}},q.prototype.woodie=function(S,I,P){var F=(S+I+2*P)/4;return{r2:F+S-I,r1:2*F-I,pp:F,s1:2*F-S,s2:F-S+I}},q.prototype.camarilla=function(S,I,P){var F=1.1*(S-I),Y=S/I*P,$=P+F/2,pe=Y+1.168*(Y-$);return{r6:pe,r5:Y,r4:$,r3:P+F/4,r2:P+F/6,r1:P+F/12,pp:(S+I+P)/3,s1:P-F/12,s2:P-F/6,s3:P-F/4,s4:P-F/2,s5:P-(Y-P),s6:P-(pe-P)}},q.prototype.fibonacci=function(S,I,P){var F=S-I,Y=(S+I+P)/3;return{r3:Y+F,r2:Y+.618*F,r1:Y+.382*F,pp:Y,s1:Y-.382*F,s2:Y-.618*F,s3:Y-F}},q}(),je=function(){function q(S,I,P){S===void 0&&(S=.02),I===void 0&&(I=.02),P===void 0&&(P=.2),this.start=S,this.acceleration=I,this.max=P,this.result=0,this.isBullTrend=!0}return q.prototype.nextValue=function(S,I,P){if(!this.result)return this.result=P,this.low1=I,this.high1=S,this.low2=I,this.high2=S,this.highest=S,this.lowest=I,this.accelerationFactor=this.start,I;if(this.isBullTrend?this.psar=this.result+this.accelerationFactor*(this.highest-this.result):this.psar=this.result+this.accelerationFactor*(this.lowest-this.result),this.isBullTrend)if(I<this.psar)this.isBullTrend=!1,this.psar=this.highest,this.lowest=I,this.accelerationFactor=this.start;else{if(S>this.highest){this.highest=S;var F=this.accelerationFactor+this.acceleration;this.accelerationFactor=F>this.max?this.max:F}this.low1<this.psar&&(this.psar=this.low1),this.low2<this.psar&&(this.psar=this.low2)}else S>this.psar?(this.isBullTrend=!0,this.psar=this.lowest,this.highest=S,this.accelerationFactor=this.start):(I<this.lowest&&(this.lowest=I,F=this.accelerationFactor+this.acceleration,this.accelerationFactor=F>this.max?this.max:F),this.high1>this.psar&&(this.psar=this.high1),this.high2>this.psar&&(this.psar=this.high2));return this.low2=this.low1,this.low1=I,this.high2=this.high1,this.high1=S,this.result=this.psar,this.result},q.prototype.momentValue=function(S,I){if(!this.result)return I;var P,F=this.isBullTrend,Y=this.result,$=this.low1,pe=this.high1,_e=this.low2,Ne=this.high2,ve=this.highest,Ge=this.lowest,Me=this.accelerationFactor;return P=F?Y+Me*(ve-Y):Y+Me*(Ge-Y),F?I<P?P=ve:($<P&&(P=$),_e<P&&(P=_e)):S>P?P=Ge:(pe>P&&(P=pe),Ne>P&&(P=Ne)),P},q}(),me=function(){function q(S){this.period=S,this.prevValue=0,this.sumCount=1}return q.prototype.nextValue=function(S){var I=this;return this.sumCount<this.period?(this.prevValue+=S,void this.sumCount++):this.sumCount===this.period?(this.prevValue+=S,this.sumCount++,this.nextValue=function(P){return I.prevValue=I.prevValue-I.prevValue/I.period+P},this.prevValue):void 0},q.prototype.momentValue=function(S){if(!(this.sumCount<this.period))return this.prevValue-this.prevValue/this.period+S},q}(),We=function(){function q(S){S===void 0&&(S=14),this.period=S,this.wma1=new me(S),this.wma2=new me(S),this.wma3=new me(S),this.wema=new h(S)}return q.prototype.nextValue=function(S,I,P){if(!this.prevClose)return this.prevHigh=S,this.prevLow=I,void(this.prevClose=P);var F=0,Y=0,$=S-this.prevHigh,pe=this.prevLow-I;$>pe&&$>0&&(F=$),pe>$&&pe>0&&(Y=pe),(F>Y||Y<0)&&(Y=0);var _e=this.wma1.nextValue(fe(S,I,this.prevClose)),Ne=this.wma2.nextValue(F),ve=this.wma3.nextValue(Y);if(this.prevHigh=S,this.prevLow=I,this.prevClose=P,Ne!==void 0&&ve!==void 0){var Ge=100*Ne/_e,Me=100*ve/_e,Zt=Ge>Me?Ge-Me:Me-Ge;return{adx:this.wema.nextValue(Zt/(Ge+Me)*100),pdi:Ge,mdi:Me}}},q.prototype.momentValue=function(S,I,P){if(this.prevClose){var F=0,Y=0,$=S-this.prevHigh,pe=this.prevLow-I;$>pe&&$>0&&(F=$),pe>$&&pe>0&&(Y=pe),(F>Y||Y<0)&&(Y=0);var _e=this.wma1.momentValue(fe(S,I,this.prevClose)),Ne=this.wma2.momentValue(F),ve=this.wma3.momentValue(Y);if(Ne!==void 0&&ve!==void 0){var Ge=100*Ne/_e,Me=100*ve/_e,Zt=Ge>Me?Ge-Me:Me-Ge;return{adx:this.wema.momentValue(Zt/(Ge+Me)*100),pdi:Ge,mdi:Me}}}},q}(),Re=function(){function q(S,I,P){S===void 0&&(S=10),I===void 0&&(I=3),P===void 0&&(P="WEMA"),this.multiplier=I,this.atr=new ye(S,P)}return q.prototype.nextValue=function(S,I,P){var F=this.atr.nextValue(S,I,P);if(F){var Y=(S+I)/2,$=Y+this.multiplier*F,pe=Y-this.multiplier*F;this.prevLower&&(pe=pe>this.prevLower||this.prevClose<this.prevLower?pe:this.prevLower,$=$<this.prevUpper||this.prevClose>this.prevUpper?$:this.prevUpper);var _e=$,Ne=(_e=this.prevSuper===this.prevUpper?P>$?pe:$:P<pe?$:pe)===$?1:-1;return this.prevUpper=$,this.prevLower=pe,this.prevSuper=_e,this.prevClose=P,{upper:$,lower:pe,superTrend:_e,direction:Ne}}},q.prototype.momentValue=function(S,I,P){var F=this.atr.momentValue(S,I),Y=(S+I)/2,$=Y+this.multiplier*F,pe=Y-this.multiplier*F;this.prevLower&&(pe=pe>this.prevLower||this.prevClose<this.prevLower?pe:this.prevLower,$=$<this.prevSuper||this.prevClose>this.prevUpper?$:this.prevUpper);var _e=$;return{upper:$,lower:pe,superTrend:_e=this.prevSuper===this.prevUpper?P>$?pe:$:P<pe?$:pe,direction:_e===$?1:-1}},q}(),xe=function(q){return(q.o+q.h+q.l+q.c)/4},ut=function(){function q(S,I){S===void 0&&(S=4),I===void 0&&(I=xe),this.sum=0,this.sessionPricesLookup=new Set,this.sessionVolumes={},this.prevCandle=null,this.source=I,this.precision=S,this.valueToRoundWith=Math.pow(10,this.precision)}return q.prototype.getSession=function(S,I){var P=this;I===void 0&&(I=15);var F=this.source(S),Y=1/0,$=F;this.sessionPricesLookup.forEach(function(Ma){var qc=P.diffPercent(Ma,F);qc>I?(P.sessionPricesLookup.delete(Ma),delete P.sessionVolumes[Ma]):qc<Y&&(Y=qc,$=Ma)});var pe=Array.from(this.sessionPricesLookup).sort(),_e=pe.indexOf($),Ne=new Map;if(_e===-1)return Ne;for(var ve=Math.round(pe.length/4),Ge=0,Me=0;Me<4;Me++){for(var Zt=Me*ve,kt=Zt+ve,Pi=0,Rr=0,Bc=Zt;Bc<kt;Bc++){var Ph=pe[Zt],Nh=this.sessionVolumes[Ph];Pi<Nh&&(Pi=Nh,Rr=Ph)}this.diffPercent(Ge,Rr)<1&&(Pi=Ne.get(Ge)+Pi,Rr=this.roundPrice((Rr+Ge)/2),Ne.delete(Ge)),Ne.set(Rr,Pi),Ge=Rr}return Ne},q.prototype.getSessionAvg=function(){return this.sum/this.sessionPricesLookup.size},q.prototype.getRawSession=function(){return this.sessionVolumes},q.prototype.nextValue=function(S){var I,P=this.roundPrice(this.source(S)),F=((I=this.prevCandle)===null||I===void 0?void 0:I.time)===S.time?S.v-this.prevCandle.v:S.v;this.addToSession(P,F),this.sum+=F,this.lastPrice=P,this.prevCandle=S},q.prototype.roundPrice=function(S){return Math.round((S+Number.EPSILON)*this.valueToRoundWith)/this.valueToRoundWith},q.prototype.addToSession=function(S,I){this.sessionPricesLookup.has(S)?this.sessionVolumes[S]+=I:(this.sessionPricesLookup.add(S),this.sessionVolumes[S]=I)},q.prototype.diffPercent=function(S,I){return S<I?100*(I-S)/S:100*(S-I)/I},q}(),jn=function(){function q(S,I){S===void 0&&(S=3),I===void 0&&(I=10),this.accDistribution=0,this.emaFast=new p(S),this.emaSlow=new p(I)}return q.prototype.nextValue=function(S,I,P,F){return this.accDistribution+=P===S&&P===I||S===I?0:(2*P-I-S)/(S-I)*F,this.emaFast.nextValue(this.accDistribution)-this.emaSlow.nextValue(this.accDistribution)},q.prototype.momentValue=function(S,I,P,F){var Y=this.accDistribution+(P===S&&P===I||S===I?0:(2*P-I-S)/(S-I)*F);return this.emaFast.momentValue(Y)-this.emaSlow.momentValue(Y)},q}(),zt=function(){function q(S,I,P){I===void 0&&(I=4),P===void 0&&(P=30),this.sumNoise=0,this.circular=new c(S),this.nfastend=2/(I+1),this.nslowend=2/(P+1),this.prevPrice=0,this.prevAMA=0}return q.prototype.nextValue=function(S){var I,P=this.prevPrice,F=Math.abs(S-P),Y=(I=this.circular.push(F))!==null&&I!==void 0?I:0;if(this.sumNoise+=F-(this.circular.filled?Y:0),!this.circular.filled)return this.prevAMA=S,void(this.prevPrice=S);var $=Math.abs(S-P),pe=this.sumNoise,_e=pe!==0?$/pe:0,Ne=Math.pow(_e*(this.nfastend-this.nslowend)+this.nslowend,2),ve=this.prevAMA+Ne*(S-this.prevAMA);return this.prevAMA=ve,this.prevPrice=S,ve},q.prototype.momentValue=function(){return this.prevAMA},q}();n.AC=M,n.ADX=We,n.AMA=zt,n.AO=D,n.ATR=ye,n.BollingerBands=Pe,n.CCI=le,n.ChaikinOscillator=jn,n.CircularBuffer=c,n.Correlation=b,n.DC=Qe,n.EMA=p,n.EWMA=O,n.Extremums=u,n.HeikenAshi=Ye,n.LWMA=ee,n.Level=v,n.MACD=be,n.MFI=N,n.Move=B,n.PSAR=je,n.Pivot=lt,n.RMA=k,n.ROC=ke,n.RSI=ne,n.SMA=d,n.SMMA=T,n.Sampler=g,n.StandardDeviation=Ce,n.Stochastic=G,n.StochasticRSI=De,n.SuperTrend=Re,n.TrendLines=l,n.UniLevel=A,n.VolumeProfile=ut,n.WEMA=h,n.WMA=E,n.WWS=me,n.Wave=Z,n.cRSI=Ve,Object.defineProperty(n,"__esModule",{value:!0})})});var T3=Xm((lS,cS)=>{((n,e)=>{typeof define=="function"&&define.amd?define([],e):typeof cS=="object"&&typeof lS<"u"?cS.exports=e():n.Papa=e()})(lS,function n(){var e=typeof self<"u"?self:typeof window<"u"?window:e!==void 0?e:{},t,i=!e.document&&!!e.postMessage,r=e.IS_PAPA_WORKER||!1,s={},o=0,a={};function l(D){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(M){var N=O(M);N.chunkSize=parseInt(N.chunkSize),M.step||M.chunk||(N.chunkSize=null),this._handle=new p(N),(this._handle.streamer=this)._config=N}.call(this,D),this.parseChunk=function(M,N){var L=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<L){let H=this._config.newline;H||(B=this._config.quoteChar||'"',H=this._handle.guessLineEndings(M,B)),M=[...M.split(H).slice(L)].join(H)}this.isFirstChunk&&k(this._config.beforeFirstChunk)&&(B=this._config.beforeFirstChunk(M))!==void 0&&(M=B),this.isFirstChunk=!1,this._halted=!1;var L=this._partialLine+M,B=(this._partialLine="",this._handle.parse(L,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(M=B.meta.cursor,L=(this._finished||(this._partialLine=L.substring(M-this._baseIndex),this._baseIndex=M),B&&B.data&&(this._rowCount+=B.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),r)e.postMessage({results:B,workerId:a.WORKER_ID,finished:L});else if(k(this._config.chunk)&&!N){if(this._config.chunk(B,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=B=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(B.data),this._completeResults.errors=this._completeResults.errors.concat(B.errors),this._completeResults.meta=B.meta),this._completed||!L||!k(this._config.complete)||B&&B.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),L||B&&B.meta.paused||this._nextChunk(),B}this._halted=!0},this._sendError=function(M){k(this._config.error)?this._config.error(M):r&&this._config.error&&e.postMessage({workerId:a.WORKER_ID,error:M,finished:!1})}}function c(D){var M;(D=D||{}).chunkSize||(D.chunkSize=a.RemoteChunkSize),l.call(this,D),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(N){this._input=N,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(M=new XMLHttpRequest,this._config.withCredentials&&(M.withCredentials=this._config.withCredentials),i||(M.onload=T(this._chunkLoaded,this),M.onerror=T(this._chunkError,this)),M.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var N,L=this._config.downloadRequestHeaders;for(N in L)M.setRequestHeader(N,L[N])}var B;this._config.chunkSize&&(B=this._start+this._config.chunkSize-1,M.setRequestHeader("Range","bytes="+this._start+"-"+B));try{M.send(this._config.downloadRequestBody)}catch(H){this._chunkError(H.message)}i&&M.status===0&&this._chunkError()}},this._chunkLoaded=function(){M.readyState===4&&(M.status<200||400<=M.status?this._chunkError():(this._start+=this._config.chunkSize||M.responseText.length,this._finished=!this._config.chunkSize||this._start>=(N=>(N=N.getResponseHeader("Content-Range"))!==null?parseInt(N.substring(N.lastIndexOf("/")+1)):-1)(M),this.parseChunk(M.responseText)))},this._chunkError=function(N){N=M.statusText||N,this._sendError(new Error(N))}}function u(D){(D=D||{}).chunkSize||(D.chunkSize=a.LocalChunkSize),l.call(this,D);var M,N,L=typeof FileReader<"u";this.stream=function(B){this._input=B,N=B.slice||B.webkitSlice||B.mozSlice,L?((M=new FileReader).onload=T(this._chunkLoaded,this),M.onerror=T(this._chunkError,this)):M=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var B=this._input,H=(this._config.chunkSize&&(H=Math.min(this._start+this._config.chunkSize,this._input.size),B=N.call(B,this._start,H)),M.readAsText(B,this._config.encoding));L||this._chunkLoaded({target:{result:H}})},this._chunkLoaded=function(B){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(B.target.result)},this._chunkError=function(){this._sendError(M.error)}}function d(D){var M;l.call(this,D=D||{}),this.stream=function(N){return M=N,this._nextChunk()},this._nextChunk=function(){var N,L;if(!this._finished)return N=this._config.chunkSize,M=N?(L=M.substring(0,N),M.substring(N)):(L=M,""),this._finished=!M,this.parseChunk(L)}}function h(D){l.call(this,D=D||{});var M=[],N=!0,L=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(B){this._input=B,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){L&&M.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),M.length?this.parseChunk(M.shift()):N=!0},this._streamData=T(function(B){try{M.push(typeof B=="string"?B:B.toString(this._config.encoding)),N&&(N=!1,this._checkIsFinished(),this.parseChunk(M.shift()))}catch(H){this._streamError(H)}},this),this._streamError=T(function(B){this._streamCleanUp(),this._sendError(B)},this),this._streamEnd=T(function(){this._streamCleanUp(),L=!0,this._streamData("")},this),this._streamCleanUp=T(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function p(D){var M,N,L,B,H=Math.pow(2,53),Z=-H,re=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Q=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,G=this,ae=0,ne=0,De=!1,ue=!1,le=[],ee={data:[],errors:[],meta:{}};function fe(Ee){return D.skipEmptyLines==="greedy"?Ee.join("").trim()==="":Ee.length===1&&Ee[0].length===0}function ye(){if(ee&&L&&(Qe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),L=!1),D.skipEmptyLines&&(ee.data=ee.data.filter(function(be){return!fe(be)})),ke()){let be=function(Ye,lt){k(D.transformHeader)&&(Ye=D.transformHeader(Ye,lt)),le.push(Ye)};var Pe=be;if(ee)if(Array.isArray(ee.data[0])){for(var Ee=0;ke()&&Ee<ee.data.length;Ee++)ee.data[Ee].forEach(be);ee.data.splice(0,1)}else ee.data.forEach(be)}function Ve(be,Ye){for(var lt=D.header?{}:[],je=0;je<be.length;je++){var me=je,We=be[je],We=((Re,xe)=>(ut=>(D.dynamicTypingFunction&&D.dynamicTyping[ut]===void 0&&(D.dynamicTyping[ut]=D.dynamicTypingFunction(ut)),(D.dynamicTyping[ut]||D.dynamicTyping)===!0))(Re)?xe==="true"||xe==="TRUE"||xe!=="false"&&xe!=="FALSE"&&((ut=>{if(re.test(ut)&&(ut=parseFloat(ut),Z<ut&&ut<H))return 1})(xe)?parseFloat(xe):Q.test(xe)?new Date(xe):xe===""?null:xe):xe)(me=D.header?je>=le.length?"__parsed_extra":le[je]:me,We=D.transform?D.transform(We,me):We);me==="__parsed_extra"?(lt[me]=lt[me]||[],lt[me].push(We)):lt[me]=We}return D.header&&(je>le.length?Qe("FieldMismatch","TooManyFields","Too many fields: expected "+le.length+" fields but parsed "+je,ne+Ye):je<le.length&&Qe("FieldMismatch","TooFewFields","Too few fields: expected "+le.length+" fields but parsed "+je,ne+Ye)),lt}var Ce;ee&&(D.header||D.dynamicTyping||D.transform)&&(Ce=1,!ee.data.length||Array.isArray(ee.data[0])?(ee.data=ee.data.map(Ve),Ce=ee.data.length):ee.data=Ve(ee.data,0),D.header&&ee.meta&&(ee.meta.fields=le),ne+=Ce)}function ke(){return D.header&&le.length===0}function Qe(Ee,Ve,Ce,Pe){Ee={type:Ee,code:Ve,message:Ce},Pe!==void 0&&(Ee.row=Pe),ee.errors.push(Ee)}k(D.step)&&(B=D.step,D.step=function(Ee){ee=Ee,ke()?ye():(ye(),ee.data.length!==0&&(ae+=Ee.data.length,D.preview&&ae>D.preview?N.abort():(ee.data=ee.data[0],B(ee,G))))}),this.parse=function(Ee,Ve,Ce){var Pe=D.quoteChar||'"',Pe=(D.newline||(D.newline=this.guessLineEndings(Ee,Pe)),L=!1,D.delimiter?k(D.delimiter)&&(D.delimiter=D.delimiter(Ee),ee.meta.delimiter=D.delimiter):((Pe=((be,Ye,lt,je,me)=>{var We,Re,xe,ut;me=me||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var jn=0;jn<me.length;jn++){for(var zt,q=me[jn],S=0,I=0,P=0,F=(xe=void 0,new A({comments:je,delimiter:q,newline:Ye,preview:10}).parse(be)),Y=0;Y<F.data.length;Y++)lt&&fe(F.data[Y])?P++:(zt=F.data[Y].length,I+=zt,xe===void 0?xe=zt:0<zt&&(S+=Math.abs(zt-xe),xe=zt));0<F.data.length&&(I/=F.data.length-P),(Re===void 0||S<=Re)&&(ut===void 0||ut<I)&&1.99<I&&(Re=S,We=q,ut=I)}return{successful:!!(D.delimiter=We),bestDelimiter:We}})(Ee,D.newline,D.skipEmptyLines,D.comments,D.delimitersToGuess)).successful?D.delimiter=Pe.bestDelimiter:(L=!0,D.delimiter=a.DefaultDelimiter),ee.meta.delimiter=D.delimiter),O(D));return D.preview&&D.header&&Pe.preview++,M=Ee,N=new A(Pe),ee=N.parse(M,Ve,Ce),ye(),De?{meta:{paused:!0}}:ee||{meta:{paused:!1}}},this.paused=function(){return De},this.pause=function(){De=!0,N.abort(),M=k(D.chunk)?"":M.substring(N.getCharIndex())},this.resume=function(){G.streamer._halted?(De=!1,G.streamer.parseChunk(M,!0)):setTimeout(G.resume,3)},this.aborted=function(){return ue},this.abort=function(){ue=!0,N.abort(),ee.meta.aborted=!0,k(D.complete)&&D.complete(ee),M=""},this.guessLineEndings=function(be,Pe){be=be.substring(0,1048576);var Pe=new RegExp(g(Pe)+"([^]*?)"+g(Pe),"gm"),Ce=(be=be.replace(Pe,"")).split("\r"),Pe=be.split(`
`),be=1<Pe.length&&Pe[0].length<Ce[0].length;if(Ce.length===1||be)return`
`;for(var Ye=0,lt=0;lt<Ce.length;lt++)Ce[lt][0]===`
`&&Ye++;return Ye>=Ce.length/2?`\r
`:"\r"}}function g(D){return D.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function A(D){var M=(D=D||{}).delimiter,N=D.newline,L=D.comments,B=D.step,H=D.preview,Z=D.fastMode,re=null,Q=!1,G=D.quoteChar==null?'"':D.quoteChar,ae=G;if(D.escapeChar!==void 0&&(ae=D.escapeChar),(typeof M!="string"||-1<a.BAD_DELIMITERS.indexOf(M))&&(M=","),L===M)throw new Error("Comment character same as delimiter");L===!0?L="#":(typeof L!="string"||-1<a.BAD_DELIMITERS.indexOf(L))&&(L=!1),N!==`
`&&N!=="\r"&&N!==`\r
`&&(N=`
`);var ne=0,De=!1;this.parse=function(ue,le,ee){if(typeof ue!="string")throw new Error("Input must be a string");var fe=ue.length,ye=M.length,ke=N.length,Qe=L.length,Ee=k(B),Ve=[],Ce=[],Pe=[],be=ne=0;if(!ue)return S();if(Z||Z!==!1&&ue.indexOf(G)===-1){for(var Ye=ue.split(N),lt=0;lt<Ye.length;lt++){if(Pe=Ye[lt],ne+=Pe.length,lt!==Ye.length-1)ne+=N.length;else if(ee)return S();if(!L||Pe.substring(0,Qe)!==L){if(Ee){if(Ve=[],ut(Pe.split(M)),I(),De)return S()}else ut(Pe.split(M));if(H&&H<=lt)return Ve=Ve.slice(0,H),S(!0)}}return S()}for(var je=ue.indexOf(M,ne),me=ue.indexOf(N,ne),We=new RegExp(g(ae)+g(G),"g"),Re=ue.indexOf(G,ne);;)if(ue[ne]===G)for(Re=ne,ne++;;){if((Re=ue.indexOf(G,Re+1))===-1)return ee||Ce.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Ve.length,index:ne}),zt();if(Re===fe-1)return zt(ue.substring(ne,Re).replace(We,G));if(G===ae&&ue[Re+1]===ae)Re++;else if(G===ae||Re===0||ue[Re-1]!==ae){je!==-1&&je<Re+1&&(je=ue.indexOf(M,Re+1));var xe=jn((me=me!==-1&&me<Re+1?ue.indexOf(N,Re+1):me)===-1?je:Math.min(je,me));if(ue.substr(Re+1+xe,ye)===M){Pe.push(ue.substring(ne,Re).replace(We,G)),ue[ne=Re+1+xe+ye]!==G&&(Re=ue.indexOf(G,ne)),je=ue.indexOf(M,ne),me=ue.indexOf(N,ne);break}if(xe=jn(me),ue.substring(Re+1+xe,Re+1+xe+ke)===N){if(Pe.push(ue.substring(ne,Re).replace(We,G)),q(Re+1+xe+ke),je=ue.indexOf(M,ne),Re=ue.indexOf(G,ne),Ee&&(I(),De))return S();if(H&&Ve.length>=H)return S(!0);break}Ce.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Ve.length,index:ne}),Re++}}else if(L&&Pe.length===0&&ue.substring(ne,ne+Qe)===L){if(me===-1)return S();ne=me+ke,me=ue.indexOf(N,ne),je=ue.indexOf(M,ne)}else if(je!==-1&&(je<me||me===-1))Pe.push(ue.substring(ne,je)),ne=je+ye,je=ue.indexOf(M,ne);else{if(me===-1)break;if(Pe.push(ue.substring(ne,me)),q(me+ke),Ee&&(I(),De))return S();if(H&&Ve.length>=H)return S(!0)}return zt();function ut(P){Ve.push(P),be=ne}function jn(P){var F=0;return F=P!==-1&&(P=ue.substring(Re+1,P))&&P.trim()===""?P.length:F}function zt(P){return ee||(P===void 0&&(P=ue.substring(ne)),Pe.push(P),ne=fe,ut(Pe),Ee&&I()),S()}function q(P){ne=P,ut(Pe),Pe=[],me=ue.indexOf(N,ne)}function S(P){if(D.header&&!le&&Ve.length&&!Q){var F=Ve[0],Y={},$=new Set(F);let pe=!1;for(let _e=0;_e<F.length;_e++){let Ne=F[_e];if(Y[Ne=k(D.transformHeader)?D.transformHeader(Ne,_e):Ne]){let ve,Ge=Y[Ne];for(;ve=Ne+"_"+Ge,Ge++,$.has(ve););$.add(ve),F[_e]=ve,Y[Ne]++,pe=!0,(re=re===null?{}:re)[ve]=Ne}else Y[Ne]=1,F[_e]=Ne;$.add(Ne)}pe&&console.warn("Duplicate headers found and renamed."),Q=!0}return{data:Ve,errors:Ce,meta:{delimiter:M,linebreak:N,aborted:De,truncated:!!P,cursor:be+(le||0),renamedHeaders:re}}}function I(){B(S()),Ve=[],Ce=[]}},this.abort=function(){De=!0},this.getCharIndex=function(){return ne}}function v(D){var M=D.data,N=s[M.workerId],L=!1;if(M.error)N.userError(M.error,M.file);else if(M.results&&M.results.data){var B={abort:function(){L=!0,b(M.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:E,resume:E};if(k(N.userStep)){for(var H=0;H<M.results.data.length&&(N.userStep({data:M.results.data[H],errors:M.results.errors,meta:M.results.meta},B),!L);H++);delete M.results}else k(N.userChunk)&&(N.userChunk(M.results,B,M.file),delete M.results)}M.finished&&!L&&b(M.workerId,M.results)}function b(D,M){var N=s[D];k(N.userComplete)&&N.userComplete(M),N.terminate(),delete s[D]}function E(){throw new Error("Not implemented.")}function O(D){if(typeof D!="object"||D===null)return D;var M,N=Array.isArray(D)?[]:{};for(M in D)N[M]=O(D[M]);return N}function T(D,M){return function(){D.apply(M,arguments)}}function k(D){return typeof D=="function"}return a.parse=function(D,M){var N=(M=M||{}).dynamicTyping||!1;if(k(N)&&(M.dynamicTypingFunction=N,N={}),M.dynamicTyping=N,M.transform=!!k(M.transform)&&M.transform,!M.worker||!a.WORKERS_SUPPORTED)return N=null,a.NODE_STREAM_INPUT,typeof D=="string"?(D=(L=>L.charCodeAt(0)!==65279?L:L.slice(1))(D),N=new(M.download?c:d)(M)):D.readable===!0&&k(D.read)&&k(D.on)?N=new h(M):(e.File&&D instanceof File||D instanceof Object)&&(N=new u(M)),N.stream(D);(N=(()=>{var L;return!!a.WORKERS_SUPPORTED&&(L=(()=>{var B=e.URL||e.webkitURL||null,H=n.toString();return a.BLOB_URL||(a.BLOB_URL=B.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",H,")();"],{type:"text/javascript"})))})(),(L=new e.Worker(L)).onmessage=v,L.id=o++,s[L.id]=L)})()).userStep=M.step,N.userChunk=M.chunk,N.userComplete=M.complete,N.userError=M.error,M.step=k(M.step),M.chunk=k(M.chunk),M.complete=k(M.complete),M.error=k(M.error),delete M.worker,N.postMessage({input:D,config:M,workerId:N.id})},a.unparse=function(D,M){var N=!1,L=!0,B=",",H=`\r
`,Z='"',re=Z+Z,Q=!1,G=null,ae=!1,ne=((()=>{if(typeof M=="object"){if(typeof M.delimiter!="string"||a.BAD_DELIMITERS.filter(function(le){return M.delimiter.indexOf(le)!==-1}).length||(B=M.delimiter),typeof M.quotes!="boolean"&&typeof M.quotes!="function"&&!Array.isArray(M.quotes)||(N=M.quotes),typeof M.skipEmptyLines!="boolean"&&typeof M.skipEmptyLines!="string"||(Q=M.skipEmptyLines),typeof M.newline=="string"&&(H=M.newline),typeof M.quoteChar=="string"&&(Z=M.quoteChar),typeof M.header=="boolean"&&(L=M.header),Array.isArray(M.columns)){if(M.columns.length===0)throw new Error("Option columns is empty");G=M.columns}M.escapeChar!==void 0&&(re=M.escapeChar+Z),M.escapeFormulae instanceof RegExp?ae=M.escapeFormulae:typeof M.escapeFormulae=="boolean"&&M.escapeFormulae&&(ae=/^[=+\-@\t\r].*$/)}})(),new RegExp(g(Z),"g"));if(typeof D=="string"&&(D=JSON.parse(D)),Array.isArray(D)){if(!D.length||Array.isArray(D[0]))return De(null,D,Q);if(typeof D[0]=="object")return De(G||Object.keys(D[0]),D,Q)}else if(typeof D=="object")return typeof D.data=="string"&&(D.data=JSON.parse(D.data)),Array.isArray(D.data)&&(D.fields||(D.fields=D.meta&&D.meta.fields||G),D.fields||(D.fields=Array.isArray(D.data[0])?D.fields:typeof D.data[0]=="object"?Object.keys(D.data[0]):[]),Array.isArray(D.data[0])||typeof D.data[0]=="object"||(D.data=[D.data])),De(D.fields||[],D.data||[],Q);throw new Error("Unable to serialize unrecognized input");function De(le,ee,fe){var ye="",ke=(typeof le=="string"&&(le=JSON.parse(le)),typeof ee=="string"&&(ee=JSON.parse(ee)),Array.isArray(le)&&0<le.length),Qe=!Array.isArray(ee[0]);if(ke&&L){for(var Ee=0;Ee<le.length;Ee++)0<Ee&&(ye+=B),ye+=ue(le[Ee],Ee);0<ee.length&&(ye+=H)}for(var Ve=0;Ve<ee.length;Ve++){var Ce=(ke?le:ee[Ve]).length,Pe=!1,be=ke?Object.keys(ee[Ve]).length===0:ee[Ve].length===0;if(fe&&!ke&&(Pe=fe==="greedy"?ee[Ve].join("").trim()==="":ee[Ve].length===1&&ee[Ve][0].length===0),fe==="greedy"&&ke){for(var Ye=[],lt=0;lt<Ce;lt++){var je=Qe?le[lt]:lt;Ye.push(ee[Ve][je])}Pe=Ye.join("").trim()===""}if(!Pe){for(var me=0;me<Ce;me++){0<me&&!be&&(ye+=B);var We=ke&&Qe?le[me]:me;ye+=ue(ee[Ve][We],me)}Ve<ee.length-1&&(!fe||0<Ce&&!be)&&(ye+=H)}}return ye}function ue(le,ee){var fe,ye;return le==null?"":le.constructor===Date?JSON.stringify(le).slice(1,25):(ye=!1,ae&&typeof le=="string"&&ae.test(le)&&(le="'"+le,ye=!0),fe=le.toString().replace(ne,re),(ye=ye||N===!0||typeof N=="function"&&N(le,ee)||Array.isArray(N)&&N[ee]||((ke,Qe)=>{for(var Ee=0;Ee<Qe.length;Ee++)if(-1<ke.indexOf(Qe[Ee]))return!0;return!1})(fe,a.BAD_DELIMITERS)||-1<fe.indexOf(B)||fe.charAt(0)===" "||fe.charAt(fe.length-1)===" ")?Z+fe+Z:fe)}},a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!i&&!!e.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=A,a.ParserHandle=p,a.NetworkStreamer=c,a.FileStreamer=u,a.StringStreamer=d,a.ReadableStreamStreamer=h,e.jQuery&&((t=e.jQuery).fn.parse=function(D){var M=D.config||{},N=[];return this.each(function(H){if(!(t(this).prop("tagName").toUpperCase()==="INPUT"&&t(this).attr("type").toLowerCase()==="file"&&e.FileReader)||!this.files||this.files.length===0)return!0;for(var Z=0;Z<this.files.length;Z++)N.push({file:this.files[Z],inputElem:this,instanceConfig:t.extend({},M)})}),L(),this;function L(){if(N.length===0)k(D.complete)&&D.complete();else{var H,Z,re,Q,G=N[0];if(k(D.before)){var ae=D.before(G.file,G.inputElem);if(typeof ae=="object"){if(ae.action==="abort")return H="AbortError",Z=G.file,re=G.inputElem,Q=ae.reason,void(k(D.error)&&D.error({name:H},Z,re,Q));if(ae.action==="skip")return void B();typeof ae.config=="object"&&(G.instanceConfig=t.extend(G.instanceConfig,ae.config))}else if(ae==="skip")return void B()}var ne=G.instanceConfig.complete;G.instanceConfig.complete=function(De){k(ne)&&ne(De,G.file,G.inputElem),B()},a.parse(G.file,G.instanceConfig)}}function B(){N.splice(0,1),L()}}),r&&(e.onmessage=function(D){D=D.data,a.WORKER_ID===void 0&&D&&(a.WORKER_ID=D.workerId),typeof D.input=="string"?e.postMessage({workerId:a.WORKER_ID,results:a.parse(D.input,D.config),finished:!0}):(e.File&&D.input instanceof File||D.input instanceof Object)&&(D=a.parse(D.input,D.config))&&e.postMessage({workerId:a.WORKER_ID,results:D,finished:!0})}),(c.prototype=Object.create(l.prototype)).constructor=c,(u.prototype=Object.create(l.prototype)).constructor=u,(d.prototype=Object.create(d.prototype)).constructor=d,(h.prototype=Object.create(l.prototype)).constructor=h,a})});function t_(n,e){return Object.is(n,e)}var tn=null,Rh=!1,n_=1,fi=Symbol("SIGNAL");function ot(n){let e=tn;return tn=n,e}function i_(){return tn}var Wc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Uc(n){if(Rh)throw new Error("");if(tn===null)return;tn.consumerOnSignalRead(n);let e=tn.nextProducerIndex++;if(Bh(tn),e<tn.producerNode.length&&tn.producerNode[e]!==n&&jc(tn)){let t=tn.producerNode[e];Vh(t,tn.producerIndexOfThis[e])}tn.producerNode[e]!==n&&(tn.producerNode[e]=n,tn.producerIndexOfThis[e]=jc(tn)?yS(n,tn,e):0),tn.producerLastReadVersion[e]=n.version}function AS(){n_++}function r_(n){if(!(jc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===n_)){if(!n.producerMustRecompute(n)&&!l_(n)){e_(n);return}n.producerRecomputeValue(n),e_(n)}}function s_(n){if(n.liveConsumerNode===void 0)return;let e=Rh;Rh=!0;try{for(let t of n.liveConsumerNode)t.dirty||Y3(t)}finally{Rh=e}}function o_(){return tn?.consumerAllowSignalWrites!==!1}function Y3(n){n.dirty=!0,s_(n),n.consumerMarkedDirty?.(n)}function e_(n){n.dirty=!1,n.lastCleanEpoch=n_}function Lh(n){return n&&(n.nextProducerIndex=0),ot(n)}function a_(n,e){if(ot(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(jc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Vh(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function l_(n){Bh(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(r_(t),i!==t.version))return!0}return!1}function c_(n){if(Bh(n),jc(n))for(let e=0;e<n.producerNode.length;e++)Vh(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function yS(n,e,t){if(vS(n),n.liveConsumerNode.length===0&&wS(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=yS(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Vh(n,e){if(vS(n),n.liveConsumerNode.length===1&&wS(n))for(let i=0;i<n.producerNode.length;i++)Vh(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Bh(r),r.producerIndexOfThis[i]=e}}function jc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Bh(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function vS(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function wS(n){return n.producerNode!==void 0}function u_(n,e){let t=Object.create(G3);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(r_(t),Uc(t),t.value===Fh)throw t.error;return t.value};return i[fi]=t,i}var Qm=Symbol("UNSET"),Jm=Symbol("COMPUTING"),Fh=Symbol("ERRORED"),G3=Ie(ie({},Wc),{value:Qm,dirty:!0,error:null,equal:t_,kind:"computed",producerMustRecompute(n){return n.value===Qm||n.value===Jm},producerRecomputeValue(n){if(n.value===Jm)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Jm;let t=Lh(n),i,r=!1;try{i=n.computation(),ot(null),r=e!==Qm&&e!==Fh&&i!==Fh&&n.equal(e,i)}catch(s){i=Fh,n.error=s}finally{a_(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function K3(){throw new Error}var bS=K3;function SS(n){bS(n)}function d_(n){bS=n}var $3=null;function h_(n,e){let t=Object.create(qh);t.value=n,e!==void 0&&(t.equal=e);let i=()=>(Uc(t),t.value);return i[fi]=t,i}function zc(n,e){o_()||SS(n),n.equal(n.value,e)||(n.value=e,Z3(n))}function p_(n,e){o_()||SS(n),zc(n,e(n.value))}var qh=Ie(ie({},Wc),{equal:t_,value:void 0,kind:"signal"});function Z3(n){n.version++,AS(),s_(n),$3?.()}function f_(n){let e=ot(null);try{return n()}finally{ot(e)}}var g_;function Hc(){return g_}function Fr(n){let e=g_;return g_=n,e}var jh=Symbol("NotFound");function Le(n){return typeof n=="function"}function Ia(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Wh=Ia(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function uo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ht=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(Le(i))try{i()}catch(s){e=s instanceof Wh?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{CS(s)}catch(o){e=e??[],o instanceof Wh?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Wh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)CS(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&uo(t,e)}remove(e){let{_finalizers:t}=this;t&&uo(t,e),e instanceof n&&e._removeParent(this)}};Ht.EMPTY=(()=>{let n=new Ht;return n.closed=!0,n})();var m_=Ht.EMPTY;function Uh(n){return n instanceof Ht||n&&"closed"in n&&Le(n.remove)&&Le(n.add)&&Le(n.unsubscribe)}function CS(n){Le(n)?n():n.unsubscribe()}var Ni={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ka={setTimeout(n,e,...t){let{delegate:i}=ka;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ka;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function zh(n){ka.setTimeout(()=>{let{onUnhandledError:e}=Ni;if(e)e(n);else throw n})}function Lr(){}var xS=__("C",void 0,void 0);function DS(n){return __("E",void 0,n)}function ES(n){return __("N",n,void 0)}function __(n,e,t){return{kind:n,value:e,error:t}}var ho=null;function Pa(n){if(Ni.useDeprecatedSynchronousErrorHandling){let e=!ho;if(e&&(ho={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=ho;if(ho=null,t)throw i}}else n()}function MS(n){Ni.useDeprecatedSynchronousErrorHandling&&ho&&(ho.errorThrown=!0,ho.error=n)}var po=class extends Ht{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Uh(e)&&e.add(this)):this.destination=n5}static create(e,t,i){return new Na(e,t,i)}next(e){this.isStopped?y_(ES(e),this):this._next(e)}error(e){this.isStopped?y_(DS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?y_(xS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},e5=Function.prototype.bind;function A_(n,e){return e5.call(n,e)}var v_=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Hh(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Hh(i)}else Hh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Hh(t)}}},Na=class extends po{constructor(e,t,i){super();let r;if(Le(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&Ni.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&A_(e.next,s),error:e.error&&A_(e.error,s),complete:e.complete&&A_(e.complete,s)}):r=e}this.destination=new v_(r)}};function Hh(n){Ni.useDeprecatedSynchronousErrorHandling?MS(n):zh(n)}function t5(n){throw n}function y_(n,e){let{onStoppedNotification:t}=Ni;t&&ka.setTimeout(()=>t(n,e))}var n5={closed:!0,next:Lr,error:t5,complete:Lr};var Oa=typeof Symbol=="function"&&Symbol.observable||"@@observable";function gn(n){return n}function w_(...n){return b_(n)}function b_(n){return n.length===0?gn:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var Je=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let s=r5(t)?t:new Na(t,i,r);return Pa(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=TS(i),new i((r,s)=>{let o=new Na({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[Oa](){return this}pipe(...t){return b_(t)(this)}toPromise(t){return t=TS(t),new t((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function TS(n){var e;return(e=n??Ni.Promise)!==null&&e!==void 0?e:Promise}function i5(n){return n&&Le(n.next)&&Le(n.error)&&Le(n.complete)}function r5(n){return n&&n instanceof po||i5(n)&&Uh(n)}function S_(n){return Le(n?.lift)}function et(n){return e=>{if(S_(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ze(n,e,t,i,r){return new C_(n,e,t,i,r)}var C_=class extends po{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ra(){return et((n,e)=>{let t=null;n._refCount++;let i=ze(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var Fa=class extends Je{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,S_(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ht;let t=this.getSubject();e.add(this.source.subscribe(ze(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ht.EMPTY)}return e}refCount(){return Ra()(this)}};var IS=Ia(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var at=(()=>{class n extends Je{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new Yh(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new IS}next(t){Pa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Pa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Pa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:s}=this;return i||r?m_:(this.currentObservers=null,s.push(t),new Ht(()=>{this.currentObservers=null,uo(s,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){let t=new Je;return t.source=this,t}}return n.create=(e,t)=>new Yh(e,t),n})(),Yh=class extends at{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:m_}};var Xt=class extends at{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var x_={now(){return(x_.delegate||Date).now()},delegate:void 0};var Gh=class extends Ht{constructor(e,t){super()}schedule(e,t=0){return this}};var Yc={setInterval(n,e,...t){let{delegate:i}=Yc;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Yc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Kh=class extends Gh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return Yc.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&Yc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,uo(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var La=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};La.now=x_.now;var $h=class extends La{constructor(e,t=La.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var Gc=new $h(Kh),kS=Gc;var Cn=new Je(n=>n.complete());function Zh(n){return n&&Le(n.schedule)}function PS(n){return n[n.length-1]}function Va(n){return Le(PS(n))?n.pop():void 0}function fs(n){return Zh(PS(n))?n.pop():void 0}function OS(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}function NS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fo(n){return this instanceof fo?(this.v=n,this):new fo(n)}function RS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(p){return function(g){return Promise.resolve(g).then(p,d)}}function a(p,g){i[p]&&(r[p]=function(A){return new Promise(function(v,b){s.push([p,A,v,b])>1||l(p,A)})},g&&(r[p]=g(r[p])))}function l(p,g){try{c(i[p](g))}catch(A){h(s[0][3],A)}}function c(p){p.value instanceof fo?Promise.resolve(p.value.v).then(u,d):h(s[0][2],p)}function u(p){l("next",p)}function d(p){l("throw",p)}function h(p,g){p(g),s.shift(),s.length&&l(s[0][0],s[0][1])}}function FS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof NS=="function"?NS(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),r(a,l,o.done,o.value)})}}function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}var Ba=n=>n&&typeof n.length=="number"&&typeof n!="function";function Xh(n){return Le(n?.then)}function Qh(n){return Le(n[Oa])}function Jh(n){return Symbol.asyncIterator&&Le(n?.[Symbol.asyncIterator])}function ep(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function s5(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var tp=s5();function np(n){return Le(n?.[tp])}function ip(n){return RS(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield fo(t.read());if(r)return yield fo(void 0);yield yield fo(i)}}finally{t.releaseLock()}})}function rp(n){return Le(n?.getReader)}function vt(n){if(n instanceof Je)return n;if(n!=null){if(Qh(n))return o5(n);if(Ba(n))return a5(n);if(Xh(n))return l5(n);if(Jh(n))return LS(n);if(np(n))return c5(n);if(rp(n))return u5(n)}throw ep(n)}function o5(n){return new Je(e=>{let t=n[Oa]();if(Le(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function a5(n){return new Je(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function l5(n){return new Je(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,zh)})}function c5(n){return new Je(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function LS(n){return new Je(e=>{d5(n,e).catch(t=>e.error(t))})}function u5(n){return LS(ip(n))}function d5(n,e){var t,i,r,s;return OS(this,void 0,void 0,function*(){try{for(t=FS(n);i=yield t.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})}function Wn(n,e,t,i=0,r=!1){let s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function sp(n,e=0){return et((t,i)=>{t.subscribe(ze(i,r=>Wn(i,n,()=>i.next(r),e),()=>Wn(i,n,()=>i.complete(),e),r=>Wn(i,n,()=>i.error(r),e)))})}function op(n,e=0){return et((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function VS(n,e){return vt(n).pipe(op(e),sp(e))}function BS(n,e){return vt(n).pipe(op(e),sp(e))}function qS(n,e){return new Je(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function jS(n,e){return new Je(t=>{let i;return Wn(t,e,()=>{i=n[tp](),Wn(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){t.error(o);return}s?t.complete():t.next(r)},0,!0)}),()=>Le(i?.return)&&i.return()})}function ap(n,e){if(!n)throw new Error("Iterable cannot be null");return new Je(t=>{Wn(t,e,()=>{let i=n[Symbol.asyncIterator]();Wn(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function WS(n,e){return ap(ip(n),e)}function US(n,e){if(n!=null){if(Qh(n))return VS(n,e);if(Ba(n))return qS(n,e);if(Xh(n))return BS(n,e);if(Jh(n))return ap(n,e);if(np(n))return jS(n,e);if(rp(n))return WS(n,e)}throw ep(n)}function Ft(n,e){return e?US(n,e):vt(n)}function Te(...n){let e=fs(n);return Ft(n,e)}function qa(n,e){let t=Le(n)?n:()=>n,i=r=>r.error(t());return new Je(e?r=>e.schedule(i,0,r):i)}function D_(n){return!!n&&(n instanceof Je||Le(n.lift)&&Le(n.subscribe))}var Vr=Ia(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function zS(n){return n instanceof Date&&!isNaN(n)}function Ue(n,e){return et((t,i)=>{let r=0;t.subscribe(ze(i,s=>{i.next(n.call(e,s,r++))}))})}var{isArray:h5}=Array;function p5(n,e){return h5(e)?n(...e):n(e)}function ja(n){return Ue(e=>p5(n,e))}var{isArray:f5}=Array,{getPrototypeOf:g5,prototype:m5,keys:_5}=Object;function lp(n){if(n.length===1){let e=n[0];if(f5(e))return{args:e,keys:null};if(A5(e)){let t=_5(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function A5(n){return n&&typeof n=="object"&&g5(n)===m5}function cp(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Kc(...n){let e=fs(n),t=Va(n),{args:i,keys:r}=lp(n);if(i.length===0)return Ft([],e);let s=new Je(y5(i,e,r?o=>cp(r,o):gn));return t?s.pipe(ja(t)):s}function y5(n,e,t=gn){return i=>{HS(e,()=>{let{length:r}=n,s=new Array(r),o=r,a=r;for(let l=0;l<r;l++)HS(e,()=>{let c=Ft(n[l],e),u=!1;c.subscribe(ze(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function HS(n,e,t){n?Wn(t,n,e):e()}function YS(n,e,t,i,r,s,o,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&e.complete()},p=A=>c<i?g(A):l.push(A),g=A=>{s&&e.next(A),c++;let v=!1;vt(t(A,u++)).subscribe(ze(e,b=>{r?.(b),s?p(b):e.next(b)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<i;){let b=l.shift();o?Wn(e,o,()=>g(b)):g(b)}h()}catch(b){e.error(b)}}))};return n.subscribe(ze(e,p,()=>{d=!0,h()})),()=>{a?.()}}function Pt(n,e,t=1/0){return Le(e)?Pt((i,r)=>Ue((s,o)=>e(i,s,r,o))(vt(n(i,r))),t):(typeof e=="number"&&(t=e),et((i,r)=>YS(i,r,n,t)))}function GS(n=1/0){return Pt(gn,n)}function KS(){return GS(1)}function er(...n){return KS()(Ft(n,fs(n)))}function up(n){return new Je(e=>{vt(n()).subscribe(e)})}function $c(...n){let e=Va(n),{args:t,keys:i}=lp(n),r=new Je(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),l=o,c=o;for(let u=0;u<o;u++){let d=!1;vt(t[u]).subscribe(ze(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(i?cp(i,a):a),s.complete())}))}});return e?r.pipe(ja(e)):r}var v5=["addListener","removeListener"],w5=["addEventListener","removeEventListener"],b5=["on","off"];function gs(n,e,t,i){if(Le(t)&&(i=t,t=void 0),i)return gs(n,e,t).pipe(ja(i));let[r,s]=x5(n)?w5.map(o=>a=>n[o](e,a,t)):S5(n)?v5.map($S(n,e)):C5(n)?b5.map($S(n,e)):[];if(!r&&Ba(n))return Pt(o=>gs(o,e,t))(vt(n));if(!r)throw new TypeError("Invalid event target");return new Je(o=>{let a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function $S(n,e){return t=>i=>n[t](e,i)}function S5(n){return Le(n.addListener)&&Le(n.removeListener)}function C5(n){return Le(n.on)&&Le(n.off)}function x5(n){return Le(n.addEventListener)&&Le(n.removeEventListener)}function go(n=0,e,t=kS){let i=-1;return e!=null&&(Zh(e)?t=e:i=e),new Je(r=>{let s=zS(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function dp(n=0,e=Gc){return n<0&&(n=0),go(n,n,e)}var{isArray:D5}=Array;function ZS(n){return n.length===1&&D5(n[0])?n[0]:n}function mn(n,e){return et((t,i)=>{let r=0;t.subscribe(ze(i,s=>n.call(e,s,r++)&&i.next(s)))})}function hp(...n){return n=ZS(n),n.length===1?vt(n[0]):new Je(E5(n))}function E5(n){return e=>{let t=[];for(let i=0;t&&!e.closed&&i<n.length;i++)t.push(vt(n[i]).subscribe(ze(e,r=>{if(t){for(let s=0;s<t.length;s++)s!==i&&t[s].unsubscribe();t=null}e.next(r)})))}}function tr(n){return et((e,t)=>{let i=null,r=!1,s;i=e.subscribe(ze(t,void 0,void 0,o=>{s=vt(n(o,tr(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function XS(n,e,t,i,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(ze(o,u=>{let d=c++;l=a?n(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function ms(n,e){return Le(e)?Pt(n,e,1):Pt(n,1)}function _s(n){return et((e,t)=>{let i=!1;e.subscribe(ze(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function ii(n){return n<=0?()=>Cn:et((e,t)=>{let i=0;e.subscribe(ze(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function QS(){return et((n,e)=>{n.subscribe(ze(e,Lr))})}function JS(n){return Ue(()=>n)}function E_(n,e){return e?t=>er(e.pipe(ii(1),QS()),t.pipe(E_(n))):Pt((t,i)=>vt(n(t,i)).pipe(ii(1),JS(t)))}function M_(n,e=Gc){let t=go(n,e);return E_(()=>t)}function pp(n,e=gn){return n=n??M5,et((t,i)=>{let r,s=!0;t.subscribe(ze(i,o=>{let a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function M5(n,e){return n===e}function fp(n=T5){return et((e,t)=>{let i=!1;e.subscribe(ze(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function T5(){return new Vr}function T_(...n){return e=>er(e,Te(...n))}function As(n){return et((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Br(n,e){let t=arguments.length>=2;return i=>i.pipe(n?mn((r,s)=>n(r,s,i)):gn,ii(1),t?_s(e):fp(()=>new Vr))}function Wa(n){return n<=0?()=>Cn:et((e,t)=>{let i=[];e.subscribe(ze(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function I_(n,e){let t=arguments.length>=2;return i=>i.pipe(n?mn((r,s)=>n(r,s,i)):gn,Wa(1),t?_s(e):fp(()=>new Vr))}function k_(n,e){return et(XS(n,e,arguments.length>=2,!0))}function gp(...n){let e=fs(n);return et((t,i)=>{(e?er(n,t,e):er(n,t)).subscribe(i)})}function Un(n,e){return et((t,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();t.subscribe(ze(i,l=>{r?.unsubscribe();let c=0,u=s++;vt(n(l,u)).subscribe(r=ze(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function nr(n){return et((e,t)=>{vt(n).subscribe(ze(t,()=>t.complete(),Lr)),!t.closed&&e.subscribe(t)})}function Qt(n,e,t){let i=Le(n)||e||t?{next:n,error:e,complete:t}:n;return i?et((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(ze(s,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),s.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),s.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),s.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):gn}function P_(...n){let e=Va(n);return et((t,i)=>{let r=n.length,s=new Array(r),o=n.map(()=>!1),a=!1;for(let l=0;l<r;l++)vt(n[l]).subscribe(ze(i,c=>{s[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(gn))&&(o=null))},Lr));t.subscribe(ze(i,l=>{if(a){let c=[l,...s];i.next(e?e(...c):c)}}))})}var BC="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Se=class extends Error{code;constructor(e,t){super(k5(e,t)),this.code=e}};function I5(n){return`NG0${Math.abs(n)}`}function k5(n,e){return`${I5(n)}${e?": "+e:""}`}var qC=Symbol("InputSignalNode#UNSET"),P5=Ie(ie({},qh),{transformFn:void 0,applyValueToInputSignal(n,e){zc(n,e)}});function jC(n,e){let t=Object.create(P5);t.value=n,t.transformFn=e?.transform;function i(){if(Uc(t),t.value===qC){let r=null;throw new Se(-950,r)}return t.value}return i[fi]=t,i}function cu(n){return{toString:n}.toString()}var mp="__parameters__";function N5(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function WC(n,e,t){return cu(()=>{let i=N5(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(l,c,u){let d=l.hasOwnProperty(mp)?l[mp]:Object.defineProperty(l,mp,{value:[]})[mp];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var Y_=globalThis;function xt(n){for(let e in n)if(n[e]===xt)return e;throw Error("Could not find renamed property on target object.")}function O5(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Hn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Hn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function G_(n,e){return n?e?`${n} ${e}`:n:e||""}var R5=xt({__forward_ref__:xt});function Ai(n){return n.__forward_ref__=Ai,n.toString=function(){return Hn(this())},n}function In(n){return UC(n)?n():n}function UC(n){return typeof n=="function"&&n.hasOwnProperty(R5)&&n.__forward_ref__===Ai}function he(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Li(n){return{providers:n.providers||[],imports:n.imports||[]}}function Zp(n){return eC(n,HC)||eC(n,YC)}function zC(n){return Zp(n)!==null}function eC(n,e){return n.hasOwnProperty(e)?n[e]:null}function F5(n){let e=n&&(n[HC]||n[YC]);return e||null}function tC(n){return n&&(n.hasOwnProperty(nC)||n.hasOwnProperty(L5))?n[nC]:null}var HC=xt({\u0275prov:xt}),nC=xt({\u0275inj:xt}),YC=xt({ngInjectableDef:xt}),L5=xt({ngInjectorDef:xt}),we=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=he({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function GC(n){return n&&!!n.\u0275providers}var V5=xt({\u0275cmp:xt}),B5=xt({\u0275dir:xt}),q5=xt({\u0275pipe:xt}),j5=xt({\u0275mod:xt}),xp=xt({\u0275fac:xt}),Jc=xt({__NG_ELEMENT_ID__:xt}),iC=xt({__NG_ENV_ID__:xt});function ri(n){return typeof n=="string"?n:n==null?"":String(n)}function W5(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ri(n)}function KC(n,e){throw new Se(-200,n)}function UA(n,e){throw new Se(-201,!1)}var it=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(it||{}),K_;function $C(){return K_}function gi(n){let e=K_;return K_=n,e}function ZC(n,e,t){let i=Zp(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&it.Optional)return null;if(e!==void 0)return e;UA(n,"Injector")}var U5={},mo=U5,$_="__NG_DI_FLAG__",Dp=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=t;return this.injector.get(e,i.optional?jh:mo,i)}},Ep="ngTempTokenPath",z5="ngTokenPath",H5=/\n/gm,Y5="\u0275",rC="__source";function G5(n,e=it.Default){if(Hc()===void 0)throw new Se(-203,!1);if(Hc()===null)return ZC(n,void 0,e);{let t=Hc(),i;return t instanceof Dp?i=t.injector:i=t,i.get(n,e&it.Optional?null:void 0,e)}}function oe(n,e=it.Default){return($C()||G5)(In(n),e)}function se(n,e=it.Default){return oe(n,Xp(e))}function Xp(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Z_(n){let e=[];for(let t=0;t<n.length;t++){let i=In(n[t]);if(Array.isArray(i)){if(i.length===0)throw new Se(900,!1);let r,s=it.Default;for(let o=0;o<i.length;o++){let a=i[o],l=K5(a);typeof l=="number"?l===-1?r=a.token:s|=l:r=a}e.push(oe(r,s))}else e.push(oe(i))}return e}function XC(n,e){return n[$_]=e,n.prototype[$_]=e,n}function K5(n){return n[$_]}function $5(n,e,t,i){let r=n[Ep];throw e[rC]&&r.unshift(e[rC]),n.message=Z5(`
`+n.message,r,t,i),n[z5]=r,n[Ep]=null,n}function Z5(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==Y5?n.slice(2):n;let r=Hn(e);if(Array.isArray(e))r=e.map(Hn).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Hn(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(H5,`
  `)}`}var X5=XC(WC("Optional"),8);var Q5=XC(WC("SkipSelf"),4);function $a(n,e){let t=n.hasOwnProperty(xp);return t?n[xp]:null}function J5(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}function eF(n){return n.flat(Number.POSITIVE_INFINITY)}function zA(n,e){n.forEach(t=>Array.isArray(t)?zA(t,e):e(t))}function QC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Mp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function tF(n,e){let t=[];for(let i=0;i<n;i++)t.push(e);return t}function nF(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let s=r-2;n[r]=n[s],r--}n[e]=t,n[e+1]=i}}function HA(n,e,t){let i=uu(n,e);return i>=0?n[i|1]=t:(i=~i,nF(n,i,e,t)),i}function N_(n,e){let t=uu(n,e);if(t>=0)return n[t|1]}function uu(n,e){return iF(n,e,1)}function iF(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}var Ao={},zn=[],eu=new we(""),JC=new we("",-1),ex=new we(""),Tp=class{get(e,t=mo){if(t===mo){let i=new Error(`NullInjectorError: No provider for ${Hn(e)}!`);throw i.name="NullInjectorError",i}return t}};function tx(n,e){let t=n[j5]||null;if(!t&&e===!0)throw new Error(`Type ${Hn(n)} does not have '\u0275mod' property.`);return t}function Za(n){return n[V5]||null}function rF(n){return n[B5]||null}function sF(n){return n[q5]||null}function du(n){return{\u0275providers:n}}function oF(...n){return{\u0275providers:nx(!0,n),\u0275fromNgModule:!0}}function nx(n,...e){let t=[],i=new Set,r,s=o=>{t.push(o)};return zA(e,o=>{let a=o;X_(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&ix(r,s),t}function ix(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];YA(r,s=>{e(s,i)})}}function X_(n,e,t,i){if(n=In(n),!n)return!1;let r=null,s=tC(n),o=!s&&Za(n);if(!s&&!o){let l=n.ngModule;if(s=tC(l),s)r=l;else return!1}else{if(o&&!o.standalone)return!1;r=n}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)X_(c,e,t,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let c;try{zA(s.imports,u=>{X_(u,e,t,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&ix(c,e)}if(!a){let c=$a(r)||(()=>new r);e({provide:r,useFactory:c,deps:zn},r),e({provide:ex,useValue:r,multi:!0},r),e({provide:eu,useValue:()=>oe(r),multi:!0},r)}let l=s.providers;if(l!=null&&!a){let c=n;YA(l,u=>{e(u,c)})}}else return!1;return r!==n&&n.providers!==void 0}function YA(n,e){for(let t of n)GC(t)&&(t=t.\u0275providers),Array.isArray(t)?YA(t,e):e(t)}var aF=xt({provide:String,useValue:xt});function rx(n){return n!==null&&typeof n=="object"&&aF in n}function lF(n){return!!(n&&n.useExisting)}function cF(n){return!!(n&&n.useFactory)}function Xa(n){return typeof n=="function"}function uF(n){return!!n.useClass}var Qp=new we(""),yp={},sC={},O_;function GA(){return O_===void 0&&(O_=new Tp),O_}var kn=class{},tu=class extends kn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,J_(e,o=>this.processProvider(o)),this.records.set(JC,Ua(void 0,this)),r.has("environment")&&this.records.set(kn,Ua(void 0,this));let s=this.records.get(Qp);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(ex,zn,it.Self))}retrieve(e,t){let i=t;return this.get(e,i.optional?jh:mo,i)}destroy(){Xc(this),this._destroyed=!0;let e=ot(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ot(e)}}onDestroy(e){return Xc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Xc(this);let t=Fr(this),i=gi(void 0),r;try{return e()}finally{Fr(t),gi(i)}}get(e,t=mo,i=it.Default){if(Xc(this),e.hasOwnProperty(iC))return e[iC](this);i=Xp(i);let r,s=Fr(this),o=gi(void 0);try{if(!(i&it.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=gF(e)&&Zp(e);c&&this.injectableDefInScope(c)?l=Ua(Q_(e),yp):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=i&it.Self?GA():this.parent;return t=i&it.Optional&&t===mo?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Ep]=a[Ep]||[]).unshift(Hn(e)),s)throw a;return $5(a,e,"R3InjectorError",this.source)}else throw a}finally{gi(o),Fr(s)}}resolveInjectorInitializers(){let e=ot(null),t=Fr(this),i=gi(void 0),r;try{let s=this.get(eu,zn,it.Self);for(let o of s)o()}finally{Fr(t),gi(i),ot(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Hn(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=In(e);let t=Xa(e)?e:In(e&&e.provide),i=hF(e);if(!Xa(e)&&e.multi===!0){let r=this.records.get(t);r||(r=Ua(void 0,yp,!0),r.factory=()=>Z_(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){let i=ot(null);try{return t.value===sC?KC(Hn(e)):t.value===yp&&(t.value=sC,t.value=t.factory()),typeof t.value=="object"&&t.value&&fF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ot(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=In(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Q_(n){let e=Zp(n),t=e!==null?e.factory:$a(n);if(t!==null)return t;if(n instanceof we)throw new Se(204,!1);if(n instanceof Function)return dF(n);throw new Se(204,!1)}function dF(n){if(n.length>0)throw new Se(204,!1);let t=F5(n);return t!==null?()=>t.factory(n):()=>new n}function hF(n){if(rx(n))return Ua(void 0,n.useValue);{let e=sx(n);return Ua(e,yp)}}function sx(n,e,t){let i;if(Xa(n)){let r=In(n);return $a(r)||Q_(r)}else if(rx(n))i=()=>In(n.useValue);else if(cF(n))i=()=>n.useFactory(...Z_(n.deps||[]));else if(lF(n))i=()=>oe(In(n.useExisting));else{let r=In(n&&(n.useClass||n.provide));if(pF(n))i=()=>new r(...Z_(n.deps));else return $a(r)||Q_(r)}return i}function Xc(n){if(n.destroyed)throw new Se(205,!1)}function Ua(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function pF(n){return!!n.deps}function fF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function gF(n){return typeof n=="function"||typeof n=="object"&&n instanceof we}function J_(n,e){for(let t of n)Array.isArray(t)?J_(t,e):t&&GC(t)?J_(t.\u0275providers,e):e(t)}function oi(n,e){let t;n instanceof tu?(Xc(n),t=n):t=new Dp(n);let i,r=Fr(t),s=gi(void 0);try{return e()}finally{Fr(r),gi(s)}}function ox(){return $C()!==void 0||Hc()!=null}function ax(n){if(!ox())throw new Se(-203,!1)}function mF(n){return typeof n=="function"}var zr=0,tt=1,Ke=2,xn=3,Fi=4,Gn=5,nu=6,Ip=7,Pn=8,Qa=9,qr=10,Lt=11,iu=12,oC=13,ol=14,_i=15,yo=16,za=17,jr=18,Jp=19,lx=20,ys=21,R_=22,kp=23,mi=24,Ga=25,Nn=26,cx=1;var vo=7,Pp=8,Ja=9,Yn=10;function vs(n){return Array.isArray(n)&&typeof n[cx]=="object"}function Hr(n){return Array.isArray(n)&&n[cx]===!0}function KA(n){return(n.flags&4)!==0}function al(n){return n.componentOffset>-1}function ef(n){return(n.flags&1)===1}function rr(n){return!!n.template}function Np(n){return(n[Ke]&512)!==0}function hu(n){return(n[Ke]&256)===256}var eA=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function ux(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var Vi=(()=>{let n=()=>dx;return n.ngInherit=!0,n})();function dx(n){return n.type.prototype.ngOnChanges&&(n.setInput=AF),_F}function _F(){let n=px(this),e=n?.current;if(e){let t=n.previous;if(t===Ao)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function AF(n,e,t,i,r){let s=this.declaredInputs[i],o=px(n)||yF(n,{previous:Ao,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new eA(c&&c.currentValue,t,l===Ao),ux(n,e,r,t)}var hx="__ngSimpleChanges__";function px(n){return n[hx]||null}function yF(n,e){return n[hx]=e}var aC=null;var St=function(n,e=null,t){aC?.(n,e,t)},vF="svg",wF="math";function sr(n){for(;Array.isArray(n);)n=n[zr];return n}function fx(n,e){return sr(e[n])}function ur(n,e){return sr(e[n.index])}function $A(n,e){return n.data[e]}function bF(n,e){return n[e]}function or(n,e){let t=e[n];return vs(t)?t:t[zr]}function SF(n){return(n[Ke]&4)===4}function ZA(n){return(n[Ke]&128)===128}function CF(n){return Hr(n[xn])}function el(n,e){return e==null?null:n[e]}function gx(n){n[za]=0}function mx(n){n[Ke]&1024||(n[Ke]|=1024,ZA(n)&&pu(n))}function xF(n,e){for(;n>0;)e=e[ol],n--;return e}function tf(n){return!!(n[Ke]&9216||n[mi]?.dirty)}function tA(n){n[qr].changeDetectionScheduler?.notify(8),n[Ke]&64&&(n[Ke]|=1024),tf(n)&&pu(n)}function pu(n){n[qr].changeDetectionScheduler?.notify(0);let e=wo(n);for(;e!==null&&!(e[Ke]&8192||(e[Ke]|=8192,!ZA(e)));)e=wo(e)}function _x(n,e){if(hu(n))throw new Se(911,!1);n[ys]===null&&(n[ys]=[]),n[ys].push(e)}function DF(n,e){if(n[ys]===null)return;let t=n[ys].indexOf(e);t!==-1&&n[ys].splice(t,1)}function wo(n){let e=n[xn];return Hr(e)?e[xn]:e}function XA(n){return n[Ip]??=[]}function QA(n){return n.cleanup??=[]}function EF(n,e,t,i){let r=XA(e);r.push(t),n.firstCreatePass&&QA(n).push(i,r.length-1)}var nt={lFrame:Cx(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var nA=!1;function MF(){return nt.lFrame.elementDepthCount}function TF(){nt.lFrame.elementDepthCount++}function IF(){nt.lFrame.elementDepthCount--}function JA(){return nt.bindingsEnabled}function Ax(){return nt.skipHydrationRootTNode!==null}function kF(n){return nt.skipHydrationRootTNode===n}function PF(){nt.skipHydrationRootTNode=null}function $e(){return nt.lFrame.lView}function Kt(){return nt.lFrame.tView}function C(n){return nt.lFrame.contextLView=n,n[Pn]}function x(n){return nt.lFrame.contextLView=null,n}function Kn(){let n=yx();for(;n!==null&&n.type===64;)n=n.parent;return n}function yx(){return nt.lFrame.currentTNode}function NF(){let n=nt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function xo(n,e){let t=nt.lFrame;t.currentTNode=n,t.isParent=e}function ey(){return nt.lFrame.isParent}function ty(){nt.lFrame.isParent=!1}function OF(){return nt.lFrame.contextLView}function vx(){return nA}function lC(n){let e=nA;return nA=n,e}function fu(){let n=nt.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function ny(){return nt.lFrame.bindingIndex}function RF(n){return nt.lFrame.bindingIndex=n}function ll(){return nt.lFrame.bindingIndex++}function gu(n){let e=nt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function FF(){return nt.lFrame.inI18n}function LF(n,e){let t=nt.lFrame;t.bindingIndex=t.bindingRootIndex=n,iA(e)}function VF(){return nt.lFrame.currentDirectiveIndex}function iA(n){nt.lFrame.currentDirectiveIndex=n}function BF(n){let e=nt.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function wx(){return nt.lFrame.currentQueryIndex}function iy(n){nt.lFrame.currentQueryIndex=n}function qF(n){let e=n[tt];return e.type===2?e.declTNode:e.type===1?n[Gn]:null}function bx(n,e,t){if(t&it.SkipSelf){let r=e,s=n;for(;r=r.parent,r===null&&!(t&it.Host);)if(r=qF(s),r===null||(s=s[ol],r.type&10))break;if(r===null)return!1;e=r,n=s}let i=nt.lFrame=Sx();return i.currentTNode=e,i.lView=n,!0}function ry(n){let e=Sx(),t=n[tt];nt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Sx(){let n=nt.lFrame,e=n===null?null:n.child;return e===null?Cx(n):e}function Cx(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function xx(){let n=nt.lFrame;return nt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Dx=xx;function sy(){let n=xx();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function jF(n){return(nt.lFrame.contextLView=xF(n,nt.lFrame.contextLView))[Pn]}function dr(){return nt.lFrame.selectedIndex}function bo(n){nt.lFrame.selectedIndex=n}function mu(){let n=nt.lFrame;return $A(n.tView,n.selectedIndex)}function WF(){return nt.lFrame.currentNamespace}var Ex=!0;function nf(){return Ex}function rf(n){Ex=n}function UF(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=dx(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function oy(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function vp(n,e,t){Mx(n,e,3,t)}function wp(n,e,t,i){(n[Ke]&3)===t&&Mx(n,e,t,i)}function F_(n,e){let t=n[Ke];(t&3)===e&&(t&=16383,t+=1,n[Ke]=t)}function Mx(n,e,t,i){let r=i!==void 0?n[za]&65535:0,s=i??-1,o=e.length-1,a=0;for(let l=r;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(n[za]+=65536),(a<s||s==-1)&&(zF(n,t,e,l),n[za]=(n[za]&4294901760)+l+2),l++}function cC(n,e){St(4,n,e);let t=ot(null);try{e.call(n)}finally{ot(t),St(5,n,e)}}function zF(n,e,t,i){let r=t[i]<0,s=t[i+1],o=r?-t[i]:t[i],a=n[o];r?n[Ke]>>14<n[za]>>16&&(n[Ke]&3)===e&&(n[Ke]+=16384,cC(a,s)):cC(a,s)}var Ka=-1,So=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=i}};function HF(n){return(n.flags&8)!==0}function YF(n){return(n.flags&16)!==0}function GF(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{let s=r,o=t[++i];$F(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function KF(n){return n===3||n===4||n===6}function $F(n){return n.charCodeAt(0)===64}function tl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?uC(n,t,r,null,e[++i]):uC(n,t,r,null,null))}}return n}function uC(n,e,t,i,r){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){r!==null&&(n[s+1]=r);return}s++,r!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r)}function Tx(n){return n!==Ka}function Op(n){return n&32767}function ZF(n){return n>>16}function Rp(n,e){let t=ZF(n),i=e;for(;t>0;)i=i[ol],t--;return i}var rA=!0;function dC(n){let e=rA;return rA=n,e}var XF=256,Ix=XF-1,kx=5,QF=0,ir={};function JF(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(Jc)&&(i=t[Jc]),i==null&&(i=t[Jc]=QF++);let r=i&Ix,s=1<<r;e.data[n+(r>>kx)]|=s}function Fp(n,e){let t=Px(n,e);if(t!==-1)return t;let i=e[tt];i.firstCreatePass&&(n.injectorIndex=e.length,L_(i.data,n),L_(e,null),L_(i.blueprint,null));let r=ay(n,e),s=n.injectorIndex;if(Tx(r)){let o=Op(r),a=Rp(r,e),l=a[tt].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function L_(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Px(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function ay(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=Lx(r),i===null)return Ka;if(t++,r=r[ol],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Ka}function sA(n,e,t){JF(n,e,t)}function Nx(n,e,t){if(t&it.Optional||n!==void 0)return n;UA(e,"NodeInjector")}function Ox(n,e,t,i){if(t&it.Optional&&i===void 0&&(i=null),(t&(it.Self|it.Host))===0){let r=n[Qa],s=gi(void 0);try{return r?r.get(e,i,t&it.Optional):ZC(e,i,t&it.Optional)}finally{gi(s)}}return Nx(i,e,t)}function Rx(n,e,t,i=it.Default,r){if(n!==null){if(e[Ke]&2048&&!(i&it.Self)){let o=i4(n,e,t,i,ir);if(o!==ir)return o}let s=Fx(n,e,t,i,ir);if(s!==ir)return s}return Ox(e,t,i,r)}function Fx(n,e,t,i,r){let s=t4(t);if(typeof s=="function"){if(!bx(e,n,i))return i&it.Host?Nx(r,t,i):Ox(e,t,i,r);try{let o;if(o=s(i),o==null&&!(i&it.Optional))UA(t);else return o}finally{Dx()}}else if(typeof s=="number"){let o=null,a=Px(n,e),l=Ka,c=i&it.Host?e[_i][Gn]:null;for((a===-1||i&it.SkipSelf)&&(l=a===-1?ay(n,e):e[a+8],l===Ka||!pC(i,!1)?a=-1:(o=e[tt],a=Op(l),e=Rp(l,e)));a!==-1;){let u=e[tt];if(hC(s,a,u.data)){let d=e4(a,e,t,o,i,c);if(d!==ir)return d}l=e[a+8],l!==Ka&&pC(i,e[tt].data[a+8]===c)&&hC(s,a,e)?(o=u,a=Op(l),e=Rp(l,e)):a=-1}}return r}function e4(n,e,t,i,r,s){let o=e[tt],a=o.data[n+8],l=i==null?al(a)&&rA:i!=o&&(a.type&3)!==0,c=r&it.Host&&s===a,u=bp(a,o,t,l,c);return u!==null?ru(e,o,u,a):ir}function bp(n,e,t,i,r){let s=n.providerIndexes,o=e.data,a=s&1048575,l=n.directiveStart,c=n.directiveEnd,u=s>>20,d=i?a:a+u,h=r?a+u:c;for(let p=d;p<h;p++){let g=o[p];if(p<l&&t===g||p>=l&&g.type===t)return p}if(r){let p=o[l];if(p&&rr(p)&&p.type===t)return l}return null}function ru(n,e,t,i){let r=n[t],s=e.data;if(r instanceof So){let o=r;o.resolving&&KC(W5(s[t]));let a=dC(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?gi(o.injectImpl):null,u=bx(n,i,it.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&UF(t,s[t],e)}finally{c!==null&&gi(c),dC(a),o.resolving=!1,Dx()}}return r}function t4(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Jc)?n[Jc]:void 0;return typeof e=="number"?e>=0?e&Ix:n4:e}function hC(n,e,t){let i=1<<n;return!!(t[e+(n>>kx)]&i)}function pC(n,e){return!(n&it.Self)&&!(n&it.Host&&e)}var _o=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return Rx(this._tNode,this._lView,e,Xp(i),t)}};function n4(){return new _o(Kn(),$e())}function Bi(n){return cu(()=>{let e=n.prototype.constructor,t=e[xp]||oA(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let s=r[xp]||oA(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function oA(n){return UC(n)?()=>{let e=oA(In(n));return e&&e()}:$a(n)}function i4(n,e,t,i,r){let s=n,o=e;for(;s!==null&&o!==null&&o[Ke]&2048&&!Np(o);){let a=Fx(s,o,t,i|it.Self,ir);if(a!==ir)return a;let l=s.parent;if(!l){let c=o[lx];if(c){let u=c.get(t,ir,i);if(u!==ir)return u}l=Lx(o),o=o[ol]}s=l}return r}function Lx(n){let e=n[tt],t=e.type;return t===2?e.declTNode:t===1?n[Gn]:null}function fC(n,e=null,t=null,i){let r=Vx(n,e,t,i);return r.resolveInjectorInitializers(),r}function Vx(n,e=null,t=null,i,r=new Set){let s=[t||zn,oF(n)];return i=i||(typeof n=="object"?void 0:Hn(n)),new tu(s,e||GA(),i||null,r)}var On=class n{static THROW_IF_NOT_FOUND=mo;static NULL=new Tp;static create(e,t){if(Array.isArray(e))return fC({name:""},t,e,"");{let i=e.name??"";return fC({name:i},e.parent,e.providers,i)}}static \u0275prov=he({token:n,providedIn:"any",factory:()=>oe(JC)});static __NG_ELEMENT_ID__=-1};var r4=new we("");r4.__NG_ELEMENT_ID__=n=>{let e=Kn();if(e===null)throw new Se(204,!1);if(e.type&2)return e.value;if(n&it.Optional)return null;throw new Se(204,!1)};var Bx=!1,cl=(()=>{class n{static __NG_ELEMENT_ID__=s4;static __NG_ENV_ID__=t=>t}return n})(),aA=class extends cl{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return _x(this._lView,e),()=>DF(this._lView,e)}};function s4(){return new aA($e())}var nl=class{},ly=new we("",{providedIn:"root",factory:()=>!1});var qx=new we(""),jx=new we(""),ws=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Xt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=he({token:n,providedIn:"root",factory:()=>new n})}return n})();var lA=class extends at{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,ox()&&(this.destroyRef=se(cl,{optional:!0})??void 0,this.pendingTasks=se(ws,{optional:!0})??void 0)}emit(e){let t=ot(null);try{super.next(e)}finally{ot(t)}}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof Ht&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{e(t),i!==void 0&&this.pendingTasks?.remove(i)})}}},Nt=lA;function Lp(...n){}function Wx(n){let e,t;function i(){n=Lp;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function gC(n){return queueMicrotask(()=>n()),()=>{n=Lp}}var cy="isAngularZone",Vp=cy+"_ID",o4=0,Et=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Nt(!1);onMicrotaskEmpty=new Nt(!1);onStable=new Nt(!1);onError=new Nt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=Bx}=e;if(typeof Zone>"u")throw new Se(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&i,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,o.scheduleInRootZone=s,c4(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(cy)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Se(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Se(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,a4,Lp,Lp);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},a4={};function uy(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function l4(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Wx(()=>{n.callbackScheduled=!1,cA(n),n.isCheckStableRunning=!0,uy(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),cA(n)}function c4(n){let e=()=>{l4(n)},t=o4++;n._inner=n._inner.fork({name:"angular",properties:{[cy]:!0,[Vp]:t,[Vp+t]:!0},onInvokeTask:(i,r,s,o,a,l)=>{if(u4(l))return i.invokeTask(s,o,a,l);try{return mC(n),i.invokeTask(s,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),_C(n)}},onInvoke:(i,r,s,o,a,l,c)=>{try{return mC(n),i.invoke(s,o,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!d4(l)&&e(),_C(n)}},onHasTask:(i,r,s,o)=>{i.hasTask(s,o),r===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,cA(n),uy(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,r,s,o)=>(i.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function cA(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function mC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function _C(n){n._nesting--,uy(n)}var uA=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Nt;onMicrotaskEmpty=new Nt;onStable=new Nt;onError=new Nt;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function u4(n){return Ux(n,"__ignore_ng_zone__")}function d4(n){return Ux(n,"__scheduler_tick__")}function Ux(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var ar=class{_console=console;handleError(e){this._console.error("ERROR",e)}},h4=new we("",{providedIn:"root",factory:()=>{let n=se(Et),e=se(ar);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function AC(n,e){return jC(n,e)}function p4(n){return jC(qC,n)}var zx=(AC.required=p4,AC);function f4(){return ul(Kn(),$e())}function ul(n,e){return new _n(ur(n,e))}var _n=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=f4}return n})();function g4(n){return n instanceof _n?n.nativeElement:n}function m4(n){return typeof n=="function"&&n[fi]!==void 0}function sf(n,e){let t=h_(n,e?.equal),i=t[fi];return t.set=r=>zc(i,r),t.update=r=>p_(i,r),t.asReadonly=_4.bind(t),t}function _4(){let n=this[fi];if(n.readonlyFn===void 0){let e=()=>this();e[fi]=n,n.readonlyFn=e}return n.readonlyFn}function Hx(n){return m4(n)&&typeof n.set=="function"}function A4(){return this._results[Symbol.iterator]()}var dA=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new at}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=eF(e);(this._changesDetected=!J5(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=A4};function Yx(n){return(n.flags&128)===128}var Gx=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Gx||{}),Kx=new Map,y4=0;function v4(){return y4++}function w4(n){Kx.set(n[Jp],n)}function hA(n){Kx.delete(n[Jp])}var yC="__ngContext__";function dl(n,e){vs(e)?(n[yC]=e[Jp],w4(e)):n[yC]=e}function $x(n){return Xx(n[iu])}function Zx(n){return Xx(n[Fi])}function Xx(n){for(;n!==null&&!Hr(n);)n=n[Fi];return n}var pA;function Qx(n){pA=n}function b4(){if(pA!==void 0)return pA;if(typeof document<"u")return document;throw new Se(210,!1)}var dy=new we("",{providedIn:"root",factory:()=>S4}),S4="ng",hy=new we(""),bs=new we("",{providedIn:"platform",factory:()=>"unknown"});var py=new we("",{providedIn:"root",factory:()=>b4().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var C4="h",x4="b";var Jx=!1,D4=new we("",{providedIn:"root",factory:()=>Jx});var fy=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(fy||{}),hl=new we(""),vC=new Set;function _u(n){vC.has(n)||(vC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var eD=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=E4}return n})();function E4(){return new eD($e(),Kn())}var Ha=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ha||{}),tD=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=he({token:n,providedIn:"root",factory:()=>new n})}return n})(),M4=[Ha.EarlyRead,Ha.Write,Ha.MixedReadWrite,Ha.Read],T4=(()=>{class n{ngZone=se(Et);scheduler=se(nl);errorHandler=se(ar,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){se(hl,{optional:!0})}execute(){let t=this.sequences.size>0;t&&St(16),this.executing=!0;for(let i of M4)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=r.hooks[i];return s(r.pipelinedValue)},r.snapshot))}catch(s){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&St(17)}register(t){let{view:i}=t;i!==void 0?((i[Ga]??=[]).push(t),pu(i),i[Ke]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?i.run(fy.AFTER_NEXT_RENDER,t):t()}static \u0275prov=he({token:n,providedIn:"root",factory:()=>new n})}return n})(),fA=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,r,s,o=null){this.impl=e,this.hooks=t,this.view=i,this.once=r,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ga];e&&(this.view[Ga]=e.filter(t=>t!==this))}};function gy(n,e){!e?.injector&&ax(gy);let t=e?.injector??se(On);return _u("NgAfterRender"),nD(n,t,e,!1)}function of(n,e){!e?.injector&&ax(of);let t=e?.injector??se(On);return _u("NgAfterNextRender"),nD(n,t,e,!0)}function I4(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function nD(n,e,t,i){let r=e.get(tD);r.impl??=e.get(T4);let s=e.get(hl,null,{optional:!0}),o=t?.phase??Ha.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(cl):null,l=e.get(eD,null,{optional:!0}),c=new fA(r.impl,I4(n,o),l?.view,i,a,s?.snapshot(null));return r.impl.register(c),c}var k4=()=>null;function iD(n,e,t=!1){return k4(n,e,t)}function rD(n,e){let t=n.contentQueries;if(t!==null){let i=ot(null);try{for(let r=0;r<t.length;r+=2){let s=t[r],o=t[r+1];if(o!==-1){let a=n.data[o];iy(s),a.contentQueries(2,e[o],o)}}}finally{ot(i)}}}function gA(n,e,t){iy(0);let i=ot(null);try{e(n,t)}finally{ot(i)}}function my(n,e,t){if(KA(e)){let i=ot(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=n.data[o];if(a.contentQueries){let l=t[o];a.contentQueries(1,l,o)}}}finally{ot(i)}}}var lr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(lr||{}),_p;function P4(){if(_p===void 0&&(_p=null,Y_.trustedTypes))try{_p=Y_.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return _p}function N4(n){return P4()?.createScriptURL(n)||n}var Bp=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${BC})`}};function _y(n){return n instanceof Bp?n.changingThisBreaksApplicationSecurity:n}function O4(n,e){let t=R4(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${BC})`)}return t===e}function R4(n){return n instanceof Bp&&n.getTypeName()||null}var F4=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function L4(n){return n=String(n),n.match(F4)?n:"unsafe:"+n}var sD=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(sD||{});function oD(n){let e=V4();return e?e.sanitize(sD.URL,n)||"":O4(n,"URL")?_y(n):L4(ri(n))}function af(n){return N4(n[0])}function V4(){let n=$e();return n&&n[qr].sanitizer}var B4=/^>|^->|<!--|-->|--!>|<!-$/g,q4=/(<|>)/g,j4="\u200B$1\u200B";function W4(n){return n.replace(B4,e=>e.replace(q4,j4))}function aD(n){return n.ownerDocument.defaultView}function lD(n){return n instanceof Function?n():n}function U4(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}var cD="ng-template";function z4(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&U4(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(Ay(n))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&typeof(s=e[r])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Ay(n){return n.type===4&&n.value!==cD}function H4(n,e,t){let i=n.type===4&&!t?cD:n.value;return e===i}function Y4(n,e,t){let i=4,r=n.attrs,s=r!==null?$4(r):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!Oi(i)&&!Oi(l))return!1;if(o&&Oi(l))continue;o=!1,i=l|i&1;continue}if(!o)if(i&4){if(i=2|i&1,l!==""&&!H4(n,l,t)||l===""&&e.length===1){if(Oi(i))return!1;o=!0}}else if(i&8){if(r===null||!z4(n,r,l,t)){if(Oi(i))return!1;o=!0}}else{let c=e[++a],u=G4(l,r,Ay(n),t);if(u===-1){if(Oi(i))return!1;o=!0;continue}if(c!==""){let d;if(u>s?d="":d=r[u+1].toLowerCase(),i&2&&c!==d){if(Oi(i))return!1;o=!0}}}}return Oi(i)||o}function Oi(n){return(n&1)===0}function G4(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){let o=e[r];if(o===n)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return Z4(e,n)}function uD(n,e,t=!1){for(let i=0;i<e.length;i++)if(Y4(n,e[i],t))return!0;return!1}function K4(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function $4(n){for(let e=0;e<n.length;e++){let t=n[e];if(KF(t))return e}return n.length}function Z4(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function X4(n,e){e:for(let t=0;t<e.length;t++){let i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function wC(n,e){return n?":not("+e.trim()+")":e}function Q4(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(i&2){let a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!Oi(o)&&(e+=wC(s,r),r=""),i=o,s=s||!Oi(i);t++}return r!==""&&(e+=wC(s,r)),e}function J4(n){return n.map(Q4).join(",")}function eL(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&e.push(s,n[++i]):r===8&&t.push(s);else{if(!Oi(r))break;r=s}i++}return t.length&&e.push(1,...t),e}var an={};function tL(n,e){return n.createText(e)}function nL(n,e,t){n.setValue(e,t)}function iL(n,e){return n.createComment(W4(e))}function dD(n,e,t){return n.createElement(e,t)}function qp(n,e,t,i,r){n.insertBefore(e,t,i,r)}function hD(n,e,t){n.appendChild(e,t)}function bC(n,e,t,i,r){i!==null?qp(n,e,t,i,r):hD(n,e,t)}function rL(n,e,t){n.removeChild(null,e,t)}function sL(n,e,t){n.setAttribute(e,"style",t)}function oL(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function pD(n,e,t){let{mergedAttrs:i,classes:r,styles:s}=t;i!==null&&GF(n,e,i),r!==null&&oL(n,e,r),s!==null&&sL(n,e,s)}function yy(n,e,t,i,r,s,o,a,l,c,u){let d=Nn+i,h=d+r,p=aL(d,h),g=typeof c=="function"?c():c;return p[tt]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1,ssrId:u}}function aL(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:an);return t}function lL(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=yy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function vy(n,e,t,i,r,s,o,a,l,c,u){let d=e.blueprint.slice();return d[zr]=r,d[Ke]=i|4|128|8|64|1024,(c!==null||n&&n[Ke]&2048)&&(d[Ke]|=2048),gx(d),d[xn]=d[ol]=n,d[Pn]=t,d[qr]=o||n&&n[qr],d[Lt]=a||n&&n[Lt],d[Qa]=l||n&&n[Qa]||null,d[Gn]=s,d[Jp]=v4(),d[nu]=u,d[lx]=c,d[_i]=e.type==2?n[_i]:d,d}function cL(n,e,t){let i=ur(e,n),r=lL(t),s=n[qr].rendererFactory,o=wy(n,vy(n,r,null,fD(t),i,e,null,s.createRenderer(i,t),null,null,null));return n[e.index]=o}function fD(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function gD(n,e,t,i){if(t===0)return-1;let r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function wy(n,e){return n[iu]?n[oC][Fi]=e:n[iu]=e,n[oC]=e,e}function y(n=1){mD(Kt(),$e(),dr()+n,!1)}function mD(n,e,t,i){if(!i)if((e[Ke]&3)===3){let s=n.preOrderCheckHooks;s!==null&&vp(e,s,t)}else{let s=n.preOrderHooks;s!==null&&wp(e,s,0,t)}bo(t)}var lf=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(lf||{});function mA(n,e,t,i){let r=ot(null);try{let[s,o,a]=n.inputs[t],l=null;(o&lf.SignalBased)!==0&&(l=e[s][fi]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):a!==null&&(i=a.call(e,i)),n.setInput!==null?n.setInput(e,l,i,t,s):ux(e,l,s,i)}finally{ot(r)}}function _D(n,e,t,i,r){let s=dr(),o=i&2;try{bo(-1),o&&e.length>Nn&&mD(n,e,Nn,!1),St(o?2:0,r),t(i,r)}finally{bo(s),St(o?3:1,r)}}function cf(n,e,t){gL(n,e,t),(t.flags&64)===64&&mL(n,e,t)}function by(n,e,t=ur){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?t(e,n):n[o];n[r++]=a}}}function uL(n,e,t,i){let s=i.get(D4,Jx)||t===lr.ShadowDom,o=n.selectRootElement(e,s);return dL(o),o}function dL(n){hL(n)}var hL=()=>null;function pL(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function uf(n,e,t,i,r,s,o,a){if(!a&&Cy(e,n,t,i,r)){al(e)&&fL(t,e.index);return}if(e.type&3){let l=ur(e,t);i=pL(i),r=o!=null?o(r,e.value||"",i):r,s.setProperty(l,i,r)}else e.type&12}function fL(n,e){let t=or(e,n);t[Ke]&16||(t[Ke]|=64)}function gL(n,e,t){let i=t.directiveStart,r=t.directiveEnd;al(t)&&cL(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Fp(t,e);let s=t.initialInputs;for(let o=i;o<r;o++){let a=n.data[o],l=ru(e,n,o,t);if(dl(l,e),s!==null&&vL(e,o-i,l,a,t,s),rr(a)){let c=or(t.index,e);c[Pn]=ru(e,n,o,t)}}}function mL(n,e,t){let i=t.directiveStart,r=t.directiveEnd,s=t.index,o=VF();try{bo(s);for(let a=i;a<r;a++){let l=n.data[a],c=e[a];iA(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&_L(l,c)}}finally{bo(-1),iA(o)}}function _L(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Sy(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let s=t[r];uD(e,s.selectors,!1)&&(i??=[],rr(s)?i.unshift(s):i.push(s))}return i}function AL(n,e,t,i,r,s){let o=ur(n,e);yL(e[Lt],o,s,n.value,t,i,r)}function yL(n,e,t,i,r,s,o){if(s==null)n.removeAttribute(e,r,t);else{let a=o==null?ri(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}function vL(n,e,t,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let l=o[a],c=o[a+1];mA(i,t,l,c)}}function wL(n,e){let t=n[Qa],i=t?t.get(ar,null):null;i&&i.handleError(e)}function Cy(n,e,t,i,r){let s=n.inputs?.[i],o=n.hostDirectiveInputs?.[i],a=!1;if(o)for(let l=0;l<o.length;l+=2){let c=o[l],u=o[l+1],d=e.data[c];mA(d,t[c],u,r),a=!0}if(s)for(let l of s){let c=t[l],u=e.data[l];mA(u,c,i,r),a=!0}return a}function bL(n,e){let t=or(e,n),i=t[tt];SL(i,t);let r=t[zr];r!==null&&t[nu]===null&&(t[nu]=iD(r,t[Qa])),St(18),xy(i,t,t[Pn]),St(19,t[Pn])}function SL(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function xy(n,e,t){ry(e);try{let i=n.viewQuery;i!==null&&gA(1,i,t);let r=n.template;r!==null&&_D(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[jr]?.finishViewCreation(n),n.staticContentQueries&&rD(n,e),n.staticViewQueries&&gA(2,n.viewQuery,t);let s=n.components;s!==null&&CL(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Ke]&=-5,sy()}}function CL(n,e){for(let t=0;t<e.length;t++)bL(n,e[t])}function Dy(n,e,t,i){let r=ot(null);try{let s=e.tView,a=n[Ke]&4096?4096:16,l=vy(n,s,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=n[e.index];l[yo]=c;let u=n[jr];return u!==null&&(l[jr]=u.createEmbeddedView(s)),xy(s,l,t),l}finally{ot(r)}}function jp(n,e){return!e||e.firstChild===null||Yx(n)}var xL;function Ey(n,e){return xL(n,e)}var Wr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Wr||{});function My(n){return(n.flags&32)===32}function Ya(n,e,t,i,r){if(i!=null){let s,o=!1;Hr(i)?s=i:vs(i)&&(o=!0,i=i[zr]);let a=sr(i);n===0&&t!==null?r==null?hD(e,t,a):qp(e,t,a,r||null,!0):n===1&&t!==null?qp(e,t,a,r||null,!0):n===2?rL(e,a,o):n===3&&e.destroyNode(a),s!=null&&RL(e,n,s,t,r)}}function DL(n,e){AD(n,e),e[zr]=null,e[Gn]=null}function EL(n,e,t,i,r,s){i[zr]=r,i[Gn]=e,hf(n,i,t,1,r,s)}function AD(n,e){e[qr].changeDetectionScheduler?.notify(9),hf(n,e,e[Lt],2,null,null)}function ML(n){let e=n[iu];if(!e)return V_(n[tt],n);for(;e;){let t=null;if(vs(e))t=e[iu];else{let i=e[Yn];i&&(t=i)}if(!t){for(;e&&!e[Fi]&&e!==n;)vs(e)&&V_(e[tt],e),e=e[xn];e===null&&(e=n),vs(e)&&V_(e[tt],e),t=e&&e[Fi]}e=t}}function Ty(n,e){let t=n[Ja],i=t.indexOf(e);t.splice(i,1)}function Iy(n,e){if(hu(e))return;let t=e[Lt];t.destroyNode&&hf(n,e,t,3,null,null),ML(e)}function V_(n,e){if(hu(e))return;let t=ot(null);try{e[Ke]&=-129,e[Ke]|=256,e[mi]&&c_(e[mi]),IL(n,e),TL(n,e),e[tt].type===1&&e[Lt].destroy();let i=e[yo];if(i!==null&&Hr(e[xn])){i!==e[xn]&&Ty(i,e);let r=e[jr];r!==null&&r.detachView(n)}hA(e)}finally{ot(t)}}function TL(n,e){let t=n.cleanup,i=e[Ip];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else{let a=i[t[o+1]];t[o].call(a)}i!==null&&(e[Ip]=null);let r=e[ys];if(r!==null){e[ys]=null;for(let o=0;o<r.length;o++){let a=r[o];a()}}let s=e[kp];if(s!==null){e[kp]=null;for(let o of s)o.destroy()}}function IL(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof So)){let s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],l=s[o+1];St(4,a,l);try{l.call(a)}finally{St(5,a,l)}}else{St(4,r,s);try{s.call(r)}finally{St(5,r,s)}}}}}function yD(n,e,t){return kL(n,e.parent,t)}function kL(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[zr];if(al(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===lr.None||r===lr.Emulated)return null}return ur(i,t)}function vD(n,e,t){return NL(n,e,t)}function PL(n,e,t){return n.type&40?ur(n,t):null}var NL=PL,SC;function df(n,e,t,i){let r=yD(n,i,e),s=e[Lt],o=i.parent||e[Gn],a=vD(o,i,e);if(r!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)bC(s,r,t[l],a,!1);else bC(s,r,t,a,!1);SC!==void 0&&SC(s,i,e,t,r)}function Qc(n,e){if(e!==null){let t=e.type;if(t&3)return ur(e,n);if(t&4)return _A(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return Qc(n,i);{let r=n[e.index];return Hr(r)?_A(-1,r):sr(r)}}else{if(t&128)return Qc(n,e.next);if(t&32)return Ey(e,n)()||sr(n[e.index]);{let i=wD(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=wo(n[_i]);return Qc(r,i)}else return Qc(n,e.next)}}}return null}function wD(n,e){if(e!==null){let i=n[_i][Gn],r=e.projection;return i.projection[r]}return null}function _A(n,e){let t=Yn+n+1;if(t<e.length){let i=e[t],r=i[tt].firstChild;if(r!==null)return Qc(i,r)}return e[vo]}function ky(n,e,t,i,r,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=i[t.index],l=t.type;if(o&&e===0&&(a&&dl(sr(a),i),t.flags|=2),!My(t))if(l&8)ky(n,e,t.child,i,r,s,!1),Ya(e,n,r,a,s);else if(l&32){let c=Ey(t,i),u;for(;u=c();)Ya(e,n,r,u,s);Ya(e,n,r,a,s)}else l&16?bD(n,e,i,t,r,s):Ya(e,n,r,a,s);t=o?t.projectionNext:t.next}}function hf(n,e,t,i,r,s){ky(t,i,n.firstChild,e,r,s,!1)}function OL(n,e,t){let i=e[Lt],r=yD(n,t,e),s=t.parent||e[Gn],o=vD(s,t,e);bD(i,0,e,t,r,o)}function bD(n,e,t,i,r,s){let o=t[_i],l=o[Gn].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Ya(e,n,r,u,s)}else{let c=l,u=o[xn];Yx(i)&&(c.flags|=128),ky(n,e,c,u,r,s,!0)}}function RL(n,e,t,i,r){let s=t[vo],o=sr(t);s!==o&&Ya(e,n,i,s,r);for(let a=Yn;a<t.length;a++){let l=t[a];hf(l[tt],l,n,e,i,s)}}function FL(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=i.indexOf("-")===-1?void 0:Wr.DashCase;r==null?n.removeStyle(t,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Wr.Important),n.setStyle(t,i,r,s))}}function Wp(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&i.push(sr(s)),Hr(s)&&LL(s,i);let o=t.type;if(o&8)Wp(n,e,t.child,i);else if(o&32){let a=Ey(t,e),l;for(;l=a();)i.push(l)}else if(o&16){let a=wD(e,t);if(Array.isArray(a))i.push(...a);else{let l=wo(e[_i]);Wp(l[tt],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function LL(n,e){for(let t=Yn;t<n.length;t++){let i=n[t],r=i[tt].firstChild;r!==null&&Wp(i[tt],i,r,e)}n[vo]!==n[zr]&&e.push(n[vo])}function SD(n){if(n[Ga]!==null){for(let e of n[Ga])e.impl.addSequence(e);n[Ga].length=0}}var CD=[];function VL(n){return n[mi]??BL(n)}function BL(n){let e=CD.pop()??Object.create(jL);return e.lView=n,e}function qL(n){n.lView[mi]!==n&&(n.lView=null,CD.push(n))}var jL=Ie(ie({},Wc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{pu(n.lView)},consumerOnSignalRead(){this.lView[mi]=this}});function WL(n){let e=n[mi]??Object.create(UL);return e.lView=n,e}var UL=Ie(ie({},Wc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=wo(n.lView);for(;e&&!xD(e[tt]);)e=wo(e);e&&mx(e)},consumerOnSignalRead(){this.lView[mi]=this}});function xD(n){return n.type!==2}function DD(n){if(n[kp]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[kp])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[Ke]&8192)}}var zL=100;function ED(n,e=!0,t=0){let r=n[qr].rendererFactory,s=!1;s||r.begin?.();try{HL(n,t)}catch(o){throw e&&wL(n,o),o}finally{s||r.end?.()}}function HL(n,e){let t=vx();try{lC(!0),AA(n,e);let i=0;for(;tf(n);){if(i===zL)throw new Se(103,!1);i++,AA(n,1)}}finally{lC(t)}}function YL(n,e,t,i){if(hu(e))return;let r=e[Ke],s=!1,o=!1;ry(e);let a=!0,l=null,c=null;s||(xD(n)?(c=VL(e),l=Lh(c)):i_()===null?(a=!1,c=WL(e),l=Lh(c)):e[mi]&&(c_(e[mi]),e[mi]=null));try{gx(e),RF(n.bindingStartIndex),t!==null&&_D(n,e,t,2,i);let u=(r&3)===3;if(!s)if(u){let p=n.preOrderCheckHooks;p!==null&&vp(e,p,null)}else{let p=n.preOrderHooks;p!==null&&wp(e,p,0,null),F_(e,0)}if(o||GL(e),DD(e),MD(e,0),n.contentQueries!==null&&rD(n,e),!s)if(u){let p=n.contentCheckHooks;p!==null&&vp(e,p)}else{let p=n.contentHooks;p!==null&&wp(e,p,1),F_(e,1)}$L(n,e);let d=n.components;d!==null&&ID(e,d,0);let h=n.viewQuery;if(h!==null&&gA(2,h,i),!s)if(u){let p=n.viewCheckHooks;p!==null&&vp(e,p)}else{let p=n.viewHooks;p!==null&&wp(e,p,2),F_(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[R_]){for(let p of e[R_])p();e[R_]=null}s||(SD(e),e[Ke]&=-73)}catch(u){throw s||pu(e),u}finally{c!==null&&(a_(c,l),a&&qL(c)),sy()}}function MD(n,e){for(let t=$x(n);t!==null;t=Zx(t))for(let i=Yn;i<t.length;i++){let r=t[i];TD(r,e)}}function GL(n){for(let e=$x(n);e!==null;e=Zx(e)){if(!(e[Ke]&2))continue;let t=e[Ja];for(let i=0;i<t.length;i++){let r=t[i];mx(r)}}}function KL(n,e,t){St(18);let i=or(e,n);TD(i,t),St(19,i[Pn])}function TD(n,e){ZA(n)&&AA(n,e)}function AA(n,e){let i=n[tt],r=n[Ke],s=n[mi],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&l_(s)),o||=!1,s&&(s.dirty=!1),n[Ke]&=-9217,o)YL(i,n,i.template,n[Pn]);else if(r&8192){DD(n),MD(n,1);let a=i.components;a!==null&&ID(n,a,1),SD(n)}}function ID(n,e,t){for(let i=0;i<e.length;i++)KL(n,e[i],t)}function $L(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)bo(~r);else{let s=r,o=t[++i],a=t[++i];LF(o,s);let l=e[s];St(24,l),a(2,l),St(25,l)}}}finally{bo(-1)}}function Py(n,e){let t=vx()?64:1088;for(n[qr].changeDetectionScheduler?.notify(e);n;){n[Ke]|=t;let i=wo(n);if(Np(n)&&!i)return n;n=i}return null}function kD(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function ZL(n,e){let t=Yn+e;if(t<n.length)return n[t]}function Ny(n,e,t,i=!0){let r=e[tt];if(QL(r,e,n,t),i){let o=_A(t,n),a=e[Lt],l=a.parentNode(n[vo]);l!==null&&EL(r,n[Gn],a,e,l,o)}let s=e[nu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function XL(n,e){let t=Up(n,e);return t!==void 0&&Iy(t[tt],t),t}function Up(n,e){if(n.length<=Yn)return;let t=Yn+e,i=n[t];if(i){let r=i[yo];r!==null&&r!==n&&Ty(r,i),e>0&&(n[t-1][Fi]=i[Fi]);let s=Mp(n,Yn+e);DL(i[tt],i);let o=s[jr];o!==null&&o.detachView(s[tt]),i[xn]=null,i[Fi]=null,i[Ke]&=-129}return i}function QL(n,e,t,i){let r=Yn+i,s=t.length;i>0&&(t[r-1][Fi]=e),i<s-Yn?(e[Fi]=t[r],QC(t,Yn+i,e)):(t.push(e),e[Fi]=null),e[xn]=t;let o=e[yo];o!==null&&t!==o&&PD(o,e);let a=e[jr];a!==null&&a.insertView(n),tA(e),e[Ke]|=128}function PD(n,e){let t=n[Ja],i=e[xn];if(vs(i))n[Ke]|=2;else{let r=i[xn][_i];e[_i]!==r&&(n[Ke]|=2)}t===null?n[Ja]=[e]:t.push(e)}var su=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[tt];return Wp(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i}get context(){return this._lView[Pn]}set context(e){this._lView[Pn]=e}get destroyed(){return hu(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[xn];if(Hr(e)){let t=e[Pp],i=t?t.indexOf(this):-1;i>-1&&(Up(e,i),Mp(t,i))}this._attachedToViewContainer=!1}Iy(this._lView[tt],this._lView)}onDestroy(e){_x(this._lView,e)}markForCheck(){Py(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ke]&=-129}reattach(){tA(this._lView),this._lView[Ke]|=128}detectChanges(){this._lView[Ke]|=1024,ED(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Np(this._lView),t=this._lView[yo];t!==null&&!e&&Ty(t,this._lView),AD(this._lView[tt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Se(902,!1);this._appRef=e;let t=Np(this._lView),i=this._lView[yo];i!==null&&!t&&PD(i,this._lView),tA(this._lView)}};var cr=(()=>{class n{static __NG_ELEMENT_ID__=tV}return n})(),JL=cr,eV=class extends JL{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=Dy(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new su(r)}};function tV(){return pf(Kn(),$e())}function pf(n,e){return n.type&4?new eV(e,n,ul(n,e)):null}function Au(n,e,t,i,r){let s=n.data[e];if(s===null)s=nV(n,e,t,i,r),FF()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=i,s.attrs=r;let o=NF();s.injectorIndex=o===null?-1:o.injectorIndex}return xo(s,!0),s}function nV(n,e,t,i,r){let s=yx(),o=ey(),a=o?s:s&&s.parent,l=n.data[e]=rV(n,a,t,e,i,r);return iV(n,l,s,o),l}function iV(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function rV(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return Ax()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Nue=new RegExp(`^(\\d+)*(${x4}|${C4})*(.*)`);var sV=()=>null;function zp(n,e){return sV(n,e)}var oV=class{},ND=class{},yA=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Hn(e)}.`)}},ff=class{static NULL=new yA},il=class{},Ss=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>aV()}return n})();function aV(){let n=$e(),e=Kn(),t=or(e.index,n);return(vs(t)?t:n)[Lt]}var lV=(()=>{class n{static \u0275prov=he({token:n,providedIn:"root",factory:()=>null})}return n})();var B_={},vA=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Xp(i);let r=this.injector.get(e,B_,i);return r!==B_||t===B_?r:this.parentInjector.get(e,t,i)}};function wA(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=G_(r,a);else if(s==2){let l=a,c=e[++o];i=G_(i,l+": "+c+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Ae(n,e=it.Default){let t=$e();if(t===null)return oe(n,e);let i=Kn();return Rx(i,t,In(n),e)}function Oy(n,e,t,i,r){let s=i===null?null:{"":-1},o=r(n,t);if(o!==null){let a,l=null,c=null,u=uV(o);u===null?a=o:[a,l,c]=u,pV(n,e,t,a,s,l,c)}s!==null&&i!==null&&cV(t,i,s)}function cV(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let s=t[e[r+1]];if(s==null)throw new Se(-301,!1);i.push(e[r],s)}}function uV(n){let e=null,t=!1;for(let o=0;o<n.length;o++){let a=n[o];if(o===0&&rr(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let i=null,r=null,s=null;for(let o of n)o.findHostDirectiveDefs!==null&&(i??=[],r??=new Map,s??=new Map,dV(o,i,s,r)),o===e&&(i??=[],i.push(o));return i!==null?(i.push(...e===null?n:n.slice(1)),[i,r,s]):null}function dV(n,e,t,i){let r=e.length;n.findHostDirectiveDefs(n,e,i),t.set(n,[r,e.length-1])}function hV(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function pV(n,e,t,i,r,s,o){let a=i.length,l=!1;for(let h=0;h<a;h++){let p=i[h];!l&&rr(p)&&(l=!0,hV(n,t,h)),sA(Fp(t,e),n,p.type)}yV(t,n.data.length,a);for(let h=0;h<a;h++){let p=i[h];p.providersResolver&&p.providersResolver(p)}let c=!1,u=!1,d=gD(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let h=0;h<a;h++){let p=i[h];if(t.mergedAttrs=tl(t.mergedAttrs,p.hostAttrs),gV(n,t,e,d,p),AV(d,p,r),o!==null&&o.has(p)){let[A,v]=o.get(p);t.directiveToIndex.set(p.type,[d,A+t.directiveStart,v+t.directiveStart])}else(s===null||!s.has(p))&&t.directiveToIndex.set(p.type,d);p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let g=p.type.prototype;!c&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),c=!0),!u&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),d++}fV(n,t,s)}function fV(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))CC(0,e,r,i),CC(1,e,r,i),DC(e,i,!1);else{let s=t.get(r);xC(0,e,s,i),xC(1,e,s,i),DC(e,i,!0)}}}function CC(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let s in r)if(r.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(i),OD(e,s)}}function xC(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let s in r)if(r.hasOwnProperty(s)){let o=r[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(i,s),OD(e,o)}}function OD(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function DC(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:s}=n;if(i===null||!t&&r===null||t&&s===null||Ay(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<i.length;){let l=i[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&r.hasOwnProperty(l)){let c=r[l];for(let u of c)if(u===e){o??=[],o.push(l,i[a+1]);break}}else if(t&&s.hasOwnProperty(l)){let c=s[l];for(let u=0;u<c.length;u+=2)if(c[u]===e){o??=[],o.push(c[u+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function gV(n,e,t,i,r){n.data[i]=r;let s=r.factory||(r.factory=$a(r.type,!0)),o=new So(s,rr(r),Ae);n.blueprint[i]=o,t[i]=o,mV(n,e,i,gD(n,t,r.hostVars,an),r)}function mV(n,e,t,i,r){let s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;_V(o)!=a&&o.push(a),o.push(t,i,s)}}function _V(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function AV(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;rr(e)&&(t[""]=n)}}function yV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function RD(n,e,t,i,r,s,o,a){let l=e.consts,c=el(l,o),u=Au(e,n,2,i,c);return s&&Oy(e,t,u,el(l,a),r),u.mergedAttrs=tl(u.mergedAttrs,u.attrs),u.attrs!==null&&wA(u,u.attrs,!1),u.mergedAttrs!==null&&wA(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function FD(n,e){oy(n,e),KA(e)&&n.queries.elementEnd(e)}var Hp=class extends ff{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Za(e);return new ou(t,this.ngModule)}};function vV(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],s={propName:t,templateName:e,isSignal:(i&lf.SignalBased)!==0};return r&&(s.transform=r),s})}function wV(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function bV(n,e,t){let i=e instanceof kn?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new vA(t,i):t}function SV(n){let e=n.get(il,null);if(e===null)throw new Se(407,!1);let t=n.get(lV,null),i=n.get(nl,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i}}function CV(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return dD(e,t,t==="svg"?vF:t==="math"?wF:null)}var ou=class extends ND{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=vV(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=wV(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=J4(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r){St(22);let s=ot(null);try{let o=this.componentDef,a=i?["ng-version","19.2.5"]:eL(this.componentDef.selectors[0]),l=yy(0,null,null,1,0,null,null,null,null,[a],null),c=bV(o,r||this.ngModule,e),u=SV(c),d=u.rendererFactory.createRenderer(null,o),h=i?uL(d,i,o.encapsulation,c):CV(o,d),p=vy(null,l,null,512|fD(o),null,null,u,d,c,null,iD(h,c,!0));p[Nn]=h,ry(p);let g=null;try{let A=RD(Nn,l,p,"#host",()=>[this.componentDef],!0,0);h&&(pD(d,h,A),dl(h,p)),cf(l,p,A),my(l,A,p),FD(l,A),t!==void 0&&xV(A,this.ngContentSelectors,t),g=or(A.index,p),p[Pn]=g[Pn],xy(l,p,null)}catch(A){throw g!==null&&hA(g),hA(p),A}finally{St(23),sy()}return new bA(this.componentType,p)}finally{ot(s)}}},bA=class extends oV{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=$A(t[tt],Nn),this.location=ul(this._tNode,t),this.instance=or(this._tNode.index,t)[Pn],this.hostView=this.changeDetectorRef=new su(t,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,s=Cy(i,r[tt],r,e,t);this.previousInputValues.set(e,t);let o=or(i.index,r);Py(o,1)}get injector(){return new _o(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function xV(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let s=t[r];i.push(s!=null&&s.length?Array.from(s):null)}}var qi=(()=>{class n{static __NG_ELEMENT_ID__=DV}return n})();function DV(){let n=Kn();return VD(n,$e())}var EV=qi,LD=class extends EV{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return ul(this._hostTNode,this._hostLView)}get injector(){return new _o(this._hostTNode,this._hostLView)}get parentInjector(){let e=ay(this._hostTNode,this._hostLView);if(Tx(e)){let t=Rp(e,this._hostLView),i=Op(e),r=t[tt].data[i+8];return new _o(r,t)}else return new _o(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=EC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Yn}createEmbeddedView(e,t,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=zp(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,r,jp(this._hostTNode,o)),a}createComponent(e,t,i,r,s){let o=e&&!mF(e),a;if(o)a=t;else{let g=t||{};a=g.index,i=g.injector,r=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}let l=o?e:new ou(Za(e)),c=i||this.parentInjector;if(!s&&l.ngModule==null){let A=(o?c:this.parentInjector).get(kn,null);A&&(s=A)}let u=Za(l.componentType??{}),d=zp(this._lContainer,u?.id??null),h=d?.firstChild??null,p=l.create(c,r,h,s);return this.insertImpl(p.hostView,a,jp(this._hostTNode,d)),p}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(CF(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[xn],c=new LD(l,l[Gn],l[xn]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return Ny(o,r,s,i),e.attachToViewContainerRef(),QC(q_(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=EC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=Up(this._lContainer,t);i&&(Mp(q_(this._lContainer),t),Iy(i[tt],i))}detach(e){let t=this._adjustIndex(e,-1),i=Up(this._lContainer,t);return i&&Mp(q_(this._lContainer),t)!=null?new su(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function EC(n){return n[Pp]}function q_(n){return n[Pp]||(n[Pp]=[])}function VD(n,e){let t,i=e[n.index];return Hr(i)?t=i:(t=kD(i,e,null,n),e[n.index]=t,wy(e,t)),TV(t,e,n,i),new LD(t,n,e)}function MV(n,e){let t=n[Lt],i=t.createComment(""),r=ur(e,n),s=t.parentNode(r);return qp(t,s,i,t.nextSibling(r),!1),i}var TV=PV,IV=()=>!1;function kV(n,e,t){return IV(n,e,t)}function PV(n,e,t,i){if(n[vo])return;let r;t.type&8?r=sr(i):r=MV(e,t),n[vo]=r}var SA=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},CA=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Ry(e,t).matches!==null&&this.queries[t].setDirty()}},xA=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=qV(e):this.predicate=e}},DA=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},EA=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(e,t,NV(t,s)),this.matchTNodeWithReadOption(e,t,bp(t,e,s,!1,!1))}else i===cr?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,bp(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===_n||r===qi||r===cr&&t.type&4)this.addMatch(t.index,-2);else{let s=bp(t,e,r,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function NV(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function OV(n,e){return n.type&11?ul(n,e):n.type&4?pf(n,e):null}function RV(n,e,t,i){return t===-1?OV(e,n):t===-2?FV(n,e,i):ru(n,n[tt],t,e)}function FV(n,e,t){if(t===_n)return ul(e,n);if(t===cr)return pf(e,n);if(t===qi)return VD(e,n)}function BD(n,e,t,i){let r=e[jr].queries[i];if(r.matches===null){let s=n.data,o=t.matches,a=[];for(let l=0;o!==null&&l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let u=s[c];a.push(RV(e,u,o[l+1],t.metadata.read))}}r.matches=a}return r.matches}function MA(n,e,t,i){let r=n.queries.getByIndex(t),s=r.matches;if(s!==null){let o=BD(n,e,r,t);for(let a=0;a<s.length;a+=2){let l=s[a];if(l>0)i.push(o[a/2]);else{let c=s[a+1],u=e[-l];for(let d=Yn;d<u.length;d++){let h=u[d];h[yo]===h[xn]&&MA(h[tt],h,c,i)}if(u[Ja]!==null){let d=u[Ja];for(let h=0;h<d.length;h++){let p=d[h];MA(p[tt],p,c,i)}}}}}return i}function LV(n,e){return n[jr].queries[e].queryList}function VV(n,e,t){let i=new dA((t&4)===4);return EF(n,e,i,i.destroy),(e[jr]??=new CA).queries.push(new SA(i))-1}function BV(n,e,t){let i=Kt();return i.firstCreatePass&&(jV(i,new xA(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),VV(i,$e(),e)}function qV(n){return n.split(",").map(e=>e.trim())}function jV(n,e,t){n.queries===null&&(n.queries=new DA),n.queries.track(new EA(e,t))}function Ry(n,e){return n.queries.getByIndex(e)}function WV(n,e){let t=n[tt],i=Ry(t,e);return i.crossesNgTemplate?MA(t,n,e,[]):BD(t,n,i,e)}var rl=class{},Fy=class{};var TA=class extends rl{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Hp(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let s=tx(e);this._bootstrapComponents=lD(s.bootstrap),this._r3Injector=Vx(e,t,[{provide:rl,useValue:this},{provide:ff,useValue:this.componentFactoryResolver},...i],Hn(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},IA=class extends Fy{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new TA(this.moduleType,e,[])}};var Yp=class extends rl{injector;componentFactoryResolver=new Hp(this);instance=null;constructor(e){super();let t=new tu([...e.providers,{provide:rl,useValue:this},{provide:ff,useValue:this.componentFactoryResolver}],e.parent||GA(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function gf(n,e,t=null){return new Yp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var UV=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=nx(!1,t.type),r=i.length>0?gf([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=he({token:n,providedIn:"environment",factory:()=>new n(oe(kn))})}return n})();function ji(n){return cu(()=>{let e=qD(n),t=Ie(ie({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Gx.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(UV).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||lr.Emulated,styles:n.styles||zn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&_u("NgStandalone"),jD(t);let i=n.dependencies;return t.directiveDefs=MC(i,!1),t.pipeDefs=MC(i,!0),t.id=KV(t),t})}function zV(n){return Za(n)||rF(n)}function HV(n){return n!==null}function Wi(n){return cu(()=>({type:n.type,bootstrap:n.bootstrap||zn,declarations:n.declarations||zn,imports:n.imports||zn,exports:n.exports||zn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function YV(n,e){if(n==null)return Ao;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s,o,a,l;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s,l=r[3]||null):(s=r,o=r,a=lf.None,l=null),t[s]=[i,a,l],e[s]=o}return t}function GV(n){if(n==null)return Ao;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Mt(n){return cu(()=>{let e=qD(n);return jD(e),e})}function qD(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Ao,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||zn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:YV(n.inputs,e),outputs:GV(n.outputs),debugInfo:null}}function jD(n){n.features?.forEach(e=>e(n))}function MC(n,e){if(!n)return null;let t=e?sF:zV;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(HV)}function KV(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of i.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function $V(n){return Object.getPrototypeOf(n.prototype).constructor}function ai(n){let e=$V(n.type),t=!0,i=[n];for(;e;){let r;if(rr(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Se(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let o=n;o.inputs=j_(n.inputs),o.declaredInputs=j_(n.declaredInputs),o.outputs=j_(n.outputs);let a=r.hostBindings;a&&e6(n,a);let l=r.viewQuery,c=r.contentQueries;if(l&&QV(n,l),c&&JV(n,c),ZV(n,r),O5(n.outputs,r.outputs),rr(r)&&r.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===ai&&(t=!1)}}e=Object.getPrototypeOf(e)}XV(i)}function ZV(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function XV(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=tl(r.hostAttrs,t=tl(t,r.hostAttrs))}}function j_(n){return n===Ao?{}:n===zn?[]:n}function QV(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function JV(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,s)=>{e(i,r,s),t(i,r,s)}:n.contentQueries=e}function e6(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function WD(n){return n6(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function t6(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function n6(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function yu(n,e,t){return n[e]=t}function UD(n,e){return n[e]}function si(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function au(n,e,t,i){let r=si(n,e,t);return si(n,e+1,i)||r}function zD(n,e,t,i,r){let s=au(n,e,t,i);return si(n,e+2,r)||s}function HD(n,e,t,i,r,s){let o=au(n,e,t,i);return au(n,e+2,r,s)||o}function i6(n,e,t,i,r,s,o,a,l){let c=e.consts,u=Au(e,n,4,o||null,a||null);JA()&&Oy(e,t,u,el(c,l),Sy),u.mergedAttrs=tl(u.mergedAttrs,u.attrs),oy(e,u);let d=u.tView=yy(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function YD(n,e,t,i,r,s,o,a,l,c){let u=t+Nn,d=e.firstCreatePass?i6(u,e,n,i,r,s,o,a,l):e.data[u];xo(d,!1);let h=r6(e,n,d,t);nf()&&df(e,n,h,d),dl(h,n);let p=kD(h,n,h,d);return n[u]=p,wy(n,p),kV(p,d,n),ef(d)&&cf(e,n,d),l!=null&&by(n,d,c),d}function te(n,e,t,i,r,s,o,a){let l=$e(),c=Kt(),u=el(c.consts,s);return YD(l,c,n,e,t,i,r,u,o,a),te}var r6=s6;function s6(n,e,t,i){return rf(!0),e[Lt].createComment("")}var GD=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var KD=new we("");var o6=(()=>{class n{static \u0275prov=he({token:n,providedIn:"root",factory:()=>new kA})}return n})(),kA=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||(this.queuedEffectCount++,i.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Do(n){return!!n&&typeof n.then=="function"}function $D(n){return!!n&&typeof n.subscribe=="function"}var ZD=new we("");var XD=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=se(ZD,{optional:!0})??[];injector=se(On);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let s=oi(this.injector,r);if(Do(s))t.push(s);else if($D(s)){let o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ly=new we("");function a6(){d_(()=>{throw new Se(600,!1)})}function l6(n){return n.isBoundToModule}var c6=10;var Ur=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=se(h4);afterRenderManager=se(tD);zonelessEnabled=se(ly);rootEffectScheduler=se(o6);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new at;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=se(ws).hasPendingTasks.pipe(Ue(t=>!t));constructor(){se(hl,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=se(kn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){St(10);let r=t instanceof ND;if(!this._injector.get(XD).done){let h="";throw new Se(405,h)}let o;r?o=t:o=this._injector.get(ff).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=l6(o)?void 0:this._injector.get(rl),l=i||o.selector,c=o.create(On.NULL,[],l,a),u=c.location.nativeElement,d=c.injector.get(KD,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Sp(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),St(11,c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){St(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(fy.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Se(101,!1);let t=ot(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ot(t),this.afterTick.next(),St(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(il,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<c6;)St(14),this.synchronizeOnce(),St(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:r}of this.allViews)u6(i,r,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>tf(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;Sp(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ly,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Sp(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Se(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sp(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function u6(n,e,t,i){if(!t&&!tf(n))return;ED(n,e,t&&!i?0:1)}function mf(n,e,t,i){let r=$e(),s=ll();if(si(r,s,e)){let o=Kt(),a=mu();AL(a,r,n,e,t,i)}return mf}function QD(n,e,t,i){return si(n,ll(),t)?e+ri(t)+i:an}function d6(n,e,t,i,r,s){let o=ny(),a=au(n,o,t,r);return gu(2),a?e+ri(t)+i+ri(r)+s:an}function h6(n,e,t,i,r,s,o,a){let l=ny(),c=zD(n,l,t,r,o);return gu(3),c?e+ri(t)+i+ri(r)+s+ri(o)+a:an}function p6(n,e,t,i,r,s,o,a,l,c){let u=ny(),d=HD(n,u,t,r,o,l);return gu(4),d?e+ri(t)+i+ri(r)+s+ri(o)+a+ri(l)+c:an}function Ap(n,e){return n<<17|e<<2}function Co(n){return n>>17&32767}function f6(n){return(n&2)==2}function g6(n,e){return n&131071|e<<17}function PA(n){return n|2}function sl(n){return(n&131068)>>2}function W_(n,e){return n&-131069|e<<2}function m6(n){return(n&1)===1}function NA(n){return n|1}function _6(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Co(o),l=sl(o);n[i]=t;let c=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||uu(d,u)>0)&&(c=!0)}else u=t;if(r)if(l!==0){let h=Co(n[a+1]);n[i+1]=Ap(h,a),h!==0&&(n[h+1]=W_(n[h+1],i)),n[a+1]=g6(n[a+1],i)}else n[i+1]=Ap(a,0),a!==0&&(n[a+1]=W_(n[a+1],i)),a=i;else n[i+1]=Ap(l,0),a===0?a=i:n[l+1]=W_(n[l+1],i),l=i;c&&(n[i+1]=PA(n[i+1])),TC(n,u,i,!0),TC(n,u,i,!1),A6(e,u,n,i,s),o=Ap(a,l),s?e.classBindings=o:e.styleBindings=o}function A6(n,e,t,i,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&uu(s,e)>=0&&(t[i+1]=NA(t[i+1]))}function TC(n,e,t,i){let r=n[t+1],s=e===null,o=i?Co(r):sl(r),a=!1;for(;o!==0&&(a===!1||s);){let l=n[o],c=n[o+1];y6(l,e)&&(a=!0,n[o+1]=i?NA(c):PA(c)),o=i?Co(c):sl(c)}a&&(n[t+1]=i?PA(r):NA(r))}function y6(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?uu(n,e)>=0:!1}var Ri={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function v6(n){return n.substring(Ri.key,Ri.keyEnd)}function w6(n){return b6(n),JD(n,eE(n,0,Ri.textEnd))}function JD(n,e){let t=Ri.textEnd;return t===e?-1:(e=Ri.keyEnd=S6(n,Ri.key=e,t),eE(n,e,t))}function b6(n){Ri.key=0,Ri.keyEnd=0,Ri.value=0,Ri.valueEnd=0,Ri.textEnd=n.length}function eE(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function S6(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function V(n,e,t){let i=$e(),r=ll();if(si(i,r,e)){let s=Kt(),o=mu();uf(s,o,i,n,e,i[Lt],t,!1)}return V}function OA(n,e,t,i,r){Cy(e,n,t,r?"class":"style",i)}function pl(n,e){return x6(n,e,null,!0),pl}function Vy(n){D6(P6,C6,n,!0)}function C6(n,e){for(let t=w6(e);t>=0;t=JD(e,t))HA(n,v6(e),!0)}function x6(n,e,t,i){let r=$e(),s=Kt(),o=gu(2);if(s.firstUpdatePass&&nE(s,n,o,i),e!==an&&si(r,o,e)){let a=s.data[dr()];iE(s,a,r,r[Lt],n,r[o+1]=O6(e,t),i,o)}}function D6(n,e,t,i){let r=Kt(),s=gu(2);r.firstUpdatePass&&nE(r,null,s,i);let o=$e();if(t!==an&&si(o,s,t)){let a=r.data[dr()];if(rE(a,i)&&!tE(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=G_(l,t||"")),OA(r,a,o,t,i)}else N6(r,a,o,o[Lt],o[s+1],o[s+1]=k6(n,e,t),i,s)}}function tE(n,e){return e>=n.expandoStartIndex}function nE(n,e,t,i){let r=n.data;if(r[t+1]===null){let s=r[dr()],o=tE(n,t);rE(s,i)&&e===null&&!o&&(e=!1),e=E6(r,s,e,i),_6(r,s,e,t,o,i)}}function E6(n,e,t,i){let r=BF(n),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=U_(null,n,e,t,i),t=lu(t,e.attrs,i),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==r)if(t=U_(r,n,e,t,i),s===null){let l=M6(n,e,i);l!==void 0&&Array.isArray(l)&&(l=U_(null,n,e,l[1],i),l=lu(l,e.attrs,i),T6(n,e,i,l))}else s=I6(n,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),t}function M6(n,e,t){let i=t?e.classBindings:e.styleBindings;if(sl(i)!==0)return n[Co(i)]}function T6(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[Co(r)]=i}function I6(n,e,t){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let o=n[s].hostAttrs;i=lu(i,o,t)}return lu(i,e.attrs,t)}function U_(n,e,t,i,r){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],i=lu(i,s.hostAttrs,r),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function lu(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?r=o:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),HA(n,o,t?!0:e[++s]))}return n===void 0?null:n}function k6(n,e,t){if(t==null||t==="")return zn;let i=[],r=_y(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else typeof r=="string"&&e(i,r);return i}function P6(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&HA(n,i,t)}function N6(n,e,t,i,r,s,o,a){r===an&&(r=zn);let l=0,c=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let h=l<r.length?r[l+1]:void 0,p=c<s.length?s[c+1]:void 0,g=null,A;u===d?(l+=2,c+=2,h!==p&&(g=d,A=p)):d===null||u!==null&&u<d?(l+=2,g=u):(c+=2,g=d,A=p),g!==null&&iE(n,e,t,i,g,A,o,a),u=l<r.length?r[l]:null,d=c<s.length?s[c]:null}}function iE(n,e,t,i,r,s,o,a){if(!(e.type&3))return;let l=n.data,c=l[a+1],u=m6(c)?IC(l,e,t,r,sl(c),o):void 0;if(!Gp(u)){Gp(s)||f6(c)&&(s=IC(l,null,t,r,a,o));let d=fx(dr(),t);FL(i,o,d,r,s)}}function IC(n,e,t,i,r,s){let o=e===null,a;for(;r>0;){let l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=t[r+1];h===an&&(h=d?zn:void 0);let p=d?N_(h,i):u===i?h:void 0;if(c&&!Gp(p)&&(p=N_(l,i)),Gp(p)&&(a=p,o))return a;let g=n[r+1];r=o?Co(g):sl(g)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=N_(l,i))}return a}function Gp(n){return n!==void 0}function O6(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Hn(_y(n)))),n}function rE(n,e){return(n.flags&(e?8:16))!==0}function By(n,e){_u("NgControlFlow");let t=$e(),i=ll(),r=t[i]!==an?t[i]:-1,s=r!==-1?kC(t,Nn+r):void 0,o=0;if(si(t,i,n)){let a=ot(null);try{if(s!==void 0&&XL(s,o),n!==-1){let l=Nn+n,c=kC(t,l),u=R6(t[tt],l),d=zp(c,u.tView.ssrId),h=Dy(t,u,e,{dehydratedView:d});Ny(c,h,o,jp(u,d))}}finally{ot(a)}}else if(s!==void 0){let a=ZL(s,o);a!==void 0&&(a[Pn]=e)}}function kC(n,e){return n[e]}function R6(n,e){return $A(n,e)}function m(n,e,t,i){let r=$e(),s=Kt(),o=Nn+n,a=r[Lt],l=s.firstCreatePass?RD(o,s,r,e,Sy,JA(),t,i):s.data[o],c=F6(s,r,l,a,e,n);r[o]=c;let u=ef(l);return xo(l,!0),pD(a,c,l),!My(l)&&nf()&&df(s,r,c,l),(MF()===0||u)&&dl(c,r),TF(),u&&(cf(s,r,l),my(s,l,r)),i!==null&&by(r,l),m}function _(){let n=Kn();ey()?ty():(n=n.parent,xo(n,!1));let e=n;kF(e)&&PF(),IF();let t=Kt();return t.firstCreatePass&&FD(t,e),e.classesWithoutHost!=null&&HF(e)&&OA(t,e,$e(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&YF(e)&&OA(t,e,$e(),e.stylesWithoutHost,!1),_}function Ze(n,e,t,i){return m(n,e,t,i),_(),Ze}var F6=(n,e,t,i,r,s)=>(rf(!0),dD(i,r,WF()));function L6(n,e,t,i,r){let s=e.consts,o=el(s,i),a=Au(e,n,8,"ng-container",o);o!==null&&wA(a,o,!0);let l=el(s,r);return JA()&&Oy(e,t,a,l,Sy),a.mergedAttrs=tl(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function _f(n,e,t){let i=$e(),r=Kt(),s=n+Nn,o=r.firstCreatePass?L6(s,r,i,e,t):r.data[s];xo(o,!0);let a=V6(r,i,o,n);return i[s]=a,nf()&&df(r,i,a,o),dl(a,i),ef(o)&&(cf(r,i,o),my(r,o,i)),t!=null&&by(i,o),_f}function Af(){let n=Kn(),e=Kt();return ey()?ty():(n=n.parent,xo(n,!1)),e.firstCreatePass&&(oy(e,n),KA(n)&&e.queries.elementEnd(n)),Af}var V6=(n,e,t,i)=>(rf(!0),iL(e[Lt],""));function ge(){return $e()}function qy(n,e,t){let i=$e(),r=ll();if(si(i,r,e)){let s=Kt(),o=mu();uf(s,o,i,n,e,i[Lt],t,!0)}return qy}var Kp="en-US";var B6=Kp;function q6(n){typeof n=="string"&&(B6=n.toLowerCase().replace(/_/g,"-"))}function PC(n,e,t){return function i(r){if(r===Function)return t;let s=al(n)?or(n.index,e):e;Py(s,5);let o=e[Pn],a=NC(e,o,t,r),l=i.__ngNextListenerFn__;for(;l;)a=NC(e,o,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function NC(n,e,t,i){let r=ot(null);try{return St(6,e,t),t(i)!==!1}catch(s){return j6(n,s),!1}finally{St(7,e,t),ot(r)}}function j6(n,e){let t=n[Qa],i=t?t.get(ar,null):null;i&&i.handleError(e)}function OC(n,e,t,i,r,s){let o=e[t],a=e[tt],c=a.data[t].outputs[i],u=o[c],d=a.firstCreatePass?QA(a):null,h=XA(e),p=u.subscribe(s),g=h.length;h.push(s,p),d&&d.push(r,n.index,g,-(g+1))}var W6=(n,e,t)=>{};function j(n,e,t,i){let r=$e(),s=Kt(),o=Kn();return sE(s,r,r[Lt],o,n,e,i),j}function U6(n,e,t,i){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===t&&r[s+1]===i){let a=e[Ip],l=r[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function sE(n,e,t,i,r,s,o){let a=ef(i),c=n.firstCreatePass?QA(n):null,u=XA(e),d=!0;if(i.type&3||o){let h=ur(i,e),p=o?o(h):h,g=u.length,A=o?b=>o(sr(b[i.index])):i.index,v=null;if(!o&&a&&(v=U6(n,e,r,i.index)),v!==null){let b=v.__ngLastListenerFn__||v;b.__ngNextListenerFn__=s,v.__ngLastListenerFn__=s,d=!1}else{s=PC(i,e,s),W6(p,r,s);let b=t.listen(p,r,s);u.push(s,b),c&&c.push(r,A,g,g+1)}}else s=PC(i,e,s);if(d){let h=i.outputs?.[r],p=i.hostDirectiveOutputs?.[r];if(p&&p.length)for(let g=0;g<p.length;g+=2){let A=p[g],v=p[g+1];OC(i,e,A,v,r,s)}if(h&&h.length)for(let g of h)OC(i,e,g,r,r,s)}}function R(n=1){return jF(n)}function z6(n,e){let t=null,i=K4(n);for(let r=0;r<e.length;r++){let s=e[r];if(s==="*"){t=r;continue}if(i===null?uD(n,s,!0):X4(i,s))return r}return t}function jy(n){let e=$e()[_i][Gn];if(!e.projection){let t=n?n.length:1,i=e.projection=tF(t,null),r=i.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?z6(s,n):0;o!==null&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s)}s=s.next}}}function Wy(n,e=0,t,i,r,s){let o=$e(),a=Kt(),l=i?n+1:null;l!==null&&YD(o,a,l,i,r,s,null,t);let c=Au(a,Nn+n,16,null,t||null);c.projection===null&&(c.projection=e),ty();let d=!o[nu]||Ax();o[_i][Gn].projection[c.projection]===null&&l!==null?H6(o,a,l):d&&!My(c)&&OL(a,o,c)}function H6(n,e,t){let i=Nn+t,r=e.data[i],s=n[i],o=zp(s,r.tView.ssrId),a=Dy(n,r,void 0,{dehydratedView:o});Ny(s,a,0,jp(r,o))}function Yt(n,e,t){return Rn(n,"",e,"",t),Yt}function Rn(n,e,t,i,r){let s=$e(),o=QD(s,e,t,i);if(o!==an){let a=Kt(),l=mu();uf(a,l,s,n,o,s[Lt],r,!1)}return Rn}function Uy(n,e,t){BV(n,e,t)}function zy(n){let e=$e(),t=Kt(),i=wx();iy(i+1);let r=Ry(t,i);if(n.dirty&&SF(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let s=WV(e,i);n.reset(s,g4),n.notifyOnChanges()}return!0}return!1}function Hy(){return LV($e(),wx())}function $n(n){let e=OF();return bF(e,Nn+n)}function w(n,e=""){let t=$e(),i=Kt(),r=n+Nn,s=i.firstCreatePass?Au(i,r,1,e,null):i.data[r],o=Y6(i,t,s,e,n);t[r]=o,nf()&&df(i,t,o,s),xo(s,!1)}var Y6=(n,e,t,i,r)=>(rf(!0),tL(e[Lt],i));function X(n){return J("",n,""),X}function J(n,e,t){let i=$e(),r=QD(i,n,e,t);return r!==an&&yf(i,dr(),r),J}function li(n,e,t,i,r){let s=$e(),o=d6(s,n,e,t,i,r);return o!==an&&yf(s,dr(),o),li}function vu(n,e,t,i,r,s,o){let a=$e(),l=h6(a,n,e,t,i,r,s,o);return l!==an&&yf(a,dr(),l),vu}function Yy(n,e,t,i,r,s,o,a,l){let c=$e(),u=p6(c,n,e,t,i,r,s,o,a,l);return u!==an&&yf(c,dr(),u),Yy}function yf(n,e,t){let i=fx(e,n);nL(n[Lt],i,t)}function W(n,e,t){Hx(e)&&(e=e());let i=$e(),r=ll();if(si(i,r,e)){let s=Kt(),o=mu();uf(s,o,i,n,e,i[Lt],t,!1)}return W}function z(n,e){let t=Hx(n);return t&&n.set(e),t}function U(n,e){let t=$e(),i=Kt(),r=Kn();return sE(i,t,t[Lt],r,n,e),U}function G6(n,e,t){let i=Kt();if(i.firstCreatePass){let r=rr(n);RA(t,i.data,i.blueprint,r,!0),RA(e,i.data,i.blueprint,r,!1)}}function RA(n,e,t,i,r){if(n=In(n),Array.isArray(n))for(let s=0;s<n.length;s++)RA(n[s],e,t,i,r);else{let s=Kt(),o=$e(),a=Kn(),l=Xa(n)?n:In(n.provide),c=sx(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Xa(n)||!n.multi){let p=new So(c,r,Ae),g=H_(l,e,r?u:u+h,d);g===-1?(sA(Fp(a,o),s,l),z_(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(p),o.push(p)):(t[g]=p,o[g]=p)}else{let p=H_(l,e,u+h,d),g=H_(l,e,u,u+h),A=p>=0&&t[p],v=g>=0&&t[g];if(r&&!v||!r&&!A){sA(Fp(a,o),s,l);let b=Z6(r?$6:K6,t.length,r,i,c);!r&&v&&(t[g].providerFactory=b),z_(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(b),o.push(b)}else{let b=oE(t[r?g:p],c,!r&&i);z_(s,n,p>-1?p:g,b)}!r&&i&&v&&t[g].componentProviders++}}}function z_(n,e,t,i){let r=Xa(e),s=uF(e);if(r||s){let l=(s?In(e.useClass):e).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let u=c.indexOf(t);u===-1?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function oE(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function H_(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function K6(n,e,t,i){return FA(this.multi,[])}function $6(n,e,t,i){let r=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ru(t,t[tt],this.providerFactory.index,i);s=a.slice(0,o),FA(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],FA(r,s);return s}function FA(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function Z6(n,e,t,i,r){let s=new So(n,t,Ae);return s.multi=[],s.index=e,s.componentProviders=0,oE(s,r,i&&!t),s}function hr(n,e=[]){return t=>{t.providersResolver=(i,r)=>G6(i,r?r(n):n,e)}}function fl(n,e,t){let i=fu()+n,r=$e();return r[i]===an?yu(r,i,t?e.call(t):e()):UD(r,i)}function $t(n,e,t,i){return X6($e(),fu(),n,e,t,i)}function Oe(n,e,t,i,r){return Q6($e(),fu(),n,e,t,i,r)}function nn(n,e,t,i,r,s){return J6($e(),fu(),n,e,t,i,r,s)}function aE(n,e,t,i,r,s,o,a){let l=fu()+n,c=$e(),u=HD(c,l,t,i,r,s);return si(c,l+4,o)||u?yu(c,l+5,a?e.call(a,t,i,r,s,o):e(t,i,r,s,o)):UD(c,l+5)}function Gy(n,e){let t=n[e];return t===an?void 0:t}function X6(n,e,t,i,r,s){let o=e+t;return si(n,o,r)?yu(n,o+1,s?i.call(s,r):i(r)):Gy(n,o+1)}function Q6(n,e,t,i,r,s,o){let a=e+t;return au(n,a,r,s)?yu(n,a+2,o?i.call(o,r,s):i(r,s)):Gy(n,a+2)}function J6(n,e,t,i,r,s,o,a){let l=e+t;return zD(n,l,r,s,o)?yu(n,l+3,a?i.call(a,r,s,o):i(r,s,o)):Gy(n,l+3)}function vf(n,e){return pf(n,e)}var LA=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},lE=(()=>{class n{compileModuleSync(t){return new IA(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=tx(t),s=lD(r.declarations).reduce((o,a)=>{let l=Za(a);return l&&o.push(new ou(l)),o},[]);return new LA(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var e8=(()=>{class n{zone=se(Et);changeDetectionScheduler=se(nl);applicationRef=se(Ur);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),t8=new we("",{factory:()=>!1});function cE({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Et(Ie(ie({},dE()),{scheduleInRootZone:t})),[{provide:Et,useFactory:n},{provide:eu,multi:!0,useFactory:()=>{let i=se(e8,{optional:!0});return()=>i.initialize()}},{provide:eu,multi:!0,useFactory:()=>{let i=se(n8);return()=>{i.initialize()}}},e===!0?{provide:qx,useValue:!0}:[],{provide:jx,useValue:t??Bx}]}function uE(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,i=cE({ngZoneFactory:()=>{let r=dE(n);return r.scheduleInRootZone=t,r.shouldCoalesceEventChangeDetection&&_u("NgZone_CoalesceEvent"),new Et(r)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return du([{provide:t8,useValue:!0},{provide:ly,useValue:!1},i])}function dE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var n8=(()=>{class n{subscription=new Ht;initialized=!1;zone=se(Et);pendingTasks=se(ws);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Et.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Et.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var i8=(()=>{class n{appRef=se(Ur);taskService=se(ws);ngZone=se(Et);zonelessEnabled=se(ly);tracing=se(hl,{optional:!0});disableScheduling=se(qx,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ht;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Vp):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(se(jx,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof uA||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?gC:Wx;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Vp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,gC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function r8(){return typeof $localize<"u"&&$localize.locale||Kp}var wf=new we("",{providedIn:"root",factory:()=>se(wf,it.Optional|it.SkipSelf)||r8()});var VA=new we(""),s8=new we("");function Zc(n){return!n.moduleRef}function o8(n){let e=Zc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Et);return t.run(()=>{Zc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(ar,null),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:s=>{i.handleError(s)}})}),Zc(n)){let s=()=>e.destroy(),o=n.platformInjector.get(VA);o.add(s),e.onDestroy(()=>{r.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(VA);o.add(s),n.moduleRef.onDestroy(()=>{Sp(n.allPlatformModules,n.moduleRef),r.unsubscribe(),o.delete(s)})}return l8(i,t,()=>{let s=e.get(XD);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(wf,Kp);if(q6(o||Kp),!e.get(s8,!0))return Zc(n)?e.get(Ur):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Zc(n)){let l=e.get(Ur);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return a8(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function a8(n,e){let t=n.injector.get(Ur);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Se(-403,!1);e.push(n)}function l8(n,e,t){try{let i=t();return Do(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var Cp=null;function c8(n=[],e){return On.create({name:e,providers:[{provide:Qp,useValue:"platform"},{provide:VA,useValue:new Set([()=>Cp=null])},...n]})}function u8(n=[]){if(Cp)return Cp;let e=c8(n);return Cp=e,a6(),d8(e),e}function d8(n){let e=n.get(hy,null);oi(n,()=>{e?.forEach(t=>t())})}var Cs=(()=>{class n{static __NG_ELEMENT_ID__=h8}return n})();function h8(n){return p8(Kn(),$e(),(n&16)===16)}function p8(n,e,t){if(al(n)&&!t){let i=or(n.index,e);return new su(i,i)}else if(n.type&175){let i=e[_i];return new su(i,e)}return null}var BA=class{constructor(){}supports(e){return WD(e)}create(e){return new qA(e)}},f8=(n,e)=>e,qA=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||f8}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){let o=!i||t&&t.currentIndex<RC(i,r,s)?t:i,a=RC(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,o.previousIndex==null)r++;else{s||(s=[]);let c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){let p=h<s.length?s[h]:s[h]=0,g=p+h;u<=g&&g<c&&(s[h]=p+1)}let d=o.previousIndex;s[d]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!WD(e))throw new Se(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),i=!0):(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else r=0,t6(e,a=>{o=this._trackByFn(r,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,r),i=!0):(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new jA(t,i),s,r)),e}_verifyReinsertion(e,t,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,s=e._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new $p),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new $p),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},jA=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},WA=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},$p=class{map=new Map;put(e){let t=e.trackById,i=this.map.get(t);i||(i=new WA,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function RC(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function FC(){return new Ky([new BA])}var Ky=(()=>{class n{factories;static \u0275prov=he({token:n,providedIn:"root",factory:FC});constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||FC()),deps:[[n,new Q5,new X5]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new Se(901,!1)}}return n})();function hE(n){St(8);try{let{rootComponent:e,appProviders:t,platformProviders:i}=n,r=u8(i),s=[cE({}),{provide:nl,useExisting:i8},...t||[]],o=new Yp({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1});return o8({r3Injector:o.injector,platformInjector:r,rootComponent:e})}catch(e){return Promise.reject(e)}finally{St(9)}}function $y(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function xs(n){return f_(n)}function bf(n,e){return u_(n,e?.equal)}var LC=class{[fi];constructor(e){this[fi]=e}destroy(){this[fi].destroy()}};var Gt=new we("");var gE=null;function yi(){return gE}function Zy(n){gE??=n}var wu=class{},Xy=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>se(mE),providedIn:"platform"})}return n})();var mE=(()=>{class n extends Xy{_location;_history;_doc=se(Gt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return yi().getBaseHref(this._doc)}onPopState(t){let i=yi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=yi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function _E(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function pE(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Ds(n){return n&&n[0]!=="?"?`?${n}`:n}var Sf=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>se(yE),providedIn:"root"})}return n})(),AE=new we(""),yE=(()=>{class n extends Sf{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??se(Gt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return _E(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+Ds(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Ds(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Ds(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(oe(Xy),oe(AE,8))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gl=(()=>{class n{_subject=new at;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=_8(pE(fE(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Ds(i))}normalize(t){return n.stripTrailingSlash(m8(this._basePath,fE(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ds(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ds(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=Ds;static joinWithSlash=_E;static stripTrailingSlash=pE;static \u0275fac=function(i){return new(i||n)(oe(Sf))};static \u0275prov=he({token:n,factory:()=>g8(),providedIn:"root"})}return n})();function g8(){return new gl(oe(Sf))}function m8(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function fE(n){return n.replace(/\/index.html$/,"")}function _8(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Qy=/\s+/,vE=[],Eo=(()=>{class n{_ngEl;_renderer;initialClasses=vE;rawClass;stateMap=new Map;constructor(t,i){this._ngEl=t,this._renderer=i}set klass(t){this.initialClasses=t!=null?t.trim().split(Qy):vE}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Qy):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(Qy).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(Ae(_n),Ae(Ss))};static \u0275dir=Mt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Cf=class{$implicit;ngForOf;index;count;constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Es=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new Cf(r.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)i.remove(s===null?void 0:s);else if(s!==null){let a=i.get(s);i.move(a,o),wE(a,r)}});for(let r=0,s=i.length;r<s;r++){let a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let s=i.get(r.currentIndex);wE(s,r)})}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(Ae(qi),Ae(cr),Ae(Ky))};static \u0275dir=Mt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function wE(n,e){n.context.$implicit=e.item}var Mo=(()=>{class n{_viewContainer;_context=new xf;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){bE(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){bE(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(Ae(qi),Ae(cr))};static \u0275dir=Mt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),xf=class{$implicit=null;ngIf=null};function bE(n,e){if(n&&!n.createEmbeddedView)throw new Se(2020,!1)}var Jy=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(t){this._viewContainerRef=t}ngOnChanges(t){if(this._shouldRecreateView(t)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(t,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static \u0275fac=function(i){return new(i||n)(Ae(qi))};static \u0275dir=Mt({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[Vi]})}return n})();var Ms=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Wi({type:n});static \u0275inj=Li({})}return n})();function bu(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,s]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var e1="browser",SE="server";function Df(n){return n===SE}var To=class{};var Tf=new we(""),s1=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r,s){return this._findPluginFor(i).addEventListener(t,i,r,s)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new Se(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(oe(Tf),oe(Et))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),Su=class{_doc;constructor(e){this._doc=e}manager},Ef="ng-app-id";function CE(n){for(let e of n)e.remove()}function xE(n,e){let t=e.createElement("style");return t.textContent=n,t}function w8(n,e,t,i){let r=n.head?.querySelectorAll(`style[${Ef}="${e}"],link[${Ef}="${e}"]`);if(r)for(let s of r)s.removeAttribute(Ef),s instanceof HTMLLinkElement?i.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function i1(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var o1=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.isServer=Df(s),w8(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,xE);i?.forEach(r=>this.addUsage(r,this.external,i1))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let s=i.get(t);s?s.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(CE(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])CE(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,xE(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,i1(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(Ef,this.appId),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(oe(Gt),oe(dy),oe(py,8),oe(bs))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),n1={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},a1=/%COMP%/g;var EE="%COMP%",b8=`_nghost-${EE}`,S8=`_ngcontent-${EE}`,C8=!0,x8=new we("",{providedIn:"root",factory:()=>C8});function D8(n){return S8.replace(a1,n)}function E8(n){return b8.replace(a1,n)}function ME(n,e){return e.map(t=>t.replace(a1,n))}var l1=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,s,o,a,l,c=null,u=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=Df(a),this.defaultRenderer=new Cu(t,o,l,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===lr.ShadowDom&&(i=Ie(ie({},i),{encapsulation:lr.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof Mf?r.applyToHost(t):r instanceof xu&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(i.encapsulation){case lr.Emulated:s=new Mf(l,c,i,this.appId,u,o,a,d,h);break;case lr.ShadowDom:return new r1(l,c,t,i,o,a,this.nonce,d,h);default:s=new xu(l,c,i,u,o,a,d,h);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(oe(s1),oe(o1),oe(dy),oe(x8),oe(Gt),oe(bs),oe(Et),oe(py),oe(hl,8))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),Cu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,s){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(n1[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(DE(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(DE(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Se(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=n1[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=n1[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Wr.DashCase|Wr.Important)?e.style.setProperty(t,i,r&Wr.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Wr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=yi().getGlobalEventTarget(this.doc,e),!e))throw new Se(5102,!1);let s=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function DE(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var r1=class extends Cu{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,s,o,a,l,c){super(e,s,o,l,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=ME(r.id,u);for(let h of u){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}let d=r.getExternalStyles?.();if(d)for(let h of d){let p=i1(h,s);a&&p.setAttribute("nonce",a),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},xu=class extends Cu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,s,o,a,l,c){super(e,s,o,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let u=i.styles;this.styles=c?ME(c,u):u,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Mf=class extends xu{contentAttr;hostAttr;constructor(e,t,i,r,s,o,a,l,c){let u=r+"-"+i.id;super(e,t,i,s,o,a,l,c,u),this.contentAttr=D8(u),this.hostAttr=E8(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var c1=class extends wu{supportsDOMEvents=!0},If=class n extends c1{static makeCurrent(){Zy(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=M8();return t==null?null:T8(t)}resetBaseElement(){Du=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return bu(document.cookie,e)}},Du=null;function M8(){return Du=Du||document.querySelector("base"),Du?Du.getAttribute("href"):null}function T8(n){return new URL(n,document.baseURI).pathname}var I8=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),IE=(()=>{class n extends Su{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,s){return t.addEventListener(i,r,s),()=>this.removeEventListener(t,i,r,s)}removeEventListener(t,i,r,s){return t.removeEventListener(i,r,s)}static \u0275fac=function(i){return new(i||n)(oe(Gt))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),TE=["alt","control","meta","shift"],k8={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},P8={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},kE=(()=>{class n extends Su{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,s){let o=n.parseEventName(i),a=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>yi().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),TE.forEach(c=>{let u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let r=k8[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),TE.forEach(o=>{if(o!==r){let a=P8[o];a(t)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(oe(Gt))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})();function u1(n,e){return hE(ie({rootComponent:n},N8(e)))}function N8(n){return{appProviders:[...V8,...n?.providers??[]],platformProviders:L8}}function O8(){If.makeCurrent()}function R8(){return new ar}function F8(){return Qx(document),document}var L8=[{provide:bs,useValue:e1},{provide:hy,useValue:O8,multi:!0},{provide:Gt,useFactory:F8}];var V8=[{provide:Qp,useValue:"root"},{provide:ar,useFactory:R8},{provide:Tf,useClass:IE,multi:!0,deps:[Gt]},{provide:Tf,useClass:kE,multi:!0,deps:[Gt]},l1,o1,s1,{provide:il,useExisting:l1},{provide:To,useClass:I8},[]];var _l=class{},Eu=class{},Fe=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=t.slice(i+1).trim();this.addHeaderEntry(r,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Pf=class{encodeKey(e){return PE(e)}encodeValue(e){return PE(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function B8(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,a]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}var q8=/%(\d[a-f0-9])/gi,j8={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function PE(n){return encodeURIComponent(n).replace(q8,(e,t)=>j8[t]??e)}function kf(n){return`${n}`}var vi=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Pf,e.fromString){if(e.fromObject)throw new Se(2805,!1);this.map=B8(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(kf):[kf(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(kf(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(kf(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Nf=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function W8(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function NE(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function OE(n){return typeof Blob<"u"&&n instanceof Blob}function RE(n){return typeof FormData<"u"&&n instanceof FormData}function U8(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var FE="Content-Type",LE="Accept",VE="X-Request-URL",BE="text/plain",qE="application/json",z8=`${qE}, ${BE}, */*`,ml=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,i,r){this.url=t,this.method=e.toUpperCase();let s;if(W8(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Fe,this.context??=new Nf,!this.params)this.params=new vi,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||NE(this.body)||OE(this.body)||RE(this.body)||U8(this.body)?this.body:this.body instanceof vi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||RE(this.body)?null:OE(this.body)?this.body.type||null:NE(this.body)?null:typeof this.body=="string"?BE:this.body instanceof vi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?qE:null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,c=e.headers||this.headers,u=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((h,p)=>h.set(p,e.setHeaders[p]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,p)=>h.set(p,e.setParams[p]),u)),new n(t,i,o,{params:u,headers:c,context:d,reportProgress:l,responseType:r,withCredentials:a,transferCache:s})}},Io=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Io||{}),Al=class{headers;status;statusText;url;ok;type;constructor(e,t=200,i="OK"){this.headers=e.headers||new Fe,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Of=class n extends Al{constructor(e={}){super(e)}type=Io.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Mu=class n extends Al{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Io.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Tu=class extends Al{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},H8=200,Y8=204;function d1(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Tt=(()=>{class n{handler;constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof ml)s=t;else{let l;r.headers instanceof Fe?l=r.headers:l=new Fe(r.headers);let c;r.params&&(r.params instanceof vi?c=r.params:c=new vi({fromObject:r.params})),s=new ml(t,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let o=Te(s).pipe(ms(l=>this.handler.handle(l)));if(t instanceof ml||r.observe==="events")return o;let a=o.pipe(mn(l=>l instanceof Mu));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Ue(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Se(2806,!1);return l.body}));case"blob":return a.pipe(Ue(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Se(2807,!1);return l.body}));case"text":return a.pipe(Ue(l=>{if(l.body!==null&&typeof l.body!="string")throw new Se(2808,!1);return l.body}));case"json":default:return a.pipe(Ue(l=>l.body))}case"response":return a;default:throw new Se(2809,!1)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new vi().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,d1(r,i))}post(t,i,r={}){return this.request("POST",t,d1(r,i))}put(t,i,r={}){return this.request("PUT",t,d1(r,i))}static \u0275fac=function(i){return new(i||n)(oe(_l))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})();var G8=new we("");function K8(n,e){return e(n)}function $8(n,e,t){return(i,r)=>oi(t,()=>e(i,s=>n(s,r)))}var jE=new we(""),WE=new we(""),UE=new we("",{providedIn:"root",factory:()=>!0});var Rf=(()=>{class n extends _l{backend;injector;chain=null;pendingTasks=se(ws);contributeToStability=se(UE);constructor(t,i){super(),this.backend=t,this.injector=i}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(jE),...this.injector.get(WE,[])]));this.chain=i.reduceRight((r,s)=>$8(r,s,this.injector),K8)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(As(()=>this.pendingTasks.remove(i)))}else return this.chain(t,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(oe(Eu),oe(kn))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})();var Z8=/^\)\]\}',?\n/,X8=RegExp(`^${VE}:`,"m");function Q8(n){return"responseURL"in n&&n.responseURL?n.responseURL:X8.test(n.getAllResponseHeaders())?n.getResponseHeader(VE):null}var h1=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new Se(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Ft(i.\u0275loadImpl()):Te(null)).pipe(Un(()=>new Je(s=>{let o=i.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((A,v)=>o.setRequestHeader(A,v.join(","))),t.headers.has(LE)||o.setRequestHeader(LE,z8),!t.headers.has(FE)){let A=t.detectContentTypeHeader();A!==null&&o.setRequestHeader(FE,A)}if(t.responseType){let A=t.responseType.toLowerCase();o.responseType=A!=="json"?A:"text"}let a=t.serializeBody(),l=null,c=()=>{if(l!==null)return l;let A=o.statusText||"OK",v=new Fe(o.getAllResponseHeaders()),b=Q8(o)||t.url;return l=new Of({headers:v,status:o.status,statusText:A,url:b}),l},u=()=>{let{headers:A,status:v,statusText:b,url:E}=c(),O=null;v!==Y8&&(O=typeof o.response>"u"?o.responseText:o.response),v===0&&(v=O?H8:0);let T=v>=200&&v<300;if(t.responseType==="json"&&typeof O=="string"){let k=O;O=O.replace(Z8,"");try{O=O!==""?JSON.parse(O):null}catch(D){O=k,T&&(T=!1,O={error:D,text:O})}}T?(s.next(new Mu({body:O,headers:A,status:v,statusText:b,url:E||void 0})),s.complete()):s.error(new Tu({error:O,headers:A,status:v,statusText:b,url:E||void 0}))},d=A=>{let{url:v}=c(),b=new Tu({error:A,status:o.status||0,statusText:o.statusText||"Unknown Error",url:v||void 0});s.error(b)},h=!1,p=A=>{h||(s.next(c()),h=!0);let v={type:Io.DownloadProgress,loaded:A.loaded};A.lengthComputable&&(v.total=A.total),t.responseType==="text"&&o.responseText&&(v.partialText=o.responseText),s.next(v)},g=A=>{let v={type:Io.UploadProgress,loaded:A.loaded};A.lengthComputable&&(v.total=A.total),s.next(v)};return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),t.reportProgress&&(o.addEventListener("progress",p),a!==null&&o.upload&&o.upload.addEventListener("progress",g)),o.send(a),s.next({type:Io.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",d),t.reportProgress&&(o.removeEventListener("progress",p),a!==null&&o.upload&&o.upload.removeEventListener("progress",g)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(i){return new(i||n)(oe(To))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),zE=new we(""),J8="XSRF-TOKEN",eB=new we("",{providedIn:"root",factory:()=>J8}),tB="X-XSRF-TOKEN",nB=new we("",{providedIn:"root",factory:()=>tB}),Iu=class{},iB=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=bu(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(i){return new(i||n)(oe(Gt),oe(bs),oe(eB))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})();function rB(n,e){let t=n.url.toLowerCase();if(!se(zE)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=se(Iu).getToken(),r=se(nB);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}function p1(...n){let e=[Tt,h1,Rf,{provide:_l,useExisting:Rf},{provide:Eu,useFactory:()=>se(G8,{optional:!0})??se(h1)},{provide:jE,useValue:rB,multi:!0},{provide:zE,useValue:!0},{provide:Iu,useClass:iB}];for(let t of n)e.push(...t.\u0275providers);return du(e)}var HE=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(oe(Gt))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Xe="primary",zu=Symbol("RouteTitle"),A1=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function No(n){return new A1(n)}function JE(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function oB(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!pr(n[t],e[t]))return!1;return!0}function pr(n,e){let t=n?y1(n):void 0,i=e?y1(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!eM(n[r],e[r]))return!1;return!0}function y1(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function eM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function tM(n){return n.length>0?n[n.length-1]:null}function Is(n){return D_(n)?n:Do(n)?Ft(Promise.resolve(n)):Te(n)}var aB={exact:iM,subset:rM},nM={exact:lB,subset:cB,ignored:()=>!0};function YE(n,e,t){return aB[t.paths](n.root,e.root,t.matrixParams)&&nM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function lB(n,e){return pr(n,e)}function iM(n,e,t){if(!ko(n.segments,e.segments)||!Vf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!iM(n.children[i],e.children[i],t))return!1;return!0}function cB(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>eM(n[t],e[t]))}function rM(n,e,t){return sM(n,e,e.segments,t)}function sM(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!ko(r,t)||e.hasChildren()||!Vf(r,t,i))}else if(n.segments.length===t.length){if(!ko(n.segments,t)||!Vf(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!rM(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!ko(n.segments,r)||!Vf(n.segments,r,i)||!n.children[Xe]?!1:sM(n.children[Xe],e,s,i)}}function Vf(n,e,t){return e.every((i,r)=>nM[t](n[r].parameters,i.parameters))}var gr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new gt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=No(this.queryParams),this._queryParamMap}toString(){return hB.serialize(this)}},gt=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bf(this)}},Ts=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=No(this.parameters),this._parameterMap}toString(){return aM(this)}};function uB(n,e){return ko(n,e)&&n.every((t,i)=>pr(t.parameters,e[i].parameters))}function ko(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function dB(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===Xe&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Xe&&(t=t.concat(e(r,i)))}),t}var Hu=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>new Oo,providedIn:"root"})}return n})(),Oo=class{parse(e){let t=new w1(e);return new gr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ku(e.root,!0)}`,i=gB(e.queryParams),r=typeof e.fragment=="string"?`#${pB(e.fragment)}`:"";return`${t}${i}${r}`}},hB=new Oo;function Bf(n){return n.segments.map(e=>aM(e)).join("/")}function ku(n,e){if(!n.hasChildren())return Bf(n);if(e){let t=n.children[Xe]?ku(n.children[Xe],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==Xe&&i.push(`${r}:${ku(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=dB(n,(i,r)=>r===Xe?[ku(n.children[Xe],!1)]:[`${r}:${ku(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[Xe]!=null?`${Bf(n)}/${t[0]}`:`${Bf(n)}/(${t.join("//")})`}}function oM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ff(n){return oM(n).replace(/%3B/gi,";")}function pB(n){return encodeURI(n)}function v1(n){return oM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qf(n){return decodeURIComponent(n)}function GE(n){return qf(n.replace(/\+/g,"%20"))}function aM(n){return`${v1(n.path)}${fB(n.parameters)}`}function fB(n){return Object.entries(n).map(([e,t])=>`;${v1(e)}=${v1(t)}`).join("")}function gB(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${Ff(t)}=${Ff(r)}`).join("&"):`${Ff(t)}=${Ff(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var mB=/^[^\/()?;#]+/;function f1(n){let e=n.match(mB);return e?e[0]:""}var _B=/^[^\/()?;=#]+/;function AB(n){let e=n.match(_B);return e?e[0]:""}var yB=/^[^=?&#]+/;function vB(n){let e=n.match(yB);return e?e[0]:""}var wB=/^[^&#]+/;function bB(n){let e=n.match(wB);return e?e[0]:""}var w1=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new gt([],{}):new gt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Xe]=new gt(e,t)),i}parseSegment(){let e=f1(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Se(4009,!1);return this.capture(e),new Ts(qf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=AB(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=f1(this.remaining);r&&(i=r,this.capture(i))}e[qf(t)]=qf(i)}parseQueryParam(e){let t=vB(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=bB(this.remaining);o&&(i=o,this.capture(i))}let r=GE(t),s=GE(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=f1(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Se(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Xe);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[Xe]:new gt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Se(4011,!1)}};function lM(n){return n.segments.length>0?new gt([],{[Xe]:n}):n}function cM(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=cM(r);if(i===Xe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new gt(n.segments,e);return SB(t)}function SB(n){if(n.numberOfChildren===1&&n.children[Xe]){let e=n.children[Xe];return new gt(n.segments.concat(e.segments),e.children)}return n}function Sl(n){return n instanceof gr}function uM(n,e,t=null,i=null){let r=dM(n);return hM(r,e,t,i)}function dM(n){let e;function t(s){let o={};for(let l of s.children){let c=t(l);o[l.outlet]=c}let a=new gt(s.url,o);return s===n&&(e=a),a}let i=t(n.root),r=lM(i);return e??r}function hM(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return g1(r,r,r,t,i);let s=CB(e);if(s.toRoot())return g1(r,r,new gt([],{}),t,i);let o=xB(s,r,n),a=o.processChildren?Nu(o.segmentGroup,o.index,s.commands):fM(o.segmentGroup,o.index,s.commands);return g1(r,o.segmentGroup,a,t,i)}function Wf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ru(n){return typeof n=="object"&&n!=null&&n.outlets}function g1(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;n===e?o=t:o=pM(n,e,t);let a=lM(cM(o));return new gr(a,s,r)}function pM(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=pM(s,e,t)}),new gt(n.segments,i)}var Uf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Wf(i[0]))throw new Se(4003,!1);let r=i.find(Ru);if(r&&r!==tM(i))throw new Se(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function CB(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Uf(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new Uf(t,e,i)}var wl=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function xB(n,e,t){if(n.isAbsolute)return new wl(e,!0,0);if(!t)return new wl(e,!1,NaN);if(t.parent===null)return new wl(t,!0,0);let i=Wf(n.commands[0])?0:1,r=t.segments.length-1+i;return DB(t,r,n.numberOfDoubleDots)}function DB(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Se(4005,!1);r=i.segments.length}return new wl(i,!1,r-s)}function EB(n){return Ru(n[0])?n[0].outlets:{[Xe]:n}}function fM(n,e,t){if(n??=new gt([],{}),n.segments.length===0&&n.hasChildren())return Nu(n,e,t);let i=MB(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new gt(n.segments.slice(0,i.pathIndex),{});return s.children[Xe]=new gt(n.segments.slice(i.pathIndex),n.children),Nu(s,0,r)}else return i.match&&r.length===0?new gt(n.segments,{}):i.match&&!n.hasChildren()?b1(n,e,t):i.match?Nu(n,0,r):b1(n,e,t)}function Nu(n,e,t){if(t.length===0)return new gt(n.segments,{});{let i=EB(t),r={};if(Object.keys(i).some(s=>s!==Xe)&&n.children[Xe]&&n.numberOfChildren===1&&n.children[Xe].segments.length===0){let s=Nu(n.children[Xe],e,t);return new gt(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=fM(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new gt(n.segments,r)}}function MB(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],a=t[i];if(Ru(a))break;let l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!$E(l,c,o))return s;i+=2}else{if(!$E(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function b1(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(Ru(s)){let l=TB(s.outlets);return new gt(i,l)}if(r===0&&Wf(t[0])){let l=n.segments[e];i.push(new Ts(l.path,KE(t[0]))),r++;continue}let o=Ru(s)?s.outlets[Xe]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&Wf(a)?(i.push(new Ts(o,KE(a))),r+=2):(i.push(new Ts(o,{})),r++)}return new gt(i,{})}function TB(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=b1(new gt([],{}),0,i))}),e}function KE(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function $E(n,e,t){return n==t.path&&pr(e,t.parameters)}var jf="imperative",ln=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ln||{}),ui=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ro=class extends ui{type=ln.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Yr=class extends ui{urlAfterRedirects;type=ln.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Zn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Zn||{}),Fu=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Fu||{}),fr=class extends ui{reason;code;type=ln.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Gr=class extends ui{reason;code;type=ln.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},Cl=class extends ui{error;target;type=ln.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Lu=class extends ui{urlAfterRedirects;state;type=ln.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zf=class extends ui{urlAfterRedirects;state;type=ln.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hf=class extends ui{urlAfterRedirects;state;shouldActivate;type=ln.GuardsCheckEnd;constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Yf=class extends ui{urlAfterRedirects;state;type=ln.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gf=class extends ui{urlAfterRedirects;state;type=ln.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kf=class{route;type=ln.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},$f=class{route;type=ln.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Zf=class{snapshot;type=ln.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xf=class{snapshot;type=ln.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qf=class{snapshot;type=ln.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jf=class{snapshot;type=ln.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Vu=class{},xl=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function IB(n,e){return n.providers&&!n._injector&&(n._injector=gf(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ui(n){return n.outlet||Xe}function kB(n,e){let t=n.filter(i=>Ui(i)===e);return t.push(...n.filter(i=>Ui(i)!==e)),t}function Yu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var e0=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Yu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ml(this.rootInjector)}},Ml=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new e0(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(oe(kn))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),t0=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=S1(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=S1(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=C1(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return C1(e,this._root).map(t=>t.value)}};function S1(n,e){if(n===e.value)return e;for(let t of e.children){let i=S1(n,t);if(i)return i}return null}function C1(n,e){if(n===e.value)return[e];for(let t of e.children){let i=C1(n,t);if(i.length)return i.unshift(e),i}return[]}var ci=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function vl(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Bu=class extends t0{snapshot;constructor(e,t){super(e),this.snapshot=t,P1(this,e)}toString(){return this.snapshot.toString()}};function gM(n){let e=PB(n),t=new Xt([new Ts("",{})]),i=new Xt({}),r=new Xt({}),s=new Xt({}),o=new Xt(""),a=new mr(t,i,s,o,r,Xe,n,e.root);return a.snapshot=e.root,new Bu(new ci(a,[]),e)}function PB(n){let e={},t={},i={},r="",s=new Po([],e,i,r,t,Xe,n,null,{});return new qu("",new ci(s,[]))}var mr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ue(c=>c[zu]))??Te(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ue(e=>No(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ue(e=>No(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function n0(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:ie(ie({},e.params),n.params),data:ie(ie({},e.data),n.data),resolve:ie(ie(ie(ie({},n.data),e.data),r?.data),n._resolvedData)}:i={params:ie({},n.params),data:ie({},n.data),resolve:ie(ie({},n.data),n._resolvedData??{})},r&&_M(r)&&(i.resolve[zu]=r.title),i}var Po=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[zu]}constructor(e,t,i,r,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=No(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=No(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},qu=class extends t0{url;constructor(e,t){super(t),this.url=e,P1(this,t)}toString(){return mM(this._root)}};function P1(n,e){e.value._routerState=n,e.children.forEach(t=>P1(n,t))}function mM(n){let e=n.children.length>0?` { ${n.children.map(mM).join(", ")} } `:"";return`${n.value}${e}`}function m1(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,pr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),pr(e.params,t.params)||n.paramsSubject.next(t.params),oB(e.url,t.url)||n.urlSubject.next(t.url),pr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function x1(n,e){let t=pr(n.params,e.params)&&uB(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||x1(n.parent,e.parent))}function _M(n){return typeof n.title=="string"||n.title===null}var AM=new we(""),Gu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Xe;activateEvents=new Nt;deactivateEvents=new Nt;attachEvents=new Nt;detachEvents=new Nt;routerOutletData=zx(void 0);parentContexts=se(Ml);location=se(qi);changeDetector=se(Cs);inputBinder=se(o0,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Se(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Se(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Se(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Se(4013,!1);this._activatedRoute=t;let r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new D1(t,a,r.injector,this.routerOutletData);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Mt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Vi]})}return n})(),D1=class{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===mr?this.route:e===Ml?this.childContexts:e===AM?this.outletData:this.parent.get(e,t)}},o0=new we("");function NB(n,e,t){let i=ju(n,e._root,t?t._root:void 0);return new Bu(i,e)}function ju(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=OB(n,e,t);return new ci(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ju(n,a)),o}}let i=RB(e.value),r=e.children.map(s=>ju(n,s));return new ci(i,r)}}function OB(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ju(n,i,r);return ju(n,i)})}function RB(n){return new mr(new Xt(n.url),new Xt(n.params),new Xt(n.queryParams),new Xt(n.fragment),new Xt(n.data),n.outlet,n.component,n)}var Dl=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},yM="ngNavigationCancelingError";function i0(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Sl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=vM(!1,Zn.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function vM(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[yM]=!0,t.cancellationCode=e,t}function FB(n){return wM(n)&&Sl(n.url)}function wM(n){return!!n&&n[yM]}var LB=(n,e,t,i)=>Ue(r=>(new E1(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),E1=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),m1(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=vl(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=vl(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=vl(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=vl(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Jf(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Xf(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(m1(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),m1(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},r0=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},bl=class{component;route;constructor(e,t){this.component=e,this.route=t}};function VB(n,e,t){let i=n._root,r=e?e._root:null;return Pu(i,r,t,[i.value])}function BB(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Tl(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!zC(n)?n:e.get(n):i}function Pu(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=vl(e);return n.children.forEach(o=>{qB(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ou(a,t.getContext(o),r)),r}function qB(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=jB(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new r0(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Pu(n,e,a?a.children:null,i,r):Pu(n,e,t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new bl(a.outlet.component,o))}else o&&Ou(e,a,r),r.canActivateChecks.push(new r0(i)),s.component?Pu(n,null,a?a.children:null,i,r):Pu(n,null,t,i,r);return r}function jB(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ko(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ko(n.url,e.url)||!pr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!x1(n,e)||!pr(n.queryParams,e.queryParams);case"paramsChange":default:return!x1(n,e)}}function Ou(n,e,t){let i=vl(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?Ou(o,e.children.getContext(s),t):Ou(o,null,t):Ou(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new bl(e.outlet.component,r)):t.canDeactivateChecks.push(new bl(null,r)):t.canDeactivateChecks.push(new bl(null,r))}function Ku(n){return typeof n=="function"}function WB(n){return typeof n=="boolean"}function UB(n){return n&&Ku(n.canLoad)}function zB(n){return n&&Ku(n.canActivate)}function HB(n){return n&&Ku(n.canActivateChild)}function YB(n){return n&&Ku(n.canDeactivate)}function GB(n){return n&&Ku(n.canMatch)}function bM(n){return n instanceof Vr||n?.name==="EmptyError"}var Lf=Symbol("INITIAL_VALUE");function El(){return Un(n=>Kc(n.map(e=>e.pipe(ii(1),gp(Lf)))).pipe(Ue(e=>{for(let t of e)if(t!==!0){if(t===Lf)return Lf;if(t===!1||KB(t))return t}return!0}),mn(e=>e!==Lf),ii(1)))}function KB(n){return Sl(n)||n instanceof Dl}function $B(n,e){return Pt(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Te(Ie(ie({},t),{guardsResult:!0})):ZB(o,i,r,n).pipe(Pt(a=>a&&WB(a)?XB(i,s,n,e):Te(a)),Ue(a=>Ie(ie({},t),{guardsResult:a})))})}function ZB(n,e,t,i){return Ft(n).pipe(Pt(r=>n9(r.component,r.route,t,e,i)),Br(r=>r!==!0,!0))}function XB(n,e,t,i){return Ft(e).pipe(ms(r=>er(JB(r.route.parent,i),QB(r.route,i),t9(n,r.path,t),e9(n,r.route,t))),Br(r=>r!==!0,!0))}function QB(n,e){return n!==null&&e&&e(new Qf(n)),Te(!0)}function JB(n,e){return n!==null&&e&&e(new Zf(n)),Te(!0)}function e9(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Te(!0);let r=i.map(s=>up(()=>{let o=Yu(e)??t,a=Tl(s,o),l=zB(a)?a.canActivate(e,n):oi(o,()=>a(e,n));return Is(l).pipe(Br())}));return Te(r).pipe(El())}function t9(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>BB(o)).filter(o=>o!==null).map(o=>up(()=>{let a=o.guards.map(l=>{let c=Yu(o.node)??t,u=Tl(l,c),d=HB(u)?u.canActivateChild(i,n):oi(c,()=>u(i,n));return Is(d).pipe(Br())});return Te(a).pipe(El())}));return Te(s).pipe(El())}function n9(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Te(!0);let o=s.map(a=>{let l=Yu(e)??r,c=Tl(a,l),u=YB(c)?c.canDeactivate(n,e,t,i):oi(l,()=>c(n,e,t,i));return Is(u).pipe(Br())});return Te(o).pipe(El())}function i9(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return Te(!0);let s=r.map(o=>{let a=Tl(o,n),l=UB(a)?a.canLoad(e,t):oi(n,()=>a(e,t));return Is(l)});return Te(s).pipe(El(),SM(i))}function SM(n){return w_(Qt(e=>{if(typeof e!="boolean")throw i0(n,e)}),Ue(e=>e===!0))}function r9(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return Te(!0);let s=r.map(o=>{let a=Tl(o,n),l=GB(a)?a.canMatch(e,t):oi(n,()=>a(e,t));return Is(l)});return Te(s).pipe(El(),SM(i))}var Wu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Uu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function yl(n){return qa(new Wu(n))}function s9(n){return qa(new Se(4e3,!1))}function o9(n){return qa(vM(!1,Zn.GuardRejected))}var M1=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Te(i);if(r.numberOfChildren>1||!r.children[Xe])return s9(`${e.redirectTo}`);r=r.children[Xe]}}applyRedirectCommands(e,t,i,r,s){if(typeof t!="string"){let a=t,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,params:p,data:g,title:A}=r,v=oi(s,()=>a({params:p,data:g,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,title:A}));if(v instanceof gr)throw new Uu(v);t=v}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new Uu(o);return o}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new gr(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,i,r)}),new gt(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new Se(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},T1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function a9(n,e,t,i,r){let s=CM(n,e,t);return s.matched?(i=IB(e,i),r9(i,e,t,r).pipe(Ue(o=>o===!0?s:ie({},T1)))):Te(s)}function CM(n,e,t){if(e.path==="**")return l9(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?ie({},T1):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||JE)(t,n,e);if(!r)return ie({},T1);let s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=r.consumed.length>0?ie(ie({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function l9(n){return{matched:!0,parameters:n.length>0?tM(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function ZE(n,e,t,i){return t.length>0&&d9(n,t,i)?{segmentGroup:new gt(e,u9(i,new gt(t,n.children))),slicedSegments:[]}:t.length===0&&h9(n,t,i)?{segmentGroup:new gt(n.segments,c9(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new gt(n.segments,n.children),slicedSegments:t}}function c9(n,e,t,i){let r={};for(let s of t)if(a0(n,e,s)&&!i[Ui(s)]){let o=new gt([],{});r[Ui(s)]=o}return ie(ie({},i),r)}function u9(n,e){let t={};t[Xe]=e;for(let i of n)if(i.path===""&&Ui(i)!==Xe){let r=new gt([],{});t[Ui(i)]=r}return t}function d9(n,e,t){return t.some(i=>a0(n,e,i)&&Ui(i)!==Xe)}function h9(n,e,t){return t.some(i=>a0(n,e,i))}function a0(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function p9(n,e,t){return e.length===0&&!n.children[t]}var I1=class{};function f9(n,e,t,i,r,s,o="emptyOnly"){return new k1(n,e,t,i,r,o,s).recognize()}var g9=31,k1=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new M1(this.urlSerializer,this.urlTree)}noMatchError(e){return new Se(4002,`'${e.segmentGroup}'`)}recognize(){let e=ZE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ue(({children:t,rootSnapshot:i})=>{let r=new ci(i,t),s=new qu("",r),o=uM(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Po([],Object.freeze({}),Object.freeze(ie({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Xe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Xe,t).pipe(Ue(i=>({children:i,rootSnapshot:t})),tr(i=>{if(i instanceof Uu)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Wu?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,s):this.processSegment(e,t,i,i.segments,r,!0,s).pipe(Ue(o=>o instanceof ci?[o]:[]))}processChildren(e,t,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return Ft(s).pipe(ms(o=>{let a=i.children[o],l=kB(t,o);return this.processSegmentGroup(e,l,a,o,r)}),k_((o,a)=>(o.push(...a),o)),_s(null),I_(),Pt(o=>{if(o===null)return yl(i);let a=xM(o);return m9(a),Te(a)}))}processSegment(e,t,i,r,s,o,a){return Ft(t).pipe(ms(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,r,s,o,a).pipe(tr(c=>{if(c instanceof Wu)return Te(null);throw c}))),Br(l=>!!l),tr(l=>{if(bM(l))return p9(i,r,s)?Te(new I1):yl(i);throw l}))}processSegmentAgainstRoute(e,t,i,r,s,o,a,l){return Ui(i)!==o&&(o===Xe||!a0(r,s,i))?yl(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,l):yl(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=CM(t,r,s);if(!l)return yl(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>g9&&(this.allowRedirects=!1));let p=new Po(s,c,Object.freeze(ie({},this.urlTree.queryParams)),this.urlTree.fragment,XE(r),Ui(r),r.component??r._loadedComponent??null,r,QE(r)),g=n0(p,a,this.paramsInheritanceStrategy);p.params=Object.freeze(g.params),p.data=Object.freeze(g.data);let A=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,p,e);return this.applyRedirects.lineralizeSegments(r,A).pipe(Pt(v=>this.processSegment(e,i,t,v.concat(h),o,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let a=a9(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),a.pipe(Un(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Un(({routes:c})=>{let u=i._loadedInjector??e,{parameters:d,consumedSegments:h,remainingSegments:p}=l,g=new Po(h,d,Object.freeze(ie({},this.urlTree.queryParams)),this.urlTree.fragment,XE(i),Ui(i),i.component??i._loadedComponent??null,i,QE(i)),A=n0(g,o,this.paramsInheritanceStrategy);g.params=Object.freeze(A.params),g.data=Object.freeze(A.data);let{segmentGroup:v,slicedSegments:b}=ZE(t,h,p,c);if(b.length===0&&v.hasChildren())return this.processChildren(u,c,v,g).pipe(Ue(O=>new ci(g,O)));if(c.length===0&&b.length===0)return Te(new ci(g,[]));let E=Ui(i)===s;return this.processSegment(u,c,v,b,E?Xe:s,!0,g).pipe(Ue(O=>new ci(g,O instanceof ci?[O]:[])))}))):yl(t)))}getChildConfig(e,t,i){return t.children?Te({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Te({routes:t._loadedRoutes,injector:t._loadedInjector}):i9(e,t,i,this.urlSerializer).pipe(Pt(r=>r?this.configLoader.loadChildren(e,t).pipe(Qt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):o9(t))):Te({routes:[],injector:e})}};function m9(n){n.sort((e,t)=>e.value.outlet===Xe?-1:t.value.outlet===Xe?1:e.value.outlet.localeCompare(t.value.outlet))}function _9(n){let e=n.value.routeConfig;return e&&e.path===""}function xM(n){let e=[],t=new Set;for(let i of n){if(!_9(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=xM(i.children);e.push(new ci(i.value,r))}return e.filter(i=>!t.has(i))}function XE(n){return n.data||{}}function QE(n){return n.resolve||{}}function A9(n,e,t,i,r,s){return Pt(o=>f9(n,e,t,i,o.extractedUrl,r,s).pipe(Ue(({state:a,tree:l})=>Ie(ie({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function y9(n,e){return Pt(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Te(t);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of DM(l))o.add(c);let a=0;return Ft(o).pipe(ms(l=>s.has(l)?v9(l,i,n,e):(l.data=n0(l,l.parent,n).resolve,Te(void 0))),Qt(()=>a++),Wa(1),Pt(l=>a===o.size?Te(t):Cn))})}function DM(n){let e=n.children.map(t=>DM(t)).flat();return[n,...e]}function v9(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!_M(r)&&(s[zu]=r.title),w9(s,n,e,i).pipe(Ue(o=>(n._resolvedData=o,n.data=n0(n,n.parent,t).resolve,null)))}function w9(n,e,t,i){let r=y1(n);if(r.length===0)return Te({});let s={};return Ft(r).pipe(Pt(o=>b9(n[o],e,t,i).pipe(Br(),Qt(a=>{if(a instanceof Dl)throw i0(new Oo,a);s[o]=a}))),Wa(1),Ue(()=>s),tr(o=>bM(o)?Cn:qa(o)))}function b9(n,e,t,i){let r=Yu(e)??i,s=Tl(n,r),o=s.resolve?s.resolve(e,t):oi(r,()=>s(e,t));return Is(o)}function _1(n){return Un(e=>{let t=n(e);return t?Ft(t).pipe(Ue(()=>e)):Te(e)})}var N1=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===Xe);return i}getResolvedTitleForRoute(t){return t.data[zu]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>se(EM),providedIn:"root"})}return n})(),EM=(()=>{class n extends N1{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(oe(HE))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$u=new we("",{providedIn:"root",factory:()=>({})}),O1=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ji({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&Ze(0,"router-outlet")},dependencies:[Gu],encapsulation:2})}return n})();function R1(n){let e=n.children&&n.children.map(R1),t=e?Ie(ie({},n),{children:e}):ie({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Xe&&(t.component=O1),t}var Zu=new we(""),MM=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=se(lE);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Te(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=Is(t.loadComponent()).pipe(Ue(IM),Qt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),As(()=>{this.componentLoaders.delete(t)})),r=new Fa(i,()=>new at).pipe(Ra());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Te({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=TM(i,this.compiler,t,this.onLoadEndListener).pipe(As(()=>{this.childrenLoaders.delete(i)})),o=new Fa(s,()=>new at).pipe(Ra());return this.childrenLoaders.set(i,o),o}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function TM(n,e,t,i){return Is(n.loadChildren()).pipe(Ue(IM),Pt(r=>r instanceof Fy||Array.isArray(r)?Te(r):Ft(e.compileModuleAsync(r))),Ue(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(t).injector,o=s.get(Zu,[],{optional:!0,self:!0}).flat()),{routes:o.map(R1),injector:s}}))}function S9(n){return n&&typeof n=="object"&&"default"in n}function IM(n){return S9(n)?n.default:n}var l0=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>se(C9),providedIn:"root"})}return n})(),C9=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kM=new we("");var PM=new we(""),NM=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new at;transitionAbortSubject=new at;configLoader=se(MM);environmentInjector=se(kn);destroyRef=se(cl);urlSerializer=se(Hu);rootContexts=se(Ml);location=se(gl);inputBindingEnabled=se(o0,{optional:!0})!==null;titleStrategy=se(N1);options=se($u,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=se(l0);createViewTransition=se(kM,{optional:!0});navigationErrorHandler=se(PM,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Te(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new Kf(r)),i=r=>this.events.next(new $f(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(Ie(ie({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))}setupNavigations(t){return this.transitions=new Xt(null),this.transitions.pipe(mn(i=>i!==null),Un(i=>{let r=!1,s=!1;return Te(i).pipe(Un(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Zn.SupersededByNewNavigation),Cn;this.currentTransition=i,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Ie(ie({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&l!=="reload"){let c="";return this.events.next(new Gr(o.id,this.urlSerializer.serialize(o.rawUrl),c,Fu.IgnoredSameUrlNavigation)),o.resolve(!1),Cn}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Te(o).pipe(Un(c=>(this.events.next(new Ro(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?Cn:Promise.resolve(c))),A9(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Qt(c=>{i.targetSnapshot=c.targetSnapshot,i.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=Ie(ie({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let u=new Lu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:u,source:d,restoredState:h,extras:p}=o,g=new Ro(c,this.urlSerializer.serialize(u),d,h);this.events.next(g);let A=gM(this.rootComponentType).snapshot;return this.currentTransition=i=Ie(ie({},o),{targetSnapshot:A,urlAfterRedirects:u,extras:Ie(ie({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,Te(i)}else{let c="";return this.events.next(new Gr(o.id,this.urlSerializer.serialize(o.extractedUrl),c,Fu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Cn}}),Qt(o=>{let a=new zf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Ue(o=>(this.currentTransition=i=Ie(ie({},o),{guards:VB(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),$B(this.environmentInjector,o=>this.events.next(o)),Qt(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw i0(this.urlSerializer,o.guardsResult);let a=new Hf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),mn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Zn.GuardRejected),!1)),_1(o=>{if(o.guards.canActivateChecks.length!==0)return Te(o).pipe(Qt(a=>{let l=new Yf(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),Un(a=>{let l=!1;return Te(a).pipe(y9(this.paramsInheritanceStrategy,this.environmentInjector),Qt({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",Zn.NoDataFromResolver)}}))}),Qt(a=>{let l=new Gf(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),_1(o=>{let a=l=>{let c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(Qt(u=>{l.component=u}),Ue(()=>{})));for(let u of l.children)c.push(...a(u));return c};return Kc(a(o.targetSnapshot.root)).pipe(_s(null),ii(1))}),_1(()=>this.afterPreactivation()),Un(()=>{let{currentSnapshot:o,targetSnapshot:a}=i,l=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return l?Ft(l).pipe(Ue(()=>i)):Te(i)}),Ue(o=>{let a=NB(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=Ie(ie({},o),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,i}),Qt(()=>{this.events.next(new Vu)}),LB(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),ii(1),Qt({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Yr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),nr(this.transitionAbortSubject.pipe(Qt(o=>{throw o}))),As(()=>{!r&&!s&&this.cancelNavigationTransition(i,"",Zn.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),tr(o=>{if(this.destroyed)return i.resolve(!1),Cn;if(s=!0,wM(o))this.events.next(new fr(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),FB(o)?this.events.next(new xl(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let a=new Cl(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let l=oi(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof Dl){let{message:c,cancellationCode:u}=i0(this.urlSerializer,l);this.events.next(new fr(i.id,this.urlSerializer.serialize(i.extractedUrl),c,u)),this.events.next(new xl(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return Cn}))}))}cancelNavigationTransition(t,i,r){let s=new fr(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function x9(n){return n!==jf}var OM=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>se(D9),providedIn:"root"})}return n})(),s0=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},D9=(()=>{class n extends s0{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Bi(n)))(r||n)}})();static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RM=(()=>{class n{urlSerializer=se(Hu);options=se($u,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=se(gl);urlHandlingStrategy=se(l0);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new gr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,o=r??s;return o instanceof gr?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=gM(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>se(E9),providedIn:"root"})}return n})(),E9=(()=>{class n extends RM{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof Ro?this.updateStateMemento():t instanceof Gr?this.commitTransition(i):t instanceof Lu?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Vu?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof fr&&(t.code===Zn.GuardRejected||t.code===Zn.NoDataFromResolver)?this.restoreHistory(i):t instanceof Cl?this.restoreHistory(i,!0):t instanceof Yr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){let{replaceUrl:s,state:o}=i;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,l=ie(ie({},o),this.generateNgRouterState(r,a));this.location.replaceState(t,"",l)}else{let a=ie(ie({},o),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Bi(n)))(r||n)}})();static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function F1(n,e){n.events.pipe(mn(t=>t instanceof Yr||t instanceof fr||t instanceof Cl||t instanceof Gr),Ue(t=>t instanceof Yr||t instanceof Gr?0:(t instanceof fr?t.code===Zn.Redirect||t.code===Zn.SupersededByNewNavigation:!1)?2:1),mn(t=>t!==2),ii(1)).subscribe(()=>{e()})}var M9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},T9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},c0=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=se(GD);stateManager=se(RM);options=se($u,{optional:!0})||{};pendingTasks=se(ws);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=se(NM);urlSerializer=se(Hu);location=se(gl);urlHandlingStrategy=se(l0);_events=new at;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=se(OM);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=se(Zu,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!se(o0,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ht;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof fr&&i.code!==Zn.Redirect&&i.code!==Zn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Yr)this.navigated=!0;else if(i instanceof xl){let o=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=ie({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||x9(r.source)},o);this.scheduleNavigation(a,jf,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}k9(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),jf,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let l=ie({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(R1),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=ie(ie({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=r?r.snapshot:this.routerState.snapshot.root;d=dM(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return hM(d,t,u,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Sl(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,jf,null,i)}navigate(t,i={skipLocationChange:!1}){return I9(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=ie({},M9):i===!1?r=ie({},T9):r=i,Sl(t))return YE(this.currentUrlTree,t,r);let s=this.parseUrl(t);return YE(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,l=h});let u=this.pendingTasks.add();return F1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function I9(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Se(4008,!1)}function k9(n){return!(n instanceof Vu)&&!(n instanceof xl)}var N9=new we("");function L1(n,...e){return du([{provide:Zu,multi:!0,useValue:n},[],{provide:mr,useFactory:O9,deps:[c0]},{provide:Ly,multi:!0,useFactory:R9},e.map(t=>t.\u0275providers)])}function O9(n){return n.routerState.root}function R9(){let n=se(On);return e=>{let t=n.get(Ur);if(e!==t.components[0])return;let i=n.get(c0),r=n.get(F9);n.get(L9)===1&&i.initialNavigation(),n.get(V9,null,it.Optional)?.setUpPreloading(),n.get(N9,null,it.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var F9=new we("",{factory:()=>new at}),L9=new we("",{providedIn:"root",factory:()=>1});var V9=new we("");var FM=[];function Ju(n){return n+.5|0}var ks=(n,e,t)=>Math.max(Math.min(n,t),e);function Xu(n){return ks(Ju(n*2.55),0,255)}function Ps(n){return ks(Ju(n*255),0,255)}function Kr(n){return ks(Ju(n/2.55)/100,0,1)}function LM(n){return ks(Ju(n*100),0,100)}var bi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},B1=[..."0123456789ABCDEF"],j9=n=>B1[n&15],W9=n=>B1[(n&240)>>4]+B1[n&15],u0=n=>(n&240)>>4===(n&15),U9=n=>u0(n.r)&&u0(n.g)&&u0(n.b)&&u0(n.a);function z9(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&bi[n[1]]*17,g:255&bi[n[2]]*17,b:255&bi[n[3]]*17,a:e===5?bi[n[4]]*17:255}:(e===7||e===9)&&(t={r:bi[n[1]]<<4|bi[n[2]],g:bi[n[3]]<<4|bi[n[4]],b:bi[n[5]]<<4|bi[n[6]],a:e===9?bi[n[7]]<<4|bi[n[8]]:255})),t}var H9=(n,e)=>n<255?e(n):"";function Y9(n){var e=U9(n)?j9:W9;return n?"#"+e(n.r)+e(n.g)+e(n.b)+H9(n.a,e):void 0}var G9=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function jM(n,e,t){let i=e*Math.min(t,1-t),r=(s,o=(s+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function K9(n,e,t){let i=(r,s=(r+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function $9(n,e,t){let i=jM(n,1,.5),r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function Z9(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function q1(n){let t=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(t,i,r),o=Math.min(t,i,r),a=(s+o)/2,l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=Z9(t,i,r,u,s),l=l*60+.5),[l|0,c||0,a]}function j1(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(Ps)}function W1(n,e,t){return j1(jM,n,e,t)}function X9(n,e,t){return j1($9,n,e,t)}function Q9(n,e,t){return j1(K9,n,e,t)}function WM(n){return(n%360+360)%360}function J9(n){let e=G9.exec(n),t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?Xu(+e[5]):Ps(+e[5]));let r=WM(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=X9(r,s,o):e[1]==="hsv"?i=Q9(r,s,o):i=W1(r,s,o),{r:i[0],g:i[1],b:i[2],a:t}}function eq(n,e){var t=q1(n);t[0]=WM(t[0]+e),t=W1(t),n.r=t[0],n.g=t[1],n.b=t[2]}function tq(n){if(!n)return;let e=q1(n),t=e[0],i=LM(e[1]),r=LM(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${Kr(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}var VM={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},BM={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function nq(){let n={},e=Object.keys(BM),t=Object.keys(VM),i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<t.length;r++)s=t[r],a=a.replace(s,VM[s]);s=parseInt(BM[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var d0;function iq(n){d0||(d0=nq(),d0.transparent=[0,0,0,0]);let e=d0[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var rq=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function sq(n){let e=rq.exec(n),t=255,i,r,s;if(e){if(e[7]!==i){let o=+e[7];t=e[8]?Xu(o):ks(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Xu(i):ks(i,0,255)),r=255&(e[4]?Xu(r):ks(r,0,255)),s=255&(e[6]?Xu(s):ks(s,0,255)),{r:i,g:r,b:s,a:t}}}function oq(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Kr(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var V1=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Il=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function aq(n,e,t){let i=Il(Kr(n.r)),r=Il(Kr(n.g)),s=Il(Kr(n.b));return{r:Ps(V1(i+t*(Il(Kr(e.r))-i))),g:Ps(V1(r+t*(Il(Kr(e.g))-r))),b:Ps(V1(s+t*(Il(Kr(e.b))-s))),a:n.a+t*(e.a-n.a)}}function h0(n,e,t){if(n){let i=q1(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=W1(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function UM(n,e){return n&&Object.assign(e||{},n)}function qM(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Ps(n[3]))):(e=UM(n,{r:0,g:0,b:0,a:1}),e.a=Ps(e.a)),e}function lq(n){return n.charAt(0)==="r"?sq(n):J9(n)}var Qu=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,i;t==="object"?i=qM(e):t==="string"&&(i=z9(e)||iq(e)||lq(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=UM(this._rgb);return e&&(e.a=Kr(e.a)),e}set rgb(e){this._rgb=qM(e)}rgbString(){return this._valid?oq(this._rgb):void 0}hexString(){return this._valid?Y9(this._rgb):void 0}hslString(){return this._valid?tq(this._rgb):void 0}mix(e,t){if(e){let i=this.rgb,r=e.rgb,s,o=t===s?.5:t,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=aq(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=Ps(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=Ju(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return h0(this._rgb,2,e),this}darken(e){return h0(this._rgb,2,-e),this}saturate(e){return h0(this._rgb,1,e),this}desaturate(e){return h0(this._rgb,1,-e),this}rotate(e){return eq(this._rgb,e),this}};function Yi(){}var H1=(()=>{let n=0;return()=>n++})();function st(n){return n==null}function dt(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function He(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Dt(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Ln(n,e){return Dt(n)?n:e}function Be(n,e){return typeof n>"u"?e:n}var Y1=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,A0=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function pt(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function mt(n,e,t,i){let r,s,o;if(dt(n))if(s=n.length,i)for(r=s-1;r>=0;r--)e.call(t,n[r],r);else for(r=0;r<s;r++)e.call(t,n[r],r);else if(He(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)e.call(t,n[o[r]],o[r])}function Ol(n,e){let t,i,r,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],s=e[t],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function td(n){if(dt(n))return n.map(td);if(He(n)){let e=Object.create(null),t=Object.keys(n),i=t.length,r=0;for(;r<i;++r)e[t[r]]=td(n[t[r]]);return e}return n}function JM(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function eT(n,e,t,i){if(!JM(n))return;let r=e[n],s=t[n];He(r)&&He(s)?Vo(r,s,i):e[n]=td(s)}function Vo(n,e,t){let i=dt(e)?e:[e],r=i.length;if(!He(n))return n;t=t||{};let s=t.merger||eT,o;for(let a=0;a<r;++a){if(o=i[a],!He(o))continue;let l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],n,o,t)}return n}function Bo(n,e){return Vo(n,e,{merger:tT})}function tT(n,e,t){if(!JM(n))return;let i=e[n],r=t[n];He(i)&&He(r)?Bo(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=td(r))}var zM={"":n=>n,x:n=>n.x,y:n=>n.y};function nT(n){let e=n.split("."),t=[],i="";for(let r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function cq(n){let e=nT(n);return t=>{for(let i of e){if(i==="")break;t=t&&t[i]}return t}}function Ar(n,e){return(zM[e]||(zM[e]=cq(e)))(n)}function id(n){return n.charAt(0).toUpperCase()+n.slice(1)}var yn=n=>typeof n<"u",An=n=>typeof n=="function",y0=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function G1(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var rt=Math.PI,At=2*rt,iT=At+rt,nd=Number.POSITIVE_INFINITY,rd=rt/180,Ct=rt/2,Xn=rt/4,kl=rt*2/3,_r=Math.log10,Si=Math.sign;function qo(n,e,t){return Math.abs(n-e)<t}function v0(n){let e=Math.round(n);n=qo(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(_r(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function K1(n){let e=[],t=Math.sqrt(n),i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,s)=>r-s).pop(),e}function uq(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Gi(n){return!uq(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function $1(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function w0(n,e,t){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function qt(n){return n*(rt/180)}function jo(n){return n*(180/rt)}function b0(n){if(!Dt(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function Wo(n,e){let t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i),s=Math.atan2(i,t);return s<-.5*rt&&(s+=At),{angle:s,distance:r}}function Zr(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function rT(n,e){return(n-e+iT)%At-rt}function Fn(n){return(n%At+At)%At}function Uo(n,e,t,i){let r=Fn(n),s=Fn(e),o=Fn(t),a=Fn(s-r),l=Fn(o-r),c=Fn(r-s),u=Fn(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function Jt(n,e,t){return Math.max(e,Math.min(t,n))}function Z1(n){return Jt(n,-32768,32767)}function Ki(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function sd(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,t(s)?r=s:i=s;return{lo:r,hi:i}}var zi=(n,e,t,i)=>sd(n,t,i?r=>{let s=n[r][e];return s<t||s===t&&n[r+1][e]===t}:r=>n[r][e]<t),X1=(n,e,t)=>sd(n,t,i=>n[i][e]>=t);function Q1(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}var sT=["push","pop","shift","splice","unshift"];function J1(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),sT.forEach(t=>{let i="_onData"+id(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){let o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function S0(n,e){let t=n._chartjs;if(!t)return;let i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(sT.forEach(s=>{delete n[s]}),delete n._chartjs)}function C0(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var x0=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function D0(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,x0.call(window,()=>{i=!1,n.apply(e,t)}))}}function ev(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}var od=n=>n==="start"?"left":n==="end"?"right":"center",cn=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,tv=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function E0(n,e,t){let i=e.length,r=0,s=i;if(n._sorted){let{iScale:o,vScale:a,_parsed:l}=n,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:p,maxDefined:g}=o.getUserBounds();if(p){if(r=Math.min(zi(l,u,d).lo,t?i:zi(e,u,o.getPixelForValue(d)).lo),c){let A=l.slice(0,r+1).reverse().findIndex(v=>!st(v[a.axis]));r-=Math.max(0,A)}r=Jt(r,0,i-1)}if(g){let A=Math.max(zi(l,o.axis,h,!0).hi+1,t?0:zi(e,u,o.getPixelForValue(h),!0).hi+1);if(c){let v=l.slice(A-1).findIndex(b=>!st(b[a.axis]));A+=Math.max(0,v)}s=Jt(A,r,i)-r}else s=i-r}return{start:r,count:s}}function M0(n){let{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;let s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),s}var p0=n=>n===0||n===1,HM=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*At/t)),YM=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*At/t)+1,Fo={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Ct)+1,easeOutSine:n=>Math.sin(n*Ct),easeInOutSine:n=>-.5*(Math.cos(rt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>p0(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>p0(n)?n:HM(n,.075,.3),easeOutElastic:n=>p0(n)?n:YM(n,.075,.3),easeInOutElastic(n){return p0(n)?n:n<.5?.5*HM(n*2,.1125,.45):.5+.5*YM(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Fo.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Fo.easeInBounce(n*2)*.5:Fo.easeOutBounce(n*2-1)*.5+.5};function T0(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function I0(n){return T0(n)?n:new Qu(n)}function m0(n){return T0(n)?n:new Qu(n).saturate(.5).darken(.1).hexString()}var dq=["x","y","borderWidth","radius","tension"],hq=["color","borderColor","backgroundColor"];function pq(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:hq},numbers:{type:"number",properties:dq}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function fq(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var GM=new Map;function gq(n,e){e=e||{};let t=n+JSON.stringify(e),i=GM.get(t);return i||(i=new Intl.NumberFormat(n,e),GM.set(t,i)),i}function zo(n,e,t){return gq(e,t).format(n)}var oT={values(n){return dt(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let i=this.chart.options.locale,r,s=n;if(t.length>1){let c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=mq(n,t)}let o=_r(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),zo(n,i,l)},logarithmic(n,e,t){if(n===0)return"0";let i=t[e].significand||n/Math.pow(10,Math.floor(_r(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?oT.numeric.call(this,n,e,t):""}};function mq(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var ad={formatters:oT};function _q(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ad.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var Os=Object.create(null),k0=Object.create(null);function ed(n,e){if(!e)return n;let t=e.split(".");for(let i=0,r=t.length;i<r;++i){let s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function U1(n,e,t){return typeof e=="string"?Vo(ed(n,e),t):Vo(ed(n,""),e)}var z1=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>m0(r.backgroundColor),this.hoverBorderColor=(i,r)=>m0(r.borderColor),this.hoverColor=(i,r)=>m0(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return U1(this,e,t)}get(e){return ed(this,e)}describe(e,t){return U1(k0,e,t)}override(e,t){return U1(Os,e,t)}route(e,t,i,r){let s=ed(this,e),o=ed(this,i),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){let l=this[a],c=o[r];return He(l)?Object.assign({},c,l):Be(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}},bt=new z1({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[pq,fq,_q]);function aT(n){return!n||st(n.size)||st(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Pl(n,e,t,i,r){let s=e[r];return s||(s=e[r]=n.measureText(r).width,t.push(r)),s>i&&(i=s),i}function nv(n,e,t,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0,a=t.length,l,c,u,d,h;for(l=0;l<a;l++)if(d=t[l],d!=null&&!dt(d))o=Pl(n,r,s,o,d);else if(dt(d))for(c=0,u=d.length;c<u;c++)h=d[c],h!=null&&!dt(h)&&(o=Pl(n,r,s,o,h));n.restore();let p=s.length/2;if(p>t.length){for(l=0;l<p;l++)delete r[s[l]];s.splice(0,p)}return o}function Xr(n,e,t){let i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function P0(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function ld(n,e,t,i){N0(n,e,t,i,null)}function N0(n,e,t,i,r){let s,o,a,l,c,u,d,h,p=e.pointStyle,g=e.rotation,A=e.radius,v=(g||0)*rd;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(v),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),n.restore();return}if(!(isNaN(A)||A<=0)){switch(n.beginPath(),p){default:r?n.ellipse(t,i,r/2,A,0,0,At):n.arc(t,i,A,0,At),n.closePath();break;case"triangle":u=r?r/2:A,n.moveTo(t+Math.sin(v)*u,i-Math.cos(v)*A),v+=kl,n.lineTo(t+Math.sin(v)*u,i-Math.cos(v)*A),v+=kl,n.lineTo(t+Math.sin(v)*u,i-Math.cos(v)*A),n.closePath();break;case"rectRounded":c=A*.516,l=A-c,o=Math.cos(v+Xn)*l,d=Math.cos(v+Xn)*(r?r/2-c:l),a=Math.sin(v+Xn)*l,h=Math.sin(v+Xn)*(r?r/2-c:l),n.arc(t-d,i-a,c,v-rt,v-Ct),n.arc(t+h,i-o,c,v-Ct,v),n.arc(t+d,i+a,c,v,v+Ct),n.arc(t-h,i+o,c,v+Ct,v+rt),n.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*A,u=r?r/2:l,n.rect(t-u,i-l,2*u,2*l);break}v+=Xn;case"rectRot":d=Math.cos(v)*(r?r/2:A),o=Math.cos(v)*A,a=Math.sin(v)*A,h=Math.sin(v)*(r?r/2:A),n.moveTo(t-d,i-a),n.lineTo(t+h,i-o),n.lineTo(t+d,i+a),n.lineTo(t-h,i+o),n.closePath();break;case"crossRot":v+=Xn;case"cross":d=Math.cos(v)*(r?r/2:A),o=Math.cos(v)*A,a=Math.sin(v)*A,h=Math.sin(v)*(r?r/2:A),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"star":d=Math.cos(v)*(r?r/2:A),o=Math.cos(v)*A,a=Math.sin(v)*A,h=Math.sin(v)*(r?r/2:A),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o),v+=Xn,d=Math.cos(v)*(r?r/2:A),o=Math.cos(v)*A,a=Math.sin(v)*A,h=Math.sin(v)*(r?r/2:A),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"line":o=r?r/2:Math.cos(v)*A,a=Math.sin(v)*A,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(v)*(r?r/2:A),i+Math.sin(v)*A);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Hi(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Rs(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Fs(n){n.restore()}function iv(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){let s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function rv(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function Aq(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),st(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function yq(n,e,t,i,r){if(r.strikethrough||r.underline){let s=n.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=t-s.actualBoundingBoxAscent,c=t+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function vq(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Qr(n,e,t,i,r,s={}){let o=dt(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="",l,c;for(n.save(),n.font=r.string,Aq(n,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&vq(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),st(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,t,i,s.maxWidth)),n.fillText(c,t,i,s.maxWidth),yq(n,t,i,c,s),i+=Number(r.lineHeight);n.restore()}function Jr(n,e){let{x:t,y:i,w:r,h:s,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*rt,rt,!0),n.lineTo(t,i+s-o.bottomLeft),n.arc(t+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,rt,Ct,!0),n.lineTo(t+r-o.bottomRight,i+s),n.arc(t+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Ct,0,!0),n.lineTo(t+r,i+o.topRight),n.arc(t+r-o.topRight,i+o.topRight,o.topRight,0,-Ct,!0),n.lineTo(t+o.topLeft,i)}var wq=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,bq=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function lT(n,e){let t=(""+n).match(wq);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var Sq=n=>+n||0;function cd(n,e){let t={},i=He(e),r=i?Object.keys(e):e,s=He(n)?i?o=>Be(n[o],n[e[o]]):o=>n[o]:()=>n;for(let o of r)t[o]=Sq(s(o));return t}function O0(n){return cd(n,{top:"y",right:"x",bottom:"y",left:"x"})}function $i(n){return cd(n,["topLeft","topRight","bottomLeft","bottomRight"])}function jt(n){let e=O0(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ot(n,e){n=n||{},e=e||bt.font;let t=Be(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=Be(n.style,e.style);i&&!(""+i).match(bq)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let r={family:Be(n.family,e.family),lineHeight:lT(Be(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:Be(n.weight,e.weight),string:""};return r.string=aT(r),r}function Ho(n,e,t,i){let r=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),t!==void 0&&dt(a)&&(a=a[t%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function sv(n,e,t){let{min:i,max:r}=n,s=A0(e,(r-i)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function yr(n,e){return Object.assign(Object.create(n),e)}function ud(n,e=[""],t,i,r=()=>n[0]){let s=t||n;typeof i>"u"&&(i=dT("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>ud([a,...n],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return cT(a,l,()=>kq(l,e,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return $M(a).includes(l)},ownKeys(a){return $M(a)},set(a,l,c){let u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function Ns(n,e,t,i){let r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:R0(n,i),setContext:s=>Ns(n,s,t,i),override:s=>Ns(n.override(s),e,t,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return cT(s,o,()=>xq(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function R0(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:An(t)?t:()=>t,isIndexable:An(i)?i:()=>i}}var Cq=(n,e)=>n?n+id(e):e,ov=(n,e)=>He(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function cT(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];let i=t();return n[e]=i,i}function xq(n,e,t){let{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n,a=i[e];return An(a)&&o.isScriptable(e)&&(a=Dq(e,a,n,t)),dt(a)&&a.length&&(a=Eq(e,a,n,o.isIndexable)),ov(e,a)&&(a=Ns(a,r,s&&s[e],o)),a}function Dq(n,e,t,i){let{_proxy:r,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(s,o||i);return a.delete(n),ov(n,l)&&(l=av(r._scopes,r,n,l)),l}function Eq(n,e,t,i){let{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(He(e[0])){let l=e,c=r._scopes.filter(u=>u!==l);e=[];for(let u of l){let d=av(c,r,n,u);e.push(Ns(d,s,o&&o[n],a))}}return e}function uT(n,e,t){return An(n)?n(e,t):n}var Mq=(n,e)=>n===!0?e:typeof n=="string"?Ar(e,n):void 0;function Tq(n,e,t,i,r){for(let s of e){let o=Mq(t,s);if(o){n.add(o);let a=uT(o._fallback,t,r);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function av(n,e,t,i){let r=e._rootScopes,s=uT(e._fallback,t,i),o=[...n,...r],a=new Set;a.add(i);let l=KM(a,o,t,s||t,i);return l===null||typeof s<"u"&&s!==t&&(l=KM(a,o,s,l,i),l===null)?!1:ud(Array.from(a),[""],r,s,()=>Iq(e,t,i))}function KM(n,e,t,i,r){for(;t;)t=Tq(n,e,t,i,r);return t}function Iq(n,e,t){let i=n._getTarget();e in i||(i[e]={});let r=i[e];return dt(r)&&He(t)?t:r||{}}function kq(n,e,t,i){let r;for(let s of e)if(r=dT(Cq(s,n),t),typeof r<"u")return ov(n,r)?av(t,i,n,r):r}function dT(n,e){for(let t of e){if(!t)continue;let i=t[n];if(typeof i<"u")return i}}function $M(n){let e=n._keys;return e||(e=n._keys=Pq(n._scopes)),e}function Pq(n){let e=new Set;for(let t of n)for(let i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function F0(n,e,t,i){let{iScale:r}=n,{key:s="r"}=this._parsing,o=new Array(i),a,l,c,u;for(a=0,l=i;a<l;++a)c=a+t,u=e[c],o[a]={r:r.parse(Ar(u,s),c)};return o}var Nq=Number.EPSILON||1e-14,Nl=(n,e)=>e<n.length&&!n[e].skip&&n[e],hT=n=>n==="x"?"y":"x";function pT(n,e,t,i){let r=n.skip?e:n,s=e,o=t.skip?e:t,a=Zr(s,r),l=Zr(o,s),c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;let d=i*c,h=i*u;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+h*(o.x-r.x),y:s.y+h*(o.y-r.y)}}}function Oq(n,e,t){let i=n.length,r,s,o,a,l,c=Nl(n,0);for(let u=0;u<i-1;++u)if(l=c,c=Nl(n,u+1),!(!l||!c)){if(qo(e[u],0,Nq)){t[u]=t[u+1]=0;continue}r=t[u]/e[u],s=t[u+1]/e[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=r*o*e[u],t[u+1]=s*o*e[u])}}function Rq(n,e,t="x"){let i=hT(t),r=n.length,s,o,a,l=Nl(n,0);for(let c=0;c<r;++c){if(o=a,a=l,l=Nl(n,c+1),!a)continue;let u=a[t],d=a[i];o&&(s=(u-o[t])/3,a[`cp1${t}`]=u-s,a[`cp1${i}`]=d-s*e[c]),l&&(s=(l[t]-u)/3,a[`cp2${t}`]=u+s,a[`cp2${i}`]=d+s*e[c])}}function fT(n,e="x"){let t=hT(e),i=n.length,r=Array(i).fill(0),s=Array(i),o,a,l,c=Nl(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=Nl(n,o+1),!!l){if(c){let u=c[e]-l[e];r[o]=u!==0?(c[t]-l[t])/u:0}s[o]=a?c?Si(r[o-1])!==Si(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}Oq(n,r,s),Rq(n,s,e)}function f0(n,e,t){return Math.max(Math.min(n,t),e)}function Fq(n,e){let t,i,r,s,o,a=Hi(n[0],e);for(t=0,i=n.length;t<i;++t)o=s,s=a,a=t<i-1&&Hi(n[t+1],e),s&&(r=n[t],o&&(r.cp1x=f0(r.cp1x,e.left,e.right),r.cp1y=f0(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=f0(r.cp2x,e.left,e.right),r.cp2y=f0(r.cp2y,e.top,e.bottom)))}function lv(n,e,t,i,r){let s,o,a,l;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")fT(n,r);else{let c=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],l=pT(c,a,n[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&Fq(n,t)}function dd(){return typeof window<"u"&&typeof document<"u"}function hd(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function _0(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}var L0=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function gT(n,e){return L0(n).getPropertyValue(e)}var Lq=["top","right","bottom","left"];function Lo(n,e,t){let i={};t=t?"-"+t:"";for(let r=0;r<4;r++){let s=Lq[r];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var Vq=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Bq(n,e){let t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:s}=i,o=!1,a,l;if(Vq(r,s,n.target))a=r,l=s;else{let c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function es(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:i}=e,r=L0(t),s=r.boxSizing==="border-box",o=Lo(r,"padding"),a=Lo(r,"border","width"),{x:l,y:c,box:u}=Bq(n,t),d=o.left+(u&&a.left),h=o.top+(u&&a.top),{width:p,height:g}=e;return s&&(p-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-d)/p*t.width/i),y:Math.round((c-h)/g*t.height/i)}}function qq(n,e,t){let i,r;if(e===void 0||t===void 0){let s=n&&hd(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{let o=s.getBoundingClientRect(),a=L0(s),l=Lo(a,"border","width"),c=Lo(a,"padding");e=o.width-c.width-l.width,t=o.height-c.height-l.height,i=_0(a.maxWidth,s,"clientWidth"),r=_0(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:i||nd,maxHeight:r||nd}}var g0=n=>Math.round(n*10)/10;function cv(n,e,t,i){let r=L0(n),s=Lo(r,"margin"),o=_0(r.maxWidth,n,"clientWidth")||nd,a=_0(r.maxHeight,n,"clientHeight")||nd,l=qq(n,e,t),{width:c,height:u}=l;if(r.boxSizing==="content-box"){let h=Lo(r,"border","width"),p=Lo(r,"padding");c-=p.width+h.width,u-=p.height+h.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=g0(Math.min(c,o,l.maxWidth)),u=g0(Math.min(u,a,l.maxHeight)),c&&!u&&(u=g0(c/2)),(e!==void 0||t!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=g0(Math.floor(u*i))),{width:c,height:u}}function V0(n,e,t){let i=e||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);let o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var uv=function(){let n=!1;try{let e={get passive(){return n=!0,!1}};dd()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function B0(n,e){let t=gT(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function $r(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function dv(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function hv(n,e,t,i){let r={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=$r(n,r,t),a=$r(r,s,t),l=$r(s,e,t),c=$r(o,a,t),u=$r(a,l,t);return $r(c,u,t)}var jq=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},Wq=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Ls(n,e,t){return n?jq(e,t):Wq()}function q0(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function j0(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function mT(n){return n==="angle"?{between:Uo,compare:rT,normalize:Fn}:{between:Ki,compare:(e,t)=>e-t,normalize:e=>e}}function ZM({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function Uq(n,e,t){let{property:i,start:r,end:s}=t,{between:o,normalize:a}=mT(i),l=e.length,{start:c,end:u,loop:d}=n,h,p;if(d){for(c+=l,u+=l,h=0,p=l;h<p&&o(a(e[c%l][i]),r,s);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:n.style}}function W0(n,e,t){if(!t)return[n];let{property:i,start:r,end:s}=t,o=e.length,{compare:a,between:l,normalize:c}=mT(i),{start:u,end:d,loop:h,style:p}=Uq(n,e,t),g=[],A=!1,v=null,b,E,O,T=()=>l(r,O,b)&&a(r,O)!==0,k=()=>a(s,b)===0||l(s,O,b),D=()=>A||T(),M=()=>!A||k();for(let N=u,L=u;N<=d;++N)E=e[N%o],!E.skip&&(b=c(E[i]),b!==O&&(A=l(b,r,s),v===null&&D()&&(v=a(b,r)===0?N:L),v!==null&&M()&&(g.push(ZM({start:v,end:N,loop:h,count:o,style:p})),v=null),L=N,O=b));return v!==null&&g.push(ZM({start:v,end:d,loop:h,count:o,style:p})),g}function U0(n,e){let t=[],i=n.segments;for(let r=0;r<i.length;r++){let s=W0(i[r],n.points,e);s.length&&t.push(...s)}return t}function zq(n,e,t,i){let r=0,s=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(s+=r);s>r&&n[s%e].skip;)s--;return s%=e,{start:r,end:s}}function Hq(n,e,t,i){let r=n.length,s=[],o=e,a=n[e],l;for(l=e+1;l<=t;++l){let c=n[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function pv(n,e){let t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];let s=!!n._loop,{start:o,end:a}=zq(t,r,s,i);if(i===!0)return XM(n,[{start:o,end:a,loop:s}],t,e);let l=a<o?a+r:a,c=!!n._fullLoop&&o===0&&a===r-1;return XM(n,Hq(t,o,l,c),t,e)}function XM(n,e,t,i){return!i||!i.setContext||!t?e:Yq(n,e,t,i)}function Yq(n,e,t,i){let r=n._chart.getContext(),s=QM(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,c=[],u=s,d=e[0].start,h=d;function p(g,A,v,b){let E=a?-1:1;if(g!==A){for(g+=l;t[g%l].skip;)g-=E;for(;t[A%l].skip;)A+=E;g%l!==A%l&&(c.push({start:g%l,end:A%l,loop:v,style:b}),u=b,d=A%l)}}for(let g of e){d=a?d:g.start;let A=t[d%l],v;for(h=d+1;h<=g.end;h++){let b=t[h%l];v=QM(i.setContext(yr(r,{type:"segment",p0:A,p1:b,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),Gq(v,u)&&p(d,h-1,g.loop,u),A=b,u=v}d<h-1&&p(d,h-1,g.loop,u)}return c}function QM(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Gq(n,e){if(!e)return!1;let t=[],i=function(r,s){return T0(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(e,i)}var Cv=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){let s=t.listeners[r],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=x0.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;let s=i.items,o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let i=t.items,r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},ts=new Cv,_T="transparent",Kq={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let i=I0(n||_T),r=i.valid&&I0(e||_T);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}},xv=class{constructor(e,t,i,r){let s=t[i];r=Ho([e.to,r,s,e.from]);let o=Ho([e.from,s,r]);this._active=!0,this._fn=e.fn||Kq[e.type||typeof o],this._easing=Fo[e.easing]||Fo.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);let r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Ho([e.to,t,r,e.from]),this._from=Ho([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to,l;if(this._active=s!==a&&(o||t<i),!this._active){this._target[r]=a,this._notify(!0);return}if(t<0){this._target[r]=s;return}l=t/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){let t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}},Ll=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!He(e))return;let t=Object.keys(bt.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{let s=e[r];if(!He(s))return;let o={};for(let a of t)o[a]=s[a];(dt(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){let i=t.options,r=Zq(e,i);if(!r)return[];let s=this._createAnimations(r,i);return i.$shared&&$q(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){let i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now(),l;for(l=o.length-1;l>=0;--l){let c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,t));continue}let u=t[c],d=s[c],h=i.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[c]=u;continue}s[c]=d=new xv(h,e,c,u),r.push(d)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let i=this._createAnimations(e,t);if(i.length)return ts.add(this._chart,i),!0}};function $q(n,e){let t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){let s=n[i[r]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function Zq(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function AT(n,e){let t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function Xq(n,e,t){if(t===!1)return!1;let i=AT(n,t),r=AT(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function Qq(n){let e,t,i,r;return He(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function _I(n,e){let t=[],i=n._getSortedDatasetMetas(e),r,s;for(r=0,s=i.length;r<s;++r)t.push(i[r].index);return t}function yT(n,e,t,i={}){let r=n.keys,s=i.mode==="single",o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===t){if(u=!0,i.all)continue;break}c=n.values[l],Dt(c)&&(s||e===0||Si(e)===Si(c))&&(e+=c)}return!u&&!i.all?0:e}function Jq(n,e){let{iScale:t,vScale:i}=e,r=t.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length),l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:n[u]};return a}function fv(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function ej(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function tj(n){let{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function nj(n,e,t){let i=n[e]||(n[e]={});return i[t]||(i[t]={})}function vT(n,e,t,i){for(let r of e.getMatchingVisibleMetas(i).reverse()){let s=n[r.index];if(t&&s>0||!t&&s<0)return r.index}return null}function wT(n,e){let{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=ej(s,o,i),d=e.length,h;for(let p=0;p<d;++p){let g=e[p],{[l]:A,[c]:v}=g,b=g._stacks||(g._stacks={});h=b[c]=nj(r,u,A),h[a]=v,h._top=vT(h,o,!0,i.type),h._bottom=vT(h,o,!1,i.type);let E=h._visualValues||(h._visualValues={});E[a]=v}}function gv(n,e){let t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function ij(n,e){return yr(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function rj(n,e,t){return yr(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function pd(n,e){let t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(let r of e){let s=r._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}var mv=n=>n==="reset"||n==="none",bT=(n,e)=>e?n:Object.assign({},n),sj=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:_I(t,!0),values:null},Bs=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=fv(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&pd(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,i=this._cachedMeta,r=this.getDataset(),s=(h,p,g,A)=>h==="x"?p:h==="r"?A:g,o=i.xAxisID=Be(r.xAxisID,gv(t,"x")),a=i.yAxisID=Be(r.yAxisID,gv(t,"y")),l=i.rAxisID=Be(r.rAxisID,gv(t,"r")),c=i.indexAxis,u=i.iAxisID=s(c,o,a,l),d=i.vAxisID=s(c,a,o,l);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(u),i.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&S0(this._data,this),t._stacked&&pd(t)}_dataCheck(){let t=this.getDataset(),i=t.data||(t.data=[]),r=this._data;if(He(i)){let s=this._cachedMeta;this._data=Jq(i,s)}else if(r!==i){if(r){S0(r,this);let s=this._cachedMeta;pd(s),s._parsed=[]}i&&Object.isExtensible(i)&&J1(i,this),this._syncList=[],this._data=i}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let i=this._cachedMeta,r=this.getDataset(),s=!1;this._dataCheck();let o=i._stacked;i._stacked=fv(i.vScale,i),i.stack!==r.stack&&(s=!0,pd(i),i.stack=r.stack),this._resyncElements(t),(s||o!==i._stacked)&&(wT(this,i._parsed),i._stacked=fv(i.vScale,i))}configure(){let t=this.chart.config,i=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){let{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:a}=r,l=o.axis,c=t===0&&i===s.length?!0:r._sorted,u=t>0&&r._parsed[t-1],d,h,p;if(this._parsing===!1)r._parsed=s,r._sorted=!0,p=s;else{dt(s[t])?p=this.parseArrayData(r,s,t,i):He(s[t])?p=this.parseObjectData(r,s,t,i):p=this.parsePrimitiveData(r,s,t,i);let g=()=>h[l]===null||u&&h[l]<u[l];for(d=0;d<i;++d)r._parsed[d+t]=h=p[d],c&&(g()&&(c=!1),u=h);r._sorted=c}a&&wT(this,p)}parsePrimitiveData(t,i,r,s){let{iScale:o,vScale:a}=t,l=o.axis,c=a.axis,u=o.getLabels(),d=o===a,h=new Array(s),p,g,A;for(p=0,g=s;p<g;++p)A=p+r,h[p]={[l]:d||o.parse(u[A],A),[c]:a.parse(i[A],A)};return h}parseArrayData(t,i,r,s){let{xScale:o,yScale:a}=t,l=new Array(s),c,u,d,h;for(c=0,u=s;c<u;++c)d=c+r,h=i[d],l[c]={x:o.parse(h[0],d),y:a.parse(h[1],d)};return l}parseObjectData(t,i,r,s){let{xScale:o,yScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(s),d,h,p,g;for(d=0,h=s;d<h;++d)p=d+r,g=i[p],u[d]={x:o.parse(Ar(g,l),p),y:a.parse(Ar(g,c),p)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,r){let s=this.chart,o=this._cachedMeta,a=i[t.axis],l={keys:_I(s,!0),values:i._stacks[t.axis]._visualValues};return yT(l,a,o.index,{mode:r})}updateRangeFromParsed(t,i,r,s){let o=r[i.axis],a=o===null?NaN:o,l=s&&r._stacks[i.axis];s&&l&&(s.values=l,a=yT(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,i){let r=this._cachedMeta,s=r._parsed,o=r._sorted&&t===r.iScale,a=s.length,l=this._getOtherScale(t),c=sj(i,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=tj(l),p,g;function A(){g=s[p];let v=g[l.axis];return!Dt(g[t.axis])||d>v||h<v}for(p=0;p<a&&!(!A()&&(this.updateRangeFromParsed(u,t,g,c),o));++p);if(o){for(p=a-1;p>=0;--p)if(!A()){this.updateRangeFromParsed(u,t,g,c);break}}return u}getAllParsedValues(t){let i=this._cachedMeta._parsed,r=[],s,o,a;for(s=0,o=i.length;s<o;++s)a=i[s][t.axis],Dt(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){let i=this._cachedMeta,r=i.iScale,s=i.vScale,o=this.getParsed(t);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){let i=this._cachedMeta;this.update(t||"default"),i._clip=Qq(Be(this.options.clip,Xq(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,i=this.chart,r=this._cachedMeta,s=r.data||[],o=i.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop,d;for(r.dataset&&r.dataset.draw(t,o,l,c),d=l;d<l+c;++d){let h=s[d];h.hidden||(h.active&&u?a.push(h):h.draw(t,o))}for(d=0;d<a.length;++d)a[d].draw(t,o)}getStyle(t,i){let r=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,i,r){let s=this.getDataset(),o;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];o=a.$context||(a.$context=rj(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=ij(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=r,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",r){let s=i==="active",o=this._cachedDataOpts,a=t+"-"+i,l=o[a],c=this.enableOptionSharing&&yn(r);if(l)return bT(l,c);let u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),h=s?[`${t}Hover`,"hover",t,""]:[t,""],p=u.getOptionScopes(this.getDataset(),d),g=Object.keys(bt.elements[t]),A=()=>this.getContext(r,s,i),v=u.resolveNamedOptions(p,g,A,h);return v.$shared&&(v.$shared=c,o[a]=Object.freeze(bT(v,c))),v}_resolveAnimations(t,i,r){let s=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,l=o[a];if(l)return l;let c;if(s.options.animation!==!1){let d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,i),p=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(p,this.getContext(t,r,i))}let u=new Ll(s,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||mv(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){let r=this.resolveDataElementOptions(t,i),s=this._sharedOptions,o=this.getSharedOptions(r),a=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,r),{sharedOptions:o,includeOptions:a}}updateElement(t,i,r,s){mv(s)?Object.assign(t,r):this._resolveAnimations(i,s).update(t,r)}updateSharedOptions(t,i,r){t&&!mv(i)&&this._resolveAnimations(void 0,i).update(t,r)}_setStyle(t,i,r,s){t.active=s;let o=this.getStyle(i,s);this._resolveAnimations(i,r,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,i,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,i,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let i=this._data,r=this._cachedMeta.data;for(let[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];let s=r.length,o=i.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,i,r=!0){let s=this._cachedMeta,o=s.data,a=t+i,l,c=u=>{for(u.length+=i,l=u.length-1;l>=a;l--)u[l]=u[l-i]};for(c(o),l=t;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(t,i),r&&this.updateElements(o,t,i,"reset")}updateElements(t,i,r,s){}_removeElements(t,i){let r=this._cachedMeta;if(this._parsing){let s=r._parsed.splice(t,i);r._stacked&&pd(r,s)}r.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[i,r,s]=t;this[i](r,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);let r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function oj(n,e){if(!n._cache.$bar){let t=n.getMatchingVisibleMetas(e),i=[];for(let r=0,s=t.length;r<s;r++)i=i.concat(t[r].controller.getAllParsedValues(n));n._cache.$bar=C0(i.sort((r,s)=>r-s))}return n._cache.$bar}function aj(n){let e=n.iScale,t=oj(e,n.type),i=e._length,r,s,o,a,l=()=>{o===32767||o===-32768||(yn(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=t.length;r<s;++r)o=e.getPixelForValue(t[r]),l();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),l();return i}function lj(n,e,t,i){let r=t.barThickness,s,o;return st(r)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[n]-s/2}}function cj(n,e,t,i){let r=e.pixels,s=r[n],o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null,l=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);let c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:t.barPercentage,start:c}}function uj(n,e,t,i){let r=t.parse(n[0],i),s=t.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s),l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[t.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function AI(n,e,t,i){return dt(n)?uj(n,e,t,i):e[t.axis]=t.parse(n,i),e}function ST(n,e,t,i){let r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,l=[],c,u,d,h;for(c=t,u=t+i;c<u;++c)h=e[c],d={},d[r.axis]=a||r.parse(o[c],c),l.push(AI(h,d,s,c));return l}function _v(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function dj(n,e,t){return n!==0?Si(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function hj(n){let e,t,i,r,s;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:t,end:i,reverse:e,top:r,bottom:s}}function pj(n,e,t,i){let r=e.borderSkipped,s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:l,top:c,bottom:u}=hj(n);r==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?r=c:(t._bottom||0)===i?r=u:(s[CT(u,o,a,l)]=!0,r=c)),s[CT(r,o,a,l)]=!0,n.borderSkipped=s}function CT(n,e,t,i){return i?(n=fj(n,e,t),n=xT(n,t,e)):n=xT(n,e,t),n}function fj(n,e,t){return n===e?t:n===t?e:n}function xT(n,e,t){return n==="start"?e:n==="end"?t:n}function gj(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}var mj=(()=>{class n extends Bs{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,i,r,s){return ST(t,i,r,s)}parseArrayData(t,i,r,s){return ST(t,i,r,s)}parseObjectData(t,i,r,s){let{iScale:o,vScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=o.axis==="x"?l:c,d=a.axis==="x"?l:c,h=[],p,g,A,v;for(p=r,g=r+s;p<g;++p)v=i[p],A={},A[o.axis]=o.parse(Ar(v,u),p),h.push(AI(Ar(v,d),A,a,p));return h}updateRangeFromParsed(t,i,r,s){super.updateRangeFromParsed(t,i,r,s);let o=r._custom;o&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let i=this._cachedMeta,{iScale:r,vScale:s}=i,o=this.getParsed(t),a=o._custom,l=_v(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,r,s){let o=s==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:p}=this._getSharedOptions(i,s);for(let g=i;g<i+r;g++){let A=this.getParsed(g),v=o||st(A[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(g),b=this._calculateBarIndexPixels(g,d),E=(A._stacks||{})[l.axis],O={horizontal:u,base:v.base,enableBorderRadius:!E||_v(A._custom)||a===E._top||a===E._bottom,x:u?v.head:b.center,y:u?b.center:v.head,height:u?b.size:Math.abs(v.size),width:u?Math.abs(v.size):b.size};p&&(O.options=h||this.resolveDataElementOptions(g,t[g].active?"active":s));let T=O.options||t[g].options;pj(O,T,E,a),gj(O,T,d.ratio),this.updateElement(t[g],g,O,s)}}_getStacks(t,i){let{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),o=r.options.stacked,a=[],l=this._cachedMeta.controller.getParsed(i),c=l&&l[r.axis],u=d=>{let h=d._parsed.find(g=>g[r.axis]===c),p=h&&h[d.vScale.axis];if(st(p)||isNaN(p))return!0};for(let d of s)if(!(i!==void 0&&u(d))&&((o===!1||a.indexOf(d.stack)===-1||o===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,r){let s=this._getStacks(t,r),o=i!==void 0?s.indexOf(i):-1;return o===-1?s.length-1:o}_getRuler(){let t=this.options,i=this._cachedMeta,r=i.iScale,s=[],o,a;for(o=0,a=i.data.length;o<a;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));let l=t.barThickness;return{min:l||aj(i),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:i,_stacked:r,index:s},options:{base:o,minBarLength:a}}=this,l=o||0,c=this.getParsed(t),u=c._custom,d=_v(u),h=c[i.axis],p=0,g=r?this.applyStack(i,c,r):h,A,v;g!==h&&(p=g-h,g=h),d&&(h=u.barStart,g=u.barEnd-u.barStart,h!==0&&Si(h)!==Si(u.barEnd)&&(p=0),p+=h);let b=!st(o)&&!d?o:p,E=i.getPixelForValue(b);if(this.chart.getDataVisibility(t)?A=i.getPixelForValue(p+g):A=E,v=A-E,Math.abs(v)<a){v=dj(v,i,l)*a,h===l&&(E-=v/2);let O=i.getPixelForDecimal(0),T=i.getPixelForDecimal(1),k=Math.min(O,T),D=Math.max(O,T);E=Math.max(Math.min(E,D),k),A=E+v,r&&!d&&(c._stacks[i.axis]._visualValues[s]=i.getValueForPixel(A)-i.getValueForPixel(E))}if(E===i.getPixelForValue(l)){let O=Si(v)*i.getLineWidthForValue(l)/2;E+=O,v-=O}return{size:v,base:E,head:A,center:A+v/2}}_calculateBarIndexPixels(t,i){let r=i.scale,s=this.options,o=s.skipNull,a=Be(s.maxBarThickness,1/0),l,c;if(i.grouped){let u=o?this._getStackCount(t):i.stackCount,d=s.barThickness==="flex"?cj(t,i,s,u):lj(t,i,s,u),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);l=d.start+d.chunk*h+d.chunk/2,c=Math.min(a,d.chunk*d.ratio)}else l=r.getPixelForValue(this.getParsed(t)[r.axis],t),c=Math.min(a,i.min*i.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){let t=this._cachedMeta,i=t.vScale,r=t.data,s=r.length,o=0;for(;o<s;++o)this.getParsed(o)[i.axis]!==null&&!r[o].hidden&&r[o].draw(this._ctx)}}return n})(),_j=(()=>{class n extends Bs{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,i,r,s){let o=super.parsePrimitiveData(t,i,r,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+r).radius;return o}parseArrayData(t,i,r,s){let o=super.parseArrayData(t,i,r,s);for(let a=0;a<o.length;a++){let l=i[r+a];o[a]._custom=Be(l[2],this.resolveDataElementOptions(a+r).radius)}return o}parseObjectData(t,i,r,s){let o=super.parseObjectData(t,i,r,s);for(let a=0;a<o.length;a++){let l=i[r+a];o[a]._custom=Be(l&&l.r&&+l.r,this.resolveDataElementOptions(a+r).radius)}return o}getMaxOverflow(){let t=this._cachedMeta.data,i=0;for(let r=t.length-1;r>=0;--r)i=Math.max(i,t[r].size(this.resolveDataElementOptions(r))/2);return i>0&&i}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(t),l=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y),u=a._custom;return{label:r[t]||"",value:"("+l+", "+c+(u?", "+u:"")+")"}}update(t){let i=this._cachedMeta.data;this.updateElements(i,0,i.length,t)}updateElements(t,i,r,s){let o=s==="reset",{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(i,s),d=a.axis,h=l.axis;for(let p=i;p<i+r;p++){let g=t[p],A=!o&&this.getParsed(p),v={},b=v[d]=o?a.getPixelForDecimal(.5):a.getPixelForValue(A[d]),E=v[h]=o?l.getBasePixel():l.getPixelForValue(A[h]);v.skip=isNaN(b)||isNaN(E),u&&(v.options=c||this.resolveDataElementOptions(p,g.active?"active":s),o&&(v.options.radius=0)),this.updateElement(g,p,v,s)}}resolveDataElementOptions(t,i){let r=this.getParsed(t),s=super.resolveDataElementOptions(t,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let o=s.radius;return i!=="active"&&(s.radius=0),s.radius+=Be(r&&r._custom,o),s}}return n})();function Aj(n,e,t){let i=1,r=1,s=0,o=0;if(e<At){let a=n,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),p=(O,T,k)=>Uo(O,a,l,!0)?1:Math.max(T,T*t,k,k*t),g=(O,T,k)=>Uo(O,a,l,!0)?-1:Math.min(T,T*t,k,k*t),A=p(0,c,d),v=p(Ct,u,h),b=g(rt,c,d),E=g(rt+Ct,u,h);i=(A-b)/2,r=(v-E)/2,s=-(A+b)/2,o=-(v+E)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}var Sd=(()=>{class n extends Bs{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:s}}=t.legend.options;return i.labels.map((o,a)=>{let c=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}}};constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){let r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let o=c=>+r[c];if(He(r[t])){let{key:c="value"}=this._parsing;o=u=>+Ar(r[u],c)}let a,l;for(a=t,l=t+i;a<l;++a)s._parsed[a]=o(a)}}_getRotation(){return qt(this.options.rotation-90)}_getCircumference(){return qt(this.options.circumference)}_getRotationExtents(){let t=At,i=-At;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){let s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),a=s._getCircumference();t=Math.min(t,o),i=Math.max(i,o+a)}return{rotation:t,circumference:i-t}}update(t){let i=this.chart,{chartArea:r}=i,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-a)/2,0),c=Math.min(Y1(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:A,offsetY:v}=Aj(h,d,c),b=(r.width-a)/p,E=(r.height-a)/g,O=Math.max(Math.min(b,E)/2,0),T=A0(this.options.radius,O),k=Math.max(T*c,0),D=(T-k)/this._getVisibleDatasetWeightTotal();this.offsetX=A*T,this.offsetY=v*T,s.total=this.calculateTotal(),this.outerRadius=T-D*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-D*u,0),this.updateElements(o,0,o.length,t)}_circumference(t,i){let r=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/At)}updateElements(t,i,r,s){let o=s==="reset",a=this.chart,l=a.chartArea,u=a.options.animation,d=(l.left+l.right)/2,h=(l.top+l.bottom)/2,p=o&&u.animateScale,g=p?0:this.innerRadius,A=p?0:this.outerRadius,{sharedOptions:v,includeOptions:b}=this._getSharedOptions(i,s),E=this._getRotation(),O;for(O=0;O<i;++O)E+=this._circumference(O,o);for(O=i;O<i+r;++O){let T=this._circumference(O,o),k=t[O],D={x:d+this.offsetX,y:h+this.offsetY,startAngle:E,endAngle:E+T,circumference:T,outerRadius:A,innerRadius:g};b&&(D.options=v||this.resolveDataElementOptions(O,k.active?"active":s)),E+=T,this.updateElement(k,O,D,s)}}calculateTotal(){let t=this._cachedMeta,i=t.data,r=0,s;for(s=0;s<i.length;s++){let o=t._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(t){let i=this._cachedMeta.total;return i>0&&!isNaN(t)?At*(Math.abs(t)/i):0}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=zo(i._parsed[t],r.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let i=0,r=this.chart,s,o,a,l,c;if(!t){for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),t=a.data,l=a.controller;break}}if(!t)return 0;for(s=0,o=t.length;s<o;++s)c=l.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(i=Math.max(i,c.borderWidth||0,c.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let r=0,s=t.length;r<s;++r){let o=this.resolveDataElementOptions(r);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(i+=this._getRingWeight(r));return i}_getRingWeight(t){return Math.max(Be(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})(),yj=(()=>{class n extends Bs{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let i=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=i,a=this.chart._animationsDisabled,{start:l,count:c}=E0(i,s,a);this._drawStart=l,this._drawCount=c,M0(i)&&(l=0,c=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;let u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:u},t),this.updateElements(s,l,c,t)}updateElements(t,i,r,s){let o=s==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(i,s),p=a.axis,g=l.axis,{spanGaps:A,segment:v}=this.options,b=Gi(A)?A:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||o||s==="none",O=i+r,T=t.length,k=i>0&&this.getParsed(i-1);for(let D=0;D<T;++D){let M=t[D],N=E?M:{};if(D<i||D>=O){N.skip=!0;continue}let L=this.getParsed(D),B=st(L[g]),H=N[p]=a.getPixelForValue(L[p],D),Z=N[g]=o||B?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,L,c):L[g],D);N.skip=isNaN(H)||isNaN(Z)||B,N.stop=D>0&&Math.abs(L[p]-k[p])>b,v&&(N.parsed=L,N.raw=u.data[D]),h&&(N.options=d||this.resolveDataElementOptions(D,M.active?"active":s)),E||this.updateElement(M,D,N,s),k=L}}getMaxOverflow(){let t=this._cachedMeta,i=t.dataset,r=i.options&&i.options.borderWidth||0,s=t.data||[];if(!s.length)return r;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n})(),yI=(()=>{class n extends Bs{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:s}}=t.legend.options;return i.labels.map((o,a)=>{let c=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=zo(i._parsed[t].r,r.options.locale);return{label:s[t]||"",value:o}}parseObjectData(t,i,r,s){return F0.bind(this)(t,i,r,s)}update(t){let i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){let t=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((r,s)=>{let o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){let t=this.chart,i=t.chartArea,r=t.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),a=Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0),l=(o-a)/t.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(t,i,r,s){let o=s==="reset",a=this.chart,c=a.options.animation,u=this._cachedMeta.rScale,d=u.xCenter,h=u.yCenter,p=u.getIndexAngle(0)-.5*rt,g=p,A,v=360/this.countVisibleElements();for(A=0;A<i;++A)g+=this._computeAngle(A,s,v);for(A=i;A<i+r;A++){let b=t[A],E=g,O=g+this._computeAngle(A,s,v),T=a.getDataVisibility(A)?u.getDistanceFromCenterForValue(this.getParsed(A).r):0;g=O,o&&(c.animateScale&&(T=0),c.animateRotate&&(E=O=p));let k={x:d,y:h,innerRadius:0,outerRadius:T,startAngle:E,endAngle:O,options:this.resolveDataElementOptions(A,b.active?"active":s)};this.updateElement(b,A,k,s)}}countVisibleElements(){let t=this._cachedMeta,i=0;return t.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(t,i,r){return this.chart.getDataVisibility(t)?qt(this.resolveDataElementOptions(t,i).angle||r):0}}return n})(),vj=(()=>{class n extends Sd{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})(),wj=(()=>{class n extends Bs{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let i=this._cachedMeta.vScale,r=this.getParsed(t);return{label:i.getLabels()[t],value:""+i.getLabelForValue(r[i.axis])}}parseObjectData(t,i,r,s){return F0.bind(this)(t,i,r,s)}update(t){let i=this._cachedMeta,r=i.dataset,s=i.data||[],o=i.iScale.getLabels();if(r.points=s,t!=="resize"){let a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);let l={_loop:!0,_fullLoop:o.length===s.length,options:a};this.updateElement(r,void 0,l,t)}this.updateElements(s,0,s.length,t)}updateElements(t,i,r,s){let o=this._cachedMeta.rScale,a=s==="reset";for(let l=i;l<i+r;l++){let c=t[l],u=this.resolveDataElementOptions(l,c.active?"active":s),d=o.getPointPositionForValue(l,this.getParsed(l).r),h=a?o.xCenter:d.x,p=a?o.yCenter:d.y,g={x:h,y:p,angle:d.angle,skip:isNaN(h)||isNaN(p),options:u};this.updateElement(c,l,g,s)}}}return n})(),bj=(()=>{class n extends Bs{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(t),l=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y);return{label:r[t]||"",value:"("+l+", "+c+")"}}update(t){let i=this._cachedMeta,{data:r=[]}=i,s=this.chart._animationsDisabled,{start:o,count:a}=E0(i,r,s);if(this._drawStart=o,this._drawCount=a,M0(i)&&(o=0,a=r.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:l,_dataset:c}=i;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=r;let u=this.resolveDatasetElementOptions(t);u.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:u},t)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(r,o,a,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,i,r,s){let o=s==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,d=this.resolveDataElementOptions(i,s),h=this.getSharedOptions(d),p=this.includeOptions(s,h),g=a.axis,A=l.axis,{spanGaps:v,segment:b}=this.options,E=Gi(v)?v:Number.POSITIVE_INFINITY,O=this.chart._animationsDisabled||o||s==="none",T=i>0&&this.getParsed(i-1);for(let k=i;k<i+r;++k){let D=t[k],M=this.getParsed(k),N=O?D:{},L=st(M[A]),B=N[g]=a.getPixelForValue(M[g],k),H=N[A]=o||L?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,M,c):M[A],k);N.skip=isNaN(B)||isNaN(H)||L,N.stop=k>0&&Math.abs(M[g]-T[g])>E,b&&(N.parsed=M,N.raw=u.data[k]),p&&(N.options=h||this.resolveDataElementOptions(k,D.active?"active":s)),O||this.updateElement(D,k,N,s),T=M}this.updateSharedOptions(h,s,d)}getMaxOverflow(){let t=this._cachedMeta,i=t.data||[];if(!this.options.showLine){let l=0;for(let c=i.length-1;c>=0;--c)l=Math.max(l,i[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}let r=t.dataset,s=r.options&&r.options.borderWidth||0;if(!i.length)return s;let o=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,a)/2}}return n})(),Sj=Object.freeze({__proto__:null,BarController:mj,BubbleController:_j,DoughnutController:Sd,LineController:yj,PieController:vj,PolarAreaController:yI,RadarController:wj,ScatterController:bj});function Yo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Dv=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Yo()}parse(){return Yo()}format(){return Yo()}add(){return Yo()}diff(){return Yo()}startOf(){return Yo()}endOf(){return Yo()}},Cj={_date:Dv};function xj(n,e,t,i){let{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){let c=a._reversePixels?X1:zi;if(i){if(r._sharedOptions){let u=s[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){let h=c(s,e,t-d),p=c(s,e,t+d);return{lo:h.lo,hi:p.hi}}}}else{let u=c(s,e,t);if(l){let{vScale:d}=r._cachedMeta,{_parsed:h}=n,p=h.slice(0,u.lo+1).reverse().findIndex(A=>!st(A[d.axis]));u.lo-=Math.max(0,p);let g=h.slice(u.hi).findIndex(A=>!st(A[d.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:s.length-1}}function Cd(n,e,t,i,r){let s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=s.length;a<l;++a){let{index:c,data:u}=s[a],{lo:d,hi:h}=xj(s[a],e,o,r);for(let p=d;p<=h;++p){let g=u[p];g.skip||i(g,c,p)}}}function Dj(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){let s=e?Math.abs(i.x-r.x):0,o=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Av(n,e,t,i,r){let s=[];return!r&&!n.isPointInArea(e)||Cd(n,t,e,function(a,l,c){!r&&!Hi(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function Ej(n,e,t,i){let r=[];function s(o,a,l){let{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:d}=Wo(o,{x:e.x,y:e.y});Uo(d,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return Cd(n,t,e,s),r}function Mj(n,e,t,i,r,s){let o=[],a=Dj(t),l=Number.POSITIVE_INFINITY;function c(u,d,h){let p=u.inRange(e.x,e.y,r);if(i&&!p)return;let g=u.getCenterPoint(r);if(!(!!s||n.isPointInArea(g))&&!p)return;let v=a(e,g);v<l?(o=[{element:u,datasetIndex:d,index:h}],l=v):v===l&&o.push({element:u,datasetIndex:d,index:h})}return Cd(n,t,e,c),o}function yv(n,e,t,i,r,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!i?Ej(n,e,t,r):Mj(n,e,t,i,r,s)}function DT(n,e,t,i,r){let s=[],o=t==="x"?"inXRange":"inYRange",a=!1;return Cd(n,t,e,(l,c,u)=>{l[o]&&l[o](e[t],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var Tj={evaluateInteractionItems:Cd,modes:{index(n,e,t,i){let r=es(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?Av(n,r,s,i,o):yv(n,r,s,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{let u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(n,e,t,i){let r=es(e,n),s=t.axis||"xy",o=t.includeInvisible||!1,a=t.intersect?Av(n,r,s,i,o):yv(n,r,s,!1,i,o);if(a.length>0){let l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,e,t,i){let r=es(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return Av(n,r,s,i,o)},nearest(n,e,t,i){let r=es(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return yv(n,r,s,t.intersect,i,o)},x(n,e,t,i){let r=es(e,n);return DT(n,r,"x",t.intersect,i)},y(n,e,t,i){let r=es(e,n);return DT(n,r,"y",t.intersect,i)}}},vI=["left","top","right","bottom"];function fd(n,e){return n.filter(t=>t.pos===e)}function ET(n,e){return n.filter(t=>vI.indexOf(t.pos)===-1&&t.box.axis===e)}function gd(n,e){return n.sort((t,i)=>{let r=e?i:t,s=e?t:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function Ij(n){let e=[],t,i,r,s,o,a;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:t,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function kj(n){let e={};for(let t of n){let{stack:i,pos:r,stackWeight:s}=t;if(!i||!vI.includes(r))continue;let o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function Pj(n,e){let t=kj(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e,s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];let{fullSize:l}=a.box,c=t[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&e.availableHeight)}return t}function Nj(n){let e=Ij(n),t=gd(e.filter(c=>c.box.fullSize),!0),i=gd(fd(e,"left"),!0),r=gd(fd(e,"right")),s=gd(fd(e,"top"),!0),o=gd(fd(e,"bottom")),a=ET(e,"x"),l=ET(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:fd(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function MT(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function wI(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function Oj(n,e,t,i){let{pos:r,box:s}=t,o=n.maxPadding;if(!He(r)){t.size&&(n[r]-=t.size);let d=i[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?s.height:s.width),t.size=d.size/d.count,n[r]+=t.size}s.getPadding&&wI(o,s.getPadding());let a=Math.max(0,e.outerWidth-MT(o,n,"left","right")),l=Math.max(0,e.outerHeight-MT(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:c,other:u}:{same:u,other:c}}function Rj(n){let e=n.maxPadding;function t(i){let r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function Fj(n,e){let t=e.maxPadding;function i(r){let s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return i(n?["left","right"]:["top","bottom"])}function Ad(n,e,t,i){let r=[],s,o,a,l,c,u;for(s=0,o=n.length,c=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||e.w,a.height||e.h,Fj(a.horizontal,e));let{same:d,other:h}=Oj(e,t,a,i);c|=d&&r.length,u=u||h,l.fullSize||r.push(a)}return c&&Ad(r,e,t,i)||u}function z0(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function TT(n,e,t,i){let r=t.padding,{x:s,y:o}=e;for(let a of n){let l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){let d=e.w*u,h=c.size||l.height;yn(c.start)&&(o=c.start),l.fullSize?z0(l,r.left,o,t.outerWidth-r.right-r.left,h):z0(l,e.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{let d=e.h*u,h=c.size||l.width;yn(c.start)&&(s=c.start),l.fullSize?z0(l,s,r.top,h,t.outerHeight-r.bottom-r.top):z0(l,s,e.top+c.placed,h,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var Dn={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;let r=jt(n.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(t-r.height,0),a=Nj(n.boxes),l=a.vertical,c=a.horizontal;mt(n.boxes,A=>{typeof A.beforeLayout=="function"&&A.beforeLayout()});let u=l.reduce((A,v)=>v.box.options&&v.box.options.display===!1?A:A+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},r);wI(h,jt(i));let p=Object.assign({maxPadding:h,w:s,h:o,x:r.left,y:r.top},r),g=Pj(l.concat(c),d);Ad(a.fullSize,p,d,g),Ad(l,p,d,g),Ad(c,p,d,g)&&Ad(l,p,d,g),Rj(p),TT(a.leftAndTop,p,d,g),p.x+=p.w,p.y+=p.h,TT(a.rightAndBottom,p,d,g),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},mt(a.chartArea,A=>{let v=A.box;Object.assign(v,n.chartArea),v.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}},J0=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}},Ev=class extends J0{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},X0="$chartjs",Lj={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},IT=n=>n===null||n==="";function Vj(n,e){let t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[X0]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",IT(r)){let s=B0(n,"width");s!==void 0&&(n.width=s)}if(IT(i))if(n.style.height==="")n.height=n.width/(e||2);else{let s=B0(n,"height");s!==void 0&&(n.height=s)}return n}var bI=uv?{passive:!0}:!1;function Bj(n,e,t){n&&n.addEventListener(e,t,bI)}function qj(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,bI)}function jj(n,e){let t=Lj[n.type]||n.type,{x:i,y:r}=es(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function eg(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function Wj(n,e,t){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||eg(a.addedNodes,i),o=o&&!eg(a.removedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function Uj(n,e,t){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||eg(a.removedNodes,i),o=o&&!eg(a.addedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}var vd=new Map,kT=0;function SI(){let n=window.devicePixelRatio;n!==kT&&(kT=n,vd.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function zj(n,e){vd.size||window.addEventListener("resize",SI),vd.set(n,e)}function Hj(n){vd.delete(n),vd.size||window.removeEventListener("resize",SI)}function Yj(n,e,t){let i=n.canvas,r=i&&hd(i);if(!r)return;let s=D0((a,l)=>{let c=r.clientWidth;t(a,l),c<r.clientWidth&&t()},window),o=new ResizeObserver(a=>{let l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(r),zj(n,s),o}function vv(n,e,t){t&&t.disconnect(),e==="resize"&&Hj(n)}function Gj(n,e,t){let i=n.canvas,r=D0(s=>{n.ctx!==null&&t(jj(s,n))},n);return Bj(i,e,r),r}var Mv=class extends J0{acquireContext(e,t){let i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(Vj(e,t),i):null}releaseContext(e){let t=e.canvas;if(!t[X0])return!1;let i=t[X0].initial;["height","width"].forEach(s=>{let o=i[s];st(o)?t.removeAttribute(s):t.setAttribute(s,o)});let r=i.style||{};return Object.keys(r).forEach(s=>{t.style[s]=r[s]}),t.width=t.width,delete t[X0],!0}addEventListener(e,t,i){this.removeEventListener(e,t);let r=e.$proxies||(e.$proxies={}),o={attach:Wj,detach:Uj,resize:Yj}[t]||Gj;r[t]=o(e,t,i)}removeEventListener(e,t){let i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:vv,detach:vv,resize:vv}[t]||qj)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return cv(e,t,i,r)}isAttached(e){let t=e&&hd(e);return!!(t&&t.isConnected)}};function Kj(n){return!dd()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Ev:Mv}var rn=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return Gi(this.x)&&Gi(this.y)}getProps(e,t){let i=this.$animations;if(!t||!i)return this;let r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}};function $j(n,e){let t=n.options.ticks,i=Zj(n),r=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?Qj(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return Jj(e,c,s,o/r),c;let u=Xj(s,e,r);if(o>0){let d,h,p=o>1?Math.round((l-a)/(o-1)):null;for(H0(e,c,u,st(p)?0:a-p,a),d=0,h=o-1;d<h;d++)H0(e,c,u,s[d],s[d+1]);return H0(e,c,u,l,st(p)?e.length:l+p),c}return H0(e,c,u),c}function Zj(n){let e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function Xj(n,e,t){let i=e7(n),r=e.length/t;if(!i)return Math.max(r,1);let s=K1(i);for(let o=0,a=s.length-1;o<a;o++){let l=s[o];if(l>r)return l}return Math.max(r,1)}function Qj(n){let e=[],t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function Jj(n,e,t,i){let r=0,s=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(e.push(n[o]),r++,s=t[r*i])}function H0(n,e,t,i,r){let s=Be(i,0),o=Math.min(Be(r,n.length),n.length),a=0,l,c,u;for(t=Math.ceil(t),r&&(l=r-i,t=l/Math.floor(l/t)),u=s;u<0;)a++,u=Math.round(s+a*t);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(n[c]),a++,u=Math.round(s+a*t))}function e7(n){let e=n.length,t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}var t7=n=>n==="left"?"right":n==="right"?"left":n,PT=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,NT=(n,e)=>Math.min(e||n,n);function OT(n,e){let t=[],i=n.length/e,r=n.length,s=0;for(;s<r;s+=i)t.push(n[Math.floor(s)]);return t}function n7(n,e,t){let i=n.ticks.length,r=Math.min(e,i-1),s=n._startPixel,o=n._endPixel,a=1e-6,l=n.getPixelForTick(r),c;if(!(t&&(i===1?c=Math.max(l-s,o-l):e===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function i7(n,e){mt(n,t=>{let i=t.gc,r=i.length/2,s;if(r>e){for(s=0;s<r;++s)delete t.data[i[s]];i.splice(0,r)}})}function md(n){return n.drawTicks?n.tickLength:0}function RT(n,e){if(!n.display)return 0;let t=Ot(n.font,e),i=jt(n.padding);return(dt(n.text)?n.text.length:1)*t.lineHeight+i.height}function r7(n,e){return yr(n,{scale:e,type:"scale"})}function s7(n,e,t){return yr(n,{tick:t,index:e,type:"tick"})}function o7(n,e,t){let i=od(n);return(t&&e!=="right"||!t&&e==="right")&&(i=t7(i)),i}function a7(n,e,t,i){let{top:r,left:s,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l,d=0,h,p,g,A=o-r,v=a-s;if(n.isHorizontal()){if(p=cn(i,s,a),He(t)){let b=Object.keys(t)[0],E=t[b];g=u[b].getPixelForValue(E)+A-e}else t==="center"?g=(c.bottom+c.top)/2+A-e:g=PT(n,t,e);h=a-s}else{if(He(t)){let b=Object.keys(t)[0],E=t[b];p=u[b].getPixelForValue(E)-v+e}else t==="center"?p=(c.left+c.right)/2-v+e:p=PT(n,t,e);g=cn(i,o,r),d=t==="left"?-Ct:Ct}return{titleX:p,titleY:g,maxWidth:h,rotation:d}}var Ko=class n extends rn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=Ln(e,Number.POSITIVE_INFINITY),t=Ln(t,Number.NEGATIVE_INFINITY),i=Ln(i,Number.POSITIVE_INFINITY),r=Ln(r,Number.NEGATIVE_INFINITY),{min:Ln(e,i),max:Ln(t,r),minDefined:Dt(e),maxDefined:Dt(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:t,max:i};let a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(t=Math.min(t,o.min)),s||(i=Math.max(i,o.max));return t=s&&t>i?i:t,i=r&&t>i?t:i,{min:Ln(t,Ln(i,t)),max:Ln(i,Ln(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){pt(this.options.beforeUpdate,[this])}update(e,t,i){let{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=sv(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?OT(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=$j(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){pt(this.options.afterUpdate,[this])}beforeSetDimensions(){pt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){pt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),pt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){pt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=pt(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){pt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){pt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,i=NT(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation,o=r,a,l,c;if(!this._isVisible()||!t.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}let u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,p=Jt(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:p/(i-1),d+6>a&&(a=p/(i-(e.offset?.5:1)),l=this.maxHeight-md(e.grid)-t.padding-RT(e.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=jo(Math.min(Math.asin(Jt((u.highest.height+6)/a,-1,1)),Math.asin(Jt(l/c,-1,1))-Math.asin(Jt(h/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){pt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){pt(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let l=RT(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=md(s)+l):(e.height=this.maxHeight,e.width=md(s)+l),i.display&&this.ticks.length){let{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),p=i.padding*2,g=qt(this.labelRotation),A=Math.cos(g),v=Math.sin(g);if(a){let b=i.mirror?0:v*d.width+A*h.height;e.height=Math.min(this.maxHeight,e.height+b+p)}else{let b=i.mirror?0:A*d.width+v*h.height;e.width=Math.min(this.maxWidth,e.width+b+p)}this._calculatePadding(c,u,v,A)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){let{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),h=0,p=0;l?c?(h=r*e.width,p=i*t.height):(h=i*e.height,p=r*t.width):s==="start"?p=t.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,p=t.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=t.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=t.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){pt(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)st(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,i=this.ticks;t<i.length&&(i=OT(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){let{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(t/NT(t,i)),c=0,u=0,d,h,p,g,A,v,b,E,O,T,k;for(d=0;d<t;d+=l){if(g=e[d].label,A=this._resolveTickFontOptions(d),r.font=v=A.string,b=s[v]=s[v]||{data:{},gc:[]},E=A.lineHeight,O=T=0,!st(g)&&!dt(g))O=Pl(r,b.data,b.gc,O,g),T=E;else if(dt(g))for(h=0,p=g.length;h<p;++h)k=g[h],!st(k)&&!dt(k)&&(O=Pl(r,b.data,b.gc,O,k),T+=E);o.push(O),a.push(T),c=Math.max(O,c),u=Math.max(T,u)}i7(s,t);let D=o.indexOf(c),M=a.indexOf(u),N=L=>({width:o[L]||0,height:a[L]||0});return{first:N(0),last:N(t-1),widest:N(D),highest:N(M),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return Z1(this._alignToPixels?Xr(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let i=t[e];return i.$context||(i.$context=s7(this.getContext(),e,i))}return this.$context||(this.$context=r7(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=qt(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=md(s),p=[],g=a.setContext(this.getContext()),A=g.display?g.width:0,v=A/2,b=function(ae){return Xr(i,ae,A)},E,O,T,k,D,M,N,L,B,H,Z,re;if(o==="top")E=b(this.bottom),M=this.bottom-h,L=E-v,H=b(e.top)+v,re=e.bottom;else if(o==="bottom")E=b(this.top),H=e.top,re=b(e.bottom)-v,M=E+v,L=this.top+h;else if(o==="left")E=b(this.right),D=this.right-h,N=E-v,B=b(e.left)+v,Z=e.right;else if(o==="right")E=b(this.left),B=e.left,Z=b(e.right)-v,D=E+v,N=this.left+h;else if(t==="x"){if(o==="center")E=b((e.top+e.bottom)/2+.5);else if(He(o)){let ae=Object.keys(o)[0],ne=o[ae];E=b(this.chart.scales[ae].getPixelForValue(ne))}H=e.top,re=e.bottom,M=E+v,L=M+h}else if(t==="y"){if(o==="center")E=b((e.left+e.right)/2);else if(He(o)){let ae=Object.keys(o)[0],ne=o[ae];E=b(this.chart.scales[ae].getPixelForValue(ne))}D=E-v,N=D-h,B=e.left,Z=e.right}let Q=Be(r.ticks.maxTicksLimit,d),G=Math.max(1,Math.ceil(d/Q));for(O=0;O<d;O+=G){let ae=this.getContext(O),ne=s.setContext(ae),De=a.setContext(ae),ue=ne.lineWidth,le=ne.color,ee=De.dash||[],fe=De.dashOffset,ye=ne.tickWidth,ke=ne.tickColor,Qe=ne.tickBorderDash||[],Ee=ne.tickBorderDashOffset;T=n7(this,O,l),T!==void 0&&(k=Xr(i,T,ue),c?D=N=B=Z=k:M=L=H=re=k,p.push({tx1:D,ty1:M,tx2:N,ty2:L,x1:B,y1:H,x2:Z,y2:re,width:ue,color:le,borderDash:ee,borderDashOffset:fe,tickWidth:ye,tickColor:ke,tickBorderDash:Qe,tickBorderDashOffset:Ee}))}return this._ticksLength=d,this._borderValue=E,p}_computeLabelItems(e){let t=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,h=md(i.grid),p=h+u,g=d?-u:p,A=-qt(this.labelRotation),v=[],b,E,O,T,k,D,M,N,L,B,H,Z,re="middle";if(r==="top")D=this.bottom-g,M=this._getXAxisLabelAlignment();else if(r==="bottom")D=this.top+g,M=this._getXAxisLabelAlignment();else if(r==="left"){let G=this._getYAxisLabelAlignment(h);M=G.textAlign,k=G.x}else if(r==="right"){let G=this._getYAxisLabelAlignment(h);M=G.textAlign,k=G.x}else if(t==="x"){if(r==="center")D=(e.top+e.bottom)/2+p;else if(He(r)){let G=Object.keys(r)[0],ae=r[G];D=this.chart.scales[G].getPixelForValue(ae)+p}M=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")k=(e.left+e.right)/2-p;else if(He(r)){let G=Object.keys(r)[0],ae=r[G];k=this.chart.scales[G].getPixelForValue(ae)}M=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(l==="start"?re="top":l==="end"&&(re="bottom"));let Q=this._getLabelSizes();for(b=0,E=a.length;b<E;++b){O=a[b],T=O.label;let G=s.setContext(this.getContext(b));N=this.getPixelForTick(b)+s.labelOffset,L=this._resolveTickFontOptions(b),B=L.lineHeight,H=dt(T)?T.length:1;let ae=H/2,ne=G.color,De=G.textStrokeColor,ue=G.textStrokeWidth,le=M;o?(k=N,M==="inner"&&(b===E-1?le=this.options.reverse?"left":"right":b===0?le=this.options.reverse?"right":"left":le="center"),r==="top"?c==="near"||A!==0?Z=-H*B+B/2:c==="center"?Z=-Q.highest.height/2-ae*B+B:Z=-Q.highest.height+B/2:c==="near"||A!==0?Z=B/2:c==="center"?Z=Q.highest.height/2-ae*B:Z=Q.highest.height-H*B,d&&(Z*=-1),A!==0&&!G.showLabelBackdrop&&(k+=B/2*Math.sin(A))):(D=N,Z=(1-H)*B/2);let ee;if(G.showLabelBackdrop){let fe=jt(G.backdropPadding),ye=Q.heights[b],ke=Q.widths[b],Qe=Z-fe.top,Ee=0-fe.left;switch(re){case"middle":Qe-=ye/2;break;case"bottom":Qe-=ye;break}switch(M){case"center":Ee-=ke/2;break;case"right":Ee-=ke;break;case"inner":b===E-1?Ee-=ke:b>0&&(Ee-=ke/2);break}ee={left:Ee,top:Qe,width:ke+fe.width,height:ye+fe.height,color:G.backdropColor}}v.push({label:T,font:L,textOffset:Z,options:{rotation:A,color:ne,strokeColor:De,strokeWidth:ue,textAlign:le,textBaseline:re,translation:[k,D],backdrop:ee}})}return v}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-qt(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width,c,u;return t==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):t==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:i,top:r,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let r=this.ticks.findIndex(s=>s.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){let t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s,o,a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(s=0,o=r.length;s<o;++s){let l=r[s];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;let a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue,c,u,d,h;this.isHorizontal()?(c=Xr(e,this.left,o)-o/2,u=Xr(e,this.right,a)+a/2,d=h=l):(d=Xr(e,this.top,o)-o/2,h=Xr(e,this.bottom,a)+a/2,c=u=l),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(c,d),t.lineTo(u,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let i=this.ctx,r=this._computeLabelArea();r&&Rs(i,r);let s=this.getLabelItems(e);for(let o of s){let a=o.options,l=o.font,c=o.label,u=o.textOffset;Qr(i,c,0,u,l,a)}r&&Fs(i)}drawTitle(){let{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;let s=Ot(i.font),o=jt(i.padding),a=i.align,l=s.lineHeight/2;t==="bottom"||t==="center"||He(t)?(l+=o.bottom,dt(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;let{titleX:c,titleY:u,maxWidth:d,rotation:h}=a7(this,l,t,a);Qr(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:h,textAlign:o7(a,t,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,i=Be(e.grid&&e.grid.z,-1),r=Be(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[],s,o;for(s=0,o=t.length;s<o;++s){let a=t[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return Ot(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},Fl=class{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),i;u7(t)&&(i=this.register(t));let r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,l7(e,o,i),this.override&&bt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){let t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in bt[r]&&(delete bt[r][i],this.override&&delete Os[i])}};function l7(n,e,t){let i=Vo(Object.create(null),[t?bt.get(t):{},bt.get(e),n.defaults]);bt.set(e,i),n.defaultRoutes&&c7(e,n.defaultRoutes),n.descriptors&&bt.describe(e,n.descriptors)}function c7(n,e){Object.keys(e).forEach(t=>{let i=t.split("."),r=i.pop(),s=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");bt.route(s,r,l,a)})}function u7(n){return"id"in n&&"defaults"in n}var Tv=class{constructor(){this.controllers=new Fl(Bs,"datasets",!0),this.elements=new Fl(rn,"elements"),this.plugins=new Fl(Object,"plugins"),this.scales=new Fl(Ko,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{let s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):mt(r,o=>{let a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){let r=id(e);pt(i["before"+r],[],i),t[e](i),pt(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){let r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}},wr=new Tv,Iv=class{constructor(){this._init=[]}notify(e,t,i,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,t,i);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,r){r=r||{};for(let s of e){let o=s.plugin,a=o[i],l=[t,r,s.options];if(pt(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){st(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let i=e&&e.config,r=Be(i.options&&i.options.plugins,{}),s=d7(i);return r===!1&&!t?[]:p7(e,s,r,t)}_notifyStateChanges(e){let t=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}};function d7(n){let e={},t=[],i=Object.keys(wr.plugins.items);for(let s=0;s<i.length;s++)t.push(wr.getPlugin(i[s]));let r=n.plugins||[];for(let s=0;s<r.length;s++){let o=r[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function h7(n,e){return!e&&n===!1?null:n===!0?{}:n}function p7(n,{plugins:e,localIds:t},i,r){let s=[],o=n.getContext();for(let a of e){let l=a.id,c=h7(i[l],r);c!==null&&s.push({plugin:a,options:f7(n.config,{plugin:a,local:t[l]},c,o)})}return s}function f7(n,{plugin:e,local:t},i,r){let s=n.pluginScopeKeys(e),o=n.getOptionScopes(i,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function kv(n,e){let t=bt.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function g7(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function m7(n,e){return n===e?"_index_":"_value_"}function FT(n){if(n==="x"||n==="y"||n==="r")return n}function _7(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Pv(n,...e){if(FT(n))return n;for(let t of e){let i=t.axis||_7(t.position)||n.length>1&&FT(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function LT(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function A7(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return LT(n,"x",t[0])||LT(n,"y",t[0])}return{}}function y7(n,e){let t=Os[n.type]||{scales:{}},i=e.scales||{},r=kv(n.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{let a=i[o];if(!He(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let l=Pv(o,a,A7(o,n),bt.scales[a.type]),c=m7(l,r),u=t.scales||{};s[o]=Bo(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,l=o.indexAxis||kv(a,e),u=(Os[a]||{}).scales||{};Object.keys(u).forEach(d=>{let h=g7(d,l),p=o[h+"AxisID"]||h;s[p]=s[p]||Object.create(null),Bo(s[p],[{axis:h},i[p],u[d]])})}),Object.keys(s).forEach(o=>{let a=s[o];Bo(a,[bt.scales[a.type],bt.scale])}),s}function CI(n){let e=n.options||(n.options={});e.plugins=Be(e.plugins,{}),e.scales=y7(n,e)}function xI(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function v7(n){return n=n||{},n.data=xI(n.data),CI(n),n}var VT=new Map,DI=new Set;function Y0(n,e){let t=VT.get(n);return t||(t=e(),VT.set(n,t),DI.add(t)),t}var _d=(n,e,t)=>{let i=Ar(e,t);i!==void 0&&n.add(i)},Nv=class{constructor(e){this._config=v7(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=xI(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),CI(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Y0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Y0(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Y0(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,i=this.type;return Y0(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let i=this._scopeCache,r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){let{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;let l=new Set;t.forEach(u=>{e&&(l.add(e),u.forEach(d=>_d(l,e,d))),u.forEach(d=>_d(l,r,d)),u.forEach(d=>_d(l,Os[s]||{},d)),u.forEach(d=>_d(l,bt,d)),u.forEach(d=>_d(l,k0,d))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),DI.has(t)&&o.set(t,c),c}chartOptionScopes(){let{options:e,type:t}=this;return[e,Os[t]||{},bt.datasets[t]||{},{type:t},bt,k0]}resolveNamedOptions(e,t,i,r=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=BT(this._resolverCache,e,r),l=o;if(b7(o,t)){s.$shared=!1,i=An(i)?i():i;let c=this.createResolver(e,i,a);l=Ns(o,i,c)}for(let c of t)s[c]=l[c];return s}createResolver(e,t,i=[""],r){let{resolver:s}=BT(this._resolverCache,e,i);return He(t)?Ns(s,t,void 0,r):s}};function BT(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));let r=t.join(),s=i.get(r);return s||(s={resolver:ud(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}var w7=n=>He(n)&&Object.getOwnPropertyNames(n).some(e=>An(n[e]));function b7(n,e){let{isScriptable:t,isIndexable:i}=R0(n);for(let r of e){let s=t(r),o=i(r),a=(o||s)&&n[r];if(s&&(An(a)||w7(a))||o&&dt(a))return!0}return!1}var S7="4.4.8",C7=["top","bottom","left","right","chartArea"];function qT(n,e){return n==="top"||n==="bottom"||C7.indexOf(n)===-1&&e==="x"}function jT(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function WT(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),pt(t&&t.onComplete,[n],e)}function x7(n){let e=n.chart,t=e.options.animation;pt(t&&t.onProgress,[n],e)}function EI(n){return dd()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var Q0={},UT=n=>{let e=EI(n);return Object.values(Q0).filter(t=>t.canvas===e).pop()};function D7(n,e,t){let i=Object.keys(n);for(let r of i){let s=+r;if(s>=e){let o=n[r];delete n[r],(t>0||s>e)&&(n[s+t]=o)}}}function E7(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}function G0(n,e,t){return n.options.clip?n[t]:e[t]}function M7(n,e){let{xScale:t,yScale:i}=n;return t&&i?{left:G0(t,e,"left"),right:G0(t,e,"right"),top:G0(i,e,"top"),bottom:G0(i,e,"bottom")}:e}var br=(()=>{class n{static defaults=bt;static instances=Q0;static overrides=Os;static registry=wr;static version=S7;static getChart=UT;static register(...t){wr.add(...t),zT()}static unregister(...t){wr.remove(...t),zT()}constructor(t,i){let r=this.config=new Nv(i),s=EI(t),o=UT(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||Kj(s)),this.platform.updateConfig(r);let l=this.platform.acquireContext(s,a.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=H1(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Iv,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ev(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],Q0[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}ts.listen(this,"complete",WT),ts.listen(this,"progress",x7),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:i},width:r,height:s,_aspectRatio:o}=this;return st(t)?i&&o?o:s?r/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return wr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():V0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return P0(this.canvas,this.ctx),this}stop(){return ts.stop(this),this}resize(t,i){ts.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){let r=this.options,s=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,i,o),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,V0(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),pt(r.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};mt(i,(r,s)=>{r.id=s})}buildOrUpdateScales(){let t=this.options,i=t.scales,r=this.scales,s=Object.keys(r).reduce((a,l)=>(a[l]=!1,a),{}),o=[];i&&(o=o.concat(Object.keys(i).map(a=>{let l=i[a],c=Pv(a,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),mt(o,a=>{let l=a.options,c=l.id,u=Pv(c,l),d=Be(l.type,a.dtype);(l.position===void 0||qT(l.position,u)!==qT(a.dposition))&&(l.position=a.dposition),s[c]=!0;let h=null;if(c in r&&r[c].type===d)h=r[c];else{let p=wr.getScale(d);h=new p({id:c,type:d,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(l,t)}),mt(s,(a,l)=>{a||delete r[l]}),mt(r,a=>{Dn.configure(this,a,a.options),Dn.addBox(this,a)})}_updateMetasets(){let t=this._metasets,i=this.data.datasets.length,r=t.length;if(t.sort((s,o)=>s.index-o.index),r>i){for(let s=i;s<r;++s)this._destroyDatasetMeta(s);t.splice(i,r-i)}this._sortedMetasets=t.slice(0).sort(jT("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((r,s)=>{i.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],i=this.data.datasets,r,s;for(this._removeUnreferencedMetasets(),r=0,s=i.length;r<s;r++){let o=i[r],a=this.getDatasetMeta(r),l=o.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=l,a.indexAxis=o.indexAxis||kv(l,this.options),a.order=o.order||0,a.index=r,a.label=""+o.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{let c=wr.getController(l),{datasetElementType:u,dataElementType:d}=bt.datasets[l];Object.assign(c,{dataElementType:wr.getElement(d),datasetElementType:u&&wr.getElement(u)}),a.controller=new c(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){mt(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let i=this.config;i.update();let r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){let{controller:h}=this.getDatasetMeta(u),p=!s&&o.indexOf(h)===-1;h.buildOrUpdateElements(p),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||mt(o,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(jT("z","_idx"));let{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){mt(this.scales,t=>{Dn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,i=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!y0(i,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(let{method:r,start:s,count:o}of i){let a=r==="_removeElements"?-o:o;D7(t,s,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let i=this.data.datasets.length,r=o=>new Set(t.filter(a=>a[0]===o).map((a,l)=>l+","+a.splice(1).join(","))),s=r(0);for(let o=1;o<i;o++)if(!y0(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Dn.update(this,this.width,this.height,t);let i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],mt(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,r=this.data.datasets.length;i<r;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,An(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){let r=this.getDatasetMeta(t),s={meta:r,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ts.has(this)?this.attached&&!ts.running(this)&&ts.start(this):(this.draw(),WT({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let i=this._sortedMetasets,r=[],s,o;for(s=0,o=i.length;s<o;++s){let a=i[s];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let i=this.ctx,r=t._clip,s=!r.disabled,o=M7(t,this.chartArea),a={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(s&&Rs(i,{left:r.left===!1?0:o.left-r.left,right:r.right===!1?this.width:o.right+r.right,top:r.top===!1?0:o.top-r.top,bottom:r.bottom===!1?this.height:o.bottom+r.bottom}),t.controller.draw(),s&&Fs(i),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return Hi(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,r,s){let o=Tj.modes[i];return typeof o=="function"?o(this,t,r,s):[]}getDatasetMeta(t){let i=this.data.datasets[t],r=this._metasets,s=r.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=yr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let i=this.data.datasets[t];if(!i)return!1;let r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!i.hidden}setDatasetVisibility(t,i){let r=this.getDatasetMeta(t);r.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,r){let s=r?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,s);yn(i)?(o.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(o,{visible:r}),this.update(l=>l.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){let i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),ts.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),P0(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete Q0[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,i=this.platform,r=(o,a)=>{i.addEventListener(this,o,a),t[o]=a},s=(o,a,l)=>{o.offsetX=a,o.offsetY=l,this._eventHandler(o)};mt(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,i=this.platform,r=(c,u)=>{i.addEventListener(this,c,u),t[c]=u},s=(c,u)=>{t[c]&&(i.removeEventListener(this,c,u),delete t[c])},o=(c,u)=>{this.canvas&&this.resize(c,u)},a,l=()=>{s("attach",l),this.attached=!0,this.resize(),r("resize",o),r("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",l)},i.isAttached(this.canvas)?l():a()}unbindEvents(){mt(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},mt(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,r){let s=r?"set":"remove",o,a,l,c;for(i==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){a=t[l];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let i=this._active||[],r=t.map(({datasetIndex:o,index:a})=>{let l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[a],index:a}});!Ol(r,i)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(t,i,r){return this._plugins.notify(this,t,i,r)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,r){let s=this.options.hover,o=(c,u)=>c.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=o(i,t),l=r?t:o(t,i);a.length&&this.updateHoverStyle(a,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(t,i){let r={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;let o=this._handleEvent(t,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(t,i,r){let{_active:s=[],options:o}=this,a=i,l=this._getActiveElements(t,s,r,a),c=G1(t),u=E7(t,this._lastEvent,r,c);r&&(this._lastEvent=null,pt(o.onHover,[t,l,this],this),c&&pt(o.onClick,[t,l,this],this));let d=!Ol(l,s);return(d||i)&&(this._active=l,this._updateHoverStyles(l,s,i)),this._lastEvent=u,d}_getActiveElements(t,i,r,s){if(t.type==="mouseout")return[];if(!r)return i;let o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}return n})();function zT(){return mt(br.instances,n=>n._plugins.invalidate())}function T7(n,e,t){let{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=e,c=r/a;n.beginPath(),n.arc(s,o,a,i-c,t+c),l>r?(c=r/l,n.arc(s,o,l,t+c,i-c,!0)):n.arc(s,o,r,t+Ct,i-Ct),n.closePath(),n.clip()}function I7(n){return cd(n,["outerStart","outerEnd","innerStart","innerEnd"])}function k7(n,e,t,i){let r=I7(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,i*e/2),a=l=>{let c=(t-Math.min(s,l))*i/2;return Jt(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Jt(r.innerStart,0,o),innerEnd:Jt(r.innerEnd,0,o)}}function Rl(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function tg(n,e,t,i,r,s){let{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+i+t-c,0),h=u>0?u+i+t+c:0,p=0,g=r-l;if(i){let G=u>0?u-i:0,ae=d>0?d-i:0,ne=(G+ae)/2,De=ne!==0?g*ne/(ne+i):g;p=(g-De)/2}let A=Math.max(.001,g*d-t/rt)/d,v=(g-A)/2,b=l+v+p,E=r-v-p,{outerStart:O,outerEnd:T,innerStart:k,innerEnd:D}=k7(e,h,d,E-b),M=d-O,N=d-T,L=b+O/M,B=E-T/N,H=h+k,Z=h+D,re=b+k/H,Q=E-D/Z;if(n.beginPath(),s){let G=(L+B)/2;if(n.arc(o,a,d,L,G),n.arc(o,a,d,G,B),T>0){let ue=Rl(N,B,o,a);n.arc(ue.x,ue.y,T,B,E+Ct)}let ae=Rl(Z,E,o,a);if(n.lineTo(ae.x,ae.y),D>0){let ue=Rl(Z,Q,o,a);n.arc(ue.x,ue.y,D,E+Ct,Q+Math.PI)}let ne=(E-D/h+(b+k/h))/2;if(n.arc(o,a,h,E-D/h,ne,!0),n.arc(o,a,h,ne,b+k/h,!0),k>0){let ue=Rl(H,re,o,a);n.arc(ue.x,ue.y,k,re+Math.PI,b-Ct)}let De=Rl(M,b,o,a);if(n.lineTo(De.x,De.y),O>0){let ue=Rl(M,L,o,a);n.arc(ue.x,ue.y,O,b-Ct,L)}}else{n.moveTo(o,a);let G=Math.cos(L)*d+o,ae=Math.sin(L)*d+a;n.lineTo(G,ae);let ne=Math.cos(B)*d+o,De=Math.sin(B)*d+a;n.lineTo(ne,De)}n.closePath()}function P7(n,e,t,i,r){let{fullCircles:s,startAngle:o,circumference:a}=e,l=e.endAngle;if(s){tg(n,e,t,i,l,r);for(let c=0;c<s;++c)n.fill();isNaN(a)||(l=o+(a%At||At))}return tg(n,e,t,i,l,r),n.fill(),l}function N7(n,e,t,i,r){let{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h}=l,p=l.borderAlign==="inner";if(!c)return;n.setLineDash(d||[]),n.lineDashOffset=h,p?(n.lineWidth=c*2,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let g=e.endAngle;if(s){tg(n,e,t,i,g,r);for(let A=0;A<s;++A)n.stroke();isNaN(a)||(g=o+(a%At||At))}p&&T7(n,e,g),s||(tg(n,e,t,i,g,r),n.stroke())}var Ov=class extends rn{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){let r=this.getProps(["x","y"],i),{angle:s,distance:o}=Wo(r,{x:e,y:t}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),h=(this.options.spacing+this.options.borderWidth)/2,p=Be(d,l-a),g=Uo(s,a,l)&&a!==l,A=p>=At||g,v=Ki(o,c+h,u+h);return A&&v}getCenterPoint(e){let{x:t,y:i,startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:c}=this.options,u=(r+s)/2,d=(o+a+c+l)/2;return{x:t+Math.cos(u)*d,y:i+Math.sin(u)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:i}=this,r=(t.offset||0)/4,s=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>At?Math.floor(i/At):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);let l=1-Math.sin(Math.min(rt,i||0)),c=r*l;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,P7(e,this,c,s,o),N7(e,this,c,s,o),e.restore()}};function MI(n,e,t=e){n.lineCap=Be(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Be(t.borderDash,e.borderDash)),n.lineDashOffset=Be(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Be(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Be(t.borderWidth,e.borderWidth),n.strokeStyle=Be(t.borderColor,e.borderColor)}function O7(n,e,t){n.lineTo(t.x,t.y)}function R7(n){return n.stepped?iv:n.tension||n.cubicInterpolationMode==="monotone"?rv:O7}function TI(n,e,t={}){let i=n.length,{start:r=0,end:s=i-1}=t,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function F7(n,e,t,i){let{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=TI(r,t,i),u=R7(s),{move:d=!0,reverse:h}=i||{},p,g,A;for(p=0;p<=c;++p)g=r[(a+(h?c-p:p))%o],!g.skip&&(d?(n.moveTo(g.x,g.y),d=!1):u(n,A,g,h,s.stepped),A=g);return l&&(g=r[(a+(h?c:0))%o],u(n,A,g,h,s.stepped)),!!l}function L7(n,e,t,i){let r=e.points,{count:s,start:o,ilen:a}=TI(r,t,i),{move:l=!0,reverse:c}=i||{},u=0,d=0,h,p,g,A,v,b,E=T=>(o+(c?a-T:T))%s,O=()=>{A!==v&&(n.lineTo(u,v),n.lineTo(u,A),n.lineTo(u,b))};for(l&&(p=r[E(0)],n.moveTo(p.x,p.y)),h=0;h<=a;++h){if(p=r[E(h)],p.skip)continue;let T=p.x,k=p.y,D=T|0;D===g?(k<A?A=k:k>v&&(v=k),u=(d*u+T)/++d):(O(),n.lineTo(T,k),g=D,d=0,A=v=k),b=k}O()}function Rv(n){let e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?L7:F7}function V7(n){return n.stepped?dv:n.tension||n.cubicInterpolationMode==="monotone"?hv:$r}function B7(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),MI(n,e.options),n.stroke(r)}function q7(n,e,t,i){let{segments:r,options:s}=e,o=Rv(e);for(let a of r)MI(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}var j7=typeof Path2D=="function";function W7(n,e,t,i){j7&&!e.options.segment?B7(n,e,t,i):q7(n,e,t,i)}var rg=(()=>{class n extends rn{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let s=r.spanGaps?this._loop:this._fullLoop;lv(this._points,r,t,s,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=pv(this,this.options.segment))}first(){let t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){let t=this.segments,i=this.points,r=t.length;return r&&i[t[r-1].end]}interpolate(t,i){let r=this.options,s=t[i],o=this.points,a=U0(this,{property:i,start:s,end:s});if(!a.length)return;let l=[],c=V7(r),u,d;for(u=0,d=a.length;u<d;++u){let{start:h,end:p}=a[u],g=o[h],A=o[p];if(g===A){l.push(g);continue}let v=Math.abs((s-g[i])/(A[i]-g[i])),b=c(g,A,v,r.stepped);b[i]=t[i],l.push(b)}return l.length===1?l[0]:l}pathSegment(t,i,r){return Rv(this)(t,this,i,r)}path(t,i,r){let s=this.segments,o=Rv(this),a=this._loop;i=i||0,r=r||this.points.length-i;for(let l of s)a&=o(t,this,l,{start:i,end:i+r-1});return!!a}draw(t,i,r,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),W7(t,this,r,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function HT(n,e,t,i){let r=n.options,{[t]:s}=n.getProps([t],i);return Math.abs(e-s)<r.radius+r.hitRadius}var U7=(()=>{class n extends rn{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,r){let s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(t-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return HT(this,t,"x",i)}inYRange(t,i){return HT(this,t,"y",i)}getCenterPoint(t){let{x:i,y:r}=this.getProps(["x","y"],t);return{x:i,y:r}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);let r=i&&t.borderWidth||0;return(i+r)*2}draw(t,i){let r=this.options;this.skip||r.radius<.1||!Hi(this,i,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,ld(t,r,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n})();function II(n,e){let{x:t,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],e),a,l,c,u,d;return n.horizontal?(d=o/2,a=Math.min(t,r),l=Math.max(t,r),c=i-d,u=i+d):(d=s/2,a=t-d,l=t+d,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function Vs(n,e,t,i){return n?0:Jt(e,t,i)}function z7(n,e,t){let i=n.options.borderWidth,r=n.borderSkipped,s=O0(i);return{t:Vs(r.top,s.top,0,t),r:Vs(r.right,s.right,0,e),b:Vs(r.bottom,s.bottom,0,t),l:Vs(r.left,s.left,0,e)}}function H7(n,e,t){let{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=$i(r),o=Math.min(e,t),a=n.borderSkipped,l=i||He(r);return{topLeft:Vs(!l||a.top||a.left,s.topLeft,0,o),topRight:Vs(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Vs(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Vs(!l||a.bottom||a.right,s.bottomRight,0,o)}}function Y7(n){let e=II(n),t=e.right-e.left,i=e.bottom-e.top,r=z7(n,t/2,i/2),s=H7(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function wv(n,e,t,i){let r=e===null,s=t===null,a=n&&!(r&&s)&&II(n,i);return a&&(r||Ki(e,a.left,a.right))&&(s||Ki(t,a.top,a.bottom))}function G7(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function K7(n,e){n.rect(e.x,e.y,e.w,e.h)}function bv(n,e,t={}){let i=n.x!==t.x?-e:0,r=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-i,o=(n.y+n.h!==t.y+t.h?e:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+o,radius:n.radius}}var Fv=class extends rn{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=Y7(this),a=G7(o.radius)?Jr:K7;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,bv(o,t,s)),e.clip(),a(e,bv(s,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,bv(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,i){return wv(this,e,t,i)}inXRange(e,t){return wv(this,e,null,t)}inYRange(e,t){return wv(this,null,e,t)}getCenterPoint(e){let{x:t,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}},$7=Object.freeze({__proto__:null,ArcElement:Ov,BarElement:Fv,LineElement:rg,PointElement:U7}),Lv=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],YT=Lv.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function kI(n){return Lv[n%Lv.length]}function PI(n){return YT[n%YT.length]}function Z7(n,e){return n.borderColor=kI(e),n.backgroundColor=PI(e),++e}function X7(n,e){return n.backgroundColor=n.data.map(()=>kI(e++)),e}function Q7(n,e){return n.backgroundColor=n.data.map(()=>PI(e++)),e}function J7(n){let e=0;return(t,i)=>{let r=n.getDatasetMeta(i).controller;r instanceof Sd?e=X7(t,e):r instanceof yI?e=Q7(t,e):r&&(e=Z7(t,e))}}function GT(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function eW(n){return n&&(n.borderColor||n.backgroundColor)}function tW(){return bt.borderColor!=="rgba(0,0,0,0.1)"||bt.backgroundColor!=="rgba(0,0,0,0.1)"}var nW={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;let{data:{datasets:i},options:r}=n.config,{elements:s}=r,o=GT(i)||eW(r)||s&&GT(s)||tW();if(!t.forceOverride&&o)return;let a=J7(n);i.forEach(a)}};function iW(n,e,t,i,r){let s=r.samples||i;if(s>=t)return n.slice(e,e+t);let o=[],a=(t-2)/(s-2),l=0,c=e+t-1,u=e,d,h,p,g,A;for(o[l++]=n[u],d=0;d<s-2;d++){let v=0,b=0,E,O=Math.floor((d+1)*a)+1+e,T=Math.min(Math.floor((d+2)*a)+1,t)+e,k=T-O;for(E=O;E<T;E++)v+=n[E].x,b+=n[E].y;v/=k,b/=k;let D=Math.floor(d*a)+1+e,M=Math.min(Math.floor((d+1)*a)+1,t)+e,{x:N,y:L}=n[u];for(p=g=-1,E=D;E<M;E++)g=.5*Math.abs((N-v)*(n[E].y-L)-(N-n[E].x)*(b-L)),g>p&&(p=g,h=n[E],A=E);o[l++]=h,u=A}return o[l++]=n[c],o}function rW(n,e,t,i){let r=0,s=0,o,a,l,c,u,d,h,p,g,A,v=[],b=e+t-1,E=n[e].x,T=n[b].x-E;for(o=e;o<e+t;++o){a=n[o],l=(a.x-E)/T*i,c=a.y;let k=l|0;if(k===u)c<g?(g=c,d=o):c>A&&(A=c,h=o),r=(s*r+a.x)/++s;else{let D=o-1;if(!st(d)&&!st(h)){let M=Math.min(d,h),N=Math.max(d,h);M!==p&&M!==D&&v.push(Ie(ie({},n[M]),{x:r})),N!==p&&N!==D&&v.push(Ie(ie({},n[N]),{x:r}))}o>0&&D!==p&&v.push(n[D]),v.push(a),u=k,s=0,g=A=c,d=h=p=o}}return v}function NI(n){if(n._decimated){let e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function KT(n){n.data.datasets.forEach(e=>{NI(e)})}function sW(n,e){let t=e.length,i=0,r,{iScale:s}=n,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=Jt(zi(e,s.axis,o).lo,0,t-1)),c?r=Jt(zi(e,s.axis,a).hi+1,i,t)-i:r=t-i,{start:i,count:r}}var oW={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){KT(n);return}let i=n.width;n.data.datasets.forEach((r,s)=>{let{_data:o,indexAxis:a}=r,l=n.getDatasetMeta(s),c=o||r.data;if(Ho([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let u=n.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:d,count:h}=sW(l,c),p=t.threshold||4*i;if(h<=p){NI(r);return}st(o)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(A){this._data=A}}));let g;switch(t.algorithm){case"lttb":g=iW(c,d,h,i,t);break;case"min-max":g=rW(c,d,h,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}r._decimated=g})},destroy(n){KT(n)}};function aW(n,e,t){let i=n.segments,r=n.points,s=e.points,o=[];for(let a of i){let{start:l,end:c}=a;c=Hv(l,c,r);let u=Vv(t,r[l],r[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:r[l],end:r[c]});continue}let d=U0(e,u);for(let h of d){let p=Vv(t,s[h.start],s[h.end],h.loop),g=W0(a,r,p);for(let A of g)o.push({source:A,target:h,start:{[t]:$T(u,p,"start",Math.max)},end:{[t]:$T(u,p,"end",Math.min)}})}}return o}function Vv(n,e,t,i){if(i)return;let r=e[n],s=t[n];return n==="angle"&&(r=Fn(r),s=Fn(s)),{property:n,start:r,end:s}}function lW(n,e){let{x:t=null,y:i=null}=n||{},r=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=Hv(o,a,r);let l=r[o],c=r[a];i!==null?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):t!==null&&(s.push({x:t,y:l.y}),s.push({x:t,y:c.y}))}),s}function Hv(n,e,t){for(;e>n;e--){let i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function $T(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function OI(n,e){let t=[],i=!1;return dt(n)?(i=!0,t=n):t=lW(n,e),t.length?new rg({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function ZT(n){return n&&n.fill!==!1}function cW(n,e,t){let r=n[e].fill,s=[e],o;if(!t)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Dt(r))return r;if(o=n[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function uW(n,e,t){let i=fW(n);if(He(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Dt(r)&&Math.floor(r)===r?dW(i[0],e,r,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function dW(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function hW(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:He(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function pW(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:He(n)?i=n.value:i=e.getBaseValue(),i}function fW(n){let e=n.options,t=e.fill,i=Be(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function gW(n){let{scale:e,index:t,line:i}=n,r=[],s=i.segments,o=i.points,a=mW(e,t);a.push(OI({x:null,y:e.bottom},i));for(let l=0;l<s.length;l++){let c=s[l];for(let u=c.start;u<=c.end;u++)_W(r,o[u],a)}return new rg({points:r,options:{}})}function mW(n,e){let t=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){let s=i[r];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function _W(n,e,t){let i=[];for(let r=0;r<t.length;r++){let s=t[r],{first:o,last:a,point:l}=AW(s,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(n.push(l),!a)break}}n.push(...i)}function AW(n,e,t){let i=n.interpolate(e,t);if(!i)return{};let r=i[t],s=n.segments,o=n.points,a=!1,l=!1;for(let c=0;c<s.length;c++){let u=s[c],d=o[u.start][t],h=o[u.end][t];if(Ki(r,d,h)){a=r===d,l=r===h;break}}return{first:a,last:l,point:i}}var ng=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){let{x:r,y:s,radius:o}=this;return t=t||{start:0,end:At},e.arc(r,s,o,t.end,t.start,!0),!i.bounds}interpolate(e){let{x:t,y:i,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}};function yW(n){let{chart:e,fill:t,line:i}=n;if(Dt(t))return vW(e,t);if(t==="stack")return gW(n);if(t==="shape")return!0;let r=wW(n);return r instanceof ng?r:OI(r,i)}function vW(n,e){let t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function wW(n){return(n.scale||{}).getPointPositionForValue?SW(n):bW(n)}function bW(n){let{scale:e={},fill:t}=n,i=hW(t,e);if(Dt(i)){let r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function SW(n){let{scale:e,fill:t}=n,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=pW(t,e,s),a=[];if(i.grid.circular){let l=e.getPointPositionForValue(0,s);return new ng({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(e.getPointPositionForValue(l,o));return a}function Sv(n,e,t){let i=yW(e),{line:r,scale:s,axis:o}=e,a=r.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:d=c}=l||{};i&&r.points.length&&(Rs(n,t),CW(n,{line:r,target:i,above:u,below:d,area:t,scale:s,axis:o}),Fs(n))}function CW(n,e){let{line:t,target:i,above:r,below:s,area:o,scale:a}=e,l=t._loop?"angle":e.axis;n.save(),l==="x"&&s!==r&&(XT(n,i,o.top),QT(n,{line:t,target:i,color:r,scale:a,property:l}),n.restore(),n.save(),XT(n,i,o.bottom)),QT(n,{line:t,target:i,color:s,scale:a,property:l}),n.restore()}function XT(n,e,t){let{segments:i,points:r}=e,s=!0,o=!1;n.beginPath();for(let a of i){let{start:l,end:c}=a,u=r[l],d=r[Hv(l,c,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function QT(n,e){let{line:t,target:i,property:r,color:s,scale:o}=e,a=aW(t,i,r);for(let{source:l,target:c,start:u,end:d}of a){let{style:{backgroundColor:h=s}={}}=l,p=i!==!0;n.save(),n.fillStyle=h,xW(n,o,p&&Vv(r,u,d)),n.beginPath();let g=!!t.pathSegment(n,l),A;if(p){g?n.closePath():JT(n,i,d,r);let v=!!i.pathSegment(n,c,{move:g,reverse:!0});A=g&&v,A||JT(n,i,u,r)}n.closePath(),n.fill(A?"evenodd":"nonzero"),n.restore()}}function xW(n,e,t){let{top:i,bottom:r}=e.chart.chartArea,{property:s,start:o,end:a}=t||{};s==="x"&&(n.beginPath(),n.rect(o,i,a-o,r-i),n.clip())}function JT(n,e,t,i){let r=e.interpolate(t,i);r&&n.lineTo(r.x,r.y)}var DW={id:"filler",afterDatasetsUpdate(n,e,t){let i=(n.data.datasets||[]).length,r=[],s,o,a,l;for(o=0;o<i;++o)s=n.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof rg&&(l={visible:n.isDatasetVisible(o),index:o,fill:uW(a,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=cW(r,o,t.propagate))},beforeDraw(n,e,t){let i=t.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=r.length-1;o>=0;--o){let a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&Sv(n.ctx,a,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){let s=i[r].$filler;ZT(s)&&Sv(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){let i=e.meta.$filler;!ZT(i)||t.drawTime!=="beforeDatasetDraw"||Sv(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},eI=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},EW=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,ig=class extends rn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=pt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let i=e.labels,r=Ot(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=eI(i,s),c,u;t.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a,d=e;s.textAlign="left",s.textBaseline="middle";let h=-1,p=-u;return this.legendItems.forEach((g,A)=>{let v=i+t/2+s.measureText(g.text).width;(A===0||c[c.length-1]+v+2*a>o)&&(d+=u,c[c.length-(A>0?0:1)]=0,p+=u,h++),l[A]={left:0,top:p,row:h,width:v,height:r},c[c.length-1]+=v+a}),d}_fitCols(e,t,i,r){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e,d=a,h=0,p=0,g=0,A=0;return this.legendItems.forEach((v,b)=>{let{itemWidth:E,itemHeight:O}=MW(i,t,s,v,r);b>0&&p+O+2*a>u&&(d+=h+a,c.push({width:h,height:p}),g+=h+a,A++,h=p=0),l[b]={left:g,top:p,col:A,width:E,height:O},h=Math.max(h,E),p+=O+a}),d+=h,c.push({width:h,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Ls(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=cn(i,this.left+r,this.right-this.lineWidths[a]);for(let c of t)a!==c.row&&(a=c.row,l=cn(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=cn(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(let c of t)c.col!==a&&(a=c.col,l=cn(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;Rs(e,this),this._draw(),Fs(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=bt.color,l=Ls(e.rtl,this.left,this.width),c=Ot(o.font),{padding:u}=o,d=c.size,h=d/2,p;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;let{boxWidth:g,boxHeight:A,itemHeight:v}=eI(o,d),b=function(D,M,N){if(isNaN(g)||g<=0||isNaN(A)||A<0)return;r.save();let L=Be(N.lineWidth,1);if(r.fillStyle=Be(N.fillStyle,a),r.lineCap=Be(N.lineCap,"butt"),r.lineDashOffset=Be(N.lineDashOffset,0),r.lineJoin=Be(N.lineJoin,"miter"),r.lineWidth=L,r.strokeStyle=Be(N.strokeStyle,a),r.setLineDash(Be(N.lineDash,[])),o.usePointStyle){let B={radius:A*Math.SQRT2/2,pointStyle:N.pointStyle,rotation:N.rotation,borderWidth:L},H=l.xPlus(D,g/2),Z=M+h;N0(r,B,H,Z,o.pointStyleWidth&&g)}else{let B=M+Math.max((d-A)/2,0),H=l.leftForLtr(D,g),Z=$i(N.borderRadius);r.beginPath(),Object.values(Z).some(re=>re!==0)?Jr(r,{x:H,y:B,w:g,h:A,radius:Z}):r.rect(H,B,g,A),r.fill(),L!==0&&r.stroke()}r.restore()},E=function(D,M,N){Qr(r,N.text,D,M+v/2,c,{strikethrough:N.hidden,textAlign:l.textAlign(N.textAlign)})},O=this.isHorizontal(),T=this._computeTitleHeight();O?p={x:cn(s,this.left+u,this.right-i[0]),y:this.top+u+T,line:0}:p={x:this.left+u,y:cn(s,this.top+T+u,this.bottom-t[0].height),line:0},q0(this.ctx,e.textDirection);let k=v+u;this.legendItems.forEach((D,M)=>{r.strokeStyle=D.fontColor,r.fillStyle=D.fontColor;let N=r.measureText(D.text).width,L=l.textAlign(D.textAlign||(D.textAlign=o.textAlign)),B=g+h+N,H=p.x,Z=p.y;l.setWidth(this.width),O?M>0&&H+B+u>this.right&&(Z=p.y+=k,p.line++,H=p.x=cn(s,this.left+u,this.right-i[p.line])):M>0&&Z+k>this.bottom&&(H=p.x=H+t[p.line].width+u,p.line++,Z=p.y=cn(s,this.top+T+u,this.bottom-t[p.line].height));let re=l.x(H);if(b(re,Z,D),H=tv(L,H+g+h,O?H+B:this.right,e.rtl),E(l.x(H),Z,D),O)p.x+=B+u;else if(typeof D.text!="string"){let Q=c.lineHeight;p.y+=RI(D,Q)+u}else p.y+=k}),j0(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,i=Ot(t.font),r=jt(t.padding);if(!t.display)return;let s=Ls(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=i.size/2,c=r.top+l,u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=cn(e.align,d,this.right-h);else{let g=this.columnSizes.reduce((A,v)=>Math.max(A,v.height),0);u=c+cn(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}let p=cn(a,d,d+h);o.textAlign=s.textAlign(od(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,Qr(o,t.text,p,u,i)}_computeTitleHeight(){let e=this.options.title,t=Ot(e.font),i=jt(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,s;if(Ki(e,this.left,this.right)&&Ki(t,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Ki(e,r.left,r.left+r.width)&&Ki(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){let t=this.options;if(!kW(e.type,t))return;let i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let r=this._hoveredItem,s=EW(r,i);r&&!s&&pt(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&pt(t.onHover,[e,i,this],this)}else i&&pt(t.onClick,[e,i,this],this)}};function MW(n,e,t,i,r){let s=TW(i,n,e,t),o=IW(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function TW(n,e,t,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+i.measureText(r).width}function IW(n,e,t){let i=n;return typeof e.text!="string"&&(i=RI(e,t)),i}function RI(n,e){let t=n.text?n.text.length:0;return e*t}function kW(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var PW={id:"legend",_element:ig,start(n,e,t){let i=n.legend=new ig({ctx:n.ctx,options:t,chart:n});Dn.configure(n,i,t),Dn.addBox(n,i)},stop(n){Dn.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let i=n.legend;Dn.configure(n,i,t),i.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{let c=l.controller.getStyle(t?0:void 0),u=jt(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},wd=class extends rn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let r=dt(i.text)?i.text.length:1;this._padding=jt(i.padding);let s=r*Ot(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:i,bottom:r,right:s,options:o}=this,a=o.align,l=0,c,u,d;return this.isHorizontal()?(u=cn(a,i,s),d=t+e,c=s-i):(o.position==="left"?(u=i+e,d=cn(a,r,t),l=rt*-.5):(u=s-e,d=cn(a,t,r),l=rt*.5),c=r-t),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let i=Ot(t.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Qr(e,t.text,0,0,i,{color:t.color,maxWidth:l,rotation:c,textAlign:od(t.align),textBaseline:"middle",translation:[o,a]})}};function NW(n,e){let t=new wd({ctx:n.ctx,options:e,chart:n});Dn.configure(n,t,e),Dn.addBox(n,t),n.titleBlock=t}var OW={id:"title",_element:wd,start(n,e,t){NW(n,t)},stop(n){let e=n.titleBlock;Dn.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){let i=n.titleBlock;Dn.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},K0=new WeakMap,RW={id:"subtitle",start(n,e,t){let i=new wd({ctx:n.ctx,options:t,chart:n});Dn.configure(n,i,t),Dn.addBox(n,i),K0.set(n,i)},stop(n){Dn.removeBox(n,K0.get(n)),K0.delete(n)},beforeUpdate(n,e,t){let i=K0.get(n);Dn.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},yd={average(n){if(!n.length)return!1;let e,t,i=new Set,r=0,s=0;for(e=0,t=n.length;e<t;++e){let a=n[e].element;if(a&&a.hasValue()){let l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){let l=n[s].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),u=Zr(e,c);u<r&&(r=u,a=l)}}if(a){let l=a.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function vr(n,e){return e&&(dt(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function ns(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function FW(n,e){let{element:t,datasetIndex:i,index:r}=e,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function tI(n,e){let t=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=e,l=Ot(e.bodyFont),c=Ot(e.titleFont),u=Ot(e.footerFont),d=s.length,h=r.length,p=i.length,g=jt(e.padding),A=g.height,v=0,b=i.reduce((T,k)=>T+k.before.length+k.lines.length+k.after.length,0);if(b+=n.beforeBody.length+n.afterBody.length,d&&(A+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),b){let T=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;A+=p*T+(b-p)*l.lineHeight+(b-1)*e.bodySpacing}h&&(A+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let E=0,O=function(T){v=Math.max(v,t.measureText(T).width+E)};return t.save(),t.font=c.string,mt(n.title,O),t.font=l.string,mt(n.beforeBody.concat(n.afterBody),O),E=e.displayColors?o+2+e.boxPadding:0,mt(i,T=>{mt(T.before,O),mt(T.lines,O),mt(T.after,O)}),E=0,t.font=u.string,mt(n.footer,O),t.restore(),v+=g.width,{width:v,height:A}}function LW(n,e){let{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function VW(n,e,t,i){let{x:r,width:s}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&r+s+o>e.width||n==="right"&&r-s-o<0)return!0}function BW(n,e,t,i){let{x:r,width:s}=t,{width:o,chartArea:{left:a,right:l}}=n,c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),VW(c,n,e,t)&&(c="center"),c}function nI(n,e,t){let i=t.yAlign||e.yAlign||LW(n,t);return{xAlign:t.xAlign||e.xAlign||BW(n,e,t,i),yAlign:i}}function qW(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function jW(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function iI(n,e,t,i){let{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,c=r+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=$i(o),g=qW(e,a),A=jW(e,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,h)+r:a==="right"&&(g+=Math.max(d,p)+r),{x:Jt(g,0,i.width-e.width),y:Jt(A,0,i.height-e.height)}}function $0(n,e,t){let i=jt(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function rI(n){return vr([],ns(n))}function WW(n,e,t){return yr(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function sI(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var FI={beforeTitle:Yi,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:Yi,beforeBody:Yi,beforeLabel:Yi,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return st(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Yi,afterBody:Yi,beforeFooter:Yi,footer:Yi,afterFooter:Yi};function Qn(n,e,t,i){let r=n[e].call(t,i);return typeof r>"u"?FI[e].call(t,i):r}var oI=(()=>{class n extends rn{static positioners=yd;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let i=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&i.options.animation&&r.animations,o=new Ll(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=WW(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){let{callbacks:r}=i,s=Qn(r,"beforeTitle",this,t),o=Qn(r,"title",this,t),a=Qn(r,"afterTitle",this,t),l=[];return l=vr(l,ns(s)),l=vr(l,ns(o)),l=vr(l,ns(a)),l}getBeforeBody(t,i){return rI(Qn(i.callbacks,"beforeBody",this,t))}getBody(t,i){let{callbacks:r}=i,s=[];return mt(t,o=>{let a={before:[],lines:[],after:[]},l=sI(r,o);vr(a.before,ns(Qn(l,"beforeLabel",this,o))),vr(a.lines,Qn(l,"label",this,o)),vr(a.after,ns(Qn(l,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(t,i){return rI(Qn(i.callbacks,"afterBody",this,t))}getFooter(t,i){let{callbacks:r}=i,s=Qn(r,"beforeFooter",this,t),o=Qn(r,"footer",this,t),a=Qn(r,"afterFooter",this,t),l=[];return l=vr(l,ns(s)),l=vr(l,ns(o)),l=vr(l,ns(a)),l}_createItems(t){let i=this._active,r=this.chart.data,s=[],o=[],a=[],l=[],c,u;for(c=0,u=i.length;c<u;++c)l.push(FW(this.chart,i[c]));return t.filter&&(l=l.filter((d,h,p)=>t.filter(d,h,p,r))),t.itemSort&&(l=l.sort((d,h)=>t.itemSort(d,h,r))),mt(l,d=>{let h=sI(t.callbacks,d);s.push(Qn(h,"labelColor",this,d)),o.push(Qn(h,"labelPointStyle",this,d)),a.push(Qn(h,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(t,i){let r=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let l=yd[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);let c=this._size=tI(this,r),u=Object.assign({},l,c),d=nI(this.chart,r,u),h=iI(r,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,r,s){let o=this.getCaretPosition(t,r,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(t,i,r){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:l}=r,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:h}=$i(l),{x:p,y:g}=t,{width:A,height:v}=i,b,E,O,T,k,D;return o==="center"?(k=g+v/2,s==="left"?(b=p,E=b-a,T=k+a,D=k-a):(b=p+A,E=b+a,T=k-a,D=k+a),O=b):(s==="left"?E=p+Math.max(c,d)+a:s==="right"?E=p+A-Math.max(u,h)-a:E=this.caretX,o==="top"?(T=g,k=T-a,b=E-a,O=E+a):(T=g+v,k=T+a,b=E+a,O=E-a),D=T),{x1:b,x2:E,x3:O,y1:T,y2:k,y3:D}}drawTitle(t,i,r){let s=this.title,o=s.length,a,l,c;if(o){let u=Ls(r.rtl,this.x,this.width);for(t.x=$0(this,r.titleAlign,r),i.textAlign=u.textAlign(r.titleAlign),i.textBaseline="middle",a=Ot(r.titleFont),l=r.titleSpacing,i.fillStyle=r.titleColor,i.font=a.string,c=0;c<o;++c)i.fillText(s[c],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+l,c+1===o&&(t.y+=r.titleMarginBottom-l)}}_drawColorBox(t,i,r,s,o){let a=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:u}=o,d=Ot(o.bodyFont),h=$0(this,"left",o),p=s.x(h),g=c<d.lineHeight?(d.lineHeight-c)/2:0,A=i.y+g;if(o.usePointStyle){let v={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=s.leftForLtr(p,u)+u/2,E=A+c/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,ld(t,v,b,E),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,ld(t,v,b,E)}else{t.lineWidth=He(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let v=s.leftForLtr(p,u),b=s.leftForLtr(s.xPlus(p,1),u-2),E=$i(a.borderRadius);Object.values(E).some(O=>O!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Jr(t,{x:v,y:A,w:u,h:c,radius:E}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Jr(t,{x:b,y:A+1,w:u-2,h:c-2,radius:E}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(v,A,u,c),t.strokeRect(v,A,u,c),t.fillStyle=a.backgroundColor,t.fillRect(b,A+1,u-2,c-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,i,r){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=r,h=Ot(r.bodyFont),p=h.lineHeight,g=0,A=Ls(r.rtl,this.x,this.width),v=function(L){i.fillText(L,A.x(t.x+g),t.y+p/2),t.y+=p+o},b=A.textAlign(a),E,O,T,k,D,M,N;for(i.textAlign=a,i.textBaseline="middle",i.font=h.string,t.x=$0(this,b,r),i.fillStyle=r.bodyColor,mt(this.beforeBody,v),g=l&&b!=="right"?a==="center"?u/2+d:u+2+d:0,k=0,M=s.length;k<M;++k){for(E=s[k],O=this.labelTextColors[k],i.fillStyle=O,mt(E.before,v),T=E.lines,l&&T.length&&(this._drawColorBox(i,t,k,A,r),p=Math.max(h.lineHeight,c)),D=0,N=T.length;D<N;++D)v(T[D]),p=h.lineHeight;mt(E.after,v)}g=0,p=h.lineHeight,mt(this.afterBody,v),t.y-=o}drawFooter(t,i,r){let s=this.footer,o=s.length,a,l;if(o){let c=Ls(r.rtl,this.x,this.width);for(t.x=$0(this,r.footerAlign,r),t.y+=r.footerMarginTop,i.textAlign=c.textAlign(r.footerAlign),i.textBaseline="middle",a=Ot(r.footerFont),i.fillStyle=r.footerColor,i.font=a.string,l=0;l<o;++l)i.fillText(s[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,i,r,s){let{xAlign:o,yAlign:a}=this,{x:l,y:c}=t,{width:u,height:d}=r,{topLeft:h,topRight:p,bottomLeft:g,bottomRight:A}=$i(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(l+h,c),a==="top"&&this.drawCaret(t,i,r,s),i.lineTo(l+u-p,c),i.quadraticCurveTo(l+u,c,l+u,c+p),a==="center"&&o==="right"&&this.drawCaret(t,i,r,s),i.lineTo(l+u,c+d-A),i.quadraticCurveTo(l+u,c+d,l+u-A,c+d),a==="bottom"&&this.drawCaret(t,i,r,s),i.lineTo(l+g,c+d),i.quadraticCurveTo(l,c+d,l,c+d-g),a==="center"&&o==="left"&&this.drawCaret(t,i,r,s),i.lineTo(l,c+h),i.quadraticCurveTo(l,c,l+h,c),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){let i=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){let a=yd[t.position].call(this,this._active,this._eventPosition);if(!a)return;let l=this._size=tI(this,t),c=Object.assign({},a,this._size),u=nI(i,t,c),d=iI(t,c,u,i);(s._to!==d.x||o._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){let i=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(i);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let a=jt(i.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&l&&(t.save(),t.globalAlpha=r,this.drawBackground(o,t,s,i),q0(t,i.textDirection),o.y+=a.top,this.drawTitle(o,t,i),this.drawBody(o,t,i),this.drawFooter(o,t,i),j0(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){let r=this._active,s=t.map(({datasetIndex:l,index:c})=>{let u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),o=!Ol(r,s),a=this._positionChanged(s,i);(o||a)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(t,o,i,r),l=this._positionChanged(a,t),c=i||!Ol(a,o)||l;return c&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),c}_getActiveElements(t,i,r,s){let o=this.options;if(t.type==="mouseout")return[];if(!s)return i.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,o.mode,o,r);return o.reverse&&a.reverse(),a}_positionChanged(t,i){let{caretX:r,caretY:s,options:o}=this,a=yd[o.position].call(this,t,i);return a!==!1&&(r!==a.x||s!==a.y)}}return n})(),UW={id:"tooltip",_element:oI,positioners:yd,afterInit(n,e,t){t&&(n.tooltip=new oI({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",Ie(ie({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:FI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},zW=Object.freeze({__proto__:null,Colors:nW,Decimation:oW,Filler:DW,Legend:PW,SubTitle:RW,Title:OW,Tooltip:UW}),HW=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function YW(n,e,t,i){let r=n.indexOf(e);if(r===-1)return HW(n,e,t,i);let s=n.lastIndexOf(e);return r!==s?t:r}var GW=(n,e)=>n===null?null:Jt(Math.round(n),0,e);function aI(n){let e=this.getLabels();return n>=0&&n<e.length?e[n]:n}var KW=(()=>{class n extends Ko{static id="category";static defaults={ticks:{callback:aI}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let i=this._addedLabels;if(i.length){let r=this.getLabels();for(let{index:s,label:o}of i)r[s]===o&&r.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(st(t))return null;let r=this.getLabels();return i=isFinite(i)&&r[i]===t?i:YW(r,t,Be(i,t),this._addedLabels),GW(i,r.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),i||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){let t=this.min,i=this.max,r=this.options.offset,s=[],o=this.getLabels();o=t===0&&i===o.length-1?o:o.slice(t,i+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=t;a<=i;a++)s.push({value:a});return s}getLabelForValue(t){return aI.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function $W(n,e){let t=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=n,p=s||1,g=u-1,{min:A,max:v}=e,b=!st(o),E=!st(a),O=!st(c),T=(v-A)/(d+1),k=v0((v-A)/g/p)*p,D,M,N,L;if(k<1e-14&&!b&&!E)return[{value:A},{value:v}];L=Math.ceil(v/k)-Math.floor(A/k),L>g&&(k=v0(L*k/g/p)*p),st(l)||(D=Math.pow(10,l),k=Math.ceil(k*D)/D),r==="ticks"?(M=Math.floor(A/k)*k,N=Math.ceil(v/k)*k):(M=A,N=v),b&&E&&s&&$1((a-o)/s,k/1e3)?(L=Math.round(Math.min((a-o)/k,u)),k=(a-o)/L,M=o,N=a):O?(M=b?o:M,N=E?a:N,L=c-1,k=(N-M)/L):(L=(N-M)/k,qo(L,Math.round(L),k/1e3)?L=Math.round(L):L=Math.ceil(L));let B=Math.max(b0(k),b0(M));D=Math.pow(10,st(l)?B:l),M=Math.round(M*D)/D,N=Math.round(N*D)/D;let H=0;for(b&&(h&&M!==o?(t.push({value:o}),M<o&&H++,qo(Math.round((M+H*k)*D)/D,o,lI(o,T,n))&&H++):M<o&&H++);H<L;++H){let Z=Math.round((M+H*k)*D)/D;if(E&&Z>a)break;t.push({value:Z})}return E&&h&&N!==a?t.length&&qo(t[t.length-1].value,a,lI(a,T,n))?t[t.length-1].value=a:t.push({value:a}):(!E||N===a)&&t.push({value:N}),t}function lI(n,e,{horizontal:t,minRotation:i}){let r=qt(i),s=(t?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}var Vl=class extends Ko{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return st(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this,o=l=>r=t?r:l,a=l=>s=i?s:l;if(e){let l=Si(r),c=Si(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,i=this.getTickLimit();i=Math.max(2,i);let r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=$W(r,s);return e.bounds==="ticks"&&w0(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let e=this.ticks,t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){let r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return zo(e,this.chart.options.locale,this.options.ticks.format)}},Bv=class extends Vl{static id="linear";static defaults={ticks:{callback:ad.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Dt(e)?e:0,this.max=Dt(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,i=qt(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},bd=n=>Math.floor(_r(n)),Go=(n,e)=>Math.pow(10,bd(n)+e);function cI(n){return n/Math.pow(10,bd(n))===1}function uI(n,e,t){let i=Math.pow(10,t),r=Math.floor(n/i);return Math.ceil(e/i)-r}function ZW(n,e){let t=e-n,i=bd(t);for(;uI(n,e,i)>10;)i++;for(;uI(n,e,i)<10;)i--;return Math.min(i,bd(n))}function XW(n,{min:e,max:t}){e=Ln(n.min,e);let i=[],r=bd(e),s=ZW(e,t),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10,d=Math.floor((c-u)/Math.pow(10,s)),h=Ln(n.min,Math.round((l+u+d*Math.pow(10,s))*o)/o);for(;h<t;)i.push({value:h,major:cI(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),h=Math.round((l+u+d*Math.pow(10,s))*o)/o;let p=Ln(n.max,h);return i.push({value:p,major:cI(p),significand:d}),i}var qv=class extends Ko{static id="logarithmic";static defaults={ticks:{callback:ad.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let i=Vl.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return Dt(i)&&i>0?i:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Dt(e)?Math.max(0,e):null,this.max=Dt(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Dt(this._userMin)&&(this.min=e===Go(this.min,0)?Go(this.min,-1):Go(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),i=this.min,r=this.max,s=a=>i=e?i:a,o=a=>r=t?r:a;i===r&&(i<=0?(s(1),o(10)):(s(Go(i,-1)),o(Go(r,1)))),i<=0&&s(Go(r,-1)),r<=0&&o(Go(i,1)),this.min=i,this.max=r}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},i=XW(t,this);return e.bounds==="ticks"&&w0(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":zo(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=_r(e),this._valueRange=_r(this.max)-_r(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(_r(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function jv(n){let e=n.ticks;if(e.display&&n.display){let t=jt(e.backdropPadding);return Be(e.font&&e.font.size,bt.font.size)+t.height}return 0}function QW(n,e,t){return t=dt(t)?t:[t],{w:nv(n,e.string,t),h:t.length*e.lineHeight}}function dI(n,e,t,i,r){return n===i||n===r?{start:e-t/2,end:e+t/2}:n<i||n>r?{start:e-t,end:e}:{start:e,end:e+t}}function JW(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?rt/s:0;for(let l=0;l<s;l++){let c=o.setContext(n.getPointLabelContext(l));r[l]=c.padding;let u=n.getPointPosition(l,n.drawingArea+r[l],a),d=Ot(c.font),h=QW(n.ctx,d,n._pointLabels[l]);i[l]=h;let p=Fn(n.getIndexAngle(l)+a),g=Math.round(jo(p)),A=dI(g,u.x,h.w,0,180),v=dI(g,u.y,h.h,90,270);eU(t,e,p,A,v)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=iU(n,i,r)}function eU(n,e,t,i,r){let s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t)),a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,n.t=Math.min(n.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,n.b=Math.max(n.b,e.b+l))}function tU(n,e,t){let i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=t,l=n.getPointPosition(e,i+r+o,s),c=Math.round(jo(Fn(l.angle+Ct))),u=oU(l.y,a.h,c),d=rU(c),h=sU(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function nU(n,e){if(!e)return!0;let{left:t,top:i,right:r,bottom:s}=n;return!(Hi({x:t,y:i},e)||Hi({x:t,y:s},e)||Hi({x:r,y:i},e)||Hi({x:r,y:s},e))}function iU(n,e,t){let i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:jv(s)/2,additionalAngle:o?rt/r:0},c;for(let u=0;u<r;u++){l.padding=t[u],l.size=e[u];let d=tU(n,u,l);i.push(d),a==="auto"&&(d.visible=nU(d,c),d.visible&&(c=d))}return i}function rU(n){return n===0||n===180?"center":n<180?"left":"right"}function sU(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function oU(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function aU(n,e,t){let{left:i,top:r,right:s,bottom:o}=t,{backdropColor:a}=e;if(!st(a)){let l=$i(e.borderRadius),c=jt(e.backdropPadding);n.fillStyle=a;let u=i-c.left,d=r-c.top,h=s-i+c.width,p=o-r+c.height;Object.values(l).some(g=>g!==0)?(n.beginPath(),Jr(n,{x:u,y:d,w:h,h:p,radius:l}),n.fill()):n.fillRect(u,d,h,p)}}function lU(n,e){let{ctx:t,options:{pointLabels:i}}=n;for(let r=e-1;r>=0;r--){let s=n._pointLabelItems[r];if(!s.visible)continue;let o=i.setContext(n.getPointLabelContext(r));aU(t,o,s);let a=Ot(o.font),{x:l,y:c,textAlign:u}=s;Qr(t,n._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function LI(n,e,t,i){let{ctx:r}=n;if(t)r.arc(n.xCenter,n.yCenter,e,0,At);else{let s=n.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function cU(n,e,t,i,r){let s=n.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),LI(n,t,o,i),s.closePath(),s.stroke(),s.restore())}function uU(n,e,t){return yr(n,{label:t,index:e,type:"pointLabel"})}var Wv=class extends Vl{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ad.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=jt(jv(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=Dt(e)&&!isNaN(e)?e:0,this.max=Dt(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/jv(this.options))}generateTickLabels(e){Vl.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{let r=pt(this.options.pointLabels.callback,[t,i],this);return r||r===0?r:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){let e=this.options;e.display&&e.pointLabels.display?JW(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,r))}getIndexAngle(e){let t=At/(this._pointLabels.length||1),i=this.options.startAngle||0;return Fn(e*t+qt(i))}getDistanceFromCenterForValue(e){if(st(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(st(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let i=t[e];return uU(this.getContext(),e,i)}}getPointPosition(e,t,i=0){let r=this.getIndexAngle(e)-Ct+i;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:i,right:r,bottom:s}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let i=this.ctx;i.save(),i.beginPath(),LI(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:i,grid:r,border:s}=t,o=this._pointLabels.length,a,l,c;if(t.pointLabels.display&&lU(this,o),r.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);let h=this.getContext(d),p=r.setContext(h),g=s.setContext(h);cU(this,p,l,o,g)}}),i.display){for(e.save(),a=o-1;a>=0;a--){let u=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(e.lineWidth=h,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;let r=this.getIndexAngle(0),s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;let c=i.setContext(this.getContext(l)),u=Ot(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;let d=jt(c.backdropPadding);e.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}Qr(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}},sg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Jn=Object.keys(sg);function hI(n,e){return n-e}function pI(n,e){if(st(e))return null;let t=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts,o=e;return typeof i=="function"&&(o=i(o)),Dt(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(r&&(o=r==="week"&&(Gi(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,r)),+o)}function fI(n,e,t,i){let r=Jn.length;for(let s=Jn.indexOf(n);s<r-1;++s){let o=sg[Jn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return Jn[s]}return Jn[r-1]}function dU(n,e,t,i,r){for(let s=Jn.length-1;s>=Jn.indexOf(t);s--){let o=Jn[s];if(sg[o].common&&n._adapter.diff(r,i,o)>=e-1)return o}return Jn[t?Jn.indexOf(t):0]}function hU(n){for(let e=Jn.indexOf(n)+1,t=Jn.length;e<t;++e)if(sg[Jn[e]].common)return Jn[e]}function gI(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:i,hi:r}=sd(t,e),s=t[i]>=e?t[i]:t[r];n[s]=!0}}function pU(n,e,t,i){let r=n._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value,a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=t[a],l>=0&&(e[l].major=!0);return e}function mI(n,e,t){let i=[],r={},s=e.length,o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!t?i:pU(n,i,r,t)}var Uv=(()=>{class n extends Ko{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){let r=t.time||(t.time={}),s=this._adapter=new Cj._date(t.adapters.date);s.init(i),Bo(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:pI(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,i=this._adapter,r=t.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=Dt(s)&&!isNaN(s)?s:+i.startOf(Date.now(),r),o=Dt(o)&&!isNaN(o)?o:+i.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let t=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],r=t[t.length-1]),{min:i,max:r}}buildTicks(){let t=this.options,i=t.time,r=t.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,l=Q1(s,o,a);return this._unit=i.unit||(r.autoSkip?fI(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):dU(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:hU(this._unit),this.initOffsets(s),t.reverse&&l.reverse(),mI(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,r=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?i=1-s:i=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?r=o:r=(o-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;i=Jt(i,0,a),r=Jt(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){let t=this._adapter,i=this.min,r=this.max,s=this.options,o=s.time,a=o.unit||fI(o.minUnit,i,r,this._getLabelCapacity(i)),l=Be(s.ticks.stepSize,1),c=a==="week"?o.isoWeekday:!1,u=Gi(c)||c===!0,d={},h=i,p,g;if(u&&(h=+t.startOf(h,"isoWeek",c)),h=+t.startOf(h,u?"day":a),t.diff(r,i,a)>1e5*l)throw new Error(i+" and "+r+" are too far apart with stepSize of "+l+" "+a);let A=s.ticks.source==="data"&&this.getDataTimestamps();for(p=h,g=0;p<r;p=+t.add(p,l,a),g++)gI(d,p,A);return(p===r||s.bounds==="ticks"||g===1)&&gI(d,p,A),Object.keys(d).sort(hI).map(v=>+v)}getLabelForValue(t){let i=this._adapter,r=this.options.time;return r.tooltipFormat?i.format(t,r.tooltipFormat):i.format(t,r.displayFormats.datetime)}format(t,i){let s=this.options.time.displayFormats,o=this._unit,a=i||s[o];return this._adapter.format(t,a)}_tickFormatFunction(t,i,r,s){let o=this.options,a=o.ticks.callback;if(a)return pt(a,[t,i,r],this);let l=o.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],h=u&&l[u],p=r[i],g=u&&h&&p&&p.major;return this._adapter.format(t,s||(g?h:d))}generateTickLabels(t){let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let i=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(t){let i=this._offsets,r=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){let i=this.options.ticks,r=this.ctx.measureText(t).width,s=qt(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),a=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*o+l*a,h:r*a+l*o}}_getLabelCapacity(t){let i=this.options.time,r=i.displayFormats,s=r[i.unit]||r.millisecond,o=this._tickFormatFunction(t,0,mI(this,[t],this._majorUnit),s),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],i,r;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,r=s.length;i<r;++i)t=t.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],i,r;if(t.length)return t;let s=this.getLabels();for(i=0,r=s.length;i<r;++i)t.push(pI(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return C0(t.sort(hI))}}return n})();function Z0(n,e,t){let i=0,r=n.length-1,s,o,a,l;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=zi(n,"pos",e)),{pos:s,time:a}=n[i],{pos:o,time:l}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=zi(n,"time",e)),{time:s,pos:a}=n[i],{time:o,pos:l}=n[r]);let c=o-s;return c?a+(l-a)*(e-s)/c:a}var zv=class extends Uv{static id="timeseries";static defaults=Uv.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Z0(t,this.min),this._tableRange=Z0(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:i}=this,r=[],s=[],o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=t&&c<=i&&r.push(c);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){let e=this.min,t=this.max,i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Z0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Z0(this._table,i*this._tableRange+this._minPos,!0)}},fU=Object.freeze({__proto__:null,CategoryScale:KW,LinearScale:Bv,LogarithmicScale:qv,RadialLinearScale:Wv,TimeScale:Uv,TimeSeriesScale:zv}),og=[Sj,$7,zW,fU];var gU=typeof global=="object"&&global&&global.Object===Object&&global,ag=gU;var mU=typeof self=="object"&&self&&self.Object===Object&&self,_U=ag||mU||Function("return this")(),Ci=_U;var AU=Ci.Symbol,Bl=AU;var VI=Object.prototype,yU=VI.hasOwnProperty,vU=VI.toString,xd=Bl?Bl.toStringTag:void 0;function wU(n){var e=yU.call(n,xd),t=n[xd];try{n[xd]=void 0;var i=!0}catch{}var r=vU.call(n);return i&&(e?n[xd]=t:delete n[xd]),r}var BI=wU;var bU=Object.prototype,SU=bU.toString;function CU(n){return SU.call(n)}var qI=CU;var xU="[object Null]",DU="[object Undefined]",jI=Bl?Bl.toStringTag:void 0;function EU(n){return n==null?n===void 0?DU:xU:jI&&jI in Object(n)?BI(n):qI(n)}var qs=EU;function MU(n){return n!=null&&typeof n=="object"}var Sr=MU;var TU=Array.isArray,Dd=TU;function IU(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var ei=IU;function kU(n){return n}var lg=kU;var PU="[object AsyncFunction]",NU="[object Function]",OU="[object GeneratorFunction]",RU="[object Proxy]";function FU(n){if(!ei(n))return!1;var e=qs(n);return e==NU||e==OU||e==PU||e==RU}var ql=FU;var LU=Ci["__core-js_shared__"],cg=LU;var WI=function(){var n=/[^.]+$/.exec(cg&&cg.keys&&cg.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function VU(n){return!!WI&&WI in n}var UI=VU;var BU=Function.prototype,qU=BU.toString;function jU(n){if(n!=null){try{return qU.call(n)}catch{}try{return n+""}catch{}}return""}var zI=jU;var WU=/[\\^$.*+?()[\]{}|]/g,UU=/^\[object .+?Constructor\]$/,zU=Function.prototype,HU=Object.prototype,YU=zU.toString,GU=HU.hasOwnProperty,KU=RegExp("^"+YU.call(GU).replace(WU,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $U(n){if(!ei(n)||UI(n))return!1;var e=ql(n)?KU:UU;return e.test(zI(n))}var HI=$U;function ZU(n,e){return n?.[e]}var YI=ZU;function XU(n,e){var t=YI(n,e);return HI(t)?t:void 0}var jl=XU;var GI=Object.create,QU=function(){function n(){}return function(e){if(!ei(e))return{};if(GI)return GI(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}(),KI=QU;function JU(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var $I=JU;function ez(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var ZI=ez;var tz=800,nz=16,iz=Date.now;function rz(n){var e=0,t=0;return function(){var i=iz(),r=nz-(i-t);if(t=i,r>0){if(++e>=tz)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var XI=rz;function sz(n){return function(){return n}}var QI=sz;var oz=function(){try{var n=jl(Object,"defineProperty");return n({},"",{}),n}catch{}}(),Wl=oz;var az=Wl?function(n,e){return Wl(n,"toString",{configurable:!0,enumerable:!1,value:QI(e),writable:!0})}:lg,JI=az;var lz=XI(JI),ek=lz;var cz=9007199254740991,uz=/^(?:0|[1-9]\d*)$/;function dz(n,e){var t=typeof n;return e=e??cz,!!e&&(t=="number"||t!="symbol"&&uz.test(n))&&n>-1&&n%1==0&&n<e}var ug=dz;function hz(n,e,t){e=="__proto__"&&Wl?Wl(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var Ul=hz;function pz(n,e){return n===e||n!==n&&e!==e}var js=pz;var fz=Object.prototype,gz=fz.hasOwnProperty;function mz(n,e,t){var i=n[e];(!(gz.call(n,e)&&js(i,t))||t===void 0&&!(e in n))&&Ul(n,e,t)}var tk=mz;function _z(n,e,t,i){var r=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=i?i(t[a],n[a],a,t,n):void 0;l===void 0&&(l=n[a]),r?Ul(t,a,l):tk(t,a,l)}return t}var nk=_z;var ik=Math.max;function Az(n,e,t){return e=ik(e===void 0?n.length-1:e,0),function(){for(var i=arguments,r=-1,s=ik(i.length-e,0),o=Array(s);++r<s;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=t(o),$I(n,this,a)}}var rk=Az;function yz(n,e){return ek(rk(n,e,lg),n+"")}var sk=yz;var vz=9007199254740991;function wz(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=vz}var dg=wz;function bz(n){return n!=null&&dg(n.length)&&!ql(n)}var zl=bz;function Sz(n,e,t){if(!ei(t))return!1;var i=typeof e;return(i=="number"?zl(t)&&ug(e,t.length):i=="string"&&e in t)?js(t[e],n):!1}var ok=Sz;function Cz(n){return sk(function(e,t){var i=-1,r=t.length,s=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(r--,s):void 0,o&&ok(t[0],t[1],o)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var a=t[i];a&&n(e,a,i,s)}return e})}var ak=Cz;var xz=Object.prototype;function Dz(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||xz;return n===t}var hg=Dz;function Ez(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var lk=Ez;var Mz="[object Arguments]";function Tz(n){return Sr(n)&&qs(n)==Mz}var Yv=Tz;var ck=Object.prototype,Iz=ck.hasOwnProperty,kz=ck.propertyIsEnumerable,Pz=Yv(function(){return arguments}())?Yv:function(n){return Sr(n)&&Iz.call(n,"callee")&&!kz.call(n,"callee")},Ed=Pz;function Nz(){return!1}var uk=Nz;var pk=typeof exports=="object"&&exports&&!exports.nodeType&&exports,dk=pk&&typeof module=="object"&&module&&!module.nodeType&&module,Oz=dk&&dk.exports===pk,hk=Oz?Ci.Buffer:void 0,Rz=hk?hk.isBuffer:void 0,Fz=Rz||uk,pg=Fz;var Lz="[object Arguments]",Vz="[object Array]",Bz="[object Boolean]",qz="[object Date]",jz="[object Error]",Wz="[object Function]",Uz="[object Map]",zz="[object Number]",Hz="[object Object]",Yz="[object RegExp]",Gz="[object Set]",Kz="[object String]",$z="[object WeakMap]",Zz="[object ArrayBuffer]",Xz="[object DataView]",Qz="[object Float32Array]",Jz="[object Float64Array]",eH="[object Int8Array]",tH="[object Int16Array]",nH="[object Int32Array]",iH="[object Uint8Array]",rH="[object Uint8ClampedArray]",sH="[object Uint16Array]",oH="[object Uint32Array]",Rt={};Rt[Qz]=Rt[Jz]=Rt[eH]=Rt[tH]=Rt[nH]=Rt[iH]=Rt[rH]=Rt[sH]=Rt[oH]=!0;Rt[Lz]=Rt[Vz]=Rt[Zz]=Rt[Bz]=Rt[Xz]=Rt[qz]=Rt[jz]=Rt[Wz]=Rt[Uz]=Rt[zz]=Rt[Hz]=Rt[Yz]=Rt[Gz]=Rt[Kz]=Rt[$z]=!1;function aH(n){return Sr(n)&&dg(n.length)&&!!Rt[qs(n)]}var fk=aH;function lH(n){return function(e){return n(e)}}var gk=lH;var mk=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Md=mk&&typeof module=="object"&&module&&!module.nodeType&&module,cH=Md&&Md.exports===mk,Gv=cH&&ag.process,uH=function(){try{var n=Md&&Md.require&&Md.require("util").types;return n||Gv&&Gv.binding&&Gv.binding("util")}catch{}}(),Kv=uH;var _k=Kv&&Kv.isTypedArray,dH=_k?gk(_k):fk,fg=dH;var hH=Object.prototype,pH=hH.hasOwnProperty;function fH(n,e){var t=Dd(n),i=!t&&Ed(n),r=!t&&!i&&pg(n),s=!t&&!i&&!r&&fg(n),o=t||i||r||s,a=o?lk(n.length,String):[],l=a.length;for(var c in n)(e||pH.call(n,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||ug(c,l)))&&a.push(c);return a}var Ak=fH;function gH(n,e){return function(t){return n(e(t))}}var yk=gH;function mH(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var vk=mH;var _H=Object.prototype,AH=_H.hasOwnProperty;function yH(n){if(!ei(n))return vk(n);var e=hg(n),t=[];for(var i in n)i=="constructor"&&(e||!AH.call(n,i))||t.push(i);return t}var wk=yH;function vH(n){return zl(n)?Ak(n,!0):wk(n)}var gg=vH;var wH=jl(Object,"create"),is=wH;function bH(){this.__data__=is?is(null):{},this.size=0}var bk=bH;function SH(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var Sk=SH;var CH="__lodash_hash_undefined__",xH=Object.prototype,DH=xH.hasOwnProperty;function EH(n){var e=this.__data__;if(is){var t=e[n];return t===CH?void 0:t}return DH.call(e,n)?e[n]:void 0}var Ck=EH;var MH=Object.prototype,TH=MH.hasOwnProperty;function IH(n){var e=this.__data__;return is?e[n]!==void 0:TH.call(e,n)}var xk=IH;var kH="__lodash_hash_undefined__";function PH(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=is&&e===void 0?kH:e,this}var Dk=PH;function Hl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Hl.prototype.clear=bk;Hl.prototype.delete=Sk;Hl.prototype.get=Ck;Hl.prototype.has=xk;Hl.prototype.set=Dk;var $v=Hl;function NH(){this.__data__=[],this.size=0}var Ek=NH;function OH(n,e){for(var t=n.length;t--;)if(js(n[t][0],e))return t;return-1}var Ws=OH;var RH=Array.prototype,FH=RH.splice;function LH(n){var e=this.__data__,t=Ws(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():FH.call(e,t,1),--this.size,!0}var Mk=LH;function VH(n){var e=this.__data__,t=Ws(e,n);return t<0?void 0:e[t][1]}var Tk=VH;function BH(n){return Ws(this.__data__,n)>-1}var Ik=BH;function qH(n,e){var t=this.__data__,i=Ws(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}var kk=qH;function Yl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Yl.prototype.clear=Ek;Yl.prototype.delete=Mk;Yl.prototype.get=Tk;Yl.prototype.has=Ik;Yl.prototype.set=kk;var Us=Yl;var jH=jl(Ci,"Map"),mg=jH;function WH(){this.size=0,this.__data__={hash:new $v,map:new(mg||Us),string:new $v}}var Pk=WH;function UH(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var Nk=UH;function zH(n,e){var t=n.__data__;return Nk(e)?t[typeof e=="string"?"string":"hash"]:t.map}var zs=zH;function HH(n){var e=zs(this,n).delete(n);return this.size-=e?1:0,e}var Ok=HH;function YH(n){return zs(this,n).get(n)}var Rk=YH;function GH(n){return zs(this,n).has(n)}var Fk=GH;function KH(n,e){var t=zs(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}var Lk=KH;function Gl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Gl.prototype.clear=Pk;Gl.prototype.delete=Ok;Gl.prototype.get=Rk;Gl.prototype.has=Fk;Gl.prototype.set=Lk;var Vk=Gl;var $H=yk(Object.getPrototypeOf,Object),_g=$H;var ZH="[object Object]",XH=Function.prototype,QH=Object.prototype,Bk=XH.toString,JH=QH.hasOwnProperty,eY=Bk.call(Object);function tY(n){if(!Sr(n)||qs(n)!=ZH)return!1;var e=_g(n);if(e===null)return!0;var t=JH.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Bk.call(t)==eY}var qk=tY;function nY(){this.__data__=new Us,this.size=0}var jk=nY;function iY(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var Wk=iY;function rY(n){return this.__data__.get(n)}var Uk=rY;function sY(n){return this.__data__.has(n)}var zk=sY;var oY=200;function aY(n,e){var t=this.__data__;if(t instanceof Us){var i=t.__data__;if(!mg||i.length<oY-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new Vk(i)}return t.set(n,e),this.size=t.size,this}var Hk=aY;function Kl(n){var e=this.__data__=new Us(n);this.size=e.size}Kl.prototype.clear=jk;Kl.prototype.delete=Wk;Kl.prototype.get=Uk;Kl.prototype.has=zk;Kl.prototype.set=Hk;var Yk=Kl;var Zk=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Gk=Zk&&typeof module=="object"&&module&&!module.nodeType&&module,lY=Gk&&Gk.exports===Zk,Kk=lY?Ci.Buffer:void 0,$k=Kk?Kk.allocUnsafe:void 0;function cY(n,e){if(e)return n.slice();var t=n.length,i=$k?$k(t):new n.constructor(t);return n.copy(i),i}var Xk=cY;var uY=Ci.Uint8Array,Zv=uY;function dY(n){var e=new n.constructor(n.byteLength);return new Zv(e).set(new Zv(n)),e}var Qk=dY;function hY(n,e){var t=e?Qk(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var Jk=hY;function pY(n){return typeof n.constructor=="function"&&!hg(n)?KI(_g(n)):{}}var eP=pY;function fY(n){return function(e,t,i){for(var r=-1,s=Object(e),o=i(e),a=o.length;a--;){var l=o[n?a:++r];if(t(s[l],l,s)===!1)break}return e}}var tP=fY;var gY=tP(),nP=gY;function mY(n,e,t){(t!==void 0&&!js(n[e],t)||t===void 0&&!(e in n))&&Ul(n,e,t)}var Td=mY;function _Y(n){return Sr(n)&&zl(n)}var iP=_Y;function AY(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var Id=AY;function yY(n){return nk(n,gg(n))}var rP=yY;function vY(n,e,t,i,r,s,o){var a=Id(n,t),l=Id(e,t),c=o.get(l);if(c){Td(n,t,c);return}var u=s?s(a,l,t+"",n,e,o):void 0,d=u===void 0;if(d){var h=Dd(l),p=!h&&pg(l),g=!h&&!p&&fg(l);u=l,h||p||g?Dd(a)?u=a:iP(a)?u=ZI(a):p?(d=!1,u=Xk(l,!0)):g?(d=!1,u=Jk(l,!0)):u=[]:qk(l)||Ed(l)?(u=a,Ed(a)?u=rP(a):(!ei(a)||ql(a))&&(u=eP(l))):d=!1}d&&(o.set(l,u),r(u,l,i,s,o),o.delete(l)),Td(n,t,u)}var sP=vY;function oP(n,e,t,i,r){n!==e&&nP(e,function(s,o){if(r||(r=new Yk),ei(s))sP(n,e,o,t,oP,i,r);else{var a=i?i(Id(n,o),s,o+"",n,e,r):void 0;a===void 0&&(a=s),Td(n,o,a)}},gg)}var aP=oP;var wY=ak(function(n,e,t){aP(n,e,t)}),Ag=wY;var lP=new we("Configuration for ngCharts");function cP(...n){return{registerables:[...og,...n]}}function uP(...n){let e=Ag({},...n);return{provide:lP,useValue:e}}var bY=(()=>{class n{constructor(){this.colorschemesOptions=new Xt(void 0)}setColorschemesOptions(t){this.pColorschemesOptions=t,this.colorschemesOptions.next(t)}getColorschemesOptions(){return this.pColorschemesOptions}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Xv=(()=>{class n{constructor(t,i,r,s){this.zone=i,this.themeService=r,this.type="bar",this.plugins=[],this.chartClick=new Nt,this.chartHover=new Nt,this.subs=[],this.themeOverrides={},s?.registerables&&br.register(...s.registerables),s?.defaults&&bt.set(s.defaults),this.ctx=t.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(pp()).subscribe(o=>this.themeChanged(o)))}ngOnChanges(t){let i=["type"],r=Object.getOwnPropertyNames(t);if(r.some(s=>i.includes(s))||r.every(s=>t[s].isFirstChange()))this.render();else{let s=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,s.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,s.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,s.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(t=>t.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new br(this.ctx,this.getChartConfiguration()))}update(t){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(t))}hideDataset(t,i){this.chart&&(this.chart.getDatasetMeta(t).hidden=i,this.update())}isDatasetHidden(t){return this.chart?.getDatasetMeta(t)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(t){this.themeOverrides=t,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return Ag({onHover:(t,i)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:t,active:i}))},onClick:(t,i)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:t,active:i}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}static{this.\u0275fac=function(i){return new(i||n)(Ae(_n),Ae(Et),Ae(bY),Ae(lP,8))}}static{this.\u0275dir=Mt({type:n,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[Vi]})}}return n})();var dP={providers:[uE({eventCoalescing:!0}),L1(FM),uP(cP()),p1()]};var f=class{static logWSFeed=!1;static miscEvent$=new at;static websocketEvent$=new at;static requestStatusEvent$=new at;static SocketMode="zerodha";static RestMode="zerodha";static zerodhaUserId="FW6041";static AliceblueUserId="AB033978";static AliceblueApiKey="49LHZEV09feJdK7c59mzI4vxZOpJ0McPVg6aYP0kKmnMq1Gbn3DQMBOAb8xE7b6EJCkOspKl1EBljBUEmVppzSTT39G7rd9gIy01cWqzZTocnuCHXpBSj14TiyP0SDF8";static AliceblueEncKey="";static AliceblueSessionId="";static fyersAppId="FUU5Z8ICUH";static fyersSecretId="IYF3LPXJ0X";static angelUserId="A165307";static angelPassword="scjFNB5iYLI";static angelAPIKey="I5nI74Nm";static angelFeedToken="";static angelJWTToken="";static angelRefreshToken="";static year="23";static INTEREST_RATE=6.89;static USDINR_FUT_TOKEN;static knife_threshold=5;static knife_threshold_adjust1=2;static knife_threshold_adjust2=7;static orders=[];static completeOrders=0;static placedOrders=0;static curr_positions_trades=[];static fetchedPositions=[];static isSimulatedStrategy=!1;static simulateCurrDateObj=null;static isProduction=!1;static numAlerts=4;static broker_auth="enctoken MNyfe/S7e6hVoUslcB8a4Ch/S+/EyS9DtavSmdQmevXzmPvOYv9neIMZkyI8L38HFIiNc2VPoNTrM3waBrvS0Hj4IPW+5LHN5B7J2p+s5gtdbW0/sueWOg==";static nfCEOILimit=null;static nfPEOILimit=null;static bnfCEOILimit=null;static bnfPEOILimit=null;static isHistoricalRunning=!1;static numStrategies=8;static stockPositions=null;static st_simulate_ce=[];static st_simulate_pe=[];static st_simulate_charts=[];static st_simulate_charts_values=[];static st_simulate_charts_print=[];static st_simulate_charts_print_strangle=[];static st_simulate_exits=[];static isIStrangleEnabled=!0;static isIStrangleInit=!1;static SL1=10;static SL2=12;static rollout_premium=10;static rollin_threshold=8;static stocksStrategyNum=8;static defaultTag="t:intraday2:228655";static supportedInstru=["NIFTY","BANKNIFTY","FINNIFTY","MIDCPNIFTY","SENSEX","BANKEX","USDINR"];static strike_diff={NIFTY:50,BANKNIFTY:100,FINNIFTY:50,MIDCPNIFTY:25,SENSEX:100,BANKEX:100};static freezeLimit={NIFTY:1800,BANKNIFTY:900,FINNIFTY:1800,MIDCPNIFTY:2800,SENSEX:1e3,BANKEX:900};static qtyStep={NIFTY:75,BANKNIFTY:15,FINNIFTY:25,MIDCPNIFTY:50,SENSEX:20,BANKEX:15};static enableAlgo=!1;static instruToTrade="";static expiryDateToTrade=null;static algoStrategyNum=1;static algoSSStrike=null;static algoTag="t:intraday-a:468568";static algoSS_CE;static algoSS_PE;static secsToWaitForSL=5;static numSlabs={MIDCPNIFTY:3,FINNIFTY:3,BANKNIFTY:3,NIFTY:3,SENSEX:3,BANKEX:3};static slabOrderId={MIDCPNIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},FINNIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},BANKNIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},NIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},SENSEX:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},BANKEX:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}}};static minDistTillTime={MIDCPNIFTY:{"12:00":150,"13:30":100,"14:30":100,"15:31":100,"23:59":100},FINNIFTY:{"12:00":150,"13:30":150,"14:30":100,"15:31":50,"23:59":50},BANKNIFTY:{"12:00":400,"13:30":300,"14:30":200,"15:31":200,"23:59":200},NIFTY:{"12:00":150,"13:30":150,"14:30":100,"15:31":50,"23:59":50},SENSEX:{"12:00":400,"13:30":300,"14:30":200,"15:31":200,"23:59":200},BANKEX:{"12:00":400,"13:30":300,"14:30":200,"15:31":200,"23:59":200}};static slabEntryTime={MIDCPNIFTY:{1:"9:46",2:"10:06",3:"10:36"},FINNIFTY:{1:"9:31",2:"9:46",3:"10:06"},BANKNIFTY:{1:"9:31",2:"9:46",3:"10:06"},NIFTY:{1:"9:31",2:"9:46",3:"10:06"},SENSEX:{1:"9:31",2:"9:46",3:"10:06"},BANKEX:{1:"9:31",2:"9:46",3:"10:06"}};static slabEntryDist={MIDCPNIFTY:{1:200,2:200,3:200},FINNIFTY:{1:200,2:150,3:200},BANKNIFTY:{1:500,2:400,3:500},NIFTY:{1:200,2:150,3:200},SENSEX:{1:500,2:400,3:500},BANKEX:{1:500,2:400,3:500}};static slabQty={MIDCPNIFTY:{1:-3e3,2:-3e3,3:-3e3},FINNIFTY:{1:-1320,2:-1320,3:-1320},BANKNIFTY:{1:-510,2:-675,3:-510},NIFTY:{1:-1500,2:-1500,3:-1500},SENSEX:{1:-430,2:-430,3:-430},BANKEX:{1:-450,2:-450,3:-450}};static slabEntered={MIDCPNIFTY:{1:!1,2:!1,3:!1},FINNIFTY:{1:!1,2:!1,3:!1},BANKNIFTY:{1:!1,2:!1,3:!1},NIFTY:{1:!1,2:!1,3:!1},SENSEX:{1:!1,2:!1,3:!1},BANKEX:{1:!1,2:!1,3:!1}};static slabStrikes={MIDCPNIFTY:{1:{CE:"",PE:""},2:{CE:"",PE:""},3:{CE:"",PE:""}},FINNIFTY:{1:{CE:"",PE:""},2:{CE:"",PE:""},3:{CE:"",PE:""}},BANKNIFTY:{1:{CE:"",PE:""},2:{CE:"",PE:""},3:{CE:"",PE:""}},NIFTY:{1:{CE:"",PE:""},2:{CE:"",PE:""},3:{CE:"",PE:""}},SENSEX:{1:{CE:"",PE:""},2:{CE:"",PE:""},3:{CE:"",PE:""}},BANKEX:{1:{CE:"",PE:""},2:{CE:"",PE:""},3:{CE:"",PE:""}}};static slabCurrEntryPrice={MIDCPNIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},FINNIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},BANKNIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},NIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},SENSEX:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},BANKEX:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}}};static slabSL={MIDCPNIFTY:{1:.6,2:.7,3:.8},FINNIFTY:{1:.35,2:.4,3:.45},BANKNIFTY:{1:.35,2:.4,3:.45},NIFTY:{1:.35,2:.4,3:.45},SENSEX:{1:.35,2:.4,3:.45},BANKEX:{1:.35,2:.4,3:.45}};static slabSLCounter={MIDCPNIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},FINNIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},BANKNIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},NIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},SENSEX:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},BANKEX:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}}};static slabRollIn={MIDCPNIFTY:{1:.3,2:.35,3:.4},FINNIFTY:{1:.3,2:.35,3:.4},BANKNIFTY:{1:.3,2:.35,3:.4},NIFTY:{1:.3,2:.35,3:.4},SENSEX:{1:.3,2:.35,3:.4},BANKEX:{1:.3,2:.35,3:.4}};static slabRollInCounter={MIDCPNIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},FINNIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},BANKNIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},NIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},SENSEX:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},BANKEX:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}}};static rolloutStrikeMultiple=1;static babyNamesLetters={A:1,B:2,C:3,D:4,E:5,F:8,G:3,H:5,I:1,J:1,K:2,L:3,M:4,N:5,O:7,P:8,Q:1,R:2,S:3,T:4,U:6,V:6,W:6,X:5,Y:1,Z:7};static mastersContract=new Map;static monthsMapping={1:"JAN",2:"FEB",3:"MAR",4:"APR",5:"MAY",6:"JUN",7:"JUL",8:"AUG",9:"SEP",10:"OCT",11:"NOV",12:"DEC"};static monthlyExpiryDates={"23JAN":new Date(2023,0,25),"23FEB":new Date(2023,1,23),"23MAR":new Date(2023,2,29),"23APR":new Date(2023,3,27),"23MAY":new Date(2023,4,25),"23JUN":new Date(2023,5,28),"23JUL":new Date(2023,6,27),"23AUG":new Date(2023,7,31),"23SEP":new Date(2023,8,28),"23OCT":new Date(2023,9,26),"23NOV":new Date(2023,10,30),"23DEC":new Date(2023,11,28),"24JAN":new Date(2024,0,25),"24FEB":new Date(2024,1,29),"24MAR":new Date(2024,2,28),"24APR":new Date(2024,3,25),"24MAY":new Date(2024,4,30),"24JUN":new Date(2024,5,27),"24JUL":new Date(2024,6,25),"24AUG":new Date(2024,7,29),"24SEP":new Date(2024,8,26),"24OCT":new Date(2024,9,31),"24NOV":new Date(2024,10,28),"24DEC":new Date(2024,11,26),"25JAN":new Date(2025,0,30),"25FEB":new Date(2025,1,27),"25MAR":new Date(2025,2,27),"25APR":new Date(2025,3,30),"25MAY":new Date(2025,4,29),"25JUN":new Date(2025,5,26)};static monthlyExpiryDatesBNF={"23JAN":new Date(2023,0,25),"23FEB":new Date(2023,1,23),"23MAR":new Date(2023,2,29),"23APR":new Date(2023,3,27),"23MAY":new Date(2023,4,25),"23JUN":new Date(2023,5,28),"23JUL":new Date(2023,6,27),"23AUG":new Date(2023,7,31),"23SEP":new Date(2023,8,28),"23OCT":new Date(2023,9,26),"23NOV":new Date(2023,10,30),"23DEC":new Date(2023,11,28),"24JAN":new Date(2024,0,25),"24FEB":new Date(2024,1,29),"24MAR":new Date(2024,2,27),"24APR":new Date(2024,3,24),"24MAY":new Date(2024,4,29),"24JUN":new Date(2024,5,26),"24JUL":new Date(2024,6,31),"24AUG":new Date(2024,7,28),"24SEP":new Date(2024,8,25),"24OCT":new Date(2024,9,30),"24NOV":new Date(2024,10,27),"24DEC":new Date(2024,11,24),"25JAN":new Date(2025,0,30),"25FEB":new Date(2025,1,27),"25MAR":new Date(2025,2,27),"25APR":new Date(2025,3,30),"25MAY":new Date(2025,4,29),"25JUN":new Date(2025,5,26)};static monthlyExpiryDatesFINNIFTY={"23JAN":new Date(2023,0,31),"23FEB":new Date(2023,1,28),"23MAR":new Date(2023,2,28),"23APR":new Date(2023,3,25),"23MAY":new Date(2023,4,30),"23JUN":new Date(2023,5,27),"23JUL":new Date(2023,6,25),"23AUG":new Date(2023,7,29),"23SEP":new Date(2023,8,26),"23OCT":new Date(2023,9,31),"23NOV":new Date(2023,10,28),"23DEC":new Date(2023,11,26),"24JAN":new Date(2024,0,30),"24FEB":new Date(2024,1,27),"24MAR":new Date(2024,2,26),"24APR":new Date(2024,3,30),"24MAY":new Date(2024,4,28),"24JUN":new Date(2024,5,25),"24JUL":new Date(2024,6,30),"24AUG":new Date(2024,7,27),"24SEP":new Date(2024,8,24),"24OCT":new Date(2024,9,29),"24NOV":new Date(2024,10,26),"24DEC":new Date(2024,11,31),"25JAN":new Date(2025,0,30),"25FEB":new Date(2025,1,27),"25MAR":new Date(2025,2,27),"25APR":new Date(2025,3,30),"25MAY":new Date(2025,4,29),"25JUN":new Date(2025,5,26)};static monthlyExpiryDatesMidcap={"23JAN":new Date(2023,0,31),"23FEB":new Date(2023,1,28),"23MAR":new Date(2023,2,28),"23APR":new Date(2023,3,25),"23MAY":new Date(2023,4,30),"23JUN":new Date(2023,5,27),"23JUL":new Date(2023,6,26),"23AUG":new Date(2023,7,28),"23SEP":new Date(2023,8,25),"23OCT":new Date(2023,9,30),"23NOV":new Date(2023,10,24),"23DEC":new Date(2023,11,22),"24JAN":new Date(2024,0,29),"24FEB":new Date(2024,1,26),"24MAR":new Date(2024,2,22),"24APR":new Date(2024,3,29),"24MAY":new Date(2024,4,27),"24JUN":new Date(2024,5,24),"24JUL":new Date(2024,6,29),"24AUG":new Date(2024,7,26),"24SEP":new Date(2024,8,30),"24OCT":new Date(2024,9,28),"24NOV":new Date(2024,10,25),"24DEC":new Date(2024,11,30),"25JAN":new Date(2025,0,30),"25FEB":new Date(2025,1,27),"25MAR":new Date(2025,2,27),"25APR":new Date(2025,3,30),"25MAY":new Date(2025,4,29),"25JUN":new Date(2025,5,26)};static monthlyExpiryDatesSensex={"23JAN":new Date(2023,0,25),"23FEB":new Date(2023,1,23),"23MAR":new Date(2023,2,29),"23APR":new Date(2023,3,27),"23MAY":new Date(2023,4,25),"23JUN":new Date(2023,5,28),"23JUL":new Date(2023,6,28),"23AUG":new Date(2023,7,25),"23SEP":new Date(2023,8,29),"23OCT":new Date(2023,9,27),"23NOV":new Date(2023,10,24),"23DEC":new Date(2023,11,29),"24JAN":new Date(2024,0,25),"24FEB":new Date(2024,1,23),"24MAR":new Date(2024,2,28),"24APR":new Date(2024,3,26),"24MAY":new Date(2024,4,31),"24JUN":new Date(2024,5,28),"24JUL":new Date(2024,6,26),"24AUG":new Date(2024,7,30),"24SEP":new Date(2024,8,27),"24OCT":new Date(2024,9,25),"24NOV":new Date(2024,10,29),"24DEC":new Date(2024,11,27),"25JAN":new Date(2025,0,28),"25FEB":new Date(2025,1,25),"25MAR":new Date(2025,2,25),"25APR":new Date(2025,3,29),"25MAY":new Date(2025,4,27),"25JUN":new Date(2025,5,24)};static monthlyExpiryDatesBankex={"23JAN":new Date(2023,0,31),"23FEB":new Date(2023,1,28),"23MAR":new Date(2023,2,28),"23APR":new Date(2023,3,25),"23MAY":new Date(2023,4,30),"23JUN":new Date(2023,5,27),"23JUL":new Date(2023,6,26),"23AUG":new Date(2023,7,28),"23SEP":new Date(2023,8,25),"23OCT":new Date(2023,9,30),"23NOV":new Date(2023,10,24),"23DEC":new Date(2023,11,22),"24JAN":new Date(2024,0,29),"24FEB":new Date(2024,1,26),"24MAR":new Date(2024,2,22),"24APR":new Date(2024,3,29),"24MAY":new Date(2024,4,27),"24JUN":new Date(2024,5,24),"24JUL":new Date(2024,6,29),"24AUG":new Date(2024,7,26),"24SEP":new Date(2024,8,30),"24OCT":new Date(2024,9,28),"24NOV":new Date(2024,10,25),"24DEC":new Date(2024,11,30),"25JAN":new Date(2025,0,28),"25FEB":new Date(2025,1,25),"25MAR":new Date(2025,2,25),"25APR":new Date(2025,3,29),"25MAY":new Date(2025,4,27),"25JUN":new Date(2025,5,24)};static monthlyExpiryDatesUSDINR={"23JAN":new Date(2023,0,27),"23FEB":new Date(2023,1,24),"23MAR":new Date(2023,2,28),"23APR":new Date(2023,3,26),"23MAY":new Date(2023,4,29),"23JUN":new Date(2023,5,27),"23JUL":new Date(2023,6,27),"23AUG":new Date(2023,7,25),"23SEP":new Date(2023,8,26),"23OCT":new Date(2023,9,27),"23NOV":new Date(2023,10,24),"23DEC":new Date(2023,11,28),"24JAN":new Date(2024,0,27),"24FEB":new Date(2024,1,24),"24MAR":new Date(2024,2,28),"24APR":new Date(2024,3,26),"24MAY":new Date(2024,4,29),"24JUN":new Date(2024,5,27),"24JUL":new Date(2024,6,27),"24AUG":new Date(2024,7,25),"24SEP":new Date(2024,8,26),"24OCT":new Date(2024,9,27),"24NOV":new Date(2024,10,24),"24DEC":new Date(2024,11,28),"25JAN":new Date(2024,0,27),"25FEB":new Date(2024,1,24),"25MAR":new Date(2024,2,28),"25APR":new Date(2024,3,26),"25MAY":new Date(2024,4,29),"25JUN":new Date(2024,5,27),"25JUL":new Date(2024,6,27),"25AUG":new Date(2024,7,25),"25SEP":new Date(2024,8,26),"25OCT":new Date(2024,9,27),"25NOV":new Date(2024,10,24),"25DEC":new Date(2024,11,28),"26JAN":new Date(2024,0,27),"26FEB":new Date(2024,1,24),"26MAR":new Date(2024,2,28),"26APR":new Date(2024,3,26),"26MAY":new Date(2024,4,29),"26JUN":new Date(2024,5,27),"26JUL":new Date(2024,6,27),"26AUG":new Date(2024,7,25),"26SEP":new Date(2024,8,26),"26OCT":new Date(2024,9,27),"26NOV":new Date(2024,10,24),"26DEC":new Date(2024,11,28),"27JAN":new Date(2024,0,27),"27FEB":new Date(2024,1,24),"27MAR":new Date(2024,2,28),"27APR":new Date(2024,3,26),"27MAY":new Date(2024,4,29),"27JUN":new Date(2024,5,27),"27JUL":new Date(2024,6,27),"27AUG":new Date(2024,7,25),"27SEP":new Date(2024,8,26),"27OCT":new Date(2024,9,27),"27NOV":new Date(2024,10,24),"27DEC":new Date(2024,11,28)};static holidays=[new Date(2023,0,26),new Date(2023,2,7),new Date(2023,2,30),new Date(2023,3,4),new Date(2023,3,7),new Date(2023,3,14),new Date(2023,4,1),new Date(2023,5,29),new Date(2023,7,15),new Date(2023,8,19),new Date(2023,9,2),new Date(2023,9,24),new Date(2023,10,14),new Date(2023,10,27),new Date(2023,11,25),new Date(2024,0,22),new Date(2024,0,26),new Date(2024,2,8),new Date(2024,2,25),new Date(2024,2,29),new Date(2024,3,11),new Date(2024,3,17),new Date(2024,4,1),new Date(2024,4,20),new Date(2024,5,17),new Date(2024,6,17),new Date(2024,7,15),new Date(2024,9,2),new Date(2024,10,1),new Date(2024,10,15),new Date(2024,10,20),new Date(2024,11,25),new Date(2025,1,26),new Date(2025,2,14),new Date(2025,2,31),new Date(2025,3,10),new Date(2025,3,14),new Date(2025,3,18),new Date(2025,4,1),new Date(2025,7,15),new Date(2025,7,27),new Date(2025,9,2),new Date(2025,9,21),new Date(2025,9,22),new Date(2025,10,5),new Date(2025,11,25)];static niftyExpiries=[new Date(2022,0,6),new Date(2022,0,13),new Date(2022,0,22),new Date(2022,0,27),new Date(2022,1,3),new Date(2022,1,10),new Date(2022,1,17),new Date(2022,1,24),new Date(2022,2,3),new Date(2022,2,10),new Date(2022,2,17),new Date(2022,2,24),new Date(2022,2,31),new Date(2022,3,7),new Date(2022,3,13),new Date(2022,3,21),new Date(2022,3,28),new Date(2022,4,5),new Date(2022,4,12),new Date(2022,4,19),new Date(2022,4,26),new Date(2022,5,2),new Date(2022,5,9),new Date(2022,5,16),new Date(2022,5,23),new Date(2022,5,30),new Date(2022,6,7),new Date(2022,6,14),new Date(2022,6,21),new Date(2022,6,28),new Date(2022,7,4),new Date(2022,7,11),new Date(2022,7,18),new Date(2022,7,25),new Date(2022,8,1),new Date(2022,8,8),new Date(2022,8,15),new Date(2022,8,22),new Date(2022,8,29),new Date(2022,9,6),new Date(2022,9,13),new Date(2022,9,20),new Date(2022,9,27),new Date(2022,10,3),new Date(2022,10,10),new Date(2022,10,17),new Date(2022,10,24),new Date(2022,11,1),new Date(2022,11,8),new Date(2022,11,15),new Date(2022,11,22),new Date(2022,11,29),new Date(2023,0,5),new Date(2023,0,12),new Date(2023,0,19),new Date(2023,0,25),new Date(2023,1,2),new Date(2023,1,9),new Date(2023,1,16),new Date(2023,1,23),new Date(2023,2,2),new Date(2023,2,9),new Date(2023,2,16),new Date(2023,2,23),new Date(2023,2,29),new Date(2023,3,6),new Date(2023,3,13),new Date(2023,3,20),new Date(2023,3,27),new Date(2023,4,4),new Date(2023,4,11),new Date(2023,4,18),new Date(2023,4,25),new Date(2023,5,1),new Date(2023,5,8),new Date(2023,5,15),new Date(2023,5,22),new Date(2023,5,28),new Date(2023,6,6),new Date(2023,6,13),new Date(2023,6,20),new Date(2023,6,27),new Date(2023,7,3),new Date(2023,7,10),new Date(2023,7,17),new Date(2023,7,24),new Date(2023,7,31),new Date(2023,8,7),new Date(2023,8,14),new Date(2023,8,21),new Date(2023,8,28),new Date(2023,9,5),new Date(2023,9,12),new Date(2023,9,19),new Date(2023,9,26),new Date(2023,10,2),new Date(2023,10,9),new Date(2023,10,16),new Date(2023,10,23),new Date(2023,10,30),new Date(2023,11,7),new Date(2023,11,14),new Date(2023,11,21),new Date(2023,11,28),new Date(2024,0,4),new Date(2024,0,11),new Date(2024,0,18),new Date(2024,0,25),new Date(2024,1,1),new Date(2024,1,8),new Date(2024,1,15),new Date(2024,1,22),new Date(2024,1,29),new Date(2024,2,7),new Date(2024,2,14),new Date(2024,2,21),new Date(2024,2,28),new Date(2024,3,4),new Date(2024,3,10),new Date(2024,3,18),new Date(2024,3,25),new Date(2024,4,2),new Date(2024,4,9),new Date(2024,4,16),new Date(2024,4,23),new Date(2024,4,30),new Date(2024,5,6),new Date(2024,5,13),new Date(2024,5,20),new Date(2024,5,27),new Date(2024,6,4),new Date(2024,6,11),new Date(2024,6,18),new Date(2024,6,25),new Date(2024,7,1),new Date(2024,7,8),new Date(2024,7,14),new Date(2024,7,22),new Date(2024,7,29),new Date(2024,8,5),new Date(2024,8,12),new Date(2024,8,19),new Date(2024,8,26),new Date(2024,9,3),new Date(2024,9,10),new Date(2024,9,17),new Date(2024,9,24),new Date(2024,9,31),new Date(2024,10,7),new Date(2024,10,14),new Date(2024,10,21),new Date(2024,10,28),new Date(2024,11,5),new Date(2024,11,12),new Date(2024,11,19),new Date(2024,11,26),new Date(2025,0,2),new Date(2025,0,9),new Date(2025,0,16),new Date(2025,0,23),new Date(2025,0,30),new Date(2025,1,6),new Date(2025,1,13),new Date(2025,1,20),new Date(2025,1,27),new Date(2025,2,6),new Date(2025,2,13),new Date(2025,2,20),new Date(2025,2,27),new Date(2025,3,3),new Date(2025,3,9),new Date(2025,3,17),new Date(2025,3,24),new Date(2025,3,30)];static bnfExpiries=[new Date(2022,0,6),new Date(2022,0,13),new Date(2022,0,22),new Date(2022,0,27),new Date(2022,1,3),new Date(2022,1,10),new Date(2022,1,17),new Date(2022,1,24),new Date(2022,2,3),new Date(2022,2,10),new Date(2022,2,17),new Date(2022,2,24),new Date(2022,2,31),new Date(2022,3,7),new Date(2022,3,13),new Date(2022,3,21),new Date(2022,3,28),new Date(2022,4,5),new Date(2022,4,12),new Date(2022,4,19),new Date(2022,4,26),new Date(2022,5,2),new Date(2022,5,9),new Date(2022,5,16),new Date(2022,5,23),new Date(2022,5,30),new Date(2022,6,7),new Date(2022,6,14),new Date(2022,6,21),new Date(2022,6,28),new Date(2022,7,4),new Date(2022,7,11),new Date(2022,7,18),new Date(2022,7,25),new Date(2022,8,1),new Date(2022,8,8),new Date(2022,8,15),new Date(2022,8,22),new Date(2022,8,29),new Date(2022,9,6),new Date(2022,9,13),new Date(2022,9,20),new Date(2022,9,27),new Date(2022,10,3),new Date(2022,10,10),new Date(2022,10,17),new Date(2022,10,24),new Date(2022,11,1),new Date(2022,11,8),new Date(2022,11,15),new Date(2022,11,22),new Date(2022,11,29),new Date(2023,0,5),new Date(2023,0,12),new Date(2023,0,19),new Date(2023,0,25),new Date(2023,1,2),new Date(2023,1,9),new Date(2023,1,16),new Date(2023,1,23),new Date(2023,2,2),new Date(2023,2,9),new Date(2023,2,16),new Date(2023,2,23),new Date(2023,2,29),new Date(2023,3,6),new Date(2023,3,13),new Date(2023,3,20),new Date(2023,3,27),new Date(2023,4,4),new Date(2023,4,11),new Date(2023,4,18),new Date(2023,4,25),new Date(2023,5,1),new Date(2023,5,8),new Date(2023,5,15),new Date(2023,5,22),new Date(2023,5,28),new Date(2023,6,6),new Date(2023,6,13),new Date(2023,6,20),new Date(2023,6,27),new Date(2023,7,3),new Date(2023,7,10),new Date(2023,7,17),new Date(2023,7,24),new Date(2023,7,31),new Date(2023,8,6),new Date(2023,8,13),new Date(2023,8,20),new Date(2023,8,27),new Date(2023,9,4),new Date(2023,9,11),new Date(2023,9,18),new Date(2023,9,26),new Date(2023,10,1),new Date(2023,10,8),new Date(2023,10,15),new Date(2023,10,22),new Date(2023,10,30),new Date(2023,11,6),new Date(2023,11,13),new Date(2023,11,20),new Date(2023,11,28),new Date(2024,0,3),new Date(2024,0,10),new Date(2024,0,17),new Date(2024,0,25),new Date(2024,0,31),new Date(2024,1,7),new Date(2024,1,14),new Date(2024,1,21),new Date(2024,1,29),new Date(2024,2,6),new Date(2024,2,13),new Date(2024,2,20),new Date(2024,2,27),new Date(2024,3,3),new Date(2024,3,10),new Date(2024,3,16),new Date(2024,3,24),new Date(2024,3,30),new Date(2024,4,8),new Date(2024,4,15),new Date(2024,4,22),new Date(2024,4,29),new Date(2024,5,5),new Date(2024,5,12),new Date(2024,5,19),new Date(2024,5,26),new Date(2024,6,3),new Date(2024,6,10),new Date(2024,6,16),new Date(2024,6,24),new Date(2024,6,31),new Date(2024,7,7),new Date(2024,7,14),new Date(2024,7,21),new Date(2024,7,28),new Date(2024,8,4),new Date(2024,8,11),new Date(2024,8,18),new Date(2024,8,25),new Date(2024,9,1),new Date(2024,9,9),new Date(2024,9,16),new Date(2024,9,23),new Date(2024,9,30),new Date(2024,10,6),new Date(2024,10,13),new Date(2024,10,27),new Date(2024,11,24),new Date(2025,0,30),new Date(2025,1,27),new Date(2025,2,27),new Date(2025,3,30)];static finniftyExpiries=[new Date(2023,0,5),new Date(2023,0,12),new Date(2023,0,19),new Date(2023,0,25),new Date(2023,1,7),new Date(2023,1,14),new Date(2023,1,21),new Date(2023,1,28),new Date(2023,2,6),new Date(2023,2,14),new Date(2023,2,21),new Date(2023,2,28),new Date(2023,3,3),new Date(2023,3,11),new Date(2023,3,18),new Date(2023,3,25),new Date(2023,4,2),new Date(2023,4,9),new Date(2023,4,16),new Date(2023,4,23),new Date(2023,4,30),new Date(2023,5,6),new Date(2023,5,13),new Date(2023,5,20),new Date(2023,5,27),new Date(2023,6,6),new Date(2023,6,13),new Date(2023,6,20),new Date(2023,6,27),new Date(2023,7,1),new Date(2023,7,8),new Date(2023,7,14),new Date(2023,7,22),new Date(2023,7,29),new Date(2023,8,5),new Date(2023,8,12),new Date(2023,8,18),new Date(2023,8,26),new Date(2023,9,3),new Date(2023,9,10),new Date(2023,9,17),new Date(2023,9,23),new Date(2023,9,31),new Date(2023,10,7),new Date(2023,10,13),new Date(2023,10,21),new Date(2023,10,28),new Date(2023,11,5),new Date(2023,11,12),new Date(2023,11,19),new Date(2023,11,26),new Date(2024,0,2),new Date(2024,0,9),new Date(2024,0,16),new Date(2024,0,23),new Date(2024,0,30),new Date(2024,1,6),new Date(2024,1,13),new Date(2024,1,20),new Date(2024,1,27),new Date(2024,2,5),new Date(2024,2,12),new Date(2024,2,19),new Date(2024,2,26),new Date(2024,3,2),new Date(2024,3,9),new Date(2024,3,16),new Date(2024,3,23),new Date(2024,3,30),new Date(2024,4,7),new Date(2024,4,14),new Date(2024,4,21),new Date(2024,4,28),new Date(2024,5,4),new Date(2024,5,11),new Date(2024,5,18),new Date(2024,5,25),new Date(2024,6,2),new Date(2024,6,9),new Date(2024,6,16),new Date(2024,6,23),new Date(2024,6,30),new Date(2024,7,6),new Date(2024,7,13),new Date(2024,7,20),new Date(2024,7,27),new Date(2024,8,3),new Date(2024,8,10),new Date(2024,8,17),new Date(2024,8,24),new Date(2024,9,1),new Date(2024,9,8),new Date(2024,9,15),new Date(2024,9,22),new Date(2024,9,29),new Date(2024,10,5),new Date(2024,10,12),new Date(2024,10,19),new Date(2024,10,26),new Date(2024,11,31),new Date(2025,0,28),new Date(2025,1,27),new Date(2025,2,27),new Date(2025,3,30)];static midcapExpiries=[new Date(2023,6,12),new Date(2023,6,19),new Date(2023,6,26),new Date(2023,7,2),new Date(2023,7,9),new Date(2023,7,16),new Date(2023,7,21),new Date(2023,7,28),new Date(2023,8,4),new Date(2023,8,11),new Date(2023,8,18),new Date(2023,8,25),new Date(2023,8,29),new Date(2023,9,9),new Date(2023,9,16),new Date(2023,9,23),new Date(2023,9,30),new Date(2023,10,6),new Date(2023,10,13),new Date(2023,10,20),new Date(2023,10,24),new Date(2023,11,4),new Date(2023,11,11),new Date(2023,11,18),new Date(2023,11,22),new Date(2024,0,1),new Date(2024,0,8),new Date(2024,0,15),new Date(2024,0,20),new Date(2024,0,29),new Date(2024,1,5),new Date(2024,1,12),new Date(2024,1,19),new Date(2024,1,26),new Date(2024,2,11),new Date(2024,2,18),new Date(2024,2,22),new Date(2024,3,1),new Date(2024,3,8),new Date(2024,3,15),new Date(2024,3,22),new Date(2024,3,29),new Date(2024,4,6),new Date(2024,4,13),new Date(2024,4,17),new Date(2024,4,27),new Date(2024,5,3),new Date(2024,5,10),new Date(2024,5,14),new Date(2024,5,24),new Date(2024,6,1),new Date(2024,6,8),new Date(2024,6,15),new Date(2024,6,22),new Date(2024,6,29),new Date(2024,7,5),new Date(2024,7,12),new Date(2024,7,19),new Date(2024,7,26),new Date(2024,8,2),new Date(2024,8,9),new Date(2024,8,16),new Date(2024,8,23),new Date(2024,8,30),new Date(2024,9,7),new Date(2024,9,14),new Date(2024,9,21),new Date(2024,9,28),new Date(2024,10,4),new Date(2024,10,11),new Date(2024,10,18),new Date(2024,10,25),new Date(2024,11,30),new Date(2025,0,27),new Date(2025,1,27),new Date(2025,2,27),new Date(2025,3,30)];static sensexExpiries=[new Date(2023,6,14),new Date(2023,6,21),new Date(2023,6,28),new Date(2023,7,4),new Date(2023,7,11),new Date(2023,7,18),new Date(2023,7,25),new Date(2023,8,1),new Date(2023,8,8),new Date(2023,8,15),new Date(2023,8,22),new Date(2023,8,29),new Date(2023,9,6),new Date(2023,9,13),new Date(2023,9,20),new Date(2023,9,27),new Date(2023,10,3),new Date(2023,10,10),new Date(2023,10,17),new Date(2023,10,24),new Date(2023,11,1),new Date(2023,11,8),new Date(2023,11,15),new Date(2023,11,22),new Date(2023,11,29),new Date(2024,0,5),new Date(2024,0,12),new Date(2024,0,19),new Date(2024,0,25),new Date(2024,1,2),new Date(2024,1,9),new Date(2024,1,16),new Date(2024,1,23),new Date(2024,2,1),new Date(2024,2,7),new Date(2024,2,15),new Date(2024,2,22),new Date(2024,2,28),new Date(2024,3,5),new Date(2024,3,12),new Date(2024,3,19),new Date(2024,3,26),new Date(2024,4,3),new Date(2024,4,10),new Date(2024,4,17),new Date(2024,4,24),new Date(2024,4,31),new Date(2024,5,7),new Date(2024,5,14),new Date(2024,5,21),new Date(2024,5,28),new Date(2024,6,5),new Date(2024,6,12),new Date(2024,6,19),new Date(2024,6,26),new Date(2024,7,2),new Date(2024,7,9),new Date(2024,7,16),new Date(2024,7,23),new Date(2024,7,30),new Date(2024,8,6),new Date(2024,8,13),new Date(2024,8,20),new Date(2024,8,27),new Date(2024,9,4),new Date(2024,9,11),new Date(2024,9,18),new Date(2024,9,25),new Date(2024,10,8),new Date(2024,10,14),new Date(2024,10,22),new Date(2024,10,29),new Date(2024,11,6),new Date(2024,11,13),new Date(2024,11,20),new Date(2024,11,27),new Date(2025,0,3),new Date(2025,0,7),new Date(2025,0,14),new Date(2025,0,21),new Date(2025,0,28),new Date(2025,1,4),new Date(2025,1,11),new Date(2025,1,18),new Date(2025,1,25),new Date(2025,2,4),new Date(2025,2,11),new Date(2025,2,18),new Date(2025,2,25),new Date(2025,3,1),new Date(2025,3,8),new Date(2025,3,15),new Date(2025,3,22),new Date(2025,3,29)];static bankexExpiries=[new Date(2023,9,23),new Date(2023,9,30),new Date(2023,10,6),new Date(2023,10,13),new Date(2023,10,20),new Date(2023,10,24),new Date(2023,11,4),new Date(2023,11,11),new Date(2023,11,18),new Date(2023,11,22),new Date(2024,0,1),new Date(2024,0,8),new Date(2024,0,15),new Date(2024,0,20),new Date(2024,0,29),new Date(2024,1,5),new Date(2024,1,12),new Date(2024,1,19),new Date(2024,1,26),new Date(2024,2,11),new Date(2024,2,18),new Date(2024,2,22),new Date(2024,3,1),new Date(2024,3,8),new Date(2024,3,15),new Date(2024,3,22),new Date(2024,3,29),new Date(2024,4,6),new Date(2024,4,13),new Date(2024,4,17),new Date(2024,4,27),new Date(2024,5,3),new Date(2024,5,10),new Date(2024,5,14),new Date(2024,5,24),new Date(2024,6,1),new Date(2024,6,8),new Date(2024,6,15),new Date(2024,6,22),new Date(2024,6,29),new Date(2024,7,5),new Date(2024,7,12),new Date(2024,7,19),new Date(2024,7,26),new Date(2024,8,2),new Date(2024,8,9),new Date(2024,8,16),new Date(2024,8,23),new Date(2024,8,30),new Date(2024,9,7),new Date(2024,9,14),new Date(2024,9,21),new Date(2024,9,28),new Date(2024,10,4),new Date(2024,10,11),new Date(2024,10,18),new Date(2024,10,25),new Date(2024,11,30),new Date(2025,0,28),new Date(2025,1,25),new Date(2025,2,25),new Date(2025,3,29)];static usdinrExpiries=[new Date(2023,0,5),new Date(2023,0,12),new Date(2023,0,19),new Date(2023,0,25),new Date(2023,1,3),new Date(2023,1,10),new Date(2023,1,17),new Date(2023,1,24),new Date(2023,2,3),new Date(2023,2,10),new Date(2023,2,17),new Date(2023,2,24),new Date(2023,2,28),new Date(2023,2,31),new Date(2023,3,6),new Date(2023,3,13),new Date(2023,3,21),new Date(2023,3,28),new Date(2023,4,5),new Date(2023,4,12),new Date(2023,4,19),new Date(2023,4,26),new Date(2023,5,2),new Date(2023,5,9),new Date(2023,5,16),new Date(2023,5,23),new Date(2023,5,30),new Date(2023,6,7),new Date(2023,6,14),new Date(2023,6,21),new Date(2023,6,28),new Date(2023,7,4),new Date(2023,7,11),new Date(2023,7,18),new Date(2023,7,25),new Date(2023,8,1),new Date(2023,8,8),new Date(2023,8,15),new Date(2023,8,22),new Date(2023,8,29),new Date(2023,9,6),new Date(2023,9,13),new Date(2023,9,20),new Date(2023,9,27),new Date(2023,10,3),new Date(2023,10,10),new Date(2023,10,17),new Date(2023,10,24),new Date(2023,11,1),new Date(2023,11,8),new Date(2023,11,15),new Date(2023,11,22),new Date(2023,11,29)];static coveredCallPositions=[["NIFTY24FEB21800CE",-100],["NIFTY24FEB21700CE",-50],["NIFTY24FEB21450CE",-50],["NIFTY24FEB21400CE",-50]];static mfInvested=[["NIFTYBEES",.01116,0],["INF179K01WM1",.00962,0],["INF109K012M7",.0104,0]];static holdings={NIFTYBEES:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:182.78,qty:696,support:[180],resistance:[207]},BANKBEES:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:373.28,qty:171,support:[350],resistance:[410]},NETFIT:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:35.33,qty:1750,support:[35],resistance:[40]},ADANIPORTS:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[650],resistance:[900]},ASIANPAINT:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:3098.95,qty:3,support:[3e3,2860],resistance:[3600]},AXISBANK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[650],resistance:[770,850]},"BAJAJ-AUTO":{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[3300],resistance:[4e3,4300]},BAJAJFINSV:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:17013.7,qty:1,support:[15500],resistance:[19200]},BAJFINANCE:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[6500],resistance:[8e3]},BHARTIARTL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[650],resistance:[780]},BPCL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[360,250],resistance:[500,550]},BRITANNIA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[3400],resistance:[3800,4150]},CIPLA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[870],resistance:[1e3]},COALINDIA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[140],resistance:[200]},DIVISLAB:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[4350],resistance:[5400]},DRREDDY:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[4250],resistance:[5600]},EICHERMOT:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2350],resistance:[3e3]},GRASIM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:1733.95,qty:6,support:[1600],resistance:[1900]},HCLTECH:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1100],resistance:[1360]},HDFC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2500],resistance:[3e3]},HDFCBANK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1400],resistance:[1700]},HDFCLIFE:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[630],resistance:[760]},HEROMOTOCO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2300],resistance:[3600]},HINDALCO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[410],resistance:[550]},HINDUNILVR:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2230],resistance:[2800]},ICICIBANK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[710],resistance:[850]},INDUSINDBK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[810],resistance:[1230]},INFY:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1800,1670],resistance:[1950]},IOC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[110],resistance:[140,170]},ITC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[210,200],resistance:[260]},JSWSTEEL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[620],resistance:[770]},KOTAKBANK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1720],resistance:[2200]},LT:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1740],resistance:[2070]},"M&M":{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[800,730],resistance:[980]},MARUTI:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:8565.9,qty:1,support:[7e3],resistance:[8300,9900]},NESTLEIND:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:18927.05,qty:1,support:[18600],resistance:[20600]},NTPC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[120],resistance:[150]},ONGC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[130],resistance:[170]},POWERGRID:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:202.1,qty:45,support:[198],resistance:[215]},RELIANCE:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:2481,qty:4,support:[2350],resistance:[2750]},SBILIFE:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:1183.8,qty:8,support:[1100],resistance:[1290]},SBIN:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[450],resistance:[540]},SHREECEM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[25300],resistance:[31300]},SUNPHARMA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:829.8,qty:12,support:[730],resistance:[870]},TATACONSUM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[700],resistance:[880]},TATAMOTORS:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:513.9,qty:20,support:[440],resistance:[530]},TATASTEEL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1060],resistance:[1500]},TCS:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[3400],resistance:[4e3]},TECHM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1540],resistance:[1830]},TITAN:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:2330.5,qty:4,support:[2200],resistance:[2680]},ULTRACEMCO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[7e3],resistance:[8200]},UPL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[700],resistance:[850]},WIPRO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[600],resistance:[725]},RADICO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:1068.1,qty:9,support:[1e3],resistance:[1300]},VBL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:901.7,qty:11,support:[810],resistance:[1e3]},ACC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2100],resistance:[2600]},ADANIENT:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:1860.9,qty:6,support:[1750,1350],resistance:[1800,1900]},ADANIGREEN:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1500,875],resistance:[1500,1900]},ADANITRANS:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1650],resistance:[2040]},AMBUJACEM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[350],resistance:[440]},APOLLOHOSP:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[4e3],resistance:[5930]},AUROPHARMA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[620],resistance:[770,1060]},BAJAJHLDNG:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[5e3],resistance:[5650]},BANDHANBNK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[250],resistance:[430,630]},BANKBARODA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[70],resistance:[140]},BERGEPAINT:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[720],resistance:[870]},BIOCON:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[320],resistance:[480]},BOSCHLTD:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[13300,8e3],resistance:[19100,22400,27900]},CADILAHC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[410],resistance:[570,670]},CHOLAFIN:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:654.79,qty:31,support:[470],resistance:[670]},COLPAL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1400],resistance:[1750,1800]},DABUR:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[550],resistance:[650]},DLF:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[360],resistance:[450]},DMART:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:4704.85,qty:2,support:[4170],resistance:[5200]},GAIL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[125],resistance:[170,200]},GLAND:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[3350],resistance:[4050,4300]},GODREJCP:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[880],resistance:[1130]},HAVELLS:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1240],resistance:[1500]},HDFCAMC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2200],resistance:[3300]},HINDPETRO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[275],resistance:[350]},ICICIGI:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1330],resistance:[1650]},ICICIPRULI:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[530],resistance:[700]},IGL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[450,370],resistance:[600]},INDIGO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1800],resistance:[2350]},INDUSTOWER:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[235],resistance:[330]},JINDALSTEL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[350],resistance:[500]},JUBLFOOD:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[3400],resistance:[4575]},LTI:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[6300],resistance:[7550]},LUPIN:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[860],resistance:[1260]},MARICO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[490],resistance:[600]},"MCDOWELL-N":{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[860,820],resistance:[1e3]},MUTHOOTFIN:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1410],resistance:[1700]},NAUKRI:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[5100],resistance:[7200]},NMDC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[130],resistance:[200]},PEL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2400],resistance:[3e3]},PGHH:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[15400,14300],resistance:[16200]},PIDILITIND:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:2648.45,qty:4,support:[2500],resistance:[2750]},PIIND:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2730],resistance:[3500]},PNB:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[36],resistance:[48]},SAIL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[100],resistance:[145]},SBICARD:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[880],resistance:[1150]},SIEMENS:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2100],resistance:[2550]},TORNTPHARM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2740],resistance:[3280]},VEDL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[300],resistance:[370]},YESBANK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[10],resistance:[20]},NYKAA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:1690,qty:3,support:[],resistance:[]},ZOMATO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:92.75,qty:50,support:[],resistance:[]},PAYTM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:779.91,qty:12,support:[],resistance:[]}};static audioSuccess="data:audio/mp3;base64,SUQzBAAAAAAJAVRQRTEAAAAbAAADU291bmRKYXkuY29tIFNvdW5kIEVmZmVjdHNURU5DAAAAFgAAAExBTUUgMy45OCAoTWF4IDAuOS4xKVRERU4AAAAUAAAAMjAxMS0wNS0yNFQxMDo1MDo0OFREVEcAAAAUAAAAMjAxMS0wNS0yNFQxMDo1MDo0OAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/++BkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABJbmZvAAAADwAAAAoAACzlABkZGRkZGRkZGTMzMzMzMzMzMzNMTExMTExMTExMZmZmZmZmZmZmZoCAgICAgICAgICZmZmZmZmZmZmZs7Ozs7Ozs7Ozs8zMzMzMzMzMzMzm5ubm5ubm5ubm/////////////wAAADpMQU1FMy45OCABzQAAAAAAAAAANP8kBgVNAAFAAAAs5eu8Xd8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/++BEAAAFZG+/7Q0gANLv92CjPABlai8XuZ2ABKxF4zczoAABJJsTUgyuNfEAABEL67gYtz//XIxWTvIxWK0eqIGFwxk0aOcy4BwAAYcRgHAGAMNyIw2j3/75+CADAIEmWogQIGMue5/PfUII0aMjFYrFaxAAMNtqIEEP4f3Oc/BG3RAKBQSMLigkQQhCGWghlznOkCMVo26QCgkY3+EIQhCc5+CBA4LgADCYXBMn2HhDznOc///NGjbpGjbnOc50u3v9Q///hBAcBAMf/4Ph+yYOT0wAABBnJk02IEEPijxgVisiQ1YyRM3v//Dfv8KxDDkJwLmmxgADgAAACgG4eB/hqBDCEKCJr0gP39/SlIDxXs8fwHjyJrHze+///7v1er48BD0PUbPH+NfGv///SlKaze+Ice973vuj9/v/w3794nC2E4OhwY0PZ3jx48ePHlNf3hv1eztRBAc4h6PUhOCEFwVFWBWPNZhv499ZhsavV7+9H7+P6PHmn6GKCJl+/ve9KPImob+PAQ9X7gPKZ3h/Hv6Upq7x48prN9vFer48AQwIAiIBQMBgMAgCAAAAGDuWHkO2LQFuFd13zlNNDVe+yt170avJ7y+1CZWuOWsIeSVyvrqS9bhWITyldx2dRaN9lTNDDTI7yALiGAARdyjMzJU4KOQwQaEZDwI+jvhAYhkwlnbJnVwa5LNOjPxDKLSJulD+87di5EM6LKpZp138rUuFSAyENUnb5vD9UECMutYT/4WngfkoBKSXyible4wrXzed7faWR44Z2MdS/moIRYy7K4xfuVKOn0LAdWmuf3OVqrwNzGvbt8pL/3bFpcgoHY1atFWqe0Ztu0Fy208wkXoaaLZ09NHVM3cltJr872V2vf5+HKfv6m7X/////9I3lXB+CwCojQu3hT95UndZx6HP/////+vzIqViaM78uLJ5fH6t+anZi43G3AEBAHRwOBwMAgEQAAAdsYs2FkGVhGCNfOSytImJrweykj8DPNLKwkZWCc1ubQUAqecT3Qw9TwGrgFETKgwMLmmWs2hpymSyZqJpUp/dKD4sQQkMjIQSiEDS59g6KRAFHILWoy5/VL1QK/oHhfSWfQwxxyoAgiesfh3WNztDT4dxdCc7SSjlsRBK0Y5+Hy+V33LsbtZ3aeIyqepr2VnU+8bLP/Duf00dt8z7X+tS3IIjFrOQWtyzGnpJ5k8ph6V5/UqPBObpLNvPlv/pKammE+4RFKaHbX1G50V6k688PEoGmiF+Gbdiq8LUI/nd78qWEZJA//Sc33WHafv/////7t2L8w7Cl6u2/vY3YfqSixyrMzH/////8fppiWPAKgcnWlGEssRS/Kcqr6zCEAdHQ1gkiYEgAHaLLBgDAD+59JY1+80eOdf/++JEDQAHwYvP/jKAAP6xei3EUAAYzgc//YoAA0fBJ7+fUAG/CzCTikz8slIqFwN8A0ZcDFjQO+LC4ADGI93HGKADEAgAK1DIQWyIdJNsMuCBRH5RHPCYADLOwyoywhMQ8mSTNTxuJzLZoRcLDAuACyIRQV8SiDewbR+dFgHeYFwnx0DIE0USKl1KBESSy/ZZ8UozoczNwcIKqlo4vRZTN6tS09AuFwZcQXGTNFJKLyJwiwtIARAgxRMn0CAV/OsuZpuG2EgaC5yDlcuEwThPpkNIsTwZfAwqETuTCJBisyguHGs/zBf///TN3qOG39NMuDmEQ/41CKdRc0Vd0SkHvkoUJXbs5dowgdams5SoUW4JsMp7uFkxSxrdZMCzDgdE6CgvoLjGXAEAiUQKA2NDZyDlwPQEABWoZCC2RApEkEnFICiEHJsc8GoAAyaCgYvEo0+ykgtPC0QOUIGAEIC6gO0AaOAWFg3ND7BezrzhOGxcNDcZwWQRYxJ01SI4BIUknWit1KNTIuHk00zMi5uGQlkyTRFieMRXQoTemhdNKqbpugXDRZAyJni+UjImjE8XiMAaQFIY0hm54pPdftNzRBAOUPGgoMZsrmh0+LjPlEixeCxsDFuwtLIggIJDuNSaAcIDazb9v///TepTt9ablwuGn/MxtpakvWitKZC5xypiorM2V3ACeNACnBUUuZtkcrZ1fb+FLBQG86lUFNnbVpRTMiDIGZEQHDQDAAGBGBxoCiwBgiN1GnGdEHJJPeZOZEWHKAiJA/oILNCzieaia6lJJdRWNnMlqFlAmhGdILZKs1MTpokYIsgyRkmMaFnQMENAK4ABBRlR2qUm2p/960SAg0HijspO39+kvYhwNtwRSRZpqykfb95iTosJERyQHFwGGQpY2dv9X9EujGgSEJIsjuopiPTVv+qnPI9f///86iHykkkUVFbNQcwAXFkGzzQGnOJifqGlyRJCUIYy3U2mGAuDpLhcLBNDNAWE4EgcJ9GXIsQdajqI1Q+YvF4+kkkXj5HEGGWBMVgavFwCgeDIw7momqtJ3rdRJGRXSLpZIkBhYQikyClVGfdZiiaGDILdFzY3GdDIoWQgYACohqaP7//cxGNBtUHAovIlFfV/pOko4MsAkCAoKRzWZVfNW9nRKJFRSo4RSICBOAcegxkTzt9tJ3+kQ4LbBo5CkSSfrH4WgvP/2uieoav//YtP+dREaDuLyQxMQU1FMy45OKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqokepqZU2YAXTAHe/Jg+LGiCas54neW6KZEGMc6//viRA4AByCCzvn7pHDv8Fm+cfTUHPYLPew+W0OTwWg898r4DQy+Wu9yPKGiRQVg0DPo/ERlcviD+Tj6Q5Zf+RyiWWOzEUaQMC5yCEihS3a8ssV5XflEs3f/WGeVje+V5aIxJXEYuxuX4IrrrgxnDXLMbfeRxOH43L7bgF7FFAMO2C7h6PXUhT0//WTYapAaLltEzRTdAwZaCDJl8vkwRQqGBMDGh3wWekMTr/02TTUggiSJfH4CBkDLEhDDiKaby+bmBotN1Juggs3J8ToEg5eOpvQQTEVJwvN/6CKZfd3p////zqYKBi2bmB4jWZeJIXABAI+87hS5ic27rJJxvLTdrL/O3GWluN+f4aoXrIgUigg4PARKxsNPTzEojEeYZBy72nxByJzsARRVQwAIzjBSMEAKJ19yhgisbPIrNezBMr4USG/7HwC4uFMv4+H7/cB5T3vq+cw504HwAsuFkj26kOrVrq9aaAYMDjzZM7TdSDLLjU03UYMojBzQ2QBp6QBSC0GTUYrT1l9zBCTIwS+LoBD0DILgYALyJfN01kXK5ACIHSfdAvm6i4aHS8FwYGdFDWI4nJmX0zwX4EMJFl+rWo0MVmKbutTf11IVsg5HW+YkoCIWN8nyYLSs8TV3CqwFEWApa7TAZ9sclqPM/7Xl7PJWUBelbkPu1Mv7LKaVSJ2XFmWRONHWszr7ONm2FK6nYDCGtP1Kb0ph7UFlzTM0FFcW9dtltOlgJUcR+nS2KlPL7oylzFYmZiXZOS4kpIS4HMaVGJm3Be18Kv+4T6cdoDqZTluuN5rrNf9////MFgIMOJVVe11Z9d7F9avYrEhzmX19OXUFKLCyxf81xuuL1pBiwo266rk2AcYHCh9TEusqYniaJ4ul1BJKk6y6xDhCwauIKepJUUSZJo2RR/VopHzC/osk//7frRMRzSqUisUTabzMyUVgKPlAnlC2w1UqBHnEbJyGUrzwOuIdrMikilkOhwYq5IKOFXQ0NNFlUxlMRvgYnY+UCW4ym2KrY1JzlGCAml5tDjMKdVKKOqWLRuVRbVYMYuqEro6oj8nouJooTMpkO1Z9G3Be6hPdbzVTIU9KsjYyg1RxJ1Qwlc/OZHNqtitiujQX0eusPk8dT7X/tbNa5rX/D7cFiVy5EJNWtawdvXjM2zW+HtH0bL3T1vKwDjA6MPrMUaiZPE0RImSdMDZJkknRLqJDRQJElomrUjIixdRRb/VWmk3/9X6KP+mjKRWKKYgpqKZlxycVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVBnh3iZitFbpaxoVExgInBLLJgUzk2KSwS2y4Iv/74kQOAAcgcM19MwAI3e4Zv6ZgASMCLUH4ygAEWUWofxNAADTXTikrm3Rm2MujEou/FBGodnYy0lh16ngWAaWUYRbm5mNm8z6RuK3+27cA4xKlqUkksxGdnKaHo5JZJF3CdTGxO81Zs08tkFJRW8o9DUppa043F0AQZzWpzc7eprmGM3dtUvcKWx21Wu2ZZAT4pIRWdq37NWRT1bC7Xm7NSlr1MI/F3dQ5looKi09OQ1Wpqs7qXzk7Fbd5+dVLkdbtDEnBKpRhjjd/Pktu63TX9du5du9tS5vrNFqzdwu4zNa5//////r/+j7ZBnhnmImZJt5JB6uMRgcA3EgJRDTl1CB0eDI5OyxWgKDKkprwyu6MvPB8pk+cppbUMw/FIm3sr3Kuw1NU8pRnEiqteatB+NeGXjpYAhqxNRiOubZpH9hu5jDUBwmYkWGN2ivO7Z3HZrTs08huXJXehl9U9yEc5KZPZx3nS0k7+GfcKGxlU/O729RtDn8ZTVpO8q91zCpf7S/lvKmdJs8flk9Tdvcyyj9FnUvWp+rZvYU0d5QOi0lflmz2zq/96O4U8ktY4WcP3hQUzWb3dWp6/luXYWv///v///+P1bPQJCzw8vVA0gBAYJw8PQaHgf2K0i3lC1YfCWeNRFxYPPD+TIuUEJZai4RcagGeDACiwMSkFqIWhUaDkgIBgwWH1OmpGjMmo6TBlAYhaBrwwDTAAQCACCDHgOcpJly6VCcOm5XPADbBOIsgDFEgTgAKbCUIaRFAXQ4UzdVaRcD8A/ALhxKBUFwgZsugrmYrUahNpMimbkosDcACVHGSaJcMB0EPDSf1Cevumyaah5IGWxxFUQEJEDPtQYVEXEJyS9QvwGCRPomqB5JiArNCo6BpQLSYWFg1ChACBMGBx9oEwYYPABFgAFA2UQlEIQNCXBFYJpGongifDtHzEuuozDLoors3Wm3//+RceOdspm//+aDt6zBNX8zDzkIsiNCNAEwAgKh8PC8LB0HUhNz00aCmqutXBSdG6AtgXGrpnAAhAbeEhQtZOUGUaAmBAwS0BrEFEI+SKkNHaVCNJw0SA0BkDEtgLaAkHCAcCEABxn5FUzU0Lh03PoADFQMipAYJAZYoASiAkoMByRmTxGDBTTUzTUNWC4BAMdhOBekDQlWU+dBoBHgvqdBOtICWULjhlgSIUKO4nwQAgMkCDmfqGSffdB01BoQvx1CUhkDQEyoG7bgsSBtuHBGXqF6H7HTEnWZTEVmhUdBBZ95AQxaGRg9kDc2QN2DCz4BokBBIMYiURxAYIEAFbDECKpPBAjBYcfMSKpJHAxGSh761t///lwtrVWaL7J//8axCv0P1LpCaqmiYu86zfgCdQAR4LgWMfA/CmIU0hUGqyCYi5mj/++JEDgAGYIFO/z6gAOpwSYvmVAAfRgU1zem7g6LAp72NKzkOt4LcnxZ45gggOajJoM6AyUKwbzCDiJF8ulVEgIfqKTXSskXj5SFbBboBQDAaxCocGOUS9lotdVJekdMkFOWBZwj4BovB4SYU9TGSi8cLijU6YM0uDGgQCIGChoGvHNJ11P//7MRgAoRAkHRWxHP39+Yl0urKI5oEA+HjHetf//YukyakyIVAIE4CAUNJJG/9vqdxaQGA0MQkfWM+HLGLf/XOqXej//9/rMScC7B3HwrNfsDAALlkcyQJpyrMQMnSY4Gk6G9F5MKBuRAvmZVJ0G9QAAITJBUTFZ6YjKldckmYvDLDuGeCwoAELAKEMD6YPBQpA2yEyOpEyRU86VbzZBzFBSTy8LKACDYtpVpJpdJTfSmI5oeiBjIDAYEAIuUgqvX1/9aJDQmGS+fUj9dqtbTEfIyoJj0EQVGPLqOpI4aoq91JmouEXKOETaBgACgYcRIGByAA0CiDHTR71pOYmt1OksuiMQaAUDIgEEbmZdRZysEQAEQCMsRJJ/Ut3m6RuakimbMf1Vf/TFzGlaNaI0AMDAYPeIMXi2RtUPVQSAFsCt7qNJvNxZcrxuz6N84b70DzyWOKptXpmuOA1jliIDoAY+EpqyevDdeNxuNw25DDF2MQdyKYVIg47K3OMNVTYo4wICUollJzPedPG43G5fYry/6ljOXy9/HIXSZoagPle9YU9PT09PT26fPDedPDb/qZkIkWhER577+sMMMMM8/7+eefcMMP32AxEXQGN/K6e3b7+H5/+GFJKJZGKeVusIVaXj6XLGHf/eef4YZ7/mHL1T5iAAADBdl34fp43bwqSiMP5DkspMM8+/+6ZvyJzKYThzDllSlm89j7/dFJjcknPKZ1dqH/WumtMwJgIYATxuLUWqyZqUQgCVRBfcuabZLopptdcmIsudxsjqOwzB2GWd5x0HEwfiGFMSOriUmsc6eV08baw1hhjEHchyksUkvib/AleeacXgaRe+kwsVOb7369PbqM4fixXl7+OQ00rHIp3e65X3nn3lzWrdenp4nDaX4hCmNTMXkdfPPP/13uee89/////yhCw9Jp15Tfzzz7//+X3KSMRiMRuJu+DUJEgdyph+sKlL9PT9//wqUmE5U5UlAUBkYy7b3T54VKSMRiWWOf+sMMKSdWEL7wVcpKlTCoo9P3sGYz9ayp59tv/+wvb6B4DI6Th6YgpqKZlxycVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVHvNzdtXqDlskDlkGzgNBHjBICwsKYcCoSxODI//viRA4ABhWA0XmPFnDrkFmuMy+kIpHvES2/GoN5uKX8zD8kw9esSCNb2iUHyYnRsrVveKUdmxJEkSSzWfhrBggGJwvaWgqFWoahqhZa4YXsJmngwXr18+UxpKr2tZ69evXta1rb/Os1JiABSxRrYtWta2tb/P////ywlxcva1rW3/8Wt/BevmI0kWGpLCrWV7a24NcRt1hPmJmfMTNGti7oFMEGd2jWwxMz6d69YYu7fMFWl9JapGWDFrrwmZtjW//3X////0DCsREbu0RDEAAgADAXkqAPiECxagJw7CMHQRII9RnwnmZyyytOSyVj2q1bGYdnarIXGcqLqApEpirph2GY1Gk7zYvOhcSBS9ezsRUL1DTRNFUvaRWotxclWcqGoanVcrk8SohSiVzM+gxXta11r/1q9VqGiugOqjRua//Fq1//////8J+aLM+fPnz59aFWuva3/zVvElFhRr2LBtbbarYtrVs+Zn0aFG3luZx6R2AxnOm8SJ5XK6GcqGnKywmJ9GttqG8LE4Pt5zmK1IdF9a1rWtfb/6h2mmr/85/9a1rXX/xb1r8+2FMW5RMz4/i5AAoyAEKDAoZKBP+vKYbJL3VjMSgZd8NPHD3Yfgx+Y09kMXY+7cBxyDpBIp+HobtO8lSXGf17YysFXgyEq6hx0lpA0kOJSlipPOtAsmhqYlS4J68QpYRBej+JshzMulKf0itYxuq6iug1TkREKpXKRUszLDZUapW5bCqCPiPjP3XvQfTT1BYyuXKezavUFNX1SYymC8JEzZAHK6CZyznuRmvhnbs4yqdllmecBhyaBOatL5BNy+URq1XzvQ9MyB/pXYcWW09qUM5ZY0I9ZZtOYUlNfilHKKGITzkv7hVp9x/GifRgO7MqtUlNIYY3+s5XLY/VpaWmxmI64tCtFORnxFFxXZk26eeytSCW36lvGd3er26s6DM7REzUKy72pg8IxABsJwkg0HMCh0VByBEKTsJiymXA0oRwuTgRQgVQiS4v+tLjiRlBUMQkcgZHKKTUSGDqRTVgiGX5mLsMs6h6V3qlNIXaeaec5kMbls/QxHVO5T9Q9K6sslNaaxfqIW4ch7liZfyNQYz4VSRIdtsUqqX6eZjv341K6e7LpfhauzsTI2R2YMhRRuptRNuL5tZKIVR3D8W9USPSW11Hl1i0bO4OrTSetXt7appsbh7FfEhQsQ5rQHrpihwaxaZv4L05Hsbfr27Mu9f//7z/6966bnEx6UxBTUUzLjk4VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVDcslu9glrJAghalwY2aIW04HMlUkfE+lIl2aEv/74kQOAAZ9ckhp+G5I74+IdmWP0hxhzROn5fgLpboh9Yy+eVYunzAy8YSgV6uVKeTGVsxS+M6edHq9UD5H391oIMw06ZDDtvsaidHYvtZf2I5Q25MtfWJwJCJRDtiDJXHodhukuT8O1M7uNJGI/O7szFHJaRXIVCGaft0qarP1Mu41pHn+scL+Gk0DpIyRGQPSkzOqs1TqZE2c4zk4eY6ou6lJpKckkqJOLyapgSrGBwyDlAFkS+maWSSrs7+tFEcRrddSlqW316VdFMRlMTE4iSGNMvZRUAcApAC7DJlLqjfreXVKKZ9I84VDlOXaehmY9Kqe3RS54HCkMuhqfmZa/M9MsidtuVqrOyrKXVYPnEOZyCmgGwVOle2y2dlMWLwRiVtE8sDWV0ghPmjp7Yrj6eLiSSWJniL7+G6csvjlWavF5Pj6ExB7Ic9c8RXzK2wH1Y8dkrBf7j7zd5LEKObEX51C9a23imbRWFqh1yP59Gq1w6/yUfxaaZozcz21EUycZhFgNYUTI/iZq9kjUTsJU6a3j59mJBZTmYYcS2IUm4tZKMdm1WwXekywtEy+lQ+SiAsp1Ur650ssKti3VuJKwYWaxbv9BJNuS71f6tkIcPwI2LCzLabRquLanFG2VXCubIp+rhnbmRLsKGFySqcPg7TlfPlOLaO4uRlGYjmVUN43btWTCMY9wlrUjtTNtKqNAHkIU8N2KlVcbJbThO4d5+os6T+Jo/DUn6sGChLkwrB1M6+qcKqdLwpTuOo+BHhcG9lRL1JP4iKV2XjctZ3M8i4rLeJuO9eMkKFrwtSOVp93xD141cqlhbNU+4zltxzXEObNrfMWsjk+hQhZgRTub79sf4+/j4zX1e1zrF9V9rZpb/W6/0tPBeNJgIeZa6Y4tgtgG/I5gq0ASyk3LHrIiBka/Hnb174disGt2cGTS6G7ccjVLubikFONWe+EROBKTVqVtJmGxQpbKJz7X2tO9Ak64zOc56XDAw2kBkk1lMp2uyJor8wZYbx00fY6yVu0BNOib/Sa973Tr+td3LeMqikDSmapKGXRGXSevDNjXIbbkZtDWl1TU/Gbli/BUMwLEpa4ssznI7ckWLediVx6qmkPcXVpodYUGsz3W4ubWla3HEf63qr2l3uNZi4yw1mkks+OYi4vzuTPxSvxvP1/bOoutyb+fTfxa2bbxZ7PFiyvHM0U2QWzHEgvaAxIJnHd4kTEFNRTMuOThVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQABrm9bRAJRYcFhTJZm9LYrTyq5upP8npflNRr/++JEDgCWwnTAU0x/QuAut+pnL14fCdbtrb8bg806nWmmP9iMztBR/Kb8NRa802LSek3FXCQiWqjolm3jjN1Xi7xYBjAAwO80xgqRTOCWQISm0aG5MMysvC3jgtqkM+z1s5QFfRu2Kty8K0N1pgplQ+bSLhMHZUrWmlzs1JJUCpX0BKXWj95apbtej6Z6LqsrYLYkLLktdU+mVrPM5dbScsmKyHFOrbTabZu9ktPda05qkiuFeVdMZvWm4ON1+629I2qxcZ1LrGa+m67lrnOsPrPoTMrBzNJwKbbM3M14UEAAR5ZGiAARGW9ZawViT5ymcyv0U19eMvbL4cvwJMW60zLs3xpWUS9Uq6WAw45TjvekcmM6axWCPcCA3mZSyFVqORssAMsMBcJhy1TFaryF/LYWOAK8m1Mq1CrE6vKU5jlbX7czop/dvdYgxWuZhL6xeuq1bxCQ2TGi3o2xHUGsPM6liWixFdM52kl1fG9IdesHxcyvn0be42d1+ZIcbVrvd2tJ5t3rq1t4nrZ9qE+YZKwn25I1ZtRYNcwfChQvLAi4808ktZ6fT7FL2vFzjTbpRIoWYQMCSMqc5ssrYom3IAAKBcu9jYIMIJwAAl2V0rtdWil1JDMVgxiTEmTSrdnXwzSQ9KKdlSjrX1qxKtDatqXNh2W4FtoDgNrrLUxUAqaIGGlZCITNAzTsCgx8aHQteDNmdRni2n0bHPJaLadgVx2lor3ysQSiV5OVlIj0i4uJ+wp24nTs/WBVZi1YkOa2FhG6DdJClH8BRH8izhSSNVWVauFqdlZjeIVBq4+tI2M/vo7DM+xea+oU72FXEIYRxXxGhPczbfQaQ8QI2XurPn8TVHz4WZVWfQY33mtay1bZrYtBi2i1tvb2FvOIT61Wtbw7SxrOrhnegpCcLSQyaU40WjU9+u0wLzaNBQClX8WQkk9z22IHvPsxKH2UurVpdzcALmdehfiLwy2YEAVLZVMuSlTGXQVTSuMCIAxYKgQcdZyhwQXMEDYco4nOYrqdA9G000OTF0vpc0RIpy2g9iMNRiCGDv6piyWK2YMdCBnhYjOMuj0jgFbnmRKH5E0bnUK2K1iEB4kpniUTpMU1oqsnLuNWMi01CYnsTr2oZOjaXrZgbPfd9yF36PX5ovFoSlbMXXr1WlzcCFHY6bo8cxQoTEW4L5+wzbYma0HD2WS0jk2OW/Fgyq5yfOTLlvVM00rLbbDFrGexruOlonhXgD4ZIQBjPUyWhzpMmIKaimZccnCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqoBDnqIAAXAwQAwUEXdpZx2lMmDOS5L+yy/2WxJ//viRA4IByZyNDuMf1DhbkaDaZjqHbmisaxpmIO4M9Yo/b8BrVFGs6vO1pVLqv3uuCsK/DDnGfZYZU0fiCEpQaB40WACUB0wmCzUUFOYQ0zEMAwvhAlam/0Sa0rqnh12UMTAgNMCgZHJ8V0nR+IrBdXW1hsST11pqOUrrPNLmjJ7l0NDpeZHy67rUZjRqOBc02erTltb1Wvms/lrMmKmWXtrzR9Z5KuaumMlWbrzLD5ie8ycrly7eu1Gu6A+OSaBY/JuLdOT1oyehJNzmL7u9z3e6tml6rFrLDEnbn8WEwvJ4LLYzAAcAnBwkkLVKIgAAz8gSxGMBt0adTXFMnTkVBD1ezGYrDLDZfFXary2gi2FNcjUNRZrTRUiZBKYJjDOpXHH6cJ1pVDK2BIGbK2fLCYoUguhrFXCo8aFrMsf6Hqd9lhn/hKUST1glLD77JQIoDX5nrVpjFY5XPetrQ+TAk4ZPuxetd1o+tXpy+7zJzE03Jy2Yu2OTE9WrbacuLnrWZXRsjkO32Zgy30+I69bi6Oh1C66mMYhKbaAsfqVunJiYxQ0aOqWKw7XbofJXstJWA8ndMkIyl12pR8yfWHtOi9jjLRITBmjEsYePZLNEly72JEAEqRjeRpzs3pTQSt2pPZWktaU0EujVl9YrNLqWyhqzJqcPl/WGF4mXlnVmvSg6oqaCl2S4Ja1xHGbCAgoIXQW6a3AdUMZw6MAlB1aQsDLato60MsKQBP++ipXFYCoLGFhm2jzrJpIbQW7tmJMOa9PNLjJODVSypXFYdm+aXLhKOxCVuycntDIJgIoAlEEDqlMJR2Ti6iuOJNcjEFeesnqYyPruy0uslElQSi0mVHLtmWD4uiU8yST2dJIirySTXDJOTUIlGPHKQrgdSIzmMcSzZKJIkk2B1olFq3wAkH2Xd8qrASHZeEwfAApe97GiQplFCUTa4qVUsUVPKJcqlPR6MTxVJ1sQpfElPpRbTp8EmTs0GZ99naAkiAvpiDEhWSmiYkBmYvxwpoZAdmDBBdMgCAwBEdDBMlWoayEGQpWqYgIzQviTZmQ5sXZBThHMCqQ9CT+YC3IVluWi+nC/EeK4bpLWQnSnQmRWqZVKZCkSaKpRSho++JWXFVKqYT6rcopWXMWFKytSifH84GktobEa0NeOy/IVBgIdHexV0W1UIc3uJ/NKtUzp81q2SNBoxPdIoyhgjFYtvm5DnJSqGZTGkxmk/cSfC5Ks5ScmS2uLFOnVTCjQkSYgpqKZlxycVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVACBKc2/9jaAIDFQkd1AF1tMUvXQ/dHS3qarel//74mQOD/iLaJXrODZgg4zzejzD4kAAAaQAAAAgAAA0gAAABEzLHVcp/XeTBLLAQ0QpEm45mBKDJXNAIWjGmQccYQYBKAqhVjMJIDLjxC114J7pCM0g+OOmvwvUAChdRCkVCX8RTRoHjAZplYDKjtirIKrLICR2OsGXarcmijKkopmrxizJWtOC3J4nrhyT2eSqhlkVjUzqy/zWW5PXDb8Pe3rBlAUbkdUXknky1MFrscZs11lTIV4tUdOMTb7Mxao0t34Ei8Ib5TVHpGVAgn4pWpos9SKPyCUvsKDQZSkUrXQ28CRuMReenbU6/TOVblDVZlZllsgZ26j5uq7z6iRBNBc1JIGAyC0af+Wf5REUJEiDyCakiJxSYBJL3/2Ikf63W1ZGttkvjOJZIecZxnGcSyyZpfEsl54saKzIaX4wTYNg7zkQtKIUaJvHqmU4o00jjpL8XUmRMirL4hYxebk0/mjRQu4uNk40oo+FokiIoGDjoZf////////2W//8mRq1lsssstlhkd/8mWWo5MoYKCBA0cjJlWWcoIHUmIKaimZccnCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqkxBTUUzLjk4qqqqqqqqqqqqqqqqqqqqqqqqqqpUQUcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABTb3VuZEpheS5jb20gU291bmQgRWZmZWN0cwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/w==";static audioError="data:audio/mp3;base64,SUQzAwAAAAAAJlRQRTEAAAAcAAAAU291bmRKYXkuY29tIFNvdW5kIEVmZmVjdHMA//uSwAAAAAABLBQAAAMIQ+rzN1AAAQCAgDBgECBGDDP/99NXazg4//5w38zMeAP/PMwIgM8Is3UBpEihZV2w9MDHxGAyMKv8LkhCBwMQjUDGYP/u8RoKEBvABiEEjJf/og2AA2MEiPsG5f/3wGAWNgfAeoAEHyJHv//wMBAYAIIDeF+AKBQFAWNgagao///8AIPjiJwAQAAFAQhBrgGgEBoBkIPj//3/28R4AUDx3EQBvgNjA8D7CxsLTyRJQToAcAyJf////////5oMoMweOjLjjY4TguNAUBAMOgYBACCBBAwaEsxCreXFUd5wkHUw/PwwQBoeAC2PBRQigEFg0HtIAasFUIDiocMGgUeAVlPaOGJAyKX4LlGXEoEHgPLVDh4RmOBYABmIrqYcSHypbJEBJulkJQFFiLBBYVGIwIj/9Km0syZj8wvooAlx3SALF910NVIQbTRpGOpKqKbetSVenegABpIhHYwAGDBIQQXclNixQvErTQ0Dk3pZK3RzowsEgCE0UEO4hBZgAMLER2MCAaXrOuXKRetinlUpYhhLq//7ksBlgCvqH2GZ3hAC6qrut7GgAi95iZg0hBC64dRUBoJYgrOqcGAqGFgmm3aTNrVbnXR5PM3q0GbQa0cycaXRsvQKAhp8VS4BoJa4tlb4UBHVVkSBABoXWenk5Yei1S07p/GsHbsRl0rMYrvjWorT6W6aifzvJM++EzPQBnTSGAP//////////+Wyx9J6U14byiWov///////////4zkXvSWvRS2IU0R0IEyMlkqSbCHIaHKRQb+jnVYLeOqaMF6RJjcq0aW0RBLPfyfLF88qtoqjTjgggdJ4Pbq31LAXIKqCoQRHWWxSXTcqtOnjdqsJMmZQAto/UaVjmWCP1KU6VSiWye7zl78e/arMiot46x+5z8dsI1vX1Pu8/P4bkPM/zy+9/Nyl7su/WvXZd2tg0V1rV3Gh7Wm8qDJ4nf5SZXL2UP/uzZW5zDu6P5D27auM15c5cs/HtmrP9013SdS9mp8ieDADgyVbbZHIaNGNryLGRBK1D/+5cL0CIFlGVR008ef/ybGBMaSNDgpuDRWPfN6+I/WnH3A4Uj1lt7ORjt3/+5LAHwAS7VmB7OYtkmKrMH2NTbK9DgEMRJSdJqOpAwLSACuaeleYH1oHQweitpenDyy84zRCT03nWoLG6jVXUevkLZZmyzSdYXaUynXlakyQq3TnGkxOrLBDZymfk9n0hb3TZRvI/K/KdtfR/VEGAJBoyXbVyQqPt2jUDZEDWrf/0Ew2pOKpngnepjW1+L5Zu/9zNuAkZgSX8oZzTxauTjSThAnlgP5JAvIGvUMgccQpTIlDRhgojHniUmYHCZvLUnI/IKKqQXMD0Y6NTWUNdFTWrPVrFpHtj0wnEaMwGLTWddRVoMN0qUaz8qTsjx3WnGna3SGG5nW8u2c6QCdz8uZbtp+r6v2A+lZLK22xAI+ifBhbQiWVk5/3IgqqBgR3fU7R4+1j9V7LbodlUZHRDfFi0R7dk3sx3k/JKAZNcalN65C+wz3c7FBGgtIkSkQNxZpJmQ7ygBi0zLPKO0jyk0Ay8VDp+ZVnlHWFykKgnL06WqpODFQTpOcN6UfAxaS2c4nSYao2JlUfUY2cfycpTjS9U5ZI6jMWk9Sc4ObQdapt//uSwE2AFIlZeaxmjZJxOC61jTW6lfo+nsr7a3batiC81ZJIikgxpA2XF7OtwK3c3+4AjQcGVyiVt4ROr+HzLHJQwHCblgjCnJDN++l+w9unq+biiyzRkIvAHKeFabBrcghZiDOE3RZwNk3TLcnmxEdralOtdYQa711tdY0JXrrPUVCEKU/O5bRjMOtGcy2tisXqM48pTlEWjI1NNarC8xys9Ls48WznM9MfNqt6vS96vR/V539fndpKoJwAArIle3aJOB+lJs+YhmSAJ+4d+7cTiDjRXKuQAIHb/krpakSlr8wAMMn4lIa1m1O5x/VXdkjAhFrVDP9rzk3QyA0yKOdnI/ZuSSTUlzo4okieTKKZWpFZsBcFJalu6Jou45iygtJ2PKSiGNLUF0ruLA2Wpj7sYLSczEggcWZKYoayoWrJOcWkSzH0xoJrIMZonB+Z3OhfEFIpHkB88sbU+1cx2XqbmG1qvQeu9bL0X6s9zkyAAciTHdawmw0VwKdNrMgkR9w7/I065EDmvReEkUufwXvsM/c2zAPLAk9Y3B2n4+SU6v/7ksBzgBaF2W/sZa3ClDttvYw1uKR3vGo52hl2cA/dtS4FpvZXtwjkN3rlHdC70TmYya8+gE6KDtQrbUNaKtdR6lNh0c/TrPVRHaM66ijaiK03nTyi/ORmLqjKo/KO6QpunWek+ZzgnsyZRrNt5Tq0J3ydU1trS+ynrnPMmvbPWnHvXVrnDwCJAAOyBUtlJJYpSICCWx1yS4a1wx+YjQOKEJLIMqRVYpBe18F/ffrK1GR0h/O/UA9mITp19UFZVM44jdbK69mEEfdtykbdR0Nm5Q+6NvsjrGaTqzag60Fg4U56bzrKMWHKR1POTh6yxNyDVRaWU4jj1Kp1Jzk4L1CdrNrsThvnai2Os4kRRjLMaJZHZMXTCWdNjicdu8lKtGzraRamvOty696E49pmeXpZ6nKt7VH6pw9VAAFAgqaTIAoKyJWwWDArpU0Qhw78xaX+hdUr1EdxonDP3xywe3CbsIzgeZf7kT8ARXsU+Y7GBM2QRPtSQ/DfKHKgFrJC9eObQsmYWqGRVTdRY40slWaqA6Gy2oTu6xCJLenU14up2nL/+5LAjQAWJdtp7OGtwq67bT2ctbij1CMxZacy2m5EHSnOvLJ2Zi2dCo/JScsKzGFR6Sc66IXxjuWx83j3q3nNo+VNQnXvIm9Oo/eTXtXUeoScetVn66iwmQACgAMonAASGfDyt6wSGmSrcDgdznxzNGsOIUW9FV6KdNZ7BPePPyZphwJ4A4r/WXqz+R/NWXiAa56lvXIv2Q9oexMBznojR1X44/05Q4ZBNLis/pVD6CRk+oP6q8oYeiNMZzUrZiiNcP7tRu/FQ43w6lY2Lg8Mc01V4N+rFY7pP6i+S91EQiw/UWx2b11AS+rl2O/m8EjiojP1FY38Vv6X3Y31N6HmfGaLw3Q1DLneZQ3fSpds4I0QAAUABk42AAAxkOJPiz2ZIaglfps/uSlCpCTfqZocR8ee/4Jv5v5+FOmQCzXkgPk1J/ezU1GEXxmKbgDl+T6fblDqGDSIs8o7kV2+ON2c4LPMpphM2n0wbpuvNKz9FQPZrPTacanHYL8/MWOG9o1C9SUZtLKTi4a08+spTkfROLVH5ytnEi5jOZfs6xhpys9N//uSwKUAFx3bY+1hbcLhO2x9rLW4WW8Y9bT0mup45HUepSY6z0erreZzp+ioakFPTnCyqP56fmLnVU8jAJcAAXADJuMAAgYAloIygQqjMIXP2rH7lK4yIND9yuqoLfW8fg2/lBuUkujoBtgv1LMrkH7g/7lluBzBwJKp+ZgbNou5Lecs0X7Uxf1A/Zy/8mzMoF1NMZXXUBSGy3m9R+bxLSOg0xnGqUGApLQmFRbeThITVR11Izri4b0Jx5QvQESyVR9RIzsijsWYMcPyUz7CiyTKNY7nW8Zp2tOYPPyOykJrJzKRULJS2mErPz83LHP0Zw9RjOmtCcnShQrIywAADgBlE0QABFWIt0cqqKtBvfIsMqGPuEHAG/sUJAknNZy7EaegejOnrIcwPEx+GI3DEKlMRyu3X2CS4VOS56a9SUSeW0LWAs1ev0dWR1oIt552DDEpm9HdW9ylhzBpuq2zTW3dc5EgfX3WNaSPfWh3KjMtJ9XfZzp+bVZPApt3W8Y2Gnf1Cxlj3NVMJWudX3ZuzSnLTUCsltxq2s3IXvU0KmW/ev/7ksCygBft22PtZa3DUbtsPay9uK2P3OqXj2Xq4xtA61BxvdHUKnP/OottZbZ9X2et6U3PuBXFtvXOWXF90WcUwu3EvAAoEV2ABNJRzgVALIhECM3k9XVWA4CWPcrYEKAahFZVjWc+w3PGUw8MFnQU/MNY3IP9u2sYeSdMSKUyq/dezj7c1PQOIF9YyerGOO1OVYpNmI/fE+ZPWfNLheucCbLb8O8ybNI+rxO98jvwdM5aXp4upXDwee5aeDjc0sDwZz2NfwfmbML70eyj73yz9h96ry5xbwt9l9ZpTS99SZ7jWTfLl86xG8ebGecWpLd92+L69onk343X5/bpx3ivm2vT+N0g7zG9NtVdT9MzRAAAwIIckgAADGUDpaXv4nuUvp+prUThkSBUlekeci5vZ/chdd9s5i2jIA4W8fe9be7F6fmIusg4kYpAfaSE7bHvUjhBksZzFHhAuLd8dSaYEblT0Zx7KCAVaZTh+ygozWenKj9JYhyjPTmWUozjpSncsqcqF+lOtKM7SFu6Vbzau4vudqPy9OtFqx3PzJ1PHjP/+5LArwAZhdtfjeXtwsE7bL2stbi56V1PHC6nnpXUfjuZT0ZXtGpC9Kce0iZ6ZTh+jIrAegAAYAMmpAACG4pmMkYhUFUY/On8cLk2+SeEsu1B0kMJyw/CFZPz8eqjoBsgv1O2pmRfJPudnib+T0s5QXdOBlnInuNxmxBn1nn7IaO5OzIjlqebSplJohPyxz0xlTzeJaR0GmdR+ywwm6k6bqLK4jyNPUXUjM6QkaM7Ub2cnidOdnXkadcij4swy2SM7SC5ui6zZY/1PGVOutOXHn4xpzN5ifpLGOio/NpWepy+eTPzsqPz8nFBS5m0j0pF3AA4CH+ABEEgX8VqpBWaJxpfcwrTKmih9Bc0VIho5dd/CRcg/8rDMw8TzwR8lnvenUcplknyUVjlmmkfwvm5HFT+a/JLF2NabFqgzrADCSnmlM9PpgtJTWeWXpUy0FglCko/LlRbPuJ6L82mLHEZyKpRpzB1FOjMxXm066y9OKGcuTCdeU7OgKLJVn5JTGdGicrNJcWo/F6t5tJzLSWLs49CTD6z0gH5+azpYtJYsU1o//uSwLcAF6HZY+1lrcL+u2wxrDW4TCVFs0mZGUfoudKUxjO4hgAAgAQr8ARJZHuYQLmB3CHfqezhWpUuQxE5eq60Sl+evdmGz0rTOUNQcFOISHZXjQ2Pej4MuqoGQzGJVbqvNm7PbsijQSTRZUXvZyH71yT1TLPY48zlbLnAIZA60uzh6aOHKGxz8/ls0UJoLZE0mE4bzsNK6UqY6bUmIoiprWfkamxiKDJzp9Y9JU5EE/UVuZpR2zM+cCqsZMooyk8/E7qdRosnstomk5nZEQUioT5BZ+bUSyelAtnpvOFtONZrQnJWqcjOfegAAcAIaoACNERNMpCRQEu0MPV62HZ1JEMCQXjNjAgZtnl9yR9jf3a6hgO5gTHVDIPgv5qxDYaVI7uVDLMIK+7P0JNffob1yb+Ae50eQOMc46zKYn55EEfKKeXqj0+oEuUU8u5bTUEAlRpOotmENJTmt2WUJ1hdG6bVH1F+dWTA4WadeT5xkxSdCdaTq3cRbnWUuSLT8SicdaMkXnol8482pHkj6Im7LeazAspqFxSkZq5wtoRdTv/7ksC/ABjZ22HNZa3C+ztsOay1uGtNjpQnZFLQ1AAoBECAA4RZhhy0YCIM0BHERr6g3iBpdd3bkyVNjMEd23OvVqNP5amoyMjHCGuqzAzdb0SjFqhnm4m4BAvz1DIKWnnal6CAdRFakVmoXTcgapdqCV9I7llYfQ1q8CGC9R8R9DaKsCNox0COmPEg0abMaq0/kC1DwnarsuH6i2yZCWkPmbIathxFLqPEEFNerfRTPNpjUbQ0mWEwbUryyI3BnME/IMDalvBO+LAcFKQR7dxXW3x2RW6aEPXG7ttu+Ui027qLhW7uC4PYaNx6ksvAcZFXGhIGS9jjcLuUq2+fmNl5BWUfDfZcILwvNGeCpTzeAABgAME4wAAGfCwl6GRTQ5jDuFLY+7NBwEuFYr4DoQ2pId+9V6o//52GZh0UDxztWi+F7qy9NocbmIDtXny2ynODNtbOdu12iuxbTYMrk/mJUnzrzOYH5qgB2NFZvUepLBKG0/NZW9COMWqjWTnOmk3jSJGisweR6LCPNqGeUSs7H4TufrPSup2FZjKdy5djgmL/+5LAwoAeSdtZjeXtwwQ7bD2stbjHajebOpoxKnn4/MtowbLNpjH9lH49jxxphOFk2WLFNbTSdLZ2NB9Z6ZMVI0MdQNwAMARMgAJ1LyMCBjBAdAWAXs4IKCAyxfhiVOKHArA4m/6Cc8AaaYpIhexkn1dkIYGcV5YnKGE6kOdeH2Hm2JSSmWRCHevF2gjbSDAQqWZzGQfP2OxeNgI5QV3d9118Q4YLtZtEo8zdw7hILkYmo3Yu128sMQdNUf3f7laNRbK0i7vqwtQ32mqIQNQRIeW+bC39b2M672+Yt1dRqwiEXuXw5uz68Sch3gx7uXTsSBqAZuYW8UyxzZcKGrHzHuzdSx725Q1hX8Oi4cPEoqFvutRu1uWYVDO+Id2/TUq7x8NiDkAgAAAuCAQ5J8xxkyjM7Xk+lM0wcwQdDZTJa1DZhmlepZwJYCrSK/S9lMtqPqlSZFgaLquy7r+zuVNamaVeIAGgNh2mprVWlwpm5Fwmaxq7GYzZxlM7VlK0S5IdKhVr1W31azccyvLi4RYMXLDFoniVCElheq1WsuoL232b//uSwK8AHBnbXY3l7cPTO2ohrD24pCVn+uXsXD45iFKrDCnWWsFWxdyF9ISqYL17FhbtCVyihuL58+1BVsXDEW4hTMwq17F8F69e2UqpxbdYSui2YjmOqNCYldFqwq2LqEcyir8xcPsvWFPKrMj59GsnmWLhiOZCrPnz2m4L169mYoD6NbDEzWyxHMqgLaX4uphGaZhvnQa44hbRhDtI0QMcg+ycIQtxcZxmEwp0/kSkkykEWnE+/iX//rGVzCplyvLtsY2CBbOzxaiJISKAxB5h5ZRZRZR8LSInFlHmHlFGnFlFmWgjUs7WzmnGlFlHxeyzs7PRxpxZRZlxG///zJxpRZR8XbOzs+bRpxZRcBlNNMNCE0wyNVVURMSqqqCaaYYgrT9IMSqiDwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7ksCKgBOhUsgHvM2IAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LA/4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uSwP+AAAABLAAAAAAAACWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7ksD/gAAAASwAAAAAAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LA/4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uSwP+AAAABLAAAAAAAACWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7ksD/gAAAASwAAAAAAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LA/4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAA//uSwP+AAAABLAAAAAAAACWAAAAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAAA==";static audioWarn="data:audio/mp3;base64,SUQzAwAAAAAAJlRQRTEAAAAcAAAAU291bmRKYXkuY29tIFNvdW5kIEVmZmVjdHMA//uSwAAAAAABLBQAAAMCQ2snK0AJADDABDGJBOCD1MB0aTAbQJXYDJJPCEVamAyIEAMUivQgHhAM2r/A1YMDcpwEkPvgdRYCY4DIBA3z/aAaEACUA2HAlcAy5//3gSFgYkCIRA2OB9w9j//CygLaAiABaOF2g2DxOf/7/E9icxWgBxcEgACggBAIFgAN3///+I1C4cQDEehicjgDiYX4AUCBZIG8f////g3eJiHxiCYWsg2HFWBkwIJBABjABgAOBC5swJ3/////////TLRNuRMwJwwbAGAQEBQKBAIAwIBQKBQAFfDqwhM7HUymRTUhAMKhQzSAEijHIRLag4ZCIDmPwoRG0wKESgFiADl4QeFNUxXoxdVdIkfTnLJEo50W5wAYgCtCGTQBTXHU0zEkFbEK3eX4mjAT5vMaM8uAhAmONgkAhvGn8fOHGtxheTWWassBooUCwGMCRgJDjSGcSFnDLIMdV9atHD0jHAwVFogK3iAQDQ8oiFihpYm/fvs0p/ohGnGcgKizGDHsR4MaHUvjJgBUgfd+4Ejcbnbtabr4V//7ksBmACwWH125zQADf0LswzTwAZa5MQuuiHAEYgqFIh5ENYALCSYc6qIwsRl8jsuXP0ED27GUolVHXn6k1LYrcjMMiQJroKJBwF4AABRqX+iEj6hSoqXOLNMKnJh/IxWjE729aqV43FKtmn+zNSqXVKZ3q+U1u9HYZ3MRK7XjsorST///////////l8Uq27NvOJxu1G///////////+WyjOI009dnq2rJlDBpjZpmZpSZygChBZZY5fvBL1jqQiI6GCSCxYLPIfRjtC8dRITpU6PLwixMl2kSWHC/SSXqzIQXVpaXI/o7GhSpPOSCdDgn6tzPaGkWSMyqJ+1qOM5wGFmbpIKpitivcMK1ieNjJmqvZ4sjc+pqu3jPGhNr3LzUjg507ysfUGDiyuzLBZZ5G6PmM9vK8mvRntp48zV/PPuHXF8VtCnq+rR/E1BhWo/jYj33Szynhv5t6f4xWLFxJan+qwfuWDqkWNiFesb////////0xq8S/fz6x////////32c53Pw2GAzmjAXNCESfK9CZFFCXKaM6DBW6JUsge3/+5LADAAXqeNqGZYAAv60bUMy8ABiaym7RAVGx0tPQ0xKAwboZqf3FSE+VhHKC4maW0Z8dI0xWVnzi9DVncKXH6FZ+JMvokPLnatc5N3HYmk7mIayjDr9bLKwITVYouZY6FJ14I4T+LFltf+03+zes0+DI8gj6B/fox3tx0Y7/t07Ss0zsvFl4uhcrrFdvfKZr/Uc/b7lqxdlp2cvtf9jvg78o9mTMzMzMzMzMzNKd9/ljgP/lhcNQgaNSIQkmU6FQAfKTMDSMCBhD/kRDvrWVtSLkjA26wS7HkkXKEaaigD/esC5QxeQpPP0kxoCEoF0tu1dFjQE7RcRYDSyZ3twdXbXG8Zhup41XqvisctYF5oUeLp9BxAgueHl8ySUvPG8KPG0+teSLI4e9HdY+dWiai3zBruj3Wcxc2gw93ix6PK+0T/wMYjz219Y3F1Cz8T28LGc3kiZj03LH+rzY3rVLw8/1pjG9yV+oI0qJv8ocBI4FhL/lqDAXEgAQQQQ4QgQgkw0nCZIwjQoccgKWCDrkkwrIVAH/eBYyfirIzDzEiUJ//uSwBQAGknbbTmXgAN2MzC3NYCQM5YgnirW4kioXSmZ4DGnrroNAuEg4D2ZLocw0bY0FOVVike0xCjxsYfblZWxEK2EkFbZ5AxHj+FGg1o+nanrnJFZ54ECm48fEsWuLwsyUiqOule96vpjUfd4n8HwbZx7fMV7O/YZ7vXPT1zj7zTVcZzvPtauaW3mucXtmJBVby7O8nfsDlDgOVa41X3z6aznOtYr5bZx7fP////////xPrznAIn/QFyjguaQDgKEQjLqbMQaDQaMaRUYMZYeaxQcpOiHL/Mm9MkGLtN0lNkOQgJuggWZSzTWiErF4Ah7LZeIWs0tXr7vjM5fcPXAahpAOg96SEtZNV5vLIaAxdeaAVfzDIhekdP+OOHMoDYG0iy/TNKV24bv3e91+946i70Nxe6s1t9LUolFFlSUX6//5/6kcPNMoo5KXltOXXu2rGdHKNY/+9f++f+UG5U73xSYfaK1oYfe3yy/9PlXv35RSf+PP/L/3/639aUve/EfeqKzr+O3LZS68jmZ2Ylk5Xu016XyOWdq52AAlWV78v/7ksACgBdBjX05h4JKxTLt4zDAAAl1669FBdRWINgepmMMDUwPmvgSm9tNXRXTETnZfGlfkwQB/q3EoM8lpUjzJYu2G+pCZCZMCNLeKQsoKusV0WFaZzyTSGTSsjJ//izYoELgqdOWTjJFeKzeLf+r9IHu3MaKVryAwOsPHnzX/Gfh0rU2tbQhosh8ZsdM7xgc4U1fv/OLfG38ykXocNSt2mJWq/wGefTPfD+P/9euv8f2/jVVTrLgq7P1ZiAxvZbv3+8x71hrB6MAAIEQtANs+ELRFrAeE3RNI0cpejVD6OcZdpwl5PDL3QRMIh7NhwEpLICKMDobsHTMUADw+cLJiTCyL3WbX4RXkhWbJlb6/3bvzC2os6q07fyzHZO/aXbM2uw24ws6dfzPz//Ml9Q7V5dkMTcfW5flOm29lazWrMsUj1532Wn+ximuTe6/tr1a12tZ2vz0DdNcf+ztdgtn3/pYc+mZt3CrAWHg0Lf5ckGHgyv/LtEZooUAPIJ6jKSM5U0owFW/bOVZn7pnCUpVtV6rpMR7S2rH4cFoT+rLwGz/+5LAEwAXZeNqGZYAAvjB7ZcysAF2KQVrS4HSlFQVvuFUdEbpPWXOWlRJicElpAfWG9PbrSF1JEfUQlcnkPr3nYGnoLPRNIbkrWnGHL1fnYWb6ttjXxPPQL3sh9juu/uOd1u3bPT+b1VtMdtlHrdeK+R06m5rte7cs9eZ+ey8WM0mtrY/bPvamdfrz9Optcyem1az8zMzMzMzMzMy3/bD0s4Q/y5MIBkFyIABIAAAuoiSZSwoaZDI0Eii5CFkoQ0fp0GtM/Y4vte46C0fR3mgIAeR2ICUdLxADoNyUWHTUdI2sJI2A20dZIScZHSSsYqlpNXOEhZpQlaxqm8mzZJeT1GnTdqCR6jqO4kshE5ahx8uNGQbU1FkOpU42VjXbaZ/ZnNlNaxzmtmHI01Gpk6+Tq9Pa+kKt7Lpsw51NbEOqezWNFnLKljepP8U+oOXNv2xuqZi7b/////7G9I1tq5//////OYkDnwAAAABCTBACBBDHwSgUylEFzANKgSFsqL8wKjQ9b/US5nfc5livc3JwS5znU/azSs1n4VyZbXCZ6yK//uSwByAF62XbzmXgANss233MYAA2ilNck8EhbBJCvjcW7FOvxmNlc/Dlri8lYW4MXuD/ECW9JLa1rdoM2o0GdqdM9FZD3et9xv/8RrZkr6xYE02HmO81quMYvb5znWbZxi3rqNrx6Xf4zLP8fOMY/98539+usbr7Xt4X8SCzwLMc9oLPnTPFBo4gAvT/oDQmOh0Q/8yAFECwAAoCAQEIoDAQEAgFAgP6iwcKB0gIMAKTUdtgMZNzS8LP4bcV4i2DI5ZIKKXOYyyBa83ANbEtOv17YJ/ktgKW6joGW6MEl28OY37cqzmqXB26sDtvOdqXMM7d2mzwq4dg+KXIekHcKmt9tX8t471TVnSeWeeh9ZP+Gufln/5bpf1Tf9WOPXIqZ95qRQ3DGHOV97w5zPfeZflvuPPyganaxD2muRzkOP5T71zH/x7+8Nf3vfx5+Xfx5jruvwikv+Qxfkpkdihl05QzXQgRAxxf+gNKeCqv9CjAqMB0AIQ3Wn2gaZmmjRB2gpELqN0VPhCHAEnk9Y2qkwRBlEEVZSYqybUZt168tFlhf/7ksAWgBsdmX05rJCDXbKvszeECYNv3coLlW4cSjDCoNZfu1GY1h2UlVM2iWTmaHu7MxScrd/eIkeqwvoIRFy3pXX7vWt/+sqBUKcb+rLWArUkoqZy+X9/HHeOojAS1WLyRc7KKTLGf1Z3du/rL/x1/wOvJiq/YYSHeuOvFYvYU+eXfyqVN8y3+9Zf+06oSzhiDjwGtFrUZe9emu289dx7he3vOxz98/8u/+P7//kbdGNw1Tt8ySUtwbnAsRb9zqoAAEACQaMLQpSxTxxTCY2Ro+MSEgQmNR5KRMda0TBdMFxIxQblVMxZbjzoaVKZmrTUHER1sS61WVezaVImBj2bLVu3L8y9jq25GX/cOHpuF5ZVa1pp0hvNdi0LcixGXEZZvLL9d+HpbflMahiIMogSXRiEfr9/vGdmoZl1eJUsbvRLCLw26kdhv94/+P/96ZlUuoJmW7oHUnJc7Eos0k5OV9f/83rfPxxlX3ZTcqTV3dDMVpfD8roXTkdFG4XGM6G9Oc3j+///y3rLn7uTdSvMV8K8oyqSusAAAAgICAMEBBD/+5LABIAWNVtvmYYAAsCwbaMywACBCA4PMoT8BQYwANgUK4dXs9KYTvpztDiMVZAy8WDuhk14nAuONBFWMjqTUMeANlooFV6PQ4WRoyf7Cv/gaddMuTobjnsUYPGmVtN7Fq6kC9xhZFLmVz/s813rXrsN5dtyFWea/ONdNt2s2drrGTdyb9f7v3bvaa5+/aZ57t3srbsv97zNKew4+w4+4FQmCsJJaZBYWPmgmKKlHAgj/LEiDZb/LhwXGAJQAAAECAAABoMmeKD0G8MhIAHqX4tZeVUk8yhgjOYJUxZ4R1CYtSIKoKBWB5Ohh00yO5o8oKquPRyOrnxPtyxQvomb4lR+Sm/cb9e+taatzunUNVyWmLIp1+vd+We6y3PWtde345HN9ZZ/7Xm31atzzU+519vkeUYp81tmVd6mLpuu3bV21d299yn0pO3pP5P1rX/teZ+Z92wFDoCPAafGHDgH/yo4KmBEj/LngeCYMkwAAIAAA0IQ58noIkTSiEZKxGVBgrcB5F+G8Z2tpmS9lMRiTiaPpqAsDgZohqfcGY7igEcS//uSwBoAGLofarmVgAMaw21XMrABOHQkIMzPDUCE8EocnCWWk8b0UTxmkZkAO1JhsOyUSebGqsoTA8nD6ZNtQmNabw9jDzFjVzik4x5Ncx5y2H97FEqo6/hqRTaiZtuLNh9krP3Gi92nLXLubKVqU6DWLRWqTe4Qqn9sk5vjlkOqjrIS+7NWQqtVozCroz/Jzz8df////+1/3fMzH/////2lbouGu0QABAAADKdLZBMpMwbEhEuEEP2UEQOWta6ifAzW2ksKUuEEO0hyGHcB0AsQJAD+HggATA8lRGBxgiCN7haO6gSh+Mj463DeqUlh3PNKSbJNJ8Eg61JRh8zVHcuw1SPuHY2XEw9VHqWWXsknGGyNp2fo3Oup6aN3JpCWwlRJ1rEzTYeOWbuppvduTmTh1twbWo2Jk7SR7Y0/oVTjlzb+rXumOqqfM/tpzkTtJPdKTd526Zw5m//////9kRdxM9f////+3rSuEajAAAgQQkkQgwQgMI0LGHIClAbDQCmTYbqmI/7W/IQB4CIxZTF8lCdyUiq1FDEeMS6UdDKfSv/7ksAaABhVW205l4ADna+u9zOCQCwLihOG5UafHLPpTHc4oYfyy/3Czhho2sUaAxLFmJUWpi0PdGFl1IzP4Sgf0VjfakC2bxp/Bi1w+cU43rLZBTUKL4GPuNTGLbg7rJXGXDdHl6PIeIEsfdoGMR590pC3qtcate2Y0CDHkgueKs9dM9UAcLEDYOQ+NAQiJhoJBQuGwdeC5X/nEvYM/ysGVh1YASCIIKYkTJaEIZDQiJoGnBAfz62wMIgsF0UBhhiKKNtGiZkBThYRPimoZIrK59BflKcSTTd0UXZTfjPKoAQBhQIBgI/hzHFTqvVcIkmJA8RS5W/MSSUNvI6uFbnvGtllUZa+sJGXbidd1H43llvLsfdJWlX70KOttcjEQwty+b/8f3j8WdtrEWpmWQ5NSmvE6e9YuWpik/Wvy7/7bWTvu8Mam37fz4ae2R36tihm4EotZ3P/H///1v4PeBsMWrM7diXw80yigyUt7WuQ/F6+dfGWSykwpLmcv+JjzIaEoXvS5n///1XrAkUq59qo596+HjQOAcTJihoDGJG6Clr/+5LAC4AZDX17OZeSAwg1baMy8AAJNuY61suenIl+u+VSo8xBisPeJIGaEpO0iicMaulwKsLpZEMJmSRAodCrqEcC2b57qQvjA9UCMg1hSxWw3k7GTqFPE4nHBsUGK1+dJVzLwcbYX8/FRhOMkZ44a1WvzWOmFyqW1pR2lA/YGBzhOKv7V81/rj5WHafXbxsRTDZWqpnj1Y3+37PHhseN5tbON/dnGdYW4CfVl15tcYLkqtR5Wdz0xv5obt5eG4ReInik8r1AAECoOACDAoQHYmouZ44DQdIaCh8vW/sLayrc4LlvgtFlKye60biFvyQPmw4Ee2PYy6J20zKg+oyVTZ/OpoSpnsnoKGahurxJW185Q22BaA53Y39o+8z4xBcZtuMa8KDTDyJiJiuq5tGfTNbZaAx71E948S96/F7Y9XtPWLvb6uYNMUjx96vjVInprG7Zri+tYtrcWfMKupZLYf7+cv4+b7+Ikemt63je81rf1xi2vSu/auYOBT/SGAcicv/lhpMeOQAAAEAAAykjQTNSE1Qw+hFlRZ34W+yKLiLd//uSwAyAF9XbarmWAAMNPG1XMsAAViSEaA7DtD8KGw7EhwD5aLwDyKhLTCITUOh6Ogv5+pYcOhJw4PT4dK2J6s89K5VhCRxHSGwkPNZM2otux8VjFq7iq/nDk6v91ncee+Bf9mazE79H6S5X9ZZ/126ytljnsgf5pnfpakuX++f9t3bR2hZ73bbSP4G5tWs9Sl9vM0pOv9Nfetu1/7X3f+jssU/Gr1tMzMzMzMzMzM0jmXIfAH/PpHnxGAAkAAAaDwWTM6EiOG5ShkWAmC+DXhImAlG1mMLVja1LB9HssBISzcMBFbAwYFcGxmUyKIPHqQGfE8eXOkkuMlVQRH1iZQSIE1XG0qJ+FTcrx8shdXw9ZG9c9a9a0/Y4i1fj3VepEt9lC6FCrrD1V8WLLb9Gsv9m9Zd9h22LWrMwL/lzcecmF+Zsxlq915/WI9pH9HrTa05Tr6w5N/+l3J747bX6dWmZ82t+Z+Y9lJmZmZmZmZmZmkfX38Y4v/wudAwQNAAAgAAjWkLNmQySlAeEiUDDXtEiG7iQDO0hmVsXU0WW+5sYEf/7ksASABiN42q5lgADTbMt9zDwAMJ1hYAMZF1MNy6FLkI8CTJJBmJdwblU/uyyiQyVcxRtoB+SGKG6NiA+scrKGENkJFY4gtdqO5jTLnr9jzapHM273OMVabtRda7FbHn3Yjr94f7u6tVss67rV6Yufm8P7V+aN32rnVfvLGfWj3s067tcvabMMv44/zHRY5SZ+0z/0pl72nrZ+Mzu1m0zMzMzMzMzMzS3ZHTW8F/9RguLhgBgARBApBIRiIMBoQiERG6glIADAij4FoKwsMgLKAVBiLwlpRbhursQY8ZylJRFMstuKE/JqwFcaC8f2rq0FOLC5CFqwda021rCxGHyqiDlGnlZVtZIuYL3Uj5vL+kIKfPyr+HfUTdXtMRsvX5yS6QxjeZ1GrHcvWFrcHHhNCgOdZoabDc68QKR93ifNfX1x7b9V3ZXp+BDUbBVnQzfrDzmJE1nOsW3601bOM4r8zqCHRUK+JMo4tVHDzvO7YgU3ePE9Y/Eyjos3/g+kLJOP/zouGAGTADz2Sn33Tn33y2iPwGVOJA8Gyz8H0xusgT/+5LADIAaCZmJOZeUgzay7rcw8AAQTCQwiMZBCos8n4j7DiiNCZpclkKsgBwniqDkDTMCNjb0ekCytA5xXAlZrHLCviDFG+qD0DVF5N9Fs5eGTHtm1kQQghcEmJboxyKxxVig/rr+yNZyWHWpDBQpQYYIE8dr9s7zX+y0qyWUXlKcOzreotbRjemzo7bX5tvP/rpRzNhzMsBUIXlIqZwcIjPaRC1HKn0//bf+fX/Fv3GdCFW2Jl87doRpsa1TdzlfucDD3bIrHNsYFXGAAKDQhVZ2FZiEpqFZtA0EAS/CYhiCg+taNJNzQkN+Xah5ONERW9t5HxwlgWFe7fWAKzWT5ppprbX22EAeDwUQNs4nA+1LC3BtYy0oXw0DjU7+Eo1XXG/uq7T6ghKRD6q9/aPH1mtc1rEb04zwFOwVhwIEZgVGa617Z8K6kP+reiGKRT7gRI9IkfFK+2dY1/+pdNimlhqVqoulzH1TFNUiUgPP7Wxa3t/879mtdQYC5fTtz1xgvmbEzxkgSUr6zwLv2QFWC3/50s4Np/0nEDuKLbGQMbRJ//uSwAQAGAYPahmVgAr+Qm1DMrABsQmuShU+Jdpr6OdLN0ihip2AMEKQTTwghmOgHJMHkGQTSKgSCDDEuPjaKBU4dYJ4gF1iUkiguOoyMR5QD2eNEiZadMRJqBwhliUU47GvTJ9GpJNXtNYTLDOTZF9oHHHOOYtz4SpM0pp42hOkz5y6N4Y2kkWxNUzfTDV0JPbZ2Ks0m0z/bJc63JOY49O7q5UexdakVHQfuKYzlM/Wx8Vt6mbtrnTH/////tR0GXubM/////+855rJEAHkbQzGDEXNCMMjaS2qXlGxBlS7XhSFY00xyzYE5wD0YkOAUPZWA6Hc0dAnopLz5JD0HqzMbxJZMPqFSJaHp6Y3IiDYmQibTBJ7JVJw7ZXJuXmjViXZ1FFx42c8tPPOFx+yQck3Pve18mtwlaB88obnoTpA5yfmKbVIOlm5qN0q9aVVrRYynp3SCz07mzzrupadiEqq5UuUn6Su5GdjKfNstr1oYv7NsW5re//////a2qRiGxDf/////etbFxKOEAAAAAQgAQCNQiFMxohHMZdAMXxdAv/7ksAKgBfKE20ZlYALB7Lt5zLwAGFhwMAkbGm5OeulL+FGRCk0EIfi0NWGAK2VAFhERCq9o3jqYZgYBEaOg3bRmeG5cqULhrOG5Wu4rRa5dA6bONVMsN3KFjmq3D5XVWPWapPegck3jz1NRZCWig2VkdE8qT6QoszRlNZURH1NK22UppK3U83iWn4QbVuiWtu3PnfNQebpPuF3bom7QqbZb39PWju7mZi7r/////1KuGxtq5/////9kVB8DnwAAADADCBDDCDEwSgQzFh4MAEiIZLGRoavyoQ8L/vq3Jtm5M0W3JmP1OkqaXjYnGGxkQrLqJqqJjUZgwDmik4Y5YNMwp8MMx1NDAhSo8CTF7SvpaUfYcmS86stmXdNRd5i4xeLBfn5FgpBYxvV9xv8ahT2zJXwYq8qIkJQQOrNarfNfvdMb1u28QdXtWFp4+mw+cPGZMZ+M5z/WmMb3rFvnVvmusXt77VmasFYrZNNI4RBFQAXp/1HRdwdK/5Q4EBhBQAAAUBApBsVNBJPOMMKtQMEEL1GWLmkVNcjcT2STwiJMzz/+5LAEIAafZt1mayAQ1yzbnc08AjszgOUGTDzl6WxJliNsxD+56tdB06LaBGs/FFcpd8pgqEDxk6TEQp8+2LG9VcvL3PKqRIRpet77jhqrz8stQc/eMRi2t77z9fvHnMuwc8bRIrVaw++f5c/LP9fvH/y/9wiEq7rwS97nymAMOZb/Letc/L9b5vLv7xZdIXAbFKZQ4jl6h1v+7/X4Zc/Lutf//l398/WX/j/zkGu1B1C6EpnYccudpXHl8z//9TRNJf+8ROFUABgoBAMGAsGAwGAwGAgYzHTFBAUGDnpyCCVUFL+f41YsRAlVHEtRELiUQEe5TsJXiRJFGJNQ6qGCDRTpvk0TTZCg0YglYqlCF4o7NyFrctMyRi6LZdxgp5zTjxlViozCt810S4vKuRhY3Bvb3Kr9y1WutYssIsninYDtUUBqmc8MsOW/tv+uM1cmY8FmAabfBUioiWpJIzs993/xXWP/aye1VCVqGtqiEpE/WIyPL0tqPHeet6bxv+tfrHxb/C+pntGVbjM6gw2Kd7Lo/hD/4mrX/zxgeLKAKCY//uSwAGAGF2Xe7mXkALxQm2XMrABUMZmMpcDhcMSjkOJkww0BjEl0IQh2bNHWvqinyz5f+VSpwn9EQJjEhJUzR1EojK6XBmK5cA4R0BYECYq6fF/f1Qwzi6JRRHhB1CrV1PdmioxnUjAlr4rX5r2GFSSGsqe7FHVa/qta5rXV3kfE8z1dqpkZ0+jGtn+a/1+c6rGjSQXuYDJ51ZqVkiWYHm/XHzvfx5Nw7zYixtWexXigeSKR1OyMjm2PFXa9rfFt4t7Y+N7lkziHT0j73NFa9P////WBAABIIai5mjnQAyoxijMLL1v65zgqVO+w+HmAspZox5xgO8pEELhAAnlAIqRUGdpD4P7ECosYNw7RtkdhQcVHQcKUXH3E1cwMC95ybTJ6KRtbLkdyMvLTdM/doGlootlp08qgfzZFdAsPshjXxDmONpmKecOqoRuNN9Tbz++72w6Yu5ababmyqy2pexjkDlsmpXOTUtbEXDj08fsXqFWbXOh7ofXvfD7r/////9sbYu5qJ/////9WapGhEwAEAAAAANSE1Qw2hKEznAoq//7ksAIABgyE2q5lYAK4sFtlzKwATd9kiWmF+KBExfj8Q8tlahuH8bECFF4B4ch5MNQGB0lYeA3iCScgdwgA8yTA8HT5LJ6ypSguHljBtQY4djVkzY1RlIux5NFyk0PpuOOOZ5EpRs8bLqnC55wupNfg4vveqi+3PnujZ1GyWkc83ukDnJuvcvqHw24StJJeFF2Qeu0GRL6urZTJZNU50bTsQlVUw82jyO5Hcrw9tsXZnO3/////+2Iiq4d1/////6t0rZNLGAAEAAAMhkoKH1Sg0znC4aPjlCwMFCQsJbKtdwpQoE3MhBQJZ8zHgHCRWNw7yDB0O4pLgT3G489mwhE15NEA80LjQdijljIkrGJsi8xJ7EFjVeGHz2Si5h0lPeoc0z7pRmOV1TrnInNClrYfz7FEqpr+as14elpLWyKtO6ZK9ubMsbxEXCLJk7Ln3aFS/un1DLmJqHy27d/VVB6Zg9bVKmm75umVvjr/////2xEX754/////9U5M0DYgAAAAEIAJBDETGQgeaTEGo4LNCQD7oQOWoC/q13IX29cIXP/+5LAEQAYAZ9tGZeAAz6r7jcxgAAmzvkZIDGeaPYTpebJzWQWNDXzHBVc8ZDpI7KlJ4isqrJITnGezbbnKj5w3HYLa+6xMMLjlujRW984XZ4FIct8ai6g6hYu9jN7nfT+LbPvXe80xisj7GYtcbibpA1i0TN6R92p7enzmFukHWYW8V1qWeJl/jcsf6jzY3TWvfO/mmPve7ZrXFvmtcbtnUThAYBC/+WCDIuj/KBoTDg0JgBCEQiahYYQyGRCGRCAQEGEA6XNNzAM4HVRNWhL2/lSEx2X8gpwWut60i9D9DRKpjxWYN9GI5DVWaTTRFh5TN0FfvnT25VbjK6YU4bKYVGMMe71utVszcExalguVY09fGxYzrU2eW6KPx6iuxyisZ17/Oa5jjrlbKdgidk0xVhNab7hr87WGtZbq95rHWUhv15bR15TR4zM9b7+H81veeeu46/W8f/K9Q005dmpBjQTl6gvTlbYIBEm4iKJHFSrhFDcyh5kr/pOJez/qOsWHVgCiiBiiWiiiik0AToYPqEuuChEUjRTLOBkyejJo0BC//uSwA+AGk19dzmXkgNSL243MPAAyhoYASBhqeC6BtnmXCFODYOo7gaARtcQYWRqhuqIL82Gk8z/YbbekBhOQ6jUMhlaywIRJf30iCgPeMhJrrx+KRwVbHitfmqwizAYXiVOOVFnOm4qrV/z8fFoSLXlVY6GSEp3mor9kUiFvqfFv9/5Q2Mr1WyQEUrYTIo1W/bYtYygYKKRWY3nG///mIvqZxyoFfRtcnK6GSSOrzYhv3OIxsbhW3gcSjTtgichbUuZ/pn//v1ABkEmkRi8SBsRiQQiwJwEWDYktGA2JjB92xCQ35WtH17rUVvbe3MEJBUJRD4LKAdqs7xxlIk2WZtAHBfE8EDBrgWCTjfYZ7q0z3AuhnJ9hY4yfOOFaDJGb0iuKJJIwz/Q+Mr1HndvrT5fO5heIlXP29jjZjy+tdZrFdqZUqmCtKqjhB8k9nFX4bNVg79cfKpdv1pogOmmDHWI+9P94j71f43u/xWvrV28QtUQ0MUeFOnLNifbZaWpE2wPJ3jI5wIjPQaCq21VMEsKlf9D8QK/yzRUYCoABIAAA//7ksACgBfp22q5lgACrqjtlzLAACBjaHNiE1SQPI6hdJr6FcteFxVUFzuAyxcrccI43ERUOwYDqXRITF8CRnchEqxLA+DC8OPyJKNFUktEuNYrpBAmUnrCQ/q8e0MHNqvxz72eehQm6Ron270ssWWhZdvmcy1bF/9W23cves0yBrqrafq32IL6877MCuaMU1zbtv7rV9ra0z30jixm30f/61230plN67/Tl87q1yz07t9r+QZ97drOZSZmZmZmZmZmZp864AxOX/yxIQLIgUABIAAAxjjEPMxkIXH0CYFaEjfxwi+LgKasqYhQtEaUqNTUnmhqHxOYkdzgKVhSLYlMFdaOjLY9dEYn0SdtSZvcYOR40/jaVRGlYudv0Ycqv2l3o6pryuZvC/lnJteGvxvd7tdid1jr59Jpv3hZ/3t1l34KR5BHzV3/ox3t3oxSZtSdpWaZ1maFWAseAwqJ1BEBpYcNAEUDgBFDwDDhMaSAv/PlHB8p/lZFZ9IAAIAAA0ICqeZj5a4NlKGCsZ/AgSDyYmTtupaj2579uyWRGPiwP5T/+5LAE4AYUeNquZYAAvovbecw8ABArUvCONikLliQVlpgzAwhLaF48iPRKvYrIx3odnKszhZs+xAfUdMqGDNnjCxxBaGnsoUd3FVW43JTv0bQ9yYfqmyFCrtJpeLFltykEE/a+srZ5nt12/rX5u6/RZX/Wd1czH7WrvWh7Lu9Zmch/K7HTG38peLHLb9Iqzbv96ZynXtPtfmPZ0zMzMzMzMzMzL83rejHJ/yp8mBggPAAEMINEEEIJMNlEIwAkUMC+pQIavyng9Kmjtsib5gSfD4ydmTq5MpUOCQe7DkUT9kV8p+3pOJoWJlOSOjHUzFO1MNEc6w0sivzlwml291JGuzsGWNq0xw/Em9aRtwZpocJwljMmocu/NrVpd99jOrx1ZGu8cq4zn/WvnMHUts4xb1071tzpd/JmHCzWudVzXOde2de196t81ziZrjOErmyXfvI0OR3VzUGRcwAxOeEMSlv+8DrCy/9YYBcXDADAAhCBYKCiYIJNIdAACSRoIm1EfzbKZLiFJyZgRgPE/tIBnDJDQmMQsxpSCKrzwunproQ//uSwBmAG62Zd5mcAkNbMu5XNPBIt12MwG6kfsSnC+hcTaZykYvttHsgSt3HdlOp7WUKdQy5dutT39fl38Y4zhreUCtPtQxKL1zfN6y/eMsg1+nkkr4SGllb7z96xQf+X/jr9RVwIDeWwzuI3XHvyiUW79eWbu4/vLv75+sofvZQqQVIakNaOSWxe5K88s+5UlT94/+Xfx5+u/8upHbmM4HdyvKn4opJSwmtYy3jubt85ct1Klu+5X/5JbU/+U1hFttpNmKCAoMEOTjFDnOzKlV/Q0akaIAQsvZJm+ojEp2IS0b52EVoSY2jpVNahMg/XAnR8Lpue0fAaZJ06I4hrOjEMviDCjDmgrkXE4jzXTAXuPnGfmKuzXJoxHYT9ZLezsSFmXqvxi1pEyX5U0Spxw2NPu6qNX49d5r/iMnzkfLy5Qm6rmU7OsQ3aszDrq3+cW+OlnScUj9vRLFVmSqEOEJOPIrxkiUYPmus/Htb/O+5PFGyQ1w2zMLS5XUESSJak19Qtx5ayxogOxV1X+s6WcZX/3InCgAAAAAgwFAoUAUEU//7ksAFgBeFl2+ZhgACxDLtlzLAAI9GAwi9AuU3RM4UKpEi1RoVv6yplTEm1YfAx4dC0OTgJgPNphCHYpDAKx4HJTxkJ5JhHgRANwGCG4mWul58rnah5ipgeWhdpWsDiOsan1nbW87Xq1l6p87Q5XPwncev7s53W2c+CGusZje0o/Rx/OrW29laztb8w5HscVqvZ3rKa53631a12tZrWdrmutHK5tNDROkswd32O6++zn0cfYcfAMJLSr/KGQ+4Fi3/YJDJxYIAoAABzALDGIQZxZnMmeC0J0U5nfZPEmQtZZIx9TBmhmcloVKymB1CgFdfCsiXxRYSiyJMJUOA/aWIdWm+ijaKzZxEvdX1gteB6F49uhrOVscsievNNdWx1OtpHFeFfbFjnVZ/7XxroWJq8uxv7vufz+dXs7dtabW/tZplbZj9OvW+R06nZ1ZrWvzXMt09ZnJ6P8vOVrt9vOMdO36aPlhdJURK/ygbFB4Mi//DAXeBCgAJkUJM5wGKmdCPLpitohRNI+M6hEuUVXQ+quxsSIUKRgIhOOFIDwdJFAP/+5LAFQAYEg9qGZWACxhDbVcysAEH4gw+scHoPA6UxsEGqbGiKpSkZjpcUDtSGw64dbjxSi1xcoO0qcalWTE3Lkhz1Tr7hdEqPyVG6yo77g0m3Q+TtwlahueUNz0JnbOH5N1nHOmuiGnahxtSZs2TZrXIup6q9IU97rprap0d1LfpyLIVZqsbLGzTE36DN92zObuWxbpb3/////7G7Guhrob/////7F8cGBHQAAQAQCeUmVNSIKhmU2IxA4l6BY2EBxDpryghQZhKdbWCtU+LhkKZgOsrCYemhuTzo8l5mOoMkDceACxKbVT0Sw6HlhSUloJjx2GBk0oScqcKzZFYqLoMx2SS0qt5165sdolH5YTjipPY4rPvVV/ZEWio2VkYRcdJ6yDSxxMqm3EPdqq3TzZ8QehsKUxc483dtPti7qnMprIj7k660WVZ1sJu2MTuGn6Z1ByPfM3bmzLP/////c61GuhGn//////sXq372n8AABBQDDCBBDDDB5pMQajg0sYRIEOQsd9MV/UaWUsjfGHFhkQHFfPJF2jTcQ1WQi4v//uSwBgAGVmXbTmXgAOMMu63NZAIWotoeSo6rdsyibo8Q9RQq5FqySFfCtmlYpzFaW84UfiWW8SaAwxLwpbq1bqwrc14dcfM1YUbcGaJK7cJYzJTFL7jYxisK9qyV8G75CMQkIYMKDWvDzmmq79vCrbPrrEZWd4rIcBWMdmRT6xu+MY+7f41reYuMWz9Qvmv9qJ+FZXyTscByhsDkdC5IAvM/5YOlRodK/5QOAkMDigARiIk0I1SGwyGhSIxAgi+RggRb4yws1yJpEvgesdf6bBhLIk+sOmkNgL3RRuZpEBwVNgapHIa3WECQOiZ1HIHo56bjWctOIwHIKVFUOMYfbt48rY+EAseS/SraRvL7NJe3Wy/eOCdShD/LIW3jnXz5hhzestZbf6Wq/YJAbCnVz32x+Wetfjzn5f+1+qaFy3dZ6uNKKGUeP/LDWs+91rL/3zX/+usCnXcX40+JsBa9DLlrs5rPf57/C9vedjn7x/9Zf+///+u8TTXPjjI4IkcDMEonogltTx//9UWkv+XakYKoAAwGAgCBAkGQEKhSKRTrP/7ksAHgBfx02O5poAKMzhfB7KAAcS+4EHGjKPtAxpxQEEAok0rLYoSFhKYzbc2C+CuD2M8GUFrJoW0kh94DOGEBzggwnpJGY9V8D0PCShcA4FScSJK6slCTOEkPMYMnEiSqBij+OMzE/JMsKA/VF4vKJIlv1mQ0EoQ0hykmVn1JJpLJFJMu6/yhKQ4DBFA8eJNNJ9jhiaoGJr/qzYzJcl0EzFjQwNzAwNz7LpS8XlJJaKS/rb/RWtZogkYGDP//8xGkuAsEQAK4ePR+6HKYiGZiJmApuGOYgNZkkUxKRRFrLOWuiMDoAEAKHqB0AsAsaHQCwLg+cVBqDWyQah6bTCwtRQsdf/yqr/7f8My7M2pIrcqq0xQtTMzaqbaqtcM3DNf//////w38Xyq3KqvDNUM18quq1Darars2oraqtcM3DN//////+zVszXKirYKbCOCgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LAJ4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uSwO4AAAABLAAAAAAAACWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7ksD/gAAAASwAAAAAAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LA/4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uSwP+AAAABLAAAAAAAACWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7ksD/gAAAASwAAAAAAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LA/4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uSwP+AAAABLAAAAAAAACWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAP/7ksD/gAAAASwAAAAAAAAlgAAAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAAA=";static dummyResPos='{"s":"ok","netPositions":[{"crossCurrency":"N","qty":16,"realized_profit":0,"id":"NSE:JPASSOCIAT-EQ-CNC","unrealized_profit":0.32,"buyQty":16,"sellAvg":0,"sellQty":0,"buyAvg":4.78,"symbol":"NSE:JPASSOCIAT-EQ","fyToken":"101000000011460","slNo":0,"avgPrice":4.78,"segment":"E","dummy":" ","rbiRefRate":1,"side":1,"netQty":16,"pl":0.32,"productType":"CNC","netAvg":4.78,"qtyMulti_com":1},{"crossCurrency":"N","qty":16,"realized_profit":0,"id":"NSE:JPASSOCIAT-EQ-CNC","unrealized_profit":0.32,"buyQty":16,"sellAvg":0,"sellQty":0,"buyAvg":4.78,"symbol":"NSE:JPASSOCIAT-EQ","fyToken":"101000000011460","slNo":0,"avgPrice":4.78,"segment":"E","dummy":" ","rbiRefRate":1,"side":1,"netQty":16,"pl":0.32,"productType":"CNC","netAvg":4.78,"qtyMulti_com":1}],"message":""}';static dummyResOrd='{"s":"ok","message":"","orderBook":[{"status":5,"symbol":"NSE:TCSEQ","qty":1,"orderNumStatus":"119050790482:5","dqQtyRem":5,"orderDateTime":"07-May-2019 15:18:04","orderValidity":"IOC","fyToken":"101000000011536","slNo":1,"message":"RMS:119050790482:Not allowed to trade in NSE EQ","segment":"E","id":"119050790482","stopPrice":0,"exchOrdId":0,"remainingQuantity":1,"filledQty":0,"limitPrice":2155,"offlineOrder":"false","instrument":"EQUITY","productType":"CNC","type":1,"side":1,"discloseQty":5,"tradedPrice":0}]}';static dummyResOrdJson1={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4,trigger_price:0,average_price:4,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5,trigger_price:0,average_price:5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson1_1={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4,trigger_price:0,average_price:4,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5,trigger_price:0,average_price:5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson2={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4,trigger_price:0,average_price:4,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5,trigger_price:0,average_price:5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson2_1={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:11,trigger_price:10,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:12,trigger_price:9,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson3={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:11,trigger_price:10,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:12,trigger_price:9,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4,trigger_price:0,average_price:4,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5,trigger_price:0,average_price:5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson4={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson5={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson6={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:11,trigger_price:10,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:12,trigger_price:9,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:11,trigger_price:10,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:12,trigger_price:9,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:11,trigger_price:10,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:12,trigger_price:9,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:11,trigger_price:10,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:12,trigger_price:9,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4,trigger_price:0,average_price:4,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5,trigger_price:0,average_price:5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]}};var kd=class{id;instru;scrip;expiry;cmp;netQty;buyAvg;sellAvg;type;realizedProfit;pnl;includeInSum1=!1;includeInSum2=!1;includeInSum3=!1;includeInSum4=!1},Pd=class{instru;expiry;scrip;symbol;qty;entry;exit;strategy},Nd=class{instru;expiry;scrip;symbol;qty;price;strategy},yg=class{id;scrip;qty;status;message;type;limit;stop;tradedPrice;side;orderDateTime},vg=class{slab;type;qty;entry;scrip;sl;sl_strike;rollin;rollin_strike;orderId;orderStatus},Od=class{entry;pos_open=!1;multiple_pos_open=!1;sl_open=!1;multiple_sl_open=!1;reentry_open=!1;reentry_multiple_open=!1;sl_times=0},wg=class{addToOrders;guid;id;time;instru;scrip;expiry;qty;tradedPrice;triggerPrice;status;message;tradingsymbol;tags};var Hs=class{token;instru;expiry;strike;optionType;lotSize;exchange;tradingSymbol},Cr=class{expiry;instru;strike;type;tradingSymbol;exchange},Rd=class{exchange_code;token;ltp;ltt_unix;last_traded_qty;volume;best_bid;best_bid_qty;best_ask;best_ask_qty;total_buy_qty;total_sell_qty;atp;exchange_timestamp;open;high;low;close;year_high;year_low};var qe=class n{ltpMap=new Map;atpMap=new Map;volumeMap=new Map;oiMap=new Map;lastDayOIMap=new Map;chgoiMap=new Map;ohlcMap=new Map;intradayData=new Array;static simulateData={};static simulateData2={};static stockChartData={};static stockChartData2={};constructor(){}updateMaps_zerodha(e){let t="";if(e.instrument_token===256265)t="NIFTY50";else if(e.instrument_token===260105)t="BANKNIFTY";else if(e.instrument_token===257801)t="FINNIFTY";else if(e.instrument_token===288009)t="MIDCPNIFTY";else if(e.instrument_token===265)t="SENSEX";else if(e.instrument_token===274441)t="BANKEX";else if(e.instrument_token===2707457)t="NIFTYBEES";else{let i=f.mastersContract.get(e.instrument_token);if(i.strike==0)t=i.tradingSymbol;else{let r=""+i.strike;i.tradingSymbol.includes("USDINR")&&i.tradingSymbol.includes("FUT")&&(r="USDINR"),i&&(t=this.getMapKey({instru:i.instru,expiry:i.expiry,strike:r,optionType:i.optionType}))}}f.logWSFeed&&console.log("updateMaps symbol is",t),e.instrument_token===3465729&&console.log("updateMaps_zerodha",e.instrument_token,e.last_price),this.setLtp(t,e.last_price),this.setAtp(t,e.average_traded_price),this.setVolume(t,e.volume),this.setOI(t,e.oi),this.setOHLC(t,e.ohlc)}setLastDayOI(e,t,i,r,s){let o={instru:e,expiry:t,strike:i,optionType:r},a=this.getMapKey(o);this.lastDayOIMap.set(a,s)}getLastDayOI(e){return this.lastDayOIMap.get(e)}updateMaps_aliceblue(e){let t=f.mastersContract.get(e.token);if(t){let i=this.getMapKey({instru:t.instru,expiry:t.expiry,strike:t.strike,optionType:t.optionType});console.log("updateMaps symbol is",i),this.setLtp(i,e.ltp),this.setAtp(i,e.atp),this.setVolume(i,e.volume),this.setOHLC(i,{open:e.open,high:e.high,low:e.low,close:e.close})}else{let i="";e.token===26e3?i="NIFTY50":e.token===26009?i="BANKNIFTY":e.token===26037?i="FINNIFTY":e.token===1?i="USDINR":console.error(e.token,"not found in masters"),console.log("updateMaps symbol is",i),this.setLtp(i,e.ltp),this.setAtp(i,e.atp),this.setVolume(i,e.volume)}}getZerodhaInstruToken(e){if(e==="NIFTY50"||e==="NIFTY")return 256265;if(e==="BANKNIFTY")return 260105;if(e==="FINNIFTY")return 257801;if(e==="MIDCPNIFTY")return 288009;if(e==="SENSEX")return 265;if(e==="BANKEX")return 274441;if(e==="USDINR")return f.USDINR_FUT_TOKEN}getMapKey(e){let t=e.instru,i=e.expiry,r=e.strike,s=e.optionType,o="";if(r==="NIFTY50"||r==="NIFTY")o="NIFTY50";else if(r==="BANKNIFTY")o="BANKNIFTY";else if(r==="FINNIFTY")o="FINNIFTY";else if(r==="MIDCPNIFTY")o="MIDCPNIFTY";else if(r==="SENSEX")o="SENSEX";else if(r==="BANKEX")o="BANKEX";else if(f.mfInvested.find(a=>a[0]===r))o=r;else if(!this.isOption(r+s))o=r;else if(r==="USDINR")o="USDINR";else{let a=this.getExpiry(i,t);o=t+a+r+s}return o}isOption(e){if(e.endsWith("CE")||e.endsWith("PE")){let t=e.slice(0,-2);if(!isNaN(Number(t)))return!0}return!1}getExpiry(e,t){let i="",r=this.isMonthlyExpiry(e,t);return r?i=r:i=this.getExpiryString(new Date(e)),i}isMonthlyExpiry(e,t){let i=!1,r=null,s=new Date(e);s.setHours(0,0,0,0);let o=f.monthlyExpiryDates;t==="BANKNIFTY"?o=f.monthlyExpiryDatesBNF:t==="FINNIFTY"?o=f.monthlyExpiryDatesFINNIFTY:t==="MIDCPNIFTY"?o=f.monthlyExpiryDatesMidcap:t==="SENSEX"?o=f.monthlyExpiryDatesSensex:t==="BANKEX"?o=f.monthlyExpiryDatesBankex:t==="USDINR"&&(o=f.monthlyExpiryDatesUSDINR);for(let a in o)if(o.hasOwnProperty(a)&&s.getTime()===o[a].getTime()){i=!0,r=a;break}return r}getExpiryString(e){let t=null;return e.getMonth()+1===10?t="O":e.getMonth()+1===11?t="N":e.getMonth()+1===12?t="D":t=e.getMonth()+1,""+(e.getFullYear()-2e3)+t+("0"+e.getDate()).slice(-2)}findCurrExpiryForDisplay(e){let t=1e19,i=new Date;for(let s in e){let o=e[s],a=new Date;if(o.getFullYear()===a.getFullYear()&&o.getMonth()===a.getMonth()&&o.getDate()===a.getDate())t=0,i=o;else{let c=o.getTime()-new Date().getTime();c>=0&&c<t&&(t=c,i=o)}}return""+i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2)}findTodayExpiry(e){let t=new Date;for(let i in e){let r=e[i],s=new Date;if(r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()&&r.getDate()===s.getDate())return r}return null}getSubscriptionObject(e,t,i){let r=e;if(!this.isOption(e)){let l=new Cr;return l.tradingSymbol=r,console.log("getSubscriptionObject stock: "+r,l),l}let s="";r.includes("CE")&&(s="CE"),r.includes("PE")&&(s="PE"),r=r.slice(0,-2);let o=new Date(i).toDateString(),a=new Cr;return a.expiry=o,a.instru=t,a.strike=Number(r),a.type=s,console.log("getSubscriptionObject symbol: "+r,a),a}getSubscriptionObjectForFuture(e,t){console.log("getSubscriptionObject tradingSymbol: "+e);let i=new Cr;return i.tradingSymbol=e,i.exchange=t,i}parseSymbol(e){e=e.replace("NSE:","");let t="";e.startsWith("NIFTY")&&(t="NIFTY",e=e.replace("NIFTY","")),e.startsWith("BANKNIFTY")&&(t="BANKNIFTY",e=e.replace("BANKNIFTY","")),e.startsWith("FINNIFTY")&&(t="FINNIFTY",e=e.replace("FINNIFTY","")),e.startsWith("MIDCPNIFTY")&&(t="MIDCPNIFTY",e=e.replace("MIDCPNIFTY","")),e.startsWith("SENSEX")&&(t="SENSEX",e=e.replace("SENSEX","")),e.startsWith("BANKEX")&&(t="BANKEX",e=e.replace("BANKEX","")),e.startsWith("USDINR")&&(t="USDINR",e=e.replace("USDINR",""));let i="";e.includes("CE")&&(i="CE"),e.includes("PE")&&(i="PE"),e=e.slice(0,-2);let r=e.substring(5),s=e.substring(0,5);return{instru:t,expiry:s,strike:r,type:i}}parseScrip(e){if(e){if(f.mfInvested.find(t=>t[0]===e)||!this.isOption(e))return{scrip:e,type:""};{let t="";return e.includes("CE")&&(t="CE"),e.includes("PE")&&(t="PE"),e=e.slice(0,-2),{scrip:e,type:t}}}return{scrip:"",type:""}}getScripLTP(e,t,i,r){let s={instru:e,expiry:t,strike:i,optionType:r},o=this.getMapKey(s);return this.getLtp(o)}getScripATP(e,t,i,r){let s={instru:e,expiry:t,strike:i,optionType:r},o=this.getMapKey(s);return this.getAtp(o)}getScripOI(e,t,i,r){let s={instru:e,expiry:t,strike:i,optionType:r},o=this.getMapKey(s);return this.getOI(o)}getScripLastDayOI(e,t,i,r){let s={instru:e,expiry:t,strike:i,optionType:r},o=this.getMapKey(s);return this.getLastDayOI(o)}getScripOHLC(e,t,i,r){let s={instru:e,expiry:t,strike:i,optionType:r},o=this.getMapKey(s);return this.getOHLC(o)}getLtp(e){return this.ltpMap.get(e)}setLtp(e,t){this.ltpMap.set(e,t)}getAtp(e){return this.atpMap.get(e)}setAtp(e,t){this.atpMap.set(e,t)}getVolume(e){return this.volumeMap.get(e)}setVolume(e,t){this.volumeMap.set(e,t)}getOI(e){return this.oiMap.get(e)}setOI(e,t){this.oiMap.set(e,t)}getChgOI(e){return this.chgoiMap.get(e)}setChgOI(e,t){this.chgoiMap.set(e,t)}getOHLC(e){return this.ohlcMap.get(e)}setOHLC(e,t){this.ohlcMap.set(e,t)}getIntradayData(e){return this.intradayData.slice(Math.max(this.intradayData.length-e,0))}setIntradayData(){}static \u0275fac=function(t){return new(t||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var wP=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(Ae(Ss),Ae(_n))};static \u0275dir=Mt({type:n})}return n})(),Jl=(()=>{class n extends wP{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Bi(n)))(r||n)}})();static \u0275dir=Mt({type:n,features:[ai]})}return n})(),$o=new we(""),SY={provide:$o,useExisting:Ai(()=>Zo),multi:!0},Zo=(()=>{class n extends Jl{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Bi(n)))(r||n)}})();static \u0275dir=Mt({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&j("change",function(o){return r.onChange(o.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[hr([SY]),ai]})}return n})(),CY={provide:$o,useExisting:Ai(()=>Ys),multi:!0};function xY(){let n=yi()?yi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var DY=new we(""),Ys=(()=>{class n extends wP{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!xY())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(Ae(Ss),Ae(_n),Ae(DY,8))};static \u0275dir=Mt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&j("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},standalone:!1,features:[hr([CY]),ai]})}return n})();var bP=new we(""),EY=new we("");function MY(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function hP(n){return null}function SP(n){return n!=null}function CP(n){return Do(n)?Ft(n):n}function xP(n){let e={};return n.forEach(t=>{e=t!=null?ie(ie({},e),t):e}),Object.keys(e).length===0?null:e}function DP(n,e){return e.map(t=>t(n))}function TY(n){return!n.validate}function EP(n){return n.map(e=>TY(e)?e:t=>e.validate(t))}function IY(n){if(!n)return null;let e=n.filter(SP);return e.length==0?null:function(t){return xP(DP(t,e))}}function MP(n){return n!=null?IY(EP(n)):null}function kY(n){if(!n)return null;let e=n.filter(SP);return e.length==0?null:function(t){let i=DP(t,e).map(CP);return $c(i).pipe(Ue(xP))}}function TP(n){return n!=null?kY(EP(n)):null}function pP(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function PY(n){return n._rawValidators}function NY(n){return n._rawAsyncValidators}function Qv(n){return n?Array.isArray(n)?n:[n]:[]}function Sg(n,e){return Array.isArray(n)?n.includes(e):n===e}function fP(n,e){let t=Qv(e);return Qv(n).forEach(r=>{Sg(t,r)||t.push(r)}),t}function gP(n,e){return Qv(e).filter(t=>!Sg(n,t))}var Cg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=MP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=TP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Jv=class extends Cg{name;get formDirective(){return null}get path(){return null}},Xl=class extends Cg{_parent=null;name=null;valueAccessor=null},ew=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},OY={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},uye=Ie(ie({},OY),{"[class.ng-submitted]":"isSubmitted"}),ec=(()=>{class n extends ew{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(Ae(Xl,2))};static \u0275dir=Mt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&pl("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[ai]})}return n})();var Fd="VALID",bg="INVALID",$l="PENDING",Ld="DISABLED",Ql=class{},xg=class extends Ql{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Vd=class extends Ql{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Bd=class extends Ql{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Zl=class extends Ql{status;source;constructor(e,t){super(),this.status=e,this.source=t}};function RY(n){return(Dg(n)?n.validators:n)||null}function FY(n){return Array.isArray(n)?MP(n):n||null}function LY(n,e){return(Dg(e)?e.asyncValidators:n)||null}function VY(n){return Array.isArray(n)?TP(n):n||null}function Dg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var tw=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return xs(this.statusReactive)}set status(e){xs(()=>this.statusReactive.set(e))}_status=bf(()=>this.statusReactive());statusReactive=sf(void 0);get valid(){return this.status===Fd}get invalid(){return this.status===bg}get pending(){return this.status==$l}get disabled(){return this.status===Ld}get enabled(){return this.status!==Ld}errors;get pristine(){return xs(this.pristineReactive)}set pristine(e){xs(()=>this.pristineReactive.set(e))}_pristine=bf(()=>this.pristineReactive());pristineReactive=sf(!0);get dirty(){return!this.pristine}get touched(){return xs(this.touchedReactive)}set touched(e){xs(()=>this.touchedReactive.set(e))}_touched=bf(()=>this.touchedReactive());touchedReactive=sf(!1);get untouched(){return!this.touched}_events=new at;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(fP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(fP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(gP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(gP(e,this._rawAsyncValidators))}hasValidator(e){return Sg(this._rawValidators,e)}hasAsyncValidator(e){return Sg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ie(ie({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Bd(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Bd(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ie(ie({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Vd(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Vd(!0,i))}markAsPending(e={}){this.status=$l;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Zl(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ie(ie({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ld,this.errors=null,this._forEachChild(r=>{r.disable(Ie(ie({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new xg(this.value,i)),this._events.next(new Zl(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ie(ie({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Fd,this._forEachChild(i=>{i.enable(Ie(ie({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ie(ie({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fd||this.status===$l)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new xg(this.value,t)),this._events.next(new Zl(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ie(ie({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ld:Fd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=$l,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=CP(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Zl(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new Nt,this.statusChanges=new Nt}_calculateStatus(){return this._allControlsDisabled()?Ld:this.errors?bg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($l)?$l:this._anyControlsHaveStatus(bg)?bg:Fd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Vd(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Bd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Dg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=FY(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=VY(this._rawAsyncValidators)}};var nw=new we("",{providedIn:"root",factory:()=>Eg}),Eg="always";function BY(n,e){return[...e.path,n]}function qY(n,e,t=Eg){WY(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),UY(n,e),HY(n,e),zY(n,e),jY(n,e)}function mP(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function jY(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function WY(n,e){let t=PY(n);e.validator!==null?n.setValidators(pP(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=NY(n);e.asyncValidator!==null?n.setAsyncValidators(pP(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();mP(e._rawValidators,r),mP(e._rawAsyncValidators,r)}function UY(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&IP(n,e)})}function zY(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&IP(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function IP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function HY(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function YY(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function GY(n){return Object.getPrototypeOf(n.constructor)===Jl}function KY(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===Ys?t=s:GY(s)?i=s:r=s}),r||i||t||null}function _P(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function AP(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var $Y=class extends tw{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(RY(t),LY(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Dg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(AP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_P(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_P(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){AP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var ZY={provide:Xl,useExisting:Ai(()=>Xo)},yP=Promise.resolve(),Xo=(()=>{class n extends Xl{_changeDetectorRef;callSetDisabledState;control=new $Y;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Nt;constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=KY(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),YY(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){qY(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){yP.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&$y(i);yP.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?BY(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(Ae(Jv,9),Ae(bP,10),Ae(EY,10),Ae($o,10),Ae(Cs,8),Ae(nw,8))};static \u0275dir=Mt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[hr([ZY]),ai,Vi]})}return n})();var XY={provide:$o,useExisting:Ai(()=>Qo),multi:!0},Qo=(()=>{class n extends Jl{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Bi(n)))(r||n)}})();static \u0275dir=Mt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&j("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[hr([XY]),ai]})}return n})(),QY={provide:$o,useExisting:Ai(()=>qd),multi:!0};var JY=(()=>{class n{_accessors=[];add(t,i){this._accessors.push([t,i])}remove(t){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===t){this._accessors.splice(i,1);return}}select(t){this._accessors.forEach(i=>{this._isSameGroup(i,t)&&i[1]!==t&&i[1].fireUncheck(t.value)})}_isSameGroup(t,i){return t[0].control?t[0]._parent===i._control._parent&&t[1].name===i.name:!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qd=(()=>{class n extends Jl{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=se(nw,{optional:!0})??Eg;constructor(t,i,r,s){super(t,i),this._registry=r,this._injector=s}ngOnInit(){this._control=this._injector.get(Xl),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(i){return new(i||n)(Ae(Ss),Ae(_n),Ae(JY),Ae(On))};static \u0275dir=Mt({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,r){i&1&&j("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[hr([QY]),ai]})}return n})();var eG={provide:$o,useExisting:Ai(()=>tc),multi:!0};function kP(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function tG(n){return n.split(":")[0]}var tc=(()=>{class n extends Jl{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i=this._getOptionId(t),r=kP(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=tG(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Bi(n)))(r||n)}})();static \u0275dir=Mt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&j("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[hr([eG]),ai]})}return n})(),Mg=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(kP(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(Ae(_n),Ae(Ss),Ae(tc,9))};static \u0275dir=Mt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),nG={provide:$o,useExisting:Ai(()=>PP),multi:!0};function vP(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function iG(n){return n.split(":")[0]}var PP=(()=>{class n extends Jl{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(s=>this._getOptionId(s));i=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],s=i.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let l=o[a],c=this._getOptionValue(l.value);r.push(c)}}else{let o=i.options;for(let a=0;a<o.length;a++){let l=o[a];if(l.selected){let c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=iG(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Bi(n)))(r||n)}})();static \u0275dir=Mt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&j("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[hr([nG]),ai]})}return n})(),Tg=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(vP(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(vP(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(Ae(_n),Ae(Ss),Ae(PP,9))};static \u0275dir=Mt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function rG(n){return typeof n=="number"?n:parseFloat(n)}var sG=(()=>{class n{_validator=hP;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):hP,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Mt({type:n,features:[Vi]})}return n})();var oG={provide:bP,useExisting:Ai(()=>iw),multi:!0},iw=(()=>{class n extends sG{min;inputName="min";normalizeInput=t=>rG(t);createValidator=t=>MY(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=Bi(n)))(r||n)}})();static \u0275dir=Mt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&mf("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[hr([oG]),ai]})}return n})();var aG=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Wi({type:n});static \u0275inj=Li({})}return n})();var nc=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:nw,useValue:t.callSetDisabledState??Eg}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Wi({type:n});static \u0275inj=Li({imports:[aG]})}return n})();var NP={modes:{point(n,e){return Ig(n,e,{intersect:!0})},nearest(n,e,t){return uG(n,e,t)},x(n,e,t){return Ig(n,e,{intersect:t.intersect,axis:"x"})},y(n,e,t){return Ig(n,e,{intersect:t.intersect,axis:"y"})}}};function pw(n,e,t){return(NP.modes[t.mode]||NP.modes.nearest)(n,e,t)}function lG(n,e,t){return t!=="x"&&t!=="y"?n.inRange(e.x,e.y,"x",!0)||n.inRange(e.x,e.y,"y",!0):n.inRange(e.x,e.y,t,!0)}function cG(n,e,t){return t==="x"?{x:n.x,y:e.y}:t==="y"?{x:e.x,y:n.y}:e}function Ig(n,e,t){return n.filter(i=>t.intersect?i.inRange(e.x,e.y):lG(i,e,t.axis))}function uG(n,e,t){let i=Number.POSITIVE_INFINITY;return Ig(n,e,t).reduce((r,s)=>{let o=s.getCenterPoint(),a=cG(e,o,t.axis),l=Zr(e,a);return l<i?(r=[s],i=l):l===i&&r.push(s),r},[]).sort((r,s)=>r._index-s._index).slice(0,1)}function ia(n,e,t){let i=Math.cos(t),r=Math.sin(t),s=e.x,o=e.y;return{x:s+i*(n.x-s)-r*(n.y-o),y:o+r*(n.x-s)+i*(n.y-o)}}var dG=(n,e)=>e>n||n.length>e.length&&n.slice(0,e.length)===e,Jo=.001,Pg=(n,e,t)=>Math.min(t,Math.max(e,n)),JP=(n,e)=>n.value>=n.start-e&&n.value<=n.end+e;function hG(n,e,t){for(let i of Object.keys(n))n[i]=Pg(n[i],e,t);return n}function pG(n,e,t,i){return!n||!e||t<=0?!1:Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)<=Math.pow(t+i,2)}function eN(n,{x:e,y:t,x2:i,y2:r},s,{borderWidth:o,hitTolerance:a}){let l=(o+a)/2,c=n.x>=e-l-Jo&&n.x<=i+l+Jo,u=n.y>=t-l-Jo&&n.y<=r+l+Jo;return s==="x"?c:(s==="y"||c)&&u}function tN(n,{rect:e,center:t},i,{rotation:r,borderWidth:s,hitTolerance:o}){let a=ia(n,t,qt(-r));return eN(a,e,i,{borderWidth:s,hitTolerance:o})}function ra(n,e){let{centerX:t,centerY:i}=n.getProps(["centerX","centerY"],e);return{x:t,y:i}}function fG(n,e,t,i=!0){let r=t.split("."),s=0;for(let o of e.split(".")){let a=r[s++];if(parseInt(o,10)<parseInt(a,10))break;if(dG(a,o)){if(i)throw new Error(`${n} v${t} is not supported. v${e} or newer is required.`);return!1}}return!0}var nN=n=>typeof n=="string"&&n.endsWith("%"),iN=n=>parseFloat(n)/100,rN=n=>Pg(iN(n),0,1),jd=(n,e)=>({x:n,y:e,x2:n,y2:e,width:0,height:0}),gG={box:n=>jd(n.centerX,n.centerY),doughnutLabel:n=>jd(n.centerX,n.centerY),ellipse:n=>({centerX:n.centerX,centerY:n.centerX,radius:0,width:0,height:0}),label:n=>jd(n.centerX,n.centerY),line:n=>jd(n.x,n.y),point:n=>({centerX:n.centerX,centerY:n.centerY,radius:0,width:0,height:0}),polygon:n=>jd(n.centerX,n.centerY)};function fw(n,e){return e==="start"?0:e==="end"?n:nN(e)?rN(e)*n:n/2}function $s(n,e,t=!0){return typeof e=="number"?e:nN(e)?(t?rN(e):iN(e))*n:n}function mG(n,e){let{x:t,width:i}=n,r=e.textAlign;return r==="center"?t+i/2:r==="end"||r==="right"?t+i:t}function sN(n,e,{borderWidth:t,position:i,xAdjust:r,yAdjust:s},o){let a=He(o),l=e.width+(a?o.width:0)+t,c=e.height+(a?o.height:0)+t,u=gw(i),d=OP(n.x,l,r,u.x),h=OP(n.y,c,s,u.y);return{x:d,y:h,x2:d+l,y2:h+c,width:l,height:c,centerX:d+l/2,centerY:h+c/2}}function gw(n,e="center"){return He(n)?{x:Be(n.x,e),y:Be(n.y,e)}:(n=Be(n,e),{x:n,y:n})}var oN=(n,e)=>n&&n.autoFit&&e<1;function aN(n,e){let t=n.font,i=dt(t)?t:[t];return oN(n,e)?i.map(function(r){let s=Ot(r);return s.size=Math.floor(r.size*e),s.lineHeight=r.lineHeight,Ot(s)}):i.map(r=>Ot(r))}function lN(n){return n&&(yn(n.xValue)||yn(n.yValue))}function OP(n,e,t=0,i){return n-fw(e,i)+t}function ac(n,e,t){let i=t.init;if(i){if(i===!0)return uN(e,t)}else return;return _G(n,e,t)}function cN(n,e,t){let i=!1;return e.forEach(r=>{An(n[r])?(i=!0,t[r]=n[r]):yn(t[r])&&delete t[r]}),i}function uN(n,e){let t=e.type||"line";return gG[t](n)}function _G(n,e,t){let i=pt(t.init,[{chart:n,properties:e,options:t}]);if(i===!0)return uN(e,t);if(He(i))return i}var sw=new Map,AG=n=>isNaN(n)||n<=0,yG=n=>n.reduce(function(e,t){return e+=t.string,e},"");function Ng(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function Og(n,{x:e,y:t},i){i&&(n.translate(e,t),n.rotate(qt(i)),n.translate(-e,-t))}function rs(n,e){if(e&&e.borderWidth)return n.lineCap=e.borderCapStyle||"butt",n.setLineDash(e.borderDash),n.lineDashOffset=e.borderDashOffset,n.lineJoin=e.borderJoinStyle||"miter",n.lineWidth=e.borderWidth,n.strokeStyle=e.borderColor,!0}function lc(n,e){n.shadowColor=e.backgroundShadowColor,n.shadowBlur=e.shadowBlur,n.shadowOffsetX=e.shadowOffsetX,n.shadowOffsetY=e.shadowOffsetY}function Rg(n,e){let t=e.content;if(Ng(t))return{width:$s(t.width,e.width),height:$s(t.height,e.height)};let i=aN(e),r=e.textStrokeWidth,s=dt(t)?t:[t],o=s.join()+yG(i)+r+(n._measureText?"-spriting":"");return sw.has(o)||sw.set(o,SG(n,s,i,r)),sw.get(o)}function dN(n,e,t){let{x:i,y:r,width:s,height:o}=e;n.save(),lc(n,t);let a=rs(n,t);n.fillStyle=t.backgroundColor,n.beginPath(),Jr(n,{x:i,y:r,w:s,h:o,radius:hG($i(t.borderRadius),0,Math.min(s,o)/2)}),n.closePath(),n.fill(),a&&(n.shadowColor=t.borderShadowColor,n.stroke()),n.restore()}function hN(n,e,t,i){let r=t.content;if(Ng(r)){n.save(),n.globalAlpha=DG(t.opacity,r.style.opacity),n.drawImage(r,e.x,e.y,e.width,e.height),n.restore();return}let s=dt(r)?r:[r],o=aN(t,i),a=t.color,l=dt(a)?a:[a],c=mG(e,t),u=e.y+t.textStrokeWidth/2;n.save(),n.textBaseline="middle",n.textAlign=t.textAlign,vG(n,t)&&CG(n,{x:c,y:u},s,o),xG(n,{x:c,y:u},s,{fonts:o,colors:l}),n.restore()}function vG(n,e){if(e.textStrokeWidth>0)return n.lineJoin="round",n.miterLimit=2,n.lineWidth=e.textStrokeWidth,n.strokeStyle=e.textStrokeColor,!0}function wG(n,e,t,i){let{radius:r,options:s}=e,o=s.pointStyle,a=s.rotation,l=(a||0)*rd;if(Ng(o)){n.save(),n.translate(t,i),n.rotate(l),n.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),n.restore();return}AG(r)||bG(n,{x:t,y:i,radius:r,rotation:a,style:o,rad:l})}function bG(n,{x:e,y:t,radius:i,rotation:r,style:s,rad:o}){let a,l,c,u;switch(n.beginPath(),s){default:n.arc(e,t,i,0,At),n.closePath();break;case"triangle":n.moveTo(e+Math.sin(o)*i,t-Math.cos(o)*i),o+=kl,n.lineTo(e+Math.sin(o)*i,t-Math.cos(o)*i),o+=kl,n.lineTo(e+Math.sin(o)*i,t-Math.cos(o)*i),n.closePath();break;case"rectRounded":u=i*.516,c=i-u,a=Math.cos(o+Xn)*c,l=Math.sin(o+Xn)*c,n.arc(e-a,t-l,u,o-rt,o-Ct),n.arc(e+l,t-a,u,o-Ct,o),n.arc(e+a,t+l,u,o,o+Ct),n.arc(e-l,t+a,u,o+Ct,o+rt),n.closePath();break;case"rect":if(!r){c=Math.SQRT1_2*i,n.rect(e-c,t-c,2*c,2*c);break}o+=Xn;case"rectRot":a=Math.cos(o)*i,l=Math.sin(o)*i,n.moveTo(e-a,t-l),n.lineTo(e+l,t-a),n.lineTo(e+a,t+l),n.lineTo(e-l,t+a),n.closePath();break;case"crossRot":o+=Xn;case"cross":a=Math.cos(o)*i,l=Math.sin(o)*i,n.moveTo(e-a,t-l),n.lineTo(e+a,t+l),n.moveTo(e+l,t-a),n.lineTo(e-l,t+a);break;case"star":a=Math.cos(o)*i,l=Math.sin(o)*i,n.moveTo(e-a,t-l),n.lineTo(e+a,t+l),n.moveTo(e+l,t-a),n.lineTo(e-l,t+a),o+=Xn,a=Math.cos(o)*i,l=Math.sin(o)*i,n.moveTo(e-a,t-l),n.lineTo(e+a,t+l),n.moveTo(e+l,t-a),n.lineTo(e-l,t+a);break;case"line":a=Math.cos(o)*i,l=Math.sin(o)*i,n.moveTo(e-a,t-l),n.lineTo(e+a,t+l);break;case"dash":n.moveTo(e,t),n.lineTo(e+Math.cos(o)*i,t+Math.sin(o)*i);break}n.fill()}function SG(n,e,t,i){n.save();let r=e.length,s=0,o=i;for(let a=0;a<r;a++){let l=t[Math.min(a,t.length-1)];n.font=l.string;let c=e[a];s=Math.max(s,n.measureText(c).width+i),o+=l.lineHeight}return n.restore(),{width:s,height:o}}function CG(n,{x:e,y:t},i,r){n.beginPath();let s=0;i.forEach(function(o,a){let l=r[Math.min(a,r.length-1)],c=l.lineHeight;n.font=l.string,n.strokeText(o,e,t+c/2+s),s+=c}),n.stroke()}function xG(n,{x:e,y:t},i,{fonts:r,colors:s}){let o=0;i.forEach(function(a,l){let c=s[Math.min(l,s.length-1)],u=r[Math.min(l,r.length-1)],d=u.lineHeight;n.beginPath(),n.font=u.string,n.fillStyle=c,n.fillText(a,e,t+d/2+o),o+=d,n.fill()})}function DG(n,e){let t=Gi(n)?n:e;return Gi(t)?Pg(t,0,1):1}var pN=["left","bottom","top","right"];function EG(n,e){let{pointX:t,pointY:i,options:r}=e,s=r.callout,o=s&&s.display&&PG(e,s);if(!o||OG(e,s,o))return;if(n.save(),n.beginPath(),!rs(n,s))return n.restore();let{separatorStart:l,separatorEnd:c}=MG(e,o),{sideStart:u,sideEnd:d}=IG(e,o,l);(s.margin>0||r.borderWidth===0)&&(n.moveTo(l.x,l.y),n.lineTo(c.x,c.y)),n.moveTo(u.x,u.y),n.lineTo(d.x,d.y);let h=ia({x:t,y:i},e.getCenterPoint(),qt(-e.rotation));n.lineTo(h.x,h.y),n.stroke(),n.restore()}function MG(n,e){let{x:t,y:i,x2:r,y2:s}=n,o=TG(n,e),a,l;return e==="left"||e==="right"?(a={x:t+o,y:i},l={x:a.x,y:s}):(a={x:t,y:i+o},l={x:r,y:a.y}),{separatorStart:a,separatorEnd:l}}function TG(n,e){let{width:t,height:i,options:r}=n,s=r.callout.margin+r.borderWidth/2;return e==="right"?t+s:e==="bottom"?i+s:-s}function IG(n,e,t){let{y:i,width:r,height:s,options:o}=n,a=o.callout.start,l=kG(e,o.callout),c,u;return e==="left"||e==="right"?(c={x:t.x,y:i+$s(s,a)},u={x:c.x+l,y:c.y}):(c={x:t.x+$s(r,a),y:t.y},u={x:c.x,y:c.y+l}),{sideStart:c,sideEnd:u}}function kG(n,e){let t=e.side;return n==="left"||n==="top"?-t:t}function PG(n,e){let t=e.position;return pN.includes(t)?t:NG(n,e)}function NG(n,e){let{x:t,y:i,x2:r,y2:s,width:o,height:a,pointX:l,pointY:c,centerX:u,centerY:d,rotation:h}=n,p={x:u,y:d},g=e.start,A=$s(o,g),v=$s(a,g),b=[t,t+A,t+A,r],E=[i+v,s,i,s],O=[];for(let T=0;T<4;T++){let k=ia({x:b[T],y:E[T]},p,qt(h));O.push({position:pN[T],distance:Zr(k,{x:l,y:c})})}return O.sort((T,k)=>T.distance-k.distance)[0].position}function OG(n,e,t){let{pointX:i,pointY:r}=n,s=e.margin,o=i,a=r;return t==="left"?o+=s:t==="right"?o-=s:t==="top"?a+=s:t==="bottom"&&(a-=s),n.inRange(o,a)}var RP={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function ic(n,e,t){return e=typeof e=="number"?e:n.parse(e),Dt(e)?n.getPixelForValue(e):t}function ea(n,e,t){let i=e[t];if(i||t==="scaleID")return i;let r=t.charAt(0),s=Object.values(n).filter(o=>o.axis&&o.axis===r);return s.length?s[0].id:r}function fN(n,e){if(n){let t=n.options.reverse,i=ic(n,e.min,t?e.end:e.start),r=ic(n,e.max,t?e.start:e.end);return{start:i,end:r}}}function gN(n,e){let{chartArea:t,scales:i}=n,r=i[ea(i,e,"xScaleID")],s=i[ea(i,e,"yScaleID")],o=t.width/2,a=t.height/2;return r&&(o=ic(r,e.xValue,r.left+r.width/2)),s&&(a=ic(s,e.yValue,s.top+s.height/2)),{x:o,y:a}}function mw(n,e){let t=n.scales,i=t[ea(t,e,"xScaleID")],r=t[ea(t,e,"yScaleID")];if(!i&&!r)return{};let{left:s,right:o}=i||n.chartArea,{top:a,bottom:l}=r||n.chartArea,c=FP(i,{min:e.xMin,max:e.xMax,start:s,end:o});s=c.start,o=c.end;let u=FP(r,{min:e.yMin,max:e.yMax,start:l,end:a});return a=u.start,l=u.end,{x:s,y:a,x2:o,y2:l,width:o-s,height:l-a,centerX:s+(o-s)/2,centerY:a+(l-a)/2}}function mN(n,e){if(!lN(e)){let t=mw(n,e),i=e.radius;(!i||isNaN(i))&&(i=Math.min(t.width,t.height)/2,e.radius=i);let r=i*2,s=t.centerX+e.xAdjust,o=t.centerY+e.yAdjust;return{x:s-i,y:o-i,x2:s+i,y2:o+i,centerX:s,centerY:o,width:r,height:r,radius:i}}return FG(n,e)}function RG(n,e){let{scales:t,chartArea:i}=n,r=t[e.scaleID],s={x:i.left,y:i.top,x2:i.right,y2:i.bottom};return r?LG(r,s,e):VG(t,s,e),s}function _N(n,e){let t=mw(n,e);return t.initProperties=ac(n,t,e),t.elements=[{type:"label",optionScope:"label",properties:jG(n,t,e),initProperties:t.initProperties}],t}function FG(n,e){let t=gN(n,e),i=e.radius*2;return{x:t.x-e.radius+e.xAdjust,y:t.y-e.radius+e.yAdjust,x2:t.x+e.radius+e.xAdjust,y2:t.y+e.radius+e.yAdjust,centerX:t.x+e.xAdjust,centerY:t.y+e.yAdjust,radius:e.radius,width:i,height:i}}function FP(n,e){let t=fN(n,e)||e;return{start:Math.min(t.start,t.end),end:Math.max(t.start,t.end)}}function LG(n,e,t){let i=ic(n,t.value,NaN),r=ic(n,t.endValue,i);n.isHorizontal()?(e.x=i,e.x2=r):(e.y=i,e.y2=r)}function VG(n,e,t){for(let i of Object.keys(RP)){let r=n[ea(n,t,i)];if(r){let{min:s,max:o,start:a,end:l,startProp:c,endProp:u}=RP[i],d=fN(r,{min:t[s],max:t[o],start:r[a],end:r[l]});e[c]=d.start,e[u]=d.end}}}function BG({properties:n,options:e},t,i,r){let{x:s,x2:o,width:a}=n;return AN({start:s,end:o,size:a,borderWidth:e.borderWidth},{position:i.x,padding:{start:r.left,end:r.right},adjust:e.label.xAdjust,size:t.width})}function qG({properties:n,options:e},t,i,r){let{y:s,y2:o,height:a}=n;return AN({start:s,end:o,size:a,borderWidth:e.borderWidth},{position:i.y,padding:{start:r.top,end:r.bottom},adjust:e.label.yAdjust,size:t.height})}function AN(n,e){let{start:t,end:i,borderWidth:r}=n,{position:s,padding:{start:o,end:a},adjust:l}=e,c=i-r-t-o-a-e.size;return t+r/2+l+fw(c,s)}function jG(n,e,t){let i=t.label;i.backgroundColor="transparent",i.callout.display=!1;let r=gw(i.position),s=jt(i.padding),o=Rg(n.ctx,i),a=BG({properties:e,options:t},o,r,s),l=qG({properties:e,options:t},o,r,s),c=o.width+s.width,u=o.height+s.height;return{x:a,y:l,x2:a+c,y2:l+u,width:c,height:u,centerX:a+c/2,centerY:l+u/2,rotation:i.rotation}}var ow=["enter","leave"],_w=ow.concat("click");function WG(n,e,t){e.listened=cN(t,_w,e.listeners),e.moveListened=!1,ow.forEach(i=>{An(t[i])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(i=>{!e.listened&&An(i.click)&&(e.listened=!0),e.moveListened||ow.forEach(r=>{An(i[r])&&(e.listened=!0,e.moveListened=!0)})})}function UG(n,e,t){if(n.listened)switch(e.type){case"mousemove":case"mouseout":return zG(n,e,t);case"click":return HG(n,e,t)}}function zG(n,e,t){if(!n.moveListened)return;let i;e.type==="mousemove"?i=pw(n.visibleElements,e,t.interaction):i=[];let r=n.hovered;n.hovered=i;let s={state:n,event:e},o=LP(s,"leave",r,i);return LP(s,"enter",i,r)||o}function LP({state:n,event:e},t,i,r){let s;for(let o of i)r.indexOf(o)<0&&(s=yN(o.options[t]||n.listeners[t],o,e)||s);return s}function HG(n,e,t){let i=n.listeners,r=pw(n.visibleElements,e,t.interaction),s;for(let o of r)s=yN(o.options.click||i.click,o,e)||s;return s}function yN(n,e,t){return pt(n,[e.$context,t])===!0}var kg=["afterDraw","beforeDraw"];function YG(n,e,t){let i=e.visibleElements;e.hooked=cN(t,kg,e.hooks),e.hooked||i.forEach(r=>{e.hooked||kg.forEach(s=>{An(r.options[s])&&(e.hooked=!0)})})}function VP(n,e,t){if(n.hooked){let i=e.options[t]||n.hooks[t];return pt(i,[e.$context])}}function GG(n,e,t){let i=QG(n.scales,e,t),r=BP(e,i,"min","suggestedMin");r=BP(e,i,"max","suggestedMax")||r,r&&An(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function KG(n,e){for(let t of n)ZG(t,e)}function BP(n,e,t,i){if(Dt(e[t])&&!$G(n.options,t,i)){let r=n[t]!==e[t];return n[t]=e[t],r}}function $G(n,e,t){return yn(n[e])||yn(n[t])}function ZG(n,e){for(let t of["scaleID","xScaleID","yScaleID"]){let i=ea(e,n,t);i&&!e[i]&&XG(n,t)&&console.warn(`No scale found with id '${i}' for annotation '${n.id}'`)}}function XG(n,e){if(e==="scaleID")return!0;let t=e.charAt(0);for(let i of["Min","Max","Value"])if(yn(n[t+i]))return!0;return!1}function QG(n,e,t){let i=e.axis,r=e.id,s=i+"ScaleID",o={min:Be(e.min,Number.NEGATIVE_INFINITY),max:Be(e.max,Number.POSITIVE_INFINITY)};for(let a of t)a.scaleID===r?qP(a,e,["value","endValue"],o):ea(n,a,s)===r&&qP(a,e,[i+"Min",i+"Max",i+"Value"],o);return o}function qP(n,e,t,i){for(let r of t){let s=n[r];if(yn(s)){let o=e.parse(s);i.min=Math.min(i.min,o),i.max=Math.max(i.max,o)}}}var Zs=class extends rn{inRange(e,t,i,r){let{x:s,y:o}=ia({x:e,y:t},this.getCenterPoint(r),qt(-this.options.rotation));return eN({x:s,y:o},this.getProps(["x","y","x2","y2"],r),i,this.options)}getCenterPoint(e){return ra(this,e)}draw(e){e.save(),Og(e,this.getCenterPoint(),this.options.rotation),dN(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,t){return _N(e,t)}};Zs.id="boxAnnotation";Zs.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Zs.defaultRoutes={borderColor:"color",backgroundColor:"color"};Zs.descriptors={label:{_fallback:!0}};var rc=class extends rn{inRange(e,t,i,r){return tN({x:e,y:t},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},i,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return ra(this,e)}draw(e){let t=this.options;!t.display||!t.content||(rK(e,this),e.save(),Og(e,this.getCenterPoint(),this.rotation),hN(e,this,t,this._fitRatio),e.restore())}resolveElementProperties(e,t){let i=JG(e,t);if(!i)return{};let{controllerMeta:r,point:s,radius:o}=tK(e,t,i),a=Rg(e.ctx,t),l=nK(a,o);oN(t,l)&&(a={width:a.width*l,height:a.height*l});let{position:c,xAdjust:u,yAdjust:d}=t,h=sN(s,a,{borderWidth:0,position:c,xAdjust:u,yAdjust:d});return Ie(ie(ie({initProperties:ac(e,h,t)},h),r),{rotation:t.rotation,_fitRatio:l})}};rc.id="doughnutLabelAnnotation";rc.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};rc.defaultRoutes={};function JG(n,e){return n.getSortedVisibleDatasetMetas().reduce(function(t,i){let r=i.controller;return r instanceof Sd&&eK(n,e,i.data)&&(!t||r.innerRadius<t.controller.innerRadius)&&r.options.circumference>=90?i:t},void 0)}function eK(n,e,t){if(!e.autoHide)return!0;for(let i=0;i<t.length;i++)if(!t[i].hidden&&n.getDataVisibility(i))return!0}function tK({chartArea:n},e,t){let{left:i,top:r,right:s,bottom:o}=n,{innerRadius:a,offsetX:l,offsetY:c}=t.controller,u=(i+s)/2+l,d=(r+o)/2+c,h={left:Math.max(u-a,i),right:Math.min(u+a,s),top:Math.max(d-a,r),bottom:Math.min(d+a,o)},p={x:(h.left+h.right)/2,y:(h.top+h.bottom)/2},g=e.spacing+e.borderWidth/2,A=a-g,v=p.y>d,b=v?r+g:o-g,E=iK(b,u,d,A);return{controllerMeta:ie({_centerX:u,_centerY:d,_radius:A,_counterclockwise:v},E),point:p,radius:Math.min(a,Math.min(h.right-h.left,h.bottom-h.top)/2)}}function nK({width:n,height:e},t){let i=Math.sqrt(Math.pow(n,2)+Math.pow(e,2));return t*2/i}function iK(n,e,t,i){let r=Math.pow(t-n,2),s=Math.pow(i,2),o=e*-2,a=Math.pow(e,2)+r-s,l=Math.pow(o,2)-4*a;if(l<=0)return{_startAngle:0,_endAngle:At};let c=(-o-Math.sqrt(l))/2,u=(-o+Math.sqrt(l))/2;return{_startAngle:Wo({x:e,y:t},{x:c,y:n}).angle,_endAngle:Wo({x:e,y:t},{x:u,y:n}).angle}}function rK(n,e){let{_centerX:t,_centerY:i,_radius:r,_startAngle:s,_endAngle:o,_counterclockwise:a,options:l}=e;n.save();let c=rs(n,l);n.fillStyle=l.backgroundColor,n.beginPath(),n.arc(t,i,r,s,o,a),n.closePath(),n.fill(),c&&n.stroke(),n.restore()}var ta=class extends rn{inRange(e,t,i,r){return tN({x:e,y:t},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},i,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return ra(this,e)}draw(e){let t=this.options,i=!yn(this._visible)||this._visible;!t.display||!t.content||!i||(e.save(),Og(e,this.getCenterPoint(),this.rotation),EG(e,this),dN(e,this,t),hN(e,sK(this),t),e.restore())}resolveElementProperties(e,t){let i;if(lN(t))i=gN(e,t);else{let{centerX:a,centerY:l}=mw(e,t);i={x:a,y:l}}let r=jt(t.padding),s=Rg(e.ctx,t),o=sN(i,s,t,r);return Ie(ie({initProperties:ac(e,o,t),pointX:i.x,pointY:i.y},o),{rotation:t.rotation})}};ta.id="labelAnnotation";ta.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};ta.defaultRoutes={borderColor:"color"};function sK({x:n,y:e,width:t,height:i,options:r}){let s=r.borderWidth/2,o=jt(r.padding);return{x:n+o.left+s,y:e+o.top+s,width:t-o.left-o.right-r.borderWidth,height:i-o.top-o.bottom-r.borderWidth}}var Aw=(n,e,t)=>({x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}),aw=(n,e,t)=>Aw(e,t,Math.abs((n-e.y)/(t.y-e.y))).x,jP=(n,e,t)=>Aw(e,t,Math.abs((n-e.x)/(t.x-e.x))).y,Ud=n=>n*n,oK=(n,e,{x:t,y:i,x2:r,y2:s},o)=>o==="y"?{start:Math.min(i,s),end:Math.max(i,s),value:e}:{start:Math.min(t,r),end:Math.max(t,r),value:n},WP=(n,e,t,i)=>(1-i)*(1-i)*n+2*(1-i)*i*e+i*i*t,lw=(n,e,t,i)=>({x:WP(n.x,e.x,t.x,i),y:WP(n.y,e.y,t.y,i)}),UP=(n,e,t,i)=>2*(1-i)*(e-n)+2*i*(t-e),zP=(n,e,t,i)=>-Math.atan2(UP(n.x,e.x,t.x,i),UP(n.y,e.y,t.y,i))+.5*rt,Fg=(()=>{class n extends rn{inRange(t,i,r,s){let o=(this.options.borderWidth+this.options.hitTolerance)/2;if(r!=="x"&&r!=="y"){let a={mouseX:t,mouseY:i},{path:l,ctx:c}=this;if(l){rs(c,this.options),c.lineWidth+=this.options.hitTolerance;let{chart:d}=this.$context,h=t*d.currentDevicePixelRatio,p=i*d.currentDevicePixelRatio,g=c.isPointInStroke(l,h,p)||cw(this,a,s);return c.restore(),g}let u=Ud(o);return uK(this,a,u,s)||cw(this,a,s)}return aK(this,{mouseX:t,mouseY:i},r,{hitSize:o,useFinalPosition:s})}getCenterPoint(t){return ra(this,t)}draw(t){let{x:i,y:r,x2:s,y2:o,cp:a,options:l}=this;if(t.save(),!rs(t,l))return t.restore();lc(t,l);let c=Math.sqrt(Math.pow(s-i,2)+Math.pow(o-r,2));if(l.curve&&a)return AK(t,this,a,c),t.restore();let{startOpts:u,endOpts:d,startAdjust:h,endAdjust:p}=vN(this),g=Math.atan2(o-r,s-i);t.translate(i,r),t.rotate(g),t.beginPath(),t.moveTo(0+h,0),t.lineTo(c-p,0),t.shadowColor=l.borderShadowColor,t.stroke(),uw(t,0,h,u),uw(t,c,-p,d),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,i){let r=RG(t,i),{x:s,y:o,x2:a,y2:l}=r,c=lK(r,t.chartArea),u=c?cK({x:s,y:o},{x:a,y:l},t.chartArea):{x:s,y:o,x2:a,y2:l,width:Math.abs(a-s),height:Math.abs(l-o)};if(u.centerX=(a+s)/2,u.centerY=(l+o)/2,u.initProperties=ac(t,u,i),i.curve){let h={x:u.x,y:u.y},p={x:u.x2,y:u.y2};u.cp=_K(u,i,Zr(h,p))}let d=dK(t,u,i.label);return d._visible=c,u.elements=[{type:"label",optionScope:"label",properties:d,initProperties:u.initProperties}],u}}return n.id="lineAnnotation",n})(),HP={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};Fg.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},HP),fill:!1,length:12,start:Object.assign({},HP),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},ta.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Fg.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};Fg.defaultRoutes={borderColor:"color"};function aK(n,{mouseX:e,mouseY:t},i,{hitSize:r,useFinalPosition:s}){let o=oK(e,t,n.getProps(["x","y","x2","y2"],s),i);return JP(o,r)||cw(n,{mouseX:e,mouseY:t},s,i)}function lK({x:n,y:e,x2:t,y2:i},{top:r,right:s,bottom:o,left:a}){return!(n<a&&t<a||n>s&&t>s||e<r&&i<r||e>o&&i>o)}function YP({x:n,y:e},t,{top:i,right:r,bottom:s,left:o}){return n<o&&(e=jP(o,{x:n,y:e},t),n=o),n>r&&(e=jP(r,{x:n,y:e},t),n=r),e<i&&(n=aw(i,{x:n,y:e},t),e=i),e>s&&(n=aw(s,{x:n,y:e},t),e=s),{x:n,y:e}}function cK(n,e,t){let{x:i,y:r}=YP(n,e,t),{x:s,y:o}=YP(e,n,t);return{x:i,y:r,x2:s,y2:o,width:Math.abs(s-i),height:Math.abs(o-r)}}function uK(n,{mouseX:e,mouseY:t},i=Jo,r){let{x:s,y:o,x2:a,y2:l}=n.getProps(["x","y","x2","y2"],r),c=a-s,u=l-o,d=Ud(c)+Ud(u),h=d===0?-1:((e-s)*c+(t-o)*u)/d,p,g;return h<0?(p=s,g=o):h>1?(p=a,g=l):(p=s+h*c,g=o+h*u),Ud(e-p)+Ud(t-g)<=i}function cw(n,{mouseX:e,mouseY:t},i,r){let s=n.label;return s.options.display&&s.inRange(e,t,r,i)}function dK(n,e,t){let i=t.borderWidth,r=jt(t.padding),s=Rg(n.ctx,t),o=s.width+r.width+i,a=s.height+r.height+i;return pK(e,t,{width:o,height:a,padding:r},n.chartArea)}function hK(n){let{x:e,y:t,x2:i,y2:r}=n,s=Math.atan2(r-t,i-e);return s>rt/2?s-rt:s<rt/-2?s+rt:s}function pK(n,e,t,i){let{width:r,height:s,padding:o}=t,{xAdjust:a,yAdjust:l}=e,c={x:n.x,y:n.y},u={x:n.x2,y:n.y2},d=e.rotation==="auto"?hK(n):qt(e.rotation),h=fK(r,s,d),p=gK(n,e,{labelSize:h,padding:o},i),g=n.cp?lw(c,n.cp,u,p):Aw(c,u,p),A={size:h.w,min:i.left,max:i.right,padding:o.left},v={size:h.h,min:i.top,max:i.bottom,padding:o.top},b=KP(g.x,A)+a,E=KP(g.y,v)+l;return{x:b-r/2,y:E-s/2,x2:b+r/2,y2:E+s/2,centerX:b,centerY:E,pointX:g.x,pointY:g.y,width:r,height:s,rotation:jo(d)}}function fK(n,e,t){let i=Math.cos(t),r=Math.sin(t);return{w:Math.abs(n*i)+Math.abs(e*r),h:Math.abs(n*r)+Math.abs(e*i)}}function gK(n,e,t,i){let r,s=mK(n,i);return e.position==="start"?r=GP({w:n.x2-n.x,h:n.y2-n.y},t,e,s):e.position==="end"?r=1-GP({w:n.x-n.x2,h:n.y-n.y2},t,e,s):r=fw(1,e.position),r}function GP(n,e,t,i){let{labelSize:r,padding:s}=e,o=n.w*i.dx,a=n.h*i.dy,l=o>0&&(r.w/2+s.left-i.x)/o,c=a>0&&(r.h/2+s.top-i.y)/a;return Pg(Math.max(l,c),0,.25)}function mK(n,e){let{x:t,x2:i,y:r,y2:s}=n,o=Math.min(r,s)-e.top,a=Math.min(t,i)-e.left,l=e.bottom-Math.max(r,s),c=e.right-Math.max(t,i);return{x:Math.min(a,c),y:Math.min(o,l),dx:a<=c?1:-1,dy:o<=l?1:-1}}function KP(n,e){let{size:t,min:i,max:r,padding:s}=e,o=t/2;return t>r-i?(r+i)/2:(i>=n-s-o&&(n=i+s+o),r<=n+s+o&&(n=r-s-o),n)}function vN(n){let e=n.options,t=e.arrowHeads&&e.arrowHeads.start,i=e.arrowHeads&&e.arrowHeads.end;return{startOpts:t,endOpts:i,startAdjust:$P(n,t),endAdjust:$P(n,i)}}function $P(n,e){if(!e||!e.display)return 0;let{length:t,width:i}=e,r=n.options.borderWidth/2,s={x:t,y:i+r};return Math.abs(aw(0,s,{x:0,y:r}))}function uw(n,e,t,i){if(!i||!i.display)return;let{length:r,width:s,fill:o,backgroundColor:a,borderColor:l}=i,c=Math.abs(e-r)+t;n.beginPath(),lc(n,i),rs(n,i),n.moveTo(c,-s),n.lineTo(e+t,0),n.lineTo(c,s),o===!0?(n.fillStyle=a||l,n.closePath(),n.fill(),n.shadowColor="transparent"):n.shadowColor=i.borderShadowColor,n.stroke()}function _K(n,e,t){let{x:i,y:r,x2:s,y2:o,centerX:a,centerY:l}=n,c=Math.atan2(o-r,s-i),u=gw(e.controlPoint,0),d={x:a+$s(t,u.x,!1),y:l+$s(t,u.y,!1)};return ia(d,{x:a,y:l},c)}function ZP(n,{x:e,y:t},{angle:i,adjust:r},s){!s||!s.display||(n.save(),n.translate(e,t),n.rotate(i),uw(n,0,-r,s),n.restore())}function AK(n,e,t,i){let{x:r,y:s,x2:o,y2:a,options:l}=e,{startOpts:c,endOpts:u,startAdjust:d,endAdjust:h}=vN(e),p={x:r,y:s},g={x:o,y:a},A=zP(p,t,g,0),v=zP(p,t,g,1)-rt,b=lw(p,t,g,d/i),E=lw(p,t,g,1-h/i),O=new Path2D;n.beginPath(),O.moveTo(b.x,b.y),O.quadraticCurveTo(t.x,t.y,E.x,E.y),n.shadowColor=l.borderShadowColor,n.stroke(O),e.path=O,e.ctx=n,ZP(n,b,{angle:A,adjust:d},c),ZP(n,E,{angle:v,adjust:h},u)}var na=class extends rn{inRange(e,t,i,r){let s=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(i!=="x"&&i!=="y")return yK({x:e,y:t},this.getProps(["width","height","centerX","centerY"],r),s,o);let{x:a,y:l,x2:c,y2:u}=this.getProps(["x","y","x2","y2"],r),d=i==="y"?{start:l,end:u}:{start:a,end:c},h=ia({x:e,y:t},this.getCenterPoint(r),qt(-s));return h[i]>=d.start-o-Jo&&h[i]<=d.end+o+Jo}getCenterPoint(e){return ra(this,e)}draw(e){let{width:t,height:i,centerX:r,centerY:s,options:o}=this;e.save(),Og(e,this.getCenterPoint(),o.rotation),lc(e,this.options),e.beginPath(),e.fillStyle=o.backgroundColor;let a=rs(e,o);e.ellipse(r,s,i/2,t/2,rt/2,0,2*rt),e.fill(),a&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,t){return _N(e,t)}};na.id="ellipseAnnotation";na.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},Zs.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};na.defaultRoutes={borderColor:"color",backgroundColor:"color"};na.descriptors={label:{_fallback:!0}};function yK(n,e,t,i){let{width:r,height:s,centerX:o,centerY:a}=e,l=r/2,c=s/2;if(l<=0||c<=0)return!1;let u=qt(t||0),d=Math.cos(u),h=Math.sin(u),p=Math.pow(d*(n.x-o)+h*(n.y-a),2),g=Math.pow(h*(n.x-o)-d*(n.y-a),2);return p/Math.pow(l+i,2)+g/Math.pow(c+i,2)<=1.0001}var sc=class extends rn{inRange(e,t,i,r){let{x:s,y:o,x2:a,y2:l,width:c}=this.getProps(["x","y","x2","y2","width"],r),u=(this.options.borderWidth+this.options.hitTolerance)/2;return i!=="x"&&i!=="y"?pG({x:e,y:t},this.getCenterPoint(r),c/2,u):JP(i==="y"?{start:o,end:l,value:t}:{start:s,end:a,value:e},u)}getCenterPoint(e){return ra(this,e)}draw(e){let t=this.options,i=t.borderWidth;if(t.radius<.1)return;e.save(),e.fillStyle=t.backgroundColor,lc(e,t);let r=rs(e,t);wG(e,this,this.centerX,this.centerY),r&&!Ng(t.pointStyle)&&(e.shadowColor=t.borderShadowColor,e.stroke()),e.restore(),t.borderWidth=i}resolveElementProperties(e,t){let i=mN(e,t);return i.initProperties=ac(e,i,t),i}};sc.id="pointAnnotation";sc.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};sc.defaultRoutes={borderColor:"color",backgroundColor:"color"};var oc=class extends rn{inRange(e,t,i,r){if(i!=="x"&&i!=="y")return this.options.radius>=.1&&this.elements.length>1&&wK(this.elements,e,t,r);let s=ia({x:e,y:t},this.getCenterPoint(r),qt(-this.options.rotation)),o=this.elements.map(c=>i==="y"?c.bY:c.bX),a=Math.min(...o),l=Math.max(...o);return s[i]>=a&&s[i]<=l}getCenterPoint(e){return ra(this,e)}draw(e){let{elements:t,options:i}=this;e.save(),e.beginPath(),e.fillStyle=i.backgroundColor,lc(e,i);let r=rs(e,i),s=!0;for(let o of t)s?(e.moveTo(o.x,o.y),s=!1):e.lineTo(o.x,o.y);e.closePath(),e.fill(),r&&(e.shadowColor=i.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,t){let i=mN(e,t),{sides:r,rotation:s}=t,o=[],a=2*rt/r,l=s*rd;for(let c=0;c<r;c++,l+=a){let u=vK(i,t,l);u.initProperties=ac(e,i,t),o.push(u)}return i.elements=o,i}};oc.id="polygonAnnotation";oc.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};oc.defaultRoutes={borderColor:"color",backgroundColor:"color"};function vK({centerX:n,centerY:e},{radius:t,borderWidth:i,hitTolerance:r},s){let o=(i+r)/2,a=Math.sin(s),l=Math.cos(s),c={x:n+a*t,y:e-l*t};return{type:"point",optionScope:"point",properties:{x:c.x,y:c.y,centerX:c.x,centerY:c.y,bX:n+a*(t+o),bY:e-l*(t+o)}}}function wK(n,e,t,i){let r=!1,s=n[n.length-1].getProps(["bX","bY"],i);for(let o of n){let a=o.getProps(["bX","bY"],i);a.bY>t!=s.bY>t&&e<(s.bX-a.bX)*(t-a.bY)/(s.bY-a.bY)+a.bX&&(r=!r),s=a}return r}var Ks={box:Zs,doughnutLabel:rc,ellipse:na,label:ta,line:Fg,point:sc,polygon:oc};Object.keys(Ks).forEach(n=>{bt.describe(`elements.${Ks[n].id}`,{_fallback:"plugins.annotation.common"})});var bK={update:Object.assign},SK=_w.concat(kg),XP=(n,e)=>He(e)?hw(n,e):n,dw=n=>n==="color"||n==="font";function yw(n="line"){return Ks[n]?n:(console.warn(`Unknown annotation type: '${n}', defaulting to 'line'`),"line")}function CK(n,e,t,i){let r=DK(n,t.animations,i),s=e.annotations,o=TK(e.elements,s);for(let a=0;a<s.length;a++){let l=s[a],c=wN(o,a,l.type),u=l.setContext(MK(n,c,o,l)),d=c.resolveElementProperties(n,u);d.skip=xK(d),"elements"in d&&(EK(c,d.elements,u,r),delete d.elements),yn(c.x)||Object.assign(c,d),Object.assign(c,d.initProperties),d.options=bN(u),r.update(c,d)}}function xK(n){return isNaN(n.x)||isNaN(n.y)}function DK(n,e,t){return t==="reset"||t==="none"||t==="resize"?bK:new Ll(n,e)}function EK(n,e,t,i){let r=n.elements||(n.elements=[]);r.length=e.length;for(let s=0;s<e.length;s++){let o=e[s],a=o.properties,l=wN(r,s,o.type,o.initProperties),c=t[o.optionScope].override(o);a.options=bN(c),i.update(l,a)}}function wN(n,e,t,i){let r=Ks[yw(t)],s=n[e];return(!s||!(s instanceof r))&&(s=n[e]=new r,Object.assign(s,i)),s}function bN(n){let e=Ks[yw(n.type)],t={};t.id=n.id,t.type=n.type,t.drawTime=n.drawTime,Object.assign(t,hw(n,e.defaults),hw(n,e.defaultRoutes));for(let i of SK)t[i]=n[i];return t}function hw(n,e){let t={};for(let i of Object.keys(e)){let r=e[i],s=n[i];dw(i)&&dt(s)?t[i]=s.map(o=>XP(o,r)):t[i]=XP(s,r)}return t}function MK(n,e,t,i){return e.$context||(e.$context=Object.assign(Object.create(n.getContext()),{element:e,get elements(){return t.filter(r=>r&&r.options)},id:i.id,type:"annotation"}))}function TK(n,e){let t=e.length,i=n.length;if(i<t){let r=t-i;n.splice(i,0,...new Array(r))}else i>t&&n.splice(t,i-t);return n}var IK="3.1.0",Gs=new Map,QP=n=>n.type!=="doughnutLabel",kK=_w.concat(kg),SN={id:"annotation",version:IK,beforeRegister(){fG("chart.js","4.0",br.version)},afterRegister(){br.register(Ks)},afterUnregister(){br.unregister(Ks)},beforeInit(n){Gs.set(n,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(n,e,t){let i=Gs.get(n),r=i.annotations=[],s=t.annotations;He(s)?Object.keys(s).forEach(o=>{let a=s[o];He(a)&&(a.id=o,r.push(a))}):dt(s)&&r.push(...s),KG(r.filter(QP),n.scales)},afterDataLimits(n,e){let t=Gs.get(n);GG(n,e.scale,t.annotations.filter(QP).filter(i=>i.display&&i.adjustScaleRange))},afterUpdate(n,e,t){let i=Gs.get(n);WG(n,i,t),CK(n,i,t,e.mode),i.visibleElements=i.elements.filter(r=>!r.skip&&r.options.display),YG(n,i,t)},beforeDatasetsDraw(n,e,t){Wd(n,"beforeDatasetsDraw",t.clip)},afterDatasetsDraw(n,e,t){Wd(n,"afterDatasetsDraw",t.clip)},beforeDatasetDraw(n,e,t){Wd(n,e.index,t.clip)},beforeDraw(n,e,t){Wd(n,"beforeDraw",t.clip)},afterDraw(n,e,t){Wd(n,"afterDraw",t.clip)},beforeEvent(n,e,t){let i=Gs.get(n);UG(i,e.event,t)&&(e.changed=!0)},afterDestroy(n){Gs.delete(n)},getAnnotations(n){let e=Gs.get(n);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(n,e,t){return pw(n,e,t)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:n=>!kK.includes(n)&&n!=="init",annotations:{_allKeys:!1,_fallback:(n,e)=>`elements.${Ks[yw(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:dw,_fallback:!0},_indexable:dw}},additionalOptionScopes:[""]};function Wd(n,e,t){let{ctx:i,chartArea:r}=n,s=Gs.get(n);t&&Rs(i,r);let o=PK(s.visibleElements,e).sort((a,l)=>a.element.options.z-l.element.options.z);for(let a of o)NK(i,r,s,a);t&&Fs(i)}function PK(n,e){let t=[];for(let i of n)if(i.options.drawTime===e&&t.push({element:i,main:!0}),i.elements&&i.elements.length)for(let r of i.elements)r.options.display&&r.options.drawTime===e&&t.push({element:r});return t}function NK(n,e,t,i){let r=i.element;i.main?(VP(t,r,"beforeDraw"),r.draw(n,e),VP(t,r,"afterDraw")):r.draw(n,e)}var en="top",vn="bottom",un="right",sn="left",Lg="auto",Xs=[en,vn,un,sn],ss="start",sa="end",CN="clippingParents",Vg="viewport",cc="popper",xN="reference",vw=Xs.reduce(function(n,e){return n.concat([e+"-"+ss,e+"-"+sa])},[]),Bg=[].concat(Xs,[Lg]).reduce(function(n,e){return n.concat([e,e+"-"+ss,e+"-"+sa])},[]),OK="beforeRead",RK="read",FK="afterRead",LK="beforeMain",VK="main",BK="afterMain",qK="beforeWrite",jK="write",WK="afterWrite",DN=[OK,RK,FK,LK,VK,BK,qK,jK,WK];function dn(n){return n?(n.nodeName||"").toLowerCase():null}function Vt(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function xi(n){var e=Vt(n).Element;return n instanceof e||n instanceof Element}function on(n){var e=Vt(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function uc(n){if(typeof ShadowRoot>"u")return!1;var e=Vt(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function UK(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},r=e.attributes[t]||{},s=e.elements[t];!on(s)||!dn(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function zK(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!on(r)||!dn(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}var EN={name:"applyStyles",enabled:!0,phase:"write",fn:UK,effect:zK,requires:["computeStyles"]};function hn(n){return n.split("-")[0]}var Xi=Math.max,oa=Math.min,os=Math.round;function dc(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function zd(){return!/^((?!chrome|android).)*safari/i.test(dc())}function Di(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i=n.getBoundingClientRect(),r=1,s=1;e&&on(n)&&(r=n.offsetWidth>0&&os(i.width)/n.offsetWidth||1,s=n.offsetHeight>0&&os(i.height)/n.offsetHeight||1);var o=xi(n)?Vt(n):window,a=o.visualViewport,l=!zd()&&t,c=(i.left+(l&&a?a.offsetLeft:0))/r,u=(i.top+(l&&a?a.offsetTop:0))/s,d=i.width/r,h=i.height/s;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function aa(n){var e=Di(n),t=n.offsetWidth,i=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:i}}function Hd(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&uc(t)){var i=e;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Vn(n){return Vt(n).getComputedStyle(n)}function ww(n){return["table","td","th"].indexOf(dn(n))>=0}function wn(n){return((xi(n)?n.ownerDocument:n.document)||window.document).documentElement}function as(n){return dn(n)==="html"?n:n.assignedSlot||n.parentNode||(uc(n)?n.host:null)||wn(n)}function MN(n){return!on(n)||Vn(n).position==="fixed"?null:n.offsetParent}function HK(n){var e=/firefox/i.test(dc()),t=/Trident/i.test(dc());if(t&&on(n)){var i=Vn(n);if(i.position==="fixed")return null}var r=as(n);for(uc(r)&&(r=r.host);on(r)&&["html","body"].indexOf(dn(r))<0;){var s=Vn(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function Qi(n){for(var e=Vt(n),t=MN(n);t&&ww(t)&&Vn(t).position==="static";)t=MN(t);return t&&(dn(t)==="html"||dn(t)==="body"&&Vn(t).position==="static")?e:t||HK(n)||e}function la(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function ca(n,e,t){return Xi(n,oa(e,t))}function TN(n,e,t){var i=ca(n,e,t);return i>t?t:i}function Yd(){return{top:0,right:0,bottom:0,left:0}}function Gd(n){return Object.assign({},Yd(),n)}function Kd(n,e){return e.reduce(function(t,i){return t[i]=n,t},{})}var YK=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Gd(typeof e!="number"?e:Kd(e,Xs))};function GK(n){var e,t=n.state,i=n.name,r=n.options,s=t.elements.arrow,o=t.modifiersData.popperOffsets,a=hn(t.placement),l=la(a),c=[sn,un].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var d=YK(r.padding,t),h=aa(s),p=l==="y"?en:sn,g=l==="y"?vn:un,A=t.rects.reference[u]+t.rects.reference[l]-o[l]-t.rects.popper[u],v=o[l]-t.rects.reference[l],b=Qi(s),E=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,O=A/2-v/2,T=d[p],k=E-h[u]-d[g],D=E/2-h[u]/2+O,M=ca(T,D,k),N=l;t.modifiersData[i]=(e={},e[N]=M,e.centerOffset=M-D,e)}}function KK(n){var e=n.state,t=n.options,i=t.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||Hd(e.elements.popper,r)&&(e.elements.arrow=r))}var bw={name:"arrow",enabled:!0,phase:"main",fn:GK,effect:KK,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ei(n){return n.split("-")[1]}var $K={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ZK(n,e){var t=n.x,i=n.y,r=e.devicePixelRatio||1;return{x:os(t*r)/r||0,y:os(i*r)/r||0}}function IN(n){var e,t=n.popper,i=n.popperRect,r=n.placement,s=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,c=n.adaptive,u=n.roundOffsets,d=n.isFixed,h=o.x,p=h===void 0?0:h,g=o.y,A=g===void 0?0:g,v=typeof u=="function"?u({x:p,y:A}):{x:p,y:A};p=v.x,A=v.y;var b=o.hasOwnProperty("x"),E=o.hasOwnProperty("y"),O=sn,T=en,k=window;if(c){var D=Qi(t),M="clientHeight",N="clientWidth";if(D===Vt(t)&&(D=wn(t),Vn(D).position!=="static"&&a==="absolute"&&(M="scrollHeight",N="scrollWidth")),D=D,r===en||(r===sn||r===un)&&s===sa){T=vn;var L=d&&D===k&&k.visualViewport?k.visualViewport.height:D[M];A-=L-i.height,A*=l?1:-1}if(r===sn||(r===en||r===vn)&&s===sa){O=un;var B=d&&D===k&&k.visualViewport?k.visualViewport.width:D[N];p-=B-i.width,p*=l?1:-1}}var H=Object.assign({position:a},c&&$K),Z=u===!0?ZK({x:p,y:A},Vt(t)):{x:p,y:A};if(p=Z.x,A=Z.y,l){var re;return Object.assign({},H,(re={},re[T]=E?"0":"",re[O]=b?"0":"",re.transform=(k.devicePixelRatio||1)<=1?"translate("+p+"px, "+A+"px)":"translate3d("+p+"px, "+A+"px, 0)",re))}return Object.assign({},H,(e={},e[T]=E?A+"px":"",e[O]=b?p+"px":"",e.transform="",e))}function XK(n){var e=n.state,t=n.options,i=t.gpuAcceleration,r=i===void 0?!0:i,s=t.adaptive,o=s===void 0?!0:s,a=t.roundOffsets,l=a===void 0?!0:a,c={placement:hn(e.placement),variation:Ei(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,IN(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,IN(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var kN={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:XK,data:{}};var qg={passive:!0};function QK(n){var e=n.state,t=n.instance,i=n.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,a=o===void 0?!0:o,l=Vt(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",t.update,qg)}),a&&l.addEventListener("resize",t.update,qg),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",t.update,qg)}),a&&l.removeEventListener("resize",t.update,qg)}}var PN={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:QK,data:{}};var JK={left:"right",right:"left",bottom:"top",top:"bottom"};function hc(n){return n.replace(/left|right|bottom|top/g,function(e){return JK[e]})}var e$={start:"end",end:"start"};function jg(n){return n.replace(/start|end/g,function(e){return e$[e]})}function ua(n){var e=Vt(n),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function da(n){return Di(wn(n)).left+ua(n).scrollLeft}function Sw(n,e){var t=Vt(n),i=wn(n),r=t.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var c=zd();(c||!c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+da(n),y:l}}function Cw(n){var e,t=wn(n),i=ua(n),r=(e=n.ownerDocument)==null?void 0:e.body,s=Xi(t.scrollWidth,t.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Xi(t.scrollHeight,t.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+da(n),l=-i.scrollTop;return Vn(r||t).direction==="rtl"&&(a+=Xi(t.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function ha(n){var e=Vn(n),t=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+r+i)}function Wg(n){return["html","body","#document"].indexOf(dn(n))>=0?n.ownerDocument.body:on(n)&&ha(n)?n:Wg(as(n))}function Qs(n,e){var t;e===void 0&&(e=[]);var i=Wg(n),r=i===((t=n.ownerDocument)==null?void 0:t.body),s=Vt(i),o=r?[s].concat(s.visualViewport||[],ha(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(Qs(as(o)))}function pc(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function t$(n,e){var t=Di(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function NN(n,e,t){return e===Vg?pc(Sw(n,t)):xi(e)?t$(e,t):pc(Cw(wn(n)))}function n$(n){var e=Qs(as(n)),t=["absolute","fixed"].indexOf(Vn(n).position)>=0,i=t&&on(n)?Qi(n):n;return xi(i)?e.filter(function(r){return xi(r)&&Hd(r,i)&&dn(r)!=="body"}):[]}function xw(n,e,t,i){var r=e==="clippingParents"?n$(n):[].concat(e),s=[].concat(r,[t]),o=s[0],a=s.reduce(function(l,c){var u=NN(n,c,i);return l.top=Xi(u.top,l.top),l.right=oa(u.right,l.right),l.bottom=oa(u.bottom,l.bottom),l.left=Xi(u.left,l.left),l},NN(n,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function $d(n){var e=n.reference,t=n.element,i=n.placement,r=i?hn(i):null,s=i?Ei(i):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(r){case en:l={x:o,y:e.y-t.height};break;case vn:l={x:o,y:e.y+e.height};break;case un:l={x:e.x+e.width,y:a};break;case sn:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var c=r?la(r):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case ss:l[c]=l[c]-(e[u]/2-t[u]/2);break;case sa:l[c]=l[c]+(e[u]/2-t[u]/2);break;default:}}return l}function Js(n,e){e===void 0&&(e={});var t=e,i=t.placement,r=i===void 0?n.placement:i,s=t.strategy,o=s===void 0?n.strategy:s,a=t.boundary,l=a===void 0?CN:a,c=t.rootBoundary,u=c===void 0?Vg:c,d=t.elementContext,h=d===void 0?cc:d,p=t.altBoundary,g=p===void 0?!1:p,A=t.padding,v=A===void 0?0:A,b=Gd(typeof v!="number"?v:Kd(v,Xs)),E=h===cc?xN:cc,O=n.rects.popper,T=n.elements[g?E:h],k=xw(xi(T)?T:T.contextElement||wn(n.elements.popper),l,u,o),D=Di(n.elements.reference),M=$d({reference:D,element:O,strategy:"absolute",placement:r}),N=pc(Object.assign({},O,M)),L=h===cc?N:D,B={top:k.top-L.top+b.top,bottom:L.bottom-k.bottom+b.bottom,left:k.left-L.left+b.left,right:L.right-k.right+b.right},H=n.modifiersData.offset;if(h===cc&&H){var Z=H[r];Object.keys(B).forEach(function(re){var Q=[un,vn].indexOf(re)>=0?1:-1,G=[en,vn].indexOf(re)>=0?"y":"x";B[re]+=Z[G]*Q})}return B}function Dw(n,e){e===void 0&&(e={});var t=e,i=t.placement,r=t.boundary,s=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?Bg:l,u=Ei(i),d=u?a?vw:vw.filter(function(g){return Ei(g)===u}):Xs,h=d.filter(function(g){return c.indexOf(g)>=0});h.length===0&&(h=d);var p=h.reduce(function(g,A){return g[A]=Js(n,{placement:A,boundary:r,rootBoundary:s,padding:o})[hn(A)],g},{});return Object.keys(p).sort(function(g,A){return p[g]-p[A]})}function i$(n){if(hn(n)===Lg)return[];var e=hc(n);return[jg(n),e,jg(e)]}function r$(n){var e=n.state,t=n.options,i=n.name;if(!e.modifiersData[i]._skip){for(var r=t.mainAxis,s=r===void 0?!0:r,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,c=t.padding,u=t.boundary,d=t.rootBoundary,h=t.altBoundary,p=t.flipVariations,g=p===void 0?!0:p,A=t.allowedAutoPlacements,v=e.options.placement,b=hn(v),E=b===v,O=l||(E||!g?[hc(v)]:i$(v)),T=[v].concat(O).reduce(function(ke,Qe){return ke.concat(hn(Qe)===Lg?Dw(e,{placement:Qe,boundary:u,rootBoundary:d,padding:c,flipVariations:g,allowedAutoPlacements:A}):Qe)},[]),k=e.rects.reference,D=e.rects.popper,M=new Map,N=!0,L=T[0],B=0;B<T.length;B++){var H=T[B],Z=hn(H),re=Ei(H)===ss,Q=[en,vn].indexOf(Z)>=0,G=Q?"width":"height",ae=Js(e,{placement:H,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),ne=Q?re?un:sn:re?vn:en;k[G]>D[G]&&(ne=hc(ne));var De=hc(ne),ue=[];if(s&&ue.push(ae[Z]<=0),a&&ue.push(ae[ne]<=0,ae[De]<=0),ue.every(function(ke){return ke})){L=H,N=!1;break}M.set(H,ue)}if(N)for(var le=g?3:1,ee=function(Qe){var Ee=T.find(function(Ve){var Ce=M.get(Ve);if(Ce)return Ce.slice(0,Qe).every(function(Pe){return Pe})});if(Ee)return L=Ee,"break"},fe=le;fe>0;fe--){var ye=ee(fe);if(ye==="break")break}e.placement!==L&&(e.modifiersData[i]._skip=!0,e.placement=L,e.reset=!0)}}var Ew={name:"flip",enabled:!0,phase:"main",fn:r$,requiresIfExists:["offset"],data:{_skip:!1}};function s$(n,e,t){var i=hn(n),r=[sn,en].indexOf(i)>=0?-1:1,s=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[sn,un].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function o$(n){var e=n.state,t=n.options,i=n.name,r=t.offset,s=r===void 0?[0,0]:r,o=Bg.reduce(function(u,d){return u[d]=s$(d,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=o}var Mw={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:o$};function a$(n){var e=n.state,t=n.name;e.modifiersData[t]=$d({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var ON={name:"popperOffsets",enabled:!0,phase:"read",fn:a$,data:{}};function Tw(n){return n==="x"?"y":"x"}function l$(n){var e=n.state,t=n.options,i=n.name,r=t.mainAxis,s=r===void 0?!0:r,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,d=t.padding,h=t.tether,p=h===void 0?!0:h,g=t.tetherOffset,A=g===void 0?0:g,v=Js(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),b=hn(e.placement),E=Ei(e.placement),O=!E,T=la(b),k=Tw(T),D=e.modifiersData.popperOffsets,M=e.rects.reference,N=e.rects.popper,L=typeof A=="function"?A(Object.assign({},e.rects,{placement:e.placement})):A,B=typeof L=="number"?{mainAxis:L,altAxis:L}:Object.assign({mainAxis:0,altAxis:0},L),H=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Z={x:0,y:0};if(D){if(s){var re,Q=T==="y"?en:sn,G=T==="y"?vn:un,ae=T==="y"?"height":"width",ne=D[T],De=ne+v[Q],ue=ne-v[G],le=p?-N[ae]/2:0,ee=E===ss?M[ae]:N[ae],fe=E===ss?-N[ae]:-M[ae],ye=e.elements.arrow,ke=p&&ye?aa(ye):{width:0,height:0},Qe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Yd(),Ee=Qe[Q],Ve=Qe[G],Ce=ca(0,M[ae],ke[ae]),Pe=O?M[ae]/2-le-Ce-Ee-B.mainAxis:ee-Ce-Ee-B.mainAxis,be=O?-M[ae]/2+le+Ce+Ve+B.mainAxis:fe+Ce+Ve+B.mainAxis,Ye=e.elements.arrow&&Qi(e.elements.arrow),lt=Ye?T==="y"?Ye.clientTop||0:Ye.clientLeft||0:0,je=(re=H?.[T])!=null?re:0,me=ne+Pe-je-lt,We=ne+be-je,Re=ca(p?oa(De,me):De,ne,p?Xi(ue,We):ue);D[T]=Re,Z[T]=Re-ne}if(a){var xe,ut=T==="x"?en:sn,jn=T==="x"?vn:un,zt=D[k],q=k==="y"?"height":"width",S=zt+v[ut],I=zt-v[jn],P=[en,sn].indexOf(b)!==-1,F=(xe=H?.[k])!=null?xe:0,Y=P?S:zt-M[q]-N[q]-F+B.altAxis,$=P?zt+M[q]+N[q]-F-B.altAxis:I,pe=p&&P?TN(Y,zt,$):ca(p?Y:S,zt,p?$:I);D[k]=pe,Z[k]=pe-zt}e.modifiersData[i]=Z}}var Iw={name:"preventOverflow",enabled:!0,phase:"main",fn:l$,requiresIfExists:["offset"]};function kw(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function Pw(n){return n===Vt(n)||!on(n)?ua(n):kw(n)}function c$(n){var e=n.getBoundingClientRect(),t=os(e.width)/n.offsetWidth||1,i=os(e.height)/n.offsetHeight||1;return t!==1||i!==1}function Nw(n,e,t){t===void 0&&(t=!1);var i=on(e),r=on(e)&&c$(e),s=wn(e),o=Di(n,r,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!t)&&((dn(e)!=="body"||ha(s))&&(a=Pw(e)),on(e)?(l=Di(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=da(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function u$(n){var e=new Map,t=new Set,i=[];n.forEach(function(s){e.set(s.name,s)});function r(s){t.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&r(l)}}),i.push(s)}return n.forEach(function(s){t.has(s.name)||r(s)}),i}function Ow(n){var e=u$(n);return DN.reduce(function(t,i){return t.concat(e.filter(function(r){return r.phase===i}))},[])}function Rw(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function Fw(n){var e=n.reduce(function(t,i){var r=t[i.name];return t[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}var RN={placement:"bottom",modifiers:[],strategy:"absolute"};function FN(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function LN(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,i=t===void 0?[]:t,r=e.defaultOptions,s=r===void 0?RN:r;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},RN,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,p={state:u,setOptions:function(b){var E=typeof b=="function"?b(u.options):b;A(),u.options=Object.assign({},s,u.options,E),u.scrollParents={reference:xi(a)?Qs(a):a.contextElement?Qs(a.contextElement):[],popper:Qs(l)};var O=Ow(Fw([].concat(i,u.options.modifiers)));return u.orderedModifiers=O.filter(function(T){return T.enabled}),g(),p.update()},forceUpdate:function(){if(!h){var b=u.elements,E=b.reference,O=b.popper;if(FN(E,O)){u.rects={reference:Nw(E,Qi(O),u.options.strategy==="fixed"),popper:aa(O)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(B){return u.modifiersData[B.name]=Object.assign({},B.data)});for(var T=0;T<u.orderedModifiers.length;T++){if(u.reset===!0){u.reset=!1,T=-1;continue}var k=u.orderedModifiers[T],D=k.fn,M=k.options,N=M===void 0?{}:M,L=k.name;typeof D=="function"&&(u=D({state:u,options:N,name:L,instance:p})||u)}}}},update:Rw(function(){return new Promise(function(v){p.forceUpdate(),v(u)})}),destroy:function(){A(),h=!0}};if(!FN(a,l))return p;p.setOptions(c).then(function(v){!h&&c.onFirstUpdate&&c.onFirstUpdate(v)});function g(){u.orderedModifiers.forEach(function(v){var b=v.name,E=v.options,O=E===void 0?{}:E,T=v.effect;if(typeof T=="function"){var k=T({state:u,name:b,instance:p,options:O}),D=function(){};d.push(k||D)}})}function A(){d.forEach(function(v){return v()}),d=[]}return p}}var d$=[PN,ON,kN,EN],Lw=LN({defaultModifiers:d$});var jN=["*"];function h$(n,e){if(n&1){let t=ge();m(0,"button",1),j("click",function(){C(t);let r=R();return x(r.close())}),_()}}function p$(n,e){if(n&1&&w(0),n&2){let t=R(2);X(t.title)}}function f$(n,e){}function g$(n,e){if(n&1&&(m(0,"h3",2),te(1,p$,1,1,"ng-template",null,0,vf)(3,f$,0,0,"ng-template",4),_()),n&2){let t=$n(2),i=R();y(3),V("ngTemplateOutlet",i.isTitleTemplate()?i.title:t)("ngTemplateOutletContext",i.context)}}var WN={animation:!0,transitionTimerDelayMs:5},UN=(()=>{class n{constructor(){this.animation=WN.animation}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function m$(n){let{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n),i=parseFloat(e),r=parseFloat(t);return(i+r)*1e3}function _$(n){return typeof n=="string"}function A$(n,e){return!e||typeof n.closest>"u"?null:n.closest(e)}function y$(n){return e=>new Je(t=>{let i=o=>n.run(()=>t.next(o)),r=o=>n.run(()=>t.error(o)),s=()=>n.run(()=>t.complete());return e.subscribe({next:i,error:r,complete:s})})}var v$=()=>{},{transitionTimerDelayMs:w$}=WN,Ug=new Map,Vw=(n,e,t,i)=>{let r=i.context||{},s=Ug.get(e);if(s)switch(i.runningTransition){case"continue":return Cn;case"stop":n.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),Ug.delete(e)}let o=t(e,i.animation,r)||v$;if(!i.animation||window.getComputedStyle(e).transitionProperty==="none")return n.run(()=>o()),Te(void 0).pipe(y$(n));let a=new at,l=new at,c=a.pipe(T_(!0));Ug.set(e,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});let u=m$(e);return n.runOutsideAngular(()=>{let d=gs(e,"transitionend").pipe(nr(c),mn(({target:p})=>p===e)),h=go(u+w$).pipe(nr(c));hp(h,d,l).pipe(nr(c)).subscribe(()=>{Ug.delete(e),n.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};var b$=(()=>{class n{constructor(){this._ngbConfig=se(UN),this.dismissible=!0,this.type="warning"}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),S$=({classList:n})=>{n.remove("show")},zN=(()=>{class n{constructor(){this._config=se(b$),this._elementRef=se(_n),this._zone=se(Et),this.animation=this._config.animation,this.dismissible=this._config.dismissible,this.type=this._config.type,this.closed=new Nt}close(){let t=Vw(this._zone,this._elementRef.nativeElement,S$,{animation:this.animation,runningTransition:"continue"});return t.subscribe(()=>this.closed.emit()),t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=ji({type:n,selectors:[["ngb-alert"]],hostAttrs:["role","alert"],hostVars:6,hostBindings:function(i,r){i&2&&(Vy("alert show"+(r.type?" alert-"+r.type:"")),pl("fade",r.animation)("alert-dismissible",r.dismissible))},inputs:{animation:"animation",dismissible:"dismissible",type:"type"},outputs:{closed:"closed"},exportAs:["ngbAlert"],ngContentSelectors:jN,decls:2,vars:1,consts:()=>{let t;return t=$localize`:@@ngb.alert.close:Close`,[["type","button","aria-label",t,1,"btn-close"],["type","button","aria-label",t,1,"btn-close",3,"click"]]},template:function(i,r){i&1&&(jy(),Wy(0),te(1,h$,1,0,"button",0)),i&2&&(y(),By(r.dismissible?1:-1))},styles:[`ngb-alert{display:block}
`],encapsulation:2,changeDetection:0})}}return n})(),HN=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Wi({type:n})}static{this.\u0275inj=Li({})}}return n})();var zg=(n,e)=>e?e.some(t=>t.contains(n)):!1,VN=(n,e)=>!e||A$(n,e)!=null,C$=(()=>{let n=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,e=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(n()||e()):!1})(),x$=n=>C$?()=>setTimeout(()=>n(),100):n;function D$(n,e,t,i,r,s,o,a){t&&n.runOutsideAngular(x$(()=>{let l=h=>{let p=h.target;return h.button===2||zg(p,o)?!1:t==="inside"?zg(p,s)&&VN(p,a):t==="outside"?!zg(p,s):VN(p,a)||!zg(p,s)},c=gs(e,"keydown").pipe(nr(r),mn(h=>h.key==="Escape"),Qt(h=>h.preventDefault())),u=gs(e,"mousedown").pipe(Ue(l),nr(r)),d=gs(e,"mouseup").pipe(P_(u),mn(([h,p])=>p),M_(0),nr(r));hp([c.pipe(Ue(h=>0)),d.pipe(Ue(h=>1))]).subscribe(h=>n.run(()=>i(h)))}))}var Zbe=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");var E$=(()=>{class n{constructor(){this._element=se(Gt).documentElement}isRTL(){return(this._element.getAttribute("dir")||"").toLowerCase()==="rtl"}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),M$=/\s+/,T$=/  +/gi,I$={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]};function k$(n,e){let[t,i]=I$[n];return e&&i||t}var P$=/^left/,N$=/^right/,O$=/^start/,R$=/^end/;function F$(n,e){let[t,i]=e.split("-"),r=t.replace(P$,"start").replace(N$,"end"),s=[r];if(i){let o=i;(t==="left"||t==="right")&&(o=o.replace(O$,"top").replace(R$,"bottom")),s.push(`${r}-${o}`)}return n&&(s=s.map(o=>`${n}-${o}`)),s.join(" ")}function BN({placement:n,baseClass:e},t){let i=Array.isArray(n)?n:n.split(M$),r=["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"],s=i.findIndex(c=>c==="auto");s>=0&&r.forEach(function(c){i.find(u=>u.search("^"+c)!==-1)==null&&i.splice(s++,1,c)});let o=i.map(c=>k$(c,t.isRTL()));return{placement:o.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!e,phase:"write",fn({state:c}){let u=new RegExp(e+"(-[a-z]+)*","gi"),d=c.elements.popper,h=c.placement,p=d.className;p=p.replace(u,""),p+=` ${F$(e,h)}`,p=p.trim().replace(T$," "),d.className=p}},Ew,Iw,bw,{enabled:!0,name:"flip",options:{fallbackPlacements:o}}]}}function qN(n){return n}function L$(){let n=se(E$),e=null;return{createPopper(t){if(!e){let r=(t.updatePopperOptions||qN)(BN(t,n));e=Lw(t.hostElement,t.targetElement,r)}},update(){e&&e.update()},setOptions(t){if(e){let r=(t.updatePopperOptions||qN)(BN(t,n));e.setOptions(r)}},destroy(){e&&(e.destroy(),e=null)}}}function V$(n){return e=>(e.modifiers.push(Mw,{name:"offset",options:{offset:()=>n}}),e)}var Xbe=new Date(1882,10,12),Qbe=new Date(2174,10,25);var Jbe=1e3*60*60*24;var qw=1080,B$=24*qw,q$=12*qw+793,e2e=29*B$+q$,t2e=11*qw+204;var Zd=class{constructor(e,t,i){this.nodes=e,this.viewRef=t,this.componentRef=i}},Bw=class{constructor(e){this._componentType=e,this._windowRef=null,this._contentRef=null,this._document=se(Gt),this._applicationRef=se(Ur),this._injector=se(On),this._viewContainerRef=se(qi),this._ngZone=se(Et)}open(e,t,i=!1){this._windowRef||(this._contentRef=this._getContentRef(e,t),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));let{nativeElement:r}=this._windowRef.location,s=new at;of({mixedReadWrite:()=>{s.next(),s.complete()}},{injector:this._injector});let o=s.pipe(Pt(()=>Vw(this._ngZone,r,({classList:a})=>a.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:o}}close(e=!1){return this._windowRef?Vw(this._ngZone,this._windowRef.location.nativeElement,({classList:t})=>t.remove("show"),{animation:e,runningTransition:"stop"}).pipe(Qt(()=>{this._windowRef?.destroy(),this._contentRef?.viewRef?.destroy(),this._windowRef=null,this._contentRef=null})):Te(void 0)}_getContentRef(e,t){if(e)if(e instanceof cr){let i=e.createEmbeddedView(t);return this._applicationRef.attachView(i),new Zd([i.rootNodes],i)}else return new Zd([[this._document.createTextNode(`${e}`)]]);else return new Zd([])}};var j$={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]};function W$(n){let e=(n||"").trim();if(e.length===0)return[];let t=e.split(/\s+/).map(r=>r.split(":")).map(r=>j$[r[0]]||r),i=t.filter(r=>r.includes("manual"));if(i.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(i.length===1&&t.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i.length?[]:t}function U$(n,e,t,i,r,s=0,o=0){let a=W$(e);if(a.length===0)return()=>{};let l=new Set,c=[],u;function d(p,g){n.addEventListener(p,g),c.push(()=>n.removeEventListener(p,g))}function h(p,g){clearTimeout(u),g>0?u=setTimeout(p,g):p()}for(let[p,g]of a)g?(d(p,()=>{l.add(p),h(()=>l.size>0&&i(),s)}),d(g,()=>{l.delete(p),h(()=>l.size===0&&r(),o)})):d(p,()=>t()?h(r,o):h(i,s));return()=>c.forEach(p=>p())}var z$=(()=>{class n{constructor(){this._ngbConfig=se(UN),this.autoClose=!0,this.placement="auto",this.popperOptions=t=>t,this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),H$=0,Y$=(()=>{class n{isTitleTemplate(){return this.title instanceof cr}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=ji({type:n,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip",2,"position","absolute"],hostVars:5,hostBindings:function(i,r){i&2&&(qy("id",r.id),Vy("popover"+(r.popoverClass?" "+r.popoverClass:"")),pl("fade",r.animation))},inputs:{animation:"animation",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:jN,decls:4,vars:1,consts:[["simpleTitle",""],["data-popper-arrow","",1,"popover-arrow"],[1,"popover-header"],[1,"popover-body"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,r){i&1&&(jy(),Ze(0,"div",1),te(1,g$,4,2,"h3",2),m(2,"div",3),Wy(3),_()),i&2&&(y(),By(r.title?1:-1))},dependencies:[Jy],encapsulation:2,changeDetection:0})}}return n})(),YN=(()=>{class n{constructor(){this._config=se(z$),this.animation=this._config.animation,this.autoClose=this._config.autoClose,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.triggers=this._config.triggers,this.container=this._config.container,this.disablePopover=this._config.disablePopover,this.popoverClass=this._config.popoverClass,this.openDelay=this._config.openDelay,this.closeDelay=this._config.closeDelay,this.shown=new Nt,this.hidden=new Nt,this._nativeElement=se(_n).nativeElement,this._ngZone=se(Et),this._document=se(Gt),this._changeDetector=se(Cs),this._injector=se(On),this._ngbPopoverWindowId=`ngb-popover-${H$++}`,this._popupService=new Bw(Y$),this._windowRef=null,this._positioning=L$()}open(t){if(!this._windowRef&&!this._isDisabled()){let{windowRef:i,transition$:r}=this._popupService.open(this.ngbPopover,t??this.popoverContext,this.animation);this._windowRef=i,this._windowRef.setInput("animation",this.animation),this._windowRef.setInput("title",this.popoverTitle),this._windowRef.setInput("context",t??this.popoverContext),this._windowRef.setInput("popoverClass",this.popoverClass),this._windowRef.setInput("id",this._ngbPopoverWindowId),this._getPositionTargetElement().setAttribute("aria-describedby",this._ngbPopoverWindowId),this.container==="body"&&this._document.body.appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._getPositionTargetElement(),targetElement:this._windowRef.location.nativeElement,placement:this.placement,baseClass:"bs-popover",updatePopperOptions:s=>this.popperOptions(V$([0,8])(s))}),Promise.resolve().then(()=>{this._positioning.update()}),this._afterRenderRef=gy({mixedReadWrite:()=>{this._positioning.update()}},{injector:this._injector})}),D$(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),r.subscribe(()=>this.shown.emit())}}close(t=this.animation){this._windowRef&&(this._getPositionTargetElement().removeAttribute("aria-describedby"),this._popupService.close(t).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this._afterRenderRef?.destroy(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return this._windowRef!=null}ngOnInit(){this._unregisterListenersFn=U$(this._nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:t,popoverTitle:i,disablePopover:r,popoverClass:s}){s&&this.isOpen()&&this._windowRef.setInput("popoverClass",s.currentValue),(t||i||r)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(!1),this._unregisterListenersFn?.()}_isDisabled(){return this.disablePopover?!0:!this.ngbPopover&&!this.popoverTitle}_getPositionTargetElement(){return(_$(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget)||this._nativeElement}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Mt({type:n,selectors:[["","ngbPopover",""]],inputs:{animation:"animation",autoClose:"autoClose",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle",placement:"placement",popperOptions:"popperOptions",triggers:"triggers",positionTarget:"positionTarget",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",popoverContext:"popoverContext",openDelay:"openDelay",closeDelay:"closeDelay"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[Vi]})}}return n})(),GN=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Wi({type:n})}static{this.\u0275inj=Li({})}}return n})();var n2e=new we("live announcer delay",{providedIn:"root",factory:()=>100});var xr=class n{constructor(e){this.http=e}baseUrl="https://api.fyers.in/api/v1/";dataUrl="https://data.fyers.in/data-api/v1/";testUrl="https://jsonplaceholder.typicode.com/posts";auth(){let e={headers:new Fe({"Content-Type":"application/json"}),responseType:"json"},t=this.baseUrl+"auth",i={app_id:f.fyersAppId,secret_key:f.fyersSecretId};return this.http.post(t,i,e)}getTokenUrl(e,t){return this.baseUrl+"genrateToken?authorization_code="+e+"&appId="+t}getFunds(e){let t={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"},i=this.baseUrl+"funds";return this.http.get(i,t)}getPositions(e){let t={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"},i=this.baseUrl+"positions";return this.http.get(i,t)}getOrders(e){let t={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"},i=this.baseUrl+"orders";return this.http.get(i,t)}place_order(e,t){let i={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"},r=this.baseUrl+"orders";return this.http.post(r,t,i)}static \u0275fac=function(t){return new(t||n)(oe(Tt))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var ZN=Ta(jw());var Ww=Ta(jw());var fc=class n{constructor(e,t){this.http=e;this.mapService=t}handleSocketMessage(e){console.log("AliceblueService message",e),this.parseSocketMessageNew(e)}parseSocketMessageNew(e){let t=JSON.parse(e),i=new Rd;i.token=Number(t.tk),i.exchange_code=t.e,t.lp&&(i.ltp=Number(t.lp)),t.atp&&(i.atp=Number(t.ap)),t.v&&(i.volume=Number(t.v)),t.o&&(i.open=Number(t.o)),t.h&&(i.high=Number(t.h)),t.l&&(i.low=Number(t.l)),t.c&&(i.close=Number(t.c)),i.ltp&&this.mapService.updateMaps_aliceblue(i)}parseSocketMessage(e){let t=new Uint8Array(e);if(t instanceof Uint8Array){let i=t[0];i===1?this.parseMarketData(t):i===2||i===3||i===4||i===7||(i===8?console.log("***** RECEIVED OI"):i===9||10)}else console.error("Error while converting binary data to byte array")}parseMarketData(e){let t=new Rd;t.exchange_code=e[1];let i=100;t.exchange_code===3&&(i=1e7),t.token=this.byteArrayToNumber(e.subarray(2,6),24),t.ltp=this.byteArrayToNumber(e.subarray(6,10),24)/i,t.ltt_unix=this.byteArrayToNumber(e.subarray(10,14),24),t.last_traded_qty=this.byteArrayToNumber(e.subarray(14,18),24),t.volume=this.byteArrayToNumber(e.subarray(18,22),24),t.best_bid=this.byteArrayToNumber(e.subarray(22,26),24)/i,t.best_bid_qty=this.byteArrayToNumber(e.subarray(26,30),24),t.best_ask=this.byteArrayToNumber(e.subarray(30,34),24)/i,t.best_ask_qty=this.byteArrayToNumber(e.subarray(34,38),24),t.total_buy_qty=this.byteArrayToNumber(e.subarray(38,46),56),t.total_sell_qty=this.byteArrayToNumber(e.subarray(46,54),56),t.atp=this.byteArrayToNumber(e.subarray(54,58),24)/i,t.exchange_timestamp=this.byteArrayToNumber(e.subarray(58,62),24),t.open=this.byteArrayToNumber(e.subarray(62,66),24)/i,t.high=this.byteArrayToNumber(e.subarray(66,70),24)/i,t.low=this.byteArrayToNumber(e.subarray(70,74),24)/i,t.close=this.byteArrayToNumber(e.subarray(74,78),24)/i,t.year_high=this.byteArrayToNumber(e.subarray(78,82),24)/i,t.year_low=this.byteArrayToNumber(e.subarray(82,86),24)/i,this.updateMaps(t)}convertPayloadToString(e){return String.fromCharCode.apply(null,e)}byteArrayToNumber(e,t){let i=0,r=0,s=0;for(r=t;r>=0;r-=8)i|=(e[s]&255)<<r,s++;return i}updateMaps(e){let t=f.mastersContract.get(e.token);if(t){let i=t.instru,r=t.strike,s=t.optionType,o=!1,a="",l=new Date(t.expiry);l.setHours(0,0,0,0);let c=f.monthlyExpiryDates;i==="USDINR"&&(c=f.monthlyExpiryDatesUSDINR);for(let h in c)if(c.hasOwnProperty(h)&&l.getTime()===c[h].getTime()){o=!0,a=h;break}let u="";if(o)u=a;else{let h=new Date(t.expiry),p=null;h.getMonth()+1===10?p="O":h.getMonth()+1===11?p="N":h.getMonth()+1===12?p="D":p=h.getMonth()+1,u=""+(h.getFullYear()-2e3)+p+("0"+h.getDate()).slice(-2)}let d=i+u+r+s;console.log("updateMaps strike is",d),d.startsWith("FINNIFTY")&&d.endsWith("FUT")&&(d="FINNIFTY",console.log("finnifty fut update")),this.mapService.setLtp(d,e.ltp),this.mapService.setAtp(d,e.atp),this.mapService.setVolume(d,e.volume)}else{let i="";e.token===26e3?i="NIFTY50":e.token===26009?i="BANKNIFTY":e.token===26037?i="FINNIFTY":e.token===1?i="USDINR":console.error(e.token,"not found in masters"),this.mapService.setLtp(i,e.ltp),this.mapService.setAtp(i,e.atp),this.mapService.setVolume(i,e.volume)}}static \u0275fac=function(t){return new(t||n)(oe(Tt),oe(qe))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var Dr=class n{constructor(e){this.aliceblueParserService=e}heartbeatInterval;websocket;access_token;baseUrl="https://ant.aliceblueonline.com";socket_endpoint="wss://ws1.aliceblueonline.com/NorenWS/";user_id="AB033978";isSocketConnected(){return!!(this.websocket&&this.websocket.OPEN===1)}connect(e){this.access_token=e,this.websocket=new WebSocket(this.socket_endpoint),this.websocket.onopen=()=>{this.handleOnOpen(event)},this.websocket.onmessage=t=>{this.handleOnMessage(t)},this.websocket.onerror=t=>{this.handleOnError(t)},this.websocket.onclose=t=>{this.handleOnClose(t)}}handleOnOpen(e){if(console.log("Opened Web Socket connection"),f.SocketMode==="aliceblue"){let t=JSON.stringify({susertoken:(0,Ww.sha256)((0,Ww.sha256)(f.AliceblueSessionId)),t:"c",actid:this.user_id+"_API",uid:this.user_id+"_API",source:"API"});this.sendMessage(t),setTimeout(()=>{this.sendInitialSubscription(),this.sendHeartbeat()},2e3),setTimeout(()=>{f.websocketEvent$.next("connected")},4e3)}}sendHeartbeat(){this.heartbeatInterval=setInterval(()=>{let e=JSON.stringify({t:"h"});this.sendMessage(e)},5e3)}sendInitialSubscription(){console.log("sending initial subscription");let e=JSON.stringify({k:"NSE|26000#NSE|26009#NSE|26037",t:"t"});this.sendMessage(e)}handleOnMessage(e){console.log("handleOnMessage",e),f.SocketMode==="aliceblue"&&this.aliceblueParserService.handleSocketMessage(e.data)}handleOnError(e){console.log("Error in WS connection",e)}handleOnClose(e){console.log("Closed WS connection",e),clearInterval(this.heartbeatInterval),this.websocket=null,setTimeout(()=>{console.log("Reconnecting websocket"),this.connect(this.access_token)},2e3)}closeSocket(){console.log("Closing WS connection manually"),this.websocket.close(),clearInterval(this.heartbeatInterval),this.websocket=null}sendMessage(e){this.websocket&&this.websocket.OPEN===1?(console.log("Sending message over websocket: "+e),this.websocket.send(e)):console.log("Cannot send the message. Socket is not yet opened or it has been closed - ",e)}static \u0275fac=function(t){return new(t||n)(oe(fc))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var Er=class n{constructor(e,t){this.http=e;this.webSocketService=t}baseUrl="https://ant.aliceblueonline.com/rest/AliceBlueAPIService/api/";getMastersContract(e){let t={responseType:"json"};this.http.get("https://v2api.aliceblueonline.com/restpy/contract_master?exch=NFO",t).subscribe(r=>{console.log("AliceblueService getMastersContract",r),this.parseContractMaster(r)},r=>{console.log("AliceblueService getMastersContract error",r)})}parseContractMaster(e){if(e){f.mastersContract.clear();for(let t in e)e[t]instanceof Array&&e[t].forEach(i=>{let r=new Hs;r.token=Number(i.token),r.instru=i.symbol,r.expiry=new Date(i.expiry_date).toDateString(),r.strike=Number(i.strike_price),r.optionType=i.option_type,r.lotSize=Number(i.lot_size),r.exchange=i.exch,r.tradingSymbol=i.trading_symbol,f.mastersContract.set(r.token,r)})}console.log("AliceblueService getMastersContract mastersContract",f.mastersContract),this.getEncKey()}getEncKey(){let e={headers:new Fe({"Content-Type":"application/json"}),responseType:"json"},t=this.baseUrl+"customer/getAPIEncpkey",i={userId:f.AliceblueUserId};this.http.post(t,i,e).subscribe(r=>{console.log("AliceblueService getEncKey res",r),r.stat=="Ok"?(f.AliceblueEncKey=r.encKey,console.log("AliceblueService encKey is",r.encKey),this.getSessionId()):console.log("AliceblueService getEncKey res stat Not OK. Check if you are logged in to Aliceblue web or mobile application.")},r=>{console.log("AliceblueService getEncKey error",r)})}getSessionId(){let e={headers:new Fe({"Content-Type":"application/json"}),responseType:"json"},t=this.baseUrl+"customer/getUserSID",i={userId:f.AliceblueUserId,userData:(0,ZN.sha256)(f.AliceblueUserId+f.AliceblueApiKey+f.AliceblueEncKey)};this.http.post(t,i,e).subscribe(r=>{console.log("AliceblueService getSessionId res",r),r.stat=="Ok"?(f.AliceblueSessionId=r.sessionID,console.log("AliceblueService sessionID is",r.sessionID),this.invalidateSocketSess()):console.log("AliceblueService getSessionId res stat Not OK")},r=>{console.log("AliceblueService getSessionId error",r)})}invalidateSocketSess(){let e={headers:new Fe({Authorization:"Bearer "+f.AliceblueUserId+" "+f.AliceblueSessionId,"Content-Type":"application/json"}),responseType:"json"},t=this.baseUrl+"ws/invalidateSocketSess",i={loginType:"API"};this.http.post(t,i,e).subscribe(r=>{console.log("AliceblueService invalidateSocketSess res",r),r.stat=="Ok"?(console.log("AliceblueService invalidateSocketSess is",r.message),this.createSocketSess()):console.log("AliceblueService invalidateSocketSess res stat Not OK")},r=>{console.log("AliceblueService invalidateSocketSess error",r)})}createSocketSess(){let e={headers:new Fe({Authorization:"Bearer "+f.AliceblueUserId+" "+f.AliceblueSessionId,"Content-Type":"application/json"}),responseType:"json"},t=this.baseUrl+"ws/createSocketSess",i={loginType:"API"};this.http.post(t,i,e).subscribe(r=>{console.log("AliceblueService createSocketSess res",r),r.stat=="Ok"?(console.log("AliceblueService createSocketSess is",r.message),this.connectWebsocket(null)):console.log("AliceblueService createSocketSess res stat Not OK")},r=>{console.log("AliceblueService createSocketSess error",r)})}isSocketConnected(){return this.webSocketService.isSocketConnected()}connectWebsocket(e){this.webSocketService.connect(e)}closeWebsocket(){this.webSocketService.closeSocket()}sendSubscriptions(e){let t="";e.forEach(r=>{let s=this.findStrikeInMasters(r);s&&(t+=s.exchange+"|"+s.token+"#")}),t=t.replace(/#\s*$/,"");let i=JSON.stringify({k:t,t:"t"});console.log("sendSubscriptions: "+i),this.webSocketService.sendMessage(i)}findStrikeInMasters(e){let t=null;return f.mastersContract.forEach(i=>{if(e.expiry===i.expiry&&e.instru===i.instru&&e.strike===i.strike&&e.type===i.optionType){t=i;return}}),t}static \u0275fac=function(t){return new(t||n)(oe(Tt),oe(Dr))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};function vc(n){let e=n.length;for(;--e>=0;)n[e]=0}var G$=0,RO=1,K$=2,$$=3,Z$=258,hb=29,dh=256,ih=dh+1+hb,_c=30,pb=19,FO=2*ih+1,pa=15,Uw=16,X$=7,fb=256,LO=16,VO=17,BO=18,ib=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Jg=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Q$=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),qO=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),J$=512,cs=new Array((ih+2)*2);vc(cs);var eh=new Array(_c*2);vc(eh);var rh=new Array(J$);vc(rh);var sh=new Array(Z$-$$+1);vc(sh);var gb=new Array(hb);vc(gb);var em=new Array(_c);vc(em);function zw(n,e,t,i,r){this.static_tree=n,this.extra_bits=e,this.extra_base=t,this.elems=i,this.max_length=r,this.has_stree=n&&n.length}var jO,WO,UO;function Hw(n,e){this.dyn_tree=n,this.max_code=0,this.stat_desc=e}var zO=n=>n<256?rh[n]:rh[256+(n>>>7)],oh=(n,e)=>{n.pending_buf[n.pending++]=e&255,n.pending_buf[n.pending++]=e>>>8&255},ti=(n,e,t)=>{n.bi_valid>Uw-t?(n.bi_buf|=e<<n.bi_valid&65535,oh(n,n.bi_buf),n.bi_buf=e>>Uw-n.bi_valid,n.bi_valid+=t-Uw):(n.bi_buf|=e<<n.bi_valid&65535,n.bi_valid+=t)},Tr=(n,e,t)=>{ti(n,t[e*2],t[e*2+1])},HO=(n,e)=>{let t=0;do t|=n&1,n>>>=1,t<<=1;while(--e>0);return t>>>1},eZ=n=>{n.bi_valid===16?(oh(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)},tZ=(n,e)=>{let t=e.dyn_tree,i=e.max_code,r=e.stat_desc.static_tree,s=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length,c,u,d,h,p,g,A=0;for(h=0;h<=pa;h++)n.bl_count[h]=0;for(t[n.heap[n.heap_max]*2+1]=0,c=n.heap_max+1;c<FO;c++)u=n.heap[c],h=t[t[u*2+1]*2+1]+1,h>l&&(h=l,A++),t[u*2+1]=h,!(u>i)&&(n.bl_count[h]++,p=0,u>=a&&(p=o[u-a]),g=t[u*2],n.opt_len+=g*(h+p),s&&(n.static_len+=g*(r[u*2+1]+p)));if(A!==0){do{for(h=l-1;n.bl_count[h]===0;)h--;n.bl_count[h]--,n.bl_count[h+1]+=2,n.bl_count[l]--,A-=2}while(A>0);for(h=l;h!==0;h--)for(u=n.bl_count[h];u!==0;)d=n.heap[--c],!(d>i)&&(t[d*2+1]!==h&&(n.opt_len+=(h-t[d*2+1])*t[d*2],t[d*2+1]=h),u--)}},YO=(n,e,t)=>{let i=new Array(pa+1),r=0,s,o;for(s=1;s<=pa;s++)r=r+t[s-1]<<1,i[s]=r;for(o=0;o<=e;o++){let a=n[o*2+1];a!==0&&(n[o*2]=HO(i[a]++,a))}},nZ=()=>{let n,e,t,i,r,s=new Array(pa+1);for(t=0,i=0;i<hb-1;i++)for(gb[i]=t,n=0;n<1<<ib[i];n++)sh[t++]=i;for(sh[t-1]=i,r=0,i=0;i<16;i++)for(em[i]=r,n=0;n<1<<Jg[i];n++)rh[r++]=i;for(r>>=7;i<_c;i++)for(em[i]=r<<7,n=0;n<1<<Jg[i]-7;n++)rh[256+r++]=i;for(e=0;e<=pa;e++)s[e]=0;for(n=0;n<=143;)cs[n*2+1]=8,n++,s[8]++;for(;n<=255;)cs[n*2+1]=9,n++,s[9]++;for(;n<=279;)cs[n*2+1]=7,n++,s[7]++;for(;n<=287;)cs[n*2+1]=8,n++,s[8]++;for(YO(cs,ih+1,s),n=0;n<_c;n++)eh[n*2+1]=5,eh[n*2]=HO(n,5);jO=new zw(cs,ib,dh+1,ih,pa),WO=new zw(eh,Jg,0,_c,pa),UO=new zw(new Array(0),Q$,0,pb,X$)},GO=n=>{let e;for(e=0;e<ih;e++)n.dyn_ltree[e*2]=0;for(e=0;e<_c;e++)n.dyn_dtree[e*2]=0;for(e=0;e<pb;e++)n.bl_tree[e*2]=0;n.dyn_ltree[fb*2]=1,n.opt_len=n.static_len=0,n.sym_next=n.matches=0},KO=n=>{n.bi_valid>8?oh(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},XN=(n,e,t,i)=>{let r=e*2,s=t*2;return n[r]<n[s]||n[r]===n[s]&&i[e]<=i[t]},Yw=(n,e,t)=>{let i=n.heap[t],r=t<<1;for(;r<=n.heap_len&&(r<n.heap_len&&XN(e,n.heap[r+1],n.heap[r],n.depth)&&r++,!XN(e,i,n.heap[r],n.depth));)n.heap[t]=n.heap[r],t=r,r<<=1;n.heap[t]=i},QN=(n,e,t)=>{let i,r,s=0,o,a;if(n.sym_next!==0)do i=n.pending_buf[n.sym_buf+s++]&255,i+=(n.pending_buf[n.sym_buf+s++]&255)<<8,r=n.pending_buf[n.sym_buf+s++],i===0?Tr(n,r,e):(o=sh[r],Tr(n,o+dh+1,e),a=ib[o],a!==0&&(r-=gb[o],ti(n,r,a)),i--,o=zO(i),Tr(n,o,t),a=Jg[o],a!==0&&(i-=em[o],ti(n,i,a)));while(s<n.sym_next);Tr(n,fb,e)},rb=(n,e)=>{let t=e.dyn_tree,i=e.stat_desc.static_tree,r=e.stat_desc.has_stree,s=e.stat_desc.elems,o,a,l=-1,c;for(n.heap_len=0,n.heap_max=FO,o=0;o<s;o++)t[o*2]!==0?(n.heap[++n.heap_len]=l=o,n.depth[o]=0):t[o*2+1]=0;for(;n.heap_len<2;)c=n.heap[++n.heap_len]=l<2?++l:0,t[c*2]=1,n.depth[c]=0,n.opt_len--,r&&(n.static_len-=i[c*2+1]);for(e.max_code=l,o=n.heap_len>>1;o>=1;o--)Yw(n,t,o);c=s;do o=n.heap[1],n.heap[1]=n.heap[n.heap_len--],Yw(n,t,1),a=n.heap[1],n.heap[--n.heap_max]=o,n.heap[--n.heap_max]=a,t[c*2]=t[o*2]+t[a*2],n.depth[c]=(n.depth[o]>=n.depth[a]?n.depth[o]:n.depth[a])+1,t[o*2+1]=t[a*2+1]=c,n.heap[1]=c++,Yw(n,t,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],tZ(n,e),YO(t,l,n.bl_count)},JN=(n,e,t)=>{let i,r=-1,s,o=e[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),e[(t+1)*2+1]=65535,i=0;i<=t;i++)s=o,o=e[(i+1)*2+1],!(++a<l&&s===o)&&(a<c?n.bl_tree[s*2]+=a:s!==0?(s!==r&&n.bl_tree[s*2]++,n.bl_tree[LO*2]++):a<=10?n.bl_tree[VO*2]++:n.bl_tree[BO*2]++,a=0,r=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))},eO=(n,e,t)=>{let i,r=-1,s,o=e[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),i=0;i<=t;i++)if(s=o,o=e[(i+1)*2+1],!(++a<l&&s===o)){if(a<c)do Tr(n,s,n.bl_tree);while(--a!==0);else s!==0?(s!==r&&(Tr(n,s,n.bl_tree),a--),Tr(n,LO,n.bl_tree),ti(n,a-3,2)):a<=10?(Tr(n,VO,n.bl_tree),ti(n,a-3,3)):(Tr(n,BO,n.bl_tree),ti(n,a-11,7));a=0,r=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}},iZ=n=>{let e;for(JN(n,n.dyn_ltree,n.l_desc.max_code),JN(n,n.dyn_dtree,n.d_desc.max_code),rb(n,n.bl_desc),e=pb-1;e>=3&&n.bl_tree[qO[e]*2+1]===0;e--);return n.opt_len+=3*(e+1)+5+5+4,e},rZ=(n,e,t,i)=>{let r;for(ti(n,e-257,5),ti(n,t-1,5),ti(n,i-4,4),r=0;r<i;r++)ti(n,n.bl_tree[qO[r]*2+1],3);eO(n,n.dyn_ltree,e-1),eO(n,n.dyn_dtree,t-1)},sZ=n=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&n.dyn_ltree[t*2]!==0)return 0;if(n.dyn_ltree[9*2]!==0||n.dyn_ltree[10*2]!==0||n.dyn_ltree[13*2]!==0)return 1;for(t=32;t<dh;t++)if(n.dyn_ltree[t*2]!==0)return 1;return 0},tO=!1,oZ=n=>{tO||(nZ(),tO=!0),n.l_desc=new Hw(n.dyn_ltree,jO),n.d_desc=new Hw(n.dyn_dtree,WO),n.bl_desc=new Hw(n.bl_tree,UO),n.bi_buf=0,n.bi_valid=0,GO(n)},$O=(n,e,t,i)=>{ti(n,(G$<<1)+(i?1:0),3),KO(n),oh(n,t),oh(n,~t),t&&n.pending_buf.set(n.window.subarray(e,e+t),n.pending),n.pending+=t},aZ=n=>{ti(n,RO<<1,3),Tr(n,fb,cs),eZ(n)},lZ=(n,e,t,i)=>{let r,s,o=0;n.level>0?(n.strm.data_type===2&&(n.strm.data_type=sZ(n)),rb(n,n.l_desc),rb(n,n.d_desc),o=iZ(n),r=n.opt_len+3+7>>>3,s=n.static_len+3+7>>>3,s<=r&&(r=s)):r=s=t+5,t+4<=r&&e!==-1?$O(n,e,t,i):n.strategy===4||s===r?(ti(n,(RO<<1)+(i?1:0),3),QN(n,cs,eh)):(ti(n,(K$<<1)+(i?1:0),3),rZ(n,n.l_desc.max_code+1,n.d_desc.max_code+1,o+1),QN(n,n.dyn_ltree,n.dyn_dtree)),GO(n),i&&KO(n)},cZ=(n,e,t)=>(n.pending_buf[n.sym_buf+n.sym_next++]=e,n.pending_buf[n.sym_buf+n.sym_next++]=e>>8,n.pending_buf[n.sym_buf+n.sym_next++]=t,e===0?n.dyn_ltree[t*2]++:(n.matches++,e--,n.dyn_ltree[(sh[t]+dh+1)*2]++,n.dyn_dtree[zO(e)*2]++),n.sym_next===n.sym_end),uZ=oZ,dZ=$O,hZ=lZ,pZ=cZ,fZ=aZ,gZ={_tr_init:uZ,_tr_stored_block:dZ,_tr_flush_block:hZ,_tr_tally:pZ,_tr_align:fZ},mZ=(n,e,t,i)=>{let r=n&65535|0,s=n>>>16&65535|0,o=0;for(;t!==0;){o=t>2e3?2e3:t,t-=o;do r=r+e[i++]|0,s=s+r|0;while(--o);r%=65521,s%=65521}return r|s<<16|0},ah=mZ,_Z=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var i=0;i<8;i++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},AZ=new Uint32Array(_Z()),yZ=(n,e,t,i)=>{let r=AZ,s=i+t;n^=-1;for(let o=i;o<s;o++)n=n>>>8^r[(n^e[o])&255];return n^-1},pn=yZ,ma={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},wc={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:vZ,_tr_stored_block:sb,_tr_flush_block:wZ,_tr_tally:no,_tr_align:bZ}=gZ,{Z_NO_FLUSH:io,Z_PARTIAL_FLUSH:SZ,Z_FULL_FLUSH:CZ,Z_FINISH:Mi,Z_BLOCK:nO,Z_OK:bn,Z_STREAM_END:iO,Z_STREAM_ERROR:Ir,Z_DATA_ERROR:xZ,Z_BUF_ERROR:Gw,Z_DEFAULT_COMPRESSION:DZ,Z_FILTERED:EZ,Z_HUFFMAN_ONLY:Kg,Z_RLE:MZ,Z_FIXED:TZ,Z_DEFAULT_STRATEGY:IZ,Z_UNKNOWN:kZ,Z_DEFLATED:im}=wc,PZ=9,NZ=15,OZ=8,RZ=29,FZ=256,ob=FZ+1+RZ,LZ=30,VZ=19,BZ=2*ob+1,qZ=15,ct=3,to=258,kr=to+ct+1,jZ=32,Ac=42,mb=57,ab=69,lb=73,cb=91,ub=103,fa=113,Qd=666,Bn=1,bc=2,_a=3,Sc=4,WZ=3,ga=(n,e)=>(n.msg=ma[e],e),rO=n=>n*2-(n>4?9:0),eo=n=>{let e=n.length;for(;--e>=0;)n[e]=0},UZ=n=>{let e,t,i,r=n.w_size;e=n.hash_size,i=e;do t=n.head[--i],n.head[i]=t>=r?t-r:0;while(--e);e=r,i=e;do t=n.prev[--i],n.prev[i]=t>=r?t-r:0;while(--e)},zZ=(n,e,t)=>(e<<n.hash_shift^t)&n.hash_mask,ro=zZ,di=n=>{let e=n.state,t=e.pending;t>n.avail_out&&(t=n.avail_out),t!==0&&(n.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),n.next_out),n.next_out+=t,e.pending_out+=t,n.total_out+=t,n.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},hi=(n,e)=>{wZ(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,e),n.block_start=n.strstart,di(n.strm)},_t=(n,e)=>{n.pending_buf[n.pending++]=e},Xd=(n,e)=>{n.pending_buf[n.pending++]=e>>>8&255,n.pending_buf[n.pending++]=e&255},db=(n,e,t,i)=>{let r=n.avail_in;return r>i&&(r=i),r===0?0:(n.avail_in-=r,e.set(n.input.subarray(n.next_in,n.next_in+r),t),n.state.wrap===1?n.adler=ah(n.adler,e,r,t):n.state.wrap===2&&(n.adler=pn(n.adler,e,r,t)),n.next_in+=r,n.total_in+=r,r)},ZO=(n,e)=>{let t=n.max_chain_length,i=n.strstart,r,s,o=n.prev_length,a=n.nice_match,l=n.strstart>n.w_size-kr?n.strstart-(n.w_size-kr):0,c=n.window,u=n.w_mask,d=n.prev,h=n.strstart+to,p=c[i+o-1],g=c[i+o];n.prev_length>=n.good_match&&(t>>=2),a>n.lookahead&&(a=n.lookahead);do if(r=e,!(c[r+o]!==g||c[r+o-1]!==p||c[r]!==c[i]||c[++r]!==c[i+1])){i+=2,r++;do;while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<h);if(s=to-(h-i),i=h-to,s>o){if(n.match_start=e,o=s,s>=a)break;p=c[i+o-1],g=c[i+o]}}while((e=d[e&u])>l&&--t!==0);return o<=n.lookahead?o:n.lookahead},yc=n=>{let e=n.w_size,t,i,r;do{if(i=n.window_size-n.lookahead-n.strstart,n.strstart>=e+(e-kr)&&(n.window.set(n.window.subarray(e,e+e-i),0),n.match_start-=e,n.strstart-=e,n.block_start-=e,n.insert>n.strstart&&(n.insert=n.strstart),UZ(n),i+=e),n.strm.avail_in===0)break;if(t=db(n.strm,n.window,n.strstart+n.lookahead,i),n.lookahead+=t,n.lookahead+n.insert>=ct)for(r=n.strstart-n.insert,n.ins_h=n.window[r],n.ins_h=ro(n,n.ins_h,n.window[r+1]);n.insert&&(n.ins_h=ro(n,n.ins_h,n.window[r+ct-1]),n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,n.insert--,!(n.lookahead+n.insert<ct)););}while(n.lookahead<kr&&n.strm.avail_in!==0)},XO=(n,e)=>{let t=n.pending_buf_size-5>n.w_size?n.w_size:n.pending_buf_size-5,i,r,s,o=0,a=n.strm.avail_in;do{if(i=65535,s=n.bi_valid+42>>3,n.strm.avail_out<s||(s=n.strm.avail_out-s,r=n.strstart-n.block_start,i>r+n.strm.avail_in&&(i=r+n.strm.avail_in),i>s&&(i=s),i<t&&(i===0&&e!==Mi||e===io||i!==r+n.strm.avail_in)))break;o=e===Mi&&i===r+n.strm.avail_in?1:0,sb(n,0,0,o),n.pending_buf[n.pending-4]=i,n.pending_buf[n.pending-3]=i>>8,n.pending_buf[n.pending-2]=~i,n.pending_buf[n.pending-1]=~i>>8,di(n.strm),r&&(r>i&&(r=i),n.strm.output.set(n.window.subarray(n.block_start,n.block_start+r),n.strm.next_out),n.strm.next_out+=r,n.strm.avail_out-=r,n.strm.total_out+=r,n.block_start+=r,i-=r),i&&(db(n.strm,n.strm.output,n.strm.next_out,i),n.strm.next_out+=i,n.strm.avail_out-=i,n.strm.total_out+=i)}while(o===0);return a-=n.strm.avail_in,a&&(a>=n.w_size?(n.matches=2,n.window.set(n.strm.input.subarray(n.strm.next_in-n.w_size,n.strm.next_in),0),n.strstart=n.w_size,n.insert=n.strstart):(n.window_size-n.strstart<=a&&(n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,n.insert>n.strstart&&(n.insert=n.strstart)),n.window.set(n.strm.input.subarray(n.strm.next_in-a,n.strm.next_in),n.strstart),n.strstart+=a,n.insert+=a>n.w_size-n.insert?n.w_size-n.insert:a),n.block_start=n.strstart),n.high_water<n.strstart&&(n.high_water=n.strstart),o?Sc:e!==io&&e!==Mi&&n.strm.avail_in===0&&n.strstart===n.block_start?bc:(s=n.window_size-n.strstart,n.strm.avail_in>s&&n.block_start>=n.w_size&&(n.block_start-=n.w_size,n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,s+=n.w_size,n.insert>n.strstart&&(n.insert=n.strstart)),s>n.strm.avail_in&&(s=n.strm.avail_in),s&&(db(n.strm,n.window,n.strstart,s),n.strstart+=s,n.insert+=s>n.w_size-n.insert?n.w_size-n.insert:s),n.high_water<n.strstart&&(n.high_water=n.strstart),s=n.bi_valid+42>>3,s=n.pending_buf_size-s>65535?65535:n.pending_buf_size-s,t=s>n.w_size?n.w_size:s,r=n.strstart-n.block_start,(r>=t||(r||e===Mi)&&e!==io&&n.strm.avail_in===0&&r<=s)&&(i=r>s?s:r,o=e===Mi&&n.strm.avail_in===0&&i===r?1:0,sb(n,n.block_start,i,o),n.block_start+=i,di(n.strm)),o?_a:Bn)},Kw=(n,e)=>{let t,i;for(;;){if(n.lookahead<kr){if(yc(n),n.lookahead<kr&&e===io)return Bn;if(n.lookahead===0)break}if(t=0,n.lookahead>=ct&&(n.ins_h=ro(n,n.ins_h,n.window[n.strstart+ct-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),t!==0&&n.strstart-t<=n.w_size-kr&&(n.match_length=ZO(n,t)),n.match_length>=ct)if(i=no(n,n.strstart-n.match_start,n.match_length-ct),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=ct){n.match_length--;do n.strstart++,n.ins_h=ro(n,n.ins_h,n.window[n.strstart+ct-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=ro(n,n.ins_h,n.window[n.strstart+1]);else i=no(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(i&&(hi(n,!1),n.strm.avail_out===0))return Bn}return n.insert=n.strstart<ct-1?n.strstart:ct-1,e===Mi?(hi(n,!0),n.strm.avail_out===0?_a:Sc):n.sym_next&&(hi(n,!1),n.strm.avail_out===0)?Bn:bc},gc=(n,e)=>{let t,i,r;for(;;){if(n.lookahead<kr){if(yc(n),n.lookahead<kr&&e===io)return Bn;if(n.lookahead===0)break}if(t=0,n.lookahead>=ct&&(n.ins_h=ro(n,n.ins_h,n.window[n.strstart+ct-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=ct-1,t!==0&&n.prev_length<n.max_lazy_match&&n.strstart-t<=n.w_size-kr&&(n.match_length=ZO(n,t),n.match_length<=5&&(n.strategy===EZ||n.match_length===ct&&n.strstart-n.match_start>4096)&&(n.match_length=ct-1)),n.prev_length>=ct&&n.match_length<=n.prev_length){r=n.strstart+n.lookahead-ct,i=no(n,n.strstart-1-n.prev_match,n.prev_length-ct),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=r&&(n.ins_h=ro(n,n.ins_h,n.window[n.strstart+ct-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=ct-1,n.strstart++,i&&(hi(n,!1),n.strm.avail_out===0))return Bn}else if(n.match_available){if(i=no(n,0,n.window[n.strstart-1]),i&&hi(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return Bn}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(i=no(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<ct-1?n.strstart:ct-1,e===Mi?(hi(n,!0),n.strm.avail_out===0?_a:Sc):n.sym_next&&(hi(n,!1),n.strm.avail_out===0)?Bn:bc},HZ=(n,e)=>{let t,i,r,s,o=n.window;for(;;){if(n.lookahead<=to){if(yc(n),n.lookahead<=to&&e===io)return Bn;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=ct&&n.strstart>0&&(r=n.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){s=n.strstart+to;do;while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<s);n.match_length=to-(s-r),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=ct?(t=no(n,1,n.match_length-ct),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(t=no(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),t&&(hi(n,!1),n.strm.avail_out===0))return Bn}return n.insert=0,e===Mi?(hi(n,!0),n.strm.avail_out===0?_a:Sc):n.sym_next&&(hi(n,!1),n.strm.avail_out===0)?Bn:bc},YZ=(n,e)=>{let t;for(;;){if(n.lookahead===0&&(yc(n),n.lookahead===0)){if(e===io)return Bn;break}if(n.match_length=0,t=no(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,t&&(hi(n,!1),n.strm.avail_out===0))return Bn}return n.insert=0,e===Mi?(hi(n,!0),n.strm.avail_out===0?_a:Sc):n.sym_next&&(hi(n,!1),n.strm.avail_out===0)?Bn:bc};function Mr(n,e,t,i,r){this.good_length=n,this.max_lazy=e,this.nice_length=t,this.max_chain=i,this.func=r}var Jd=[new Mr(0,0,0,0,XO),new Mr(4,4,8,4,Kw),new Mr(4,5,16,8,Kw),new Mr(4,6,32,32,Kw),new Mr(4,4,16,16,gc),new Mr(8,16,32,32,gc),new Mr(8,16,128,128,gc),new Mr(8,32,128,256,gc),new Mr(32,128,258,1024,gc),new Mr(32,258,258,4096,gc)],GZ=n=>{n.window_size=2*n.w_size,eo(n.head),n.max_lazy_match=Jd[n.level].max_lazy,n.good_match=Jd[n.level].good_length,n.nice_match=Jd[n.level].nice_length,n.max_chain_length=Jd[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=ct-1,n.match_available=0,n.ins_h=0};function KZ(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=im,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(BZ*2),this.dyn_dtree=new Uint16Array((2*LZ+1)*2),this.bl_tree=new Uint16Array((2*VZ+1)*2),eo(this.dyn_ltree),eo(this.dyn_dtree),eo(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(qZ+1),this.heap=new Uint16Array(2*ob+1),eo(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ob+1),eo(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var hh=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.status!==Ac&&e.status!==mb&&e.status!==ab&&e.status!==lb&&e.status!==cb&&e.status!==ub&&e.status!==fa&&e.status!==Qd?1:0},QO=n=>{if(hh(n))return ga(n,Ir);n.total_in=n.total_out=0,n.data_type=kZ;let e=n.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?mb:e.wrap?Ac:fa,n.adler=e.wrap===2?0:1,e.last_flush=-2,vZ(e),bn},JO=n=>{let e=QO(n);return e===bn&&GZ(n.state),e},$Z=(n,e)=>hh(n)||n.state.wrap!==2?Ir:(n.state.gzhead=e,bn),eR=(n,e,t,i,r,s)=>{if(!n)return Ir;let o=1;if(e===DZ&&(e=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),r<1||r>PZ||t!==im||i<8||i>15||e<0||e>9||s<0||s>TZ||i===8&&o!==1)return ga(n,Ir);i===8&&(i=9);let a=new KZ;return n.state=a,a.strm=n,a.status=Ac,a.wrap=o,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+ct-1)/ct),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=e,a.strategy=s,a.method=t,JO(n)},ZZ=(n,e)=>eR(n,e,im,NZ,OZ,IZ),XZ=(n,e)=>{if(hh(n)||e>nO||e<0)return n?ga(n,Ir):Ir;let t=n.state;if(!n.output||n.avail_in!==0&&!n.input||t.status===Qd&&e!==Mi)return ga(n,n.avail_out===0?Gw:Ir);let i=t.last_flush;if(t.last_flush=e,t.pending!==0){if(di(n),n.avail_out===0)return t.last_flush=-1,bn}else if(n.avail_in===0&&rO(e)<=rO(i)&&e!==Mi)return ga(n,Gw);if(t.status===Qd&&n.avail_in!==0)return ga(n,Gw);if(t.status===Ac&&t.wrap===0&&(t.status=fa),t.status===Ac){let r=im+(t.w_bits-8<<4)<<8,s=-1;if(t.strategy>=Kg||t.level<2?s=0:t.level<6?s=1:t.level===6?s=2:s=3,r|=s<<6,t.strstart!==0&&(r|=jZ),r+=31-r%31,Xd(t,r),t.strstart!==0&&(Xd(t,n.adler>>>16),Xd(t,n.adler&65535)),n.adler=1,t.status=fa,di(n),t.pending!==0)return t.last_flush=-1,bn}if(t.status===mb){if(n.adler=0,_t(t,31),_t(t,139),_t(t,8),t.gzhead)_t(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),_t(t,t.gzhead.time&255),_t(t,t.gzhead.time>>8&255),_t(t,t.gzhead.time>>16&255),_t(t,t.gzhead.time>>24&255),_t(t,t.level===9?2:t.strategy>=Kg||t.level<2?4:0),_t(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(_t(t,t.gzhead.extra.length&255),_t(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(n.adler=pn(n.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=ab;else if(_t(t,0),_t(t,0),_t(t,0),_t(t,0),_t(t,0),_t(t,t.level===9?2:t.strategy>=Kg||t.level<2?4:0),_t(t,WZ),t.status=fa,di(n),t.pending!==0)return t.last_flush=-1,bn}if(t.status===ab){if(t.gzhead.extra){let r=t.pending,s=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+s>t.pending_buf_size;){let a=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>r&&(n.adler=pn(n.adler,t.pending_buf,t.pending-r,r)),t.gzindex+=a,di(n),t.pending!==0)return t.last_flush=-1,bn;r=0,s-=a}let o=new Uint8Array(t.gzhead.extra);t.pending_buf.set(o.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending+=s,t.gzhead.hcrc&&t.pending>r&&(n.adler=pn(n.adler,t.pending_buf,t.pending-r,r)),t.gzindex=0}t.status=lb}if(t.status===lb){if(t.gzhead.name){let r=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>r&&(n.adler=pn(n.adler,t.pending_buf,t.pending-r,r)),di(n),t.pending!==0)return t.last_flush=-1,bn;r=0}t.gzindex<t.gzhead.name.length?s=t.gzhead.name.charCodeAt(t.gzindex++)&255:s=0,_t(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>r&&(n.adler=pn(n.adler,t.pending_buf,t.pending-r,r)),t.gzindex=0}t.status=cb}if(t.status===cb){if(t.gzhead.comment){let r=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>r&&(n.adler=pn(n.adler,t.pending_buf,t.pending-r,r)),di(n),t.pending!==0)return t.last_flush=-1,bn;r=0}t.gzindex<t.gzhead.comment.length?s=t.gzhead.comment.charCodeAt(t.gzindex++)&255:s=0,_t(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>r&&(n.adler=pn(n.adler,t.pending_buf,t.pending-r,r))}t.status=ub}if(t.status===ub){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(di(n),t.pending!==0))return t.last_flush=-1,bn;_t(t,n.adler&255),_t(t,n.adler>>8&255),n.adler=0}if(t.status=fa,di(n),t.pending!==0)return t.last_flush=-1,bn}if(n.avail_in!==0||t.lookahead!==0||e!==io&&t.status!==Qd){let r=t.level===0?XO(t,e):t.strategy===Kg?YZ(t,e):t.strategy===MZ?HZ(t,e):Jd[t.level].func(t,e);if((r===_a||r===Sc)&&(t.status=Qd),r===Bn||r===_a)return n.avail_out===0&&(t.last_flush=-1),bn;if(r===bc&&(e===SZ?bZ(t):e!==nO&&(sb(t,0,0,!1),e===CZ&&(eo(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),di(n),n.avail_out===0))return t.last_flush=-1,bn}return e!==Mi?bn:t.wrap<=0?iO:(t.wrap===2?(_t(t,n.adler&255),_t(t,n.adler>>8&255),_t(t,n.adler>>16&255),_t(t,n.adler>>24&255),_t(t,n.total_in&255),_t(t,n.total_in>>8&255),_t(t,n.total_in>>16&255),_t(t,n.total_in>>24&255)):(Xd(t,n.adler>>>16),Xd(t,n.adler&65535)),di(n),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?bn:iO)},QZ=n=>{if(hh(n))return Ir;let e=n.state.status;return n.state=null,e===fa?ga(n,xZ):bn},JZ=(n,e)=>{let t=e.length;if(hh(n))return Ir;let i=n.state,r=i.wrap;if(r===2||r===1&&i.status!==Ac||i.lookahead)return Ir;if(r===1&&(n.adler=ah(n.adler,e,t,0)),i.wrap=0,t>=i.w_size){r===0&&(eo(i.head),i.strstart=0,i.block_start=0,i.insert=0);let l=new Uint8Array(i.w_size);l.set(e.subarray(t-i.w_size,t),0),e=l,t=i.w_size}let s=n.avail_in,o=n.next_in,a=n.input;for(n.avail_in=t,n.next_in=0,n.input=e,yc(i);i.lookahead>=ct;){let l=i.strstart,c=i.lookahead-(ct-1);do i.ins_h=ro(i,i.ins_h,i.window[l+ct-1]),i.prev[l&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=l,l++;while(--c);i.strstart=l,i.lookahead=ct-1,yc(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=ct-1,i.match_available=0,n.next_in=o,n.input=a,n.avail_in=s,i.wrap=r,bn},eX=ZZ,tX=eR,nX=JO,iX=QO,rX=$Z,sX=XZ,oX=QZ,aX=JZ,lX="pako deflate (from Nodeca project)",th={deflateInit:eX,deflateInit2:tX,deflateReset:nX,deflateResetKeep:iX,deflateSetHeader:rX,deflate:sX,deflateEnd:oX,deflateSetDictionary:aX,deflateInfo:lX},cX=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),uX=function(n){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let i in t)cX(t,i)&&(n[i]=t[i])}}return n},dX=n=>{let e=0;for(let i=0,r=n.length;i<r;i++)e+=n[i].length;let t=new Uint8Array(e);for(let i=0,r=0,s=n.length;i<s;i++){let o=n[i];t.set(o,r),r+=o.length}return t},rm={assign:uX,flattenChunks:dX},tR=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{tR=!1}var lh=new Uint8Array(256);for(let n=0;n<256;n++)lh[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;lh[254]=lh[254]=1;var hX=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,i,r,s,o=n.length,a=0;for(r=0;r<o;r++)t=n.charCodeAt(r),(t&64512)===55296&&r+1<o&&(i=n.charCodeAt(r+1),(i&64512)===56320&&(t=65536+(t-55296<<10)+(i-56320),r++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),s=0,r=0;s<a;r++)t=n.charCodeAt(r),(t&64512)===55296&&r+1<o&&(i=n.charCodeAt(r+1),(i&64512)===56320&&(t=65536+(t-55296<<10)+(i-56320),r++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e},pX=(n,e)=>{if(e<65534&&n.subarray&&tR)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let i=0;i<e;i++)t+=String.fromCharCode(n[i]);return t},fX=(n,e)=>{let t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let i,r,s=new Array(t*2);for(r=0,i=0;i<t;){let o=n[i++];if(o<128){s[r++]=o;continue}let a=lh[o];if(a>4){s[r++]=65533,i+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&i<t;)o=o<<6|n[i++]&63,a--;if(a>1){s[r++]=65533;continue}o<65536?s[r++]=o:(o-=65536,s[r++]=55296|o>>10&1023,s[r++]=56320|o&1023)}return pX(s,r)},gX=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+lh[n[t]]>e?t:e},ch={string2buf:hX,buf2string:fX,utf8border:gX};function mX(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var nR=mX,iR=Object.prototype.toString,{Z_NO_FLUSH:_X,Z_SYNC_FLUSH:AX,Z_FULL_FLUSH:yX,Z_FINISH:vX,Z_OK:tm,Z_STREAM_END:wX,Z_DEFAULT_COMPRESSION:bX,Z_DEFAULT_STRATEGY:SX,Z_DEFLATED:CX}=wc;function ph(n){this.options=rm.assign({level:bX,method:CX,chunkSize:16384,windowBits:15,memLevel:8,strategy:SX},n||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new nR,this.strm.avail_out=0;let t=th.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==tm)throw new Error(ma[t]);if(e.header&&th.deflateSetHeader(this.strm,e.header),e.dictionary){let i;if(typeof e.dictionary=="string"?i=ch.string2buf(e.dictionary):iR.call(e.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(e.dictionary):i=e.dictionary,t=th.deflateSetDictionary(this.strm,i),t!==tm)throw new Error(ma[t]);this._dict_set=!0}}ph.prototype.push=function(n,e){let t=this.strm,i=this.options.chunkSize,r,s;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?vX:_X,typeof n=="string"?t.input=ch.string2buf(n):iR.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(i),t.next_out=0,t.avail_out=i),(s===AX||s===yX)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(r=th.deflate(t,s),r===wX)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),r=th.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===tm;if(t.avail_out===0){this.onData(t.output);continue}if(s>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};ph.prototype.onData=function(n){this.chunks.push(n)};ph.prototype.onEnd=function(n){n===tm&&(this.result=rm.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function _b(n,e){let t=new ph(e);if(t.push(n,!0),t.err)throw t.msg||ma[t.err];return t.result}function xX(n,e){return e=e||{},e.raw=!0,_b(n,e)}function DX(n,e){return e=e||{},e.gzip=!0,_b(n,e)}var EX=ph,MX=_b,TX=xX,IX=DX,kX=wc,PX={Deflate:EX,deflate:MX,deflateRaw:TX,gzip:IX,constants:kX},$g=16209,NX=16191,OX=function(e,t){let i,r,s,o,a,l,c,u,d,h,p,g,A,v,b,E,O,T,k,D,M,N,L,B,H=e.state;i=e.next_in,L=e.input,r=i+(e.avail_in-5),s=e.next_out,B=e.output,o=s-(t-e.avail_out),a=s+(e.avail_out-257),l=H.dmax,c=H.wsize,u=H.whave,d=H.wnext,h=H.window,p=H.hold,g=H.bits,A=H.lencode,v=H.distcode,b=(1<<H.lenbits)-1,E=(1<<H.distbits)-1;e:do{g<15&&(p+=L[i++]<<g,g+=8,p+=L[i++]<<g,g+=8),O=A[p&b];t:for(;;){if(T=O>>>24,p>>>=T,g-=T,T=O>>>16&255,T===0)B[s++]=O&65535;else if(T&16){k=O&65535,T&=15,T&&(g<T&&(p+=L[i++]<<g,g+=8),k+=p&(1<<T)-1,p>>>=T,g-=T),g<15&&(p+=L[i++]<<g,g+=8,p+=L[i++]<<g,g+=8),O=v[p&E];n:for(;;){if(T=O>>>24,p>>>=T,g-=T,T=O>>>16&255,T&16){if(D=O&65535,T&=15,g<T&&(p+=L[i++]<<g,g+=8,g<T&&(p+=L[i++]<<g,g+=8)),D+=p&(1<<T)-1,D>l){e.msg="invalid distance too far back",H.mode=$g;break e}if(p>>>=T,g-=T,T=s-o,D>T){if(T=D-T,T>u&&H.sane){e.msg="invalid distance too far back",H.mode=$g;break e}if(M=0,N=h,d===0){if(M+=c-T,T<k){k-=T;do B[s++]=h[M++];while(--T);M=s-D,N=B}}else if(d<T){if(M+=c+d-T,T-=d,T<k){k-=T;do B[s++]=h[M++];while(--T);if(M=0,d<k){T=d,k-=T;do B[s++]=h[M++];while(--T);M=s-D,N=B}}}else if(M+=d-T,T<k){k-=T;do B[s++]=h[M++];while(--T);M=s-D,N=B}for(;k>2;)B[s++]=N[M++],B[s++]=N[M++],B[s++]=N[M++],k-=3;k&&(B[s++]=N[M++],k>1&&(B[s++]=N[M++]))}else{M=s-D;do B[s++]=B[M++],B[s++]=B[M++],B[s++]=B[M++],k-=3;while(k>2);k&&(B[s++]=B[M++],k>1&&(B[s++]=B[M++]))}}else if((T&64)===0){O=v[(O&65535)+(p&(1<<T)-1)];continue n}else{e.msg="invalid distance code",H.mode=$g;break e}break}}else if((T&64)===0){O=A[(O&65535)+(p&(1<<T)-1)];continue t}else if(T&32){H.mode=NX;break e}else{e.msg="invalid literal/length code",H.mode=$g;break e}break}}while(i<r&&s<a);k=g>>3,i-=k,g-=k<<3,p&=(1<<g)-1,e.next_in=i,e.next_out=s,e.avail_in=i<r?5+(r-i):5-(i-r),e.avail_out=s<a?257+(a-s):257-(s-a),H.hold=p,H.bits=g},mc=15,sO=852,oO=592,aO=0,$w=1,lO=2,RX=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),FX=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),LX=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),VX=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),BX=(n,e,t,i,r,s,o,a)=>{let l=a.bits,c=0,u=0,d=0,h=0,p=0,g=0,A=0,v=0,b=0,E=0,O,T,k,D,M,N=null,L,B=new Uint16Array(mc+1),H=new Uint16Array(mc+1),Z=null,re,Q,G;for(c=0;c<=mc;c++)B[c]=0;for(u=0;u<i;u++)B[e[t+u]]++;for(p=l,h=mc;h>=1&&B[h]===0;h--);if(p>h&&(p=h),h===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<h&&B[d]===0;d++);for(p<d&&(p=d),v=1,c=1;c<=mc;c++)if(v<<=1,v-=B[c],v<0)return-1;if(v>0&&(n===aO||h!==1))return-1;for(H[1]=0,c=1;c<mc;c++)H[c+1]=H[c]+B[c];for(u=0;u<i;u++)e[t+u]!==0&&(o[H[e[t+u]]++]=u);if(n===aO?(N=Z=o,L=20):n===$w?(N=RX,Z=FX,L=257):(N=LX,Z=VX,L=0),E=0,u=0,c=d,M=s,g=p,A=0,k=-1,b=1<<p,D=b-1,n===$w&&b>sO||n===lO&&b>oO)return 1;for(;;){re=c-A,o[u]+1<L?(Q=0,G=o[u]):o[u]>=L?(Q=Z[o[u]-L],G=N[o[u]-L]):(Q=96,G=0),O=1<<c-A,T=1<<g,d=T;do T-=O,r[M+(E>>A)+T]=re<<24|Q<<16|G|0;while(T!==0);for(O=1<<c-1;E&O;)O>>=1;if(O!==0?(E&=O-1,E+=O):E=0,u++,--B[c]===0){if(c===h)break;c=e[t+o[u]]}if(c>p&&(E&D)!==k){for(A===0&&(A=p),M+=d,g=c-A,v=1<<g;g+A<h&&(v-=B[g+A],!(v<=0));)g++,v<<=1;if(b+=1<<g,n===$w&&b>sO||n===lO&&b>oO)return 1;k=E&D,r[k]=p<<24|g<<16|M-s|0}}return E!==0&&(r[M+E]=c-A<<24|64<<16|0),a.bits=p,0},nh=BX,qX=0,rR=1,sR=2,{Z_FINISH:cO,Z_BLOCK:jX,Z_TREES:Zg,Z_OK:Aa,Z_STREAM_END:WX,Z_NEED_DICT:UX,Z_STREAM_ERROR:Ti,Z_DATA_ERROR:oR,Z_MEM_ERROR:aR,Z_BUF_ERROR:zX,Z_DEFLATED:uO}=wc,sm=16180,dO=16181,hO=16182,pO=16183,fO=16184,gO=16185,mO=16186,_O=16187,AO=16188,yO=16189,nm=16190,ls=16191,Zw=16192,vO=16193,Xw=16194,wO=16195,bO=16196,SO=16197,CO=16198,Xg=16199,Qg=16200,xO=16201,DO=16202,EO=16203,MO=16204,TO=16205,Qw=16206,IO=16207,kO=16208,Bt=16209,lR=16210,cR=16211,HX=852,YX=592,GX=15,KX=GX,PO=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function $X(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var ya=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.mode<sm||e.mode>cR?1:0},uR=n=>{if(ya(n))return Ti;let e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=sm,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(HX),e.distcode=e.distdyn=new Int32Array(YX),e.sane=1,e.back=-1,Aa},dR=n=>{if(ya(n))return Ti;let e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,uR(n)},hR=(n,e)=>{let t;if(ya(n))return Ti;let i=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ti:(i.window!==null&&i.wbits!==e&&(i.window=null),i.wrap=t,i.wbits=e,dR(n))},pR=(n,e)=>{if(!n)return Ti;let t=new $X;n.state=t,t.strm=n,t.window=null,t.mode=sm;let i=hR(n,e);return i!==Aa&&(n.state=null),i},ZX=n=>pR(n,KX),NO=!0,Jw,eb,XX=n=>{if(NO){Jw=new Int32Array(512),eb=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(nh(rR,n.lens,0,288,Jw,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;nh(sR,n.lens,0,32,eb,0,n.work,{bits:5}),NO=!1}n.lencode=Jw,n.lenbits=9,n.distcode=eb,n.distbits=5},fR=(n,e,t,i)=>{let r,s=n.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),s.window.set(e.subarray(t-i,t-i+r),s.wnext),i-=r,i?(s.window.set(e.subarray(t-i,t),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0},QX=(n,e)=>{let t,i,r,s,o,a,l,c,u,d,h,p,g,A,v=0,b,E,O,T,k,D,M,N,L=new Uint8Array(4),B,H,Z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ya(n)||!n.output||!n.input&&n.avail_in!==0)return Ti;t=n.state,t.mode===ls&&(t.mode=Zw),o=n.next_out,r=n.output,l=n.avail_out,s=n.next_in,i=n.input,a=n.avail_in,c=t.hold,u=t.bits,d=a,h=l,N=Aa;e:for(;;)switch(t.mode){case sm:if(t.wrap===0){t.mode=Zw;break}for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(t.wrap&2&&c===35615){t.wbits===0&&(t.wbits=15),t.check=0,L[0]=c&255,L[1]=c>>>8&255,t.check=pn(t.check,L,2,0),c=0,u=0,t.mode=dO;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((c&255)<<8)+(c>>8))%31){n.msg="incorrect header check",t.mode=Bt;break}if((c&15)!==uO){n.msg="unknown compression method",t.mode=Bt;break}if(c>>>=4,u-=4,M=(c&15)+8,t.wbits===0&&(t.wbits=M),M>15||M>t.wbits){n.msg="invalid window size",t.mode=Bt;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=c&512?yO:ls,c=0,u=0;break;case dO:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(t.flags=c,(t.flags&255)!==uO){n.msg="unknown compression method",t.mode=Bt;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Bt;break}t.head&&(t.head.text=c>>8&1),t.flags&512&&t.wrap&4&&(L[0]=c&255,L[1]=c>>>8&255,t.check=pn(t.check,L,2,0)),c=0,u=0,t.mode=hO;case hO:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.head&&(t.head.time=c),t.flags&512&&t.wrap&4&&(L[0]=c&255,L[1]=c>>>8&255,L[2]=c>>>16&255,L[3]=c>>>24&255,t.check=pn(t.check,L,4,0)),c=0,u=0,t.mode=pO;case pO:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.head&&(t.head.xflags=c&255,t.head.os=c>>8),t.flags&512&&t.wrap&4&&(L[0]=c&255,L[1]=c>>>8&255,t.check=pn(t.check,L,2,0)),c=0,u=0,t.mode=fO;case fO:if(t.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.length=c,t.head&&(t.head.extra_len=c),t.flags&512&&t.wrap&4&&(L[0]=c&255,L[1]=c>>>8&255,t.check=pn(t.check,L,2,0)),c=0,u=0}else t.head&&(t.head.extra=null);t.mode=gO;case gO:if(t.flags&1024&&(p=t.length,p>a&&(p=a),p&&(t.head&&(M=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(i.subarray(s,s+p),M)),t.flags&512&&t.wrap&4&&(t.check=pn(t.check,i,p,s)),a-=p,s+=p,t.length-=p),t.length))break e;t.length=0,t.mode=mO;case mO:if(t.flags&2048){if(a===0)break e;p=0;do M=i[s+p++],t.head&&M&&t.length<65536&&(t.head.name+=String.fromCharCode(M));while(M&&p<a);if(t.flags&512&&t.wrap&4&&(t.check=pn(t.check,i,p,s)),a-=p,s+=p,M)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=_O;case _O:if(t.flags&4096){if(a===0)break e;p=0;do M=i[s+p++],t.head&&M&&t.length<65536&&(t.head.comment+=String.fromCharCode(M));while(M&&p<a);if(t.flags&512&&t.wrap&4&&(t.check=pn(t.check,i,p,s)),a-=p,s+=p,M)break e}else t.head&&(t.head.comment=null);t.mode=AO;case AO:if(t.flags&512){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(t.wrap&4&&c!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Bt;break}c=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=ls;break;case yO:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.adler=t.check=PO(c),c=0,u=0,t.mode=nm;case nm:if(t.havedict===0)return n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,t.hold=c,t.bits=u,UX;n.adler=t.check=1,t.mode=ls;case ls:if(e===jX||e===Zg)break e;case Zw:if(t.last){c>>>=u&7,u-=u&7,t.mode=Qw;break}for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}switch(t.last=c&1,c>>>=1,u-=1,c&3){case 0:t.mode=vO;break;case 1:if(XX(t),t.mode=Xg,e===Zg){c>>>=2,u-=2;break e}break;case 2:t.mode=bO;break;case 3:n.msg="invalid block type",t.mode=Bt}c>>>=2,u-=2;break;case vO:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Bt;break}if(t.length=c&65535,c=0,u=0,t.mode=Xw,e===Zg)break e;case Xw:t.mode=wO;case wO:if(p=t.length,p){if(p>a&&(p=a),p>l&&(p=l),p===0)break e;r.set(i.subarray(s,s+p),o),a-=p,s+=p,l-=p,o+=p,t.length-=p;break}t.mode=ls;break;case bO:for(;u<14;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(t.nlen=(c&31)+257,c>>>=5,u-=5,t.ndist=(c&31)+1,c>>>=5,u-=5,t.ncode=(c&15)+4,c>>>=4,u-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Bt;break}t.have=0,t.mode=SO;case SO:for(;t.have<t.ncode;){for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.lens[Z[t.have++]]=c&7,c>>>=3,u-=3}for(;t.have<19;)t.lens[Z[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,B={bits:t.lenbits},N=nh(qX,t.lens,0,19,t.lencode,0,t.work,B),t.lenbits=B.bits,N){n.msg="invalid code lengths set",t.mode=Bt;break}t.have=0,t.mode=CO;case CO:for(;t.have<t.nlen+t.ndist;){for(;v=t.lencode[c&(1<<t.lenbits)-1],b=v>>>24,E=v>>>16&255,O=v&65535,!(b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(O<16)c>>>=b,u-=b,t.lens[t.have++]=O;else{if(O===16){for(H=b+2;u<H;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c>>>=b,u-=b,t.have===0){n.msg="invalid bit length repeat",t.mode=Bt;break}M=t.lens[t.have-1],p=3+(c&3),c>>>=2,u-=2}else if(O===17){for(H=b+3;u<H;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=b,u-=b,M=0,p=3+(c&7),c>>>=3,u-=3}else{for(H=b+7;u<H;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=b,u-=b,M=0,p=11+(c&127),c>>>=7,u-=7}if(t.have+p>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Bt;break}for(;p--;)t.lens[t.have++]=M}}if(t.mode===Bt)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Bt;break}if(t.lenbits=9,B={bits:t.lenbits},N=nh(rR,t.lens,0,t.nlen,t.lencode,0,t.work,B),t.lenbits=B.bits,N){n.msg="invalid literal/lengths set",t.mode=Bt;break}if(t.distbits=6,t.distcode=t.distdyn,B={bits:t.distbits},N=nh(sR,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,B),t.distbits=B.bits,N){n.msg="invalid distances set",t.mode=Bt;break}if(t.mode=Xg,e===Zg)break e;case Xg:t.mode=Qg;case Qg:if(a>=6&&l>=258){n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,t.hold=c,t.bits=u,OX(n,h),o=n.next_out,r=n.output,l=n.avail_out,s=n.next_in,i=n.input,a=n.avail_in,c=t.hold,u=t.bits,t.mode===ls&&(t.back=-1);break}for(t.back=0;v=t.lencode[c&(1<<t.lenbits)-1],b=v>>>24,E=v>>>16&255,O=v&65535,!(b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(E&&(E&240)===0){for(T=b,k=E,D=O;v=t.lencode[D+((c&(1<<T+k)-1)>>T)],b=v>>>24,E=v>>>16&255,O=v&65535,!(T+b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=T,u-=T,t.back+=T}if(c>>>=b,u-=b,t.back+=b,t.length=O,E===0){t.mode=TO;break}if(E&32){t.back=-1,t.mode=ls;break}if(E&64){n.msg="invalid literal/length code",t.mode=Bt;break}t.extra=E&15,t.mode=xO;case xO:if(t.extra){for(H=t.extra;u<H;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.length+=c&(1<<t.extra)-1,c>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=DO;case DO:for(;v=t.distcode[c&(1<<t.distbits)-1],b=v>>>24,E=v>>>16&255,O=v&65535,!(b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((E&240)===0){for(T=b,k=E,D=O;v=t.distcode[D+((c&(1<<T+k)-1)>>T)],b=v>>>24,E=v>>>16&255,O=v&65535,!(T+b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=T,u-=T,t.back+=T}if(c>>>=b,u-=b,t.back+=b,E&64){n.msg="invalid distance code",t.mode=Bt;break}t.offset=O,t.extra=E&15,t.mode=EO;case EO:if(t.extra){for(H=t.extra;u<H;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.offset+=c&(1<<t.extra)-1,c>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Bt;break}t.mode=MO;case MO:if(l===0)break e;if(p=h-l,t.offset>p){if(p=t.offset-p,p>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Bt;break}p>t.wnext?(p-=t.wnext,g=t.wsize-p):g=t.wnext-p,p>t.length&&(p=t.length),A=t.window}else A=r,g=o-t.offset,p=t.length;p>l&&(p=l),l-=p,t.length-=p;do r[o++]=A[g++];while(--p);t.length===0&&(t.mode=Qg);break;case TO:if(l===0)break e;r[o++]=t.length,l--,t.mode=Qg;break;case Qw:if(t.wrap){for(;u<32;){if(a===0)break e;a--,c|=i[s++]<<u,u+=8}if(h-=l,n.total_out+=h,t.total+=h,t.wrap&4&&h&&(n.adler=t.check=t.flags?pn(t.check,r,h,o-h):ah(t.check,r,h,o-h)),h=l,t.wrap&4&&(t.flags?c:PO(c))!==t.check){n.msg="incorrect data check",t.mode=Bt;break}c=0,u=0}t.mode=IO;case IO:if(t.wrap&&t.flags){for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(t.wrap&4&&c!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Bt;break}c=0,u=0}t.mode=kO;case kO:N=WX;break e;case Bt:N=oR;break e;case lR:return aR;case cR:default:return Ti}return n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,t.hold=c,t.bits=u,(t.wsize||h!==n.avail_out&&t.mode<Bt&&(t.mode<Qw||e!==cO))&&fR(n,n.output,n.next_out,h-n.avail_out),d-=n.avail_in,h-=n.avail_out,n.total_in+=d,n.total_out+=h,t.total+=h,t.wrap&4&&h&&(n.adler=t.check=t.flags?pn(t.check,r,h,n.next_out-h):ah(t.check,r,h,n.next_out-h)),n.data_type=t.bits+(t.last?64:0)+(t.mode===ls?128:0)+(t.mode===Xg||t.mode===Xw?256:0),(d===0&&h===0||e===cO)&&N===Aa&&(N=zX),N},JX=n=>{if(ya(n))return Ti;let e=n.state;return e.window&&(e.window=null),n.state=null,Aa},eQ=(n,e)=>{if(ya(n))return Ti;let t=n.state;return(t.wrap&2)===0?Ti:(t.head=e,e.done=!1,Aa)},tQ=(n,e)=>{let t=e.length,i,r,s;return ya(n)||(i=n.state,i.wrap!==0&&i.mode!==nm)?Ti:i.mode===nm&&(r=1,r=ah(r,e,t,0),r!==i.check)?oR:(s=fR(n,e,t,t),s?(i.mode=lR,aR):(i.havedict=1,Aa))},nQ=dR,iQ=hR,rQ=uR,sQ=ZX,oQ=pR,aQ=QX,lQ=JX,cQ=eQ,uQ=tQ,dQ="pako inflate (from Nodeca project)",us={inflateReset:nQ,inflateReset2:iQ,inflateResetKeep:rQ,inflateInit:sQ,inflateInit2:oQ,inflate:aQ,inflateEnd:lQ,inflateGetHeader:cQ,inflateSetDictionary:uQ,inflateInfo:dQ};function hQ(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var pQ=hQ,gR=Object.prototype.toString,{Z_NO_FLUSH:fQ,Z_FINISH:gQ,Z_OK:uh,Z_STREAM_END:tb,Z_NEED_DICT:nb,Z_STREAM_ERROR:mQ,Z_DATA_ERROR:OO,Z_MEM_ERROR:_Q}=wc;function fh(n){this.options=rm.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new nR,this.strm.avail_out=0;let t=us.inflateInit2(this.strm,e.windowBits);if(t!==uh)throw new Error(ma[t]);if(this.header=new pQ,us.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=ch.string2buf(e.dictionary):gR.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=us.inflateSetDictionary(this.strm,e.dictionary),t!==uh)))throw new Error(ma[t])}fh.prototype.push=function(n,e){let t=this.strm,i=this.options.chunkSize,r=this.options.dictionary,s,o,a;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?gQ:fQ,gR.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(i),t.next_out=0,t.avail_out=i),s=us.inflate(t,o),s===nb&&r&&(s=us.inflateSetDictionary(t,r),s===uh?s=us.inflate(t,o):s===OO&&(s=nb));t.avail_in>0&&s===tb&&t.state.wrap>0&&n[t.next_in]!==0;)us.inflateReset(t),s=us.inflate(t,o);switch(s){case mQ:case OO:case nb:case _Q:return this.onEnd(s),this.ended=!0,!1}if(a=t.avail_out,t.next_out&&(t.avail_out===0||s===tb))if(this.options.to==="string"){let l=ch.utf8border(t.output,t.next_out),c=t.next_out-l,u=ch.buf2string(t.output,l);t.next_out=c,t.avail_out=i-c,c&&t.output.set(t.output.subarray(l,l+c),0),this.onData(u)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===uh&&a===0)){if(s===tb)return s=us.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};fh.prototype.onData=function(n){this.chunks.push(n)};fh.prototype.onEnd=function(n){n===uh&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=rm.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function Ab(n,e){let t=new fh(e);if(t.push(n),t.err)throw t.msg||ma[t.err];return t.result}function AQ(n,e){return e=e||{},e.raw=!0,Ab(n,e)}var yQ=fh,vQ=Ab,wQ=AQ,bQ=Ab,SQ=wc,CQ={Inflate:yQ,inflate:vQ,inflateRaw:wQ,ungzip:bQ,constants:SQ},{Deflate:w2e,deflate:b2e,deflateRaw:S2e,gzip:C2e}=PX,{Inflate:x2e,inflate:xQ,inflateRaw:D2e,ungzip:E2e}=CQ;var mR=xQ;var Ii=class n{constructor(e){this.aliceblueParserService=e}heartbeatInterval;websocket;socket_endpoint="wss://omnefeeds.angelbroking.com/NestHtml5Mobile/socket/stream?";url2="wss://wsfeeds.angelbroking.com/NestHtml5Mobile/socket/stream";isSocketConnected(){return!!(this.websocket&&this.websocket.OPEN===1)}connect(){this.websocket=new WebSocket(this.socket_endpoint),this.websocket.binaryType="arraybuffer",this.websocket.onopen=()=>{this.handleOnOpen(event)},this.websocket.onmessage=e=>{this.handleOnMessage(e)},this.websocket.onerror=e=>{this.handleOnError(e)},this.websocket.onclose=e=>{this.handleOnClose(e)}}handleOnOpen(e){console.log("Opened Web Socket connection");let t='{"task":"cn","channel":"","token":"'+f.angelFeedToken+'","user": "'+f.angelUserId+'","acctid":"'+f.angelUserId+'"}';this.sendMessage(t),this.sendHeartbeat()}sendHeartbeat(){this.heartbeatInterval=setInterval(()=>{let e='{"task":"hb","channel":"","token":"'+f.angelFeedToken+'","user": "'+f.angelUserId+'","acctid":"'+f.angelUserId+'"}';this.sendMessage(e)},59e3)}sendInitialSubscription(){console.log("sending initial subscription");let e=JSON.stringify({a:"subscribe",v:[[1,26e3],[1,26009],[3,1]],m:"marketdata"});this.sendMessage(e)}handleOnMessage(e){console.log("handleOnMessage",e,e.data);var i=atob(e.data).split("").map(function(a){return a.charCodeAt(0)}),r=new Uint8Array(i),s=this._atos(mR(r));console.log("parsed",s);let o=JSON.parse(s)[0];o&&o.msg==="connected"&&(console.log("ANGEL WS CONNECTED"),f.websocketEvent$.next("connected"))}_atos(e){var t=[];try{for(var i=0;i<e.length;i++)t.push(String.fromCharCode(e[i]))}catch{}return t.join("")}handleOnError(e){console.log("Error in WS connection",e)}handleOnClose(e){console.log("Closed WS connection",e),clearInterval(this.heartbeatInterval),this.websocket=null,setTimeout(()=>{this.websocket&&this.websocket.OPEN===1||(console.log("Reconnecting websocket"),this.connect())},2e3)}sendMessage(e){this.websocket&&this.websocket.OPEN===1?(console.log("Sending message over websocket: "+e),this.websocket.send(e)):console.log("Cannot send the message. Socket is not yet opened or it has been closed - ",e)}static \u0275fac=function(t){return new(t||n)(oe(fc))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var Cc=class n{constructor(e,t){this.http=e;this.angelWS=t}baseUrl="https://apiconnect.angelbroking.com";getAngelHeaders(){}angelLogin(){this.auth().subscribe(e=>{console.log("angel auth",e),e&&e.data&&(f.angelFeedToken=e.data.feedToken,f.angelJWTToken=e.data.jwtToken,f.angelRefreshToken=e.data.refreshToken,this.angelWS.connect())},e=>{console.log("angel auth error",e)})}getMastersContract(){let e={responseType:"json"};this.http.get("https://margincalculator.angelbroking.com/OpenAPI_File/files/OpenAPIScripMaster.json",e).subscribe(i=>{console.log("AngelService getMastersContract",i),i&&(f.mastersContract.clear(),i.forEach(r=>{let s=new Hs,o=100;r.exch_seg==="CDS"&&(o=1e7),s.instru=r.name,s.strike=Number(r.strike)/o,r.symbol.endsWith("CE")&&(s.optionType="CE"),r.symbol.endsWith("PE")&&(s.optionType="PE"),r.symbol.endsWith("FUT")&&(s.optionType="FUT"),s.tradingSymbol=r.symbol,s.lotSize=Number(r.lotsize),s.expiry=new Date(r.expiry).toDateString(),s.exchange=r.exch_seg,s.token=Number(r.token),s.token,f.mastersContract.set(s.token,s)}),this.angelLogin()),console.log("AngelService getMastersContract mastersContract",f.mastersContract)},i=>{console.log("AngelService getMastersContract error",i)})}sendSubscriptions(e){let t=[];e.forEach(s=>{let o=this.findStrikeInMasters(s)});let r='{"task":"mw","channel":"'+"nse_fo|43315&nse_fo|38692"+'","token":"'+f.angelFeedToken+'","user": "'+f.angelUserId+'","acctid":"'+f.angelUserId+'"}';console.log("angel sendSubscriptions: "+r),this.angelWS.sendMessage(r)}findStrikeInMasters(e){let t=null;return f.mastersContract.forEach(i=>{if(e.expiry===i.expiry&&e.instru===i.instru&&e.strike===i.strike&&e.type===i.optionType){t=i;return}}),t}auth(){let e={headers:new Fe({"Content-Type":"application/json",Accept:"application/json","X-UserType":"USER","X-SourceID":"WEB","X-ClientLocalIP":"192.168.0.2","X-ClientPublicIP":"101.190.74.150","X-MACAddress":"37:ab:f8:95:27:ff","X-PrivateKey":f.angelAPIKey}),responseType:"json"},t=this.baseUrl+"/rest/auth/angelbroking/user/v1/loginByPassword",i={clientcode:f.angelUserId,password:f.angelPassword};return this.http.post(t,i,e)}getFunds(e){let t={headers:new Fe({Authorization:"Bearer "+e,"Content-Type":"application/json",Accept:"application/json","X-UserType":"USER","X-SourceID":"WEB","X-ClientLocalIP":"192.168.0.2","X-ClientPublicIP":"101.190.74.150","X-MACAddress":"37:ab:f8:95:27:ff","X-PrivateKey":f.angelAPIKey}),responseType:"json"},i=this.baseUrl+"/rest/secure/angelbroking/user/v1/getRMS";return this.http.get(i,t)}getPositions(e){let t={headers:new Fe({Authorization:"Bearer "+e,"Content-Type":"application/json",Accept:"application/json","X-UserType":"USER","X-SourceID":"WEB","X-ClientLocalIP":"192.168.0.2","X-ClientPublicIP":"101.190.74.150","X-MACAddress":"37:ab:f8:95:27:ff","X-PrivateKey":f.angelAPIKey}),responseType:"json"},i=this.baseUrl+"/rest/secure/angelbroking/order/v1/getPosition";return this.http.get(i,t)}getOrders(e){let t={headers:new Fe({Authorization:"Bearer "+e,"Content-Type":"application/json",Accept:"application/json","X-UserType":"USER","X-SourceID":"WEB","X-ClientLocalIP":"192.168.0.2","X-ClientPublicIP":"101.190.74.150","X-MACAddress":"37:ab:f8:95:27:ff","X-PrivateKey":f.angelAPIKey}),responseType:"json"},i=this.baseUrl+"/rest/secure/angelbroking/order/v1/getOrderBook";return this.http.get(i,t)}place_order(e,t){let i={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"},r=this.baseUrl+"orders";return this.http.post(r,t,i)}static \u0275fac=function(t){return new(t||n)(oe(Tt),oe(Ii))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var mh=class{tradingsymbol;ltp;return1;return2;return3;return4;return5;return6;return1_rank;return2_rank;return3_rank;return4_rank;return5_rank;return6_rank;dist1;dist2;dist3;dist4;dist4_rank;isDist4Within1Month;DMA200;mf;watchlist;isIndex;index;isVisible;isMatchingFilter=!0},de=class{static RS_period=55;static chartDayToFetch=2e3;static chartDaysToPlot=540;static stocksEvent$=new at;static all_rows=[];static candlesData={};static watchlist=[];static riskFreeRate=.067;static fetchFromWebsite=!0;static stocksList=[{tradingsymbol:"NIFTY 50",niftyIndicesSymbol:"ind_nifty50list.csv",stocks:[]},{tradingsymbol:"NIFTY 100",niftyIndicesSymbol:"ind_nifty100list.csv",stocks:[]},{tradingsymbol:"NIFTY 500",niftyIndicesSymbol:"ind_nifty500list.csv",stocks:[]},{tradingsymbol:"NIFTY MIDCAP 150",niftyIndicesSymbol:"ind_niftymidcap150list.csv",stocks:[]},{tradingsymbol:"NIFTYM150MOMNTM50",niftyIndicesSymbol:"ind_niftymidcap150momentum50_list.csv",stocks:[]},{tradingsymbol:"MOMENTUM50",niftyIndicesSymbol:"ind_nifty500Momentum50_list.csv",stocks:[]},{tradingsymbol:"NIFTY ALPHA 50",niftyIndicesSymbol:"ind_nifty_Alpha_Index.csv",stocks:[]},{tradingsymbol:"NIFTY BANK",niftyIndicesSymbol:"ind_niftybanklist.csv",stocks:[]},{tradingsymbol:"NIFTY PHARMA",niftyIndicesSymbol:"ind_niftypharmalist.csv",stocks:[]},{tradingsymbol:"NIFTY HEALTHCARE",niftyIndicesSymbol:"ind_niftyhealthcarelist.csv",stocks:[]},{tradingsymbol:"NIFTY MIDSML HLTH",niftyIndicesSymbol:"ind_niftymidsmallhealthcare_list.csv",stocks:[]},{tradingsymbol:"NIFTY IT",niftyIndicesSymbol:"ind_niftyitlist.csv",stocks:[]}]};var xc=class n{constructor(e){this.mapService=e}user_id=f.zerodhaUserId;root="wss://ws.zerodha.com/";read_timeout=10;reconnect_max_delay=0;reconnect_max_tries=0;mSubscribe="subscribe";mUnSubscribe="unsubscribe";mSetMode="mode";mAlert=10;mMessage=11;mLogout=12;mReload=13;mClearCache=14;modeFull="full";modeQuote="quote";modeLTP="ltp";ws=null;triggers={connect:[],ticks:[],disconnect:[],error:[],close:[],reconnect:[],noreconnect:[],message:[],order_update:[]};read_timer=null;last_read=null;reconnect_timer=null;auto_reconnect=!1;current_reconnection_count=0;last_reconnect_interval=0;current_ws_url=null;defaultReconnectMaxDelay=60;defaultReconnectMaxRetries=50;maximumReconnectMaxRetries=300;minimumReconnectMaxDelay=5;NseCM=1;NseFO=2;NseCD=3;BseCM=4;BseFO=5;BseCD=6;McxFO=7;McxSX=8;Indices=9;connect(){if(this.ws&&(this.ws.readyState===this.ws.CONNECTING||this.ws.readyState===this.ws.OPEN))return;console.log("Trying to establish Zerodha WS connection");let e=this.root+"?api_key=kitefront&user_id="+this.user_id+"&enctoken="+encodeURIComponent(f.broker_auth.replace("enctoken ",""))+"&uid="+Date.now()+"&user-agent=kite3-web&version=3.0.10";this.ws=new WebSocket(e),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{this.handleOnOpen(event)},this.ws.onmessage=t=>{this.handleOnMessage(t)},this.ws.onerror=t=>{this.handleOnError(t)},this.ws.onclose=t=>{this.handleOnClose(t)}}isSocketConnected(){return!!(this.ws&&this.ws.readyState==this.ws.OPEN)}handleOnOpen(e){console.log("Opened Zerodha Web Socket connection");let t=[256265,260105,257801,265,288009,274441,2707457];this.subscribe(t),this.setMode(this.modeFull,t),f.websocketEvent$.next("connected"),this.initStatusCheck()}initStatusCheck(){clearInterval(this.read_timer),this.last_read=new Date,this.read_timer=setInterval(()=>{if((new Date().valueOf()-this.last_read)/1e3>=this.read_timeout){f.requestStatusEvent$.next({status:"info",message:"WS Reconnecting..."}),console.log("Reconnecting WS..."),this.ws&&(this.ws.close(),this.ws=null),clearInterval(this.read_timer);let e=setTimeout(()=>{this.connect()},2e3)}},this.read_timeout*1e3)}handleOnMessage(e){if(f.logWSFeed&&console.log("handleOnMessage",e),e.data instanceof ArrayBuffer){if(e.data.byteLength>2){let t=this.parseBinary(e.data);f.logWSFeed&&console.log("Parsed binary message",t),t.forEach(i=>{this.mapService.updateMaps_zerodha(i)})}}else this.parseTextMessage(e.data);this.last_read=new Date}handleOnError(e){console.log("Error in WS connection",e)}handleOnClose(e){console.log("Closed WS connection",e),this.ws=null,setTimeout(()=>{console.log("Reconnecting websocket"),this.connect()},5e3)}closeSocket(){console.log("Closing WS connection manually"),this.ws.close(),this.ws=null}subscribe(e){return e.length>0&&this.send({a:this.mSubscribe,v:e}),e}setMode(e,t){return e||(e=this.modeFull),t.length>0&&this.send({a:this.mSetMode,v:[e,t]}),t}send(e){if(!this.ws||this.ws.readyState!==this.ws.OPEN){console.log("Cannot send the message. Socket is not yet opened or it has been closed - ",e);return}try{typeof e=="object"&&(e=JSON.stringify(e)),this.ws.send(e)}catch{this.ws.close()}}parseTextMessage(e){try{e=JSON.parse(e),console.log("text message on ws: ",e)}catch{return}if(e.type==="order"){if(e.status,e.status==="COMPLETE"){let t=this.mapService.parseSymbol(e.tradingsymbol),i=t.strike+t.type;f.requestStatusEvent$.next({status:"success",message:"COMPLETE "+i+" "+e.transaction_type+" "+e.quantity}),setTimeout(()=>{f.enableAlgo||f.miscEvent$.next("refreshAll")},500)}if(e.status==="REJECTED"){let t=this.mapService.parseSymbol(e.tradingsymbol),i=t.strike+t.type;f.requestStatusEvent$.next({status:"danger",message:"REJECTED "+i+" "+e.transaction_type+" "+e.quantity+" "+e.status_message}),setTimeout(()=>{f.enableAlgo||f.miscEvent$.next("refreshAll")},500)}}}parseBinary(e){let t=this.splitPackets(e),i=[];for(let r=0;r<t.length;r++){let s=t[r],o=this.buf2long(s.slice(0,4)),a=o&255,l=!0;a===this.Indices&&(l=!1);let c=100;if(a===this.NseCD?c=1e7:a==this.BseCD&&(c=1e4),s.byteLength===8)i.push({tradable:l,mode:this.modeLTP,instrument_token:o,last_price:this.buf2long(s.slice(4,8))/c});else if(s.byteLength===28||s.byteLength===32){let u=this.modeQuote;s.byteLength===32&&(u=this.modeFull);let d={tradable:l,mode:u,instrument_token:o,last_price:this.buf2long(s.slice(4,8))/c,ohlc:{high:this.buf2long(s.slice(8,12))/c,low:this.buf2long(s.slice(12,16))/c,open:this.buf2long(s.slice(16,20))/c,close:this.buf2long(s.slice(20,24))/c},change:this.buf2long(s.slice(24,28)),exchange_timestamp:null};if(d.ohlc.close!=0&&(d.change=(d.last_price-d.ohlc.close)*100/d.ohlc.close),s.byteLength===32){d.exchange_timestamp=null;let h=this.buf2long(s.slice(28,32));h&&(d.exchange_timestamp=new Date(h*1e3))}i.push(d)}else if(s.byteLength===44||s.byteLength===184){let u=this.modeQuote;s.byteLength===184&&(u=this.modeFull);let d={tradable:l,mode:u,instrument_token:o,last_price:this.buf2long(s.slice(4,8))/c,last_traded_quantity:this.buf2long(s.slice(8,12)),average_traded_price:this.buf2long(s.slice(12,16))/c,volume_traded:this.buf2long(s.slice(16,20)),total_buy_quantity:this.buf2long(s.slice(20,24)),total_sell_quantity:this.buf2long(s.slice(24,28)),ohlc:{open:this.buf2long(s.slice(28,32))/c,high:this.buf2long(s.slice(32,36))/c,low:this.buf2long(s.slice(36,40))/c,close:this.buf2long(s.slice(40,44))/c},change:null,last_trade_time:null,exchange_timestamp:null,oi:null,oi_day_high:null,oi_day_low:null,depth:null};if(d.ohlc.close!=0&&(d.change=(d.last_price-d.ohlc.close)*100/d.ohlc.close),s.byteLength===184){d.last_trade_time=null;let h=this.buf2long(s.slice(44,48));h&&(d.last_trade_time=new Date(h*1e3)),d.exchange_timestamp=null;let p=this.buf2long(s.slice(60,64));p&&(d.exchange_timestamp=new Date(p*1e3)),d.oi=this.buf2long(s.slice(48,52)),d.oi_day_high=this.buf2long(s.slice(52,56)),d.oi_day_low=this.buf2long(s.slice(56,60)),d.depth={buy:[],sell:[]};let g=0,A=s.slice(64,184);for(let v=0;v<10;v++)g=v*12,d.depth[v<5?"buy":"sell"].push({quantity:this.buf2long(A.slice(g,g+4)),price:this.buf2long(A.slice(g+4,g+8))/c,orders:this.buf2long(A.slice(g+8,g+10))})}i.push(d)}}return i}splitPackets(e){let t=this.buf2long(e.slice(0,2)),i=2,r=[];for(let s=0;s<t;s++){let o=this.buf2long(e.slice(i,i+2)),a=e.slice(i+2,i+2+o);r.push(a),i+=2+o}return r}buf2long(e){let t=new Uint8Array(e),i=0,r=t.length;for(let s=0,o=r-1;s<r;s++,o--)i+=t[o]<<s*8;return i}static \u0275fac=function(t){return new(t||n)(oe(qe))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var fn=class n{constructor(e,t,i){this.http=e;this.zerodhaWebsocketService=t;this.mapService=i}baseUrl="https://kite.zerodha.com/";getMastersContract(){let e={responseType:"text"};this.http.get("https://api.kite.trade/instruments",e).subscribe(i=>{console.log("zerodha instruments",i),this.parseContractMaster(i)},i=>{console.log("zerodha instruments error",i)})}parseContractMaster(e){let i=e.split(/\r|\n|\r/).filter(function(a){return a!==""}),r=this.mapService.findCurrExpiryForDisplay(f.usdinrExpiries),o="USDINR"+this.mapService.getExpiry(r)+"FUT";for(let a=1;a<i.length;a++){let l=i[a].split(","),c=l[0],u=l[1],d=l[2],h=l[3].replaceAll('"',""),p=l[4],g=l[5],A=l[6],v=l[8],b=l[9],E=l[11],O=new Hs;O.token=Number(c),O.instru=h,O.expiry=new Date(g).toDateString(),O.strike=Number(A),O.optionType=b,O.lotSize=Number(v),O.exchange=E,O.tradingSymbol=d,f.mastersContract.set(O.token,O),d===o&&E==="CDS"&&(f.USDINR_FUT_TOKEN=O.token,console.log("USDINR_FUT_TOKEN",f.USDINR_FUT_TOKEN))}console.log("ZerodhaService getMastersContract mastersContract",f.mastersContract),this.getInvestedMFData(),this.getInvestedStocksData(),this.connectWebsocket()}getInvestedMFData(){f.mfInvested.forEach(e=>{e[0]!=="NIFTYBEES"&&this.getMFData(e[0]).subscribe(t=>{console.log("zerodha getMFData response",t);let i=t.data.at(-1)[1];this.mapService.setLtp(String(e[0]),i),e[2]=i,console.log("mf ltpMap",this.mapService.ltpMap)},t=>{console.log("zerodha getMFData error",t),f.requestStatusEvent$.next({status:"danger",message:"MF Fetch Failed"})})})}getInvestedStocksData(){let e=JSON.parse(localStorage.getItem("curr_positions"+f.stocksStrategyNum));e&&e.trades&&e.trades.forEach(i=>{let r=new Cr;r.tradingSymbol=i.scrip,this.fetchChartData(r)})}fetchChartData(e){let t=this.findStockInMasters(e),i=new Date,r=new Date;r.setDate(r.getDate()-de.chartDayToFetch);let s=""+r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+("0"+r.getDate()).slice(-2),o=""+i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2);if(t&&t.token){let l={responseType:"json",headers:new Fe({authorization:f.broker_auth})},c="https://kite.zerodha.com/oms/instruments/historical/"+t.token+"/day?user_id="+f.zerodhaUserId+"&oi=1&from="+s+"&to="+o;this.http.get(c,l).subscribe(u=>{if(f.requestStatusEvent$.next({status:"success",message:"FETCHED "+t.tradingSymbol}),console.log("fetchChartData data:",t.tradingSymbol,u),u.data.candles){let d=u.data.candles;d.length===0&&console.log("ZERO CANDLES FOR ",t.tradingSymbol);for(let h=0;h<d.length;h++){let p=d[h],g=de.candlesData[t.tradingSymbol];g||(g={});let A=this.getDateInFormat(p[0]);g[A]=[p[1],p[2],p[3],p[4],p[5],p[6]],de.candlesData[t.tradingSymbol]=g}}console.log("candles:",Object.keys(de.candlesData).length,de.candlesData)})}}getDateInFormat(e=null){e||(e=new Date);let t=new Date(e),i=t.getDate(),r=t.getMonth()+1,s=t.getFullYear(),o=t.getHours(),a=t.getMinutes(),l=t.getSeconds();return""+(i<=9?"0"+i:i)+"-"+(r<=9?"0"+r:r)+"-"+s+" "+(o<=9?"0"+o:o)+":"+(a<=9?"0"+a:a)+":"+(l<=9?"0"+l:l)}isSocketConnected(){return this.zerodhaWebsocketService.isSocketConnected()}connectWebsocket(){this.zerodhaWebsocketService.connect()}closeWebsocket(){this.zerodhaWebsocketService.closeSocket()}sendSubscriptions(e){let t=[];e.forEach(i=>{let r=this.findStrikeInMasters(i);if(r)t.push(r.token);else{let s=this.findFutureInMasters(i);if(s)t.push(s.token);else{let o=this.findStockInMasters(i);o&&t.push(o.token)}}}),console.log("sendSubscriptions: ",t),this.zerodhaWebsocketService.subscribe(t),this.zerodhaWebsocketService.setMode(null,t)}findInMastersByToken(e){return f.mastersContract.get(e)}findStrikeInMasters(e){let t=null;return f.mastersContract.forEach(i=>{if(e.expiry===i.expiry&&e.instru===i.instru&&e.strike===i.strike&&e.type===i.optionType){t=i;return}}),t}findFutureInMasters(e){let t=null;return f.mastersContract.forEach(i=>{if(e.tradingSymbol===i.tradingSymbol&&e.exchange===i.exchange){t=i;return}}),t}findStockInMasters(e){let t=null;return f.mastersContract.forEach(i=>{if(e.tradingSymbol===i.tradingSymbol&&i.exchange==="NSE"){t=i;return}}),t}getMFData(e){let t="https://staticassets.zerodha.com/coin/historical-nav/"+e+".json";return this.http.get(t)}getFunds(){let e=f.broker_auth,t={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"};return this.http.get("https://kite.zerodha.com/oms/user/margins",t)}getPositions(){let e=f.broker_auth,t={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"};return this.http.get("https://kite.zerodha.com/oms/portfolio/positions",t)}getOrders(){let e=f.broker_auth,t={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"};return this.http.get("https://kite.zerodha.com/oms/orders",t)}place_order(e,t,i,r=null,s=null,o="NRML",a=f.defaultTag,l=0){let c="BUY";t<0&&(c="SELL",t=Math.abs(t));let u="MARKET",d=0;r&&(u="LIMIT",d=r),l&&(u="SL");let h={headers:new Fe({Authorization:i,"Content-Type":"application/x-www-form-urlencoded"}),responseType:"json"},p="NFO";(e.includes("SENSEX")||e.includes("BANKEX"))&&(p="BFO");let g=this.baseUrl+"oms/orders/regular";if(s){let A=new vi().set("variety","regular").set("exchange",p).set("tradingsymbol",e).set("transaction_type",c).set("order_type",""+u).set("quantity",t).set("price",""+d).set("product",o).set("validity","DAY").set("disclosed_quantity","0").set("trigger_price",""+l).set("squareoff","0").set("stoploss","0").set("trailing_stoploss","0").set("user_id",f.zerodhaUserId).set("order_id",s).set("parent_order_id","");return g+="/"+s,this.http.put(g,A.toString(),h)}else{let A=new vi().set("variety","regular").set("exchange",p).set("tradingsymbol",e).set("transaction_type",c).set("order_type",""+u).set("quantity",t).set("price",""+d).set("product",o).set("validity","DAY").set("disclosed_quantity","0").set("trigger_price",""+l).set("squareoff","0").set("stoploss","0").set("trailing_stoploss","0").set("user_id",f.zerodhaUserId).set("tag",a);return this.http.post(g,A.toString(),h)}}cancel_order(e){let t=f.broker_auth,i={headers:new Fe({Authorization:t,"Content-Type":"application/json"}),responseType:"json"},r="https://kite.zerodha.com/oms/orders/regular/"+e+"?order_id="+e+"&parent_order_id=&variety=regular";return this.http.delete(r,i)}nudge_order(e,t){let i={headers:new Fe({Authorization:t}),responseType:"json"},r=this.baseUrl+"oms/nudge/orders",s=[{exchange:"NFO",tradingsymbol:e,transaction_type:"BUY",variety:"regular",product:"NRML",order_type:"MARKET",quantity:1e3}];return this.http.post(r,s,i)}historical(e,t,i,r,s,o){let a={headers:new Fe({Authorization:f.broker_auth}),responseType:"json"},l="https://api.kite.trade/instruments/historical/"+e+"/"+t+"?from="+i+"&to="+r+"&continuous="+s+"&oi="+o;this.http.get(l,a).subscribe(c=>{console.log("zerodha historical",c);let u=[];for(let d=0;d<c.data.candles.length;d++){let h=c.data.candles[d],p={date:new Date(h[0]),open:h[1],high:h[2],low:h[3],close:h[4],volume:h[5]};h[6]&&(p.oi=h[6]),u.push(p)}console.log("zerodha historical result:",u)},c=>{console.log("zerodha historical error",c)})}static \u0275fac=function(t){return new(t||n)(oe(Tt),oe(xc),oe(qe))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var En=class n{constructor(e,t,i,r,s,o,a){this.http=e;this.fyersService=t;this.aliceblueService=i;this.angelService=r;this.angelWS=s;this.mapService=o;this.zerodhaService=a}payOffEvent$=new at;chartEvent$=new at;stockChartEvent$=new at;placeOrdersEvent$=new at;mean=0;variance=1;dummyRequest(){let e="https://httpstat.us/200?sleep=10000";e="https://www.nseindia.com/api/option-chain-indices?symbol=BANKNIFTY",console.log("making dummy request"),this.http.get(e).subscribe(t=>{console.log("success",t)},t=>{console.log("error",t);let i="Error (mostly timeout)";t.error&&t.error.message?i=t.error.message:i=t.message,f.requestStatusEvent$.next({status:"danger",message:i})})}getRawCsvData(){return this.http.get("https://www.niftyindices.com/IndexConstituent/ind_nifty500list.csv",{responseType:"text"})}coinRequest(){let e={withCredentials:!0,headers:new Fe({cookie:"_ga=GA1.2.1309723177.1657258383; coin_session=pcJknMigqOhgkkMqqVzVsNrS3XcgvOy9; _pk_id.1.35a4=7cc08132c0469b55.1678078440.; signup_csrftoken=OF2XrKuTPpUNJZGGK5ODQJVW4joNdL7YjkuA7LEYwAX8SeWJqULTjbSe8Ucrqexg; AMP_MKTG_d9d4ec74fa=JTdCJTdE; _ga_Y19MKQM0YF=GS1.2.1700802963.1.0.1700802963.0.0.0; AMP_d9d4ec74fa=JTdCJTIyZGV2aWNlSWQlMjIlM0ElMjJlMjdiOGYwOS1mZWUzLTQ3OWMtYjIzNy02OTA4YjAwNTliYjQlMjIlMkMlMjJzZXNzaW9uSWQlMjIlM0ExNzAwODAyOTYyNzU0JTJDJTIyb3B0T3V0JTIyJTNBZmFsc2UlMkMlMjJsYXN0RXZlbnRUaW1lJTIyJTNBMTcwMDgwMjk3MzE3OSUyQyUyMmxhc3RFdmVudElkJTIyJTNBMiU3RA==; cf_clearance=QcTTs0eM7QOX7QqkJ..WB6SxuV4BMtvtclA_wV0RFxo-1702439681-0-1-aa6e5b56.99ac5591.5bd7611e-160.0.0; public_token=W7msMal5BeMrBUeLH4NnyEgLR6zMpAXa; _cfuvid=745C8KuaaVvRRW4gl8oox4K.jm3iqePintSSSArejws-1703667311507-0-604800000; __cf_bm=vQXpFrgA1cJCeU.22dFnMGaJyyN6rvKuZgPY7xcSysk-1703681906-1-AekhZ3Q2fm30ewvnalldMjowBNU6kpt1v9t2bR5/pcI9op+6FikhnmazsZzXrvSa4Q1/yKjPPEYrupu8554kSCQ=; _pk_ref.1.35a4=%5B%22%22%2C%22%22%2C1703682483%2C%22https%3A%2F%2Fconsole.zerodha.com%2F%22%5D; _pk_ses.1.35a4=1","x-csrftoken":"W7msMal5BeMrBUeLH4NnyEgLR6zMpAXa"})},t="https://coin.zerodha.com/api/mf/holdings";console.log("*** making coin request"),this.http.get(t,e).subscribe(i=>{console.log("*** success",i)},i=>{console.log("*** error",i);let r="Error (mostly timeout)";i.error&&i.error.message?r=i.error.message:r=i.message,f.requestStatusEvent$.next({status:"danger",message:r})})}coinRequest2(){let e={headers:new Fe({Authorization:"enctoken 2yAOdBPOZ/+KPIvhO3XXZxa6FheVGkciQfm+zluD8KX9tlc4yaVLLqqPSx/SKtZx9Uv97XGtIM02ipPEktyvV06q6l8cFidfuqAbbMVUjUihABNuDug0Vw==","Content-Type":"application/json"}),responseType:"json"},t="https://api.kite.trade/mf/holdings";console.log("*** making mf request"),this.http.get(t,e).subscribe(i=>{console.log("*** success",i)},i=>{console.log("*** error",i);let r="Error (mostly timeout)";i.error&&i.error.message?r=i.error.message:r=i.message,f.requestStatusEvent$.next({status:"danger",message:r})})}coinRequest3(){let e={headers:new Fe({Authorization:"enctoken 2yAOdBPOZ/+KPIvhO3XXZxa6FheVGkciQfm+zluD8KX9tlc4yaVLLqqPSx/SKtZx9Uv97XGtIM02ipPEktyvV06q6l8cFidfuqAbbMVUjUihABNuDug0Vw==","Content-Type":"application/json"}),responseType:"json"},t="https://staticassets.zerodha.com/coin/historical-nav/INF179K01WM1.json";console.log("*** making mf request"),this.http.get(t).subscribe(i=>{console.log("*** success",i)},i=>{console.log("*** error",i);let r="Error (mostly timeout)";i.error&&i.error.message?r=i.error.message:r=i.message,f.requestStatusEvent$.next({status:"danger",message:r})})}getZerodhaInstruments(){let e={responseType:"text"};this.http.get("https://api.kite.trade/instruments",e).subscribe(i=>{console.log("zerodha instruments",i),f.requestStatusEvent$.next({status:"success",message:"Fetched Zerodha instruments"});let s=i.split(/\r|\n|\r/).filter(function(o){return o!==""});for(let o=1;o<s.length;o++){let a=s[o].split(","),l=a[0],c=a[1],u=a[2],d=a[3].replaceAll('"',""),h=a[4],p=a[5],g=a[6],A=a[9];(d==="NIFTY"||d==="BANKNIFTY"||d==="FINNIFTY"||d==="SENSEX"||d==="BANKEX"||d==="MIDCPNIFTY")&&this.parseAndSetMaps(d,p,g,A,h),d==="NIFTY 50"&&this.mapService.setLtp("NIFTY50",h),d==="NIFTY BANK"&&this.mapService.setLtp("BANKNIFTY",h),d==="NIFTY FIN SERVICE"&&this.mapService.setLtp("FINNIFTY",h),d==="NIFTY MIDCAP SELECT (MIDCPNIFTY)"&&this.mapService.setLtp("MIDCPNIFTY",h),u==="SENSEX"&&this.mapService.setLtp("SENSEX",h),u==="BANKEX"&&this.mapService.setLtp("BANKEX",h)}},i=>{console.log("zerodha instruments error",i),f.requestStatusEvent$.next({status:"danger",message:i.status+" - Failed to fetch Zerodha instruments"})})}getNSE_OC(e){let t=e;e==="NIFTY50"&&(t="NIFTY");let i={responseType:"json"},r="https://www.nseindia.com/api/option-chain-indices?symbol="+t;this.http.get(r,i).subscribe(s=>{console.log("getNSE_OC",s),f.requestStatusEvent$.next({status:"success",message:"Fetched NSE OC of "+e});for(let[o,a]of Object.entries(s.records.data))a.hasOwnProperty("CE")&&this.parseAndSetMaps(t,a.CE.expiryDate,a.CE.strikePrice,"CE",a.CE.lastPrice),a.hasOwnProperty("PE")&&this.parseAndSetMaps(t,a.PE.expiryDate,a.PE.strikePrice,"PE",a.PE.lastPrice);this.mapService.setLtp(e,s.records.underlyingValue)},s=>{console.log("getNSE_OC error",s),f.requestStatusEvent$.next({status:"danger",message:s.status+" - Failed to fetch NSE OC of "+e})})}parseAndSetMaps(e,t,i,r,s){let o={instru:e,expiry:t,strike:i,optionType:r},a=this.mapService.getMapKey(o);this.mapService.setLtp(a,s)}uploadedMastersContract(e){if(f.SocketMode==="zerodha"){let t=String(e);this.zerodhaService.parseContractMaster(t)}else if(f.SocketMode==="aliceblue"){let t=JSON.parse(e.toString());this.aliceblueService.parseContractMaster(t)}else f.SocketMode}getMastersContract(e){if(f.SocketMode==="zerodha")this.zerodhaService.getMastersContract();else if(f.SocketMode==="aliceblue")this.aliceblueService.getMastersContract(e);else if(f.SocketMode==="angel")return this.angelService.getMastersContract()}reopenWebsocket(){f.SocketMode==="zerodha"?this.zerodhaService.connectWebsocket():f.SocketMode==="aliceblue"?this.aliceblueService.getEncKey():f.SocketMode}getDelta(e,t,i,r,s,o=!1,a=null){return this.getGreeks(e,t,i,r,s,o,a).delta}getGreeks(e,t,i,r,s,o=!1,a=null){var l=new gaussian(0,1);let c=new Date(r);e==="USDINR"?c.setHours(12,30,0):c.setHours(15,30,0);let u=new Date;o&&(u=a);let d=Math.floor((c.getTime()-u.getTime())/1e3),h=Math.floor(d/60),p=Math.floor(h/60),g=Math.floor(p/24)/365,A="NIFTY50";e==="BANKNIFTY"?A="BANKNIFTY":e==="FINNIFTY"?A="FINNIFTY":e==="USDINR"&&(A="USDINR");let v=this.mapService.getScripLTP(null,null,A,null),b=s,E=null;i==="CE"&&(E="ce"),i==="PE"&&(E="pe");let T=this.calculateIV(e,v,t,f.INTEREST_RATE,c,E,b)/100,k=f.INTEREST_RATE/100,D=(Math.log(v/t)+(k+Math.pow(T,2)/2)*g)/(T*Math.sqrt(g)),M=(Math.log(v/t)+(k-Math.pow(T,2)/2)*g)/(T*Math.sqrt(g)),N=t*Math.exp(-1*k*g),L=v*l.cdf(D)-N*l.cdf(M),B=N*l.cdf(-1*M)-v*l.cdf(-1*D),H=l.cdf(D),Z=H-1,re=l.pdf(D)/(v*T*Math.sqrt(g)),Q=re,G=v*l.pdf(D)*Math.sqrt(g)/100,ae=G,ne=(-1*v*l.pdf(D)*T/(2*Math.sqrt(g))-k*N*l.cdf(M))/365,De=(-1*v*l.pdf(D)*T/(2*Math.sqrt(g))+k*N*l.cdf(-1*M))/365,ue=N*g*l.cdf(M)/100,le=-1*N*g*l.cdf(-1*M)/100,ee=0,fe=0,ye=0,ke=0;return i==="CE"?(ee=H,fe=re,ye=G,ke=ne):i==="PE"&&(ee=Z,fe=Q,ye=ae,ke=De),ee=Math.round((ee+1e-5)*100)/100,fe=Math.round((fe+1e-5)*1e4)/1e4,ye=Math.round((ye+1e-5)*100)/100,ke=Math.round((ke+1e-5)*100)/100,{delta:ee,gamma:fe,vega:ye,theta:ke}}getGreeks0(e,t,i,r,s,o=!1,a=null){var l=new gaussian(0,1);console.log(l);let c=new Date(r);e==="USDINR"?c.setHours(12,30,0):c.setHours(15,30,0);let u=new Date;o&&(u=a);let d=Math.floor((c.getTime()-u.getTime())/1e3),h=Math.floor(d/60),p=Math.floor(h/60),g=Math.floor(p/24)/365,A="NIFTY50";e==="BANKNIFTY"?A="BANKNIFTY":e==="FINNIFTY"?A="FINNIFTY":e==="MIDCPNIFTY"?A="MIDCPNIFTY":e==="SENSEX"?A="SENSEX":e==="BANKEX"?A="BANKEX":e==="USDINR"&&(A="USDINR");let v=this.mapService.getScripLTP(null,null,A,null),b=s,E=null;i==="CE"&&(E="ce"),i==="PE"&&(E="pe");let T=this.calculateIV(e,v,t,f.INTEREST_RATE,c,E,b)/100,k=f.INTEREST_RATE/100,D=(Math.log(v/t)+(k+Math.pow(T,2)/2)*g)/(T*Math.sqrt(g)),M=0;i==="CE"?M=this.getCDF(D):i==="PE"&&(M=this.getCDF(D)-1),M=Math.round((M+1e-5)*100)/100;let N=Math.exp(-Math.pow(D,2)/2)/Math.sqrt(2*3.14159265358979),L=N/(v*(T*Math.sqrt(g)));L=Math.round((L+1e-5)*1e4)/1e4;let B=.01*v*Math.sqrt(g)*N;B=Math.round((B+1e-5)*100)/100;let H=D-T*Math.sqrt(g),Z=this.getCDF(H),re=0;return i==="CE"?re=-(v*T*N)/(2*Math.sqrt(g))-k*t*Math.exp(-k*g)*Z:i==="PE"&&(re=-(v*T*N)/(2*Math.sqrt(g))+k*t*Math.exp(-k*g)*(1-Z)),re=re/365,re=Math.round((re+1e-5)*100)/100,{delta:M,gamma:L,vega:B,theta:re}}calcHolidays(e,t){let i=0,r=new Date(e.getTime());for(;r<=t;){let s=r.getDay();(s===0||s===6)&&i++,r.setDate(r.getDate()+1)}return f.holidays.forEach(s=>{s>=e&&s<=t&&i++}),i}getLastWorkingDay(e){let t=new Date(e.getTime());for(t.setDate(t.getDate()-1);;){let i=t.getDay();if(i===0||i===6)t.setDate(t.getDate()-1);else{let r=!1;if(f.holidays.forEach(s=>{s.toLocaleDateString()===t.toLocaleDateString()&&(t.setDate(t.getDate()-1),r=!0)}),!r)break}}return t}calcWorkingDays(e,t){let i=0,r=new Date(e.getTime());for(;r<=t;){let s=r.getDay();s!==0&&s!==6&&i++,r.setDate(r.getDate()+1)}return f.holidays.forEach(s=>{s>=e&&s<=t&&i--}),i-1}calculateIV(e,t,i,r,s,o,a){let l=80,c=0,u=0;for(;l-c>1e-4;)this.calculateT0AtPoint(e,t,i,r,s,(l+c)/2,o)>a?l=(l+c)/2:c=(l+c)/2;return u=(l+c)/2,u}calculateT0AtPoint(e,t,i,r,s,o,a,l){let c=0,u=new Date(s);e==="USDINR"?u.setHours(12,30,0):u.setHours(15,30,0);let d=new Date,h=0;if(l){let A=new Date(d);A.setDate(A.getDate()+l),A.setHours(9,15,0),h=Math.floor((A.getTime()-d.getTime())/1e3)}let p=this.calcHolidays(d,u)*86400,g=Math.floor((u.getTime()-d.getTime())/1e3)-p-h;if(g>0){let b=g/60/60/24/365,E=o/100;r=r/100;let O=(Math.log(t/i)+(r+Math.pow(E,2)/2)*b)/(E*Math.sqrt(b)),T=O-E*Math.sqrt(b),k=i*Math.exp(-1*r*b);a==="ce"&&(c=t*this.getCDF(O)-k*this.getCDF(T)),a==="pe"&&(c=k*this.getCDF(-1*T)-t*this.getCDF(-1*O))}return c}getCDF(e){let t=Math.sqrt(this.variance);return .5*this.erfc(-(e-this.mean)/(t*Math.sqrt(2)))}erfc(e){let t=Math.abs(e),i=1/(1+t/2),r=i*Math.exp(-t*t-1.26551223+i*(1.00002368+i*(.37409196+i*(.09678418+i*(-.18628806+i*(.27886807+i*(-1.13520398+i*(1.48851587+i*(-.82215223+i*.17087277)))))))));return e>=0?r:2-r}playAudio(e){let t="";f.isProduction===!1&&(t="../");let i=new Audio;e==="success"?i.src=f.audioSuccess:e==="error"?i.src=f.audioError:e==="warn"&&(i.src=f.audioWarn),i.load(),i.play()}get(e){let t={},i=e;return this.http.get(i,t)}getZerodhaMargin(e,t,i,r){let s=[];for(let a=0;a<t.length;a++){let l=t[a];if(l.exit!==null&&l.exit===0){let c={instru:e,expiry:l.expiry,strike:this.mapService.parseScrip(l.scrip).scrip,optionType:this.mapService.parseScrip(l.scrip).type},u=this.mapService.getMapKey(c),d="SELL";l.qty>0&&(d="BUY");let h="CDS";(i.includes("NIFTY")||i.includes("BANKNIFTY")||i.includes("FINNIFTY")||i.includes("MIDCPNIFTY"))&&(h="NFO"),(i.includes("SENSEX")||i.includes("BANKEX"))&&(h="BFO");let p={exchange:h,tradingsymbol:u,transaction_type:d,variety:"regular",product:"NRML",order_type:"MARKET",quantity:Math.abs(l.qty),price:0,trigger_price:0,squareoff:0,stoploss:0};s.push(p)}}let o={headers:new Fe({Authorization:r}),responseType:"json"};return this.http.post("https://kite.zerodha.com/oms/margins/basket?consider_positions=&mode=compact",s,o)}getZerodhaMargin_old(e,t,i,r){let s=new FormData;s.append("action","calculate");for(let o=0;o<i.length;o++){let a=i[o];if(a.exit!==null&&a.exit===0){let l=a.scrip.slice(0,-2),c="";a.scrip.includes("CE")&&(c="CE"),a.scrip.includes("PE")&&(c="PE");let u="sell";a.qty>0&&(u="buy");let d="CDS";r.includes("NIFTY")&&(d="NFO");let h=1e3;(r==="NIFTY"||r==="BANKNIFTY")&&(h=1);let p=e+f.year+t;s.append("exchange[]",d),s.append("product[]","OPT"),s.append("scrip[]",p),s.append("option_type[]",c),s.append("strike_price[]",l),s.append("qty[]",Math.abs(a.qty)/h),s.append("trade[]",u)}}return this.http.post("https://zerodha.com/margin-calculator/SPAN",s)}sendSubscriptions(e){f.SocketMode==="zerodha"?this.zerodhaService.sendSubscriptions(e):f.SocketMode==="aliceblue"?this.aliceblueService.sendSubscriptions(e):f.SocketMode==="angel"&&this.angelService.sendSubscriptions(e)}connectWebsocket(e){f.SocketMode==="aliceblue"?this.aliceblueService.connectWebsocket(e):f.SocketMode==="angel"&&this.angelService.angelLogin()}closeWebsocket(){f.SocketMode==="zerodha"?this.zerodhaService.closeWebsocket():f.SocketMode==="aliceblue"?this.aliceblueService.closeWebsocket():f.SocketMode}isSocketConnected(){return f.SocketMode==="zerodha"?this.zerodhaService.isSocketConnected():f.SocketMode==="aliceblue"?this.aliceblueService.isSocketConnected():f.SocketMode==="angel"?this.angelWS.isSocketConnected():!1}auth(){return f.RestMode==="fyers"?this.fyersService.auth():null}getTokenUrl(e,t){return f.RestMode==="fyers"?this.fyersService.getTokenUrl(e,t):""}getFunds(e){return f.SocketMode==="zerodha"?this.zerodhaService.getFunds():f.RestMode==="fyers"?this.fyersService.getFunds(e):Te(null)}getPositions(e){return f.RestMode==="fyers"?this.fyersService.getPositions(e):Te(null)}getOrders(e){return f.RestMode==="fyers"?this.fyersService.getOrders(e):Te(null)}placeOrder(e,t,i,r,s,o,a,l){if(f.RestMode==="fyers"){let c={symbol:t,qty:i,type:r,side:s,productType:o,limitPrice:a,stopPrice:l,disclosedQty:0,validity:"DAY",offlineOrder:"False",stopLoss:0,takeProfit:0};return console.log("Order: "+c),this.fyersService.place_order(e,c)}return Te(null)}getQtyUptoFreezeLimit(e,t,i){let r=f.freezeLimit[e];return i&&Math.abs(i)<Math.abs(t)?r<Math.abs(i)?i<0?-r:r:i:r<Math.abs(t)?t<0?-r:r:t}static \u0275fac=function(t){return new(t||n)(oe(Tt),oe(xr),oe(Er),oe(Cc),oe(Ii),oe(qe),oe(fn))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var Dc=class n{constructor(e,t,i,r,s,o){this.http=e;this.mapService=t;this.fyersService=i;this.aliceblueService=r;this.zerodhaService=s;this.appService=o}optionChainEvent$=new at;strategyPnLEvent$=new at;intradayData=new Map;oc_instru;oc_year;oc_month;oc_date;oc_year2;oc_month2;oc_date2;oc_range_multiple;oc_range_higher;oc_range_lower;expiryString;expiryString2;oc_strikes;oc_strikes2;multi_oc_strikes1;multi_oc_strikes2;multi_oc_strikes3;multi_oc_strikes4;multi_oc_strikes5;ocSpotStrike;bfly_monitor;ds_monitor;charts={};candlestickSeries={};strike_interval;charts_instru;charts_expiry;charts_data={};fetch_delay=200;fetch_ce_interval;fetch_pe_interval;refresh_ce_interval;refresh_pe_interval;spot_chart_instru;spot_chart_chart;spot_candlestickSeries;spot_charts_data;single_strike_ce;single_strike_pe;single_chart_ce;single_chart_pe;single_chart_ce_candlestickSeries;single_chart_pe_candlestickSeries;getIntradayData(e,t,i){return this.intradayData.get(t+" "+i+" "+e)}loadIntradayData(e){console.log("Loading intraday data"),e.forEach(t=>{let i=JSON.parse(localStorage.getItem(t.instru+" "+t.expiry+" "+t.scrip));this.intradayData.set(t.instru+" "+t.expiry+" "+t.scrip,i)}),console.log("Loaded intraday data: ",this.intradayData)}initFetchIntraday(e){dp(500).subscribe(t=>{let i=new Date;i.setHours(17,5,0,0);let r=new Date;r.setHours(8,55,0,0);let s=new Date().getTime();s>i.getTime()||s<r.getTime()||new Date().getDay()===6||new Date().getDay()===0||e.forEach(o=>{let a=o.scrip,l=o.instru,c=o.expiry,u=null;if((a==="FUT"||a==="SPOT")&&(u=this.mapService.getScripLTP(null,null,l,null)),u){let d=this.intradayData.get(l+" "+c+" "+a);d||(d=[]);let h=new Date,p=[h.getFullYear(),h.getMonth()+1,h.getDate()].join("-")+" "+[h.getHours(),h.getMinutes()].join(":"),g=null;for(let A=0;A<d.length;A++)if(d[A].time&&d[A].time===p){g=A;break}g!==null?d[g]={time:p,price:u}:d.push({time:p,price:u}),this.intradayData.set(l+" "+c+" "+a,d)}})})}saveIntradayData(){dp(1e3).subscribe(e=>{for(let[t,i]of this.intradayData){let r=i;localStorage.setItem(t,JSON.stringify(r))}})}processOCRequest(e,t,i=null,r=null,s=null){this.oc_instru=e;let o=new Date(t);if(this.oc_year=o.getFullYear(),this.oc_month=o.getMonth()+1,this.oc_date=o.getDate(),this.oc_instru==="NIFTY"){this.oc_range_multiple=50;let a=this.mapService.getScripLTP(null,null,"NIFTY50",null),l=Math.round(a/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=l+500,this.oc_range_lower=l-500}else if(this.oc_instru==="BANKNIFTY"){this.oc_range_multiple=100;let a=this.mapService.getScripLTP(null,null,"BANKNIFTY",null),l=Math.round(a/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=l+1500,this.oc_range_lower=l-1500}else if(this.oc_instru==="FINNIFTY"){this.oc_range_multiple=50;let a=this.mapService.getScripLTP(null,null,"FINNIFTY",null),l=Math.round(a/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=l+500,this.oc_range_lower=l-500}else if(this.oc_instru==="MIDCPNIFTY"){this.oc_range_multiple=25;let a=this.mapService.getScripLTP(null,null,"MIDCPNIFTY",null),l=Math.round(a/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=l+300,this.oc_range_lower=l-300}else if(this.oc_instru==="SENSEX"){this.oc_range_multiple=100;let a=this.mapService.getScripLTP(null,null,"SENSEX",null),l=Math.round(a/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=l+1500,this.oc_range_lower=l-1500}else if(this.oc_instru==="BANKEX"){this.oc_range_multiple=100;let a=this.mapService.getScripLTP(null,null,"BANKEX",null),l=Math.round(a/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=l+1500,this.oc_range_lower=l-1500}else if(this.oc_instru==="USDINR"){this.oc_range_multiple=.25;let a=this.mapService.getScripLTP(null,null,"USDINR",null),l=Math.round(a/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=l+2,this.oc_range_lower=l-2}this.updateOCRange(!1,i,r),s&&this.processOCRequest2(s)}processMultiOCRequest(e,t,i,r,s,o){if(this.oc_instru=e,this.oc_instru==="NIFTY"){this.oc_range_multiple=50;let a=this.mapService.getScripLTP(null,null,"NIFTY50",null),l=Math.round(a/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=l+1e3,this.oc_range_lower=l-1e3}else if(this.oc_instru==="BANKNIFTY"){this.oc_range_multiple=100;let a=this.mapService.getScripLTP(null,null,"BANKNIFTY",null),l=Math.round(a/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=l+1500,this.oc_range_lower=l-1500}else if(this.oc_instru==="FINNIFTY"){this.oc_range_multiple=50;let a=this.mapService.getScripLTP(null,null,"FINNIFTY",null),l=Math.round(a/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=l+500,this.oc_range_lower=l-500}else if(this.oc_instru==="MIDCPNIFTY"){this.oc_range_multiple=25;let a=this.mapService.getScripLTP(null,null,"MIDCPNIFTY",null),l=Math.round(a/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=l+300,this.oc_range_lower=l-300}else if(this.oc_instru==="SENSEX"){this.oc_range_multiple=100;let a=this.mapService.getScripLTP(null,null,"SENSEX",null),l=Math.round(a/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=l+1500,this.oc_range_lower=l-1500}else if(this.oc_instru==="BANKEX"){this.oc_range_multiple=100;let a=this.mapService.getScripLTP(null,null,"BANKEX",null),l=Math.round(a/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=l+1500,this.oc_range_lower=l-1500}else if(this.oc_instru==="USDINR"){this.oc_range_multiple=.25;let a=this.mapService.getScripLTP(null,null,"USDINR",null),l=Math.round(a/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=l+2,this.oc_range_lower=l-2}this.updateMultiOCRange(!0,e,null,null,t,i,r,s,o)}updateMultiOCRange(e=!1,t,i=null,r=null,s,o,a,l,c){let u=this.mapService.getExpiry(new Date(s),t),d=this.mapService.getExpiry(new Date(o),t),h=this.mapService.getExpiry(new Date(a),t),p=this.mapService.getExpiry(new Date(l),t),g=this.mapService.getExpiry(new Date(c),t);console.log("chartService updateMultiOCRange: ",u,d),i&&(console.log("setting oc_range_higher",i),this.oc_range_higher=Number(i)),r&&(console.log("setting oc_range_lower",r),this.oc_range_lower=Number(r)),console.log("setting",i,this.oc_range_higher,r,this.oc_range_lower,this.oc_range_multiple),this.multi_oc_strikes1=[],this.multi_oc_strikes2=[],this.multi_oc_strikes3=[],this.multi_oc_strikes4=[],this.multi_oc_strikes5=[];for(let A=this.oc_range_lower;A<=this.oc_range_higher;A+=this.oc_range_multiple)this.multi_oc_strikes1.push({symbol:this.oc_instru+u+A,strike:A,ltpCE:0,ltpPE:0,isSpot:!1}),this.multi_oc_strikes2.push({symbol:this.oc_instru+d+A,strike:A,ltpCE:0,ltpPE:0,isSpot:!1}),this.multi_oc_strikes3.push({symbol:this.oc_instru+h+A,strike:A,ltpCE:0,ltpPE:0,isSpot:!1}),this.multi_oc_strikes4.push({symbol:this.oc_instru+p+A,strike:A,ltpCE:0,ltpPE:0,isSpot:!1}),this.multi_oc_strikes5.push({symbol:this.oc_instru+g+A,strike:A,ltpCE:0,ltpPE:0,isSpot:!1});if(console.log("chartService updateMultiOCRange: ",this.multi_oc_strikes1,this.multi_oc_strikes2),!f.isSimulatedStrategy&&e){let A=[];this.multi_oc_strikes1.forEach(v=>{A.push(this.mapService.getSubscriptionObject(v.strike+"CE",this.oc_instru,new Date(s).toDateString())),A.push(this.mapService.getSubscriptionObject(v.strike+"PE",this.oc_instru,new Date(s).toDateString()))}),this.multi_oc_strikes2.forEach(v=>{A.push(this.mapService.getSubscriptionObject(v.strike+"CE",this.oc_instru,new Date(o).toDateString())),A.push(this.mapService.getSubscriptionObject(v.strike+"PE",this.oc_instru,new Date(o).toDateString()))}),this.multi_oc_strikes3.forEach(v=>{A.push(this.mapService.getSubscriptionObject(v.strike+"CE",this.oc_instru,new Date(a).toDateString())),A.push(this.mapService.getSubscriptionObject(v.strike+"PE",this.oc_instru,new Date(a).toDateString()))}),this.multi_oc_strikes4.forEach(v=>{A.push(this.mapService.getSubscriptionObject(v.strike+"CE",this.oc_instru,new Date(l).toDateString())),A.push(this.mapService.getSubscriptionObject(v.strike+"PE",this.oc_instru,new Date(l).toDateString()))}),this.multi_oc_strikes5.forEach(v=>{A.push(this.mapService.getSubscriptionObject(v.strike+"CE",this.oc_instru,new Date(c).toDateString())),A.push(this.mapService.getSubscriptionObject(v.strike+"PE",this.oc_instru,new Date(c).toDateString()))}),console.log("chartService updateOCRange Subscriptions: "+A),this.appService.sendSubscriptions(A)}}updateMultiOCValues1(e){return this.multi_oc_strikes1&&this.multi_oc_strikes1.length>0&&this.multi_oc_strikes1.forEach(t=>{t.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(e),t.strike,"CE"),t.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(e),t.strike,"PE"),t.isSpot=this.isSpotStrike(t.strike)}),this.multi_oc_strikes1}updateMultiOCValues2(e){return this.multi_oc_strikes2&&this.multi_oc_strikes2.length>0&&this.multi_oc_strikes2.forEach(t=>{t.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(e),t.strike,"CE"),t.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(e),t.strike,"PE"),t.isSpot=this.isSpotStrike(t.strike)}),this.multi_oc_strikes2}updateMultiOCValues3(e){return this.multi_oc_strikes3&&this.multi_oc_strikes3.length>0&&this.multi_oc_strikes3.forEach(t=>{t.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(e),t.strike,"CE"),t.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(e),t.strike,"PE"),t.isSpot=this.isSpotStrike(t.strike)}),this.multi_oc_strikes3}updateMultiOCValues4(e){return this.multi_oc_strikes4&&this.multi_oc_strikes4.length>0&&this.multi_oc_strikes4.forEach(t=>{t.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(e),t.strike,"CE"),t.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(e),t.strike,"PE"),t.isSpot=this.isSpotStrike(t.strike)}),this.multi_oc_strikes4}updateMultiOCValues5(e){return this.multi_oc_strikes5&&this.multi_oc_strikes5.length>0&&this.multi_oc_strikes5.forEach(t=>{t.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(e),t.strike,"CE"),t.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(e),t.strike,"PE"),t.isSpot=this.isSpotStrike(t.strike)}),this.multi_oc_strikes5}updateOCRange(e=!1,t=null,i=null){this.expiryString=this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),this.oc_instru),t&&(console.log("setting oc_range_higher",t),this.oc_range_higher=Number(t)),i&&(console.log("setting oc_range_lower",i),this.oc_range_lower=Number(i)),console.log("setting",t,this.oc_range_higher,i,this.oc_range_lower,this.oc_range_multiple),this.oc_strikes=[];for(let r=this.oc_range_lower;r<=this.oc_range_higher;r+=this.oc_range_multiple)this.oc_strikes.push({symbol:this.oc_instru+this.expiryString+r,strike:r,inCurrStrategyCE:!1,inCurrStrategyPE:!1,addCEToOrders:!1,addPEToOrders:!1,qtyInputCE:200,qtyInputPE:200,volumeCE:0,volumePE:0,deltaCE:0,gammaCE:0,vegaCE:0,thetaCE:0,deltaPE:0,gammaPE:0,vegaPE:0,thetaPE:0,ltpCE:0,ltpPE:0,qtyCE:0,qtyPE:0,costCE:0,costPE:0,inlineStrategyPnLCE:"",inlineStrategyPnLPE:"",isSpot:!1,showNudge:!1});if(!f.isSimulatedStrategy&&e){let r=[];this.oc_strikes.forEach(s=>{r.push(this.mapService.getSubscriptionObject(s.strike+"CE",this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date).toDateString())),r.push(this.mapService.getSubscriptionObject(s.strike+"PE",this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date).toDateString()))}),console.log("chartService updateOCRange Subscriptions: "+r),this.appService.sendSubscriptions(r)}}updateOCValues(){return this.oc_strikes&&this.oc_strikes.length>0&&this.oc_strikes.forEach(e=>{e.inCurrStrategyCE=this.isStrikeInCurrStrategy(e.strike+"CE"),e.inCurrStrategyPE=this.isStrikeInCurrStrategy(e.strike+"PE"),e.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"CE"),e.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"PE"),e.qtyCE=this.getQtyOfStrikeInStrategy(e.strike+"CE"),e.qtyPE=this.getQtyOfStrikeInStrategy(e.strike+"PE"),e.costCE=Math.round((this.getCostOfStrikeInStrategy(e.strike+"CE")+1e-5)*100)/100,e.costPE=Math.round((this.getCostOfStrikeInStrategy(e.strike+"PE")+1e-5)*100)/100,e.isSpot=this.isSpotStrike(e.strike),e.showNudge=this.showOILimit(this.oc_instru,e.strike)}),this.oc_strikes}processOCRequest2(e){let t=new Date(e);this.oc_year2=t.getFullYear(),this.oc_month2=t.getMonth()+1,this.oc_date2=t.getDate(),this.updateOCRange2()}updateOCRange2(){this.expiryString2=this.mapService.getExpiry(new Date(this.oc_year2,this.oc_month2-1,this.oc_date2),this.oc_instru),this.oc_strikes2=[];for(let e=this.oc_range_lower;e<=this.oc_range_higher;e+=this.oc_range_multiple)this.oc_strikes2.push({symbol:this.oc_instru+this.expiryString2+e,strike:e,ltpCE:0,ltpPE:0});if(!f.isSimulatedStrategy){let e=[];this.oc_strikes2.forEach(t=>{e.push(this.mapService.getSubscriptionObject(t.strike+"CE",this.oc_instru,new Date(this.oc_year2,this.oc_month2-1,this.oc_date2).toDateString())),e.push(this.mapService.getSubscriptionObject(t.strike+"PE",this.oc_instru,new Date(this.oc_year2,this.oc_month2-1,this.oc_date2).toDateString()))}),console.log("updateOCRange2 Subscriptions: "+e),this.appService.sendSubscriptions(e)}}updateOCValues2(){return this.oc_strikes2&&this.oc_strikes2.length>0&&this.oc_strikes2.forEach(e=>{e.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year2,this.oc_month2-1,this.oc_date2),e.strike,"CE"),e.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year2,this.oc_month2-1,this.oc_date2),e.strike,"PE"),e.isSpot=this.isSpotStrike(e.strike)}),this.oc_strikes2}updateBflyMonitorStrikes(e){if(this.oc_strikes&&this.oc_strikes.length>0){let t=this.oc_instru;this.oc_instru==="NIFTY"&&(t="NIFTY50");let i=this.mapService.getScripLTP(null,null,t,null),r=Math.round(i/this.oc_range_multiple)*this.oc_range_multiple,s=r+this.oc_range_multiple*3,o=r-this.oc_range_multiple*3;this.bfly_monitor=[];for(let a=o;a<r;a+=this.oc_range_multiple){let l=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),a,"PE"),c=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),a-this.oc_range_multiple,"PE"),u=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),a+this.oc_range_multiple,"PE"),d=l*e+c*-e/2+u*-e/2,h=Math.round(d),p=Math.round(this.oc_range_multiple*-e/2-h);this.bfly_monitor.push({symbol:this.oc_instru+this.expiryString+a,strike:a,scrip:a+"PE",maxProfit:p,maxLoss:h});let g=l*e+c*-e,A=Math.round(g),v=Math.round(this.oc_range_multiple*e-A)}for(let a=r+this.oc_range_multiple;a<=s;a+=this.oc_range_multiple){let l=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),a,"CE"),c=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),a+this.oc_range_multiple,"CE"),u=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),a-this.oc_range_multiple,"CE"),d=l*e+c*-e/2+u*-e/2,h=Math.round(d),p=Math.round(this.oc_range_multiple*-e/2-h);this.bfly_monitor.push({symbol:this.oc_instru+this.expiryString+a,strike:a,scrip:a+"CE",maxProfit:p,maxLoss:h});let g=l*e+c*-e,A=Math.round(g),v=Math.round(this.oc_range_multiple*e-A)}}return this.bfly_monitor}updateDSMonitorStrikes(e){if(this.oc_strikes&&this.oc_strikes.length>0){let t=this.oc_instru;this.oc_instru==="NIFTY"&&(t="NIFTY50");let i=this.mapService.getScripLTP(null,null,t,null),r=Math.round(i/this.oc_range_multiple)*this.oc_range_multiple,s=r+this.oc_range_multiple*3,o=r-this.oc_range_multiple*3;this.ds_monitor=[];for(let a=o;a<r;a+=this.oc_range_multiple){let l=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),a,"PE"),c=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),a-this.oc_range_multiple,"PE"),u=l*e+c*-e,d=Math.round(u),h=Math.round(this.oc_range_multiple*e-d);this.ds_monitor.push({symbol:this.oc_instru+this.expiryString+a,strike:a,scrip:a+"PE",maxProfit:-h,maxLoss:-d})}for(let a=r+this.oc_range_multiple;a<=s;a+=this.oc_range_multiple){let l=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),a,"CE"),c=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),a+this.oc_range_multiple,"CE"),u=l*e+c*-e,d=Math.round(u),h=Math.round(this.oc_range_multiple*e-d);this.ds_monitor.push({symbol:this.oc_instru+this.expiryString+a,strike:a,scrip:a+"CE",maxProfit:-h,maxLoss:-d})}}return this.ds_monitor}getQtyOfStrikeInStrategy(e){let t=f.curr_positions_trades;if(t){for(let i=0;i<t.length;i++){let r=t[i],s=new Date(this.oc_year,this.oc_month-1,this.oc_date),o=new Date(r.expiry);if(s.getDate()===o.getDate()&&r.scrip===e&&r.exit===0)return r.qty}return null}}getCostOfStrikeInStrategy(e){let t=f.curr_positions_trades;if(t){for(let i=0;i<t.length;i++){let r=t[i],s=new Date(this.oc_year,this.oc_month-1,this.oc_date),o=new Date(r.expiry);if(s.getDate()===o.getDate()&&r.scrip===e&&r.exit===0)return r.entry}return null}}isStrikeInCurrStrategy(e){let t=f.curr_positions_trades;if(t)for(let i=0;i<t.length;i++){let r=t[i],s=new Date(this.oc_year,this.oc_month-1,this.oc_date),o=new Date(r.expiry);if(r.exit===0&&s.getDate()===o.getDate()&&r.scrip===e)return!0}return!1}isChartStrikeInCurrStrategy(e){let t=f.curr_positions_trades;if(t){for(let i=0;i<t.length;i++){let r=t[i];if(r.exit===0&&r.scrip===e)return r.qty}return""}}fetchChartData(e,t,i){let r=this.mapService.getSubscriptionObject(e,t,i),s=this.zerodhaService.findStrikeInMasters(r),o=this.appService.getLastWorkingDay(new Date),a=""+o.getFullYear()+"-"+("0"+(o.getMonth()+1)).slice(-2)+"-"+("0"+o.getDate()).slice(-2),l=new Date,c=""+l.getFullYear()+"-"+("0"+(l.getMonth()+1)).slice(-2)+"-"+("0"+l.getDate()).slice(-2);if(s&&s.token){let d={responseType:"json",headers:new Fe({authorization:f.broker_auth})},h="https://kite.zerodha.com/oms/instruments/historical/"+s.token+"/minute?user_id="+f.zerodhaUserId+"&oi=1&from="+a+"&to="+c;return this.http.get(h,d)}return null}updateSpotStrike(){let e="";this.oc_instru==="NIFTY"?e="NIFTY50":this.oc_instru==="BANKNIFTY"?e="BANKNIFTY":this.oc_instru==="FINNIFTY"?e="FINNIFTY":this.oc_instru==="MIDCPNIFTY"?e="MIDCPNIFTY":this.oc_instru==="SENSEX"?e="SENSEX":this.oc_instru==="BANKEX"?e="BANKEX":this.oc_instru==="USDINR"&&(e="USDINR");let t=this.mapService.getScripLTP(null,null,e,null),i=Math.round(t/this.oc_range_multiple)*this.oc_range_multiple;this.ocSpotStrike=i}isSpotStrike(e){return e===this.ocSpotStrike}showOILimit(e,t){return!!(e==="NIFTY"&&f.nfCEOILimit&&f.nfPEOILimit&&(t>f.nfCEOILimit||t<f.nfPEOILimit)||e==="BANKNIFTY"&&f.bnfCEOILimit&&f.bnfPEOILimit&&(t>f.bnfCEOILimit||t<f.bnfPEOILimit))}static \u0275fac=function(t){return new(t||n)(oe(Tt),oe(qe),oe(xr),oe(Er),oe(fn),oe(En))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};function yt(n){var e=n.width,t=n.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(t<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:t}}function Pr(n,e){return n.width===e.width&&n.height===e.height}var MQ=function(){function n(e){var t=this;this._resolutionListener=function(){return t._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return n.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(n.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),n.prototype.subscribe=function(e){var t=this,i={next:e};return this._observers.push(i),{unsubscribe:function(){t._observers=t._observers.filter(function(r){return r!==i})}}},n.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},n.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},n.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},n.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(t){return t.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},n}();function vR(n){return new MQ(n)}var TQ=function(){function n(e,t,i){var r;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=yt({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=t??function(s){return s},this._allowResizeObserver=(r=i?.allowResizeObserver)!==null&&r!==void 0?r:!0,this._chooseAndInitObserver()}return n.prototype.dispose=function(){var e,t;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(t=this._devicePixelRatioObservable)===null||t===void 0||t.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(n.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bitmapSize",{get:function(){return yt({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),n.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=yt(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},n.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},n.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(t){return t!==e})},Object.defineProperty(n.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),n.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},n.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(t){return t!==e})},n.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},n.prototype._resizeBitmap=function(e){var t=this.bitmapSize;Pr(t,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(t,e))},n.prototype._emitBitmapSizeChanged=function(e,t){var i=this;this._bitmapSizeChangedListeners.forEach(function(r){return r.call(i,e,t)})},n.prototype._suggestNewBitmapSize=function(e){var t=this._suggestedBitmapSize,i=yt(this._transformBitmapSize(e,this._canvasElementClientSize)),r=Pr(this.bitmapSize,i)?null:i;t===null&&r===null||t!==null&&r!==null&&Pr(t,r)||(this._suggestedBitmapSize=r,this._emitSuggestedBitmapSizeChanged(t,r))},n.prototype._emitSuggestedBitmapSizeChanged=function(e,t){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(r){return r.call(i,e,t)})},n.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}IQ().then(function(t){return t?e._initResizeObserver():e._initDevicePixelRatioObservable()})},n.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var t=wR(this._canvasElement);if(t===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=vR(t),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},n.prototype._invalidateBitmapSize=function(){var e,t;if(this._canvasElement!==null){var i=wR(this._canvasElement);if(i!==null){var r=(t=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&t!==void 0?t:i.devicePixelRatio,s=this._canvasElement.getClientRects(),o=s[0]!==void 0?kQ(s[0],r):yt({width:this._canvasElementClientSize.width*r,height:this._canvasElementClientSize.height*r});this._suggestNewBitmapSize(o)}}},n.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(t){var i=t.find(function(o){return o.target===e._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var r=i.devicePixelContentBoxSize[0],s=yt({width:r.inlineSize,height:r.blockSize});e._suggestNewBitmapSize(s)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},n}();function yb(n,e){if(e.type==="device-pixel-content-box")return new TQ(n,e.transform,e.options);throw new Error("Unsupported binding target")}function wR(n){return n.ownerDocument.defaultView}function IQ(){return new Promise(function(n){var e=new ResizeObserver(function(t){n(t.every(function(i){return"devicePixelContentBoxSize"in i})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function kQ(n,e){return yt({width:Math.round(n.left*e+n.width*e)-Math.round(n.left*e),height:Math.round(n.top*e+n.height*e)-Math.round(n.top*e)})}var bR=function(){function n(e,t,i){if(t.width===0||t.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=t,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=e}return n.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},n.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(n.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),n}();function ds(n,e){var t=n.canvasElementClientSize;if(t.width===0||t.height===0)return null;var i=n.bitmapSize;if(i.width===0||i.height===0)return null;var r=n.canvasElement.getContext("2d",e);return r===null?null:new bR(r,t,i)}var d3={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},SR,Sh;function Ic(n,e){let t={0:[],1:[n.lineWidth,n.lineWidth],2:[2*n.lineWidth,2*n.lineWidth],3:[6*n.lineWidth,6*n.lineWidth],4:[n.lineWidth,4*n.lineWidth]}[e];n.setLineDash(t)}function h3(n,e,t,i){n.beginPath();let r=n.lineWidth%2?.5:0;n.moveTo(t,e+r),n.lineTo(i,e+r),n.stroke()}function qn(n,e){if(!n)throw new Error("Assertion failed"+(e?": "+e:""))}function ni(n){if(n===void 0)throw new Error("Value is undefined");return n}function ce(n){if(n===null)throw new Error("Value is null");return n}function ba(n){return ce(ni(n))}(function(n){n[n.Simple=0]="Simple",n[n.WithSteps=1]="WithSteps",n[n.Curved=2]="Curved"})(SR||(SR={})),function(n){n[n.Solid=0]="Solid",n[n.Dotted=1]="Dotted",n[n.Dashed=2]="Dashed",n[n.LargeDashed=3]="LargeDashed",n[n.SparseDotted=4]="SparseDotted"}(Sh||(Sh={}));var Wt=class{constructor(){this.t=[]}i(e,t,i){let r={h:e,l:t,o:i===!0};this.t.push(r)}_(e){let t=this.t.findIndex(i=>e===i.h);t>-1&&this.t.splice(t,1)}u(e){this.t=this.t.filter(t=>t.l!==e)}p(e,t,i){let r=[...this.t];this.t=this.t.filter(s=>!s.o),r.forEach(s=>s.h(e,t,i))}v(){return this.t.length>0}m(){this.t=[]}};function pi(n,...e){for(let t of e)for(let i in t)t[i]!==void 0&&Object.prototype.hasOwnProperty.call(t,i)&&!["__proto__","constructor","prototype"].includes(i)&&(typeof t[i]!="object"||n[i]===void 0||Array.isArray(t[i])?n[i]=t[i]:pi(n[i],t[i]));return n}function Sa(n){return typeof n=="number"&&isFinite(n)}function Ch(n){return typeof n=="number"&&n%1==0}function Th(n){return typeof n=="string"}function om(n){return typeof n=="boolean"}function hs(n){let e=n;if(!e||typeof e!="object")return e;let t,i,r;for(i in t=Array.isArray(e)?[]:{},e)e.hasOwnProperty(i)&&(r=e[i],t[i]=r&&typeof r=="object"?hs(r):r);return t}function PQ(n){return n!==null}function xh(n){return n===null?void 0:n}var p3="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Dh(n,e,t){return e===void 0&&(e=p3),`${t=t!==void 0?`${t} `:""}${n}px ${e}`}var Fb=class{constructor(e){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,I:0,B:0,A:0,L:0},this.O=e}N(){let e=this.M,t=this.W(),i=this.F();return e.P===t&&e.T===i||(e.P=t,e.T=i,e.k=Dh(t,i),e.A=2.5/12*t,e.V=e.A,e.I=t/12*e.C,e.B=t/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}W(){return this.O.N().layout.fontSize}F(){return this.O.N().layout.fontFamily}};function vb(n){return n<0?0:n>255?255:Math.round(n)||0}function CR(n){return .199*n[0]+.687*n[1]+.114*n[2]}var Lb=class{constructor(e,t){this.q=new Map,this.Y=e,t&&(this.q=t)}j(e,t){if(e==="transparent")return e;let i=this.Z(e),r=i[3];return`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${t*r})`}K(e){let t=this.Z(e);return{X:`rgb(${t[0]}, ${t[1]}, ${t[2]})`,G:CR(t)>160?"black":"white"}}J(e){return CR(this.Z(e))}tt(e,t,i){let[r,s,o,a]=this.Z(e),[l,c,u,d]=this.Z(t),h=[vb(r+i*(l-r)),vb(s+i*(c-s)),vb(o+i*(u-o)),(p=a+i*(d-a),p<=0||p>1?Math.min(Math.max(p,0),1):Math.round(1e4*p)/1e4)];var p;return`rgba(${h[0]}, ${h[1]}, ${h[2]}, ${h[3]})`}Z(e){let t=this.q.get(e);if(t)return t;let i=function(o){let a=document.createElement("div");a.style.display="none",document.body.appendChild(a),a.style.color=o;let l=window.getComputedStyle(a).color;return document.body.removeChild(a),l}(e),r=i.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!r){if(this.Y.length)for(let o of this.Y){let a=o(e);if(a)return this.q.set(e,a),a}throw new Error(`Failed to parse color: ${e}`)}let s=[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),r[4]?parseFloat(r[4]):1];return this.q.set(e,s),s}},Vb=class{constructor(){this.it=[]}st(e){this.it=e}nt(e,t,i){this.it.forEach(r=>{r.nt(e,t,i)})}},Or=class{nt(e,t,i){e.useBitmapCoordinateSpace(r=>this.et(r,t,i))}},Bb=class extends Or{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:t,verticalPixelRatio:i}){if(this.rt===null||this.rt.lt===null)return;let r=this.rt.lt,s=this.rt,o=Math.max(1,Math.floor(t))%2/2,a=l=>{e.beginPath();for(let c=r.to-1;c>=r.from;--c){let u=s.ot[c],d=Math.round(u._t*t)+o,h=u.ut*i,p=l*i+o;e.moveTo(d,h),e.arc(d,h,p,0,2*Math.PI)}e.fill()};s.ct>0&&(e.fillStyle=s.dt,a(s.ft+s.ct)),e.fillStyle=s.vt,a(s.ft)}};function NQ(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}var OQ={from:0,to:1},qb=class{constructor(e,t,i){this.Mt=new Vb,this.bt=[],this.xt=[],this.St=!0,this.O=e,this.Ct=t,this.yt=i,this.Mt.st(this.bt)}Pt(e){this.kt(),this.St=!0}Tt(){return this.St&&(this.Rt(),this.St=!1),this.Mt}kt(){let e=this.yt.Dt();e.length!==this.bt.length&&(this.xt=e.map(NQ),this.bt=this.xt.map(t=>{let i=new Bb;return i.ht(t),i}),this.Mt.st(this.bt))}Rt(){let e=this.Ct.N().mode===2||!this.Ct.Vt(),t=this.yt.It(),i=this.Ct.Bt(),r=this.O.At();this.kt(),t.forEach((s,o)=>{let a=this.xt[o],l=s.Et(i),c=s.zt();!e&&l!==null&&s.Vt()&&c!==null?(a.vt=l.Lt,a.ft=l.ft,a.ct=l.Ot,a.ot[0].gt=l.gt,a.ot[0].ut=s.Wt().Nt(l.gt,c.Ft),a.dt=l.Ht??this.O.Ut(a.ot[0].ut/s.Wt().$t()),a.ot[0].wt=i,a.ot[0]._t=r.qt(i),a.lt=OQ):a.lt=null})}},jb=class extends Or{constructor(e){super(),this.Yt=e}et({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.Yt===null)return;let s=this.Yt.jt.Vt,o=this.Yt.Zt.Vt;if(!s&&!o)return;let a=Math.round(this.Yt._t*i),l=Math.round(this.Yt.ut*r);e.lineCap="butt",s&&a>=0&&(e.lineWidth=Math.floor(this.Yt.jt.ct*i),e.strokeStyle=this.Yt.jt.R,e.fillStyle=this.Yt.jt.R,Ic(e,this.Yt.jt.Kt),function(c,u,d,h){c.beginPath();let p=c.lineWidth%2?.5:0;c.moveTo(u+p,d),c.lineTo(u+p,h),c.stroke()}(e,a,0,t.height)),o&&l>=0&&(e.lineWidth=Math.floor(this.Yt.Zt.ct*r),e.strokeStyle=this.Yt.Zt.R,e.fillStyle=this.Yt.Zt.R,Ic(e,this.Yt.Zt.Kt),h3(e,l,0,t.width))}},Wb=class{constructor(e,t){this.St=!0,this.Xt={jt:{ct:1,Kt:0,R:"",Vt:!1},Zt:{ct:1,Kt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new jb(this.Xt),this.Jt=e,this.yt=t}Pt(){this.St=!0}Tt(e){return this.St&&(this.Rt(),this.St=!1),this.Gt}Rt(){let e=this.Jt.Vt(),t=this.yt.Qt().N().crosshair,i=this.Xt;if(t.mode===2)return i.Zt.Vt=!1,void(i.jt.Vt=!1);i.Zt.Vt=e&&this.Jt.ti(this.yt),i.jt.Vt=e&&this.Jt.ii(),i.Zt.ct=t.horzLine.width,i.Zt.Kt=t.horzLine.style,i.Zt.R=t.horzLine.color,i.jt.ct=t.vertLine.width,i.jt.Kt=t.vertLine.style,i.jt.R=t.vertLine.color,i._t=this.Jt.si(),i.ut=this.Jt.ni()}};function RQ(n,e,t,i,r,s){n.fillRect(e+s,t,i-2*s,s),n.fillRect(e+s,t+r-s,i-2*s,s),n.fillRect(e,t,s,r),n.fillRect(e+i-s,t,s,r)}function Om(n,e,t,i,r,s){n.save(),n.globalCompositeOperation="copy",n.fillStyle=s,n.fillRect(e,t,i,r),n.restore()}function xR(n,e,t,i,r,s){n.beginPath(),n.roundRect?n.roundRect(e,t,i,r,s):(n.lineTo(e+i-s[1],t),s[1]!==0&&n.arcTo(e+i,t,e+i,t+s[1],s[1]),n.lineTo(e+i,t+r-s[2]),s[2]!==0&&n.arcTo(e+i,t+r,e+i-s[2],t+r,s[2]),n.lineTo(e+s[3],t+r),s[3]!==0&&n.arcTo(e,t+r,e,t+r-s[3],s[3]),n.lineTo(e,t+s[0]),s[0]!==0&&n.arcTo(e,t,e+s[0],t,s[0]))}function DR(n,e,t,i,r,s,o=0,a=[0,0,0,0],l=""){if(n.save(),!o||!l||l===s)return xR(n,e,t,i,r,a),n.fillStyle=s,n.fill(),void n.restore();let c=o/2;var u;xR(n,e+c,t+c,i-o,r-o,(u=-c,a.map(d=>d===0?d:d+u))),s!=="transparent"&&(n.fillStyle=s,n.fill()),l!=="transparent"&&(n.lineWidth=o,n.strokeStyle=l,n.closePath(),n.stroke()),n.restore()}function f3(n,e,t,i,r,s,o){n.save(),n.globalCompositeOperation="copy";let a=n.createLinearGradient(0,0,0,r);a.addColorStop(0,s),a.addColorStop(1,o),n.fillStyle=a,n.fillRect(e,t,i,r),n.restore()}var mm=class{constructor(e,t){this.ht(e,t)}ht(e,t){this.Yt=e,this.ei=t}$t(e,t){return this.Yt.Vt?e.P+e.A+e.V:0}nt(e,t,i,r){if(!this.Yt.Vt||this.Yt.ri.length===0)return;let s=this.Yt.R,o=this.ei.X,a=e.useBitmapCoordinateSpace(l=>{let c=l.context;c.font=t.k;let u=this.hi(l,t,i,r),d=u.ai;return u.li?DR(c,d.oi,d._i,d.ui,d.ci,o,d.di,[d.ft,0,0,d.ft],o):DR(c,d.fi,d._i,d.ui,d.ci,o,d.di,[0,d.ft,d.ft,0],o),this.Yt.pi&&(c.fillStyle=s,c.fillRect(d.fi,d.mi,d.wi-d.fi,d.gi)),this.Yt.Mi&&(c.fillStyle=t.D,c.fillRect(u.li?d.bi-d.di:0,d._i,d.di,d.xi-d._i)),u});e.useMediaCoordinateSpace(({context:l})=>{let c=a.Si;l.font=t.k,l.textAlign=a.li?"right":"left",l.textBaseline="middle",l.fillStyle=s,l.fillText(this.Yt.ri,c.Ci,(c._i+c.xi)/2+c.yi)})}hi(e,t,i,r){let{context:s,bitmapSize:o,mediaSize:a,horizontalPixelRatio:l,verticalPixelRatio:c}=e,u=this.Yt.pi||!this.Yt.Pi?t.C:0,d=this.Yt.ki?t.S:0,h=t.A+this.ei.Ti,p=t.V+this.ei.Ri,g=t.I,A=t.B,v=this.Yt.ri,b=t.P,E=i.Di(s,v),O=Math.ceil(i.Vi(s,v)),T=b+h+p,k=t.S+g+A+O+u,D=Math.max(1,Math.floor(c)),M=Math.round(T*c);M%2!=D%2&&(M+=1);let N=d>0?Math.max(1,Math.floor(d*l)):0,L=Math.round(k*l),B=Math.round(u*l),H=this.ei.Ii??this.ei.Bi,Z=Math.round(H*c)-Math.floor(.5*c),re=Math.floor(Z+D/2-M/2),Q=re+M,G=r==="right",ae=G?a.width-d:d,ne=G?o.width-N:N,De,ue,le;return G?(De=ne-L,ue=ne-B,le=ae-u-g-d):(De=ne+L,ue=ne+B,le=ae+u+g),{li:G,ai:{_i:re,mi:Z,xi:Q,ui:L,ci:M,ft:2*l,di:N,oi:De,fi:ne,wi:ue,gi:D,bi:o.width},Si:{_i:re/c,xi:Q/c,Ci:le,yi:E}}}},kc=class{constructor(e){this.Ai={Bi:0,X:"#000",Ri:0,Ti:0},this.Ei={ri:"",Vt:!1,pi:!0,Pi:!1,Ht:"",R:"#FFF",Mi:!1,ki:!1},this.zi={ri:"",Vt:!1,pi:!1,Pi:!0,Ht:"",R:"#FFF",Mi:!0,ki:!0},this.St=!0,this.Li=new(e||mm)(this.Ei,this.Ai),this.Oi=new(e||mm)(this.zi,this.Ai)}ri(){return this.Ni(),this.Ei.ri}Bi(){return this.Ni(),this.Ai.Bi}Pt(){this.St=!0}$t(e,t=!1){return Math.max(this.Li.$t(e,t),this.Oi.$t(e,t))}Wi(){return this.Ai.Ii||0}Fi(e){this.Ai.Ii=e}Hi(){return this.Ni(),this.Ei.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ei.Vt}Tt(e){return this.Ni(),this.Ei.pi=this.Ei.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Li.ht(this.Ei,this.Ai),this.Oi.ht(this.zi,this.Ai),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ei,this.Ai),this.Oi.ht(this.zi,this.Ai),this.Oi}Ni(){this.St&&(this.Ei.pi=!0,this.zi.pi=!1,this.qi(this.Ei,this.zi,this.Ai))}},Ub=class extends kc{constructor(e,t,i){super(),this.Jt=e,this.Yi=t,this.ji=i}qi(e,t,i){if(e.Vt=!1,this.Jt.N().mode===2)return;let r=this.Jt.N().horzLine;if(!r.labelVisible)return;let s=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Zi()||s===null)return;let o=this.Yi.Ki().K(r.labelBackgroundColor);i.X=o.X,e.R=o.G;let a=2/12*this.Yi.P();i.Ti=a,i.Ri=a;let l=this.ji(this.Yi);i.Bi=l.Bi,e.ri=this.Yi.Xi(l.gt,s),e.Vt=!0}},FQ=/[1-9]/g,_m=class{constructor(){this.Yt=null}ht(e){this.Yt=e}nt(e,t){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;let i=e.useMediaCoordinateSpace(({context:h})=>(h.font=t.k,Math.round(t.Gi.Vi(h,ce(this.Yt).ri,FQ))));if(i<=0)return;let r=t.Ji,s=i+2*r,o=s/2,a=this.Yt.Qi,l=this.Yt.Bi,c=Math.floor(l-o)+.5;c<0?(l+=Math.abs(0-c),c=Math.floor(l-o)+.5):c+s>a&&(l-=Math.abs(a-(c+s)),c=Math.floor(l-o)+.5);let u=c+s,d=Math.ceil(0+t.S+t.C+t.A+t.P+t.V);e.useBitmapCoordinateSpace(({context:h,horizontalPixelRatio:p,verticalPixelRatio:g})=>{let A=ce(this.Yt);h.fillStyle=A.X;let v=Math.round(c*p),b=Math.round(0*g),E=Math.round(u*p),O=Math.round(d*g),T=Math.round(2*p);if(h.beginPath(),h.moveTo(v,b),h.lineTo(v,O-T),h.arcTo(v,O,v+T,O,T),h.lineTo(E-T,O),h.arcTo(E,O,E,O-T,T),h.lineTo(E,b),h.fill(),A.pi){let k=Math.round(A.Bi*p),D=b,M=Math.round((D+t.C)*g);h.fillStyle=A.R;let N=Math.max(1,Math.floor(p)),L=Math.floor(.5*p);h.fillRect(k-L,D,N,M-D)}}),e.useMediaCoordinateSpace(({context:h})=>{let p=ce(this.Yt),g=0+t.S+t.C+t.A+t.P/2;h.font=t.k,h.textAlign="left",h.textBaseline="middle",h.fillStyle=p.R;let A=t.Gi.Di(h,"Apr0");h.translate(c+r,g+A),h.fillText(p.ri,0,0)})}},zb=class{constructor(e,t,i){this.St=!0,this.Gt=new _m,this.Xt={Vt:!1,X:"#4c525e",R:"white",ri:"",Qi:0,Bi:NaN,pi:!0},this.Ct=e,this.ts=t,this.ji=i}Pt(){this.St=!0}Tt(){return this.St&&(this.Rt(),this.St=!1),this.Gt.ht(this.Xt),this.Gt}Rt(){let e=this.Xt;if(e.Vt=!1,this.Ct.N().mode===2)return;let t=this.Ct.N().vertLine;if(!t.labelVisible)return;let i=this.ts.At();if(i.Zi())return;e.Qi=i.Qi();let r=this.ji();if(r===null)return;e.Bi=r.Bi;let s=i.ss(this.Ct.Bt());e.ri=i.ns(ce(s)),e.Vt=!0;let o=this.ts.Ki().K(t.labelBackgroundColor);e.X=o.X,e.R=o.G,e.pi=i.N().ticksVisible}},Am=class{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(e){this.rs=e}Wt(){return this.es}_s(e){this.es=e}us(e){return[]}cs(){return[]}Vt(){return!0}},Ut;(function(n){n[n.Normal=0]="Normal",n[n.Magnet=1]="Magnet",n[n.Hidden=2]="Hidden",n[n.MagnetOHLC=3]="MagnetOHLC"})(Ut||(Ut={}));var Hb=class extends Am{constructor(e,t){super(),this.yt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.xs=NaN,this.Ss=NaN,this.Cs=NaN,this.ts=e,this.ys=t,this.Ps=((r,s)=>o=>{let a=s(),l=r();if(o===ce(this.yt).ks())return{gt:l,Bi:a};{let c=ce(o.zt());return{gt:o.Ts(a,c),Bi:a}}})(()=>this.ds,()=>this.xs);let i=((r,s)=>()=>{let o=this.ts.At().Rs(r()),a=s();return o&&Number.isFinite(a)?{wt:o,Bi:a}:null})(()=>this.fs,()=>this.si());this.Ds=new zb(this,e,i)}N(){return this.ys}Vs(e,t){this.Ss=e,this.Cs=t}Is(){this.Ss=NaN,this.Cs=NaN}Bs(){return this.Ss}As(){return this.Cs}Es(e,t,i){this.ws||(this.ws=!0),this.ps=!0,this.zs(e,t,i)}Bt(){return this.fs}si(){return this.bs}ni(){return this.xs}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.xs=NaN,this.yt=null,this.Is(),this.Ns()}Ws(e){let t=this.gs.get(e);t||(t=new Wb(this,e),this.gs.set(e,t));let i=this.Ms.get(e);return i||(i=new qb(this.ts,this,e),this.Ms.set(e,i)),[t,i]}ti(e){return e===this.yt&&this.ys.horzLine.visible}ii(){return this.ys.vertLine.visible}Fs(e,t){this.ps&&this.yt===e||this.vs.clear();let i=[];return this.yt===e&&i.push(this.Hs(this.vs,t,this.Ps)),i}cs(){return this.ps?[this.Ds]:[]}Us(){return this.yt}Ns(){this.ts.$s().forEach(e=>{this.gs.get(e)?.Pt(),this.Ms.get(e)?.Pt()}),this.vs.forEach(e=>e.Pt()),this.Ds.Pt()}qs(e){return e&&!e.ks().Zi()?e.ks():null}zs(e,t,i){this.Ys(e,t,i)&&this.Ns()}Ys(e,t,i){let r=this.bs,s=this.xs,o=this.ds,a=this.fs,l=this.yt,c=this.qs(i);this.fs=e,this.bs=isNaN(e)?NaN:this.ts.At().qt(e),this.yt=i;let u=c!==null?c.zt():null;return c!==null&&u!==null?(this.ds=t,this.xs=c.Nt(t,u)):(this.ds=NaN,this.xs=NaN),r!==this.bs||s!==this.xs||a!==this.fs||o!==this.ds||l!==this.yt}Os(){let e=this.ts.js().map(i=>i.Ks().Zs()).filter(PQ),t=e.length===0?null:Math.max(...e);this.fs=t!==null?t:NaN}Hs(e,t,i){let r=e.get(t);return r===void 0&&(r=new Ub(this,t,i),e.set(t,r)),r}};function Rm(n){return n==="left"||n==="right"}var Mn=class n{constructor(e){this.Xs=new Map,this.Gs=[],this.Js=e}Qs(e,t){let i=function(r,s){return r===void 0?s:{tn:Math.max(r.tn,s.tn),sn:r.sn||s.sn}}(this.Xs.get(e),t);this.Xs.set(e,i)}nn(){return this.Js}en(e){let t=this.Xs.get(e);return t===void 0?{tn:this.Js}:{tn:Math.max(this.Js,t.tn),sn:t.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(e){this.hn(),this.Gs=[{an:1,Ft:e}]}_n(e){this.un(),this.Gs.push({an:5,Ft:e})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(e){this.hn(),this.Gs.push({an:2,Ft:e})}fn(e){this.hn(),this.Gs.push({an:3,Ft:e})}pn(){return this.Gs}vn(e){for(let t of e.Gs)this.mn(t);this.Js=Math.max(this.Js,e.Js),e.Xs.forEach((t,i)=>{this.Qs(i,t)})}static wn(){return new n(2)}static gn(){return new n(3)}mn(e){switch(e.an){case 0:this.rn();break;case 1:this.ln(e.Ft);break;case 2:this.dn(e.Ft);break;case 3:this.fn(e.Ft);break;case 4:this.cn();break;case 5:this._n(e.Ft);break;case 6:this.un()}}un(){let e=this.Gs.findIndex(t=>t.an===5);e!==-1&&this.Gs.splice(e,1)}},ER=".";function ps(n,e){if(!Sa(n))return"n/a";if(!Ch(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?n.toString():("0000000000000000"+n.toString()).slice(-e)}var Pc=class{constructor(e,t){if(t||(t=1),Sa(e)&&Ch(e)||(e=100),e<0)throw new TypeError("invalid base");this.Yi=e,this.Mn=t,this.bn()}format(e){let t=e<0?"\u2212":"";return e=Math.abs(e),t+this.xn(e)}bn(){if(this.Sn=0,this.Yi>0&&this.Mn>0){let e=this.Yi;for(;e>1;)e/=10,this.Sn++}}xn(e){let t=this.Yi/this.Mn,i=Math.floor(e),r="",s=this.Sn!==void 0?this.Sn:NaN;if(t>1){let o=+(Math.round(e*t)-i*t).toFixed(this.Sn);o>=t&&(o-=t,i+=1),r=ER+ps(+o.toFixed(this.Sn)*this.Mn,s)}else i=Math.round(i*t)/t,s>0&&(r=ER+ps(0,s));return i.toFixed(0)+r}},ym=class extends Pc{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}},Yb=class{constructor(e){this.Cn=e}format(e){let t="";return e<0&&(t="-",e=-e),e<995?t+this.yn(e):e<999995?t+this.yn(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),t+this.yn(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),t+this.yn(e/1e9)+"B")}yn(e){let t,i=Math.pow(10,this.Cn);return t=(e=Math.round(e*i)/i)>=1e-15&&e<1?e.toFixed(this.Cn).replace(/\.?0+$/,""):String(e),t.replace(/(\.[1-9]*)0+$/,(r,s)=>s)}},LQ=/[2-9]/g,Ca=class{constructor(e=50){this.Pn=0,this.kn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=e}In(){this.Pn=0,this.Dn.clear(),this.kn=1,this.Tn=1,this.Rn={}}Vi(e,t,i){return this.Bn(e,t,i).width}Di(e,t,i){let r=this.Bn(e,t,i);return((r.actualBoundingBoxAscent||0)-(r.actualBoundingBoxDescent||0))/2}Bn(e,t,i){let r=i||LQ,s=String(t).replace(r,"0");if(this.Dn.has(s))return ni(this.Dn.get(s)).An;if(this.Pn===this.Vn){let a=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(a),this.Tn++,this.Pn--}e.save(),e.textBaseline="middle";let o=e.measureText(s);return e.restore(),o.width===0&&t.length||(this.Dn.set(s,{An:o,En:this.kn}),this.Rn[this.kn]=s,this.Pn++,this.kn++),o}},Gb=class{constructor(e){this.zn=null,this.M=null,this.Ln="right",this.On=e}Nn(e,t,i){this.zn=e,this.M=t,this.Ln=i}nt(e){this.M!==null&&this.zn!==null&&this.zn.nt(e,this.M,this.On,this.Ln)}},vm=class{constructor(e,t,i){this.Wn=e,this.On=new Ca(50),this.Fn=t,this.O=i,this.W=-1,this.Gt=new Gb(this.On)}Tt(){let e=this.O.Hn(this.Fn);if(e===null)return null;let t=e.Un(this.Fn)?e.$n():this.Fn.Wt();if(t===null)return null;let i=e.qn(t);if(i==="overlay")return null;let r=this.O.Yn();return r.P!==this.W&&(this.W=r.P,this.On.In()),this.Gt.Nn(this.Wn.$i(),r,i),this.Gt}},Kb=class extends Or{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}jn(e,t){if(!this.Yt?.Vt)return null;let{ut:i,ct:r,Zn:s}=this.Yt;return t>=i-r-7&&t<=i+r+7?{Kn:this.Yt,Zn:s}:null}et({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.Yt===null||this.Yt.Vt===!1)return;let s=Math.round(this.Yt.ut*r);s<0||s>t.height||(e.lineCap="butt",e.strokeStyle=this.Yt.R,e.lineWidth=Math.floor(this.Yt.ct*i),Ic(e,this.Yt.Kt),h3(e,s,0,t.width))}},Eh=class{constructor(e){this.Xn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Kt:0,Vt:!1},this.Gn=new Kb,this.St=!0,this.Jn=e,this.Qn=e.Qt(),this.Gn.ht(this.Xn)}Pt(){this.St=!0}Tt(){return this.Jn.Vt()?(this.St&&(this.te(),this.St=!1),this.Gn):null}},$b=class extends Eh{constructor(e){super(e)}te(){this.Xn.Vt=!1;let e=this.Jn.Wt(),t=e.ie().ie;if(t!==2&&t!==3)return;let i=this.Jn.N();if(!i.baseLineVisible||!this.Jn.Vt())return;let r=this.Jn.zt();r!==null&&(this.Xn.Vt=!0,this.Xn.ut=e.Nt(r.Ft,r.Ft),this.Xn.R=i.baseLineColor,this.Xn.ct=i.baseLineWidth,this.Xn.Kt=i.baseLineStyle)}},Zb=class extends Or{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}se(){return this.Yt}et({context:e,horizontalPixelRatio:t,verticalPixelRatio:i}){let r=this.Yt;if(r===null)return;let s=Math.max(1,Math.floor(t)),o=s%2/2,a=Math.round(r.ne.x*t)+o,l=r.ne.y*i;e.fillStyle=r.ee,e.beginPath();let c=Math.max(2,1.5*r.re)*t;e.arc(a,l,c,0,2*Math.PI,!1),e.fill(),e.fillStyle=r.he,e.beginPath(),e.arc(a,l,r.ft*t,0,2*Math.PI,!1),e.fill(),e.lineWidth=s,e.strokeStyle=r.ae,e.beginPath(),e.arc(a,l,r.ft*t+s/2,0,2*Math.PI,!1),e.stroke()}},VQ=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}],Xb=class{constructor(e){this.Gt=new Zb,this.St=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=e}Me(){this.we=this.me-1,this.Pt()}be(){if(this.Pt(),this.ge.N().lastPriceAnimation===2){let e=performance.now(),t=this.we-e;if(t>0)return void(t<650&&(this.we+=2600));this.me=e,this.we=e+2600}}Pt(){this.St=!0}xe(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}Se(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.St?(this.Rt(),this.St=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);let e=this.ge.Qt().At(),t=e.ye(),i=this.ge.zt();if(t===null||i===null)return;let r=this.ge.Pe(!0);if(r.ke||!t.Te(r.Re))return;let s={x:e.qt(r.Re),y:this.ge.Wt().Nt(r.gt,i.Ft)},o=r.R,a=this.ge.N().lineWidth,l=this.De(this.Ve(),o);this.Gt.ht({ee:o,re:a,he:l.he,ae:l.ae,ft:l.ft,ne:s})}Ce(){let e=this.Gt.se();if(e!==null){let t=this.De(this.Ve(),e.ee);e.he=t.he,e.ae=t.ae,e.ft=t.ft}}Ve(){return this.Se()?performance.now()-this.me:2599}Ie(e,t,i,r){let s=i+(r-i)*t;return this.ge.Qt().Ki().j(e,s)}De(e,t){let i=e%2600/2600,r;for(let c of VQ)if(i>=c.le&&i<=c.oe){r=c;break}qn(r!==void 0,"Last price animation internal logic error");let s=(i-r.le)/(r.oe-r.le);return{he:this.Ie(t,s,r.ce,r.de),ae:this.Ie(t,s,r.fe,r.pe),ft:(o=s,a=r._e,l=r.ue,a+(l-a)*o)};var o,a,l}},Qb=class extends Eh{constructor(e){super(e)}te(){let e=this.Xn;e.Vt=!1;let t=this.Jn.N();if(!t.priceLineVisible||!this.Jn.Vt())return;let i=this.Jn.Pe(t.priceLineSource===0);i.ke||(e.Vt=!0,e.ut=i.Bi,e.R=this.Jn.Be(i.R),e.ct=t.priceLineWidth,e.Kt=t.priceLineStyle)}},Jb=class extends kc{constructor(e){super(),this.Jt=e}qi(e,t,i){e.Vt=!1,t.Vt=!1;let r=this.Jt;if(!r.Vt())return;let s=r.N(),o=s.lastValueVisible,a=r.Ae()!=="",l=s.seriesLastValueMode===0,c=r.Pe(!1);if(c.ke)return;o&&(e.ri=this.Ee(c,o,l),e.Vt=e.ri.length!==0),(a||l)&&(t.ri=this.ze(c,o,a,l),t.Vt=t.ri.length>0);let u=r.Be(c.R),d=this.Jt.Qt().Ki().K(u);i.X=d.X,i.Bi=c.Bi,t.Ht=r.Qt().Ut(c.Bi/r.Wt().$t()),e.Ht=u,e.R=d.G,t.R=d.G}ze(e,t,i,r){let s="",o=this.Jt.Ae();return i&&o.length!==0&&(s+=`${o} `),t&&r&&(s+=this.Jt.Wt().Le()?e.Oe:e.Ne),s.trim()}Ee(e,t,i){return t?i?this.Jt.Wt().Le()?e.Ne:e.Oe:e.ri:""}};function MR(n,e,t,i){let r=Number.isFinite(e),s=Number.isFinite(t);return r&&s?n(e,t):r||s?r?e:t:i}var ki=class n{constructor(e,t){this.We=e,this.Fe=t}He(e){return e!==null&&this.We===e.We&&this.Fe===e.Fe}Ue(){return new n(this.We,this.Fe)}$e(){return this.We}qe(){return this.Fe}Ye(){return this.Fe-this.We}Zi(){return this.Fe===this.We||Number.isNaN(this.Fe)||Number.isNaN(this.We)}vn(e){return e===null?this:new n(MR(Math.min,this.$e(),e.$e(),-1/0),MR(Math.max,this.qe(),e.qe(),1/0))}je(e){if(!Sa(e)||this.Fe-this.We===0)return;let t=.5*(this.Fe+this.We),i=this.Fe-t,r=this.We-t;i*=e,r*=e,this.Fe=t+i,this.We=t+r}Ze(e){Sa(e)&&(this.Fe+=e,this.We+=e)}Ke(){return{minValue:this.We,maxValue:this.Fe}}static Xe(e){return e===null?null:new n(e.minValue,e.maxValue)}},wm=class n{constructor(e,t){this.Ge=e,this.Je=t||null}Qe(){return this.Ge}tr(){return this.Je}Ke(){return{priceRange:this.Ge===null?null:this.Ge.Ke(),margins:this.Je||void 0}}static Xe(e){return e===null?null:new n(ki.Xe(e.priceRange),e.margins)}},e2=class extends Eh{constructor(e,t){super(e),this.ir=t}te(){let e=this.Xn;e.Vt=!1;let t=this.ir.N();if(!this.Jn.Vt()||!t.lineVisible)return;let i=this.ir.sr();i!==null&&(e.Vt=!0,e.ut=i,e.R=t.color,e.ct=t.lineWidth,e.Kt=t.lineStyle,e.Zn=this.ir.N().id)}},t2=class extends kc{constructor(e,t){super(),this.ge=e,this.ir=t}qi(e,t,i){e.Vt=!1,t.Vt=!1;let r=this.ir.N(),s=r.axisLabelVisible,o=r.title!=="",a=this.ge;if(!s||!a.Vt())return;let l=this.ir.sr();if(l===null)return;o&&(t.ri=r.title,t.Vt=!0),t.Ht=a.Qt().Ut(l/a.Wt().$t()),e.ri=this.nr(r.price),e.Vt=!0;let c=this.ge.Qt().Ki().K(r.axisLabelColor||r.color);i.X=c.X;let u=r.axisLabelTextColor||c.G;e.R=u,t.R=u,i.Bi=l}nr(e){let t=this.ge.zt();return t===null?"":this.ge.Wt().Xi(e,t.Ft)}},n2=class{constructor(e,t){this.ge=e,this.ys=t,this.er=new e2(e,this),this.Wn=new t2(e,this),this.rr=new vm(this.Wn,e,e.Qt())}hr(e){pi(this.ys,e),this.Pt(),this.ge.Qt().ar()}N(){return this.ys}lr(){return this.er}_r(){return this.rr}ur(){return this.Wn}Pt(){this.er.Pt(),this.Wn.Pt()}sr(){let e=this.ge,t=e.Wt();if(e.Qt().At().Zi()||t.Zi())return null;let i=e.zt();return i===null?null:t.Nt(this.ys.price,i.Ft)}},i2=class extends Am{constructor(e){super(),this.ts=e}Qt(){return this.ts}},BQ={Bar:(n,e,t,i)=>{let r=e.upColor,s=e.downColor,o=ce(n(t,i)),a=ba(o.Ft[0])<=ba(o.Ft[3]);return{cr:o.R??(a?r:s)}},Candlestick:(n,e,t,i)=>{let r=e.upColor,s=e.downColor,o=e.borderUpColor,a=e.borderDownColor,l=e.wickUpColor,c=e.wickDownColor,u=ce(n(t,i)),d=ba(u.Ft[0])<=ba(u.Ft[3]);return{cr:u.R??(d?r:s),dr:u.Ht??(d?o:a),pr:u.vr??(d?l:c)}},Custom:(n,e,t,i)=>({cr:ce(n(t,i)).R??e.color}),Area:(n,e,t,i)=>{let r=ce(n(t,i));return{cr:r.vt??e.lineColor,vt:r.vt??e.lineColor,mr:r.mr??e.topColor,wr:r.wr??e.bottomColor}},Baseline:(n,e,t,i)=>{let r=ce(n(t,i));return{cr:r.Ft[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,gr:r.gr??e.topLineColor,Mr:r.Mr??e.bottomLineColor,br:r.br??e.topFillColor1,Sr:r.Sr??e.topFillColor2,Cr:r.Cr??e.bottomFillColor1,yr:r.yr??e.bottomFillColor2}},Line:(n,e,t,i)=>{let r=ce(n(t,i));return{cr:r.R??e.color,vt:r.R??e.color}},Histogram:(n,e,t,i)=>({cr:ce(n(t,i)).R??e.color})},r2=class{constructor(e){this.Pr=(t,i)=>i!==void 0?i.Ft:this.ge.Ks().kr(t),this.ge=e,this.Tr=BQ[e.Rr()]}Dr(e,t){return this.Tr(this.Pr,this.ge.N(),e,t)}};function g3(n,e,t,i,r=0,s=e.length){let o=s-r;for(;0<o;){let a=o>>1,l=r+a;i(e[l],t)===n?(r=l+1,o-=a+1):o=a}return r}var Nc=g3.bind(null,!0),m3=g3.bind(null,!1),TR;(function(n){n[n.NearestLeft=-1]="NearestLeft",n[n.None=0]="None",n[n.NearestRight=1]="NearestRight"})(TR||(TR={}));var oo=30,s2=class{constructor(){this.Vr=[],this.Ir=new Map,this.Br=new Map,this.Ar=[]}Er(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Zs(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Zi(){return this.zr()===0}Te(e){return this.Nr(e,0)!==null}kr(e){return this.Wr(e)}Wr(e,t=0){let i=this.Nr(e,t);return i===null?null:Ie(ie({},this.Fr(i)),{Re:this.Or(i)})}Hr(){return this.Vr}Ur(e,t,i){if(this.Zi())return null;let r=null;for(let s of i)r=am(r,this.$r(e,t,s));return r}ht(e){this.Br.clear(),this.Ir.clear(),this.Vr=e,this.Ar=e.map(t=>t.Re)}qr(){return this.Ar}Or(e){return this.Vr[e].Re}Fr(e){return this.Vr[e]}Nr(e,t){let i=this.Yr(e);if(i===null&&t!==0)switch(t){case-1:return this.jr(e);case 1:return this.Zr(e);default:throw new TypeError("Unknown search mode")}return i}jr(e){let t=this.Kr(e);return t>0&&(t-=1),t!==this.Vr.length&&this.Or(t)<e?t:null}Zr(e){let t=this.Xr(e);return t!==this.Vr.length&&e<this.Or(t)?t:null}Yr(e){let t=this.Kr(e);return t===this.Vr.length||e<this.Vr[t].Re?null:t}Kr(e){return Nc(this.Vr,e,(t,i)=>t.Re<i)}Xr(e){return m3(this.Vr,e,(t,i)=>t.Re>i)}Gr(e,t,i){let r=null;for(let s=e;s<t;s++){let o=this.Vr[s].Ft[i];Number.isNaN(o)||(r===null?r={Jr:o,Qr:o}:(o<r.Jr&&(r.Jr=o),o>r.Qr&&(r.Qr=o)))}return r}$r(e,t,i){if(this.Zi())return null;let r=null,s=ce(this.Lr()),o=ce(this.Zs()),a=Math.max(e,s),l=Math.min(t,o),c=Math.ceil(a/oo)*oo,u=Math.max(c,Math.floor(l/oo)*oo);{let h=this.Kr(a),p=this.Xr(Math.min(l,c,t));r=am(r,this.Gr(h,p,i))}let d=this.Ir.get(i);d===void 0&&(d=new Map,this.Ir.set(i,d));for(let h=Math.max(c+1,a);h<u;h+=oo){let p=Math.floor(h/oo),g=d.get(p);if(g===void 0){let A=this.Kr(p*oo),v=this.Xr((p+1)*oo-1);g=this.Gr(A,v,i),d.set(p,g)}r=am(r,g)}{let h=this.Kr(u),p=this.Xr(l);r=am(r,this.Gr(h,p,i))}return r}};function am(n,e){return n===null?e:e===null?n:{Jr:Math.min(n.Jr,e.Jr),Qr:Math.max(n.Qr,e.Qr)}}var o2=class{constructor(e){this.th=e}nt(e,t,i){this.th.draw(e)}ih(e,t,i){this.th.drawBackground?.(e)}},a2=class{constructor(e){this.Dn=null,this.sh=e}Tt(){let e=this.sh.renderer();if(e===null)return null;if(this.Dn?.nh===e)return this.Dn.eh;let t=new o2(e);return this.Dn={nh:e,eh:t},t}rh(){return this.sh.zOrder?.()??"normal"}},bm=class{constructor(e){this.hh=null,this.ah=e}oh(){return this.ah}Ns(){this.ah.updateAllViews?.()}Ws(){let e=this.ah.paneViews?.()??[];if(this.hh?.nh===e)return this.hh.eh;let t=e.map(i=>new a2(i));return this.hh={nh:e,eh:t},t}jn(e,t){return this.ah.hitTest?.(e,t)??null}},qQ=class extends bm{us(){return[]}},l2=class{constructor(e){this.th=e}nt(e,t,i){this.th.draw(e)}ih(e,t,i){this.th.drawBackground?.(e)}},Sm=class{constructor(e){this.Dn=null,this.sh=e}Tt(){let e=this.sh.renderer();if(e===null)return null;if(this.Dn?.nh===e)return this.Dn.eh;let t=new l2(e);return this.Dn={nh:e,eh:t},t}rh(){return this.sh.zOrder?.()??"normal"}};function _3(n){return{ri:n.text(),Bi:n.coordinate(),Ii:n.fixedCoordinate?.(),R:n.textColor(),X:n.backColor(),Vt:n.visible?.()??!0,pi:n.tickVisible?.()??!0}}var c2=class{constructor(e,t){this.Gt=new _m,this._h=e,this.uh=t}Tt(){return this.Gt.ht(ie({Qi:this.uh.Qi()},_3(this._h))),this.Gt}},u2=class extends kc{constructor(e,t){super(),this._h=e,this.Yi=t}qi(e,t,i){let r=_3(this._h);i.X=r.X,e.R=r.R;let s=2/12*this.Yi.P();i.Ti=s,i.Ri=s,i.Bi=r.Bi,i.Ii=r.Ii,e.ri=r.ri,e.Vt=r.Vt,e.pi=r.pi}},d2=class extends bm{constructor(e,t){super(e),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=t}cs(){let e=this.ah.timeAxisViews?.()??[];if(this.dh?.nh===e)return this.dh.eh;let t=this.ge.Qt().At(),i=e.map(r=>new c2(r,t));return this.dh={nh:e,eh:i},i}Fs(){let e=this.ah.priceAxisViews?.()??[];if(this.fh?.nh===e)return this.fh.eh;let t=this.ge.Wt(),i=e.map(r=>new u2(r,t));return this.fh={nh:e,eh:i},i}wh(){let e=this.ah.priceAxisPaneViews?.()??[];if(this.ph?.nh===e)return this.ph.eh;let t=e.map(i=>new Sm(i));return this.ph={nh:e,eh:t},t}gh(){let e=this.ah.timeAxisPaneViews?.()??[];if(this.mh?.nh===e)return this.mh.eh;let t=e.map(i=>new Sm(i));return this.mh={nh:e,eh:t},t}Mh(e,t){return this.ah.autoscaleInfo?.(e,t)??null}};function wb(n,e,t,i){n.forEach(r=>{e(r).forEach(s=>{s.rh()===t&&i.push(s)})})}function bb(n){return n.Ws()}function jQ(n){return n.wh()}function WQ(n){return n.gh()}var UQ=["Area","Line","Baseline"],Oc=class extends i2{constructor(e,t,i,r,s){super(e),this.Yt=new s2,this.er=new Qb(this),this.bh=[],this.xh=new $b(this),this.Sh=null,this.Ch=null,this.yh=null,this.Ph=[],this.ys=i,this.kh=t;let o=new Jb(this);this.vs=[o],this.rr=new vm(o,this,e),UQ.includes(this.kh)&&(this.Sh=new Xb(this)),this.Th(),this.sh=r(this,this.Qt(),s)}m(){this.yh!==null&&clearTimeout(this.yh)}Be(e){return this.ys.priceLineColor||e}Pe(e){let t={ke:!0},i=this.Wt();if(this.Qt().At().Zi()||i.Zi()||this.Yt.Zi())return t;let r=this.Qt().At().ye(),s=this.zt();if(r===null||s===null)return t;let o,a;if(e){let d=this.Yt.Er();if(d===null)return t;o=d,a=d.Re}else{let d=this.Yt.Wr(r.bi(),-1);if(d===null||(o=this.Yt.kr(d.Re),o===null))return t;a=d.Re}let l=o.Ft[3],c=this.Rh().Dr(a,{Ft:o}),u=i.Nt(l,s.Ft);return{ke:!1,gt:l,ri:i.Xi(l,s.Ft),Oe:i.Dh(l),Ne:i.Vh(l,s.Ft),R:c.cr,Bi:u,Re:a}}Rh(){return this.Ch!==null||(this.Ch=new r2(this)),this.Ch}N(){return this.ys}hr(e){let t=e.priceScaleId;t!==void 0&&t!==this.ys.priceScaleId&&this.Qt().Ih(this,t),pi(this.ys,e),e.priceFormat!==void 0&&(this.Th(),this.Qt().Bh()),this.Qt().Ah(this),this.Qt().Eh(),this.sh.Pt("options")}ht(e,t){this.Yt.ht(e),this.sh.Pt("data"),this.Sh!==null&&(t&&t.zh?this.Sh.be():e.length===0&&this.Sh.Me());let i=this.Qt().Hn(this);this.Qt().Lh(i),this.Qt().Ah(this),this.Qt().Eh(),this.Qt().ar()}Oh(e){let t=new n2(this,e);return this.bh.push(t),this.Qt().Ah(this),t}Nh(e){let t=this.bh.indexOf(e);t!==-1&&this.bh.splice(t,1),this.Qt().Ah(this)}Wh(){return this.bh}Rr(){return this.kh}zt(){let e=this.Fh();return e===null?null:{Ft:e.Ft[3],Hh:e.wt}}Fh(){let e=this.Qt().At().ye();if(e===null)return null;let t=e.Uh();return this.Yt.Wr(t,1)}Ks(){return this.Yt}$h(e){let t=this.Yt.kr(e);return t===null?null:this.kh==="Bar"||this.kh==="Candlestick"||this.kh==="Custom"?{qh:t.Ft[0],Yh:t.Ft[1],jh:t.Ft[2],Zh:t.Ft[3]}:t.Ft[3]}Kh(e){let t=[];wb(this.Ph,bb,"top",t);let i=this.Sh;return i!==null&&i.Vt()&&(this.yh===null&&i.Se()&&(this.yh=setTimeout(()=>{this.yh=null,this.Qt().Xh()},0)),i.xe(),t.unshift(i)),t}Ws(){let e=[];this.Gh()||e.push(this.xh),e.push(this.sh,this.er);let t=this.bh.map(i=>i.lr());return e.push(...t),wb(this.Ph,bb,"normal",e),e}Jh(){return this.Qh(bb,"bottom")}ta(e){return this.Qh(jQ,e)}ia(e){return this.Qh(WQ,e)}sa(e,t){return this.Ph.map(i=>i.jn(e,t)).filter(i=>i!==null)}us(){return[this.rr,...this.bh.map(e=>e._r())]}Fs(e,t){if(t!==this.es&&!this.Gh())return[];let i=[...this.vs];for(let r of this.bh)i.push(r.ur());return this.Ph.forEach(r=>{i.push(...r.Fs())}),i}cs(){let e=[];return this.Ph.forEach(t=>{e.push(...t.cs())}),e}Mh(e,t){if(this.ys.autoscaleInfoProvider!==void 0){let i=this.ys.autoscaleInfoProvider(()=>{let r=this.na(e,t);return r===null?null:r.Ke()});return wm.Xe(i)}return this.na(e,t)}ea(){return this.ys.priceFormat.minMove}ra(){return this.ha}Ns(){this.sh.Pt();for(let e of this.vs)e.Pt();for(let e of this.bh)e.Pt();this.er.Pt(),this.xh.Pt(),this.Sh?.Pt(),this.Ph.forEach(e=>e.Ns())}Wt(){return ce(super.Wt())}Et(e){if(!((this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline")&&this.ys.crosshairMarkerVisible))return null;let t=this.Yt.kr(e);return t===null?null:{gt:t.Ft[3],ft:this.aa(),Ht:this.la(),Ot:this.oa(),Lt:this._a(e)}}Ae(){return this.ys.title}Vt(){return this.ys.visible}ua(e){this.Ph.push(new d2(e,this))}ca(e){this.Ph=this.Ph.filter(t=>t.oh()!==e)}da(){if(this.kh==="Custom")return e=>this.sh.fa(e)}pa(){if(this.kh==="Custom")return e=>this.sh.va(e)}ma(){return this.Yt.qr()}Gh(){return!Rm(this.Wt().wa())}na(e,t){if(!Ch(e)||!Ch(t)||this.Yt.Zi())return null;let i=this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline"||this.kh==="Histogram"?[3]:[2,1],r=this.Yt.Ur(e,t,i),s=r!==null?new ki(r.Jr,r.Qr):null,o=null;if(this.Rr()==="Histogram"){let a=this.ys.base,l=new ki(a,a);s=s!==null?s.vn(l):l}return this.Ph.forEach(a=>{let l=a.Mh(e,t);if(l?.priceRange){let c=new ki(l.priceRange.minValue,l.priceRange.maxValue);s=s!==null?s.vn(c):c}l?.margins&&(o=l.margins)}),new wm(s,o)}aa(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.ys.crosshairMarkerRadius}return 0}la(){switch(this.kh){case"Line":case"Area":case"Baseline":{let e=this.ys.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}oa(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.ys.crosshairMarkerBorderWidth}return 0}_a(e){switch(this.kh){case"Line":case"Area":case"Baseline":{let t=this.ys.crosshairMarkerBackgroundColor;if(t.length!==0)return t}}return this.Rh().Dr(e).cr}Th(){switch(this.ys.priceFormat.type){case"custom":this.ha={format:this.ys.priceFormat.formatter};break;case"volume":this.ha=new Yb(this.ys.priceFormat.precision);break;case"percent":this.ha=new ym(this.ys.priceFormat.precision);break;default:{let e=Math.pow(10,this.ys.priceFormat.precision);this.ha=new Pc(e,this.ys.priceFormat.minMove*e)}}this.es!==null&&this.es.ga()}Qh(e,t){let i=[];return wb(this.Ph,e,t,i),i}},zQ=[3],HQ=[0,1,2,3],h2=class{constructor(e){this.ys=e}Ma(e,t,i){let r=e;if(this.ys.mode===0)return r;let s=i.ks(),o=s.zt();if(o===null)return r;let a=s.Nt(e,o),l=i.ba().filter(u=>u instanceof Oc).reduce((u,d)=>{if(i.Un(d)||!d.Vt())return u;let h=d.Wt(),p=d.Ks();if(h.Zi()||!p.Te(t))return u;let g=p.kr(t);if(g===null)return u;let A=ba(d.zt()),v=this.ys.mode===3?HQ:zQ;return u.concat(v.map(b=>h.Nt(g.Ft[b],A.Ft)))},[]);if(l.length===0)return r;l.sort((u,d)=>Math.abs(u-a)-Math.abs(d-a));let c=l[0];return r=s.Ts(c,o),r}},p2=class extends Or{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}et({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.Yt===null)return;let s=Math.max(1,Math.floor(i));e.lineWidth=s,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{let o=ce(this.Yt);if(o.xa){e.strokeStyle=o.Sa,Ic(e,o.Ca),e.beginPath();for(let a of o.ya){let l=Math.round(a.Pa*i);e.moveTo(l,-s),e.lineTo(l,t.height+s)}e.stroke()}if(o.ka){e.strokeStyle=o.Ta,Ic(e,o.Ra),e.beginPath();for(let a of o.Da){let l=Math.round(a.Pa*r);e.moveTo(-s,l),e.lineTo(t.width+s,l)}e.stroke()}})}},f2=class{constructor(e){this.Gt=new p2,this.St=!0,this.yt=e}Pt(){this.St=!0}Tt(){if(this.St){let e=this.yt.Qt().N().grid,t={ka:e.horzLines.visible,xa:e.vertLines.visible,Ta:e.horzLines.color,Sa:e.vertLines.color,Ra:e.horzLines.style,Ca:e.vertLines.style,Da:this.yt.ks().Va(),ya:(this.yt.Qt().At().Va()||[]).map(i=>({Pa:i.coord}))};this.Gt.ht(t),this.St=!1}return this.Gt}},g2=class{constructor(e){this.sh=new f2(e)}lr(){return this.sh}},Sb={Ia:4,Ba:1e-4};function Mc(n,e){let t=100*(n-e)/e;return e<0?-t:t}function YQ(n,e){let t=Mc(n.$e(),e),i=Mc(n.qe(),e);return new ki(t,i)}function yh(n,e){let t=100*(n-e)/e+100;return e<0?-t:t}function GQ(n,e){let t=yh(n.$e(),e),i=yh(n.qe(),e);return new ki(t,i)}function Cm(n,e){let t=Math.abs(n);if(t<1e-15)return 0;let i=Math.log10(t+e.Ba)+e.Ia;return n<0?-i:i}function vh(n,e){let t=Math.abs(n);if(t<1e-15)return 0;let i=Math.pow(10,t-e.Ia)-e.Ba;return n<0?-i:i}function _h(n,e){if(n===null)return null;let t=Cm(n.$e(),e),i=Cm(n.qe(),e);return new ki(t,i)}function lm(n,e){if(n===null)return null;let t=vh(n.$e(),e),i=vh(n.qe(),e);return new ki(t,i)}function Cb(n){if(n===null)return Sb;let e=Math.abs(n.qe()-n.$e());if(e>=1||e<1e-15)return Sb;let t=Math.ceil(Math.abs(Math.log10(e))),i=Sb.Ia+t;return{Ia:i,Ba:1/Math.pow(10,i)}}function fm(n,e,t){return Math.min(Math.max(n,e),t)}function cm(n,e,t){return e-n<=t}function eS(n){let e=Math.ceil(n);return e%2==0?e-1:e}var wh=class{constructor(e,t){if(this.Aa=e,this.Ea=t,function(i){if(i<0)return!1;for(let r=i;r>1;r/=10)if(r%10!=0)return!1;return!0}(this.Aa))this.za=[2,2.5,2];else{this.za=[];for(let i=this.Aa;i!==1;){if(i%2==0)this.za.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.za.push(2,2.5),i/=5}if(this.za.length>100)throw new Error("something wrong with base")}}}La(e,t,i){let r=this.Aa===0?0:1/this.Aa,s=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-t)))),o=0,a=this.Ea[0];for(;;){let d=cm(s,r,1e-14)&&s>r+1e-14,h=cm(s,i*a,1e-14),p=cm(s,1,1e-14);if(!(d&&h&&p))break;s/=a,a=this.Ea[++o%this.Ea.length]}if(s<=r+1e-14&&(s=r),s=Math.max(1,s),this.za.length>0&&(l=s,c=1,u=1e-14,Math.abs(l-c)<u))for(o=0,a=this.za[0];cm(s,i*a,1e-14)&&s>r+1e-14;)s/=a,a=this.za[++o%this.za.length];var l,c,u;return s}},xm=class{constructor(e,t,i,r){this.Oa=[],this.Yi=e,this.Aa=t,this.Na=i,this.Wa=r}La(e,t){if(e<t)throw new Error("high < low");let i=this.Yi.$t(),r=(e-t)*this.Fa()/i,s=new wh(this.Aa,[2,2.5,2]),o=new wh(this.Aa,[2,2,2.5]),a=new wh(this.Aa,[2.5,2,2]),l=[];return l.push(s.La(e,t,r),o.La(e,t,r),a.La(e,t,r)),function(c){if(c.length<1)throw Error("array is empty");let u=c[0];for(let d=1;d<c.length;++d)c[d]<u&&(u=c[d]);return u}(l)}Ha(){let e=this.Yi,t=e.zt();if(t===null)return void(this.Oa=[]);let i=e.$t(),r=this.Na(i-1,t),s=this.Na(0,t),o=this.Yi.N().entireTextOnly?this.Ua()/2:0,a=o,l=i-1-o,c=Math.max(r,s),u=Math.min(r,s);if(c===u)return void(this.Oa=[]);let d=this.La(c,u),h=c%d;h+=h<0?d:0;let p=c>=u?1:-1,g=null,A=0;for(let v=c-h;v>u;v-=d){let b=this.Wa(v,t,!0);g!==null&&Math.abs(b-g)<this.Fa()||b<a||b>l||(A<this.Oa.length?(this.Oa[A].Pa=b,this.Oa[A].$a=e.qa(v)):this.Oa.push({Pa:b,$a:e.qa(v)}),A++,g=b,e.Ya()&&(d=this.La(v*p,u)))}this.Oa.length=A}Va(){return this.Oa}Ua(){return this.Yi.P()}Fa(){return Math.ceil(2.5*this.Ua())}};function A3(n){return n.slice().sort((e,t)=>ce(e.hs())-ce(t.hs()))}var IR;(function(n){n[n.Normal=0]="Normal",n[n.Logarithmic=1]="Logarithmic",n[n.Percentage=2]="Percentage",n[n.IndexedTo100=3]="IndexedTo100"})(IR||(IR={}));var kR=new ym,PR=new Pc(100,1),m2=class{constructor(e,t,i,r,s){this.ja=0,this.Za=null,this.Ge=null,this.Ka=null,this.Xa={Ga:!1,Ja:null},this.Qa=0,this.tl=0,this.il=new Wt,this.sl=new Wt,this.nl=[],this.el=null,this.rl=null,this.hl=null,this.al=null,this.ha=PR,this.ll=Cb(null),this.ol=e,this.ys=t,this._l=i,this.ul=r,this.cl=s,this.dl=new xm(this,100,this.fl.bind(this),this.pl.bind(this))}wa(){return this.ol}N(){return this.ys}hr(e){if(pi(this.ys,e),this.ga(),e.mode!==void 0&&this.vl({ie:e.mode}),e.scaleMargins!==void 0){let t=ni(e.scaleMargins.top),i=ni(e.scaleMargins.bottom);if(t<0||t>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${t}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(t+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${t+i}`);this.ml(),this.rl=null}}wl(){return this.ys.autoScale}Ya(){return this.ys.mode===1}Le(){return this.ys.mode===2}gl(){return this.ys.mode===3}ie(){return{sn:this.ys.autoScale,Ml:this.ys.invertScale,ie:this.ys.mode}}vl(e){let t=this.ie(),i=null;e.sn!==void 0&&(this.ys.autoScale=e.sn),e.ie!==void 0&&(this.ys.mode=e.ie,e.ie!==2&&e.ie!==3||(this.ys.autoScale=!0),this.Xa.Ga=!1),t.ie===1&&e.ie!==t.ie&&(function(s,o){if(s===null)return!1;let a=vh(s.$e(),o),l=vh(s.qe(),o);return isFinite(a)&&isFinite(l)}(this.Ge,this.ll)?(i=lm(this.Ge,this.ll),i!==null&&this.bl(i)):this.ys.autoScale=!0),e.ie===1&&e.ie!==t.ie&&(i=_h(this.Ge,this.ll),i!==null&&this.bl(i));let r=t.ie!==this.ys.mode;r&&(t.ie===2||this.Le())&&this.ga(),r&&(t.ie===3||this.gl())&&this.ga(),e.Ml!==void 0&&t.Ml!==e.Ml&&(this.ys.invertScale=e.Ml,this.xl()),this.sl.p(t,this.ie())}Sl(){return this.sl}P(){return this._l.fontSize}$t(){return this.ja}Cl(e){this.ja!==e&&(this.ja=e,this.ml(),this.rl=null)}yl(){if(this.Za)return this.Za;let e=this.$t()-this.Pl()-this.kl();return this.Za=e,e}Qe(){return this.Tl(),this.Ge}bl(e,t){let i=this.Ge;(t||i===null&&e!==null||i!==null&&!i.He(e))&&(this.rl=null,this.Ge=e)}Zi(){return this.Tl(),this.ja===0||!this.Ge||this.Ge.Zi()}Rl(e){return this.Ml()?e:this.$t()-1-e}Nt(e,t){return this.Le()?e=Mc(e,t):this.gl()&&(e=yh(e,t)),this.pl(e,t)}Dl(e,t,i){this.Tl();let r=this.kl(),s=ce(this.Qe()),o=s.$e(),a=s.qe(),l=this.yl()-1,c=this.Ml(),u=l/(a-o),d=i===void 0?0:i.from,h=i===void 0?e.length:i.to,p=this.Vl();for(let g=d;g<h;g++){let A=e[g],v=A.gt;if(isNaN(v))continue;let b=v;p!==null&&(b=p(A.gt,t));let E=r+u*(b-o),O=c?E:this.ja-1-E;A.ut=O}}Il(e,t,i){this.Tl();let r=this.kl(),s=ce(this.Qe()),o=s.$e(),a=s.qe(),l=this.yl()-1,c=this.Ml(),u=l/(a-o),d=i===void 0?0:i.from,h=i===void 0?e.length:i.to,p=this.Vl();for(let g=d;g<h;g++){let A=e[g],v=A.qh,b=A.Yh,E=A.jh,O=A.Zh;p!==null&&(v=p(A.qh,t),b=p(A.Yh,t),E=p(A.jh,t),O=p(A.Zh,t));let T=r+u*(v-o),k=c?T:this.ja-1-T;A.Bl=k,T=r+u*(b-o),k=c?T:this.ja-1-T,A.Al=k,T=r+u*(E-o),k=c?T:this.ja-1-T,A.El=k,T=r+u*(O-o),k=c?T:this.ja-1-T,A.zl=k}}Ts(e,t){let i=this.fl(e,t);return this.Ll(i,t)}Ll(e,t){let i=e;return this.Le()?i=function(r,s){return s<0&&(r=-r),r/100*s+s}(i,t):this.gl()&&(i=function(r,s){return r-=100,s<0&&(r=-r),r/100*s+s}(i,t)),i}ba(){return this.nl}Dt(){if(this.el)return this.el;let e=[];for(let t=0;t<this.nl.length;t++){let i=this.nl[t];i.hs()===null&&i.ls(t+1),e.push(i)}return e=A3(e),this.el=e,this.el}Ol(e){this.nl.indexOf(e)===-1&&(this.nl.push(e),this.ga(),this.Nl())}Wl(e){let t=this.nl.indexOf(e);if(t===-1)throw new Error("source is not attached to scale");this.nl.splice(t,1),this.nl.length===0&&(this.vl({sn:!0}),this.bl(null)),this.ga(),this.Nl()}zt(){let e=null;for(let t of this.nl){let i=t.zt();i!==null&&(e===null||i.Hh<e.Hh)&&(e=i)}return e===null?null:e.Ft}Ml(){return this.ys.invertScale}Va(){let e=this.zt()===null;if(this.rl!==null&&(e||this.rl.Fl===e))return this.rl.Va;this.dl.Ha();let t=this.dl.Va();return this.rl={Va:t,Fl:e},this.il.p(),t}Hl(){return this.il}Ul(e){this.Le()||this.gl()||this.hl===null&&this.Ka===null&&(this.Zi()||(this.hl=this.ja-e,this.Ka=ce(this.Qe()).Ue()))}$l(e){if(this.Le()||this.gl()||this.hl===null)return;this.vl({sn:!1}),(e=this.ja-e)<0&&(e=0);let t=(this.hl+.2*(this.ja-1))/(e+.2*(this.ja-1)),i=ce(this.Ka).Ue();t=Math.max(t,.1),i.je(t),this.bl(i)}ql(){this.Le()||this.gl()||(this.hl=null,this.Ka=null)}Yl(e){this.wl()||this.al===null&&this.Ka===null&&(this.Zi()||(this.al=e,this.Ka=ce(this.Qe()).Ue()))}jl(e){if(this.wl()||this.al===null)return;let t=ce(this.Qe()).Ye()/(this.yl()-1),i=e-this.al;this.Ml()&&(i*=-1);let r=i*t,s=ce(this.Ka).Ue();s.Ze(r),this.bl(s,!0),this.rl=null}Zl(){this.wl()||this.al!==null&&(this.al=null,this.Ka=null)}ra(){return this.ha||this.ga(),this.ha}Xi(e,t){switch(this.ys.mode){case 2:return this.Kl(Mc(e,t));case 3:return this.ra().format(yh(e,t));default:return this.nr(e)}}qa(e){switch(this.ys.mode){case 2:return this.Kl(e);case 3:return this.ra().format(e);default:return this.nr(e)}}Dh(e){return this.nr(e,ce(this.Xl()).ra())}Vh(e,t){return e=Mc(e,t),this.Kl(e,kR)}Gl(){return this.nl}Jl(e){this.Xa={Ja:e,Ga:!1}}Ns(){this.nl.forEach(e=>e.Ns())}ga(){this.rl=null;let e=this.Xl(),t=100;e!==null&&(t=Math.round(1/e.ea())),this.ha=PR,this.Le()?(this.ha=kR,t=100):this.gl()?(this.ha=new Pc(100,1),t=100):e!==null&&(this.ha=e.ra()),this.dl=new xm(this,t,this.fl.bind(this),this.pl.bind(this)),this.dl.Ha()}Nl(){this.el=null}Ki(){return this.cl}Xl(){return this.nl[0]||null}Pl(){return this.Ml()?this.ys.scaleMargins.bottom*this.$t()+this.tl:this.ys.scaleMargins.top*this.$t()+this.Qa}kl(){return this.Ml()?this.ys.scaleMargins.top*this.$t()+this.Qa:this.ys.scaleMargins.bottom*this.$t()+this.tl}Tl(){this.Xa.Ga||(this.Xa.Ga=!0,this.Ql())}ml(){this.Za=null}pl(e,t){if(this.Tl(),this.Zi())return 0;e=this.Ya()&&e?Cm(e,this.ll):e;let i=ce(this.Qe()),r=this.kl()+(this.yl()-1)*(e-i.$e())/i.Ye();return this.Rl(r)}fl(e,t){if(this.Tl(),this.Zi())return 0;let i=this.Rl(e),r=ce(this.Qe()),s=r.$e()+r.Ye()*((i-this.kl())/(this.yl()-1));return this.Ya()?vh(s,this.ll):s}xl(){this.rl=null,this.dl.Ha()}Ql(){let e=this.Xa.Ja;if(e===null)return;let t=null,i=this.Gl(),r=0,s=0;for(let l of i){if(!l.Vt())continue;let c=l.zt();if(c===null)continue;let u=l.Mh(e.Uh(),e.bi()),d=u&&u.Qe();if(d!==null){switch(this.ys.mode){case 1:d=_h(d,this.ll);break;case 2:d=YQ(d,c.Ft);break;case 3:d=GQ(d,c.Ft)}if(t=t===null?d:t.vn(ce(d)),u!==null){let h=u.tr();h!==null&&(r=Math.max(r,h.above),s=Math.max(s,h.below))}}}if(r===this.Qa&&s===this.tl||(this.Qa=r,this.tl=s,this.rl=null,this.ml()),t!==null){if(t.$e()===t.qe()){let l=this.Xl(),c=5*(l===null||this.Le()||this.gl()?1:l.ea());this.Ya()&&(t=lm(t,this.ll)),t=new ki(t.$e()-c,t.qe()+c),this.Ya()&&(t=_h(t,this.ll))}if(this.Ya()){let l=lm(t,this.ll),c=Cb(l);if(o=c,a=this.ll,o.Ia!==a.Ia||o.Ba!==a.Ba){let u=this.Ka!==null?lm(this.Ka,this.ll):null;this.ll=c,t=_h(l,c),u!==null&&(this.Ka=_h(u,c))}}this.bl(t)}else this.Ge===null&&(this.bl(new ki(-.5,.5)),this.ll=Cb(null));var o,a;this.Xa.Ga=!0}Vl(){return this.Le()?Mc:this.gl()?yh:this.Ya()?e=>Cm(e,this.ll):null}io(e,t,i){return t===void 0?(i===void 0&&(i=this.ra()),i.format(e)):t(e)}nr(e,t){return this.io(e,this.ul.priceFormatter,t)}Kl(e,t){return this.io(e,this.ul.percentageFormatter,t)}};function NR(n){return n instanceof Oc}var Dm=class{constructor(e,t){this.nl=[],this.so=new Map,this.ja=0,this.no=0,this.eo=1e3,this.el=null,this.ro=new Wt,this.Ph=[],this.uh=e,this.ts=t,this.ho=new g2(this);let i=t.N();this.ao=this.lo("left",i.leftPriceScale),this.oo=this.lo("right",i.rightPriceScale),this.ao.Sl().i(this._o.bind(this,this.ao),this),this.oo.Sl().i(this._o.bind(this,this.oo),this),this.uo(i)}uo(e){if(e.leftPriceScale&&this.ao.hr(e.leftPriceScale),e.rightPriceScale&&this.oo.hr(e.rightPriceScale),e.localization&&(this.ao.ga(),this.oo.ga()),e.overlayPriceScales){let t=Array.from(this.so.values());for(let i of t){let r=ce(i[0].Wt());r.hr(e.overlayPriceScales),e.localization&&r.ga()}}}co(e){switch(e){case"left":return this.ao;case"right":return this.oo}return this.so.has(e)?ni(this.so.get(e))[0].Wt():null}m(){this.Qt().do().u(this),this.ao.Sl().u(this),this.oo.Sl().u(this),this.nl.forEach(e=>{e.m&&e.m()}),this.Ph=this.Ph.filter(e=>{let t=e.oh();return t.detached&&t.detached(),!1}),this.ro.p()}fo(){return this.eo}po(e){this.eo=e}Qt(){return this.ts}Qi(){return this.no}$t(){return this.ja}vo(e){this.no=e,this.mo()}Cl(e){this.ja=e,this.ao.Cl(e),this.oo.Cl(e),this.nl.forEach(t=>{if(this.Un(t)){let i=t.Wt();i!==null&&i.Cl(e)}}),this.mo()}wo(){return this.nl.filter(NR)}ba(){return this.nl}Un(e){let t=e.Wt();return t===null||this.ao!==t&&this.oo!==t}Ol(e,t,i){let r=i!==void 0?i:this.bo().Mo+1;this.xo(e,t,r)}Wl(e){let t=this.nl.indexOf(e);qn(t!==-1,"removeDataSource: invalid data source"),this.nl.splice(t,1);let i=ce(e.Wt()).wa();if(this.so.has(i)){let s=ni(this.so.get(i)),o=s.indexOf(e);o!==-1&&(s.splice(o,1),s.length===0&&this.so.delete(i))}let r=e.Wt();r&&r.ba().indexOf(e)>=0&&r.Wl(e),r!==null&&(r.Nl(),this.So(r)),this.el=null}qn(e){return e===this.ao?"left":e===this.oo?"right":"overlay"}Co(){return this.ao}yo(){return this.oo}Po(e,t){e.Ul(t)}ko(e,t){e.$l(t),this.mo()}To(e){e.ql()}Ro(e,t){e.Yl(t)}Do(e,t){e.jl(t),this.mo()}Vo(e){e.Zl()}mo(){this.nl.forEach(e=>{e.Ns()})}ks(){let e=null;return this.ts.N().rightPriceScale.visible&&this.oo.ba().length!==0?e=this.oo:this.ts.N().leftPriceScale.visible&&this.ao.ba().length!==0?e=this.ao:this.nl.length!==0&&(e=this.nl[0].Wt()),e===null&&(e=this.oo),e}$n(){let e=null;return this.ts.N().rightPriceScale.visible?e=this.oo:this.ts.N().leftPriceScale.visible&&(e=this.ao),e}So(e){e!==null&&e.wl()&&this.Io(e)}Bo(e){let t=this.uh.ye();e.vl({sn:!0}),t!==null&&e.Jl(t),this.mo()}Ao(){this.Io(this.ao),this.Io(this.oo)}Eo(){this.So(this.ao),this.So(this.oo),this.nl.forEach(e=>{this.Un(e)&&this.So(e.Wt())}),this.mo(),this.ts.ar()}Dt(){return this.el===null&&(this.el=A3(this.nl)),this.el}It(){return this.Dt().filter(NR)}zo(){return this.ro}Lo(){return this.ho}ua(e){this.Ph.push(new qQ(e))}ca(e){this.Ph=this.Ph.filter(t=>t.oh()!==e),e.detached&&e.detached(),this.ts.ar()}Oo(){return this.Ph}sa(e,t){return this.Ph.map(i=>i.jn(e,t)).filter(i=>i!==null)}Io(e){let t=e.Gl();if(t&&t.length>0&&!this.uh.Zi()){let i=this.uh.ye();i!==null&&e.Jl(i)}e.Ns()}bo(){let e=this.Dt();if(e.length===0)return{No:0,Mo:0};let t=0,i=0;for(let r=0;r<e.length;r++){let s=e[r].hs();s!==null&&(s<t&&(t=s),s>i&&(i=s))}return{No:t,Mo:i}}xo(e,t,i){let r=this.co(t);if(r===null&&(r=this.lo(t,this.ts.N().overlayPriceScales)),this.nl.push(e),!Rm(t)){let s=this.so.get(t)||[];s.push(e),this.so.set(t,s)}r.Ol(e),e._s(r),e.ls(i),this.So(r),this.el=null}_o(e,t,i){t.ie!==i.ie&&this.Io(e)}lo(e,t){let i=ie({visible:!0,autoScale:!0},hs(t)),r=new m2(e,i,this.ts.N().layout,this.ts.N().localization,this.ts.Ki());return r.Cl(this.$t()),r}};function um(n){return{Wo:n.Wo,Fo:{Zn:n.Ho.externalId},Uo:n.Ho.cursorStyle}}function KQ(n,e,t,i){for(let r of n){let s=r.Tt(i);if(s!==null&&s.jn){let o=s.jn(e,t);if(o!==null)return{$o:r,Fo:o}}}return null}function $Q(n){return n.Ws!==void 0}function y3(n,e,t){let i=[n,...n.Dt()],r=function(s,o,a){let l,c;for(let h of s){let p=h.sa?.(o,a)??[];for(let g of p)u=g.zOrder,d=l?.zOrder,(!d||u==="top"&&d!=="top"||u==="normal"&&d==="bottom")&&(l=g,c=h)}var u,d;return l&&c?{Ho:l,Wo:c}:null}(i,e,t);if(r?.Ho.zOrder==="top")return um(r);for(let s of i){if(r&&r.Wo===s&&r.Ho.zOrder!=="bottom"&&!r.Ho.isBackground)return um(r);if($Q(s)){let o=KQ(s.Ws(n),e,t,n);if(o!==null)return{Wo:s,$o:o.$o,Fo:o.Fo}}if(r&&r.Wo===s&&r.Ho.zOrder!=="bottom"&&r.Ho.isBackground)return um(r)}return r?.Ho?um(r):null}var _2=class{constructor(e,t,i=50){this.Pn=0,this.kn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.qo=e,this.Yo=t,this.Vn=i}jo(e){let t=e.time,i=this.Yo.cacheKey(t),r=this.Dn.get(i);if(r!==void 0)return r.Zo;if(this.Pn===this.Vn){let o=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(ni(o)),this.Tn++,this.Pn--}let s=this.qo(e);return this.Dn.set(i,{Zo:s,En:this.kn}),this.Rn.set(this.kn,i),this.Pn++,this.kn++,s}},ao=class{constructor(e,t){qn(e<=t,"right should be >= left"),this.Ko=e,this.Xo=t}Uh(){return this.Ko}bi(){return this.Xo}Go(){return this.Xo-this.Ko+1}Te(e){return this.Ko<=e&&e<=this.Xo}He(e){return this.Ko===e.Uh()&&this.Xo===e.bi()}};function OR(n,e){return n===null||e===null?n===e:n.He(e)}var A2=class{constructor(){this.Jo=new Map,this.Dn=null,this.Qo=!1}t_(e){this.Qo=e,this.Dn=null}i_(e,t){this.s_(t),this.Dn=null;for(let i=t;i<e.length;++i){let r=e[i],s=this.Jo.get(r.timeWeight);s===void 0&&(s=[],this.Jo.set(r.timeWeight,s)),s.push({index:i,time:r.time,weight:r.timeWeight,originalTime:r.originalTime})}}n_(e,t,i,r,s){let o=Math.ceil(t/e);return this.Dn!==null&&this.Dn.e_===o&&s===this.Dn.r_&&i===this.Dn.h_||(this.Dn={r_:s,h_:i,Va:this.a_(o,i,r),e_:o}),this.Dn.Va}s_(e){if(e===0)return void this.Jo.clear();let t=[];this.Jo.forEach((i,r)=>{e<=i[0].index?t.push(r):i.splice(Nc(i,e,s=>s.index<e),1/0)});for(let i of t)this.Jo.delete(i)}a_(e,t,i){let r=[],s=o=>!t||i.has(o.index);for(let o of Array.from(this.Jo.keys()).sort((a,l)=>l-a)){if(!this.Jo.get(o))continue;let a=r;r=[];let l=a.length,c=0,u=ni(this.Jo.get(o)),d=u.length,h=1/0,p=-1/0;for(let g=0;g<d;g++){let A=u[g],v=A.index;for(;c<l;){let b=a[c],E=b.index;if(!(E<v&&s(b))){h=E;break}c++,r.push(b),p=E,h=1/0}if(h-v>=e&&v-p>=e&&s(A))r.push(A),p=v;else if(this.Qo)return a}for(;c<l;c++)s(a[c])&&r.push(a[c])}return r}},Tc=class n{constructor(e){this.l_=e}o_(){return this.l_===null?null:new ao(Math.floor(this.l_.Uh()),Math.ceil(this.l_.bi()))}__(){return this.l_}static u_(){return new n(null)}};function ZQ(n,e){return n.weight>e.weight?n:e}var y2=class{constructor(e,t,i,r){this.no=0,this.c_=null,this.d_=[],this.al=null,this.hl=null,this.f_=new A2,this.p_=new Map,this.v_=Tc.u_(),this.m_=!0,this.w_=new Wt,this.g_=new Wt,this.M_=new Wt,this.b_=null,this.x_=null,this.S_=new Map,this.C_=-1,this.y_=[],this.ys=t,this.ul=i,this.P_=t.rightOffset,this.k_=t.barSpacing,this.ts=e,this.Yo=r,this.T_(),this.f_.t_(t.uniformDistribution),this.R_()}N(){return this.ys}D_(e){pi(this.ul,e),this.V_(),this.T_()}hr(e,t){pi(this.ys,e),this.ys.fixLeftEdge&&this.I_(),this.ys.fixRightEdge&&this.B_(),e.barSpacing!==void 0&&this.ts.dn(e.barSpacing),e.rightOffset!==void 0&&this.ts.fn(e.rightOffset),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ts.dn(e.barSpacing??this.k_),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.ys.ignoreWhitespaceIndices&&this.R_(),this.V_(),this.T_(),this.M_.p()}Rs(e){return this.d_[e]?.time??null}ss(e){return this.d_[e]??null}A_(e,t){if(this.d_.length<1)return null;if(this.Yo.key(e)>this.Yo.key(this.d_[this.d_.length-1].time))return t?this.d_.length-1:null;let i=Nc(this.d_,this.Yo.key(e),(r,s)=>this.Yo.key(r.time)<s);return this.Yo.key(e)<this.Yo.key(this.d_[i].time)?t?i:null:i}Zi(){return this.no===0||this.d_.length===0||this.c_===null}E_(){return this.d_.length>0}ye(){return this.z_(),this.v_.o_()}L_(){return this.z_(),this.v_.__()}O_(){let e=this.ye();if(e===null)return null;let t={from:e.Uh(),to:e.bi()};return this.N_(t)}N_(e){let t=Math.round(e.from),i=Math.round(e.to),r=ce(this.W_()),s=ce(this.F_());return{from:ce(this.ss(Math.max(r,t))),to:ce(this.ss(Math.min(s,i)))}}H_(e){return{from:ce(this.A_(e.from,!0)),to:ce(this.A_(e.to,!0))}}Qi(){return this.no}vo(e){if(!isFinite(e)||e<=0||this.no===e)return;let t=this.L_(),i=this.no;if(this.no=e,this.m_=!0,this.ys.lockVisibleTimeRangeOnResize&&i!==0){let r=this.k_*e/i;this.k_=r}if(this.ys.fixLeftEdge&&t!==null&&t.Uh()<=0){let r=i-e;this.P_-=Math.round(r/this.k_)+1,this.m_=!0}this.U_(),this.q_()}qt(e){if(this.Zi()||!Ch(e))return 0;let t=this.Y_()+this.P_-e;return this.no-(t+.5)*this.k_-1}j_(e,t){let i=this.Y_(),r=t===void 0?0:t.from,s=t===void 0?e.length:t.to;for(let o=r;o<s;o++){let a=e[o].wt,l=i+this.P_-a,c=this.no-(l+.5)*this.k_-1;e[o]._t=c}}Z_(e,t){let i=Math.ceil(this.K_(e));return t&&this.ys.ignoreWhitespaceIndices&&!this.X_(i)?this.G_(i):i}fn(e){this.m_=!0,this.P_=e,this.q_(),this.ts.J_(),this.ts.ar()}Q_(){return this.k_}dn(e){this.tu(e),this.q_(),this.ts.J_(),this.ts.ar()}iu(){return this.P_}Va(){if(this.Zi())return null;if(this.x_!==null)return this.x_;let e=this.k_,t=5*(this.ts.N().layout.fontSize+4)/8*(this.ys.tickMarkMaxCharacterLength||8),i=Math.round(t/e),r=ce(this.ye()),s=Math.max(r.Uh(),r.Uh()-i),o=Math.max(r.bi(),r.bi()-i),a=this.f_.n_(e,t,this.ys.ignoreWhitespaceIndices,this.S_,this.C_),l=this.W_()+i,c=this.F_()-i,u=this.su(),d=this.ys.fixLeftEdge||u,h=this.ys.fixRightEdge||u,p=0;for(let g of a){if(!(s<=g.index&&g.index<=o))continue;let A;p<this.y_.length?(A=this.y_[p],A.coord=this.qt(g.index),A.label=this.nu(g),A.weight=g.weight):(A={needAlignCoordinate:!1,coord:this.qt(g.index),label:this.nu(g),weight:g.weight},this.y_.push(A)),this.k_>t/2&&!u?A.needAlignCoordinate=!1:A.needAlignCoordinate=d&&g.index<=l||h&&g.index>=c,p++}return this.y_.length=p,this.x_=this.y_,this.y_}eu(){this.m_=!0,this.dn(this.ys.barSpacing),this.fn(this.ys.rightOffset)}ru(e){this.m_=!0,this.c_=e,this.q_(),this.I_()}hu(e,t){let i=this.K_(e),r=this.Q_(),s=r+t*(r/10);this.dn(s),this.ys.rightBarStaysOnScroll||this.fn(this.iu()+(i-this.K_(e)))}Ul(e){this.al&&this.Zl(),this.hl===null&&this.b_===null&&(this.Zi()||(this.hl=e,this.au()))}$l(e){if(this.b_===null)return;let t=fm(this.no-e,0,this.no),i=fm(this.no-ce(this.hl),0,this.no);t!==0&&i!==0&&this.dn(this.b_.Q_*t/i)}ql(){this.hl!==null&&(this.hl=null,this.lu())}Yl(e){this.al===null&&this.b_===null&&(this.Zi()||(this.al=e,this.au()))}jl(e){if(this.al===null)return;let t=(this.al-e)/this.Q_();this.P_=ce(this.b_).iu+t,this.m_=!0,this.q_()}Zl(){this.al!==null&&(this.al=null,this.lu())}ou(){this._u(this.ys.rightOffset)}_u(e,t=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(t)||t<=0)throw new RangeError("animationDuration (optional) must be finite positive number");let i=this.P_,r=performance.now();this.ts._n({uu:s=>(s-r)/t>=1,cu:s=>{let o=(s-r)/t;return o>=1?e:i+(e-i)*o}})}Pt(e,t){this.m_=!0,this.d_=e,this.f_.i_(e,t),this.q_()}du(){return this.w_}fu(){return this.g_}pu(){return this.M_}Y_(){return this.c_||0}vu(e){let t=e.Go();this.tu(this.no/t),this.P_=e.bi()-this.Y_(),this.q_(),this.m_=!0,this.ts.J_(),this.ts.ar()}mu(){let e=this.W_(),t=this.F_();e!==null&&t!==null&&this.vu(new ao(e,t+this.ys.rightOffset))}wu(e){let t=new ao(e.from,e.to);this.vu(t)}ns(e){return this.ul.timeFormatter!==void 0?this.ul.timeFormatter(e.originalTime):this.Yo.formatHorzItem(e.time)}R_(){if(!this.ys.ignoreWhitespaceIndices)return;this.S_.clear();let e=this.ts.js();for(let t of e)for(let i of t.ma())this.S_.set(i,!0);this.C_++}su(){let e=this.ts.N().handleScroll,t=this.ts.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||t.axisDoubleClickReset.time||t.axisPressedMouseMove.time||t.mouseWheel||t.pinch)}W_(){return this.d_.length===0?null:0}F_(){return this.d_.length===0?null:this.d_.length-1}gu(e){return(this.no-1-e)/this.k_}K_(e){let t=this.gu(e),i=this.Y_()+this.P_-t;return Math.round(1e6*i)/1e6}tu(e){let t=this.k_;this.k_=e,this.U_(),t!==this.k_&&(this.m_=!0,this.Mu())}z_(){if(!this.m_)return;if(this.m_=!1,this.Zi())return void this.bu(Tc.u_());let e=this.Y_(),t=this.no/this.k_,i=this.P_+e,r=new ao(i-t+1,i);this.bu(new Tc(r))}U_(){let e=fm(this.k_,this.xu(),this.Su());this.k_!==e&&(this.k_=e,this.m_=!0)}Su(){return this.ys.maxBarSpacing>0?this.ys.maxBarSpacing:.5*this.no}xu(){return this.ys.fixLeftEdge&&this.ys.fixRightEdge&&this.d_.length!==0?this.no/this.d_.length:this.ys.minBarSpacing}q_(){let e=this.Cu();e!==null&&this.P_<e&&(this.P_=e,this.m_=!0);let t=this.yu();this.P_>t&&(this.P_=t,this.m_=!0)}Cu(){let e=this.W_(),t=this.c_;return e===null||t===null?null:e-t-1+(this.ys.fixLeftEdge?this.no/this.k_:Math.min(2,this.d_.length))}yu(){return this.ys.fixRightEdge?0:this.no/this.k_-Math.min(2,this.d_.length)}au(){this.b_={Q_:this.Q_(),iu:this.iu()}}lu(){this.b_=null}nu(e){let t=this.p_.get(e.weight);return t===void 0&&(t=new _2(i=>this.Pu(i),this.Yo),this.p_.set(e.weight,t)),t.jo(e)}Pu(e){return this.Yo.formatTickmark(e,this.ul)}bu(e){let t=this.v_;this.v_=e,OR(t.o_(),this.v_.o_())||this.w_.p(),OR(t.__(),this.v_.__())||this.g_.p(),this.Mu()}Mu(){this.x_=null}V_(){this.Mu(),this.p_.clear()}T_(){this.Yo.updateFormatter(this.ul)}I_(){if(!this.ys.fixLeftEdge)return;let e=this.W_();if(e===null)return;let t=this.ye();if(t===null)return;let i=t.Uh()-e;if(i<0){let r=this.P_-i-1;this.fn(r)}this.U_()}B_(){this.q_(),this.U_()}X_(e){return!this.ys.ignoreWhitespaceIndices||this.S_.get(e)||!1}G_(e){let t=function*(r){let s=Math.round(r),o=s<r,a=1;for(;;)o?(yield s+a,yield s-a):(yield s-a,yield s+a),a++}(e),i=this.F_();for(;i;){let r=t.next().value;if(this.S_.get(r))return r;if(r<0||r>i)break}return e}},RR,FR,LR,VR,BR;(function(n){n[n.OnTouchEnd=0]="OnTouchEnd",n[n.OnNextTap=1]="OnNextTap"})(RR||(RR={}));var v2=class{constructor(e,t,i){this.ku=[],this.Tu=[],this.no=0,this.Ru=null,this.Du=new Wt,this.Vu=new Wt,this.Iu=null,this.Bu=e,this.ys=t,this.Yo=i,this.cl=new Lb(this.ys.layout.colorParsers),this.Au=new Fb(this),this.uh=new y2(this,t.timeScale,this.ys.localization,i),this.Ct=new Hb(this,t.crosshair),this.Eu=new h2(t.crosshair),this.zu(0),this.ku[0].po(2e3),this.Lu=this.Ou(0),this.Nu=this.Ou(1)}Bh(){this.Wu(Mn.gn())}ar(){this.Wu(Mn.wn())}Xh(){this.Wu(new Mn(1))}Ah(e){let t=this.Fu(e);this.Wu(t)}Hu(){return this.Ru}Uu(e){if(this.Ru?.Wo===e?.Wo&&this.Ru?.Fo?.Zn===e?.Fo?.Zn)return;let t=this.Ru;this.Ru=e,t!==null&&this.Ah(t.Wo),e!==null&&e.Wo!==t?.Wo&&this.Ah(e.Wo)}N(){return this.ys}hr(e){pi(this.ys,e),this.ku.forEach(t=>t.uo(e)),e.timeScale!==void 0&&this.uh.hr(e.timeScale),e.localization!==void 0&&this.uh.D_(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Du.p(),this.Lu=this.Ou(0),this.Nu=this.Ou(1),this.Bh()}$u(e,t,i=0){let r=this.ku[i];if(r===void 0)return;if(e==="left")return pi(this.ys,{leftPriceScale:t}),r.uo({leftPriceScale:t}),this.Du.p(),void this.Bh();if(e==="right")return pi(this.ys,{rightPriceScale:t}),r.uo({rightPriceScale:t}),this.Du.p(),void this.Bh();let s=this.qu(e,i);s!==null&&(s.Wt.hr(t),this.Du.p())}qu(e,t){let i=this.ku[t];if(i===void 0)return null;let r=i.co(e);return r!==null?{Us:i,Wt:r}:null}At(){return this.uh}$s(){return this.ku}Yu(){return this.Ct}ju(){return this.Vu}Zu(e,t){e.Cl(t),this.J_()}vo(e){this.no=e,this.uh.vo(this.no),this.ku.forEach(t=>t.vo(e)),this.J_()}Ku(e){this.ku.length!==1&&(qn(e>=0&&e<this.ku.length,"Invalid pane index"),this.ku.splice(e,1),this.Bh())}Xu(e,t){if(this.ku.length<2)return;qn(e>=0&&e<this.ku.length,"Invalid pane index");let i=this.ku[e],r=this.ku.reduce((d,h)=>d+h.fo(),0),s=this.ku.reduce((d,h)=>d+h.$t(),0),o=s-30*(this.ku.length-1);t=Math.min(o,Math.max(30,t));let a=r/s,l=i.$t();i.po(t*a);let c=t-l,u=this.ku.length-1;for(let d of this.ku)if(d!==i){let h=Math.min(o,Math.max(30,d.$t()-c/u));c-=d.$t()-h,u-=1;let p=h*a;d.po(p)}this.Bh()}Gu(e,t){qn(e>=0&&e<this.ku.length&&t>=0&&t<this.ku.length,"Invalid pane index");let i=this.ku[e],r=this.ku[t];this.ku[e]=r,this.ku[t]=i,this.Bh()}Po(e,t,i){e.Po(t,i)}ko(e,t,i){e.ko(t,i),this.Eh(),this.Wu(this.Ju(e,2))}To(e,t){e.To(t),this.Wu(this.Ju(e,2))}Ro(e,t,i){t.wl()||e.Ro(t,i)}Do(e,t,i){t.wl()||(e.Do(t,i),this.Eh(),this.Wu(this.Ju(e,2)))}Vo(e,t){t.wl()||(e.Vo(t),this.Wu(this.Ju(e,2)))}Bo(e,t){e.Bo(t),this.Wu(this.Ju(e,2))}Qu(e){this.uh.Ul(e)}tc(e,t){let i=this.At();if(i.Zi()||t===0)return;let r=i.Qi();e=Math.max(1,Math.min(e,r)),i.hu(e,t),this.J_()}sc(e){this.nc(0),this.ec(e),this.rc()}hc(e){this.uh.$l(e),this.J_()}ac(){this.uh.ql(),this.ar()}nc(e){this.uh.Yl(e)}ec(e){this.uh.jl(e),this.J_()}rc(){this.uh.Zl(),this.ar()}js(){return this.Tu}lc(e,t,i,r,s){this.Ct.Vs(e,t);let o=NaN,a=this.uh.Z_(e,!0),l=this.uh.ye();l!==null&&(a=Math.min(Math.max(l.Uh(),a),l.bi()));let c=r.ks(),u=c.zt();if(u!==null&&(o=c.Ts(t,u)),o=this.Eu.Ma(o,a,r),this.Ct.Es(a,o,r),this.Xh(),!s){let d=y3(r,e,t);this.Uu(d&&{Wo:d.Wo,Fo:d.Fo,Uo:d.Uo||null}),this.Vu.p(this.Ct.Bt(),{x:e,y:t},i)}}oc(e,t,i){let r=i.ks(),s=r.zt(),o=r.Nt(e,ce(s)),a=this.uh.A_(t,!0),l=this.uh.qt(ce(a));this.lc(l,o,null,i,!0)}_c(e){this.Yu().Ls(),this.Xh(),e||this.Vu.p(null,null,null)}Eh(){let e=this.Ct.Us();if(e!==null){let t=this.Ct.Bs(),i=this.Ct.As();this.lc(t,i,null,e)}this.Ct.Ns()}uc(e,t,i){let r=this.uh.Rs(0);t!==void 0&&i!==void 0&&this.uh.Pt(t,i);let s=this.uh.Rs(0),o=this.uh.Y_(),a=this.uh.ye();if(a!==null&&r!==null&&s!==null){let l=a.Te(o),c=this.Yo.key(r)>this.Yo.key(s),u=e!==null&&e>o&&!c,d=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,h=l&&(i!==void 0||d)&&this.uh.N().shiftVisibleRangeOnNewBar;if(u&&!h){let p=e-o;this.uh.fn(this.uh.iu()-p)}}this.uh.ru(e)}Lh(e){e!==null&&e.Eo()}Hn(e){if(function(i){return i instanceof Dm}(e))return e;let t=this.ku.find(i=>i.Dt().includes(e));return t===void 0?null:t}J_(){this.ku.forEach(e=>e.Eo()),this.Eh()}m(){this.ku.forEach(e=>e.m()),this.ku.length=0,this.ys.localization.priceFormatter=void 0,this.ys.localization.percentageFormatter=void 0,this.ys.localization.timeFormatter=void 0}cc(){return this.Au}Yn(){return this.Au.N()}do(){return this.Du}dc(e,t){let i=this.zu(t);this.fc(e,i),this.Tu.push(e),this.Tu.length===1?this.Bh():this.ar()}vc(e){let t=this.Hn(e),i=this.Tu.indexOf(e);qn(i!==-1,"Series not found");let r=ce(t);this.Tu.splice(i,1),r.Wl(e),e.m&&e.m(),this.uh.R_(),this.mc(r)}Ih(e,t){let i=ce(this.Hn(e));i.Wl(e),i.Ol(e,t,ce(e.hs()))}mu(){let e=Mn.wn();e.rn(),this.Wu(e)}wc(e){let t=Mn.wn();t.ln(e),this.Wu(t)}cn(){let e=Mn.wn();e.cn(),this.Wu(e)}dn(e){let t=Mn.wn();t.dn(e),this.Wu(t)}fn(e){let t=Mn.wn();t.fn(e),this.Wu(t)}_n(e){let t=Mn.wn();t._n(e),this.Wu(t)}hn(){let e=Mn.wn();e.hn(),this.Wu(e)}gc(){return this.ys.rightPriceScale.visible?"right":"left"}Mc(e,t){if(qn(t>=0,"Index should be greater or equal to 0"),t===this.bc(e))return;let i=ce(this.Hn(e));i.Wl(e);let r=this.zu(t);this.fc(e,r),i.ba().length===0&&this.mc(i)}xc(){return this.Nu}$(){return this.Lu}Ut(e){let t=this.Nu,i=this.Lu;if(t===i)return t;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Iu===null||this.Iu.mr!==i||this.Iu.wr!==t)this.Iu={mr:i,wr:t,Sc:new Map};else{let s=this.Iu.Sc.get(e);if(s!==void 0)return s}let r=this.cl.tt(i,t,e/100);return this.Iu.Sc.set(e,r),r}Cc(e){return this.ku.indexOf(e)}Ki(){return this.cl}zu(e){if(qn(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.ku.length,e))<this.ku.length)return this.ku[e];let t=new Dm(this.uh,this);this.ku.push(t);let i=Mn.gn();return i.Qs(e,{tn:0,sn:!0}),this.Wu(i),t}bc(e){return this.ku.findIndex(t=>t.wo().includes(e))}Ju(e,t){let i=new Mn(t);if(e!==null){let r=this.ku.indexOf(e);i.Qs(r,{tn:t})}return i}Fu(e,t){return t===void 0&&(t=2),this.Ju(this.Hn(e),t)}Wu(e){this.Bu&&this.Bu(e),this.ku.forEach(t=>t.Lo().lr().Pt())}fc(e,t){let i=e.N().priceScaleId,r=i!==void 0?i:this.gc();t.Ol(e,r),Rm(r)||e.hr(e.N())}Ou(e){let t=this.ys.layout;return t.background.type==="gradient"?e===0?t.background.topColor:t.background.bottomColor:t.background.color}mc(e){e.ba().length===0&&this.ku.length>1&&(this.ku.splice(this.Cc(e),1),this.Bh())}};function w2(n){return!Sa(n)&&!Th(n)}function v3(n){return Sa(n)}(function(n){n[n.Disabled=0]="Disabled",n[n.Continuous=1]="Continuous",n[n.OnDataUpdate=2]="OnDataUpdate"})(FR||(FR={})),function(n){n[n.LastBar=0]="LastBar",n[n.LastVisible=1]="LastVisible"}(LR||(LR={})),function(n){n.Solid="solid",n.VerticalGradient="gradient"}(VR||(VR={})),function(n){n[n.Year=0]="Year",n[n.Month=1]="Month",n[n.DayOfMonth=2]="DayOfMonth",n[n.Time=3]="Time",n[n.TimeWithSeconds=4]="TimeWithSeconds"}(BR||(BR={}));var qR=n=>n.getUTCFullYear();function XQ(n,e,t){return e.replace(/yyyy/g,(i=>ps(qR(i),4))(n)).replace(/yy/g,(i=>ps(qR(i)%100,2))(n)).replace(/MMMM/g,((i,r)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(r,{month:"long"}))(n,t)).replace(/MMM/g,((i,r)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(r,{month:"short"}))(n,t)).replace(/MM/g,(i=>ps((r=>r.getUTCMonth()+1)(i),2))(n)).replace(/dd/g,(i=>ps((r=>r.getUTCDate())(i),2))(n))}var Em=class{constructor(e="yyyy-MM-dd",t="default"){this.yc=e,this.Pc=t}jo(e){return XQ(e,this.yc,this.Pc)}},b2=class{constructor(e){this.kc=e||"%h:%m:%s"}jo(e){return this.kc.replace("%h",ps(e.getUTCHours(),2)).replace("%m",ps(e.getUTCMinutes(),2)).replace("%s",ps(e.getUTCSeconds(),2))}},QQ={Tc:"yyyy-MM-dd",Rc:"%h:%m:%s",Dc:" ",Vc:"default"},S2=class{constructor(e={}){let t=ie(ie({},QQ),e);this.Ic=new Em(t.Tc,t.Vc),this.Bc=new b2(t.Rc),this.Ac=t.Dc}jo(e){return`${this.Ic.jo(e)}${this.Ac}${this.Bc.jo(e)}`}};function dm(n){return 60*n*60*1e3}function xb(n){return 60*n*1e3}var hm=[{Ec:(jR=1,1e3*jR),zc:10},{Ec:xb(1),zc:20},{Ec:xb(5),zc:21},{Ec:xb(30),zc:22},{Ec:dm(1),zc:30},{Ec:dm(3),zc:31},{Ec:dm(6),zc:32},{Ec:dm(12),zc:33}],jR;function WR(n,e){if(n.getUTCFullYear()!==e.getUTCFullYear())return 70;if(n.getUTCMonth()!==e.getUTCMonth())return 60;if(n.getUTCDate()!==e.getUTCDate())return 50;for(let t=hm.length-1;t>=0;--t)if(Math.floor(e.getTime()/hm[t].Ec)!==Math.floor(n.getTime()/hm[t].Ec))return hm[t].zc;return 0}function Db(n){let e=n;if(Th(n)&&(e=tS(n)),!w2(e))throw new Error("time must be of type BusinessDay");let t=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Lc:Math.round(t.getTime()/1e3),Oc:e}}function UR(n){if(!v3(n))throw new Error("time must be of type isUTCTimestamp");return{Lc:n}}function tS(n){let e=new Date(n);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${n}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function zR(n){Th(n.time)&&(n.time=tS(n.time))}var Mm=class{options(){return this.ys}setOptions(e){this.ys=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(t){t.forEach(zR)}(e):zR(e)}createConverterToInternalObj(e){return ce(function(t){return t.length===0?null:w2(t[0].time)||Th(t[0].time)?Db:UR}(e))}key(e){return typeof e=="object"&&"Lc"in e?e.Lc:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){let t=e;return t.Oc===void 0?new Date(1e3*t.Lc).getTime():new Date(Date.UTC(t.Oc.year,t.Oc.month-1,t.Oc.day)).getTime()}convertHorzItemToInternal(e){return v3(t=e)?UR(t):w2(t)?Db(t):Db(tS(t));var t}updateFormatter(e){if(!this.ys)return;let t=e.dateFormat;this.ys.timeScale.timeVisible?this.Nc=new S2({Tc:t,Rc:this.ys.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Dc:"   ",Vc:e.locale}):this.Nc=new Em(t,e.locale)}formatHorzItem(e){let t=e;return this.Nc.jo(new Date(1e3*t.Lc))}formatTickmark(e,t){let i=function(s,o,a){switch(s){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.ys.timeScale.timeVisible,this.ys.timeScale.secondsVisible),r=this.ys.timeScale;if(r.tickMarkFormatter!==void 0){let s=r.tickMarkFormatter(e.originalTime,i,t.locale);if(s!==null)return s}return function(s,o,a){let l={};switch(o){case 0:l.year="numeric";break;case 1:l.month="short";break;case 2:l.day="numeric";break;case 3:l.hour12=!1,l.hour="2-digit",l.minute="2-digit";break;case 4:l.hour12=!1,l.hour="2-digit",l.minute="2-digit",l.second="2-digit"}let c=s.Oc===void 0?new Date(1e3*s.Lc):new Date(Date.UTC(s.Oc.year,s.Oc.month-1,s.Oc.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(a,l)}(e.time,i,t.locale)}maxTickMarkWeight(e){let t=e.reduce(ZQ,e[0]).weight;return t>30&&t<50&&(t=30),t}fillWeightsForPoints(e,t){(function(i,r=0){if(i.length===0)return;let s=r===0?null:i[r-1].time.Lc,o=s!==null?new Date(1e3*s):null,a=0;for(let l=r;l<i.length;++l){let c=i[l],u=new Date(1e3*c.time.Lc);o!==null&&(c.timeWeight=WR(u,o)),a+=c.time.Lc-(s||c.time.Lc),s=c.time.Lc,o=u}if(r===0&&i.length>1){let l=Math.ceil(a/(i.length-1)),c=new Date(1e3*(i[0].time.Lc-l));i[0].timeWeight=WR(new Date(1e3*i[0].time.Lc),c)}})(e,t)}static Wc(e){return pi({localization:{dateFormat:"dd MMM 'yy"}},e??{})}},Rc=typeof window<"u";function HR(){return!!Rc&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Eb(){return!!Rc&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function C2(n){return n+n%2}function JQ(n){Rc&&window.chrome!==void 0&&n.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}var Fc=class{constructor(e,t,i){this.Fc=0,this.Hc=null,this.Uc={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.$c=0,this.qc=null,this.Yc={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.jc=null,this.Zc=!1,this.Kc=null,this.Xc=null,this.Gc=!1,this.Jc=!1,this.Qc=!1,this.td=null,this.sd=null,this.nd=null,this.ed=null,this.rd=null,this.hd=null,this.ad=null,this.ld=0,this.od=!1,this._d=!1,this.ud=!1,this.dd=0,this.fd=null,this.pd=!Eb(),this.vd=r=>{this.md(r)},this.wd=r=>{if(this.gd(r)){let s=this.Md(r);if(++this.$c,this.qc&&this.$c>1){let{bd:o}=this.xd(Nr(r),this.Yc);o<30&&!this.Qc&&this.Sd(s,this.yd.Cd),this.Pd()}}else{let s=this.Md(r);if(++this.Fc,this.Hc&&this.Fc>1){let{bd:o}=this.xd(Nr(r),this.Uc);o<5&&!this.Jc&&this.kd(s,this.yd.Td),this.Rd()}}},this.Dd=e,this.yd=t,this.ys=i,this.Vd()}m(){this.td!==null&&(this.td(),this.td=null),this.sd!==null&&(this.sd(),this.sd=null),this.ed!==null&&(this.ed(),this.ed=null),this.rd!==null&&(this.rd(),this.rd=null),this.hd!==null&&(this.hd(),this.hd=null),this.nd!==null&&(this.nd(),this.nd=null),this.Id(),this.Rd()}Bd(e){this.ed&&this.ed();let t=this.Ad.bind(this);if(this.ed=()=>{this.Dd.removeEventListener("mousemove",t)},this.Dd.addEventListener("mousemove",t),this.gd(e))return;let i=this.Md(e);this.kd(i,this.yd.Ed),this.pd=!0}Rd(){this.Hc!==null&&clearTimeout(this.Hc),this.Fc=0,this.Hc=null,this.Uc={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Pd(){this.qc!==null&&clearTimeout(this.qc),this.$c=0,this.qc=null,this.Yc={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Ad(e){if(this.ud||this.Xc!==null||this.gd(e))return;let t=this.Md(e);this.kd(t,this.yd.zd),this.pd=!0}Ld(e){let t=Mb(e.changedTouches,ce(this.fd));if(t===null||(this.dd=pm(e),this.ad!==null)||this._d)return;this.od=!0;let i=this.xd(Nr(t),ce(this.Xc)),{Od:r,Nd:s,bd:o}=i;if(this.Gc||!(o<5)){if(!this.Gc){let a=.5*r,l=s>=a&&!this.ys.Wd(),c=a>s&&!this.ys.Fd();l||c||(this._d=!0),this.Gc=!0,this.Qc=!0,this.Id(),this.Pd()}if(!this._d){let a=this.Md(e,t);this.Sd(a,this.yd.Hd),Ec(e)}}}Ud(e){if(e.button!==0)return;let t=this.xd(Nr(e),ce(this.Kc)),{bd:i}=t;if(i>=5&&(this.Jc=!0,this.Rd()),this.Jc){let r=this.Md(e);this.kd(r,this.yd.$d)}}xd(e,t){let i=Math.abs(t._t-e._t),r=Math.abs(t.ut-e.ut);return{Od:i,Nd:r,bd:i+r}}qd(e){let t=Mb(e.changedTouches,ce(this.fd));if(t===null&&e.touches.length===0&&(t=e.changedTouches[0]),t===null)return;this.fd=null,this.dd=pm(e),this.Id(),this.Xc=null,this.hd&&(this.hd(),this.hd=null);let i=this.Md(e,t);if(this.Sd(i,this.yd.Yd),++this.$c,this.qc&&this.$c>1){let{bd:r}=this.xd(Nr(t),this.Yc);r<30&&!this.Qc&&this.Sd(i,this.yd.Cd),this.Pd()}else this.Qc||(this.Sd(i,this.yd.jd),this.yd.jd&&Ec(e));this.$c===0&&Ec(e),e.touches.length===0&&this.Zc&&(this.Zc=!1,Ec(e))}md(e){if(e.button!==0)return;let t=this.Md(e);if(this.Kc=null,this.ud=!1,this.rd&&(this.rd(),this.rd=null),HR()&&this.Dd.ownerDocument.documentElement.removeEventListener("mouseleave",this.vd),!this.gd(e))if(this.kd(t,this.yd.Zd),++this.Fc,this.Hc&&this.Fc>1){let{bd:i}=this.xd(Nr(e),this.Uc);i<5&&!this.Jc&&this.kd(t,this.yd.Td),this.Rd()}else this.Jc||this.kd(t,this.yd.Kd)}Id(){this.jc!==null&&(clearTimeout(this.jc),this.jc=null)}Xd(e){if(this.fd!==null)return;let t=e.changedTouches[0];this.fd=t.identifier,this.dd=pm(e);let i=this.Dd.ownerDocument.documentElement;this.Qc=!1,this.Gc=!1,this._d=!1,this.Xc=Nr(t),this.hd&&(this.hd(),this.hd=null);{let s=this.Ld.bind(this),o=this.qd.bind(this);this.hd=()=>{i.removeEventListener("touchmove",s),i.removeEventListener("touchend",o)},i.addEventListener("touchmove",s,{passive:!1}),i.addEventListener("touchend",o,{passive:!1}),this.Id(),this.jc=setTimeout(this.Gd.bind(this,e),240)}let r=this.Md(e,t);this.Sd(r,this.yd.Jd),this.qc||(this.$c=0,this.qc=setTimeout(this.Pd.bind(this),500),this.Yc=Nr(t))}Qd(e){if(e.button!==0)return;let t=this.Dd.ownerDocument.documentElement;HR()&&t.addEventListener("mouseleave",this.vd),this.Jc=!1,this.Kc=Nr(e),this.rd&&(this.rd(),this.rd=null);{let r=this.Ud.bind(this),s=this.md.bind(this);this.rd=()=>{t.removeEventListener("mousemove",r),t.removeEventListener("mouseup",s)},t.addEventListener("mousemove",r),t.addEventListener("mouseup",s)}if(this.ud=!0,this.gd(e))return;let i=this.Md(e);this.kd(i,this.yd.tf),this.Hc||(this.Fc=0,this.Hc=setTimeout(this.Rd.bind(this),500),this.Uc=Nr(e))}Vd(){this.Dd.addEventListener("mouseenter",this.Bd.bind(this)),this.Dd.addEventListener("touchcancel",this.Id.bind(this));{let e=this.Dd.ownerDocument,t=i=>{this.yd.if&&(i.composed&&this.Dd.contains(i.composedPath()[0])||i.target&&this.Dd.contains(i.target)||this.yd.if())};this.sd=()=>{e.removeEventListener("touchstart",t)},this.td=()=>{e.removeEventListener("mousedown",t)},e.addEventListener("mousedown",t),e.addEventListener("touchstart",t,{passive:!0})}Eb()&&(this.nd=()=>{this.Dd.removeEventListener("dblclick",this.wd)},this.Dd.addEventListener("dblclick",this.wd)),this.Dd.addEventListener("mouseleave",this.sf.bind(this)),this.Dd.addEventListener("touchstart",this.Xd.bind(this),{passive:!0}),JQ(this.Dd),this.Dd.addEventListener("mousedown",this.Qd.bind(this)),this.nf(),this.Dd.addEventListener("touchmove",()=>{},{passive:!1})}nf(){this.yd.ef===void 0&&this.yd.rf===void 0&&this.yd.hf===void 0||(this.Dd.addEventListener("touchstart",e=>this.af(e.touches),{passive:!0}),this.Dd.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.ad!==null&&this.yd.rf!==void 0){let t=YR(e.touches[0],e.touches[1])/this.ld;this.yd.rf(this.ad,t),Ec(e)}},{passive:!1}),this.Dd.addEventListener("touchend",e=>{this.af(e.touches)}))}af(e){e.length===1&&(this.od=!1),e.length!==2||this.od||this.Zc?this.lf():this._f(e)}_f(e){let t=this.Dd.getBoundingClientRect()||{left:0,top:0};this.ad={_t:(e[0].clientX-t.left+(e[1].clientX-t.left))/2,ut:(e[0].clientY-t.top+(e[1].clientY-t.top))/2},this.ld=YR(e[0],e[1]),this.yd.ef!==void 0&&this.yd.ef(),this.Id()}lf(){this.ad!==null&&(this.ad=null,this.yd.hf!==void 0&&this.yd.hf())}sf(e){if(this.ed&&this.ed(),this.gd(e)||!this.pd)return;let t=this.Md(e);this.kd(t,this.yd.uf),this.pd=!Eb()}Gd(e){let t=Mb(e.touches,ce(this.fd));if(t===null)return;let i=this.Md(e,t);this.Sd(i,this.yd.cf),this.Qc=!0,this.Zc=!0}gd(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:pm(e)<this.dd+500}Sd(e,t){t&&t.call(this.yd,e)}kd(e,t){t&&t.call(this.yd,e)}Md(e,t){let i=t||e,r=this.Dd.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-r.left,localY:i.clientY-r.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,df:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",ff:e.type,pf:i.target,$o:e.view,vf:()=>{e.type!=="touchstart"&&Ec(e)}}}};function YR(n,e){let t=n.clientX-e.clientX,i=n.clientY-e.clientY;return Math.sqrt(t*t+i*i)}function Ec(n){n.cancelable&&n.preventDefault()}function Nr(n){return{_t:n.pageX,ut:n.pageY}}function pm(n){return n.timeStamp||performance.now()}function Mb(n,e){for(let t=0;t<n.length;++t)if(n[t].identifier===e)return n[t];return null}var x2=class{constructor(e,t,i){this.mf=null,this.wf=null,this.gf=!0,this.Mf=null,this.bf=e,this.xf=e.Sf()[t],this.Cf=e.Sf()[i],this.yf=document.createElement("tr"),this.yf.style.height="1px",this.Pf=document.createElement("td"),this.Pf.style.position="relative",this.Pf.style.padding="0",this.Pf.style.margin="0",this.Pf.setAttribute("colspan","3"),this.kf(),this.yf.appendChild(this.Pf),this.gf=this.bf.N().layout.panes.enableResize,this.gf?this.Tf():(this.mf=null,this.wf=null)}m(){this.wf!==null&&this.wf.m()}Rf(){return this.yf}Df(){return yt({width:this.xf.Df().width,height:1})}Vf(){return yt({width:this.xf.Vf().width,height:1*window.devicePixelRatio})}If(e,t,i){let r=this.Vf();e.fillStyle=this.bf.N().layout.panes.separatorColor,e.fillRect(t,i,r.width,r.height)}Pt(){this.kf(),this.bf.N().layout.panes.enableResize!==this.gf&&(this.gf=this.bf.N().layout.panes.enableResize,this.gf?this.Tf():(this.mf!==null&&(this.Pf.removeChild(this.mf.Bf),this.Pf.removeChild(this.mf.Af),this.mf=null),this.wf!==null&&(this.wf.m(),this.wf=null)))}Tf(){let e=document.createElement("div"),t=e.style;t.position="fixed",t.display="none",t.zIndex="49",t.top="0",t.left="0",t.width="100%",t.height="100%",t.cursor="row-resize",this.Pf.appendChild(e);let i=document.createElement("div"),r=i.style;r.position="absolute",r.zIndex="50",r.top="-4px",r.height="9px",r.width="100%",r.backgroundColor="",r.cursor="row-resize",this.Pf.appendChild(i);let s={Ed:this.Ef.bind(this),uf:this.zf.bind(this),tf:this.Lf.bind(this),Jd:this.Lf.bind(this),$d:this.Of.bind(this),Hd:this.Of.bind(this),Zd:this.Nf.bind(this),Yd:this.Nf.bind(this)};this.wf=new Fc(i,s,{Wd:()=>!1,Fd:()=>!0}),this.mf={Af:i,Bf:e}}kf(){this.Pf.style.background=this.bf.N().layout.panes.separatorColor}Ef(e){this.mf!==null&&(this.mf.Af.style.backgroundColor=this.bf.N().layout.panes.separatorHoverColor)}zf(e){this.mf!==null&&this.Mf===null&&(this.mf.Af.style.backgroundColor="")}Lf(e){if(this.mf===null)return;let t=this.xf.Wf().fo()+this.Cf.Wf().fo(),i=t/(this.xf.Df().height+this.Cf.Df().height),r=30*i;t<=2*r||(this.Mf={Ff:e.pageY,Hf:this.xf.Wf().fo(),Uf:t-r,$f:t,qf:i,Yf:r},this.mf.Bf.style.display="block")}Of(e){let t=this.Mf;if(t===null)return;let i=(e.pageY-t.Ff)*t.qf,r=fm(t.Hf+i,t.Yf,t.Uf);this.xf.Wf().po(r),this.Cf.Wf().po(t.$f-r),this.bf.Qt().Bh()}Nf(e){this.Mf!==null&&this.mf!==null&&(this.Mf=null,this.mf.Bf.style.display="none")}};function Tb(n,e){return n.jf-e.jf}function Ib(n,e,t){let i=(n.jf-e.jf)/(n.wt-e.wt);return Math.sign(i)*Math.min(Math.abs(i),t)}var D2=class{constructor(e,t,i,r){this.Zf=null,this.Kf=null,this.Xf=null,this.Gf=null,this.Jf=null,this.Qf=0,this.tp=0,this.ip=e,this.sp=t,this.np=i,this.Mn=r}ep(e,t){if(this.Zf!==null){if(this.Zf.wt===t)return void(this.Zf.jf=e);if(Math.abs(this.Zf.jf-e)<this.Mn)return}this.Gf=this.Xf,this.Xf=this.Kf,this.Kf=this.Zf,this.Zf={wt:t,jf:e}}le(e,t){if(this.Zf===null||this.Kf===null||t-this.Zf.wt>50)return;let i=0,r=Ib(this.Zf,this.Kf,this.sp),s=Tb(this.Zf,this.Kf),o=[r],a=[s];if(i+=s,this.Xf!==null){let c=Ib(this.Kf,this.Xf,this.sp);if(Math.sign(c)===Math.sign(r)){let u=Tb(this.Kf,this.Xf);if(o.push(c),a.push(u),i+=u,this.Gf!==null){let d=Ib(this.Xf,this.Gf,this.sp);if(Math.sign(d)===Math.sign(r)){let h=Tb(this.Xf,this.Gf);o.push(d),a.push(h),i+=h}}}}let l=0;for(let c=0;c<o.length;++c)l+=a[c]/i*o[c];Math.abs(l)<this.ip||(this.Jf={jf:e,wt:t},this.tp=l,this.Qf=function(c,u){let d=Math.log(u);return Math.log(1*d/-c)/d}(Math.abs(l),this.np))}cu(e){let t=ce(this.Jf),i=e-t.wt;return t.jf+this.tp*(Math.pow(this.np,i)-1)/Math.log(this.np)}uu(e){return this.Jf===null||this.rp(e)===this.Qf}rp(e){let t=e-ce(this.Jf).wt;return Math.min(t,this.Qf)}},E2=class{constructor(e,t){this.hp=void 0,this.ap=void 0,this.lp=void 0,this.ps=!1,this.op=e,this._p=t,this.up()}Pt(){this.up()}cp(){this.hp&&this.op.removeChild(this.hp),this.ap&&this.op.removeChild(this.ap),this.hp=void 0,this.ap=void 0}dp(){return this.ps!==this.fp()||this.lp!==this.pp()}pp(){return this._p.Qt().Ki().J(this._p.N().layout.textColor)>160?"dark":"light"}fp(){return this._p.N().layout.attributionLogo}vp(){let e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}up(){this.dp()&&(this.cp(),this.ps=this.fp(),this.ps&&(this.lp=this.pp(),this.ap=document.createElement("style"),this.ap.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.hp=document.createElement("a"),this.hp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.vp()}`,this.hp.title="Charting by TradingView",this.hp.id="tv-attr-logo",this.hp.target="_blank",this.hp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.hp.toggleAttribute("data-dark",this.lp==="dark"),this.op.appendChild(this.ap),this.op.appendChild(this.hp)))}};function xa(n,e){let t=ce(n.ownerDocument).createElement("canvas");n.appendChild(t);let i=yb(t,{type:"device-pixel-content-box",options:{allowResizeObserver:!0},transform:(r,s)=>({width:Math.max(r.width,s.width),height:Math.max(r.height,s.height)})});return i.resizeCanvasElement(e),i}function Da(n){n.width=1,n.height=1,n.getContext("2d")?.clearRect(0,0,1,1)}function M2(n,e,t,i){n.ih&&n.ih(e,t,i)}function gm(n,e,t,i){n.nt(e,t,i)}function T2(n,e,t,i){let r=n(t,i);for(let s of r){let o=s.Tt(i);o!==null&&e(o)}}function kb(n,e){return t=>function(i){return i.Wt!==void 0}(t)?(t.Wt()?.wa()??"")!==e?[]:t.ta?.(n)??[]:[]}function GR(n,e,t,i){if(!n.length)return;let r=0,s=n[0].$t(i,!0),o=e===1?t/2-(n[0].Wi()-s/2):n[0].Wi()-s/2-t/2;o=Math.max(0,o);for(let a=1;a<n.length;a++){let l=n[a],c=n[a-1],u=c.$t(i,!1),d=l.Wi(),h=c.Wi();if(e===1?d>h-u:d<h+u){let p=h-u*e;l.Fi(p);let g=p-e*u/2;if((e===1?g<0:g>t)&&o>0){let A=e===1?-1-g:g-t,v=Math.min(A,o);for(let b=r;b<n.length;b++)n[b].Fi(n[b].Wi()+e*v);o-=v}}else r=a,o=e===1?h-u-d:d-(h+u)}}var Tm=class{constructor(e,t,i,r){this.Yi=null,this.mp=null,this.wp=!1,this.gp=new Ca(200),this.Mp=null,this.bp=0,this.xp=!1,this.Sp=()=>{this.xp||this.yt.Cp().Qt().ar()},this.yp=()=>{this.xp||this.yt.Cp().Qt().ar()},this.yt=e,this.ys=t,this._l=t.layout,this.Au=i,this.Pp=r==="left",this.kp=kb("normal",r),this.Tp=kb("top",r),this.Rp=kb("bottom",r),this.Pf=document.createElement("div"),this.Pf.style.height="100%",this.Pf.style.overflow="hidden",this.Pf.style.width="25px",this.Pf.style.left="0",this.Pf.style.position="relative",this.Dp=xa(this.Pf,yt({width:16,height:16})),this.Dp.subscribeSuggestedBitmapSizeChanged(this.Sp);let s=this.Dp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Vp=xa(this.Pf,yt({width:16,height:16})),this.Vp.subscribeSuggestedBitmapSizeChanged(this.yp);let o=this.Vp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";let a={tf:this.Lf.bind(this),Jd:this.Lf.bind(this),$d:this.Of.bind(this),Hd:this.Of.bind(this),if:this.Ip.bind(this),Zd:this.Nf.bind(this),Yd:this.Nf.bind(this),Td:this.Bp.bind(this),Cd:this.Bp.bind(this),Ed:this.Ap.bind(this),uf:this.zf.bind(this)};this.wf=new Fc(this.Vp.canvasElement,a,{Wd:()=>!this.ys.handleScroll.vertTouchDrag,Fd:()=>!0})}m(){this.wf.m(),this.Vp.unsubscribeSuggestedBitmapSizeChanged(this.yp),Da(this.Vp.canvasElement),this.Vp.dispose(),this.Dp.unsubscribeSuggestedBitmapSizeChanged(this.Sp),Da(this.Dp.canvasElement),this.Dp.dispose(),this.Yi!==null&&this.Yi.Hl().u(this),this.Yi=null}Rf(){return this.Pf}P(){return this._l.fontSize}Ep(){let e=this.Au.N();return this.Mp!==e.k&&(this.gp.In(),this.Mp=e.k),e}zp(){if(this.Yi===null)return 0;let e=0,t=this.Ep(),i=ce(this.Dp.canvasElement.getContext("2d",{colorSpace:this.yt.Cp().N().layout.colorSpace}));i.save();let r=this.Yi.Va();i.font=this.Lp(),r.length>0&&(e=Math.max(this.gp.Vi(i,r[0].$a),this.gp.Vi(i,r[r.length-1].$a)));let s=this.Op();for(let c=s.length;c--;){let u=this.gp.Vi(i,s[c].ri());u>e&&(e=u)}let o=this.Yi.zt();if(o!==null&&this.mp!==null&&(a=this.ys.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){let c=this.Yi.Ts(1,o),u=this.Yi.Ts(this.mp.height-2,o);e=Math.max(e,this.gp.Vi(i,this.Yi.Xi(Math.floor(Math.min(c,u))+.11111111111111,o)),this.gp.Vi(i,this.Yi.Xi(Math.ceil(Math.max(c,u))-.11111111111111,o)))}var a;i.restore();let l=e||34;return C2(Math.ceil(t.S+t.C+t.I+t.B+5+l))}Np(e){this.mp!==null&&Pr(this.mp,e)||(this.mp=e,this.xp=!0,this.Dp.resizeCanvasElement(e),this.Vp.resizeCanvasElement(e),this.xp=!1,this.Pf.style.width=`${e.width}px`,this.Pf.style.height=`${e.height}px`)}Wp(){return ce(this.mp).width}_s(e){this.Yi!==e&&(this.Yi!==null&&this.Yi.Hl().u(this),this.Yi=e,e.Hl().i(this.il.bind(this),this))}Wt(){return this.Yi}In(){let e=this.yt.Wf();this.yt.Cp().Qt().Bo(e,ce(this.Wt()))}Fp(e){if(this.mp===null)return;let t={colorSpace:this.yt.Cp().N().layout.colorSpace};if(e!==1){this.Hp(),this.Dp.applySuggestedBitmapSize();let r=ds(this.Dp,t);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.Up(s),this.$p(s)}),this.yt.qp(r,this.Rp),this.Yp(r),this.yt.qp(r,this.kp),this.jp(r))}this.Vp.applySuggestedBitmapSize();let i=ds(this.Vp,t);i!==null&&(i.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.Zp(i),this.yt.qp(i,this.Tp))}Vf(){return this.Dp.bitmapSize}If(e,t,i){let r=this.Vf();r.width>0&&r.height>0&&e.drawImage(this.Dp.canvasElement,t,i)}Pt(){this.Yi?.Va()}Lf(e){if(this.Yi===null||this.Yi.Zi()||!this.ys.handleScale.axisPressedMouseMove.price)return;let t=this.yt.Cp().Qt(),i=this.yt.Wf();this.wp=!0,t.Po(i,this.Yi,e.localY)}Of(e){if(this.Yi===null||!this.ys.handleScale.axisPressedMouseMove.price)return;let t=this.yt.Cp().Qt(),i=this.yt.Wf(),r=this.Yi;t.ko(i,r,e.localY)}Ip(){if(this.Yi===null||!this.ys.handleScale.axisPressedMouseMove.price)return;let e=this.yt.Cp().Qt(),t=this.yt.Wf(),i=this.Yi;this.wp&&(this.wp=!1,e.To(t,i))}Nf(e){if(this.Yi===null||!this.ys.handleScale.axisPressedMouseMove.price)return;let t=this.yt.Cp().Qt(),i=this.yt.Wf();this.wp=!1,t.To(i,this.Yi)}Bp(e){this.ys.handleScale.axisDoubleClickReset.price&&this.In()}Ap(e){this.Yi!==null&&(!this.yt.Cp().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.gl()||this.Kp(1))}zf(e){this.Kp(0)}Op(){let e=[],t=this.Yi===null?void 0:this.Yi;return(i=>{for(let r=0;r<i.length;++r){let s=i[r].Fs(this.yt.Wf(),t);for(let o=0;o<s.length;o++)e.push(s[o])}})(this.yt.Wf().Dt()),e}Up({context:e,bitmapSize:t}){let{width:i,height:r}=t,s=this.yt.Wf().Qt(),o=s.$(),a=s.xc();o===a?Om(e,0,0,i,r,o):f3(e,0,0,i,r,o,a)}$p({context:e,bitmapSize:t,horizontalPixelRatio:i}){if(this.mp===null||this.Yi===null||!this.Yi.N().borderVisible)return;e.fillStyle=this.Yi.N().borderColor;let r=Math.max(1,Math.floor(this.Ep().S*i)),s;s=this.Pp?t.width-r:0,e.fillRect(s,0,r,t.height)}Yp(e){if(this.mp===null||this.Yi===null)return;let t=this.Yi.Va(),i=this.Yi.N(),r=this.Ep(),s=this.Pp?this.mp.width-r.C:0;i.borderVisible&&i.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:l})=>{o.fillStyle=i.borderColor;let c=Math.max(1,Math.floor(l)),u=Math.floor(.5*l),d=Math.round(r.C*a);o.beginPath();for(let h of t)o.rect(Math.floor(s*a),Math.round(h.Pa*l)-u,d,c);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{o.font=this.Lp(),o.fillStyle=i.textColor??this._l.textColor,o.textAlign=this.Pp?"right":"left",o.textBaseline="middle";let a=this.Pp?Math.round(s-r.I):Math.round(s+r.C+r.I),l=t.map(c=>this.gp.Di(o,c.$a));for(let c=t.length;c--;){let u=t[c];o.fillText(u.$a,a,u.Pa+l[c])}})}Hp(){if(this.mp===null||this.Yi===null)return;let e=this.mp.height/2,t=[],i=this.Yi.Dt().slice(),r=this.yt.Wf(),s=this.Ep();this.Yi===r.$n()&&this.yt.Wf().Dt().forEach(l=>{r.Un(l)&&i.push(l)});let o=this.Yi.ba()[0],a=this.Yi;i.forEach(l=>{let c=l.Fs(r,a);c.forEach(u=>{u.Fi(null),u.Hi()&&t.push(u)}),o===l&&c.length>0&&(e=c[0].Bi())}),t.forEach(l=>l.Fi(l.Bi())),this.Yi.N().alignLabels&&this.Xp(t,s,e)}Xp(e,t,i){if(this.mp===null)return;let r=e.filter(o=>o.Bi()<=i),s=e.filter(o=>o.Bi()>i);r.sort((o,a)=>a.Bi()-o.Bi()),r.length&&s.length&&s.push(r[0]),s.sort((o,a)=>o.Bi()-a.Bi());for(let o of e){let a=Math.floor(o.$t(t)/2),l=o.Bi();l>-a&&l<a&&o.Fi(a),l>this.mp.height-a&&l<this.mp.height+a&&o.Fi(this.mp.height-a)}GR(r,1,this.mp.height,t),GR(s,-1,this.mp.height,t)}jp(e){if(this.mp===null)return;let t=this.Op(),i=this.Ep(),r=this.Pp?"right":"left";t.forEach(s=>{s.Ui()&&s.Tt(ce(this.Yi)).nt(e,i,this.gp,r)})}Zp(e){if(this.mp===null||this.Yi===null)return;let t=this.yt.Cp().Qt(),i=[],r=this.yt.Wf(),s=t.Yu().Fs(r,this.Yi);s.length&&i.push(s);let o=this.Ep(),a=this.Pp?"right":"left";i.forEach(l=>{l.forEach(c=>{c.Tt(ce(this.Yi)).nt(e,o,this.gp,a)})})}Kp(e){this.Pf.style.cursor=e===1?"ns-resize":"default"}il(){let e=this.zp();this.bp<e&&this.yt.Cp().Qt().Bh(),this.bp=e}Lp(){return Dh(this._l.fontSize,this._l.fontFamily)}};function eJ(n,e){return n.Jh?.(e)??[]}function KR(n,e){return n.Ws?.(e)??[]}function $R(n,e){return n.us?.(e)??[]}function tJ(n,e){return n.Kh?.(e)??[]}var I2=class n{constructor(e,t){this.mp=yt({width:0,height:0}),this.Gp=null,this.Jp=null,this.Qp=null,this.tv=null,this.iv=!1,this.sv=new Wt,this.nv=new Wt,this.ev=0,this.rv=!1,this.hv=null,this.av=!1,this.lv=null,this.ov=null,this.xp=!1,this.Sp=()=>{this.xp||this._v===null||this.ts().ar()},this.yp=()=>{this.xp||this._v===null||this.ts().ar()},this._p=e,this._v=t,this._v.zo().i(this.uv.bind(this),this,!0),this.cv=document.createElement("td"),this.cv.style.padding="0",this.cv.style.position="relative";let i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.dv=document.createElement("td"),this.dv.style.padding="0",this.fv=document.createElement("td"),this.fv.style.padding="0",this.cv.appendChild(i),this.Dp=xa(i,yt({width:16,height:16})),this.Dp.subscribeSuggestedBitmapSizeChanged(this.Sp);let r=this.Dp.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Vp=xa(i,yt({width:16,height:16})),this.Vp.subscribeSuggestedBitmapSizeChanged(this.yp);let s=this.Vp.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.yf=document.createElement("tr"),this.yf.appendChild(this.dv),this.yf.appendChild(this.cv),this.yf.appendChild(this.fv),this.pv(),this.wf=new Fc(this.Vp.canvasElement,this,{Wd:()=>this.hv===null&&!this._p.N().handleScroll.vertTouchDrag,Fd:()=>this.hv===null&&!this._p.N().handleScroll.horzTouchDrag})}m(){this.Gp!==null&&this.Gp.m(),this.Jp!==null&&this.Jp.m(),this.Qp=null,this.Vp.unsubscribeSuggestedBitmapSizeChanged(this.yp),Da(this.Vp.canvasElement),this.Vp.dispose(),this.Dp.unsubscribeSuggestedBitmapSizeChanged(this.Sp),Da(this.Dp.canvasElement),this.Dp.dispose(),this._v!==null&&(this._v.zo().u(this),this._v.m()),this.wf.m()}Wf(){return ce(this._v)}vv(e){this._v!==null&&this._v.zo().u(this),this._v=e,this._v!==null&&this._v.zo().i(n.prototype.uv.bind(this),this,!0),this.pv(),this._p.Sf().indexOf(this)===this._p.Sf().length-1?(this.Qp=this.Qp??new E2(this.cv,this._p),this.Qp.Pt()):(this.Qp?.cp(),this.Qp=null)}Cp(){return this._p}Rf(){return this.yf}pv(){if(this._v!==null&&(this.mv(),this.ts().js().length!==0)){if(this.Gp!==null){let e=this._v.Co();this.Gp._s(ce(e))}if(this.Jp!==null){let e=this._v.yo();this.Jp._s(ce(e))}}}wv(){this.Gp!==null&&this.Gp.Pt(),this.Jp!==null&&this.Jp.Pt()}fo(){return this._v!==null?this._v.fo():0}po(e){this._v&&this._v.po(e)}Ed(e){if(!this._v)return;this.gv();let t=e.localX,i=e.localY;this.Mv(t,i,e)}tf(e){this.gv(),this.bv(),this.Mv(e.localX,e.localY,e)}zd(e){if(!this._v)return;this.gv();let t=e.localX,i=e.localY;this.Mv(t,i,e)}Kd(e){this._v!==null&&(this.gv(),this.xv(e))}Td(e){this._v!==null&&this.Sv(this.nv,e)}Cd(e){this.Td(e)}$d(e){this.gv(),this.Cv(e),this.Mv(e.localX,e.localY,e)}Zd(e){this._v!==null&&(this.gv(),this.rv=!1,this.yv(e))}jd(e){this._v!==null&&this.xv(e)}cf(e){if(this.rv=!0,this.hv===null){let t={x:e.localX,y:e.localY};this.Pv(t,t,e)}}uf(e){this._v!==null&&(this.gv(),this._v.Qt().Uu(null),this.kv())}Tv(){return this.sv}Rv(){return this.nv}ef(){this.ev=1,this.ts().hn()}rf(e,t){if(!this._p.N().handleScale.pinch)return;let i=5*(t-this.ev);this.ev=t,this.ts().tc(e._t,i)}Jd(e){this.rv=!1,this.av=this.hv!==null,this.bv();let t=this.ts().Yu();this.hv!==null&&t.Vt()&&(this.lv={x:t.si(),y:t.ni()},this.hv={x:e.localX,y:e.localY})}Hd(e){if(this._v===null)return;let t=e.localX,i=e.localY;if(this.hv===null)this.Cv(e);else{this.av=!1;let r=ce(this.lv),s=r.x+(t-this.hv.x),o=r.y+(i-this.hv.y);this.Mv(s,o,e)}}Yd(e){this.Cp().N().trackingMode.exitMode===0&&(this.av=!0),this.Dv(),this.yv(e)}jn(e,t){let i=this._v;return i===null?null:y3(i,e,t)}Vv(e,t){ce(t==="left"?this.Gp:this.Jp).Np(yt({width:e,height:this.mp.height}))}Df(){return this.mp}Np(e){Pr(this.mp,e)||(this.mp=e,this.xp=!0,this.Dp.resizeCanvasElement(e),this.Vp.resizeCanvasElement(e),this.xp=!1,this.cv.style.width=e.width+"px",this.cv.style.height=e.height+"px")}Iv(){let e=ce(this._v);e.So(e.Co()),e.So(e.yo());for(let t of e.ba())if(e.Un(t)){let i=t.Wt();i!==null&&e.So(i),t.Ns()}for(let t of e.Oo())t.Ns()}Vf(){return this.Dp.bitmapSize}If(e,t,i){let r=this.Vf();r.width>0&&r.height>0&&e.drawImage(this.Dp.canvasElement,t,i)}Fp(e){if(e===0||this._v===null)return;e>1&&this.Iv(),this.Gp!==null&&this.Gp.Fp(e),this.Jp!==null&&this.Jp.Fp(e);let t={colorSpace:this._p.N().layout.colorSpace};if(e!==1){this.Dp.applySuggestedBitmapSize();let r=ds(this.Dp,t);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.Up(s)}),this._v&&(this.Bv(r,eJ),this.Av(r),this.Bv(r,KR),this.Bv(r,$R)))}this.Vp.applySuggestedBitmapSize();let i=ds(this.Vp,t);i!==null&&(i.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.Ev(i),this.Bv(i,tJ),this.Bv(i,$R))}zv(){return this.Gp}Lv(){return this.Jp}qp(e,t){this.Bv(e,t)}uv(){this._v!==null&&this._v.zo().u(this),this._v=null}xv(e){this.Sv(this.sv,e)}Sv(e,t){let i=t.localX,r=t.localY;e.v()&&e.p(this.ts().At().Z_(i),{x:i,y:r},t)}Up({context:e,bitmapSize:t}){let{width:i,height:r}=t,s=this.ts(),o=s.$(),a=s.xc();o===a?Om(e,0,0,i,r,a):f3(e,0,0,i,r,o,a)}Av(e){let t=ce(this._v),i=t.Lo().lr().Tt(t);i!==null&&i.nt(e,!1)}Ev(e){this.Ov(e,KR,gm,this.ts().Yu())}Bv(e,t){let i=ce(this._v),r=i.Dt(),s=i.Oo();for(let o of s)this.Ov(e,t,M2,o);for(let o of r)this.Ov(e,t,M2,o);for(let o of s)this.Ov(e,t,gm,o);for(let o of r)this.Ov(e,t,gm,o)}Ov(e,t,i,r){let s=ce(this._v),o=s.Qt().Hu(),a=o!==null&&o.Wo===r,l=o!==null&&a&&o.Fo!==void 0?o.Fo.Kn:void 0;T2(t,c=>i(c,e,a,l),r,s)}mv(){if(this._v===null)return;let e=this._p,t=this._v.Co().N().visible,i=this._v.yo().N().visible;t||this.Gp===null||(this.dv.removeChild(this.Gp.Rf()),this.Gp.m(),this.Gp=null),i||this.Jp===null||(this.fv.removeChild(this.Jp.Rf()),this.Jp.m(),this.Jp=null);let r=e.Qt().cc();t&&this.Gp===null&&(this.Gp=new Tm(this,e.N(),r,"left"),this.dv.appendChild(this.Gp.Rf())),i&&this.Jp===null&&(this.Jp=new Tm(this,e.N(),r,"right"),this.fv.appendChild(this.Jp.Rf()))}Nv(e){return e.df&&this.rv||this.hv!==null}Wv(e){return Math.max(0,Math.min(e,this.mp.width-1))}Fv(e){return Math.max(0,Math.min(e,this.mp.height-1))}Mv(e,t,i){this.ts().lc(this.Wv(e),this.Fv(t),i,ce(this._v))}kv(){this.ts()._c()}Dv(){this.av&&(this.hv=null,this.kv())}Pv(e,t,i){this.hv=e,this.av=!1,this.Mv(t.x,t.y,i);let r=this.ts().Yu();this.lv={x:r.si(),y:r.ni()}}ts(){return this._p.Qt()}yv(e){if(!this.iv)return;let t=this.ts(),i=this.Wf();if(t.Vo(i,i.ks()),this.tv=null,this.iv=!1,t.rc(),this.ov!==null){let r=performance.now(),s=t.At();this.ov.le(s.iu(),r),this.ov.uu(r)||t._n(this.ov)}}gv(){this.hv=null}bv(){if(this._v){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)ce(document.activeElement).blur();else{let e=document.getSelection();e!==null&&e.removeAllRanges()}!this._v.ks().Zi()&&this.ts().At().Zi()}}Cv(e){if(this._v===null)return;let t=this.ts(),i=t.At();if(i.Zi())return;let r=this._p.N(),s=r.handleScroll,o=r.kineticScroll;if((!s.pressedMouseMove||e.df)&&(!s.horzTouchDrag&&!s.vertTouchDrag||!e.df))return;let a=this._v.ks(),l=performance.now();if(this.tv!==null||this.Nv(e)||(this.tv={x:e.clientX,y:e.clientY,Lc:l,Hv:e.localX,Uv:e.localY}),this.tv!==null&&!this.iv&&(this.tv.x!==e.clientX||this.tv.y!==e.clientY)){if(e.df&&o.touch||!e.df&&o.mouse){let c=i.Q_();this.ov=new D2(.2/c,7/c,.997,15/c),this.ov.ep(i.iu(),this.tv.Lc)}else this.ov=null;a.Zi()||t.Ro(this._v,a,e.localY),t.nc(e.localX),this.iv=!0}this.iv&&(a.Zi()||t.Do(this._v,a,e.localY),t.ec(e.localX),this.ov!==null&&this.ov.ep(i.iu(),l))}},Im=class{constructor(e,t,i,r,s){this.St=!0,this.mp=yt({width:0,height:0}),this.Sp=()=>this.Fp(3),this.Pp=e==="left",this.Au=i.cc,this.ys=t,this.$v=r,this.qv=s,this.Pf=document.createElement("div"),this.Pf.style.width="25px",this.Pf.style.height="100%",this.Pf.style.overflow="hidden",this.Dp=xa(this.Pf,yt({width:16,height:16})),this.Dp.subscribeSuggestedBitmapSizeChanged(this.Sp)}m(){this.Dp.unsubscribeSuggestedBitmapSizeChanged(this.Sp),Da(this.Dp.canvasElement),this.Dp.dispose()}Rf(){return this.Pf}Df(){return this.mp}Np(e){Pr(this.mp,e)||(this.mp=e,this.Dp.resizeCanvasElement(e),this.Pf.style.width=`${e.width}px`,this.Pf.style.height=`${e.height}px`,this.St=!0)}Fp(e){if(e<3&&!this.St||this.mp.width===0||this.mp.height===0)return;this.St=!1,this.Dp.applySuggestedBitmapSize();let t=ds(this.Dp,{colorSpace:this.ys.layout.colorSpace});t!==null&&t.useBitmapCoordinateSpace(i=>{this.Up(i),this.$p(i)})}Vf(){return this.Dp.bitmapSize}If(e,t,i){let r=this.Vf();r.width>0&&r.height>0&&e.drawImage(this.Dp.canvasElement,t,i)}$p({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:r}){if(!this.$v())return;e.fillStyle=this.ys.timeScale.borderColor;let s=Math.floor(this.Au.N().S*i),o=Math.floor(this.Au.N().S*r),a=this.Pp?t.width-s:0;e.fillRect(a,0,s,o)}Up({context:e,bitmapSize:t}){Om(e,0,0,t.width,t.height,this.qv())}};function nS(n){return e=>e.ia?.(n)??[]}var nJ=nS("normal"),iJ=nS("top"),rJ=nS("bottom"),k2=class{constructor(e,t){this.Yv=null,this.jv=null,this.M=null,this.Zv=!1,this.mp=yt({width:0,height:0}),this.Kv=new Wt,this.gp=new Ca(5),this.xp=!1,this.Sp=()=>{this.xp||this._p.Qt().ar()},this.yp=()=>{this.xp||this._p.Qt().ar()},this._p=e,this.Yo=t,this.ys=e.N().layout,this.hp=document.createElement("tr"),this.Xv=document.createElement("td"),this.Xv.style.padding="0",this.Gv=document.createElement("td"),this.Gv.style.padding="0",this.Pf=document.createElement("td"),this.Pf.style.height="25px",this.Pf.style.padding="0",this.Jv=document.createElement("div"),this.Jv.style.width="100%",this.Jv.style.height="100%",this.Jv.style.position="relative",this.Jv.style.overflow="hidden",this.Pf.appendChild(this.Jv),this.Dp=xa(this.Jv,yt({width:16,height:16})),this.Dp.subscribeSuggestedBitmapSizeChanged(this.Sp);let i=this.Dp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Vp=xa(this.Jv,yt({width:16,height:16})),this.Vp.subscribeSuggestedBitmapSizeChanged(this.yp);let r=this.Vp.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.hp.appendChild(this.Xv),this.hp.appendChild(this.Pf),this.hp.appendChild(this.Gv),this.Qv(),this._p.Qt().do().i(this.Qv.bind(this),this),this.wf=new Fc(this.Vp.canvasElement,this,{Wd:()=>!0,Fd:()=>!this._p.N().handleScroll.horzTouchDrag})}m(){this.wf.m(),this.Yv!==null&&this.Yv.m(),this.jv!==null&&this.jv.m(),this.Vp.unsubscribeSuggestedBitmapSizeChanged(this.yp),Da(this.Vp.canvasElement),this.Vp.dispose(),this.Dp.unsubscribeSuggestedBitmapSizeChanged(this.Sp),Da(this.Dp.canvasElement),this.Dp.dispose()}Rf(){return this.hp}tm(){return this.Yv}im(){return this.jv}tf(e){if(this.Zv)return;this.Zv=!0;let t=this._p.Qt();!t.At().Zi()&&this._p.N().handleScale.axisPressedMouseMove.time&&t.Qu(e.localX)}Jd(e){this.tf(e)}if(){let e=this._p.Qt();!e.At().Zi()&&this.Zv&&(this.Zv=!1,this._p.N().handleScale.axisPressedMouseMove.time&&e.ac())}$d(e){let t=this._p.Qt();!t.At().Zi()&&this._p.N().handleScale.axisPressedMouseMove.time&&t.hc(e.localX)}Hd(e){this.$d(e)}Zd(){this.Zv=!1;let e=this._p.Qt();e.At().Zi()&&!this._p.N().handleScale.axisPressedMouseMove.time||e.ac()}Yd(){this.Zd()}Td(){this._p.N().handleScale.axisDoubleClickReset.time&&this._p.Qt().cn()}Cd(){this.Td()}Ed(){this._p.Qt().N().handleScale.axisPressedMouseMove.time&&this.Kp(1)}uf(){this.Kp(0)}Df(){return this.mp}sm(){return this.Kv}nm(e,t,i){Pr(this.mp,e)||(this.mp=e,this.xp=!0,this.Dp.resizeCanvasElement(e),this.Vp.resizeCanvasElement(e),this.xp=!1,this.Pf.style.width=`${e.width}px`,this.Pf.style.height=`${e.height}px`,this.Kv.p(e)),this.Yv!==null&&this.Yv.Np(yt({width:t,height:e.height})),this.jv!==null&&this.jv.Np(yt({width:i,height:e.height}))}rm(){let e=this.hm();return Math.ceil(e.S+e.C+e.P+e.A+e.V+e.am)}Pt(){this._p.Qt().At().Va()}Vf(){return this.Dp.bitmapSize}If(e,t,i){let r=this.Vf();r.width>0&&r.height>0&&e.drawImage(this.Dp.canvasElement,t,i)}Fp(e){if(e===0)return;let t={colorSpace:this.ys.colorSpace};if(e!==1){this.Dp.applySuggestedBitmapSize();let r=ds(this.Dp,t);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.Up(s),this.$p(s),this.lm(r,rJ)}),this.Yp(r),this.lm(r,nJ)),this.Yv!==null&&this.Yv.Fp(e),this.jv!==null&&this.jv.Fp(e)}this.Vp.applySuggestedBitmapSize();let i=ds(this.Vp,t);i!==null&&(i.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.om([...this._p.Qt().js(),this._p.Qt().Yu()],i),this.lm(i,iJ))}lm(e,t){let i=this._p.Qt().js();for(let r of i)T2(t,s=>M2(s,e,!1,void 0),r,void 0);for(let r of i)T2(t,s=>gm(s,e,!1,void 0),r,void 0)}Up({context:e,bitmapSize:t}){Om(e,0,0,t.width,t.height,this._p.Qt().xc())}$p({context:e,bitmapSize:t,verticalPixelRatio:i}){if(this._p.N().timeScale.borderVisible){e.fillStyle=this._m();let r=Math.max(1,Math.floor(this.hm().S*i));e.fillRect(0,0,t.width,r)}}Yp(e){let t=this._p.Qt().At(),i=t.Va();if(!i||i.length===0)return;let r=this.Yo.maxTickMarkWeight(i),s=this.hm(),o=t.N();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.strokeStyle=this._m(),a.fillStyle=this._m();let u=Math.max(1,Math.floor(l)),d=Math.floor(.5*l);a.beginPath();let h=Math.round(s.C*c);for(let p=i.length;p--;){let g=Math.round(i[p].coord*l);a.rect(g-d,0,u,h)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{let l=s.S+s.C+s.A+s.P/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this.Lp();for(let c of i)if(c.weight<r){let u=c.needAlignCoordinate?this.um(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}this._p.N().timeScale.allowBoldLabels&&(a.font=this.dm());for(let c of i)if(c.weight>=r){let u=c.needAlignCoordinate?this.um(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}})}um(e,t,i){let r=this.gp.Vi(e,i),s=r/2,o=Math.floor(t-s)+.5;return o<0?t+=Math.abs(0-o):o+r>this.mp.width&&(t-=Math.abs(this.mp.width-(o+r))),t}om(e,t){let i=this.hm();for(let r of e)for(let s of r.cs())s.Tt().nt(t,i)}_m(){return this._p.N().timeScale.borderColor}H(){return this.ys.textColor}W(){return this.ys.fontSize}Lp(){return Dh(this.W(),this.ys.fontFamily)}dm(){return Dh(this.W(),this.ys.fontFamily,"bold")}hm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new Ca,am:0});let e=this.M,t=this.Lp();if(e.k!==t){let i=this.W();e.P=i,e.k=t,e.A=3*i/12,e.V=3*i/12,e.Ji=9*i/12,e.L=0,e.am=4*i/12,e.Gi.In()}return this.M}Kp(e){this.Pf.style.cursor=e===1?"ew-resize":"default"}Qv(){let e=this._p.Qt(),t=e.N();t.leftPriceScale.visible||this.Yv===null||(this.Xv.removeChild(this.Yv.Rf()),this.Yv.m(),this.Yv=null),t.rightPriceScale.visible||this.jv===null||(this.Gv.removeChild(this.jv.Rf()),this.jv.m(),this.jv=null);let i={cc:this._p.Qt().cc()},r=()=>t.leftPriceScale.borderVisible&&e.At().N().borderVisible,s=()=>e.xc();t.leftPriceScale.visible&&this.Yv===null&&(this.Yv=new Im("left",t,i,r,s),this.Xv.appendChild(this.Yv.Rf())),t.rightPriceScale.visible&&this.jv===null&&(this.jv=new Im("right",t,i,r,s),this.Gv.appendChild(this.jv.Rf()))}},sJ=!!Rc&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(n=>n.brand.includes("Chromium"))&&!!Rc&&(navigator?.userAgentData?.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0),P2=class{constructor(e,t,i){var r;this.fm=[],this.pm=[],this.vm=0,this.ja=0,this.no=0,this.wm=0,this.gm=0,this.Mm=null,this.bm=!1,this.sv=new Wt,this.nv=new Wt,this.Vu=new Wt,this.xm=null,this.Sm=null,this.op=e,this.ys=t,this.Yo=i,this.hp=document.createElement("div"),this.hp.classList.add("tv-lightweight-charts"),this.hp.style.overflow="hidden",this.hp.style.direction="ltr",this.hp.style.width="100%",this.hp.style.height="100%",(r=this.hp).style.userSelect="none",r.style.webkitUserSelect="none",r.style.msUserSelect="none",r.style.MozUserSelect="none",r.style.webkitTapHighlightColor="transparent",this.Cm=document.createElement("table"),this.Cm.setAttribute("cellspacing","0"),this.hp.appendChild(this.Cm),this.ym=this.Pm.bind(this),Pb(this.ys)&&this.km(!0),this.ts=new v2(this.Bu.bind(this),this.ys,i),this.Qt().ju().i(this.Tm.bind(this),this),this.Rm=new k2(this,this.Yo),this.Cm.appendChild(this.Rm.Rf());let s=t.autoSize&&this.Dm(),o=this.ys.width,a=this.ys.height;if(s||o===0||a===0){let l=e.getBoundingClientRect();o=o||l.width,a=a||l.height}this.Vm(o,a),this.Im(),e.appendChild(this.hp),this.Bm(),this.ts.At().pu().i(this.ts.Bh.bind(this.ts),this),this.ts.do().i(this.ts.Bh.bind(this.ts),this)}Qt(){return this.ts}N(){return this.ys}Sf(){return this.fm}Am(){return this.Rm}m(){this.km(!1),this.vm!==0&&window.cancelAnimationFrame(this.vm),this.ts.ju().u(this),this.ts.At().pu().u(this),this.ts.do().u(this),this.ts.m();for(let e of this.fm)this.Cm.removeChild(e.Rf()),e.Tv().u(this),e.Rv().u(this),e.m();this.fm=[];for(let e of this.pm)this.Em(e);this.pm=[],ce(this.Rm).m(),this.hp.parentElement!==null&&this.hp.parentElement.removeChild(this.hp),this.Vu.m(),this.sv.m(),this.nv.m(),this.zm()}Vm(e,t,i=!1){if(this.ja===t&&this.no===e)return;let r=function(a){let l=Math.floor(a.width),c=Math.floor(a.height);return yt({width:l-l%2,height:c-c%2})}(yt({width:e,height:t}));this.ja=r.height,this.no=r.width;let s=this.ja+"px",o=this.no+"px";ce(this.hp).style.height=s,ce(this.hp).style.width=o,this.Cm.style.height=s,this.Cm.style.width=o,i?this.Lm(Mn.gn(),performance.now()):this.ts.Bh()}Fp(e){e===void 0&&(e=Mn.gn());for(let t=0;t<this.fm.length;t++)this.fm[t].Fp(e.en(t).tn);this.ys.timeScale.visible&&this.Rm.Fp(e.nn())}hr(e){let t=Pb(this.ys);this.ts.hr(e);let i=Pb(this.ys);i!==t&&this.km(i),e.layout?.panes&&this.Om(),this.Bm(),this.Nm(e)}Tv(){return this.sv}Rv(){return this.nv}ju(){return this.Vu}Wm(){this.Mm!==null&&(this.Lm(this.Mm,performance.now()),this.Mm=null);let e=this.Fm(null),t=document.createElement("canvas");t.width=e.width,t.height=e.height;let i=ce(t.getContext("2d"));return this.Fm(i),t}Hm(e){return e==="left"&&!this.Um()||e==="right"&&!this.$m()||this.fm.length===0?0:ce(e==="left"?this.fm[0].zv():this.fm[0].Lv()).Wp()}qm(){return this.ys.autoSize&&this.xm!==null}Af(){return this.hp}Ym(e){this.Sm=e,this.Sm?this.Af().style.setProperty("cursor",e):this.Af().style.removeProperty("cursor")}jm(){return this.Sm}Zm(e){return ni(this.fm[e]).Df()}Om(){this.pm.forEach(e=>{e.Pt()})}Nm(e){(e.autoSize!==void 0||!this.xm||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.xm&&this.Dm(),e.autoSize===!1&&this.xm!==null&&this.zm(),e.autoSize||e.width===void 0&&e.height===void 0||this.Vm(e.width||this.no,e.height||this.ja))}Fm(e){let t=0,i=0,r=this.fm[0],s=(a,l)=>{let c=0;for(let u=0;u<this.fm.length;u++){let d=this.fm[u],h=ce(a==="left"?d.zv():d.Lv()),p=h.Vf();if(e!==null&&h.If(e,l,c),c+=p.height,u<this.fm.length-1){let g=this.pm[u],A=g.Vf();e!==null&&g.If(e,l,c),c+=A.height}}};this.Um()&&(s("left",0),t+=ce(r.zv()).Vf().width);for(let a=0;a<this.fm.length;a++){let l=this.fm[a],c=l.Vf();if(e!==null&&l.If(e,t,i),i+=c.height,a<this.fm.length-1){let u=this.pm[a],d=u.Vf();e!==null&&u.If(e,t,i),i+=d.height}}t+=r.Vf().width,this.$m()&&(s("right",t),t+=ce(r.Lv()).Vf().width);let o=(a,l,c)=>{ce(a==="left"?this.Rm.tm():this.Rm.im()).If(ce(e),l,c)};if(this.ys.timeScale.visible){let a=this.Rm.Vf();if(e!==null){let l=0;this.Um()&&(o("left",l,i),l=ce(r.zv()).Vf().width),this.Rm.If(e,l,i),l+=a.width,this.$m()&&o("right",l,i)}i+=a.height}return yt({width:t,height:i})}Km(){let e=0,t=0,i=0;for(let v of this.fm)this.Um()&&(t=Math.max(t,ce(v.zv()).zp(),this.ys.leftPriceScale.minimumWidth)),this.$m()&&(i=Math.max(i,ce(v.Lv()).zp(),this.ys.rightPriceScale.minimumWidth)),e+=v.fo();t=C2(t),i=C2(i);let r=this.no,s=this.ja,o=Math.max(r-t-i,0),a=1*this.pm.length,l=this.ys.timeScale.visible,c=l?Math.max(this.Rm.rm(),this.ys.timeScale.minimumHeight):0;var u;c=(u=c)+u%2;let d=a+c,h=s<d?0:s-d,p=h/e,g=0,A=window.devicePixelRatio||1;for(let v=0;v<this.fm.length;++v){let b=this.fm[v];b.vv(this.ts.$s()[v]);let E=0,O=0;O=v===this.fm.length-1?Math.ceil((h-g)*A)/A:Math.round(b.fo()*p*A)/A,E=Math.max(O,2),g+=E,b.Np(yt({width:o,height:E})),this.Um()&&b.Vv(t,"left"),this.$m()&&b.Vv(i,"right"),b.Wf()&&this.ts.Zu(b.Wf(),E)}this.Rm.nm(yt({width:l?o:0,height:c}),l?t:0,l?i:0),this.ts.vo(o),this.wm!==t&&(this.wm=t),this.gm!==i&&(this.gm=i)}km(e){e?this.hp.addEventListener("wheel",this.ym,{passive:!1}):this.hp.removeEventListener("wheel",this.ym)}Xm(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return sJ?1/window.devicePixelRatio:1}Pm(e){if(!(e.deltaX!==0&&this.ys.handleScroll.mouseWheel||e.deltaY!==0&&this.ys.handleScale.mouseWheel))return;let t=this.Xm(e),i=t*e.deltaX/100,r=-t*e.deltaY/100;if(e.cancelable&&e.preventDefault(),r!==0&&this.ys.handleScale.mouseWheel){let s=Math.sign(r)*Math.min(1,Math.abs(r)),o=e.clientX-this.hp.getBoundingClientRect().left;this.Qt().tc(o,s)}i!==0&&this.ys.handleScroll.mouseWheel&&this.Qt().sc(-80*i)}Lm(e,t){let i=e.nn();i===3&&this.Gm(),i!==3&&i!==2||(this.Jm(e),this.Qm(e,t),this.Rm.Pt(),this.fm.forEach(r=>{r.wv()}),this.Mm?.nn()===3&&(this.Mm.vn(e),this.Gm(),this.Jm(this.Mm),this.Qm(this.Mm,t),e=this.Mm,this.Mm=null)),this.Fp(e)}Qm(e,t){for(let i of e.pn())this.mn(i,t)}Jm(e){let t=this.ts.$s();for(let i=0;i<t.length;i++)e.en(i).sn&&t[i].Ao()}mn(e,t){let i=this.ts.At();switch(e.an){case 0:i.mu();break;case 1:i.wu(e.Ft);break;case 2:i.dn(e.Ft);break;case 3:i.fn(e.Ft);break;case 4:i.eu();break;case 5:e.Ft.uu(t)||i.fn(e.Ft.cu(t))}}Bu(e){this.Mm!==null?this.Mm.vn(e):this.Mm=e,this.bm||(this.bm=!0,this.vm=window.requestAnimationFrame(t=>{if(this.bm=!1,this.vm=0,this.Mm!==null){let i=this.Mm;this.Mm=null,this.Lm(i,t);for(let r of i.pn())if(r.an===5&&!r.Ft.uu(t)){this.Qt()._n(r.Ft);break}}}))}Gm(){this.Im()}Em(e){this.Cm.removeChild(e.Rf()),e.m()}Im(){let e=this.ts.$s(),t=e.length,i=this.fm.length;for(let r=t;r<i;r++){let s=ni(this.fm.pop());this.Cm.removeChild(s.Rf()),s.Tv().u(this),s.Rv().u(this),s.m();let o=this.pm.pop();o!==void 0&&this.Em(o)}for(let r=i;r<t;r++){let s=new I2(this,e[r]);if(s.Tv().i(this.tw.bind(this,s),this),s.Rv().i(this.iw.bind(this,s),this),this.fm.push(s),r>0){let o=new x2(this,r-1,r);this.pm.push(o),this.Cm.insertBefore(o.Rf(),this.Rm.Rf())}this.Cm.insertBefore(s.Rf(),this.Rm.Rf())}for(let r=0;r<t;r++){let s=e[r],o=this.fm[r];o.Wf()!==s?o.vv(s):o.pv()}this.Bm(),this.Km()}sw(e,t,i,r){let s=new Map;e!==null&&this.ts.js().forEach(d=>{let h=d.Ks().Wr(e);h!==null&&s.set(d,h)});let o;if(e!==null){let d=this.ts.At().ss(e)?.originalTime;d!==void 0&&(o=d)}let a=this.Qt().Hu(),l=a!==null&&a.Wo instanceof Oc?a.Wo:void 0,c=a!==null&&a.Fo!==void 0?a.Fo.Zn:void 0,u=this.nw(r);return{ew:o,Re:e??void 0,rw:t??void 0,hw:u!==-1?u:void 0,aw:l,lw:s,ow:c,_w:i??void 0}}nw(e){let t=-1;if(e)t=this.fm.indexOf(e);else{let i=this.Qt().Yu().Us();i!==null&&(t=this.Qt().$s().indexOf(i))}return t}tw(e,t,i,r){this.sv.p(()=>this.sw(t,i,r,e))}iw(e,t,i,r){this.nv.p(()=>this.sw(t,i,r,e))}Tm(e,t,i){this.Ym(this.Qt().Hu()?.Uo??null),this.Vu.p(()=>this.sw(e,t,i))}Bm(){let e=this.ys.timeScale.visible?"":"none";this.Rm.Rf().style.display=e}Um(){return this.fm[0].Wf().Co().N().visible}$m(){return this.fm[0].Wf().yo().N().visible}Dm(){return"ResizeObserver"in window&&(this.xm=new ResizeObserver(e=>{let t=e[e.length-1];t&&this.Vm(t.contentRect.width,t.contentRect.height)}),this.xm.observe(this.op,{box:"border-box"}),!0)}zm(){this.xm!==null&&this.xm.disconnect(),this.xm=null}};function Pb(n){return!!(n.handleScroll.mouseWheel||n.handleScale.mouseWheel)}function oJ(n){return n.open===void 0&&n.value===void 0}function aJ(n){return function(e){return e.open!==void 0}(n)||function(e){return e.value!==void 0}(n)}function ZR(n,e,t,i){let r=t.value,s={Re:e,wt:n,Ft:[r,r,r,r],ew:i};return t.color!==void 0&&(s.R=t.color),s}function lJ(n,e,t,i){let r=t.value,s={Re:e,wt:n,Ft:[r,r,r,r],ew:i};return t.lineColor!==void 0&&(s.vt=t.lineColor),t.topColor!==void 0&&(s.mr=t.topColor),t.bottomColor!==void 0&&(s.wr=t.bottomColor),s}function cJ(n,e,t,i){let r=t.value,s={Re:e,wt:n,Ft:[r,r,r,r],ew:i};return t.topLineColor!==void 0&&(s.gr=t.topLineColor),t.bottomLineColor!==void 0&&(s.Mr=t.bottomLineColor),t.topFillColor1!==void 0&&(s.br=t.topFillColor1),t.topFillColor2!==void 0&&(s.Sr=t.topFillColor2),t.bottomFillColor1!==void 0&&(s.Cr=t.bottomFillColor1),t.bottomFillColor2!==void 0&&(s.yr=t.bottomFillColor2),s}function uJ(n,e,t,i){let r={Re:e,wt:n,Ft:[t.open,t.high,t.low,t.close],ew:i};return t.color!==void 0&&(r.R=t.color),r}function dJ(n,e,t,i){let r={Re:e,wt:n,Ft:[t.open,t.high,t.low,t.close],ew:i};return t.color!==void 0&&(r.R=t.color),t.borderColor!==void 0&&(r.Ht=t.borderColor),t.wickColor!==void 0&&(r.vr=t.wickColor),r}function hJ(n,e,t,i,r){let s=ni(r)(t),o=Math.max(...s),a=Math.min(...s),l=s[s.length-1],c=[l,o,a,l],p=t,{time:u,color:d}=p,h=Zm(p,["time","color"]);return{Re:e,wt:n,Ft:c,ew:i,se:h,R:d}}function Ah(n){return n.Ft!==void 0}function XR(n,e){return e.customValues!==void 0&&(n.uw=e.customValues),n}function wa(n){return(e,t,i,r,s,o)=>function(a,l){return l?l(a):oJ(a)}(i,o)?XR({wt:e,Re:t,ew:r},i):XR(n(e,t,i,r,s),i)}function QR(n){return{Candlestick:wa(dJ),Bar:wa(uJ),Area:wa(lJ),Baseline:wa(cJ),Histogram:wa(ZR),Line:wa(ZR),Custom:wa(hJ)}[n]}function JR(n){return{Re:0,cw:new Map,Hh:n}}function e3(n,e){if(n!==void 0&&n.length!==0)return{dw:e.key(n[0].wt),fw:e.key(n[n.length-1].wt)}}function t3(n){let e;return n.forEach(t=>{e===void 0&&(e=t.ew)}),ni(e)}var N2=class{constructor(e){this.pw=new Map,this.mw=new Map,this.ww=new Map,this.gw=[],this.Yo=e}m(){this.pw.clear(),this.mw.clear(),this.ww.clear(),this.gw=[]}Mw(e,t){let i=this.pw.size!==0,r=!1,s=this.mw.get(e);if(s!==void 0)if(this.mw.size===1)i=!1,r=!0,this.pw.clear();else for(let l of this.gw)l.pointData.cw.delete(e)&&(r=!0);let o=[];if(t.length!==0){let l=t.map(p=>p.time),c=this.Yo.createConverterToInternalObj(t),u=QR(e.Rr()),d=e.da(),h=e.pa();o=t.map((p,g)=>{let A=c(p.time),v=this.Yo.key(A),b=this.pw.get(v);b===void 0&&(b=JR(A),this.pw.set(v,b),r=!0);let E=u(A,b.Re,p,l[g],d,h);return b.cw.set(e,E),E})}i&&this.bw(),this.xw(e,o);let a=-1;if(r){let l=[];this.pw.forEach(c=>{l.push({timeWeight:0,time:c.Hh,pointData:c,originalTime:t3(c.cw)})}),l.sort((c,u)=>this.Yo.key(c.time)-this.Yo.key(u.time)),a=this.Sw(l)}return this.Cw(e,a,function(l,c,u){let d=e3(l,u),h=e3(c,u);if(d!==void 0&&h!==void 0)return{yw:!1,zh:d.fw>=h.fw&&d.dw>=h.dw}}(this.mw.get(e),s,this.Yo))}vc(e){return this.Mw(e,[])}Pw(e,t,i){let r=t;(function(v){v.ew===void 0&&(v.ew=v.time)})(r),this.Yo.preprocessData(t);let s=this.Yo.createConverterToInternalObj([t])(t.time),o=this.ww.get(e);if(!i&&o!==void 0&&this.Yo.key(s)<this.Yo.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${s}`);let a=this.pw.get(this.Yo.key(s));if(i&&a===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");let l=a===void 0;a===void 0&&(a=JR(s),this.pw.set(this.Yo.key(s),a));let c=QR(e.Rr()),u=e.da(),d=e.pa(),h=c(s,a.Re,t,r.ew,u,d);a.cw.set(e,h),i?this.kw(e,h,a.Re):this.Tw(e,h);let p={zh:Ah(h),yw:i};if(!l)return this.Cw(e,-1,p);let g={timeWeight:0,time:a.Hh,pointData:a,originalTime:t3(a.cw)},A=Nc(this.gw,this.Yo.key(g.time),(v,b)=>this.Yo.key(v.time)<b);this.gw.splice(A,0,g);for(let v=A;v<this.gw.length;++v)Nb(this.gw[v].pointData,v);return this.Yo.fillWeightsForPoints(this.gw,A),this.Cw(e,A,p)}Tw(e,t){let i=this.mw.get(e);i===void 0&&(i=[],this.mw.set(e,i));let r=i.length!==0?i[i.length-1]:null;r===null||this.Yo.key(t.wt)>this.Yo.key(r.wt)?Ah(t)&&i.push(t):Ah(t)?i[i.length-1]=t:i.splice(-1,1),this.ww.set(e,t.wt)}kw(e,t,i){let r=this.mw.get(e);if(r===void 0)return;let s=Nc(r,i,(o,a)=>o.Re<a);Ah(t)?r[s]=t:r.splice(s,1)}xw(e,t){t.length!==0?(this.mw.set(e,t.filter(Ah)),this.ww.set(e,t[t.length-1].wt)):(this.mw.delete(e),this.ww.delete(e))}bw(){for(let e of this.gw)e.pointData.cw.size===0&&this.pw.delete(this.Yo.key(e.time))}Sw(e){let t=-1;for(let i=0;i<this.gw.length&&i<e.length;++i){let r=this.gw[i],s=e[i];if(this.Yo.key(r.time)!==this.Yo.key(s.time)){t=i;break}s.timeWeight=r.timeWeight,Nb(s.pointData,i)}if(t===-1&&this.gw.length!==e.length&&(t=Math.min(this.gw.length,e.length)),t===-1)return-1;for(let i=t;i<e.length;++i)Nb(e[i].pointData,i);return this.Yo.fillWeightsForPoints(e,t),this.gw=e,t}Rw(){if(this.mw.size===0)return null;let e=0;return this.mw.forEach(t=>{t.length!==0&&(e=Math.max(e,t[t.length-1].Re))}),e}Cw(e,t,i){let r={wo:new Map,At:{Y_:this.Rw()}};if(t!==-1)this.mw.forEach((s,o)=>{r.wo.set(o,{se:s,Dw:o===e?i:void 0})}),this.mw.has(e)||r.wo.set(e,{se:[],Dw:i}),r.At.Vw=this.gw,r.At.Iw=t;else{let s=this.mw.get(e);r.wo.set(e,{se:s||[],Dw:i})}return r}};function Nb(n,e){n.Re=e,n.cw.forEach(t=>{t.Re=e})}function pJ(n,e){return n.wt<e}function fJ(n,e){return e<n.wt}function w3(n,e,t){let i=e.Uh(),r=e.bi(),s=Nc(n,i,pJ),o=m3(n,r,fJ);if(!t)return{from:s,to:o};let a=s,l=o;return s>0&&s<n.length&&n[s].wt>=i&&(a=s-1),o>0&&o<n.length&&n[o-1].wt<=r&&(l=o+1),{from:a,to:l}}var Mh=class{constructor(e,t,i){this.Bw=!0,this.Aw=!0,this.Ew=!0,this.zw=[],this.Lw=null,this.Jn=e,this.Qn=t,this.Ow=i}Pt(e){this.Bw=!0,e==="data"&&(this.Aw=!0),e==="options"&&(this.Ew=!0)}Tt(){return this.Jn.Vt()?(this.Nw(),this.Lw===null?null:this.Ww):null}Fw(){this.zw=this.zw.map(e=>ie(ie({},e),this.Jn.Rh().Dr(e.wt)))}Hw(){this.Lw=null}Nw(){this.Aw&&(this.Uw(),this.Aw=!1),this.Ew&&(this.Fw(),this.Ew=!1),this.Bw&&(this.$w(),this.Bw=!1)}$w(){let e=this.Jn.Wt(),t=this.Qn.At();if(this.Hw(),t.Zi()||e.Zi())return;let i=t.ye();if(i===null||this.Jn.Ks().zr()===0)return;let r=this.Jn.zt();r!==null&&(this.Lw=w3(this.zw,i,this.Ow),this.qw(e,t,r.Ft),this.Yw())}},O2=class{constructor(e,t){this.jw=e,this.Yi=t}nt(e,t,i){this.jw.draw(e,this.Yi,t,i)}},R2=class extends Mh{constructor(e,t,i){super(e,t,!1),this.sh=i,this.Ww=new O2(this.sh.renderer(),r=>{let s=e.zt();return s===null?null:e.Wt().Nt(r,s.Ft)})}fa(e){return this.sh.priceValueBuilder(e)}va(e){return this.sh.isWhitespace(e)}Uw(){let e=this.Jn.Rh();this.zw=this.Jn.Ks().Hr().map(t=>Ie(ie({wt:t.Re,_t:NaN},e.Dr(t.Re)),{Zw:t.se}))}qw(e,t){t.j_(this.zw,xh(this.Lw))}Yw(){this.sh.update({bars:this.zw.map(gJ),barSpacing:this.Qn.At().Q_(),visibleRange:this.Lw},this.Jn.N())}};function gJ(n){return{x:n._t,time:n.wt,originalData:n.Zw,barColor:n.cr}}var mJ={color:"#2196f3"},_J=(n,e,t)=>{let i=ba(t);return new R2(n,e,i)};function iS(n){let e={value:n.Ft[3],time:n.ew};return n.uw!==void 0&&(e.customValues=n.uw),e}function n3(n){let e=iS(n);return n.R!==void 0&&(e.color=n.R),e}function AJ(n){let e=iS(n);return n.vt!==void 0&&(e.lineColor=n.vt),n.mr!==void 0&&(e.topColor=n.mr),n.wr!==void 0&&(e.bottomColor=n.wr),e}function yJ(n){let e=iS(n);return n.gr!==void 0&&(e.topLineColor=n.gr),n.Mr!==void 0&&(e.bottomLineColor=n.Mr),n.br!==void 0&&(e.topFillColor1=n.br),n.Sr!==void 0&&(e.topFillColor2=n.Sr),n.Cr!==void 0&&(e.bottomFillColor1=n.Cr),n.yr!==void 0&&(e.bottomFillColor2=n.yr),e}function b3(n){let e={open:n.Ft[0],high:n.Ft[1],low:n.Ft[2],close:n.Ft[3],time:n.ew};return n.uw!==void 0&&(e.customValues=n.uw),e}function vJ(n){let e=b3(n);return n.R!==void 0&&(e.color=n.R),e}function wJ(n){let e=b3(n),{R:t,Ht:i,vr:r}=n;return t!==void 0&&(e.color=t),i!==void 0&&(e.borderColor=i),r!==void 0&&(e.wickColor=r),e}function F2(n){return{Area:AJ,Line:n3,Baseline:yJ,Histogram:n3,Bar:vJ,Candlestick:wJ,Custom:bJ}[n]}function bJ(n){let e=n.ew;return Ie(ie({},n.se),{time:e})}var SJ={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},CJ={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},xJ={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:p3,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},Ob={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},DJ={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function i3(){return{width:0,height:0,autoSize:!1,layout:xJ,crosshair:SJ,grid:CJ,overlayPriceScales:ie({},Ob),leftPriceScale:Ie(ie({},Ob),{visible:!1}),rightPriceScale:Ie(ie({},Ob),{visible:!0}),timeScale:DJ,localization:{locale:Rc?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}var km=class{constructor(e,t,i){this.bf=e,this.Kw=t,this.Xw=i??0}applyOptions(e){this.bf.Qt().$u(this.Kw,e,this.Xw)}options(){return this.Yi().N()}width(){return Rm(this.Kw)?this.bf.Hm(this.Kw):0}Yi(){return ce(this.bf.Qt().qu(this.Kw,this.Xw)).Wt}},L2=class{constructor(e,t,i,r){this.bf=e,this.yt=i,this.Gw=t,this.Jw=r}getHeight(){return this.yt.$t()}setHeight(e){let t=this.bf.Qt(),i=t.Cc(this.yt);t.Xu(i,e)}paneIndex(){return this.bf.Qt().Cc(this.yt)}moveTo(e){let t=this.paneIndex();t!==e&&(qn(e>=0&&e<this.bf.Sf().length,"Invalid pane index"),this.bf.Qt().Gu(t,e))}getSeries(){return this.yt.wo().map(e=>this.Gw(e))??[]}getHTMLElement(){return this.bf.Sf()[this.paneIndex()].Rf()}attachPrimitive(e){this.yt.ua(e),e.attached&&e.attached({chart:this.Jw,requestUpdate:()=>this.yt.Qt().Bh()})}detachPrimitive(e){this.yt.ca(e)}priceScale(e){if(this.yt.co(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new km(this.bf,e,this.paneIndex())}},EJ={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""},Pm=class{constructor(e){this.ir=e}applyOptions(e){this.ir.hr(e)}options(){return this.ir.N()}Qw(){return this.ir}},V2=class{constructor(e,t,i,r,s,o){this.tg=new Wt,this.Jn=e,this.ig=t,this.sg=i,this.Yo=s,this.Jw=r,this.ng=o}m(){this.tg.m()}priceFormatter(){return this.Jn.ra()}priceToCoordinate(e){let t=this.Jn.zt();return t===null?null:this.Jn.Wt().Nt(e,t.Ft)}coordinateToPrice(e){let t=this.Jn.zt();return t===null?null:this.Jn.Wt().Ts(e,t.Ft)}barsInLogicalRange(e){if(e===null)return null;let t=new Tc(new ao(e.from,e.to)).o_(),i=this.Jn.Ks();if(i.Zi())return null;let r=i.Wr(t.Uh(),1),s=i.Wr(t.bi(),-1),o=ce(i.Lr()),a=ce(i.Zs());if(r!==null&&s!==null&&r.Re>s.Re)return{barsBefore:e.from-o,barsAfter:a-e.to};let l={barsBefore:r===null||r.Re===o?e.from-o:r.Re-o,barsAfter:s===null||s.Re===a?a-e.to:a-s.Re};return r!==null&&s!==null&&(l.from=r.ew,l.to=s.ew),l}setData(e){this.Yo,this.Jn.Rr(),this.ig.eg(this.Jn,e),this.rg("full")}update(e,t=!1){this.Jn.Rr(),this.ig.hg(this.Jn,e,t),this.rg("update")}dataByIndex(e,t){let i=this.Jn.Ks().Wr(e,t);return i===null?null:F2(this.seriesType())(i)}data(){let e=F2(this.seriesType());return this.Jn.Ks().Hr().map(t=>e(t))}subscribeDataChanged(e){this.tg.i(e)}unsubscribeDataChanged(e){this.tg._(e)}applyOptions(e){this.Jn.hr(e)}options(){return hs(this.Jn.N())}priceScale(){return this.sg.priceScale(this.Jn.Wt().wa(),this.getPane().paneIndex())}createPriceLine(e){let t=pi(hs(EJ),e),i=this.Jn.Oh(t);return new Pm(i)}removePriceLine(e){this.Jn.Nh(e.Qw())}priceLines(){return this.Jn.Wh().map(e=>new Pm(e))}seriesType(){return this.Jn.Rr()}attachPrimitive(e){this.Jn.ua(e),e.attached&&e.attached({chart:this.Jw,series:this,requestUpdate:()=>this.Jn.Qt().Bh(),horzScaleBehavior:this.Yo})}detachPrimitive(e){this.Jn.ca(e),e.detached&&e.detached(),this.Jn.Qt().Bh()}getPane(){let e=this.Jn,t=ce(this.Jn.Qt().Hn(e));return this.ng(t)}moveToPane(e){this.Jn.Qt().Mc(this.Jn,e)}rg(e){this.tg.v()&&this.tg.p(e)}},B2=class{constructor(e,t,i){this.ag=new Wt,this.g_=new Wt,this.Kv=new Wt,this.ts=e,this.uh=e.At(),this.Rm=t,this.uh.du().i(this.lg.bind(this)),this.uh.fu().i(this.og.bind(this)),this.Rm.sm().i(this._g.bind(this)),this.Yo=i}m(){this.uh.du().u(this),this.uh.fu().u(this),this.Rm.sm().u(this),this.ag.m(),this.g_.m(),this.Kv.m()}scrollPosition(){return this.uh.iu()}scrollToPosition(e,t){t?this.uh._u(e,1e3):this.ts.fn(e)}scrollToRealTime(){this.uh.ou()}getVisibleRange(){let e=this.uh.O_();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){let t={from:this.Yo.convertHorzItemToInternal(e.from),to:this.Yo.convertHorzItemToInternal(e.to)},i=this.uh.H_(t);this.ts.wc(i)}getVisibleLogicalRange(){let e=this.uh.L_();return e===null?null:{from:e.Uh(),to:e.bi()}}setVisibleLogicalRange(e){qn(e.from<=e.to,"The from index cannot be after the to index."),this.ts.wc(e)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.mu()}logicalToCoordinate(e){let t=this.ts.At();return t.Zi()?null:t.qt(e)}coordinateToLogical(e){return this.uh.Zi()?null:this.uh.Z_(e)}timeToIndex(e,t){let i=this.Yo.convertHorzItemToInternal(e);return this.uh.A_(i,t)}timeToCoordinate(e){let t=this.timeToIndex(e,!1);return t===null?null:this.uh.qt(t)}coordinateToTime(e){let t=this.ts.At(),i=t.Z_(e),r=t.ss(i);return r===null?null:r.originalTime}width(){return this.Rm.Df().width}height(){return this.Rm.Df().height}subscribeVisibleTimeRangeChange(e){this.ag.i(e)}unsubscribeVisibleTimeRangeChange(e){this.ag._(e)}subscribeVisibleLogicalRangeChange(e){this.g_.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.g_._(e)}subscribeSizeChange(e){this.Kv.i(e)}unsubscribeSizeChange(e){this.Kv._(e)}applyOptions(e){this.uh.hr(e)}options(){return Ie(ie({},hs(this.uh.N())),{barSpacing:this.uh.Q_()})}lg(){this.ag.v()&&this.ag.p(this.getVisibleRange())}og(){this.g_.v()&&this.g_.p(this.getVisibleLogicalRange())}_g(e){this.Kv.p(e.width,e.height)}};function MJ(n){if(n===void 0||n.type==="custom")return;let e=n;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(t){if(t>=1)return 0;let i=0;for(;i<8;i++){let r=Math.round(t);if(Math.abs(r-t)<1e-8)return i;t*=10}return i}(e.minMove))}function r3(n){return function(e){if(om(e.handleScale)){let i=e.handleScale;e.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(e.handleScale!==void 0){let{axisPressedMouseMove:i,axisDoubleClickReset:r}=e.handleScale;om(i)&&(e.handleScale.axisPressedMouseMove={time:i,price:i}),om(r)&&(e.handleScale.axisDoubleClickReset={time:r,price:r})}let t=e.handleScroll;om(t)&&(e.handleScroll={horzTouchDrag:t,vertTouchDrag:t,mouseWheel:t,pressedMouseMove:t})}(n),n}var q2=class{constructor(e,t,i){this.ug=new Map,this.cg=new Map,this.dg=new Wt,this.fg=new Wt,this.pg=new Wt,this.ku=new WeakMap,this.vg=new N2(t);let r=i===void 0?hs(i3()):pi(hs(i3()),r3(i));this.mg=t,this.bf=new P2(e,r,t),this.bf.Tv().i(o=>{this.dg.v()&&this.dg.p(this.wg(o()))},this),this.bf.Rv().i(o=>{this.fg.v()&&this.fg.p(this.wg(o()))},this),this.bf.ju().i(o=>{this.pg.v()&&this.pg.p(this.wg(o()))},this);let s=this.bf.Qt();this.gg=new B2(s,this.bf.Am(),this.mg)}remove(){this.bf.Tv().u(this),this.bf.Rv().u(this),this.bf.ju().u(this),this.gg.m(),this.bf.m(),this.ug.clear(),this.cg.clear(),this.dg.m(),this.fg.m(),this.pg.m(),this.vg.m()}resize(e,t,i){this.autoSizeActive()||this.bf.Vm(e,t,i)}addCustomSeries(e,t={},i=0){let r=(s=>({type:"Custom",isBuiltIn:!1,defaultOptions:ie(ie({},mJ),s.defaultOptions()),Mg:_J,bg:s}))(ba(e));return this.xg(r,t,i)}addSeries(e,t={},i=0){return this.xg(e,t,i)}removeSeries(e){let t=ni(this.ug.get(e)),i=this.vg.vc(t);this.bf.Qt().vc(t),this.Sg(i),this.ug.delete(e),this.cg.delete(t)}eg(e,t){this.Sg(this.vg.Mw(e,t))}hg(e,t,i){this.Sg(this.vg.Pw(e,t,i))}subscribeClick(e){this.dg.i(e)}unsubscribeClick(e){this.dg._(e)}subscribeCrosshairMove(e){this.pg.i(e)}unsubscribeCrosshairMove(e){this.pg._(e)}subscribeDblClick(e){this.fg.i(e)}unsubscribeDblClick(e){this.fg._(e)}priceScale(e,t=0){return new km(this.bf,e,t)}timeScale(){return this.gg}applyOptions(e){this.bf.hr(r3(e))}options(){return this.bf.N()}takeScreenshot(){return this.bf.Wm()}removePane(e){this.bf.Qt().Ku(e)}swapPanes(e,t){this.bf.Qt().Gu(e,t)}autoSizeActive(){return this.bf.qm()}chartElement(){return this.bf.Af()}panes(){return this.bf.Qt().$s().map(e=>this.Cg(e))}paneSize(e=0){let t=this.bf.Zm(e);return{height:t.height,width:t.width}}setCrosshairPosition(e,t,i){let r=this.ug.get(i);if(r===void 0)return;let s=this.bf.Qt().Hn(r);s!==null&&this.bf.Qt().oc(e,t,s)}clearCrosshairPosition(){this.bf.Qt()._c(!0)}horzBehaviour(){return this.mg}xg(e,t={},i=0){qn(e.Mg!==void 0),MJ(t.priceFormat),e.type==="Candlestick"&&function(l){l.borderColor!==void 0&&(l.borderUpColor=l.borderColor,l.borderDownColor=l.borderColor),l.wickColor!==void 0&&(l.wickUpColor=l.wickColor,l.wickDownColor=l.wickColor)}(t);let r=pi(hs(d3),hs(e.defaultOptions),t),s=e.Mg,o=new Oc(this.bf.Qt(),e.type,r,s,e.bg);this.bf.Qt().dc(o,i);let a=new V2(o,this,this,this,this.mg,l=>this.Cg(l));return this.ug.set(a,o),this.cg.set(o,a),a}Sg(e){let t=this.bf.Qt();t.uc(e.At.Y_,e.At.Vw,e.At.Iw),e.wo.forEach((i,r)=>r.ht(i.se,i.Dw)),t.At().R_(),t.J_()}yg(e){return ni(this.cg.get(e))}wg(e){let t=new Map;e.lw.forEach((r,s)=>{let o=s.Rr(),a=F2(o)(r);if(o!=="Custom")qn(aJ(a));else{let l=s.pa();qn(!l||l(a)===!1)}t.set(this.yg(s),a)});let i=e.aw!==void 0&&this.cg.has(e.aw)?this.yg(e.aw):void 0;return{time:e.ew,logical:e.Re,point:e.rw,paneIndex:e.hw,hoveredSeries:i,hoveredObjectId:e.ow,seriesData:t,sourceEvent:e._w}}Cg(e){let t=this.ku.get(e);return t||(t=new L2(this.bf,i=>this.yg(i),e,this),this.ku.set(e,t)),t}};function TJ(n){if(Th(n)){let e=document.getElementById(n);return qn(e!==null,`Cannot find element in DOM with id=${n}`),e}return n}function IJ(n,e,t){let i=TJ(n),r=new q2(i,e,t);return e.setOptions(r.options()),r}function ht(n,e){return IJ(n,new Mm,Mm.Wc(e))}var Nm=class extends Mh{constructor(e,t){super(e,t,!0)}qw(e,t,i){t.j_(this.zw,xh(this.Lw)),e.Dl(this.zw,i,xh(this.Lw))}Pg(e,t){return{wt:e,gt:t,_t:NaN,ut:NaN}}Uw(){let e=this.Jn.Rh();this.zw=this.Jn.Ks().Hr().map(t=>{let i=t.Ft[3];return this.kg(t.Re,i,e)})}};function kJ(n,e,t,i,r,s,o){if(e.length===0||i.from>=e.length||i.to<=0)return;let{context:a,horizontalPixelRatio:l,verticalPixelRatio:c}=n,u=e[i.from],d=s(n,u),h=u;if(i.to-i.from<2){let p=r/2;a.beginPath();let g={_t:u._t-p,ut:u.ut},A={_t:u._t+p,ut:u.ut};a.moveTo(g._t*l,g.ut*c),a.lineTo(A._t*l,A.ut*c),o(n,d,g,A)}else{let p=(A,v)=>{o(n,d,h,v),a.beginPath(),d=A,h=v},g=h;a.beginPath(),a.moveTo(u._t*l,u.ut*c);for(let A=i.from+1;A<i.to;++A){g=e[A];let v=s(n,g);switch(t){case 0:a.lineTo(g._t*l,g.ut*c);break;case 1:a.lineTo(g._t*l,e[A-1].ut*c),v!==d&&(p(v,g),a.lineTo(g._t*l,e[A-1].ut*c)),a.lineTo(g._t*l,g.ut*c);break;case 2:{let[b,E]=PJ(e,A-1,A);a.bezierCurveTo(b._t*l,b.ut*c,E._t*l,E.ut*c,g._t*l,g.ut*c);break}}t!==1&&v!==d&&(p(v,g),a.moveTo(g._t*l,g.ut*c))}(h!==g||h===g&&t===1)&&o(n,d,h,g)}}var s3=6;function Rb(n,e){return{_t:n._t-e._t,ut:n.ut-e.ut}}function o3(n,e){return{_t:n._t/e,ut:n.ut/e}}function PJ(n,e,t){let i=Math.max(0,e-1),r=Math.min(n.length-1,t+1);var s,o;return[(s=n[e],o=o3(Rb(n[t],n[i]),s3),{_t:s._t+o._t,ut:s.ut+o.ut}),Rb(n[t],o3(Rb(n[r],n[e]),s3))]}function NJ(n,e){let t=n.context;t.strokeStyle=e,t.stroke()}var j2=class extends Or{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et(e){if(this.rt===null)return;let{ot:t,lt:i,Tg:r,Rg:s,ct:o,Kt:a,Dg:l}=this.rt;if(i===null)return;let c=e.context;c.lineCap="butt",c.lineWidth=o*e.verticalPixelRatio,Ic(c,a),c.lineJoin="round";let u=this.Vg.bind(this);s!==void 0&&kJ(e,t,s,i,r,u,NJ),l&&function(d,h,p,g,A){if(g.to-g.from<=0)return;let{horizontalPixelRatio:v,verticalPixelRatio:b,context:E}=d,O=null,T=Math.max(1,Math.floor(v))%2/2,k=p*b+T;for(let D=g.to-1;D>=g.from;--D){let M=h[D];if(M){let N=A(d,M);N!==O&&(E.beginPath(),O!==null&&E.fill(),E.fillStyle=N,O=N);let L=Math.round(M._t*v)+T,B=M.ut*b;E.moveTo(L,B),E.arc(L,B,k,0,2*Math.PI)}}E.fill()}(e,t,l,i,u)}},W2=class extends j2{Vg(e,t){return t.vt}},U2=class extends Nm{constructor(){super(...arguments),this.Ww=new W2}kg(e,t,i){return ie(ie({},this.Pg(e,t)),i.Dr(e))}Yw(){let e=this.Jn.N(),t={ot:this.zw,Kt:e.lineStyle,Rg:e.lineVisible?e.lineType:void 0,ct:e.lineWidth,Dg:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,lt:this.Lw,Tg:this.Qn.At().Q_()};this.Ww.ht(t)}},ft={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Mg:(n,e)=>new U2(n,e)};var z2=class extends Mh{constructor(e,t){super(e,t,!1)}qw(e,t,i){t.j_(this.zw,xh(this.Lw)),e.Il(this.zw,i,xh(this.Lw))}aM(e,t,i){return{wt:e,qh:t.Ft[0],Yh:t.Ft[1],jh:t.Ft[2],Zh:t.Ft[3],_t:NaN,Bl:NaN,Al:NaN,El:NaN,zl:NaN}}Uw(){let e=this.Jn.Rh();this.zw=this.Jn.Ks().Hr().map(t=>this.kg(t.Re,t,e))}};var H2=class extends Or{constructor(){super(...arguments),this.Yt=null,this.sM=0}ht(e){this.Yt=e}et(e){if(this.Yt===null||this.Yt.Ks.length===0||this.Yt.lt===null)return;let{horizontalPixelRatio:t}=e;this.sM=function(s,o){if(s>=2.5&&s<=4)return Math.floor(3*o);let a=1-.2*Math.atan(Math.max(4,s)-4)/(.5*Math.PI),l=Math.floor(s*a*o),c=Math.floor(s*o),u=Math.min(l,c);return Math.max(Math.floor(o),u)}(this.Yt.Q_,t),this.sM>=2&&Math.floor(t)%2!=this.sM%2&&this.sM--;let i=this.Yt.Ks;this.Yt.lM&&this.oM(e,i,this.Yt.lt),this.Yt.Mi&&this.$p(e,i,this.Yt.lt);let r=this._M(t);(!this.Yt.Mi||this.sM>2*r)&&this.uM(e,i,this.Yt.lt)}oM(e,t,i){if(this.Yt===null)return;let{context:r,horizontalPixelRatio:s,verticalPixelRatio:o}=e,a="",l=Math.min(Math.floor(s),Math.floor(this.Yt.Q_*s));l=Math.max(Math.floor(s),Math.min(l,this.sM));let c=Math.floor(.5*l),u=null;for(let d=i.from;d<i.to;d++){let h=t[d];h.pr!==a&&(r.fillStyle=h.pr,a=h.pr);let p=Math.round(Math.min(h.Bl,h.zl)*o),g=Math.round(Math.max(h.Bl,h.zl)*o),A=Math.round(h.Al*o),v=Math.round(h.El*o),b=Math.round(s*h._t)-c,E=b+l-1;u!==null&&(b=Math.max(u+1,b),b=Math.min(b,E));let O=E-b+1;r.fillRect(b,A,O,p-A),r.fillRect(b,g+1,O,v-g),u=E}}_M(e){let t=Math.floor(1*e);this.sM<=2*t&&(t=Math.floor(.5*(this.sM-1)));let i=Math.max(Math.floor(e),t);return this.sM<=2*i?Math.max(Math.floor(e),Math.floor(1*e)):i}$p(e,t,i){if(this.Yt===null)return;let{context:r,horizontalPixelRatio:s,verticalPixelRatio:o}=e,a="",l=this._M(s),c=null;for(let u=i.from;u<i.to;u++){let d=t[u];d.dr!==a&&(r.fillStyle=d.dr,a=d.dr);let h=Math.round(d._t*s)-Math.floor(.5*this.sM),p=h+this.sM-1,g=Math.round(Math.min(d.Bl,d.zl)*o),A=Math.round(Math.max(d.Bl,d.zl)*o);if(c!==null&&(h=Math.max(c+1,h),h=Math.min(h,p)),this.Yt.Q_*s>2*l)RQ(r,h,g,p-h+1,A-g+1,l);else{let v=p-h+1;r.fillRect(h,g,v,A-g+1)}c=p}}uM(e,t,i){if(this.Yt===null)return;let{context:r,horizontalPixelRatio:s,verticalPixelRatio:o}=e,a="",l=this._M(s);for(let c=i.from;c<i.to;c++){let u=t[c],d=Math.round(Math.min(u.Bl,u.zl)*o),h=Math.round(Math.max(u.Bl,u.zl)*o),p=Math.round(u._t*s)-Math.floor(.5*this.sM),g=p+this.sM-1;if(u.cr!==a){let A=u.cr;r.fillStyle=A,a=A}this.Yt.Mi&&(p+=l,d+=l,g-=l,h-=l),d>h||r.fillRect(p,d,g-p+1,h-d+1)}}},Y2=class extends z2{constructor(){super(...arguments),this.Ww=new H2}kg(e,t,i){return ie(ie({},this.aM(e,t,i)),i.Dr(e))}Yw(){let e=this.Jn.N();this.Ww.ht({Ks:this.zw,Q_:this.Qn.At().Q_(),lM:e.wickVisible,Mi:e.borderVisible,lt:this.Lw})}},It={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Mg:(n,e)=>new Y2(n,e)},G2=class extends Or{constructor(){super(...arguments),this.Yt=null,this.cM=[]}ht(e){this.Yt=e,this.cM=[]}et({context:e,horizontalPixelRatio:t,verticalPixelRatio:i}){if(this.Yt===null||this.Yt.ot.length===0||this.Yt.lt===null)return;this.cM.length||this.dM(t);let r=Math.max(1,Math.floor(i)),s=Math.round(this.Yt.fM*i)-Math.floor(r/2),o=s+r;for(let a=this.Yt.lt.from;a<this.Yt.lt.to;a++){let l=this.Yt.ot[a],c=this.cM[a-this.Yt.lt.from],u=Math.round(l.ut*i),d,h;e.fillStyle=l.cr,u<=s?(d=u,h=o):(d=s,h=u-Math.floor(r/2)+r),e.fillRect(c.Uh,d,c.bi-c.Uh+1,h-d)}}dM(e){if(this.Yt===null||this.Yt.ot.length===0||this.Yt.lt===null)return void(this.cM=[]);let t=Math.ceil(this.Yt.Q_*e)<=1?0:Math.max(1,Math.floor(e)),i=Math.round(this.Yt.Q_*e)-t;this.cM=new Array(this.Yt.lt.to-this.Yt.lt.from);for(let s=this.Yt.lt.from;s<this.Yt.lt.to;s++){let o=this.Yt.ot[s],a=Math.round(o._t*e),l,c;if(i%2){let u=(i-1)/2;l=a-u,c=a+u}else{let u=i/2;l=a-u,c=a+u-1}this.cM[s-this.Yt.lt.from]={Uh:l,bi:c,pM:a,ne:o._t*e,wt:o.wt}}for(let s=this.Yt.lt.from+1;s<this.Yt.lt.to;s++){let o=this.cM[s-this.Yt.lt.from],a=this.cM[s-this.Yt.lt.from-1];o.wt===a.wt+1&&o.Uh-a.bi!==t+1&&(a.pM>a.ne?a.bi=o.Uh-t-1:o.Uh=a.bi+t+1)}let r=Math.ceil(this.Yt.Q_*e);for(let s=this.Yt.lt.from;s<this.Yt.lt.to;s++){let o=this.cM[s-this.Yt.lt.from];o.bi<o.Uh&&(o.bi=o.Uh);let a=o.bi-o.Uh+1;r=Math.min(a,r)}if(t>0&&r<4)for(let s=this.Yt.lt.from;s<this.Yt.lt.to;s++){let o=this.cM[s-this.Yt.lt.from];o.bi-o.Uh+1>r&&(o.pM>o.ne?o.bi-=1:o.Uh+=1)}}},K2=class extends Nm{constructor(){super(...arguments),this.Ww=new G2}kg(e,t,i){return ie(ie({},this.Pg(e,t)),i.Dr(e))}Yw(){let e={ot:this.zw,Q_:this.Qn.At().Q_(),lt:this.Lw,fM:this.Jn.Wt().Nt(this.Jn.N().base,ce(this.Jn.zt()).Ft)};this.Ww.ht(e)}},S3={type:"Histogram",isBuiltIn:!0,defaultOptions:{color:"#26a69a",base:0},Mg:(n,e)=>new K2(n,e)};var $2=class{constructor(e,t){this.Jn=e,this.ah=t,this.mM()}detach(){this.Jn.detachPrimitive(this.ah)}getSeries(){return this.Jn}applyOptions(e){this.ah&&this.ah.hr&&this.ah.hr(e)}mM(){this.Jn.attachPrimitive(this.ah)}};function bh(n,e){return eS(Math.min(Math.max(n,12),30)*e)}function Lc(n,e){switch(n){case"arrowDown":case"arrowUp":return bh(e,1);case"circle":return bh(e,.8);case"square":return bh(e,.7)}}function C3(n){return function(e){let t=Math.ceil(e);return t%2!=0?t-1:t}(bh(n,1))}function x3(n){return Math.max(bh(n,.1),3)}function a3(n,e,t){return e?n:t?Math.ceil(n/2):0}function l3(n,e,t,i){let r=(Lc("arrowUp",i)-1)/2*t.WM,s=(eS(i/2)-1)/2*t.WM;e.beginPath(),n?(e.moveTo(t._t-r,t.ut),e.lineTo(t._t,t.ut-r),e.lineTo(t._t+r,t.ut),e.lineTo(t._t+s,t.ut),e.lineTo(t._t+s,t.ut+r),e.lineTo(t._t-s,t.ut+r),e.lineTo(t._t-s,t.ut)):(e.moveTo(t._t-r,t.ut),e.lineTo(t._t,t.ut+r),e.lineTo(t._t+r,t.ut),e.lineTo(t._t+s,t.ut),e.lineTo(t._t+s,t.ut-r),e.lineTo(t._t-s,t.ut-r),e.lineTo(t._t-s,t.ut)),e.fill()}function c3(n,e,t,i,r,s){let o=(Lc("arrowUp",i)-1)/2,a=(eS(i/2)-1)/2;return r>=e-a-2&&r<=e+a+2&&s>=(n?t:t-o)-2&&s<=(n?t+o:t)+2?!0:(()=>{if(r<e-o-3||r>e+o+3||s<(n?t-o-3:t)||s>(n?t:t+o+3))return!1;let l=Math.abs(r-e);return Math.abs(s-t)+3>=l/2})()}var Z2=class{constructor(){this.Yt=null,this.On=new Ca,this.W=-1,this.F="",this.Mp=""}ht(e){this.Yt=e}Nn(e,t){this.W===e&&this.F===t||(this.W=e,this.F=t,this.Mp=Dh(e,t),this.On.In())}jn(e,t){if(this.Yt===null||this.Yt.lt===null)return null;for(let i=this.Yt.lt.from;i<this.Yt.lt.to;i++){let r=this.Yt.ot[i];if(r&&RJ(r,e,t))return{zOrder:"normal",externalId:r.Zn??""}}return null}draw(e){e.useBitmapCoordinateSpace(t=>{this.et(t)})}et({context:e,horizontalPixelRatio:t,verticalPixelRatio:i}){if(this.Yt!==null&&this.Yt.lt!==null){e.textBaseline="middle",e.font=this.Mp;for(let r=this.Yt.lt.from;r<this.Yt.lt.to;r++){let s=this.Yt.ot[r];s.ri!==void 0&&(s.ri.Qi=this.On.Vi(e,s.ri.FM),s.ri.$t=this.W,s.ri._t=s._t-s.ri.Qi/2),OJ(s,e,t,i)}}}};function OJ(n,e,t,i){e.fillStyle=n.R,n.ri!==void 0&&function(r,s,o,a,l,c){r.save(),r.scale(l,c),r.fillText(s,o,a),r.restore()}(e,n.ri.FM,n.ri._t,n.ri.ut,t,i),function(r,s,o){if(r.zr!==0){switch(r.HM){case"arrowDown":return void l3(!1,s,o,r.zr);case"arrowUp":return void l3(!0,s,o,r.zr);case"circle":return void function(a,l,c){let u=(Lc("circle",c)-1)/2;a.beginPath(),a.arc(l._t,l.ut,u*l.WM,0,2*Math.PI,!1),a.fill()}(s,o,r.zr);case"square":return void function(a,l,c){let u=Lc("square",c),d=(u-1)*l.WM/2,h=l._t-d,p=l.ut-d;a.fillRect(h,p,u*l.WM,u*l.WM)}(s,o,r.zr)}r.HM}}(n,e,function(r,s,o){let a=Math.max(1,Math.floor(s))%2/2;return{_t:Math.round(r._t*s)+a,ut:r.ut*o,WM:s}}(n,t,i))}function RJ(n,e,t){return!(n.ri===void 0||!function(i,r,s,o,a,l){let c=o/2;return a>=i&&a<=i+s&&l>=r-c&&l<=r+c}(n.ri._t,n.ri.ut,n.ri.Qi,n.ri.$t,e,t))||function(i,r,s){if(i.zr===0)return!1;switch(i.HM){case"arrowDown":return c3(!0,i._t,i.ut,i.zr,r,s);case"arrowUp":return c3(!1,i._t,i.ut,i.zr,r,s);case"circle":return function(o,a,l,c,u){let d=2+Lc("circle",l)/2,h=o-c,p=a-u;return Math.sqrt(h*h+p*p)<=d}(i._t,i.ut,i.zr,r,s);case"square":return function(o,a,l,c,u){let d=Lc("square",l),h=(d-1)/2,p=o-h,g=a-h;return c>=p&&c<=p+d&&u>=g&&u<=g+d}(i._t,i.ut,i.zr,r,s)}}(n,e,t)}function u3(n){return n==="atPriceTop"||n==="atPriceBottom"||n==="atPriceMiddle"}function FJ(n,e,t,i,r,s,o,a){let l=function(g,A){if(u3(A.position)&&A.price!==void 0)return A.price;if("value"in(v=g)&&typeof v.value=="number")return g.value;var v;if(function(b){return"open"in b&&"high"in b&&"low"in b&&"close"in b}(g)){if(A.position==="inBar")return g.close;if(A.position==="aboveBar")return g.high;if(A.position==="belowBar")return g.low}}(t,e);if(l===void 0)return;let c=u3(e.position),u=a.timeScale(),d=Sa(e.size)?Math.max(e.size,0):1,h=C3(u.options().barSpacing)*d,p=h/2;switch(n.zr=h,e.position){case"inBar":case"atPriceMiddle":return n.ut=ce(o.priceToCoordinate(l)),void(n.ri!==void 0&&(n.ri.ut=n.ut+p+s+.6*r));case"aboveBar":case"atPriceTop":{let g=c?0:i.UM;return n.ut=ce(o.priceToCoordinate(l))-p-g,n.ri!==void 0&&(n.ri.ut=n.ut-p-.6*r,i.UM+=1.2*r),void(c||(i.UM+=h+s))}case"belowBar":case"atPriceBottom":{let g=c?0:i.$M;return n.ut=ce(o.priceToCoordinate(l))+p+g,n.ri!==void 0&&(n.ri.ut=n.ut+p+s+.6*r,i.$M+=1.2*r),void(c||(i.$M+=h+s))}}}var X2=class{constructor(e,t){this.qM=[],this.St=!0,this.YM=!0,this.Gt=new Z2,this.ge=e,this._p=t,this.Yt={ot:[],lt:null}}renderer(){if(!this.ge.options().visible)return null;this.St&&this.jM();let e=this._p.options().layout;return this.Gt.Nn(e.fontSize,e.fontFamily),this.Gt.ht(this.Yt),this.Gt}ZM(e){this.qM=e,this.Pt("data")}Pt(e){this.St=!0,e==="data"&&(this.YM=!0)}jM(){let e=this._p.timeScale(),t=this.qM;this.YM&&(this.Yt.ot=t.map(c=>({wt:c.time,_t:0,ut:0,zr:0,HM:c.shape,R:c.color,Zn:c.id,KM:c.KM,ri:void 0})),this.YM=!1);let i=this._p.options().layout;this.Yt.lt=null;let r=e.getVisibleLogicalRange();if(r===null)return;let s=new ao(Math.floor(r.from),Math.ceil(r.to));if(this.ge.data()[0]===null||this.Yt.ot.length===0)return;let o=NaN,a=x3(e.options().barSpacing),l={UM:a,$M:a};this.Yt.lt=w3(this.Yt.ot,s,!0);for(let c=this.Yt.lt.from;c<this.Yt.lt.to;c++){let u=t[c];u.time!==o&&(l.UM=a,l.$M=a,o=u.time);let d=this.Yt.ot[c];d._t=ce(e.logicalToCoordinate(u.time)),u.text!==void 0&&u.text.length>0&&(d.ri={FM:u.text,_t:0,ut:0,Qi:0,$t:0});let h=this.ge.dataByIndex(u.time,0);h!==null&&FJ(d,u,h,l,i.fontSize,a,this.ge,this._p)}this.St=!1}},Q2=class{constructor(){this.sh=null,this.qM=[],this.XM=[],this.GM=null,this.ge=null,this._p=null,this.JM=!0,this.QM=null,this.tb=null,this.ib=null,this.sb=!0}attached(e){this.nb(),this._p=e.chart,this.ge=e.series,this.sh=new X2(this.ge,ce(this._p)),this.OM=e.requestUpdate,this.ge.subscribeDataChanged(t=>this.rg(t)),this.sb=!0,this.SM()}SM(){this.OM&&this.OM()}detached(){this.ge&&this.GM&&this.ge.unsubscribeDataChanged(this.GM),this._p=null,this.ge=null,this.sh=null,this.GM=null}ZM(e){this.sb=!0,this.qM=e,this.nb(),this.JM=!0,this.tb=null,this.SM()}eb(){return this.qM}paneViews(){return this.sh?[this.sh]:[]}updateAllViews(){this.rb()}hitTest(e,t){return this.sh?this.sh.renderer()?.jn(e,t)??null:null}autoscaleInfo(e,t){if(this.sh){let i=this.hb();if(i)return{priceRange:null,margins:i}}return null}hb(){let e=ce(this._p).timeScale().options().barSpacing;if(this.JM||e!==this.ib){if(this.ib=e,this.qM.length>0){let t=x3(e),i=1.5*C3(e)+2*t,r=this.ab();this.QM={above:a3(i,r.aboveBar,r.inBar),below:a3(i,r.belowBar,r.inBar)}}else this.QM=null;this.JM=!1}return this.QM}ab(){return this.tb===null&&(this.tb=this.qM.reduce((e,t)=>(e[t.position]||(e[t.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1,atPriceTop:!1,atPriceBottom:!1,atPriceMiddle:!1})),this.tb}nb(){if(!this.sb||!this._p||!this.ge)return;let e=this._p.timeScale(),t=this.ge?.data();if(e.getVisibleLogicalRange()==null||!this.ge||t.length===0)return void(this.XM=[]);let i=e.timeToIndex(ce(t[0].time),!0);this.XM=this.qM.map((r,s)=>{let o=e.timeToIndex(r.time,!0),a=o<i?1:-1,l=ce(this.ge).dataByIndex(o,a),c={time:e.timeToIndex(ce(l).time,!1),position:r.position,shape:r.shape,color:r.color,id:r.id,KM:s,text:r.text,size:r.size,price:r.price,ew:r.time};if(r.position==="atPriceTop"||r.position==="atPriceBottom"||r.position==="atPriceMiddle"){if(r.price===void 0)throw new Error(`Price is required for position ${r.position}`);return Ie(ie({},c),{position:r.position,price:r.price})}return Ie(ie({},c),{position:r.position,price:r.price})}),this.sb=!1}rb(e){this.sh&&(this.nb(),this.sh.ZM(this.XM),this.sh.Pt(e))}rg(e){this.sb=!0,this.SM()}},J2=class extends $2{constructor(e,t,i){super(e,t),i&&this.setMarkers(i)}setMarkers(e){this.ah.ZM(e)}markers(){return this.ah.eb()}};function Ea(n,e){let t=new J2(n,new Q2);return e&&t.setMarkers(e),t}var fSe=Ie(ie({},d3),{color:"#2196f3"});var rS=Ta(Lm());var Vm=class n{constructor(e,t,i,r,s,o){this.http=e;this.mapService=t;this.fyersService=i;this.aliceblueService=r;this.zerodhaService=s;this.appService=o}charts={};candlestickSeries={};strike_interval;charts_instru;charts_expiry;charts_data={};fetch_delay=200;fetch_ce_interval;fetch_pe_interval;refresh_ce_interval;refresh_pe_interval;spot_chart_instru;spot_chart_chart;spot_candlestickSeries;spot_charts_data;spot_chart_instru2;spot_chart_chart2;spot_candlestickSeries2;spot_charts_data2;single_strike_ce;single_strike_pe;single_chart_ce;single_chart_pe;single_chart_ce_candlestickSeries;single_chart_ce_lineSeries;single_chart_pe_candlestickSeries;single_chart_pe_lineSeries;strangle_chart_chart;strangle_strike_ce;strangle_strike_pe;strangle_chart_candlestickSeries;stock_chart_data;stock_chart_chart;stock_lineSeries1;updateInstruExpiry(e=null,t=null){e&&(this.charts_instru=e),t&&(this.charts_expiry=t)}initSpotChart(e,t=!1){this.spot_chart_instru=e,this.spot_chart_chart&&this.spot_chart_chart.remove();let i=320,r=200;t&&(i=600,r=400);let s="spot-chart";this.spot_chart_chart=ht(s,{width:i,height:r,timeScale:{timeVisible:!0}}),this.spot_candlestickSeries=this.spot_chart_chart.addSeries(It),this.fetchSpotChartData()}initSpotChart2(e,t=!1){this.spot_chart_instru2=e,this.spot_chart_chart2&&this.spot_chart_chart2.remove();let i=320,r=200;t&&(i=600,r=400);let s="spot-chart2";this.spot_chart_chart2=ht(s,{width:i,height:r,timeScale:{timeVisible:!0}}),this.spot_candlestickSeries2=this.spot_chart_chart2.addSeries(It),this.fetchSpotChartData2()}fetchSpotChartData(){let e=this.appService.getLastWorkingDay(new Date),t=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),i=new Date,r=""+i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2),s=this.mapService.getZerodhaInstruToken(this.spot_chart_instru);if(s){let a={responseType:"json",headers:new Fe({authorization:f.broker_auth})},l="https://kite.zerodha.com/oms/instruments/historical/"+s+"/minute?user_id="+f.zerodhaUserId+"&oi=1&from="+t+"&to="+r;this.http.get(l,a).subscribe(c=>{if(c.data.candles){let u=c.data.candles,d=[];u.length===0&&console.log("ZERO CANDLES FOR ",this.spot_chart_instru);for(let h=0;h<u.length;h++){let p=u[h],g=this.spot_charts_data;g||(g=[]);let A=p[0].replace("+0530","Z");g.push([A,p[1],p[2],p[3],p[4],p[5],p[6]]),this.spot_charts_data=g;let v={time:Date.parse(A)/1e3,open:p[1],high:p[2],low:p[3],close:p[4]};d.push(v)}this.spot_candlestickSeries.setData(d)}console.log("spot candles:",Object.keys(this.spot_chart_chart).length,this.spot_chart_chart)},c=>{console.log("zerodha spot fetch chart error",c)})}this.single_chart_ce&&this.fetchChartData(this.single_strike_ce,!1),this.single_chart_pe&&setTimeout(()=>{this.fetchChartData(this.single_strike_pe,!1)},300),setTimeout(()=>{this.updateSingleChart(this.single_strike_ce,"CE",!1),this.updateSingleChart(this.single_strike_pe,"PE",!1)},1500),this.fetchStrangleStrikesData(this.strangle_strike_ce,this.strangle_strike_pe,!1)}fetchSpotChartData2(){let e=this.appService.getLastWorkingDay(new Date),t=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),i=new Date,r=""+i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2),s=this.mapService.getZerodhaInstruToken(this.spot_chart_instru2);if(s){let a={responseType:"json",headers:new Fe({authorization:f.broker_auth})},l="https://kite.zerodha.com/oms/instruments/historical/"+s+"/minute?user_id="+f.zerodhaUserId+"&oi=1&from="+t+"&to="+r;this.http.get(l,a).subscribe(c=>{if(c.data.candles){let u=c.data.candles,d=[];u.length===0&&console.log("ZERO CANDLES FOR ",this.spot_chart_instru2);for(let h=0;h<u.length;h++){let p=u[h],g=this.spot_charts_data2;g||(g=[]);let A=p[0].replace("+0530","Z");g.push([A,p[1],p[2],p[3],p[4],p[5],p[6]]),this.spot_charts_data2=g;let v={time:Date.parse(A)/1e3,open:p[1],high:p[2],low:p[3],close:p[4]};d.push(v)}this.spot_candlestickSeries2.setData(d)}console.log("spot candles:",Object.keys(this.spot_chart_chart2).length,this.spot_chart_chart2)},c=>{console.log("zerodha spot fetch chart error",c)})}}plotCurrentPrices(){let e=this.mapService.getScripLTP(null,null,this.spot_chart_instru,null),t=this.spot_charts_data,i=t[t.length-1],r={time:Date.parse(i[0])/1e3,open:i[1],high:i[2],low:i[3],close:e};this.spot_candlestickSeries.update(r);let s=this.mapService.getScripLTP(null,null,this.spot_chart_instru2,null),o=this.spot_charts_data2,a=o[o.length-1],l={time:Date.parse(a[0])/1e3,open:a[1],high:a[2],low:a[3],close:s};if(this.spot_candlestickSeries2.update(l),this.single_strike_ce){let c=this.mapService.getScripLTP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(this.single_strike_ce).scrip,this.mapService.parseScrip(this.single_strike_ce).type),u=this.charts_data[this.single_strike_ce],d=u[u.length-1],h={time:Date.parse(d[0])/1e3,open:d[1],high:d[2],low:d[3],close:c};this.single_chart_ce_candlestickSeries.update(h);let p=this.mapService.getScripATP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(this.single_strike_ce).scrip,this.mapService.parseScrip(this.single_strike_ce).type),g={time:Date.parse(d[0])/1e3,value:p};this.single_chart_ce_lineSeries.update(g)}if(this.single_strike_pe){let c=this.mapService.getScripLTP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(this.single_strike_pe).scrip,this.mapService.parseScrip(this.single_strike_pe).type),u=this.charts_data[this.single_strike_pe],d=u[u.length-1],h={time:Date.parse(d[0])/1e3,open:d[1],high:d[2],low:d[3],close:c};this.single_chart_pe_candlestickSeries.update(h);let p=this.mapService.getScripATP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(this.single_strike_pe).scrip,this.mapService.parseScrip(this.single_strike_pe).type),g={time:Date.parse(d[0])/1e3,value:p};this.single_chart_pe_lineSeries.update(g)}if(this.strangle_strike_ce&&this.strangle_strike_pe){let c=this.mapService.getScripLTP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(this.strangle_strike_ce).scrip,this.mapService.parseScrip(this.strangle_strike_ce).type),u=this.mapService.getScripLTP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(this.strangle_strike_pe).scrip,this.mapService.parseScrip(this.strangle_strike_pe).type),d=c+u,h=this.charts_data[this.strangle_strike_ce+"_"+this.strangle_strike_pe],p=h[h.length-1],g={time:Date.parse(p[0])/1e3,value:d};this.strangle_chart_candlestickSeries.update(g)}}resizeSingleCharts(e){e?(this.spot_chart_chart.resize(600,400),this.single_chart_ce&&this.single_chart_ce.resize(600,400),this.single_chart_pe&&this.single_chart_pe.resize(600,400)):(this.spot_chart_chart.resize(320,200),this.single_chart_ce&&this.single_chart_ce.resize(320,200),this.single_chart_pe&&this.single_chart_pe.resize(320,200))}updateSingleChart(e,t,i=!0,r=!1){if(e){let s=[],o=[],a=this.charts_data[e];if(!a)return;let l=this.mapService.getScripATP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(e).scrip,this.mapService.parseScrip(e).type);a.forEach(d=>{let h={time:Date.parse(d[0])/1e3,open:d[1],high:d[2],low:d[3],close:d[4]};s.push(h);let p={time:Date.parse(d[0])/1e3,value:l};o.push(p)});let c=320,u=200;if(r&&(c=600,u=400),t==="CE"){if(this.single_strike_ce=e,i){this.single_chart_ce&&this.single_chart_ce.remove();let d="chart-ce";this.single_chart_ce=ht(d,{width:c,height:u,timeScale:{timeVisible:!0},crosshair:{mode:Ut.Normal}}),this.single_chart_ce_candlestickSeries=this.single_chart_ce.addSeries(It),this.single_chart_ce_lineSeries=this.single_chart_ce.addSeries(ft,{color:"#2962FF",lineWidth:2})}this.single_chart_ce_candlestickSeries.setData(s),this.single_chart_ce_lineSeries.setData(o)}else if(t==="PE"){if(this.single_strike_pe=e,i){this.single_chart_pe&&this.single_chart_pe.remove();let d="chart-pe";this.single_chart_pe=ht(d,{width:c,height:u,timeScale:{timeVisible:!0},crosshair:{mode:Ut.Normal}}),this.single_chart_pe_candlestickSeries=this.single_chart_pe.addSeries(It),this.single_chart_pe_lineSeries=this.single_chart_pe.addSeries(ft,{color:"#2962FF",lineWidth:2})}this.single_chart_pe_candlestickSeries.setData(s),this.single_chart_pe_lineSeries.setData(o)}}}init_opt_charts(e,t,i,r,s,o,a){for(let l in this.charts)Object.prototype.hasOwnProperty.call(this.charts,l)&&this.charts[l].remove();this.charts={},this.fetch_ce_interval&&clearInterval(this.fetch_ce_interval),this.fetch_pe_interval&&clearInterval(this.fetch_pe_interval),this.refresh_ce_interval&&clearInterval(this.refresh_ce_interval),this.refresh_pe_interval&&clearInterval(this.refresh_pe_interval),this.charts_instru=e,this.strike_interval=o,this.charts_expiry=a,this.initForCallsPuts(t,i,o,"CE"),this.initForCallsPuts(r,s,o,"PE")}initForCallsPuts(e,t,i,r){let s=0;for(let c=t;c>=e;c-=i){let u="opt_chart_"+s+r;console.log("div_id",u);let d=ht(u,{width:320,height:200,timeScale:{timeVisible:!0}}),h=d.addSeries(It);this.candlestickSeries[""+c+r]=h,this.charts[""+c+r]=d,s++}let o=0;for(let c=t;c>=e;c-=i)setTimeout(()=>{this.fetchChartData(c+r)},o*this.fetch_delay),o++;let a=this.fetch_ce_interval;r==="PE"&&(a=this.fetch_pe_interval),a=setInterval(()=>{let c=0;for(let u=t;u>=e;u-=i)setTimeout(()=>{this.fetchChartData(u+r)},c*this.fetch_delay),c++},6e4);let l=this.refresh_ce_interval;r==="PE"&&(l=this.refresh_pe_interval),l=setInterval(()=>{for(let c=t;c>=e;c-=i)this.plotOptChartsCurrentPrice(c+r)},1e3)}fetchChartData(e,t=!0){let i=this.mapService.getSubscriptionObject(e,this.charts_instru,this.charts_expiry),r=this.zerodhaService.findStrikeInMasters(i),s=this.appService.getLastWorkingDay(new Date),o=""+s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2),a=new Date,l=""+a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2);if(r&&r.token){let u={responseType:"json",headers:new Fe({authorization:f.broker_auth})},d="https://kite.zerodha.com/oms/instruments/historical/"+r.token+"/minute?user_id="+f.zerodhaUserId+"&oi=1&from="+o+"&to="+l;this.http.get(d,u).subscribe(h=>{if(h.data.candles){let p=h.data.candles;p.length===0&&console.log("ZERO CANDLES FOR ",e);let g=[];this.charts_data[e]=[];let A=[];for(let v=0;v<p.length;v++){let b=p[v],E=b[0].replace("+0530","Z");A.push([E,b[1],b[2],b[3],b[4],b[5],b[6]]);let O={time:Date.parse(E)/1e3,open:b[1],high:b[2],low:b[3],close:b[4]};g.push(O)}if(this.charts_data[e]=A,t){this.candlestickSeries[""+e].setData(g);let b=this.charts[""+e]}}console.log("candles:",Object.keys(this.charts_data).length,this.charts_data)},h=>{console.log("zerodha fetch chart error",h)})}}plotOptChartsCurrentPrice(e){let t=this.mapService.getScripLTP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(e).scrip,this.mapService.parseScrip(e).type),i=this.charts_data[e],r=i[i.length-1],s=this.candlestickSeries[""+e],o={time:Date.parse(r[0])/1e3,open:r[1],high:r[2],low:r[3],close:t};s.update(o)}fetchStrangleStrikesData(e,t,i=!0){e&&t&&(this.fetchChartData(e,!1),this.fetchChartData(t,!1),setTimeout(()=>{this.updateStrangleChart(e,t,i)},3e3))}updateStrangleChart(e,t,i=!0){if(e&&t){this.strangle_strike_ce=e,this.strangle_strike_pe=t;let r=[],s=this.charts_data[e];if(!s)return;let o=this.charts_data[t];if(!o)return;let a=this.getStrangleValues(s,o);if(this.charts_data[this.strangle_strike_ce+"_"+this.strangle_strike_pe]=a,a.forEach(l=>{let c={time:Date.parse(l[0])/1e3,value:l[1]};r.push(c)}),i){this.strangle_chart_chart&&this.strangle_chart_chart.remove();let l="strangle-chart";this.strangle_chart_chart=ht(l,{width:320,height:200,timeScale:{timeVisible:!0}}),this.strangle_chart_candlestickSeries=this.strangle_chart_chart.addSeries(ft)}this.strangle_chart_candlestickSeries.setData(r)}}initTV_charts_static(){let t=ht("tv_test",{width:400,height:200,timeScale:{timeVisible:!0}}).addSeries(It),i="2018-06-25T09:15:00+0530";i=i.replace("+0530","Z"),t.setData([{time:Date.parse(i)/1e3,open:75.16,high:82.84,low:36.16,close:45.72},{time:Date.parse("2018-06-25T09:20:00.000Z")/1e3,open:45.12,high:53.9,low:45.12,close:48.09},{time:Date.parse("2018-06-25T09:25:00.000Z")/1e3,open:60.71,high:60.71,low:53.39,close:59.29},{time:Date.parse("2018-06-25T09:30:00.000Z")/1e3,open:68.26,high:68.26,low:59.04,close:60.5},{time:Date.parse("2018-06-25T09:35:00.000Z")/1e3,open:67.71,high:105.85,low:66.67,close:91.04},{time:Date.parse("2018-06-25T09:40:00.000Z")/1e3,open:91.04,high:121.4,low:82.7,close:111.4},{time:Date.parse("2018-06-25T09:45:00.000Z")/1e3,open:111.51,high:142.83,low:103.34,close:131.25},{time:Date.parse("2018-06-25T09:50:00.000Z")/1e3,open:131.33,high:151.17,low:77.68,close:96.43},{time:Date.parse("2018-06-25T09:55:00.000Z")/1e3,open:106.33,high:110.2,low:90.39,close:98.1},{time:Date.parse("2018-06-25T10:00:00.000Z")/1e3,open:109.87,high:114.69,low:85.66,close:111.26}])}initTV_charts_changing(){var t=ht("tv_test",{width:400,height:200}).addSeries(It),i=[{time:"2018-10-19",open:54.62,high:55.5,low:54.52,close:54.9},{time:"2018-10-22",open:55.08,high:55.27,low:54.61,close:54.98},{time:"2018-10-23",open:56.09,high:57.47,low:56.09,close:57.21},{time:"2018-10-24",open:57,high:58.44,low:56.41,close:57.42},{time:"2018-10-25",open:57.46,high:57.63,low:56.17,close:56.43},{time:"2018-10-26",open:56.26,high:56.62,low:55.19,close:55.51},{time:"2018-10-29",open:55.81,high:57.15,low:55.72,close:56.48},{time:"2018-10-30",open:56.92,high:58.8,low:56.92,close:58.18},{time:"2018-10-31",open:58.32,high:58.32,low:56.76,close:57.09},{time:"2018-11-01",open:56.98,high:57.28,low:55.55,close:56.05},{time:"2018-11-02",open:56.34,high:57.08,low:55.92,close:56.63},{time:"2018-11-05",open:56.51,high:57.45,low:56.51,close:57.21},{time:"2018-11-06",open:57.02,high:57.35,low:56.65,close:57.21},{time:"2018-11-07",open:57.55,high:57.78,low:57.03,close:57.65},{time:"2018-11-08",open:57.7,high:58.44,low:57.66,close:58.27},{time:"2018-11-09",open:58.32,high:59.2,low:57.94,close:58.46},{time:"2018-11-12",open:58.84,high:59.4,low:58.54,close:58.72},{time:"2018-11-13",open:59.09,high:59.14,low:58.32,close:58.66},{time:"2018-11-14",open:59.13,high:59.32,low:58.41,close:58.94},{time:"2018-11-15",open:58.85,high:59.09,low:58.45,close:59.08},{time:"2018-11-16",open:59.06,high:60.39,low:58.91,close:60.21},{time:"2018-11-19",open:60.25,high:61.32,low:60.18,close:60.62},{time:"2018-11-20",open:61.03,high:61.58,low:59.17,close:59.46},{time:"2018-11-21",open:59.26,high:59.9,low:58.88,close:59.16},{time:"2018-11-23",open:58.86,high:59,low:58.29,close:58.64},{time:"2018-11-26",open:58.64,high:59.51,low:58.31,close:59.17},{time:"2018-11-27",open:59.21,high:60.7,low:59.18,close:60.65},{time:"2018-11-28",open:60.7,high:60.73,low:59.64,close:60.06},{time:"2018-11-29",open:59.42,high:59.79,low:59.26,close:59.45},{time:"2018-11-30",open:59.57,high:60.37,low:59.48,close:60.3},{time:"2018-12-03",open:59.5,high:59.75,low:57.69,close:58.16},{time:"2018-12-04",open:58.1,high:59.4,low:57.96,close:58.09},{time:"2018-12-06",open:58.18,high:58.64,low:57.16,close:58.08},{time:"2018-12-07",open:57.91,high:58.43,low:57.34,close:57.68},{time:"2018-12-10",open:57.8,high:58.37,low:56.87,close:58.27},{time:"2018-12-11",open:58.77,high:59.4,low:58.63,close:58.85},{time:"2018-12-12",open:57.79,high:58.19,low:57.23,close:57.25},{time:"2018-12-13",open:57,high:57.5,low:56.81,close:57.09},{time:"2018-12-14",open:56.95,high:57.5,low:56.75,close:57.08},{time:"2018-12-17",open:57.06,high:57.31,low:55.53,close:55.95},{time:"2018-12-18",open:55.94,high:56.69,low:55.31,close:55.65},{time:"2018-12-19",open:55.72,high:56.92,low:55.5,close:55.86},{time:"2018-12-20",open:55.92,high:56.01,low:54.26,close:55.07},{time:"2018-12-21",open:54.84,high:56.53,low:54.24,close:54.92},{time:"2018-12-24",open:54.68,high:55.04,low:52.94,close:53.05},{time:"2018-12-26",open:53.23,high:54.47,low:52.4,close:54.44},{time:"2018-12-27",open:54.31,high:55.17,low:53.35,close:55.15},{time:"2018-12-28",open:55.37,high:55.86,low:54.9,close:55.27},{time:"2018-12-31",open:55.53,high:56.23,low:55.07,close:56.22},{time:"2019-01-02",open:56.16,high:56.16,low:55.28,close:56.02},{time:"2019-01-03",open:56.3,high:56.99,low:56.06,close:56.22},{time:"2019-01-04",open:56.49,high:56.89,low:55.95,close:56.36},{time:"2019-01-07",open:56.76,high:57.26,low:56.55,close:56.72},{time:"2019-01-08",open:57.27,high:58.69,low:57.05,close:58.38},{time:"2019-01-09",open:57.68,high:57.72,low:56.85,close:57.05},{time:"2019-01-10",open:57.29,high:57.7,low:56.87,close:57.6},{time:"2019-01-11",open:57.84,high:58.26,low:57.42,close:58.02},{time:"2019-01-14",open:57.83,high:58.15,low:57.67,close:58.03},{time:"2019-01-15",open:57.74,high:58.29,low:57.58,close:58.1},{time:"2019-01-16",open:57.93,high:57.93,low:57,close:57.08},{time:"2019-01-17",open:57.16,high:57.4,low:56.21,close:56.83},{time:"2019-01-18",open:56.92,high:57.47,low:56.84,close:57.09},{time:"2019-01-22",open:57.23,high:57.39,low:56.4,close:56.99},{time:"2019-01-23",open:56.98,high:57.87,low:56.93,close:57.76},{time:"2019-01-24",open:57.61,high:57.65,low:56.5,close:57.07},{time:"2019-01-25",open:57.18,high:57.47,low:56.23,close:56.4},{time:"2019-01-28",open:56.12,high:56.22,low:54.8,close:55.07},{time:"2019-01-29",open:53.62,high:54.3,low:52.97,close:53.28},{time:"2019-01-30",open:53.1,high:54.02,low:52.28,close:54},{time:"2019-01-31",open:54.05,high:55.19,low:53.53,close:55.06},{time:"2019-02-01",open:55.21,high:55.3,low:54.47,close:54.55},{time:"2019-02-04",open:54.6,high:54.69,low:53.67,close:54.04},{time:"2019-02-05",open:54.1,high:54.34,low:53.61,close:54.14},{time:"2019-02-06",open:54.11,high:54.37,low:53.68,close:53.79},{time:"2019-02-07",open:53.61,high:53.73,low:53.02,close:53.57},{time:"2019-02-08",open:53.36,high:53.96,low:53.3,close:53.95},{time:"2019-02-11",open:54.13,high:54.37,low:53.86,close:54.05},{time:"2019-02-12",open:54.45,high:54.77,low:54.19,close:54.42},{time:"2019-02-13",open:54.35,high:54.77,low:54.28,close:54.48},{time:"2019-02-14",open:54.38,high:54.52,low:53.95,close:54.03},{time:"2019-02-15",open:54.48,high:55.19,low:54.32,close:55.16},{time:"2019-02-19",open:55.06,high:55.66,low:54.82,close:55.44},{time:"2019-02-20",open:55.37,high:55.91,low:55.24,close:55.76},{time:"2019-02-21",open:55.55,high:56.72,low:55.46,close:56.15},{time:"2019-02-22",open:56.43,high:57.13,low:56.4,close:56.92},{time:"2019-02-25",open:57,high:57.27,low:56.55,close:56.78},{time:"2019-02-26",open:56.82,high:57.09,low:56.46,close:56.64},{time:"2019-02-27",open:56.55,high:56.73,low:56.35,close:56.72},{time:"2019-02-28",open:56.74,high:57.61,low:56.72,close:56.92},{time:"2019-03-01",open:57.02,high:57.15,low:56.35,close:56.96},{time:"2019-03-04",open:57.15,high:57.34,low:55.66,close:56.24},{time:"2019-03-05",open:56.09,high:56.17,low:55.51,close:56.08},{time:"2019-03-06",open:56.19,high:56.42,low:55.45,close:55.68},{time:"2019-03-07",open:55.76,high:56.4,low:55.72,close:56.3},{time:"2019-03-08",open:56.36,high:56.68,low:56,close:56.53},{time:"2019-03-11",open:56.76,high:57.62,low:56.75,close:57.58},{time:"2019-03-12",open:57.63,high:58.11,low:57.36,close:57.43},{time:"2019-03-13",open:57.37,high:57.74,low:57.34,close:57.66},{time:"2019-03-14",open:57.71,high:58.09,low:57.51,close:57.95},{time:"2019-03-15",open:58.04,high:58.51,low:57.93,close:58.39},{time:"2019-03-18",open:58.27,high:58.32,low:57.56,close:58.07},{time:"2019-03-19",open:58.1,high:58.2,low:57.31,close:57.5},{time:"2019-03-20",open:57.51,high:58.05,low:57.11,close:57.67},{time:"2019-03-21",open:57.58,high:58.49,low:57.57,close:58.29},{time:"2019-03-22",open:58.16,high:60,low:58.13,close:59.76},{time:"2019-03-25",open:59.63,high:60.19,low:59.53,close:60.08},{time:"2019-03-26",open:60.3,high:60.69,low:60.17,close:60.63},{time:"2019-03-27",open:60.56,high:61.19,low:60.48,close:60.88},{time:"2019-03-28",open:60.88,high:60.89,low:58.44,close:59.08},{time:"2019-03-29",open:59.2,high:59.27,low:58.32,close:59.13},{time:"2019-04-01",open:59.39,high:59.41,low:58.79,close:59.09},{time:"2019-04-02",open:59.22,high:59.23,low:58.34,close:58.53},{time:"2019-04-03",open:58.78,high:59.07,low:58.41,close:58.87},{time:"2019-04-04",open:58.84,high:59.1,low:58.77,close:58.99},{time:"2019-04-05",open:59.02,high:59.09,low:58.82,close:59.09},{time:"2019-04-08",open:59.02,high:59.13,low:58.72,close:59.13},{time:"2019-04-09",open:58.37,high:58.56,low:58.04,close:58.4},{time:"2019-04-10",open:58.4,high:58.7,low:58.36,close:58.61},{time:"2019-04-11",open:58.65,high:58.73,low:58.2,close:58.56},{time:"2019-04-12",open:58.75,high:58.79,low:58.52,close:58.74},{time:"2019-04-15",open:58.91,high:58.95,low:58.59,close:58.71},{time:"2019-04-16",open:58.79,high:58.98,low:58.66,close:58.79},{time:"2019-04-17",open:58.4,high:58.46,low:57.64,close:57.78},{time:"2019-04-18",open:57.51,high:58.2,low:57.28,close:58.04},{time:"2019-04-22",open:58.14,high:58.49,low:57.89,close:58.37},{time:"2019-04-23",open:57.62,high:57.72,low:56.3,close:57.15},{time:"2019-04-24",open:57.34,high:57.57,low:56.73,close:57.08},{time:"2019-04-25",open:56.82,high:56.9,low:55.75,close:55.85},{time:"2019-04-26",open:56.06,high:56.81,low:55.83,close:56.58},{time:"2019-04-29",open:56.75,high:57.17,low:56.71,close:56.84},{time:"2019-04-30",open:56.99,high:57.45,low:56.76,close:57.19},{time:"2019-05-01",open:57.23,high:57.3,low:56.52,close:56.52},{time:"2019-05-02",open:56.81,high:58.23,low:56.68,close:56.99},{time:"2019-05-03",open:57.15,high:57.36,low:56.87,close:57.24},{time:"2019-05-06",open:56.83,high:57.09,low:56.74,close:56.91},{time:"2019-05-07",open:56.69,high:56.81,low:56.33,close:56.63},{time:"2019-05-08",open:56.66,high:56.7,low:56.25,close:56.38},{time:"2019-05-09",open:56.12,high:56.56,low:55.93,close:56.48},{time:"2019-05-10",open:56.49,high:57.04,low:56.26,close:56.91},{time:"2019-05-13",open:56.72,high:57.34,low:56.66,close:56.75},{time:"2019-05-14",open:56.76,high:57.19,low:56.5,close:56.55},{time:"2019-05-15",open:56.51,high:56.84,low:56.17,close:56.81},{time:"2019-05-16",open:57,high:57.8,low:56.82,close:57.38},{time:"2019-05-17",open:57.06,high:58.48,low:57.01,close:58.09},{time:"2019-05-20",open:59.15,high:60.54,low:58,close:59.01},{time:"2019-05-21",open:59.1,high:59.63,low:58.76,close:59.5},{time:"2019-05-22",open:59.09,high:59.37,low:58.96,close:59.25},{time:"2019-05-23",open:59,high:59.27,low:58.54,close:58.87},{time:"2019-05-24",open:59.07,high:59.36,low:58.67,close:59.32},{time:"2019-05-28",open:59.21,high:59.66,low:59.02,close:59.57}];t.setData(i);var r=i[i.length-1].close,s=i.length-1,o=s+105+Math.round(Math.random()+30),a=g(),l=s+1,c={day:29,month:5,year:2019},u=0,d={open:null,high:null,low:null,close:null,time:c};function h(v){d.open===null?(d.open=v,d.high=v,d.low=v,d.close=v):(d.close=v,d.high=Math.max(d.high,v),d.low=Math.min(d.low,v)),t.update(d)}function p(){t.setData(i),r=i[i.length-1].close,s=i.length-1,o=s+5+Math.round(Math.random()+30),a=g(),l=s+1,c={day:29,month:5,year:2019},u=0}function g(){return 10+Math.round(Math.random()*1e4)/100}function A(v){var b=new Date;return b.setUTCFullYear(v.year),b.setUTCMonth(v.month-1),b.setUTCDate(v.day+1),b.setUTCHours(0,0,0,0),{year:b.getUTCFullYear(),month:b.getUTCMonth()+1,day:b.getUTCDate()}}setInterval(function(){var v=a-r,b=o-s,E=v/b,O=r+(l-s)*E,T=.1-Math.random()*.2+1,k=O*T;if(h(k),++u===5){if(l++,c=A(c),d={open:null,high:null,low:null,close:null,time:c},u=0,l===5e3){p();return}l===o&&(r=k,s=l,o=s+5+Math.round(Math.random()+30),a=g())}},200)}processData_simulated(e,t,i,r,s=!1,o=null,a=null,l=!1,c=null){let u=qe.stockChartData[e+"WK"+t+i];u||(u=qe.stockChartData[e+t+i]);let d=[],h=-1;for(let T=0;T<u.length;T++){let k=u[T],D=k[0],M=new Date(D);if(o){let N=new Date(r);N.setHours(o,a),s?N&&M.getTime()>=N.getTime()&&(d.push(k),h===-1&&(h=T)):N&&M.getTime()>=N.getTime()&&M.getDate()===r.getDate()&&M.getMonth()===r.getMonth()&&M.getFullYear()===r.getFullYear()&&(d.push(k),h===-1&&(h=T))}else if(l){let N=new Date(r);N&&N.setDate(N.getDate()+1),N&&M<N&&(d.push(k),h===-1&&(h=T))}else r&&M.getDate()===r.getDate()&&M.getMonth()===r.getMonth()&&M.getFullYear()===r.getFullYear()&&(d.push(k),h===-1&&(h=T))}if(console.log("trimmedData:",d),c&&c===1)return d;let p=[],g=null,A=null,v=null,b=null,E=null,O=0;for(let T=0;T<d.length;T++){let k=d[T],D=k[0];new Date(D).getMinutes()%5===0?(g&&p.push([g,A,v,b,E,O]),g=k[0],A=k[1],v=k[2],b=k[3],E=null,O=0):(A===null&&(A=k[1]),(v===null||k[2]>v)&&(v=k[2]),(b===null||k[3]<b)&&(b=k[3]),(new Date(D).getMinutes()+1)%5===0&&(E=k[4]),T===d.length-1&&(E=k[4],p.push([g,A,v,b,E,O])),O+=k[5])}return console.log("processed_data:",p),p}initSpotChart_simulated(e,t,i=!1,r=null,s=null){this.spot_chart_instru=e,this.spot_chart_chart&&this.spot_chart_chart.remove();let o="spot-chart-simulate";this.spot_chart_chart=ht(o,{width:320,height:200,timeScale:{timeVisible:!0}}),this.spot_candlestickSeries=this.spot_chart_chart.addSeries(It);let a=new Date().getTimezoneOffset()*6e4,l=this.processData_simulated(e,"","",t,i,r,s),c=[];for(let u=0;u<l.length;u++){let d=l[u],h=new Date(d[0]-a).toISOString(),p={time:Date.parse(h)/1e3,open:d[1],high:d[2],low:d[3],close:d[4]};c.push(p)}this.spot_candlestickSeries.setData(c),this.spot_chart_chart.timeScale().fitContent()}init_opt_charts_simulated(e,t,i,r,s,o,a){for(let l in this.charts)Object.prototype.hasOwnProperty.call(this.charts,l)&&this.charts[l].remove();this.charts={},this.charts_instru=e,this.strike_interval=o,this.charts_expiry=a,this.initForCallsPuts_simulated(t,i,o,"CE"),this.initForCallsPuts_simulated(r,s,o,"PE")}initForCallsPuts_simulated(e,t,i,r){let s=new Date().getTimezoneOffset()*6e4,o=0;for(let a=t;a>=e;a-=i){let l="opt_chart_"+o+r;console.log("div_id",l);let c=ht(l,{width:320,height:200,timeScale:{timeVisible:!0}}),u=this.processData_simulated(this.charts_instru,a,r,this.charts_expiry),d=[];for(let p=0;p<u.length;p++){let g=u[p],A=new Date(g[0]-s).toISOString(),v={time:Date.parse(A)/1e3,open:g[1],high:g[2],low:g[3],close:g[4]};d.push(v)}let h=c.addSeries(It);h.setData(d),c.timeScale().fitContent(),this.candlestickSeries[""+a+r]=h,this.charts[""+a+r]=c,o++}}getStrangleValues(e,t){let i=[];for(let r=0;r<e.length;r++){let s=e[r],o=t[r],a;typeof s[4]<"u"?a=s[4]+o[4]:a=s[1]+o[1],i.push([s[0],a])}return i}createStockChart(){let e="stock-chart";this.stock_chart_chart&&this.stock_chart_chart.remove(),this.stock_chart_chart=ht(e,{width:1200,height:400,timeScale:{timeVisible:!0}});let t={},i=JSON.parse(localStorage.getItem("curr_positions"+f.stocksStrategyNum));i&&i.trades&&i.trades.forEach(a=>{let l=new Date(a.entryDateTime.split(" ")[0]),c=null;a.exitDateTime&&(c=new Date(a.exitDateTime.split(" ")[0]));let u=new Date;for(;l<=u;){let d=0;if(c&&l>=c)d+=a.qty*(a.exit-a.entry);else{let p=de.candlesData[a.scrip],g=new Date(l);g.setHours(0,0,0,0);let A=null;for(;!A;){let b=this.zerodhaService.getDateInFormat(g);if(A=p[b],A)break;g.setDate(g.getDate()-1)}let v=A[3];d+=a.qty*v}let h=l.toISOString().split("T")[0];h in t||(t[h]=0),t[h]+=d,t[h]=Math.round((t[h]+1e-5)*100)/100,l.setDate(l.getDate()+1)}});let r=Object.entries(t).sort(([o],[a])=>new Date(o).getTime()-new Date(a).getTime()),s=new Date().getTimezoneOffset()*6e4;this.stock_chart_data=[];for(let[o,a]of r){let l=new Date(o),c=new Date(l.getTime()-s).toISOString(),u={time:Date.parse(c)/1e3,value:a};this.stock_chart_data.push(u)}this.stock_lineSeries1=this.stock_chart_chart.addSeries(ft,{color:"#2962FF",lineWidth:2}),this.stock_lineSeries1.setData(this.stock_chart_data),this.stock_chart_chart.timeScale().fitContent(),setInterval(()=>{this.updateStockChart()},1e4)}updateStockChart(){let e=0,t=JSON.parse(localStorage.getItem("curr_positions"+f.stocksStrategyNum));t&&t.trades&&t.trades.forEach(a=>{if(a.exit!==0)e+=a.qty*(a.exit-a.entry);else{let l=this.mapService.getScripLTP(null,null,a.scrip,null);l||(l=0),e+=a.qty*l}});let i=this.stock_chart_data,s={time:i[i.length-1].time,value:e};this.stock_lineSeries1.update(s)}initStrangleChart_simulated(e,t,i,r,s=!1,o=null,a=null){this.initSpotChart_simulated(e,t,s,o,a),this.strangle_chart_chart&&this.strangle_chart_chart.remove();let l="strangle-chart";this.strangle_chart_chart=ht(l,{width:320,height:200,timeScale:{timeVisible:!0}});let c=new Date().getTimezoneOffset()*6e4,u=this.processData_simulated(e,i,"",t,s,o,a),d=this.processData_simulated(e,r,"",t,s,o,a),h=this.getStrangleValues(u,d);console.log("arr1",u),console.log("arr2",d),console.log("arr",h);let p=[];for(let A=0;A<h.length;A++){let v=h[A],b=new Date(v[0]-c).toISOString(),E={time:Date.parse(b)/1e3,value:v[1]};p.push(E)}this.strangle_chart_chart.addSeries(ft,{}).setData(p),this.strangle_chart_chart.timeScale().fitContent()}initForCallsPuts_simulated_0(e,t,i,r){for(let a in this.charts)Object.prototype.hasOwnProperty.call(this.charts,a)&&this.charts[a].remove();this.charts={},f.st_simulate_ce=[],f.st_simulate_pe=[];let s=new Date(t);s.setDate(s.getDate()+1),s.setHours(9),s.setMinutes(30);let o=new Date().getTimezoneOffset()*6e4;for(let a=0;a<=6;a++){let l;for(;;){console.log("ST curr date",s,l),s.setDate(s.getDate()-1),s.setHours(9),s.setMinutes(30);let G=""+("0"+s.getDate()).slice(-2)+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+s.getFullYear()+" "+("0"+s.getHours()).slice(-2)+":"+("0"+s.getMinutes()).slice(-2)+":00";if(this.loadSimulatedOCForTime(e,G,t),l=this.mapService.getScripLTP(null,null,e,null),l)break;console.log("ST curr date going back")}let c=50;e==="BANKNIFTY"?c=100:e==="FINNIFTY"?c=50:e==="MIDCPNIFTY"?c=25:e==="SENSEX"||e==="BANKEX"?c=100:e==="USDINR"&&(c=.25);let u=Math.round(l/c)*c;console.log("ST spotstrike",u);let d=u+Number(r),h=u-Number(r),p=this.processData_simulated(e,"","",s),g=[];for(let Q=0;Q<p.length;Q++){let G=p[Q],ae=new Date(G[0]-o).toISOString(),ne={time:Date.parse(ae)/1e3,open:G[1],high:G[2],low:G[3],close:G[4]};g.push(ne)}let A="opt_chart_"+a+"_spot",v=ht(A,{width:320,height:240,timeScale:{timeVisible:!0},crosshair:{mode:Ut.Normal}});v.addSeries(It).setData(g),v.timeScale().fitContent(),this.charts["opt_chart_"+a+"_spot"]=v;let E=this.processData_simulated(e,d,"CE",s,!1,null,null,!0),O=[];for(let Q=0;Q<E.length;Q++){let G=E[Q],ae=new Date(G[0]-o).toISOString(),ne={time:Date.parse(ae)/1e3,open:G[1],high:G[2],low:G[3],close:G[4]};O.push(ne)}let T=this.supertrend_calc(O),k="opt_chart_"+a+"_CE";console.log("div_id_ce",k);let D=ht(k,{width:320,height:240,timeScale:{timeVisible:!0},crosshair:{mode:Ut.Normal}});D.addSeries(It).setData(this.getCurrDateData(s,O)),(i==="10_2"||i==="both")&&D.addSeries(ft,{lineWidth:1}).setData(this.getCurrDateData(s,T[0])),(i==="7_3"||i==="both")&&D.addSeries(ft,{lineWidth:1}).setData(this.getCurrDateData(s,T[1])),D.timeScale().fitContent(),this.charts["opt_chart_"+a+"_CE"]=D,f.st_simulate_ce.push(d+"CE");let N=this.processData_simulated(e,h,"PE",s,!1,null,null,!0),L=[];for(let Q=0;Q<N.length;Q++){let G=N[Q],ae=new Date(G[0]-o).toISOString(),ne={time:Date.parse(ae)/1e3,open:G[1],high:G[2],low:G[3],close:G[4]};L.push(ne)}let B=this.supertrend_calc(L),H="opt_chart_"+a+"_PE";console.log("div_id",H);let Z=ht(H,{width:320,height:240,timeScale:{timeVisible:!0},crosshair:{mode:Ut.Normal}});Z.addSeries(It).setData(this.getCurrDateData(s,L)),(i==="10_2"||i==="both")&&Z.addSeries(ft,{lineWidth:1}).setData(this.getCurrDateData(s,B[0])),(i==="7_3"||i==="both")&&Z.addSeries(ft,{lineWidth:1}).setData(this.getCurrDateData(s,B[1])),Z.timeScale().fitContent(),this.charts["opt_chart_"+a+"_PE"]=Z,f.st_simulate_pe.push(h+"PE")}}getCurrDateData(e,t){let i=[];return t.forEach(r=>{let s=new Date(r.time*1e3);s.getDate()===e.getDate()&&s.getMonth()===e.getMonth()&&s.getFullYear()===e.getFullYear()&&i.push(r)}),i}supertrend_calc(e){let t=new rS.SuperTrend(10,2,"WEMA"),i=new rS.SuperTrend(7,3,"WEMA"),r=[],s=[];return e.forEach(o=>{let a=t.nextValue(o.high,o.low,o.close),l,c="green";a&&(l=a.superTrend,a.direction===1&&(c="red"));let u={time:o.time,value:l,color:c};r.push(u);let d=i.nextValue(o.high,o.low,o.close),h,p="green";d&&(h=d.superTrend,d.direction===1&&(p="red"));let g={time:o.time,value:h,color:p};s.push(g)}),[r,s]}loadSimulatedOCForTime(e,t,i){let r=t;console.log("ST loadSimulatedOCForTime",r);for(let[s,o]of Object.entries(qe.simulateData))if(s===e||s.startsWith(e)&&(s.endsWith("CE")||s.endsWith("PE")))if(s===e){let a=e;e==="NIFTY"&&(a="NIFTY50"),e==="USDINR"&&(a="USDINR"),this.mapService.setLtp(a,o[r])}else{let a=s;a=a.replace(e,""),a=a.replace("WK","");let l={instru:e,expiry:i,strike:this.mapService.parseScrip(a).scrip,optionType:this.mapService.parseScrip(a).type},c=this.mapService.getMapKey(l),u=o[r];this.mapService.setLtp(c,u)}console.log("ST ltpMap",this.mapService.ltpMap)}initForCallsPuts_simulated_1(e,t,i,r,s){for(let d in this.charts)Object.prototype.hasOwnProperty.call(this.charts,d)&&this.charts[d].remove();this.charts={},f.st_simulate_charts=[],f.st_simulate_charts_values=[],f.st_simulate_charts_print=[],f.st_simulate_charts_print_strangle=[],f.st_simulate_exits=[];let o=5;r==="1min"&&(o=1);let a=new Date(t);a.setDate(a.getDate()+1),a.setHours(9),a.setMinutes(30);let l=new Date().getTimezoneOffset()*6e4;for(let d=0;d<=6;d++){let h=0;for(;;){a.setDate(a.getDate()-1),a.setHours(9),a.setMinutes(30),console.log("ST curr date",a);let v=""+("0"+a.getDate()).slice(-2)+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+a.getFullYear()+" "+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)+":00";if(this.loadSimulatedOCForTime(e,v,t),this.mapService.getScripLTP(null,null,e,null))break;console.log("ST curr date going back")}if(d===0||d===1)continue;let p=500,g=50;if(e==="BANKNIFTY"?(g=100,p=6e3):e==="FINNIFTY"?g=50:e==="MIDCPNIFTY"?g=25:e==="SENSEX"||e==="BANKEX"?g=100:e==="USDINR"&&(g=.25),i){let A=this.processData_simulated(e,"","",a,!1,null,null,!1,o),v=[];for(let T=0;T<A.length;T++){let k=A[T],D=new Date(k[0]-l).toISOString(),M={time:Date.parse(D)/1e3,open:k[1],high:k[2],low:k[3],close:k[4]};v.push(M)}let b="opt_chart_"+d+"_spot",E=ht(b,{width:320,height:160,timeScale:{timeVisible:!0},crosshair:{mode:Ut.Normal}});E.addSeries(It).setData(v),E.timeScale().fitContent(),this.charts["opt_chart_"+d+"_spot"]=E,f.st_simulate_charts["opt_chart_"+d+"_spot"]=e}for(;;){let v=""+("0"+a.getDate()).slice(-2)+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+a.getFullYear()+" "+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)+":00";this.loadSimulatedOCForTime(e,v,t);let b=this.mapService.getScripLTP(null,null,e,null);b=Math.round(b/g)*g,console.log("curr time",a);let E=this.findPremiumStrike(e,t,b,"CE",g,40,p),O=this.isSTCondition(e,E,"CE",a,o);if(O[0]===!0){if(i){let D="opt_chart_"+d+"_"+h;console.log("div_id",D);let M=ht(D,{width:320,height:180,timeScale:{timeVisible:!0},crosshair:{mode:Ut.Normal}});M.addSeries(It).setData(this.getCurrDateData(a,O[1])),M.addSeries(ft,{lineWidth:1}).setData(this.getCurrDateData(a,O[2])),M.timeScale().fitContent(),this.charts["opt_chart_"+d+"_"+h]=M}f.st_simulate_charts["opt_chart_"+d+"_"+h]=E+"CE "+a.toLocaleString(),f.st_simulate_charts_values["opt_chart_"+d+"_"+h]=O[3],f.st_simulate_charts_print["opt_chart_"+d+"_"+h]=E+"CE,"+a.toLocaleString()+","+O[3],h++}let T=this.findPremiumStrike(e,t,b,"PE",g,40,p),k=this.isSTCondition(e,T,"PE",a,o);if(k[0]===!0){if(i){let D="opt_chart_"+d+"_"+h;console.log("div_id",D);let M=ht(D,{width:320,height:180,timeScale:{timeVisible:!0},crosshair:{mode:Ut.Normal}});M.addSeries(It).setData(this.getCurrDateData(a,k[1])),M.addSeries(ft,{lineWidth:1}).setData(this.getCurrDateData(a,k[2])),M.timeScale().fitContent(),this.charts["opt_chart_"+d+"_"+h]=M}f.st_simulate_charts["opt_chart_"+d+"_"+h]=T+"PE "+a.toLocaleString(),f.st_simulate_charts_values["opt_chart_"+d+"_"+h]=k[3],f.st_simulate_charts_print["opt_chart_"+d+"_"+h]=T+"PE,"+a.toLocaleString()+","+k[3],h++}if(a.setMinutes(a.getMinutes()+o),a.getHours()>=15&&a.getMinutes()>=5)break}this.processStrangle(e,t,g,p,a,d)}let c="";for(let d in f.st_simulate_charts_print)if(Object.prototype.hasOwnProperty.call(f.st_simulate_charts_print,d)){let h=f.st_simulate_charts_print[d];c+=h+`\r
`}for(let d in f.st_simulate_charts_print_strangle)if(Object.prototype.hasOwnProperty.call(f.st_simulate_charts_print_strangle,d)){let h=f.st_simulate_charts_print_strangle[d];c+=h+`\r
`}let u=0;f.st_simulate_exits.forEach(d=>{u+=d}),console.log(`done loading\r
`,c,u)}isSTCondition(e,t,i,r,s){let o=new Date().getTimezoneOffset()*6e4,a=this.processData_simulated(e,t,i,r,!1,null,null,!0,s),l=[];for(let b=0;b<a.length;b++){let E=a[b],O=new Date(E[0]-o).toISOString(),T={time:Date.parse(O)/1e3,open:E[1],high:E[2],low:E[3],close:E[4]};l.push(T)}let c=this.supertrend_calc(l),u=new Date(r.getTime()-o).toISOString(),d=Date.parse(u)/1e3,h=c[0].find(b=>b.time===d),p=new Date(r);p.setMinutes(p.getMinutes()-s);let g=new Date(p.getTime()-o).toISOString(),A=Date.parse(g)/1e3,v=c[0].find(b=>b.time===A);if(s===5&&r.getHours()===9&&r.getMinutes()===30&&v.color==="green"&&h.color==="green"){console.log("ST found continuation at open",v,h);let b=this.findSTExit(c[0],l,r,s);return[!0,l,c[0],b]}if(v&&h&&v.color==="red"&&h.color==="green"){console.log("ST found",v,h);let b=this.findSTExit(c[0],l,r,s);return[!0,l,c[0],b]}else return[!1]}findSTExit(e,t,i,r){let s=new Date().getTimezoneOffset()*6e4,o=8,a=-8,l=null,c=null,u=null,d=null,h=null,p=null,g=null,A=null,v=new Date(i),b=new Date(v.getTime()-s).toISOString(),E=Date.parse(b)/1e3;c=t.find(N=>N.time===E).close,g=e.find(N=>N.time===E).value;let k=new Date(i),D=!0;for(;;){let N=new Date(k.getTime()-s).toISOString(),L=Date.parse(N)/1e3,B=t.find(Z=>Z.time===L);!D&&l===null&&(B.high-c>=o?l=o:B.low-c<=a&&(l=a)),D===!0?(d=999,h=c):B&&B.low<d&&(d=B.low,h=u),D===!0?u=0:B&&B.high>u&&(u=B.high);let H=e.find(Z=>Z.time===L);if(H&&H.color==="red"){p=B.close;break}if(H&&(A=H.value),k.setMinutes(k.getMinutes()+r),k.getHours()>=15&&k.getMinutes()>=20){p=B.close;break}D=!1}l===null&&(l=p-c),f.st_simulate_exits.push(l);let M="No";return u-c>=o&&(M="Yes"),Math.round(c*10)/10+","+Math.round(u*10)/10+","+Math.round(d*10)/10+","+Math.round(p*10)/10+","+Math.round(g*10)/10+","+Math.round(A*10)/10}findPremiumStrike(e,t,i,r,s,o,a){let l,c,u=99999999;if(r==="CE")for(let d=i;d<=i+a;d+=s){let h=this.mapService.getScripLTP(e,new Date(t),d,"CE"),p=Math.abs(h-o);p<u&&(u=p,l=d,c=h)}else if(r==="PE")for(let d=i;d>=i-a;d-=s){let h=this.mapService.getScripLTP(e,new Date(t),d,"PE"),p=Math.abs(h-o);p<u&&(u=p,l=d,c=h)}return console.log("selecting for ST",l,r,c),l}processStrangle(e,t,i,r,s,o){s.setHours(9),s.setMinutes(20),console.log("strangle entry curr date",s);let a=""+("0"+s.getDate()).slice(-2)+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+s.getFullYear(),l=a+" "+("0"+s.getHours()).slice(-2)+":"+("0"+s.getMinutes()).slice(-2)+":00";this.loadSimulatedOCForTime(e,l,t);let c=this.mapService.getScripLTP(null,null,e,null);c=Math.round(c/i)*i;let u=this.findPremiumStrike(e,t,c,"CE",i,25,r),d=this.findPremiumStrike(e,t,c,"PE",i,25,r),h=this.mapService.getScripLTP(e,new Date(t),u,"CE"),p=this.mapService.getScripLTP(e,new Date(t),d,"PE"),g=h+p;s.setHours(15),s.setMinutes(20),console.log("strangle exit curr date",s),a=""+("0"+s.getDate()).slice(-2)+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+s.getFullYear(),l=a+" "+("0"+s.getHours()).slice(-2)+":"+("0"+s.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(e,l,t);let A=this.mapService.getScripLTP(e,new Date(t),u,"CE"),v=this.mapService.getScripLTP(e,new Date(t),d,"PE"),b=A+v;console.log("strangle",h,p,g,A,v,b),f.st_simulate_charts_print_strangle["opt_chart_"+o+"_strangle"]="strangle,"+s.toLocaleString()+","+Math.round(g*10)/10+","+Math.round(b*10)/10}static \u0275fac=function(t){return new(t||n)(oe(Tt),oe(qe),oe(xr),oe(Er),oe(fn),oe(En))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var sS=Ta(Lm());var Bm=class n{constructor(e,t,i,r,s,o){this.http=e;this.mapService=t;this.fyersService=i;this.aliceblueService=r;this.zerodhaService=s;this.appService=o}charts={};candlestickSeries={};backtestResult=[];processData_simulated(e,t,i,r,s=!1,o=null,a=null,l=!1,c=null){let u=qe.stockChartData[e+"WK"+t+i];u||(u=qe.stockChartData[e+t+i]);let d=[],h=-1;for(let T=0;T<u.length;T++){let k=u[T],D=k[0],M=new Date(D);if(o){let N=new Date(r);N.setHours(o,a),s?N&&M.getTime()>=N.getTime()&&(d.push(k),h===-1&&(h=T)):N&&M.getTime()>=N.getTime()&&M.getDate()===r.getDate()&&M.getMonth()===r.getMonth()&&M.getFullYear()===r.getFullYear()&&(d.push(k),h===-1&&(h=T))}else if(l){let N=new Date(r);N&&N.setDate(N.getDate()+1),N&&M<N&&(d.push(k),h===-1&&(h=T))}else r&&M.getDate()===r.getDate()&&M.getMonth()===r.getMonth()&&M.getFullYear()===r.getFullYear()&&(d.push(k),h===-1&&(h=T))}if(console.log("trimmedData:",d),c&&c===1)return d;let p=[],g=null,A=null,v=null,b=null,E=null,O=0;for(let T=0;T<d.length;T++){let k=d[T],D=k[0];new Date(D).getMinutes()%5===0?(g&&p.push([g,A,v,b,E,O]),g=k[0],A=k[1],v=k[2],b=k[3],E=null,O=0):(A===null&&(A=k[1]),(v===null||k[2]>v)&&(v=k[2]),(b===null||k[3]<b)&&(b=k[3]),(new Date(D).getMinutes()+1)%5===0&&(E=k[4]),T===d.length-1&&(E=k[4],p.push([g,A,v,b,E,O])),O+=k[5])}return console.log("processed_data:",p),p}getCurrDateData(e,t){let i=[];return t.forEach(r=>{let s=new Date(r.time*1e3);s.getDate()===e.getDate()&&s.getMonth()===e.getMonth()&&s.getFullYear()===e.getFullYear()&&i.push(r)}),i}supertrend_calc(e){let t=new sS.SuperTrend(10,2,"WEMA"),i=new sS.SuperTrend(7,3,"WEMA"),r=[],s=[];return e.forEach(o=>{let a=t.nextValue(o.high,o.low,o.close),l,c="green";a&&(l=a.superTrend,a.direction===1&&(c="red"));let u={time:o.time,value:l,color:c};r.push(u);let d=i.nextValue(o.high,o.low,o.close),h,p="green";d&&(h=d.superTrend,d.direction===1&&(p="red"));let g={time:o.time,value:h,color:p};s.push(g)}),[r,s]}loadSimulatedOCForTime(e,t,i){let r=t;for(let[s,o]of Object.entries(qe.simulateData))if(s===e||s.startsWith(e)&&(s.endsWith("CE")||s.endsWith("PE")))if(s===e){let a=e;e==="NIFTY"&&(a="NIFTY50"),e==="USDINR"&&(a="USDINR"),this.mapService.setLtp(a,o[r])}else{let a=s;a=a.replace(e,""),a=a.replace("WK","");let l={instru:e,expiry:i,strike:this.mapService.parseScrip(a).scrip,optionType:this.mapService.parseScrip(a).type},c=this.mapService.getMapKey(l),u=o[r];this.mapService.setLtp(c,u)}}initForCallsPuts_simulated_1(e,t,i,r,s){for(let d in this.charts)Object.prototype.hasOwnProperty.call(this.charts,d)&&this.charts[d].remove();this.charts={},f.st_simulate_charts=[],f.st_simulate_charts_values=[],f.st_simulate_charts_print=[],f.st_simulate_charts_print_strangle=[],f.st_simulate_exits=[];let o=5;r==="1min"&&(o=1);let a=new Date(t);a.setDate(a.getDate()+1),a.setHours(9),a.setMinutes(30);let l=new Date().getTimezoneOffset()*6e4;for(let d=0;d<=6;d++){let h=0;for(;;){a.setDate(a.getDate()-1),a.setHours(9),a.setMinutes(30),console.log("ST curr date",a);let v=""+("0"+a.getDate()).slice(-2)+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+a.getFullYear()+" "+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)+":00";if(this.loadSimulatedOCForTime(e,v,t),this.mapService.getScripLTP(null,null,e,null))break;console.log("ST curr date going back")}if(d===0||d===1)continue;let p=1e3,g=50;if(e==="BANKNIFTY"?(g=100,p=6e3):e==="FINNIFTY"?g=50:e==="MIDCPNIFTY"?g=25:e==="SENSEX"||e==="BANKEX"?g=100:e==="USDINR"&&(g=.25),i){let A=this.processData_simulated(e,"","",a,!1,null,null,!1,o),v=[];for(let T=0;T<A.length;T++){let k=A[T],D=new Date(k[0]-l).toISOString(),M={time:Date.parse(D)/1e3,open:k[1],high:k[2],low:k[3],close:k[4]};v.push(M)}let b="opt_chart_"+d+"_spot",E=ht(b,{width:320,height:160,timeScale:{timeVisible:!0},crosshair:{mode:Ut.Normal}});E.addSeries(It).setData(v),E.timeScale().fitContent(),this.charts["opt_chart_"+d+"_spot"]=E,f.st_simulate_charts["opt_chart_"+d+"_spot"]=e}for(;;){let v=""+("0"+a.getDate()).slice(-2)+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+a.getFullYear()+" "+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)+":00";this.loadSimulatedOCForTime(e,v,t);let b=this.mapService.getScripLTP(null,null,e,null);b=Math.round(b/g)*g,console.log("curr time",a);let E=this.findPremiumStrike(e,t,b,"CE",g,40,p),O=this.isSTCondition(e,E,"CE",a,o);if(O[0]===!0){if(i){let D="opt_chart_"+d+"_"+h;console.log("div_id",D);let M=ht(D,{width:320,height:180,timeScale:{timeVisible:!0},crosshair:{mode:Ut.Normal}});M.addSeries(It).setData(this.getCurrDateData(a,O[1])),M.addSeries(ft,{lineWidth:1}).setData(this.getCurrDateData(a,O[2])),M.timeScale().fitContent(),this.charts["opt_chart_"+d+"_"+h]=M}f.st_simulate_charts["opt_chart_"+d+"_"+h]=E+"CE "+a.toLocaleString(),f.st_simulate_charts_values["opt_chart_"+d+"_"+h]=O[3],f.st_simulate_charts_print["opt_chart_"+d+"_"+h]=E+"CE,"+a.toLocaleString()+","+O[3],h++}let T=this.findPremiumStrike(e,t,b,"PE",g,40,p),k=this.isSTCondition(e,T,"PE",a,o);if(k[0]===!0){if(i){let D="opt_chart_"+d+"_"+h;console.log("div_id",D);let M=ht(D,{width:320,height:180,timeScale:{timeVisible:!0},crosshair:{mode:Ut.Normal}});M.addSeries(It).setData(this.getCurrDateData(a,k[1])),M.addSeries(ft,{lineWidth:1}).setData(this.getCurrDateData(a,k[2])),M.timeScale().fitContent(),this.charts["opt_chart_"+d+"_"+h]=M}f.st_simulate_charts["opt_chart_"+d+"_"+h]=T+"PE "+a.toLocaleString(),f.st_simulate_charts_values["opt_chart_"+d+"_"+h]=k[3],f.st_simulate_charts_print["opt_chart_"+d+"_"+h]=T+"PE,"+a.toLocaleString()+","+k[3],h++}if(a.setMinutes(a.getMinutes()+o),a.getHours()>=15&&a.getMinutes()>=5)break}}let c="";for(let d in f.st_simulate_charts_print)if(Object.prototype.hasOwnProperty.call(f.st_simulate_charts_print,d)){let h=f.st_simulate_charts_print[d];c+=h+`\r
`}for(let d in f.st_simulate_charts_print_strangle)if(Object.prototype.hasOwnProperty.call(f.st_simulate_charts_print_strangle,d)){let h=f.st_simulate_charts_print_strangle[d];c+=h+`\r
`}let u=0;f.st_simulate_exits.forEach(d=>{u+=d}),console.log(`done loading\r
`,c,u)}isSTCondition(e,t,i,r,s){let o=new Date().getTimezoneOffset()*6e4,a=this.processData_simulated(e,t,i,r,!1,null,null,!0,s),l=[];for(let b=0;b<a.length;b++){let E=a[b],O=new Date(E[0]-o).toISOString(),T={time:Date.parse(O)/1e3,open:E[1],high:E[2],low:E[3],close:E[4]};l.push(T)}let c=this.supertrend_calc(l),u=new Date(r.getTime()-o).toISOString(),d=Date.parse(u)/1e3,h=c[0].find(b=>b.time===d),p=new Date(r);p.setMinutes(p.getMinutes()-s);let g=new Date(p.getTime()-o).toISOString(),A=Date.parse(g)/1e3,v=c[0].find(b=>b.time===A);if(s===5&&r.getHours()===9&&r.getMinutes()===30&&v.color==="green"&&h.color==="green"){console.log("ST found continuation at open",v,h);let b=this.findSTExit(c[0],l,r,s);return[!0,l,c[0],b]}if(v&&h&&v.color==="red"&&h.color==="green"){console.log("ST found",v,h);let b=this.findSTExit(c[0],l,r,s);return[!0,l,c[0],b]}else return[!1]}findSTExit(e,t,i,r){let s=new Date().getTimezoneOffset()*6e4,o=8,a=-8,l=null,c=null,u=null,d=null,h=null,p=null,g=null,A=null,v=new Date(i),b=new Date(v.getTime()-s).toISOString(),E=Date.parse(b)/1e3;c=t.find(N=>N.time===E).close,g=e.find(N=>N.time===E).value;let k=new Date(i),D=!0;for(;;){let N=new Date(k.getTime()-s).toISOString(),L=Date.parse(N)/1e3,B=t.find(Z=>Z.time===L);!D&&l===null&&(B.high-c>=o?l=o:B.low-c<=a&&(l=a)),D===!0?(d=999,h=c):B&&B.low<d&&(d=B.low,h=u),D===!0?u=0:B&&B.high>u&&(u=B.high);let H=e.find(Z=>Z.time===L);if(H&&H.color==="red"){p=B.close;break}if(H&&(A=H.value),k.setMinutes(k.getMinutes()+r),k.getHours()>=15&&k.getMinutes()>=20){p=B.close;break}D=!1}l===null&&(l=p-c),f.st_simulate_exits.push(l);let M="No";return u-c>=o&&(M="Yes"),Math.round(c*10)/10+","+Math.round(u*10)/10+","+Math.round(d*10)/10+","+Math.round(p*10)/10+","+Math.round(g*10)/10+","+Math.round(A*10)/10}findPremiumStrike(e,t,i,r,s,o,a){let l,c,u=99999999;if(r==="CE")for(let d=i;d<=i+a;d+=s){let h=this.mapService.getScripLTP(e,new Date(t),d,"CE"),p=Math.abs(h-o);p<u&&(u=p,l=d,c=h)}else if(r==="PE")for(let d=i;d>=i-a;d-=s){let h=this.mapService.getScripLTP(e,new Date(t),d,"PE"),p=Math.abs(h-o);p<u&&(u=p,l=d,c=h)}return console.log("selecting strike",l,r,c),l}expiryStrangles(e,t){let i=150,r=100,s=50;e==="BANKNIFTY"?(s=100,i=400,r=300):e==="FINNIFTY"?s=50:e==="MIDCPNIFTY"?s=25:e==="SENSEX"||e==="BANKEX"?s=100:e==="USDINR"&&(s=.25),this.fullDayStrangle(e,t,t,s,i,9,20),this.fullDayStrangle(e,t,t,s,i,11,0),this.fullDayStrangle(e,t,t,s,r,13,30)}fullDayStrangle(e,t,i,r,s,o,a,l=null,c=null){let u=new Date(i);u.setHours(o),u.setMinutes(a);let d=""+("0"+u.getDate()).slice(-2)+"-"+("0"+(u.getMonth()+1)).slice(-2)+"-"+u.getFullYear(),h=d+" "+("0"+u.getHours()).slice(-2)+":"+("0"+u.getMinutes()).slice(-2)+":00";this.loadSimulatedOCForTime(e,h,t);let p=this.mapService.getScripLTP(null,null,e,null);p=Math.round(p/r)*r;let g=p+s;l&&(g=l);let A=p-s;c&&(A=c);let v=this.mapService.getScripLTP(e,new Date(t),g,"CE"),b=this.mapService.getScripLTP(e,new Date(t),A,"PE"),E=v+b,O=-1,T=999,k=-1,D=999,M=-1;for(;!(u.getHours()>=15&&u.getMinutes()>20);){u.setMinutes(u.getMinutes()+1),d=""+("0"+u.getDate()).slice(-2)+"-"+("0"+(u.getMonth()+1)).slice(-2)+"-"+u.getFullYear(),h=d+" "+("0"+u.getHours()).slice(-2)+":"+("0"+u.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(e,h,t);let H=this.mapService.getScripLTP(e,new Date(t),g,"CE"),Z=this.mapService.getScripLTP(e,new Date(t),A,"PE");H>O&&(O=H),Z>k&&(k=Z),H<T&&(T=H),Z<D&&(D=Z),H+Z>M&&(M=H+Z)}u.setHours(15),u.setMinutes(20),d=""+("0"+u.getDate()).slice(-2)+"-"+("0"+(u.getMonth()+1)).slice(-2)+"-"+u.getFullYear(),h=d+" "+("0"+u.getHours()).slice(-2)+":"+("0"+u.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(e,h,t);let N=this.mapService.getScripLTP(e,new Date(t),g,"CE"),L=this.mapService.getScripLTP(e,new Date(t),A,"PE"),B=N+L;console.log("strangle:",e+","+t+","+o+" "+a+","+v+","+b+","+Math.round(E*10)/10+","+N+","+L+","+Math.round(B*10)/10+","+Math.round(M*10)/10+","+O+","+T+","+k+","+D)}perDayDriver(e,t,i){let r=2e3,s=50;e==="BANKNIFTY"?(s=100,r=6e3):e==="FINNIFTY"?s=50:e==="MIDCPNIFTY"?s=25:e==="SENSEX"||e==="BANKEX"?s=100:e==="USDINR"&&(s=.25);let o=new Date(t);o.setDate(o.getDate()+1);let a=new Date().getTimezoneOffset()*6e4;for(let c=0;c<=6;c++){let u=0;for(;;){o.setDate(o.getDate()-1),o.setHours(9),o.setMinutes(30),console.log("perDayDriver curr date",o);let h=""+("0"+o.getDate()).slice(-2)+"-"+("0"+(o.getMonth()+1)).slice(-2)+"-"+o.getFullYear()+" "+("0"+o.getHours()).slice(-2)+":"+("0"+o.getMinutes()).slice(-2)+":00";if(this.loadSimulatedOCForTime(e,h,t),this.mapService.getScripLTP(null,null,e,null))break;if(u=u+1,u==5){console.log("perDayDriver exiting");return}console.log("perDayDriver curr date going back")}if(i==="strangle_SL_reentry"){let d=this.strangle_SL_reentry(e,t,o,25,10,10,c,10,"",10,5,!1,!1),h=this.strangle_SL_reentry(e,t,o,25,10,10,c,10,"",10,5,!1,!0),p=d.ce_strike,g=d.pe_strike,A=d.live_pnl,v=h.live_pnl,b=d.ce_markers.concat(h.ce_markers),E=d.pe_markers.concat(h.pe_markers),O=d.strangle_markers.concat(h.strangle_markers),T=this.strangle_SL_reentry(e,t,o,25,9,45,c,10,"",10,5,!1,!1),k=this.strangle_SL_reentry(e,t,o,25,9,45,c,10,"",10,5,!1,!0),D=T.strangle_markers.concat(k.strangle_markers);c!==5&&c!==6&&(this.strangle_SL_reentry_charts(e,o,1,c,p,g,A,d.ce_markers,d.pe_markers,[],v),this.plotPnlChart(c,T.live_pnl,k.live_pnl,[],"_3"))}if(i==="long_fly"&&c===5){let d=this.long_fly(e,t,o,c,50),h=this.long_fly(e,t,o,c,100)}}let l="";for(let c=0;c<this.backtestResult.length;c++)l+=this.backtestResult[c]+`\r
`;console.log(`done loading strangle_SL_reentry \r
`,l)}strangle_SL_reentry(e,t,i,r,s,o,a,l,c="",u=null,d=null,h=!1,p=!1){let g=[],A=[],v=[],b=[],E,O,T=!1,k,D,M=!1,N=0,L=0,B=!1,H=!1,Z=8,re=1e3,Q=50;e==="BANKNIFTY"?(Q=100,re=6e3):e==="FINNIFTY"?Q=50:e==="MIDCPNIFTY"?Q=25:e==="SENSEX"||e==="BANKEX"?Q=100:e==="USDINR"&&(Q=.25);let G=new Date(i);G.setHours(s),G.setMinutes(o);let ae=""+("0"+G.getDate()).slice(-2)+"-"+("0"+(G.getMonth()+1)).slice(-2)+"-"+G.getFullYear(),ne=ae+" "+("0"+G.getHours()).slice(-2)+":"+("0"+G.getMinutes()).slice(-2)+":00";this.loadSimulatedOCForTime(e,ne,t);let De=this.mapService.getScripLTP(null,null,e,null);De=Math.round(De/Q)*Q;let ue=this.findPremiumStrike(e,t,De,"CE",Q,r,re),le=this.findPremiumStrike(e,t,De,"PE",Q,r,re),ee=this.mapService.getScripLTP(e,new Date(t),ue,"CE"),fe=this.mapService.getScripLTP(e,new Date(t),le,"PE");f.st_simulate_charts["opt_chart_"+a+"_spot"]=e,f.st_simulate_charts["opt_chart_"+a+"_0"]=ue+"CE ",f.st_simulate_charts["opt_chart_"+a+"_1"]=le+"PE ",f.st_simulate_charts_values["opt_chart_"+a+"_0"]=ee,f.st_simulate_charts_values["opt_chart_"+a+"_1"]=fe;let ye=ee+fe;s===9?f.st_simulate_charts_values["opt_chart_"+a+"_2"]=Math.round(ye*10)/10:f.st_simulate_charts_values["opt_chart_"+a+"_3"]=Math.round(ye*10)/10;let ke=null,Qe=null,Ee=null,Ve=null;if(h){let me=1e3;for(;!ke;){let Re=this.mapService.getScripLTP(e,new Date(t),ue+me,"CE");if(Re){ke=ue+me,Ee=Re;break}else me+=Q}let We=1500;for(;!Qe;){let Re=this.mapService.getScripLTP(e,new Date(t),le-We,"PE");if(Re){Qe=le-We,Ve=Re;break}else We-=Q}A.push([new Date(G),"H"+c+" "+Ee]),v.push([new Date(G),"H"+c+" "+Ve]),b.push([new Date(G),"H"+c+" "+Math.round((Ee+Ve)*10)/10]),console.log("strangle_SL_reentry hedges entry",ke,Ee,Qe,Ve)}let Ce=0,Pe=!0,be=!0;for(;!(G.getHours()>=15&&G.getMinutes()>=20);){G.setMinutes(G.getMinutes()+1),ae=""+("0"+G.getDate()).slice(-2)+"-"+("0"+(G.getMonth()+1)).slice(-2)+"-"+G.getFullYear(),ne=ae+" "+("0"+G.getHours()).slice(-2)+":"+("0"+G.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(e,ne,t);let me=this.mapService.getScripLTP(e,new Date(t),ue,"CE"),We=this.mapService.getScripLTP(e,new Date(t),le,"PE"),Re=Ce;if(Pe&&(Re+=ee-me),be&&(Re+=fe-We),T){let xe=this.mapService.getScripLTP(e,new Date(t),E,"CE");Re+=O-xe}if(M){let xe=this.mapService.getScripLTP(e,new Date(t),k,"PE");Re+=D-xe}if(h){let xe=this.mapService.getScripLTP(e,new Date(t),ke,"CE");Re+=xe-Ee;let ut=this.mapService.getScripLTP(e,new Date(t),Qe,"PE");Re+=ut-Ve}if(g.push([new Date(G),Re]),p&&Pe&&be&&H===!1&&me&&We&&me>=ee+Z&&(H=!0,L+=fe-We,Ce+=fe-We,le=le+Q,fe=this.mapService.getScripLTP(e,new Date(t),le,"PE"),console.log("Roll In PE",me,le,fe),b.push([new Date(G),"RIP"+c+" "+fe])),Pe&&me>=ee+l+ +N){if(Ce+=ee-me,Pe=!1,console.log("strangle_SL_reentry CE SL hit",me,Ce),A.push([new Date(G),"SL"+c+" "+me]),b.push([new Date(G),"CE SL"+c+" "+me]),u){let xe=this.mapService.getScripLTP(null,null,e,null);xe=Math.round(xe/Q)*Q,E=this.findPremiumStrike(e,t,xe,"CE",Q,u,re),O=this.mapService.getScripLTP(e,new Date(t),E,"CE"),T=!0,console.log("strangle_SL_reentry rollout_ce_strike",E,O),A.push([new Date(G),"RO"+c+" "+O]),b.push([new Date(G),"RO"+c+" "+O])}}else if(!Pe&&me<=ee&&(ee=me,Pe=!0,console.log("strangle_SL_reentry CE Reentry",me),A.push([new Date(G),"RE"+c+" "+me]),b.push([new Date(G),"CE RE"+c+" "+me]),u&&T)){let xe=this.mapService.getScripLTP(e,new Date(t),E,"CE");Ce+=O-xe,T=!1,console.log("strangle_SL_reentry rollout_ce_strike orig reentry",E,xe),A.push([new Date(G),"ROE"+c+" "+xe]),b.push([new Date(G),"ROE"+c+" "+xe])}if(p&&be&&Pe&&B===!1&&We&&me&&We>=fe+Z&&(B=!0,N+=ee-me,Ce+=ee-me,ue=ue-Q,ee=this.mapService.getScripLTP(e,new Date(t),ue,"CE"),console.log("Roll In CE",We,ue,ee),b.push([new Date(G),"RIC"+c+" "+ee])),be&&We>=fe+l+L){if(Ce+=fe-We,be=!1,console.log("strangle_SL_reentry PE SL hit",We,Ce),v.push([new Date(G),"SL"+c+" "+We]),b.push([new Date(G),"PE SL"+c+" "+We]),u){let xe=this.mapService.getScripLTP(null,null,e,null);xe=Math.round(xe/Q)*Q,k=this.findPremiumStrike(e,t,xe,"PE",Q,u,re),D=this.mapService.getScripLTP(e,new Date(t),k,"PE"),M=!0,console.log("strangle_SL_reentry rollout_pe_strike",k,D),v.push([new Date(G),"RO"+c+" "+D]),b.push([new Date(G),"RO"+c+" "+D])}}else if(!be&&We<=fe&&(fe=We,be=!0,console.log("strangle_SL_reentry PE Reentry",We),v.push([new Date(G),"RE"+c+" "+We]),b.push([new Date(G),"PE RE"+c+" "+We]),u&&M)){let xe=this.mapService.getScripLTP(e,new Date(t),k,"PE");Ce+=D-xe,M=!1,console.log("strangle_SL_reentry rollout_pe_strike orig reentry",k,xe),v.push([new Date(G),"ROE"+c+" "+xe]),b.push([new Date(G),"ROE"+c+" "+xe])}if(u){let xe=this.mapService.getScripLTP(e,new Date(t),E,"CE");T&&xe>=O+d&&(Ce+=O-xe,T=!1,console.log("strangle_SL_reentry rollout_ce_strike SL hit",xe,Ce),A.push([new Date(G),"ROE"+c+" "+xe]),b.push([new Date(G),"ROE"+c+" "+xe]));let ut=this.mapService.getScripLTP(e,new Date(t),k,"PE");M&&ut>=D+d&&(Ce+=D-ut,M=!1,console.log("strangle_SL_reentry rollout_pe_strike SL hit",ut,Ce),v.push([new Date(G),"ROE"+c+" "+ut]),b.push([new Date(G),"ROE"+c+" "+ut]))}}G.setHours(15),G.setMinutes(20),ae=""+("0"+G.getDate()).slice(-2)+"-"+("0"+(G.getMonth()+1)).slice(-2)+"-"+G.getFullYear(),ne=ae+" "+("0"+G.getHours()).slice(-2)+":"+("0"+G.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(e,ne,t);let Ye=this.mapService.getScripLTP(e,new Date(t),ue,"CE"),lt=this.mapService.getScripLTP(e,new Date(t),le,"PE");if(Pe&&(Ce+=ee-Ye,console.log("strangle_SL_reentry CE Exit",Ye,Ce)),be&&(Ce+=fe-lt,console.log("strangle_SL_reentry PE Exit",lt,Ce)),T){let me=this.mapService.getScripLTP(e,new Date(t),E,"CE");Ce+=O-me,console.log("strangle_SL_reentry rollout_ce_strike Exit",me,Ce)}if(M){let me=this.mapService.getScripLTP(e,new Date(t),k,"PE");Ce+=D-me,console.log("strangle_SL_reentry rollout_pe_strike Exit",me,Ce)}if(h){let me=this.mapService.getScripLTP(e,new Date(t),ke,"CE");Ce+=me-Ee;let We=this.mapService.getScripLTP(e,new Date(t),Qe,"PE");Ce+=We-Ve,console.log("strangle_SL_reentry hedges exit",ke,me,Qe,We)}Ce+=N+L;let je=e+","+t+","+G+","+a+","+s+" "+o+","+l+","+ee+","+fe+","+Math.round(ye*10)/10+","+Math.round(Ce*10)/10+","+u;return this.backtestResult.push(je),console.log("strangle_SL_reentry:",e+","+t+","+G+","+a+","+s+" "+o+","+l+","+ee+","+fe+","+Math.round(ye*10)/10+","+Ce),a!==5&&a!==6&&console.log("live pnl compare",g[g.length-1][1],Ce),{ce_strike:ue,pe_strike:le,live_pnl:g,ce_markers:A,pe_markers:v,strangle_markers:b}}strangle_SL_reentry_charts(e,t,i,r,s,o,a,l,c,u,d,h=null){let p=new Date().getTimezoneOffset()*6e4,g=this.processData_simulated(e,"","",t,!1,null,null,!1,i),A=[];for(let le=0;le<g.length;le++){let ee=g[le],fe=new Date(ee[0]-p).toISOString(),ye={time:Date.parse(fe)/1e3,open:ee[1],high:ee[2],low:ee[3],close:ee[4]};A.push(ye)}let v="opt_chart_"+r+"_spot",b=ht(v,{width:320,height:200,timeScale:{timeVisible:!0},crosshair:{mode:Ut.Normal}});b.addSeries(It).setData(A),b.timeScale().fitContent(),this.charts["opt_chart_"+r+"_spot"]=b;let O=this.processData_simulated(e,s,"CE",t,!1,null,null,!0,i),T=[];for(let le=0;le<O.length;le++){let ee=O[le],fe=new Date(ee[0]-p).toISOString(),ye={time:Date.parse(fe)/1e3,open:ee[1],high:ee[2],low:ee[3],close:ee[4]};T.push(ye)}let k="opt_chart_"+r+"_0",D=ht(k,{width:320,height:200,timeScale:{timeVisible:!0},crosshair:{mode:Ut.Normal}}),M=D.addSeries(It);M.setData(this.getCurrDateData(t,T));let N=[];for(let le=0;le<l.length;le++){let ee=l[le],fe=new Date(ee[0]-p).toISOString(),ye={time:Date.parse(fe)/1e3,position:"belowBar",color:"#000000",shape:"arrowUp",text:ee[1]};N.push(ye)}Ea(M,N),D.timeScale().fitContent(),this.charts["opt_chart_"+r+"_0"]=D;let L=this.processData_simulated(e,o,"PE",t,!1,null,null,!0,i),B=[];for(let le=0;le<L.length;le++){let ee=L[le],fe=new Date(ee[0]-p).toISOString(),ye={time:Date.parse(fe)/1e3,open:ee[1],high:ee[2],low:ee[3],close:ee[4]};B.push(ye)}let H="opt_chart_"+r+"_1",Z=ht(H,{width:320,height:200,timeScale:{timeVisible:!0},crosshair:{mode:Ut.Normal}}),re=Z.addSeries(It);re.setData(this.getCurrDateData(t,B));let Q=[];for(let le=0;le<c.length;le++){let ee=c[le],fe=new Date(ee[0]-p).toISOString(),ye={time:Date.parse(fe)/1e3,position:"belowBar",color:"#000000",shape:"arrowUp",text:ee[1]};Q.push(ye)}Ea(re,Q),Z.timeScale().fitContent(),this.charts["opt_chart_"+r+"_1"]=Z,h||(h="_2");let G="opt_chart_"+r+h,ae=ht(G,{width:320,height:200,timeScale:{timeVisible:!0}}),ne=[];for(let le=0;le<a.length;le++){let ee=a[le],fe=new Date(ee[0]-p).toISOString(),ye={time:Date.parse(fe)/1e3,value:ee[1]};ne.push(ye)}let De=ae.addSeries(ft,{lineWidth:1});if(De.setData(ne),d){let le=[];for(let fe=0;fe<d.length;fe++){let ye=d[fe],ke=new Date(ye[0]-p).toISOString(),Qe={time:Date.parse(ke)/1e3,value:ye[1]};le.push(Qe)}ae.addSeries(ft,{lineWidth:1,color:"#FF0000",lineStyle:Sh.Dashed}).setData(le)}let ue=[];for(let le=0;le<u.length;le++){let ee=u[le],fe=new Date(ee[0]-p).toISOString(),ye={time:Date.parse(fe)/1e3,position:"belowBar",color:"#000000",shape:"arrowUp",text:ee[1]};ue.push(ye)}Ea(De,ue),ae.timeScale().fitContent()}plotPnlChart(e,t,i,r,s){let o=new Date().getTimezoneOffset()*6e4;s||(s="_3");let a="opt_chart_"+e+s,l=ht(a,{width:320,height:200,timeScale:{timeVisible:!0}}),c=[];for(let h=0;h<t.length;h++){let p=t[h],g=new Date(p[0]-o).toISOString(),A={time:Date.parse(g)/1e3,value:p[1]};c.push(A)}let u=l.addSeries(ft,{lineWidth:1});if(u.setData(c),i){let h=[];for(let g=0;g<i.length;g++){let A=i[g],v=new Date(A[0]-o).toISOString(),b={time:Date.parse(v)/1e3,value:A[1]};h.push(b)}l.addSeries(ft,{lineWidth:1,color:"#FF0000",lineStyle:Sh.Dashed}).setData(h)}let d=[];for(let h=0;h<r.length;h++){let p=r[h],g=new Date(p[0]-o).toISOString(),A={time:Date.parse(g)/1e3,position:"belowBar",color:"#000000",shape:"arrowUp",text:p[1]};d.push(A)}Ea(u,d),l.timeScale().fitContent()}long_fly(e,t,i,r,s){let o=[],a=50;e==="BANKNIFTY"?a=100:e==="FINNIFTY"?a=50:e==="MIDCPNIFTY"?a=25:e==="SENSEX"||e==="BANKEX"?a=100:e==="USDINR"&&(a=.25);let l=new Date(i);l.setHours(15),l.setMinutes(20);let c=""+("0"+l.getDate()).slice(-2)+"-"+("0"+(l.getMonth()+1)).slice(-2)+"-"+l.getFullYear(),u=c+" "+("0"+l.getHours()).slice(-2)+":"+("0"+l.getMinutes()).slice(-2)+":00";this.loadSimulatedOCForTime(e,u,t);let d=this.mapService.getScripLTP(null,null,e,null);d=Math.round(d/a)*a;let h=d,p=d,g=this.mapService.getScripLTP(e,new Date(t),h,"CE"),A=this.mapService.getScripLTP(e,new Date(t),p,"PE");if(f.st_simulate_charts["opt_chart_"+r+"_spot"]=e,f.st_simulate_charts["opt_chart_"+r+"_0"]="50",f.st_simulate_charts["opt_chart_"+r+"_0"]="100",!g||!A)return console.log("CE or PE premium is None"),null;let v=h+s,b=p-s,E=this.mapService.getScripLTP(e,new Date(t),v,"CE"),O=this.mapService.getScripLTP(e,new Date(t),b,"PE");if(!E||!O)return console.log("Hedge CE or PE premium is None"),null;let T=g+A;l=new Date(t),l.setHours(15),l.setMinutes(20),c=""+("0"+l.getDate()).slice(-2)+"-"+("0"+(l.getMonth()+1)).slice(-2)+"-"+l.getFullYear(),u=c+" "+("0"+l.getHours()).slice(-2)+":"+("0"+l.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(e,u,t);let k=this.mapService.getScripLTP(e,new Date(t),h,"CE"),D=this.mapService.getScripLTP(e,new Date(t),p,"PE"),M=k+D,N=0;N+=k-g,N+=D-A;let L=this.mapService.getScripLTP(e,new Date(t),v,"CE"),B=this.mapService.getScripLTP(e,new Date(t),b,"PE");return N+=E-L,N+=O-B,N=Math.round(N*10)/10,console.log("Long fly",t,N),o}static \u0275fac=function(t){return new(t||n)(oe(Tt),oe(qe),oe(xr),oe(Er),oe(fn),oe(En))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var Sn=(n,e)=>({"text-danger":n,"text-success":e}),oS=()=>[],qm=(n,e)=>({red:n,blue:e}),BJ=(n,e,t)=>({positionExited:n,positionSL:e,positionReentry:t}),qJ=(n,e)=>({positionExited:n,hidePositionRow:e}),jJ=n=>({red:n}),WJ=n=>({"sl-order-placed":n}),UJ=(n,e)=>({ocStrikeStrategyCE:n,ocStrikeSLL:e}),aS=(n,e)=>({"table-warning":n,"oc-strike":e}),zJ=(n,e)=>({ocStrikeStrategyPE:n,ocStrikeSLL:e}),HJ=()=>[0,1,2,3,4],YJ=()=>[5,6],M3=(n,e)=>({"chart-border-green":n,"chart-border-red":e});function GJ(n,e){if(n&1){let t=ge();m(0,"button",186),j("click",function(){C(t);let r=R(3);return x(r.findInstruToTrade())}),w(1,"Find Instru"),_()}}function KJ(n,e){if(n&1){let t=ge();m(0,"button",186),j("click",function(){C(t);let r=R(3);return x(r.startAlgo())}),w(1,"Start"),_()}}function $J(n,e){if(n&1){let t=ge();m(0,"button",186),j("click",function(){C(t);let r=R(3);return x(r.stopAlgo())}),w(1,"Stop"),_()}}function ZJ(n,e){if(n&1&&(m(0,"option",187),w(1),_()),n&2){let t=e.$implicit;V("value",t),y(),J(" ",t," ")}}function XJ(n,e){if(n&1){let t=ge();m(0,"div",21)(1,"div",22)(2,"div",75)(3,"input",182),U("ngModelChange",function(r){C(t);let s=R(2);return z(s.algoSimulated,r)||(s.algoSimulated=r),x(r)}),_(),m(4,"label",183),w(5,"Simulated"),_()(),te(6,GJ,2,0,"button",23)(7,KJ,2,0,"button",23)(8,$J,2,0,"button",23),m(9,"select",72),U("ngModelChange",function(r){C(t);let s=R(2);return z(s.instruToTrade,r)||(s.instruToTrade=r),x(r)}),te(10,ZJ,2,2,"option",25),_(),m(11,"input",184),U("ngModelChange",function(r){C(t);let s=R(2);return z(s.expiryDateToTrade,r)||(s.expiryDateToTrade=r),x(r)}),_(),m(12,"button",185),j("click",function(){C(t);let r=R(2);return x(r.recreateAlgoPos())}),w(13,"Refresh"),_()()()}if(n&2){let t=R(2);y(3),W("ngModel",t.algoSimulated),y(3),V("ngIf",!t.instruToTrade),y(),V("ngIf",!t.enableAlgo&&t.instruToTrade),y(),V("ngIf",t.enableAlgo&&t.instruToTrade),y(),W("ngModel",t.instruToTrade),y(),V("ngForOf",t.supportedInstru),y(),W("ngModel",t.expiryDateToTrade)}}function QJ(n,e){if(n&1){let t=ge();m(0,"tr")(1,"td",188)(2,"input",189),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.qty,r)||(s.qty=r),x(r)}),j("ngModelChange",function(r){let s=C(t).$implicit,o=R(3);return x(o.posQtyUpdated(r,s))}),_()(),m(3,"td",188),w(4),_(),m(5,"td",188),w(6),_(),m(7,"td",188),w(8),_(),m(9,"td",188)(10,"div",190)(11,"div",191)(12,"input",192),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.sl,r)||(s.sl=r),x(r)}),_(),m(13,"span",193),w(14),_()(),m(15,"input",194),j("keyup",function(r){let s=C(t).$implicit,o=R(3);return x(o.rollAlgoStrikeKeyUp(r,s,"sl"))}),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.sl_strike,r)||(s.sl_strike=r),x(r)}),_(),m(16,"button",142),j("click",function(){let r=C(t).$implicit,s=R(3);return x(s.executeOrder(r,"currentstrike"))}),w(17,"Roll"),_()()(),m(18,"td",188)(19,"div",190)(20,"div",191)(21,"input",192),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.rollin,r)||(s.rollin=r),x(r)}),_(),m(22,"span",193),w(23),_()(),m(24,"input",194),j("keyup",function(r){let s=C(t).$implicit,o=R(3);return x(o.rollAlgoStrikeKeyUp(r,s,"rollin"))}),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.rollin_strike,r)||(s.rollin_strike=r),x(r)}),_(),m(25,"button",142),j("click",function(){let r=C(t).$implicit,s=R(3);return x(s.executeOrder(r,"currentstrike"))}),w(26,"Roll"),_()()(),m(27,"td",188)(28,"input",195),j("ngModelChange",function(r){let s=C(t).$implicit,o=R(3);return x(o.posQtyUpdated(r,s))}),_()(),m(29,"td",188),w(30),_()()}if(n&2){let t=e.$implicit,i=R(3);y(2),V("step",i.stepValue),W("ngModel",t.qty),V("ngClass",Oe(13,qm,t.qty<0,t.qty>0)),y(2),J(" ",t.entry," "),y(2),J(" ",t.scrip," "),y(2),J(" ",i.getAlgoPosLTP(t.scrip)," "),y(4),W("ngModel",t.sl),y(2),X(i.getSLCount(t)),y(),W("ngModel",t.sl_strike),y(6),W("ngModel",t.rollin),y(2),X(i.getRollInCount(t)),y(),W("ngModel",t.rollin_strike),y(6),J(" ",i.getAlgoOrderStatus(t)," ")}}function JJ(n,e){if(n&1){let t=ge();m(0,"div")(1,"div",34)(2,"textarea",35),U("ngModelChange",function(r){C(t);let s=R(2);return z(s.algoLog,r)||(s.algoLog=r),x(r)}),_()(),m(3,"table",36)(4,"thead",37)(5,"tr")(6,"th",38),w(7,"Qty"),_(),m(8,"th",38),w(9,"Entry"),_(),m(10,"th",38),w(11,"Strike"),_(),m(12,"th",38),w(13,"LTP"),_(),m(14,"th",38),w(15,"SL"),_(),m(16,"th",38),w(17,"RollIn"),_(),m(18,"th",38),w(19,"Order Id"),_(),m(20,"th",38),w(21,"Order Status"),_()()(),m(22,"tbody"),te(23,QJ,31,16,"tr",163),_()(),Ze(24,"hr"),_()}if(n&2){let t=R(2);y(2),W("ngModel",t.algoLog),y(21),V("ngForOf",t.algo_pos)}}function eee(n,e){if(n&1){let t=ge();m(0,"div",179)(1,"div",75)(2,"input",180),U("ngModelChange",function(r){C(t);let s=R();return z(s.show_algo,r)||(s.show_algo=r),x(r)}),_(),m(3,"label",181),w(4,"Algo"),_()(),te(5,XJ,14,7,"div",92)(6,JJ,25,2,"div",68),_()}if(n&2){let t=R();y(2),W("ngModel",t.show_algo),y(3),V("ngIf",t.show_algo),y(),V("ngIf",t.show_algo)}}function tee(n,e){if(n&1){let t=ge();m(0,"button",186),j("click",function(){C(t);let r=R();return x(r.findInstruToTradeSS())}),w(1,"Find Instru"),_()}}function nee(n,e){if(n&1){let t=ge();m(0,"button",186),j("click",function(){C(t);let r=R();return x(r.startAlgoSS())}),w(1,"Start"),_()}}function iee(n,e){if(n&1){let t=ge();m(0,"button",186),j("click",function(){C(t);let r=R();return x(r.stopAlgoSS())}),w(1,"Stop"),_()}}function ree(n,e){if(n&1&&(m(0,"option",187),w(1),_()),n&2){let t=e.$implicit;V("value",t),y(),J(" ",t," ")}}function see(n,e){if(n&1&&(m(0,"span",42),w(1),_()),n&2){let t=R().$implicit,i=R();V("ngClass",Oe(2,Sn,t.pnl<0,t.pnl>0)),y(),J(" ",i.getPnL(t)," ")}}function oee(n,e){if(n&1&&(m(0,"tr",42)(1,"td",188),w(2),_(),m(3,"td",188),w(4),_(),m(5,"td",188),w(6),_(),m(7,"td",188),w(8),_(),m(9,"td",188),w(10),_(),m(11,"td",188),w(12),_(),m(13,"td",188),te(14,see,2,5,"span",196),_()()),n&2){let t=e.$implicit,i=R();V("ngClass",nn(8,BJ,t.exit!==0,t.exit===0&&t.triggerPrice!==0&&t.qty>0,t.exit===0&&t.triggerPrice!==0&&t.qty<0)),y(2),J(" ",t.scrip," "),y(2),J(" ",t.qty," "),y(2),J(" ",t.entry," "),y(2),J(" ",i.getAlgoSSPosLTP(t.scrip)," "),y(2),J(" ",t.triggerPrice," "),y(2),J(" ",t.exit," "),y(2),V("ngIf",!(t.exit===0&&t.triggerPrice!==0))}}function aee(n,e){if(n&1){let t=ge();m(0,"div")(1,"div",46)(2,"input",197),U("ngModelChange",function(r){C(t);let s=R();return z(s.use_filter_expiry,r)||(s.use_filter_expiry=r),x(r)}),_(),m(3,"label",198),w(4,"Filter Expiry"),_(),m(5,"input",199),U("ngModelChange",function(r){C(t);let s=R();return z(s.filter_expiry,r)||(s.filter_expiry=r),x(r)}),_()(),m(6,"div",46)(7,"input",200),U("ngModelChange",function(r){C(t);let s=R();return z(s.hide_payoff,r)||(s.hide_payoff=r),x(r)}),_(),m(8,"label",201),w(9,"Hide Payoff"),_()(),m(10,"div",46)(11,"input",202),U("ngModelChange",function(r){C(t);let s=R();return z(s.use_hypo_future,r)||(s.use_hypo_future=r),x(r)}),_(),m(12,"label",203),w(13,"Use Hypothetical Future"),_(),m(14,"input",204),U("ngModelChange",function(r){C(t);let s=R();return z(s.hypo_future_strike,r)||(s.hypo_future_strike=r),x(r)}),_()(),m(15,"div",46)(16,"input",205),U("ngModelChange",function(r){C(t);let s=R();return z(s.hide_roll3,r)||(s.hide_roll3=r),x(r)}),_(),m(17,"label",206),w(18,"Hide Roll 3"),_()(),m(19,"div",46)(20,"input",207),U("ngModelChange",function(r){C(t);let s=R();return z(s.ce_side_overlay,r)||(s.ce_side_overlay=r),x(r)}),_(),m(21,"label",208),w(22,"CE side"),_()(),m(23,"div",46)(24,"input",209),U("ngModelChange",function(r){C(t);let s=R();return z(s.pe_side_overlay,r)||(s.pe_side_overlay=r),x(r)}),_(),m(25,"label",210),w(26,"PE side"),_()(),m(27,"div",46)(28,"input",211),U("ngModelChange",function(r){C(t);let s=R();return z(s.straddle_shiftCE_overlay,r)||(s.straddle_shiftCE_overlay=r),x(r)}),_(),m(29,"label",212),w(30,"Straddle CE shift"),_()(),m(31,"div",46)(32,"input",213),U("ngModelChange",function(r){C(t);let s=R();return z(s.straddle_shiftPE_overlay,r)||(s.straddle_shiftPE_overlay=r),x(r)}),_(),m(33,"label",214),w(34,"Straddle PE shift"),_()(),m(35,"input",215),U("ngModelChange",function(r){C(t);let s=R();return z(s.straddle_shiftQty_overlay,r)||(s.straddle_shiftQty_overlay=r),x(r)}),_(),m(36,"div",46)(37,"input",216),U("ngModelChange",function(r){C(t);let s=R();return z(s.payoff_overlay,r)||(s.payoff_overlay=r),x(r)}),j("change",function(r){C(t);let s=R();return x(s.payoffCheckboxChange(r))}),_(),m(38,"label",217),w(39,"Payoff Overlay"),_(),m(40,"input",218),U("ngModelChange",function(r){C(t);let s=R();return z(s.overlay_strike,r)||(s.overlay_strike=r),x(r)}),_()()()}if(n&2){let t=R();y(2),W("ngModel",t.use_filter_expiry),y(3),W("ngModel",t.filter_expiry),y(2),W("ngModel",t.hide_payoff),y(4),W("ngModel",t.use_hypo_future),y(3),W("ngModel",t.hypo_future_strike),y(2),W("ngModel",t.hide_roll3),y(4),W("ngModel",t.ce_side_overlay),y(4),W("ngModel",t.pe_side_overlay),y(4),W("ngModel",t.straddle_shiftCE_overlay),y(4),W("ngModel",t.straddle_shiftPE_overlay),y(3),W("ngModel",t.straddle_shiftQty_overlay),y(2),W("ngModel",t.payoff_overlay),y(3),W("ngModel",t.overlay_strike)}}function lee(n,e){if(n&1&&(m(0,"option",187),w(1),_()),n&2){let t=e.$implicit;V("value",t),y(),J(" ",t," ")}}function cee(n,e){if(n&1&&(m(0,"option"),w(1),_()),n&2){let t=e.$implicit;y(),J(" ",t," ")}}function uee(n,e){if(n&1&&(m(0,"option"),w(1),_()),n&2){let t=e.$implicit;y(),J(" ",t," ")}}function dee(n,e){if(n&1){let t=ge();m(0,"div",11)(1,"select",219),U("ngModelChange",function(r){C(t);let s=R();return z(s.simulate_instru,r)||(s.simulate_instru=r),x(r)}),j("change",function(r){C(t);let s=R();return x(s.onSimulateInstruChange(r))}),te(2,lee,2,2,"option",25),_(),m(3,"input",220),U("ngModelChange",function(r){C(t);let s=R();return z(s.simulateStartDate,r)||(s.simulateStartDate=r),x(r)}),_(),m(4,"select",221),U("ngModelChange",function(r){C(t);let s=R();return z(s.simulate_expiries_arr_value,r)||(s.simulate_expiries_arr_value=r),x(r)}),j("change",function(r){C(t);let s=R();return x(s.onSimulateExpiryChange(r))}),te(5,cee,2,1,"option",163),_(),m(6,"input",222),U("ngModelChange",function(r){C(t);let s=R();return z(s.simulateExpiryDate,r)||(s.simulateExpiryDate=r),x(r)}),_(),m(7,"select",221),U("ngModelChange",function(r){C(t);let s=R();return z(s.simulate_expiries_arr_value2,r)||(s.simulate_expiries_arr_value2=r),x(r)}),j("change",function(r){C(t);let s=R();return x(s.onSimulateExpiryChange2(r))}),te(8,uee,2,1,"option",163),_(),m(9,"input",222),U("ngModelChange",function(r){C(t);let s=R();return z(s.simulateExpiryDate2,r)||(s.simulateExpiryDate2=r),x(r)}),_(),m(10,"div")(11,"button",176),j("click",function(){C(t);let r=$n(40);return x(r.click())}),w(12,"Import"),_(),m(13,"button",176),j("click",function(){C(t);let r=$n(42);return x(r.click())}),w(14,"Import2"),_(),m(15,"button",223),j("click",function(){C(t);let r=R();return x(r.loadSimulatedNextMins(-1440))}),w(16,"-1440"),_(),m(17,"button",223),j("click",function(){C(t);let r=R();return x(r.loadSimulatedNextMins(1440))}),w(18,"+1440"),_(),m(19,"button",223),j("click",function(){C(t);let r=R();return x(r.loadSimulatedNextMins(-120))}),w(20,"-120"),_(),m(21,"button",223),j("click",function(){C(t);let r=R();return x(r.loadSimulatedNextMins(120))}),w(22,"+120"),_(),m(23,"button",223),j("click",function(){C(t);let r=R();return x(r.loadSimulatedNextMins(-15))}),w(24,"-15"),_(),m(25,"button",223),j("click",function(){C(t);let r=R();return x(r.loadSimulatedNextMins(15))}),w(26,"+15"),_(),m(27,"button",223),j("click",function(){C(t);let r=R();return x(r.loadSimulatedNextMins(-5))}),w(28,"-5"),_(),m(29,"button",223),j("click",function(){C(t);let r=R();return x(r.loadSimulatedNextMins(5))}),w(30,"+5"),_(),m(31,"button",223),j("click",function(){C(t);let r=R();return x(r.loadSimulatedNextMins(-1))}),w(32,"-1"),_(),m(33,"button",223),j("click",function(){C(t);let r=R();return x(r.loadSimulatedNextMins(1))}),w(34,"+1"),_(),m(35,"div",224)(36,"input",225),U("ngModelChange",function(r){C(t);let s=R();return z(s.show_simulate_charts,r)||(s.show_simulate_charts=r),x(r)}),_(),m(37,"label",226),w(38,"Show simulate charts"),_()(),m(39,"input",227,1),j("change",function(r){C(t);let s=R();return x(s.uploadExpiryFile(r))}),_(),m(41,"input",227,2),j("change",function(r){C(t);let s=R();return x(s.uploadExpiryFile2(r))}),_(),m(43,"div"),w(44),_()()()}if(n&2){let t=R();y(),W("ngModel",t.simulate_instru),y(),V("ngForOf",t.supportedInstru),y(),W("ngModel",t.simulateStartDate),y(),W("ngModel",t.simulate_expiries_arr_value),y(),V("ngForOf",t.simulate_expiries_arr),y(),W("ngModel",t.simulateExpiryDate),y(),W("ngModel",t.simulate_expiries_arr_value2),y(),V("ngForOf",t.simulate_expiries_arr2),y(),W("ngModel",t.simulateExpiryDate2),y(27),W("ngModel",t.show_simulate_charts),y(8),J("Date Time: ",t.simulateCurrDateTimeString,"")}}function hee(n,e){n&1&&(m(0,"span",228),w(1," Positions/Quantities match with actual positions "),_())}function pee(n,e){n&1&&(m(0,"span",14),w(1," Positions/Quantities do NOT match with actual positions "),_())}function fee(n,e){if(n&1&&(m(0,"option",187),w(1),_()),n&2){let t=e.$implicit;V("value",t),y(),J(" ",t," ")}}function gee(n,e){if(n&1){let t=ge();m(0,"div",75)(1,"input",229),U("ngModelChange",function(r){C(t);let s=R();return z(s.auto_execute_rollin,r)||(s.auto_execute_rollin=r),x(r)}),_(),m(2,"label",230),w(3,"Auto rollin"),_()()}if(n&2){let t=R();y(),W("ngModel",t.auto_execute_rollin)}}function mee(n,e){if(n&1){let t=ge();m(0,"div",75)(1,"input",231),U("ngModelChange",function(r){C(t);let s=R();return z(s.auto_execute_rollout,r)||(s.auto_execute_rollout=r),x(r)}),_(),m(2,"label",232),w(3,"Auto rollout"),_()()}if(n&2){let t=R();y(),W("ngModel",t.auto_execute_rollout)}}function _ee(n,e){if(n&1){let t=ge();m(0,"div",21),w(1," Secs: "),m(2,"input",233),U("ngModelChange",function(r){C(t);let s=R();return z(s.automate_roll_secs,r)||(s.automate_roll_secs=r),x(r)}),_()()}if(n&2){let t=R();y(2),W("ngModel",t.automate_roll_secs)}}function Aee(n,e){if(n&1){let t=ge();m(0,"div",21),w(1," Slabs: "),m(2,"input",234),U("ngModelChange",function(r){C(t);let s=R();return z(s.automate_slabs,r)||(s.automate_slabs=r),x(r)}),_()()}if(n&2){let t=R();y(2),W("ngModel",t.automate_slabs)}}function yee(n,e){if(n&1){let t=ge();m(0,"div",21),w(1," Slab Qty: "),m(2,"input",235),U("ngModelChange",function(r){C(t);let s=R();return z(s.automate_slab_qty,r)||(s.automate_slab_qty=r),x(r)}),_()()}if(n&2){let t=R();y(2),W("ngModel",t.automate_slab_qty)}}function vee(n,e){if(n&1){let t=ge();m(0,"div",21),w(1," First SL%: "),m(2,"input",236),U("ngModelChange",function(r){C(t);let s=R();return z(s.automate_sl1,r)||(s.automate_sl1=r),x(r)}),_()()}if(n&2){let t=R();y(2),W("ngModel",t.automate_sl1)}}function wee(n,e){if(n&1){let t=ge();m(0,"div",21),w(1," SL% increase: "),m(2,"input",237),U("ngModelChange",function(r){C(t);let s=R();return z(s.automate_sl_increase,r)||(s.automate_sl_increase=r),x(r)}),_()()}if(n&2){let t=R();y(2),W("ngModel",t.automate_sl_increase)}}function bee(n,e){if(n&1){let t=ge();m(0,"div",238),w(1," Min. distance till: "),m(2,"div",239)(3,"input",240),U("ngModelChange",function(r){C(t);let s=R();return z(s.automate_time_1,r)||(s.automate_time_1=r),x(r)}),_(),m(4,"input",241),U("ngModelChange",function(r){C(t);let s=R();return z(s.automate_dist_1,r)||(s.automate_dist_1=r),x(r)}),_()(),m(5,"div",239)(6,"input",242),U("ngModelChange",function(r){C(t);let s=R();return z(s.automate_time_1,r)||(s.automate_time_1=r),x(r)}),_(),m(7,"input",243),U("ngModelChange",function(r){C(t);let s=R();return z(s.automate_dist_1,r)||(s.automate_dist_1=r),x(r)}),_()(),m(8,"div",239)(9,"input",244),U("ngModelChange",function(r){C(t);let s=R();return z(s.automate_time_1,r)||(s.automate_time_1=r),x(r)}),_(),m(10,"input",245),U("ngModelChange",function(r){C(t);let s=R();return z(s.automate_dist_1,r)||(s.automate_dist_1=r),x(r)}),_()(),m(11,"div",239)(12,"input",246),U("ngModelChange",function(r){C(t);let s=R();return z(s.automate_time_1,r)||(s.automate_time_1=r),x(r)}),_(),m(13,"input",247),U("ngModelChange",function(r){C(t);let s=R();return z(s.automate_dist_1,r)||(s.automate_dist_1=r),x(r)}),_()()()}if(n&2){let t=R();y(3),W("ngModel",t.automate_time_1),y(),W("ngModel",t.automate_dist_1),y(2),W("ngModel",t.automate_time_1),y(),W("ngModel",t.automate_dist_1),y(2),W("ngModel",t.automate_time_1),y(),W("ngModel",t.automate_dist_1),y(2),W("ngModel",t.automate_time_1),y(),W("ngModel",t.automate_dist_1)}}function See(n,e){if(n&1&&(m(0,"div"),w(1),Ze(2,"br"),_()),n&2){let t=e.$implicit;y(),J(" ",t,"")}}function Cee(n,e){if(n&1&&te(0,See,3,1,"div",163),n&2){let t=R();V("ngForOf",t.positionPopContent)}}function xee(n,e){if(n&1){let t=ge();m(0,"td")(1,"div",249)(2,"input",267),U("ngModelChange",function(r){C(t);let s=R().$implicit;return z(s.selected,r)||(s.selected=r),x(r)}),_(),m(3,"input",268),U("ngModelChange",function(r){C(t);let s=R().$implicit;return z(s.selectedActual,r)||(s.selectedActual=r),x(r)}),_()()()}if(n&2){let t=R().$implicit;y(2),W("ngModel",t.selected),V("disabled",t.exit!==0),y(),W("ngModel",t.selectedActual),V("disabled",t.exit!==0)}}function Dee(n,e){if(n&1){let t=ge();m(0,"button",142),j("click",function(){C(t);let r=R().$implicit,s=R();return x(s.executeOrder(r,"currentstrike"))}),w(1,"B"),_()}}function Eee(n,e){if(n&1){let t=ge();m(0,"button",269),j("click",function(){C(t);let r=R().$implicit,s=R();return x(s.executeOrder(r,"currentstrike"))}),w(1,"S"),_()}}function Mee(n,e){if(n&1){let t=ge();m(0,"div")(1,"div",75)(2,"input",270),U("ngModelChange",function(r){C(t);let s=R().$implicit;return z(s.rollstrike,r)||(s.rollstrike=r),x(r)}),_(),m(3,"label",271),w(4),m(5,"div"),w(6),_()()(),m(7,"div",75)(8,"input",270),U("ngModelChange",function(r){C(t);let s=R().$implicit;return z(s.rollstrike,r)||(s.rollstrike=r),x(r)}),_(),m(9,"label",271),w(10),m(11,"div"),w(12),_()()(),m(13,"div",75)(14,"input",270),U("ngModelChange",function(r){C(t);let s=R().$implicit;return z(s.rollstrike,r)||(s.rollstrike=r),x(r)}),_(),m(15,"label",271),w(16),m(17,"div"),w(18),_()()()()}if(n&2){let t=R().$implicit,i=R();y(2),Rn("name","inlineRadioOptions-",t.scrip,""),Rn("id","inlineRadio1-",t.scrip,""),Yt("value",i.getPosRollStrike(t,2)),W("ngModel",t.rollstrike),y(),Rn("for","inlineRadio1-",t.scrip,""),y(),J("",i.getPosRollStrike(t,2)," "),y(2),X(i.getPosRollStrikeLTP(t,2)),y(2),Rn("name","inlineRadioOptions-",t.scrip,""),Rn("id","inlineRadio2-",t.scrip,""),Yt("value",i.getPosRollStrike(t,1)),W("ngModel",t.rollstrike),y(),Rn("for","inlineRadio2-",t.scrip,""),y(),J("",i.getPosRollStrike(t,1)," "),y(2),X(i.getPosRollStrikeLTP(t,1)),y(2),Rn("name","inlineRadioOptions-",t.scrip,""),Rn("id","inlineRadio3-",t.scrip,""),Yt("value",i.getPosRollStrike(t,-1)),W("ngModel",t.rollstrike),y(),Rn("for","inlineRadio3-",t.scrip,""),y(),J("",i.getPosRollStrike(t,-1)," "),y(2),X(i.getPosRollStrikeLTP(t,-1))}}function Tee(n,e){if(n&1){let t=ge();m(0,"button",142),j("click",function(){C(t);let r=R(2).$implicit,s=R();return x(s.executeOrder(r,"newstrike"))}),w(1,"B"),_()}}function Iee(n,e){if(n&1){let t=ge();m(0,"button",269),j("click",function(){C(t);let r=R(2).$implicit,s=R();return x(s.executeOrder(r,"newstrike"))}),w(1,"S"),_()}}function kee(n,e){if(n&1){let t=ge();m(0,"td",188)(1,"div",190)(2,"input",272),U("ngModelChange",function(r){C(t);let s=R().$implicit;return z(s.rollstrike_new,r)||(s.rollstrike_new=r),x(r)}),j("keyup",function(r){C(t);let s=R().$implicit,o=R();return x(o.rollStrikeKeyUp(r,s))}),_(),m(3,"div",259),w(4),_(),te(5,Tee,2,0,"button",260)(6,Iee,2,0,"button",261),_()()}if(n&2){let t=R().$implicit,i=R();y(2),W("ngModel",t.rollstrike_new),V("ngClass",$t(5,jJ,i.isRollStrikeITM(t))),y(2),X(i.getLTP(t.expiry,t.rollstrike_new)),y(),V("ngIf",t.qty>0),y(),V("ngIf",t.qty<0)}}function Pee(n,e){if(n&1){let t=ge();m(0,"td",255)(1,"input",273),U("ngModelChange",function(r){C(t);let s=R().$implicit;return z(s.expiry,r)||(s.expiry=r),x(r)}),_()()}if(n&2){let t=R().$implicit;y(),W("ngModel",t.expiry)}}function Nee(n,e){if(n&1){let t=ge();m(0,"td",274)(1,"input",275),U("ngModelChange",function(r){C(t);let s=R().$implicit;return z(s.exit,r)||(s.exit=r),x(r)}),_()()}if(n&2){let t=R().$implicit;y(),W("ngModel",t.exit)}}function Oee(n,e){if(n&1){let t=ge();m(0,"td",276)(1,"button",277),j("click",function(){C(t);let r=R().$implicit,s=R();return x(s.rollPosition(r))}),w(2,"Roll"),_()()}}function Ree(n,e){if(n&1){let t=ge();m(0,"td")(1,"button",277),j("click",function(){C(t);let r=R().$implicit,s=R();return x(s.splitPosition(r))}),w(2,"+"),_()()}}function Fee(n,e){if(n&1){let t=ge();m(0,"td")(1,"button",277),j("click",function(){C(t);let r=R().$implicit,s=R();return x(s.deletePosition(r))}),w(2,"X"),_()()}}function Lee(n,e){if(n&1){let t=ge();m(0,"td",278)(1,"div",190)(2,"input",279),U("ngModelChange",function(r){C(t);let s=R().$implicit;return z(s.entryDateTime,r)||(s.entryDateTime=r),x(r)}),_(),m(3,"input",280),U("ngModelChange",function(r){C(t);let s=R().$implicit;return z(s.exitDateTime,r)||(s.exitDateTime=r),x(r)}),_()()()}if(n&2){let t=R().$implicit;y(2),W("ngModel",t.entryDateTime),y(),W("ngModel",t.exitDateTime)}}function Vee(n,e){if(n&1){let t=ge();m(0,"td",278)(1,"input",281),U("ngModelChange",function(r){C(t);let s=R().$implicit;return z(s.alertPrice,r)||(s.alertPrice=r),x(r)}),_(),m(2,"span",282),w(3),_()()}if(n&2){let t=R().$implicit;y(),W("ngModel",t.alertPrice),y(2),X(t.alertStatus)}}function Bee(n,e){if(n&1){let t=ge();m(0,"td",278)(1,"div")(2,"input",283),U("ngModelChange",function(r){C(t);let s=R().$implicit;return z(s.alertPrice,r)||(s.alertPrice=r),x(r)}),_(),m(3,"span",284),w(4),_(),m(5,"input",283),U("ngModelChange",function(r){C(t);let s=R().$implicit;return z(s.alertPrice,r)||(s.alertPrice=r),x(r)}),_(),m(6,"span",284),w(7),_(),m(8,"input",283),U("ngModelChange",function(r){C(t);let s=R().$implicit;return z(s.alertPrice,r)||(s.alertPrice=r),x(r)}),_(),m(9,"span",284),w(10),_(),m(11,"input",283),U("ngModelChange",function(r){C(t);let s=R().$implicit;return z(s.alertPrice,r)||(s.alertPrice=r),x(r)}),_(),m(12,"span",284),w(13),_()(),m(14,"div")(15,"input",283),U("ngModelChange",function(r){C(t);let s=R().$implicit;return z(s.alertPrice,r)||(s.alertPrice=r),x(r)}),_(),m(16,"span",284),w(17),_(),m(18,"input",283),U("ngModelChange",function(r){C(t);let s=R().$implicit;return z(s.alertPrice,r)||(s.alertPrice=r),x(r)}),_(),m(19,"span",284),w(20),_(),m(21,"input",283),U("ngModelChange",function(r){C(t);let s=R().$implicit;return z(s.alertPrice,r)||(s.alertPrice=r),x(r)}),_(),m(22,"span",284),w(23),_(),m(24,"input",283),U("ngModelChange",function(r){C(t);let s=R().$implicit;return z(s.alertPrice,r)||(s.alertPrice=r),x(r)}),_(),m(25,"span",284),w(26),_()()()}if(n&2){let t=R().$implicit;y(2),W("ngModel",t.alertPrice),y(2),X(t.alertStatus),y(),W("ngModel",t.alertPrice),y(2),X(t.alertStatus),y(),W("ngModel",t.alertPrice),y(2),X(t.alertStatus),y(),W("ngModel",t.alertPrice),y(2),X(t.alertStatus),y(2),W("ngModel",t.alertPrice),y(2),X(t.alertStatus),y(),W("ngModel",t.alertPrice),y(2),X(t.alertStatus),y(),W("ngModel",t.alertPrice),y(2),X(t.alertStatus),y(),W("ngModel",t.alertPrice),y(2),X(t.alertStatus)}}function qee(n,e){if(n&1){let t=ge();m(0,"tr",42)(1,"td",248)(2,"div",249)(3,"input",250),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.addToOrders,r)||(s.addToOrders=r),x(r)}),_()()(),te(4,xee,4,4,"td",68),m(5,"td",251)(6,"div",190)(7,"input",252),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.qty,r)||(s.qty=r),x(r)}),j("ngModelChange",function(r){let s=C(t).$implicit,o=R();return x(o.posQtyUpdated(r,s))}),_(),m(8,"input",253),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.roll_qty,r)||(s.roll_qty=r),x(r)}),_()()(),m(9,"td",254)(10,"span",42),w(11),_()(),m(12,"td",255)(13,"input",256),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.entry,r)||(s.entry=r),x(r)}),_(),m(14,"span",257),j("click",function(){let r=C(t).$implicit,s=R();return x(s.updateStrikePopover(r))}),w(15,"\u24D8"),_()(),m(16,"td",188)(17,"div",190)(18,"input",258),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.scrip,r)||(s.scrip=r),x(r)}),_(),m(19,"div",259),w(20),_(),te(21,Dee,2,0,"button",260)(22,Eee,2,0,"button",261),_(),te(23,Mee,19,30,"div",68),_(),te(24,kee,7,7,"td",262)(25,Pee,2,1,"td",263)(26,Nee,2,1,"td",264)(27,Oee,3,0,"td",265)(28,Ree,3,0,"td",68)(29,Fee,3,0,"td",68)(30,Lee,4,2,"td",266)(31,Vee,4,2,"td",266)(32,Bee,27,16,"td",266),_()}if(n&2){let t=e.$implicit,i=R(),r=$n(253);V("ngClass",Oe(27,qJ,t.exit!==0,i.hide_closed&&t.exit!==0)),y(3),W("ngModel",t.addToOrders),y(),V("ngIf",i.payoff_overlay),y(3),V("step",i.stepValue),W("ngModel",t.qty),V("ngClass",Oe(30,qm,t.qty<0,t.qty>0)),y(),V("step",i.stepValue),W("ngModel",t.roll_qty),V("ngClass",Oe(33,qm,t.roll_qty<0,t.roll_qty>0)),y(2),V("ngClass",Oe(36,Sn,t.pnl<0,t.pnl>0)),y(),J(" ",i.getPnL(t)," "),y(2),W("ngModel",t.entry),y(),V("ngbPopover",r),y(4),W("ngModel",t.scrip),y(2),X(i.getLTP(t.expiry,t.scrip)),y(),V("ngIf",t.qty<0),y(),V("ngIf",t.qty>0),y(),V("ngIf",t.exit===0&&!i.hide_roll3),y(),V("ngIf",!i.hide_roll),y(),V("ngIf",!i.hide_extra),y(),V("ngIf",!i.hide_extra),y(),V("ngIf",!i.hide_roll),y(),V("ngIf",!i.hide_extra),y(),V("ngIf",!i.hide_extra),y(),V("ngIf",i.currLoadNum===i.stocksStrategyNum),y(),V("ngIf",!i.auto_execute),y(),V("ngIf",i.auto_execute)}}function jee(n,e){if(n&1){let t=ge();m(0,"button",142),j("click",function(){C(t);let r=R(2).$implicit,s=R(2);return x(s.executeOrderSLL(r))}),w(1,"SL-L buy"),_()}}function Wee(n,e){if(n&1){let t=ge();m(0,"button",269),j("click",function(){C(t);let r=R(2).$implicit,s=R(2);return x(s.executeOrderSLL(r))}),w(1,"SL-L sell"),_()}}function Uee(n,e){if(n&1&&(m(0,"div",190),te(1,jee,2,0,"button",260)(2,Wee,2,0,"button",261),_()),n&2){let t=R().$implicit;y(),V("ngIf",t.qty>0),y(),V("ngIf",t.qty<0)}}function zee(n,e){if(n&1){let t=ge();m(0,"button",277),j("click",function(){C(t);let r=R().$implicit,s=R(2);return x(s.executeOrderSLL(r))}),w(1,"Modify"),_()}}function Hee(n,e){if(n&1){let t=ge();m(0,"button",277),j("click",function(){C(t);let r=R().$implicit,s=R(2);return x(s.cancelSLLOrder(r))}),w(1,"Cancel"),_()}}function Yee(n,e){if(n&1){let t=ge();m(0,"button",277),j("click",function(){C(t);let r=R().$implicit,s=R(2);return x(s.deleteSLLOrder(r))}),w(1,"X"),_()}}function Gee(n,e){if(n&1){let t=ge();m(0,"tr",42)(1,"td",248)(2,"div",190)(3,"input",287),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.qty,r)||(s.qty=r),x(r)}),_()()(),m(4,"td",188)(5,"div",190)(6,"input",288),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.scrip,r)||(s.scrip=r),x(r)}),_(),m(7,"div",259),w(8),_()()(),m(9,"td",248)(10,"input",289),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.price,r)||(s.price=r),x(r)}),_()(),m(11,"td",248)(12,"input",290),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.trigger_price,r)||(s.trigger_price=r),x(r)}),_()(),m(13,"td",248),te(14,Uee,3,2,"div",291),_(),m(15,"td",292),te(16,zee,2,0,"button",293),_(),m(17,"td",292),te(18,Hee,2,0,"button",293),_(),m(19,"td",292),te(20,Yee,2,0,"button",293),_()()}if(n&2){let t=e.$implicit,i=R(2);V("ngClass",$t(12,WJ,t.order_id!==null)),y(3),V("step",i.stepValue),W("ngModel",t.qty),V("ngClass",Oe(14,qm,t.qty<0,t.qty>0)),y(3),W("ngModel",t.scrip),y(2),X(i.getLTP(t.expiry,t.scrip)),y(2),W("ngModel",t.price),y(2),W("ngModel",t.trigger_price),y(2),V("ngIf",t.order_id===null),y(2),V("ngIf",t.order_id),y(2),V("ngIf",t.order_id),y(2),V("ngIf",t.order_id===null)}}function Kee(n,e){if(n&1&&(m(0,"table",36)(1,"thead",37)(2,"tr")(3,"th",285),w(4,"Qty"),_(),m(5,"th",286),w(6,"Scrip"),_(),m(7,"th",285),w(8,"Exec. Price"),_(),m(9,"th",285),w(10,"Trigger"),_(),Ze(11,"th",285)(12,"th",285)(13,"th",285)(14,"th",285),_()(),m(15,"tbody"),te(16,Gee,21,17,"tr",39),_()()),n&2){let t=R();y(16),V("ngForOf",t.sl_trades)}}function $ee(n,e){if(n&1){let t=ge();m(0,"div",294)(1,"div",96)(2,"div",295),Ze(3,"canvas",296),_(),m(4,"div",297)(5,"div",298)(6,"div",299),w(7),_(),m(8,"div",299),w(9),_(),m(10,"input",300),U("ngModelChange",function(r){C(t);let s=R();return z(s.strategyAlertPrice,r)||(s.strategyAlertPrice=r),x(r)}),_(),m(11,"span",14),w(12),_()(),m(13,"div",40),w(14," Total PnL: "),m(15,"div",41)(16,"span",42),w(17),_(),m(18,"span",301),w(19),_()()(),m(20,"div",96)(21,"div",302)(22,"button",176),j("click",function(){C(t);let r=R();return x(r.addPosition())}),w(23,"Add"),_(),m(24,"button",176),j("click",function(){C(t);let r=R();return x(r.calculatePayoff())}),w(25,"Preview"),_(),m(26,"div",303)(27,"button",176),j("click",function(){C(t);let r=$n(30);return x(r.click())}),w(28,"Import"),_(),m(29,"input",304,3),j("change",function(r){C(t);let s=R();return x(s.importCSV(r,1))}),_(),m(31,"button",176),j("click",function(){C(t);let r=R();return x(r.fetchLastOI())}),w(32,"Fetch OI"),_()(),m(33,"a",305),w(34,"View Fly Payoff"),_(),m(35,"button",142),j("click",function(){C(t);let r=R();return x(r.findDS_BuyExit())}),w(36,"DS Buy Exit"),_(),m(37,"span"),w(38),_(),m(39,"div",34)(40,"button",176),j("click",function(){C(t);let r=R();return x(r.savePositions(1))}),w(41,"Save 1"),_(),m(42,"button",176),j("click",function(){C(t);let r=R();return x(r.savePositions(2))}),w(43,"Save 2"),_(),m(44,"button",176),j("click",function(){C(t);let r=R();return x(r.savePositions(3))}),w(45,"Save 3"),_(),m(46,"button",176),j("click",function(){C(t);let r=R();return x(r.savePositions(4))}),w(47,"Save 4"),_(),m(48,"button",176),j("click",function(){C(t);let r=R();return x(r.savePositions(5))}),w(49,"Save 5"),_(),m(50,"button",176),j("click",function(){C(t);let r=R();return x(r.savePositions(6))}),w(51,"Save 6"),_(),m(52,"button",176),j("click",function(){C(t);let r=R();return x(r.savePositions(7))}),w(53,"Save 7"),_(),m(54,"button",176),j("click",function(){C(t);let r=R();return x(r.savePositions(8))}),w(55,"Save 8"),_()(),m(56,"div",34)(57,"button",176),j("click",function(){C(t);let r=R();return x(r.reloadPayoffData(1))}),w(58,"Load 1"),_(),m(59,"button",176),j("click",function(){C(t);let r=R();return x(r.reloadPayoffData(2))}),w(60,"Load 2"),_(),m(61,"button",176),j("click",function(){C(t);let r=R();return x(r.reloadPayoffData(3))}),w(62,"Load 3"),_(),m(63,"button",176),j("click",function(){C(t);let r=R();return x(r.reloadPayoffData(4))}),w(64,"Load 4"),_(),m(65,"button",176),j("click",function(){C(t);let r=R();return x(r.reloadPayoffData(5))}),w(66,"Load 5"),_(),m(67,"button",176),j("click",function(){C(t);let r=R();return x(r.reloadPayoffData(6))}),w(68,"Load 6"),_(),m(69,"button",176),j("click",function(){C(t);let r=R();return x(r.reloadPayoffData(7))}),w(70,"Load 7"),_(),m(71,"button",176),j("click",function(){C(t);let r=R();return x(r.reloadPayoffData(8))}),w(72,"Load 8"),_()(),m(73,"div",34)(74,"button",176),j("click",function(){C(t);let r=R();return x(r.exportToCSV(1))}),w(75,"Export 1"),_(),m(76,"button",176),j("click",function(){C(t);let r=R();return x(r.exportToCSV(2))}),w(77,"Export 2"),_(),m(78,"button",176),j("click",function(){C(t);let r=R();return x(r.exportToCSV(3))}),w(79,"Export 3"),_(),m(80,"button",176),j("click",function(){C(t);let r=R();return x(r.exportToCSV(4))}),w(81,"Export 4"),_(),m(82,"button",176),j("click",function(){C(t);let r=R();return x(r.exportToCSV(5))}),w(83,"Export 5"),_(),m(84,"button",176),j("click",function(){C(t);let r=R();return x(r.exportToCSV(6))}),w(85,"Export 6"),_(),m(86,"button",176),j("click",function(){C(t);let r=R();return x(r.exportToCSV(7))}),w(87,"Export 7"),_(),m(88,"button",176),j("click",function(){C(t);let r=R();return x(r.exportToCSV(8))}),w(89,"Export 8"),_()(),m(90,"div",238),w(91),_(),m(92,"div",238),w(93),m(94,"button",142),j("click",function(){C(t);let r=R();return x(r.getFunds())}),w(95,"Fetch"),_()(),m(96,"div",238),w(97),_(),m(98,"div",238),w(99),_()()()()()()}if(n&2){let t=R();y(3),V("data",t.lineChartData)("options",t.lineChartOptions)("type",t.lineChartType),y(4),J("Sold: ",t.getSoldPremium()[0],""),y(2),J("Current: ",t.getSoldPremium()[1],""),y(),W("ngModel",t.strategyAlertPrice),y(2),X(t.strategyAlertText),y(4),V("ngClass",Oe(16,Sn,t.strategyPnl<0,t.strategyPnl>0)),y(),J(" ",t.getStrategyPnL()," "),y(2),J(" (",t.getStrategyPnLAfterCharges(),") "),y(19),X(t.ds_buy_exit),y(53),J("Margin: ",t.margin,""),y(2),li("Available Margin: ",t.avail_margin," / Used Margin: ",t.used_margin," "),y(4),J("ROI: ",t.getROI()," %"),y(2),J("Breakevens: ",t.breakevens,"")}}function Zee(n,e){if(n&1&&(m(0,"option",187),w(1),_()),n&2){let t=e.$implicit;V("value",t),y(),J(" ",t," ")}}function Xee(n,e){if(n&1&&(m(0,"option",187),w(1),_()),n&2){let t=e.$implicit;V("value",t),y(),J(" ",t," ")}}function Qee(n,e){if(n&1){let t=ge();m(0,"div",46)(1,"input",306),U("ngModelChange",function(r){C(t);let s=R();return z(s.strangle_chart_simulate_tillend,r)||(s.strangle_chart_simulate_tillend=r),x(r)}),_(),m(2,"label",307),w(3,"Till end"),_()()}if(n&2){let t=R();y(),W("ngModel",t.strangle_chart_simulate_tillend)}}function Jee(n,e){if(n&1&&(m(0,"span"),w(1),_()),n&2){let t=R();y(),li("",t.simulateCurrDateTimeString," - Expiry: ",t.simulateExpiryDate,"")}}function ete(n,e){if(n&1&&(m(0,"div",308)(1,"div",106),w(2),_()()),n&2){let t=R();y(2),X(t.charts_instru)}}function tte(n,e){n&1&&(m(0,"th",313),w(1,"Call LTP"),_())}function nte(n,e){n&1&&(m(0,"th",313),w(1,"Put LTP"),_())}function ite(n,e){if(n&1&&(m(0,"div",329),w(1),_()),n&2){let t=R().$implicit;y(),li(" ",t.qtyCE," (",t.costCE,") ")}}function rte(n,e){if(n&1&&(m(0,"div",329),w(1),_()),n&2){let t=R().$implicit;y(),J(" ",t.sllCE," ")}}function ste(n,e){if(n&1){let t=ge();m(0,"td",330)(1,"span",321),j("click",function(){C(t);let r=R(),s=r.$implicit,o=r.index,a=R(2);return x(a.addToStrategyBuilder(s.strike,"CE",a.getCELtpForSecondExpiry(o)))}),w(2),_()()}if(n&2){let t=R().index,i=R(2);y(2),X(i.getCELtpForSecondExpiry(t))}}function ote(n,e){if(n&1&&(m(0,"div",331),w(1),_()),n&2){let t=R(3);y(),J(" ",t.getSpotValue()," ")}}function ate(n,e){n&1&&(m(0,"div",332),w(1," N "),_())}function lte(n,e){if(n&1){let t=ge();m(0,"td",330)(1,"span",321),j("click",function(){C(t);let r=R(),s=r.$implicit,o=r.index,a=R(2);return x(a.addToStrategyBuilder(s.strike,"PE",a.getPELtpForSecondExpiry(o)))}),w(2),_()()}if(n&2){let t=R().index,i=R(2);y(2),X(i.getPELtpForSecondExpiry(t))}}function cte(n,e){if(n&1&&(m(0,"div",329),w(1),_()),n&2){let t=R().$implicit;y(),li(" ",t.qtyPE," (",t.costPE,") ")}}function ute(n,e){if(n&1&&(m(0,"div",329),w(1),_()),n&2){let t=R().$implicit;y(),J(" ",t.sllPE," ")}}function dte(n,e){if(n&1){let t=ge();m(0,"tr")(1,"td",318)(2,"span",319),j("click",function(){let r=C(t).$implicit,s=R(2);return x(s.update_chart_strike(r.strike+"CE","CE",!0))}),w(3,"\u21AF"),_(),m(4,"span",320),j("click",function(){let r=C(t).$implicit,s=R(2);return x(s.addSLLOrder(r.strike,"CE",r.ltpCE))}),w(5,"\u2022"),_(),m(6,"span",321),j("click",function(){let r=C(t).$implicit,s=R(2);return x(s.addToStrategyBuilder(r.strike,"CE",r.ltpCE))}),w(7),_(),te(8,ite,2,2,"div",322)(9,rte,2,1,"div",322),_(),te(10,ste,3,1,"td",323),m(11,"td",324),w(12),te(13,ote,2,1,"div",325)(14,ate,2,0,"div",326),_(),te(15,lte,3,1,"td",323),m(16,"td",318)(17,"span",321),j("click",function(){let r=C(t).$implicit,s=R(2);return x(s.addToStrategyBuilder(r.strike,"PE",r.ltpPE))}),w(18),_(),m(19,"span",327),j("click",function(){let r=C(t).$implicit,s=R(2);return x(s.update_chart_strike(r.strike+"PE","PE",!0))}),w(20,"\u21AF"),_(),m(21,"span",328),j("click",function(){let r=C(t).$implicit,s=R(2);return x(s.addSLLOrder(r.strike,"PE",r.ltpPE))}),w(22,"\u2022"),_(),te(23,cte,2,2,"div",322)(24,ute,2,1,"div",322),_()()}if(n&2){let t=e.$implicit,i=R(2);y(),V("ngClass",Oe(14,UJ,t.inCurrStrategyCE,t.sllCE)),y(6),X(t.ltpCE),y(),V("ngIf",t.inCurrStrategyCE),y(),V("ngIf",t.sllCE),y(),V("ngIf",i.simulate_strategy||i.expiryDate2),y(),V("ngClass",Oe(17,aS,t.isSpot,!t.isSpot)),y(),J(" ",t.strike," "),y(),V("ngIf",t.isSpot),y(),V("ngIf",t.showNudge),y(),V("ngIf",i.simulate_strategy||i.expiryDate2),y(),V("ngClass",Oe(20,zJ,t.inCurrStrategyPE,t.sllPE)),y(2),X(t.ltpPE),y(5),V("ngIf",t.inCurrStrategyPE),y(),V("ngIf",t.sllPE)}}function hte(n,e){if(n&1&&(m(0,"div",331),w(1),_()),n&2){let t=R(4);y(),J(" ",t.getSpotValue()," ")}}function pte(n,e){if(n&1){let t=ge();m(0,"tr")(1,"td",330)(2,"span",321),j("click",function(){let r=C(t).$implicit,s=R(3);return x(s.addToStrategyBuilder(r.strike,"CE",r.ltpCE))}),w(3),_()(),m(4,"td",324),w(5),te(6,hte,2,1,"div",325),_(),m(7,"td",330)(8,"span",321),j("click",function(){let r=C(t).$implicit,s=R(3);return x(s.addToStrategyBuilder(r.strike,"PE",r.ltpPE))}),w(9),_()()()}if(n&2){let t=e.$implicit;y(3),X(t.ltpCE),y(),V("ngClass",Oe(5,aS,t.isSpot,!t.isSpot)),y(),J(" ",t.strike," "),y(),V("ngIf",t.isSpot),y(3),X(t.ltpPE)}}function fte(n,e){if(n&1&&(m(0,"table",151)(1,"thead",37)(2,"tr")(3,"th",313),w(4,"Call LTP"),_(),m(5,"th",157),w(6,"Strike"),_(),m(7,"th",313),w(8,"Put LTP"),_()()(),m(9,"tbody"),te(10,pte,10,8,"tr",163),_()()),n&2){let t=R(2);y(10),V("ngForOf",t.oc_strikes2)}}function gte(n,e){if(n&1){let t=ge();m(0,"tr")(1,"td",333),j("click",function(){let r=C(t).$implicit,s=R(2);return x(s.addDSToStrategyBuilder(r))}),w(2),_(),m(3,"td",330)(4,"span",334),w(5),_()(),m(6,"td",330)(7,"span",335),w(8),_()()()}if(n&2){let t=e.$implicit;y(2),J(" ",t.scrip," "),y(3),X(t.maxProfit),y(3),X(t.maxLoss)}}function mte(n,e){if(n&1){let t=ge();m(0,"tr")(1,"td",333),j("click",function(){let r=C(t).$implicit,s=R(2);return x(s.addBflyToStrategyBuilder(r))}),w(2),_(),m(3,"td",330)(4,"span",334),w(5),_()(),m(6,"td",330)(7,"span",335),w(8),_()()()}if(n&2){let t=e.$implicit;y(2),J(" ",t.scrip," "),y(3),X(t.maxProfit),y(3),X(t.maxLoss)}}function _te(n,e){if(n&1){let t=ge();m(0,"div")(1,"div",309)(2,"input",310),U("ngModelChange",function(r){C(t);let s=R();return z(s.inlineOC_higherRange,r)||(s.inlineOC_higherRange=r),x(r)}),_(),m(3,"input",311),U("ngModelChange",function(r){C(t);let s=R();return z(s.inlineOC_lowerRange,r)||(s.inlineOC_lowerRange=r),x(r)}),_(),m(4,"button",150),j("click",function(){C(t);let r=R();return x(r.inlineOCRangeUpdate())}),w(5,"\u2713"),_(),m(6,"input",312),U("ngModelChange",function(r){C(t);let s=R();return z(s.inlineOC_qty,r)||(s.inlineOC_qty=r),x(r)}),_(),m(7,"button",150),j("click",function(){C(t);let r=R();return x(r.inlineOCFix())}),w(8,"\u2713"),_()(),m(9,"table",151)(10,"thead",37)(11,"tr")(12,"th",313),w(13,"Call LTP"),_(),te(14,tte,2,0,"th",314),m(15,"th",157),w(16,"Strike"),_(),te(17,nte,2,0,"th",314),m(18,"th",313),w(19,"Put LTP"),_()()(),m(20,"tbody"),te(21,dte,25,23,"tr",163),_()(),te(22,fte,11,1,"table",315),m(23,"div",309)(24,"input",312),U("ngModelChange",function(r){C(t);let s=R();return z(s.dsMonitorQty,r)||(s.dsMonitorQty=r),x(r)}),_(),w(25," Debit Spread: "),_(),m(26,"table",151)(27,"thead",37)(28,"tr")(29,"th",157),w(30,"Buy Strike"),_(),m(31,"th",313),w(32,"Profit"),_(),m(33,"th",313),w(34,"Loss"),_()()(),m(35,"tbody"),te(36,gte,9,3,"tr",163),_()(),m(37,"div",309)(38,"input",316),U("ngModelChange",function(r){C(t);let s=R();return z(s.bflyMonitorQty,r)||(s.bflyMonitorQty=r),x(r)}),_(),w(39," Butterfly Max P&L: "),_(),m(40,"table",317)(41,"thead",37)(42,"tr")(43,"th",157),w(44,"Sell Strike"),_(),m(45,"th",313),w(46,"Profit"),_(),m(47,"th",313),w(48,"Loss"),_()()(),m(49,"tbody"),te(50,mte,9,3,"tr",163),_()()()}if(n&2){let t=R();y(2),W("ngModel",t.inlineOC_higherRange),y(),W("ngModel",t.inlineOC_lowerRange),y(3),W("ngModel",t.inlineOC_qty),y(8),V("ngIf",t.simulate_strategy||t.expiryDate2),y(3),V("ngIf",t.simulate_strategy||t.expiryDate2),y(4),V("ngForOf",t.oc_strikes),y(),V("ngIf",t.simulate_strategy),y(2),W("ngModel",t.dsMonitorQty),y(12),V("ngForOf",t.ds_monitor),y(2),W("ngModel",t.bflyMonitorQty),y(12),V("ngForOf",t.bfly_monitor)}}function Ate(n,e){n&1&&(m(0,"div"),Ze(1,"iframe",336),_())}function yte(n,e){n&1&&(m(0,"div")(1,"b"),w(2,"Update 27 Nov:"),_(),w(3," Maintain T+0 Monitor extra buying options and buy and exit whenever required. Shift straddle if spot breaching breakeven. Move other side hedge whenever required. End result for the Fly is the straddle one strike near to a side's hedge on the Expiry day. Exit the Fly if getting 3% on deployed capital in the week and move to next week. During the day, maintain your T+0 slope. Do that using extra buying and maintaining appropriate distance of hedge from straddle. If spot is nearing breakeven, make sure that side hedge distance is less than straddle combined premium. At end of the day, if required, then adjust straddle and hedges to achieve the payoff structure and T0 you want. T0 gives your pnl of the day irrespective of whether you are shifting your straddle or not. So maintaining T0 slope is important. If you are shifting straddle constantly, you might capture extra theta decay during the day, but will not be much as compared to original straddle. You will anyways be shifting the straddle at end of day. Not required to shift straddle constantly. Shift straddle has to be shifted when breakeven is breached, because loss rate increases after that at end of day. Also review payoff structure at end of day. Add another lower quantity closer hedged fly if required. "),Ze(4,"br"),m(5,"b"),w(6,"Straddle Adjustments:"),_(),w(7," Move straddle legs as per the trend. Not early (to avoid random moves) and Not Late (ITM loss and lower premium) Moving frequently leads to getting lower premium over time. "),Ze(8,"br"),m(9,"b"),w(10,"Hedge Adjustments:"),_(),w(11," Hedges should not be too far and not too close. Too far increases overnight risk. Too close results in late profit realization. Manage intraday moves with extra buy. Maintaining T0 is important. Move untested side hedge inside if cheap. Add extra small quantity of buy to manage T0 line according to trend. Monitor option chart for this. Look for EMA confirmation, S/R breach for adjustment of straddle and buys. Max loss on a side should be 100 points. In terms of Rs., do 100 * num. lots. Hedge should eventually be at the distance less than straddle premium. "),Ze(12,"br"),m(13,"b"),w(14,"Loss less:"),_(),w(15," A side becomes loss less if NET CREDIT is GREATER than HEDGE DISTANCE on that side. Normally you would have atleast 400 credit in straddle and pay upto 200 on hedges. So net credit is 200. So straddle around 200 points away from hedge can make that side loss less. "),Ze(16,"br"),m(17,"b"),w(18,"Strangle:"),_(),w(19," Sell naked far OTM CE or strangle. Exit the naked option if SL hit. Keep moving untested side naked sell inside. "),Ze(20,"br"),m(21,"b"),w(22,"NEW FLY:"),_(),w(23," If BNF near of crossing breakeven, make CLOSE-HEDGED fly with lower qty at that point. Exit this new fly if BNF moving out of its breakevens. "),_())}function vte(n,e){if(n&1&&(m(0,"div",346)(1,"div",347)(2,"div",348),w(3),_()(),m(4,"div",347)(5,"div",348),w(6),_(),m(7,"div",349),w(8),_()(),m(9,"div",347)(10,"div",348),w(11),_(),m(12,"div",349),w(13),_()(),m(14,"div",347)(15,"div",348),w(16),_(),m(17,"div",349),w(18),_()(),m(19,"div",347)(20,"div",348),w(21),_(),m(22,"div",349),w(23),_()(),m(24,"div",347)(25,"div",348),w(26),_(),m(27,"div",349),w(28),_()(),m(29,"div",347)(30,"div",348),w(31),_(),m(32,"div",349),w(33),_()(),m(34,"div",347)(35,"div",348),w(36),_(),m(37,"div",349),w(38),_()(),m(39,"div",347)(40,"div",348),w(41),_(),m(42,"div",349),w(43),_()()()),n&2){let t=e.$implicit,i=R(2);y(),Yt("id","opt_chart_"+t+"_spot"),y(2),X(i.getChartLabel("opt_chart_"+t+"_spot")),y(),Yt("id","opt_chart_"+t+"_0"),y(2),X(i.getChartLabel("opt_chart_"+t+"_0")),y(2),X(i.getChartValues("opt_chart_"+t+"_0")),y(),Yt("id","opt_chart_"+t+"_1"),y(2),X(i.getChartLabel("opt_chart_"+t+"_1")),y(2),X(i.getChartValues("opt_chart_"+t+"_1")),y(),Yt("id","opt_chart_"+t+"_2"),y(2),X(i.getChartLabel("opt_chart_"+t+"_2")),y(2),X(i.getChartValues("opt_chart_"+t+"_2")),y(),Yt("id","opt_chart_"+t+"_3"),y(2),X(i.getChartLabel("opt_chart_"+t+"_3")),y(2),X(i.getChartValues("opt_chart_"+t+"_3")),y(),Yt("id","opt_chart_"+t+"_4"),y(2),X(i.getChartLabel("opt_chart_"+t+"_4")),y(2),X(i.getChartValues("opt_chart_"+t+"_4")),y(),Yt("id","opt_chart_"+t+"_5"),y(2),X(i.getChartLabel("opt_chart_"+t+"_5")),y(2),X(i.getChartValues("opt_chart_"+t+"_5")),y(),Yt("id","opt_chart_"+t+"_6"),y(2),X(i.getChartLabel("opt_chart_"+t+"_5")),y(2),X(i.getChartValues("opt_chart_"+t+"_5")),y(),Yt("id","opt_chart_"+t+"_7"),y(2),X(i.getChartLabel("opt_chart_"+t+"_5")),y(2),X(i.getChartValues("opt_chart_"+t+"_5"))}}function wte(n,e){if(n&1){let t=ge();m(0,"div",337)(1,"div",21)(2,"span",338),w(3),_(),m(4,"div",339)(5,"input",340),U("ngModelChange",function(r){C(t);let s=R();return z(s.st_chart_radio,r)||(s.st_chart_radio=r),x(r)}),_(),m(6,"label",341),w(7,"5 min"),_()(),m(8,"div",339)(9,"input",342),U("ngModelChange",function(r){C(t);let s=R();return z(s.st_chart_radio,r)||(s.st_chart_radio=r),x(r)}),_(),m(10,"label",343),w(11,"1 min"),_()(),m(12,"button",344),j("click",function(){C(t);let r=R();return x(r.initSTCharts1())}),w(13,"ST 10 2"),_(),m(14,"button",74),j("click",function(){C(t);let r=R();return x(r.backtestExpiryStrangles())}),w(15,"Expiry Strangles"),_(),m(16,"button",74),j("click",function(){C(t);let r=R();return x(r.backtestStrangleSL_Reentry())}),w(17,"Strangle SL Reentry"),_(),m(18,"button",74),j("click",function(){C(t);let r=R();return x(r.backtestLongFly())}),w(19,"Long Fly"),_()(),m(20,"div",134),te(21,vte,44,26,"div",345),_()()}if(n&2){let t=R();y(3),J("Expiry: ",t.simulateExpiryDate,""),y(2),W("ngModel",t.st_chart_radio),y(4),W("ngModel",t.st_chart_radio),y(12),V("ngForOf",fl(4,HJ))}}function bte(n,e){if(n&1&&(m(0,"div",346),Ze(1,"div",357)(2,"div",357)(3,"div",357),_()),n&2){let t=e.index;y(),Yt("id","opt_chart_"+t+"_spot"),y(),Yt("id","opt_chart_"+t+"_CE"),y(),Yt("id","opt_chart_"+t+"_PE")}}function Ste(n,e){if(n&1&&(m(0,"div",346),Ze(1,"div",357)(2,"div",357)(3,"div",357),_()),n&2){let t=e.$implicit;y(),Yt("id","opt_chart_"+t+"_spot"),y(),Yt("id","opt_chart_"+t+"_CE"),y(),Yt("id","opt_chart_"+t+"_PE")}}function Cte(n,e){if(n&1){let t=ge();m(0,"div",337)(1,"div",21)(2,"span",338),w(3),_(),m(4,"div",339)(5,"input",350),U("ngModelChange",function(r){C(t);let s=R();return z(s.st_chart_radio,r)||(s.st_chart_radio=r),x(r)}),_(),m(6,"label",351),w(7,"10 2"),_()(),m(8,"div",339)(9,"input",352),U("ngModelChange",function(r){C(t);let s=R();return z(s.st_chart_radio,r)||(s.st_chart_radio=r),x(r)}),_(),m(10,"label",353),w(11,"7 3"),_()(),m(12,"div",339)(13,"input",354),U("ngModelChange",function(r){C(t);let s=R();return z(s.st_chart_radio,r)||(s.st_chart_radio=r),x(r)}),_(),m(14,"label",355),w(15,"Both"),_()(),m(16,"input",356),U("ngModelChange",function(r){C(t);let s=R();return z(s.st_chart_strike,r)||(s.st_chart_strike=r),x(r)}),_(),m(17,"button",74),j("click",function(){C(t);let r=R();return x(r.initSTCharts())}),w(18,"Init"),_()(),m(19,"div",134),te(20,bte,4,3,"div",345),_(),m(21,"span",338),w(22),_(),m(23,"div",134),te(24,Ste,4,3,"div",345),_()()}if(n&2){let t=R();y(3),J("Expiry: ",t.simulateExpiryDate,""),y(2),W("ngModel",t.st_chart_radio),y(4),W("ngModel",t.st_chart_radio),y(4),W("ngModel",t.st_chart_radio),y(3),W("ngModel",t.st_chart_strike),y(4),V("ngForOf",fl(8,oS).constructor(5)),y(2),J("Expiry: ",t.simulateExpiryDate,""),y(2),V("ngForOf",fl(9,YJ))}}function xte(n,e){if(n&1&&(m(0,"option",187),w(1),_()),n&2){let t=e.$implicit;V("value",t),y(),J(" ",t," ")}}function Dte(n,e){if(n&1&&(m(0,"span"),w(1),_()),n&2){let t=R();y(),li("",t.simulateCurrDateTimeString," - Expiry: ",t.simulateExpiryDate,"")}}function Ete(n,e){if(n&1&&(m(0,"div",308)(1,"div",106),w(2),_()()),n&2){let t=R();y(2),X(t.charts_instru)}}function Mte(n,e){if(n&1){let t=ge();m(0,"div",358),j("click",function(){let r=C(t).index,s=R();return x(s.update_chart_strike(s.chart_strikes_ce[r],"CE"))}),m(1,"div",359)(2,"div",106),w(3),_(),m(4,"div",107),w(5),_()()()}if(n&2){let t=e.index,i=R();y(),Yt("id","opt_chart_"+t+"CE"),V("ngClass",Oe(4,M3,i.isChartStrikeInCurrStrategy(i.chart_strikes_ce[t])>0,i.isChartStrikeInCurrStrategy(i.chart_strikes_ce[t])<0)),y(2),X(i.chart_strikes_ce[t]),y(2),X(i.isChartStrikeInCurrStrategy(i.chart_strikes_ce[t]))}}function Tte(n,e){if(n&1){let t=ge();m(0,"div",358),j("click",function(){let r=C(t).index,s=R();return x(s.update_chart_strike(s.chart_strikes_pe[r],"PE"))}),m(1,"div",359)(2,"div",106),w(3),_(),m(4,"div",107),w(5),_()()()}if(n&2){let t=e.index,i=R();y(),Yt("id","opt_chart_"+t+"PE"),V("ngClass",Oe(4,M3,i.isChartStrikeInCurrStrategy(i.chart_strikes_pe[t])>0,i.isChartStrikeInCurrStrategy(i.chart_strikes_pe[t])<0)),y(2),X(i.chart_strikes_pe[t]),y(2),X(i.isChartStrikeInCurrStrategy(i.chart_strikes_pe[t]))}}function Ite(n,e){if(n&1&&(m(0,"option",187),w(1),_()),n&2){let t=e.$implicit;V("value",t),y(),J(" ",t," ")}}function kte(n,e){if(n&1){let t=ge();m(0,"div",360)(1,"div",361)(2,"input",362),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.selected,r)||(s.selected=r),x(r)}),_()(),m(3,"select",363),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.instru,r)||(s.instru=r),x(r)}),te(4,Ite,2,2,"option",25),_(),m(5,"input",364),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.scrip1,r)||(s.scrip1=r),x(r)}),_(),m(6,"input",365),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.scrip2,r)||(s.scrip2=r),x(r)}),_(),m(7,"input",366),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.expiry,r)||(s.expiry=r),x(r)}),_(),m(8,"select",363),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.compare,r)||(s.compare=r),x(r)}),m(9,"option",367),w(10,">"),_(),m(11,"option",368),w(12,"<"),_()(),m(13,"input",369),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.price,r)||(s.price=r),x(r)}),_(),m(14,"span"),w(15),_(),m(16,"span",282),w(17),_()()}if(n&2){let t=e.$implicit,i=R();y(2),W("ngModel",t.selected),y(),W("ngModel",t.instru),y(),V("ngForOf",i.supportedInstru),y(),W("ngModel",t.scrip1),y(),W("ngModel",t.scrip2),y(),W("ngModel",t.expiry),y(),W("ngModel",t.compare),y(5),W("ngModel",t.price),y(2),X(i.getAlertLtp(t)),y(2),X(t.status)}}function Pte(n,e){if(n&1&&(m(0,"option",187),w(1),_()),n&2){let t=e.$implicit;V("value",t),y(),J(" ",t," ")}}function Nte(n,e){if(n&1&&(m(0,"div",331),w(1),_()),n&2){let t=R(2);y(),J(" ",t.getSpotValue()," ")}}function Ote(n,e){if(n&1){let t=ge();m(0,"tr")(1,"td",330)(2,"span",321),j("click",function(){let r=C(t).$implicit,s=R();return x(s.addToStrategyBuilder(r.strike,"CE",r.ltpCE))}),w(3),_()(),m(4,"td",330)(5,"span",321),j("click",function(){let r=C(t),s=r.$implicit,o=r.index,a=R();return x(a.addToStrategyBuilder(s.strike,"CE",a.getLtpForMultiExpiry2(o)[0]))}),w(6),_()(),m(7,"td",330)(8,"span",321),j("click",function(){let r=C(t),s=r.$implicit,o=r.index,a=R();return x(a.addToStrategyBuilder(s.strike,"CE",a.getLtpForMultiExpiry3(o)[0]))}),w(9),_()(),m(10,"td",330)(11,"span",321),j("click",function(){let r=C(t),s=r.$implicit,o=r.index,a=R();return x(a.addToStrategyBuilder(s.strike,"CE",a.getLtpForMultiExpiry4(o)[0]))}),w(12),_()(),m(13,"td",330)(14,"span",321),j("click",function(){let r=C(t),s=r.$implicit,o=r.index,a=R();return x(a.addToStrategyBuilder(s.strike,"CE",a.getLtpForMultiExpiry5(o)[0]))}),w(15),_()(),m(16,"td",324),w(17),te(18,Nte,2,1,"div",325),_(),m(19,"td",330)(20,"span",321),j("click",function(){let r=C(t),s=r.$implicit,o=r.index,a=R();return x(a.addToStrategyBuilder(s.strike,"PE",a.getLtpForMultiExpiry5(o)[1]))}),w(21),_()(),m(22,"td",330)(23,"span",321),j("click",function(){let r=C(t),s=r.$implicit,o=r.index,a=R();return x(a.addToStrategyBuilder(s.strike,"PE",a.getLtpForMultiExpiry4(o)[1]))}),w(24),_()(),m(25,"td",330)(26,"span",321),j("click",function(){let r=C(t),s=r.$implicit,o=r.index,a=R();return x(a.addToStrategyBuilder(s.strike,"PE",a.getLtpForMultiExpiry3(o)[1]))}),w(27),_()(),m(28,"td",330)(29,"span",321),j("click",function(){let r=C(t),s=r.$implicit,o=r.index,a=R();return x(a.addToStrategyBuilder(s.strike,"PE",a.getLtpForMultiExpiry2(o)[1]))}),w(30),_()(),m(31,"td",330)(32,"span",321),j("click",function(){let r=C(t).$implicit,s=R();return x(s.addToStrategyBuilder(r.strike,"PE",r.ltpPE))}),w(33),_()()()}if(n&2){let t=e.$implicit,i=e.index,r=R();y(3),X(t.ltpCE),y(3),X(r.getLtpForMultiExpiry2(i)[0]),y(3),X(r.getLtpForMultiExpiry3(i)[0]),y(3),X(r.getLtpForMultiExpiry4(i)[0]),y(3),X(r.getLtpForMultiExpiry5(i)[0]),y(),V("ngClass",Oe(13,aS,t.isSpot,!t.isSpot)),y(),J(" ",t.strike," "),y(),V("ngIf",t.isSpot),y(3),X(r.getLtpForMultiExpiry5(i)[1]),y(3),X(r.getLtpForMultiExpiry4(i)[1]),y(3),X(r.getLtpForMultiExpiry3(i)[1]),y(3),X(r.getLtpForMultiExpiry2(i)[1]),y(3),X(t.ltpPE)}}function Rte(n,e){if(n&1&&(m(0,"tr")(1,"td"),w(2),_(),m(3,"td"),w(4),_(),m(5,"td"),w(6),_(),m(7,"td"),w(8),_(),m(9,"td"),w(10),_(),m(11,"td"),w(12),_(),m(13,"td"),w(14),_(),m(15,"td"),w(16),_()()),n&2){let t,i=e.$implicit,r=R();y(2),X(i.instru),y(2),X(i.expiry_date),y(2),X(i.qty),y(2),X(i.scrip),y(2),X(r.getKnifeOrderStatus(i)[0]),y(2),X(r.getKnifeOrderStatus(i)[1]),y(2),X(r.getLTP(i.expiry_date,i.scrip,i.instru)),y(2),X((t=r.getOHLC(i.expiry_date,i.scrip,i.instru))==null?null:t.low)}}function Fte(n,e){if(n&1&&(m(0,"tr")(1,"td"),w(2),_(),m(3,"td"),w(4),_(),m(5,"td"),w(6),_(),m(7,"td"),w(8),_()()),n&2){let t=e.$implicit;y(2),J(" ",t.instru," "),y(2),J(" ",t.scrip," "),y(2),J(" ",t.qty," "),y(2),J(" ",t.price," ")}}function Lte(n,e){if(n&1){let t=ge();m(0,"div")(1,"textarea",370),U("ngModelChange",function(r){C(t);let s=R();return z(s.ordersTextarea,r)||(s.ordersTextarea=r),x(r)}),j("ngModelChange",function(r){C(t);let s=R();return x(s.ordersTextareaUpdated(r))}),_(),m(2,"table",36)(3,"tbody"),te(4,Fte,9,4,"tr",163),_()(),m(5,"div",371)(6,"input",372),U("ngModelChange",function(r){C(t);let s=R();return z(s.orders_broker,r)||(s.orders_broker=r),x(r)}),_(),m(7,"label",373),w(8,"Upstox"),_()(),m(9,"div",371)(10,"input",374),U("ngModelChange",function(r){C(t);let s=R();return z(s.orders_broker,r)||(s.orders_broker=r),x(r)}),_(),m(11,"label",375),w(12,"Zerodha"),_()(),m(13,"button",376),j("click",function(){C(t);let r=R();return x(r.addOrdersToStrategy())}),w(14,"Add"),_(),Ze(15,"hr"),_()}if(n&2){let t=R();y(),W("ngModel",t.ordersTextarea),y(3),V("ngForOf",t.orders_parsed),y(2),W("ngModel",t.orders_broker),y(4),W("ngModel",t.orders_broker)}}function Vte(n,e){if(n&1&&(m(0,"option",187),w(1),_()),n&2){let t=e.$implicit;V("value",t),y(),J(" ",t," ")}}function Bte(n,e){n&1&&(m(0,"span",385),w(1,"N"),_())}function qte(n,e){n&1&&(m(0,"span",385),w(1,"N"),_())}function jte(n,e){if(n&1){let t=ge();m(0,"tr")(1,"td")(2,"select",377),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.instru,r)||(s.instru=r),x(r)}),te(3,Vte,2,2,"option",25),_()(),m(4,"td")(5,"input",378),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.expiry_date,r)||(s.expiry_date=r),x(r)}),_()(),m(6,"td")(7,"input",379),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.curr_qty,r)||(s.curr_qty=r),x(r)}),_()(),m(8,"td")(9,"input",380),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.curr_scrip,r)||(s.curr_scrip=r),x(r)}),_(),m(10,"span",381),w(11),_(),te(12,Bte,2,0,"span",382),_(),m(13,"td")(14,"div",383),w(15),_()(),m(16,"td")(17,"input",384),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.new_scrip,r)||(s.new_scrip=r),x(r)}),_(),m(18,"span",381),w(19),_(),te(20,qte,2,0,"span",382),_(),m(21,"td")(22,"div",383),w(23),_()(),m(24,"td")(25,"button",223),j("click",function(){let r=C(t).index,s=R();return x(s.movePlaceOrder(r,-1))}),w(26,"\u2191"),_(),m(27,"button",277),j("click",function(){let r=C(t).index,s=R();return x(s.movePlaceOrder(r,1))}),w(28,"\u2193"),_()(),m(29,"td")(30,"button",176),j("click",function(){let r=C(t).$implicit,s=R();return x(s.place_roll_orders(r,!0))}),w(31,"Place"),_()()()}if(n&2){let t=e.$implicit,i=R();y(2),W("ngModel",t.instru),y(),V("ngForOf",i.supportedInstru),y(2),W("ngModel",t.expiry_date),y(2),V("ngClass",Oe(17,Sn,t.curr_qty<0,t.curr_qty>0)),W("ngModel",t.curr_qty),y(2),V("ngClass",Oe(20,Sn,t.curr_scrip.includes("PE"),t.curr_scrip.includes("CE"))),W("ngModel",t.curr_scrip),y(),V("ngClass",Oe(23,Sn,-t.curr_qty<0,-t.curr_qty>0)),y(),X(-t.curr_qty),y(),V("ngIf",i.showOILimit(t.instru,t.curr_scrip)),y(3),X(i.getOrderLtp(t,!1)),y(2),V("ngClass",Oe(26,Sn,t.new_scrip.includes("PE"),t.new_scrip.includes("CE"))),W("ngModel",t.new_scrip),y(),V("ngClass",Oe(29,Sn,t.curr_qty<0,t.curr_qty>0)),y(),X(t.curr_qty),y(),V("ngIf",i.showOILimit(t.instru,t.new_scrip)),y(3),X(i.getOrderLtp(t,!0))}}function Wte(n,e){if(n&1&&(m(0,"option",187),w(1),_()),n&2){let t=e.$implicit;V("value",t),y(),J(" ",t," ")}}function Ute(n,e){if(n&1&&(m(0,"option",187),w(1),_()),n&2){let t=e.$implicit;V("value",t),y(),J(" ",t," ")}}function zte(n,e){if(n&1&&(m(0,"option",187),w(1),_()),n&2){let t=e.$implicit;V("value",t),y(),J(" ",t," ")}}function Hte(n,e){if(n&1){let t=ge();m(0,"div",386)(1,"div",5)(2,"h2",6)(3,"button",387),w(4," Straddle Charts "),_()(),m(5,"div",388)(6,"div",17)(7,"div",18)(8,"select",72),U("ngModelChange",function(r){C(t);let s=R();return z(s.straddle1instru,r)||(s.straddle1instru=r),x(r)}),te(9,Wte,2,2,"option",25),_(),m(10,"input",389),U("ngModelChange",function(r){C(t);let s=R();return z(s.straddle1expiryDate,r)||(s.straddle1expiryDate=r),x(r)}),_(),m(11,"input",390),U("ngModelChange",function(r){C(t);let s=R();return z(s.straddle1scrip,r)||(s.straddle1scrip=r),x(r)}),_(),m(12,"select",72),U("ngModelChange",function(r){C(t);let s=R();return z(s.straddle2instru,r)||(s.straddle2instru=r),x(r)}),te(13,Ute,2,2,"option",25),_(),m(14,"input",389),U("ngModelChange",function(r){C(t);let s=R();return z(s.straddle2expiryDate,r)||(s.straddle2expiryDate=r),x(r)}),_(),m(15,"input",390),U("ngModelChange",function(r){C(t);let s=R();return z(s.straddle2scrip,r)||(s.straddle2scrip=r),x(r)}),_(),m(16,"select",72),U("ngModelChange",function(r){C(t);let s=R();return z(s.straddle3instru,r)||(s.straddle3instru=r),x(r)}),te(17,zte,2,2,"option",25),_(),m(18,"input",389),U("ngModelChange",function(r){C(t);let s=R();return z(s.straddle3expiryDate,r)||(s.straddle3expiryDate=r),x(r)}),_(),m(19,"input",390),U("ngModelChange",function(r){C(t);let s=R();return z(s.straddle3scrip,r)||(s.straddle3scrip=r),x(r)}),_()(),Ze(20,"div",294),_()()()()}if(n&2){let t=R();y(8),W("ngModel",t.straddle1instru),y(),V("ngForOf",t.supportedInstru),y(),W("ngModel",t.straddle1expiryDate),y(),W("ngModel",t.straddle1scrip),y(),W("ngModel",t.straddle2instru),y(),V("ngForOf",t.supportedInstru),y(),W("ngModel",t.straddle2expiryDate),y(),W("ngModel",t.straddle2scrip),y(),W("ngModel",t.straddle3instru),y(),V("ngForOf",t.supportedInstru),y(),W("ngModel",t.straddle3expiryDate),y(),W("ngModel",t.straddle3scrip)}}function Yte(n,e){n&1&&(m(0,"div",391)(1,"div",5)(2,"h2",6)(3,"button",392),w(4," Charts "),_()(),m(5,"div",393)(6,"div",17),Ze(7,"iframe",394)(8,"iframe",395),_()()()())}br.register(...og,SN);var jm=class n{constructor(e,t,i,r,s,o,a,l){this.appService=e;this.zerodhaService=t;this.mapService=i;this.websocketService=r;this.angelWS=s;this.chartService=o;this.chartingService=a;this.backtestService=l;this.appService.payOffEvent$.subscribe(c=>{console.log("payOffEvent subcribe: ",c);let u=[];c instanceof Array?u=c:u.push(c),u.forEach(d=>{let h;if(d.scrip)h=d.scrip;else{let g=this.mapService.parseSymbol(d.symbol);h=g.strike+g.type}let p;d.price?p=d.price:p=d.ltp,console.log("Adding scrip to strategy: "+h),this.addPosition(d.qty,h,p,d.expiry)})}),this.appService.placeOrdersEvent$.subscribe(c=>{console.log("placeOrdersEvent subcribe: ",c),this.place_orders=[],c.forEach(u=>{this.place_orders.push({instru:u.instru,expiry_date:this.currExpiry,curr_qty:null,curr_scrip:"",new_scrip:u.strike})})}),this.appService.chartEvent$.subscribe(c=>{console.log("chartEvent subcribe: ",c);let u=this.mapService.parseSymbol(c.symbol),d=u.strike+u.type;console.log("Adding scrip to chart: "+d),this.addScripToChart(d,c.type),this.appService.stockChartEvent$.next({symbol:c.symbol,type:c.type,currdate:this.simulateCurrDateObj})}),f.websocketEvent$.subscribe(c=>{console.log("chart websocketEvent: ",c),c==="connected"&&(this.doStrategiesSubscriptions(),setTimeout(()=>{this.curr_positions_trades||this.reloadPayoffData(1),this.loadOptionChain(),this.loadSpotChart(),this.chartingService.createStockChart()},2e3),setTimeout(()=>{this.refreshOILimits()},4e3))}),f.miscEvent$.subscribe(c=>{console.log("chart component miscEvent: ",c),c==="ordersReceived"&&this.enableAlgo&&this.refreshAlgoSSPositions()})}supportedInstru=f.supportedInstru;s1Trades=null;s2Trades=null;s3Trades=null;s4Trades=null;s5Trades=null;s6Trades=null;s7Trades=null;s8Trades=null;prev_positions=[];currLoadNum=null;payOffData=null;curr_positions_trades=null;sl_trades=[];expiryDate=null;expiryDate2=null;margin=null;avail_margin;used_margin;breakevens=null;cePremium=0;pePremium=0;ceWeight=0;peWeight=0;ceLots=0;peLots=0;urlToFetch="";spot=null;rest_res=null;labels=[];pnl=[];zeroline=[];instru="NIFTY";stepValue=15;strikeStepValue=100;loadOIDistance=500;mean=0;variance=1;positionPopContent=[];showInlineOC=!0;showExtraOptions=!1;simulate_instru="BANKNIFTY";simulate_strategy=!1;simulateExpiryDate="2023-02-16";simulateStartDate="2023-02-16";simulateExpiryDate2="2023-02-16";simulateStartDate2="2023-02-16";simulateCurrDateObj=new Date;simulateTimeAdv;simulateTimeMins=5;simulateCurrHour=9;simulateCurrMins=15;simulateCurrDateTimeString="";show_t0=!1;payoff_overlay=!1;straddle_shiftCE_overlay=!1;straddle_shiftPE_overlay=!1;straddle_shiftQty_overlay;hide_closed=!0;hide_roll=!1;hide_roll3=!0;hide_extra=!1;hide_payoff=!1;hide_clipboard=!0;add_strangle_chart=!1;strangle_chart_simulate_tillend=!1;strangle_chart_ce;strangle_chart_pe;multi_t0=!1;multiT0Input="1,2";show_simulate_charts=!1;use_hypo_future=!1;hypo_future_strike=74.5;use_filter_expiry=!1;filter_expiry="";payoff_range=1e3;alerts=[];ordersTextarea="";orders_parsed=[];orders_broker="zerodha";ce_side_overlay=!1;pe_side_overlay=!1;num_overlays=1;overlay_strike;charts_expiry;currExpiry="";currBnfExpiry="";currFinniftyExpiry="";currMidcapExpiry="";currSensexExpiry="";currBankexExpiry="";currUSDINRExpiry="";selectedPnL=0;selectedMaxProfit=0;selectedMaxLoss=0;matchPositions=!1;oc_strikes;oc_strikes2;multi_oc_strikes1;multi_oc_strikes2;multi_oc_strikes3;multi_oc_strikes4;multi_oc_strikes5;multiOC_instru="NIFTY";expiryDate_multi1="2025-01-30";expiryDate_multi2="2025-02-06";expiryDate_multi3="2025-02-27";expiryDate_multi4="2025-03-27";expiryDate_multi5="2025-12-24";multiOC_higherRange;multiOC_lowerRange;bfly_monitor;bflyMonitorQty;ds_monitor;dsMonitorQty;oc_instru="NIFTY";strategyAlertPrice;strategyAlertText="";inlineOC_higherRange;inlineOC_lowerRange;inlineOC_qty=-1800;inlineOC_qty_fixed=!1;currentSold=0;strategyPnl=0;strategyPnl1=0;strategyAlertPrice1;strategyAlertText1="";strategyName1="";strategyPnl2=0;strategyAlertPrice2;strategyAlertText2="";strategyName2="";strategyPnl3=0;strategyAlertPrice3;strategyAlertText3="";strategyName3="";strategyPnl4=0;strategyAlertPrice4;strategyAlertText4="";strategyName4="";strategyPnl5=0;strategyAlertPrice5;strategyAlertText5="";strategyName5="";strategyPnl6=0;strategyAlertPrice6;strategyAlertText6="";strategyName6="";strategyPnl7=0;strategyAlertPrice7;strategyAlertText7="";strategyName7="";strategyPnl8=0;strategyAlertPrice8;strategyAlertText8="";strategyName8="";use_cf=!1;use_cf_strategies=[];use_tag=!0;use_tag_strategies=[];tagSearch=f.defaultTag;tagSearch_strategies=[];use_include_guid=!0;use_include_guid_strategies=[];use_exclude_guid=!0;use_exclude_guid_strategies=[];use_curr_expiry=!1;expand_single_charts=!0;show_news=!0;saveMTM1=!1;playAlertSound=!0;place_orders=[{instru:"BANKNIFTY",expiry_date:"2023-01-05",curr_qty:-200,curr_scrip:"",new_scrip:"37200CE"},{instru:"BANKNIFTY",expiry_date:"2023-01-05",curr_qty:-200,curr_scrip:"",new_scrip:""},{instru:"BANKNIFTY",expiry_date:"2023-01-05",curr_qty:-200,curr_scrip:"",new_scrip:""},{instru:"BANKNIFTY",expiry_date:"2023-01-05",curr_qty:-200,curr_scrip:"",new_scrip:""}];broker_auth="enctoken JSZVXPxDxfYE1BwATYBtropRu0k5DrWsRVWZREuEMB2OCz91S6Gsjd1FxNdHJ92Bi/rg6AQQbp6cahr2z1ADkJyo2rQdlZ/uAjItl/1W0bza7TTuye7BOg==";auto_execute=!1;auto_execute_rollin=!0;auto_execute_rollout=!0;automate_roll_secs=5;automate_slabs=4;automate_slab_qty=-1800;automate_sl1=30;automate_sl_increase=5;automate_time_1="12:00";automate_dist_1=500;automate_time_2="13:30";automate_dist_2=500;automate_time_3="14:30";automate_dist_3=500;automate_time_4="15:31";automate_dist_4=500;knife_orders=[{instru:"NIFTY",scrip:"20000CE",expiry_date:"2023-12-28",qty:100,status:"",order_price:null,ltp:null,low:null},{instru:"NIFTY",scrip:"19000CE",expiry_date:"2023-12-28",qty:100,status:"",order_price:null,ltp:null,low:null},{instru:"NIFTY",scrip:"18000CE",expiry_date:"2023-12-28",qty:50,status:"",order_price:null,ltp:null,low:null}];knife_perc=5;auto_adjust_knife=!1;ds_buy_exit;num_charts=20;call_start_strike;call_end_strike;put_start_strike;put_end_strike;charts_multiple=100;charts_instru="BANKNIFTY";chart_strikes_ce=[];chart_strikes_pe=[];spot_chart_instru="NIFTY";spot_chart_instru2="SENSEX";spot_fetch_interval;chart_prices_interval;chart_ce;chart_pe;st_chart_radio="5min";st_chart_strike=0;chart_strikes_ce_0;chart_strikes_pe_0;simulate_expiries_arr_value;simulate_expiries_arr;simulate_expiries_arr_value2;simulate_expiries_arr2;includeGUIDs="";excludeGUIDs="";show_algo=!1;show_algoSS=!0;algoSimulated=!1;algoLog="";enableAlgo=!1;instruToTrade="";expiryDateToTrade=null;entryInterval=null;algoInterval=null;algoSSSLPerc=40;algoTimeToEnter="10:10";algoSSQty=-30;algoSSMaxSLTimes=2;algoSSTriggerDifference=1;algoSSIncludeGUIDs="";algoSSExcludeGUIDs="";algoSS_positions=null;algoSS_sl_orders=null;algoSS_positions_UI=[];algoSS_qtyStep=15;algo_pos=[];algo_mtm=[];mfRealTime=!1;stocksStrategyNum=f.stocksStrategyNum;lineChartLabels=[];lineChartType="line";lineChartData={labels:[],datasets:[]};lineChartOptions={};straddle1instru="USDINR";straddle1expiryDate=null;straddle1scrip=null;straddle2instru="USDINR";straddle2expiryDate=null;straddle2scrip=null;straddle3instru="USDINR";straddle3expiryDate=null;straddle3scrip=null;intradayWatch=[{scrip:"FUT",instru:"USDINR",expiry:"2020-11-13"},{scrip:"74CE",instru:"USDINR",expiry:"2020-11-13"},{scrip:"74PE",instru:"USDINR",expiry:"2020-11-13"},{scrip:"74.5CE",instru:"USDINR",expiry:"2020-11-13"},{scrip:"74.5PE",instru:"USDINR",expiry:"2020-11-13"}];chart;test1(){this.chartingService.initSpotChart_simulated(this.simulate_instru,this.simulateCurrDateObj)}addBflyToStrategyBuilder(e){let t="CE";e.scrip.includes("PE")&&(t="PE");let i=this.mapService.getScripLTP(this.oc_instru,this.expiryDate,e.strike-this.strikeStepValue,t);this.addToStrategyBuilder(e.strike-this.strikeStepValue,t,i,-this.bflyMonitorQty/2),i=this.mapService.getScripLTP(this.oc_instru,this.expiryDate,e.strike,t),this.addToStrategyBuilder(e.strike,t,i,this.bflyMonitorQty),i=this.mapService.getScripLTP(this.oc_instru,this.expiryDate,e.strike+this.strikeStepValue,t),this.addToStrategyBuilder(e.strike+this.strikeStepValue,t,i,-this.bflyMonitorQty/2)}addDSToStrategyBuilder(e){let t="CE";e.scrip.includes("PE")&&(t="PE");let i=this.mapService.getScripLTP(this.oc_instru,this.expiryDate,e.strike,t);this.addToStrategyBuilder(e.strike,t,i,-this.dsMonitorQty),t==="CE"?(i=this.mapService.getScripLTP(this.oc_instru,this.expiryDate,e.strike+this.strikeStepValue,t),this.addToStrategyBuilder(e.strike+this.strikeStepValue,t,i,this.dsMonitorQty)):(i=this.mapService.getScripLTP(this.oc_instru,this.expiryDate,e.strike-this.strikeStepValue,t),this.addToStrategyBuilder(e.strike-this.strikeStepValue,t,i,this.dsMonitorQty))}addToStrategyBuilder(e,t,i,r=null){this.add_strangle_chart?(t==="CE"&&(this.strangle_chart_ce=e+t),t==="PE"&&(this.strangle_chart_pe=e+t)):(r||(r=this.inlineOC_qty),this.appService.payOffEvent$.next({scrip:e+t,ltp:i,qty:r}))}addSLLOrder(e,t,i){let r=new Date(this.expiryDate),s=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],o=("0"+r.getDate()).slice(-2),a=r.getMonth(),l=s[a],c=r.getFullYear(),u=o+l+c;this.sl_trades.push({qty:-this.inlineOC_qty,scrip:e+t,expiry:u,price:i,trigger_price:i,order_id:null})}movePlaceOrder(e,t){let i=e+t,r=this.place_orders.splice(e,1)[0];this.place_orders.splice(i,0,r)}getLTP(e,t,i=null){return i||(i=this.instru),this.mapService.getScripLTP(i,e,this.mapService.parseScrip(t).scrip,this.mapService.parseScrip(t).type)}getOHLC(e,t,i=null){return i||(i=this.instru),this.mapService.getScripOHLC(i,e,this.mapService.parseScrip(t).scrip,this.mapService.parseScrip(t).type)}reset_place_orders(){this.place_orders=[{instru:"BANKNIFTY",expiry_date:this.currExpiry,curr_qty:-300,curr_scrip:"",new_scrip:"37200CE"},{instru:"BANKNIFTY",expiry_date:this.currExpiry,curr_qty:-300,curr_scrip:"",new_scrip:""},{instru:"BANKNIFTY",expiry_date:this.currExpiry,curr_qty:-300,curr_scrip:"",new_scrip:""},{instru:"BANKNIFTY",expiry_date:this.currExpiry,curr_qty:-300,curr_scrip:"",new_scrip:""}]}add_empty_place_order(){this.place_orders.push({instru:"BANKNIFTY",expiry_date:this.currExpiry,curr_qty:null,curr_scrip:"",new_scrip:""})}addPlaceOrdersFromOC(){}addPlaceOrders(){this.place_orders=[],this.curr_positions_trades.forEach(e=>{e.addToOrders&&(this.place_orders.push({instru:this.instru,expiry_date:this.currExpiry,curr_qty:e.qty,curr_scrip:e.scrip,new_scrip:""}),e.addToOrders=!1)})}updateStrikePopover(e){this.positionPopContent=[],f.orders.forEach(t=>{t.scrip===e.scrip&&t.status==="COMPLETE"&&this.positionPopContent.push(""+t.qty+" "+t.tradedPrice)})}executeOrder(e,t){if(t==="currentstrike"){console.log(e,e.scrip);let i={instru:this.instru,expiry_date:e.expiry,curr_qty:e.roll_qty,curr_scrip:e.scrip,new_scrip:null};this.place_roll_orders(i,!0)}else if(t==="newstrike"){console.log(e,e.rollstrike_new);let i={instru:this.instru,expiry_date:e.expiry,curr_qty:-e.roll_qty,curr_scrip:e.rollstrike_new,new_scrip:null};this.place_roll_orders(i,!0)}}executeOrderSLL(e){console.log("SLL",e,e.scrip);let t={instru:this.instru,expiry_date:e.expiry,curr_qty:-e.qty,curr_scrip:e.scrip,new_scrip:null};this.place_roll_orders(t,!0,!0,e.price,e.order_id,"NRML",this.tagSearch,e.trigger_price)}cancelSLLOrder(e){this.zerodhaService.cancel_order(e.order_id).subscribe(t=>{console.log("cancelSLLOrder res: ",t),t.data&&(f.requestStatusEvent$.next({status:"info",message:"Order Cancelled"}),f.miscEvent$.next("refreshAll"))},t=>{console.log("cancelSLLOrder error",t);let i="";t.error&&t.error.message?i=t.error.message:i=t.message,f.requestStatusEvent$.next({status:"danger",message:"Order could not be cancelled: "+i})})}sortSLLPositions(){this.sl_trades.sort((e,t)=>{let i=e.scrip.slice(0,-2),r=t.scrip.slice(0,-2);return i===r&&e.scrip.includes("CE")&&t.scrip.includes("PE")?-1:i===r&&e.scrip.includes("PE")&&t.scrip.includes("CE")?1:this.compareForSorting(e.scrip,t.scrip)})}updateOCValuesForSLL(){this.oc_strikes&&this.oc_strikes.length>0&&this.oc_strikes.forEach(e=>{e.sllCE=this.isStrikeInSLL(e.strike+"CE"),e.sllPE=this.isStrikeInSLL(e.strike+"PE")})}isStrikeInSLL(e){let t="";if(this.sl_trades.length>0)for(let i=0;i<this.sl_trades.length;i++){let r=this.sl_trades[i];r.scrip===e&&(t+=r.price+",")}return t=t.replace(/,\s*$/,""),t===""&&(t=null),t}exitPositions(){confirm("Exit selected ?")&&this.curr_positions_trades.forEach(e=>{if(e.addToOrders){e.addToOrders=!1;let t=-e.qty,i=e.scrip,r={instru:this.instru,expiry:e.expiry,strike:this.mapService.parseScrip(i).scrip,optionType:this.mapService.parseScrip(i).type},s=this.mapService.getMapKey(r);console.log("placing exit order for ",s,t),this.zerodhaService.place_order(s,t,f.broker_auth).subscribe(o=>{console.log("exitPositions response",o),f.requestStatusEvent$.next({status:"secondary",message:"Placed "+i+" "+t})},o=>{console.log("exitPositions error",o);let a="Error (mostly timeout)";o.error&&o.error.message?a=o.error.message:a=o.message,f.requestStatusEvent$.next({status:"danger",message:i+" "+t+" "+a}),this.appService.playAudio("error")})}})}refreshOILimits(){this.nudgeOrder("NIFTY",this.mapService.getScripLTP(null,null,"NIFTY50",null)),this.nudgeOrder("BANKNIFTY",this.mapService.getScripLTP(null,null,"BANKNIFTY",null))}getOILimits(){return"OI Limits: NIFTY: "+f.nfCEOILimit+" "+f.nfPEOILimit+" , BANKNIFTY: "+f.bnfCEOILimit+" "+f.bnfPEOILimit}showOILimit(e,t){let i=t,r="";if(i.includes("CE")&&(r="CE"),i.includes("PE")&&(r="PE"),i=Number(i.slice(0,-2)),e==="NIFTY"&&f.nfCEOILimit&&f.nfPEOILimit){if(r==="CE")return i>f.nfCEOILimit;if(r==="PE")return i<f.nfPEOILimit}if(e==="BANKNIFTY"&&f.bnfCEOILimit&&f.bnfPEOILimit){if(r==="CE")return i>f.bnfCEOILimit;if(r==="PE")return i<f.bnfPEOILimit}return!1}nudgeOrder(e,t){let r=Math.round(t/100)*100+1e3+"CE",s={instru:e,expiry:this.currExpiry,strike:this.mapService.parseScrip(r).scrip,optionType:this.mapService.parseScrip(r).type},o=this.mapService.getMapKey(s);console.log("nudge order for ",o),this.zerodhaService.nudge_order(o,f.broker_auth).subscribe(a=>{if(console.log("nudgeOrder response",a,a.data[0][0]),a.data[0]&&a.data[0][0]&&a.data[0][0].message){let c=a.data[0][0].message.slice(-14);c=c.slice(0,-1);let u=c.split("-");e==="NIFTY"&&(f.nfPEOILimit=Number(u[0].trim()),f.nfCEOILimit=Number(u[1].trim())),e==="BANKNIFTY"&&(f.bnfPEOILimit=Number(u[0].trim()),f.bnfCEOILimit=Number(u[1].trim()))}else f.nfPEOILimit=null,f.nfCEOILimit=null,f.bnfPEOILimit=null,f.bnfCEOILimit=null},a=>{console.log("nudgeOrder error",a);let l="Error (mostly timeout)";a.error&&a.error.message?l=a.error.message:l=a.message})}getBflyMonitorQty(){let e=-1e3;return this.oc_instru==="NIFTY"?e=-1200:this.oc_instru==="BANKNIFTY"?e=-450:this.oc_instru==="FINNIFTY"?e=-1040:this.oc_instru==="MIDCPNIFTY"?e=-1950:this.oc_instru==="SENSEX"||this.oc_instru==="BANKEX"?e=-400:this.oc_instru==="USDINR"&&(e=-1e3),e}getDSMonitorQty(){let e=-1e3;return this.oc_instru==="NIFTY"?e=-500:this.oc_instru==="BANKNIFTY"?e=-210:this.oc_instru==="FINNIFTY"?e=-520:this.oc_instru==="MIDCPNIFTY"?e=-1050:this.oc_instru==="SENSEX"||this.oc_instru==="BANKEX"?e=-150:this.oc_instru==="USDINR"&&(e=-1e3),e}getSpotValue(){let e="";return this.oc_instru==="NIFTY"?e="NIFTY50":this.oc_instru==="BANKNIFTY"?e="BANKNIFTY":this.oc_instru==="FINNIFTY"?e="FINNIFTY":this.oc_instru==="MIDCPNIFTY"?e="MIDCPNIFTY":this.oc_instru==="SENSEX"?e="SENSEX":this.oc_instru==="BANKEX"?e="BANKEX":this.oc_instru==="USDINR"&&(e="USDINR"),this.mapService.getScripLTP(null,null,e,null)}loadMultiOptionChain(){this.multiOC_instru?(this.oc_instru=this.multiOC_instru,this.chartService.processMultiOCRequest(this.multiOC_instru,this.expiryDate_multi1,this.expiryDate_multi2,this.expiryDate_multi3,this.expiryDate_multi4,this.expiryDate_multi5)):console.log("No data to load")}multiOCRangeUpdate(){let e=null,t=null;this.multiOC_higherRange&&this.multiOC_higherRange!=""&&(e=this.multiOC_higherRange),this.multiOC_lowerRange&&this.multiOC_lowerRange!=""&&(t=this.multiOC_lowerRange),this.chartService.updateMultiOCRange(!0,this.oc_instru,e,t,this.expiryDate_multi1,this.expiryDate_multi2,this.expiryDate_multi3,this.expiryDate_multi4,this.expiryDate_multi5)}inlineOCRangeUpdate(){let e=null,t=null;this.inlineOC_higherRange&&this.inlineOC_higherRange!=""&&(e=this.inlineOC_higherRange),this.inlineOC_lowerRange&&this.inlineOC_lowerRange!=""&&(t=this.inlineOC_lowerRange),this.chartService.updateOCRange(!0,e,t),(this.simulate_strategy||this.expiryDate2)&&this.chartService.updateOCRange2()}inlineOCResendSub(){this.chartService.updateOCRange(!0)}rollStrikeKeyUp(e,t){console.log(e),e.key==="ArrowUp"?this.changeRollStrike(this.strikeStepValue,t):e.key==="ArrowDown"&&this.changeRollStrike(-this.strikeStepValue,t)}changeRollStrike(e,t){let i=t.rollstrike_new,r="";i.includes("CE")&&(r="CE"),i.includes("PE")&&(r="PE"),i=Number(i.slice(0,-2));let s=i+e+r;t.rollstrike_new=s}isRollStrikeITM(e){let t=e.rollstrike_new,i=Number(t.slice(0,-2)),r=Number(e.scrip.slice(0,-2));return!!(t.includes("CE")&&i<=r||t.includes("PE")&&i>=r)}checkAlerts(){this.curr_positions_trades&&this.curr_positions_trades.forEach(e=>{e.alertPrice&&this.getLTP(e.expiry,e.scrip)>e.alertPrice?(this.playAlertSound&&this.appService.playAudio("success"),e.alertStatus="Alert"):e.alertStatus=""}),this.strategyAlertPrice&&this.strategyAlertPrice!=""&&this.currentSold>=Number(this.strategyAlertPrice)?(this.strategyAlertText="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText="",this.strategyAlertPrice1&&this.strategyAlertPrice1!=""&&this.getStrategyPnL(1)<=Number(this.strategyAlertPrice1)?(this.strategyAlertText1="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText1="",this.strategyAlertPrice2&&this.strategyAlertPrice2!=""&&this.getStrategyPnL(2)<=Number(this.strategyAlertPrice2)?(this.strategyAlertText2="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText2="",this.strategyAlertPrice3&&this.strategyAlertPrice3!=""&&this.getStrategyPnL(3)<=Number(this.strategyAlertPrice3)?(this.strategyAlertText3="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText3="",this.strategyAlertPrice4&&this.strategyAlertPrice4!=""&&this.getStrategyPnL(4)<=Number(this.strategyAlertPrice4)?(this.strategyAlertText4="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText4="",this.strategyAlertPrice5&&this.strategyAlertPrice5!=""&&this.getStrategyPnL(5)<=Number(this.strategyAlertPrice5)?(this.strategyAlertText5="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText5="",this.strategyAlertPrice6&&this.strategyAlertPrice6!=""&&this.getStrategyPnL(6)<=Number(this.strategyAlertPrice6)?(this.strategyAlertText6="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText6="",this.strategyAlertPrice7&&this.strategyAlertPrice7!=""&&this.getStrategyPnL(7)<=Number(this.strategyAlertPrice7)?(this.strategyAlertText7="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText7="",this.strategyAlertPrice8&&this.strategyAlertPrice8!=""&&this.getStrategyPnL(8)<=Number(this.strategyAlertPrice8)?(this.strategyAlertText8="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText8=""}update_chart_strike(e,t,i=!1){t==="CE"?this.chart_ce=e:t==="PE"&&(this.chart_pe=e),console.log("update_chart_strike",this.chart_ce,this.chart_pe),i?(this.chartingService.updateInstruExpiry(this.instru,this.expiryDate),this.chartingService.fetchChartData(e,!1),setTimeout(()=>{console.log("loading chart",e,t),this.chartingService.updateSingleChart(e,t,!0,this.expand_single_charts)},1e3)):this.chartingService.updateSingleChart(e,t,!0,this.expand_single_charts)}update_strangle_chart(){this.simulate_strategy?this.chartingService.initStrangleChart_simulated(this.simulate_instru,this.simulateCurrDateObj,this.strangle_chart_ce,this.strangle_chart_pe,this.strangle_chart_simulate_tillend,this.simulateCurrDateObj.getHours(),this.simulateCurrDateObj.getMinutes()):this.chartingService.fetchStrangleStrikesData(this.strangle_chart_ce,this.strangle_chart_pe,!0)}loadSpotChart(){this.spot_fetch_interval&&clearInterval(this.spot_fetch_interval),this.chart_prices_interval&&clearInterval(this.chart_prices_interval),this.chartingService.initSpotChart(this.spot_chart_instru,this.expand_single_charts),this.chartingService.initSpotChart2(this.spot_chart_instru2,this.expand_single_charts),this.spot_fetch_interval=setInterval(()=>{this.chartingService.fetchSpotChartData(),this.chartingService.fetchSpotChartData2()},6e4),this.chart_prices_interval=setInterval(()=>{this.chartingService.plotCurrentPrices()},1e3)}update_charts_inputs(){let e;this.charts_instru==="NIFTY"?(this.charts_multiple=50,e=450,f.isSimulatedStrategy&&(e=300)):this.charts_instru==="BANKNIFTY"?(this.charts_multiple=100,e=1400,f.isSimulatedStrategy&&(e=900)):this.charts_instru==="FINNIFTY"?(this.charts_multiple=50,e=450,f.isSimulatedStrategy&&(e=300)):this.charts_instru==="MIDCPNIFTY"?(this.charts_multiple=25,e=450,f.isSimulatedStrategy&&(e=300)):this.charts_instru==="SENSEX"?(this.charts_multiple=100,e=1400,f.isSimulatedStrategy&&(e=900)):this.charts_instru==="BANKEX"?(this.charts_multiple=100,e=1400,f.isSimulatedStrategy&&(e=900)):this.charts_instru==="USDINR"&&(this.charts_multiple=.25,e=1,f.isSimulatedStrategy&&(e=.5));let t=this.mapService.getScripLTP(null,null,this.charts_instru,null),i=Math.round(t/this.charts_multiple)*this.charts_multiple;this.call_start_strike=i,this.call_end_strike=i+e,this.put_start_strike=i-e,this.put_end_strike=i}initSTCharts(){this.chartingService.initForCallsPuts_simulated_0(this.simulate_instru,this.simulateExpiryDate,this.st_chart_radio,this.st_chart_strike)}initSTCharts1(){this.chartingService.initForCallsPuts_simulated_1(this.simulate_instru,this.simulateExpiryDate,!0,this.st_chart_radio,this.st_chart_strike)}backtestExpiryStrangles(){this.backtestService.expiryStrangles(this.simulate_instru,this.simulateExpiryDate)}backtestStrangleSL_Reentry(){this.backtestService.perDayDriver(this.simulate_instru,this.simulateExpiryDate,"strangle_SL_reentry")}backtestLongFly(){this.backtestService.perDayDriver(this.simulate_instru,this.simulateExpiryDate,"long_fly")}getChartLabel(e){return e in f.st_simulate_charts?f.st_simulate_charts[e]:"None"}getChartValues(e){return e in f.st_simulate_charts_values?f.st_simulate_charts_values[e]:"None"}initCharts(){if(f.isSimulatedStrategy){this.chart_strikes_ce=[],this.chart_strikes_pe=[];for(let e=this.call_end_strike;e>=this.call_start_strike;e-=this.charts_multiple)this.chart_strikes_ce.push(e+"CE");for(let e=this.put_end_strike;e>=this.put_start_strike;e-=this.charts_multiple)this.chart_strikes_pe.push(e+"PE");this.chartingService.initSpotChart_simulated(this.charts_instru,this.simulateCurrDateObj),this.chartingService.init_opt_charts_simulated(this.charts_instru,this.call_start_strike,this.call_end_strike,this.put_start_strike,this.put_end_strike,this.charts_multiple,this.simulateCurrDateObj)}else{let e=this.charts_expiry;this.chart_strikes_ce=[],this.chart_strikes_pe=[];let t=[];for(let i=this.call_end_strike;i>=this.call_start_strike;i-=this.charts_multiple){let r=this.mapService.getSubscriptionObject(i+"CE",this.charts_instru,e);t.push(r),this.chart_strikes_ce.push(i+"CE")}for(let i=this.put_end_strike;i>=this.put_start_strike;i-=this.charts_multiple){let r=this.mapService.getSubscriptionObject(i+"PE",this.charts_instru,e);t.push(r),this.chart_strikes_pe.push(i+"PE")}console.log("options charts feed",t),this.appService.sendSubscriptions(t),this.chartingService.init_opt_charts(this.charts_instru,this.call_start_strike,this.call_end_strike,this.put_start_strike,this.put_end_strike,this.charts_multiple,e)}}onSpotChartInstruChange(e){this.chartingService.initSpotChart(this.spot_chart_instru,this.expand_single_charts)}onSpotChartInstruChange2(e){this.chartingService.initSpotChart2(this.spot_chart_instru2,this.expand_single_charts)}onChartInstruChange(e){this.update_charts_inputs()}onSimulateInstruChange(e){this.simulate_expiries_arr=[],this.simulate_instru==="NIFTY"&&(f.niftyExpiries.forEach(t=>{let i=""+t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2);this.simulate_expiries_arr.push(i)}),this.simulate_expiries_arr.reverse()),this.simulate_instru==="BANKNIFTY"&&(f.bnfExpiries.forEach(t=>{let i=""+t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2);this.simulate_expiries_arr.push(i)}),this.simulate_expiries_arr.reverse()),this.simulate_instru==="FINNIFTY"&&(f.finniftyExpiries.forEach(t=>{let i=""+t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2);this.simulate_expiries_arr.push(i)}),this.simulate_expiries_arr.reverse()),this.simulate_instru==="MIDCPNIFTY"&&(f.midcapExpiries.forEach(t=>{let i=""+t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2);this.simulate_expiries_arr.push(i)}),this.simulate_expiries_arr.reverse()),this.simulate_instru==="SENSEX"&&(f.sensexExpiries.forEach(t=>{let i=""+t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2);this.simulate_expiries_arr.push(i)}),this.simulate_expiries_arr.reverse()),this.simulate_instru==="BANKEX"&&(f.bankexExpiries.forEach(t=>{let i=""+t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2);this.simulate_expiries_arr.push(i)}),this.simulate_expiries_arr.reverse()),this.simulate_expiries_arr2=[...this.simulate_expiries_arr]}onSimulateExpiryChange(e){this.simulateExpiryDate=this.simulate_expiries_arr_value,this.simulateStartDate=this.simulate_expiries_arr_value}onSimulateExpiryChange2(e){this.simulateExpiryDate2=this.simulate_expiries_arr_value2,this.simulateStartDate2=this.simulate_expiries_arr_value2}isChartStrikeInCurrStrategy(e){return this.chartService.isChartStrikeInCurrStrategy(e)}expandSingleChartsChange(e){this.chartingService.resizeSingleCharts(this.expand_single_charts)}ngOnInit(){this.loadAlgoSSParams(),this.currExpiry=this.mapService.findCurrExpiryForDisplay(f.niftyExpiries),this.currBnfExpiry=this.mapService.findCurrExpiryForDisplay(f.bnfExpiries),this.currFinniftyExpiry=this.mapService.findCurrExpiryForDisplay(f.finniftyExpiries),this.currMidcapExpiry=this.mapService.findCurrExpiryForDisplay(f.midcapExpiries),this.currSensexExpiry=this.mapService.findCurrExpiryForDisplay(f.sensexExpiries),this.currBankexExpiry=this.mapService.findCurrExpiryForDisplay(f.bankexExpiries),this.currUSDINRExpiry=this.mapService.findCurrExpiryForDisplay(f.usdinrExpiries),this.charts_expiry=this.currExpiry,this.reset_place_orders(),this.onSimulateInstruChange(null);for(let l=1;l<=f.numStrategies;l++)this.use_tag_strategies[l]=!0,this.use_include_guid_strategies[l]=!0,this.use_exclude_guid_strategies[l]=!0,this.tagSearch_strategies[l]=f.defaultTag;this.alerts=[];for(let l=0;l<f.numAlerts;l+=1)this.alerts.push({selected:!1,scrip1:"40000CE",scrip2:"",instru:"BANKNIFTY",expiry:this.currExpiry,compare:">",price:20,status:""});let e=setInterval(()=>{this.alerts&&this.alerts.forEach(l=>{if(l.status="",l.selected){let c=null;if(l.scrip1){if(c=this.mapService.getScripLTP(l.instru,l.expiry,this.mapService.parseScrip(l.scrip1).scrip,this.mapService.parseScrip(l.scrip1).type),l.scrip2){let d=this.mapService.getScripLTP(l.instru,l.expiry,this.mapService.parseScrip(l.scrip2).scrip,this.mapService.parseScrip(l.scrip2).type);c+=d}}else c=this.mapService.getScripLTP(null,null,l.instru,null);l.compare===">"&&(c>l.price?(l.status="Alert",this.playAlertSound&&this.appService.playAudio("success")):l.status=""),l.compare==="<"&&(c<l.price?(l.status="Alert",this.playAlertSound&&this.appService.playAudio("success")):l.status="")}}),this.checkAlerts(),this.getStrategyPnL(),this.getStrategyPnL(1),this.getStrategyPnL(2),this.getStrategyPnL(3),this.getStrategyPnL(4),this.getStrategyPnL(5),this.getStrategyPnL(6),this.getStrategyPnL(7),this.getStrategyPnL(8)},1e3),t=setInterval(()=>{this.hide_payoff||this.updateChartData(this.payOffData),this.getCEPEWeightage(),this.updateMFRealTime()},5e3),i=setInterval(()=>{this.hide_payoff||this.getPayoff()},6e4),r=setInterval(()=>{this.chartService.updateSpotStrike(),this.oc_strikes=this.chartService.updateOCValues(),this.simulate_strategy&&this.simulateExpiryDate2&&(this.oc_strikes2=this.chartService.updateOCValues2()),this.expiryDate2&&(this.oc_strikes2=this.chartService.updateOCValues2()),this.multi_oc_strikes1=this.chartService.updateMultiOCValues1(this.expiryDate_multi1),this.multi_oc_strikes1=this.chartService.updateMultiOCValues2(this.expiryDate_multi2),this.multi_oc_strikes1=this.chartService.updateMultiOCValues3(this.expiryDate_multi3),this.multi_oc_strikes1=this.chartService.updateMultiOCValues4(this.expiryDate_multi4),this.multi_oc_strikes1=this.chartService.updateMultiOCValues5(this.expiryDate_multi5),this.simulate_strategy&&this.simulateExpiryDate2&&(this.oc_strikes2=this.chartService.updateOCValues2()),this.expiryDate2&&(this.oc_strikes2=this.chartService.updateOCValues2()),this.expiryDate_multi1&&(this.multi_oc_strikes1=this.chartService.updateMultiOCValues1(this.expiryDate_multi1),this.multi_oc_strikes2=this.chartService.updateMultiOCValues2(this.expiryDate_multi2),this.multi_oc_strikes3=this.chartService.updateMultiOCValues3(this.expiryDate_multi3),this.multi_oc_strikes4=this.chartService.updateMultiOCValues4(this.expiryDate_multi4),this.multi_oc_strikes5=this.chartService.updateMultiOCValues5(this.expiryDate_multi5))},1e3),s=setInterval(()=>{this.bfly_monitor=this.chartService.updateBflyMonitorStrikes(this.bflyMonitorQty),this.ds_monitor=this.chartService.updateDSMonitorStrikes(this.dsMonitorQty)},1e4),o=setInterval(()=>{this.auto_adjust_knife&&(f.miscEvent$.next("refreshAll"),setTimeout(()=>{this.adjustKnifeOrders()},4e3))},12e4);for(let l=1;l<=f.numStrategies;l++){let c=JSON.parse(localStorage.getItem("curr_positions"+l));c&&c.trades&&(l===1&&(this.s1Trades=c),l===2&&(this.s2Trades=c),l===3&&(this.s3Trades=c),l===4&&(this.s4Trades=c),l===5&&(this.s5Trades=c),l===6&&(this.s6Trades=c),l===7&&(this.s7Trades=c),l===8&&(this.s8Trades=c,f.stockPositions=c))}let a=setInterval(()=>{this.isMarketClosed()?clearInterval(a):this.saveMTM1&&this.saveMTMToLocal()},3e4)}ngAfterViewInit(){setTimeout(()=>{})}updateMFRealTime(){let e=this.mapService.getLtp("NIFTY50");f.mfInvested.forEach(t=>{if(t[0]!=="NIFTYBEES")if(this.mfRealTime){let i=e*Number(t[1]);i=Math.round((i+1e-5)*1e4)/1e4,this.mapService.setLtp(String(t[0]),i)}else this.mapService.setLtp(String(t[0]),Number(t[2]))})}ordersTextareaUpdated(e){this.orders_broker==="upstox"?this.parseUpstoxOrders():this.orders_broker==="zerodha"&&this.parseZerodhaOrders()}posQtyUpdated(e,t){t.roll_qty=this.appService.getQtyUptoFreezeLimit(this.instru,t.qty,this.inlineOC_qty)}parseZ1(){this.orders_parsed=[];let e=this.ordersTextarea.split(`
`);console.log(e);for(let t=0;t<e.length;t++){let i=e[t];i=i.replace(`
`,"	");let r=i.split("	");console.log(r);let s=new Pd;if(s.instru="BANKNIFTY",s.scrip=r[1].slice(-7),s.qty=Number(r[3]),s.entry=Number(r[4].replace(",",""))/s.qty,s.exit=Number(r[5].replace(",",""))/s.qty,s.strategy=this.currLoadNum,s.qty!==0&&this.orders_parsed.push(s),r[10]!==""){let o=new Pd;o.instru="BANKNIFTY",o.scrip=r[1].slice(-7),o.qty=Number(r[9]),o.entry=Number(r[11].replace(",",""))/o.qty,o.exit=0,r[10]=="sell"&&(o.qty=-o.qty),o.strategy=this.currLoadNum,this.orders_parsed.push(o)}}console.log(this.orders_parsed)}parseZerodhaOrders(){this.orders_parsed=[];let e=this.ordersTextarea.split(`COMPLETE
`);if(console.log(e),e)for(let t=0;t<e.length;t++){let i=e[t];i=i.replace(`
`,"	");let r=i.split("	"),s=new Nd;s.instru=r[2].split(" ")[0],isNaN(parseInt(r[2].split(" ")[4]))?s.scrip=r[2].split(" ")[2]+r[2].split(" ")[3]:s.scrip=r[2].split(" ")[4]+r[2].split(" ")[5],s.qty=Number(r[4].split(" ")[0]),r[1]==="SELL"&&(s.qty=-s.qty),s.price=Number(r[5].replace(",","")),s.strategy=this.currLoadNum,this.orders_parsed.push(s)}console.log(this.orders_parsed)}parseUpstoxOrders(){this.orders_parsed=[];let e=this.ordersTextarea.split(`
	
`);if(e)for(let t=0;t<e.length;t++){let r=e[t].split(`
`);console.log(r);let s=new Nd;s.instru=r[0].split(" ")[0],s.expiry=r[1].split(" ")[1],s.scrip=r[0].split(" ")[1];let o={instru:s.instru,expiry:s.expiry,strike:this.mapService.parseScrip(s.scrip).scrip,optionType:this.mapService.parseScrip(s.scrip).type};s.symbol=this.mapService.getMapKey(o);let a=r[3].split("	");s.qty=Number(a[3].split("/")[0]),a[2]==="Sell"&&(s.qty=-s.qty),s.price=Number(a[7]),s.strategy=this.currLoadNum,this.orders_parsed.push(s)}console.log(this.orders_parsed)}addOrdersToStrategy(){for(let e=0;e<this.orders_parsed.length;e++)this.addPosition(this.orders_parsed[e].qty,this.orders_parsed[e].scrip,this.orders_parsed[e].price)}exportToCSV(e){let t="Strategy_"+e+"_"+this.getDateInFormat()+".csv";console.log("exporting: ",t);let i=JSON.parse(localStorage.getItem("curr_positions"+e));if(i&&i.trades){let r=i.instru,s=i.expiry,o=i.trades;console.log("exporting:",r,s,o);let a="";if(a+=r+","+s+`\r
`,o.forEach(d=>{let h="";h+=d.qty+","+d.scrip+","+d.expiry+","+d.entry+","+d.exit+","+d.entryDateTime+","+d.exitDateTime,a+=h+`\r
`}),this.enableAlgo){a+=`END OF DATA\r
`;let d=new Date,h=""+d.getFullYear()+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+("0"+d.getDate()).slice(-2);JSON.parse(localStorage.getItem("algo_mtm_"+h)).forEach(g=>{let A="";A+=g[0]+","+g[1],a+=A+`\r
`}),a+=`END OF MTM\r
`,a+=this.algoLog+`\r
`}else if(e===1){a+=`END OF DATA\r
`;let d=new Date,h=""+d.getFullYear()+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+("0"+d.getDate()).slice(-2),p=JSON.parse(localStorage.getItem("mtm_1_"+h));p&&(p.forEach(g=>{let A="";A+=g[0]+","+g[1],a+=A+`\r
`}),a+=`END OF MTM\r
`,a+=this.algoLog+`\r
`)}let l=new Blob([a],{type:"application/x-msdownload"}),c=URL.createObjectURL(l),u=document.createElement("a");u.href=c,u.target="_blank",document.body.appendChild(u),u.download=t,u.click(),u.parentNode.removeChild(u)}}getDateInFormat(){let e=new Date,t=e.getDate(),i=e.getMonth()+1,r=e.getFullYear(),s=e.getHours(),o=e.getMinutes(),a=e.getSeconds();return""+(t<=9?"0"+t:t)+(i<=9?"0"+i:i)+r+"_"+(s<=9?"0"+s:s)+(o<=9?"0"+o:o)+(a<=9?"0"+a:a)}fetchLastOI(){let e=this.mapService.getScripLTP(null,null,this.instru,null),t=Math.round(e/this.strikeStepValue)*this.strikeStepValue,i=this.appService.getLastWorkingDay(new Date),r=""+i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2)+"T15:29:00+0530",s=0;for(let o=t-this.loadOIDistance;o<=t+this.loadOIDistance;o+=this.strikeStepValue)setTimeout(()=>{let a=this.chartService.fetchChartData(o+"CE",this.instru,this.expiryDate).subscribe(c=>{if(c.data.candles){let u=c.data.candles;u.length===0&&console.log("ZERO CANDLES FOR ",o+"CE"),this.updateLastDayOI(o+"CE",u,r)}},c=>{console.log("zerodha fetch chart error",c)}),l=this.chartService.fetchChartData(o+"PE",this.instru,this.expiryDate).subscribe(c=>{if(c.data.candles){let u=c.data.candles;u.length===0&&console.log("ZERO CANDLES FOR ",o+"PE"),this.updateLastDayOI(o+"PE",u,r)}},c=>{console.log("zerodha fetch chart error",c)})},s*1e3),s++}updateLastDayOI(e,t,i){if(t){let r=t.find(s=>s[0]===i);if(r){let s=r[6];this.mapService.setLastDayOI(this.instru,this.expiryDate,this.mapService.parseScrip(e).scrip,this.mapService.parseScrip(e).type,s)}}}uploadExpiryFile(e){let t=e.target.files[0],i=new FileReader;i.readAsText(t),i.onload=r=>{let s=String(i.result);this.loadExpiryFile(s)}}loadExpiryFile(e){let i=e.split(/\r|\n|\r/).filter(function(l){return l!==""}),r=i[0].split(",");for(let l=1;l<i.length;l++){let c=i[l].split(","),u=c[0];u=u.replace("NIFTY FIN SERVICE","FINNIFTY"),u=u.replace("NIFTY MIDCAP SELECT (MIDCPNIFTY)","MIDCPNIFTY"),u=u.replace("BSE INDEX BANKEX","BANKEX"),u=u.replace("WK","");let d={};d=qe.simulateData[u],d||(d={}),d[c[1]]=Number(c[5]),qe.simulateData[u]=d;let h=[];h=qe.stockChartData[u],h||(h=[]);let p=c[1].split(" "),g=p[0].split("-"),A=p[1].split(":"),v=new Date(Number(g[2]),Number(g[1])-1,Number(g[0]),Number(A[0]),Number(A[1]),0).getTime();h.push([v,Number(c[2]),Number(c[3]),Number(c[4]),Number(c[5]),Number(c[6])]),qe.stockChartData[u]=h}console.log("simulateData",qe.simulateData),console.log("stockChartData",qe.stockChartData),qe.simulateData&&(f.isSimulatedStrategy=!0),this.simulateCurrDateObj=new Date(this.simulateStartDate),this.simulateCurrDateObj.setHours(this.simulateCurrHour),this.simulateCurrDateObj.setMinutes(this.simulateCurrMins),f.simulateCurrDateObj=this.simulateCurrDateObj;let s=""+("0"+this.simulateCurrDateObj.getDate()).slice(-2)+"-"+("0"+(this.simulateCurrDateObj.getMonth()+1)).slice(-2)+"-"+this.simulateCurrDateObj.getFullYear();this.simulateCurrDateTimeString=s+" "+("0"+this.simulateCurrDateObj.getHours()).slice(-2)+":"+("0"+this.simulateCurrDateObj.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(this.simulate_instru,this.simulateCurrDateTimeString,this.simulateExpiryDate);let o=null,a=null;if(this.simulate_instru==="NIFTY"){let l=this.mapService.getScripLTP(null,null,"NIFTY50",null),c=Math.round(l/50)*50;o=c+1500,a=c-1500}this.loadOptionChain(this.simulate_instru,this.simulateExpiryDate,o,a)}loadSimulatedNextMins(e=null){if((this.simulateTimeAdv==="add"||e&&e>0)&&(console.log("adding next",e),e?this.simulateCurrDateObj.setMinutes(this.simulateCurrDateObj.getMinutes()+e):this.simulateCurrDateObj.setMinutes(this.simulateCurrDateObj.getMinutes()+Number(this.simulateTimeMins)),this.simulateCurrDateObj.getHours()===15&&this.simulateCurrDateObj.getMinutes()>30||this.simulateCurrDateObj.getHours()>15)){let i=new Date(this.simulateCurrDateObj);i.setHours(15),i.setMinutes(30);let r=this.simulateCurrDateObj.getTime()-i.getTime(),s=new Date(this.simulateCurrDateObj);s.setDate(s.getDate()+1),s.setHours(9),s.setMinutes(15),s.setMilliseconds(s.getMilliseconds()+r),this.simulateCurrDateObj=new Date(s)}if((this.simulateTimeAdv==="subtract"||e&&e<0)&&(console.log("subtract next",e),e?(console.log("mins",this.simulateCurrDateObj.getMinutes()),this.simulateCurrDateObj.setMinutes(this.simulateCurrDateObj.getMinutes()+e),console.log("mins2",this.simulateCurrDateObj.getMinutes())):this.simulateCurrDateObj.setMinutes(this.simulateCurrDateObj.getMinutes()-Number(this.simulateTimeMins)),this.simulateCurrDateObj.getHours()===9&&this.simulateCurrDateObj.getMinutes()<15||this.simulateCurrDateObj.getHours()<9)){let i=new Date(this.simulateCurrDateObj);i.setHours(9),i.setMinutes(15);let r=i.getTime()-this.simulateCurrDateObj.getTime(),s=new Date(this.simulateCurrDateObj);s.setDate(s.getDate()-1),s.setHours(15),s.setMinutes(30),s.setMilliseconds(s.getMilliseconds()-r),this.simulateCurrDateObj=new Date(s)}f.simulateCurrDateObj=this.simulateCurrDateObj;let t=""+("0"+this.simulateCurrDateObj.getDate()).slice(-2)+"-"+("0"+(this.simulateCurrDateObj.getMonth()+1)).slice(-2)+"-"+this.simulateCurrDateObj.getFullYear();this.simulateCurrDateTimeString=t+" "+("0"+this.simulateCurrDateObj.getHours()).slice(-2)+":"+("0"+this.simulateCurrDateObj.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(this.simulate_instru,this.simulateCurrDateTimeString,this.simulateExpiryDate)}loadSimulatedOCForTime(e,t,i){let r=t;console.log("loadSimulatedOCForTime",r);for(let[s,o]of Object.entries(qe.simulateData))if(s===e||s.startsWith(e)&&(s.endsWith("CE")||s.endsWith("PE")))if(s===e){let a=e;e==="NIFTY"&&(a="NIFTY50"),e==="USDINR"&&(a="USDINR"),this.mapService.setLtp(a,o[r])}else{let a=s;a=a.replace(e,""),a=a.replace("WK","");let l={instru:e,expiry:i,strike:this.mapService.parseScrip(a).scrip,optionType:this.mapService.parseScrip(a).type},c=this.mapService.getMapKey(l),u=o[r];this.mapService.setLtp(c,u);let d={instru:e,expiry:this.simulateExpiryDate2,strike:this.mapService.parseScrip(a).scrip,optionType:this.mapService.parseScrip(a).type},h=this.mapService.getMapKey(d);if(qe.simulateData2[s]){let p=qe.simulateData2[s][r];this.mapService.setLtp(h,p)}}this.addScripToChart(this.simulate_instru,null),this.getPayoff(),console.log("ltpMap",this.mapService.ltpMap)}getLtpForMultiExpiry2(e){return this.multi_oc_strikes2&&this.multi_oc_strikes2[e]?[this.multi_oc_strikes2[e].ltpCE,this.multi_oc_strikes2[e].ltpPE]:null}getLtpForMultiExpiry3(e){return this.multi_oc_strikes3&&this.multi_oc_strikes3[e]?[this.multi_oc_strikes3[e].ltpCE,this.multi_oc_strikes3[e].ltpPE]:null}getLtpForMultiExpiry4(e){return this.multi_oc_strikes4&&this.multi_oc_strikes4[e]?[this.multi_oc_strikes4[e].ltpCE,this.multi_oc_strikes4[e].ltpPE]:null}getLtpForMultiExpiry5(e){return this.multi_oc_strikes5&&this.multi_oc_strikes5[e]?[this.multi_oc_strikes5[e].ltpCE,this.multi_oc_strikes5[e].ltpPE]:null}getCELtpForSecondExpiry(e){return this.oc_strikes2&&this.oc_strikes2[e]?this.oc_strikes2[e].ltpCE:0}getPELtpForSecondExpiry(e){return this.oc_strikes2&&this.oc_strikes2[e]?this.oc_strikes2[e].ltpPE:0}uploadExpiryFile2(e){let t=e.target.files[0],i=new FileReader;i.readAsText(t),i.onload=r=>{let s=String(i.result);this.loadExpiryFile2(s)}}loadExpiryFile2(e){let i=e.split(/\r|\n|\r/).filter(function(s){return s!==""}),r=i[0].split(",");for(let s=1;s<i.length;s++){let o=i[s].split(","),a=o[0];a=a.replace("NIFTY FIN SERVICE","FINNIFTY"),a=a.replace("NIFTY MIDCAP SELECT (MIDCPNIFTY)","MIDCPNIFTY"),a=a.replace("BSE INDEX BANKEX","BANKEX"),a=a.replace("WK","");let l={};l=qe.simulateData2[a],l||(l={}),l[o[1]]=Number(o[5]),qe.simulateData2[a]=l;let c=[];c=qe.stockChartData2[a],c||(c=[]);let u=o[1].split(" "),d=u[0].split("-"),h=u[1].split(":"),p=new Date(Number(d[2]),Number(d[1])-1,Number(d[0]),Number(h[0]),Number(h[1]),0).getTime();c.push([p,Number(o[2]),Number(o[3]),Number(o[4]),Number(o[5]),Number(o[6])]),qe.stockChartData2[a]=c}console.log("simulateData2",qe.simulateData2),console.log("stockChartData2",qe.stockChartData2),this.loadSimulatedOCForTime(this.simulate_instru,this.simulateCurrDateTimeString,this.simulateExpiryDate),this.chartService.processOCRequest2(this.simulateExpiryDate2)}importCSV(e,t){let i=e.target.files[0],r=new FileReader;r.readAsText(i),r.onload=s=>{let o=String(r.result);console.log("csv:",o),this.loadPayoffData(t,!0,o)}}loadImportedPositions(e){let i=e.split(/\r|\n|\r/).filter(function(c){return c!==""});console.log("allTextLines: ",i);let r=i[0].split(","),s=r[0],o=r[1],a=[];for(let c=1;c<i.length;c++){if(i[c].includes("END OF DATA")){console.log('"END OF DATA" found');break}let u=i[c].split(",");a.push({qty:Number(u[0]),scrip:u[1],expiry:u[2],entry:Number(u[3]),exit:Number(u[4]),entryDateTime:u[5]&&u[5]!=="undefined"?u[5]:"",exitDateTime:u[6]&&u[6]!=="undefined"?u[6]:""})}let l={instru:"",expiry:"",trades:{}};return l.instru=s,l.expiry=o,l.trades=a,l}loadOptionChain(e=null,t=null,i=null,r=null){e&&t?(this.chartService.optionChainEvent$.next([e,t]),this.oc_instru=e,this.setInlineOCQty(this.oc_instru),this.chartService.processOCRequest(e,t,i,r,this.expiryDate2),this.bflyMonitorQty=this.getBflyMonitorQty(),this.dsMonitorQty=this.getDSMonitorQty()):this.instru&&this.expiryDate?(this.chartService.optionChainEvent$.next([this.instru,this.expiryDate]),this.oc_instru=this.instru,this.setInlineOCQty(this.oc_instru),this.chartService.processOCRequest(this.instru,this.expiryDate,i,r,this.expiryDate2),this.bflyMonitorQty=this.getBflyMonitorQty(),this.dsMonitorQty=this.getDSMonitorQty()):console.log("No data to load")}inlineOCFix(){this.inlineOC_qty_fixed=!0}setInlineOCQty(e){this.inlineOC_qty_fixed||(e==="NIFTY"?this.inlineOC_qty=-f.freezeLimit.NIFTY:e==="BANKNIFTY"?this.inlineOC_qty=-f.freezeLimit.BANKNIFTY:e==="FINNIFTY"?this.inlineOC_qty=-f.freezeLimit.FINNIFTY:e==="MIDCPNIFTY"?this.inlineOC_qty=-f.freezeLimit.MIDCPNIFTY:e==="SENSEX"?this.inlineOC_qty=-f.freezeLimit.SENSEX:e==="BANKEX"?this.inlineOC_qty=-f.freezeLimit.BANKEX:this.inlineOC_qty=-f.freezeLimit.NIFTY)}doSingleStrategySubscription(e){this.instru&&this.expiryDate&&this.curr_positions_trades?this.subscribeStrategiesPositionsFeed(this.instru,this.expiryDate,this.curr_positions_trades):console.log("Nothing to subscribe")}doStrategiesSubscriptions(){for(let e=1;e<=f.numStrategies;e++){let t=JSON.parse(localStorage.getItem("curr_positions"+e));if(t&&t.trades){e===1&&(this.s1Trades=t),e===2&&(this.s2Trades=t),e===3&&(this.s3Trades=t),e===4&&(this.s4Trades=t),e===5&&(this.s5Trades=t),e===6&&(this.s6Trades=t),e===7&&(this.s7Trades=t),e===8&&(this.s8Trades=t,f.stockPositions=t);let i=t.instru,r=t.expiry,s=t.trades;this.subscribeStrategiesPositionsFeed(i,r,s)}}this.subscribeOrders(),this.subscribeAlerts(),this.subscribeKnife()}subscribeOrders(){let e=[];this.place_orders&&this.place_orders.forEach(t=>{if(t.curr_scrip){let i=this.mapService.getSubscriptionObject(t.curr_scrip,t.instru,t.expiry_date);e.push(i)}if(t.new_scrip){let i=this.mapService.getSubscriptionObject(t.new_scrip,t.instru,t.expiry_date);e.push(i)}}),console.log("orders feed",e),this.appService.sendSubscriptions(e)}subscribeAlerts(){let e=[];this.alerts&&this.alerts.forEach(t=>{if(t.selected){if(t.scrip1){let i=this.mapService.getSubscriptionObject(t.scrip1,t.instru,t.expiry);e.push(i)}if(t.scrip2){let i=this.mapService.getSubscriptionObject(t.scrip2,t.instru,t.expiry);e.push(i)}}}),console.log("alerts feed",e),this.appService.sendSubscriptions(e)}subscribeKnife(){let e=[];this.knife_orders&&this.knife_orders.forEach(t=>{if(t.scrip){let i=this.mapService.getSubscriptionObject(t.scrip,t.instru,t.expiry_date);e.push(i)}}),console.log("knife feed",e),this.appService.sendSubscriptions(e)}subscribeStrategiesPositionsFeed(e,t,i){let r=[];i.forEach(s=>{let o=this.mapService.getSubscriptionObject(s.scrip,e,s.expiry);if(r.push(o),s.rollstrike_new){let a=this.mapService.getSubscriptionObject(s.rollstrike_new,e,s.expiry);r.push(a)}if(s.exit===0&&this.mapService.isOption(s.scrip)){let a=s.scrip,l="";a.includes("CE")&&(l="CE"),a.includes("PE")&&(l="PE"),a=Number(a.slice(0,-2));let c=a+200+l;r.push(this.mapService.getSubscriptionObject(c,e,s.expiry)),c=a+100+l,r.push(this.mapService.getSubscriptionObject(c,e,s.expiry)),c=a-100+l,r.push(this.mapService.getSubscriptionObject(c,e,s.expiry))}}),r.push(this.mapService.getSubscriptionObject(this.hypo_future_strike+"CE",e,t)),r.push(this.mapService.getSubscriptionObject(this.hypo_future_strike+"PE",e,t)),console.log("strategies positions feed",r),this.appService.sendSubscriptions(r)}subscribeIntradayWatchFeed(e,t,i){let r=[],s=i,o="";s.includes("CE")&&(o="CE"),s.includes("PE")&&(o="PE"),console.log("subscribeIntradayWatchFeed symbol: "+s),s=s.slice(0,-2);let a=new Date(t).toDateString(),l=new Cr;l.expiry=a,l.instru=e,l.strike=Number(s),l.type=o,r.push(l),console.log("intraday watch feed",r),this.appService.sendSubscriptions(r)}loadPayoffData(e,t=!1,i=null){let r=null;t?r=this.loadImportedPositions(i):r=JSON.parse(localStorage.getItem("curr_positions"+e)),this.currLoadNum=e,console.log("curr_positions: ",r),this.curr_positions_trades=null,r&&r.trades&&(this.instru=r.instru,this.expiryDate=r.expiry,this.curr_positions_trades=r.trades,this.curr_positions_trades.forEach(s=>{s.addToOrders=!1,s.selected=!0,s.selectedActual=!0,s.roll_qty=this.appService.getQtyUptoFreezeLimit(this.instru,s.qty,this.inlineOC_qty),s.rollstrike=null,s.rollstrike_new=s.scrip,s.alertPrice=null,s.alertStatus=""}),this.instru==="NIFTY"?(this.stepValue=f.qtyStep.NIFTY,this.strikeStepValue=f.strike_diff.NIFTY,this.loadOIDistance=500):this.instru==="BANKNIFTY"?(this.stepValue=f.qtyStep.BANKNIFTY,this.strikeStepValue=f.strike_diff.BANKNIFTY,this.loadOIDistance=1e3):this.instru==="FINNIFTY"?(this.stepValue=f.qtyStep.FINNIFTY,this.strikeStepValue=f.strike_diff.FINNIFTY,this.loadOIDistance=500):this.instru==="MIDCPNIFTY"?(this.stepValue=f.qtyStep.MIDCPNIFTY,this.strikeStepValue=f.strike_diff.MIDCPNIFTY,this.loadOIDistance=300):this.instru==="SENSEX"?(this.stepValue=f.qtyStep.SENSEX,this.strikeStepValue=f.strike_diff.SENSEX,this.loadOIDistance=1e3):this.instru==="BANKEX"?(this.stepValue=f.qtyStep.BANKEX,this.strikeStepValue=f.strike_diff.BANKEX,this.loadOIDistance=1e3):(this.stepValue=1e3,this.strikeStepValue=.25,this.loadOIDistance=2),this.sortPositions()),f.curr_positions_trades=this.curr_positions_trades,this.constructUrlToFetch(),this.getCEPEWeightage()}sortPositions(){this.curr_positions_trades.sort((e,t)=>{if(e.exit!==0&&t.exit!==0)return this.compareForSorting(e.scrip,t.scrip);if(e.exit!==0&&t.exit===0)return-1;if(e.exit===0&&t.exit!==0)return 1;let i=e.scrip.slice(0,-2),r=t.scrip.slice(0,-2);if(i===r&&e.scrip.includes("CE")&&t.scrip.includes("PE"))return-1;if(i===r&&e.scrip.includes("PE")&&t.scrip.includes("CE"))return 1;if(i===r&&(e.scrip.includes("CE")&&t.scrip.includes("CE")||e.scrip.includes("PE")&&t.scrip.includes("PE"))){let s=new Date(e.expiry),o=new Date(t.expiry);return s<o?-1:1}return this.compareForSorting(e.scrip,t.scrip)})}compareForSorting(e,t){if(e.includes("CE")&&t.includes("PE"))return-1;if(e.includes("PE")&&t.includes("CE"))return 1;let i=e.slice(0,-2),r=t.slice(0,-2);return i>r?-1:1}constructUrlToFetch(){}addPosition1(e=null,t=null,i=null,r=null){this.curr_positions_trades===null&&(this.curr_positions_trades=[]);let s=new Date(this.expiryDate),o=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],a=("0"+s.getDate()).slice(-2),l=s.getMonth(),c=o[l],u=s.getFullYear(),d=a+c+u;this.curr_positions_trades.push({qty:e,scrip:t,expiry:d,entry:i,exit:r,addToOrders:!1,selected:!0,selectedActual:!1,rollstrike:null,rollstrike_new:t,roll_qty:this.appService.getQtyUptoFreezeLimit(this.instru,e,this.inlineOC_qty),alertPrice:null,alertStatus:""})}addPosition(e=null,t=null,i=null,r=null){this.curr_positions_trades===null&&(this.curr_positions_trades=[]);let s=new Date(this.expiryDate);r&&(s=new Date(r));let o=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],a=("0"+s.getDate()).slice(-2),l=s.getMonth(),c=o[l],u=s.getFullYear(),d=a+c+u;this.curr_positions_trades.push({qty:e,scrip:t,expiry:d,entry:i,exit:0,addToOrders:!1,selected:!0,selectedActual:!1,rollstrike:null,rollstrike_new:t,roll_qty:this.appService.getQtyUptoFreezeLimit(this.instru,e,this.inlineOC_qty),alertPrice:null,alertStatus:""})}addPositionCustom(e,t=null,i=null,r=null){let s=new Date(this.expiryDate),o=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],a=("0"+s.getDate()).slice(-2),l=s.getMonth(),c=o[l],u=s.getFullYear(),d=a+c+u;e.push({qty:t,scrip:i,expiry:d,entry:r,exit:0,addToOrders:!1,selected:!0,selectedActual:!1,rollstrike:null,rollstrike_new:i,roll_qty:this.appService.getQtyUptoFreezeLimit(this.instru,t,this.inlineOC_qty),alertPrice:null,alertStatus:""})}splitPosition(e){this.curr_positions_trades.push({qty:0,scrip:e.scrip,expiry:e.expiry,entry:e.entry,exit:e.exit,addToOrders:!1,selected:!0,selectedActual:!1,rollstrike:null,rollstrike_new:e.scrip,roll_qty:this.appService.getQtyUptoFreezeLimit(this.instru,0,this.inlineOC_qty),alertPrice:null,alertStatus:"",entryDateTime:e.entryDateTime,exitDateTime:e.exitDateTime})}deleteIfNotExpiry(){this.curr_positions_trades=this.curr_positions_trades.filter(e=>!!e.expiry.includes(this.filter_expiry))}deletePosition(e){let t=-100;for(let i=0;i<this.curr_positions_trades.length;i++){let r=this.curr_positions_trades[i];if(r.qty===e.qty&&r.scrip===e.scrip&&r.expiry===e.expiry&&r.entry===e.entry&&r.exit===e.exit){t=i;break}}t!==-100&&this.curr_positions_trades.splice(t,1)}deleteSLLOrder(e){let t=-100;for(let i=0;i<this.sl_trades.length;i++){let r=this.sl_trades[i];if(r.qty===e.qty&&r.scrip===e.scrip&&r.expiry===e.expiry&&r.price===e.price&&r.trigger_price===e.trigger_price){t=i;break}}t!==-100&&this.sl_trades.splice(t,1)}calculatePayoff(){this.getPayoff(),this.getMargin()}reloadPayoffData(e){this.currLoadNum&&(this.prev_positions[this.currLoadNum]=this.curr_positions_trades),this.loadPayoffData(e),this.getPayoff(),this.getMargin(),this.crossCheckPositions(),this.copyProperties(this.prev_positions[e]),this.use_cf_strategies[this.currLoadNum]?this.use_cf=this.use_cf_strategies[this.currLoadNum]:this.use_cf=!1,this.tagSearch_strategies[this.currLoadNum]?this.tagSearch=this.tagSearch_strategies[this.currLoadNum]:this.tagSearch="",this.use_tag_strategies[this.currLoadNum]?this.use_tag=this.use_tag_strategies[this.currLoadNum]:this.use_tag=!1,this.use_include_guid_strategies[this.currLoadNum]?this.use_include_guid=this.use_include_guid_strategies[this.currLoadNum]:this.use_include_guid=!1,this.use_exclude_guid_strategies[this.currLoadNum]?this.use_exclude_guid=this.use_exclude_guid_strategies[this.currLoadNum]:this.use_exclude_guid=!1,this.use_filter_expiry&&this.deleteIfNotExpiry()}getFunds(){this.appService.getFunds().subscribe(e=>{console.log("getFunds res: ",e),e.data&&e.data.equity&&(this.avail_margin=Math.round(e.data.equity.net).toLocaleString("en-IN"),this.used_margin=Math.round(e.data.equity.utilised.debits).toLocaleString("en-IN"))},e=>{console.log("getFunds error",e)})}crossCheckPositions(){if(this.curr_positions_trades){let e=[];for(let i=0;i<this.curr_positions_trades.length;i++){let r=this.curr_positions_trades[i];if(r.exit==0){let s={scrip:r.scrip,qty:r.qty};e.push(s)}}let t=[];for(let i=0;i<f.fetchedPositions.length;i++){let r=f.fetchedPositions[i];if(r.instru===this.instru&&r.netQty!==0){let s={instru:r.instru,expiry:r.expiry,strike:this.mapService.parseScrip(r.scrip).scrip,optionType:this.mapService.parseScrip(r.scrip).type},o=this.mapService.getMapKey(s),a=this.isCoveredCallPosition(o,r.netQty);if(a!==null){if(a!==0){let l={scrip:r.scrip,qty:a};t.push(l)}}else{let l={scrip:r.scrip,qty:r.netQty};t.push(l)}}}this.matchPositions=JSON.stringify(e)===JSON.stringify(t)}}isCoveredCallPosition(e,t){if(this.s5Trades)for(let i=0;i<this.s5Trades.trades.length;i++){let r=this.s5Trades.trades[i];if(r.exit===0){let s={instru:"NIFTY",expiry:r.expiry,strike:this.mapService.parseScrip(r.scrip).scrip,optionType:this.mapService.parseScrip(r.scrip).type},o=this.mapService.getMapKey(s);if(e===o){let a=0;return t<Number(r.qty)?a=t-Number(r.qty):a=Number(r.qty)-t,a}}}return null}deepEqual(e,t){let i=Object.keys,r=typeof e;return e&&t&&r==="object"&&r===typeof t?i(e).length===i(t).length&&i(e).every(o=>this.deepEqual(e[o],t[o])):e===t}mergePositions(){if(this.currLoadNum===f.stocksStrategyNum)return;let e=new Map,t=new Map;for(let i=0;i<this.curr_positions_trades.length;i++){let r=this.curr_positions_trades[i],s=r.scrip+" "+r.expiry,o=e.get(s),a=t.get(s);if(r.exit!==0)o||(o=[]),o.push(r),e.set(s,o);else if(!a)t.set(s,r);else if(a.qty==-r.qty)a.exit=r.entry,o||(o=[]),o.push(a),e.set(s,o),t.delete(s);else if(a.qty>0&&r.qty>0||a.qty<0&&r.qty<0)a.entry=(a.entry*a.qty+r.entry*r.qty)/(a.qty+r.qty),a.entry=Math.round((a.entry+1e-5)*1e4)/1e4,a.qty+=r.qty,t.set(s,a);else if(Math.abs(a.qty)>Math.abs(r.qty))a.qty=a.qty+r.qty,t.set(s,a),r.qty=-r.qty,r.exit=r.entry,r.entry=a.entry,o||(o=[]),o.push(r),e.set(s,o);else{let l=a.qty,c=a.entry;a.qty=a.qty+r.qty,a.entry=r.entry,t.set(s,a),r.qty=l,r.exit=r.entry,r.entry=c,o||(o=[]),o.push(r),e.set(s,o)}}console.log("exitedMap:",e),console.log("mergeMap:",t),this.curr_positions_trades=[];for(let[i,r]of e)r.forEach(s=>{this.curr_positions_trades.push({qty:s.qty,scrip:s.scrip,expiry:s.expiry,entry:s.entry,exit:s.exit,addToOrders:s.addToOrders,selected:s.selected,selectedActual:s.selectedActual,rollstrike:s.rollstrike,rollstrike_new:s.rollstrike_new,roll_qty:s.roll_qty,alertPrice:s.alertPrice,alertStatus:"",entryDateTime:s.entryDateTime,exitDateTime:s.exitDateTime})});for(let[i,r]of t)this.curr_positions_trades.push({qty:r.qty,scrip:r.scrip,expiry:r.expiry,entry:r.entry,exit:r.exit,addToOrders:r.addToOrders,selected:r.selected,selectedActual:r.selectedActual,rollstrike:r.rollstrike,rollstrike_new:r.rollstrike_new,roll_qty:r.roll_qty,alertPrice:r.alertPrice,alertStatus:"",entryDateTime:r.entryDateTime,exitDateTime:r.exitDateTime})}savePositions(e,t=!0){e!==f.stocksStrategyNum&&this.mergePositions(),console.log("curr_positions_trades",this.curr_positions_trades);let i=this.curr_positions_trades.map(r=>Object.assign({},r));if(console.log("c_positions",i),!t||confirm("Sure save "+e+"?")){let r={instru:"",expiry:"",trades:{}};r.instru=this.instru,r.expiry=this.expiryDate,i.forEach(s=>{delete s.addToOrders,delete s.selected,delete s.selectedActual,delete s.roll_qty,delete s.rollstrike,delete s.rollstrike_new,delete s.pnl,delete s.alertPrice,delete s.alertStatus}),r.trades=i,console.log("Saving positions: ",r),console.log("Saving positions json: ",JSON.stringify(r)),localStorage.setItem("curr_positions"+e,JSON.stringify(r)),this.reloadPayoffData(e),r&&r.trades&&(e===1&&(this.s1Trades=r),e===2&&(this.s2Trades=r),e===3&&(this.s3Trades=r),e===4&&(this.s4Trades=r),e===5&&(this.s5Trades=r),e===6&&(this.s6Trades=r),e===7&&(this.s7Trades=r),e===8&&(this.s8Trades=r,f.stockPositions=r))}}getCEPEWeightage(){}findDS_BuyExit(){let e,t;if(this.curr_positions_trades&&(this.curr_positions_trades.forEach(i=>{i.exit===0&&i.addToOrders&&(i.qty<0&&(t=i),i.qty>0&&(e=i))}),e&&t&&Math.abs(e.qty)===Math.abs(t.qty))){let i=(t.entry-.5*e.entry)/.5;this.ds_buy_exit=e.entry-i}return this.ds_buy_exit=Math.round((this.ds_buy_exit+1e-5)*100)/100,console.log("findDS_BuyExit :",this.ds_buy_exit),this.ds_buy_exit}unselectStraddlePositions(){let e=[],t,i;return this.curr_positions_trades&&(this.curr_positions_trades.forEach(r=>{if(r.exit===0){let s=r.scrip.slice(0,-2);e.includes(s)?(t=s,i=Math.abs(r.qty)):e.push(s)}}),console.log("straddle strike:",t),t&&this.curr_positions_trades.forEach(r=>{r.exit===0&&r.scrip.slice(0,-2)===t&&(r.selected=!1)}),console.log("selected:",this.curr_positions_trades)),[Number(t),Number(i)]}findStraddleHedge(e,t,i){let r;return this.curr_positions_trades&&this.curr_positions_trades.forEach(s=>{s.exit===0&&s.addToOrders&&s.scrip.includes(i)&&s.qty===t&&(r=s.scrip.slice(0,-2))}),console.log("findStraddleHedge strike:",r),Number(r)}whatIsStraddleHedge(e,t,i){let r;return this.curr_positions_trades&&this.curr_positions_trades.forEach(s=>{s.exit===0&&s.selected&&s.scrip.includes(i)&&s.qty===t&&(r=s.scrip.slice(0,-2))}),console.log("hedge strike:",r),Number(r)}payoffCheckboxChange(e){if(e.currentTarget.checked){if(this.overlay_strike){let t=this.overlay_strike,i=this.unselectStraddlePositions(),r=this.mapService.getScripLTP(this.instru,this.expiryDate,t,"CE");this.addPosition(-i[1],t+"CE",r);let s=this.mapService.getScripLTP(this.instru,this.expiryDate,t,"PE");this.addPosition(-i[1],t+"PE",s),this.calculatePayoff()}}else this.reloadPayoffData(this.currLoadNum)}getPayoff(){if(this.currLoadNum===f.stocksStrategyNum)return;let e={chart:[]},t=0;if(this.instru==="USDINR")if(this.use_hypo_future){let A=this.mapService.getScripLTP(this.instru,this.expiryDate,this.hypo_future_strike,"CE"),v=this.mapService.getScripLTP(this.instru,this.expiryDate,this.hypo_future_strike,"PE");t=A-v+this.hypo_future_strike,t=Math.round((t+1e-5)*100)/100}else t=this.mapService.getScripLTP(null,null,this.instru,null),t=Math.round((t+1e-5)*100)/100;else t=this.mapService.getScripLTP(null,null,this.instru,null),t=Math.round(t);console.log("ltp is: ",t);let i=1e3,r=1,s=50;this.instru==="BANKNIFTY"&&(i=3e3,s=100),this.instru==="USDINR"&&(i=2,r=.01,s=.25),this.payoff_range&&this.instru!=="USDINR"&&(i=this.payoff_range);let o=t-i,a=t+i,l=[],c=0,u=[],d=[],h=[],p=[],g=[];if(this.curr_positions_trades){if(this.ce_side_overlay||this.pe_side_overlay){let A=this.unselectStraddlePositions();this.curr_positions_trades.forEach(H=>{h.push(H),p.push(H),g.push(H)});let v="CE";this.pe_side_overlay&&(v="PE",s=-100);let b=this.whatIsStraddleHedge(A[0],A[1],v),E=b-s,O=this.mapService.getScripLTP(this.instru,this.expiryDate,E,"CE");this.addPositionCustom(h,-A[1],E+"CE",O);let T=this.mapService.getScripLTP(this.instru,this.expiryDate,E,"PE");this.addPositionCustom(h,-A[1],E+"PE",T),console.log("overlayPos1:",h);let k=b-2*s,D=this.mapService.getScripLTP(this.instru,this.expiryDate,k,"CE");this.addPositionCustom(p,-A[1],k+"CE",D);let M=this.mapService.getScripLTP(this.instru,this.expiryDate,k,"PE");this.addPositionCustom(p,-A[1],k+"PE",M),console.log("overlayPos2:",p);let N=b-3*s,L=this.mapService.getScripLTP(this.instru,this.expiryDate,N,"CE");this.addPositionCustom(g,-A[1],N+"CE",L);let B=this.mapService.getScripLTP(this.instru,this.expiryDate,E,"PE");this.addPositionCustom(g,-A[1],N+"PE",B),console.log("overlayPos3:",g)}if(this.straddle_shiftCE_overlay||this.straddle_shiftPE_overlay){let A=this.unselectStraddlePositions();this.curr_positions_trades.forEach(B=>{d.push(B)});let v="CE",b="PE",E=100;this.instru==="BANKNIFTY"&&(E=200),this.straddle_shiftPE_overlay&&(v="PE",b="CE",E=-E);let O=A[1];this.straddle_shiftQty_overlay&&(O=this.straddle_shiftQty_overlay);let T=A[0]+E/2,k=this.mapService.getScripLTP(this.instru,this.expiryDate,T,"CE");this.addPositionCustom(d,-O,T+"CE",k);let D=this.mapService.getScripLTP(this.instru,this.expiryDate,T,"PE");this.addPositionCustom(d,-O,T+"PE",D);let M=this.mapService.getScripLTP(this.instru,this.expiryDate,A[0],"CE");this.addPositionCustom(d,O,A[0]+"CE",M);let N=this.mapService.getScripLTP(this.instru,this.expiryDate,A[0],"PE");this.addPositionCustom(d,O,A[0]+"PE",N);let L=this.findStraddleHedge(A[0],O,b);if(L){let B=L+E,H=this.mapService.getScripLTP(this.instru,this.expiryDate,L,b);this.addPositionCustom(d,-O,L+b,H);let Z=this.mapService.getScripLTP(this.instru,this.expiryDate,B,b);this.addPositionCustom(d,O,B+b,Z)}console.log("shiftedPos:",d)}this.curr_positions_trades.forEach(A=>{if(A.exit&&A.exit>0){let v=this.getPnL(A);c+=v}this.payoff_overlay&&A.selectedActual===!0&&u.push(A)});for(let A=o;A<=a;A+=r){let v=0,b=0,E=0,O=0,T=0,k=0,D=0,M=0,N=[];A=Math.round((A+1e-5)*100)/100,this.payoff_overlay?(N=this.calculatePnLAtPoint(this.curr_positions_trades,A,t,!0),T+=N[0],T+=c,T=Math.round((T+1e-5)*100)/100,k+=N[1],k+=c,k=Math.round((k+1e-5)*100)/100,N=this.calculatePnLAtPoint(u,A,t,!1)):this.straddle_shiftCE_overlay||this.straddle_shiftPE_overlay?(N=this.calculatePnLAtPoint(d,A,t,!1),T+=N[0],T+=c,T=Math.round((T+1e-5)*100)/100,k+=N[1],k+=c,k=Math.round((k+1e-5)*100)/100,N=this.calculatePnLAtPoint(this.curr_positions_trades,A,t,!1)):this.ce_side_overlay||this.pe_side_overlay?(N=this.calculatePnLAtPoint(h,A,t,!0),T+=N[0],T+=c,T=Math.round((T+1e-5)*100)/100,N=this.calculatePnLAtPoint(p,A,t,!0),D+=N[0],D+=c,D=Math.round((D+1e-5)*100)/100,N=this.calculatePnLAtPoint(g,A,t,!0),M+=N[0],M+=c,M=Math.round((M+1e-5)*100)/100,N=this.calculatePnLAtPoint(this.curr_positions_trades,A,t,!1)):N=this.calculatePnLAtPoint(this.curr_positions_trades,A,t,!1),v+=N[0],v+=c,v=Math.round((v+1e-5)*100)/100,b+=N[1],b+=c,b=Math.round((b+1e-5)*100)/100,E+=N[2],E+=c,E=Math.round((E+1e-5)*100)/100,O+=N[3],O+=c,O=Math.round((O+1e-5)*100)/100,l.push(v),e.chart.push({Final:v,StockPrice:A,Today:b,T1:E,T2:O,Overlay:T,OverlayT0:k,Overlay2:D,Overlay3:M})}console.log("myPayoff:",e),this.payOffData=e,this.updateChartData(e),this.breakevens="";for(let A=1;A<e.chart.length;A++){let v=e.chart[A],b=e.chart[A-1];(v.Final>0&&b.Final<=0||v.Final<0&&b.Final>=0)&&(this.breakevens=this.breakevens+b.StockPrice+" ")}}}calculatePnLAtPoint(e,t,i,r){let s=0,o=0,a=0,l=0;return e.forEach(c=>{if(c.exit===null||c.exit===0){let u=null,d=null;c.scrip.includes("CE")&&c.qty<0&&(u="cesell",d="ce"),c.scrip.includes("PE")&&c.qty<0&&(u="pesell",d="pe"),c.scrip.includes("CE")&&c.qty>0&&(u="cebuy",d="ce"),c.scrip.includes("PE")&&c.qty>0&&(u="pebuy",d="pe");let h=c.scrip.slice(0,-2),p=c.expiry,g=new Date(p),A=new Date(this.expiryDate);if(g.getFullYear()===A.getFullYear()&&g.getMonth()===A.getMonth()&&g.getDate()===A.getDate())r&&!c.selected?s+=this.getPnL(c):s+=this.calculatePnLAtPointForStrike(t,h,c.qty,c.entry,u);else{let v=new Date;this.simulate_strategy&&(v=this.simulateCurrDateObj);let b=this.appService.calcHolidays(v,A),E=Math.round((A.getTime()-v.getTime())/(1e3*3600*24))-b,O=this.mapService.getScripLTP(this.instru,p,this.mapService.parseScrip(c.scrip).scrip,this.mapService.parseScrip(c.scrip).type),T=this.calculateIV(i,h,f.INTEREST_RATE,p,d,O),k=this.calculateT0AtPointForStrike(t,h,f.INTEREST_RATE,p,T,d,E,c);k=k-c.entry,k=k*c.qty,s+=k}if(r&&!c.selected)o+=this.getPnL(c);else{let v=this.mapService.getScripLTP(this.instru,p,this.mapService.parseScrip(c.scrip).scrip,this.mapService.parseScrip(c.scrip).type),b=this.calculateIV(i,h,f.INTEREST_RATE,p,d,v),E=this.calculateT0AtPointForStrike(t,h,f.INTEREST_RATE,p,b,d,0,c);if(E=E-c.entry,E=E*c.qty,o+=E,this.multi_t0){let O=this.multiT0Input.split(",");if(O&&O.length>1){if(O[0]){let T=this.calculateT0AtPointForStrike(t,h,f.INTEREST_RATE,p,b,d,Number(O[0]),c);T=T-c.entry,T=T*c.qty,a+=T}if(O[1]){let T=this.calculateT0AtPointForStrike(t,h,f.INTEREST_RATE,p,b,d,Number(O[1]),c);T=T-c.entry,T=T*c.qty,l+=T}}}}}}),[s,o,a,l]}calculateIV(e,t,i,r,s,o,a){let l=80,c=0,u=0;for(;l-c>1e-4;)this.calculateT0AtPointForStrike(e,t,i,r,(l+c)/2,s,a)>o?l=(l+c)/2:c=(l+c)/2;return u=(l+c)/2,u}calculateT0AtPointForStrike(e,t,i,r,s,o,a,l){let c=0;if(l&&(f.mfInvested.find(A=>A[0]===l.scrip)||!this.mapService.isOption(l.scrip)))return this.calculatePnLAtPointforNonOption(e,l);let u=new Date(r);this.instru==="USDINR"?u.setHours(12,30,0):u.setHours(15,30,0);let d=new Date;this.simulate_strategy&&(d=this.simulateCurrDateObj);let h=0;if(a){let A=new Date(d);A.setDate(A.getDate()+a),A.setHours(9,15,0),h=Math.floor((A.getTime()-d.getTime())/1e3)}let p=this.appService.calcHolidays(d,u)*86400,g=Math.floor((u.getTime()-d.getTime())/1e3)-p-h;if(g>0){let b=g/60/60/24/365,E=s/100;i=i/100;let O=(Math.log(e/t)+(i+Math.pow(E,2)/2)*b)/(E*Math.sqrt(b)),T=O-E*Math.sqrt(b),k=t*Math.exp(-1*i*b);o==="ce"&&(c=e*this.getCDF(O)-k*this.getCDF(T)),o==="pe"&&(c=k*this.getCDF(-1*T)-e*this.getCDF(-1*O))}return c}getCDF(e){let t=Math.sqrt(this.variance);return .5*this.erfc(-(e-this.mean)/(t*Math.sqrt(2)))}erfc(e){let t=Math.abs(e),i=1/(1+t/2),r=i*Math.exp(-t*t-1.26551223+i*(1.00002368+i*(.37409196+i*(.09678418+i*(-.18628806+i*(.27886807+i*(-1.13520398+i*(1.48851587+i*(-.82215223+i*.17087277)))))))));return e>=0?r:2-r}calculatePnLAtPointforNonOption(e,t){let i=f.mfInvested.find(s=>s[0]===t.scrip);return e*Number(i[1])}calculatePnLAtPointForStrike(e,t,i,r,s){let o=0;return s==="cesell"&&(e>t?o=(t-e+r)*Math.abs(i):o=r*Math.abs(i)),s==="pesell"&&(e<t?o=(-t+e+r)*Math.abs(i):o=r*Math.abs(i)),s==="cebuy"&&(e>t?o=(-t+e-r)*Math.abs(i):o=r*-Math.abs(i)),s==="pebuy"&&(e<t?o=(t-e-r)*Math.abs(i):o=r*-Math.abs(i)),o!==0&&(o=Math.round((o+1e-5)*100)/100),o}getMargin(){if(this.curr_positions_trades){let e=new Date(this.expiryDate),t=f.monthsMapping[e.getMonth()+1];console.log("getMargin: ",this.curr_positions_trades),this.appService.getZerodhaMargin(this.instru,this.curr_positions_trades,this.instru,f.broker_auth).subscribe(i=>{console.log("getMargin res: ",i),i.data&&i.data.final&&(this.margin=Math.round(i.data.final.total).toLocaleString("en-IN"))},i=>{console.log("getMargin error",i)})}return null}getROI(){if(this.avail_margin&&this.used_margin){let e=parseFloat(this.avail_margin.replace(/,/g,""))+parseFloat(this.used_margin.replace(/,/g,"")),t=this.strategyPnl/e*100;return t=Math.round((t+1e-5)*100)/100,t}return null}getPnL(e,t,i){let r=null,s=null;return e.exit!==null&&e.exit!==0?s=e.exit:(t||(t=this.instru),i||(i=e.expiry),s=this.mapService.getScripLTP(t,i,this.mapService.parseScrip(e.scrip).scrip,this.mapService.parseScrip(e.scrip).type)),e.qty>0?r=(s-e.entry)*e.qty:e.qty<0&&(r=(e.entry-s)*-e.qty),r=Math.round((r+1e-5)*100)/100,e.pnl=r,r}getStrategyDelta(){let e=0,t=this.curr_positions_trades;t&&t.forEach(r=>{if(r.exit===null||r.exit===0){if(this.payoff_overlay&&!r.selected)return;let s="",o=r.scrip;o.includes("CE")&&(s="CE"),o.includes("PE")&&(s="PE");let a=o.slice(0,-2),l=this.mapService.getScripLTP(this.instru,r.expiry,this.mapService.parseScrip(r.scrip).scrip,this.mapService.parseScrip(r.scrip).type);e+=this.appService.getDelta(this.instru,a,s,r.expiry,l,this.simulate_strategy,this.simulateCurrDateObj)*r.qty}}),e=Math.round((e+1e-5)*100)/100;let i=" ( 50: "+Math.round((-e/50+1e-5)*100)/100+" , 100: "+Math.round((-e/100+1e-5)*100)/100+" , 150: "+Math.round((-e/150+1e-5)*100)/100+" , 200: "+Math.round((-e/200+1e-5)*100)/100+" )";return e+i}getStrategyPnLAfterCharges(){let e=this.strategyPnl,t=0,i=this.curr_positions_trades;return i&&i.forEach(r=>{let s=0;r.exit!==null&&r.exit!==0?s=40:s=20;let o=Math.abs(r.qty)*r.entry+Math.abs(r.qty)*r.exit,a=0;r.qty<0?a=r.entry*Math.abs(r.qty):a=r.exit*Math.abs(r.qty);let l=625e-6*a,c=o*53e-5,u=.18*(s+c),d=5e-5*o,h=3e-5*o;t+=s+l+c+u+d+h}),Math.round(e-t)+", "+Math.round(t)}getSoldPremium(){let e=0,t=0,i=0,r=0,s=0,o=0,a=0,l=0,c=0,u=0,d=0,h=0,p=null;return p=this.curr_positions_trades,p&&(p.forEach(g=>{if(g.exit===0&&g.qty<0){if(g.scrip.includes("CE")){t+=-g.qty*g.entry,e+=-g.qty;let A=this.mapService.getScripLTP(this.instru,g.expiry,this.mapService.parseScrip(g.scrip).scrip,this.mapService.parseScrip(g.scrip).type);l+=-g.qty*A}if(g.scrip.includes("PE")){s+=-g.qty*g.entry,r+=-g.qty;let A=this.mapService.getScripLTP(this.instru,g.expiry,this.mapService.parseScrip(g.scrip).scrip,this.mapService.parseScrip(g.scrip).type);u+=-g.qty*A}}}),e&&t&&(i=t/e,c=l/e),r&&s&&(o=s/r,d=u/r),a=i+o,a=Math.round((a+1e-5)*100)/100,h=c+d,h=Math.round((h+1e-5)*100)/100,this.currentSold=h),[a,h]}getStrategyPnL(e=null){let t=0,i=0,r=null,s=null,o=null;return e===null&&(r=this.curr_positions_trades),e===1&&this.s1Trades&&(r=this.s1Trades.trades,s=this.s1Trades.instru,o=this.s1Trades.expiry),e===2&&this.s2Trades&&(r=this.s2Trades.trades,s=this.s2Trades.instru,o=this.s2Trades.expiry),e===3&&this.s3Trades&&(r=this.s3Trades.trades,s=this.s3Trades.instru,o=this.s3Trades.expiry),e===4&&this.s4Trades&&(r=this.s4Trades.trades,s=this.s4Trades.instru,o=this.s4Trades.expiry),e===5&&this.s5Trades&&(r=this.s5Trades.trades,s=this.s5Trades.instru,o=this.s5Trades.expiry),e===6&&this.s6Trades&&(r=this.s6Trades.trades,s=this.s6Trades.instru,o=this.s6Trades.expiry),e===7&&this.s7Trades&&(r=this.s7Trades.trades,s=this.s7Trades.instru,o=this.s7Trades.expiry),e===8&&this.s8Trades&&(r=this.s8Trades.trades,s=this.s8Trades.instru,o=this.s8Trades.expiry),r&&r.forEach(a=>{if(e){let l=this.getPnL(a,s,a.expiry);t+=l}else{let l=this.getPnL(a);t+=l}}),t=Math.round((t+1e-5)*100)/100,e===null&&(this.strategyPnl=t),e===1&&this.s1Trades&&(this.strategyPnl1=t),e===2&&this.s2Trades&&(this.strategyPnl2=t),e===3&&this.s3Trades&&(this.strategyPnl3=t),e===4&&this.s4Trades&&(this.strategyPnl4=t),e===5&&this.s5Trades&&(this.strategyPnl5=t),e===6&&this.s6Trades&&(this.strategyPnl6=t),e===7&&this.s7Trades&&(this.strategyPnl7=t),e===8&&this.s8Trades&&(this.strategyPnl8=t),this.chartService.strategyPnLEvent$.next([t,i]),t}getSelectedPnL(){let e=this.curr_positions_trades,t=0,i=[];this.selectedPnL=0,this.selectedMaxProfit=0,this.selectedMaxLoss=0;let r=1e6;if(e){if(e.forEach(s=>{if(s.addToOrders){let a=s.scrip.slice(0,-2);i.push(a)}}),i.sort((s,o)=>o-s),i.length===2||i.length===3){e.forEach(o=>{if(o.addToOrders){let a=this.getPnL(o);t+=a;let l=o.entry*o.qty;this.selectedMaxLoss+=l,Math.abs(o.qty)<r&&(r=Math.abs(o.qty))}});let s=-1;for(let o=0;o<i.length-1;o++){let a=i[o]-i[o+1];a>s&&(s=a)}this.selectedMaxProfit=s*r-this.selectedMaxLoss,this.selectedPnL=Math.round((t+1e-5)*100)/100,this.selectedMaxProfit=Math.round((this.selectedMaxProfit+1e-5)*100)/100,this.selectedMaxLoss=Math.round((this.selectedMaxLoss+1e-5)*100)/100}if(i.length===4){e.forEach(o=>{if(o.addToOrders){let a=this.getPnL(o);t+=a;let l=o.entry*o.qty;this.selectedMaxProfit+=l,Math.abs(o.qty)<r&&(r=Math.abs(o.qty))}});let s=-1;for(let o=0;o<i.length-1;o++){let a=i[o]-i[o+1];a>s&&(s=a)}this.selectedPnL=Math.round((t+1e-5)*100)/100,this.selectedMaxProfit=Math.abs(Math.round((this.selectedMaxProfit+1e-5)*100)/100),this.selectedMaxLoss=s*r-this.selectedMaxProfit,this.selectedMaxLoss=Math.round((this.selectedMaxLoss+1e-5)*100)/100}}}getAlertLtp(e){if(e.selected)if(e.scrip1){let i=this.mapService.getScripLTP(e.instru,e.expiry,this.mapService.parseScrip(e.scrip1).scrip,this.mapService.parseScrip(e.scrip1).type);if(e.scrip2){let r=this.mapService.getScripLTP(e.instru,e.expiry,this.mapService.parseScrip(e.scrip1).scrip,this.mapService.parseScrip(e.scrip1).type);i+=r}return i}else return this.mapService.getScripLTP(null,null,e.instru,null);return null}addScripToChart(e,t){for(let[i,r]of Object.entries(qe.simulateData))if(i===e||i.startsWith(this.simulate_instru)&&i.endsWith(e)){let s={chart:[]},o=this.simulateCurrDateTimeString.split(" ")[0];for(let[a,l]of Object.entries(r))a.startsWith(o)&&s.chart.push({label:a,close:l});console.log("value",o,s,r),this.updateFinChartData(s,t)}}updateFinChartData(e,t){}updateChartData(e){if(e&&e.chart&&Array.isArray(e.chart)){let t=[],i=[],r=[],s=[],o=[],a=[],l=[],c=[],u=[],d=[],h=[],p=[];e.chart.forEach(L=>{if(t.push(L.StockPrice),i.push(L.Final),d.push(0),L.StockPrice%this.strikeStepValue===0){let B=this.mapService.getScripOI(this.instru,this.expiryDate,L.StockPrice,"PE"),H=this.mapService.getScripOI(this.instru,this.expiryDate,L.StockPrice,"CE"),Z=this.mapService.getScripLastDayOI(this.instru,this.expiryDate,L.StockPrice,"CE"),re=this.mapService.getScripLastDayOI(this.instru,this.expiryDate,L.StockPrice,"PE");h.push(B-re),p.push(H-Z)}else h.push(0),p.push(0);this.multi_t0&&(c.push(L.T1),u.push(L.T2)),(this.payoff_overlay||this.straddle_shiftCE_overlay||this.straddle_shiftPE_overlay)&&(r.push(L.Overlay),s.push(L.OverlayT0)),(this.ce_side_overlay||this.pe_side_overlay)&&(r.push(L.Overlay),o.push(L.Overlay2),a.push(L.Overlay3)),this.show_t0&&l.push(L.Today)}),this.lineChartLabels=t,this.lineChartData={labels:t,datasets:[{data:i,label:"PnL",borderColor:"#35A4EB",fill:"origin",borderWidth:2,pointRadius:0},{data:l,label:"T+0",fill:!1,borderColor:"black",borderWidth:1,pointRadius:0},{data:c,label:"T+1",fill:!1,borderColor:"#205f87",borderWidth:1,pointRadius:0},{data:u,label:"T+2",fill:!1,borderColor:"#6fb9e8",borderWidth:1,pointRadius:0},{data:r,label:"Overlay",fill:!1,borderColor:"#35A4EB",borderWidth:2,pointRadius:0,borderDash:[10,5]},{data:s,label:"OverlayT0",fill:!1,borderColor:"black",borderWidth:1,pointRadius:0,borderDash:[10,5]},{data:o,label:"Overlay2",fill:!1,borderColor:"#35A4EB",borderWidth:2,pointRadius:0,borderDash:[10,5]},{data:a,label:"Overlay3",fill:!1,borderColor:"#35A4EB",borderWidth:2,pointRadius:0,borderDash:[10,5]},{data:h,label:"PE OI",type:"bar",yAxisID:"y1",barThickness:5,backgroundColor:"#F0A48C"},{data:p,label:"CE OI",type:"bar",yAxisID:"y1",barThickness:5,backgroundColor:"#8DD681"}]};let g=0;if(this.instru==="USDINR")if(this.use_hypo_future){let L=this.mapService.getScripLTP(this.instru,this.expiryDate,this.hypo_future_strike,"CE"),B=this.mapService.getScripLTP(this.instru,this.expiryDate,this.hypo_future_strike,"PE");g=L-B+this.hypo_future_strike,g=Math.round((g+1e-5)*100)/100}else g=this.mapService.getScripLTP(null,null,this.instru,null),g=Math.round((g+1e-5)*100)/100;else g=this.mapService.getScripLTP(null,null,this.instru,null),g=Math.round(g);let A=1/0,v=-1/0;this.lineChartData.datasets.forEach(L=>{L.data&&L.data.forEach(B=>{typeof B=="number"&&(A=Math.min(A,B),v=Math.max(v,B))})});let b=1/0,E=-1/0;t.forEach(L=>{typeof L=="number"&&(b=Math.min(b,L),E=Math.max(E,L))}),typeof g=="number"&&(b=Math.min(b,g),E=Math.max(E,g)),b=t[0],E=t[t.length-1];let O=(E-b)*.1,T=b-O,k=E+O,D=(v-A)*.1,M=A-D,N=v+D;this.lineChartOptions={responsive:!0,scales:{x:{type:"linear",min:b,max:E,offset:!1},y:{position:"left"},y1:{position:"right",grid:{display:!1},ticks:{callback:L=>Math.abs(L)>=1e5?L/1e5+"L":Math.abs(L)>=1e3?L/1e3+"K":L}}},plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1},annotation:{annotations:[{drawTime:"afterDatasetsDraw",type:"line",scaleID:"x",value:g,borderColor:"orange",borderWidth:1,label:{yAdjust:-40,display:!0,color:"orange",content:g.toString()}}]}}}}}getChartAnnotations(e){return[{type:"line",scaleID:"x",value:e,borderColor:"orange",borderWidth:2,label:{display:!0,position:"center",color:"orange",content:String(e),font:{weight:"bold"}}}]}doAnnotationsContainSymbol(e,t){for(let i=0;i<e.length;i++)if(t===e[i].value)return!0;return!1}updateIntradayChartData(){let e=[],t=[],i=[],r=this.chartService.getIntradayData("74CE","USDINR","2020-11-13"),s=this.chartService.getIntradayData("74PE","USDINR","2020-11-13"),o=this.chartService.getIntradayData("FUT","USDINR","2020-11-13");r&&r.forEach(a=>{let l=a.time;s.forEach(c=>{if(l===c.time){let u=a.price+c.price;u=Math.round((u+1e-5)*100)/100,e.push(l),t.push(u);return}}),o&&o.forEach(c=>{if(l===c.time){i.push(c.price);return}})})}rollPosition(e){console.log(e,e.rollstrike_new);let t={instru:this.instru,expiry_date:e.expiry,curr_qty:e.roll_qty,curr_scrip:e.scrip,new_scrip:e.rollstrike_new};this.place_roll_orders(t,!0)}getPosRollStrike(e,t){let i=50;this.instru==="BANKNIFTY"&&(i=100),this.instru==="USDINR"&&(i=.25);let r="";e.scrip.includes("CE")&&(r="CE"),e.scrip.includes("PE")&&(r="PE");let s=Number(e.scrip.slice(0,-2));return s=s+t*i,s+r}getPosRollStrikeLTP(e,t){let i=50;this.instru==="BANKNIFTY"&&(i=100),this.instru==="USDINR"&&(i=.25);let r="";e.scrip.includes("CE")&&(r="CE"),e.scrip.includes("PE")&&(r="PE");let s=Number(e.scrip.slice(0,-2));return s=s+t*i,this.mapService.getScripLTP(e.instru,e.expiry,s,r)}getOrderLtp(e,t=!1){let i=e.curr_scrip;return t&&(i=e.new_scrip),i?this.mapService.getScripLTP(e.instru,e.expiry_date,this.mapService.parseScrip(i).scrip,this.mapService.parseScrip(i).type):null}adjustKnifeOrders(){this.knife_orders.forEach(e=>{let t=this.getKnifeOrderStatus(e),i=t[0],r=t[1],s=t[2];if(i==="OPEN"){let o=this.getLTP(e.expiry_date,e.scrip,e.instru),a=Math.round(r+r*(f.knife_threshold_adjust1/100)),l=Math.round(r+r*(f.knife_threshold_adjust2/100));if(o&&(o<a||o>l)){console.log("Adjusting knife order",e.scrip),f.requestStatusEvent$.next({status:"info",message:"Adjusting knife order "+e.scrip}),this.appService.playAudio("success");let c=Math.round(o-o*(f.knife_threshold/100)),u={instru:e.instru,expiry_date:e.expiry_date,curr_qty:-e.qty,curr_scrip:e.scrip,new_scrip:null};c?(this.place_roll_orders(u,!0,!1,c,s,"MIS"),setTimeout(()=>{f.miscEvent$.next("refreshAll")},4e3)):f.requestStatusEvent$.next({status:"danger",message:"Limit price could not be calculated for "+e.scrip})}}})}getKnifeOrderStatus(e){let t={instru:e.instru,expiry:e.expiry_date,strike:this.mapService.parseScrip(e.scrip).scrip,optionType:this.mapService.parseScrip(e.scrip).type},i=this.mapService.getMapKey(t),r="",s=null,o=null,a=null;return f.orders.forEach(l=>{i===l.tradingsymbol&&(s===null||l.time>s)&&(r=l.status,s=l.time,o=l.tradedPrice,a=l.id)}),[r,o,a]}place_knife_orders(){this.knife_orders.forEach(e=>{this.place_knife_order(e)}),setTimeout(()=>{f.miscEvent$.next("refreshAll")},4e3)}place_knife_order(e){let t={instru:e.instru,expiry_date:e.expiry_date,curr_qty:-e.qty,curr_scrip:e.scrip,new_scrip:null},i=this.getLTP(e.expiry_date,e.scrip,e.instru),r=Math.round(i-i*(f.knife_threshold/100));r?this.place_roll_orders(t,!0,!1,r,null,"MIS"):f.requestStatusEvent$.next({status:"danger",message:"Limit price could not be calculated for "+e.scrip})}place_all_orders(){confirm("Place All ?")&&this.place_orders.forEach(e=>{this.place_roll_orders(e,!0,!1)})}place_roll_orders(e,t,i=!0,r=null,s=null,o="NRML",a=this.tagSearch,l=0,c=null){let u=!1;if(t&&i?u=confirm("Sure? "+e.curr_qty+" "+e.curr_scrip+" "+e.new_scrip):u=!0,u)if(t&&!e.curr_scrip)this.place_roll_orders(e,!1);else{let d=e.curr_qty,h=e.curr_scrip;if(t?d=-d:h=e.new_scrip,console.log("place order",d,h),d!=""&&d!=null&&h){let p={instru:e.instru,expiry:e.expiry_date,strike:this.mapService.parseScrip(h).scrip,optionType:this.mapService.parseScrip(h).type},g=this.mapService.getMapKey(p);console.log("placing ",t?"first order ":"second order ",g),this.zerodhaService.place_order(g,d,f.broker_auth,r,s,o,a,l).subscribe(A=>{console.log("place_roll_orders response",A),f.requestStatusEvent$.next({status:"secondary",message:"Placed "+h+" "+d}),t&&e.new_scrip?setTimeout(()=>{this.place_roll_orders(e,!1)},1e3):c&&(console.log("Algo - Order Id:",A.data.order_id),c=A.data.order_id)},A=>{console.log("place_roll_orders error",A);let v="Error (mostly timeout)";A.error&&A.error.message?v=A.error.message:v=A.message,f.requestStatusEvent$.next({status:"danger",message:h+" "+d+" "+v}),this.appService.playAudio("error")})}else console.log("Not valid data to place order")}}saveAsCF(){let e=this.curr_positions_trades.map(i=>Object.assign({},i));console.log("c_positions",e);let t={instru:"",expiry:"",trades:{}};t.instru=this.instru,t.expiry=this.expiryDate,e.forEach(i=>{delete i.addToOrders,delete i.selected,delete i.selectedActual,delete i.roll_qty,delete i.rollstrike,delete i.rollstrike_new,delete i.pnl,delete i.alertPrice,delete i.alertStatus}),t.trades=e,console.log("Saving positions CF: ",t),console.log("Saving positions json CF: ",JSON.stringify(t)),localStorage.setItem("cf_curr_positions"+this.currLoadNum,JSON.stringify(t))}removeCF(){localStorage.removeItem("cf_curr_positions"+this.currLoadNum)}use_cf_change(e){this.use_cf_strategies[this.currLoadNum]=this.use_cf}tagSearch_change(e){this.tagSearch_strategies[this.currLoadNum]=this.tagSearch}use_tag_change(e){this.use_tag_strategies[this.currLoadNum]=this.use_tag}use_include_guid_change(e){this.use_include_guid_strategies[this.currLoadNum]=this.use_include_guid}use_exclude_guid_change(e){this.use_exclude_guid_strategies[this.currLoadNum]=this.use_exclude_guid}refreshPositions(){console.log("refreshing positions");let e=this.curr_positions_trades;this.curr_positions_trades=[],this.sl_trades=[];let t=this.tagSearch;this.use_tag||(t="");let i=this.includeGUIDs;this.use_include_guid||(i="");let r=this.excludeGUIDs;if(this.use_exclude_guid||(r=""),f.orders.forEach(s=>{if(console.log("tag search",s.tags,t),s.instru===this.instru&&(s.tags.includes(t)&&!r.includes(s.guid)||i.includes(s.guid))&&s.status==="COMPLETE"){let o=new Date(s.expiry),a=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],l=("0"+o.getDate()).slice(-2),c=o.getMonth(),u=a[c],d=o.getFullYear(),h=l+u+d,p=""+o.getFullYear()+"-"+("0"+(o.getMonth()+1)).slice(-2)+"-"+("0"+o.getDate()).slice(-2);(this.use_curr_expiry&&p===this.expiryDate||!this.use_curr_expiry)&&this.curr_positions_trades.push({qty:s.qty,scrip:s.scrip,expiry:h,entry:s.tradedPrice,exit:0,addToOrders:!1,selected:!0,selectedActual:!1,rollstrike:null,rollstrike_new:s.scrip,roll_qty:this.appService.getQtyUptoFreezeLimit(this.instru,s.qty,this.inlineOC_qty),alertPrice:null,alertStatus:""})}if(s.instru===this.instru&&s.status==="TRIGGER PENDING"&&s.triggerPrice!==0){let o=new Date(s.expiry),a=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],l=("0"+o.getDate()).slice(-2),c=o.getMonth(),u=a[c],d=o.getFullYear(),h=l+u+d;this.sl_trades.push({qty:s.qty,scrip:s.scrip,expiry:h,price:s.tradedPrice,trigger_price:s.triggerPrice,order_id:s.id})}}),console.log("this.curr_positions_trades before adding CF",this.curr_positions_trades),this.use_cf){let s=JSON.parse(localStorage.getItem("cf_curr_positions"+this.currLoadNum));s&&s.trades&&s.trades.forEach(o=>{this.curr_positions_trades.push({qty:o.qty,scrip:o.scrip,expiry:o.expiry,entry:o.entry,exit:o.exit,addToOrders:!1,selected:!0,selectedActual:!1,rollstrike:null,rollstrike_new:o.scrip,roll_qty:this.appService.getQtyUptoFreezeLimit(this.instru,o.qty,this.inlineOC_qty),alertPrice:null,alertStatus:""})}),console.log("this.curr_positions_trades after adding CF",this.curr_positions_trades)}this.mergePositions(),this.sortPositions(),console.log("this.curr_positions_trades after merge",this.curr_positions_trades),console.log("prev_positions",e),this.getPayoff(),this.getMargin(),this.crossCheckPositions(),this.copyProperties(e),this.sortSLLPositions(),this.updateOCValuesForSLL()}copyProperties(e){console.log("prev pos",e),this.curr_positions_trades&&this.curr_positions_trades.forEach(t=>{if(t.exit===0){let i=this.findInPrevious(e,t.scrip);if(console.log("chart component found",i),i&&(i.rollstrike_new&&(t.rollstrike_new=i.rollstrike_new),i.alertPrice&&(t.alertPrice=i.alertPrice),t.qty===i.qty?t.roll_qty=i.roll_qty:t.roll_qty=this.appService.getQtyUptoFreezeLimit(this.instru,t.qty,this.inlineOC_qty)),!this.show_algo&&!t.alertPrice)for(let r=0;r<f.orders.length;r++){let s=f.orders[r];if(s.scrip===t.scrip&&s.status==="COMPLETE"&&s.qty<0){t.alertPrice=s.tradedPrice+s.tradedPrice*.3;break}}}})}findInPrevious(e,t){let i=null;if(e)return e.forEach(r=>{if(r.exit===0&&r.scrip===t){i=r;return}}),i}saveMTMToLocal(){let e=new Date,t=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+e.toTimeString().split(" ")[0],r=this.getStrategyPnL(1),s=JSON.parse(localStorage.getItem("mtm_1_"+t));console.log("mtm 1",this.algo_mtm),s||(s=[]),s.push([i,r]),localStorage.setItem("mtm_1_"+t,JSON.stringify(s))}startAlgo(){if(f.enableAlgo=!0,this.enableAlgo=!0,this.loadAlgoPosFromLocal(),f.expiryDateToTrade){this.loadAlgoStrategySlot(),this.recreateAlgoPos(),setTimeout(()=>{this.entryScheduler(),this.algoScheduler()},2e3);let e=setInterval(()=>{this.isMarketClosed()?clearInterval(e):this.saveAlgoMTM()},3e4)}else f.instruToTrade="",this.addToAlgoLog("No instrument found to trade today")}stopAlgo(){f.enableAlgo=!1,this.enableAlgo=!1}loadAlgoPosFromLocal(){let e=new Date,t=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),i=JSON.parse(localStorage.getItem("algo_log_"+t));i&&(this.addToAlgoLog("Loading algoLog from localStorage"),this.algoLog=i,console.log("algo log",this.algoLog,i));let r=JSON.parse(localStorage.getItem("algo_slabEntered_"+t));r&&(this.addToAlgoLog("Loading slabEntered from localStorage"),f.slabEntered=r,console.log("algo slabEntered",f.slabEntered,r));let s=JSON.parse(localStorage.getItem("algo_slabOrderId_"+t));s&&(this.addToAlgoLog("Loading slabOrderId from localStorage"),f.slabOrderId=s,console.log("algo slabOrderId",f.slabOrderId,s));let o=JSON.parse(localStorage.getItem("algo_slabStrikes_"+t));o&&(this.addToAlgoLog("Loading slabStrikes from localStorage"),f.slabStrikes=o,console.log("algo slabStrikes",f.slabStrikes,o));let a=JSON.parse(localStorage.getItem("algo_slabCurrEntryPrice_"+t));a&&(this.addToAlgoLog("Loading slabCurrEntryPrice from localStorage"),f.slabCurrEntryPrice=a,console.log("algo slabCurrEntryPrice",f.slabCurrEntryPrice,a))}saveAlgoPosToLocal(){let e=new Date,t=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2);localStorage.setItem("algo_log_"+t,JSON.stringify(this.algoLog)),localStorage.setItem("algo_slabEntered_"+t,JSON.stringify(f.slabEntered)),localStorage.setItem("algo_slabOrderId_"+t,JSON.stringify(f.slabOrderId)),localStorage.setItem("algo_slabStrikes_"+t,JSON.stringify(f.slabStrikes)),localStorage.setItem("algo_slabCurrEntryPrice_"+t,JSON.stringify(f.slabCurrEntryPrice))}addToAlgoLog(e){this.algoLog+=new Date().toLocaleTimeString()+" - "+e+`\r
`,console.log("ALGO "+new Date().toLocaleTimeString()+" - "+e)}rollAlgoStrikeKeyUp(e,t,i){console.log(e),e.key==="ArrowUp"?(i==="sl"&&(t.sl_strike=this.changeAlgoStrike(this.strikeStepValue,t.sl_strike,t.scrip,i)),i==="rollin"&&(t.rollin_strike=this.changeAlgoStrike(this.strikeStepValue,t.rollin_strike,t.scrip,i))):e.key==="ArrowDown"&&(i==="sl"&&(t.sl_strike=this.changeAlgoStrike(-this.strikeStepValue,t.sl_strike,t.scrip,i)),i==="rollin"&&(t.rollin_strike=this.changeAlgoStrike(-this.strikeStepValue,t.rollin_strike,t.scrip,i)))}changeAlgoStrike(e,t,i,r){let s=t,o="";s.includes("CE")&&(o="CE"),s.includes("PE")&&(o="PE"),s=Number(s.slice(0,-2));let a=Number(i.slice(0,-2)),l=s+e;return o==="CE"&&(r==="sl"&&l<a&&(l=a),r==="rollin"&&l>a&&(l=a)),o==="PE"&&(r==="sl"&&l>a&&(l=a),r==="rollin"&&l<a&&(l=a)),l+o}isMarketClosed(){let e=new Date,t=new Date;return t.setHours(15),t.setMinutes(30),t.setSeconds(0,0),e.getTime()>=t.getTime()}isSystemOkay(){return!!(this.enableAlgo&&this.zerodhaService.isSocketConnected())}findInstruToTrade(){if(f.instruToTrade="BANKNIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.bnfExpiries),f.expiryDateToTrade||(f.instruToTrade="FINNIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.finniftyExpiries)),f.expiryDateToTrade||(f.instruToTrade="SENSEX",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.sensexExpiries)),f.expiryDateToTrade||(f.instruToTrade="NIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.niftyExpiries)),f.expiryDateToTrade||(f.instruToTrade="MIDCPNIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.midcapExpiries)),f.expiryDateToTrade||(f.instruToTrade="BANKEX",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.bankexExpiries)),f.expiryDateToTrade){let e=""+f.expiryDateToTrade.getFullYear()+"-"+("0"+(f.expiryDateToTrade.getMonth()+1)).slice(-2)+"-"+("0"+f.expiryDateToTrade.getDate()).slice(-2);f.expiryDateToTrade=e}else f.instruToTrade="",this.addToAlgoLog("No instrument found to trade today");this.instruToTrade=f.instruToTrade,this.expiryDateToTrade=f.expiryDateToTrade}loadAlgoStrategySlot(){this.instru=f.instruToTrade,this.expiryDate=f.expiryDateToTrade,this.reloadPayoffData(f.algoStrategyNum),this.loadOptionChain()}entryScheduler(){console.log("ALGO "+new Date().toLocaleTimeString()+" - entryInterval starting now"),this.entryInterval=setInterval(()=>{if(this.isMarketClosed()){this.addToAlgoLog("Market closed. Stopping entryInterval"),clearInterval(this.entryInterval);return}if(!this.isSystemOkay()){console.log("ALGO "+new Date().toLocaleTimeString()+" - entryInterval - System not okay. Skipping...");return}let e=new Date,t=f.slabEntryTime[f.instruToTrade];for(let[s,o]of Object.entries(t)){let l=String(o).split(":"),c=Number(l[0]),u=Number(l[1]),d=new Date;if(d.setHours(c),d.setMinutes(u),d.setSeconds(0,0),e.getTime()>=d.getTime()&&f.slabEntered[f.instruToTrade][s]==!1){let h=f.strike_diff[f.instruToTrade],p=this.mapService.getScripLTP(null,null,f.instruToTrade,null);p=Math.round(p/h)*h;let g=f.slabEntryDist[f.instruToTrade][s],A=p+g,v=A+"CE",b=p-g,E=b+"PE",O=this.getLTP(f.expiryDateToTrade,v,f.instruToTrade),T=this.getLTP(f.expiryDateToTrade,E,f.instruToTrade);O&&T?this.algoSimulated?(this.addToAlgoLog("Enter - Slab "+s+" - "+v+" - "+f.slabQty[f.instruToTrade][s]+" - "+O+" - marked for time "+c+":"+u),this.addToAlgoLog("Enter - Slab "+s+" - "+E+" - "+f.slabQty[f.instruToTrade][s]+" - "+T+" - marked for time "+c+":"+u),f.slabStrikes[f.instruToTrade][s].CE=A,f.slabStrikes[f.instruToTrade][s].PE=b,f.slabEntered[f.instruToTrade][s]=!0,f.slabCurrEntryPrice[f.instruToTrade][s].CE=O,f.slabCurrEntryPrice[f.instruToTrade][s].PE=T,this.addPosition(f.slabQty[f.instruToTrade][s],v,O,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][s],E,T,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1)):(this.executeAlgoOrder(s,v,null,"CE"),this.executeAlgoOrder(s,E,null,"PE"),this.addToAlgoLog("Enter - Slab "+s+" - "+v+" - "+f.slabQty[f.instruToTrade][s]+" - marked for time "+c+":"+u),this.addToAlgoLog("Enter - Slab "+s+" - "+E+" - "+f.slabQty[f.instruToTrade][s]+" - marked for time "+c+":"+u)):console.log("ALGO "+new Date().toLocaleTimeString()+" - LTPs not found for entering algo",v,O,E,T)}}let i=!0,r=f.slabEntered[f.instruToTrade];for(let[s,o]of Object.entries(r))o==!1&&(i=!1);if(i){this.addToAlgoLog("All Slabs entered. Stopping entryInterval"),clearInterval(this.entryInterval);return}},1e3)}isMinDist(e){e=Number(e);let t=f.strike_diff[f.instruToTrade],i=this.mapService.getScripLTP(null,null,f.instruToTrade,null);i=Math.round(i/t)*t;let r=new Date,s=f.minDistTillTime[f.instruToTrade],o=0;for(let[a,l]of Object.entries(s)){let u=String(a).split(":"),d=Number(u[0]),h=Number(u[1]),p=new Date;if(p.setHours(d),p.setMinutes(h),p.setSeconds(0,0),r.getTime()<=p.getTime()){o=Number(l);break}}return Math.abs(i-e)>=o}sortAlgoPositions(){this.algo_pos.sort((e,t)=>{let i=e.scrip.slice(0,-2),r=t.scrip.slice(0,-2);return i===r&&e.scrip.includes("CE")&&t.scrip.includes("PE")?-1:i===r&&e.scrip.includes("PE")&&t.scrip.includes("CE")?1:this.compareForSorting(e.scrip,t.scrip)})}getAlgoPosLTP(e){return this.getLTP(f.expiryDateToTrade,e,f.instruToTrade)}recreateAlgoPos(){let e=this.algo_pos.map(i=>Object.assign({},i));console.log("algo copy",e,this.algo_pos),this.algo_pos=[];let t=f.slabStrikes[f.instruToTrade];for(let[i,r]of Object.entries(t)){let s=f.slabSL[f.instruToTrade][i],o=f.slabRollIn[f.instruToTrade][i],a=f.slabQty[f.instruToTrade][i],l="",c="";if(!this.algoSimulated){let h=!1,p=e.find(v=>v.slab==Number(i)&&v.type=="CE");if(p&&p.orderId!==f.slabOrderId[f.instruToTrade][i].CE&&p.scrip==r.CE+"CE"&&(h=!0,f.slabOrderId[f.instruToTrade][i].CE=p.orderId),(h||r.CE==""||!f.slabCurrEntryPrice[f.instruToTrade][i].CE)&&f.slabOrderId[f.instruToTrade][i].CE){let v=f.orders.find(b=>b.id===f.slabOrderId[f.instruToTrade][i].CE);v&&(f.slabStrikes[f.instruToTrade][i].CE=this.mapService.parseScrip(v.scrip).scrip,l=v.status,v.status==="COMPLETE"&&(f.slabCurrEntryPrice[f.instruToTrade][i].CE=v.tradedPrice))}let g=!1,A=e.find(v=>v.slab==Number(i)&&v.type=="PE");if(A&&A.orderId!==f.slabOrderId[f.instruToTrade][i].PE&&A.scrip==r.PE+"PE"&&(g=!0,f.slabOrderId[f.instruToTrade][i].PE=A.orderId),(g||r.PE==""||!f.slabCurrEntryPrice[f.instruToTrade][i].PE)&&f.slabOrderId[f.instruToTrade][i].PE){let v=f.orders.find(b=>b.id===f.slabOrderId[f.instruToTrade][i].PE);v&&(f.slabStrikes[f.instruToTrade][i].PE=this.mapService.parseScrip(v.scrip).scrip,c=v.status,v.status==="COMPLETE"&&(f.slabCurrEntryPrice[f.instruToTrade][i].PE=v.tradedPrice))}}let u=r.CE;if(u!==""){let h=f.slabCurrEntryPrice[f.instruToTrade][i].CE;h=Math.round((h+.001)*100)/100;let p=null,g=null,A=null,v=null,b=e.find(O=>O.slab==Number(i)&&O.type=="CE");b&&b.scrip==r.CE+"CE"?(p=b.sl,g=b.rollin,A=b.sl_strike.slice(0,-2),v=b.rollin_strike.slice(0,-2)):h&&(p=h+h*s,p=Math.round((p+.001)*100)/100,g=h-h*o,g=Math.round((g+.001)*100)/100,A=Number(u)+Number(f.strike_diff[f.instruToTrade]*f.rolloutStrikeMultiple),v=Number(u)-Number(f.strike_diff[f.instruToTrade]));let E=this.createAlgoPos(i,"CE",a,h,u+"CE",p,A+"CE",g,v+"CE",f.slabOrderId[f.instruToTrade][i].CE,l);this.algo_pos.push(E)}let d=r.PE;if(d!==""){let h=f.slabCurrEntryPrice[f.instruToTrade][i].PE;h=Math.round((h+.001)*100)/100;let p=null,g=null,A=null,v=null,b=e.find(O=>O.slab==Number(i)&&O.type=="PE");b&&b.scrip==r.PE+"PE"?(p=b.sl,g=b.rollin,A=b.sl_strike.slice(0,-2),v=b.rollin_strike.slice(0,-2)):h&&(p=h+h*s,p=Math.round((p+.001)*100)/100,g=h-h*o,g=Math.round((g+.001)*100)/100,A=Number(d)-Number(f.strike_diff[f.instruToTrade]*f.rolloutStrikeMultiple),v=Number(d)+Number(f.strike_diff[f.instruToTrade]));let E=this.createAlgoPos(i,"PE",a,h,d+"PE",p,A+"PE",g,v+"PE",f.slabOrderId[f.instruToTrade][i].PE,c);this.algo_pos.push(E)}}this.sortAlgoPositions(),this.saveAlgoPosToLocal()}createAlgoPos(e,t,i,r,s,o,a,l,c,u,d){let h=new vg;return h.slab=e,h.type=t,h.qty=i,h.entry=r,h.scrip=s,h.sl=o,h.sl_strike=a,h.rollin=l,h.rollin_strike=c,h.orderId=u,h.orderStatus=d,h}saveAlgoMTM(){let e=new Date,t=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+e.toTimeString().split(" ")[0],r=this.getStrategyPnL(f.algoStrategyNum),s=JSON.parse(localStorage.getItem("algo_mtm_"+t));console.log("algo mtm",this.algo_mtm),s||(s=[]),s.push([i,r]),localStorage.setItem("algo_mtm_"+t,JSON.stringify(s))}executeAlgoOrder(e,t,i,r){console.log("executeAlgoOrder",e,t,i,r);let s={instru:f.instruToTrade,expiry_date:f.expiryDateToTrade,curr_qty:f.slabQty[f.instruToTrade][e],curr_scrip:t,new_scrip:i};this.place_roll_orders(s,!0,!1,null,null,"NRML",this.tagSearch,0,f.slabOrderId[f.instruToTrade][e][r])}getSLCount(e){let t=f.slabSLCounter[f.instruToTrade][e.slab][e.type];return t===0?"":t}getRollInCount(e){let t=f.slabRollInCounter[f.instruToTrade][e.slab][e.type];return t===0?"":t}getAlgoOrderId(e){let t=f.orders.find(i=>i.id===f.slabOrderId[f.instruToTrade][e.slab][e.type]);return t?t.id:""}getAlgoOrderStatus(e){let t=f.orders.find(i=>i.id===f.slabOrderId[f.instruToTrade][e.slab][e.type]);return t?t.id:""}algoScheduler(){console.log("ALGO "+new Date().toLocaleTimeString()+" - algoInterval starting now"),this.algoInterval=setInterval(()=>{if(this.isMarketClosed()){this.addToAlgoLog("Market closed. Stopping algoInterval"),clearInterval(this.algoInterval);return}if(!this.isSystemOkay()){console.log("ALGO "+new Date().toLocaleTimeString()+" - algoInterval - System not okay. Skipping...");return}let e=f.slabEntered[f.instruToTrade];for(let[t,i]of Object.entries(e))if(i==!0){let r=this.algo_pos.find(o=>o.slab==Number(t)&&o.type=="CE");if(r){let o=r.scrip.slice(0,-2),a=r.entry;if(o&&a){let l=this.getLTP(f.expiryDateToTrade,o+"CE",f.instruToTrade),c=r.sl,u=r.rollin;if(l>=c){let d=f.slabSLCounter[f.instruToTrade][t].CE;if(d>=f.secsToWaitForSL){f.slabSLCounter[f.instruToTrade][t].CE=0;let h=r.sl_strike.slice(0,-2),p=h+"CE";if(this.algoSimulated){let g=this.getLTP(f.expiryDateToTrade,p,f.instruToTrade);f.slabStrikes[f.instruToTrade][t].CE=h,f.slabCurrEntryPrice[f.instruToTrade][t].CE=g,this.addPosition(-f.slabQty[f.instruToTrade][t],o+"CE",l,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][t],p,g,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+t+" - "+o+"CE - "+f.slabQty[f.instruToTrade][t]+" - "+l),this.addToAlgoLog("Rollout - Slab "+t+" - "+p+" - "+f.slabQty[f.instruToTrade][t]+" - "+g)}else f.slabStrikes[f.instruToTrade][t].CE="",f.slabCurrEntryPrice[f.instruToTrade][t].CE=null,this.executeAlgoOrder(t,o+"CE",p,"CE"),this.addToAlgoLog("Exit - Slab "+t+" - "+o+"CE - "+f.slabQty[f.instruToTrade][t]),this.addToAlgoLog("Rollout - Slab "+t+" - "+p+" - "+f.slabQty[f.instruToTrade][t])}else f.slabSLCounter[f.instruToTrade][t].CE=d+1}else f.slabSLCounter[f.instruToTrade][t].CE=0;if(l<=u||l<1){let d=f.slabRollInCounter[f.instruToTrade][t].CE;if(d>=f.secsToWaitForSL){f.slabRollInCounter[f.instruToTrade][t].CE=0;let h=r.rollin_strike.slice(0,-2);if(this.isMinDist(h)){let p=h+"CE";if(this.algoSimulated){let g=this.getLTP(f.expiryDateToTrade,p,f.instruToTrade);f.slabStrikes[f.instruToTrade][t].CE=h,f.slabCurrEntryPrice[f.instruToTrade][t].CE=g,this.addPosition(-f.slabQty[f.instruToTrade][t],o+"CE",l,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][t],p,g,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+t+" - "+o+"CE - "+f.slabQty[f.instruToTrade][t]+" - "+l),this.addToAlgoLog("Rollin - Slab "+t+" - "+p+" - "+f.slabQty[f.instruToTrade][t]+" - "+g)}else f.slabStrikes[f.instruToTrade][t].CE="",f.slabCurrEntryPrice[f.instruToTrade][t].CE=null,this.executeAlgoOrder(t,o+"CE",p,"CE"),this.addToAlgoLog("Exit - Slab "+t+" - "+o+"CE - "+f.slabQty[f.instruToTrade][t]),this.addToAlgoLog("Rollin - Slab "+t+" - "+p+" - "+f.slabQty[f.instruToTrade][t])}else console.log("ALGO "+new Date().toLocaleTimeString()+" -  Cannot Roll In CE due to min. distance",t)}else f.slabRollInCounter[f.instruToTrade][t].CE=d+1}else f.slabRollInCounter[f.instruToTrade][t].CE=0}}let s=this.algo_pos.find(o=>o.slab==Number(t)&&o.type=="PE");if(s){let o=s.scrip.slice(0,-2),a=s.entry;if(o&&a){let l=this.getLTP(f.expiryDateToTrade,o+"PE",f.instruToTrade),c=s.sl,u=s.rollin;if(l>=c){let d=f.slabSLCounter[f.instruToTrade][t].PE;if(d>=f.secsToWaitForSL){f.slabSLCounter[f.instruToTrade][t].PE=0;let h=s.sl_strike.slice(0,-2),p=h+"PE";if(this.algoSimulated){let g=this.getLTP(f.expiryDateToTrade,p,f.instruToTrade);f.slabStrikes[f.instruToTrade][t].PE=h,f.slabCurrEntryPrice[f.instruToTrade][t].PE=g,this.addPosition(-f.slabQty[f.instruToTrade][t],o+"PE",l,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][t],p,g,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+t+" - "+o+"PE - "+f.slabQty[f.instruToTrade][t]+" - "+l),this.addToAlgoLog("Rollout - Slab "+t+" - "+p+" - "+f.slabQty[f.instruToTrade][t]+" - "+g)}else f.slabStrikes[f.instruToTrade][t].PE="",f.slabCurrEntryPrice[f.instruToTrade][t].PE=null,this.executeAlgoOrder(t,o+"PE",p,"PE"),this.addToAlgoLog("Exit - Slab "+t+" - "+o+"PE - "+f.slabQty[f.instruToTrade][t]),this.addToAlgoLog("Rollout - Slab "+t+" - "+p+" - "+f.slabQty[f.instruToTrade][t])}else f.slabSLCounter[f.instruToTrade][t].PE=d+1}else f.slabSLCounter[f.instruToTrade][t].PE=0;if(l<=u||l<1){let d=f.slabRollInCounter[f.instruToTrade][t].PE;if(d>=f.secsToWaitForSL){f.slabRollInCounter[f.instruToTrade][t].PE=0;let h=s.rollin_strike.slice(0,-2);if(this.isMinDist(h)){let p=h+"PE";if(this.algoSimulated){let g=this.getLTP(f.expiryDateToTrade,p,f.instruToTrade);f.slabStrikes[f.instruToTrade][t].PE=h,f.slabCurrEntryPrice[f.instruToTrade][t].PE=g,this.addPosition(-f.slabQty[f.instruToTrade][t],o+"PE",l,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][t],p,g,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+t+" - "+o+"PE - "+f.slabQty[f.instruToTrade][t]+" - "+l),this.addToAlgoLog("Rollin - Slab "+t+" - "+p+" - "+f.slabQty[f.instruToTrade][t]+" - "+g)}else f.slabStrikes[f.instruToTrade][t].PE="",f.slabCurrEntryPrice[f.instruToTrade][t].PE=null,this.executeAlgoOrder(t,o+"PE",p,"PE"),this.addToAlgoLog("Exit - Slab "+t+" - "+o+"PE - "+f.slabQty[f.instruToTrade][t]),this.addToAlgoLog("Rollin - Slab "+t+" - "+p+" - "+f.slabQty[f.instruToTrade][t])}else console.log("ALGO "+new Date().toLocaleTimeString()+" -  Cannot Roll In PE due to min. distance",t)}else f.slabRollInCounter[f.instruToTrade][t].PE=d+1}else f.slabRollInCounter[f.instruToTrade][t].PE=0}}}},1e3)}algoSchedule2(){console.log("ALGO "+new Date().toLocaleTimeString()+" - algoInterval starting now"),this.algoInterval=setInterval(()=>{if(this.isMarketClosed()){this.addToAlgoLog("Market closed. Stopping algoInterval"),clearInterval(this.algoInterval);return}if(!this.isSystemOkay()){console.log("ALGO "+new Date().toLocaleTimeString()+" - algoInterval - System not okay. Skipping...");return}let e=f.slabEntered[f.instruToTrade];for(let[t,i]of Object.entries(e))if(i==!0){let r=f.slabSL[f.instruToTrade][t],s=f.slabRollIn[f.instruToTrade][t],o=f.slabStrikes[f.instruToTrade][t].CE,a=f.slabCurrEntryPrice[f.instruToTrade][t].CE;if(o&&a){let u=this.getLTP(f.expiryDateToTrade,o+"CE",f.instruToTrade),d=a+a*r,h=a-a*s;if(u>=d){let p=f.slabSLCounter[f.instruToTrade][t].CE;if(console.log("ALGO "+new Date().toLocaleTimeString()+" -  Counter-SL CE: ",t,u,d,p),p>=f.secsToWaitForSL){f.slabSLCounter[f.instruToTrade][t].CE=0;let g=o+f.strike_diff[f.instruToTrade]*f.rolloutStrikeMultiple,A=g+"CE";if(this.algoSimulated){let v=this.getLTP(f.expiryDateToTrade,A,f.instruToTrade);f.slabStrikes[f.instruToTrade][t].CE=g,f.slabCurrEntryPrice[f.instruToTrade][t].CE=v,this.addPosition(-f.slabQty[f.instruToTrade][t],o+"CE",u,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][t],A,v,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+t+" - "+o+"CE - "+f.slabQty[f.instruToTrade][t]+" - "+u),this.addToAlgoLog("Rollout - Slab "+t+" - "+A+" - "+f.slabQty[f.instruToTrade][t]+" - "+v)}else f.slabStrikes[f.instruToTrade][t].CE="",f.slabCurrEntryPrice[f.instruToTrade][t].CE=null,this.executeAlgoOrder(t,o+"CE",A,"CE"),this.addToAlgoLog("Exit - Slab "+t+" - "+o+"CE - "+f.slabQty[f.instruToTrade][t]),this.addToAlgoLog("Rollout - Slab "+t+" - "+A+" - "+f.slabQty[f.instruToTrade][t])}else f.slabSLCounter[f.instruToTrade][t].CE=p+1}else f.slabSLCounter[f.instruToTrade][t].CE=0;if(u<=h||u<1){let p=f.slabRollInCounter[f.instruToTrade][t].CE;if(console.log("ALGO "+new Date().toLocaleTimeString()+" -  Counter-RI CE: ",t,u,h,p),p>=f.secsToWaitForSL){f.slabRollInCounter[f.instruToTrade][t].CE=0;let g=o-f.strike_diff[f.instruToTrade];if(this.isMinDist(g)){let A=g+"CE";if(this.algoSimulated){let v=this.getLTP(f.expiryDateToTrade,A,f.instruToTrade);f.slabStrikes[f.instruToTrade][t].CE=g,f.slabCurrEntryPrice[f.instruToTrade][t].CE=v,this.addPosition(-f.slabQty[f.instruToTrade][t],o+"CE",u,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][t],A,v,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+t+" - "+o+"CE - "+f.slabQty[f.instruToTrade][t]+" - "+u),this.addToAlgoLog("Rollin - Slab "+t+" - "+A+" - "+f.slabQty[f.instruToTrade][t]+" - "+v)}else f.slabStrikes[f.instruToTrade][t].CE="",f.slabCurrEntryPrice[f.instruToTrade][t].CE=null,this.executeAlgoOrder(t,o+"CE",A,"CE"),this.addToAlgoLog("Exit - Slab "+t+" - "+o+"CE - "+f.slabQty[f.instruToTrade][t]),this.addToAlgoLog("Rollin - Slab "+t+" - "+A+" - "+f.slabQty[f.instruToTrade][t])}else console.log("ALGO "+new Date().toLocaleTimeString()+" -  Cannot Roll In CE due to min. distance",t)}else f.slabRollInCounter[f.instruToTrade][t].CE=p+1}else f.slabRollInCounter[f.instruToTrade][t].CE=0}let l=f.slabStrikes[f.instruToTrade][t].PE,c=f.slabCurrEntryPrice[f.instruToTrade][t].PE;if(l&&c){let u=this.getLTP(f.expiryDateToTrade,l+"PE",f.instruToTrade),d=c+c*r,h=c-c*s;if(u>=d){let p=f.slabSLCounter[f.instruToTrade][t].PE;if(console.log("ALGO "+new Date().toLocaleTimeString()+" -  Counter-SL PE: ",t,u,d,p),p>=f.secsToWaitForSL){f.slabSLCounter[f.instruToTrade][t].PE=0;let g=l-f.strike_diff[f.instruToTrade]*f.rolloutStrikeMultiple,A=g+"PE";if(this.algoSimulated){let v=this.getLTP(f.expiryDateToTrade,A,f.instruToTrade);f.slabStrikes[f.instruToTrade][t].PE=g,f.slabCurrEntryPrice[f.instruToTrade][t].PE=v,this.addPosition(-f.slabQty[f.instruToTrade][t],l+"PE",u,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][t],A,v,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+t+" - "+l+"PE - "+f.slabQty[f.instruToTrade][t]+" - "+u),this.addToAlgoLog("Rollout - Slab "+t+" - "+A+" - "+f.slabQty[f.instruToTrade][t]+" - "+v)}else f.slabStrikes[f.instruToTrade][t].PE="",f.slabCurrEntryPrice[f.instruToTrade][t].PE=null,this.executeAlgoOrder(t,l+"PE",A,"PE"),this.addToAlgoLog("Exit - Slab "+t+" - "+l+"PE - "+f.slabQty[f.instruToTrade][t]),this.addToAlgoLog("Rollout - Slab "+t+" - "+A+" - "+f.slabQty[f.instruToTrade][t])}else f.slabSLCounter[f.instruToTrade][t].PE=p+1}else f.slabSLCounter[f.instruToTrade][t].PE=0;if(u<=h||u<1){let p=f.slabRollInCounter[f.instruToTrade][t].PE;if(console.log("ALGO "+new Date().toLocaleTimeString()+" -  Counter-RI PE: ",t,u,h,p),p>=f.secsToWaitForSL){f.slabRollInCounter[f.instruToTrade][t].PE=0;let g=l+f.strike_diff[f.instruToTrade];if(this.isMinDist(g)){let A=g+"PE";if(this.algoSimulated){let v=this.getLTP(f.expiryDateToTrade,A,f.instruToTrade);f.slabStrikes[f.instruToTrade][t].PE=g,f.slabCurrEntryPrice[f.instruToTrade][t].PE=v,this.addPosition(-f.slabQty[f.instruToTrade][t],l+"PE",u,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][t],A,v,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+t+" - "+l+"PE - "+f.slabQty[f.instruToTrade][t]+" - "+u),this.addToAlgoLog("Rollin - Slab "+t+" - "+A+" - "+f.slabQty[f.instruToTrade][t]+" - "+v)}else f.slabStrikes[f.instruToTrade][t].PE="",f.slabCurrEntryPrice[f.instruToTrade][t].PE=null,this.executeAlgoOrder(t,l+"PE",A,"PE"),this.addToAlgoLog("Exit - Slab "+t+" - "+l+"PE - "+f.slabQty[f.instruToTrade][t]),this.addToAlgoLog("Rollin - Slab "+t+" - "+A+" - "+f.slabQty[f.instruToTrade][t])}else console.log("ALGO "+new Date().toLocaleTimeString()+" -  Cannot Roll In PE due to min. distance",t)}else f.slabRollInCounter[f.instruToTrade][t].PE=p+1}else f.slabRollInCounter[f.instruToTrade][t].PE=0}}},1e3)}startAlgoSS(){if(this.addToAlgoSSLog("Starting"),f.enableAlgo=!0,this.enableAlgo=!0,f.expiryDateToTrade){this.loadOptionChain(f.instruToTrade,f.expiryDateToTrade);let e=setInterval(()=>{this.isMarketClosed()||!this.enableAlgo?(this.addToAlgoSSLog("Stopping"),this.stopAlgoSS(),clearInterval(e)):f.miscEvent$.next("refreshAll")},1e4),t=setInterval(()=>{this.isMarketClosed()?clearInterval(t):this.saveAlgoMTMSS()},3e4)}else f.instruToTrade=""}stopAlgoSS(){this.addToAlgoSSLog("Stop triggered"),f.enableAlgo=!1,this.enableAlgo=!1}findInstruToTradeSS(){if(f.instruToTrade="BANKNIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.bnfExpiries),f.expiryDateToTrade||(f.instruToTrade="FINNIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.finniftyExpiries)),f.expiryDateToTrade||(f.instruToTrade="SENSEX",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.sensexExpiries)),f.expiryDateToTrade||(f.instruToTrade="NIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.niftyExpiries)),f.expiryDateToTrade||(f.instruToTrade="MIDCPNIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.midcapExpiries)),f.expiryDateToTrade||(f.instruToTrade="BANKEX",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.bankexExpiries)),f.expiryDateToTrade){let e=""+f.expiryDateToTrade.getFullYear()+"-"+("0"+(f.expiryDateToTrade.getMonth()+1)).slice(-2)+"-"+("0"+f.expiryDateToTrade.getDate()).slice(-2);f.expiryDateToTrade=e}else f.instruToTrade="";this.instruToTrade=f.instruToTrade,this.expiryDateToTrade=f.expiryDateToTrade,this.algoSS_qtyStep=f.qtyStep[this.instruToTrade]}saveAlgoMTMSS(){let e=new Date,t=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+e.toTimeString().split(" ")[0],r=this.getStrategyPnL(f.algoStrategyNum),s=JSON.parse(localStorage.getItem("algo_mtm_"+t));console.log("algo mtm",this.algo_mtm),s||(s=[]),s.push([i,r]),localStorage.setItem("algo_mtm_"+t,JSON.stringify(s))}refreshAlgoSSPositions(){this.addToAlgoSSLog("-------------------- Refreshing positions --------------------");let e=f.algoTag,t=this.algoSSIncludeGUIDs,i=this.algoSSExcludeGUIDs;this.algoSS_positions=[],this.algoSS_sl_orders=[],this.algoSS_positions_UI=[],f.orders.forEach(r=>{if(r.instru===f.instruToTrade&&(r.tags.includes(e)&&!i.includes(r.guid)||t.includes(r.guid))&&(r.status==="COMPLETE"||r.status==="TRIGGER PENDING")){let s=new Date(r.expiry),o=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],a=("0"+s.getDate()).slice(-2),l=s.getMonth(),c=o[l],u=s.getFullYear(),d=a+c+u;r.status==="COMPLETE"&&this.algoSS_positions.push({qty:r.qty,scrip:r.scrip,expiry:d,entry:r.tradedPrice,triggerPrice:r.triggerPrice,exit:0}),r.status==="TRIGGER PENDING"&&this.algoSS_sl_orders.push({qty:r.qty,scrip:r.scrip,expiry:d,entry:r.tradedPrice,triggerPrice:r.triggerPrice,exit:0})}}),console.log("this.algoSS_sl_orders",this.algoSS_sl_orders),console.log("this.algoSS_positions before merge",this.algoSS_positions),this.mergeAlgoSSPositions(),console.log("this.algoSS_positions_trades after merge",this.algoSS_positions),this.algoSS_positions.forEach(r=>{this.algoSS_positions_UI.push({qty:r.qty,scrip:r.scrip,expiry:r.expiry,entry:r.entry,triggerPrice:r.triggerPrice,exit:r.exit})}),this.algoSS_sl_orders.forEach(r=>{this.algoSS_positions_UI.push({qty:r.qty,scrip:r.scrip,expiry:r.expiry,entry:r.entry,triggerPrice:r.triggerPrice,exit:r.exit})}),this.sortPositionsAlgoSS(),this.analyzeOrdersAlgoSS()}mergeAlgoSSPositions(){let e=new Map,t=new Map;for(let i=0;i<this.algoSS_positions.length;i++){let r=this.algoSS_positions[i],s=r.scrip+" "+r.expiry,o=e.get(s),a=t.get(s);if(r.exit!==0)o||(o=[]),o.push(r),e.set(s,o);else if(!a)t.set(s,r);else if(a.qty==-r.qty)a.exit=r.entry,o||(o=[]),o.push(a),e.set(s,o),t.delete(s);else if(a.qty>0&&r.qty>0||a.qty<0&&r.qty<0)a.entry=(a.entry*a.qty+r.entry*r.qty)/(a.qty+r.qty),a.entry=Math.round((a.entry+1e-5)*1e4)/1e4,a.qty+=r.qty,t.set(s,a);else if(Math.abs(a.qty)>Math.abs(r.qty))a.qty=a.qty+r.qty,t.set(s,a),r.qty=-r.qty,r.exit=r.entry,r.entry=a.entry,o||(o=[]),o.push(r),e.set(s,o);else{let l=a.qty,c=a.entry;a.qty=a.qty+r.qty,a.entry=r.entry,t.set(s,a),r.qty=l,r.exit=r.entry,r.entry=c,o||(o=[]),o.push(r),e.set(s,o)}}console.log("exitedMap algoSS:",e),console.log("mergeMap algoSS:",t),this.algoSS_positions=[];for(let[i,r]of e)r.forEach(s=>{this.algoSS_positions.push({qty:s.qty,scrip:s.scrip,expiry:s.expiry,entry:s.entry,triggerPrice:s.triggerPrice,exit:s.exit})});for(let[i,r]of t)this.algoSS_positions.push({qty:r.qty,scrip:r.scrip,expiry:r.expiry,entry:r.entry,triggerPrice:r.triggerPrice,exit:r.exit})}sortPositionsAlgoSS(){this.algoSS_positions_UI.sort((e,t)=>{if(e.exit!==0&&t.exit!==0)return this.compareForSorting(e.scrip,t.scrip);if(e.exit!==0&&t.exit===0)return-1;if(e.exit===0&&t.exit!==0)return 1;let i=e.scrip.slice(0,-2),r=t.scrip.slice(0,-2);if(i===r&&e.scrip.includes("CE")&&t.scrip.includes("PE"))return-1;if(i===r&&e.scrip.includes("PE")&&t.scrip.includes("CE"))return 1;if(i===r&&(e.scrip.includes("CE")&&t.scrip.includes("CE")||e.scrip.includes("PE")&&t.scrip.includes("PE"))){let s=new Date(e.expiry),o=new Date(t.expiry);return s<o?-1:1}return this.compareForSorting(e.scrip,t.scrip)})}analyzeOrdersAlgoSS(){f.algoSS_CE=null,f.algoSS_CE=new Od,f.algoSS_PE=null,f.algoSS_PE=new Od,this.algoSS_positions.forEach(e=>{f.algoSSStrike||(f.algoSSStrike=Number(e.scrip.slice(0,-2))),e.exit===0&&(e.scrip.includes("CE")&&(f.algoSS_CE.pos_open===!0?f.algoSS_CE.multiple_pos_open=!0:f.algoSS_CE.pos_open=!0,f.algoSS_CE.entry||(f.algoSS_CE.entry=Number(e.entry))),e.scrip.includes("PE")&&(f.algoSS_PE.pos_open===!0?f.algoSS_PE.multiple_pos_open=!0:f.algoSS_PE.pos_open=!0,f.algoSS_PE.entry||(f.algoSS_PE.entry=Number(e.entry)))),e.exit!==0&&(e.scrip.includes("CE")&&(f.algoSS_CE.sl_times+=1),e.scrip.includes("PE")&&(f.algoSS_PE.sl_times+=1),e.scrip.includes("CE")&&!f.algoSS_CE.entry&&(e.qty<0?f.algoSS_CE.entry=Number(e.entry):f.algoSS_CE.entry=Number(e.exit)),e.scrip.includes("PE")&&!f.algoSS_PE.entry&&(e.qty<0?f.algoSS_PE.entry=Number(e.entry):f.algoSS_PE.entry=Number(e.exit)))}),this.algoSS_sl_orders.forEach(e=>{f.algoSSStrike||(f.algoSSStrike=Number(e.scrip.slice(0,-2))),e.scrip.includes("CE")&&(e.qty>0&&(f.algoSS_CE.sl_open===!0?f.algoSS_CE.multiple_sl_open=!0:f.algoSS_CE.sl_open=!0),e.qty<0&&(f.algoSS_CE.reentry_open===!0?f.algoSS_CE.reentry_multiple_open=!0:f.algoSS_CE.reentry_open=!0)),e.scrip.includes("PE")&&(e.qty>0&&(f.algoSS_PE.sl_open===!0?f.algoSS_PE.multiple_sl_open=!0:f.algoSS_PE.sl_open=!0),e.qty<0&&(f.algoSS_PE.reentry_open===!0?f.algoSS_PE.reentry_multiple_open=!0:f.algoSS_PE.reentry_open=!0))}),this.doAlgoSS(f.algoSS_CE,"CE"),this.doAlgoSS(f.algoSS_PE,"PE")}doAlgoSS(e,t){console.log("AlgoSS obj - ",e,t);let i=t+" - ";if(i+="Entry: "+e.entry+",",i+=" Pos Open: "+e.pos_open+",",i+=" Re Open: "+e.reentry_open+",",i+=" SL Open: "+e.sl_open+",",i+=" SL Times: "+e.sl_times+",",i+=" Mul Pos Open: "+e.multiple_pos_open+",",i+=" Mul Re Open: "+e.reentry_multiple_open+",",i+=" Mul SL Open: "+e.multiple_sl_open,this.addToAlgoSSLog(i),!e.pos_open&&!e.reentry_open)if(e.sl_times===0){this.addToAlgoSSLog("First time entry");let r=this.algoTimeToEnter.split(":"),s=Number(r[0]),o=Number(r[1]),a=new Date;if(a.getHours()===s&&a.getMinutes()>=o||a.getHours()>s){if(!f.algoSSStrike){let l=null;this.oc_instru==="NIFTY"?l=50:this.oc_instru==="BANKNIFTY"?l=100:this.oc_instru==="FINNIFTY"?l=50:this.oc_instru==="MIDCPNIFTY"?l=25:(this.oc_instru==="SENSEX"||this.oc_instru==="BANKEX")&&(l=100);let c=this.mapService.getScripLTP(null,null,f.instruToTrade,null),u=Math.round(c/l)*l;f.algoSSStrike=u}this.placeAlgoSSOrder(f.algoSSStrike+t,this.algoSSQty)}else this.addToAlgoSSLog("Time not reached")}else if(e.sl_times<this.algoSSMaxSLTimes){this.addToAlgoSSLog("Reentry");let r=Math.ceil(e.entry);this.placeAlgoSSOrder(f.algoSSStrike+t,this.algoSSQty,r-this.algoSSTriggerDifference,r)}else this.addToAlgoSSLog("No action to take - max SLs reached for "+t);else if(e.pos_open&&!e.sl_open){this.addToAlgoSSLog("Set SLL");let r=Math.ceil(e.entry),s=Math.ceil(r+r*this.algoSSSLPerc/100);this.placeAlgoSSOrder(f.algoSSStrike+t,Math.abs(this.algoSSQty),s+this.algoSSTriggerDifference,s)}else this.addToAlgoSSLog("No action to take")}placeAlgoSSOrder(e,t,i=null,r=0){if(console.log("place order",t,e),t!=""&&t!=null&&e){let s={instru:f.instruToTrade,expiry:f.expiryDateToTrade,strike:this.mapService.parseScrip(e).scrip,optionType:this.mapService.parseScrip(e).type},o=this.mapService.getMapKey(s);this.zerodhaService.place_order(o,t,f.broker_auth,i,null,"NRML",f.algoTag,r).subscribe(a=>{console.log("placeAlgoSSOrder response",a),f.requestStatusEvent$.next({status:"secondary",message:"Placed "+e+" "+t})},a=>{console.log("placeAlgoSSOrder error",a);let l="Error (mostly timeout)";a.error&&a.error.message?l=a.error.message:l=a.message,f.requestStatusEvent$.next({status:"danger",message:e+" "+t+" "+l}),this.appService.playAudio("error")})}else console.log("Not valid data to place order")}getAlgoSSPosLTP(e){return this.getLTP(f.expiryDateToTrade,e,f.instruToTrade)}getAlgoSSTotalPnl(){let e=0;return this.algoSS_positions&&this.algoSS_positions.length>0&&this.algoSS_positions.forEach(t=>{if(!(t.exit===0&&t.triggerPrice!==0)){let i=this.getPnL(t,f.instruToTrade,f.expiryDateToTrade);e+=i}}),e=Math.round((e+1e-5)*100)/100,e}saveAlgoSSParams(e){let t=new Date,i=""+t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2);this.algoSSQty>=0&&(this.algoSSQty=-this.algoSSQty);let r={algoTimeToEnter:this.algoTimeToEnter,algoSSQty:this.algoSSQty,algoSSSLPerc:this.algoSSSLPerc,algoSSMaxSLTimes:this.algoSSMaxSLTimes,algoSSTriggerDifference:this.algoSSTriggerDifference,algoSSIncludeGUIDs:this.algoSSIncludeGUIDs,algoSSExcludeGUIDs:this.algoSSExcludeGUIDs};localStorage.setItem("AlgoSSParams_"+i,JSON.stringify(r))}loadAlgoSSParams(){let e=new Date,t=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),i=JSON.parse(localStorage.getItem("AlgoSSParams_"+t));i&&(this.algoTimeToEnter=i.algoTimeToEnter,this.algoSSQty=i.algoSSQty,this.algoSSSLPerc=i.algoSSSLPerc,this.algoSSMaxSLTimes=i.algoSSMaxSLTimes,this.algoSSTriggerDifference=i.algoSSTriggerDifference,this.algoSSIncludeGUIDs=i.algoSSIncludeGUIDs,this.algoSSExcludeGUIDs=i.algoSSExcludeGUIDs)}addToAlgoSSLog(e){this.algoLog+=new Date().toLocaleTimeString()+" - "+e+`\r
`,console.log("ALGO SS - "+new Date().toLocaleTimeString()+" - "+e)}static \u0275fac=function(t){return new(t||n)(Ae(En),Ae(fn),Ae(qe),Ae(Dr),Ae(Ii),Ae(Dc),Ae(Vm),Ae(Bm))};static \u0275cmp=ji({type:n,selectors:[["app-chart"]],viewQuery:function(t,i){if(t&1&&Uy(Xv,7),t&2){let r;zy(r=Hy())&&(i.chart=r.first)}},decls:477,vars:183,consts:[["popContent",""],["fileImportInputExpiry",""],["fileImportInputExpiry2",""],["fileImportInput1",""],["id","accordionPayoff",1,"accordion","mb-2"],[1,"accordion-item"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#payOffSection","aria-expanded","true","aria-controls","payOffSection",1,"accordion-button","fw-bold"],["id","payOffSection","aria-labelledby","headingOne","data-bs-parent","#accordionPayoff",1,"accordion-collapse","collapse","show","p-2"],[1,"chart-all-strategies-pnl","text-center"],[1,"d-inline-block"],[1,"mb-2"],[1,"fw-bold",3,"ngClass"],["placeholder","< Alert Price","type","number",1,"ms-4","me-2","form-control","form-control-sm","strategy_alert_field",3,"ngModelChange","ngModel"],[1,"text-danger"],[1,"d-inline-block","ps-4","pe-4"],[2,"display","flex","justify-content","space-between"],[1,"chart-flex-container"],[1,"chart-positions"],["id","algo-container-old",4,"ngIf"],["id","algo-container"],[1,"d-inline"],[1,"algo_params","d-inline"],["type","button","class","btn btn-outline-primary btn-sm me-2",3,"click",4,"ngIf"],[1,"strategy_instru","form-select","form-select-sm","me-2",2,"width","125px",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Expiry YYYY-MM-DD","id","",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","100px",3,"ngModelChange","ngModel"],["placeholder","Time","id","",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","60px",3,"change","ngModelChange","ngModel"],["placeholder","Qty","title","Quantity (ENTER NEGATIVE ONLY)","id","","type","number",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","80px",3,"change","ngModelChange","step","ngModel"],["placeholder","SL %","title","SL %","id","","type","number",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","70px",3,"change","ngModelChange","ngModel"],["placeholder","Max SL Times","title","Max SL Times","id","","type","number",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","40px",3,"change","ngModelChange","ngModel"],["placeholder","Trigger-Limit Difference","title","Trigger-Limit Difference","id","","type","number",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","40px",3,"change","ngModelChange","ngModel"],["placeholder","Include GUIDs","id","",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","300px",3,"change","ngModelChange","ngModel"],["placeholder","Exclude GUIDs","id","",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","300px",3,"change","ngModelChange","ngModel"],[1,"mt-2"],["readonly","",2,"width","100%","height","300px",3,"ngModelChange","ngModel"],[1,"table","table-sm","table-bordered","shadow","text-center"],[1,"table-light"],["scope","col",1,"width80"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"mt-2","mb-2","fw-bold"],[2,"display","inline-block","width","200px"],[3,"ngClass"],[1,"form-check","form-check-inline","use-hypo-future-class",2,"padding-left","0"],["for","use-range",1,"form-check-label"],["id","use-range","type","number","placeholder","Payoff Range",1,"ms-2","form-control","form-control-sm",2,"width","100px","display","inline-block",3,"ngModelChange","ngModel"],[1,"form-check","form-check-inline","use-hypo-future-class"],["type","checkbox","value","","id","hide-closed",1,"form-check-input",3,"ngModelChange","ngModel"],["for","hide-closed",1,"form-check-label"],["type","checkbox","value","","id","show_t0",1,"form-check-input",3,"ngModelChange","ngModel"],["for","show_t0",1,"form-check-label"],["type","checkbox","value","","id","hide-roll",1,"form-check-input",3,"ngModelChange","ngModel"],["for","hide-roll",1,"form-check-label"],["type","checkbox","value","","id","hide-extra",1,"form-check-input",3,"ngModelChange","ngModel"],["for","hide-extra",1,"form-check-label"],["type","checkbox","value","","id","show-multit0",1,"mt-2","form-check-input",3,"ngModelChange","ngModel"],["for","show-multit0",1,"form-check-label"],["type","text",1,"form-control","form-control-sm","d-inline-block","ms-2",2,"width","50px",3,"ngModelChange","ngModel"],["type","checkbox","value","","id","simulate_strategy",1,"form-check-input",3,"ngModelChange","ngModel"],["for","simulate_strategy",1,"form-check-label"],["type","checkbox","value","","id","showInlineOC",1,"form-check-input",3,"ngModelChange","ngModel"],["for","showInlineOC",1,"form-check-label"],["type","checkbox","value","","id","playAlertSound",1,"form-check-input",3,"ngModelChange","ngModel"],["for","playAlertSound",1,"form-check-label"],["type","checkbox","value","","id","showExtraOptions",1,"form-check-input",3,"ngModelChange","ngModel"],["for","showExtraOptions",1,"form-check-label"],["type","checkbox","value","","id","mfRealTime",1,"form-check-input",3,"ngModelChange","ngModel"],["for","mfRealTime",1,"form-check-label"],[4,"ngIf"],["class","mb-2",4,"ngIf"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"strategy_instru","form-select","form-select-sm","me-2",3,"ngModelChange","ngModel"],["placeholder","YYYY-MM-DD",1,"mb-1","me-3","form-control","form-control-sm","expiryDate-inputs",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-secondary","btn-sm","mb-1","me-2",3,"click"],[1,"form-check","form-check-inline"],["type","checkbox","value","","id","use_cf",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","use_cf",1,"form-check-label"],["type","checkbox","value","","id","saveMTM1",1,"form-check-input",3,"ngModelChange","ngModel"],["for","saveMTM1",1,"form-check-label"],["type","checkbox","value","","id","use_tag",1,"form-check-input","me-1","mt-2",3,"ngModelChange","change","ngModel"],["placeholder","Tag","id","tagSearch",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","200px",3,"ngModelChange","change","ngModel"],["type","checkbox","value","","id","use_include_guid",1,"form-check-input","me-1","mt-2",3,"ngModelChange","change","ngModel"],["type","text","id","includeGUIDs","placeholder","Include GUIDs",1,"form-control","form-control-sm","d-inline-block","me-2",2,"width","400px",3,"ngModelChange","ngModel"],["type","checkbox","value","","id","use_exclude_guid",1,"form-check-input","me-1","mt-2",3,"ngModelChange","change","ngModel"],["type","text","id","excludeGUIDs","placeholder","Exclude GUIDs",1,"form-control","form-control-sm","d-inline-block",2,"width","400px",3,"ngModelChange","ngModel"],[1,"form-check","form-check-inline","ms-1"],["type","checkbox","value","","id","use_curr_expiry",1,"form-check-input",3,"ngModelChange","ngModel"],["for","use_curr_expiry",1,"form-check-label"],["type","checkbox","value","","id","auto_execute",1,"form-check-input",3,"ngModelChange","ngModel"],["for","auto_execute",1,"form-check-label"],["class","form-check form-check-inline",4,"ngIf"],["class","d-inline",4,"ngIf"],["class","mt-1",4,"ngIf"],["class","table table-sm table-bordered shadow text-center",4,"ngIf"],["class","chart-chart",4,"ngIf"],[2,"display","flex"],[1,"form-check","form-check-inline","use-hypo-future-class","me-2"],["type","checkbox","value","","id","expand_single_charts",1,"form-check-input",3,"change","ngModelChange","ngModel"],["for","expand_single_charts",1,"form-check-label"],[1,"form-select","form-select-sm","d-inline-block","mb-2","me-2",2,"width","120px",3,"ngModelChange","change","ngModel"],[2,"display","flex","flex-wrap","wrap"],["id","spot-chart",1,"opt_chart","me-4"],["id","spot-chart2",1,"opt_chart","me-4"],[1,"d-flex"],["id","chart-ce",1,"opt_chart","me-4"],[1,"chart-legend"],[1,"chart-legend-qty"],["id","chart-pe",1,"opt_chart","me-4"],["id","stock-chart",1,"opt_chart"],[1,"ms-2"],["type","checkbox","value","","id","add_strangle_chart",1,"form-check-input",3,"ngModelChange","ngModel"],["for","add_strangle_chart",1,"form-check-label"],["placeholder","Scrip 1",1,"me-3","form-control","form-control-sm",2,"display","inline-block","width","80px",3,"ngModelChange","ngModel"],["placeholder","Scrip 2",1,"me-3","form-control","form-control-sm",2,"display","inline-block","width","80px",3,"ngModelChange","ngModel"],["class","form-check form-check-inline use-hypo-future-class",4,"ngIf"],["type","button",1,"btn","btn-light","btn-sm","me-2",3,"click"],["class","opt_chart me-4","id","spot-chart-simulate",4,"ngIf"],["id","strangle-chart",1,"opt_chart"],["type","checkbox","value","","id","show_news",1,"form-check-input",3,"ngModelChange","ngModel"],["for","show_news",1,"form-check-label"],["href","https://www.google.com/search?sca_esv=556714279&rlz=1C5CHFA_enIN1013IN1013&sxsrf=AB5stBj127G0qRSDvJgWwiqXPwupGLEmJQ:1692010519401&q=moneycontrol+top+10&tbm=nws&source=univ&tbo=u&sa=X&ved=2ahUKEwjD_duv_tuAAxW9SGwGHWA5BBgQt8YBKAF6BAgNEAY&biw=1728&bih=930&dpr=2","target","_blank","rel","noopener noreferrer",1,"me-2"],["href","https://www.google.com/search?q=bq+prime+all+you+need+to+know&sca_esv=558740822&rlz=1C5CHFA_enIN1013IN1013&biw=1728&bih=930&tbm=nws&sxsrf=AB5stBiwZOAWiIkwVU-a2ny8zymQqmhjEQ%3A1692620043930&ei=C1XjZKi3OIuV-AaN0qyIBg&ved=0ahUKEwjo6NSD3e2AAxWLCt4KHQ0pC2EQ4dUDCA0&uact=5&oq=bq+prime+all+you+need+to+know&gs_lp=Egxnd3Mtd2l6LW5ld3MiHWJxIHByaW1lIGFsbCB5b3UgbmVlZCB0byBrbm93MgUQABiABDIIEAAYigUYhgMyCBAAGIoFGIYDMggQABiKBRiGA0jAC1COCViOCXAAeACQAQCYAXmgAe0BqgEDMC4yuAEDyAEA-AEBwgIHEAAYgAQYCogGAQ&sclient=gws-wiz-news","target","_blank","rel","noopener noreferrer",1,"me-2"],["href","https://www.cnbctv18.com/live-tv/","target","_blank","rel","noopener noreferrer",1,"me-2"],["class","opt-charts-parent-0",4,"ngIf"],[1,"opt-charts-parent"],[1,"form-select","form-select-sm","me-2","charts-inputs",3,"ngModelChange","change","ngModel"],["placeholder","Expiry",1,"charts-inputs","mb-1","me-3","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Call Lower",1,"charts-inputs","mb-1","me-3","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Call Higher",1,"charts-inputs","mb-1","me-3","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Put Lower",1,"charts-inputs","mb-1","me-3","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Put Higher",1,"charts-inputs","mb-1","me-3","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Multiple",1,"charts-inputs","mb-1","me-3","form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"charts-heading",2,"color","green"],[1,"opt_chart_wrapper_parent"],["class","opt_chart_wrapper",3,"click",4,"ngFor","ngForOf"],[2,"margin","0"],[1,"charts-heading",2,"color","red"],["id","accordionAlerts",1,"accordion","mb-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#alertsSection","aria-expanded","false","aria-controls","alertsSection",1,"accordion-button","collapsed","fw-bold"],["id","alertsSection","aria-labelledby","headingOne","data-bs-parent","#accordionAlerts",1,"accordion-collapse","collapse","p-2"],["class","alerts-flex-container",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-link",3,"click"],["id","accordionMultiOC",1,"accordion","mb-2"],["id","headingMultiOC",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#multiOCSection","aria-expanded","false","aria-controls","multiOCSection",1,"accordion-button","collapsed","fw-bold"],["id","multiOCSection","aria-labelledby","headingMultiOC","data-bs-parent","#accordionMultiOC",1,"accordion-collapse","collapse","p-2"],[1,"expiryDate-inputs","form-select","form-select-sm","me-2",3,"ngModelChange","ngModel"],["placeholder","Higher",1,"mb-1","me-2","form-control","form-control-sm","ocInputs",2,"width","80px !important",3,"ngModelChange","ngModel"],["placeholder","Lower",1,"mb-1","me-2","form-control","form-control-sm","ocInputs",2,"width","80px !important",3,"ngModelChange","ngModel"],["type","button",1,"mb-1","me-2","btn","btn-light","btn-sm",3,"click"],[1,"table","table-sm","table-bordered","shadow","mb-2","text-center"],["scope","col",1,"oc-col-c1"],["scope","col",1,"oc-col-c2"],["scope","col",1,"oc-col-c3"],["scope","col",1,"oc-col-c4"],["scope","col",1,"oc-col-c5"],["scope","col",1,"text-center"],["scope","col",1,"oc-col-p5"],["scope","col",1,"oc-col-p4"],["scope","col",1,"oc-col-p3"],["scope","col",1,"oc-col-p2"],["scope","col",1,"oc-col-p1"],[4,"ngFor","ngForOf"],["id","accordionKnife",1,"accordion","mb-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#knifeSection","aria-expanded","false","aria-controls","knifeSection",1,"accordion-button","collapsed","fw-bold"],["id","knifeSection","aria-labelledby","headingOne","data-bs-parent","#accordionKnife",1,"accordion-collapse","collapse","p-2"],["type","button",1,"btn","btn-secondary","btn-sm","me-4",3,"click"],["type","checkbox","value","","id","auto_adjust_knife",1,"form-check-input",3,"ngModelChange","ngModel"],["for","auto_adjust_knife",1,"form-check-label"],[1,"table","table-sm","table-bordered","shadow","text-center",2,"max-width","1000px"],["scope","col"],["id","accordionOrders",1,"accordion","mb-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#ordersSection","aria-expanded","false","aria-controls","ordersSection",1,"accordion-button","collapsed","fw-bold"],["id","ordersSection","aria-labelledby","headingOne","data-bs-parent","#accordionOrders",1,"accordion-collapse","collapse","p-2"],[1,"place_multi_orders"],["type","button",1,"btn","btn-secondary","btn-sm","me-1",3,"click"],["class","accordion mb-2","id","accordionStraddle",4,"ngIf"],["class","accordion","id","accordionCharts",4,"ngIf"],["id","algo-container-old"],["type","checkbox","value","","id","show_algo",1,"form-check-input",3,"ngModelChange","ngModel"],["for","show_algo",1,"form-check-label"],["type","checkbox","value","","id","algoSimulated","disabled","",1,"form-check-input",3,"ngModelChange","ngModel"],["for","algoSimulated",1,"form-check-label"],["placeholder","Expiry YYYY-MM-DD","id","payOffExpiry",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-secondary","btn-sm","me-2",3,"click"],["type","button",1,"btn","btn-outline-primary","btn-sm","me-2",3,"click"],[3,"value"],[1,"nostretch"],["type","number","placeholder","Qty",1,"form-control","form-control-sm","me-1","width80",3,"ngModelChange","step","ngModel","ngClass"],[2,"display","flex","align-items","center"],[2,"display","inline-block","width","100px"],["placeholder","Scrip 11500CE","type","number",1,"form-control","form-control-sm","me-2","width60","d-inline",3,"ngModelChange","ngModel"],[2,"color","red"],["placeholder","Scrip 11500CE",1,"form-control","form-control-sm","me-2","width80",3,"keyup","ngModelChange","ngModel"],["placeholder","",1,"form-control","form-control-sm","me-1","width160",3,"ngModelChange"],[3,"ngClass",4,"ngIf"],["type","checkbox","value","","id","use-filter-expiry",1,"form-check-input",3,"ngModelChange","ngModel"],["for","use-filter-expiry",1,"form-check-label"],["placeholder","Expiry",1,"ms-2","form-control","form-control-sm",2,"width","80px","display","inline-block",3,"ngModelChange","ngModel"],["type","checkbox","value","","id","hide-payoff",1,"form-check-input",3,"ngModelChange","ngModel"],["for","hide-payoff",1,"form-check-label"],["type","checkbox","value","","id","use-hypo-future",1,"form-check-input",3,"ngModelChange","ngModel"],["for","use-hypo-future",1,"form-check-label"],["type","number","placeholder","Closest Strike",1,"ms-2","form-control","form-control-sm",2,"width","80px","display","inline-block",3,"ngModelChange","ngModel"],["type","checkbox","value","","id","hide-roll3",1,"form-check-input",3,"ngModelChange","ngModel"],["for","hide-roll3",1,"form-check-label"],["type","checkbox","value","","id","ce_side_overlay",1,"form-check-input",3,"ngModelChange","ngModel"],["for","ce_side_overlay",1,"form-check-label"],["type","checkbox","value","","id","pe_side_overlay",1,"form-check-input",3,"ngModelChange","ngModel"],["for","pe_side_overlay",1,"form-check-label"],["type","checkbox","value","","id","straddle_shiftCE_overlay",1,"form-check-input",3,"ngModelChange","ngModel"],["for","straddle_shiftCE_overlay",1,"form-check-label"],["type","checkbox","value","","id","straddle_shiftPE_overlay",1,"form-check-input",3,"ngModelChange","ngModel"],["for","straddle_shiftPE_overlay",1,"form-check-label"],["type","number","placeholder","Straddle Qty",1,"me-3","form-control","form-control-sm",2,"width","100px","display","inline-block",3,"ngModelChange","ngModel"],["type","checkbox","value","","id","payoff_overlay",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","payoff_overlay",1,"form-check-label"],["type","number","placeholder","Overlay strike",1,"ms-2","form-control","form-control-sm",2,"width","100px","display","inline-block",3,"ngModelChange","ngModel"],[1,"strategy_instru","form-select","form-select-sm","me-2",3,"ngModelChange","change","ngModel"],["placeholder","Start YYYY-MM-DD",1,"simulateDate","mb-1","me-3","form-control","form-control-sm",2,"width","120px !important",3,"ngModelChange","ngModel"],[1,"strategy_instru","form-select","form-select-sm","me-2",2,"width","120px !important",3,"ngModelChange","change","ngModel"],["placeholder","Expiry YYYY-MM-DD",1,"simulateDate","mb-1","me-3","form-control","form-control-sm",2,"width","120px !important",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-light","btn-sm","me-1",3,"click"],[1,"form-check-inline","use-hypo-future-class"],["type","checkbox","value","","id","show_simulate_charts",1,"form-check-input",3,"ngModelChange","ngModel"],["for","show_simulate_charts",1,"form-check-label"],["type","file","name","File Upload Expiry","accept",".csv",2,"display","none",3,"change"],[1,"text-success"],["type","checkbox","value","","id","auto_execute_rollin",1,"form-check-input",3,"ngModelChange","ngModel"],["for","auto_execute_rollin",1,"form-check-label"],["type","checkbox","value","","id","auto_execute_rollout",1,"form-check-input",3,"ngModelChange","ngModel"],["for","auto_execute_rollout",1,"form-check-label"],["placeholder","Seconds","id","automate_roll_secs",1,"d-inline","width32","me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Slabs","id","automate_slabs",1,"d-inline","width32","me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Qty per slab","id","automate_slab_qty",1,"d-inline","width60","me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","First SL%","id","automate_sl1",1,"d-inline","width48","me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","SL% increase","id","automate_sl_increase",1,"d-inline","width32","me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"mt-1"],[1,"d-inline","me-2"],["placeholder","Time 1","id","automate_time_1",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Distance 1","id","automate_dist_1",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Time 2","id","automate_time_2",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Distance 2","id","automate_dist_2",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Time 3","id","automate_time_3",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Distance 3","id","automate_dist_3",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Time 4","id","automate_time_4",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Distance 4","id","automate_dist_4",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"width32"],[1,"form-check-inline","posCheckbox"],["type","checkbox","value","",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],[1,"width160"],["type","number","placeholder","Qty",1,"form-control","form-control-sm","me-1",3,"ngModelChange","step","ngModel","ngClass"],["type","number","placeholder","Roll Qty",1,"form-control","form-control-sm",3,"ngModelChange","step","ngModel","ngClass"],[1,"fw-bold","width48",2,"padding-top","8px"],[1,"width110"],["type","number","placeholder","Entry",1,"form-control","form-control-sm",2,"max-width","80px !important","display","inline",3,"ngModelChange","ngModel"],["placement","bottom",1,"cursor-pointer","ms-1",3,"click","ngbPopover"],["placeholder","Scrip 11500CE",1,"form-control","form-control-sm","me-2","width80",3,"ngModelChange","ngModel"],[2,"display","inline-block","width","60px"],["type","button","class","btn btn-link",3,"click",4,"ngIf"],["type","button","class","btn btn-link red",3,"click",4,"ngIf"],["class","nostretch",4,"ngIf"],["class","width110",4,"ngIf"],["class","width80",4,"ngIf"],["style","text-align: left;",4,"ngIf"],["class","",4,"ngIf"],["type","checkbox","value","",1,"form-check-input","me-1",3,"ngModelChange","ngModel","disabled"],["type","checkbox","value","",1,"form-check-input",3,"ngModelChange","ngModel","disabled"],["type","button",1,"btn","btn-link","red",3,"click"],["type","radio",1,"form-check-input",3,"ngModelChange","name","id","value","ngModel"],[1,"form-check-label",3,"for"],["placeholder","Scrip 11500CE",1,"form-control","form-control-sm","me-2","width80",3,"ngModelChange","keyup","ngModel","ngClass"],["placeholder","Expiry 01OCT2020",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"width80"],["type","number","placeholder","Exit",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[2,"text-align","left"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],[1,""],["placeholder","Entry Date",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Exit Date",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["type","number","placeholder","> Alert",1,"form-control","form-control-sm","d-inline-block","width80",3,"ngModelChange","ngModel"],[1,"text-danger","ms-2"],["type","","placeholder","> Alert",1,"d-inline-block","width48","height16","me-1",3,"ngModelChange","ngModel"],[1,"text-danger","me-1"],["scope","col",1,"width32"],["scope","col",1,"nostretch"],["type","number","placeholder","Qty",1,"form-control","form-control-sm",3,"ngModelChange","step","ngModel","ngClass"],["placeholder","11500CE",1,"form-control","form-control-sm","me-2","width80",3,"ngModelChange","ngModel"],["type","number","placeholder","Price",1,"form-control","form-control-sm","me-1",2,"max-width","80px !important",3,"ngModelChange","ngModel"],["type","number","placeholder","Trigger Price",1,"form-control","form-control-sm",2,"max-width","80px !important",3,"ngModelChange","ngModel"],["style","display: flex; align-items: center;",4,"ngIf"],[1,"width32",2,"text-align","left"],["type","button","class","btn btn-light btn-sm",3,"click",4,"ngIf"],[1,"chart-chart"],[2,"min-width","600px","max-width","600px","margin-right","20px"],["baseChart","",3,"data","options","type"],[2,"min-width","450px"],[1,"mt-1","mb-2"],[1,"me-4","strategy_alert_field"],["placeholder","> Alert Price","type","number",1,"me-2","form-control","form-control-sm","strategy_alert_field",3,"ngModelChange","ngModel"],[2,"font-weight","normal"],[2,"margin-right","20px"],[1,"me-3",2,"display","inline-block"],["type","file","name","File Upload 1","accept",".csv",2,"display","none",3,"change"],["href","assets/flyrr.png","target","_blank","rel","noopener noreferrer"],["type","checkbox","value","","id","strangle_chart_simulate_tillend",1,"form-check-input",3,"ngModelChange","ngModel"],["for","strangle_chart_simulate_tillend",1,"form-check-label"],["id","spot-chart-simulate",1,"opt_chart","me-4"],[2,"width","268px"],["placeholder","Higher",1,"mb-1","me-2","form-control","form-control-sm","ocInputs",2,"width","54px !important",3,"ngModelChange","ngModel"],["placeholder","Lower",1,"mb-1","me-2","form-control","form-control-sm","ocInputs",2,"width","54px !important",3,"ngModelChange","ngModel"],["placeholder","Qty","type","number",1,"mb-1","form-control","form-control-sm","ocInputs",3,"ngModelChange","ngModel"],["scope","col",1,"oc-col"],["class","oc-col","scope","col",4,"ngIf"],["class","table table-sm table-bordered shadow mb-2 text-center",4,"ngIf"],["placeholder","Sell Qty","type","number",1,"mb-1","form-control","form-control-sm","ocInputs",3,"ngModelChange","ngModel"],[1,"table","table-sm","table-bordered","shadow","mb-0","text-center"],[2,"position","relative",3,"ngClass"],[1,"cursor-pointer",2,"position","absolute","left","4px","font-size","14px","transform","rotateX(180deg) rotate(-20deg)",3,"click"],[1,"cursor-pointer",2,"position","absolute","right","4px","top","-5px","font-size","24px",3,"click"],[1,"cursor-pointer","text-primary","fw-bold",3,"click"],["class","ocStrategyStrikeQty fw-bold",4,"ngIf"],["style","position: relative;",4,"ngIf"],[1,"fw-bold","text-center",3,"ngClass"],["class","ocStrategyStrikeQty oc-strike-spot",4,"ngIf"],["style","color: orange;",4,"ngIf"],[1,"cursor-pointer",2,"position","absolute","right","4px","font-size","14px","transform","rotateX(180deg) rotate(-20deg)",3,"click"],[1,"cursor-pointer",2,"position","absolute","left","4px","top","-5px","font-size","24px",3,"click"],[1,"ocStrategyStrikeQty","fw-bold"],[2,"position","relative"],[1,"ocStrategyStrikeQty","oc-strike-spot"],[2,"color","orange"],[1,"cursor-pointer","text-center","oc-strike",3,"click"],[1,"text-success","fw-bold"],[1,"text-danger","fw-bold"],["height","800","width","100%","src",af`https://pulse.zerodha.com/`],[1,"opt-charts-parent-0"],[1,"me-4"],[1,"form-check-inline","mt-0"],["type","radio","value","5min","id","5min",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","5min",1,"form-check-label"],["type","radio","value","1min","id","1min",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","1min",1,"form-check-label"],["type","button","title","Charts of ST 10 2 for 40 premiums whenever ST breach. Also prints ST entry exit and strangle 25 fullday entry exit in console",1,"btn","btn-secondary","btn-sm","mb-1","me-2",3,"click"],["class","opt_chart_wrapper-0",4,"ngFor","ngForOf"],[1,"opt_chart_wrapper-0"],[1,"opt_chart-0",3,"id"],[1,"chart-legend-0"],[1,"chart-legend-values"],["type","radio","value","10_2","id","st102",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","st102",1,"form-check-label"],["type","radio","value","7_3","id","st73",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","st73",1,"form-check-label"],["type","radio","value","both","id","stBoth",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","stBoth",1,"form-check-label"],["placeholder","0",1,"form-control","form-control-sm","me-2","mb-2","width80","d-inline",3,"ngModelChange","ngModel"],[1,"opt_chart-0",2,"width","320px","height","240px","background-color","grey",3,"id"],[1,"opt_chart_wrapper",3,"click"],[1,"opt_chart",3,"id","ngClass"],[1,"alerts-flex-container"],[1,"form-check-inline"],["type","checkbox","value","",1,"form-check-input",3,"ngModelChange","ngModel"],[1,"alert_field","form-select","form-select-sm","me-2",3,"ngModelChange","ngModel"],["placeholder","Scrip1",1,"me-2","mb-1","form-control","form-control-sm","alert_field",3,"ngModelChange","ngModel"],["placeholder","Scrip2",1,"me-2","mb-1","form-control","form-control-sm","alert_field",3,"ngModelChange","ngModel"],["placeholder","Expiry YYYY-MM-DD",1,"me-2","mb-1","form-control","form-control-sm","alert_field",3,"ngModelChange","ngModel"],["value",">"],["value","<"],["placeholder","Price","type","number",1,"me-2","mb-1","form-control","form-control-sm","alert_field",3,"ngModelChange","ngModel"],["rows","5",2,"width","100%",3,"ngModelChange","ngModel"],[1,"confirmation-check","form-check-inline","mt-0"],["type","radio","value","upstox","id","upstox_orders",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","upstox_orders",1,"form-check-label"],["type","radio","value","zerodha","id","zerodha_orders",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","zerodha_orders",1,"form-check-label"],["type","button",1,"btn","btn-secondary","btn-sm",2,"margin-top","-7px",3,"click"],[1,"form-select","form-select-sm","me-2",2,"width","120px","display","inline-block",3,"ngModelChange","ngModel"],["id","place_expiry_date","placeholder","place_expiry_date",1,"form-control","me-2",2,"width","120px","display","inline-block",3,"ngModelChange","ngModel"],["id","place_qty","placeholder","qty",1,"form-control","fw-bold","me-2",2,"width","120px","display","inline-block",3,"ngModelChange","ngClass","ngModel"],["id","curr_pos","placeholder","curr_pos",1,"form-control","fw-bold","me-1",2,"width","120px","display","inline-block",3,"ngModelChange","ngClass","ngModel"],[2,"text-align","left","font-size","10px",3,"ngClass"],["style","color: orange; font-weight: bold; margin-left: 4px;",4,"ngIf"],[1,"me-2",2,"display","inline-block"],["id","new_pos","placeholder","new_pos",1,"form-control","fw-bold","me-1",2,"width","120px","display","inline-block",3,"ngModelChange","ngClass","ngModel"],[2,"color","orange","font-weight","bold","margin-left","4px"],["id","accordionStraddle",1,"accordion","mb-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#straddleSection","aria-expanded","true","aria-controls","straddleSection",1,"accordion-button","collapsed","fw-bold"],["id","straddleSection","aria-labelledby","headingOne","data-bs-parent","#accordionStraddle",1,"accordion-collapse","collapse","p-2"],["placeholder","Expiry YYYY-MM-DD","id","payOffExpiry",1,"me-2","mb-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Scrip","id","payOffExpiry",1,"mb-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["id","accordionCharts",1,"accordion"],["type","button","data-toggle","collapse","data-target","#chartsSection","aria-expanded","true","aria-controls","chartsSection",1,"accordion-button","collapsed","fw-bold"],["id","chartsSection","aria-labelledby","headingOne","data-parent","#accordionCharts",1,"accordion-collapse","collapse","p-2"],["height","600","width","760","src",af`https://ssltvc.forexprostools.com/?pair_ID=8985&height=600&width=760&interval=300&plotStyle=candles&domain_ID=56&lang_ID=56&timezone_ID=20`],["height","600","width","760","src",af`https://ssltvc.forexprostools.com/?pair_ID=160&height=600&width=760&interval=300&plotStyle=candles&domain_ID=56&lang_ID=56&timezone_ID=20`]],template:function(t,i){if(t&1){let r=ge();m(0,"div",4)(1,"div",5)(2,"h2",6)(3,"button",7),w(4," Strategy Payoff "),_()(),m(5,"div",8)(6,"div",9)(7,"div",10)(8,"div",10)(9,"div",11),w(10," Strategy 1: "),m(11,"span",12),w(12),_()(),m(13,"div",11)(14,"input",13),U("ngModelChange",function(o){return C(r),z(i.strategyAlertPrice1,o)||(i.strategyAlertPrice1=o),x(o)}),_(),m(15,"span",14),w(16),_()()(),m(17,"div",15),w(18,"|"),_()(),m(19,"div",10)(20,"div",10)(21,"div",11),w(22," Strategy 2: "),m(23,"span",12),w(24),_()(),m(25,"div",11)(26,"input",13),U("ngModelChange",function(o){return C(r),z(i.strategyAlertPrice2,o)||(i.strategyAlertPrice2=o),x(o)}),_(),m(27,"span",14),w(28),_()()(),m(29,"div",15),w(30,"|"),_()(),m(31,"div",10)(32,"div",10)(33,"div",11),w(34," Strategy 3: "),m(35,"span",12),w(36),_()(),m(37,"div",11)(38,"input",13),U("ngModelChange",function(o){return C(r),z(i.strategyAlertPrice3,o)||(i.strategyAlertPrice3=o),x(o)}),_(),m(39,"span",14),w(40),_()()(),m(41,"div",15),w(42,"|"),_()(),m(43,"div",10)(44,"div",10)(45,"div",11),w(46," Strategy 4: "),m(47,"span",12),w(48),_()(),m(49,"div",11)(50,"input",13),U("ngModelChange",function(o){return C(r),z(i.strategyAlertPrice4,o)||(i.strategyAlertPrice4=o),x(o)}),_(),m(51,"span",14),w(52),_()()(),m(53,"div",15),w(54,"|"),_()(),m(55,"div",10)(56,"div",10)(57,"div",11),w(58," Strategy 5: "),m(59,"span",12),w(60),_()(),m(61,"div",11)(62,"input",13),U("ngModelChange",function(o){return C(r),z(i.strategyAlertPrice5,o)||(i.strategyAlertPrice5=o),x(o)}),_(),m(63,"span",14),w(64),_()()(),m(65,"div",15),w(66,"|"),_()(),m(67,"div",10)(68,"div",10)(69,"div",11),w(70," Strategy 6: "),m(71,"span",12),w(72),_()(),m(73,"div",11)(74,"input",13),U("ngModelChange",function(o){return C(r),z(i.strategyAlertPrice6,o)||(i.strategyAlertPrice6=o),x(o)}),_(),m(75,"span",14),w(76),_()()(),m(77,"div",15),w(78,"|"),_()(),m(79,"div",10)(80,"div",10)(81,"div",11),w(82," Strategy 7: "),m(83,"span",12),w(84),_()(),m(85,"div",11)(86,"input",13),U("ngModelChange",function(o){return C(r),z(i.strategyAlertPrice7,o)||(i.strategyAlertPrice7=o),x(o)}),_(),m(87,"span",14),w(88),_()()(),m(89,"div",15),w(90,"|"),_()(),m(91,"div",10)(92,"div",10)(93,"div",11),w(94," Strategy 8: "),m(95,"span",12),w(96),_()(),m(97,"div",11)(98,"input",13),U("ngModelChange",function(o){return C(r),z(i.strategyAlertPrice8,o)||(i.strategyAlertPrice8=o),x(o)}),_(),m(99,"span",14),w(100),_()()()()(),Ze(101,"hr"),m(102,"div",16)(103,"div",17)(104,"div",18)(105,"div"),te(106,eee,7,3,"div",19),m(107,"div",20)(108,"div",21)(109,"div",22),te(110,tee,2,0,"button",23)(111,nee,2,0,"button",23)(112,iee,2,0,"button",23),m(113,"select",24),U("ngModelChange",function(o){return C(r),z(i.instruToTrade,o)||(i.instruToTrade=o),x(o)}),te(114,ree,2,2,"option",25),_(),m(115,"input",26),U("ngModelChange",function(o){return C(r),z(i.expiryDateToTrade,o)||(i.expiryDateToTrade=o),x(o)}),_(),m(116,"input",27),j("change",function(o){return C(r),x(i.saveAlgoSSParams(o))}),U("ngModelChange",function(o){return C(r),z(i.algoTimeToEnter,o)||(i.algoTimeToEnter=o),x(o)}),_(),m(117,"input",28),j("change",function(o){return C(r),x(i.saveAlgoSSParams(o))}),U("ngModelChange",function(o){return C(r),z(i.algoSSQty,o)||(i.algoSSQty=o),x(o)}),_(),m(118,"input",29),j("change",function(o){return C(r),x(i.saveAlgoSSParams(o))}),U("ngModelChange",function(o){return C(r),z(i.algoSSSLPerc,o)||(i.algoSSSLPerc=o),x(o)}),_(),m(119,"input",30),j("change",function(o){return C(r),x(i.saveAlgoSSParams(o))}),U("ngModelChange",function(o){return C(r),z(i.algoSSMaxSLTimes,o)||(i.algoSSMaxSLTimes=o),x(o)}),_(),m(120,"input",31),j("change",function(o){return C(r),x(i.saveAlgoSSParams(o))}),U("ngModelChange",function(o){return C(r),z(i.algoSSTriggerDifference,o)||(i.algoSSTriggerDifference=o),x(o)}),_(),m(121,"input",32),j("change",function(o){return C(r),x(i.saveAlgoSSParams(o))}),U("ngModelChange",function(o){return C(r),z(i.algoSSIncludeGUIDs,o)||(i.algoSSIncludeGUIDs=o),x(o)}),_(),m(122,"input",33),j("change",function(o){return C(r),x(i.saveAlgoSSParams(o))}),U("ngModelChange",function(o){return C(r),z(i.algoSSExcludeGUIDs,o)||(i.algoSSExcludeGUIDs=o),x(o)}),_(),m(123,"div",34)(124,"textarea",35),U("ngModelChange",function(o){return C(r),z(i.algoLog,o)||(i.algoLog=o),x(o)}),_()()()(),m(125,"div",34)(126,"table",36)(127,"thead",37)(128,"tr")(129,"th",38),w(130,"Strike"),_(),m(131,"th",38),w(132,"Qty"),_(),m(133,"th",38),w(134,"Price"),_(),m(135,"th",38),w(136,"LTP"),_(),m(137,"th",38),w(138,"Trigger"),_(),m(139,"th",38),w(140,"Exit"),_(),m(141,"th",38),w(142,"PnL"),_()()(),m(143,"tbody"),te(144,oee,15,12,"tr",39),_()(),m(145,"div",40),w(146," Total PnL: "),m(147,"div",41)(148,"span",42),w(149),_()()(),Ze(150,"hr"),_()(),m(151,"div",43)(152,"label",44),w(153,"Range"),_(),m(154,"input",45),U("ngModelChange",function(o){return C(r),z(i.payoff_range,o)||(i.payoff_range=o),x(o)}),_()(),m(155,"div",46)(156,"input",47),U("ngModelChange",function(o){return C(r),z(i.hide_closed,o)||(i.hide_closed=o),x(o)}),_(),m(157,"label",48),w(158,"Hide Closed"),_()(),m(159,"div",46)(160,"input",49),U("ngModelChange",function(o){return C(r),z(i.show_t0,o)||(i.show_t0=o),x(o)}),_(),m(161,"label",50),w(162,"Show T+0"),_()(),m(163,"div",46)(164,"input",51),U("ngModelChange",function(o){return C(r),z(i.hide_roll,o)||(i.hide_roll=o),x(o)}),_(),m(165,"label",52),w(166,"Hide Roll"),_()(),m(167,"div",46)(168,"input",53),U("ngModelChange",function(o){return C(r),z(i.hide_extra,o)||(i.hide_extra=o),x(o)}),_(),m(169,"label",54),w(170,"Hide Extra"),_()(),m(171,"div",46)(172,"input",55),U("ngModelChange",function(o){return C(r),z(i.multi_t0,o)||(i.multi_t0=o),x(o)}),_(),m(173,"label",56),w(174,"Multi T+0"),_(),m(175,"input",57),U("ngModelChange",function(o){return C(r),z(i.multiT0Input,o)||(i.multiT0Input=o),x(o)}),_()(),m(176,"div",46)(177,"input",58),U("ngModelChange",function(o){return C(r),z(i.simulate_strategy,o)||(i.simulate_strategy=o),x(o)}),_(),m(178,"label",59),w(179,"Simulate Strategy"),_()(),m(180,"div",46)(181,"input",60),U("ngModelChange",function(o){return C(r),z(i.showInlineOC,o)||(i.showInlineOC=o),x(o)}),_(),m(182,"label",61),w(183,"Option Chain"),_()(),m(184,"div",46)(185,"input",62),U("ngModelChange",function(o){return C(r),z(i.playAlertSound,o)||(i.playAlertSound=o),x(o)}),_(),m(186,"label",63),w(187,"Play Alert"),_()(),m(188,"div",46)(189,"input",64),U("ngModelChange",function(o){return C(r),z(i.showExtraOptions,o)||(i.showExtraOptions=o),x(o)}),_(),m(190,"label",65),w(191,"Extra Options"),_()(),m(192,"div",46)(193,"input",66),U("ngModelChange",function(o){return C(r),z(i.mfRealTime,o)||(i.mfRealTime=o),x(o)}),_(),m(194,"label",67),w(195,"MF realtime"),_()(),te(196,aee,41,13,"div",68)(197,dee,45,11,"div",69),m(198,"div",11),w(199),te(200,hee,2,0,"span",70)(201,pee,2,0,"span",71),_(),m(202,"select",72),U("ngModelChange",function(o){return C(r),z(i.instru,o)||(i.instru=o),x(o)}),te(203,fee,2,2,"option",25),_(),m(204,"input",73),U("ngModelChange",function(o){return C(r),z(i.expiryDate,o)||(i.expiryDate=o),x(o)}),_(),m(205,"input",73),U("ngModelChange",function(o){return C(r),z(i.expiryDate2,o)||(i.expiryDate2=o),x(o)}),_(),m(206,"button",74),j("click",function(){return C(r),x(i.doSingleStrategySubscription())}),w(207,"Refresh LTPs"),_(),m(208,"button",74),j("click",function(){return C(r),x(i.loadOptionChain())}),w(209,"Load OC"),_(),m(210,"button",74),j("click",function(){return C(r),x(i.addPlaceOrders())}),w(211,"+ Place Orders"),_(),m(212,"button",74),j("click",function(){return C(r),x(i.exitPositions())}),w(213,"Exit"),_(),m(214,"button",74),j("click",function(){return C(r),x(i.saveAsCF())}),w(215,"Save CF"),_(),m(216,"button",74),j("click",function(){return C(r),x(i.removeCF())}),w(217,"Remove CF"),_(),m(218,"div",75)(219,"input",76),U("ngModelChange",function(o){return C(r),z(i.use_cf,o)||(i.use_cf=o),x(o)}),j("change",function(o){return C(r),x(i.use_cf_change(o))}),_(),m(220,"label",77),w(221,"Use CF"),_()(),m(222,"div",75)(223,"input",78),U("ngModelChange",function(o){return C(r),z(i.saveMTM1,o)||(i.saveMTM1=o),x(o)}),_(),m(224,"label",79),w(225,"MTM 1"),_()(),m(226,"div")(227,"button",74),j("click",function(){return C(r),x(i.refreshPositions())}),w(228,"Refresh"),_(),m(229,"input",80),U("ngModelChange",function(o){return C(r),z(i.use_tag,o)||(i.use_tag=o),x(o)}),j("change",function(o){return C(r),x(i.use_tag_change(o))}),_(),m(230,"input",81),U("ngModelChange",function(o){return C(r),z(i.tagSearch,o)||(i.tagSearch=o),x(o)}),j("change",function(o){return C(r),x(i.tagSearch_change(o))}),_(),m(231,"input",82),U("ngModelChange",function(o){return C(r),z(i.use_include_guid,o)||(i.use_include_guid=o),x(o)}),j("change",function(o){return C(r),x(i.use_include_guid_change(o))}),_(),m(232,"input",83),U("ngModelChange",function(o){return C(r),z(i.includeGUIDs,o)||(i.includeGUIDs=o),x(o)}),_(),m(233,"input",84),U("ngModelChange",function(o){return C(r),z(i.use_exclude_guid,o)||(i.use_exclude_guid=o),x(o)}),j("change",function(o){return C(r),x(i.use_exclude_guid_change(o))}),_(),m(234,"input",85),U("ngModelChange",function(o){return C(r),z(i.excludeGUIDs,o)||(i.excludeGUIDs=o),x(o)}),_(),m(235,"div",86)(236,"input",87),U("ngModelChange",function(o){return C(r),z(i.use_curr_expiry,o)||(i.use_curr_expiry=o),x(o)}),_(),m(237,"label",88),w(238,"Curr Expiry"),_()()(),m(239,"div",34)(240,"div",75)(241,"input",89),U("ngModelChange",function(o){return C(r),z(i.auto_execute,o)||(i.auto_execute=o),x(o)}),_(),m(242,"label",90),w(243,"Auto execute"),_()(),te(244,gee,4,1,"div",91)(245,mee,4,1,"div",91)(246,_ee,3,1,"div",92)(247,Aee,3,1,"div",92)(248,yee,3,1,"div",92)(249,vee,3,1,"div",92)(250,wee,3,1,"div",92),_(),te(251,bee,14,8,"div",93)(252,Cee,1,1,"ng-template",null,0,vf),m(254,"table",36)(255,"tbody"),te(256,qee,33,39,"tr",39),_()(),te(257,Kee,17,1,"table",94),_()(),te(258,$ee,100,19,"div",95),m(259,"div",96)(260,"div")(261,"div")(262,"div",97)(263,"input",98),j("change",function(o){return C(r),x(i.expandSingleChartsChange(o))}),U("ngModelChange",function(o){return C(r),z(i.expand_single_charts,o)||(i.expand_single_charts=o),x(o)}),_(),m(264,"label",99),w(265,"Expand"),_()(),m(266,"select",100),U("ngModelChange",function(o){return C(r),z(i.spot_chart_instru,o)||(i.spot_chart_instru=o),x(o)}),j("change",function(o){return C(r),x(i.onSpotChartInstruChange(o))}),te(267,Zee,2,2,"option",25),_(),m(268,"select",100),U("ngModelChange",function(o){return C(r),z(i.spot_chart_instru2,o)||(i.spot_chart_instru2=o),x(o)}),j("change",function(o){return C(r),x(i.onSpotChartInstruChange2(o))}),te(269,Xee,2,2,"option",25),_()(),m(270,"div",101),Ze(271,"div",102)(272,"div",103),m(273,"div",104)(274,"div",105)(275,"div",106),w(276),_(),m(277,"div",107),w(278),_()(),m(279,"div",108)(280,"div",106),w(281),_(),m(282,"div",107),w(283),_()()()(),Ze(284,"div",109),_(),m(285,"div",110)(286,"div")(287,"div",46)(288,"input",111),U("ngModelChange",function(o){return C(r),z(i.add_strangle_chart,o)||(i.add_strangle_chart=o),x(o)}),_(),m(289,"label",112),w(290,"Add to strangle"),_()(),m(291,"input",113),U("ngModelChange",function(o){return C(r),z(i.strangle_chart_ce,o)||(i.strangle_chart_ce=o),x(o)}),_(),m(292,"input",114),U("ngModelChange",function(o){return C(r),z(i.strangle_chart_pe,o)||(i.strangle_chart_pe=o),x(o)}),_(),te(293,Qee,4,1,"div",115),m(294,"button",116),j("click",function(){return C(r),x(i.update_strangle_chart())}),w(295,"\u2713"),_(),te(296,Jee,2,2,"span",68),_(),m(297,"div",104),te(298,ete,3,1,"div",117),Ze(299,"div",118),_()()()(),te(300,_te,51,11,"div",68),_(),Ze(301,"hr"),m(302,"div")(303,"div")(304,"div",46)(305,"input",119),U("ngModelChange",function(o){return C(r),z(i.show_news,o)||(i.show_news=o),x(o)}),_(),m(306,"label",120),w(307,"Show News"),_()(),m(308,"a",121),w(309,"mc"),_(),m(310,"a",122),w(311,"bqprime"),_(),m(312,"a",123),w(313,"live-tv"),_()(),te(314,Ate,2,0,"div",68),_(),te(315,yte,24,0,"div",68),_()()(),te(316,wte,22,5,"div",124)(317,Cte,25,10,"div",124),m(318,"div",125)(319,"select",126),U("ngModelChange",function(o){return C(r),z(i.charts_instru,o)||(i.charts_instru=o),x(o)}),j("change",function(o){return C(r),x(i.onChartInstruChange(o))}),te(320,xte,2,2,"option",25),_(),m(321,"input",127),U("ngModelChange",function(o){return C(r),z(i.charts_expiry,o)||(i.charts_expiry=o),x(o)}),_(),m(322,"input",128),U("ngModelChange",function(o){return C(r),z(i.call_start_strike,o)||(i.call_start_strike=o),x(o)}),_(),m(323,"input",129),U("ngModelChange",function(o){return C(r),z(i.call_end_strike,o)||(i.call_end_strike=o),x(o)}),_(),m(324,"input",130),U("ngModelChange",function(o){return C(r),z(i.put_start_strike,o)||(i.put_start_strike=o),x(o)}),_(),m(325,"input",131),U("ngModelChange",function(o){return C(r),z(i.put_end_strike,o)||(i.put_end_strike=o),x(o)}),_(),m(326,"input",132),U("ngModelChange",function(o){return C(r),z(i.charts_multiple,o)||(i.charts_multiple=o),x(o)}),_(),m(327,"button",74),j("click",function(){return C(r),x(i.initCharts())}),w(328,"Init Charts"),_(),m(329,"button",74),j("click",function(){return C(r),x(i.onChartInstruChange(null))}),w(330,"Update Range"),_(),te(331,Dte,2,2,"span",68),m(332,"div",133),w(333,"CALLS"),_(),m(334,"div",134),te(335,Ete,3,1,"div",117)(336,Mte,6,7,"div",135),_(),Ze(337,"hr",136),m(338,"div",137),w(339,"PUTS"),_(),m(340,"div",134),te(341,Tte,6,7,"div",135),_()(),m(342,"div",138)(343,"div",5)(344,"h2",6)(345,"button",139),w(346," Alerts "),_()(),m(347,"div",140),te(348,kte,18,10,"div",141),m(349,"button",142),j("click",function(){return C(r),x(i.subscribeAlerts())}),w(350,"Refresh LTPs"),_()()()(),m(351,"div",143)(352,"div",5)(353,"h2",144)(354,"button",145),w(355," Multi OC "),_()(),m(356,"div",146)(357,"div")(358,"select",147),U("ngModelChange",function(o){return C(r),z(i.multiOC_instru,o)||(i.multiOC_instru=o),x(o)}),te(359,Pte,2,2,"option",25),_(),m(360,"input",148),U("ngModelChange",function(o){return C(r),z(i.multiOC_higherRange,o)||(i.multiOC_higherRange=o),x(o)}),_(),m(361,"input",149),U("ngModelChange",function(o){return C(r),z(i.multiOC_lowerRange,o)||(i.multiOC_lowerRange=o),x(o)}),_(),m(362,"input",73),U("ngModelChange",function(o){return C(r),z(i.expiryDate_multi1,o)||(i.expiryDate_multi1=o),x(o)}),_(),m(363,"input",73),U("ngModelChange",function(o){return C(r),z(i.expiryDate_multi2,o)||(i.expiryDate_multi2=o),x(o)}),_(),m(364,"input",73),U("ngModelChange",function(o){return C(r),z(i.expiryDate_multi3,o)||(i.expiryDate_multi3=o),x(o)}),_(),m(365,"input",73),U("ngModelChange",function(o){return C(r),z(i.expiryDate_multi4,o)||(i.expiryDate_multi4=o),x(o)}),_(),m(366,"input",73),U("ngModelChange",function(o){return C(r),z(i.expiryDate_multi5,o)||(i.expiryDate_multi5=o),x(o)}),_(),m(367,"button",74),j("click",function(){return C(r),x(i.loadMultiOptionChain())}),w(368,"Load OC"),_(),m(369,"button",150),j("click",function(){return C(r),x(i.multiOCRangeUpdate())}),w(370,"\u2713"),_()(),m(371,"table",151)(372,"thead",37)(373,"tr")(374,"th",152),w(375),_(),m(376,"th",153),w(377),_(),m(378,"th",154),w(379),_(),m(380,"th",155),w(381),_(),m(382,"th",156),w(383),_(),m(384,"th",157),w(385,"Strike"),_(),m(386,"th",158),w(387),_(),m(388,"th",159),w(389),_(),m(390,"th",160),w(391),_(),m(392,"th",161),w(393),_(),m(394,"th",162),w(395),_()()(),m(396,"tbody"),te(397,Ote,34,16,"tr",163),_()()()()(),m(398,"div",164)(399,"div",5)(400,"h2",6)(401,"button",165),w(402," Knife Orders "),_()(),m(403,"div",166)(404,"div")(405,"div")(406,"button",167),j("click",function(){return C(r),x(i.place_knife_orders())}),w(407,"Place All"),_(),m(408,"div",46)(409,"input",168),U("ngModelChange",function(o){return C(r),z(i.auto_adjust_knife,o)||(i.auto_adjust_knife=o),x(o)}),_(),m(410,"label",169),w(411,"Auto adjust"),_()()(),m(412,"table",170)(413,"thead",37)(414,"tr")(415,"th",171),w(416,"Instru"),_(),m(417,"th",171),w(418,"Expiry"),_(),m(419,"th",171),w(420,"Qty"),_(),m(421,"th",171),w(422,"Scrip"),_(),m(423,"th",171),w(424,"Status"),_(),m(425,"th",171),w(426,"Price"),_(),m(427,"th",171),w(428,"LTP"),_(),m(429,"th",171),w(430,"Low"),_()()(),m(431,"tbody"),te(432,Rte,17,8,"tr",163),_()()()()()(),m(433,"div",172)(434,"div",5)(435,"h2",6)(436,"button",173),w(437," Place Orders "),_()(),m(438,"div",174),te(439,Lte,16,4,"div",68),m(440,"div",175)(441,"div")(442,"button",176),j("click",function(){return C(r),x(i.place_all_orders())}),w(443,"Place All"),_(),m(444,"button",176),j("click",function(){return C(r),x(i.reset_place_orders())}),w(445,"Reset"),_(),m(446,"button",176),j("click",function(){return C(r),x(i.add_empty_place_order())}),w(447,"Add"),_(),m(448,"button",142),j("click",function(){return C(r),x(i.subscribeOrders())}),w(449,"Refresh LTPs"),_(),m(450,"button",142),j("click",function(){return C(r),x(i.refreshOILimits())}),w(451,"Refresh OI Limits"),_()(),m(452,"div"),w(453),_(),m(454,"table",170)(455,"thead",37)(456,"tr")(457,"th",171),w(458,"Instru"),_(),m(459,"th",171),w(460,"Expiry"),_(),m(461,"th",171),w(462,"Curr Qty"),_(),m(463,"th",171),w(464,"Curr Scrip"),_(),m(465,"th",171),w(466,"Curr LTP"),_(),m(467,"th",171),w(468,"New Scrip"),_(),m(469,"th",171),w(470,"New LTP"),_(),Ze(471,"th",171)(472,"th",171),_()(),m(473,"tbody"),te(474,jte,32,32,"tr",163),_()()()()()(),te(475,Hte,21,12,"div",177)(476,Yte,9,0,"div",178)}t&2&&(y(11),V("ngClass",Oe(154,Sn,i.strategyPnl1<0,i.strategyPnl1>0)),y(),J("",i.strategyPnl1," "),y(2),W("ngModel",i.strategyAlertPrice1),y(2),X(i.strategyAlertText1),y(7),V("ngClass",Oe(157,Sn,i.strategyPnl2<0,i.strategyPnl2>0)),y(),J("",i.strategyPnl2," "),y(2),W("ngModel",i.strategyAlertPrice2),y(2),X(i.strategyAlertText2),y(7),V("ngClass",Oe(160,Sn,i.strategyPnl3<0,i.strategyPnl3>0)),y(),J("",i.strategyPnl3," "),y(2),W("ngModel",i.strategyAlertPrice3),y(2),X(i.strategyAlertText3),y(7),V("ngClass",Oe(163,Sn,i.strategyPnl4<0,i.strategyPnl4>0)),y(),J("",i.strategyPnl4," "),y(2),W("ngModel",i.strategyAlertPrice4),y(2),X(i.strategyAlertText4),y(7),V("ngClass",Oe(166,Sn,i.strategyPnl5<0,i.strategyPnl5>0)),y(),J("",i.strategyPnl5," "),y(2),W("ngModel",i.strategyAlertPrice5),y(2),X(i.strategyAlertText5),y(7),V("ngClass",Oe(169,Sn,i.strategyPnl6<0,i.strategyPnl6>0)),y(),J("",i.strategyPnl6," "),y(2),W("ngModel",i.strategyAlertPrice6),y(2),X(i.strategyAlertText6),y(7),V("ngClass",Oe(172,Sn,i.strategyPnl7<0,i.strategyPnl7>0)),y(),J("",i.strategyPnl7," "),y(2),W("ngModel",i.strategyAlertPrice7),y(2),X(i.strategyAlertText7),y(7),V("ngClass",Oe(175,Sn,i.strategyPnl8<0,i.strategyPnl8>0)),y(),J("",i.strategyPnl8," "),y(2),W("ngModel",i.strategyAlertPrice8),y(2),X(i.strategyAlertText8),y(6),V("ngIf",!1),y(4),V("ngIf",!i.instruToTrade),y(),V("ngIf",!i.enableAlgo&&i.instruToTrade),y(),V("ngIf",i.enableAlgo&&i.instruToTrade),y(),W("ngModel",i.instruToTrade),y(),V("ngForOf",i.supportedInstru),y(),W("ngModel",i.expiryDateToTrade),y(),W("ngModel",i.algoTimeToEnter),y(),V("step",i.algoSS_qtyStep),W("ngModel",i.algoSSQty),y(),W("ngModel",i.algoSSSLPerc),y(),W("ngModel",i.algoSSMaxSLTimes),y(),W("ngModel",i.algoSSTriggerDifference),y(),W("ngModel",i.algoSSIncludeGUIDs),y(),W("ngModel",i.algoSSExcludeGUIDs),y(2),W("ngModel",i.algoLog),y(20),V("ngForOf",i.algoSS_positions_UI),y(4),V("ngClass",Oe(178,Sn,i.getAlgoSSTotalPnl()<0,i.getAlgoSSTotalPnl()>0)),y(),J(" ",i.getAlgoSSTotalPnl()," "),y(5),W("ngModel",i.payoff_range),y(2),W("ngModel",i.hide_closed),y(4),W("ngModel",i.show_t0),y(4),W("ngModel",i.hide_roll),y(4),W("ngModel",i.hide_extra),y(4),W("ngModel",i.multi_t0),y(3),W("ngModel",i.multiT0Input),y(2),W("ngModel",i.simulate_strategy),y(4),W("ngModel",i.showInlineOC),y(4),W("ngModel",i.playAlertSound),y(4),W("ngModel",i.showExtraOptions),y(4),W("ngModel",i.mfRealTime),y(3),V("ngIf",i.showExtraOptions),y(),V("ngIf",i.simulate_strategy===!0),y(2),J(" Loaded Strategy ",i.currLoadNum," "),y(),V("ngIf",i.matchPositions),y(),V("ngIf",!i.matchPositions),y(),W("ngModel",i.instru),y(),V("ngForOf",i.supportedInstru),y(),W("ngModel",i.expiryDate),y(),W("ngModel",i.expiryDate2),y(14),W("ngModel",i.use_cf),y(4),W("ngModel",i.saveMTM1),y(6),W("ngModel",i.use_tag),y(),W("ngModel",i.tagSearch),y(),W("ngModel",i.use_include_guid),y(),W("ngModel",i.includeGUIDs),y(),W("ngModel",i.use_exclude_guid),y(),W("ngModel",i.excludeGUIDs),y(2),W("ngModel",i.use_curr_expiry),y(5),W("ngModel",i.auto_execute),y(3),V("ngIf",i.auto_execute),y(),V("ngIf",i.auto_execute),y(),V("ngIf",i.auto_execute),y(),V("ngIf",i.auto_execute),y(),V("ngIf",i.auto_execute),y(),V("ngIf",i.auto_execute),y(),V("ngIf",i.auto_execute),y(),V("ngIf",i.auto_execute),y(5),V("ngForOf",i.curr_positions_trades),y(),V("ngIf",i.sl_trades.length>0),y(),V("ngIf",!i.hide_payoff),y(5),W("ngModel",i.expand_single_charts),y(3),W("ngModel",i.spot_chart_instru),y(),V("ngForOf",i.supportedInstru),y(),W("ngModel",i.spot_chart_instru2),y(),V("ngForOf",i.supportedInstru),y(7),X(i.chart_ce),y(2),X(i.isChartStrikeInCurrStrategy(i.chart_ce)),y(3),X(i.chart_pe),y(2),X(i.isChartStrikeInCurrStrategy(i.chart_pe)),y(5),W("ngModel",i.add_strangle_chart),y(3),W("ngModel",i.strangle_chart_ce),y(),W("ngModel",i.strangle_chart_pe),y(),V("ngIf",i.simulate_strategy),y(3),V("ngIf",i.simulate_strategy),y(2),V("ngIf",i.simulate_strategy),y(2),V("ngIf",i.showInlineOC),y(5),W("ngModel",i.show_news),y(9),V("ngIf",i.show_news),y(),V("ngIf",!1),y(),V("ngIf",i.simulate_strategy),y(),V("ngIf",!1),y(2),W("ngModel",i.charts_instru),y(),V("ngForOf",i.supportedInstru),y(),W("ngModel",i.charts_expiry),y(),W("ngModel",i.call_start_strike),y(),W("ngModel",i.call_end_strike),y(),W("ngModel",i.put_start_strike),y(),W("ngModel",i.put_end_strike),y(),W("ngModel",i.charts_multiple),y(5),V("ngIf",i.simulate_strategy),y(4),V("ngIf",i.simulate_strategy),y(),V("ngForOf",fl(181,oS).constructor(i.num_charts)),y(5),V("ngForOf",fl(182,oS).constructor(i.num_charts)),y(7),V("ngForOf",i.alerts),y(10),W("ngModel",i.multiOC_instru),y(),V("ngForOf",i.supportedInstru),y(),W("ngModel",i.multiOC_higherRange),y(),W("ngModel",i.multiOC_lowerRange),y(),W("ngModel",i.expiryDate_multi1),y(),W("ngModel",i.expiryDate_multi2),y(),W("ngModel",i.expiryDate_multi3),y(),W("ngModel",i.expiryDate_multi4),y(),W("ngModel",i.expiryDate_multi5),y(9),J("",i.expiryDate_multi1," CE"),y(2),J("",i.expiryDate_multi2," CE"),y(2),J("",i.expiryDate_multi3," CE"),y(2),J("",i.expiryDate_multi4," CE"),y(2),J("",i.expiryDate_multi5," CE"),y(4),J("",i.expiryDate_multi5," PE"),y(2),J("",i.expiryDate_multi4," PE"),y(2),J("",i.expiryDate_multi3," PE"),y(2),J("",i.expiryDate_multi2," PE"),y(2),J("",i.expiryDate_multi1," PE"),y(2),V("ngForOf",i.multi_oc_strikes1),y(12),W("ngModel",i.auto_adjust_knife),y(23),V("ngForOf",i.knife_orders),y(7),V("ngIf",!i.hide_clipboard),y(14),J(" ",i.getOILimits()," "),y(21),V("ngForOf",i.place_orders),y(),V("ngIf",!1),y(),V("ngIf",!1))},dependencies:[Xv,GN,YN,nc,Mg,Tg,Ys,Qo,Zo,tc,qd,ec,Xo,Ms,Eo,Es,Mo],styles:["[_nghost-%COMP%], input[_ngcontent-%COMP%], .input-group-text[_ngcontent-%COMP%], select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-size:12px!important}.use-hypo-future-class[_ngcontent-%COMP%]{margin-bottom:15px}.chart-flex-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:column}.posCheckbox[_ngcontent-%COMP%]{margin:8px auto!important;padding-left:8px}.simulateDate[_ngcontent-%COMP%]{width:20%;display:inline-block}.simulateTimeAdv[_ngcontent-%COMP%], .simulateTimeMins[_ngcontent-%COMP%]{width:10%;display:inline-block}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.ocInputs[_ngcontent-%COMP%]{display:inline-block;width:70px}.ocStrategyStrikeQty[_ngcontent-%COMP%]{font-size:.6rem;color:#000}.oc-strike[_ngcontent-%COMP%]{background-color:#e9ecef;width:60px}.sl-order-placed[_ngcontent-%COMP%]{background-color:#e1f4ff}.oc-strike-spot[_ngcontent-%COMP%]{width:60px;margin:0 auto}.oc-col-actions[_ngcontent-%COMP%]{width:19rem}.oc-col[_ngcontent-%COMP%]{width:5rem}.algo-pos-col[_ngcontent-%COMP%]{width:32px!important}.ocStrikeStrategyCE[_ngcontent-%COMP%]{background-color:#ccffc9!important}.ocStrikeStrategyPE[_ngcontent-%COMP%]{background-color:#ffdede!important}.ocStrikeSLL[_ngcontent-%COMP%]{background-color:#e1f4ff!important}.width16[_ngcontent-%COMP%]{width:16px!important}.width32[_ngcontent-%COMP%]{width:32px!important}.width48[_ngcontent-%COMP%]{width:48px!important}.width60[_ngcontent-%COMP%]{width:60px!important}.width80[_ngcontent-%COMP%]{width:80px!important}.width110[_ngcontent-%COMP%]{width:110px!important}.width160[_ngcontent-%COMP%]{width:160px!important}.height16[_ngcontent-%COMP%]{height:16px!important}.nostretch[_ngcontent-%COMP%]{white-space:nowrap;width:1%}.charts-heading[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:24px;font-weight:700;margin:4px}.opt_chart[_ngcontent-%COMP%]{position:relative}.opt_chart-0[_ngcontent-%COMP%]{margin-bottom:4px;position:relative}.chart-border-green[_ngcontent-%COMP%]{border:2px solid green}.chart-border-red[_ngcontent-%COMP%]{border:2px solid red}.opt_chart_wrapper_parent[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.opt_chart_wrapper[_ngcontent-%COMP%]{display:flex;margin-right:12px;margin-bottom:12px}.opt_chart_wrapper-0[_ngcontent-%COMP%]{display:flex;margin-right:4px;margin-bottom:4px;flex-direction:column}.expiryDate-inputs[_ngcontent-%COMP%], .charts-inputs[_ngcontent-%COMP%]{width:10%;display:inline-block}.chart-legend[_ngcontent-%COMP%]{position:absolute;left:4px;top:2px;z-index:2;font-size:18px;line-height:28px;font-weight:300;color:#000}.chart-legend-qty[_ngcontent-%COMP%]{position:absolute;left:92px;top:2px;z-index:2;font-size:18px;line-height:28px;font-weight:300;color:#000}.chart-legend-0[_ngcontent-%COMP%]{position:absolute;left:4px;top:2px;z-index:2;font-size:14px;line-height:16px;font-weight:300;color:#000}.chart-legend-values[_ngcontent-%COMP%]{position:absolute;left:4px;top:18px;z-index:2;font-size:14px;line-height:16px;font-weight:300;color:#000}.strategy_alert_field[_ngcontent-%COMP%]{width:100px;display:inline-block}.alert_field[_ngcontent-%COMP%]{width:10%;display:inline-block}.chart-positions[_ngcontent-%COMP%]{min-width:400px;display:flex;padding-right:8px}.chart-finchart[_ngcontent-%COMP%]{min-width:700px}#payOffExpiry[_ngcontent-%COMP%]{width:20%;display:inline-block}.positionExited[_ngcontent-%COMP%]{background-color:#949fb133}.positionSL[_ngcontent-%COMP%]{background-color:#e1f4ff}.positionReentry[_ngcontent-%COMP%]{background-color:#ffd5d5}.hidePositionRow[_ngcontent-%COMP%]{display:none}.strategy_instru[_ngcontent-%COMP%]{width:20%;display:inline-block}.positions-roll-sugg[_ngcontent-%COMP%]{text-align:left!important}.green[_ngcontent-%COMP%]{color:green}.red[_ngcontent-%COMP%]{color:tomato}.blue[_ngcontent-%COMP%]{color:#00f}"]})};var Ji=Ta(Lm());var P3=Ta(T3());function Gte(n){if(n.length===0)return 0;var e=n[0],t=0,i;if(typeof e!="number")return Number.NaN;for(var r=1;r<n.length;r++){if(typeof n[r]!="number")return Number.NaN;i=e+n[r],Math.abs(e)>=Math.abs(n[r])?t+=e-i+n[r]:t+=n[r]-i+e,e=i}return e+t}function lo(n){if(n.length===0)throw new Error("mean requires at least one data point");return Gte(n)/n.length}function Kte(n,e){var t=lo(n),i=0,r,s;if(e===2)for(s=0;s<n.length;s++)r=n[s]-t,i+=r*r;else for(s=0;s<n.length;s++)i+=Math.pow(n[s]-t,e);return i}function uS(n){if(n.length===0)throw new Error("variance requires at least one data point");return Kte(n,2)/n.length}function dS(n,e){if(n.length!==e.length)throw new Error("sampleCovariance requires samples with equal lengths");if(n.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var t=lo(n),i=lo(e),r=0,s=0;s<n.length;s++)r+=(n[s]-t)*(e[s]-i);var o=n.length-1;return r/o}var I3=function(){this.totalCount=0,this.data={}};I3.prototype.train=function(e,t){this.data[t]||(this.data[t]={});for(var i in e){var r=e[i];this.data[t][i]===void 0&&(this.data[t][i]={}),this.data[t][i][r]===void 0&&(this.data[t][i][r]=0),this.data[t][i][r]++}this.totalCount++};I3.prototype.score=function(e){var t={},i;for(var r in e){var s=e[r];for(i in this.data)t[i]={},this.data[i][r]?t[i][r+"_"+s]=(this.data[i][r][s]||0)/this.totalCount:t[i][r+"_"+s]=0}var o={};for(i in t){o[i]=0;for(var a in t[i])o[i]+=t[i][a]}return o};var k3=function(){this.weights=[],this.bias=0};k3.prototype.predict=function(e){if(e.length!==this.weights.length)return null;for(var t=0,i=0;i<this.weights.length;i++)t+=this.weights[i]*e[i];return t+=this.bias,t>0?1:0};k3.prototype.train=function(e,t){if(t!==0&&t!==1)return null;e.length!==this.weights.length&&(this.weights=e,this.bias=1);var i=this.predict(e);if(typeof i=="number"&&i!==t){for(var r=t-i,s=0;s<this.weights.length;s++)this.weights[s]+=r*e[s];this.bias+=r}return this};var WSe=607/128,USe=Math.log(Math.sqrt(2*Math.PI));var zSe=Math.sqrt(2*Math.PI);var $te=Math.sqrt(2*Math.PI);function Zte(n){for(var e=n,t=n,i=1;i<15;i++)t*=n*n/(2*i+1),e+=t;return Math.round((.5+e/$te*Math.exp(-n*n/2))*1e4)/1e4}var Xte=[];for(Wm=0;Wm<=3.09;Wm+=.01)Xte.push(Zte(Wm));var Wm;var Um=class n{constructor(e){this.http=e}delay=300;getRawCsvData(e){let t=`https://www.niftyindices.com/IndexConstituent/${e}`;return this.http.get(t,{responseType:"text"}).pipe(Ue(i=>{let r=i.split(`
`);return r[r.length-1].trim()===""&&r.pop(),{csvData:r.join(`
`),niftyIndicesSymbol:e}}),tr(i=>(console.error("Error fetching CSV:",i),Te({csvData:"",niftyIndicesSymbol:e}))))}loadIndicesData(){let e=[];for(let i=0;i<de.all_rows.length;i++){let r=de.all_rows[i];r.isIndex&&e.push(r)}let t=0;for(let i=0;i<e.length;i++){let r=e[i];t++,setTimeout(()=>{console.log("item",t,r);let s=!1;i===e.length-1&&(s=!0,console.log("last item",e.length-1)),this.fetchChartData(r,s)},t*this.delay)}}loadStocksData(e){let t=[];for(let s=0;s<de.all_rows.length;s++){let o=de.all_rows[s];o.index===e.index&&t.push(o)}let i=de.all_rows.find(s=>s.tradingsymbol==="NIFTY 50");t.push(i);let r=0;for(let s=0;s<t.length;s++){let o=t[s];(o.index===e.index||o.tradingsymbol==="NIFTY 50")&&(r++,setTimeout(()=>{console.log("item",r,o);let a=!1;s===t.length-1&&(a=!0,console.log("last item",t.length-1)),this.fetchChartData(o,a)},r*this.delay))}}loadStocksDataFromJson(e){let t=e.target.files[0],i=new FileReader;i.onload=r=>{try{let s=JSON.parse(r.target.result);de.candlesData=s,console.log("All stocks fetched",de.candlesData),this.calculations()}catch(s){console.error("Error parsing JSON:",s)}},i.readAsText(t)}fetchChartData(e,t){let i=this.findStockInMasters(e);if(i||(e.tradingsymbol=e.tradingsymbol+"-BE",i=this.findStockInMasters(e)),i){let l=de.stocksList.find(c=>c.tradingsymbol===e.tradingsymbol.replace("-BE",""));l&&(l.tradingsymbol=e.tradingsymbol)}else console.error('Stock not found after appending "-BE"');console.log("fetchChartData element:",i.tradingSymbol,i.token,i.exchange);let r=new Date,s=new Date;s.setDate(s.getDate()-de.chartDayToFetch);let o=""+s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2),a=""+r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+("0"+r.getDate()).slice(-2);if(i&&i.token){let c={responseType:"json",headers:new Fe({authorization:f.broker_auth})},u="https://kite.zerodha.com/oms/instruments/historical/"+i.token+"/day?user_id="+f.zerodhaUserId+"&oi=1&from="+o+"&to="+a;this.http.get(u,c).subscribe(d=>{if(f.requestStatusEvent$.next({status:"success",message:"FETCHED "+i.tradingSymbol}),console.log("fetchChartData data:",i.tradingSymbol,d),d.data.candles){let h=d.data.candles;h.length===0&&console.log("ZERO CANDLES FOR ",i.tradingSymbol);for(let p=0;p<h.length;p++){let g=h[p],A=de.candlesData[i.tradingSymbol];A||(A={});let v=this.getDateInFormat(g[0]);A[v]=[g[1],g[2],g[3],g[4],g[5],g[6]],de.candlesData[i.tradingSymbol]=A}}console.log("candles:",Object.keys(de.candlesData).length,de.candlesData),t===!0&&(console.log("All stocks fetched",de.candlesData),this.calculations())})}}findStockInMasters(e){let t=null;return f.mastersContract.forEach(i=>{if(e.tradingsymbol===i.tradingSymbol&&i.exchange==="NSE"){t=i;return}}),t}convertDateToFormat(e){let t=e;return new Date(t).toLocaleDateString("en-GB").replace(/\//g,"-")}getDateInFormat(e=null){e||(e=new Date);let t=new Date(e),i=t.getDate(),r=t.getMonth()+1,s=t.getFullYear(),o=t.getHours(),a=t.getMinutes(),l=t.getSeconds();return""+(i<=9?"0"+i:i)+"-"+(r<=9?"0"+r:r)+"-"+s+" "+(o<=9?"0"+o:o)+":"+(a<=9?"0"+a:a)+":"+(l<=9?"0"+l:l)}calculations(){for(let e=0;e<de.all_rows.length;e++){let t=de.all_rows[e],i=de.candlesData[t.tradingsymbol];if(i){let r=this.getReturns(t,i,0);t.ltp=r,t.return1=this.getReturns(t,i,1),t.return2=this.getReturns(t,i,5),t.return3=this.getReturns(t,i,21),t.return4=this.getReturns(t,i,63),t.return5=this.getReturns(t,i,126),t.return6=this.getReturns(t,i,252),t.dist4=this.getDist(t,i,252),t.isDist4Within1Month=this.checkIsDist4Within1Month(t),t.DMA200=this.getMovingAverage(i,200)}}this.sortByReturns("return1"),this.sortByReturns("return2"),this.sortByReturns("return3"),this.sortByReturns("return4"),this.sortByReturns("return6"),this.sortByReturns("dist4"),this.sortByReturns("return5")}checkIsDist4Within1Month(e){let t=de.candlesData[e.tradingsymbol],i=[],r=Object.keys(t).sort((a,l)=>this.parseDate(a).getTime()-this.parseDate(l).getTime());for(let a of r)i.push(t[a][3]);let s=Math.max(...i);return i.slice(-20).includes(s)}getMovingAverageFromDate(e,t,i){let r=0;for(let s=0;s<t;s++){let o=new Date(i);o.setDate(o.getDate()-s),o.setHours(0,0,0,0);let a=this.getDateInFormat(o),l=e[a];l&&(r+=l[3])}return r===0?0:Math.floor(r/t)}getMovingAverage(e,t){if(e.length<t)return 9999999999;let i=0;for(let r=0;r<t;r++)Object.values(e)[Object.keys(e).length-1-r]!==void 0&&(i+=Object.values(e)[Object.keys(e).length-1-r][3]);return Math.floor(i/t)}getHighInPeriod(e,t,i){let r=0;for(let s=t;s>=0;s--){let o=new Date(i);o.setDate(o.getDate()-s),o.setHours(0,0,0,0);let a=this.getDateInFormat(o),l=e[a];if(l){let c=l[1];c>r&&(r=c)}}return r}getDist(e,t,i){let r=0;for(let o=i;o>=0;o--){let a=this.getDataOfDate(e,t,o);if(a){let l=a[1];l>r&&(r=l)}}let s=(e.ltp-r)*100/r;return Math.round((s+1e-5)*100)/100}getReturnsApproach2(e,t,i){let r=null,s=null,o=0;for(;!r&&!(o>10);){let l=new Date(i);l.setDate(l.getDate()-t+o),l.setHours(0,0,0,0),s=this.getDateInFormat(l),r=e[s],o++}let a=null;if(r){let l=this.getDateInFormat(i);a=(e[l][3]-r[3])*100/r[3]}return a}getReturns(e,t,i,r=0){let s=Object.values(t)[Object.keys(t).length-1-r][3];if(i===0)return s;if(Object.keys(t).length-1-r<0||Object.keys(t).length-1-r-i<0)return 0;if(s){if(Object.values(t)[Object.keys(t).length-1-r-i]===void 0)return 0;let o=Object.values(t)[Object.keys(t).length-1-r-i][3],a=(s-o)*100/o;return a=Math.round((a+1e-5)*100)/100,a}}getRSReturns(e,t,i,r=0){if(i===0)return 0;let s=0,o=Object.values(t)[Object.keys(t).length-1-r];if(o&&(s=o[3]),s){let a=Object.values(t)[Object.keys(t).length-1-r-i];if(a){let l=a[3],c=s/l;return c=Math.round((c+1e-5)*100)/100,c}else return 0}else return 0}getDataOfDate(e,t,i){return Object.values(t)[Object.keys(t).length-1-i]}sortByReturns(e="return5",t=null){let i=[],r=[];for(let s=0;s<de.all_rows.length;s++){let o=de.all_rows[s];o.isIndex&&r.push(o)}r=this.sortStocks(r,e),console.log("sort",r);for(let s=0;s<r.length;s++){let o=r[s],a=de.all_rows.filter(l=>l.index===o.tradingsymbol&&!l.isIndex);for(let l=0;l<a.length;l++){let c=a[l];t?this.isMatchingFilterCriteria(c,t)?c.isMatchingFilter=!0:c.isMatchingFilter=!1:c.isMatchingFilter=!0}a=this.sortStocks(a,e),i.push(o);for(let l=0;l<a.length;l++){let c=a[l];c[`${e}_rank`]=l+1,i.push(c)}}de.all_rows=i,de.stocksEvent$.next("refresh")}isMatchingFilterCriteria(e,t){for(let i in t)if(t[i].selected&&(i==="DMA200"&&e.DMA200>e.ltp||i!=="DMA200"&&e[i]<=t[i].value))return!1;return!0}sortStocks(e,t){return e.sort((i,r)=>r.isMatchingFilter!==i.isMatchingFilter?r.isMatchingFilter?1:-1:r[t]-i[t])}loadWatchlistFromLS(){de.watchlist=JSON.parse(localStorage.getItem("stocks_watchlist")),de.watchlist===null&&(de.watchlist=[]),console.log("loading watchlist from LS:",de.watchlist)}backtest1(e="NIFTY 500",t=1,i=5){let s=new Date().getDate()+(6-new Date().getDay()-1)-7,o=new Date;o.setDate(s),s=o.getDate()+(6-o.getDay()-1)-7,o.setDate(s),o.setHours(0,0,0,0),console.log("Last to Last Week: ",o);let a=de.all_rows.find(h=>h.tradingsymbol===e),l=de.all_rows.filter(h=>h.index===a.tradingsymbol&&!h.isIndex),c=new Date(o),u=0,d=[];for(let h=0;h<156;h++){let p=l.map(v=>Object.assign({},v));for(let v=0;v<p.length;v++){let b=p[v],E=de.candlesData[b.tradingsymbol];if(!E)continue;let O=null,T=null,k=0;for(;!O;){let Q=new Date(c);Q.setDate(Q.getDate()-k),T=this.getDateInFormat(Q),O=E[T],k++}let D=c.getDay(),M=c.getDate()-D+(D==0?-6:1),N=new Date(c);N.setDate(M);let L=null,B=null;for(k=0;!L;){let Q=new Date(N);Q.setDate(Q.getDate()+k),B=this.getDateInFormat(Q),L=E[B],k++}let H=L[0],re=(O[3]-H)*100/H;re=Math.round((re+1e-5)*100)/100,b.return2=re}p.sort((v,b)=>b.return2-v.return2),console.log("stocksInIndexCopy",h,c,p);let g=0;for(let v=t-1;v<i;v++){let b=p[v],E=de.candlesData[b.tradingsymbol],O=null,T=null,k=0;for(;!O;){let Q=new Date(c);Q.setDate(Q.getDate()-k),T=this.getDateInFormat(Q),O=E[T],k++}let D=new Date(c),M=7-D.getDay()+5,N=new Date(D.setDate(D.getDate()+M)),L=null,B=null;for(k=0;!L;){let Q=new Date(N);Q.setDate(Q.getDate()-k),B=this.getDateInFormat(Q),L=E[B],k++}let H=O[3],re=(L[3]-H)*100/H;re=Math.round((re+1e-5)*100)/100,console.log("Curr Week Returns:",b.tradingsymbol,re,T,B),g+=re}u+=g,d.push(g),console.log("cum_returns",c,g);let A=c.getDate()+(6-c.getDay()-1)-7;c.setDate(A)}console.log("all_returns",u),this.exportBacktest(d)}exportBacktest(e){let t="stocks_backtest.csv";console.log("exporting: ",t);let i="";for(let a=0;a<e.length;a++){let l=e[a];i+=l+`\r
`}let r=new Blob([i],{type:"application/x-msdownload"}),s=URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.target="_blank",document.body.appendChild(o),o.download=t,o.click(),o.parentNode.removeChild(o)}backtestMomentum1(e="NIFTY 500",t=20,i="3MReturns"){let r=1e6,s=r/t,o=[],a=de.all_rows.find(h=>h.tradingsymbol===e),l=de.all_rows.filter(h=>h.index===a.tradingsymbol&&!h.isIndex),c=0,u=[],d;for(let h=416;h>0;h--){let p=l.map(T=>Object.assign({},T)),g=[];for(let T=0;T<p.length;T++){let k=p[T],D=de.candlesData[k.tradingsymbol];if(!D)continue;let M=null,N=null,L=null,B=0;for(;!M&&!(B>10);)N=this.getLastToLastWeekDay(h,2),N.setDate(N.getDate()+B),N.setHours(0,0,0,0),L=this.getDateInFormat(N),M=D[L],B++;if(!M)continue;d=N;let H=this.getReturnsApproach2(D,30,N),Z=this.getReturnsApproach2(D,90,N),re=this.getReturnsApproach2(D,180,N),Q=this.getReturnsApproach2(D,365,N),G=this.getHighInPeriod(D,365,N),ae=0;G!==0&&(ae=(M[3]-G)*100/G);let ne=this.getMovingAverageFromDate(D,200,N);Z&&Z>0&&re&&re>0&&Q&&Q>0&&ae!==0&&Math.abs(ae)<25&&ne!==0&&M[3]>ne&&g.push({tradingsymbol:k.tradingsymbol,oneYearReturn:Q,sixMonthsReturn:re,threeMonthsReturn:Z,oneMonthReturn:H,dataAtCurrDate:M,currDate_obj:N})}let A=this.flattenToArray(g);console.log("flattenData",A.length,A);let v=this.flattenIndividual({tradingsymbol:"NIFTY MIDCAP 150",currDate_obj:d});if(console.log("benchmark",v.length,v),i==="3MReturns"?g=this.getTopStocksWith3MReturns(g,t,h):i==="6MReturns"?g=this.getTopStocksWith6MReturns(g,t,h):i==="1YReturns"?g=this.getTopStocksWith1YReturns(g,t,h):i==="1MReturns"?g=this.getTopStocksWith1MReturn(g,t,h):i==="Alpha"?(g=this.getTopStocksWithAlphas(A,v,t),console.log("alpha selectedStocks",g)):i==="JensenAlpha"?(g=this.getTopStocksWithJensenAlphas(A,v,t),console.log("jensenalpha selectedStocks",g)):i==="NormalizedMomentum"&&(g=this.getTopStocksWithNormalizedMomentum(A,t)),i!=="3MReturns"&&i!=="6MReturns"&&i!=="1YReturns"&&i!=="1MReturns"){let T=[];for(let k=0;k<g.length;k++){let D=g[k];T.push({tradingsymbol:D.stock,dataAtCurrDate:D.dataAtCurrDate})}g=T}console.log("selectedStocks",g,this.getLastToLastWeekDay(h,2));let b=0,E=0,O=null;for(let T=0;T<g.length;T++){let k=g[T].tradingsymbol,D=de.candlesData[k],M=g[T].dataAtCurrDate,N=null,L=null,B=null,H=0;for(;!N&&!(H>10);)L=this.getLastWeekDay(h,2),L.setDate(L.getDate()+H),L.setHours(0,0,0,0),B=this.getDateInFormat(L),O=B,N=D[B],H++;let Z=0,re=null,Q=null;if(N){re=M[3],Q=N[3],Z=(Q-re)*100/re,Z=Math.round((Z+1e-5)*100)/100;let G=0,ae=r/g.length;G=ae+Z/100*ae,E+=G,b+=Z,console.log("Curr Week Returns:",k,Z,G,ae,this.getLastToLastWeekDay(h,2),re,Q)}}E!==0&&(r=E),c+=b,u.push(r),console.log("cum_returns",this.getLastToLastWeekDay(h,2),r,b)}console.log("all_returns",c),this.exportBacktest(u)}backtestMomentum2(e="NIFTY 500",t=20,i="3MReturns"){let r=1e6,s=0,o={},a=r/t,l=[],c=de.all_rows.find(g=>g.tradingsymbol===e),u=de.all_rows.filter(g=>g.index===c.tradingsymbol&&!g.isIndex),d=0,h=[],p;for(let g=416;g>0;g--){let A=u.map(D=>Object.assign({},D)),v=[];for(let D=0;D<A.length;D++){let M=A[D],N=de.candlesData[M.tradingsymbol];if(!N)continue;let L=null,B=null,H=null,Z=0;for(;!L&&!(Z>10);)B=this.getLastToLastWeekDay(g,2),B.setDate(B.getDate()+Z),B.setHours(0,0,0,0),H=this.getDateInFormat(B),L=N[H],Z++;if(!L)continue;p=B;let re=this.getReturnsApproach2(N,30,B),Q=this.getReturnsApproach2(N,90,B),G=this.getReturnsApproach2(N,180,B),ae=this.getReturnsApproach2(N,365,B),ne=this.getHighInPeriod(N,365,B),De=0;ne!==0&&(De=(L[3]-ne)*100/ne);let ue=this.getMovingAverageFromDate(N,200,B);De!==0&&Math.abs(De)<=25&&ue!==0&&L[3]>=ue&&v.push({tradingsymbol:M.tradingsymbol,oneYearReturn:ae,sixMonthsReturn:G,threeMonthsReturn:Q,oneMonthReturn:re,dataAtCurrDate:L,currDate_obj:B})}let b=this.flattenToArray(v);console.log("flattenData",b.length,b);let E=this.flattenIndividual({tradingsymbol:"NIFTY MIDCAP 150",currDate_obj:p});if(console.log("benchmark",E.length,E),i==="3MReturns"?v=this.getTopStocksWith3MReturns(v,t,g):i==="6MReturns"?v=this.getTopStocksWith6MReturns(v,t,g,"filter"):i==="1YReturns"?v=this.getTopStocksWith1YReturns(v,t,g):i==="1MReturns"?v=this.getTopStocksWith1MReturn(v,t,g):i==="Alpha"?(v=this.getTopStocksWithAlphas(b,E,t),console.log("alpha selectedStocks",v)):i==="JensenAlpha"?(v=this.getTopStocksWithJensenAlphas(b,E,t),console.log("jensenalpha selectedStocks",v)):i==="NormalizedMomentum"?v=this.getTopStocksWithNormalizedMomentum(b,t):i==="WeightedMomentum"&&(v=this.getTopStocksWithWeightedReturns(v,t,g)),i!=="3MReturns"&&i!=="6MReturns"&&i!=="1YReturns"&&i!=="1MReturns"&&i!=="WeightedMomentum"){let D=[];for(let M=0;M<v.length;M++){let N=v[M];D.push({tradingsymbol:N.stock,dataAtCurrDate:N.dataAtCurrDate})}v=D}console.log("selectedStocks",v,this.getLastToLastWeekDay(g,2));let O=0,T=0,k=null;for(let D=0;D<v.length;D++){let M=v[D].tradingsymbol,N=de.candlesData[M],L=v[D].dataAtCurrDate,B=null,H=null,Z=null,re=0;for(;!B&&!(re>10);)H=this.getLastWeekDay(g,2),H.setDate(H.getDate()+re),H.setHours(0,0,0,0),Z=this.getDateInFormat(H),k=Z,B=N[Z],re++;let Q=0,G=null,ae=null;if(B){G=L[3],ae=B[3],Q=(ae-G)*100/G,Q=Math.round((Q+1e-5)*100)/100;let ne=0,De=r/t;ne=De+Q/100*De,T+=ne,s=0,v.length<t&&(s=(t-v.length)*De),T+=s,O+=Q,o.hasOwnProperty(M)||(o[M]={return:0,count:0}),o[M].return+=Q,o[M].count+=1,console.log("Curr Week Returns:",M,Q,ne,De,this.getLastToLastWeekDay(g,2),G,ae)}}T!==0&&(r=T),d+=O,h.push(r),console.log("cum_returns",this.getLastToLastWeekDay(g,2),r,O)}console.log("all_returns",d),console.log("stockDetails",o),this.exportBacktest(h)}backtestIndexAboveMA(e){let t=e.split(`
`),i=t[0].split(","),r=[],s=0,o=0,a=0,l=0;for(let c=1;c<t.length-1;c++){let u=t[c].split(",");if(u.length<i.length)continue;let d=this.convertDateToFormat(u[0]),h=parseFloat(u[4].replace(/"/g,"")),p=parseFloat(u[5].replace(/"/g,"")),g="HOLD",A=0;if(c===1&&h>p&&(g="BUY",s=1,o=h),c>1){s===1&&(A=h-o,a=l+A);let v=t[c-1].split(","),b=parseFloat(v[4].replace(/"/g,"")),E=parseFloat(v[5].replace(/"/g,""));h>p&&b<=E&&s===0?(g="BUY",s=1,o=h):h<p&&b>=E&&s===1&&(g="SELL",s=0,l=a)}r.push({Date:d,Close:h,MA:p,Signal:g,DailyPnL:A.toFixed(2),CumulativePnL:a.toFixed(2)})}this.exportCSV(r)}parseDate(e){let[t,i,r,s,o,a]=e.split(/[- :]/);return new Date(r,i-1,t,s,o,a)}flattenToArray(e){let t=[];for(let i=0;i<e.length;i++){let r=e[i],s=de.candlesData[r.tradingsymbol],o=new Date(r.currDate_obj),a=new Date(r.currDate_obj);a.setFullYear(o.getFullYear()-1);let l=[],c=Object.keys(s).sort((u,d)=>this.parseDate(u).getTime()-this.parseDate(d).getTime());for(let u of c){let d=this.parseDate(u);d>=a&&d<=o&&l.push(s[u][3])}t.push({stock:r.tradingsymbol,dailyPrices:l,dataAtCurrDate:r.dataAtCurrDate,currDate_obj:r.currDate_obj})}return t}flattenIndividual(e){let t=[],i=de.candlesData[e.tradingsymbol],r=new Date(e.currDate_obj),s=new Date(e.currDate_obj);s.setFullYear(r.getFullYear()-1);let o=[],a=Object.keys(i).sort((l,c)=>this.parseDate(l).getTime()-this.parseDate(c).getTime());for(let l of a){let c=this.parseDate(l);c>=s&&c<=r&&o.push(i[l][3])}return o}calculateDailyReturns(e){return e.slice(1).map((t,i)=>(t-e[i])/e[i])}getTopStocksWithWeightedReturns(e,t,i){return e.sort((r,s)=>.4*s.oneYearReturn+.3*s.sixMonthsReturn+.3*s.threeMonthsReturn-(.4*r.oneYearReturn+.3*r.sixMonthsReturn+.3*r.threeMonthsReturn)),console.log("selectedStocks sorted by weighted returns",e,this.getLastToLastWeekDay(i,2)),e.slice(0,t)}getTopStocksWith3MReturns(e,t,i){return e.sort((r,s)=>s.threeMonthsReturn-r.threeMonthsReturn),console.log("selectedStocks sorted",e,this.getLastToLastWeekDay(i,2)),e.slice(0,t)}getTopStocksWith6MReturns(e,t,i,r="sort"){return e.sort((s,o)=>o.sixMonthsReturn-s.sixMonthsReturn),console.log("selectedStocks sorted",e,this.getLastToLastWeekDay(i,2)),r==="filter"?e.slice(0,t):e}getTopStocksWith1YReturns(e,t,i){return e.sort((r,s)=>s.oneYearReturn-r.oneYearReturn),console.log("selectedStocks sorted",e,this.getLastToLastWeekDay(i,2)),e.slice(0,t)}getTopStocksWith1MReturn(e,t,i){return e.sort((r,s)=>s.oneMonthReturn-r.oneMonthReturn),console.log("selectedStocks sorted",e,this.getLastToLastWeekDay(i,2)),e.slice(0,t)}getTopStocksWithAlphas(e,t,i){let r=this.calculateDailyReturns(t);return e.map(o=>{let a=this.calculateDailyReturns(o.dailyPrices),l=Math.min(a.length,r.length);if(l<50)return console.warn(`Skipping stock ${o.stock} due to insufficient data length.`),null;let c=a.slice(0,l),u=r.slice(0,l),d=lo(c),h=lo(u),p=dS(c,u),g=uS(u);if(g===0)return console.warn(`Benchmark variance is zero, cannot calculate alpha for stock ${o.stock}.`),null;let A=p/g,v=d-A*h;return Ie(ie({},o),{dailyReturns:c,alpha:v})}).filter(o=>o!==null).sort((o,a)=>a.alpha-o.alpha).slice(0,i)}getTopStocksWithJensenAlphas(e,t,i){let r=this.calculateDailyReturns(t);return e.map(o=>{let a=this.calculateDailyReturns(o.dailyPrices),l=Math.min(a.length,r.length);if(l<50)return console.warn(`Skipping stock ${o.stock} due to insufficient data length.`),null;let c=a.slice(0,l),u=r.slice(0,l),d=lo(c),h=lo(u),p=dS(c,u),g=uS(u);if(g===0)return console.warn(`Benchmark variance is zero, cannot calculate Jensen's alpha for stock ${o.stock}.`),null;let A=p/g,v=d-(de.riskFreeRate+A*(h-de.riskFreeRate));return Ie(ie({},o),{dailyReturns:c,jensenAlpha:v})}).filter(o=>o!==null).sort((o,a)=>a.jensenAlpha-o.jensenAlpha).slice(0,i)}getTopStocksWithNormalizedMomentum(e,t){e.forEach(u=>{u.Daily_Returns=this.calculateDailyReturns(u.dailyPrices)}),e.forEach(u=>{let d=u.dailyPrices.length,h=u.dailyPrices[d-1],p=d>252?u.dailyPrices[d-252-1]:u.dailyPrices[0],g=d>126?u.dailyPrices[d-126-1]:u.dailyPrices[0],A=d>63?u.dailyPrices[d-63-1]:u.dailyPrices[0];u["12M_Return"]=h/p-1,u["6M_Return"]=h/g-1,u["3M_Return"]=h/A-1}),e.forEach(u=>{let d=this.standardDeviation(u.Daily_Returns);u.Volatility=d*Math.sqrt(252)}),e.forEach(u=>{u.MR12=u["12M_Return"]/u.Volatility,u.MR6=u["6M_Return"]/u.Volatility,u.MR3=u["3M_Return"]/u.Volatility});let i=this.mean(e.map(u=>u.MR12)),r=this.standardDeviation(e.map(u=>u.MR12)),s=this.mean(e.map(u=>u.MR6)),o=this.standardDeviation(e.map(u=>u.MR6)),a=this.mean(e.map(u=>u.MR3)),l=this.standardDeviation(e.map(u=>u.MR3));e.forEach(u=>{u.Z_MR12=(u.MR12-i)/r,u.Z_MR6=(u.MR6-s)/o,u.Z_MR3=(u.MR3-a)/l}),e.forEach(u=>{u.Weighted_Z=.2*u.Z_MR12+.3*u.Z_MR6+.5*u.Z_MR3}),e.forEach(u=>{u.Normalized_Momentum_Score=u.Weighted_Z>=0?1+u.Weighted_Z:Math.pow(1-u.Weighted_Z,-1)});let c=e.sort((u,d)=>d.Normalized_Momentum_Score-u.Normalized_Momentum_Score).slice(0,t);return console.log("Top Stocks:",c),c}mean(e){return e.reduce((t,i)=>t+i,0)/e.length}standardDeviation(e){let t=this.mean(e);return Math.sqrt(e.reduce((i,r)=>i+Math.pow(r-t,2),0)/e.length)}convertToCSV(e){if(e.length===0)return"";let t=Object.keys(e[0]).join(","),i=e.map(r=>Object.values(r).join(","));return[t,...i].join(`
`)}exportCSV(e){let t=this.convertToCSV(e),i=new Blob([t],{type:"text/csv"}),r=window.URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download="output.csv",document.body.appendChild(s),s.click(),document.body.removeChild(s)}findDifferenceInArrays(e,t){let i=[];for(let r=0;r<e.length;r++){let s=e[r],o=!1;for(let a=0;a<t.length;a++)if(s.tradingsymbol===t[a].tradingsymbol){o=!0;break}o||i.push(s)}return i}getLastWeekDay(e,t){let i=new Date,r=i.getDay(),s=new Date(i);return s.setDate(i.getDate()-(r+7-t)%7-7*(e+1)),s}getLastToLastWeekDay(e,t){let i=this.getLastWeekDay(e,t),r=new Date(i);return r.setDate(i.getDate()-7),r}static \u0275fac=function(t){return new(t||n)(oe(Tt))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var ene=n=>({"d-none":n}),Tn=(n,e)=>({green:n,red:e}),tne=(n,e,t,i,r)=>({"notmatchingfilter-row":n,indexRow:e,niftyRow:t,"watchlist-row":i,"d-none":r}),nne=n=>({stockHolding:n}),Vc=(n,e,t)=>({green:n,red:e,"bold-higher":t});function ine(n,e){n&1&&(m(0,"div",42),w(1,"1M"),_())}function rne(n,e){n&1&&(m(0,"div",43),w(1,"M150M50"),_())}function sne(n,e){n&1&&(m(0,"div",43),w(1,"N500M50"),_())}function one(n,e){n&1&&(m(0,"div",43),w(1,"A50"),_())}function ane(n,e){n&1&&(m(0,"div",44),w(1,"N50"),_())}function lne(n,e){n&1&&(m(0,"div",44),w(1,"N100"),_())}function cne(n,e){n&1&&(m(0,"div",44),w(1,"M150"),_())}function une(n,e){if(n&1){let t=ge();m(0,"input",48),U("ngModelChange",function(r){C(t);let s=R().$implicit,o=R();return z(o.filterCriteria[s].value,r)||(o.filterCriteria[s].value=r),x(r)}),j("input",function(){C(t);let r=R(2);return x(r.filterData())}),_()}if(n&2){let t=R().$implicit,i=R();W("ngModel",i.filterCriteria[t].value),V("disabled",!i.filterCriteria[t].selected)}}function dne(n,e){if(n&1){let t=ge();m(0,"div",45)(1,"label")(2,"input",46),U("ngModelChange",function(r){let s=C(t).$implicit,o=R();return z(o.filterCriteria[s].selected,r)||(o.filterCriteria[s].selected=r),x(r)}),j("change",function(){C(t);let r=R();return x(r.filterData())}),_(),w(3),_(),te(4,une,1,2,"input",47),_()}if(n&2){let t=e.$implicit,i=R();y(2),W("ngModel",i.filterCriteria[t].selected),y(),J(" ",i.filterKeysLabels[t]," "),y(),V("ngIf",t!=="DMA200")}}function hne(n,e){if(n&1){let t=ge();m(0,"span",64),j("click",function(){C(t);let r=R().$implicit,s=R();return x(s.expandCollapseIndex(r))}),w(1,"\u2261"),_()}}function pne(n,e){if(n&1){let t=ge();m(0,"span",65),j("click",function(){C(t);let r=R().$implicit,s=R();return x(s.loadStocksData(r))}),w(1,"\u21BB"),_()}}function fne(n,e){if(n&1){let t=ge();m(0,"span",66),j("click",function(){C(t);let r=R().$implicit,s=R();return x(s.plotRSCharts(r))}),w(1,"RS"),_()}}function gne(n,e){if(n&1){let t=ge();m(0,"span",67),j("click",function(){C(t);let r=R().$implicit,s=R();return x(s.addToWatchlist(r))}),w(1,"W"),_()}}function mne(n,e){if(n&1){let t=ge();m(0,"span",68),j("click",function(){C(t);let r=R().$implicit,s=R();return x(s.removeFromWatchlist(r))}),w(1,"X"),_()}}function _ne(n,e){n&1&&(m(0,"span",69),w(1,"\u2714"),_())}function Ane(n,e){if(n&1&&(m(0,"span",8),w(1),_()),n&2){let t=R().$implicit;y(),J("(",t.return1_rank,")")}}function yne(n,e){if(n&1&&(m(0,"span",8),w(1),_()),n&2){let t=R().$implicit;y(),J("(",t.return2_rank,")")}}function vne(n,e){if(n&1&&(m(0,"span",8),w(1),_()),n&2){let t=R().$implicit;y(),J("(",t.return3_rank,")")}}function wne(n,e){if(n&1&&(m(0,"span",8),w(1),_()),n&2){let t=R().$implicit;y(),J("(",t.return4_rank,")")}}function bne(n,e){if(n&1&&(m(0,"span",8),w(1),_()),n&2){let t=R().$implicit;y(),J("(",t.return5_rank,")")}}function Sne(n,e){if(n&1&&(m(0,"span",8),w(1),_()),n&2){let t=R().$implicit;y(),J("(",t.return6_rank,")")}}function Cne(n,e){if(n&1&&(m(0,"span",8),w(1),_()),n&2){let t=R().$implicit;y(),J("(",t.dist4_rank,")")}}function xne(n,e){n&1&&(m(0,"div",42),w(1,"1M"),_())}function Dne(n,e){n&1&&(m(0,"div",43),w(1,"M150M50"),_())}function Ene(n,e){n&1&&(m(0,"div",43),w(1,"N500M50"),_())}function Mne(n,e){n&1&&(m(0,"div",43),w(1,"A50"),_())}function Tne(n,e){n&1&&(m(0,"div",44),w(1,"N50"),_())}function Ine(n,e){n&1&&(m(0,"div",44),w(1,"N100"),_())}function kne(n,e){n&1&&(m(0,"div",44),w(1,"M150"),_())}function Pne(n,e){if(n&1&&(m(0,"div"),te(1,Dne,2,0,"div",11)(2,Ene,2,0,"div",11)(3,Mne,2,0,"div",11)(4,Tne,2,0,"div",12)(5,Ine,2,0,"div",12)(6,kne,2,0,"div",12),_()),n&2){let t=R().$implicit,i=R();y(),V("ngIf",i.isStockInIndex("NIFTYM150MOMNTM50",t.tradingsymbol)&&t.index!=="NIFTYM150MOMNTM50"),y(),V("ngIf",i.isStockInIndex("MOMENTUM50",t.tradingsymbol)&&t.index!=="MOMENTUM50"),y(),V("ngIf",i.isStockInIndex("NIFTY ALPHA 50",t.tradingsymbol)&&t.index!=="NIFTY ALPHA 50"),y(),V("ngIf",i.isStockInIndex("NIFTY 50",t.tradingsymbol)),y(),V("ngIf",i.isStockInIndex("NIFTY 100",t.tradingsymbol)),y(),V("ngIf",i.isStockInIndex("NIFTY MIDCAP 150",t.tradingsymbol))}}function Nne(n,e){if(n&1){let t=ge();_f(0),m(1,"tr",49)(2,"td",50),te(3,hne,2,0,"span",51)(4,pne,2,0,"span",52)(5,fne,2,0,"span",53)(6,gne,2,0,"span",54)(7,mne,2,0,"span",55),m(8,"span",56),j("click",function(){let r=C(t).$implicit,s=R();return x(s.openPopup(r))}),w(9,"\u2197"),_()(),m(10,"td",49)(11,"a",57),w(12),_(),te(13,_ne,2,0,"span",58),_(),m(14,"td"),w(15),_(),m(16,"td",49),w(17),_(),m(18,"td",49)(19,"div",59)(20,"span",60),w(21),_(),te(22,Ane,2,1,"span",61),_()(),m(23,"td",49)(24,"div",59)(25,"span",60),w(26),_(),te(27,yne,2,1,"span",61),_()(),m(28,"td",49)(29,"div",59)(30,"span",60),w(31),_(),te(32,vne,2,1,"span",61),_()(),m(33,"td",49)(34,"div",59)(35,"span",60),w(36),_(),te(37,wne,2,1,"span",61),_()(),m(38,"td",49)(39,"div",59)(40,"span",60),w(41),_(),te(42,bne,2,1,"span",61),_()(),m(43,"td",49)(44,"div",59)(45,"span",60),w(46),_(),te(47,Sne,2,1,"span",61),_()(),m(48,"td",49)(49,"div",59)(50,"span",60),w(51),_(),te(52,Cne,2,1,"span",61)(53,xne,2,0,"div",9),_()(),m(54,"td",62),te(55,Pne,7,6,"div",63),_()(),Af()}if(n&2){let t=e.$implicit,i=R();y(),V("ngClass",aE(36,tne,!t.isMatchingFilter,t.isIndex,t.isIndex&&t.tradingsymbol==="NIFTY 50",t.watchlist,i.isRowHidden(t)||i.isRowHiddenFilter(t))),y(2),V("ngIf",t.isIndex===!0),y(),V("ngIf",t.isIndex===!0),y(),V("ngIf",t.isIndex===!0),y(),V("ngIf",t.isIndex===!1&&t.watchlist===!1),y(),V("ngIf",t.watchlist),y(3),V("ngClass",$t(42,nne,i.isStockHolding(t))),y(),V("href","https://www.google.com/search?q="+t.tradingsymbol+"&tbm=nws",oD),y(),J(" ",t.tradingsymbol," "),y(),V("ngIf",i.isStockInHoldings(t)),y(2),X(t.ltp),y(),V("ngClass",Oe(44,Tn,t.ltp>t.DMA200,t.ltp<t.DMA200)),y(),X(t.DMA200),y(),V("ngClass",nn(47,Vc,t.return1>0,t.return1<0,t.return1>2||t.return1<-2)),y(3),X(t.return1),y(),V("ngIf",!t.isIndex),y(),V("ngClass",nn(51,Vc,t.return2>0,t.return2<0,t.return2>5||t.return2<-5)),y(3),X(t.return2),y(),V("ngIf",!t.isIndex),y(),V("ngClass",nn(55,Vc,t.return3>0,t.return3<0,t.return3>7||t.return3<-7)),y(3),X(t.return3),y(),V("ngIf",!t.isIndex),y(),V("ngClass",nn(59,Vc,t.return4>0,t.return4<0,t.return4>10||t.return4<-10)),y(3),X(t.return4),y(),V("ngIf",!t.isIndex),y(),V("ngClass",nn(63,Vc,t.return5>0,t.return5<0,t.return5>10||t.return5<-10)),y(3),X(t.return5),y(),V("ngIf",!t.isIndex),y(),V("ngClass",nn(67,Vc,t.return6>0,t.return6<0,t.return6>10||t.return6<-10)),y(3),X(t.return6),y(),V("ngIf",!t.isIndex),y(),V("ngClass",Oe(71,Tn,t.dist4>=-15,t.dist4<-15)),y(3),X(t.dist4),y(),V("ngIf",!t.isIndex),y(),V("ngIf",!t.isIndex&&t.isDist4Within1Month),y(2),V("ngIf",!t.isIndex)}}var zm=class n{constructor(e,t,i,r,s,o){this.appService=e;this.zerodhaService=t;this.mapService=i;this.websocketService=r;this.angelWS=s;this.stocksService=o;de.stocksEvent$.subscribe(a=>{console.log("stocksEvent subcribe: ",a),a==="refresh"&&(this.all_rows=de.all_rows)})}handleKeyDown(e){e.key==="Escape"&&this.closePopup()}all_rows=[];watchlist_rows=[];showPopup=!1;popupChart2=null;charts={};hideNonWatchlist=!1;showST=!1;stPeriod=10;stVol=2;showEMA1=!1;emaPeriod1=21;showEMA2=!1;emaPeriod2=55;showSMA=!0;smaPeriod=200;lastColumnSort="return5";enableFilter=!1;enableFilter3M=!1;filter3M=0;enableFilter6M=!1;filter6M=0;enableFilter1Y=!1;filter1Y=0;enableFilter52WHD=!1;filter52WHD=27;enableFilterDMA=!1;selectedFilters=[];filterKeys=["return4","return5","return6","dist4","DMA200"];filterKeysLabels={return4:"3M%",return5:"6M%",return6:"1Y%",dist4:"52WHD%",DMA200:"200DMA"};filterCriteria={return4:{selected:!1,value:0},return5:{selected:!1,value:0},return6:{selected:!1,value:0},dist4:{selected:!1,value:-27},DMA200:{selected:!1}};ngOnInit(){}fetchAllStocksInIndices(){if(!de.fetchFromWebsite){this.initialProcessing();return}let e=[];de.stocksList.forEach(t=>{let i=this.stocksService.getRawCsvData(t.niftyIndicesSymbol);e.push(i)}),$c(e).subscribe({next:t=>{t.forEach(i=>{if(console.log("Response Data:",i),i&&i.csvData){let r=P3.parse(i.csvData,{header:!0}).data;console.log("Parsed Data:",r);let s=r.map(a=>a.Symbol),o=de.stocksList.find(a=>a.niftyIndicesSymbol===i.niftyIndicesSymbol);o&&(o.stocks=[...s])}else console.error("No 'csvData' found in response:",i)}),f.requestStatusEvent$.next({status:"success",message:"Fetched all stocks in indices. Please verify."}),this.initialProcessing()},error:t=>{console.error("Error during API call:",t)}})}initialProcessing(){console.log("initialProcessing"),this.all_rows=[],this.watchlist_rows=[];for(let e=0;e<de.stocksList.length;e++){let t=de.stocksList[e],i=new mh;i.tradingsymbol=t.tradingsymbol,i.watchlist=!1,i.isIndex=!0,i.index=i.tradingsymbol,i.isVisible=!0,this.all_rows.push(i);for(let r=0;r<t.stocks.length;r++){let s=t.stocks[r],o=new mh;o.tradingsymbol=s,o.watchlist=!1,o.isIndex=!1,o.index=t.tradingsymbol,o.isVisible=!1,this.all_rows.push(o)}}de.all_rows=this.all_rows,this.loadWatchlistFromLS();for(let e=0;e<de.watchlist.length;e++){let t=de.watchlist[e],i=de.all_rows.filter(r=>r.tradingsymbol===t);for(let r=0;r<i.length;r++){let s=i[r];s.watchlist=!0,console.log("Entry from watchlist:",s)}}}ngAfterViewInit(){setTimeout(()=>{})}isStockInIndex(e,t){return de.stocksList.find(i=>i.tradingsymbol===e)?.stocks.includes(t)||!1}isStockInHoldings(e){return e.isIndex?!1:!!(f.stockPositions&&f.stockPositions.trades&&f.stockPositions.trades.filter(i=>i.scrip===e.tradingsymbol).length>0)}isRowHidden(e){return e.isIndex?!1:this.hideNonWatchlist?this.isStockInHoldings(e)?!1:!e.watchlist:!e.isVisible}isRowHiddenFilter(e){if(e.isIndex)return!1;let t=!1;return this.enableFilter&&(this.enableFilter3M&&e.return4<this.filter3M&&(t=!0),t===!1&&this.enableFilter6M&&e.return5<this.filter6M&&(t=!0),t===!1&&this.enableFilter1Y&&e.return6<this.filter1Y&&(t=!0),t===!1&&this.enableFilter52WHD&&e.dist4<-this.filter52WHD&&(t=!0),t===!1&&this.enableFilterDMA&&e.ltp<e.DMA200)?!0:t}openPopup(e){this.showPopup=!0,this.popupChart2=e,this.plotPopupChart(e)}getChartInfo(e){let t;return e===1&&(t=de.all_rows.find(r=>r.tradingsymbol==="NIFTY 50")),e===2&&(t=this.popupChart2),t?[t.return1,t.return2,t.return3,t.return4,t.return5,t.return6,t.dist4,t.return1_rank,t.return2_rank,t.return3_rank,t.return4_rank,t.return5_rank,t.return6_rank,t.dist4_rank,t.isDist4Within1Month]:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}plotPopupChart(e){let t=new Date().getTimezoneOffset()*6e4,i=[],r=[],s=[],o=[],a=[],l=[],c=[],u=[],d=[],h=[],p=[],g=[],A=[],v=new Ji.SuperTrend(this.stPeriod,this.stVol,"WEMA"),b=new Ji.SuperTrend(this.stPeriod,this.stVol,"WEMA"),E=new Ji.EMA(this.emaPeriod1),O=new Ji.EMA(this.emaPeriod2),T=new Ji.EMA(this.emaPeriod1),k=new Ji.EMA(this.emaPeriod2),D=new Ji.SMA(this.smaPeriod),M=new Ji.SMA(this.smaPeriod),N=de.candlesData[e.tradingsymbol],L=de.candlesData[e.index],B=de.candlesData["NIFTY 50"];for(let be=de.chartDaysToPlot;be>=0;be--){let Ye=null,lt=null,je=null,me=null,We=null,Re=null;if(N){Ye=this.stocksService.getDataOfDate(e,N,be),lt=this.stocksService.getDataOfDate(e,L,be),je=this.stocksService.getDataOfDate(e,B,be);let xe=Object.keys(N)[Object.keys(N).length-1-be],ut=null;if(xe)ut=xe.split(" ");else continue;let jn=ut[0].split("-"),zt=new Date(parseInt(jn[2]),parseInt(jn[1])-1,parseInt(jn[0]),0,0,0,0).getTime(),q=new Date(zt-t).toISOString(),S={time:Date.parse(q)/1e3,open:je[0],high:je[1],low:je[2],close:je[3]};i.push(S);let I=v.nextValue(je[1],je[2],je[3]),P,F="green";I&&(P=I.superTrend,I.direction===1&&(F="red"));let Y={time:Date.parse(q)/1e3,value:P,color:F};r.push(Y);let $=E.nextValue(je[3]),pe={time:Date.parse(q)/1e3,value:$,color:"brown"};s.push(pe);let _e=O.nextValue(je[3]),Ne={time:Date.parse(q)/1e3,value:_e,color:"blue"};o.push(Ne);let ve=D.nextValue(je[3]),Ge={time:Date.parse(q)/1e3,value:ve,color:"red"};d.push(Ge);let Me={time:Date.parse(q)/1e3,open:Ye[0],high:Ye[1],low:Ye[2],close:Ye[3]};a.push(Me);let Zt="#26a69a";parseInt(Ye[3])<parseInt(Ye[0])&&(Zt="#ef5350");let kt={time:Date.parse(q)/1e3,value:Ye[4],color:Zt};A.push(kt);let Pi=b.nextValue(Ye[1],Ye[2],Ye[3]),Rr,Bc="green";Pi&&(Rr=Pi.superTrend,Pi.direction===1&&(Bc="red"));let Ph={time:Date.parse(q)/1e3,value:Rr,color:Bc};l.push(Ph);let Nh=T.nextValue(Ye[3]),Ma={time:Date.parse(q)/1e3,value:Nh,color:"brown"};c.push(Ma);let qc=k.nextValue(Ye[3]),O3={time:Date.parse(q)/1e3,value:qc,color:"blue"};u.push(O3);let R3=M.nextValue(Ye[3]),F3={time:Date.parse(q)/1e3,value:R3,color:"red"};h.push(F3),me=this.stocksService.getRSReturns(e,N,55,be),We=this.stocksService.getRSReturns(e,L,55,be),Re=this.stocksService.getRSReturns(e,B,55,be);let hS=me/We-1,pS="green";hS<0&&(pS="red");let fS=me/Re-1,gS="green";fS<0&&(gS="red");let L3={time:Date.parse(q)/1e3,value:hS,color:pS};p.push(L3);let V3={time:Date.parse(q)/1e3,value:fS,color:gS};g.push(V3)}}console.log(e.tradingsymbol,i,a);let H="chart-popup-1",Z=this.charts[H];Z&&Z.remove();let re=H;console.log("chartId1",re);let Q=ht(re,{width:1200,height:320,timeScale:{timeVisible:!0},crosshair:{mode:Ut.Normal}});Q.addSeries(It).setData(i),this.showST&&Q.addSeries(ft,{lineWidth:1}).setData(r),this.showEMA1&&Q.addSeries(ft,{lineWidth:1}).setData(s),this.showEMA2&&Q.addSeries(ft,{lineWidth:1}).setData(o),this.showSMA&&Q.addSeries(ft,{lineWidth:1}).setData(d),Q.timeScale().fitContent(),this.charts[H]=Q;let ae="chart-popup-2",ne=this.charts[ae];ne&&ne.remove();let De=ae;console.log("chartId2",De);let ue=ht(De,{width:1200,height:320,timeScale:{timeVisible:!0},crosshair:{mode:Ut.Normal}}),le=ue.addSeries(It);le.setData(a),this.showST&&ue.addSeries(ft,{lineWidth:1}).setData(l),this.showEMA1&&ue.addSeries(ft,{lineWidth:1}).setData(c),this.showEMA2&&ue.addSeries(ft,{lineWidth:1}).setData(u),this.showSMA&&ue.addSeries(ft,{lineWidth:1}).setData(h);let ee=ue.addSeries(S3,{color:"#26a69a",priceFormat:{type:"volume"},priceScaleId:""});ee.priceScale().applyOptions({scaleMargins:{top:.7,bottom:0}}),ee.setData(A);let fe=[],ye=[];f.stockPositions&&f.stockPositions.trades&&(ye=f.stockPositions.trades.filter(be=>be.scrip===e.tradingsymbol)),ye.forEach(be=>{let Ye=new Date(be.entryDateTime).getTime(),lt=new Date(Ye-t).toISOString();if(fe.push({time:Date.parse(lt)/1e3,position:"belowBar",color:"green",shape:"arrowUp",text:`Buy @ ${be.entry}`}),be.exit!==0){let je=new Date(be.exitDateTime).getTime(),me=new Date(je-t).toISOString();fe.push({time:Date.parse(me)/1e3,position:"aboveBar",color:"red",shape:"arrowDown",text:`Sell @ ${be.exit}`})}}),console.log("markers",fe),Ea(le,fe),ue.timeScale().fitContent(),this.charts[ae]=ue;let ke="chart-popup-3",Qe=this.charts[ke];Qe&&Qe.remove();let Ee=ke;console.log("chartId3",Ee);let Ve=ht(Ee,{width:1200,height:150,timeScale:{timeVisible:!0},crosshair:{mode:Ut.Normal}});Ve.addSeries(ft,{lineWidth:2}).setData(p),Ve.addSeries(ft,{lineWidth:1}).setData(g),Ve.timeScale().fitContent(),this.charts[ke]=Ve}closePopup(){this.showPopup=!1}loadStocksData(e){this.stocksService.loadStocksData(e)}plotRSCharts(e){for(let t=0;t<de.all_rows.length;t++){let i=de.all_rows[t];i.index===e.index&&this.plotRSChart(i)}}plotRSChart(e){let t=new Date().getTimezoneOffset()*6e4,i=[],r=[];for(let d=756;d>=0;d--){let h=null,p=null,g=null,A=de.candlesData[e.tradingsymbol],v=de.candlesData[e.index],b=de.candlesData["NIFTY 50"];if(A){h=this.stocksService.getRSReturns(e,A,55,d),p=this.stocksService.getRSReturns(e,v,55,d),g=this.stocksService.getRSReturns(e,b,55,d);let E=h/p-1,O="green";E<0&&(O="red");let T=h/g-1,k="green";T<0&&(k="red");let D=Object.keys(A)[Object.keys(A).length-1-d],M=null;if(D)M=D.split(" ");else continue;let N=M[0].split("-"),L=new Date(parseInt(N[2]),parseInt(N[1])-1,parseInt(N[0]),0,0,0,0).getTime(),B=new Date(L-t).toISOString(),H={time:Date.parse(B)/1e3,value:E,color:O};i.push(H);let Z={time:Date.parse(B)/1e3,value:T,color:k};r.push(Z)}}console.log(e.tradingsymbol,i);let s="chart-"+e.tradingsymbol,o=this.charts[s];o&&o.remove();let a=s;console.log("chartId",a);let l=ht(a,{width:280,height:100,timeScale:{timeVisible:!0},crosshair:{mode:Ut.Normal}});l.addSeries(ft,{lineWidth:2}).setData(i),l.addSeries(ft,{lineWidth:1}).setData(r),l.timeScale().fitContent(),this.charts[s]=l}getChartLabel(e){return e==="chart-popup-1"?"NIFTY 50":e==="chart-popup-2"&&this.popupChart2?this.popupChart2.tradingsymbol:null}addToWatchlist(e){if(!de.watchlist.includes(e.tradingsymbol)){de.watchlist.push(e.tradingsymbol),this.saveWatchlistToLS();let t=de.all_rows.filter(i=>i.tradingsymbol===e.tradingsymbol);for(let i=0;i<t.length;i++){let r=t[i];r.watchlist=!0}}}countWatchlist(){let e=0,t=de.all_rows.filter(i=>i.index==="NIFTY 500"&&!i.isIndex);for(let i=0;i<t.length;i++)t[i].watchlist&&e++;return e}removeFromWatchlist(e){let t=de.watchlist.indexOf(e.tradingsymbol);t>-1&&de.watchlist.splice(t,1),this.saveWatchlistToLS();let i=de.all_rows.filter(r=>r.tradingsymbol===e.tradingsymbol);for(let r=0;r<i.length;r++){let s=i[r];s.watchlist=!1}}saveWatchlistToLS(){localStorage.setItem("stocks_watchlist",JSON.stringify(de.watchlist))}loadWatchlistFromLS(){de.watchlist=JSON.parse(localStorage.getItem("stocks_watchlist")),de.watchlist===null&&(de.watchlist=[])}exportWatchlist(){let e="watchlist.csv";console.log("exporting: ",e);let t="";de.watchlist.forEach(o=>{t+=o+`\r
`});let i=new Blob([t],{type:"application/x-msdownload"}),r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.target="_blank",document.body.appendChild(s),s.download=e,s.click(),s.parentNode.removeChild(s)}importStocksData(e){this.stocksService.loadStocksDataFromJson(e)}importWatchlist(e){let t=e.target.files[0],i=new FileReader;i.readAsText(t),i.onload=r=>{let a=String(i.result).split(/\r|\n|\r/).filter(function(l){return l!==""});de.watchlist=[];for(let l=0;l<a.length;l++){let u=a[l].split(",")[0];de.watchlist.push(u)}this.saveWatchlistToLS();for(let l=0;l<de.watchlist.length;l++){let c=de.watchlist[l],u=de.all_rows.filter(d=>d.tradingsymbol===c);for(let d=0;d<u.length;d++){let h=u[d];h.watchlist=!0,console.log("Entry from watchlist:",h)}}}}fetchAllIndices(){this.stocksService.loadIndicesData()}filterData(){this.sortTableColumn(this.lastColumnSort)}sortTableColumn(e){console.log("sortTableColumn this.selectedFilters",this.filterCriteria);let t=this.lastColumnSort;e&&(t=e,this.lastColumnSort=e),this.stocksService.sortByReturns(t,this.filterCriteria)}isStockHolding(e){}expandCollapseIndex(e){for(let t=0;t<this.all_rows.length;t++){let i=this.all_rows[t];!i.isIndex&&i.index===e.tradingsymbol&&(i.isVisible=!i.isVisible)}}backtest1(){this.stocksService.backtestMomentum2("NIFTY 500",20,"6MReturns")}backtestIndexMA(e){let t=e.target.files[0],i=new FileReader;i.onload=()=>{let r=i.result;this.stocksService.backtestIndexAboveMA(r)},i.readAsText(t)}static \u0275fac=function(t){return new(t||n)(Ae(En),Ae(fn),Ae(qe),Ae(Dr),Ae(Ii),Ae(Um))};static \u0275cmp=ji({type:n,selectors:[["app-stocks"]],hostBindings:function(t,i){t&1&&j("keydown",function(s){return i.handleKeyDown(s)},!1,aD)},decls:151,vars:102,consts:[["fileImportInputExpiry",""],["fileImportInputStocks",""],["backtestIndexMA_",""],[1,"custom-popup",3,"ngClass"],[1,"custom-popup-close",3,"click"],[1,"table","table-sm","table-bordered","mb-0",2,"table-layout","fixed"],[1,"chart-popup-table"],[1,"chart-popup-table",3,"ngClass"],[1,"rank"],["class","stockChip stockChipGreen","style","margin-left: 5px;",4,"ngIf"],[1,"mt-2","mb-2"],["class","stockChip stockChipRed",4,"ngIf"],["class","stockChip",4,"ngIf"],["id","chart-popup-1",1,"chart-stock"],[1,"chart-legend"],["id","chart-popup-2",1,"chart-stock"],["id","chart-popup-3",1,"chart-stock"],["type","button",1,"btn","btn-link",3,"click"],["type","file","name","File Upload Expiry","accept",".csv",2,"display","none",3,"change"],["type","file","name","File Upload Stocks","accept",".json",2,"display","none",3,"change"],["type","file","name","backtestIndexMA","accept",".csv",2,"display","none",3,"change"],[1,"form-check","form-check-inline","use-hypo-future-class","ms-4"],["type","checkbox","value","","id","show-st",1,"mt-2","form-check-input",3,"ngModelChange","ngModel"],["for","show-st",1,"form-check-label"],["type","text",1,"form-control","form-control-sm","d-inline-block","ms-2",2,"width","50px",3,"ngModelChange","ngModel"],[1,"form-check","form-check-inline","use-hypo-future-class","ms-2"],["type","checkbox","value","","id","hide-nonwatch",1,"form-check-input",3,"ngModelChange","ngModel"],["for","hide-nonwatch",1,"form-check-label"],["type","checkbox","value","","id","show-ema1",1,"mt-2","form-check-input",3,"ngModelChange","ngModel"],["for","show-ema1",1,"form-check-label"],["type","checkbox","value","","id","show-ema2",1,"mt-2","form-check-input",3,"ngModelChange","ngModel"],["for","show-ema2",1,"form-check-label"],["type","checkbox","value","","id","show-sma",1,"mt-2","form-check-input",3,"ngModelChange","ngModel"],["for","show-ema",1,"form-check-label"],[2,"display","flex","gap","20px","margin","10px 0 20px 0","align-items","center"],["style","display: flex; gap: 5px; align-items: center;",4,"ngFor","ngForOf"],[1,"table","table-sm","table-bordered","shadow","mb-0","text-center"],[1,"table-light"],["scope","col",1,"s-col"],["scope","col",1,"s-col","cursor-pointer",3,"click"],["scope","col","title","52 Week High Dist %",1,"s-col","cursor-pointer",3,"click"],[4,"ngFor","ngForOf"],[1,"stockChip","stockChipGreen",2,"margin-left","5px"],[1,"stockChip","stockChipRed"],[1,"stockChip"],[2,"display","flex","gap","5px","align-items","center"],["type","checkbox",3,"ngModelChange","change","ngModel"],["type","number",3,"ngModel","disabled","ngModelChange","input",4,"ngIf"],["type","number",3,"ngModelChange","input","ngModel","disabled"],[3,"ngClass"],[2,"width","40px"],["class","cursor-pointer me-3","title","Show/Hide Stocks in this Index",3,"click",4,"ngIf"],["class","cursor-pointer me-3","title","Fetch Data of Stocks in this Index",3,"click",4,"ngIf"],["class","cursor-pointer me-3","title","Plot RS Charts of Stocks in this Index",3,"click",4,"ngIf"],["class","cursor-pointer me-3","title","Add to Watchlist",3,"click",4,"ngIf"],["class","cursor-pointer me-3","title","Remove from Watchlist",3,"click",4,"ngIf"],["title","Open Popup",1,"cursor-pointer",3,"click"],["target","_blank","rel","noopener noreferrer",3,"href"],["style","margin-left: 5px;",4,"ngIf"],[2,"display","flex","align-items","center"],[1,"returns-value"],["class","rank",4,"ngIf"],[1,"text-start"],[4,"ngIf"],["title","Show/Hide Stocks in this Index",1,"cursor-pointer","me-3",3,"click"],["title","Fetch Data of Stocks in this Index",1,"cursor-pointer","me-3",3,"click"],["title","Plot RS Charts of Stocks in this Index",1,"cursor-pointer","me-3",3,"click"],["title","Add to Watchlist",1,"cursor-pointer","me-3",3,"click"],["title","Remove from Watchlist",1,"cursor-pointer","me-3",3,"click"],[2,"margin-left","5px"]],template:function(t,i){if(t&1){let r=ge();m(0,"div",3)(1,"span",4),j("click",function(){return C(r),x(i.closePopup())}),w(2,"\u2715"),_(),m(3,"div")(4,"table",5)(5,"tbody")(6,"tr")(7,"td",6),w(8,"NIFTY 50"),_(),m(9,"td",7),w(10),_(),m(11,"td",7),w(12),_(),m(13,"td",7),w(14),_(),m(15,"td",7),w(16),_(),m(17,"td",7),w(18),_(),m(19,"td",7),w(20),_(),m(21,"td",7),w(22),_()()()(),m(23,"table",5)(24,"tbody")(25,"tr")(26,"td",6),w(27,"Stock"),_(),m(28,"td",7),w(29),m(30,"span",8),w(31),_()(),m(32,"td",7),w(33),m(34,"span",8),w(35),_()(),m(36,"td",7),w(37),m(38,"span",8),w(39),_()(),m(40,"td",7),w(41),m(42,"span",8),w(43),_()(),m(44,"td",7),w(45),m(46,"span",8),w(47),_()(),m(48,"td",7),w(49),m(50,"span",8),w(51),_()(),m(52,"td",7),w(53),m(54,"span",8),w(55),_(),te(56,ine,2,0,"div",9),_()()()(),m(57,"div",10),te(58,rne,2,0,"div",11)(59,sne,2,0,"div",11)(60,one,2,0,"div",11)(61,ane,2,0,"div",12)(62,lne,2,0,"div",12)(63,cne,2,0,"div",12),_()(),m(64,"div",13)(65,"div",14),w(66),_()(),m(67,"div",15)(68,"div",14),w(69),_()(),Ze(70,"div",16),_(),m(71,"div")(72,"div")(73,"span"),w(74,"RS - Dark Line: Index, Light Line: Nifty 50"),_(),m(75,"button",17),j("click",function(){return C(r),x(i.fetchAllStocksInIndices())}),w(76,"Fetch Stocks List"),_(),m(77,"button",17),j("click",function(){return C(r),x(i.fetchAllIndices())}),w(78,"Fetch Indices Values"),_(),m(79,"button",17),j("click",function(){return C(r),x(i.exportWatchlist())}),w(80,"Export Watchlist"),_(),m(81,"button",17),j("click",function(){C(r);let o=$n(84);return x(o.click())}),w(82,"Import Watchlist"),_(),m(83,"input",18,0),j("change",function(o){return C(r),x(i.importWatchlist(o))}),_(),m(85,"button",17),j("click",function(){C(r);let o=$n(88);return x(o.click())}),w(86,"Import Stocks Data"),_(),m(87,"input",19,1),j("change",function(o){return C(r),x(i.importStocksData(o))}),_(),m(89,"button",17),j("click",function(){return C(r),x(i.backtest1())}),w(90,"Backtest1"),_(),m(91,"button",17),j("click",function(){C(r);let o=$n(94);return x(o.click())}),w(92,"backtestIndexMA"),_(),m(93,"input",20,2),j("change",function(o){return C(r),x(i.backtestIndexMA(o))}),_(),m(95,"div",21)(96,"input",22),U("ngModelChange",function(o){return C(r),z(i.showST,o)||(i.showST=o),x(o)}),_(),m(97,"label",23),w(98,"ST"),_(),m(99,"input",24),U("ngModelChange",function(o){return C(r),z(i.stPeriod,o)||(i.stPeriod=o),x(o)}),_(),m(100,"input",24),U("ngModelChange",function(o){return C(r),z(i.stVol,o)||(i.stVol=o),x(o)}),_()(),m(101,"div",25)(102,"input",26),U("ngModelChange",function(o){return C(r),z(i.hideNonWatchlist,o)||(i.hideNonWatchlist=o),x(o)}),_(),m(103,"label",27),w(104,"Hide Non-Watchlist"),_()(),m(105,"div",25)(106,"input",28),U("ngModelChange",function(o){return C(r),z(i.showEMA1,o)||(i.showEMA1=o),x(o)}),_(),m(107,"label",29),w(108,"EMA 1"),_(),m(109,"input",24),U("ngModelChange",function(o){return C(r),z(i.emaPeriod1,o)||(i.emaPeriod1=o),x(o)}),_()(),m(110,"div",25)(111,"input",30),U("ngModelChange",function(o){return C(r),z(i.showEMA2,o)||(i.showEMA2=o),x(o)}),_(),m(112,"label",31),w(113,"EMA 2"),_(),m(114,"input",24),U("ngModelChange",function(o){return C(r),z(i.emaPeriod2,o)||(i.emaPeriod2=o),x(o)}),_()(),m(115,"div",25)(116,"input",32),U("ngModelChange",function(o){return C(r),z(i.showSMA,o)||(i.showSMA=o),x(o)}),_(),m(117,"label",33),w(118,"SMA"),_(),m(119,"input",24),U("ngModelChange",function(o){return C(r),z(i.smaPeriod,o)||(i.smaPeriod=o),x(o)}),_()()(),m(120,"div",34),te(121,dne,5,3,"div",35),m(122,"span"),w(123),_()(),m(124,"table",36)(125,"thead",37)(126,"tr"),Ze(127,"th",38),m(128,"th",38),w(129,"Name"),_(),m(130,"th",38),w(131,"LTP"),_(),m(132,"th",38),w(133,"200DMA"),_(),m(134,"th",39),j("click",function(){return C(r),x(i.sortTableColumn("return1"))}),w(135,"1D%"),_(),m(136,"th",39),j("click",function(){return C(r),x(i.sortTableColumn("return2"))}),w(137,"5D%"),_(),m(138,"th",39),j("click",function(){return C(r),x(i.sortTableColumn("return3"))}),w(139,"1M%"),_(),m(140,"th",39),j("click",function(){return C(r),x(i.sortTableColumn("return4"))}),w(141,"3M%"),_(),m(142,"th",39),j("click",function(){return C(r),x(i.sortTableColumn("return5"))}),w(143,"6M%"),_(),m(144,"th",39),j("click",function(){return C(r),x(i.sortTableColumn("return6"))}),w(145,"1Y%"),_(),m(146,"th",40),j("click",function(){return C(r),x(i.sortTableColumn("dist4"))}),w(147,"52WHD%"),_(),Ze(148,"th",38),_()(),m(149,"tbody"),te(150,Nne,56,74,"ng-container",41),_()()()}t&2&&(V("ngClass",$t(58,ene,i.showPopup===!1)),y(9),V("ngClass",Oe(60,Tn,i.getChartInfo(1)[0]>0,i.getChartInfo(1)[0]<0)),y(),J("1D%: ",i.getChartInfo(1)[0],""),y(),V("ngClass",Oe(63,Tn,i.getChartInfo(1)[1]>0,i.getChartInfo(1)[1]<0)),y(),J("5D%: ",i.getChartInfo(1)[1],""),y(),V("ngClass",Oe(66,Tn,i.getChartInfo(1)[2]>0,i.getChartInfo(1)[2]<0)),y(),J("1M%: ",i.getChartInfo(1)[2],""),y(),V("ngClass",Oe(69,Tn,i.getChartInfo(1)[3]>0,i.getChartInfo(1)[3]<0)),y(),J("3M%: ",i.getChartInfo(1)[3],""),y(),V("ngClass",Oe(72,Tn,i.getChartInfo(1)[4]>0,i.getChartInfo(1)[4]<0)),y(),J("6M%: ",i.getChartInfo(1)[4],""),y(),V("ngClass",Oe(75,Tn,i.getChartInfo(1)[5]>0,i.getChartInfo(1)[5]<0)),y(),J("1Y%: ",i.getChartInfo(1)[5],""),y(),V("ngClass",Oe(78,Tn,i.getChartInfo(1)[6]>=-15,i.getChartInfo(1)[6]<-15)),y(),J("52WHD%: ",i.getChartInfo(1)[6],""),y(6),V("ngClass",Oe(81,Tn,i.getChartInfo(2)[0]>0,i.getChartInfo(2)[0]<0)),y(),J("1D%: ",i.getChartInfo(2)[0],""),y(2),J("(",i.getChartInfo(2)[7],")"),y(),V("ngClass",Oe(84,Tn,i.getChartInfo(2)[1]>0,i.getChartInfo(2)[1]<0)),y(),J("5D%: ",i.getChartInfo(2)[1],""),y(2),J("(",i.getChartInfo(2)[8],")"),y(),V("ngClass",Oe(87,Tn,i.getChartInfo(2)[2]>0,i.getChartInfo(2)[2]<0)),y(),J("1M%: ",i.getChartInfo(2)[2],""),y(2),J("(",i.getChartInfo(2)[9],")"),y(),V("ngClass",Oe(90,Tn,i.getChartInfo(2)[3]>0,i.getChartInfo(2)[3]<0)),y(),J("3M%: ",i.getChartInfo(2)[3],""),y(2),J("(",i.getChartInfo(2)[10],")"),y(),V("ngClass",Oe(93,Tn,i.getChartInfo(2)[4]>0,i.getChartInfo(2)[4]<0)),y(),J("6M%: ",i.getChartInfo(2)[4],""),y(2),J("(",i.getChartInfo(2)[11],")"),y(),V("ngClass",Oe(96,Tn,i.getChartInfo(2)[5]>0,i.getChartInfo(2)[5]<0)),y(),J("1Y%: ",i.getChartInfo(2)[5],""),y(2),J("(",i.getChartInfo(2)[12],")"),y(),V("ngClass",Oe(99,Tn,i.getChartInfo(2)[6]>=-27,i.getChartInfo(2)[6]<-27)),y(),J("52WHD%: ",i.getChartInfo(2)[6],""),y(2),J("(",i.getChartInfo(2)[13],")"),y(),V("ngIf",i.getChartInfo(2)[14]),y(2),V("ngIf",i.isStockInIndex("NIFTYM150MOMNTM50",i.popupChart2==null?null:i.popupChart2.tradingsymbol)),y(),V("ngIf",i.isStockInIndex("MOMENTUM50",i.popupChart2==null?null:i.popupChart2.tradingsymbol)),y(),V("ngIf",i.isStockInIndex("NIFTY ALPHA 50",i.popupChart2==null?null:i.popupChart2.tradingsymbol)),y(),V("ngIf",i.isStockInIndex("NIFTY 50",i.popupChart2==null?null:i.popupChart2.tradingsymbol)),y(),V("ngIf",i.isStockInIndex("NIFTY 100",i.popupChart2==null?null:i.popupChart2.tradingsymbol)),y(),V("ngIf",i.isStockInIndex("NIFTY MIDCAP 150",i.popupChart2==null?null:i.popupChart2.tradingsymbol)),y(3),X(i.getChartLabel("chart-popup-1")),y(3),X(i.getChartLabel("chart-popup-2")),y(27),W("ngModel",i.showST),y(3),W("ngModel",i.stPeriod),y(),W("ngModel",i.stVol),y(2),W("ngModel",i.hideNonWatchlist),y(4),W("ngModel",i.showEMA1),y(3),W("ngModel",i.emaPeriod1),y(2),W("ngModel",i.showEMA2),y(3),W("ngModel",i.emaPeriod2),y(2),W("ngModel",i.showSMA),y(3),W("ngModel",i.smaPeriod),y(2),V("ngForOf",i.filterKeys),y(2),J("Watchlist: ",i.countWatchlist(),""),y(27),V("ngForOf",i.all_rows))},dependencies:[nc,Ys,Qo,Zo,ec,Xo,Ms,Eo,Es,Mo],styles:["[_nghost-%COMP%], input[_ngcontent-%COMP%], .input-group-text[_ngcontent-%COMP%], select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-size:12px!important}.indexRow[_ngcontent-%COMP%]{background:#d8f5ff;font-weight:700}.niftyRow[_ngcontent-%COMP%]{background:#c3e4ef}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.custom-popup[_ngcontent-%COMP%]{position:fixed;top:0;width:1240px;height:100%;right:0;background:#fff;padding:20px;box-shadow:#0000003d 0 3px 8px;overflow:scroll;z-index:1021}.custom-popup-close[_ngcontent-%COMP%]{cursor:pointer;font-size:18px;position:absolute;right:5px;top:0}.green[_ngcontent-%COMP%]{color:green}.red[_ngcontent-%COMP%]{color:tomato}.chart-stock[_ngcontent-%COMP%]{position:relative}.chart-legend[_ngcontent-%COMP%]{position:absolute;left:4px;top:2px;z-index:2;font-size:18px;line-height:28px;font-weight:300;color:#000}.chart-popup-table[_ngcontent-%COMP%]{width:120px;white-space:nowrap}.watchlist-row[_ngcontent-%COMP%]{background:#e1ebfe!important}.notmatchingfilter-row[_ngcontent-%COMP%]{background:#d3d3d3}.stockChip[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:4px;display:inline-block;margin-right:4px;padding:0 4px}.stockChipRed[_ngcontent-%COMP%]{background:tomato;color:#fff}.stockChipGreen[_ngcontent-%COMP%]{background:#28a745;color:#fff}.rank[_ngcontent-%COMP%]{color:#000;font-size:10px;margin-left:5px}.returns-value[_ngcontent-%COMP%]{width:50px;text-align:right;display:inline-block}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1020;background:#fff}"]})};var Hm=class n{constructor(e){this.http=e}holdingsMap={"ADANIPORTS.NS":{holding:!1,average:null},"ASIANPAINT.NS":{holding:!0,average:3098.95}};backtestMap={};shortlistedStocks=[];append="";auth="";marketwatch="";from_date="";to_date="";expiry_date="";instruments=[];delay=300;data={};niftyReturn={};getZerodhaInstruments(e,t,i,r,s,o=!1){this.append=e,this.auth=t,this.from_date=i,this.to_date=r,this.expiry_date=s;let a={responseType:"text"};this.http.get("https://api.kite.trade/instruments",a).subscribe(c=>{console.log("zerodha instruments",c);let d=c.split(/\r|\n|\r/).filter(function(h){return h!==""});this.instruments=[];for(let h=1;h<d.length;h++){let p=d[h].split(","),g=p[2],A=p[3].replaceAll('"',""),v=p[5];o?(A==="NIFTY"&&v===this.expiry_date||A==="NIFTY 50")&&this.instruments.push(d[h]):((A==="NIFTY"||A==="BANKNIFTY"||A==="FINNIFTY"||A==="MIDCPNIFTY"||A==="SENSEX"||A==="BANKEX")&&v===this.expiry_date||A==="NIFTY 50"||A==="NIFTY BANK"||A==="NIFTY FIN SERVICE"||A==="NIFTY MIDCAP SELECT (MIDCPNIFTY)"||g==="SENSEX"||A==="BSE INDEX BANKEX")&&this.instruments.push(d[h])}console.log("Instruments to fetch: ",this.instruments.length);for(let h=0;h<this.instruments.length;h++)setTimeout(()=>{let p=this.instruments[h];console.log("item",h,p);let g=!1;h===this.instruments.length-1&&(g=!0,console.log("last item",this.instruments.length-1)),this.getItem(p,g)},h*this.delay)},c=>{console.log("zerodha instruments error",c)})}fetchCandles(e,t,i,r,s,o){this.append=e,this.auth=t,this.marketwatch=i,this.from_date=r,this.to_date=s,this.expiry_date=o;for(let a=0;a<this.instruments.length;a++)setTimeout(()=>{let l=this.instruments[a];console.log("item",a,l),this.getItem(l,!1)},a*this.delay)}getItem(e,t){let r={responseType:"json",headers:new Fe({authorization:this.auth})},s=e.split(","),o=s[0],a=s[1],l=s[2],c=s[3].replaceAll('"',""),u=s[4],d=s[5],h=s[6],p=s[9],g=c+this.append+h+p;c==="NIFTY 50"&&(g="NIFTY"),c==="NIFTY BANK"&&(g="BANKNIFTY"),c==="NIFTY FIN SERVICE"&&(g="NIFTY FIN SERVICE"),c==="NIFTY MIDCAP SELECT (MIDCPNIFTY)"&&(g="NIFTY MIDCAP SELECT (MIDCPNIFTY)"),l==="SENSEX"&&(g="SENSEX"),c==="BSE INDEX BANKEX"&&(g="BSE INDEX BANKEX");let A="https://kite.zerodha.com/oms/instruments/historical/"+o+"/minute?user_id="+f.zerodhaUserId+"&oi=1&from="+this.from_date+"&to="+this.to_date;this.http.get(A,r).subscribe(v=>{if(console.log("scrip data:",g,v),v.data.candles){let b=v.data.candles;b.length===0&&console.log("ZERO CANDLES FOR ",g);for(let E=0;E<b.length;E++){let O=b[E],T=this.data[g];T||(T={});let k=this.getDateInFormat(O[0]);T[k]=[O[1],O[2],O[3],O[4],O[5],O[6]],this.data[g]=T}}console.log("candles:",Object.keys(this.data).length,this.data),t===!0&&this.exportToCSV()})}getDataFromThirdParty(e,t,i,r,s,o,a,l){this.append=t,this.from_date=i,this.to_date=r,this.expiry_date=s,this.delay=15e3;let c=50;e==="CNXBAN"&&(c=100);let u=0;for(let d=l;d<=a;d+=c)setTimeout(()=>{console.log("item",d),this.getDataItemFromThirdParty(e,d+"CE",d,"",s,o),setTimeout(()=>{this.getDataItemFromThirdParty(e,d+"PE","",d,s,o)},5e3),setTimeout(()=>{this.getDataItemFromThirdParty(e,"","","",s,o)},1e4)},u*this.delay),u++}getDataItemFromThirdParty(e,t,i,r,s,o){let a={headers:new Fe({"Content-type":"application/json; charset=UTF-8"}),responseType:"json"},l="https://icici-historial.up.railway.app/ohlc",c=JSON.stringify({ce_strike:""+i,pe_strike:""+r,index_symbol:e,expiry:s,startdate:o}),u=e+this.append+t;t===""&&(u=e),this.http.post(l,c,a).subscribe(d=>{console.log("getDataFromThirdParty response",d);let h=d.combined;(!h||h.date.length===0)&&console.log("ZERO CANDLES FOR ",u);for(let p=0;p<h.date.length;p++){let g=h.date[p],A=h.open[p],v=h.high[p],b=h.low[p],E=h.close[p],O=this.data[u];O||(O={});let T=this.getDateInFormat(g);O[T]=[A,v,b,E,0,0],this.data[u]=O}console.log("candles:",Object.keys(this.data).length,this.data)},d=>{console.log("getDataFromThirdParty error",d)})}exportToCSV(){let e="Monthly";this.append==="WK"&&(e="Weekly");let t=this.expiry_date+" "+e+".csv";if(console.log("exporting: ",t),this.data){let i=0,r="";r+=`Ticker,Date/Time,Open,High,Low,Close,Volume,Open Interest\r
`;for(let l in this.data){for(let c in this.data[l]){let u="",d=this.data[l][c];u+=l+","+c+","+d[0]+","+d[1]+","+d[2]+","+d[3]+","+d[4]+","+d[5],r+=u+`\r
`,i++}if(i>2e6){let c=new Blob([r],{type:"application/x-msdownload"}),u=URL.createObjectURL(c),d=document.createElement("a");d.href=u,d.target="_blank",document.body.appendChild(d),d.download=t,d.click(),d.parentNode.removeChild(d),r="",i=0}}let s=new Blob([r],{type:"application/x-msdownload"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.target="_blank",document.body.appendChild(a),a.download=t,a.click(),a.parentNode.removeChild(a)}localStorage.setItem("export_"+this.expiry_date,JSON.stringify("true")),f.isHistoricalRunning=!1}getDateInFormat(e=null){e||(e=new Date);let t=new Date(e),i=t.getDate(),r=t.getMonth()+1,s=t.getFullYear(),o=t.getHours(),a=t.getMinutes(),l=t.getSeconds();return""+(i<=9?"0"+i:i)+"-"+(r<=9?"0"+r:r)+"-"+s+" "+(o<=9?"0"+o:o)+":"+(a<=9?"0"+a:a)+":"+(l<=9?"0"+l:l)}loadHoldings(){let e=0,t=[],i=0,r=0;for(let s in f.holdings)if(f.holdings.hasOwnProperty(s)){let o=null,a="",l="",c=null;if(f.holdings[s].avgp){o=(f.holdings[s].ltp-f.holdings[s].avgp)*100/f.holdings[s].avgp,o=Math.round((o+1e-5)*100)/100;let g=f.holdings[s].avgp,A=f.holdings[s].ltp;s==="NIFTY 50"&&(g=g/92.4,A=A/92.4),s==="NIFTY BANK"&&(g=g/100,A=A/100),c=g*f.holdings[s].qty,i+=c,r+=A*f.holdings[s].qty,c=Math.round(c)}let u=-999,d=null;for(let g=0;g<f.holdings[s].support.length;g++){let A=f.holdings[s].support[g],v=(f.holdings[s].ltp-A)*100/A;v<0&&v>u&&(u=v,d=A),console.log(s,f.holdings[s].ltp,A,v)}d!==null&&(u=Math.round((u+1e-5)*100)/100,a=u+" ("+d+")");let h=999,p=null;for(let g=0;g<f.holdings[s].resistance.length;g++){let A=f.holdings[s].resistance[g],v=(f.holdings[s].ltp-A)*100/A;v>0&&v<h&&(h=v,p=A)}p!==null&&(h=Math.round((h+1e-5)*100)/100,l=h+" ("+p+")"),t.push({scrip:s,volume:f.holdings[s].volume,ltp:f.holdings[s].ltp,oned:f.holdings[s].oned,onew:f.holdings[s].onew,onem:f.holdings[s].onem,threem:f.holdings[s].threem,fiftytwow:f.holdings[s].fiftytwow,avgp:o,support:a,resistance:l,buyvalue:c})}return e=(r-i)*100/i,e=Math.round((e+1e-5)*100)/100,i=Math.round(i),r=Math.round(r),{portfolio_return:e,holdings:t,total_inv:i,current_val:r}}fetchStocksData(){let e={responseType:"json"};this.http.get("https://www.nseindia.com/api/equity-stockIndices?index=NIFTY%2050",e).subscribe(i=>{console.log("now stocks data: ",i),i.data.forEach(s=>{if(f.holdings.hasOwnProperty(s.symbol)){f.holdings[s.symbol].ltp=Math.round((s.lastPrice+1e-5)*100)/100,f.holdings[s.symbol].volume=Math.round((s.totalTradedVolume+1e-5)*100)/100,f.holdings[s.symbol].oned=Math.round((s.pChange+1e-5)*100)/100,f.holdings[s.symbol].onem=Math.round((s.perChange30d+1e-5)*100)/100;let o=(s.lastPrice-s.yearHigh)*100/s.yearHigh;f.holdings[s.symbol].fiftytwow=Math.round((o+1e-5)*100)/100}})}),setTimeout(()=>{this.fetchIndicesData()},2e3),setTimeout(()=>{this.fetchHistoricalData()},4e3)}fetchIndicesData(){let e={responseType:"json"};this.http.get("https://www.nseindia.com/api/allIndices",e).subscribe(i=>{console.log("indices data: ",i),i.data.forEach(s=>{if(f.holdings.hasOwnProperty(s.index)){f.holdings[s.index].ltp=Math.round((s.last+1e-5)*100)/100,f.holdings[s.index].oned=Math.round((s.percentChange+1e-5)*100)/100,f.holdings[s.index].onem=Math.round((s.perChange30d+1e-5)*100)/100;let o=(s.last-s.yearHigh)*100/s.yearHigh;f.holdings[s.index].fiftytwow=Math.round((o+1e-5)*100)/100}})})}fetchHistoricalData(){let e={responseType:"json"},t=new Date,i=new Date;i.setDate(i.getDate()-150);let r="https://query1.finance.yahoo.com/v8/finance/chart/";for(let s in f.holdings)if(f.holdings.hasOwnProperty(s)){let o=s+".NS";o==="NIFTY 50.NS"&&(o="%5ENSEI"),o==="NIFTY BANK.NS"&&(o="%5ENSEBANK");let a=r+o+"?formatted=true&lang=en-US&region=US&includeAdjustedClose=true&interval=1d&range=1y";this.http.get(a,e).subscribe(l=>{if(l){let u=l.chart.result[0].indicators.adjclose[0].adjclose;if(u instanceof Array){let d=f.holdings[s].ltp;if(!d){d=l.chart.result[0].meta.regularMarketPrice,f.holdings[s].ltp=d;let g=l.chart.result[0].meta.regularMarketTime,A=1,v=l.chart.result[0].timestamp;new Date(g*1e3).getDate()===new Date(v[v.length-1]*1e3).getDate()&&(A=2);let b=u[u.length-A];b=(d-b)*100/b,b=Math.round((b+1e-5)*100)/100,f.holdings[s].oned=b;let E=u[u.length-30];E=(d-E)*100/E,E=Math.round((E+1e-5)*100)/100,f.holdings[s].onem=E;let O=l.chart.result[0].indicators.quote[0].high;var c=Math.max.apply(null,O);let T=(d-c)*100/c;f.holdings[s].fiftytwow=Math.round((T+1e-5)*100)/100}let h=u[u.length-7];h=(d-h)*100/h,h=Math.round((h+1e-5)*100)/100;let p=u[u.length-90];p=(d-p)*100/p,p=Math.round((p+1e-5)*100)/100,console.log(s,h,p),f.holdings[s].onew=h,f.holdings[s].threem=p}}})}}exportBacktest(){console.log(this.backtestMap);let e="Backtest "+this.getDateInFormat()+".csv";if(console.log("exporting: ",e),this.backtestMap){let t="";t+=`ExitDate,Portfolio,Nifty,S1,S2,S3,S4,S5,S6,S7,S8,S9,S10\r
`;for(let o in this.backtestMap){this.shortlistedStocks=[];for(let h in this.backtestMap[o])if(this.backtestMap[o][h].fiftytwow>-10){let p=Object.assign({},this.backtestMap[o][h]);p.scrip=h,this.shortlistedStocks.push(p)}this.shortlistedStocks.sort((h,p)=>h.onem>p.onem?-1:1),console.log("shortlistedStocks:",this.shortlistedStocks);let a=this.shortlistedStocks.slice(0,10);console.log("finalStocks:",a);let l=0,c="";for(let h=0;h<a.length;h++){let p=(a[h].last-a[h].entry)*100/a[h].entry;p=Math.round((p+1e-5)*100)/100,l+=p,c+=","+p}let u=l/a.length;u=Math.round((u+1e-5)*100)/100,console.log(u,this.niftyReturn[o]);let d=""+o+","+u+","+this.niftyReturn[o]+c+`\r
`;console.log(d),t+=d}let i=new Blob([t],{type:"application/x-msdownload"}),r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.target="_blank",document.body.appendChild(s),s.download=e,s.click(),s.parentNode.removeChild(s)}}backtestStocks(){this.backtest52W1M()}backtest52W1M(){let e={responseType:"json"},t="https://query1.finance.yahoo.com/v8/finance/chart/",i=12,r=new Date;for(let s=13;s<=24;s++){let o=new Date;o.setDate(r.getDate()-30*s);let a=new Date;a.setDate(r.getDate()-30*s-365);for(let l in f.holdings)if(f.holdings.hasOwnProperty(l)){let c=l+".NS";c==="NIFTY 50.NS"&&(c="%5ENSEI"),c==="NIFTY BANK.NS"&&(c="%5ENSEBANK");let u=t+c+"?formatted=true&lang=en-US&region=US&includeAdjustedClose=true&interval=1d&period1=";u+=Math.floor(a.getTime()/1e3)+"&period2="+Math.floor(o.getTime()/1e3),this.http.get(u,e).subscribe(d=>{if(d){let p=d.chart.result[0].indicators.adjclose[0].adjclose;if(p instanceof Array){let g={};if(g.last=p[p.length-1],g.entry=p[p.length-22],l==="NIFTY 50"){let E=(g.last-g.entry)*100/g.entry;E=Math.round((E+1e-5)*100)/100,this.niftyReturn[o.toLocaleDateString()]=E}let A=p[p.length-43];A=(g.entry-A)*100/A,A=Math.round((A+1e-5)*100)/100,g.onem=A;let v=d.chart.result[0].indicators.quote[0].high;v=v.slice(0,-21);var h=Math.max.apply(null,v);let b=(g.entry-h)*100/h;g.fiftytwow=Math.round((b+1e-5)*100)/100,this.backtestMap[o.toLocaleDateString()]||(this.backtestMap[o.toLocaleDateString()]={}),this.backtestMap[o.toLocaleDateString()][l]=g}}})}}}static \u0275fac=function(t){return new(t||n)(oe(Tt))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ym=class n{constructor(e,t,i,r){this.http=e;this.mapService=t;this.zerodhaService=i;this.appService=r}initSchedule=null;chartFetchSchedule=null;initScheduler(){this.initSchedule=setInterval(()=>{console.log("initScheduler",new Date().getSeconds());let e=new Date;if(e.getHours()==10&&e.getMinutes()==10&&e.getSeconds()==0){clearInterval(this.initSchedule);let t="BANKNIFTY",i=500,r=50;t==="BANKNIFTY"?(r=100,i=2e3):t==="FINNIFTY"?r=50:t==="MIDCPNIFTY"?r=25:t==="SENSEX"||t==="BANKEX"?r=100:t==="USDINR"&&(r=.25);let s=this.mapService.getScripLTP(null,null,"BANKNIFTY",null);s=Math.round(s/r)*r;let o=this.findPremiumStrike("BANKNIFTY","2023-06-01",s,"CE",r,25,i),a=this.findPremiumStrike("BANKNIFTY","2023-06-01",s,"PE",r,25,i);f.isIStrangleInit=!0,setTimeout(()=>{this.scheduler()},2e3)}},1e3)}initNow(){f.isIStrangleInit||(f.isIStrangleInit=!0,clearInterval(this.initSchedule),setTimeout(()=>{this.scheduler()},2e3))}scheduler(){this.chartFetchSchedule=setInterval(()=>{if(f.isIStrangleEnabled&&f.isIStrangleInit&&(console.log("scheduler",new Date().getSeconds()),new Date().getSeconds()==0)){let t=this.mapService.getSubscriptionObject("44900CE","BANKNIFTY","2023-06-01"),i=this.zerodhaService.findStrikeInMasters(t);console.log("scheduler element",i),i&&i.token&&this.getZerodhaChartData(i.token,"44900CE")}},1e3)}getZerodhaChartData(e,t){let i=this.appService.getLastWorkingDay(new Date),r=""+i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2),s=new Date,o=""+s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2),l={responseType:"json",headers:new Fe({authorization:f.broker_auth})},c="https://kite.zerodha.com/oms/instruments/historical/"+e+"/minute?user_id="+f.zerodhaUserId+"&oi=1&from="+r+"&to="+o;this.http.get(c,l).subscribe(u=>{if(u.data.candles){let d=u.data.candles,h=[],p=[];for(let g=0;g<d.length;g++){let A=d[g],v=A[0].replace("+0530","Z");p.push([v,A[1],A[2],A[3],A[4],A[5],A[6]]);let b={time:new Date(Date.parse(v)),open:A[1],high:A[2],low:A[3],close:A[4]};h.push(b)}console.log("getZerodhaChartData current data",t,h[h.length-1])}},u=>{console.log("getZerodhaChartData fetch chart error",u)})}findPremiumStrike(e,t,i,r,s,o,a){let l,c,u=99999999;if(r==="CE")for(let d=i;d<=i+a;d+=s){let h=this.mapService.getScripLTP(e,new Date(t),d,"CE"),p=Math.abs(h-o);p<u&&(u=p,l=d,c=h)}else if(r==="PE")for(let d=i;d>=i-a;d-=s){let h=this.mapService.getScripLTP(e,new Date(t),d,"PE"),p=Math.abs(h-o);p<u&&(u=p,l=d,c=h)}return console.log("findPremiumStrike",l,r,c),l}static \u0275fac=function(t){return new(t||n)(oe(Tt),oe(qe),oe(fn),oe(En))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var Fne=n=>({hidePositionRow:n}),N3=(n,e)=>({red:n,blue:e}),Lne=n=>({green:n}),Vne=(n,e)=>({"text-danger":n,"text-success":e}),Ih=n=>({ocStrikeStrategyCE:n}),Bne=(n,e)=>({"table-warning":n,"oc-strike":e}),kh=n=>({ocStrikeStrategyPE:n}),qne=n=>({stockHolding:n}),co=(n,e,t)=>({green:n,red:e,"bold-higher":t});function jne(n,e){if(n&1){let t=ge();m(0,"p")(1,"ngb-alert",127),j("closed",function(){let r=C(t).$implicit,s=R();return x(s.close(r))}),w(2),_()()}if(n&2){let t=e.$implicit;y(),V("type",t.type),y(),X(t.message)}}function Wne(n,e){n&1&&(m(0,"span"),w(1,"https://api.kite.trade/instruments"),_())}function Une(n,e){n&1&&(m(0,"span"),w(1,"https://v2api.aliceblueonline.com/restpy/contract_master?exch=NFO"),_())}function zne(n,e){if(n&1){let t=ge();m(0,"button",10),j("click",function(){C(t);let r=R();return x(r.login())}),w(1,"Login"),_()}}function Hne(n,e){n&1&&(m(0,"span"),w(1,"Websocket is connected"),_())}function Yne(n,e){n&1&&(m(0,"span"),w(1,"Websocket is not connected"),_())}function Gne(n,e){if(n&1){let t=ge();m(0,"button",10),j("click",function(){C(t);let r=R();return x(r.closeWebsocket())}),w(1,"Close & reopen"),_()}}function Kne(n,e){if(n&1&&(m(0,"tr",129)(1,"td"),w(2),_(),m(3,"td"),w(4),_(),m(5,"td",129),w(6),_(),m(7,"td"),w(8),_(),m(9,"td"),w(10),_()()),n&2){let t=e.$implicit,i=R(2);V("ngClass",$t(7,Fne,i.hide_exited_positions&&t.netQty===0)),y(2),X(t.instru),y(2),X(t.scrip),y(),V("ngClass",Oe(9,N3,t.netQty<0,t.netQty>0)),y(),X(t.netQty),y(2),X(t.buyAvg),y(2),X(t.sellAvg)}}function $ne(n,e){if(n&1&&(m(0,"tbody"),te(1,Kne,11,12,"tr",128),_()),n&2){let t=R();y(),V("ngForOf",t.positions)}}function Zne(n,e){if(n&1&&(m(0,"span"),w(1),_()),n&2){let t=R().$implicit;y(),J("(",t.triggerPrice,")")}}function Xne(n,e){if(n&1){let t=ge();m(0,"tr")(1,"td")(2,"div",130)(3,"input",131),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.addToOrders,r)||(s.addToOrders=r),x(r)}),_()()(),m(4,"td"),w(5),_(),m(6,"td"),w(7),_(),m(8,"td"),w(9),_(),m(10,"td"),w(11),_(),m(12,"td",129),w(13),_(),m(14,"td"),w(15),te(16,Zne,2,1,"span",18),_(),m(17,"td",129),w(18),_(),m(19,"td"),w(20),_(),m(21,"td"),w(22),_(),m(23,"td"),w(24),_(),m(25,"td"),w(26),_()()}if(n&2){let t=e.$implicit;y(3),W("ngModel",t.addToOrders),y(2),X(t.time),y(2),X(t.expiry),y(2),X(t.instru),y(2),X(t.scrip),y(),V("ngClass",Oe(15,N3,t.qty<0,t.qty>0)),y(),X(t.qty),y(2),J("",t.tradedPrice," "),y(),V("ngIf",t.triggerPrice!=0),y(),V("ngClass",$t(18,Lne,t.status=="COMPLETE")),y(),X(t.status),y(2),X(t.tags),y(2),X(t.guid),y(2),X(t.id),y(2),X(t.message)}}function Qne(n,e){if(n&1&&(m(0,"tbody"),te(1,Xne,27,20,"tr",4),_()),n&2){let t=R();y(),V("ngForOf",t.orders.slice(0,t.orders_rows))}}function Jne(n,e){if(n&1&&(m(0,"span",138),w(1),_()),n&2){let t=e.$implicit;y(),Yy(" ",t.strikeCE,"CE ",t.ltpCE," , ",t.strikePE,"PE ",t.ltpPE," ")}}function eie(n,e){if(n&1&&(m(0,"span",138),w(1),_()),n&2){let t=e.$implicit;y(),vu(" ",t.action,": ",t.strike," ",t.ltp," ")}}function tie(n,e){if(n&1){let t=ge();m(0,"div",132)(1,"span",133),w(2," Strategy PnL: "),m(3,"span",134),w(4),_()(),te(5,Jne,2,4,"span",135)(6,eie,2,3,"span",135),m(7,"span",136),w(8),_(),m(9,"span"),w(10," Combined SL: "),m(11,"input",137),U("ngModelChange",function(r){C(t);let s=R();return z(s.combined_SL,r)||(s.combined_SL=r),x(r)}),_()()()}if(n&2){let t=R();y(3),V("ngClass",Oe(7,Vne,t.getStrategyPnL()<0,t.getStrategyPnL()>0)),y(),li(" ",t.getStrategyPnL()," , ",t.strategyPointsProfit,""),y(),V("ngForOf",t.suggestions),y(),V("ngForOf",t.adjust_sugg),y(2),J("Current Premium: ",t.combined_premium,""),y(3),W("ngModel",t.combined_SL)}}function nie(n,e){n&1&&(m(0,"th",97),w(1,"Greeks"),_())}function iie(n,e){n&1&&(m(0,"th",97),w(1,"Greeks"),_())}function rie(n,e){if(n&1&&(m(0,"td",129)(1,"span",151),w(2),_(),m(3,"span",151),w(4),_(),m(5,"span",151),w(6),_(),m(7,"span",151),w(8),_()()),n&2){let t=R().$implicit;V("ngClass",$t(5,Ih,t.inCurrStrategyCE)),y(2),J(" D: ",t.deltaCE," "),y(2),J(" G: ",t.gammaCE," "),y(2),J(" V: ",t.vegaCE," "),y(2),J(" T: ",t.thetaCE," ")}}function sie(n,e){if(n&1&&(m(0,"div",152),w(1),_()),n&2){let t=R().$implicit;y(),li(" ",t.qtyCE," (",t.costCE,") ")}}function oie(n,e){if(n&1&&(m(0,"div",153),w(1),_()),n&2){let t=R(2);y(),J(" ",t.getSpotValue()," ")}}function aie(n,e){n&1&&(m(0,"div",154),w(1," N "),_())}function lie(n,e){if(n&1&&(m(0,"div",152),w(1),_()),n&2){let t=R().$implicit;y(),li(" ",t.qtyPE," (",t.costPE,") ")}}function cie(n,e){if(n&1&&(m(0,"td",129)(1,"span",151),w(2),_(),m(3,"span",151),w(4),_(),m(5,"span",151),w(6),_(),m(7,"span",151),w(8),_()()),n&2){let t=R().$implicit;V("ngClass",$t(5,kh,t.inCurrStrategyPE)),y(2),J(" D: ",t.deltaPE," "),y(2),J(" G: ",t.gammaPE," "),y(2),J(" V: ",t.vegaPE," "),y(2),J(" T: ",t.thetaPE," ")}}function uie(n,e){if(n&1){let t=ge();m(0,"tr")(1,"td",129)(2,"div",139)(3,"div",140)(4,"input",141),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.addCEToOrders,r)||(s.addCEToOrders=r),x(r)}),_()(),m(5,"input",142),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.qtyInputCE,r)||(s.qtyInputCE=r),x(r)}),_(),m(6,"button",143),j("click",function(){let r=C(t).$implicit,s=R();return x(s.addToStrategyBuilder(r,"CE"))}),w(7,"SB"),_(),m(8,"button",85),j("click",function(){let r=C(t).$implicit,s=R();return x(s.addToChart(r,"CE"))}),w(9,"C"),_()()(),m(10,"td",144),w(11),_(),m(12,"td",129),w(13),_(),te(14,rie,9,7,"td",145),m(15,"td",146),w(16),te(17,sie,2,2,"div",147),_(),m(18,"td",148),w(19),te(20,oie,2,1,"div",149)(21,aie,2,0,"div",150),_(),m(22,"td",146),w(23),te(24,lie,2,2,"div",147),_(),te(25,cie,9,7,"td",145),m(26,"td",129),w(27),_(),m(28,"td",144),w(29),_(),m(30,"td",129)(31,"div",139)(32,"div",140)(33,"input",141),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.addPEToOrders,r)||(s.addPEToOrders=r),x(r)}),_()(),m(34,"input",142),U("ngModelChange",function(r){let s=C(t).$implicit;return z(s.qtyInputPE,r)||(s.qtyInputPE=r),x(r)}),_(),m(35,"button",143),j("click",function(){let r=C(t).$implicit,s=R();return x(s.addToStrategyBuilder(r,"PE"))}),w(36,"SB"),_(),m(37,"button",85),j("click",function(){let r=C(t).$implicit,s=R();return x(s.addToChart(r,"PE"))}),w(38,"C"),_()()()()}if(n&2){let t=e.$implicit,i=R();y(),V("ngClass",$t(30,Ih,t.inCurrStrategyCE)),y(3),W("ngModel",t.addCEToOrders),y(),Rn("id","oc-qty-CE-",t.symbol,""),W("ngModel",t.qtyInputCE),y(5),V("ngClass",$t(32,Ih,t.inCurrStrategyCE)),y(),X(t.inlineStrategyPnLCE),y(),V("ngClass",$t(34,Ih,t.inCurrStrategyCE)),y(),X(t.volumeCE),y(),V("ngIf",i.show_greeks),y(),V("ngClass",$t(36,Ih,t.inCurrStrategyCE)),y(),J(" ",t.ltpCE," "),y(),V("ngIf",t.inCurrStrategyCE),y(),V("ngClass",Oe(38,Bne,t.isSpot,!t.isSpot)),y(),J(" ",t.strike," "),y(),V("ngIf",t.isSpot),y(),V("ngIf",t.showNudge),y(),V("ngClass",$t(41,kh,t.inCurrStrategyPE)),y(),J(" ",t.ltpPE," "),y(),V("ngIf",t.inCurrStrategyPE),y(),V("ngIf",i.show_greeks),y(),V("ngClass",$t(43,kh,t.inCurrStrategyPE)),y(),X(t.volumePE),y(),V("ngClass",$t(45,kh,t.inCurrStrategyPE)),y(),X(t.inlineStrategyPnLPE),y(),V("ngClass",$t(47,kh,t.inCurrStrategyPE)),y(3),W("ngModel",t.addPEToOrders),y(),Rn("id","oc-qty-PE-",t.symbol,""),W("ngModel",t.qtyInputPE)}}function die(n,e){if(n&1&&(m(0,"tr")(1,"td",129),w(2),_(),m(3,"td"),w(4),_(),m(5,"td",129),w(6),_(),m(7,"td",129),w(8),_(),m(9,"td",129),w(10),_(),m(11,"td",129),w(12),_(),m(13,"td",129),w(14),_(),m(15,"td",129),w(16),_(),m(17,"td",129),w(18),_(),m(19,"td",129),w(20),_(),m(21,"td"),w(22),_()()),n&2){let t=e.$implicit,i=R();y(),V("ngClass",$t(20,qne,i.isStockHolding(t.scrip))),y(),X(t.scrip),y(2),X(t.ltp),y(),V("ngClass",nn(22,co,t.oned>0,t.oned<0,t.oned>2||t.oned<-2)),y(),X(t.oned),y(),V("ngClass",nn(26,co,t.onew>0,t.onew<0,t.onew>5||t.onew<-5)),y(),X(t.onew),y(),V("ngClass",nn(30,co,t.onem>0,t.onem<0,t.onem>7||t.onem<-7)),y(),X(t.onem),y(),V("ngClass",nn(34,co,t.threem>0,t.threem<0,t.threem>10||t.threem<-10)),y(),X(t.threem),y(),V("ngClass",nn(38,co,t.fiftytwow>0,t.fiftytwow<0,t.fiftytwow>10||t.fiftytwow<-10)),y(),X(t.fiftytwow),y(),V("ngClass",nn(42,co,t.avgp>0,t.avgp<0,t.avgp>5||t.avgp<-5)),y(),X(t.avgp),y(),V("ngClass",nn(46,co,t.support>0,t.support<0,t.support>5||t.support<-5)),y(),X(t.support),y(),V("ngClass",nn(50,co,t.resistance>0,t.resistance<0,t.resistance>5||t.resistance<-5)),y(),X(t.resistance),y(2),X(t.buyvalue)}}var Gm=class n{constructor(e,t,i,r,s,o,a,l,c,u,d){this.route=e;this.appService=t;this.mapService=i;this.websocketService=r;this.chartService=s;this.angelService=o;this.angelWS=a;this.holdingsService=l;this.zerodhaService=c;this.zerodhaWebsocketService=u;this.algoService=d;this.route.queryParams.subscribe(h=>{console.log("params",h),h&&h.access_token&&(this.access_token=h.access_token),h&&h.user_id&&(this.user_id=h.user_id)}),f.requestStatusEvent$.subscribe(h=>{console.log("app requestStatusEvent: ",h),this.lastRequestStatus=h;let p=h.status,g=h.message,A={type:p,message:g};this.alerts.unshift(A),setTimeout(()=>{this.alerts.splice(this.alerts.indexOf(A),1)},5e3)}),f.websocketEvent$.subscribe(h=>{console.log("app websocketEvent: ",h),h==="connected"&&(this.refreshAll(),this.subscribeUSDINR())}),f.miscEvent$.subscribe(h=>{console.log("app miscEvent: ",h),h==="refreshAll"&&this.refreshAll()})}title="trades-ng19";access_token=null;user_id=null;auth_code=null;lastRequestStatus=null;positions=[];orders=[];log_ws_feed=!1;hide_positions=!1;hide_exited_positions=!0;hide_orders=!1;disable_order_buttons=!0;lastPositionsUpdateTime="";lastOrdersUpdateTime="";positionsPnL=0;stranglePositions=[];debitSpreadPositions=[];newexpiry="NIFTY20618";newstrike=1e4;newoption="CE";newqty=50;newblock=0;newlimit=0;newstop=0;newProductType="INTRADAY";newOrderType=2;nifty_oc_check=!0;usdinr_oc_check=!1;oc_instru="NIFTY";oc_year=2021;oc_month=6;oc_date=3;show_greeks=!1;checked_instrument="USDINR";oc_range_higher=16e3;oc_range_lower=14e3;oc_range_multiple=50;oc_strikes=[];oc_product_type="MARGIN";ws_vendor="zerodha";auth_acc="1";auth_acc_1="";auth_acc_2="";totalBalance;availableBalance;utilizedBalance;mean=0;variance=1;ws_access_token="yriZAzfnEWhCaAWh3JUuSqqL2ZtjX3dWv317ooTmhh78YCsdK3mkgz1dMdrKvyv7rRrU5WRvUnVf3gsoFiUQbATK32G6drt3CVbiqMVExLn0Hi51JdMIryRHPp2nHrso";ocSpotStrike;strategyPnL=0;strategyPointsProfit=0;suggestions=[];adjust_sugg=[];portfolio_return=0;holdings=[];total_inv=0;current_val=0;combined_SL=0;combined_premium=0;maxProfit=0;maxLoss=0;profitLossRatio=0;qty_default=200;qty_strategy_pts=400;diff_strategy_pts=200;strategy_pts=!1;alerts=[];fetchNSEOC_secs=null;latest_ten=!0;orders_rows=9;orders_update=!1;completeOrders=f.completeOrders;baby_name="";baby_surname="bhadane";babyNameNumber=0;historical_instru="NIFTY";historical_append="WK";historical_date="2023-03-29";historical_upper=18500;historical_lower=16e3;zerodha_auth="enctoken Sr2gbgdlEM7yRuGdXWtOu9YrTyyuMHHqBJ+F4N1UXSDmSpEH8UrrAkE9Ii7DCbAb3CkRMtRVhbcnC9Qv+rY7LcLVgyz2lGZg4VqnFFnl19PrXXPH7qxXuA==";zerodha_marketwatch='{"status":"success","data":[{"id":108696388,"name":"1","items":[{"id":673211353,"weight":1,"tradingsymbol":"INDIA VIX","instrument_token":264969,"segment":"INDICES","exchange":"NSE","expiry":""},{"id":816421144,"weight":2,"tradingsymbol":"NIFTY 50","instrument_token":256265,"segment":"INDICES","exchange":"NSE","expiry":""},{"id":903805357,"weight":6,"tradingsymbol":"NIFTYBEES","instrument_token":2707457,"segment":"NSE","exchange":"NSE","expiry":""},{"id":915508605,"weight":7,"tradingsymbol":"ICICINIFTY","instrument_token":7565569,"segment":"NSE","exchange":"NSE","expiry":""},{"id":915630019,"weight":8,"tradingsymbol":"KOTAKBKETF","instrument_token":1497857,"segment":"NSE","exchange":"NSE","expiry":""},{"id":915630692,"weight":9,"tradingsymbol":"KOTAKNIFTY","instrument_token":4634113,"segment":"NSE","exchange":"NSE","expiry":""},{"id":916079116,"weight":10,"tradingsymbol":"SETFNIF50","instrument_token":2605057,"segment":"NSE","exchange":"NSE","expiry":""},{"id":2963445776,"weight":11,"tradingsymbol":"LIQUIDBEES","instrument_token":2817537,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3185499175,"weight":12,"tradingsymbol":"BANKBEES","instrument_token":2928385,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3325591374,"weight":13,"tradingsymbol":"NIFTY BANK","instrument_token":260105,"segment":"INDICES","exchange":"NSE","expiry":""}]},{"id":108696392,"name":"Watchlist 2","items":[{"id":2542203093,"weight":19,"tradingsymbol":"INDIA VIX","instrument_token":264969,"segment":"INDICES","exchange":"NSE","expiry":""},{"id":3380116369,"weight":20,"tradingsymbol":"BANKNIFTY2211340400CE","instrument_token":11244546,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"},{"id":3384256979,"weight":21,"tradingsymbol":"BANKNIFTY2211340500CE","instrument_token":11245570,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"},{"id":3384259326,"weight":22,"tradingsymbol":"BANKNIFTY2211340600CE","instrument_token":11246082,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"},{"id":3384262349,"weight":23,"tradingsymbol":"BANKNIFTY2211340700CE","instrument_token":11246594,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"},{"id":3384265324,"weight":24,"tradingsymbol":"BANKNIFTY2211340800CE","instrument_token":11247106,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"},{"id":3384267715,"weight":25,"tradingsymbol":"BANKNIFTY2211340900CE","instrument_token":11249922,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"},{"id":3384270013,"weight":26,"tradingsymbol":"BANKNIFTY2211341000CE","instrument_token":11250434,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"}]},{"id":108696391,"name":"3","items":[]},{"id":108696390,"name":"4","items":[{"id":3350520016,"weight":3,"tradingsymbol":"USDINR22107FUT","instrument_token":1838339,"segment":"CDS-FUT","exchange":"CDS","expiry":"2022-01-07"},{"id":3352324563,"weight":4,"tradingsymbol":"USDINR2210774.75CE","instrument_token":2084099,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3352325735,"weight":5,"tradingsymbol":"USDINR22JAN74.75CE","instrument_token":2331907,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-27"},{"id":3357694089,"weight":6,"tradingsymbol":"USDINR2210774PE","instrument_token":2082819,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3352326484,"weight":6,"tradingsymbol":"USDINR2211474.75CE","instrument_token":2277379,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-14"},{"id":3352327889,"weight":7,"tradingsymbol":"USDINR22JAN74.5CE","instrument_token":2331395,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-27"},{"id":3352328068,"weight":8,"tradingsymbol":"USDINR2210774.5CE","instrument_token":2083587,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3352328218,"weight":9,"tradingsymbol":"USDINR2211474.5CE","instrument_token":2274563,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-14"},{"id":3352330098,"weight":10,"tradingsymbol":"USDINR22JAN74.25PE","instrument_token":2331139,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-27"},{"id":3352330606,"weight":11,"tradingsymbol":"USDINR2210774.25PE","instrument_token":2083331,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3352330853,"weight":12,"tradingsymbol":"USDINR2211474.25PE","instrument_token":2228483,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-14"},{"id":3352331692,"weight":13,"tradingsymbol":"USDINR22JAN74.5PE","instrument_token":2331651,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-27"},{"id":3352331872,"weight":14,"tradingsymbol":"USDINR2210774.5PE","instrument_token":2083843,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3352332088,"weight":15,"tradingsymbol":"USDINR2211474.5PE","instrument_token":2275843,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-14"}]},{"id":108696389,"name":"5","items":[{"id":3348892336,"weight":0,"tradingsymbol":"USDINR2210775.5CE","instrument_token":2085635,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348944443,"weight":1,"tradingsymbol":"USDINR2210775CE","instrument_token":2084611,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348963455,"weight":2,"tradingsymbol":"USDINR2210776.5CE","instrument_token":2087683,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348963507,"weight":3,"tradingsymbol":"USDINR2210776.25CE","instrument_token":2087171,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348963586,"weight":4,"tradingsymbol":"USDINR2210776CE","instrument_token":2086659,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348963744,"weight":5,"tradingsymbol":"USDINR2210775.75CE","instrument_token":2086147,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348963890,"weight":6,"tradingsymbol":"USDINR2210775.25CE","instrument_token":2085123,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964092,"weight":7,"tradingsymbol":"USDINR2210774.25CE","instrument_token":2083075,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964200,"weight":8,"tradingsymbol":"USDINR2210774.75CE","instrument_token":2084099,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964250,"weight":9,"tradingsymbol":"USDINR2210774.5CE","instrument_token":2083587,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964298,"weight":10,"tradingsymbol":"USDINR2210774CE","instrument_token":2082563,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964379,"weight":11,"tradingsymbol":"USDINR2210773.75CE","instrument_token":2082051,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964434,"weight":12,"tradingsymbol":"USDINR2210773.5CE","instrument_token":2081539,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964547,"weight":13,"tradingsymbol":"USDINR2210773.25CE","instrument_token":2081027,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964591,"weight":14,"tradingsymbol":"USDINR2210773CE","instrument_token":2080515,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964657,"weight":15,"tradingsymbol":"USDINR2210772.75CE","instrument_token":2080003,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964687,"weight":16,"tradingsymbol":"USDINR2210772.5CE","instrument_token":2079491,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964729,"weight":17,"tradingsymbol":"USDINR2210772.25CE","instrument_token":2078979,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348967699,"weight":18,"tradingsymbol":"USDINR2210776.25PE","instrument_token":2087427,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348965608,"weight":18,"tradingsymbol":"USDINR2210776PE","instrument_token":2086915,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964780,"weight":18,"tradingsymbol":"USDINR2210772CE","instrument_token":2078467,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348965675,"weight":19,"tradingsymbol":"USDINR2210775.75PE","instrument_token":2086403,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348967763,"weight":19,"tradingsymbol":"USDINR2210776.5PE","instrument_token":2087939,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348965724,"weight":20,"tradingsymbol":"USDINR2210775.5PE","instrument_token":2085891,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348965816,"weight":21,"tradingsymbol":"USDINR2210775.25PE","instrument_token":2085379,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348965993,"weight":22,"tradingsymbol":"USDINR2210775PE","instrument_token":2084867,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966094,"weight":23,"tradingsymbol":"USDINR2210774.75PE","instrument_token":2084355,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966143,"weight":24,"tradingsymbol":"USDINR2210774.5PE","instrument_token":2083843,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966207,"weight":25,"tradingsymbol":"USDINR2210774.25PE","instrument_token":2083331,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966278,"weight":26,"tradingsymbol":"USDINR2210774PE","instrument_token":2082819,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966366,"weight":27,"tradingsymbol":"USDINR2210773.75PE","instrument_token":2082307,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966427,"weight":28,"tradingsymbol":"USDINR2210773.5PE","instrument_token":2081795,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966465,"weight":29,"tradingsymbol":"USDINR2210773.25PE","instrument_token":2081283,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966553,"weight":30,"tradingsymbol":"USDINR2210773PE","instrument_token":2080771,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966621,"weight":31,"tradingsymbol":"USDINR2210772.75PE","instrument_token":2080259,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966683,"weight":32,"tradingsymbol":"USDINR2210772.5PE","instrument_token":2079747,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966740,"weight":33,"tradingsymbol":"USDINR2210772.25PE","instrument_token":2079235,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966840,"weight":34,"tradingsymbol":"USDINR2210772PE","instrument_token":2078723,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3349002726,"weight":35,"tradingsymbol":"USDINR22107FUT","instrument_token":1838339,"segment":"CDS-FUT","exchange":"CDS","expiry":"2022-01-07"}]},{"id":1432148480,"name":"MW 6","items":[{"id":3153225189,"weight":4,"tradingsymbol":"INDIA VIX","instrument_token":264969,"segment":"INDICES","exchange":"NSE","expiry":""}]},{"id":1439682075,"name":"MW 7","items":[{"id":3160458234,"weight":1,"tradingsymbol":"INDIA VIX","instrument_token":264969,"segment":"INDICES","exchange":"NSE","expiry":""},{"id":3186435109,"weight":2,"tradingsymbol":"NIFTYBEES","instrument_token":2707457,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186401941,"weight":3,"tradingsymbol":"CIPLA","instrument_token":177665,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186406251,"weight":4,"tradingsymbol":"DIVISLAB","instrument_token":2800641,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186408123,"weight":5,"tradingsymbol":"TCS","instrument_token":2953217,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186408254,"weight":6,"tradingsymbol":"INFY","instrument_token":408065,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186414542,"weight":7,"tradingsymbol":"TECHM","instrument_token":3465729,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186425692,"weight":8,"tradingsymbol":"RELIANCE","instrument_token":738561,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186409602,"weight":9,"tradingsymbol":"ASIANPAINT","instrument_token":60417,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186428516,"weight":10,"tradingsymbol":"BHARTIARTL","instrument_token":2714625,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186410885,"weight":11,"tradingsymbol":"POWERGRID","instrument_token":3834113,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186411996,"weight":12,"tradingsymbol":"NESTLEIND","instrument_token":4598529,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186427537,"weight":13,"tradingsymbol":"KOTAKBANK","instrument_token":492033,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186565769,"weight":14,"tradingsymbol":"BAJAJFINSV","instrument_token":4268801,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3261642640,"weight":15,"tradingsymbol":"SBILIFE","instrument_token":5582849,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3261648555,"weight":16,"tradingsymbol":"LT","instrument_token":2939649,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3261672641,"weight":17,"tradingsymbol":"GRASIM","instrument_token":315393,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3261674006,"weight":18,"tradingsymbol":"TITAN","instrument_token":897537,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3261755095,"weight":19,"tradingsymbol":"BANKBEES","instrument_token":2928385,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3262029921,"weight":20,"tradingsymbol":"VBL","instrument_token":4843777,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3262031465,"weight":21,"tradingsymbol":"RADICO","instrument_token":2813441,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3380025273,"weight":22,"tradingsymbol":"PIDILITIND","instrument_token":681985,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3380026008,"weight":23,"tradingsymbol":"SUNPHARMA","instrument_token":857857,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3380027033,"weight":24,"tradingsymbol":"DMART","instrument_token":5097729,"segment":"NSE","exchange":"NSE","expiry":""}]}]}';zerodha_from_date="2021-12-08";zerodha_to_date="2022-01-07";zerodha_expiry_date="Jan-07-2021";longTermExpiryExport="2023-12-28";greeksMonitoringIntervalInitial;greeksMonitoringInterval;nextGreeksTime=new Date;greeksData=new Map;initialGreeksData=new Map;ordersSubscription;positionsSubscription;log_ws_feed_change(){f.logWSFeed=this.log_ws_feed}subscribeUSDINR(){let e=[],t=this.mapService.findCurrExpiryForDisplay(f.usdinrExpiries),i=this.mapService.getExpiry(t,"USDINR");e.push(this.mapService.getSubscriptionObjectForFuture("USDINR"+i+"FUT","CDS")),console.log("subscribeUSDINR feed",e),this.appService.sendSubscriptions(e)}close(e){this.alerts.splice(this.alerts.indexOf(e),1)}changeLatestTen(e){e.target.checked?this.orders_rows=10:this.orders_rows=1e3}getBeesRatio(){let e=this.getInstruLTP("NIFTY50"),t=this.getInstruLTP("NIFTYBEES"),i=e/t;return Math.round((i+1e-5)*100)/100}getInstruLTP(e){return this.mapService.getScripLTP(null,null,e,null)}auth_change(e){f.broker_auth=e,console.log("auth change",e),localStorage.setItem("broker_auth",JSON.stringify(e))}auth_change_num(e,t){console.log("auth_change_num",e,t),localStorage.setItem("broker_auth_"+t,JSON.stringify(e)),t==this.auth_acc&&(f.broker_auth=e)}auth_radio_change(e){console.log("auth_radio_change",e),this.auth_acc=="1"?f.broker_auth=this.auth_acc_1:this.auth_acc=="2"&&(f.broker_auth=this.auth_acc_2),console.log("AppConstants.broker_auth",f.broker_auth)}calcBabyName(e){console.log(e,this.baby_name,this.baby_surname);let t=0;for(let i of this.baby_name)f.babyNamesLetters[i.toUpperCase()]&&(t+=f.babyNamesLetters[i.toUpperCase()]),console.log(t,i,f.babyNamesLetters[i.toUpperCase()]);for(let i of this.baby_surname)f.babyNamesLetters[i.toUpperCase()]&&(t+=f.babyNamesLetters[i.toUpperCase()]),console.log(t,i,f.babyNamesLetters[i.toUpperCase()]);for(this.babyNameNumber=0;t;)this.babyNameNumber+=t%10,t=Math.floor(t/10);if(this.babyNameNumber>=10){let i=this.babyNameNumber;for(this.babyNameNumber=0;i;)this.babyNameNumber+=i%10,i=Math.floor(i/10)}}test1(){this.refreshAll(),this.refreshAll()}ngOnInit(){this.auth_acc_1=JSON.parse(localStorage.getItem("broker_auth_1")),this.auth_acc_2=JSON.parse(localStorage.getItem("broker_auth_2")),this.auth_acc=="1"?f.broker_auth=this.auth_acc_1:this.auth_acc=="2"&&(f.broker_auth=this.auth_acc_2),this.zerodha_auth=f.broker_auth,this.calcBabyName(null),this.mapService.setLtp("NIFTY50",18e3),this.mapService.setLtp("BANKNIFTY",4e4),this.mapService.setLtp("FINNIFTY",18500),this.mapService.setLtp("MIDCPNIFTY",8e3),this.mapService.setLtp("SENSEX",65e3),this.mapService.setLtp("BANKEX",5e4),window.location.href.includes("localhost")&&(f.isProduction=!1),console.log(window.location.href,f.isProduction),this.zerodha_expiry_date=this.mapService.findCurrExpiryForDisplay(f.niftyExpiries),this.zerodha_to_date=this.mapService.findCurrExpiryForDisplay(f.niftyExpiries);let e=new Date(this.mapService.findCurrExpiryForDisplay(f.niftyExpiries));e.setDate(e.getDate()-10),this.zerodha_from_date=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2);let t=setInterval(()=>{this.updateSpotStrike(),this.updateOCValues()},5e3),i=setInterval(()=>{},2e3);this.chartService.strategyPnLEvent$.subscribe(o=>{this.strategyPnL=o[0],this.strategyPointsProfit=o[1]}),this.chartService.optionChainEvent$.subscribe(o=>{console.log("received oc:",o);let a=o[0],l=o[1];this.processOCRequest(a,l)});let r=setInterval(()=>{this.orders_update&&this.getOrders()},1e4),s=setInterval(()=>{if(!f.isHistoricalRunning){let o=new Date;if(o.getHours()===15&&o.getMinutes()>=31||o.getHours()>=16){let a=""+o.getFullYear()+"-"+("0"+(o.getMonth()+1)).slice(-2)+"-"+("0"+o.getDate()).slice(-2);if(JSON.parse(localStorage.getItem("export_"+a))!=="true"){f.isHistoricalRunning=!0;let c="WK",u=20;(this.mapService.isMonthlyExpiry(a,"NIFTY")||this.mapService.isMonthlyExpiry(a,"FINNIFTY")||this.mapService.isMonthlyExpiry(a,"MIDCPNIFTY")||this.mapService.isMonthlyExpiry(a,"SENSEX")||this.mapService.isMonthlyExpiry(a,"BANKEX")||this.mapService.isMonthlyExpiry(a,"USDINR"))&&(c="",u=60);let d=new Date(o);d.setDate(o.getDate()-u);let h=""+d.getFullYear()+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+("0"+d.getDate()).slice(-2);console.log("Starting to fetch expiry data"),this.holdingsService.getZerodhaInstruments(c,f.broker_auth,h,a,a)}}}},1e4)}exportLongTermOptions(){let e=new Date(this.longTermExpiryExport),t=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),i="",r=550,s=0;for(let o=0;o<r;o+=50)setTimeout(()=>{console.log("Starting to fetch expiry data");let a=new Date(e);a.setDate(e.getDate()-o);let l=""+a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2),c=new Date(e);c.setDate(e.getDate()-o-50);let u=""+c.getFullYear()+"-"+("0"+(c.getMonth()+1)).slice(-2)+"-"+("0"+c.getDate()).slice(-2);this.holdingsService.getZerodhaInstruments(i,f.broker_auth,u,l,t,!0)},s*12e4),s++}ngAfterViewInit(){setTimeout(()=>{})}fetchHistorical(){this.holdingsService.getZerodhaInstruments(this.historical_append,this.zerodha_auth,this.zerodha_from_date,this.zerodha_to_date,this.zerodha_expiry_date)}fetchHistoricalThirdParty(){this.holdingsService.getDataFromThirdParty(this.historical_instru,this.historical_append,this.zerodha_from_date,this.zerodha_to_date,this.zerodha_expiry_date,this.historical_date,this.historical_upper,this.historical_lower)}exportHistorical(){this.holdingsService.exportToCSV()}processOCRequest(e,t){this.oc_instru=e;let i=new Date(t);if(this.oc_year=i.getFullYear(),this.oc_month=i.getMonth()+1,this.oc_date=i.getDate(),this.oc_instru==="NIFTY"){this.oc_range_multiple=50;let r=this.mapService.getScripLTP(null,null,"NIFTY50",null),s=Math.round(r/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=s+500,this.oc_range_lower=s-500}else if(this.oc_instru==="BANKNIFTY"){this.oc_range_multiple=100;let r=this.mapService.getScripLTP(null,null,"BANKNIFTY",null),s=Math.round(r/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=s+1500,this.oc_range_lower=s-1500}else if(this.oc_instru==="FINNIFTY"){this.oc_range_multiple=50;let r=this.mapService.getScripLTP(null,null,"FINNIFTY",null),s=Math.round(r/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=s+500,this.oc_range_lower=s-500}else if(this.oc_instru==="MIDCPNIFTY"){this.oc_range_multiple=25;let r=this.mapService.getScripLTP(null,null,"MIDCPNIFTY",null),s=Math.round(r/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=s+500,this.oc_range_lower=s-500}else if(this.oc_instru==="SENSEX"){this.oc_range_multiple=100;let r=this.mapService.getScripLTP(null,null,"SENSEX",null),s=Math.round(r/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=s+1500,this.oc_range_lower=s-1500}else if(this.oc_instru==="BANKEX"){this.oc_range_multiple=100;let r=this.mapService.getScripLTP(null,null,"BANKEX",null),s=Math.round(r/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=s+1500,this.oc_range_lower=s-1500}else if(this.oc_instru==="USDINR"){this.oc_range_multiple=.25;let r=this.mapService.getScripLTP(null,null,"USDINR",null),s=Math.round(r/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=s+2,this.oc_range_lower=s-2}this.updateOCRange()}getStrategyPnL(){return this.strategyPnL}getGreeks(e,t){let i=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e,t),r=new Date(this.oc_year,this.oc_month-1,this.oc_date);return this.appService.getGreeks(this.oc_instru,e,t,r,i,f.isSimulatedStrategy,f.simulateCurrDateObj)}checkNifty(){this.nifty_oc_check?(this.usdinr_oc_check=!1,this.checked_instrument="NIFTY"):(this.usdinr_oc_check=!0,this.checked_instrument="USDINR")}checkUSDINR(){this.usdinr_oc_check?(this.nifty_oc_check=!1,this.checked_instrument="USDINR"):(this.nifty_oc_check=!0,this.checked_instrument="NIFTY")}login(){this.auth()}auth(){this.appService.auth().subscribe(e=>{console.log("app auth",e),e&&(f.requestStatusEvent$.next(e),e.authorization_code&&(this.auth_code=e.authorization_code,this.generateAccessToken()))},e=>{console.log("app auth error",e),f.requestStatusEvent$.next(e.error.message+", "+e.message)})}generateAccessToken(){if(this.auth_code){let e=this.appService.getTokenUrl(this.auth_code,f.fyersAppId);console.log("tokenUrl",e);let t=window.open(e)}}getFunds(){console.log("app getting Funds"),this.appService.getFunds(this.access_token).subscribe(e=>{console.log("app getFunds",e),e&&(this.totalBalance=e.fund_limit[8].equityAmount.toLocaleString(),this.availableBalance=e.fund_limit[9].equityAmount.toLocaleString(),this.utilizedBalance=e.fund_limit[6].equityAmount.toLocaleString())},e=>{console.log("app getPositions error",e),f.requestStatusEvent$.next(e.error.message+", "+e.message)})}includePosPnLInSum1(e){e.includeInSum1=!e.includeInSum1}includePosPnLInSum2(e){e.includeInSum2=!e.includeInSum2}includePosPnLInSum3(e){e.includeInSum3=!e.includeInSum3}includePosPnLInSum4(e){e.includeInSum4=!e.includeInSum4}getPositionsPnLSum(e){let t=0;return this.positions&&(this.positions.forEach(i=>{e===1&&i.includeInSum1&&(t+=i.pnl),e===2&&i.includeInSum2&&(t+=i.pnl),e===3&&i.includeInSum3&&(t+=i.pnl),e===4&&i.includeInSum4&&(t+=i.pnl)}),t=Math.round((t+1e-5)*100)/100,this.positionsPnL=t),t}getMastersStatus(){return f.mastersContract.size?"Masters Contract is available":"Masters Contract not available yet"}uploadExpiryFile(e){}import_establishWSVendor(e){f.SocketMode=this.ws_vendor;let t=e.target.files[0],i=new FileReader;i.readAsText(t),i.onload=r=>{console.log("imported master",i.result),this.appService.uploadedMastersContract(i.result)}}establishWSVendor(){f.SocketMode=this.ws_vendor,this.appService.getMastersContract(this.ws_access_token)}closeWebsocket(){this.appService.closeWebsocket()}reopenWebsocket(){this.appService.reopenWebsocket()}getZerodhaInstruments(){this.appService.getZerodhaInstruments()}uploadNames(e){let t=[],i=e.target.files[0].name,r=e.target.files[0],s=new FileReader;s.readAsText(r),s.onload=o=>{let c=String(s.result).split(/\r|\n|\r/).filter(function(g){return g!==""});for(let g=0;g<c.length;g++)this.baby_name=c[g],this.baby_surname="bhadane",this.calcBabyName(null),t.push([c[g],this.babyNameNumber]);console.log("arr",t);let u="";for(let g=0;g<t.length;g++){let A="";A+=t[g][0]+",Bhadane,"+t[g][1],u+=A+`\r
`}let d=new Blob([u],{type:"application/x-msdownload"}),h=URL.createObjectURL(d),p=document.createElement("a");p.href=h,p.target="_blank",document.body.appendChild(p),p.download="only_boys.csv",p.click(),p.parentNode.removeChild(p)}}uploadNSEOC(e){let t=e.target.files[0].name,i="NIFTY";t.includes("BANKNIFTY")&&(i="BANKNIFTY"),t.includes("FINNIFTY")&&(i="FINNIFTY");let s=t.replace(".csv","").slice("-11");console.log("nse oc file",t,s,i);let o=e.target.files[0],a=new FileReader;a.readAsText(o),a.onload=l=>{let c=String(a.result);this.parseNSEOC(c,i,s)}}parseNSEOC(e,t,i){let s=e.split(/\r|\n|\r/).filter(function(o){return o!==""});for(let o=2;o<s.length;o++){let a=s[o].match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g),l=Number(a[4].replaceAll('"',"").replace(",","").replace("-","0")),c=Number(a[16].replaceAll('"',"").replace(",","").replace("-","0")),u=Number(a[10].replaceAll('"',"").replace(",","").replace("-","0"));this.appService.parseAndSetMaps(t,i,u,"CE",l),this.appService.parseAndSetMaps(t,i,u,"PE",c)}}getNSE_OC(e){this.appService.getNSE_OC(e)}isSocketConnected(){return this.appService.isSocketConnected()}getPositions(){console.log("app getting Positions"),f.RestMode==="zerodha"?(this.positionsSubscription&&this.positionsSubscription.unsubscribe(),this.positionsSubscription=this.zerodhaService.getPositions().subscribe(e=>{console.log("zerodha getPositions response",e),this.mapPositions(e),this.positionsSubscription.unsubscribe()},e=>{console.log("zerodha getPositions error",e),f.requestStatusEvent$.next({status:"danger",message:"Positions Fetch Failed"})})):this.appService.getPositions(this.access_token).subscribe(e=>{console.log("app getPositions",e),e&&(this.lastPositionsUpdateTime=new Date().toLocaleTimeString(),f.requestStatusEvent$.next(e),this.mapPositions(e))},e=>{console.log("app getPositions error",e),f.requestStatusEvent$.next(e.error.message+", "+e.message)})}mapPositions(e){this.positions=[],f.RestMode==="zerodha"&&(e.data.net.forEach(i=>{let r=new kd;r.id=i.id;let s=i.tradingsymbol,o=this.mapService.parseSymbol(s);r.instru=o.instru,r.scrip=o.strike+o.type;let a=this.zerodhaService.findInMastersByToken(i.instrument_token);a&&a.expiry&&(r.expiry=a.expiry),r.netQty=i.quantity,r.buyAvg=i.buy_price,r.sellAvg=i.sell_price,r.pnl=i.pnl,this.positions.push(r)}),this.sortPositions(),console.log("positions",this.positions)),f.RestMode==="fyers"&&e.netPositions instanceof Array&&e.netPositions.forEach(t=>{let i=new kd;i.id=t.id,i.scrip=t.symbol,i.netQty=t.netQty,i.buyAvg=t.buyAvg,i.sellAvg=t.sellAvg,i.type=t.productType,i.realizedProfit=t.realizedProfit,i.pnl=t.pl,this.positions.push(i)}),f.fetchedPositions=this.positions}sortPositions(){this.positions.sort((e,t)=>{if(e.instru!==t.instru)return e.instru.localeCompare(t.instru);let i=e.scrip.slice(0,-2),r=t.scrip.slice(0,-2);if(i===r&&e.scrip.includes("CE")&&t.scrip.includes("PE"))return-1;if(i===r&&e.scrip.includes("PE")&&t.scrip.includes("CE"))return 1;if(i===r&&(e.scrip.includes("CE")&&t.scrip.includes("CE")||e.scrip.includes("PE")&&t.scrip.includes("PE"))){let s=new Date(e.expiry),o=new Date(t.expiry);return s<o?-1:1}return this.compareForSorting(e.scrip,t.scrip)})}compareForSorting(e,t){if(e.includes("CE")&&t.includes("PE"))return-1;if(e.includes("PE")&&t.includes("CE"))return 1;let i=e.slice(0,-2),r=t.slice(0,-2);return i>r?-1:1}getOrders(){console.log("app getting Orders"),f.RestMode==="zerodha"?(this.ordersSubscription&&this.ordersSubscription.unsubscribe(),this.ordersSubscription=this.zerodhaService.getOrders().subscribe(e=>{console.log("zerodha getOrders response",e),this.mapOrders(e),this.ordersSubscription.unsubscribe(),f.miscEvent$.next("ordersReceived")},e=>{console.log("zerodha getOrder error",e),f.requestStatusEvent$.next({status:"danger",message:"Orders Fetch Failed"})})):this.appService.getOrders(this.access_token).subscribe(e=>{console.log("app getOrders",e),e&&(this.lastOrdersUpdateTime=new Date().toLocaleTimeString(),f.requestStatusEvent$.next(e),this.mapOrders(e))},e=>{console.log("app getOrders error",e),f.requestStatusEvent$.next(e.error.message+", "+e.message)})}sortOrders(){this.orders.sort((e,t)=>e.time>t.time?-1:e.time<t.time?1:0)}mapOrders(e){this.orders=[];let t=!1,i=f.completeOrders;f.completeOrders=0,f.RestMode==="zerodha"&&(e.data.forEach(s=>{let o=new wg;o.addToOrders=!1,o.guid=s.guid,o.id=s.order_id,o.time=s.order_timestamp.split(" ")[1];let a=s.tradingsymbol,l=this.mapService.parseSymbol(a);o.instru=l.instru,o.scrip=l.strike+l.type;let c=this.zerodhaService.findInMastersByToken(s.instrument_token);c&&c.expiry&&(o.expiry=c.expiry),o.qty=s.quantity,s.transaction_type==="SELL"&&(o.qty=-o.qty),o.triggerPrice=s.trigger_price,o.status=s.status,o.status==="COMPLETE"&&(f.completeOrders+=1),o.status.includes("PENDING")&&o.status!=="TRIGGER PENDING"&&(t=!0),o.status.includes("TRIGGER PENDING")?o.tradedPrice=s.price:o.tradedPrice=s.average_price,o.message=s.status_message,o.tradingsymbol=s.tradingsymbol,s.tags?(o.tags="",s.tags.forEach(u=>{o.tags+=u+","}),o.tags=o.tags.replace(/,\s*$/,"")):o.tags="",this.orders.push(o)}),this.sortOrders(),f.orders=this.orders),this.completeOrders=f.completeOrders,i+f.placedOrders>this.completeOrders||(f.placedOrders=0),t&&(f.requestStatusEvent$.next({status:"warning",message:"Order Pending. Refetching..."}),setTimeout(()=>{f.enableAlgo||this.refreshAll()},2e3)),f.RestMode==="fyers"&&e.orderBook instanceof Array&&e.orderBook.forEach(r=>{let s=new yg;s.id=r.id,s.scrip=r.symbol,s.qty=r.qty,s.status=r.status,s.message=r.message,s.type=r.type,s.limit=r.limitPrice,s.stop=r.stopPrice,s.tradedPrice=r.tradedPrice,s.side=r.side,s.orderDateTime=r.orderDateTime,this.orders.push(s)})}getCMP(){return 0}getOrderStatus(e){return e===1?"Cancelled":e===2?"Filled":e===3?"Unknown":e===4?"Transit":e===5?"Rejected":e===6?"Pending":"Not Found"}getOrderType(e){return e===1?"Limit":e===2?"Market":e===3?"SL-M":e===4?"SL":"Not Found"}newOrder(e){let t="NSE:"+this.newexpiry+this.newstrike+this.newoption;this.appService.placeOrder(this.access_token,t,this.newqty,this.newOrderType,e,this.newProductType,this.newlimit,this.newstop).subscribe(i=>{console.log("app newOrder",i),this.refreshAll(),i&&f.requestStatusEvent$.next(i)},i=>{console.log("app newOrder error",i),f.requestStatusEvent$.next(i.error.message+", "+i.message),this.refreshAll()})}resetNewOrder(){this.newexpiry="NIFTY20618",this.newstrike=1e4,this.newoption="CE",this.newqty=50,this.newblock=0,this.newOrderType=2,this.newProductType="INTRADAY",this.newlimit=0,this.newstop=0}exitSelected(){this.positions&&confirm("Exit Selected?")&&this.positions.forEach(e=>{(e.includeInSum1||e.includeInSum2||e.includeInSum3||e.includeInSum4)&&this.exitPosition(e,!0)})}exitPosition(e,t=!1){let i=Number(document.getElementById("pos-qty-"+e.id).value);i||(i=Math.abs(e.netQty));let r=0;e.netQty>0?r=-1:e.netQty<0&&(r=1);let s=2;console.log("placing order: ",e.scrip,i,s,r,e.type,0);let o=t;t===!1&&(o=confirm("Exit "+i+" Qty with "+(r===-1?"Sell order":"Buy order")+" Sure?")),o&&this.appService.placeOrder(this.access_token,e.scrip,i,s,r,e.type,0,0).subscribe(a=>{console.log("app exitPosition",a),this.refreshAll(),a&&(f.requestStatusEvent$.next(a),this.appService.playAudio("success"))},a=>{console.log("app exitPosition error",a),f.requestStatusEvent$.next(a.error.message+", "+a.message),this.refreshAll(),this.appService.playAudio("error")})}refreshAll(){this.getPositions(),this.getOrders()}addToStrategyBuilder(e,t){this.appService.payOffEvent$.next({symbol:e.symbol+t,ltp:this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,t),qty:this.qty_default})}addToChart(e,t){this.appService.chartEvent$.next({symbol:e.symbol+t,type:t})}getQtyOfStrikeInStrategy(e){let t=f.curr_positions_trades;if(t){for(let i=0;i<t.length;i++){let r=t[i],s=new Date(this.oc_year,this.oc_month-1,this.oc_date),o=new Date(r.expiry);if(s.getDate()===o.getDate()&&r.scrip===e&&r.exit===0)return r.qty}return null}}getCostOfStrikeInStrategy(e){let t=f.curr_positions_trades;if(t){for(let i=0;i<t.length;i++){let r=t[i],s=new Date(this.oc_year,this.oc_month-1,this.oc_date),o=new Date(r.expiry);if(s.getDate()===o.getDate()&&r.scrip===e&&r.exit===0)return r.entry}return null}}isStrikeInCurrStrategy(e){let t=f.curr_positions_trades;if(t){for(let i=0;i<t.length;i++){let r=t[i],s=new Date(this.oc_year,this.oc_month-1,this.oc_date),o=new Date(r.expiry);if(r.exit===0&&s.getDate()===o.getDate()&&r.scrip===e)return!0}return!1}return!1}ocOrder(e,t,i){let r="NSE:"+i.symbol+t,s=i.strike,o=this.oc_product_type,a;console.log("ocOrder qty: oc-qty-"+t+"-"+i.symbol);let l=Number(document.getElementById("oc-qty-"+t+"-"+i.symbol).value);a=document.getElementById("oc-limit-"+t+"-"+i.symbol).value;let c=2;a?c=1:a=0,console.log("placing order: ",r,l,c===2?"Market":"Limit",e,o,a),this.appService.placeOrder(this.access_token,r,l,c,e,o,a,0).subscribe(u=>{console.log("app ocOrder",u),this.refreshAll(),u&&(f.requestStatusEvent$.next(r+" "+l+" "+(c===2?"Market":"Limit")+" "+u),this.appService.playAudio("success"))},u=>{console.log("app ocOrder error",u),f.requestStatusEvent$.next(u.error.message+", "+u.message),this.refreshAll(),this.appService.playAudio("error")})}isAnyOpenPosition(){let e=f.curr_positions_trades;if(e){for(let t=0;t<e.length;t++)if(e[t].exit===0)return!0}return!1}autoSuggest(){this.findInitialPositions(),this.checkAdjustments()}findInitialPositions(){if(this.suggestions=[],!this.isAnyOpenPosition())for(let e=this.oc_range_lower;e<=this.oc_range_higher;e+=this.oc_range_multiple){let t=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e,"CE");if(t>=16&&t<=28){let i=this.getGreeks(e,"CE").delta;if(i>0&&Math.abs(i)<1)for(let r=this.oc_range_lower;r<=this.oc_range_higher;r+=this.oc_range_multiple){let s=this.getGreeks(r,"PE").delta;if(Math.abs(i+s)<=.025){let o=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),r,"PE");o&&this.suggestions.push({strikeCE:e,deltaCE:i,ltpCE:t,strikePE:r,deltaPE:s,ltpPE:o})}}}}}checkAdjustments(){let e=f.curr_positions_trades,t=0,i=0,r=0,s=0,o=0,a=0;if(this.adjust_sugg=[],this.combined_premium=0,e){for(let l=0;l<e.length;l++){let c=e[l],u=new Date(this.oc_year,this.oc_month-1,this.oc_date),d=new Date(c.expiry);if(c.exit===0&&c.qty<0){let h="";c.scrip.includes("CE")&&(h="CE"),c.scrip.includes("PE")&&(h="PE");let p=c.scrip.slice(0,-2),g=this.getGreeks(p,h).delta*c.qty,A=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),p,h)*c.qty;h==="CE"?(i+=A,t+=g,r+=c.qty):h==="PE"&&(o+=A,s+=g,a+=c.qty)}}i!==0&&o!==0&&(i=i/r,o=o/a,this.combined_premium=i+o,this.combined_premium=Math.round((this.combined_premium+1e-5)*100)/100,this.combined_SL&&this.combined_premium>=this.combined_SL&&this.appService.playAudio("warn")),t!==0&&s!==0&&i&&o&&(t=t/r,s=s/a,Math.abs(t+s)>.04&&(this.roll("CE",s),this.roll("PE",t)))}}roll(e,t){for(let i=this.oc_range_lower;i<=this.oc_range_higher;i+=this.oc_range_multiple){let r=this.oc_instru+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),this.oc_instru)+i,s=this.getGreeks(i,e).delta;if(Math.abs(t+s)<=.025){let o=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),i,e);o&&this.adjust_sugg.push({action:"Adjust "+e,strike:i+e,ltp:o})}}}sortTableColumn(e){console.log("sort"),this.holdings.sort((t,i)=>t.scrip==="NIFTYBEES"?-1:i.scrip==="NIFTYBEES"?1:t[e]>i[e]?-1:t[e]<i[e]?1:0)}fetchStocks(){this.holdingsService.fetchStocksData()}loadHoldings(){let e=this.holdingsService.loadHoldings();this.portfolio_return=e.portfolio_return,this.holdings=e.holdings,this.total_inv=e.total_inv,this.current_val=e.current_val,console.log("stocks:",this.holdings)}backtestStocks(){this.holdingsService.backtestStocks()}exportBacktest(){this.holdingsService.exportBacktest()}isStockHolding(e){return!!f.holdings[e].avgp}updateOCRange(){this.oc_strikes=[];for(let e=this.oc_range_lower;e<=this.oc_range_higher;e+=this.oc_range_multiple)this.oc_strikes.push({symbol:this.oc_instru+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),this.oc_instru)+e,strike:e,inCurrStrategyCE:!1,inCurrStrategyPE:!1,addCEToOrders:!1,addPEToOrders:!1,qtyInputCE:200,qtyInputPE:200,volumeCE:0,volumePE:0,deltaCE:0,gammaCE:0,vegaCE:0,thetaCE:0,deltaPE:0,gammaPE:0,vegaPE:0,thetaPE:0,ltpCE:0,ltpPE:0,qtyCE:0,qtyPE:0,costCE:0,costPE:0,inlineStrategyPnLCE:"",inlineStrategyPnLPE:"",isSpot:!1,showNudge:!1});if(!f.isSimulatedStrategy){let e=[];this.oc_strikes.forEach(t=>{e.push(this.mapService.getSubscriptionObject(t.strike+"CE",this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date).toDateString())),e.push(this.mapService.getSubscriptionObject(t.strike+"PE",this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date).toDateString()))}),console.log("updateOCRange Subscriptions: "+e),this.appService.sendSubscriptions(e)}}updateOCValues(){this.oc_strikes&&this.oc_strikes.length>0&&this.oc_strikes.forEach(e=>{if(e.inCurrStrategyCE=this.isStrikeInCurrStrategy(e.strike+"CE"),e.inCurrStrategyPE=this.isStrikeInCurrStrategy(e.strike+"PE"),e.volumeCE=this.getVolume(e.symbol+"CE"),e.volumePE=this.getVolume(e.symbol+"PE"),e.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"CE"),e.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"PE"),e.qtyCE=this.getQtyOfStrikeInStrategy(e.strike+"CE"),e.qtyPE=this.getQtyOfStrikeInStrategy(e.strike+"PE"),e.costCE=this.getCostOfStrikeInStrategy(e.strike+"CE"),e.costPE=this.getCostOfStrikeInStrategy(e.strike+"PE"),e.isSpot=this.isSpotStrike(e.strike),e.showNudge=this.showOILimit(this.oc_instru,e.strike),this.show_greeks){let t=this.getGreeks(e.strike,"CE");e.deltaCE=t.delta,e.gammaCE=t.gamma,e.vegaCE=t.vega,e.thetaCE=t.theta;let i=this.getGreeks(e.strike,"PE");e.deltaPE=i.delta,e.gammaPE=i.gamma,e.vegaPE=i.vega,e.thetaPE=i.theta}})}showOILimit(e,t){return!!(e==="NIFTY"&&f.nfCEOILimit&&f.nfPEOILimit&&(t>f.nfCEOILimit||t<f.nfPEOILimit)||e==="BANKNIFTY"&&f.bnfCEOILimit&&f.bnfPEOILimit&&(t>f.bnfCEOILimit||t<f.bnfPEOILimit))}refreshInlineStategyPnL(){this.oc_strikes&&this.oc_strikes.length>0&&this.oc_strikes.forEach(e=>{e.inCurrStrategyCE=this.isStrikeInCurrStrategy(e.strike+"CE"),e.inCurrStrategyPE=this.isStrikeInCurrStrategy(e.strike+"PE"),e.volumeCE=this.getVolume(e.symbol+"CE"),e.volumePE=this.getVolume(e.symbol+"PE"),e.deltaCE=this.getGreeks(e.strike,"CE").delta,e.deltaPE=this.getGreeks(e.strike,"PE").delta,e.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"CE"),e.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"PE"),e.qtyCE=this.getQtyOfStrikeInStrategy(e.strike+"CE"),e.qtyPE=this.getQtyOfStrikeInStrategy(e.strike+"PE"),e.costCE=this.getCostOfStrikeInStrategy(e.strike+"CE"),e.costPE=this.getCostOfStrikeInStrategy(e.strike+"PE"),e.isSpot=this.isSpotStrike(e.strike);let t=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"CE"),i=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"PE"),r=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike+this.diff_strategy_pts,"CE"),s=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike-this.diff_strategy_pts,"PE"),o=this.oc_instru+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),this.oc_instru)+(e.strike-this.diff_strategy_pts)+"CE",a=this.oc_instru+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),this.oc_instru)+(e.strike+this.diff_strategy_pts)+"PE",l=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike-this.diff_strategy_pts,"CE"),c=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike+this.diff_strategy_pts,"PE"),u=t*this.qty_strategy_pts+r*-this.qty_strategy_pts,d=i*this.qty_strategy_pts+s*-this.qty_strategy_pts,h=Math.round(u),p=Math.round(d),g=Math.round(this.diff_strategy_pts*this.qty_strategy_pts-h),A=Math.round(this.diff_strategy_pts*this.qty_strategy_pts-p),v=t*-this.qty_strategy_pts+r*this.qty_strategy_pts/2+l*this.qty_strategy_pts/2,b=i*-this.qty_strategy_pts+s*this.qty_strategy_pts/2+c*this.qty_strategy_pts/2,E=Math.round(v),O=Math.round(b),T=Math.round(this.diff_strategy_pts*this.qty_strategy_pts/2-E),k=Math.round(this.diff_strategy_pts*this.qty_strategy_pts/2-O);e.inlineStrategyPnLCE="DS: "+g+" , "+h+`
Bfly: `+T+" , "+E,e.inlineStrategyPnLPE="DS: "+A+" , "+p+`
Bfly: `+k+" , "+O})}clearOC(){this.oc_strikes=[]}getSpotValue(){let e="";return this.oc_instru==="NIFTY"?e="NIFTY50":this.oc_instru==="BANKNIFTY"?e="BANKNIFTY":this.oc_instru==="FINNIFTY"?e="FINNIFTY":this.oc_instru==="MIDCPNIFTY"?e="MIDCPNIFTY":this.oc_instru==="SENSEX"?e="SENSEX":this.oc_instru==="BANKEX"?e="BANKEX":this.oc_instru==="USDINR"&&(e="USDINR"),this.mapService.getScripLTP(null,null,e,null)}updateSpotStrike(){let e="";this.oc_instru==="NIFTY"?e="NIFTY50":this.oc_instru==="BANKNIFTY"?e="BANKNIFTY":this.oc_instru==="FINNIFTY"?e="FINNIFTY":this.oc_instru==="MIDCPNIFTY"?e="MIDCPNIFTY":this.oc_instru==="SENSEX"?e="SENSEX":this.oc_instru==="BANKEX"?e="BANKEX":this.oc_instru==="USDINR"&&(e="USDINR");let t=this.mapService.getScripLTP(null,null,e,null),i=Math.round(t/this.oc_range_multiple)*this.oc_range_multiple;this.ocSpotStrike=i}isSpotStrike(e){return e===this.ocSpotStrike}getPosPnL(e){if(e.cmp){let t=null,i=0;if(e.realizedProfit&&(i=e.realizedProfit),e.netQty===0)return e.pnl;if(e.netQty>0){let r=(e.cmp-e.buyAvg)*e.netQty;t=i+r}else if(e.netQty<0){let r=(e.sellAvg-e.cmp)*-e.netQty;t=i+r}return e.scrip.includes("USDINR")&&(t*=1e3),e.pnl=Math.round((t+1e-5)*100)/100,e.pnl}else return e.pnl}getAtp(e){return this.mapService.getAtp(e)}getVolume(e){let t=this.mapService.getVolume(e);return t&&t.toLocaleString()}getOI(e){this.mapService.getOI(e)}getChgOI(e){this.mapService.getChgOI(e)}connectWS(){f.SocketMode=this.ws_vendor,this.appService.connectWebsocket(this.ws_access_token)}addOrdersToStrategy(){let e=[];this.orders.forEach(t=>{t.addToOrders&&e.push({scrip:t.scrip,price:t.tradedPrice,qty:t.qty,expiry:t.expiry})}),this.appService.payOffEvent$.next(e)}addPlaceOrders(){let e=[];this.oc_strikes.forEach(t=>{t.addCEToOrders&&(e.push({instru:this.oc_instru,strike:t.strike+"CE"}),t.addCEToOrders=!1),t.addPEToOrders&&(e.push({instru:this.oc_instru,strike:t.strike+"PE"}),t.addPEToOrders=!1)}),this.appService.placeOrdersEvent$.next(e)}calcMaxProfitLoss(){let e=[];this.maxProfit=0,this.maxLoss=0;let t=1e6;if(this.oc_strikes.forEach(i=>{i.addCEToOrders&&e.push(i.strike),i.addPEToOrders&&e.push(i.strike)}),e.sort((i,r)=>r-i),e.length===2||e.length===3){this.oc_strikes.forEach(r=>{if(r.addCEToOrders){let s=r.ltpCE*r.qtyInputCE;this.maxLoss+=s,Math.abs(r.qtyInputCE)<t&&(t=Math.abs(r.qtyInputCE))}if(r.addPEToOrders){let s=r.ltpPE*r.qtyInputPE;this.maxLoss+=s,Math.abs(r.qtyInputPE)<t&&(t=Math.abs(r.qtyInputPE))}});let i=-1;for(let r=0;r<e.length-1;r++){let s=e[r]-e[r+1];s>i&&(i=s)}this.maxProfit=i*t-this.maxLoss,this.profitLossRatio=this.maxProfit/this.maxLoss,this.profitLossRatio=Math.round((this.profitLossRatio+1e-5)*100)/100}if(e.length===4){this.oc_strikes.forEach(r=>{if(r.addCEToOrders){let s=r.ltpCE*r.qtyInputCE;this.maxProfit+=s,Math.abs(r.qtyInputCE)<t&&(t=Math.abs(r.qtyInputCE))}if(r.addPEToOrders){let s=r.ltpPE*r.qtyInputPE;this.maxProfit+=s,Math.abs(r.qtyInputPE)<t&&(t=Math.abs(r.qtyInputPE))}});let i=-1;for(let r=0;r<e.length-1;r++){let s=e[r]-e[r+1];s>i&&(i=s)}console.log("strikes, maxdiff, qty",e,i,t),this.maxProfit=Math.abs(this.maxProfit),this.maxLoss=i*t-this.maxProfit,this.profitLossRatio=this.maxProfit/this.maxLoss,this.profitLossRatio=Math.round((this.profitLossRatio+1e-5)*100)/100}}startMonitoringGreeks(){let e=new Date;e.setHours(19,37,0),this.greeksMonitoringIntervalInitial=setInterval(()=>{let t=new Date;console.log("Finding greeks start time ",e,t),t>=e&&(console.log("Found start time ",e),clearInterval(this.greeksMonitoringIntervalInitial),this.nextGreeksTime=t,this.nextGreeksTime.setMinutes(t.getMinutes()+1,0),this.setInitialGreeksData(),this.recordGreeks())},1e3)}setInitialGreeksData(){let e="NIFTY",t=50,i=this.mapService.getScripLTP(null,null,"NIFTY50",null),r=Math.round(i/t)*t,s=e+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),e)+r,o=this.getGreeks(r,"CE");this.initialGreeksData.set("CE",o);let a=this.getGreeks(r,"PE");this.initialGreeksData.set("PE",a),console.log("Initial greeks for ",r,this.initialGreeksData)}recordGreeks(){console.log("Recording greeks"),this.greeksMonitoringIntervalInitial=setInterval(()=>{new Date>=this.nextGreeksTime&&(console.log("Found next time ",this.nextGreeksTime),this.nextGreeksTime.setMinutes(this.nextGreeksTime.getMinutes()+1,0),this.getGreeksSum())},1e3)}getGreeksSum(){let e=new Date,t=[e.getHours(),e.getMinutes()].join(":"),i="NIFTY",r=50,s=this.mapService.getScripLTP(null,null,"NIFTY50",null),o=Math.round(s/r)*r,a=o+500,l=o-500,c=0,u=0,d=0,h=0,p=0,g=0;for(let v=a;v>=o;v-=r){let b=i+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),i)+v,E=this.getGreeks(v,"CE"),O=this.initialGreeksData.get("CE").vega-E.vega;c+=O;let T=this.initialGreeksData.get("CE").delta-E.delta;d+=T;let k=this.initialGreeksData.get("CE").theta-E.theta;p+=k}for(let v=l;v<=o;v+=r){let b=i+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),i)+v,E=this.getGreeks(v,"PE"),O=this.initialGreeksData.get("PE").vega-E.vega;u+=O;let T=this.initialGreeksData.get("PE").delta-E.delta;h+=T;let k=this.initialGreeksData.get("PE").theta-E.theta;g+=k}let A={CE:{delta:d,gamma:0,vega:c,theta:p},PE:{delta:h,gamma:0,vega:u,theta:g}};this.greeksData.set(t,A),console.log("greeksData",this.greeksData)}static \u0275fac=function(t){return new(t||n)(Ae(mr),Ae(En),Ae(qe),Ae(Dr),Ae(Dc),Ae(Cc),Ae(Ii),Ae(Hm),Ae(fn),Ae(xc),Ae(Ym))};static \u0275cmp=ji({type:n,selectors:[["app-root"]],decls:385,vars:66,consts:[["fileImportInputNSEOC",""],["fileImportInputExpiry",""],[1,"main-content"],[1,"alertMessage"],[4,"ngFor","ngForOf"],[1,"d-flex","mb-4","align-items-center"],["placeholder","Baby First Name",1,"form-control","form-control-sm","me-2",3,"ngModelChange","keyup","ngModel"],["placeholder","Surname",1,"form-control","form-control-sm","me-2",3,"ngModelChange","keyup","ngModel"],[1,"top-content","d-flex"],[1,"me-auto"],["type","button",1,"btn","btn-link",3,"click"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],["type","file","name","File Upload NSE OC",2,"display","none",3,"change"],[1,"confirmation-check","form-check-inline","mt-0"],["type","radio","name","ws_vendor","value","zerodha","id","zerodha_ws",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","zerodha_ws",1,"form-check-label"],["type","radio","name","ws_vendor","value","aliceblue","id","aliceblue_ws",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","aliceblue_ws",1,"form-check-label"],[4,"ngIf"],["type","file","name","File Upload Master Contract",2,"display","none",3,"change"],["type","button","class","btn btn-link",3,"click",4,"ngIf"],[1,"confirmation-check","form-check","mt-2"],["type","radio","name","auth_radio","value","1","id","auth_select_1",1,"form-check-input","me-1",3,"ngModelChange","change","ngModel"],["placeholder","Authorization 1",1,"form-control","me-2",2,"max-width","1000px","display","inline-block",3,"ngModelChange","ngModel"],["type","radio","name","auth_radio","value","2","id","auth_select_2",1,"form-check-input","me-1",3,"ngModelChange","change","ngModel"],["placeholder","Authorization 2",1,"form-control","me-2",2,"max-width","1000px","display","inline-block",3,"ngModelChange","ngModel"],[1,"d-flex"],[1,""],[1,"table","table-sm","table-bordered","mb-0",2,"width","200px"],[2,"width","50%"],[1,"ms-1"],[1,"form-check-inline","mt-4"],["type","checkbox","value","","name","log_ws_feed","id","log_ws_feed",1,"form-check-input","me-2",3,"ngModelChange","change","ngModel"],["for","log_ws_feed",1,"form-check-label","me-1"],["placeholder","Expiry YYYY-MM-DD",1,"d-inline","form-control","form-control-sm",2,"width","100px",3,"ngModelChange","ngModel"],[1,"d-inline","ms-3"],["id","accordionStocks",1,"accordion","mt-4"],[1,"accordion-item"],["id","headingStocks",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseStock","aria-expanded","false","aria-controls","collapseStock",1,"accordion-button","fw-bold","collapsed"],["id","collapseStock","aria-labelledby","headingStocks","data-bs-parent","#accordionStocks",1,"accordion-collapse","collapse"],[1,"accordion-body"],[2,"margin-top","0.5rem"],["type","button",1,"btn","btn-secondary","btn-sm","refresh-btn",3,"click"],[1,"flex-container"],[1,"positions_div"],[1,"table-title"],[1,"fw-bold"],[1,"ms-auto","float-end"],[1,"form-check-inline"],["for","hide-positions",1,"form-check-label","me-1"],["type","checkbox","value","","name","hide-positions","id","hide-positions",1,"form-check-input","me-2",3,"ngModelChange","ngModel"],["for","hide-exited-positions",1,"form-check-label","me-1"],["type","checkbox","value","","name","hide-exited-ositions","id","hide-exited-positions",1,"form-check-input","me-2",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-secondary","btn-sm","refresh-btn","me-1",3,"click"],["type","button",1,"btn","btn-secondary","btn-sm","refresh-btn",3,"click","disabled"],[1,"table","table-sm","table-bordered","shadow","text-center"],[1,"table-light"],["scope","col"],[1,"orderbook_div"],["for","hide-orders",1,"form-check-label","me-1"],["type","checkbox","value","","id","hide-orders",1,"form-check-input",3,"ngModelChange","ngModel"],["for","orders-update",1,"form-check-label","me-1"],["type","checkbox","value","","id","orders-updates",1,"form-check-input",3,"ngModelChange","ngModel"],["for","latest-ten",1,"form-check-label","me-1"],["type","checkbox","value","","id","latest-ten",1,"form-check-input",3,"change","ngModelChange","ngModel"],["class","algo-suggestions-main shadow-sm p-3 mb-5 bg-white",4,"ngIf"],[2,"width","50% !important"],[1,"option-chain"],[1,"new-input","form-select","form-select-sm",3,"ngModelChange","ngModel"],["value","NIFTY"],["value","BANKNIFTY"],["value","FINNIFTY"],["value","MIDCPNIFTY"],["value","SENSEX"],["value","USDINR"],["id","strategy-qty","type","number","placeholder","Qty Default",1,"ms-2","form-control","form-control-sm",2,"display","inline","width","70px",3,"ngModelChange","ngModel"],[2,"display","inline-block","margin-left","20px","margin-right","10px"],[1,"input-group","input-group-sm","new-input-prepend-expiry"],[1,"input-group-prepend"],[1,"input-group-text"],["type","number",1,"form-control",3,"ngModelChange","ngModel"],[1,"input-group","input-group-sm","new-input-prepend-oc"],["type","number","min","0","step","50",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","50","step","50",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],["type","button",1,"btn","btn-secondary","btn-sm","ms-1",3,"click"],[1,"confirmation-check","form-check-inline","ms-2"],["type","checkbox","value","","id","show_greeks",1,"form-check-input",3,"ngModelChange","ngModel"],["for","show_greeks",1,"form-check-label","ms-1"],["id","strategypoints-qty","type","number","placeholder","Qty Points",1,"me-1","form-control","form-control-sm",2,"display","inline","width","70px",3,"ngModelChange","ngModel"],["id","strategypoints-diff","type","number","placeholder","Diff Points",1,"me-1","form-control","form-control-sm",2,"display","inline","width","70px",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-secondary","btn-sm","ms-1","me-1",3,"click"],[1,"table","table-sm","table-bordered","shadow","mb-0","text-center"],[1,"text-center"],["colspan","4","scope","col"],["scope","col",1,"oc-col-actions"],["scope","col",1,"oc-col"],["class","oc-col","scope","col",4,"ngIf"],["scope","col",1,"text-center"],["id","accordionHistorical",1,"accordion","mb-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#historicalSection","aria-expanded","false","aria-controls","historicalSection",1,"accordion-button","collapsed","fw-bold"],["id","historicalSection","aria-labelledby","headingStocks","data-bs-parent","#accordionHistorical",1,"accordion-collapse","collapse","p-2"],[1,"historical_input","mb-2"],["for","historical_append",1,"historical_label"],["name","historical_append","placeholder","historical_append",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","zerodha_auth",1,"historical_label"],["name","zerodha_auth","placeholder","zerodha_auth",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","zerodha_from_date",1,"historical_label"],["name","zerodha_from_date","placeholder","zerodha_from_date",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","zerodha_to_date",1,"historical_label"],["name","zerodha_to_date","placeholder","zerodha_to_date",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","zerodha_expiry_date",1,"historical_label"],["name","zerodha_expiry_date","placeholder","zerodha_expiry_date",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["value","CNXBAN"],["value","NIFFIN"],["for","historical_date",1,"historical_label"],["name","historical_date","placeholder","historical_date",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","historical_upper",1,"historical_label"],["name","historical_upper","type","number","placeholder","historical_upper",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","historical_lower",1,"historical_label"],["name","historical_lower","type","number","placeholder","historical_lower",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["id","accordionHoldings",1,"accordion","mb-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#holdingsSection","aria-expanded","true","aria-controls","holdingsSection",1,"accordion-button","collapsed","fw-bold"],["id","holdingsSection","aria-labelledby","headingStocks","data-bs-parent","#accordionHoldings",1,"accordion-collapse","collapse","p-2"],["scope","col",1,"oc-col",3,"click"],[3,"closed","type"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"form-check-inline","posCheckbox"],["type","checkbox","value","",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],[1,"algo-suggestions-main","shadow-sm","p-3","mb-5","bg-white"],[1,"me-2"],[1,"fw-bold",3,"ngClass"],["class","suggest-positions",4,"ngFor","ngForOf"],[1,"ms-4","me-3"],["type","number","placeholder","Combined SL",1,"ms-2","form-control","form-control-sm",2,"width","70px","display","inline",3,"ngModelChange","ngModel"],[1,"suggest-positions"],[1,"positions-row-actions"],[1,"form-check-inline","posCheckbox","me-1"],["type","checkbox","value","",1,"form-check-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Qty",1,"pos-input","form-control","form-control-sm",3,"ngModelChange","ngModel","id"],["type","button",1,"btn","btn-secondary","btn-sm","me-1",3,"click"],[2,"white-space","pre-line","width","124px",3,"ngClass"],[3,"ngClass",4,"ngIf"],[1,"text-primary","fw-bold",3,"ngClass"],["class","ocStrategyStrikeQty",4,"ngIf"],[1,"fw-bold","text-center",3,"ngClass"],["class","ocStrategyStrikeQty oc-strike-spot",4,"ngIf"],["style","color: orange;",4,"ngIf"],[1,"greeksOC"],[1,"ocStrategyStrikeQty"],[1,"ocStrategyStrikeQty","oc-strike-spot"],[2,"color","orange"]],template:function(t,i){if(t&1){let r=ge();m(0,"div",2)(1,"div",3),te(2,jne,3,2,"p",4),_(),m(3,"div",5)(4,"input",6),U("ngModelChange",function(o){return C(r),z(i.baby_name,o)||(i.baby_name=o),x(o)}),j("keyup",function(o){return C(r),x(i.calcBabyName(o))}),_(),m(5,"input",7),U("ngModelChange",function(o){return C(r),z(i.baby_surname,o)||(i.baby_surname=o),x(o)}),j("keyup",function(o){return C(r),x(i.calcBabyName(o))}),_(),m(6,"span"),w(7),_()(),m(8,"div"),w(9,"Disclaimer: The application is only for my personal use and not for any commercial purposes."),_(),m(10,"div",8)(11,"div",9)(12,"div")(13,"span"),w(14,"Fetch NSE OC:"),_(),m(15,"button",10),j("click",function(){return C(r),x(i.getNSE_OC("NIFTY50"))}),w(16,"NIFTY"),_(),m(17,"button",10),j("click",function(){return C(r),x(i.getNSE_OC("BANKNIFTY"))}),w(18,"BANKNIFTY"),_(),m(19,"button",10),j("click",function(){return C(r),x(i.getNSE_OC("FINNIFTY"))}),w(20,"FINNIFTY"),_(),m(21,"button",11),j("click",function(){C(r);let o=$n(24);return x(o.click())}),w(22,"\u2191"),_(),m(23,"input",12,0),j("change",function(o){return C(r),x(i.uploadNSEOC(o))}),_()(),m(25,"div",13)(26,"input",14),U("ngModelChange",function(o){return C(r),z(i.ws_vendor,o)||(i.ws_vendor=o),x(o)}),_(),m(27,"label",15),w(28,"Zerodha"),_()(),m(29,"div",13)(30,"input",16),U("ngModelChange",function(o){return C(r),z(i.ws_vendor,o)||(i.ws_vendor=o),x(o)}),_(),m(31,"label",17),w(32,"Aliceblue"),_()(),m(33,"button",10),j("click",function(){return C(r),x(i.establishWSVendor())}),w(34,"Fetch & Connect"),_(),m(35,"button",10),j("click",function(){C(r);let o=$n(40);return x(o.click())}),w(36,"Import & Connect"),_(),te(37,Wne,2,0,"span",18)(38,Une,2,0,"span",18),m(39,"input",19,1),j("change",function(o){return C(r),x(i.import_establishWSVendor(o))}),_(),m(41,"div")(42,"span"),w(43),_(),te(44,zne,2,0,"button",20),_(),m(45,"div"),te(46,Hne,2,0,"span",18)(47,Yne,2,0,"span",18)(48,Gne,2,0,"button",20),m(49,"button",10),j("click",function(){return C(r),x(i.reopenWebsocket())}),w(50,"Connect"),_()(),m(51,"div",21)(52,"input",22),U("ngModelChange",function(o){return C(r),z(i.auth_acc,o)||(i.auth_acc=o),x(o)}),j("change",function(o){return C(r),x(i.auth_radio_change(o))}),_(),m(53,"input",23),j("ngModelChange",function(o){return C(r),x(i.auth_change_num(o,"1"))}),U("ngModelChange",function(o){return C(r),z(i.auth_acc_1,o)||(i.auth_acc_1=o),x(o)}),_()(),m(54,"div",21)(55,"input",24),U("ngModelChange",function(o){return C(r),z(i.auth_acc,o)||(i.auth_acc=o),x(o)}),j("change",function(o){return C(r),x(i.auth_radio_change(o))}),_(),m(56,"input",25),j("ngModelChange",function(o){return C(r),x(i.auth_change_num(o,"2"))}),U("ngModelChange",function(o){return C(r),z(i.auth_acc_2,o)||(i.auth_acc_2=o),x(o)}),_()()(),m(57,"div")(58,"div",26)(59,"div",27)(60,"table",28)(61,"tbody")(62,"tr")(63,"td",29),w(64,"Nifty"),_(),m(65,"td"),w(66),_()()()()(),m(67,"div",30)(68,"table",28)(69,"tbody")(70,"tr")(71,"td",29),w(72,"BNF"),_(),m(73,"td"),w(74),_()()()()(),m(75,"div",30)(76,"table",28)(77,"tbody")(78,"tr")(79,"td",29),w(80,"Finnifty"),_(),m(81,"td"),w(82),_()()()()()(),m(83,"div",31)(84,"input",32),U("ngModelChange",function(o){return C(r),z(i.log_ws_feed,o)||(i.log_ws_feed=o),x(o)}),j("change",function(){return C(r),x(i.log_ws_feed_change())}),_(),m(85,"label",33),w(86,"Log WS Feed"),_()(),m(87,"button",10),j("click",function(){return C(r),x(i.exportLongTermOptions())}),w(88,"Export Long Term Nifty"),_(),m(89,"input",34),U("ngModelChange",function(o){return C(r),z(i.longTermExpiryExport,o)||(i.longTermExpiryExport=o),x(o)}),_(),m(90,"div",35),w(91),_()()(),m(92,"div",36)(93,"div",37)(94,"h2",38)(95,"button",39),w(96," Stocks "),_()(),m(97,"div",40)(98,"div",41),Ze(99,"app-stocks"),_()()()(),Ze(100,"hr",42),m(101,"button",43),j("click",function(){return C(r),x(i.refreshAll())}),w(102,"Refresh All"),_(),m(103,"span"),w(104),_(),m(105,"div",44)(106,"div",45)(107,"div",46)(108,"span",47),w(109,"Positions"),_(),m(110,"div",48)(111,"div",49)(112,"label",50),w(113,"Hide"),_(),m(114,"input",51),U("ngModelChange",function(o){return C(r),z(i.hide_positions,o)||(i.hide_positions=o),x(o)}),_()(),m(115,"div",49)(116,"label",52),w(117,"Hide Exited"),_(),m(118,"input",53),U("ngModelChange",function(o){return C(r),z(i.hide_exited_positions,o)||(i.hide_exited_positions=o),x(o)}),_()(),m(119,"button",54),j("click",function(){return C(r),x(i.getPositions())}),w(120,"Refresh"),_(),m(121,"button",55),j("click",function(){return C(r),x(i.exitSelected())}),w(122,"Exit selected"),_()()(),m(123,"table",56)(124,"thead",57)(125,"tr")(126,"th",58),w(127,"Instru"),_(),m(128,"th",58),w(129,"Scrip"),_(),m(130,"th",58),w(131,"NetQty"),_(),m(132,"th",58),w(133,"BuyAvg"),_(),m(134,"th",58),w(135,"SellAvg"),_()()(),te(136,$ne,2,1,"tbody",18),_()(),m(137,"div",59)(138,"div",46)(139,"div",26)(140,"span",47),w(141,"Orders"),_(),m(142,"span"),w(143),_(),m(144,"div",48)(145,"div",49)(146,"label",60),w(147,"Hide"),_(),m(148,"input",61),U("ngModelChange",function(o){return C(r),z(i.hide_orders,o)||(i.hide_orders=o),x(o)}),_()(),m(149,"div",49)(150,"label",62),w(151,"Auto-Update"),_(),m(152,"input",63),U("ngModelChange",function(o){return C(r),z(i.orders_update,o)||(i.orders_update=o),x(o)}),_()(),m(153,"div",49)(154,"label",64),w(155,"Latest 10"),_(),m(156,"input",65),j("change",function(o){return C(r),x(i.changeLatestTen(o))}),U("ngModelChange",function(o){return C(r),z(i.latest_ten,o)||(i.latest_ten=o),x(o)}),_()(),m(157,"button",54),j("click",function(){return C(r),x(i.getOrders())}),w(158,"Refresh"),_(),m(159,"button",43),j("click",function(){return C(r),x(i.addOrdersToStrategy())}),w(160,"Add to Strategy"),_()()()(),m(161,"table",56)(162,"thead",57)(163,"tr"),Ze(164,"th"),m(165,"th",58),w(166,"Time"),_(),m(167,"th",58),w(168,"Expiry"),_(),m(169,"th",58),w(170,"Instru"),_(),m(171,"th",58),w(172,"Scrip"),_(),m(173,"th",58),w(174,"Qty"),_(),m(175,"th",58),w(176,"Price"),_(),m(177,"th",58),w(178,"Status"),_(),m(179,"th",58),w(180,"Tags"),_(),m(181,"th",58),w(182,"GUID"),_(),m(183,"th",58),w(184,"OrderId"),_(),m(185,"th",58),w(186,"Message"),_()()(),te(187,Qne,2,1,"tbody",18),_()()(),te(188,tie,12,10,"div",66),Ze(189,"app-chart",67)(190,"hr"),m(191,"div",68)(192,"select",69),U("ngModelChange",function(o){return C(r),z(i.oc_instru,o)||(i.oc_instru=o),x(o)}),m(193,"option",70),w(194,"NIFTY"),_(),m(195,"option",71),w(196,"BANKNIFTY"),_(),m(197,"option",72),w(198,"FINNIFTY"),_(),m(199,"option",73),w(200,"MIDCPNIFTY"),_(),m(201,"option",74),w(202,"SENSEX"),_(),m(203,"option",75),w(204,"USDINR"),_()(),m(205,"input",76),U("ngModelChange",function(o){return C(r),z(i.qty_default,o)||(i.qty_default=o),x(o)}),_(),m(206,"div",77),w(207,"Expiry: "),_(),m(208,"div",78)(209,"div",79)(210,"div",80),w(211,"Year"),_()(),m(212,"input",81),U("ngModelChange",function(o){return C(r),z(i.oc_year,o)||(i.oc_year=o),x(o)}),_()(),m(213,"div",78)(214,"div",79)(215,"div",80),w(216,"Month"),_()(),m(217,"input",81),U("ngModelChange",function(o){return C(r),z(i.oc_month,o)||(i.oc_month=o),x(o)}),_()(),m(218,"div",78)(219,"div",79)(220,"div",80),w(221,"Date"),_()(),m(222,"input",81),U("ngModelChange",function(o){return C(r),z(i.oc_date,o)||(i.oc_date=o),x(o)}),_()(),m(223,"div",77),w(224,"Strike range: "),_(),m(225,"div",82)(226,"div",79)(227,"div",80),w(228,"Higher"),_()(),m(229,"input",83),U("ngModelChange",function(o){return C(r),z(i.oc_range_higher,o)||(i.oc_range_higher=o),x(o)}),_()(),m(230,"div",82)(231,"div",79)(232,"div",80),w(233,"Lower"),_()(),m(234,"input",83),U("ngModelChange",function(o){return C(r),z(i.oc_range_lower,o)||(i.oc_range_lower=o),x(o)}),_()(),m(235,"div",82)(236,"div",79)(237,"div",80),w(238,"Multiple"),_()(),m(239,"input",84),U("ngModelChange",function(o){return C(r),z(i.oc_range_multiple,o)||(i.oc_range_multiple=o),x(o)}),_()(),m(240,"button",85),j("click",function(){return C(r),x(i.updateOCRange())}),w(241,"Update"),_(),m(242,"button",86),j("click",function(){return C(r),x(i.clearOC())}),w(243,"Clear"),_(),m(244,"button",86),j("click",function(){return C(r),x(i.addPlaceOrders())}),w(245,"Add - Place Orders"),_(),m(246,"div",87)(247,"input",88),U("ngModelChange",function(o){return C(r),z(i.show_greeks,o)||(i.show_greeks=o),x(o)}),_(),m(248,"label",89),w(249,"Greeks"),_()(),m(250,"div")(251,"input",90),U("ngModelChange",function(o){return C(r),z(i.qty_strategy_pts,o)||(i.qty_strategy_pts=o),x(o)}),_(),m(252,"input",91),U("ngModelChange",function(o){return C(r),z(i.diff_strategy_pts,o)||(i.diff_strategy_pts=o),x(o)}),_(),m(253,"button",85),j("click",function(){return C(r),x(i.refreshInlineStategyPnL())}),w(254,"P&L"),_(),m(255,"button",92),j("click",function(){return C(r),x(i.calcMaxProfitLoss())}),w(256,"Sel. P&L"),_(),m(257,"span"),w(258),_()(),m(259,"table",93)(260,"thead",57)(261,"tr",94)(262,"th",95),w(263,"Calls"),_(),Ze(264,"th",58),m(265,"th",95),w(266,"Puts"),_()(),m(267,"tr"),Ze(268,"th",96)(269,"th",97),m(270,"th",97),w(271,"Volume"),_(),te(272,nie,2,0,"th",98),m(273,"th",97),w(274,"LTP"),_(),m(275,"th",99),w(276,"Strike"),_(),m(277,"th",97),w(278,"LTP"),_(),te(279,iie,2,0,"th",98),m(280,"th",97),w(281,"Volume"),_(),Ze(282,"th",97)(283,"th",96),_()(),m(284,"tbody"),te(285,uie,39,49,"tr",4),_()()(),Ze(286,"hr"),m(287,"div",100)(288,"div",37)(289,"h2",38)(290,"button",101),w(291," Historical "),_()(),m(292,"div",102),w(293," For Weekly expiry, enter WK in append field. By default, Nifty/BNF expiries dates will be shown. For Finnifty, update the date fields. "),m(294,"div",103)(295,"label",104),w(296,"Append"),_(),m(297,"input",105),U("ngModelChange",function(o){return C(r),z(i.historical_append,o)||(i.historical_append=o),x(o)}),_()(),m(298,"div",103)(299,"label",106),w(300,"Authorization"),_(),m(301,"input",107),U("ngModelChange",function(o){return C(r),z(i.zerodha_auth,o)||(i.zerodha_auth=o),x(o)}),_()(),m(302,"div",103)(303,"label",108),w(304,"From Date"),_(),m(305,"input",109),U("ngModelChange",function(o){return C(r),z(i.zerodha_from_date,o)||(i.zerodha_from_date=o),x(o)}),_()(),m(306,"div",103)(307,"label",110),w(308,"To Date"),_(),m(309,"input",111),U("ngModelChange",function(o){return C(r),z(i.zerodha_to_date,o)||(i.zerodha_to_date=o),x(o)}),_()(),m(310,"div",103)(311,"label",112),w(312,"Expiry Date"),_(),m(313,"input",113),U("ngModelChange",function(o){return C(r),z(i.zerodha_expiry_date,o)||(i.zerodha_expiry_date=o),x(o)}),_()(),m(314,"div"),w(315,'Third Party: Update Append, Expiry date, instru, Date, upper range and lower range. See the range of instru for the period you want. In one call, 2.5 days data is received. See the day upto which data is received in response payload. Then update "Date" to this date.'),_(),m(316,"select",114),U("ngModelChange",function(o){return C(r),z(i.historical_instru,o)||(i.historical_instru=o),x(o)}),m(317,"option",70),w(318,"NIFTY"),_(),m(319,"option",115),w(320,"BANKNIFTY"),_(),m(321,"option",116),w(322,"FINNIFTY"),_()(),m(323,"div",103)(324,"label",117),w(325,"Date"),_(),m(326,"input",118),U("ngModelChange",function(o){return C(r),z(i.historical_date,o)||(i.historical_date=o),x(o)}),_()(),m(327,"div",103)(328,"label",119),w(329,"Upper Range"),_(),m(330,"input",120),U("ngModelChange",function(o){return C(r),z(i.historical_upper,o)||(i.historical_upper=o),x(o)}),_()(),m(331,"div",103)(332,"label",121),w(333,"Lower Range"),_(),m(334,"input",122),U("ngModelChange",function(o){return C(r),z(i.historical_lower,o)||(i.historical_lower=o),x(o)}),_()(),m(335,"button",10),j("click",function(){return C(r),x(i.fetchHistorical())}),w(336,"Fetch Historical"),_(),m(337,"button",10),j("click",function(){return C(r),x(i.fetchHistoricalThirdParty())}),w(338,"Fetch Historical Third Party"),_(),m(339,"button",10),j("click",function(){return C(r),x(i.exportHistorical())}),w(340,"Export"),_()()()(),m(341,"div",123)(342,"div",37)(343,"h2",38)(344,"button",124),w(345," Stocks - old "),_()(),m(346,"div",125)(347,"div"),w(348),_(),m(349,"table",93)(350,"thead",57)(351,"tr")(352,"th",97),w(353,"Scrip"),_(),m(354,"th",97),w(355,"LTP"),_(),m(356,"th",126),j("click",function(){return C(r),x(i.sortTableColumn("oned"))}),w(357,"1D%"),_(),m(358,"th",126),j("click",function(){return C(r),x(i.sortTableColumn("onew"))}),w(359,"1W%"),_(),m(360,"th",126),j("click",function(){return C(r),x(i.sortTableColumn("onem"))}),w(361,"1M%"),_(),m(362,"th",126),j("click",function(){return C(r),x(i.sortTableColumn("threem"))}),w(363,"3M%"),_(),m(364,"th",126),j("click",function(){return C(r),x(i.sortTableColumn("fiftytwow"))}),w(365,"52W H%"),_(),m(366,"th",126),j("click",function(){return C(r),x(i.sortTableColumn("avgp"))}),w(367,"Avg%"),_(),m(368,"th",126),j("click",function(){return C(r),x(i.sortTableColumn("support"))}),w(369,"Support"),_(),m(370,"th",126),j("click",function(){return C(r),x(i.sortTableColumn("resistance"))}),w(371,"Resistance"),_(),m(372,"th",126),j("click",function(){return C(r),x(i.sortTableColumn("buyvalue"))}),w(373,"BuyValue"),_()()(),m(374,"tbody"),te(375,die,23,54,"tr",4),_()(),m(376,"button",10),j("click",function(){return C(r),x(i.fetchStocks())}),w(377,"Fetch Stocks data"),_(),m(378,"button",10),j("click",function(){return C(r),x(i.loadHoldings())}),w(379,"Load"),_(),m(380,"button",10),j("click",function(){return C(r),x(i.backtestStocks())}),w(381,"Backtest"),_(),m(382,"button",10),j("click",function(){return C(r),x(i.exportBacktest())}),w(383,"Export Backtest"),_()()()()(),Ze(384,"router-outlet")}t&2&&(y(2),V("ngForOf",i.alerts),y(2),W("ngModel",i.baby_name),y(),W("ngModel",i.baby_surname),y(2),X(i.babyNameNumber),y(19),W("ngModel",i.ws_vendor),y(4),W("ngModel",i.ws_vendor),y(7),V("ngIf",i.ws_vendor==="zerodha"),y(),V("ngIf",i.ws_vendor==="aliceblue"),y(5),X(i.getMastersStatus()),y(),V("ngIf",!i.access_token),y(2),V("ngIf",i.isSocketConnected()),y(),V("ngIf",!i.isSocketConnected()),y(),V("ngIf",i.isSocketConnected()),y(4),W("ngModel",i.auth_acc),y(),W("ngModel",i.auth_acc_1),y(2),W("ngModel",i.auth_acc),y(),W("ngModel",i.auth_acc_2),y(10),X(i.getInstruLTP("NIFTY50")),y(8),X(i.getInstruLTP("BANKNIFTY")),y(8),X(i.getInstruLTP("FINNIFTY")),y(2),W("ngModel",i.log_ws_feed),y(5),W("ngModel",i.longTermExpiryExport),y(2),li("Bees ratio: ",i.getBeesRatio()," : ",i.getInstruLTP("NIFTYBEES"),""),y(13),li("Positions last update: ",i.lastPositionsUpdateTime," | Orders last update: ",i.lastOrdersUpdateTime,""),y(10),W("ngModel",i.hide_positions),y(4),W("ngModel",i.hide_exited_positions),y(3),V("disabled",i.disable_order_buttons),y(15),V("ngIf",!i.hide_positions),y(7),J("\xA0 (",i.completeOrders,")"),y(5),W("ngModel",i.hide_orders),y(4),W("ngModel",i.orders_update),y(4),W("ngModel",i.latest_ten),y(31),V("ngIf",!i.hide_orders),y(),V("ngIf",!1),y(4),W("ngModel",i.oc_instru),y(13),W("ngModel",i.qty_default),y(7),W("ngModel",i.oc_year),y(5),W("ngModel",i.oc_month),y(5),W("ngModel",i.oc_date),y(7),W("ngModel",i.oc_range_higher),y(5),W("ngModel",i.oc_range_lower),y(5),W("ngModel",i.oc_range_multiple),y(8),W("ngModel",i.show_greeks),y(4),W("ngModel",i.qty_strategy_pts),y(),W("ngModel",i.diff_strategy_pts),y(6),vu("Profit: ",i.maxProfit,", Loss: ",i.maxLoss,", Ratio: ",i.profitLossRatio,""),y(14),V("ngIf",i.show_greeks),y(7),V("ngIf",i.show_greeks),y(6),V("ngForOf",i.oc_strikes),y(12),W("ngModel",i.historical_append),y(4),W("ngModel",i.zerodha_auth),y(4),W("ngModel",i.zerodha_from_date),y(4),W("ngModel",i.zerodha_to_date),y(4),W("ngModel",i.zerodha_expiry_date),y(3),W("ngModel",i.historical_instru),y(10),W("ngModel",i.historical_date),y(4),W("ngModel",i.historical_upper),y(4),W("ngModel",i.historical_lower),y(14),vu("Portfolio return: ",i.portfolio_return,"% Total inv.: ",i.total_inv," Current val.: ",i.current_val,""),y(27),V("ngForOf",i.holdings))},dependencies:[Gu,HN,zN,jm,zm,nc,Mg,Tg,Ys,Qo,Zo,tc,qd,ec,iw,Xo,Ms,Eo,Es,Mo],styles:["[_nghost-%COMP%], input[_ngcontent-%COMP%], .input-group-text[_ngcontent-%COMP%], select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-size:12px!important}button[_ngcontent-%COMP%]{margin-top:-4px}.greeksOC[_ngcontent-%COMP%]{display:block}.alertMessage[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0;z-index:999}.stockHolding[_ngcontent-%COMP%]{color:#00f}.green[_ngcontent-%COMP%]{color:green}.red[_ngcontent-%COMP%]{color:tomato}.blue[_ngcontent-%COMP%]{color:#00f}.bold-higher[_ngcontent-%COMP%]{font-weight:700;font-size:12px!important}.historical_label[_ngcontent-%COMP%]{margin-bottom:0!important}.algo-suggestions-main[_ngcontent-%COMP%]{position:sticky;top:0;z-index:999}.suggest-positions[_ngcontent-%COMP%]{border:1px solid #b5b5b5;padding:5px;border-radius:5px;margin-right:15px;font-weight:700}table[_ngcontent-%COMP%]{background-color:#fff;border:2px solid #dee2e6}.ocStrategyStrikeQty[_ngcontent-%COMP%]{font-size:.6rem;color:#000}.oc-strike[_ngcontent-%COMP%]{background-color:#e9ecef;width:60px}.oc-strike-spot[_ngcontent-%COMP%]{width:60px;margin:0 auto}.oc-col-actions[_ngcontent-%COMP%]{width:19rem}.oc-col[_ngcontent-%COMP%]{width:5rem}.lastRequestStatus[_ngcontent-%COMP%]{margin-top:10px}.main-content[_ngcontent-%COMP%]{padding:10px;background-color:#f8f9fa}.flex-container[_ngcontent-%COMP%]{margin-top:10px;display:flex}.positions_div[_ngcontent-%COMP%]{flex:1;margin-right:20px}.orderbook_div[_ngcontent-%COMP%]{flex:2}.pos-input[_ngcontent-%COMP%]{width:60px;display:inline-block;margin-right:5px}.refresh-btn[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:5px}.table-title[_ngcontent-%COMP%]{margin-bottom:5px}.new-input[_ngcontent-%COMP%]{margin-top:5px;margin-right:5px;width:120px;display:inline-block}.new-input-prepend[_ngcontent-%COMP%]{margin-top:5px;margin-right:5px;width:150px;display:inline-flex}.new-input-prepend-expiry[_ngcontent-%COMP%]{margin-top:5px;margin-right:5px;width:120px;display:inline-flex}.new-input-prepend-oc[_ngcontent-%COMP%]{margin-top:5px;margin-right:5px;width:130px;display:inline-flex}.new-input-btn[_ngcontent-%COMP%]{margin-right:5px;margin-top:5px}.confirmation-check[_ngcontent-%COMP%]{margin-top:15px}.new-order-div[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;border-radius:5px;background-color:#fff}.ocStrikeStrategyCE[_ngcontent-%COMP%]{background-color:#ccffc9!important}.ocStrikeStrategyPE[_ngcontent-%COMP%]{background-color:#ffdede!important}.hidePositionRow[_ngcontent-%COMP%]{display:none}"]})};u1(Gm,dP).catch(n=>console.error(n));
