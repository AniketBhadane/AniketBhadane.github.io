var W5=Object.create;var Wm=Object.defineProperty,U5=Object.defineProperties,z5=Object.getOwnPropertyDescriptor,H5=Object.getOwnPropertyDescriptors,Y5=Object.getOwnPropertyNames,Ph=Object.getOwnPropertySymbols,G5=Object.getPrototypeOf,Um=Object.prototype.hasOwnProperty,hS=Object.prototype.propertyIsEnumerable;var dS=(n,t,e)=>t in n?Wm(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,re=(n,t)=>{for(var e in t||={})Um.call(t,e)&&dS(n,e,t[e]);if(Ph)for(var e of Ph(t))hS.call(t,e)&&dS(n,e,t[e]);return n},Ne=(n,t)=>U5(n,H5(t));var zm=(n,t)=>{var e={};for(var i in n)Um.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&Ph)for(var i of Ph(n))t.indexOf(i)<0&&hS.call(n,i)&&(e[i]=n[i]);return e};var Hm=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var K5=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Y5(t))!Um.call(n,r)&&r!==e&&Wm(n,r,{get:()=>t[r],enumerable:!(i=z5(t,r))||i.enumerable});return n};var ka=(n,t,e)=>(e=n!=null?W5(G5(n)):{},K5(t||!n||!n.__esModule?Wm(e,"default",{value:n,enumerable:!0}):e,n));var Fw=Hm((exports,module)=>{(function(){"use strict";var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&typeof module=="object"&&module.exports,AMD=typeof define=="function"&&define.amd,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(n){return typeof n=="object"&&n.buffer&&n.buffer.constructor===ArrayBuffer});var createOutputMethod=function(n,t){return function(e){return new Sha256(t,!0).update(e)[n]()}},createMethod=function(n){var t=createOutputMethod("hex",n);NODE_JS&&(t=nodeWrap(t,n)),t.create=function(){return new Sha256(n)},t.update=function(r){return t.create().update(r)};for(var e=0;e<OUTPUT_TYPES.length;++e){var i=OUTPUT_TYPES[e];t[i]=createOutputMethod(i,n)}return t},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(n){if(typeof n=="string")return crypto.createHash(algorithm).update(n,"utf8").digest("hex");if(n==null)throw new Error(ERROR);return n.constructor===ArrayBuffer&&(n=new Uint8Array(n)),Array.isArray(n)||ArrayBuffer.isView(n)||n.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(n)).digest("hex"):method(n)};return nodeMethod},createHmacOutputMethod=function(n,t){return function(e,i){return new HmacSha256(e,t,!0).update(i)[n]()}},createHmacMethod=function(n){var t=createHmacOutputMethod("hex",n);t.create=function(r){return new HmacSha256(r,n)},t.update=function(r,s){return t.create(r).update(s)};for(var e=0;e<OUTPUT_TYPES.length;++e){var i=OUTPUT_TYPES[e];t[i]=createHmacOutputMethod(i,n)}return t};function Sha256(n,t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=n}Sha256.prototype.update=function(n){if(!this.finalized){var t,e=typeof n;if(e!=="string"){if(e==="object"){if(n===null)throw new Error(ERROR);if(ARRAY_BUFFER&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!Array.isArray(n)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(n)))throw new Error(ERROR)}else throw new Error(ERROR);t=!0}for(var i,r=0,s,o=n.length,a=this.blocks;r<o;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),t)for(s=this.start;r<o&&s<64;++r)a[s>>2]|=n[r]<<SHIFT[s++&3];else for(s=this.start;r<o&&s<64;++r)i=n.charCodeAt(r),i<128?a[s>>2]|=i<<SHIFT[s++&3]:i<2048?(a[s>>2]|=(192|i>>6)<<SHIFT[s++&3],a[s>>2]|=(128|i&63)<<SHIFT[s++&3]):i<55296||i>=57344?(a[s>>2]|=(224|i>>12)<<SHIFT[s++&3],a[s>>2]|=(128|i>>6&63)<<SHIFT[s++&3],a[s>>2]|=(128|i&63)<<SHIFT[s++&3]):(i=65536+((i&1023)<<10|n.charCodeAt(++r)&1023),a[s>>2]|=(240|i>>18)<<SHIFT[s++&3],a[s>>2]|=(128|i>>12&63)<<SHIFT[s++&3],a[s>>2]|=(128|i>>6&63)<<SHIFT[s++&3],a[s>>2]|=(128|i&63)<<SHIFT[s++&3]);this.lastByteIndex=s,this.bytes+=s-this.start,s>=64?(this.block=a[16],this.start=s-64,this.hash(),this.hashed=!0):this.start=s}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,t=this.lastByteIndex;n[16]=this.block,n[t>>2]|=EXTRA[t&3],this.block=n[16],t>=56&&(this.hashed||this.hash(),n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.hBytes<<3|this.bytes>>>29,n[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var n=this.h0,t=this.h1,e=this.h2,i=this.h3,r=this.h4,s=this.h5,o=this.h6,a=this.h7,l=this.blocks,c,u,d,h,p,g,A,y,b,x,P;for(c=16;c<64;++c)p=l[c-15],u=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,p=l[c-2],d=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,l[c]=l[c-16]+u+l[c-7]+d<<0;for(P=t&e,c=0;c<64;c+=4)this.first?(this.is224?(y=300032,p=l[0]-1413257819,a=p-150054599<<0,i=p+24177077<<0):(y=704751109,p=l[0]-210244248,a=p-1521486534<<0,i=p+143694565<<0),this.first=!1):(u=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),d=(r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7),y=n&t,h=y^n&e^P,A=r&s^~r&o,p=a+d+A+K[c]+l[c],g=u+h,a=i+p<<0,i=p+g<<0),u=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),d=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),b=i&n,h=b^i&t^y,A=a&r^~a&s,p=o+d+A+K[c+1]+l[c+1],g=u+h,o=e+p<<0,e=p+g<<0,u=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),d=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),x=e&i,h=x^e&n^b,A=o&a^~o&r,p=s+d+A+K[c+2]+l[c+2],g=u+h,s=t+p<<0,t=p+g<<0,u=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),d=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),P=t&e,h=P^t&i^x,A=s&o^~s&a,p=r+d+A+K[c+3]+l[c+3],g=u+h,r=n+p<<0,n=p+g<<0;this.h0=this.h0+n<<0,this.h1=this.h1+t<<0,this.h2=this.h2+e<<0,this.h3=this.h3+i<<0,this.h4=this.h4+r<<0,this.h5=this.h5+s<<0,this.h6=this.h6+o<<0,this.h7=this.h7+a<<0},Sha256.prototype.hex=function(){this.finalize();var n=this.h0,t=this.h1,e=this.h2,i=this.h3,r=this.h4,s=this.h5,o=this.h6,a=this.h7,l=HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[i&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15];return this.is224||(l+=HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]),l},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var n=this.h0,t=this.h1,e=this.h2,i=this.h3,r=this.h4,s=this.h5,o=this.h6,a=this.h7,l=[n>>24&255,n>>16&255,n>>8&255,n&255,t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24&255,i>>16&255,i>>8&255,i&255,r>>24&255,r>>16&255,r>>8&255,r&255,s>>24&255,s>>16&255,s>>8&255,s&255,o>>24&255,o>>16&255,o>>8&255,o&255];return this.is224||l.push(a>>24&255,a>>16&255,a>>8&255,a&255),l},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(this.is224?28:32),t=new DataView(n);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),n};function HmacSha256(n,t,e){var i,r=typeof n;if(r==="string"){var s=[],o=n.length,a=0,l;for(i=0;i<o;++i)l=n.charCodeAt(i),l<128?s[a++]=l:l<2048?(s[a++]=192|l>>6,s[a++]=128|l&63):l<55296||l>=57344?(s[a++]=224|l>>12,s[a++]=128|l>>6&63,s[a++]=128|l&63):(l=65536+((l&1023)<<10|n.charCodeAt(++i)&1023),s[a++]=240|l>>18,s[a++]=128|l>>12&63,s[a++]=128|l>>6&63,s[a++]=128|l&63);n=s}else if(r==="object"){if(n===null)throw new Error(ERROR);if(ARRAY_BUFFER&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!Array.isArray(n)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(n)))throw new Error(ERROR)}else throw new Error(ERROR);n.length>64&&(n=new Sha256(t,!0).update(n).array());var c=[],u=[];for(i=0;i<64;++i){var d=n[i]||0;c[i]=92^d,u[i]=54^d}Sha256.call(this,t,e),this.update(u),this.oKeyPad=c,this.inner=!0,this.sharedMemory=e}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var n=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(n),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&define(function(){return exports}))})()});var Bm=Hm((Vm,w5)=>{(function(n,t){typeof Vm=="object"&&typeof w5<"u"?t(Vm):typeof define=="function"&&define.amd?define(["exports"],t):t((n=typeof globalThis<"u"?globalThis:n||self).indicators={})})(Vm,function(n){"use strict";var t=function(B,S){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,N){I.__proto__=N}||function(I,N){for(var L in N)Object.prototype.hasOwnProperty.call(N,L)&&(I[L]=N[L])})(B,S)},e=function(){return(e=Object.assign||function(B){for(var S,I=arguments,N=1,L=arguments.length;N<L;N++)for(var Y in S=I[N])Object.prototype.hasOwnProperty.call(S,Y)&&(B[Y]=S[Y]);return B}).apply(this,arguments)};function i(){for(var B=arguments,S=0,I=0,N=arguments.length;I<N;I++)S+=B[I].length;var L=Array(S),Y=0;for(I=0;I<N;I++)for(var X=arguments[I],pe=0,_e=X.length;pe<_e;pe++,Y++)L[Y]=X[pe];return L}var r=function(){function B(S,I,N,L,Y,X){X===void 0&&(X=null),this.forked=!1,this.forkedAt=0,this.lastForkY=null,this.step=L,this.index=Y,this.length=0,this.startPoint=X?{y:S?X.h:X.l,x:X.x}:{y:S||I,x:N},this.init(S,I,N),this.thisPoint=this.startPoint}return B.prototype.init=function(S,I,N){this.type||(this.type=S?"h":"l"),this.candlePoint={y:this.type=="h"?S:I,x:N},this.thisPoint&&(this.prevPoint=this.thisPoint,this.nextPoint&&(this.thisPoint=this.nextPoint),this.nextPoint={y:this.k*(this.candlePoint.x+this.step)+this.b,x:this.candlePoint.x+this.step})},B.prototype.update=function(S,I,N){var L=null;if(this.length++,this.init(S,I,N),this.k&&!isNaN(this.k)||(this.k=(this.candlePoint.y-this.startPoint.y)/(this.candlePoint.x-this.startPoint.x),this.b=this.candlePoint.y-this.k*this.candlePoint.x,this.prevPoint=this.startPoint,this.thisPoint=this.candlePoint,this.nextPoint={y:this.k*(this.candlePoint.x+this.step)+this.b,x:this.candlePoint.x+this.step},L={condition:this.type=="h"?"lt":"gt",value:this.nextPoint.y,action:"fork",lineIndex:this.index}),this.type=="h"&&this.thisPoint.y<=this.candlePoint.y||this.type=="l"&&this.thisPoint.y>=this.candlePoint.y){this.k=(this.candlePoint.y-this.startPoint.y)/(this.candlePoint.x-this.startPoint.x),this.b=this.candlePoint.y-this.k*this.candlePoint.x,this.thisPoint=this.candlePoint,this.length=0,this.nextPoint={y:this.k*(this.candlePoint.x+this.step)+this.b,x:this.candlePoint.x+this.step};var Y=this.rollback?this.rollback.length:0,X=this.candlePoint.y-this.prevPoint.y;(this.type=="h"?X>0:X<0)?(this.rollback={k:X,b:this.candlePoint.y-X*this.candlePoint.x,length:Y+1,lastForkTime:this.forkedAt||(this.rollback?this.rollback.lastForkTime:0),lastForkValue:this.forkedValue||(this.rollback?this.rollback.lastForkValue:0)},this.forked=!1,this.forkedAt=null,this.forkedValue=null):(this.forkedAt=this.candlePoint.x,this.forkedValue=this.candlePoint.y,this.forked=!0,this.rollback=null),L={condition:this.type=="h"?"lt":"gt",value:this.nextPoint.y,action:"fork",lineIndex:this.index}}else this.rollback=null;return L},B.prototype.updateStep=function(S){this.step=S},B}(),s=function(){function B(S){this.lineIndex=0,this.forkDiffH=null,this.forkDiffL=null,this.step=S,this.list=[[],[]],this.id={}}return B.prototype.add=function(S,I,N,L,Y){L===void 0&&(L=null),Y===void 0&&(Y=null);var X,pe,_e,Oe=null;if(Y==null?(X=this.lineIndex,this.lineIndex++,S!=null?this.list[0].push(X):this.list[1].push(X)):(X=Y,Oe=this.id[X].lastForkY||(S!=null?L.h:L.l)),this.id[X]=new r(S,I,N,this.step,X,L),Oe&&(this.id[X].lastForkY=Oe),X>1||Y!=null&&this.id[Y]!=null){pe=Y??this.list[this.id[X].type=="h"?0:1][this.list[this.id[X].type=="h"?0:1].indexOf(X)-1],_e=Y??this.list[this.id[X].type=="h"?0:1][this.list[this.id[X].type=="h"?0:1].indexOf(X)-2];var be=this.id[pe].lastForkY;_e&&!be&&(be=this.id[_e].lastForkY);var Ke=S!=null?L.h:L.l;be&&(S?this.forkDiffH=be>=Ke?-pe-1:pe+1:this.forkDiffL=be>=Ke?-pe-1:pe+1),this.id[pe].lastForkY=Ke}return X},B.prototype.update=function(S,I,N,L){return this.id[S].update(I,N,L)},B.prototype.delete=function(S){this.id[S]&&(this.id[S].type=="h"?this.list[0].splice(this.list[0].indexOf(S),1):this.list[1].splice(this.list[1].indexOf(S),1),delete this.id[S])},B}(),o=function(){function B(S,I){this.kdiff=[],this.env=I,this.lines=S,this.in={state:null,lineIndex:null,line:null},this.is={state:null,lineIndex:null,line:null,start:null,size:0},this.was={state:null,lineIndex:null,line:null,size:null},this.width=0,this.speed=0,this.at=0}return B.prototype.update=function(S,I){var N=this;if(S.length>1?this.hlMaxDuration=S.map(function(Te){return N.lines.id[Te]}).filter(function(Te){return!N.is.line||(Te.forkedAt?Te.forkedAt>N.is.line.startPoint.x:!!Te.rollback&&Te.rollback.lastForkTime>N.is.line.startPoint.x)}).reduce(function(Te,nn){return Te.length>nn.length?Te:nn},this.lines.id[S[0]]):this.hlMaxDuration=this.lines.id[S[0]],I.length>1?this.llMaxDuration=I.map(function(Te){return N.lines.id[Te]}).filter(function(Te){return!N.is.line||(Te.forkedAt?Te.forkedAt>N.is.line.startPoint.x:!!Te.rollback&&Te.rollback.lastForkTime>N.is.line.startPoint.x)}).reduce(function(Te,nn){return Te.length>nn.length?Te:nn},this.lines.id[I[0]]):this.llMaxDuration=this.lines.id[I[0]],this.is.state==null&&this.was.state==null&&(this.is.line=this.llMaxDuration&&this.llMaxDuration.length>this.env.minLength&&this.hlMaxDuration.length<this.env.minLength?this.llMaxDuration:this.hlMaxDuration&&this.hlMaxDuration.length>this.env.minLength&&this.llMaxDuration.length<this.env.minLength?this.hlMaxDuration:null,this.is.line&&(this.is.lineIndex=this.is.line.index,this.is.state=this.is.line.type=="h"?"fall":"rise",this.is.start=this.is.line.candlePoint)),this.is.state){this.is.size=Math.max(this.is.size,Math.abs(this.is.start.y-this.is.line.candlePoint.y));var L,Y=this.lines.id[this.is.lineIndex]||this.lines.id[this.is.line.type=="h"?0:1],X=null,pe=null,_e=this.lines.list[Y.type=="h"?1:0].filter(function(Te){return N.lines.id[Te].forked&&N.lines.id[Te].thisPoint.x-N.lines.id[Te].forkedAt>12});_e.length>1?_e[1]:_e.length>0&&_e[0];var Oe=_e.filter(function(Te){return N.lines.id[Te].forkedAt>N.is.start.x});if(Y&&this.lines.list[Y.type=="h"?0:1].forEach(function(Te,nn){var Dt=N.lines.id[Te];if(Te>=Y.index&&Dt.rollback!=null){L=N.lines.list[Y.type=="h"?0:1][nn-1];var Or=N.env.deltaModel==1&&nn>1&&L&&N.lines.id[L]?nn>1&&L&&N.lines.id[L].lastForkY:N.lines.id[Te>0?Te-1:0];pe=Or?N.lines.id[Te>1?L:Y.type=="h"?0:1].lastForkY-Dt.candlePoint.y:Dt.rollback?Dt.rollback.lastForkValue-Dt.candlePoint.y:0,Dt.rollback.lastForkValue>0&&Dt.thisPoint.x-Dt.rollback.lastForkTime>N.env.minRightLeg&&(N.is.state=="fall"?N.llMaxDuration.length>1:N.hlMaxDuration.length>1)&&((Y.type=="h"?pe<0:pe>0)||Dt.rollback.length>N.env.rollbackLength||2*N.is.size/3>Math.abs(N.is.start.y-N.is.line.candlePoint.y)&&N.is.size>N.is.line.candlePoint.y*N.env.minIsSizeOnRollback&&Oe.length>1||(Y.type=="h"?Dt.candlePoint.y>N.is.start.y&&N.lines.list[0].length==1:Dt.candlePoint.y<N.is.start.y&&N.lines.list[1].length==1))&&(Dt.candlePoint.x-Dt.rollback.lastForkTime>N.env.forkDurationMin&&Dt.candlePoint.x-Dt.rollback.lastForkTime<N.env.forkDurationMax||(Y.type=="h"?Dt.candlePoint.y>Dt.startPoint.y:Dt.candlePoint.y<Dt.startPoint.y)||(Y.type=="h"?Dt.candlePoint.y>N.is.start.y&&N.lines.list[0].length==1:Dt.candlePoint.y<N.is.start.y&&N.lines.list[1].length==1))&&(X=Te+1)}}),X){this.in.size=(this.was.size||0)+this.is.size;var be=this.lines.id[0].candlePoint.y-this.is.start.y,Ke=this.is.state=="rise"?be>=0:be<0;this.was.size&&(this.in.state=this.was.size>this.is.size?this.was.state:this.is.state),this.was=e({},this.is),this.was.success=Ke,this.is.line=this.is.state=="fall"?this.llMaxDuration:this.hlMaxDuration,this.is.state=this.is.line.type=="h"?"fall":"rise",this.is.lineIndex=this.is.line.index,this.is.start=this.lines.id[0].candlePoint,this.is.size=0}}},B}(),a=function(){function B(S){this.hLineDirectives=[],this.lLineDirectives=[],this.step=1,this.i=0,this.localCounter=0,this.prevPoint=null,this.env=Object.assign({step:1,minLength:5,minRightLeg:3,maxForks:500,minLog:0,maxLog:0,rollbackLength:3,deltaModel:1,minIsSizeOnRollback:.05},S),this.env.minLength=Math.round(this.env.minLength/this.env.step)||1,this.env.minRightLeg=Math.round(this.env.minRightLeg/this.env.step)||1,this.env.rollbackLength=Math.round(this.env.rollbackLength/this.env.step)||1,this.env.forkDurationMin=Math.round(this.env.forkDurationMin/this.env.step)||1,this.env.forkDurationMax=Math.round(this.env.forkDurationMax/this.env.step)||1,this.lines=new s(this.step),this.trend=new o(this.lines,this.env)}return B.prototype.log=function(S){for(var I=arguments,N=[],L=1;L<arguments.length;L++)N[L-1]=I[L];this.consoleWindow=this.env.minLog<this.localCounter&&this.localCounter<this.env.maxLog,this.consoleWindow&&console.log.apply(console,i([S],N))},B.prototype.nextValue=function(S,I,N,L){var Y,X=this;this.localCounter++,this.lLineDirectives.length>0&&this.lLineDirectives.forEach(function(_e,Oe){var be=X.lines.id[_e.lineIndex];_e.condition=="gt"&&L>_e.value&&_e.action=="fork"&&be&&(_e.lineIndex!=null&&be!=null&&be.k<0?X.lines.add(null,L,X.i-1,X.prevPoint,_e.lineIndex):(be.forked=!0,be.forkedAt=be.thisPoint.x,be.forkedValue=be.thisPoint.y,X.lines.add(null,L,X.i-1,X.prevPoint)))}),this.hLineDirectives.length>0&&this.hLineDirectives.forEach(function(_e,Oe){var be=X.lines.id[_e.lineIndex];_e.condition=="lt"&&N<_e.value&&_e.action=="fork"&&be&&(be.k>0?X.lines.add(N,null,X.i-1,X.prevPoint,_e.lineIndex):(be.forked=!0,be.forkedAt=be.thisPoint.x,be.forkedValue=be.thisPoint.y,X.lines.add(N,null,X.i-1,X.prevPoint)))}),this.hLineDirectives.length=0,this.lLineDirectives.length=0,this.lines.list[0].length<1?(this.lines.add(N,null,this.i),this.lines.add(null,L,this.i)):this.lines.list.forEach(function(_e){return _e.forEach(function(Oe){var be=X.lines.id[Oe];if(be&&be.type){Y=null,be&&be.startPoint.x<X.i&&(Y=X.lines.update(Oe,N,L,X.i));var Ke=be.type;Y&&(Ke=="h"?X.hLineDirectives.push(Y):X.lLineDirectives.push(Y))}})});var pe=[];return this.lines.list.forEach(function(_e){_e&&(pe=[],_e.forEach(function(Oe,be){var Ke=X.lines.id[_e[be]],Te=X.lines.id[_e[be-1]];(be>0&&Ke&&Te&&Ke.type=="h"&&Ke.thisPoint&&Te.thisPoint.y<=Ke.thisPoint.y||be>X.env.maxForks||be>0&&Ke&&Te&&Ke.type=="l"&&Ke.thisPoint&&Te.thisPoint.y>=Ke.thisPoint.y||be>X.env.maxForks)&&pe.push(Oe)}),pe.forEach(function(Oe){return X.lines.delete(Oe)}))}),this.prevPoint={x:this.i,h:N,l:L},this.trend.update(this.lines.list[0],this.lines.list[1]),this.i++,this.lines},B}(),l=Object.freeze({__proto__:null,Indicator:a}),c=function(){function B(S){this.length=S,this.filled=!1,this.pointer=0,this.buffer=new Array(S),this.maxIndex=S-1}return B.prototype.push=function(S){var I=this.buffer[this.pointer];return this.buffer[this.pointer]=S,this.iteratorNext(),I},B.prototype.pushback=function(S){this.iteratorPrev();var I=this.buffer[this.pointer];return this.buffer[this.pointer]=S,I},B.prototype.peek=function(){return this.buffer[this.pointer]},B.prototype.forEach=function(S){for(var I=this.pointer,N=0;N!==this.length;)S(this.buffer[I],N),I=(this.length+I+1)%this.length,N++},B.prototype.forEachRight=function(S){for(var I=(this.length+this.pointer-1)%this.length,N=this.length-1;N!==this.length;)S(this.buffer[I],N),I=(this.length+I-1)%this.length,N--},B.prototype.fill=function(S){this.buffer.fill(S),this.filled=!0},B.prototype.toArray=function(){return this.buffer},B.prototype.iteratorNext=function(){this.pointer++,this.pointer>this.maxIndex&&(this.pointer=0,this.filled=!0)},B.prototype.iteratorPrev=function(){this.pointer--,this.pointer<0&&(this.pointer=this.maxIndex)},B}(),u=function(B){function S(I,N){I===void 0&&(I=100);var L=B.call(this,I)||this;return L.period=I,L.mode=N,L.comparator=N==="max"?L.maxComporator:L.mminComporator,L}return function(I,N){function L(){this.constructor=I}t(I,N),I.prototype=N===null?Object.create(N):(L.prototype=N.prototype,new L)}(S,B),S.prototype.nextValue=function(I){return this.push(I),this.getExtremum()},S.prototype.momentValue=function(I){var N=this.push(I),L=this.getExtremum();return this.pushback(N),L},S.prototype.maxComporator=function(I,N){return I>N},S.prototype.mminComporator=function(I,N){return I<N},S.prototype.getExtremum=function(I){var N=(this.length+this.pointer-2)%this.length,L=this.mode==="max"?-1/0:1/0;if(!this.filled)return 0;for(;N!==this.pointer;){var Y=this.buffer[(this.length+N-1)%this.length],X=this.buffer[(this.length+N+1)%this.length],pe=this.buffer[N];if(this.comparator(pe,L)&&this.comparator(pe,Y)&&this.comparator(pe,X)){if(L=pe,this.prevIx===N)return null;if(this.prevIx=N,I)return L}N=(this.length+N-1)%this.length}return isFinite(L)?L:(this.prevIx=null,null)},S}(c),d=function(){function B(S){this.period=S,this.sum=0,this.circular=new c(S)}return B.prototype.nextValue=function(S){var I=this;if(this.circular.push(S),this.sum+=S,this.circular.filled)return this.nextValue=function(N){return I.sum=I.sum-I.circular.push(N)+N,I.sum/I.period},this.momentValue=function(N){return(I.sum-I.circular.peek()+N)/I.period},this.sum/this.period},B.prototype.momentValue=function(S){},B}(),h=function(){function B(S){this.period=S,this.smooth=1/this.period,this.sma=new d(this.period)}return B.prototype.nextValue=function(S){return this.wema?this.wema=(S-this.wema)*this.smooth+this.wema:this.wema=this.sma.nextValue(S)},B.prototype.momentValue=function(S){return this.wema?(S-this.wema)*this.smooth+this.wema:this.sma.momentValue(S)},B}(),p=function(){function B(S){this.period=S,this.smooth=2/(this.period+1),this.sma=new d(this.period)}return B.prototype.nextValue=function(S){var I=this,N=this.sma.nextValue(S);return N&&(this.ema=N,this.nextValue=function(L){return I.ema=(L-I.ema)*I.smooth+I.ema},this.momentValue=function(L){return(L-I.ema)*I.smooth+I.ema}),N},B.prototype.momentValue=function(S){},B}(),g=function(){function B(S,I){this.indicator=S,this.samples=I,this._indicators=[]}return B.prototype.create=function(){for(var S,I=arguments,N=[],L=0;L<arguments.length;L++)N[L]=I[L];for(var Y=0;Y<this.samples;Y++)this._indicators.push(new((S=this.indicator).bind.apply(S,i([void 0],N))))},B.prototype.nextValue=function(S){for(var I=0;I<this.samples;I++)if((S=this._indicators[I].nextValue(S))===void 0)return S;return S},B.prototype.momentValue=function(S){for(var I=0;I<this.samples;I++)if((S=this._indicators[I].momentValue(S))==null)return S;return S},B}(),A=function(){function B(S,I,N,L,Y){S===void 0&&(S=.85),L===void 0&&(L=1),Y===void 0&&(Y=1),this.redunant=S,this.multiplier=L,this.offset=Y,this.prevValue=0,this.lastUpperValue=0,this.lastLowerValue=0,this.samplerUp=new g(I,N),this.samplerLow=new g(I,N)}return B.prototype.create=function(){for(var S,I,N=arguments,L=[],Y=0;Y<arguments.length;Y++)L[Y]=N[Y];(S=this.samplerUp).create.apply(S,L),(I=this.samplerLow).create.apply(I,L)},B.prototype.nextValue=function(S){this.lastUpperValue=S>0?Math.max(S,this.prevValue):Math.max(0,this.lastUpperValue)*this.redunant,this.lastLowerValue=S<=0?Math.min(S,this.prevValue):Math.min(0,this.lastLowerValue)*this.redunant;var I=(S<=0?S:this.lastLowerValue)*this.multiplier,N=(S>=0?S:this.lastUpperValue)*this.multiplier;return[this.samplerUp.nextValue(N)+this.offset,this.samplerLow.nextValue(I)-this.offset]},B}(),y=function(){function B(S,I,N,L){N===void 0&&(N=.85),L===void 0&&(L="WEMA"),this.period=S,this.samples=I,this.redunant=N,this.type=L,this.upper=0,this.lower=0,this.lastUpperValue=0,this.lastLowerValue=0,this.sample1Up=this.createSample(),this.sample2Up=this.createSample(),this.sample3Up=this.createSample(),this.sample1Low=this.createSample(),this.sample2Low=this.createSample(),this.sample3Low=this.createSample()}return B.prototype.nextValue=function(S){return S>0?(this.upper=this.getUp(S),this.lastLowerValue*=this.redunant,this.lower=this.getDown(this.lastLowerValue),this.lastUpperValue=S):S<0&&(this.lower=this.getDown(S),this.lastUpperValue*=this.redunant,this.upper=this.getUp(this.lastUpperValue),this.lastLowerValue=S),{upper:this.upper,lower:this.lower}},B.prototype.getUp=function(S){var I=this.sample1Up.nextValue(S),N=null;return this.samples===1?I:(I&&(N=this.sample2Up.nextValue(I)),this.samples===2?N:N?this.sample3Up.nextValue(N):null)},B.prototype.getDown=function(S){var I=this.sample1Low.nextValue(S),N=null;return this.samples===1?I:(I&&(N=this.sample2Low.nextValue(I)),this.samples===2?N:N?this.sample3Low.nextValue(N):null)},B.prototype.createSample=function(){switch(this.type){case"EMA":return new p(this.period);case"WEMA":return new h(this.period);case"SMA":return new d(this.period)}},B}(),b=function(){function B(S){this.period=S,this.SMAx=new d(this.period),this.SMAy=new d(this.period),this.pricesX=new c(this.period),this.pricesY=new c(this.period)}return B.prototype.nextValue=function(S,I){this.pricesX.push(S),this.pricesY.push(I),this.SMAxValue=this.SMAx.nextValue(S),this.SMAyValue=this.SMAy.nextValue(I);for(var N=0,L=0,Y=0,X=0;X<this.period;X++){var pe=this.pricesX.toArray()[X],_e=this.pricesY.toArray()[X];N+=(pe-this.SMAxValue)*(_e-this.SMAyValue),L+=Math.pow(pe-this.SMAxValue,2),Y+=Math.pow(_e-this.SMAyValue,2)}return N/Math.sqrt(L*Y)},B}(),x=function(){function B(S){this.period=S,this.denominator=S*(S+1)/2,this.buffer=new c(S),this.values=[]}return B.prototype.nextValue=function(S){var I=this;if(this.buffer.push(S),this.buffer.filled){var N=0;return this.buffer.forEach(function(L,Y){N+=L*(Y+1)/I.denominator}),N}},B.prototype.momentValue=function(S){var I=this,N=this.buffer.push(S);if(this.buffer.filled){var L=0;return this.buffer.forEach(function(Y,X){L+=Y*(X+1)/I.denominator}),this.buffer.pushback(N),L}this.buffer.pushback(N)},B}(),P=function(){function B(S){S===void 0&&(S=.2),this.alpha=S,this.filled=!1}return B.prototype.nextValue=function(S){var I=this.alpha*S+(1-this.alpha)*(this.prevValue||1);if(this.filled=this.filled||this.prevValue!==void 0,this.prevValue=I,this.filled)return I},B.prototype.momentValue=function(S){if(this.filled)return this.alpha*S+(1-this.alpha)*(this.prevValue||1)},B}(),T=function(){function B(S){this.period=S,this.sum=0,this.avg=0,this.filled=!1,this.fill=0}return B.prototype.nextValue=function(S){var I=this;return this.filled?(this.nextValue=function(N){return I.avg=(I.avg*(I.period-1)+N)/I.period},this.nextValue(S)):(this.sum+=S,this.fill++,this.fill===this.period?(this.filled=!0,this.avg=this.sum/this.period,this.avg):void 0)},B.prototype.momentValue=function(S){if(this.filled)return(this.avg*(this.period-1)+S)/this.period},B}(),k=function(){function B(S){S===void 0&&(S=14),this.period=S,this.alpha=1/S,this.sma=new d(this.period)}return B.prototype.nextValue=function(S){var I=this;return this.prevValue?(this.prevValue=this.alpha*S+(1-this.alpha)*this.prevValue,this.nextValue=function(N){return I.prevValue=I.alpha*N+(1-I.alpha)*I.prevValue,I.prevValue}):this.prevValue=this.sma.nextValue(S),this.prevValue},B.prototype.momentValue=function(S){if(this.prevValue)return this.alpha*S+(1-this.alpha)*this.prevValue},B}(),C=function(){function B(S,I){S===void 0&&(S=5),I===void 0&&(I=34),this.smaSlow=new d(I),this.smaFast=new d(S)}return B.prototype.nextValue=function(S,I){var N=this;if(this.smaSlowValue=this.smaSlow.nextValue((S+I)/2),this.smaFastValue=this.smaFast.nextValue((S+I)/2),this.smaSlowValue!==void 0&&this.smaFastValue!==void 0)return this.nextValue=function(L,Y){return N.smaSlowValue=N.smaSlow.nextValue((L+Y)/2),N.smaFastValue=N.smaFast.nextValue((L+Y)/2),N.smaFastValue-N.smaSlowValue},this.momentValue=function(L,Y){return N.smaFast.momentValue((L+Y)/2)-N.smaSlow.momentValue((L+Y)/2)},this.smaFastValue-this.smaSlowValue},B.prototype.momentValue=function(S,I){},B}(),M=function(){function B(){this.sma=new d(5),this.ao=new C}return B.prototype.nextValue=function(S,I){var N=this;if(this.aoValue=this.ao.nextValue(S,I),this.aoValue!==void 0&&(this.smaValue=this.sma.nextValue(this.aoValue),this.smaValue!==void 0))return this.nextValue=function(L,Y){return N.aoValue=N.ao.nextValue(L,Y),N.smaValue=N.sma.nextValue(N.aoValue),N.aoValue-N.smaValue},this.momentValue=function(L,Y){return N.ao.momentValue(L,Y)-N.sma.momentValue(N.aoValue)},this.aoValue-this.smaValue},B.prototype.momentValue=function(S,I){},B}(),O=function(){function B(S){S===void 0&&(S=14),this.positiveMoneyFlowSum=0,this.negativeMoneyFlowSum=0,this.pevTypicalPrice=0,this.posCircular=new c(S),this.negCircular=new c(S)}return B.prototype.nextValue=function(S,I,N,L){var Y=(S+I+N)/3,X=Y*L;if(this.pevTypicalPrice){var pe=Y>this.pevTypicalPrice?X:0,_e=Y<this.pevTypicalPrice?X:0;this.pevTypicalPrice=Y,this.negativeMoneyFlowSum+=_e,this.positiveMoneyFlowSum+=pe;var Oe=this.posCircular.push(pe),be=this.negCircular.push(_e);if(this.posCircular.filled)return this.negativeMoneyFlowSum-=be||0,this.positiveMoneyFlowSum-=Oe||0,100-100/(1+this.positiveMoneyFlowSum/this.negativeMoneyFlowSum)}else this.pevTypicalPrice=Y},B.prototype.momentValue=function(S,I,N,L){var Y=(S+I+N)/3,X=Y*L;if(this.pevTypicalPrice){var pe=Y>this.pevTypicalPrice?X:0,_e=Y<this.pevTypicalPrice?X:0;if(this.posCircular.filled){var Oe=this.posCircular.peek(),be=this.negCircular.peek(),Ke=this.negativeMoneyFlowSum+_e-be;return 100-100/(1+(this.positiveMoneyFlowSum+pe-Oe)/Ke)}}},B}(),R=function(B,S){return(B-S)/S*100},q=function(){function B(S){this.period=S,this.value=0,this.changes=new c(S)}return B.prototype.nextValue=function(S){if(this.prevPrice){var I=R(S,this.prevPrice);return this.calculate(I),this.prevPrice=S,this.value}this.prevPrice=S},B.prototype.calculate=function(S){return this.value+=S,this.value-=this.changes.push(S),this.value},B}();function H(B){return B.consolidate=0,B.power=0,B.streak=0,B.diff=0,B.startPrice=0,B.prevPeak=0,B}var Z=function(){function B(){this.up={consolidate:0,power:0,streak:0,startPrice:0,diff:0,prevPeak:0},this.down={consolidate:0,power:0,streak:0,startPrice:0,diff:0,prevPeak:0}}return B.prototype.nextValue=function(S,I,N,L){if(S<I||this.up.streak&&this.up.prevPeak<L){this.up.startPrice||(this.up.startPrice=S),this.down.streak&&H(this.down);var Y=I-S;this.up.streak++,this.up.prevPeak=L,this.up.diff>Y?this.up.consolidate++:this.up.consolidate=0,this.up.diff=Y,this.up.power=R(I,this.up.startPrice)}return(S>I||this.down.streak&&this.down.prevPeak>N)&&(this.down.startPrice||(this.down.startPrice=S),this.up.streak&&H(this.up),Y=S-I,this.down.streak++,this.down.prevPeak=N,this.down.diff>Y?this.down.consolidate++:this.down.consolidate=0,this.down.diff=Y,this.down.power=R(I,this.down.startPrice)),S===I&&(this.up.streak++,this.down.streak++,this.up.diff=this.down.diff=0),this.up.streak>this.down.streak?e({},this.up):e({},this.down)},B}(),ne=function(){function B(S){this.max=-1/0,this.highest=new c(S)}return B.prototype.filled=function(){return this.highest.filled},B.prototype.nextValue=function(S){return this.max<S&&(this.max=S),this.highest.push(S)===this.max&&S!==this.max&&(this.max=function(I){for(var N=-1/0,L=I.length-1;L>=0;L--){var Y=I[L];N<Y&&(N=Y)}return N}(this.highest.toArray())),this.max},B.prototype.momentValue=function(S){return this.max>S?this.max:S},B}(),ce=function(){function B(S){this.min=1/0,this.lowest=new c(S)}return B.prototype.filled=function(){return this.lowest.filled},B.prototype.nextValue=function(S){return this.min>S&&(this.min=S),this.lowest.push(S)===this.min&&S!==this.min&&(this.min=function(I){for(var N=1/0,L=I.length-1;L>=0;L--){var Y=I[L];N>Y&&(N=Y)}return N}(this.lowest.toArray())),this.min},B.prototype.momentValue=function(S){return this.min<S?this.min:S},B}(),G=function(){function B(S,I){S===void 0&&(S=14),I===void 0&&(I=3),this.period=S,this.smaPeriod=I,this.sma=new d(this.smaPeriod),this.max=new ne(S),this.min=new ce(S)}return B.prototype.nextValue=function(S,I,N){var L=this.max.nextValue(S),Y=this.min.nextValue(I);if(this.max.filled()){var X=(N-Y)/(L-Y)*100;return{k:X,d:this.sma.nextValue(X)}}},B.prototype.momentValue=function(S,I,N){if(this.max.filled()){var L=this.max.momentValue(S),Y=this.min.momentValue(I),X=(N-Y)/(L-Y)*100;return{k:X,d:this.sma.momentValue(X)}}},B}(),$=function(){function B(S){this.avgGain=new T(S),this.avgLoss=new T(S)}return B.prototype.nextValue=function(S){var I=S-this.prev;if(this.prev){var N=I>0?I:0,L=I<0?I:0,Y=this.avgGain.nextValue(N),X=this.avgLoss.nextValue(L);return this.prev=S,{upAvg:Y,downAvg:X}}this.prev=S},B.prototype.momentValue=function(S){var I=S-this.prev,N=I>0?I:0,L=I<0?I:0;return{upAvg:this.avgGain.momentValue(N),downAvg:this.avgLoss.momentValue(L)}},B}(),ee=function(){function B(S){S===void 0&&(S=14),this.period=S,this.change=new $(this.period)}return B.prototype.nextValue=function(S){var I=this.change.nextValue(S)||{},N=I.downAvg,L=I.upAvg;if(L!==void 0&&N!==void 0)return 100-100/(1+L/-N)},B.prototype.momentValue=function(S){var I=this.change.momentValue(S)||{},N=I.downAvg,L=I.upAvg;if(L!==void 0&&N!==void 0)return 100-100/(1+L/-N)},B}(),ye=function(){function B(S,I,N,L){S===void 0&&(S=14),I===void 0&&(I=3),N===void 0&&(N=3),L===void 0&&(L=14),this.rsi=new ee(S),this.sma1=new d(I),this.sma2=new d(N),this.max=new ne(L),this.min=new ce(L)}return B.prototype.nextValue=function(S){var I=this.rsi.nextValue(S);if(I!==void 0){var N=this.max.nextValue(I),L=this.min.nextValue(I);if(this.max.filled()){var Y=(I-L)/(N-L)*100,X=this.sma1.nextValue(Y);if(X!==void 0)return{k:X,d:this.sma2.nextValue(X),stochRsi:Y}}}},B.prototype.momentValue=function(S){if(this.max.filled()){var I=this.rsi.momentValue(S),N=this.max.momentValue(I),L=this.min.momentValue(I),Y=(I-L)/(N-L)*100,X=this.sma1.momentValue(Y);return{k:X,d:this.sma2.momentValue(X),stochRsi:Y}}},B}(),de=function(){function B(S){this.period=S,this.values=new c(S)}return B.prototype.nextValue=function(S,I){if(I)return this.nextValue=this.pureNextValue,this.momentValue=this.pureMomentValue,this.pureNextValue(S,I);this.values.push(S)},B.prototype.momentValue=function(S,I){},B.prototype.pureNextValue=function(S,I){var N=this;return this.values.push(S),this.values.toArray().reduce(function(L,Y){return L+N.positiveDelta(I,Y)},0)/this.period},B.prototype.pureMomentValue=function(S,I){var N=this,L=this.values.push(S),Y=this.values.toArray().reduce(function(X,pe){return X+N.positiveDelta(I,pe)},0);return this.values.pushback(L),Y/this.period},B.prototype.positiveDelta=function(S,I){return S>I?S-I:I-S},B}(),ge=function(){function B(S){S===void 0&&(S=20),this.md=new de(S),this.sma=new d(S)}return B.prototype.nextValue=function(S,I,N){var L=(S+I+N)/3,Y=this.sma.nextValue(L),X=this.md.nextValue(L,Y);return X&&(L-Y)/(.015*X)},B.prototype.momentValue=function(S,I,N){var L=(S+I+N)/3,Y=this.sma.momentValue(L),X=this.md.momentValue(L,Y);return X&&(L-Y)/(.015*X)},B}(),ie=function(){function B(S){this.period=S,this.arr=[],this.filled=!1,this.devider=0,this.lastSum=0,this.devider=function(I){for(var N=0,L=I.length;L>0;)N+=I[--L];return N}(Array.from(Array(this.period).keys()).map(function(I){return I+1}))}return B.prototype.nextValue=function(S){if(this.filled=this.filled||this.arr.length===this.period,this.arr.push(S),this.filled)return this.arr.shift(),this.arr.reduce(function(I,N,L){return I+N*(L+1)},0)/this.devider},B.prototype.momentValue=function(S){if(this.filled){var I=this.arr.slice(1);return I.push(S),I.reduce(function(N,L,Y){return N+L*(Y+1)},0)/this.devider}},B}();function ue(B,S,I){if(I){var N=B-S,L=B>I?B-I:I-B,Y=S>I?S-I:I-S;return N>=L&&N>=Y?N:L>=N&&L>=Y?L:Y}}var me=function(){function B(S,I){switch(S===void 0&&(S=14),I===void 0&&(I="WEMA"),I){case"SMA":this.avg=new d(S);break;case"EMA":this.avg=new p(S);break;case"SMMA":this.avg=new T(S);break;case"WEMA":this.avg=new h(S);break;case"LWMA":this.avg=new ie(S);break;case"EWMA":this.avg=new P(.2);break;case"RMA":this.avg=new k(S)}this.prevClose=0}return B.prototype.nextValue=function(S,I,N){var L=ue(S,I,this.prevClose);if(this.prevClose=N,L!==void 0)return this.avg.nextValue(L)},B.prototype.momentValue=function(S,I){var N=ue(S,I,this.prevClose);if(N!==void 0)return this.avg.momentValue(N)},B}(),we=function(){function B(S){S===void 0&&(S=5),this.values=new c(S)}return B.prototype.nextValue=function(S){var I=this.values.push(S);if(I)return(S-I)/I*100},B.prototype.momentValue=function(S){var I=this.values.peek();if(I)return(S-I)/I*100},B}(),Be=function(){function B(S){S===void 0&&(S=20),this.maxProvider=new ne(S),this.minProvider=new ce(S)}return B.prototype.nextValue=function(S,I){var N=this.maxProvider.nextValue(S),L=this.minProvider.nextValue(I);return{upper:N,middle:(N+L)/2,lower:L}},B.prototype.momentValue=function(S,I){var N=this.maxProvider.momentValue(S),L=this.minProvider.momentValue(I);return{upper:N,middle:(N+L)/2,lower:L}},B}(),Ce=function(){function B(S){this.period=S,this.fill=0,this.values=new c(S)}return B.prototype.nextValue=function(S){var I=this;if(this.values.push(S),this.fill++,this.fill===this.period)return this.nextValue=function(N){var L=I.calc(N);return I.values.push(N),L},this.momentValue=this.calc,this.calc(S)},B.prototype.momentValue=function(S){},B.prototype.calc=function(S){var I=0;return this.values.toArray().forEach(function(N){N<=S&&I++}),I/this.period*100},B}(),qe=function(){function B(S,I,N){S===void 0&&(S=3),I===void 0&&(I=2),N===void 0&&(N=100),this.period=S,this.rsi=new ee(this.period),this.updownRsi=new ee(I),this.roc=new we(1),this.percentRank=new Ce(N),this.updownPeriod=0,this.prevClose=0}return B.prototype.nextValue=function(S){var I=this.rsi.nextValue(S),N=this.percentRank.nextValue(this.roc.nextValue(S));if(this.updownPeriod=this.getUpdownPeriod(S),this.prevClose=S,this.updownValue=this.updownRsi.nextValue(this.updownPeriod),this.updownValue)return(I+this.updownValue+N)/3},B.prototype.momentValue=function(S){var I=this.rsi.momentValue(S),N=this.percentRank.momentValue(this.roc.momentValue(S)),L=this.getUpdownPeriod(S),Y=this.updownRsi.momentValue(L);if(Y!==void 0)return(I+Y+N)/3},B.prototype.getUpdownPeriod=function(S){var I=this.updownPeriod;return S>this.prevClose?(this.updownPeriod<0&&(I=0),I++):S<this.prevClose?(this.updownPeriod>0&&(I=0),I--):I=0,I},B}(),He=function(){function B(S){this.period=S,this.values=new c(S)}return B.prototype.nextValue=function(S,I){return this.values.push(S),Math.sqrt(this.values.toArray().reduce(function(N,L){return N+Math.pow(L-I,2)},0)/this.period)},B.prototype.momentValue=function(S,I){var N=this.values.push(S),L=Math.sqrt(this.values.toArray().reduce(function(Y,X){return Y+Math.pow(X-I,2)},0)/this.period);return this.values.pushback(N),L},B}(),Ae=function(){function B(S,I){S===void 0&&(S=20),I===void 0&&(I=2),this.period=S,this.stdDev=I,this.fill=0,this.sma=new d(S),this.sd=new He(S)}return B.prototype.nextValue=function(S){var I=this,N=this.sma.nextValue(S),L=this.sd.nextValue(S,N);if(this.fill++,this.fill===this.period){var Y=N-this.stdDev*L,X=N+this.stdDev*L;return this.nextValue=function(pe){var _e=I.sma.nextValue(pe),Oe=I.sd.nextValue(pe,_e);return{lower:_e-I.stdDev*Oe,middle:_e,upper:_e+I.stdDev*Oe}},{lower:Y,middle:N,upper:X}}},B.prototype.momentValue=function(S){var I=this.sma.momentValue(S),N=this.sd.momentValue(S,I);return{lower:I-this.stdDev*N,middle:I,upper:I+this.stdDev*N}},B}(),at=function(){function B(S,I,N){S===void 0&&(S=12),I===void 0&&(I=26),N===void 0&&(N=9),this.periodEmaFast=S,this.periodEmaSlow=I,this.periodSignal=N,this.emaFastIndicator=new p(S),this.emaSlowIndicator=new p(I),this.emaSignalIndicator=new p(N)}return B.prototype.nextValue=function(S){var I=this.emaFastIndicator.nextValue(S),N=this.emaSlowIndicator.nextValue(S),L=I-N,Y=L&&this.emaSignalIndicator.nextValue(L)||void 0,X=L-Y||void 0;if(!isNaN(L))return{macd:L,emaFast:I,emaSlow:N,signal:Y,histogram:X}},B.prototype.momentValue=function(S){var I=this.emaFastIndicator.momentValue(S),N=this.emaSlowIndicator.momentValue(S),L=I-N,Y=L&&this.emaSignalIndicator.momentValue(L);return{macd:L,emaFast:I,emaSlow:N,signal:Y,histogram:L-Y}},B}(),Me=function(){function B(){this.prevOpen=0,this.prevClose=0}return B.prototype.nextValue=function(S,I,N,L){var Y=this.calculate(S,I,N,L);return this.prevClose=Y.c,this.prevOpen=Y.o,Y},B.prototype.momentValue=function(S,I,N,L){return this.calculate(S,I,N,L)},B.prototype.calculate=function(S,I,N,L){return L=(S+I+N+L)/4,this.prevOpen&&(S=(this.prevOpen+this.prevClose)/2),{o:S,h:I=Math.max(I,S,L),l:N=Math.min(N,S,L),c:L}},B}(),je=function(){function B(S){switch(S===void 0&&(S="classic"),this.mode=S,this.mode){case"classic":this.calculator=this.classic;break;case"camarilla":this.calculator=this.camarilla;break;case"woodie":this.calculator=this.woodie;break;case"fibonacci":this.calculator=this.fibonacci}}return B.prototype.nextValue=function(S,I,N){return this.calculator(S,I,N)},B.prototype.classic=function(S,I,N){var L=(S+I+N)/3;return{r3:S+2*(L-I),r2:L+(S-I),r1:2*L-I,pp:L,s1:2*L-S,s2:L-(S-I),s3:I-2*(S-L)}},B.prototype.woodie=function(S,I,N){var L=(S+I+2*N)/4;return{r2:L+S-I,r1:2*L-I,pp:L,s1:2*L-S,s2:L-S+I}},B.prototype.camarilla=function(S,I,N){var L=1.1*(S-I),Y=S/I*N,X=N+L/2,pe=Y+1.168*(Y-X);return{r6:pe,r5:Y,r4:X,r3:N+L/4,r2:N+L/6,r1:N+L/12,pp:(S+I+N)/3,s1:N-L/12,s2:N-L/6,s3:N-L/4,s4:N-L/2,s5:N-(Y-N),s6:N-(pe-N)}},B.prototype.fibonacci=function(S,I,N){var L=S-I,Y=(S+I+N)/3;return{r3:Y+L,r2:Y+.618*L,r1:Y+.382*L,pp:Y,s1:Y-.382*L,s2:Y-.618*L,s3:Y-L}},B}(),et=function(){function B(S,I,N){S===void 0&&(S=.02),I===void 0&&(I=.02),N===void 0&&(N=.2),this.start=S,this.acceleration=I,this.max=N,this.result=0,this.isBullTrend=!0}return B.prototype.nextValue=function(S,I,N){if(!this.result)return this.result=N,this.low1=I,this.high1=S,this.low2=I,this.high2=S,this.highest=S,this.lowest=I,this.accelerationFactor=this.start,I;if(this.isBullTrend?this.psar=this.result+this.accelerationFactor*(this.highest-this.result):this.psar=this.result+this.accelerationFactor*(this.lowest-this.result),this.isBullTrend)if(I<this.psar)this.isBullTrend=!1,this.psar=this.highest,this.lowest=I,this.accelerationFactor=this.start;else{if(S>this.highest){this.highest=S;var L=this.accelerationFactor+this.acceleration;this.accelerationFactor=L>this.max?this.max:L}this.low1<this.psar&&(this.psar=this.low1),this.low2<this.psar&&(this.psar=this.low2)}else S>this.psar?(this.isBullTrend=!0,this.psar=this.lowest,this.highest=S,this.accelerationFactor=this.start):(I<this.lowest&&(this.lowest=I,L=this.accelerationFactor+this.acceleration,this.accelerationFactor=L>this.max?this.max:L),this.high1>this.psar&&(this.psar=this.high1),this.high2>this.psar&&(this.psar=this.high2));return this.low2=this.low1,this.low1=I,this.high2=this.high1,this.high1=S,this.result=this.psar,this.result},B.prototype.momentValue=function(S,I){if(!this.result)return I;var N,L=this.isBullTrend,Y=this.result,X=this.low1,pe=this.high1,_e=this.low2,Oe=this.high2,be=this.highest,Ke=this.lowest,Te=this.accelerationFactor;return N=L?Y+Te*(be-Y):Y+Te*(Ke-Y),L?I<N?N=be:(X<N&&(N=X),_e<N&&(N=_e)):S>N?N=Ke:(pe>N&&(N=pe),Oe>N&&(N=Oe)),N},B}(),De=function(){function B(S){this.period=S,this.prevValue=0,this.sumCount=1}return B.prototype.nextValue=function(S){var I=this;return this.sumCount<this.period?(this.prevValue+=S,void this.sumCount++):this.sumCount===this.period?(this.prevValue+=S,this.sumCount++,this.nextValue=function(N){return I.prevValue=I.prevValue-I.prevValue/I.period+N},this.prevValue):void 0},B.prototype.momentValue=function(S){if(!(this.sumCount<this.period))return this.prevValue-this.prevValue/this.period+S},B}(),ke=function(){function B(S){S===void 0&&(S=14),this.period=S,this.wma1=new De(S),this.wma2=new De(S),this.wma3=new De(S),this.wema=new h(S)}return B.prototype.nextValue=function(S,I,N){if(!this.prevClose)return this.prevHigh=S,this.prevLow=I,void(this.prevClose=N);var L=0,Y=0,X=S-this.prevHigh,pe=this.prevLow-I;X>pe&&X>0&&(L=X),pe>X&&pe>0&&(Y=pe),(L>Y||Y<0)&&(Y=0);var _e=this.wma1.nextValue(ue(S,I,this.prevClose)),Oe=this.wma2.nextValue(L),be=this.wma3.nextValue(Y);if(this.prevHigh=S,this.prevLow=I,this.prevClose=N,Oe!==void 0&&be!==void 0){var Ke=100*Oe/_e,Te=100*be/_e,nn=Ke>Te?Ke-Te:Te-Ke;return{adx:this.wema.nextValue(nn/(Ke+Te)*100),pdi:Ke,mdi:Te}}},B.prototype.momentValue=function(S,I,N){if(this.prevClose){var L=0,Y=0,X=S-this.prevHigh,pe=this.prevLow-I;X>pe&&X>0&&(L=X),pe>X&&pe>0&&(Y=pe),(L>Y||Y<0)&&(Y=0);var _e=this.wma1.momentValue(ue(S,I,this.prevClose)),Oe=this.wma2.momentValue(L),be=this.wma3.momentValue(Y);if(Oe!==void 0&&be!==void 0){var Ke=100*Oe/_e,Te=100*be/_e,nn=Ke>Te?Ke-Te:Te-Ke;return{adx:this.wema.momentValue(nn/(Ke+Te)*100),pdi:Ke,mdi:Te}}}},B}(),xe=function(){function B(S,I,N){S===void 0&&(S=10),I===void 0&&(I=3),N===void 0&&(N="WEMA"),this.multiplier=I,this.atr=new me(S,N)}return B.prototype.nextValue=function(S,I,N){var L=this.atr.nextValue(S,I,N);if(L){var Y=(S+I)/2,X=Y+this.multiplier*L,pe=Y-this.multiplier*L;this.prevLower&&(pe=pe>this.prevLower||this.prevClose<this.prevLower?pe:this.prevLower,X=X<this.prevUpper||this.prevClose>this.prevUpper?X:this.prevUpper);var _e=X,Oe=(_e=this.prevSuper===this.prevUpper?N>X?pe:X:N<pe?X:pe)===X?1:-1;return this.prevUpper=X,this.prevLower=pe,this.prevSuper=_e,this.prevClose=N,{upper:X,lower:pe,superTrend:_e,direction:Oe}}},B.prototype.momentValue=function(S,I,N){var L=this.atr.momentValue(S,I),Y=(S+I)/2,X=Y+this.multiplier*L,pe=Y-this.multiplier*L;this.prevLower&&(pe=pe>this.prevLower||this.prevClose<this.prevLower?pe:this.prevLower,X=X<this.prevSuper||this.prevClose>this.prevUpper?X:this.prevUpper);var _e=X;return{upper:X,lower:pe,superTrend:_e=this.prevSuper===this.prevUpper?N>X?pe:X:N<pe?X:pe,direction:_e===X?1:-1}},B}(),ze=function(B){return(B.o+B.h+B.l+B.c)/4},Pe=function(){function B(S,I){S===void 0&&(S=4),I===void 0&&(I=ze),this.sum=0,this.sessionPricesLookup=new Set,this.sessionVolumes={},this.prevCandle=null,this.source=I,this.precision=S,this.valueToRoundWith=Math.pow(10,this.precision)}return B.prototype.getSession=function(S,I){var N=this;I===void 0&&(I=15);var L=this.source(S),Y=1/0,X=L;this.sessionPricesLookup.forEach(function(Ia){var Bc=N.diffPercent(Ia,L);Bc>I?(N.sessionPricesLookup.delete(Ia),delete N.sessionVolumes[Ia]):Bc<Y&&(Y=Bc,X=Ia)});var pe=Array.from(this.sessionPricesLookup).sort(),_e=pe.indexOf(X),Oe=new Map;if(_e===-1)return Oe;for(var be=Math.round(pe.length/4),Ke=0,Te=0;Te<4;Te++){for(var nn=Te*be,Dt=nn+be,Or=0,Ji=0,Lc=nn;Lc<Dt;Lc++){var Vc=pe[nn],kh=this.sessionVolumes[Vc];Or<kh&&(Or=kh,Ji=Vc)}this.diffPercent(Ke,Ji)<1&&(Or=Oe.get(Ke)+Or,Ji=this.roundPrice((Ji+Ke)/2),Oe.delete(Ke)),Oe.set(Ji,Or),Ke=Ji}return Oe},B.prototype.getSessionAvg=function(){return this.sum/this.sessionPricesLookup.size},B.prototype.getRawSession=function(){return this.sessionVolumes},B.prototype.nextValue=function(S){var I,N=this.roundPrice(this.source(S)),L=((I=this.prevCandle)===null||I===void 0?void 0:I.time)===S.time?S.v-this.prevCandle.v:S.v;this.addToSession(N,L),this.sum+=L,this.lastPrice=N,this.prevCandle=S},B.prototype.roundPrice=function(S){return Math.round((S+Number.EPSILON)*this.valueToRoundWith)/this.valueToRoundWith},B.prototype.addToSession=function(S,I){this.sessionPricesLookup.has(S)?this.sessionVolumes[S]+=I:(this.sessionPricesLookup.add(S),this.sessionVolumes[S]=I)},B.prototype.diffPercent=function(S,I){return S<I?100*(I-S)/S:100*(S-I)/I},B}(),$t=function(){function B(S,I){S===void 0&&(S=3),I===void 0&&(I=10),this.accDistribution=0,this.emaFast=new p(S),this.emaSlow=new p(I)}return B.prototype.nextValue=function(S,I,N,L){return this.accDistribution+=N===S&&N===I||S===I?0:(2*N-I-S)/(S-I)*L,this.emaFast.nextValue(this.accDistribution)-this.emaSlow.nextValue(this.accDistribution)},B.prototype.momentValue=function(S,I,N,L){var Y=this.accDistribution+(N===S&&N===I||S===I?0:(2*N-I-S)/(S-I)*L);return this.emaFast.momentValue(Y)-this.emaSlow.momentValue(Y)},B}(),Ft=function(){function B(S,I,N){I===void 0&&(I=4),N===void 0&&(N=30),this.sumNoise=0,this.circular=new c(S),this.nfastend=2/(I+1),this.nslowend=2/(N+1),this.prevPrice=0,this.prevAMA=0}return B.prototype.nextValue=function(S){var I,N=this.prevPrice,L=Math.abs(S-N),Y=(I=this.circular.push(L))!==null&&I!==void 0?I:0;if(this.sumNoise+=L-(this.circular.filled?Y:0),!this.circular.filled)return this.prevAMA=S,void(this.prevPrice=S);var X=Math.abs(S-N),pe=this.sumNoise,_e=pe!==0?X/pe:0,Oe=Math.pow(_e*(this.nfastend-this.nslowend)+this.nslowend,2),be=this.prevAMA+Oe*(S-this.prevAMA);return this.prevAMA=be,this.prevPrice=S,be},B.prototype.momentValue=function(){return this.prevAMA},B}();n.AC=M,n.ADX=ke,n.AMA=Ft,n.AO=C,n.ATR=me,n.BollingerBands=Ae,n.CCI=ge,n.ChaikinOscillator=$t,n.CircularBuffer=c,n.Correlation=b,n.DC=Be,n.EMA=p,n.EWMA=P,n.Extremums=u,n.HeikenAshi=Me,n.LWMA=ie,n.Level=y,n.MACD=at,n.MFI=O,n.Move=q,n.PSAR=et,n.Pivot=je,n.RMA=k,n.ROC=we,n.RSI=ee,n.SMA=d,n.SMMA=T,n.Sampler=g,n.StandardDeviation=He,n.Stochastic=G,n.StochasticRSI=ye,n.SuperTrend=xe,n.TrendLines=l,n.UniLevel=A,n.VolumeProfile=Pe,n.WEMA=h,n.WMA=x,n.WWS=De,n.Wave=Z,n.cRSI=qe,Object.defineProperty(n,"__esModule",{value:!0})})});var E5=Hm((iS,rS)=>{((n,t)=>{typeof define=="function"&&define.amd?define([],t):typeof rS=="object"&&typeof iS<"u"?rS.exports=t():n.Papa=t()})(iS,function n(){var t=typeof self<"u"?self:typeof window<"u"?window:t!==void 0?t:{},e,i=!t.document&&!!t.postMessage,r=t.IS_PAPA_WORKER||!1,s={},o=0,a={};function l(C){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(M){var O=P(M);O.chunkSize=parseInt(O.chunkSize),M.step||M.chunk||(O.chunkSize=null),this._handle=new p(O),(this._handle.streamer=this)._config=O}.call(this,C),this.parseChunk=function(M,O){var R=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<R){let H=this._config.newline;H||(q=this._config.quoteChar||'"',H=this._handle.guessLineEndings(M,q)),M=[...M.split(H).slice(R)].join(H)}this.isFirstChunk&&k(this._config.beforeFirstChunk)&&(q=this._config.beforeFirstChunk(M))!==void 0&&(M=q),this.isFirstChunk=!1,this._halted=!1;var R=this._partialLine+M,q=(this._partialLine="",this._handle.parse(R,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(M=q.meta.cursor,R=(this._finished||(this._partialLine=R.substring(M-this._baseIndex),this._baseIndex=M),q&&q.data&&(this._rowCount+=q.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),r)t.postMessage({results:q,workerId:a.WORKER_ID,finished:R});else if(k(this._config.chunk)&&!O){if(this._config.chunk(q,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=q=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(q.data),this._completeResults.errors=this._completeResults.errors.concat(q.errors),this._completeResults.meta=q.meta),this._completed||!R||!k(this._config.complete)||q&&q.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),R||q&&q.meta.paused||this._nextChunk(),q}this._halted=!0},this._sendError=function(M){k(this._config.error)?this._config.error(M):r&&this._config.error&&t.postMessage({workerId:a.WORKER_ID,error:M,finished:!1})}}function c(C){var M;(C=C||{}).chunkSize||(C.chunkSize=a.RemoteChunkSize),l.call(this,C),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(O){this._input=O,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(M=new XMLHttpRequest,this._config.withCredentials&&(M.withCredentials=this._config.withCredentials),i||(M.onload=T(this._chunkLoaded,this),M.onerror=T(this._chunkError,this)),M.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var O,R=this._config.downloadRequestHeaders;for(O in R)M.setRequestHeader(O,R[O])}var q;this._config.chunkSize&&(q=this._start+this._config.chunkSize-1,M.setRequestHeader("Range","bytes="+this._start+"-"+q));try{M.send(this._config.downloadRequestBody)}catch(H){this._chunkError(H.message)}i&&M.status===0&&this._chunkError()}},this._chunkLoaded=function(){M.readyState===4&&(M.status<200||400<=M.status?this._chunkError():(this._start+=this._config.chunkSize||M.responseText.length,this._finished=!this._config.chunkSize||this._start>=(O=>(O=O.getResponseHeader("Content-Range"))!==null?parseInt(O.substring(O.lastIndexOf("/")+1)):-1)(M),this.parseChunk(M.responseText)))},this._chunkError=function(O){O=M.statusText||O,this._sendError(new Error(O))}}function u(C){(C=C||{}).chunkSize||(C.chunkSize=a.LocalChunkSize),l.call(this,C);var M,O,R=typeof FileReader<"u";this.stream=function(q){this._input=q,O=q.slice||q.webkitSlice||q.mozSlice,R?((M=new FileReader).onload=T(this._chunkLoaded,this),M.onerror=T(this._chunkError,this)):M=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var q=this._input,H=(this._config.chunkSize&&(H=Math.min(this._start+this._config.chunkSize,this._input.size),q=O.call(q,this._start,H)),M.readAsText(q,this._config.encoding));R||this._chunkLoaded({target:{result:H}})},this._chunkLoaded=function(q){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(q.target.result)},this._chunkError=function(){this._sendError(M.error)}}function d(C){var M;l.call(this,C=C||{}),this.stream=function(O){return M=O,this._nextChunk()},this._nextChunk=function(){var O,R;if(!this._finished)return O=this._config.chunkSize,M=O?(R=M.substring(0,O),M.substring(O)):(R=M,""),this._finished=!M,this.parseChunk(R)}}function h(C){l.call(this,C=C||{});var M=[],O=!0,R=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(q){this._input=q,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){R&&M.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),M.length?this.parseChunk(M.shift()):O=!0},this._streamData=T(function(q){try{M.push(typeof q=="string"?q:q.toString(this._config.encoding)),O&&(O=!1,this._checkIsFinished(),this.parseChunk(M.shift()))}catch(H){this._streamError(H)}},this),this._streamError=T(function(q){this._streamCleanUp(),this._sendError(q)},this),this._streamEnd=T(function(){this._streamCleanUp(),R=!0,this._streamData("")},this),this._streamCleanUp=T(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function p(C){var M,O,R,q,H=Math.pow(2,53),Z=-H,ne=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ce=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,G=this,$=0,ee=0,ye=!1,de=!1,ge=[],ie={data:[],errors:[],meta:{}};function ue(Ce){return C.skipEmptyLines==="greedy"?Ce.join("").trim()==="":Ce.length===1&&Ce[0].length===0}function me(){if(ie&&R&&(Be("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),R=!1),C.skipEmptyLines&&(ie.data=ie.data.filter(function(at){return!ue(at)})),we()){let at=function(Me,je){k(C.transformHeader)&&(Me=C.transformHeader(Me,je)),ge.push(Me)};var Ae=at;if(ie)if(Array.isArray(ie.data[0])){for(var Ce=0;we()&&Ce<ie.data.length;Ce++)ie.data[Ce].forEach(at);ie.data.splice(0,1)}else ie.data.forEach(at)}function qe(at,Me){for(var je=C.header?{}:[],et=0;et<at.length;et++){var De=et,ke=at[et],ke=((xe,ze)=>(Pe=>(C.dynamicTypingFunction&&C.dynamicTyping[Pe]===void 0&&(C.dynamicTyping[Pe]=C.dynamicTypingFunction(Pe)),(C.dynamicTyping[Pe]||C.dynamicTyping)===!0))(xe)?ze==="true"||ze==="TRUE"||ze!=="false"&&ze!=="FALSE"&&((Pe=>{if(ne.test(Pe)&&(Pe=parseFloat(Pe),Z<Pe&&Pe<H))return 1})(ze)?parseFloat(ze):ce.test(ze)?new Date(ze):ze===""?null:ze):ze)(De=C.header?et>=ge.length?"__parsed_extra":ge[et]:De,ke=C.transform?C.transform(ke,De):ke);De==="__parsed_extra"?(je[De]=je[De]||[],je[De].push(ke)):je[De]=ke}return C.header&&(et>ge.length?Be("FieldMismatch","TooManyFields","Too many fields: expected "+ge.length+" fields but parsed "+et,ee+Me):et<ge.length&&Be("FieldMismatch","TooFewFields","Too few fields: expected "+ge.length+" fields but parsed "+et,ee+Me)),je}var He;ie&&(C.header||C.dynamicTyping||C.transform)&&(He=1,!ie.data.length||Array.isArray(ie.data[0])?(ie.data=ie.data.map(qe),He=ie.data.length):ie.data=qe(ie.data,0),C.header&&ie.meta&&(ie.meta.fields=ge),ee+=He)}function we(){return C.header&&ge.length===0}function Be(Ce,qe,He,Ae){Ce={type:Ce,code:qe,message:He},Ae!==void 0&&(Ce.row=Ae),ie.errors.push(Ce)}k(C.step)&&(q=C.step,C.step=function(Ce){ie=Ce,we()?me():(me(),ie.data.length!==0&&($+=Ce.data.length,C.preview&&$>C.preview?O.abort():(ie.data=ie.data[0],q(ie,G))))}),this.parse=function(Ce,qe,He){var Ae=C.quoteChar||'"',Ae=(C.newline||(C.newline=this.guessLineEndings(Ce,Ae)),R=!1,C.delimiter?k(C.delimiter)&&(C.delimiter=C.delimiter(Ce),ie.meta.delimiter=C.delimiter):((Ae=((at,Me,je,et,De)=>{var ke,xe,ze,Pe;De=De||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var $t=0;$t<De.length;$t++){for(var Ft,B=De[$t],S=0,I=0,N=0,L=(ze=void 0,new A({comments:et,delimiter:B,newline:Me,preview:10}).parse(at)),Y=0;Y<L.data.length;Y++)je&&ue(L.data[Y])?N++:(Ft=L.data[Y].length,I+=Ft,ze===void 0?ze=Ft:0<Ft&&(S+=Math.abs(Ft-ze),ze=Ft));0<L.data.length&&(I/=L.data.length-N),(xe===void 0||S<=xe)&&(Pe===void 0||Pe<I)&&1.99<I&&(xe=S,ke=B,Pe=I)}return{successful:!!(C.delimiter=ke),bestDelimiter:ke}})(Ce,C.newline,C.skipEmptyLines,C.comments,C.delimitersToGuess)).successful?C.delimiter=Ae.bestDelimiter:(R=!0,C.delimiter=a.DefaultDelimiter),ie.meta.delimiter=C.delimiter),P(C));return C.preview&&C.header&&Ae.preview++,M=Ce,O=new A(Ae),ie=O.parse(M,qe,He),me(),ye?{meta:{paused:!0}}:ie||{meta:{paused:!1}}},this.paused=function(){return ye},this.pause=function(){ye=!0,O.abort(),M=k(C.chunk)?"":M.substring(O.getCharIndex())},this.resume=function(){G.streamer._halted?(ye=!1,G.streamer.parseChunk(M,!0)):setTimeout(G.resume,3)},this.aborted=function(){return de},this.abort=function(){de=!0,O.abort(),ie.meta.aborted=!0,k(C.complete)&&C.complete(ie),M=""},this.guessLineEndings=function(at,Ae){at=at.substring(0,1048576);var Ae=new RegExp(g(Ae)+"([^]*?)"+g(Ae),"gm"),He=(at=at.replace(Ae,"")).split("\r"),Ae=at.split(`
`),at=1<Ae.length&&Ae[0].length<He[0].length;if(He.length===1||at)return`
`;for(var Me=0,je=0;je<He.length;je++)He[je][0]===`
`&&Me++;return Me>=He.length/2?`\r
`:"\r"}}function g(C){return C.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function A(C){var M=(C=C||{}).delimiter,O=C.newline,R=C.comments,q=C.step,H=C.preview,Z=C.fastMode,ne=null,ce=!1,G=C.quoteChar==null?'"':C.quoteChar,$=G;if(C.escapeChar!==void 0&&($=C.escapeChar),(typeof M!="string"||-1<a.BAD_DELIMITERS.indexOf(M))&&(M=","),R===M)throw new Error("Comment character same as delimiter");R===!0?R="#":(typeof R!="string"||-1<a.BAD_DELIMITERS.indexOf(R))&&(R=!1),O!==`
`&&O!=="\r"&&O!==`\r
`&&(O=`
`);var ee=0,ye=!1;this.parse=function(de,ge,ie){if(typeof de!="string")throw new Error("Input must be a string");var ue=de.length,me=M.length,we=O.length,Be=R.length,Ce=k(q),qe=[],He=[],Ae=[],at=ee=0;if(!de)return S();if(Z||Z!==!1&&de.indexOf(G)===-1){for(var Me=de.split(O),je=0;je<Me.length;je++){if(Ae=Me[je],ee+=Ae.length,je!==Me.length-1)ee+=O.length;else if(ie)return S();if(!R||Ae.substring(0,Be)!==R){if(Ce){if(qe=[],Pe(Ae.split(M)),I(),ye)return S()}else Pe(Ae.split(M));if(H&&H<=je)return qe=qe.slice(0,H),S(!0)}}return S()}for(var et=de.indexOf(M,ee),De=de.indexOf(O,ee),ke=new RegExp(g($)+g(G),"g"),xe=de.indexOf(G,ee);;)if(de[ee]===G)for(xe=ee,ee++;;){if((xe=de.indexOf(G,xe+1))===-1)return ie||He.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:qe.length,index:ee}),Ft();if(xe===ue-1)return Ft(de.substring(ee,xe).replace(ke,G));if(G===$&&de[xe+1]===$)xe++;else if(G===$||xe===0||de[xe-1]!==$){et!==-1&&et<xe+1&&(et=de.indexOf(M,xe+1));var ze=$t((De=De!==-1&&De<xe+1?de.indexOf(O,xe+1):De)===-1?et:Math.min(et,De));if(de.substr(xe+1+ze,me)===M){Ae.push(de.substring(ee,xe).replace(ke,G)),de[ee=xe+1+ze+me]!==G&&(xe=de.indexOf(G,ee)),et=de.indexOf(M,ee),De=de.indexOf(O,ee);break}if(ze=$t(De),de.substring(xe+1+ze,xe+1+ze+we)===O){if(Ae.push(de.substring(ee,xe).replace(ke,G)),B(xe+1+ze+we),et=de.indexOf(M,ee),xe=de.indexOf(G,ee),Ce&&(I(),ye))return S();if(H&&qe.length>=H)return S(!0);break}He.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:qe.length,index:ee}),xe++}}else if(R&&Ae.length===0&&de.substring(ee,ee+Be)===R){if(De===-1)return S();ee=De+we,De=de.indexOf(O,ee),et=de.indexOf(M,ee)}else if(et!==-1&&(et<De||De===-1))Ae.push(de.substring(ee,et)),ee=et+me,et=de.indexOf(M,ee);else{if(De===-1)break;if(Ae.push(de.substring(ee,De)),B(De+we),Ce&&(I(),ye))return S();if(H&&qe.length>=H)return S(!0)}return Ft();function Pe(N){qe.push(N),at=ee}function $t(N){var L=0;return L=N!==-1&&(N=de.substring(xe+1,N))&&N.trim()===""?N.length:L}function Ft(N){return ie||(N===void 0&&(N=de.substring(ee)),Ae.push(N),ee=ue,Pe(Ae),Ce&&I()),S()}function B(N){ee=N,Pe(Ae),Ae=[],De=de.indexOf(O,ee)}function S(N){if(C.header&&!ge&&qe.length&&!ce){var L=qe[0],Y={},X=new Set(L);let pe=!1;for(let _e=0;_e<L.length;_e++){let Oe=L[_e];if(Y[Oe=k(C.transformHeader)?C.transformHeader(Oe,_e):Oe]){let be,Ke=Y[Oe];for(;be=Oe+"_"+Ke,Ke++,X.has(be););X.add(be),L[_e]=be,Y[Oe]++,pe=!0,(ne=ne===null?{}:ne)[be]=Oe}else Y[Oe]=1,L[_e]=Oe;X.add(Oe)}pe&&console.warn("Duplicate headers found and renamed."),ce=!0}return{data:qe,errors:He,meta:{delimiter:M,linebreak:O,aborted:ye,truncated:!!N,cursor:at+(ge||0),renamedHeaders:ne}}}function I(){q(S()),qe=[],He=[]}},this.abort=function(){ye=!0},this.getCharIndex=function(){return ee}}function y(C){var M=C.data,O=s[M.workerId],R=!1;if(M.error)O.userError(M.error,M.file);else if(M.results&&M.results.data){var q={abort:function(){R=!0,b(M.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:x,resume:x};if(k(O.userStep)){for(var H=0;H<M.results.data.length&&(O.userStep({data:M.results.data[H],errors:M.results.errors,meta:M.results.meta},q),!R);H++);delete M.results}else k(O.userChunk)&&(O.userChunk(M.results,q,M.file),delete M.results)}M.finished&&!R&&b(M.workerId,M.results)}function b(C,M){var O=s[C];k(O.userComplete)&&O.userComplete(M),O.terminate(),delete s[C]}function x(){throw new Error("Not implemented.")}function P(C){if(typeof C!="object"||C===null)return C;var M,O=Array.isArray(C)?[]:{};for(M in C)O[M]=P(C[M]);return O}function T(C,M){return function(){C.apply(M,arguments)}}function k(C){return typeof C=="function"}return a.parse=function(C,M){var O=(M=M||{}).dynamicTyping||!1;if(k(O)&&(M.dynamicTypingFunction=O,O={}),M.dynamicTyping=O,M.transform=!!k(M.transform)&&M.transform,!M.worker||!a.WORKERS_SUPPORTED)return O=null,a.NODE_STREAM_INPUT,typeof C=="string"?(C=(R=>R.charCodeAt(0)!==65279?R:R.slice(1))(C),O=new(M.download?c:d)(M)):C.readable===!0&&k(C.read)&&k(C.on)?O=new h(M):(t.File&&C instanceof File||C instanceof Object)&&(O=new u(M)),O.stream(C);(O=(()=>{var R;return!!a.WORKERS_SUPPORTED&&(R=(()=>{var q=t.URL||t.webkitURL||null,H=n.toString();return a.BLOB_URL||(a.BLOB_URL=q.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",H,")();"],{type:"text/javascript"})))})(),(R=new t.Worker(R)).onmessage=y,R.id=o++,s[R.id]=R)})()).userStep=M.step,O.userChunk=M.chunk,O.userComplete=M.complete,O.userError=M.error,M.step=k(M.step),M.chunk=k(M.chunk),M.complete=k(M.complete),M.error=k(M.error),delete M.worker,O.postMessage({input:C,config:M,workerId:O.id})},a.unparse=function(C,M){var O=!1,R=!0,q=",",H=`\r
`,Z='"',ne=Z+Z,ce=!1,G=null,$=!1,ee=((()=>{if(typeof M=="object"){if(typeof M.delimiter!="string"||a.BAD_DELIMITERS.filter(function(ge){return M.delimiter.indexOf(ge)!==-1}).length||(q=M.delimiter),typeof M.quotes!="boolean"&&typeof M.quotes!="function"&&!Array.isArray(M.quotes)||(O=M.quotes),typeof M.skipEmptyLines!="boolean"&&typeof M.skipEmptyLines!="string"||(ce=M.skipEmptyLines),typeof M.newline=="string"&&(H=M.newline),typeof M.quoteChar=="string"&&(Z=M.quoteChar),typeof M.header=="boolean"&&(R=M.header),Array.isArray(M.columns)){if(M.columns.length===0)throw new Error("Option columns is empty");G=M.columns}M.escapeChar!==void 0&&(ne=M.escapeChar+Z),M.escapeFormulae instanceof RegExp?$=M.escapeFormulae:typeof M.escapeFormulae=="boolean"&&M.escapeFormulae&&($=/^[=+\-@\t\r].*$/)}})(),new RegExp(g(Z),"g"));if(typeof C=="string"&&(C=JSON.parse(C)),Array.isArray(C)){if(!C.length||Array.isArray(C[0]))return ye(null,C,ce);if(typeof C[0]=="object")return ye(G||Object.keys(C[0]),C,ce)}else if(typeof C=="object")return typeof C.data=="string"&&(C.data=JSON.parse(C.data)),Array.isArray(C.data)&&(C.fields||(C.fields=C.meta&&C.meta.fields||G),C.fields||(C.fields=Array.isArray(C.data[0])?C.fields:typeof C.data[0]=="object"?Object.keys(C.data[0]):[]),Array.isArray(C.data[0])||typeof C.data[0]=="object"||(C.data=[C.data])),ye(C.fields||[],C.data||[],ce);throw new Error("Unable to serialize unrecognized input");function ye(ge,ie,ue){var me="",we=(typeof ge=="string"&&(ge=JSON.parse(ge)),typeof ie=="string"&&(ie=JSON.parse(ie)),Array.isArray(ge)&&0<ge.length),Be=!Array.isArray(ie[0]);if(we&&R){for(var Ce=0;Ce<ge.length;Ce++)0<Ce&&(me+=q),me+=de(ge[Ce],Ce);0<ie.length&&(me+=H)}for(var qe=0;qe<ie.length;qe++){var He=(we?ge:ie[qe]).length,Ae=!1,at=we?Object.keys(ie[qe]).length===0:ie[qe].length===0;if(ue&&!we&&(Ae=ue==="greedy"?ie[qe].join("").trim()==="":ie[qe].length===1&&ie[qe][0].length===0),ue==="greedy"&&we){for(var Me=[],je=0;je<He;je++){var et=Be?ge[je]:je;Me.push(ie[qe][et])}Ae=Me.join("").trim()===""}if(!Ae){for(var De=0;De<He;De++){0<De&&!at&&(me+=q);var ke=we&&Be?ge[De]:De;me+=de(ie[qe][ke],De)}qe<ie.length-1&&(!ue||0<He&&!at)&&(me+=H)}}return me}function de(ge,ie){var ue,me;return ge==null?"":ge.constructor===Date?JSON.stringify(ge).slice(1,25):(me=!1,$&&typeof ge=="string"&&$.test(ge)&&(ge="'"+ge,me=!0),ue=ge.toString().replace(ee,ne),(me=me||O===!0||typeof O=="function"&&O(ge,ie)||Array.isArray(O)&&O[ie]||((we,Be)=>{for(var Ce=0;Ce<Be.length;Ce++)if(-1<we.indexOf(Be[Ce]))return!0;return!1})(ue,a.BAD_DELIMITERS)||-1<ue.indexOf(q)||ue.charAt(0)===" "||ue.charAt(ue.length-1)===" ")?Z+ue+Z:ue)}},a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!i&&!!t.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=A,a.ParserHandle=p,a.NetworkStreamer=c,a.FileStreamer=u,a.StringStreamer=d,a.ReadableStreamStreamer=h,t.jQuery&&((e=t.jQuery).fn.parse=function(C){var M=C.config||{},O=[];return this.each(function(H){if(!(e(this).prop("tagName").toUpperCase()==="INPUT"&&e(this).attr("type").toLowerCase()==="file"&&t.FileReader)||!this.files||this.files.length===0)return!0;for(var Z=0;Z<this.files.length;Z++)O.push({file:this.files[Z],inputElem:this,instanceConfig:e.extend({},M)})}),R(),this;function R(){if(O.length===0)k(C.complete)&&C.complete();else{var H,Z,ne,ce,G=O[0];if(k(C.before)){var $=C.before(G.file,G.inputElem);if(typeof $=="object"){if($.action==="abort")return H="AbortError",Z=G.file,ne=G.inputElem,ce=$.reason,void(k(C.error)&&C.error({name:H},Z,ne,ce));if($.action==="skip")return void q();typeof $.config=="object"&&(G.instanceConfig=e.extend(G.instanceConfig,$.config))}else if($==="skip")return void q()}var ee=G.instanceConfig.complete;G.instanceConfig.complete=function(ye){k(ee)&&ee(ye,G.file,G.inputElem),q()},a.parse(G.file,G.instanceConfig)}}function q(){O.splice(0,1),R()}}),r&&(t.onmessage=function(C){C=C.data,a.WORKER_ID===void 0&&C&&(a.WORKER_ID=C.workerId),typeof C.input=="string"?t.postMessage({workerId:a.WORKER_ID,results:a.parse(C.input,C.config),finished:!0}):(t.File&&C.input instanceof File||C.input instanceof Object)&&(C=a.parse(C.input,C.config))&&t.postMessage({workerId:a.WORKER_ID,results:C,finished:!0})}),(c.prototype=Object.create(l.prototype)).constructor=c,(u.prototype=Object.create(l.prototype)).constructor=u,(d.prototype=Object.create(d.prototype)).constructor=d,(h.prototype=Object.create(l.prototype)).constructor=h,a})});function $m(n,t){return Object.is(n,t)}var rn=null,Nh=!1,Xm=1,gi=Symbol("SIGNAL");function lt(n){let t=rn;return rn=n,t}function Zm(){return rn}var jc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Wc(n){if(Nh)throw new Error("");if(rn===null)return;rn.consumerOnSignalRead(n);let t=rn.nextProducerIndex++;if(Lh(rn),t<rn.producerNode.length&&rn.producerNode[t]!==n&&qc(rn)){let e=rn.producerNode[t];Fh(e,rn.producerIndexOfThis[t])}rn.producerNode[t]!==n&&(rn.producerNode[t]=n,rn.producerIndexOfThis[t]=qc(rn)?fS(n,rn,t):0),rn.producerLastReadVersion[t]=n.version}function pS(){Xm++}function Qm(n){if(!(qc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Xm)){if(!n.producerMustRecompute(n)&&!n_(n)){Km(n);return}n.producerRecomputeValue(n),Km(n)}}function Jm(n){if(n.liveConsumerNode===void 0)return;let t=Nh;Nh=!0;try{for(let e of n.liveConsumerNode)e.dirty||$5(e)}finally{Nh=t}}function e_(){return rn?.consumerAllowSignalWrites!==!1}function $5(n){n.dirty=!0,Jm(n),n.consumerMarkedDirty?.(n)}function Km(n){n.dirty=!1,n.lastCleanEpoch=Xm}function Rh(n){return n&&(n.nextProducerIndex=0),lt(n)}function t_(n,t){if(lt(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(qc(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)Fh(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function n_(n){Lh(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],i=n.producerLastReadVersion[t];if(i!==e.version||(Qm(e),i!==e.version))return!0}return!1}function i_(n){if(Lh(n),qc(n))for(let t=0;t<n.producerNode.length;t++)Fh(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function fS(n,t,e){if(gS(n),n.liveConsumerNode.length===0&&mS(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=fS(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function Fh(n,t){if(gS(n),n.liveConsumerNode.length===1&&mS(n))for(let i=0;i<n.producerNode.length;i++)Fh(n.producerNode[i],n.producerIndexOfThis[i]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[t],r=n.liveConsumerNode[t];Lh(r),r.producerIndexOfThis[i]=t}}function qc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Lh(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function gS(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function mS(n){return n.producerNode!==void 0}function r_(n,t){let e=Object.create(X5);e.computation=n,t!==void 0&&(e.equal=t);let i=()=>{if(Qm(e),Wc(e),e.value===Oh)throw e.error;return e.value};return i[gi]=e,i}var Ym=Symbol("UNSET"),Gm=Symbol("COMPUTING"),Oh=Symbol("ERRORED"),X5=Ne(re({},jc),{value:Ym,dirty:!0,error:null,equal:$m,kind:"computed",producerMustRecompute(n){return n.value===Ym||n.value===Gm},producerRecomputeValue(n){if(n.value===Gm)throw new Error("Detected cycle in computations.");let t=n.value;n.value=Gm;let e=Rh(n),i,r=!1;try{i=n.computation(),lt(null),r=t!==Ym&&t!==Oh&&i!==Oh&&n.equal(t,i)}catch(s){i=Oh,n.error=s}finally{t_(n,e)}if(r){n.value=t;return}n.value=i,n.version++}});function Z5(){throw new Error}var _S=Z5;function AS(n){_S(n)}function s_(n){_S=n}var Q5=null;function o_(n,t){let e=Object.create(Vh);e.value=n,t!==void 0&&(e.equal=t);let i=()=>(Wc(e),e.value);return i[gi]=e,i}function Uc(n,t){e_()||AS(n),n.equal(n.value,t)||(n.value=t,J5(n))}function a_(n,t){e_()||AS(n),Uc(n,t(n.value))}var Vh=Ne(re({},jc),{equal:$m,value:void 0,kind:"signal"});function J5(n){n.version++,pS(),Jm(n),Q5?.()}function l_(n){let t=lt(null);try{return n()}finally{lt(t)}}var c_;function zc(){return c_}function Rr(n){let t=c_;return c_=n,t}var Bh=Symbol("NotFound");function Le(n){return typeof n=="function"}function Pa(n){let e=n(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var qh=Pa(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function po(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var Yt=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let s of e)s.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(Le(i))try{i()}catch(s){t=s instanceof qh?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{yS(s)}catch(o){t=t??[],o instanceof qh?t=[...t,...o.errors]:t.push(o)}}if(t)throw new qh(t)}}add(t){var e;if(t&&t!==this)if(this.closed)yS(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&po(e,t)}remove(t){let{_finalizers:e}=this;e&&po(e,t),t instanceof n&&t._removeParent(this)}};Yt.EMPTY=(()=>{let n=new Yt;return n.closed=!0,n})();var u_=Yt.EMPTY;function jh(n){return n instanceof Yt||n&&"closed"in n&&Le(n.remove)&&Le(n.add)&&Le(n.unsubscribe)}function yS(n){Le(n)?n():n.unsubscribe()}var Pi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Na={setTimeout(n,t,...e){let{delegate:i}=Na;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=Na;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Wh(n){Na.setTimeout(()=>{let{onUnhandledError:t}=Pi;if(t)t(n);else throw n})}function Fr(){}var vS=d_("C",void 0,void 0);function wS(n){return d_("E",void 0,n)}function bS(n){return d_("N",n,void 0)}function d_(n,t,e){return{kind:n,value:t,error:e}}var fo=null;function Oa(n){if(Pi.useDeprecatedSynchronousErrorHandling){let t=!fo;if(t&&(fo={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:i}=fo;if(fo=null,e)throw i}}else n()}function SS(n){Pi.useDeprecatedSynchronousErrorHandling&&fo&&(fo.errorThrown=!0,fo.error=n)}var go=class extends Yt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,jh(t)&&t.add(this)):this.destination=s3}static create(t,e,i){return new Ra(t,e,i)}next(t){this.isStopped?p_(bS(t),this):this._next(t)}error(t){this.isStopped?p_(wS(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?p_(vS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},i3=Function.prototype.bind;function h_(n,t){return i3.call(n,t)}var f_=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){Uh(i)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){Uh(i)}else Uh(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Uh(e)}}},Ra=class extends go{constructor(t,e,i){super();let r;if(Le(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let s;this&&Pi.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&h_(t.next,s),error:t.error&&h_(t.error,s),complete:t.complete&&h_(t.complete,s)}):r=t}this.destination=new f_(r)}};function Uh(n){Pi.useDeprecatedSynchronousErrorHandling?SS(n):Wh(n)}function r3(n){throw n}function p_(n,t){let{onStoppedNotification:e}=Pi;e&&Na.setTimeout(()=>e(n,t))}var s3={closed:!0,next:Fr,error:r3,complete:Fr};var Fa=typeof Symbol=="function"&&Symbol.observable||"@@observable";function mn(n){return n}function g_(...n){return m_(n)}function m_(n){return n.length===0?mn:n.length===1?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}var Je=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){let s=a3(e)?e:new Ra(e,i,r);return Oa(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=CS(i),new i((r,s)=>{let o=new Ra({next:a=>{try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[Fa](){return this}pipe(...e){return m_(e)(this)}toPromise(e){return e=CS(e),new e((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=t=>new n(t),n})();function CS(n){var t;return(t=n??Pi.Promise)!==null&&t!==void 0?t:Promise}function o3(n){return n&&Le(n.next)&&Le(n.error)&&Le(n.complete)}function a3(n){return n&&n instanceof go||o3(n)&&jh(n)}function __(n){return Le(n?.lift)}function tt(n){return t=>{if(__(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ye(n,t,e,i,r){return new A_(n,t,e,i,r)}var A_=class extends go{constructor(t,e,i,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function La(){return tt((n,t)=>{let e=null;n._refCount++;let i=Ye(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}var Va=class extends Je{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,__(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Yt;let e=this.getSubject();t.add(this.source.subscribe(Ye(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Yt.EMPTY)}return t}refCount(){return La()(this)}};var xS=Pa(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ct=(()=>{class n extends Je{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new zh(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new xS}next(e){Oa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){Oa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){Oa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:s}=this;return i||r?u_:(this.currentObservers=null,s.push(e),new Yt(()=>{this.currentObservers=null,po(s,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:s}=this;i?e.error(r):s&&e.complete()}asObservable(){let e=new Je;return e.source=this,e}}return n.create=(t,e)=>new zh(t,e),n})(),zh=class extends ct{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,t)}error(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&i!==void 0?i:u_}};var Qt=class extends ct{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var y_={now(){return(y_.delegate||Date).now()},delegate:void 0};var Hh=class extends Yt{constructor(t,e){super()}schedule(t,e=0){return this}};var Hc={setInterval(n,t,...e){let{delegate:i}=Hc;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=Hc;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var Yh=class extends Hh{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,e)),this.pending=!0,this.delay=e,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,i=0){return Hc.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return e;e!=null&&Hc.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,e);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,r;try{this.work(t)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,po(i,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var Ba=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}};Ba.now=y_.now;var Gh=class extends Ba{constructor(t,e=Ba.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}};var Yc=new Gh(Yh),ES=Yc;var xn=new Je(n=>n.complete());function Kh(n){return n&&Le(n.schedule)}function DS(n){return n[n.length-1]}function qa(n){return Le(DS(n))?n.pop():void 0}function ps(n){return Kh(DS(n))?n.pop():void 0}function TS(n,t,e,i){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,t||[])).next())})}function MS(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function mo(n){return this instanceof mo?(this.v=n,this):new mo(n)}function IS(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(p){return function(g){return Promise.resolve(g).then(p,d)}}function a(p,g){i[p]&&(r[p]=function(A){return new Promise(function(y,b){s.push([p,A,y,b])>1||l(p,A)})},g&&(r[p]=g(r[p])))}function l(p,g){try{c(i[p](g))}catch(A){h(s[0][3],A)}}function c(p){p.value instanceof mo?Promise.resolve(p.value.v).then(u,d):h(s[0][2],p)}function u(p){l("next",p)}function d(p){l("throw",p)}function h(p,g){p(g),s.shift(),s.length&&l(s[0][0],s[0][1])}}function kS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof MS=="function"?MS(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(s){e[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),r(a,l,o.done,o.value)})}}function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}var ja=n=>n&&typeof n.length=="number"&&typeof n!="function";function $h(n){return Le(n?.then)}function Xh(n){return Le(n[Fa])}function Zh(n){return Symbol.asyncIterator&&Le(n?.[Symbol.asyncIterator])}function Qh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function l3(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Jh=l3();function ep(n){return Le(n?.[Jh])}function tp(n){return IS(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:i,done:r}=yield mo(e.read());if(r)return yield mo(void 0);yield yield mo(i)}}finally{e.releaseLock()}})}function np(n){return Le(n?.getReader)}function vt(n){if(n instanceof Je)return n;if(n!=null){if(Xh(n))return c3(n);if(ja(n))return u3(n);if($h(n))return d3(n);if(Zh(n))return PS(n);if(ep(n))return h3(n);if(np(n))return p3(n)}throw Qh(n)}function c3(n){return new Je(t=>{let e=n[Fa]();if(Le(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function u3(n){return new Je(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function d3(n){return new Je(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Wh)})}function h3(n){return new Je(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function PS(n){return new Je(t=>{f3(n,t).catch(e=>t.error(e))})}function p3(n){return PS(tp(n))}function f3(n,t){var e,i,r,s;return TS(this,void 0,void 0,function*(){try{for(e=kS(n);i=yield e.next(),!i.done;){let o=i.value;if(t.next(o),t.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})}function Wn(n,t,e,i=0,r=!1){let s=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function ip(n,t=0){return tt((e,i)=>{e.subscribe(Ye(i,r=>Wn(i,n,()=>i.next(r),t),()=>Wn(i,n,()=>i.complete(),t),r=>Wn(i,n,()=>i.error(r),t)))})}function rp(n,t=0){return tt((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function NS(n,t){return vt(n).pipe(rp(t),ip(t))}function OS(n,t){return vt(n).pipe(rp(t),ip(t))}function RS(n,t){return new Je(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}function FS(n,t){return new Je(e=>{let i;return Wn(e,t,()=>{i=n[Jh](),Wn(e,t,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){e.error(o);return}s?e.complete():e.next(r)},0,!0)}),()=>Le(i?.return)&&i.return()})}function sp(n,t){if(!n)throw new Error("Iterable cannot be null");return new Je(e=>{Wn(e,t,()=>{let i=n[Symbol.asyncIterator]();Wn(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function LS(n,t){return sp(tp(n),t)}function VS(n,t){if(n!=null){if(Xh(n))return NS(n,t);if(ja(n))return RS(n,t);if($h(n))return OS(n,t);if(Zh(n))return sp(n,t);if(ep(n))return FS(n,t);if(np(n))return LS(n,t)}throw Qh(n)}function Lt(n,t){return t?VS(n,t):vt(n)}function Ie(...n){let t=ps(n);return Lt(n,t)}function Wa(n,t){let e=Le(n)?n:()=>n,i=r=>r.error(e());return new Je(t?r=>t.schedule(i,0,r):i)}function v_(n){return!!n&&(n instanceof Je||Le(n.lift)&&Le(n.subscribe))}var Lr=Pa(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function BS(n){return n instanceof Date&&!isNaN(n)}function We(n,t){return tt((e,i)=>{let r=0;e.subscribe(Ye(i,s=>{i.next(n.call(t,s,r++))}))})}var{isArray:g3}=Array;function m3(n,t){return g3(t)?n(...t):n(t)}function Ua(n){return We(t=>m3(n,t))}var{isArray:_3}=Array,{getPrototypeOf:A3,prototype:y3,keys:v3}=Object;function op(n){if(n.length===1){let t=n[0];if(_3(t))return{args:t,keys:null};if(w3(t)){let e=v3(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function w3(n){return n&&typeof n=="object"&&A3(n)===y3}function ap(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function Gc(...n){let t=ps(n),e=qa(n),{args:i,keys:r}=op(n);if(i.length===0)return Lt([],t);let s=new Je(b3(i,t,r?o=>ap(r,o):mn));return e?s.pipe(Ua(e)):s}function b3(n,t,e=mn){return i=>{qS(t,()=>{let{length:r}=n,s=new Array(r),o=r,a=r;for(let l=0;l<r;l++)qS(t,()=>{let c=Lt(n[l],t),u=!1;c.subscribe(Ye(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(e(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function qS(n,t,e){n?Wn(e,n,t):t()}function jS(n,t,e,i,r,s,o,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&t.complete()},p=A=>c<i?g(A):l.push(A),g=A=>{s&&t.next(A),c++;let y=!1;vt(e(A,u++)).subscribe(Ye(t,b=>{r?.(b),s?p(b):t.next(b)},()=>{y=!0},void 0,()=>{if(y)try{for(c--;l.length&&c<i;){let b=l.shift();o?Wn(t,o,()=>g(b)):g(b)}h()}catch(b){t.error(b)}}))};return n.subscribe(Ye(t,p,()=>{d=!0,h()})),()=>{a?.()}}function Pt(n,t,e=1/0){return Le(t)?Pt((i,r)=>We((s,o)=>t(i,s,r,o))(vt(n(i,r))),e):(typeof t=="number"&&(e=t),tt((i,r)=>jS(i,r,n,e)))}function WS(n=1/0){return Pt(mn,n)}function US(){return WS(1)}function er(...n){return US()(Lt(n,ps(n)))}function lp(n){return new Je(t=>{vt(n()).subscribe(t)})}function Kc(...n){let t=qa(n),{args:e,keys:i}=op(n),r=new Je(s=>{let{length:o}=e;if(!o){s.complete();return}let a=new Array(o),l=o,c=o;for(let u=0;u<o;u++){let d=!1;vt(e[u]).subscribe(Ye(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(i?ap(i,a):a),s.complete())}))}});return t?r.pipe(Ua(t)):r}var S3=["addListener","removeListener"],C3=["addEventListener","removeEventListener"],x3=["on","off"];function fs(n,t,e,i){if(Le(e)&&(i=e,e=void 0),i)return fs(n,t,e).pipe(Ua(i));let[r,s]=M3(n)?C3.map(o=>a=>n[o](t,a,e)):E3(n)?S3.map(zS(n,t)):D3(n)?x3.map(zS(n,t)):[];if(!r&&ja(n))return Pt(o=>fs(o,t,e))(vt(n));if(!r)throw new TypeError("Invalid event target");return new Je(o=>{let a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function zS(n,t){return e=>i=>n[e](t,i)}function E3(n){return Le(n.addListener)&&Le(n.removeListener)}function D3(n){return Le(n.on)&&Le(n.off)}function M3(n){return Le(n.addEventListener)&&Le(n.removeEventListener)}function _o(n=0,t,e=ES){let i=-1;return t!=null&&(Kh(t)?e=t:i=t),new Je(r=>{let s=BS(n)?+n-e.now():n;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function cp(n=0,t=Yc){return n<0&&(n=0),_o(n,n,t)}var{isArray:T3}=Array;function HS(n){return n.length===1&&T3(n[0])?n[0]:n}function _n(n,t){return tt((e,i)=>{let r=0;e.subscribe(Ye(i,s=>n.call(t,s,r++)&&i.next(s)))})}function up(...n){return n=HS(n),n.length===1?vt(n[0]):new Je(I3(n))}function I3(n){return t=>{let e=[];for(let i=0;e&&!t.closed&&i<n.length;i++)e.push(vt(n[i]).subscribe(Ye(t,r=>{if(e){for(let s=0;s<e.length;s++)s!==i&&e[s].unsubscribe();e=null}t.next(r)})))}}function tr(n){return tt((t,e)=>{let i=null,r=!1,s;i=t.subscribe(Ye(e,void 0,void 0,o=>{s=vt(n(o,tr(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function YS(n,t,e,i,r){return(s,o)=>{let a=e,l=t,c=0;s.subscribe(Ye(o,u=>{let d=c++;l=a?n(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function gs(n,t){return Le(t)?Pt(n,t,1):Pt(n,1)}function ms(n){return tt((t,e)=>{let i=!1;t.subscribe(Ye(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function ri(n){return n<=0?()=>xn:tt((t,e)=>{let i=0;t.subscribe(Ye(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function GS(){return tt((n,t)=>{n.subscribe(Ye(t,Fr))})}function KS(n){return We(()=>n)}function w_(n,t){return t?e=>er(t.pipe(ri(1),GS()),e.pipe(w_(n))):Pt((e,i)=>vt(n(e,i)).pipe(ri(1),KS(e)))}function b_(n,t=Yc){let e=_o(n,t);return w_(()=>e)}function dp(n,t=mn){return n=n??k3,tt((e,i)=>{let r,s=!0;e.subscribe(Ye(i,o=>{let a=t(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function k3(n,t){return n===t}function hp(n=P3){return tt((t,e)=>{let i=!1;t.subscribe(Ye(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function P3(){return new Lr}function S_(...n){return t=>er(t,Ie(...n))}function _s(n){return tt((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function Vr(n,t){let e=arguments.length>=2;return i=>i.pipe(n?_n((r,s)=>n(r,s,i)):mn,ri(1),e?ms(t):hp(()=>new Lr))}function za(n){return n<=0?()=>xn:tt((t,e)=>{let i=[];t.subscribe(Ye(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function C_(n,t){let e=arguments.length>=2;return i=>i.pipe(n?_n((r,s)=>n(r,s,i)):mn,za(1),e?ms(t):hp(()=>new Lr))}function x_(n,t){return tt(YS(n,t,arguments.length>=2,!0))}function pp(...n){let t=ps(n);return tt((e,i)=>{(t?er(n,e,t):er(n,e)).subscribe(i)})}function Un(n,t){return tt((e,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();e.subscribe(Ye(i,l=>{r?.unsubscribe();let c=0,u=s++;vt(n(l,u)).subscribe(r=Ye(i,d=>i.next(t?t(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function nr(n){return tt((t,e)=>{vt(n).subscribe(Ye(e,()=>e.complete(),Fr)),!e.closed&&t.subscribe(e)})}function Jt(n,t,e){let i=Le(n)||t||e?{next:n,error:t,complete:e}:n;return i?tt((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(Ye(s,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),s.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),s.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),s.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):mn}function E_(...n){let t=qa(n);return tt((e,i)=>{let r=n.length,s=new Array(r),o=n.map(()=>!1),a=!1;for(let l=0;l<r;l++)vt(n[l]).subscribe(Ye(i,c=>{s[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(mn))&&(o=null))},Fr));e.subscribe(Ye(i,l=>{if(a){let c=[l,...s];i.next(t?t(...c):c)}}))})}var OC="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Ee=class extends Error{code;constructor(t,e){super(O3(t,e)),this.code=t}};function N3(n){return`NG0${Math.abs(n)}`}function O3(n,t){return`${N3(n)}${t?": "+t:""}`}var RC=Symbol("InputSignalNode#UNSET"),R3=Ne(re({},Vh),{transformFn:void 0,applyValueToInputSignal(n,t){Uc(n,t)}});function FC(n,t){let e=Object.create(R3);e.value=n,e.transformFn=t?.transform;function i(){if(Wc(e),e.value===RC){let r=null;throw new Ee(-950,r)}return e.value}return i[gi]=e,i}function lu(n){return{toString:n}.toString()}var fp="__parameters__";function F3(n){return function(...e){if(n){let i=n(...e);for(let r in i)this[r]=i[r]}}}function LC(n,t,e){return lu(()=>{let i=F3(t);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(l,c,u){let d=l.hasOwnProperty(fp)?l[fp]:Object.defineProperty(l,fp,{value:[]})[fp];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var q_=globalThis;function xt(n){for(let t in n)if(n[t]===xt)return t;throw Error("Could not find renamed property on target object.")}function L3(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function Hn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Hn).join(", ")}]`;if(n==null)return""+n;let t=n.overriddenName||n.name;if(t)return`${t}`;let e=n.toString();if(e==null)return""+e;let i=e.indexOf(`
`);return i>=0?e.slice(0,i):e}function j_(n,t){return n?t?`${n} ${t}`:n:t||""}var V3=xt({__forward_ref__:xt});function yi(n){return n.__forward_ref__=yi,n.toString=function(){return Hn(this())},n}function kn(n){return VC(n)?n():n}function VC(n){return typeof n=="function"&&n.hasOwnProperty(V3)&&n.__forward_ref__===yi}function he(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Fi(n){return{providers:n.providers||[],imports:n.imports||[]}}function Kp(n){return $S(n,qC)||$S(n,jC)}function BC(n){return Kp(n)!==null}function $S(n,t){return n.hasOwnProperty(t)?n[t]:null}function B3(n){let t=n&&(n[qC]||n[jC]);return t||null}function XS(n){return n&&(n.hasOwnProperty(ZS)||n.hasOwnProperty(q3))?n[ZS]:null}var qC=xt({\u0275prov:xt}),ZS=xt({\u0275inj:xt}),jC=xt({ngInjectableDef:xt}),q3=xt({ngInjectorDef:xt}),Se=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=he({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function WC(n){return n&&!!n.\u0275providers}var j3=xt({\u0275cmp:xt}),W3=xt({\u0275dir:xt}),U3=xt({\u0275pipe:xt}),z3=xt({\u0275mod:xt}),Sp=xt({\u0275fac:xt}),Qc=xt({__NG_ELEMENT_ID__:xt}),QS=xt({__NG_ENV_ID__:xt});function si(n){return typeof n=="string"?n:n==null?"":String(n)}function H3(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():si(n)}function UC(n,t){throw new Ee(-200,n)}function LA(n,t){throw new Ee(-201,!1)}var rt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(rt||{}),W_;function zC(){return W_}function mi(n){let t=W_;return W_=n,t}function HC(n,t,e){let i=Kp(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&rt.Optional)return null;if(t!==void 0)return t;LA(n,"Injector")}var Y3={},Ao=Y3,U_="__NG_DI_FLAG__",Cp=class{injector;constructor(t){this.injector=t}retrieve(t,e){let i=e;return this.injector.get(t,i.optional?Bh:Ao,i)}},xp="ngTempTokenPath",G3="ngTokenPath",K3=/\n/gm,$3="\u0275",JS="__source";function X3(n,t=rt.Default){if(zc()===void 0)throw new Ee(-203,!1);if(zc()===null)return HC(n,void 0,t);{let e=zc(),i;return e instanceof Cp?i=e.injector:i=e,i.get(n,t&rt.Optional?null:void 0,t)}}function oe(n,t=rt.Default){return(zC()||X3)(kn(n),t)}function se(n,t=rt.Default){return oe(n,$p(t))}function $p(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function z_(n){let t=[];for(let e=0;e<n.length;e++){let i=kn(n[e]);if(Array.isArray(i)){if(i.length===0)throw new Ee(900,!1);let r,s=rt.Default;for(let o=0;o<i.length;o++){let a=i[o],l=Z3(a);typeof l=="number"?l===-1?r=a.token:s|=l:r=a}t.push(oe(r,s))}else t.push(oe(i))}return t}function YC(n,t){return n[U_]=t,n.prototype[U_]=t,n}function Z3(n){return n[U_]}function Q3(n,t,e,i){let r=n[xp];throw t[JS]&&r.unshift(t[JS]),n.message=J3(`
`+n.message,r,e,i),n[G3]=r,n[xp]=null,n}function J3(n,t,e,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==$3?n.slice(2):n;let r=Hn(t);if(Array.isArray(t))r=t.map(Hn).join(" -> ");else if(typeof t=="object"){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Hn(a)))}r=`{${s.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(K3,`
  `)}`}var eF=YC(LC("Optional"),8);var tF=YC(LC("SkipSelf"),4);function Za(n,t){let e=n.hasOwnProperty(Sp);return e?n[Sp]:null}function nF(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=t[i];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}function iF(n){return n.flat(Number.POSITIVE_INFINITY)}function VA(n,t){n.forEach(e=>Array.isArray(e)?VA(e,t):t(e))}function GC(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function Ep(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function rF(n,t){let e=[];for(let i=0;i<n;i++)e.push(t);return e}function sF(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(r===1)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;){let s=r-2;n[r]=n[s],r--}n[t]=e,n[t+1]=i}}function BA(n,t,e){let i=cu(n,t);return i>=0?n[i|1]=e:(i=~i,sF(n,i,t,e)),i}function D_(n,t){let e=cu(n,t);if(e>=0)return n[e|1]}function cu(n,t){return oF(n,t,1)}function oF(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){let s=i+(r-i>>1),o=n[s<<e];if(t===o)return s<<e;o>t?r=s:i=s+1}return~(r<<e)}var vo={},zn=[],Jc=new Se(""),KC=new Se("",-1),$C=new Se(""),Dp=class{get(t,e=Ao){if(e===Ao){let i=new Error(`NullInjectorError: No provider for ${Hn(t)}!`);throw i.name="NullInjectorError",i}return e}};function XC(n,t){let e=n[z3]||null;if(!e&&t===!0)throw new Error(`Type ${Hn(n)} does not have '\u0275mod' property.`);return e}function Qa(n){return n[j3]||null}function aF(n){return n[W3]||null}function lF(n){return n[U3]||null}function uu(n){return{\u0275providers:n}}function cF(...n){return{\u0275providers:ZC(!0,n),\u0275fromNgModule:!0}}function ZC(n,...t){let e=[],i=new Set,r,s=o=>{e.push(o)};return VA(t,o=>{let a=o;H_(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&QC(r,s),e}function QC(n,t){for(let e=0;e<n.length;e++){let{ngModule:i,providers:r}=n[e];qA(r,s=>{t(s,i)})}}function H_(n,t,e,i){if(n=kn(n),!n)return!1;let r=null,s=XS(n),o=!s&&Qa(n);if(!s&&!o){let l=n.ngModule;if(s=XS(l),s)r=l;else return!1}else{if(o&&!o.standalone)return!1;r=n}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)H_(c,t,e,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let c;try{VA(s.imports,u=>{H_(u,t,e,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&QC(c,t)}if(!a){let c=Za(r)||(()=>new r);t({provide:r,useFactory:c,deps:zn},r),t({provide:$C,useValue:r,multi:!0},r),t({provide:Jc,useValue:()=>oe(r),multi:!0},r)}let l=s.providers;if(l!=null&&!a){let c=n;qA(l,u=>{t(u,c)})}}else return!1;return r!==n&&n.providers!==void 0}function qA(n,t){for(let e of n)WC(e)&&(e=e.\u0275providers),Array.isArray(e)?qA(e,t):t(e)}var uF=xt({provide:String,useValue:xt});function JC(n){return n!==null&&typeof n=="object"&&uF in n}function dF(n){return!!(n&&n.useExisting)}function hF(n){return!!(n&&n.useFactory)}function Ja(n){return typeof n=="function"}function pF(n){return!!n.useClass}var Xp=new Se(""),_p={},eC={},M_;function jA(){return M_===void 0&&(M_=new Dp),M_}var Pn=class{},eu=class extends Pn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,G_(t,o=>this.processProvider(o)),this.records.set(KC,Ha(void 0,this)),r.has("environment")&&this.records.set(Pn,Ha(void 0,this));let s=this.records.get(Xp);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get($C,zn,rt.Self))}retrieve(t,e){let i=e;return this.get(t,i.optional?Bh:Ao,i)}destroy(){Xc(this),this._destroyed=!0;let t=lt(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),lt(t)}}onDestroy(t){return Xc(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Xc(this);let e=Rr(this),i=mi(void 0),r;try{return t()}finally{Rr(e),mi(i)}}get(t,e=Ao,i=rt.Default){if(Xc(this),t.hasOwnProperty(QS))return t[QS](this);i=$p(i);let r,s=Rr(this),o=mi(void 0);try{if(!(i&rt.SkipSelf)){let l=this.records.get(t);if(l===void 0){let c=AF(t)&&Kp(t);c&&this.injectableDefInScope(c)?l=Ha(Y_(t),_p):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=i&rt.Self?jA():this.parent;return e=i&rt.Optional&&e===Ao?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[xp]=a[xp]||[]).unshift(Hn(t)),s)throw a;return Q3(a,t,"R3InjectorError",this.source)}else throw a}finally{mi(o),Rr(s)}}resolveInjectorInitializers(){let t=lt(null),e=Rr(this),i=mi(void 0),r;try{let s=this.get(Jc,zn,rt.Self);for(let o of s)o()}finally{Rr(e),mi(i),lt(t)}}toString(){let t=[],e=this.records;for(let i of e.keys())t.push(Hn(i));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=kn(t);let e=Ja(t)?t:kn(t&&t.provide),i=gF(t);if(!Ja(t)&&t.multi===!0){let r=this.records.get(e);r||(r=Ha(void 0,_p,!0),r.factory=()=>z_(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e){let i=lt(null);try{return e.value===eC?UC(Hn(t)):e.value===_p&&(e.value=eC,e.value=e.factory()),typeof e.value=="object"&&e.value&&_F(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{lt(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=kn(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function Y_(n){let t=Kp(n),e=t!==null?t.factory:Za(n);if(e!==null)return e;if(n instanceof Se)throw new Ee(204,!1);if(n instanceof Function)return fF(n);throw new Ee(204,!1)}function fF(n){if(n.length>0)throw new Ee(204,!1);let e=B3(n);return e!==null?()=>e.factory(n):()=>new n}function gF(n){if(JC(n))return Ha(void 0,n.useValue);{let t=ex(n);return Ha(t,_p)}}function ex(n,t,e){let i;if(Ja(n)){let r=kn(n);return Za(r)||Y_(r)}else if(JC(n))i=()=>kn(n.useValue);else if(hF(n))i=()=>n.useFactory(...z_(n.deps||[]));else if(dF(n))i=()=>oe(kn(n.useExisting));else{let r=kn(n&&(n.useClass||n.provide));if(mF(n))i=()=>new r(...z_(n.deps));else return Za(r)||Y_(r)}return i}function Xc(n){if(n.destroyed)throw new Ee(205,!1)}function Ha(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function mF(n){return!!n.deps}function _F(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function AF(n){return typeof n=="function"||typeof n=="object"&&n instanceof Se}function G_(n,t){for(let e of n)Array.isArray(e)?G_(e,t):e&&WC(e)?G_(e.\u0275providers,t):t(e)}function ai(n,t){let e;n instanceof eu?(Xc(n),e=n):e=new Cp(n);let i,r=Rr(e),s=mi(void 0);try{return t()}finally{Rr(r),mi(s)}}function tx(){return zC()!==void 0||zc()!=null}function nx(n){if(!tx())throw new Ee(-203,!1)}function yF(n){return typeof n=="function"}var Ur=0,nt=1,$e=2,En=3,Ri=4,Gn=5,tu=6,Mp=7,Nn=8,el=9,Br=10,Vt=11,nu=12,tC=13,ll=14,Ai=15,wo=16,Ya=17,qr=18,Zp=19,ix=20,As=21,T_=22,Tp=23,_i=24,$a=25,On=26,rx=1;var bo=7,Ip=8,tl=9,Yn=10;function ys(n){return Array.isArray(n)&&typeof n[rx]=="object"}function zr(n){return Array.isArray(n)&&n[rx]===!0}function WA(n){return(n.flags&4)!==0}function cl(n){return n.componentOffset>-1}function Qp(n){return(n.flags&1)===1}function rr(n){return!!n.template}function kp(n){return(n[$e]&512)!==0}function du(n){return(n[$e]&256)===256}var K_=class{previousValue;currentValue;firstChange;constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function sx(n,t,e,i){t!==null?t.applyValueToInputSignal(t,i):n[e]=i}var Li=(()=>{let n=()=>ox;return n.ngInherit=!0,n})();function ox(n){return n.type.prototype.ngOnChanges&&(n.setInput=wF),vF}function vF(){let n=lx(this),t=n?.current;if(t){let e=n.previous;if(e===vo)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function wF(n,t,e,i,r){let s=this.declaredInputs[i],o=lx(n)||bF(n,{previous:vo,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new K_(c&&c.currentValue,e,l===vo),sx(n,t,r,e)}var ax="__ngSimpleChanges__";function lx(n){return n[ax]||null}function bF(n,t){return n[ax]=t}var nC=null;var St=function(n,t=null,e){nC?.(n,t,e)},SF="svg",CF="math";function sr(n){for(;Array.isArray(n);)n=n[Ur];return n}function cx(n,t){return sr(t[n])}function ur(n,t){return sr(t[n.index])}function UA(n,t){return n.data[t]}function xF(n,t){return n[t]}function or(n,t){let e=t[n];return ys(e)?e:e[Ur]}function EF(n){return(n[$e]&4)===4}function zA(n){return(n[$e]&128)===128}function DF(n){return zr(n[En])}function nl(n,t){return t==null?null:n[t]}function ux(n){n[Ya]=0}function dx(n){n[$e]&1024||(n[$e]|=1024,zA(n)&&hu(n))}function MF(n,t){for(;n>0;)t=t[ll],n--;return t}function Jp(n){return!!(n[$e]&9216||n[_i]?.dirty)}function $_(n){n[Br].changeDetectionScheduler?.notify(8),n[$e]&64&&(n[$e]|=1024),Jp(n)&&hu(n)}function hu(n){n[Br].changeDetectionScheduler?.notify(0);let t=So(n);for(;t!==null&&!(t[$e]&8192||(t[$e]|=8192,!zA(t)));)t=So(t)}function hx(n,t){if(du(n))throw new Ee(911,!1);n[As]===null&&(n[As]=[]),n[As].push(t)}function TF(n,t){if(n[As]===null)return;let e=n[As].indexOf(t);e!==-1&&n[As].splice(e,1)}function So(n){let t=n[En];return zr(t)?t[En]:t}function HA(n){return n[Mp]??=[]}function YA(n){return n.cleanup??=[]}function IF(n,t,e,i){let r=HA(t);r.push(e),n.firstCreatePass&&YA(n).push(i,r.length-1)}var it={lFrame:yx(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var X_=!1;function kF(){return it.lFrame.elementDepthCount}function PF(){it.lFrame.elementDepthCount++}function NF(){it.lFrame.elementDepthCount--}function GA(){return it.bindingsEnabled}function px(){return it.skipHydrationRootTNode!==null}function OF(n){return it.skipHydrationRootTNode===n}function RF(){it.skipHydrationRootTNode=null}function Xe(){return it.lFrame.lView}function Xt(){return it.lFrame.tView}function E(n){return it.lFrame.contextLView=n,n[Nn]}function D(n){return it.lFrame.contextLView=null,n}function Kn(){let n=fx();for(;n!==null&&n.type===64;)n=n.parent;return n}function fx(){return it.lFrame.currentTNode}function FF(){let n=it.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function Do(n,t){let e=it.lFrame;e.currentTNode=n,e.isParent=t}function KA(){return it.lFrame.isParent}function $A(){it.lFrame.isParent=!1}function LF(){return it.lFrame.contextLView}function gx(){return X_}function iC(n){let t=X_;return X_=n,t}function pu(){let n=it.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function XA(){return it.lFrame.bindingIndex}function VF(n){return it.lFrame.bindingIndex=n}function ul(){return it.lFrame.bindingIndex++}function fu(n){let t=it.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function BF(){return it.lFrame.inI18n}function qF(n,t){let e=it.lFrame;e.bindingIndex=e.bindingRootIndex=n,Z_(t)}function jF(){return it.lFrame.currentDirectiveIndex}function Z_(n){it.lFrame.currentDirectiveIndex=n}function WF(n){let t=it.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function mx(){return it.lFrame.currentQueryIndex}function ZA(n){it.lFrame.currentQueryIndex=n}function UF(n){let t=n[nt];return t.type===2?t.declTNode:t.type===1?n[Gn]:null}function _x(n,t,e){if(e&rt.SkipSelf){let r=t,s=n;for(;r=r.parent,r===null&&!(e&rt.Host);)if(r=UF(s),r===null||(s=s[ll],r.type&10))break;if(r===null)return!1;t=r,n=s}let i=it.lFrame=Ax();return i.currentTNode=t,i.lView=n,!0}function QA(n){let t=Ax(),e=n[nt];it.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Ax(){let n=it.lFrame,t=n===null?null:n.child;return t===null?yx(n):t}function yx(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function vx(){let n=it.lFrame;return it.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var wx=vx;function JA(){let n=vx();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function zF(n){return(it.lFrame.contextLView=MF(n,it.lFrame.contextLView))[Nn]}function dr(){return it.lFrame.selectedIndex}function Co(n){it.lFrame.selectedIndex=n}function gu(){let n=it.lFrame;return UA(n.tView,n.selectedIndex)}function HF(){return it.lFrame.currentNamespace}var bx=!0;function ef(){return bx}function tf(n){bx=n}function YF(n,t,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(i){let o=ox(t);(e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o)}r&&(e.preOrderHooks??=[]).push(0-n,r),s&&((e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s))}function ey(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){let s=n.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-e,o),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),c&&((n.viewHooks??=[]).push(e,c),(n.viewCheckHooks??=[]).push(e,c)),u!=null&&(n.destroyHooks??=[]).push(e,u)}}function Ap(n,t,e){Sx(n,t,3,e)}function yp(n,t,e,i){(n[$e]&3)===e&&Sx(n,t,e,i)}function I_(n,t){let e=n[$e];(e&3)===t&&(e&=16383,e+=1,n[$e]=e)}function Sx(n,t,e,i){let r=i!==void 0?n[Ya]&65535:0,s=i??-1,o=t.length-1,a=0;for(let l=r;l<o;l++)if(typeof t[l+1]=="number"){if(a=t[l],i!=null&&a>=i)break}else t[l]<0&&(n[Ya]+=65536),(a<s||s==-1)&&(GF(n,e,t,l),n[Ya]=(n[Ya]&4294901760)+l+2),l++}function rC(n,t){St(4,n,t);let e=lt(null);try{t.call(n)}finally{lt(e),St(5,n,t)}}function GF(n,t,e,i){let r=e[i]<0,s=e[i+1],o=r?-e[i]:e[i],a=n[o];r?n[$e]>>14<n[Ya]>>16&&(n[$e]&3)===t&&(n[$e]+=16384,rC(a,s)):rC(a,s)}var Xa=-1,xo=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,i){this.factory=t,this.canSeeViewProviders=e,this.injectImpl=i}};function KF(n){return(n.flags&8)!==0}function $F(n){return(n.flags&16)!==0}function XF(n,t,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let s=e[i++],o=e[i++],a=e[i++];n.setAttribute(t,o,a,s)}else{let s=r,o=e[++i];QF(s)?n.setProperty(t,s,o):n.setAttribute(t,s,o),i++}}return i}function ZF(n){return n===3||n===4||n===6}function QF(n){return n.charCodeAt(0)===64}function il(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?sC(n,e,r,null,t[++i]):sC(n,e,r,null,null))}}return n}function sC(n,t,e,i,r){let s=0,o=n.length;if(t===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===t){o=-1;break}else if(a>t){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===e){r!==null&&(n[s+1]=r);return}s++,r!==null&&s++}o!==-1&&(n.splice(o,0,t),s=o+1),n.splice(s++,0,e),r!==null&&n.splice(s++,0,r)}function Cx(n){return n!==Xa}function Pp(n){return n&32767}function JF(n){return n>>16}function Np(n,t){let e=JF(n),i=t;for(;e>0;)i=i[ll],e--;return i}var Q_=!0;function oC(n){let t=Q_;return Q_=n,t}var e4=256,xx=e4-1,Ex=5,t4=0,ir={};function n4(n,t,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(Qc)&&(i=e[Qc]),i==null&&(i=e[Qc]=t4++);let r=i&xx,s=1<<r;t.data[n+(r>>Ex)]|=s}function Op(n,t){let e=Dx(n,t);if(e!==-1)return e;let i=t[nt];i.firstCreatePass&&(n.injectorIndex=t.length,k_(i.data,n),k_(t,null),k_(i.blueprint,null));let r=ty(n,t),s=n.injectorIndex;if(Cx(r)){let o=Pp(r),a=Np(r,t),l=a[nt].data;for(let c=0;c<8;c++)t[s+c]=a[o+c]|l[o+c]}return t[s+8]=r,s}function k_(n,t){n.push(0,0,0,0,0,0,0,0,t)}function Dx(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function ty(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;r!==null;){if(i=Px(r),i===null)return Xa;if(e++,r=r[ll],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return Xa}function J_(n,t,e){n4(n,t,e)}function Mx(n,t,e){if(e&rt.Optional||n!==void 0)return n;LA(t,"NodeInjector")}function Tx(n,t,e,i){if(e&rt.Optional&&i===void 0&&(i=null),(e&(rt.Self|rt.Host))===0){let r=n[el],s=mi(void 0);try{return r?r.get(t,i,e&rt.Optional):HC(t,i,e&rt.Optional)}finally{mi(s)}}return Mx(i,t,e)}function Ix(n,t,e,i=rt.Default,r){if(n!==null){if(t[$e]&2048&&!(i&rt.Self)){let o=o4(n,t,e,i,ir);if(o!==ir)return o}let s=kx(n,t,e,i,ir);if(s!==ir)return s}return Tx(t,e,i,r)}function kx(n,t,e,i,r){let s=r4(e);if(typeof s=="function"){if(!_x(t,n,i))return i&rt.Host?Mx(r,e,i):Tx(t,e,i,r);try{let o;if(o=s(i),o==null&&!(i&rt.Optional))LA(e);else return o}finally{wx()}}else if(typeof s=="number"){let o=null,a=Dx(n,t),l=Xa,c=i&rt.Host?t[Ai][Gn]:null;for((a===-1||i&rt.SkipSelf)&&(l=a===-1?ty(n,t):t[a+8],l===Xa||!lC(i,!1)?a=-1:(o=t[nt],a=Pp(l),t=Np(l,t)));a!==-1;){let u=t[nt];if(aC(s,a,u.data)){let d=i4(a,t,e,o,i,c);if(d!==ir)return d}l=t[a+8],l!==Xa&&lC(i,t[nt].data[a+8]===c)&&aC(s,a,t)?(o=u,a=Pp(l),t=Np(l,t)):a=-1}}return r}function i4(n,t,e,i,r,s){let o=t[nt],a=o.data[n+8],l=i==null?cl(a)&&Q_:i!=o&&(a.type&3)!==0,c=r&rt.Host&&s===a,u=vp(a,o,e,l,c);return u!==null?iu(t,o,u,a):ir}function vp(n,t,e,i,r){let s=n.providerIndexes,o=t.data,a=s&1048575,l=n.directiveStart,c=n.directiveEnd,u=s>>20,d=i?a:a+u,h=r?a+u:c;for(let p=d;p<h;p++){let g=o[p];if(p<l&&e===g||p>=l&&g.type===e)return p}if(r){let p=o[l];if(p&&rr(p)&&p.type===e)return l}return null}function iu(n,t,e,i){let r=n[e],s=t.data;if(r instanceof xo){let o=r;o.resolving&&UC(H3(s[e]));let a=oC(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?mi(o.injectImpl):null,u=_x(n,i,rt.Default);try{r=n[e]=o.factory(void 0,s,n,i),t.firstCreatePass&&e>=i.directiveStart&&YF(e,s[e],t)}finally{c!==null&&mi(c),oC(a),o.resolving=!1,wx()}}return r}function r4(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(Qc)?n[Qc]:void 0;return typeof t=="number"?t>=0?t&xx:s4:t}function aC(n,t,e){let i=1<<n;return!!(e[t+(n>>Ex)]&i)}function lC(n,t){return!(n&rt.Self)&&!(n&rt.Host&&t)}var yo=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return Ix(this._tNode,this._lView,t,$p(i),e)}};function s4(){return new yo(Kn(),Xe())}function Vi(n){return lu(()=>{let t=n.prototype.constructor,e=t[Sp]||eA(t),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let s=r[Sp]||eA(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function eA(n){return VC(n)?()=>{let t=eA(kn(n));return t&&t()}:Za(n)}function o4(n,t,e,i,r){let s=n,o=t;for(;s!==null&&o!==null&&o[$e]&2048&&!kp(o);){let a=kx(s,o,e,i|rt.Self,ir);if(a!==ir)return a;let l=s.parent;if(!l){let c=o[ix];if(c){let u=c.get(e,ir,i);if(u!==ir)return u}l=Px(o),o=o[ll]}s=l}return r}function Px(n){let t=n[nt],e=t.type;return e===2?t.declTNode:e===1?n[Gn]:null}function cC(n,t=null,e=null,i){let r=Nx(n,t,e,i);return r.resolveInjectorInitializers(),r}function Nx(n,t=null,e=null,i,r=new Set){let s=[e||zn,cF(n)];return i=i||(typeof n=="object"?void 0:Hn(n)),new eu(s,t||jA(),i||null,r)}var Rn=class n{static THROW_IF_NOT_FOUND=Ao;static NULL=new Dp;static create(t,e){if(Array.isArray(t))return cC({name:""},e,t,"");{let i=t.name??"";return cC({name:i},t.parent,t.providers,i)}}static \u0275prov=he({token:n,providedIn:"any",factory:()=>oe(KC)});static __NG_ELEMENT_ID__=-1};var a4=new Se("");a4.__NG_ELEMENT_ID__=n=>{let t=Kn();if(t===null)throw new Ee(204,!1);if(t.type&2)return t.value;if(n&rt.Optional)return null;throw new Ee(204,!1)};var Ox=!1,dl=(()=>{class n{static __NG_ELEMENT_ID__=l4;static __NG_ENV_ID__=e=>e}return n})(),tA=class extends dl{_lView;constructor(t){super(),this._lView=t}onDestroy(t){return hx(this._lView,t),()=>TF(this._lView,t)}};function l4(){return new tA(Xe())}var rl=class{},ny=new Se("",{providedIn:"root",factory:()=>!1});var Rx=new Se(""),Fx=new Se(""),vs=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Qt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=he({token:n,providedIn:"root",factory:()=>new n})}return n})();var nA=class extends ct{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,tx()&&(this.destroyRef=se(dl,{optional:!0})??void 0,this.pendingTasks=se(vs,{optional:!0})??void 0)}emit(t){let e=lt(null);try{super.next(t)}finally{lt(e)}}subscribe(t,e,i){let r=t,s=e||(()=>null),o=i;if(t&&typeof t=="object"){let l=t;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:r,error:s,complete:o});return t instanceof Yt&&t.add(a),a}wrapInTimeout(t){return e=>{let i=this.pendingTasks?.add();setTimeout(()=>{t(e),i!==void 0&&this.pendingTasks?.remove(i)})}}},Nt=nA;function Rp(...n){}function Lx(n){let t,e;function i(){n=Rp;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),i()})),()=>i()}function uC(n){return queueMicrotask(()=>n()),()=>{n=Rp}}var iy="isAngularZone",Fp=iy+"_ID",c4=0,Mt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Nt(!1);onMicrotaskEmpty=new Nt(!1);onStable=new Nt(!1);onError=new Nt(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=Ox}=t;if(typeof Zone>"u")throw new Ee(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&i,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,o.scheduleInRootZone=s,h4(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(iy)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Ee(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Ee(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,u4,Rp,Rp);try{return s.runTask(o,e,i)}finally{s.cancelTask(o)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}},u4={};function ry(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function d4(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){Lx(()=>{n.callbackScheduled=!1,iA(n),n.isCheckStableRunning=!0,ry(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),iA(n)}function h4(n){let t=()=>{d4(n)},e=c4++;n._inner=n._inner.fork({name:"angular",properties:{[iy]:!0,[Fp]:e,[Fp+e]:!0},onInvokeTask:(i,r,s,o,a,l)=>{if(p4(l))return i.invokeTask(s,o,a,l);try{return dC(n),i.invokeTask(s,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),hC(n)}},onInvoke:(i,r,s,o,a,l,c)=>{try{return dC(n),i.invoke(s,o,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!f4(l)&&t(),hC(n)}},onHasTask:(i,r,s,o)=>{i.hasTask(s,o),r===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,iA(n),ry(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,r,s,o)=>(i.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function iA(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function dC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function hC(n){n._nesting--,ry(n)}var rA=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Nt;onMicrotaskEmpty=new Nt;onStable=new Nt;onError=new Nt;run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}};function p4(n){return Vx(n,"__ignore_ng_zone__")}function f4(n){return Vx(n,"__scheduler_tick__")}function Vx(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var ar=class{_console=console;handleError(t){this._console.error("ERROR",t)}},g4=new Se("",{providedIn:"root",factory:()=>{let n=se(Mt),t=se(ar);return e=>n.runOutsideAngular(()=>t.handleError(e))}});function pC(n,t){return FC(n,t)}function m4(n){return FC(RC,n)}var Bx=(pC.required=m4,pC);function _4(){return hl(Kn(),Xe())}function hl(n,t){return new An(ur(n,t))}var An=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=_4}return n})();function A4(n){return n instanceof An?n.nativeElement:n}function y4(n){return typeof n=="function"&&n[gi]!==void 0}function nf(n,t){let e=o_(n,t?.equal),i=e[gi];return e.set=r=>Uc(i,r),e.update=r=>a_(i,r),e.asReadonly=v4.bind(e),e}function v4(){let n=this[gi];if(n.readonlyFn===void 0){let t=()=>this();t[gi]=n,n.readonlyFn=t}return n.readonlyFn}function qx(n){return y4(n)&&typeof n.set=="function"}function w4(){return this._results[Symbol.iterator]()}var sA=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ct}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let i=iF(t);(this._changesDetected=!nF(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=w4};function jx(n){return(n.flags&128)===128}var Wx=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Wx||{}),Ux=new Map,b4=0;function S4(){return b4++}function C4(n){Ux.set(n[Zp],n)}function oA(n){Ux.delete(n[Zp])}var fC="__ngContext__";function pl(n,t){ys(t)?(n[fC]=t[Zp],C4(t)):n[fC]=t}function zx(n){return Yx(n[nu])}function Hx(n){return Yx(n[Ri])}function Yx(n){for(;n!==null&&!zr(n);)n=n[Ri];return n}var aA;function Gx(n){aA=n}function x4(){if(aA!==void 0)return aA;if(typeof document<"u")return document;throw new Ee(210,!1)}var sy=new Se("",{providedIn:"root",factory:()=>E4}),E4="ng",oy=new Se(""),ws=new Se("",{providedIn:"platform",factory:()=>"unknown"});var ay=new Se("",{providedIn:"root",factory:()=>x4().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var D4="h",M4="b";var Kx=!1,T4=new Se("",{providedIn:"root",factory:()=>Kx});var ly=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(ly||{}),fl=new Se(""),gC=new Set;function mu(n){gC.has(n)||(gC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var $x=(()=>{class n{view;node;constructor(e,i){this.view=e,this.node=i}static __NG_ELEMENT_ID__=I4}return n})();function I4(){return new $x(Xe(),Kn())}var Ga=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ga||{}),Xx=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=he({token:n,providedIn:"root",factory:()=>new n})}return n})(),k4=[Ga.EarlyRead,Ga.Write,Ga.MixedReadWrite,Ga.Read],P4=(()=>{class n{ngZone=se(Mt);scheduler=se(rl);errorHandler=se(ar,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){se(fl,{optional:!0})}execute(){let e=this.sequences.size>0;e&&St(16),this.executing=!0;for(let i of k4)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=r.hooks[i];return s(r.pipelinedValue)},r.snapshot))}catch(s){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&St(17)}register(e){let{view:i}=e;i!==void 0?((i[$a]??=[]).push(e),hu(i),i[$e]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,i){return i?i.run(ly.AFTER_NEXT_RENDER,e):e()}static \u0275prov=he({token:n,providedIn:"root",factory:()=>new n})}return n})(),lA=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,e,i,r,s,o=null){this.impl=t,this.hooks=e,this.view=i,this.once=r,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[$a];t&&(this.view[$a]=t.filter(e=>e!==this))}};function cy(n,t){!t?.injector&&nx(cy);let e=t?.injector??se(Rn);return mu("NgAfterRender"),Zx(n,e,t,!1)}function rf(n,t){!t?.injector&&nx(rf);let e=t?.injector??se(Rn);return mu("NgAfterNextRender"),Zx(n,e,t,!0)}function N4(n,t){if(n instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[t]=n,e}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function Zx(n,t,e,i){let r=t.get(Xx);r.impl??=t.get(P4);let s=t.get(fl,null,{optional:!0}),o=e?.phase??Ga.MixedReadWrite,a=e?.manualCleanup!==!0?t.get(dl):null,l=t.get($x,null,{optional:!0}),c=new lA(r.impl,N4(n,o),l?.view,i,a,s?.snapshot(null));return r.impl.register(c),c}var O4=()=>null;function Qx(n,t,e=!1){return O4(n,t,e)}function Jx(n,t){let e=n.contentQueries;if(e!==null){let i=lt(null);try{for(let r=0;r<e.length;r+=2){let s=e[r],o=e[r+1];if(o!==-1){let a=n.data[o];ZA(s),a.contentQueries(2,t[o],o)}}}finally{lt(i)}}}function cA(n,t,e){ZA(0);let i=lt(null);try{t(n,e)}finally{lt(i)}}function uy(n,t,e){if(WA(t)){let i=lt(null);try{let r=t.directiveStart,s=t.directiveEnd;for(let o=r;o<s;o++){let a=n.data[o];if(a.contentQueries){let l=e[o];a.contentQueries(1,l,o)}}}finally{lt(i)}}}var lr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(lr||{}),gp;function R4(){if(gp===void 0&&(gp=null,q_.trustedTypes))try{gp=q_.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return gp}function F4(n){return R4()?.createScriptURL(n)||n}var Lp=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${OC})`}};function dy(n){return n instanceof Lp?n.changingThisBreaksApplicationSecurity:n}function L4(n,t){let e=V4(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${OC})`)}return e===t}function V4(n){return n instanceof Lp&&n.getTypeName()||null}var B4=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function q4(n){return n=String(n),n.match(B4)?n:"unsafe:"+n}var eE=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(eE||{});function tE(n){let t=j4();return t?t.sanitize(eE.URL,n)||"":L4(n,"URL")?dy(n):q4(si(n))}function sf(n){return F4(n[0])}function j4(){let n=Xe();return n&&n[Br].sanitizer}var W4=/^>|^->|<!--|-->|--!>|<!-$/g,U4=/(<|>)/g,z4="\u200B$1\u200B";function H4(n){return n.replace(W4,t=>t.replace(U4,z4))}function nE(n){return n.ownerDocument.defaultView}function iE(n){return n instanceof Function?n():n}function Y4(n,t,e){let i=n.length;for(;;){let r=n.indexOf(t,e);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=t.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}e=r+1}}var rE="ng-template";function G4(n,t,e,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&Y4(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if(hy(n))return!1;if(r=t.indexOf(1,r),r>-1){let s;for(;++r<t.length&&typeof(s=t[r])=="string";)if(s.toLowerCase()===e)return!0}return!1}function hy(n){return n.type===4&&n.value!==rE}function K4(n,t,e){let i=n.type===4&&!e?rE:n.value;return t===i}function $4(n,t,e){let i=4,r=n.attrs,s=r!==null?Q4(r):0,o=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!o&&!Ni(i)&&!Ni(l))return!1;if(o&&Ni(l))continue;o=!1,i=l|i&1;continue}if(!o)if(i&4){if(i=2|i&1,l!==""&&!K4(n,l,e)||l===""&&t.length===1){if(Ni(i))return!1;o=!0}}else if(i&8){if(r===null||!G4(n,r,l,e)){if(Ni(i))return!1;o=!0}}else{let c=t[++a],u=X4(l,r,hy(n),e);if(u===-1){if(Ni(i))return!1;o=!0;continue}if(c!==""){let d;if(u>s?d="":d=r[u+1].toLowerCase(),i&2&&c!==d){if(Ni(i))return!1;o=!0}}}}return Ni(i)||o}function Ni(n){return(n&1)===0}function X4(n,t,e,i){if(t===null)return-1;let r=0;if(i||!e){let s=!1;for(;r<t.length;){let o=t[r];if(o===n)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=t[++r];for(;typeof a=="string";)a=t[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return J4(t,n)}function sE(n,t,e=!1){for(let i=0;i<t.length;i++)if($4(n,t[i],e))return!0;return!1}function Z4(n){let t=n.attrs;if(t!=null){let e=t.indexOf(5);if((e&1)===0)return t[e+1]}return null}function Q4(n){for(let t=0;t<n.length;t++){let e=n[t];if(ZF(e))return t}return n.length}function J4(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let i=n[e];if(typeof i=="number")return-1;if(i===t)return e;e++}return-1}function eL(n,t){e:for(let e=0;e<t.length;e++){let i=t[e];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function mC(n,t){return n?":not("+t.trim()+")":t}function tL(n){let t=n[0],e=1,i=2,r="",s=!1;for(;e<n.length;){let o=n[e];if(typeof o=="string")if(i&2){let a=n[++e];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!Ni(o)&&(t+=mC(s,r),r=""),i=o,s=s||!Ni(i);e++}return r!==""&&(t+=mC(s,r)),t}function nL(n){return n.map(tL).join(",")}function iL(n){let t=[],e=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&t.push(s,n[++i]):r===8&&e.push(s);else{if(!Ni(r))break;r=s}i++}return e.length&&t.push(1,...e),t}var cn={};function rL(n,t){return n.createText(t)}function sL(n,t,e){n.setValue(t,e)}function oL(n,t){return n.createComment(H4(t))}function oE(n,t,e){return n.createElement(t,e)}function Vp(n,t,e,i,r){n.insertBefore(t,e,i,r)}function aE(n,t,e){n.appendChild(t,e)}function _C(n,t,e,i,r){i!==null?Vp(n,t,e,i,r):aE(n,t,e)}function aL(n,t,e){n.removeChild(null,t,e)}function lL(n,t,e){n.setAttribute(t,"style",e)}function cL(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function lE(n,t,e){let{mergedAttrs:i,classes:r,styles:s}=e;i!==null&&XF(n,t,i),r!==null&&cL(n,t,r),s!==null&&lL(n,t,s)}function py(n,t,e,i,r,s,o,a,l,c,u){let d=On+i,h=d+r,p=uL(d,h),g=typeof c=="function"?c():c;return p[nt]={type:n,blueprint:p,template:e,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1,ssrId:u}}function uL(n,t){let e=[];for(let i=0;i<t;i++)e.push(i<n?null:cn);return e}function dL(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=py(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function fy(n,t,e,i,r,s,o,a,l,c,u){let d=t.blueprint.slice();return d[Ur]=r,d[$e]=i|4|128|8|64|1024,(c!==null||n&&n[$e]&2048)&&(d[$e]|=2048),ux(d),d[En]=d[ll]=n,d[Nn]=e,d[Br]=o||n&&n[Br],d[Vt]=a||n&&n[Vt],d[el]=l||n&&n[el]||null,d[Gn]=s,d[Zp]=S4(),d[tu]=u,d[ix]=c,d[Ai]=t.type==2?n[Ai]:d,d}function hL(n,t,e){let i=ur(t,n),r=dL(e),s=n[Br].rendererFactory,o=gy(n,fy(n,r,null,cE(e),i,t,null,s.createRenderer(i,e),null,null,null));return n[t.index]=o}function cE(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function uE(n,t,e,i){if(e===0)return-1;let r=t.length;for(let s=0;s<e;s++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function gy(n,t){return n[nu]?n[tC][Ri]=t:n[nu]=t,n[tC]=t,t}function v(n=1){dE(Xt(),Xe(),dr()+n,!1)}function dE(n,t,e,i){if(!i)if((t[$e]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Ap(t,s,e)}else{let s=n.preOrderHooks;s!==null&&yp(t,s,0,e)}Co(e)}var of=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(of||{});function uA(n,t,e,i){let r=lt(null);try{let[s,o,a]=n.inputs[e],l=null;(o&of.SignalBased)!==0&&(l=t[s][gi]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):a!==null&&(i=a.call(t,i)),n.setInput!==null?n.setInput(t,l,i,e,s):sx(t,l,s,i)}finally{lt(r)}}function hE(n,t,e,i,r){let s=dr(),o=i&2;try{Co(-1),o&&t.length>On&&dE(n,t,On,!1),St(o?2:0,r),e(i,r)}finally{Co(s),St(o?3:1,r)}}function af(n,t,e){AL(n,t,e),(e.flags&64)===64&&yL(n,t,e)}function my(n,t,e=ur){let i=t.localNames;if(i!==null){let r=t.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?e(t,n):n[o];n[r++]=a}}}function pL(n,t,e,i){let s=i.get(T4,Kx)||e===lr.ShadowDom,o=n.selectRootElement(t,s);return fL(o),o}function fL(n){gL(n)}var gL=()=>null;function mL(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function lf(n,t,e,i,r,s,o,a){if(!a&&Ay(t,n,e,i,r)){cl(t)&&_L(e,t.index);return}if(t.type&3){let l=ur(t,e);i=mL(i),r=o!=null?o(r,t.value||"",i):r,s.setProperty(l,i,r)}else t.type&12}function _L(n,t){let e=or(t,n);e[$e]&16||(e[$e]|=64)}function AL(n,t,e){let i=e.directiveStart,r=e.directiveEnd;cl(e)&&hL(t,e,n.data[i+e.componentOffset]),n.firstCreatePass||Op(e,t);let s=e.initialInputs;for(let o=i;o<r;o++){let a=n.data[o],l=iu(t,n,o,e);if(pl(l,t),s!==null&&SL(t,o-i,l,a,e,s),rr(a)){let c=or(e.index,t);c[Nn]=iu(t,n,o,e)}}}function yL(n,t,e){let i=e.directiveStart,r=e.directiveEnd,s=e.index,o=jF();try{Co(s);for(let a=i;a<r;a++){let l=n.data[a],c=t[a];Z_(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&vL(l,c)}}finally{Co(-1),Z_(o)}}function vL(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function _y(n,t){let e=n.directiveRegistry,i=null;if(e)for(let r=0;r<e.length;r++){let s=e[r];sE(t,s.selectors,!1)&&(i??=[],rr(s)?i.unshift(s):i.push(s))}return i}function wL(n,t,e,i,r,s){let o=ur(n,t);bL(t[Vt],o,s,n.value,e,i,r)}function bL(n,t,e,i,r,s,o){if(s==null)n.removeAttribute(t,r,e);else{let a=o==null?si(s):o(s,i||"",r);n.setAttribute(t,r,a,e)}}function SL(n,t,e,i,r,s){let o=s[t];if(o!==null)for(let a=0;a<o.length;a+=2){let l=o[a],c=o[a+1];uA(i,e,l,c)}}function CL(n,t){let e=n[el],i=e?e.get(ar,null):null;i&&i.handleError(t)}function Ay(n,t,e,i,r){let s=n.inputs?.[i],o=n.hostDirectiveInputs?.[i],a=!1;if(o)for(let l=0;l<o.length;l+=2){let c=o[l],u=o[l+1],d=t.data[c];uA(d,e[c],u,r),a=!0}if(s)for(let l of s){let c=e[l],u=t.data[l];uA(u,c,i,r),a=!0}return a}function xL(n,t){let e=or(t,n),i=e[nt];EL(i,e);let r=e[Ur];r!==null&&e[tu]===null&&(e[tu]=Qx(r,e[el])),St(18),yy(i,e,e[Nn]),St(19,e[Nn])}function EL(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function yy(n,t,e){QA(t);try{let i=n.viewQuery;i!==null&&cA(1,i,e);let r=n.template;r!==null&&hE(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[qr]?.finishViewCreation(n),n.staticContentQueries&&Jx(n,t),n.staticViewQueries&&cA(2,n.viewQuery,e);let s=n.components;s!==null&&DL(t,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[$e]&=-5,JA()}}function DL(n,t){for(let e=0;e<t.length;e++)xL(n,t[e])}function vy(n,t,e,i){let r=lt(null);try{let s=t.tView,a=n[$e]&4096?4096:16,l=fy(n,s,e,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=n[t.index];l[wo]=c;let u=n[qr];return u!==null&&(l[qr]=u.createEmbeddedView(s)),yy(s,l,e),l}finally{lt(r)}}function Bp(n,t){return!t||t.firstChild===null||jx(n)}var ML;function wy(n,t){return ML(n,t)}var jr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(jr||{});function by(n){return(n.flags&32)===32}function Ka(n,t,e,i,r){if(i!=null){let s,o=!1;zr(i)?s=i:ys(i)&&(o=!0,i=i[Ur]);let a=sr(i);n===0&&e!==null?r==null?aE(t,e,a):Vp(t,e,a,r||null,!0):n===1&&e!==null?Vp(t,e,a,r||null,!0):n===2?aL(t,a,o):n===3&&t.destroyNode(a),s!=null&&VL(t,n,s,e,r)}}function TL(n,t){pE(n,t),t[Ur]=null,t[Gn]=null}function IL(n,t,e,i,r,s){i[Ur]=r,i[Gn]=t,uf(n,i,e,1,r,s)}function pE(n,t){t[Br].changeDetectionScheduler?.notify(9),uf(n,t,t[Vt],2,null,null)}function kL(n){let t=n[nu];if(!t)return P_(n[nt],n);for(;t;){let e=null;if(ys(t))e=t[nu];else{let i=t[Yn];i&&(e=i)}if(!e){for(;t&&!t[Ri]&&t!==n;)ys(t)&&P_(t[nt],t),t=t[En];t===null&&(t=n),ys(t)&&P_(t[nt],t),e=t&&t[Ri]}t=e}}function Sy(n,t){let e=n[tl],i=e.indexOf(t);e.splice(i,1)}function Cy(n,t){if(du(t))return;let e=t[Vt];e.destroyNode&&uf(n,t,e,3,null,null),kL(t)}function P_(n,t){if(du(t))return;let e=lt(null);try{t[$e]&=-129,t[$e]|=256,t[_i]&&i_(t[_i]),NL(n,t),PL(n,t),t[nt].type===1&&t[Vt].destroy();let i=t[wo];if(i!==null&&zr(t[En])){i!==t[En]&&Sy(i,t);let r=t[qr];r!==null&&r.detachView(n)}oA(t)}finally{lt(e)}}function PL(n,t){let e=n.cleanup,i=t[Mp];if(e!==null)for(let o=0;o<e.length-1;o+=2)if(typeof e[o]=="string"){let a=e[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else{let a=i[e[o+1]];e[o].call(a)}i!==null&&(t[Mp]=null);let r=t[As];if(r!==null){t[As]=null;for(let o=0;o<r.length;o++){let a=r[o];a()}}let s=t[Tp];if(s!==null){t[Tp]=null;for(let o of s)o.destroy()}}function NL(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=t[e[i]];if(!(r instanceof xo)){let s=e[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],l=s[o+1];St(4,a,l);try{l.call(a)}finally{St(5,a,l)}}else{St(4,r,s);try{s.call(r)}finally{St(5,r,s)}}}}}function fE(n,t,e){return OL(n,t.parent,e)}function OL(n,t,e){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return e[Ur];if(cl(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===lr.None||r===lr.Emulated)return null}return ur(i,e)}function gE(n,t,e){return FL(n,t,e)}function RL(n,t,e){return n.type&40?ur(n,e):null}var FL=RL,AC;function cf(n,t,e,i){let r=fE(n,i,t),s=t[Vt],o=i.parent||t[Gn],a=gE(o,i,t);if(r!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)_C(s,r,e[l],a,!1);else _C(s,r,e,a,!1);AC!==void 0&&AC(s,i,t,e,r)}function Zc(n,t){if(t!==null){let e=t.type;if(e&3)return ur(t,n);if(e&4)return dA(-1,n[t.index]);if(e&8){let i=t.child;if(i!==null)return Zc(n,i);{let r=n[t.index];return zr(r)?dA(-1,r):sr(r)}}else{if(e&128)return Zc(n,t.next);if(e&32)return wy(t,n)()||sr(n[t.index]);{let i=mE(n,t);if(i!==null){if(Array.isArray(i))return i[0];let r=So(n[Ai]);return Zc(r,i)}else return Zc(n,t.next)}}}return null}function mE(n,t){if(t!==null){let i=n[Ai][Gn],r=t.projection;return i.projection[r]}return null}function dA(n,t){let e=Yn+n+1;if(e<t.length){let i=t[e],r=i[nt].firstChild;if(r!==null)return Zc(i,r)}return t[bo]}function xy(n,t,e,i,r,s,o){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=i[e.index],l=e.type;if(o&&t===0&&(a&&pl(sr(a),i),e.flags|=2),!by(e))if(l&8)xy(n,t,e.child,i,r,s,!1),Ka(t,n,r,a,s);else if(l&32){let c=wy(e,i),u;for(;u=c();)Ka(t,n,r,u,s);Ka(t,n,r,a,s)}else l&16?_E(n,t,i,e,r,s):Ka(t,n,r,a,s);e=o?e.projectionNext:e.next}}function uf(n,t,e,i,r,s){xy(e,i,n.firstChild,t,r,s,!1)}function LL(n,t,e){let i=t[Vt],r=fE(n,e,t),s=e.parent||t[Gn],o=gE(s,e,t);_E(i,0,t,e,r,o)}function _E(n,t,e,i,r,s){let o=e[Ai],l=o[Gn].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Ka(t,n,r,u,s)}else{let c=l,u=o[En];jx(i)&&(c.flags|=128),xy(n,t,c,u,r,s,!0)}}function VL(n,t,e,i,r){let s=e[bo],o=sr(e);s!==o&&Ka(t,n,i,s,r);for(let a=Yn;a<e.length;a++){let l=e[a];uf(l[nt],l,n,t,i,s)}}function BL(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let s=i.indexOf("-")===-1?void 0:jr.DashCase;r==null?n.removeStyle(e,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=jr.Important),n.setStyle(e,i,r,s))}}function qp(n,t,e,i,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let s=t[e.index];s!==null&&i.push(sr(s)),zr(s)&&qL(s,i);let o=e.type;if(o&8)qp(n,t,e.child,i);else if(o&32){let a=wy(e,t),l;for(;l=a();)i.push(l)}else if(o&16){let a=mE(t,e);if(Array.isArray(a))i.push(...a);else{let l=So(t[Ai]);qp(l[nt],l,a,i,!0)}}e=r?e.projectionNext:e.next}return i}function qL(n,t){for(let e=Yn;e<n.length;e++){let i=n[e],r=i[nt].firstChild;r!==null&&qp(i[nt],i,r,t)}n[bo]!==n[Ur]&&t.push(n[bo])}function AE(n){if(n[$a]!==null){for(let t of n[$a])t.impl.addSequence(t);n[$a].length=0}}var yE=[];function jL(n){return n[_i]??WL(n)}function WL(n){let t=yE.pop()??Object.create(zL);return t.lView=n,t}function UL(n){n.lView[_i]!==n&&(n.lView=null,yE.push(n))}var zL=Ne(re({},jc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{hu(n.lView)},consumerOnSignalRead(){this.lView[_i]=this}});function HL(n){let t=n[_i]??Object.create(YL);return t.lView=n,t}var YL=Ne(re({},jc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=So(n.lView);for(;t&&!vE(t[nt]);)t=So(t);t&&dx(t)},consumerOnSignalRead(){this.lView[_i]=this}});function vE(n){return n.type!==2}function wE(n){if(n[Tp]===null)return;let t=!0;for(;t;){let e=!1;for(let i of n[Tp])i.dirty&&(e=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));t=e&&!!(n[$e]&8192)}}var GL=100;function bE(n,t=!0,e=0){let r=n[Br].rendererFactory,s=!1;s||r.begin?.();try{KL(n,e)}catch(o){throw t&&CL(n,o),o}finally{s||r.end?.()}}function KL(n,t){let e=gx();try{iC(!0),hA(n,t);let i=0;for(;Jp(n);){if(i===GL)throw new Ee(103,!1);i++,hA(n,1)}}finally{iC(e)}}function $L(n,t,e,i){if(du(t))return;let r=t[$e],s=!1,o=!1;QA(t);let a=!0,l=null,c=null;s||(vE(n)?(c=jL(t),l=Rh(c)):Zm()===null?(a=!1,c=HL(t),l=Rh(c)):t[_i]&&(i_(t[_i]),t[_i]=null));try{ux(t),VF(n.bindingStartIndex),e!==null&&hE(n,t,e,2,i);let u=(r&3)===3;if(!s)if(u){let p=n.preOrderCheckHooks;p!==null&&Ap(t,p,null)}else{let p=n.preOrderHooks;p!==null&&yp(t,p,0,null),I_(t,0)}if(o||XL(t),wE(t),SE(t,0),n.contentQueries!==null&&Jx(n,t),!s)if(u){let p=n.contentCheckHooks;p!==null&&Ap(t,p)}else{let p=n.contentHooks;p!==null&&yp(t,p,1),I_(t,1)}QL(n,t);let d=n.components;d!==null&&xE(t,d,0);let h=n.viewQuery;if(h!==null&&cA(2,h,i),!s)if(u){let p=n.viewCheckHooks;p!==null&&Ap(t,p)}else{let p=n.viewHooks;p!==null&&yp(t,p,2),I_(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[T_]){for(let p of t[T_])p();t[T_]=null}s||(AE(t),t[$e]&=-73)}catch(u){throw s||hu(t),u}finally{c!==null&&(t_(c,l),a&&UL(c)),JA()}}function SE(n,t){for(let e=zx(n);e!==null;e=Hx(e))for(let i=Yn;i<e.length;i++){let r=e[i];CE(r,t)}}function XL(n){for(let t=zx(n);t!==null;t=Hx(t)){if(!(t[$e]&2))continue;let e=t[tl];for(let i=0;i<e.length;i++){let r=e[i];dx(r)}}}function ZL(n,t,e){St(18);let i=or(t,n);CE(i,e),St(19,i[Nn])}function CE(n,t){zA(n)&&hA(n,t)}function hA(n,t){let i=n[nt],r=n[$e],s=n[_i],o=!!(t===0&&r&16);if(o||=!!(r&64&&t===0),o||=!!(r&1024),o||=!!(s?.dirty&&n_(s)),o||=!1,s&&(s.dirty=!1),n[$e]&=-9217,o)$L(i,n,i.template,n[Nn]);else if(r&8192){wE(n),SE(n,1);let a=i.components;a!==null&&xE(n,a,1),AE(n)}}function xE(n,t,e){for(let i=0;i<t.length;i++)ZL(n,t[i],e)}function QL(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)Co(~r);else{let s=r,o=e[++i],a=e[++i];qF(o,s);let l=t[s];St(24,l),a(2,l),St(25,l)}}}finally{Co(-1)}}function Ey(n,t){let e=gx()?64:1088;for(n[Br].changeDetectionScheduler?.notify(t);n;){n[$e]|=e;let i=So(n);if(kp(n)&&!i)return n;n=i}return null}function EE(n,t,e,i){return[n,!0,0,t,null,i,null,e,null,null]}function JL(n,t){let e=Yn+t;if(e<n.length)return n[e]}function Dy(n,t,e,i=!0){let r=t[nt];if(tV(r,t,n,e),i){let o=dA(e,n),a=t[Vt],l=a.parentNode(n[bo]);l!==null&&IL(r,n[Gn],a,t,l,o)}let s=t[tu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function eV(n,t){let e=jp(n,t);return e!==void 0&&Cy(e[nt],e),e}function jp(n,t){if(n.length<=Yn)return;let e=Yn+t,i=n[e];if(i){let r=i[wo];r!==null&&r!==n&&Sy(r,i),t>0&&(n[e-1][Ri]=i[Ri]);let s=Ep(n,Yn+t);TL(i[nt],i);let o=s[qr];o!==null&&o.detachView(s[nt]),i[En]=null,i[Ri]=null,i[$e]&=-129}return i}function tV(n,t,e,i){let r=Yn+i,s=e.length;i>0&&(e[r-1][Ri]=t),i<s-Yn?(t[Ri]=e[r],GC(e,Yn+i,t)):(e.push(t),t[Ri]=null),t[En]=e;let o=t[wo];o!==null&&e!==o&&DE(o,t);let a=t[qr];a!==null&&a.insertView(n),$_(t),t[$e]|=128}function DE(n,t){let e=n[tl],i=t[En];if(ys(i))n[$e]|=2;else{let r=i[En][Ai];t[Ai]!==r&&(n[$e]|=2)}e===null?n[tl]=[t]:e.push(t)}var ru=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,e=t[nt];return qp(e,t,e.firstChild,[])}constructor(t,e,i=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=i}get context(){return this._lView[Nn]}set context(t){this._lView[Nn]=t}get destroyed(){return du(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[En];if(zr(t)){let e=t[Ip],i=e?e.indexOf(this):-1;i>-1&&(jp(t,i),Ep(e,i))}this._attachedToViewContainer=!1}Cy(this._lView[nt],this._lView)}onDestroy(t){hx(this._lView,t)}markForCheck(){Ey(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[$e]&=-129}reattach(){$_(this._lView),this._lView[$e]|=128}detectChanges(){this._lView[$e]|=1024,bE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=kp(this._lView),e=this._lView[wo];e!==null&&!t&&Sy(e,this._lView),pE(this._lView[nt],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Ee(902,!1);this._appRef=t;let e=kp(this._lView),i=this._lView[wo];i!==null&&!e&&DE(i,this._lView),$_(this._lView)}};var cr=(()=>{class n{static __NG_ELEMENT_ID__=rV}return n})(),nV=cr,iV=class extends nV{_declarationLView;_declarationTContainer;elementRef;constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,i){let r=vy(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:i});return new ru(r)}};function rV(){return df(Kn(),Xe())}function df(n,t){return n.type&4?new iV(t,n,hl(n,t)):null}function _u(n,t,e,i,r){let s=n.data[t];if(s===null)s=sV(n,t,e,i,r),BF()&&(s.flags|=32);else if(s.type&64){s.type=e,s.value=i,s.attrs=r;let o=FF();s.injectorIndex=o===null?-1:o.injectorIndex}return Do(s,!0),s}function sV(n,t,e,i,r){let s=fx(),o=KA(),a=o?s:s&&s.parent,l=n.data[t]=aV(n,a,e,t,i,r);return oV(n,l,s,o),l}function oV(n,t,e,i){n.firstChild===null&&(n.firstChild=t),e!==null&&(i?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function aV(n,t,e,i,r,s){let o=t?t.injectorIndex:-1,a=0;return px()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Rue=new RegExp(`^(\\d+)*(${M4}|${D4})*(.*)`);var lV=()=>null;function Wp(n,t){return lV(n,t)}var cV=class{},ME=class{},pA=class{resolveComponentFactory(t){throw Error(`No component factory found for ${Hn(t)}.`)}},hf=class{static NULL=new pA},sl=class{},bs=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>uV()}return n})();function uV(){let n=Xe(),t=Kn(),e=or(t.index,n);return(ys(e)?e:n)[Vt]}var dV=(()=>{class n{static \u0275prov=he({token:n,providedIn:"root",factory:()=>null})}return n})();var N_={},fA=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=$p(i);let r=this.injector.get(t,N_,i);return r!==N_||e===N_?r:this.parentInjector.get(t,e,i)}};function gA(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,s=0;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];if(typeof a=="number")s=a;else if(s==1)r=j_(r,a);else if(s==2){let l=a,c=t[++o];i=j_(i,l+": "+c+";")}}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}function ve(n,t=rt.Default){let e=Xe();if(e===null)return oe(n,t);let i=Kn();return Ix(i,e,kn(n),t)}function My(n,t,e,i,r){let s=i===null?null:{"":-1},o=r(n,e);if(o!==null){let a,l=null,c=null,u=pV(o);u===null?a=o:[a,l,c]=u,mV(n,t,e,a,s,l,c)}s!==null&&i!==null&&hV(e,i,s)}function hV(n,t,e){let i=n.localNames=[];for(let r=0;r<t.length;r+=2){let s=e[t[r+1]];if(s==null)throw new Ee(-301,!1);i.push(t[r],s)}}function pV(n){let t=null,e=!1;for(let o=0;o<n.length;o++){let a=n[o];if(o===0&&rr(a)&&(t=a),a.findHostDirectiveDefs!==null){e=!0;break}}if(!e)return null;let i=null,r=null,s=null;for(let o of n)o.findHostDirectiveDefs!==null&&(i??=[],r??=new Map,s??=new Map,fV(o,i,s,r)),o===t&&(i??=[],i.push(o));return i!==null?(i.push(...t===null?n:n.slice(1)),[i,r,s]):null}function fV(n,t,e,i){let r=t.length;n.findHostDirectiveDefs(n,t,i),e.set(n,[r,t.length-1])}function gV(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function mV(n,t,e,i,r,s,o){let a=i.length,l=!1;for(let h=0;h<a;h++){let p=i[h];!l&&rr(p)&&(l=!0,gV(n,e,h)),J_(Op(e,t),n,p.type)}bV(e,n.data.length,a);for(let h=0;h<a;h++){let p=i[h];p.providersResolver&&p.providersResolver(p)}let c=!1,u=!1,d=uE(n,t,a,null);a>0&&(e.directiveToIndex=new Map);for(let h=0;h<a;h++){let p=i[h];if(e.mergedAttrs=il(e.mergedAttrs,p.hostAttrs),AV(n,e,t,d,p),wV(d,p,r),o!==null&&o.has(p)){let[A,y]=o.get(p);e.directiveToIndex.set(p.type,[d,A+e.directiveStart,y+e.directiveStart])}else(s===null||!s.has(p))&&e.directiveToIndex.set(p.type,d);p.contentQueries!==null&&(e.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(e.flags|=64);let g=p.type.prototype;!c&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),c=!0),!u&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),u=!0),d++}_V(n,e,s)}function _V(n,t,e){for(let i=t.directiveStart;i<t.directiveEnd;i++){let r=n.data[i];if(e===null||!e.has(r))yC(0,t,r,i),yC(1,t,r,i),wC(t,i,!1);else{let s=e.get(r);vC(0,t,s,i),vC(1,t,s,i),wC(t,i,!0)}}}function yC(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let s in r)if(r.hasOwnProperty(s)){let o;n===0?o=t.inputs??={}:o=t.outputs??={},o[s]??=[],o[s].push(i),TE(t,s)}}function vC(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let s in r)if(r.hasOwnProperty(s)){let o=r[s],a;n===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[o]??=[],a[o].push(i,s),TE(t,o)}}function TE(n,t){t==="class"?n.flags|=8:t==="style"&&(n.flags|=16)}function wC(n,t,e){let{attrs:i,inputs:r,hostDirectiveInputs:s}=n;if(i===null||!e&&r===null||e&&s===null||hy(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<i.length;){let l=i[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!e&&r.hasOwnProperty(l)){let c=r[l];for(let u of c)if(u===t){o??=[],o.push(l,i[a+1]);break}}else if(e&&s.hasOwnProperty(l)){let c=s[l];for(let u=0;u<c.length;u+=2)if(c[u]===t){o??=[],o.push(c[u+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function AV(n,t,e,i,r){n.data[i]=r;let s=r.factory||(r.factory=Za(r.type,!0)),o=new xo(s,rr(r),ve);n.blueprint[i]=o,e[i]=o,yV(n,t,i,uE(n,e,r.hostVars,cn),r)}function yV(n,t,e,i,r){let s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~t.index;vV(o)!=a&&o.push(a),o.push(e,i,s)}}function vV(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function wV(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;rr(t)&&(e[""]=n)}}function bV(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function IE(n,t,e,i,r,s,o,a){let l=t.consts,c=nl(l,o),u=_u(t,n,2,i,c);return s&&My(t,e,u,nl(l,a),r),u.mergedAttrs=il(u.mergedAttrs,u.attrs),u.attrs!==null&&gA(u,u.attrs,!1),u.mergedAttrs!==null&&gA(u,u.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,u),u}function kE(n,t){ey(n,t),WA(t)&&n.queries.elementEnd(t)}var Up=class extends hf{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=Qa(t);return new su(e,this.ngModule)}};function SV(n){return Object.keys(n).map(t=>{let[e,i,r]=n[t],s={propName:e,templateName:t,isSignal:(i&of.SignalBased)!==0};return r&&(s.transform=r),s})}function CV(n){return Object.keys(n).map(t=>({propName:n[t],templateName:t}))}function xV(n,t,e){let i=t instanceof Pn?t:t?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new fA(e,i):e}function EV(n){let t=n.get(sl,null);if(t===null)throw new Ee(407,!1);let e=n.get(dV,null),i=n.get(rl,null);return{rendererFactory:t,sanitizer:e,changeDetectionScheduler:i}}function DV(n,t){let e=(n.selectors[0][0]||"div").toLowerCase();return oE(t,e,e==="svg"?SF:e==="math"?CF:null)}var su=class extends ME{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=SV(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=CV(this.componentDef.outputs),this.cachedOutputs}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=nL(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,i,r){St(22);let s=lt(null);try{let o=this.componentDef,a=i?["ng-version","19.2.5"]:iL(this.componentDef.selectors[0]),l=py(0,null,null,1,0,null,null,null,null,[a],null),c=xV(o,r||this.ngModule,t),u=EV(c),d=u.rendererFactory.createRenderer(null,o),h=i?pL(d,i,o.encapsulation,c):DV(o,d),p=fy(null,l,null,512|cE(o),null,null,u,d,c,null,Qx(h,c,!0));p[On]=h,QA(p);let g=null;try{let A=IE(On,l,p,"#host",()=>[this.componentDef],!0,0);h&&(lE(d,h,A),pl(h,p)),af(l,p,A),uy(l,A,p),kE(l,A),e!==void 0&&MV(A,this.ngContentSelectors,e),g=or(A.index,p),p[Nn]=g[Nn],yy(l,p,null)}catch(A){throw g!==null&&oA(g),oA(p),A}finally{St(23),JA()}return new mA(this.componentType,p)}finally{lt(s)}}},mA=class extends cV{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e){super(),this._rootLView=e,this._tNode=UA(e[nt],On),this.location=hl(this._tNode,e),this.instance=or(this._tNode.index,e)[Nn],this.hostView=this.changeDetectorRef=new ru(e,void 0,!1),this.componentType=t}setInput(t,e){let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let r=this._rootLView,s=Ay(i,r[nt],r,t,e);this.previousInputValues.set(t,e);let o=or(i.index,r);Ey(o,1)}get injector(){return new yo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function MV(n,t,e){let i=n.projection=[];for(let r=0;r<t.length;r++){let s=e[r];i.push(s!=null&&s.length?Array.from(s):null)}}var Bi=(()=>{class n{static __NG_ELEMENT_ID__=TV}return n})();function TV(){let n=Kn();return NE(n,Xe())}var IV=Bi,PE=class extends IV{_lContainer;_hostTNode;_hostLView;constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return hl(this._hostTNode,this._hostLView)}get injector(){return new yo(this._hostTNode,this._hostLView)}get parentInjector(){let t=ty(this._hostTNode,this._hostLView);if(Cx(t)){let e=Np(t,this._hostLView),i=Pp(t),r=e[nt].data[i+8];return new yo(r,e)}else return new yo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=bC(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Yn}createEmbeddedView(t,e,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=Wp(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},s,o);return this.insertImpl(a,r,Bp(this._hostTNode,o)),a}createComponent(t,e,i,r,s){let o=t&&!yF(t),a;if(o)a=e;else{let g=e||{};a=g.index,i=g.injector,r=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}let l=o?t:new su(Qa(t)),c=i||this.parentInjector;if(!s&&l.ngModule==null){let A=(o?c:this.parentInjector).get(Pn,null);A&&(s=A)}let u=Qa(l.componentType??{}),d=Wp(this._lContainer,u?.id??null),h=d?.firstChild??null,p=l.create(c,r,h,s);return this.insertImpl(p.hostView,a,Bp(this._hostTNode,d)),p}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,i){let r=t._lView;if(DF(r)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=r[En],c=new PE(l,l[Gn],l[En]);c.detach(c.indexOf(t))}}let s=this._adjustIndex(e),o=this._lContainer;return Dy(o,r,s,i),t.attachToViewContainerRef(),GC(O_(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=bC(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),i=jp(this._lContainer,e);i&&(Ep(O_(this._lContainer),e),Cy(i[nt],i))}detach(t){let e=this._adjustIndex(t,-1),i=jp(this._lContainer,e);return i&&Ep(O_(this._lContainer),e)!=null?new ru(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function bC(n){return n[Ip]}function O_(n){return n[Ip]||(n[Ip]=[])}function NE(n,t){let e,i=t[n.index];return zr(i)?e=i:(e=EE(i,t,null,n),t[n.index]=e,gy(t,e)),PV(e,t,n,i),new PE(e,n,t)}function kV(n,t){let e=n[Vt],i=e.createComment(""),r=ur(t,n),s=e.parentNode(r);return Vp(e,s,i,e.nextSibling(r),!1),i}var PV=RV,NV=()=>!1;function OV(n,t,e){return NV(n,t,e)}function RV(n,t,e,i){if(n[bo])return;let r;e.type&8?r=sr(i):r=kV(t,e),n[bo]=r}var _A=class n{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},AA=class n{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let i=t.contentQueries!==null?t.contentQueries[0]:e.length,r=[];for(let s=0;s<i;s++){let o=e.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)Ty(t,e).matches!==null&&this.queries[e].setDirty()}},yA=class{flags;read;predicate;constructor(t,e,i=null){this.flags=e,this.read=i,typeof t=="string"?this.predicate=UV(t):this.predicate=t}},vA=class n{queries;constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){let r=e!==null?e.length:0,s=this.getByIndex(i).embeddedTView(t,r);s&&(s.indexInDeclarationView=i,e!==null?e.push(s):e=[s])}return e!==null?new n(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},wA=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,e=-1){this.metadata=t,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==e;)i=i.parent;return e===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(t,e,FV(e,s)),this.matchTNodeWithReadOption(t,e,vp(e,t,s,!1,!1))}else i===cr?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,vp(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===An||r===Bi||r===cr&&e.type&4)this.addMatch(e.index,-2);else{let s=vp(e,t,r,!1,!1);s!==null&&this.addMatch(e.index,s)}else this.addMatch(e.index,i)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function FV(n,t){let e=n.localNames;if(e!==null){for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1]}return null}function LV(n,t){return n.type&11?hl(n,t):n.type&4?df(n,t):null}function VV(n,t,e,i){return e===-1?LV(t,n):e===-2?BV(n,t,i):iu(n,n[nt],e,t)}function BV(n,t,e){if(e===An)return hl(t,n);if(e===cr)return df(t,n);if(e===Bi)return NE(t,n)}function OE(n,t,e,i){let r=t[qr].queries[i];if(r.matches===null){let s=n.data,o=e.matches,a=[];for(let l=0;o!==null&&l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let u=s[c];a.push(VV(t,u,o[l+1],e.metadata.read))}}r.matches=a}return r.matches}function bA(n,t,e,i){let r=n.queries.getByIndex(e),s=r.matches;if(s!==null){let o=OE(n,t,r,e);for(let a=0;a<s.length;a+=2){let l=s[a];if(l>0)i.push(o[a/2]);else{let c=s[a+1],u=t[-l];for(let d=Yn;d<u.length;d++){let h=u[d];h[wo]===h[En]&&bA(h[nt],h,c,i)}if(u[tl]!==null){let d=u[tl];for(let h=0;h<d.length;h++){let p=d[h];bA(p[nt],p,c,i)}}}}}return i}function qV(n,t){return n[qr].queries[t].queryList}function jV(n,t,e){let i=new sA((e&4)===4);return IF(n,t,i,i.destroy),(t[qr]??=new AA).queries.push(new _A(i))-1}function WV(n,t,e){let i=Xt();return i.firstCreatePass&&(zV(i,new yA(n,t,e),-1),(t&2)===2&&(i.staticViewQueries=!0)),jV(i,Xe(),t)}function UV(n){return n.split(",").map(t=>t.trim())}function zV(n,t,e){n.queries===null&&(n.queries=new vA),n.queries.track(new wA(t,e))}function Ty(n,t){return n.queries.getByIndex(t)}function HV(n,t){let e=n[nt],i=Ty(e,t);return i.crossesNgTemplate?bA(e,n,t,[]):OE(e,n,i,t)}var ol=class{},Iy=class{};var SA=class extends ol{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Up(this);constructor(t,e,i,r=!0){super(),this.ngModuleType=t,this._parent=e;let s=XC(t);this._bootstrapComponents=iE(s.bootstrap),this._r3Injector=Nx(t,e,[{provide:ol,useValue:this},{provide:hf,useValue:this.componentFactoryResolver},...i],Hn(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},CA=class extends Iy{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new SA(this.moduleType,t,[])}};var zp=class extends ol{injector;componentFactoryResolver=new Up(this);instance=null;constructor(t){super();let e=new eu([...t.providers,{provide:ol,useValue:this},{provide:hf,useValue:this.componentFactoryResolver}],t.parent||jA(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function pf(n,t,e=null){return new zp({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var YV=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=ZC(!1,e.type),r=i.length>0?pf([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=he({token:n,providedIn:"environment",factory:()=>new n(oe(Pn))})}return n})();function qi(n){return lu(()=>{let t=RE(n),e=Ne(re({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Wx.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?r=>r.get(YV).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||lr.Emulated,styles:n.styles||zn,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&mu("NgStandalone"),FE(e);let i=n.dependencies;return e.directiveDefs=SC(i,!1),e.pipeDefs=SC(i,!0),e.id=ZV(e),e})}function GV(n){return Qa(n)||aF(n)}function KV(n){return n!==null}function ji(n){return lu(()=>({type:n.type,bootstrap:n.bootstrap||zn,declarations:n.declarations||zn,imports:n.imports||zn,exports:n.exports||zn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function $V(n,t){if(n==null)return vo;let e={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s,o,a,l;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s,l=r[3]||null):(s=r,o=r,a=of.None,l=null),e[s]=[i,a,l],t[s]=o}return e}function XV(n){if(n==null)return vo;let t={};for(let e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function Tt(n){return lu(()=>{let t=RE(n);return FE(t),t})}function RE(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputConfig:n.inputs||vo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||zn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$V(n.inputs,t),outputs:XV(n.outputs),debugInfo:null}}function FE(n){n.features?.forEach(t=>t(n))}function SC(n,t){if(!n)return null;let e=t?lF:GV;return()=>(typeof n=="function"?n():n).map(i=>e(i)).filter(KV)}function ZV(n){let t=0,e=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of i.join("|"))t=Math.imul(31,t)+s.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function QV(n){return Object.getPrototypeOf(n.prototype).constructor}function li(n){let t=QV(n.type),e=!0,i=[n];for(;t;){let r;if(rr(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Ee(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);let o=n;o.inputs=R_(n.inputs),o.declaredInputs=R_(n.declaredInputs),o.outputs=R_(n.outputs);let a=r.hostBindings;a&&i6(n,a);let l=r.viewQuery,c=r.contentQueries;if(l&&t6(n,l),c&&n6(n,c),JV(n,r),L3(n.outputs,r.outputs),rr(r)&&r.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===li&&(e=!1)}}t=Object.getPrototypeOf(t)}e6(i)}function JV(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let i=t.inputs[e];i!==void 0&&(n.inputs[e]=i,n.declaredInputs[e]=t.declaredInputs[e])}}function e6(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=il(r.hostAttrs,e=il(e,r.hostAttrs))}}function R_(n){return n===vo?{}:n===zn?[]:n}function t6(n,t){let e=n.viewQuery;e?n.viewQuery=(i,r)=>{t(i,r),e(i,r)}:n.viewQuery=t}function n6(n,t){let e=n.contentQueries;e?n.contentQueries=(i,r,s)=>{t(i,r,s),e(i,r,s)}:n.contentQueries=t}function i6(n,t){let e=n.hostBindings;e?n.hostBindings=(i,r)=>{t(i,r),e(i,r)}:n.hostBindings=t}function LE(n){return s6(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function r6(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),i;for(;!(i=e.next()).done;)t(i.value)}}function s6(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Au(n,t,e){return n[t]=e}function VE(n,t){return n[t]}function oi(n,t,e){let i=n[t];return Object.is(i,e)?!1:(n[t]=e,!0)}function ou(n,t,e,i){let r=oi(n,t,e);return oi(n,t+1,i)||r}function BE(n,t,e,i,r){let s=ou(n,t,e,i);return oi(n,t+2,r)||s}function qE(n,t,e,i,r,s){let o=ou(n,t,e,i);return ou(n,t+2,r,s)||o}function o6(n,t,e,i,r,s,o,a,l){let c=t.consts,u=_u(t,n,4,o||null,a||null);GA()&&My(t,e,u,nl(c,l),_y),u.mergedAttrs=il(u.mergedAttrs,u.attrs),ey(t,u);let d=u.tView=py(2,u,i,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return t.queries!==null&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}function jE(n,t,e,i,r,s,o,a,l,c){let u=e+On,d=t.firstCreatePass?o6(u,t,n,i,r,s,o,a,l):t.data[u];Do(d,!1);let h=a6(t,n,d,e);ef()&&cf(t,n,h,d),pl(h,n);let p=EE(h,n,h,d);return n[u]=p,gy(n,p),OV(p,d,n),Qp(d)&&af(t,n,d),l!=null&&my(n,d,c),d}function te(n,t,e,i,r,s,o,a){let l=Xe(),c=Xt(),u=nl(c.consts,s);return jE(l,c,n,t,e,i,r,u,o,a),te}var a6=l6;function l6(n,t,e,i){return tf(!0),t[Vt].createComment("")}var WE=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var UE=new Se("");var c6=(()=>{class n{static \u0275prov=he({token:n,providedIn:"root",factory:()=>new xA})}return n})(),xA=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}remove(t){let e=t.zone,i=this.queues.get(e);i.has(t)&&(i.delete(t),this.queuedEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let i=this.queues.get(e);i.has(t)||(this.queuedEffectCount++,i.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,e]of this.queues)t===null?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(let e of t)t.delete(e),this.queuedEffectCount--,e.run()}};function Mo(n){return!!n&&typeof n.then=="function"}function zE(n){return!!n&&typeof n.subscribe=="function"}var HE=new Se("");var YE=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i});appInits=se(HE,{optional:!0})??[];injector=se(Rn);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let s=ai(this.injector,r);if(Mo(s))e.push(s);else if(zE(s)){let o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});e.push(o)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ky=new Se("");function u6(){s_(()=>{throw new Ee(600,!1)})}function d6(n){return n.isBoundToModule}var h6=10;var Wr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=se(g4);afterRenderManager=se(Xx);zonelessEnabled=se(ny);rootEffectScheduler=se(c6);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new ct;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=se(vs).hasPendingTasks.pipe(We(e=>!e));constructor(){se(fl,{optional:!0})}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{e.unsubscribe()})}_injector=se(Pn);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,i){St(10);let r=e instanceof ME;if(!this._injector.get(YE).done){let h="";throw new Ee(405,h)}let o;r?o=e:o=this._injector.get(hf).resolveComponentFactory(e),this.componentTypes.push(o.componentType);let a=d6(o)?void 0:this._injector.get(ol),l=i||o.selector,c=o.create(Rn.NULL,[],l,a),u=c.location.nativeElement,d=c.injector.get(UE,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),wp(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),St(11,c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){St(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(ly.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Ee(101,!1);let e=lt(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,lt(e),this.afterTick.next(),St(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(sl,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<h6;)St(14),this.synchronizeOnce(),St(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let e=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:r}of this.allViews)p6(i,r,e,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>Jp(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;wp(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(ky,[]).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>wp(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Ee(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wp(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function p6(n,t,e,i){if(!e&&!Jp(n))return;bE(n,t,e&&!i?0:1)}function ff(n,t,e,i){let r=Xe(),s=ul();if(oi(r,s,t)){let o=Xt(),a=gu();wL(a,r,n,t,e,i)}return ff}function GE(n,t,e,i){return oi(n,ul(),e)?t+si(e)+i:cn}function f6(n,t,e,i,r,s){let o=XA(),a=ou(n,o,e,r);return fu(2),a?t+si(e)+i+si(r)+s:cn}function g6(n,t,e,i,r,s,o,a){let l=XA(),c=BE(n,l,e,r,o);return fu(3),c?t+si(e)+i+si(r)+s+si(o)+a:cn}function m6(n,t,e,i,r,s,o,a,l,c){let u=XA(),d=qE(n,u,e,r,o,l);return fu(4),d?t+si(e)+i+si(r)+s+si(o)+a+si(l)+c:cn}function mp(n,t){return n<<17|t<<2}function Eo(n){return n>>17&32767}function _6(n){return(n&2)==2}function A6(n,t){return n&131071|t<<17}function EA(n){return n|2}function al(n){return(n&131068)>>2}function F_(n,t){return n&-131069|t<<2}function y6(n){return(n&1)===1}function DA(n){return n|1}function v6(n,t,e,i,r,s){let o=s?t.classBindings:t.styleBindings,a=Eo(o),l=al(o);n[i]=e;let c=!1,u;if(Array.isArray(e)){let d=e;u=d[1],(u===null||cu(d,u)>0)&&(c=!0)}else u=e;if(r)if(l!==0){let h=Eo(n[a+1]);n[i+1]=mp(h,a),h!==0&&(n[h+1]=F_(n[h+1],i)),n[a+1]=A6(n[a+1],i)}else n[i+1]=mp(a,0),a!==0&&(n[a+1]=F_(n[a+1],i)),a=i;else n[i+1]=mp(l,0),a===0?a=i:n[l+1]=F_(n[l+1],i),l=i;c&&(n[i+1]=EA(n[i+1])),CC(n,u,i,!0),CC(n,u,i,!1),w6(t,u,n,i,s),o=mp(a,l),s?t.classBindings=o:t.styleBindings=o}function w6(n,t,e,i,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof t=="string"&&cu(s,t)>=0&&(e[i+1]=DA(e[i+1]))}function CC(n,t,e,i){let r=n[e+1],s=t===null,o=i?Eo(r):al(r),a=!1;for(;o!==0&&(a===!1||s);){let l=n[o],c=n[o+1];b6(l,t)&&(a=!0,n[o+1]=i?DA(c):EA(c)),o=i?Eo(c):al(c)}a&&(n[e+1]=i?EA(r):DA(r))}function b6(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?cu(n,t)>=0:!1}var Oi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function S6(n){return n.substring(Oi.key,Oi.keyEnd)}function C6(n){return x6(n),KE(n,$E(n,0,Oi.textEnd))}function KE(n,t){let e=Oi.textEnd;return e===t?-1:(t=Oi.keyEnd=E6(n,Oi.key=t,e),$E(n,t,e))}function x6(n){Oi.key=0,Oi.keyEnd=0,Oi.value=0,Oi.valueEnd=0,Oi.textEnd=n.length}function $E(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function E6(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function V(n,t,e){let i=Xe(),r=ul();if(oi(i,r,t)){let s=Xt(),o=gu();lf(s,o,i,n,t,i[Vt],e,!1)}return V}function MA(n,t,e,i,r){Ay(t,n,e,r?"class":"style",i)}function gl(n,t){return M6(n,t,null,!0),gl}function Py(n){T6(R6,D6,n,!0)}function D6(n,t){for(let e=C6(t);e>=0;e=KE(t,e))BA(n,S6(t),!0)}function M6(n,t,e,i){let r=Xe(),s=Xt(),o=fu(2);if(s.firstUpdatePass&&ZE(s,n,o,i),t!==cn&&oi(r,o,t)){let a=s.data[dr()];QE(s,a,r,r[Vt],n,r[o+1]=L6(t,e),i,o)}}function T6(n,t,e,i){let r=Xt(),s=fu(2);r.firstUpdatePass&&ZE(r,null,s,i);let o=Xe();if(e!==cn&&oi(o,s,e)){let a=r.data[dr()];if(JE(a,i)&&!XE(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(e=j_(l,e||"")),MA(r,a,o,e,i)}else F6(r,a,o,o[Vt],o[s+1],o[s+1]=O6(n,t,e),i,s)}}function XE(n,t){return t>=n.expandoStartIndex}function ZE(n,t,e,i){let r=n.data;if(r[e+1]===null){let s=r[dr()],o=XE(n,e);JE(s,i)&&t===null&&!o&&(t=!1),t=I6(r,s,t,i),v6(r,s,t,e,o,i)}}function I6(n,t,e,i){let r=WF(n),s=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(e=L_(null,n,t,e,i),e=au(e,t.attrs,i),s=null);else{let o=t.directiveStylingLast;if(o===-1||n[o]!==r)if(e=L_(r,n,t,e,i),s===null){let l=k6(n,t,i);l!==void 0&&Array.isArray(l)&&(l=L_(null,n,t,l[1],i),l=au(l,t.attrs,i),P6(n,t,i,l))}else s=N6(n,t,i)}return s!==void 0&&(i?t.residualClasses=s:t.residualStyles=s),e}function k6(n,t,e){let i=e?t.classBindings:t.styleBindings;if(al(i)!==0)return n[Eo(i)]}function P6(n,t,e,i){let r=e?t.classBindings:t.styleBindings;n[Eo(r)]=i}function N6(n,t,e){let i,r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++){let o=n[s].hostAttrs;i=au(i,o,e)}return au(i,t.attrs,e)}function L_(n,t,e,i,r){let s=null,o=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<o&&(s=t[a],i=au(i,s.hostAttrs,r),s!==n);)a++;return n!==null&&(e.directiveStylingLast=a),i}function au(n,t,e){let i=e?1:2,r=-1;if(t!==null)for(let s=0;s<t.length;s++){let o=t[s];typeof o=="number"?r=o:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),BA(n,o,e?!0:t[++s]))}return n===void 0?null:n}function O6(n,t,e){if(e==null||e==="")return zn;let i=[],r=dy(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else typeof r=="string"&&t(i,r);return i}function R6(n,t,e){let i=String(t);i!==""&&!i.includes(" ")&&BA(n,i,e)}function F6(n,t,e,i,r,s,o,a){r===cn&&(r=zn);let l=0,c=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let h=l<r.length?r[l+1]:void 0,p=c<s.length?s[c+1]:void 0,g=null,A;u===d?(l+=2,c+=2,h!==p&&(g=d,A=p)):d===null||u!==null&&u<d?(l+=2,g=u):(c+=2,g=d,A=p),g!==null&&QE(n,t,e,i,g,A,o,a),u=l<r.length?r[l]:null,d=c<s.length?s[c]:null}}function QE(n,t,e,i,r,s,o,a){if(!(t.type&3))return;let l=n.data,c=l[a+1],u=y6(c)?xC(l,t,e,r,al(c),o):void 0;if(!Hp(u)){Hp(s)||_6(c)&&(s=xC(l,null,e,r,a,o));let d=cx(dr(),e);BL(i,o,d,r,s)}}function xC(n,t,e,i,r,s){let o=t===null,a;for(;r>0;){let l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=e[r+1];h===cn&&(h=d?zn:void 0);let p=d?D_(h,i):u===i?h:void 0;if(c&&!Hp(p)&&(p=D_(l,i)),Hp(p)&&(a=p,o))return a;let g=n[r+1];r=o?Eo(g):al(g)}if(t!==null){let l=s?t.residualClasses:t.residualStyles;l!=null&&(a=D_(l,i))}return a}function Hp(n){return n!==void 0}function L6(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=Hn(dy(n)))),n}function JE(n,t){return(n.flags&(t?8:16))!==0}function Ny(n,t){mu("NgControlFlow");let e=Xe(),i=ul(),r=e[i]!==cn?e[i]:-1,s=r!==-1?EC(e,On+r):void 0,o=0;if(oi(e,i,n)){let a=lt(null);try{if(s!==void 0&&eV(s,o),n!==-1){let l=On+n,c=EC(e,l),u=V6(e[nt],l),d=Wp(c,u.tView.ssrId),h=vy(e,u,t,{dehydratedView:d});Dy(c,h,o,Bp(u,d))}}finally{lt(a)}}else if(s!==void 0){let a=JL(s,o);a!==void 0&&(a[Nn]=t)}}function EC(n,t){return n[t]}function V6(n,t){return UA(n,t)}function m(n,t,e,i){let r=Xe(),s=Xt(),o=On+n,a=r[Vt],l=s.firstCreatePass?IE(o,s,r,t,_y,GA(),e,i):s.data[o],c=B6(s,r,l,a,t,n);r[o]=c;let u=Qp(l);return Do(l,!0),lE(a,c,l),!by(l)&&ef()&&cf(s,r,c,l),(kF()===0||u)&&pl(c,r),PF(),u&&(af(s,r,l),uy(s,l,r)),i!==null&&my(r,l),m}function _(){let n=Kn();KA()?$A():(n=n.parent,Do(n,!1));let t=n;OF(t)&&RF(),NF();let e=Xt();return e.firstCreatePass&&kE(e,t),t.classesWithoutHost!=null&&KF(t)&&MA(e,t,Xe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&$F(t)&&MA(e,t,Xe(),t.stylesWithoutHost,!1),_}function Ze(n,t,e,i){return m(n,t,e,i),_(),Ze}var B6=(n,t,e,i,r,s)=>(tf(!0),oE(i,r,HF()));function q6(n,t,e,i,r){let s=t.consts,o=nl(s,i),a=_u(t,n,8,"ng-container",o);o!==null&&gA(a,o,!0);let l=nl(s,r);return GA()&&My(t,e,a,l,_y),a.mergedAttrs=il(a.mergedAttrs,a.attrs),t.queries!==null&&t.queries.elementStart(t,a),a}function gf(n,t,e){let i=Xe(),r=Xt(),s=n+On,o=r.firstCreatePass?q6(s,r,i,t,e):r.data[s];Do(o,!0);let a=j6(r,i,o,n);return i[s]=a,ef()&&cf(r,i,a,o),pl(a,i),Qp(o)&&(af(r,i,o),uy(r,o,i)),e!=null&&my(i,o),gf}function mf(){let n=Kn(),t=Xt();return KA()?$A():(n=n.parent,Do(n,!1)),t.firstCreatePass&&(ey(t,n),WA(n)&&t.queries.elementEnd(n)),mf}var j6=(n,t,e,i)=>(tf(!0),oL(t[Vt],""));function fe(){return Xe()}function Oy(n,t,e){let i=Xe(),r=ul();if(oi(i,r,t)){let s=Xt(),o=gu();lf(s,o,i,n,t,i[Vt],e,!0)}return Oy}var Yp="en-US";var W6=Yp;function U6(n){typeof n=="string"&&(W6=n.toLowerCase().replace(/_/g,"-"))}function DC(n,t,e){return function i(r){if(r===Function)return e;let s=cl(n)?or(n.index,t):t;Ey(s,5);let o=t[Nn],a=MC(t,o,e,r),l=i.__ngNextListenerFn__;for(;l;)a=MC(t,o,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function MC(n,t,e,i){let r=lt(null);try{return St(6,t,e),e(i)!==!1}catch(s){return z6(n,s),!1}finally{St(7,t,e),lt(r)}}function z6(n,t){let e=n[el],i=e?e.get(ar,null):null;i&&i.handleError(t)}function TC(n,t,e,i,r,s){let o=t[e],a=t[nt],c=a.data[e].outputs[i],u=o[c],d=a.firstCreatePass?YA(a):null,h=HA(t),p=u.subscribe(s),g=h.length;h.push(s,p),d&&d.push(r,n.index,g,-(g+1))}var H6=(n,t,e)=>{};function j(n,t,e,i){let r=Xe(),s=Xt(),o=Kn();return eD(s,r,r[Vt],o,n,t,i),j}function Y6(n,t,e,i){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===e&&r[s+1]===i){let a=t[Mp],l=r[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function eD(n,t,e,i,r,s,o){let a=Qp(i),c=n.firstCreatePass?YA(n):null,u=HA(t),d=!0;if(i.type&3||o){let h=ur(i,t),p=o?o(h):h,g=u.length,A=o?b=>o(sr(b[i.index])):i.index,y=null;if(!o&&a&&(y=Y6(n,t,r,i.index)),y!==null){let b=y.__ngLastListenerFn__||y;b.__ngNextListenerFn__=s,y.__ngLastListenerFn__=s,d=!1}else{s=DC(i,t,s),H6(p,r,s);let b=e.listen(p,r,s);u.push(s,b),c&&c.push(r,A,g,g+1)}}else s=DC(i,t,s);if(d){let h=i.outputs?.[r],p=i.hostDirectiveOutputs?.[r];if(p&&p.length)for(let g=0;g<p.length;g+=2){let A=p[g],y=p[g+1];TC(i,t,A,y,r,s)}if(h&&h.length)for(let g of h)TC(i,t,g,r,r,s)}}function F(n=1){return zF(n)}function G6(n,t){let e=null,i=Z4(n);for(let r=0;r<t.length;r++){let s=t[r];if(s==="*"){e=r;continue}if(i===null?sE(n,s,!0):eL(i,s))return r}return e}function Ry(n){let t=Xe()[Ai][Gn];if(!t.projection){let e=n?n.length:1,i=t.projection=rF(e,null),r=i.slice(),s=t.child;for(;s!==null;){if(s.type!==128){let o=n?G6(s,n):0;o!==null&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s)}s=s.next}}}function Fy(n,t=0,e,i,r,s){let o=Xe(),a=Xt(),l=i?n+1:null;l!==null&&jE(o,a,l,i,r,s,null,e);let c=_u(a,On+n,16,null,e||null);c.projection===null&&(c.projection=t),$A();let d=!o[tu]||px();o[Ai][Gn].projection[c.projection]===null&&l!==null?K6(o,a,l):d&&!by(c)&&LL(a,o,c)}function K6(n,t,e){let i=On+e,r=t.data[i],s=n[i],o=Wp(s,r.tView.ssrId),a=vy(n,r,void 0,{dehydratedView:o});Dy(s,a,0,Bp(r,o))}function Gt(n,t,e){return Fn(n,"",t,"",e),Gt}function Fn(n,t,e,i,r){let s=Xe(),o=GE(s,t,e,i);if(o!==cn){let a=Xt(),l=gu();lf(a,l,s,n,o,s[Vt],r,!1)}return Fn}function Ly(n,t,e){WV(n,t,e)}function Vy(n){let t=Xe(),e=Xt(),i=mx();ZA(i+1);let r=Ty(e,i);if(n.dirty&&EF(t)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let s=HV(t,i);n.reset(s,A4),n.notifyOnChanges()}return!0}return!1}function By(){return qV(Xe(),mx())}function $n(n){let t=LF();return xF(t,On+n)}function w(n,t=""){let e=Xe(),i=Xt(),r=n+On,s=i.firstCreatePass?_u(i,r,1,t,null):i.data[r],o=$6(i,e,s,t,n);e[r]=o,ef()&&cf(i,e,o,s),Do(s,!1)}var $6=(n,t,e,i,r)=>(tf(!0),rL(t[Vt],i));function Q(n){return J("",n,""),Q}function J(n,t,e){let i=Xe(),r=GE(i,n,t,e);return r!==cn&&_f(i,dr(),r),J}function ci(n,t,e,i,r){let s=Xe(),o=f6(s,n,t,e,i,r);return o!==cn&&_f(s,dr(),o),ci}function yu(n,t,e,i,r,s,o){let a=Xe(),l=g6(a,n,t,e,i,r,s,o);return l!==cn&&_f(a,dr(),l),yu}function qy(n,t,e,i,r,s,o,a,l){let c=Xe(),u=m6(c,n,t,e,i,r,s,o,a,l);return u!==cn&&_f(c,dr(),u),qy}function _f(n,t,e){let i=cx(t,n);sL(n[Vt],i,e)}function W(n,t,e){qx(t)&&(t=t());let i=Xe(),r=ul();if(oi(i,r,t)){let s=Xt(),o=gu();lf(s,o,i,n,t,i[Vt],e,!1)}return W}function z(n,t){let e=qx(n);return e&&n.set(t),e}function U(n,t){let e=Xe(),i=Xt(),r=Kn();return eD(i,e,e[Vt],r,n,t),U}function X6(n,t,e){let i=Xt();if(i.firstCreatePass){let r=rr(n);TA(e,i.data,i.blueprint,r,!0),TA(t,i.data,i.blueprint,r,!1)}}function TA(n,t,e,i,r){if(n=kn(n),Array.isArray(n))for(let s=0;s<n.length;s++)TA(n[s],t,e,i,r);else{let s=Xt(),o=Xe(),a=Kn(),l=Ja(n)?n:kn(n.provide),c=ex(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Ja(n)||!n.multi){let p=new xo(c,r,ve),g=B_(l,t,r?u:u+h,d);g===-1?(J_(Op(a,o),s,l),V_(s,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(p),o.push(p)):(e[g]=p,o[g]=p)}else{let p=B_(l,t,u+h,d),g=B_(l,t,u,u+h),A=p>=0&&e[p],y=g>=0&&e[g];if(r&&!y||!r&&!A){J_(Op(a,o),s,l);let b=J6(r?Q6:Z6,e.length,r,i,c);!r&&y&&(e[g].providerFactory=b),V_(s,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(b),o.push(b)}else{let b=tD(e[r?g:p],c,!r&&i);V_(s,n,p>-1?p:g,b)}!r&&i&&y&&e[g].componentProviders++}}}function V_(n,t,e,i){let r=Ja(t),s=pF(t);if(r||s){let l=(s?kn(t.useClass):t).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){let u=c.indexOf(e);u===-1?c.push(e,[i,l]):c[u+1].push(i,l)}else c.push(e,l)}}}function tD(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function B_(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function Z6(n,t,e,i){return IA(this.multi,[])}function Q6(n,t,e,i){let r=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=iu(e,e[nt],this.providerFactory.index,i);s=a.slice(0,o),IA(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],IA(r,s);return s}function IA(n,t){for(let e=0;e<n.length;e++){let i=n[e];t.push(i())}return t}function J6(n,t,e,i,r){let s=new xo(n,e,ve);return s.multi=[],s.index=t,s.componentProviders=0,tD(s,r,i&&!e),s}function hr(n,t=[]){return e=>{e.providersResolver=(i,r)=>X6(i,r?r(n):n,t)}}function ml(n,t,e){let i=pu()+n,r=Xe();return r[i]===cn?Au(r,i,e?t.call(e):t()):VE(r,i)}function Zt(n,t,e,i){return e8(Xe(),pu(),n,t,e,i)}function Re(n,t,e,i,r){return t8(Xe(),pu(),n,t,e,i,r)}function sn(n,t,e,i,r,s){return n8(Xe(),pu(),n,t,e,i,r,s)}function nD(n,t,e,i,r,s,o,a){let l=pu()+n,c=Xe(),u=qE(c,l,e,i,r,s);return oi(c,l+4,o)||u?Au(c,l+5,a?t.call(a,e,i,r,s,o):t(e,i,r,s,o)):VE(c,l+5)}function jy(n,t){let e=n[t];return e===cn?void 0:e}function e8(n,t,e,i,r,s){let o=t+e;return oi(n,o,r)?Au(n,o+1,s?i.call(s,r):i(r)):jy(n,o+1)}function t8(n,t,e,i,r,s,o){let a=t+e;return ou(n,a,r,s)?Au(n,a+2,o?i.call(o,r,s):i(r,s)):jy(n,a+2)}function n8(n,t,e,i,r,s,o,a){let l=t+e;return BE(n,l,r,s,o)?Au(n,l+3,a?i.call(a,r,s,o):i(r,s,o)):jy(n,l+3)}function Af(n,t){return df(n,t)}var kA=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},iD=(()=>{class n{compileModuleSync(e){return new CA(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=XC(e),s=iE(r.declarations).reduce((o,a)=>{let l=Qa(a);return l&&o.push(new su(l)),o},[]);return new kA(i,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var i8=(()=>{class n{zone=se(Mt);changeDetectionScheduler=se(rl);applicationRef=se(Wr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),r8=new Se("",{factory:()=>!1});function rD({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new Mt(Ne(re({},oD()),{scheduleInRootZone:e})),[{provide:Mt,useFactory:n},{provide:Jc,multi:!0,useFactory:()=>{let i=se(i8,{optional:!0});return()=>i.initialize()}},{provide:Jc,multi:!0,useFactory:()=>{let i=se(s8);return()=>{i.initialize()}}},t===!0?{provide:Rx,useValue:!0}:[],{provide:Fx,useValue:e??Ox}]}function sD(n){let t=n?.ignoreChangesOutsideZone,e=n?.scheduleInRootZone,i=rD({ngZoneFactory:()=>{let r=oD(n);return r.scheduleInRootZone=e,r.shouldCoalesceEventChangeDetection&&mu("NgZone_CoalesceEvent"),new Mt(r)},ignoreChangesOutsideZone:t,scheduleInRootZone:e});return uu([{provide:r8,useValue:!0},{provide:ny,useValue:!1},i])}function oD(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var s8=(()=>{class n{subscription=new Yt;initialized=!1;zone=se(Mt);pendingTasks=se(vs);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Mt.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Mt.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var o8=(()=>{class n{appRef=se(Wr);taskService=se(vs);ngZone=se(Mt);zonelessEnabled=se(ny);tracing=se(fl,{optional:!0});disableScheduling=se(Rx,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Yt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Fp):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(se(Fx,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof rA||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let i=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?uC:Lx;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Fp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(e),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,uC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function a8(){return typeof $localize<"u"&&$localize.locale||Yp}var yf=new Se("",{providedIn:"root",factory:()=>se(yf,rt.Optional|rt.SkipSelf)||a8()});var PA=new Se(""),l8=new Se("");function $c(n){return!n.moduleRef}function c8(n){let t=$c(n)?n.r3Injector:n.moduleRef.injector,e=t.get(Mt);return e.run(()=>{$c(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=t.get(ar,null),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:s=>{i.handleError(s)}})}),$c(n)){let s=()=>t.destroy(),o=n.platformInjector.get(PA);o.add(s),t.onDestroy(()=>{r.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(PA);o.add(s),n.moduleRef.onDestroy(()=>{wp(n.allPlatformModules,n.moduleRef),r.unsubscribe(),o.delete(s)})}return d8(i,e,()=>{let s=t.get(YE);return s.runInitializers(),s.donePromise.then(()=>{let o=t.get(yf,Yp);if(U6(o||Yp),!t.get(l8,!0))return $c(n)?t.get(Wr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if($c(n)){let l=t.get(Wr);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return u8(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function u8(n,t){let e=n.injector.get(Wr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>e.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new Ee(-403,!1);t.push(n)}function d8(n,t,e){try{let i=e();return Mo(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}var bp=null;function h8(n=[],t){return Rn.create({name:t,providers:[{provide:Xp,useValue:"platform"},{provide:PA,useValue:new Set([()=>bp=null])},...n]})}function p8(n=[]){if(bp)return bp;let t=h8(n);return bp=t,u6(),f8(t),t}function f8(n){let t=n.get(oy,null);ai(n,()=>{t?.forEach(e=>e())})}var Ss=(()=>{class n{static __NG_ELEMENT_ID__=g8}return n})();function g8(n){return m8(Kn(),Xe(),(n&16)===16)}function m8(n,t,e){if(cl(n)&&!e){let i=or(n.index,t);return new ru(i,i)}else if(n.type&175){let i=t[Ai];return new ru(i,t)}return null}var NA=class{constructor(){}supports(t){return LE(t)}create(t){return new OA(t)}},_8=(n,t)=>t,OA=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||_8}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,s=null;for(;e||i;){let o=!i||e&&e.currentIndex<IC(i,r,s)?e:i,a=IC(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(e=e._next,o.previousIndex==null)r++;else{s||(s=[]);let c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){let p=h<s.length?s[h]:s[h]=0,g=p+h;u<=g&&g<c&&(s[h]=p+1)}let d=o.previousIndex;s[d]=u-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!LE(t))throw new Ee(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,i=!1,r,s,o;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),e===null||!Object.is(e.trackById,o)?(e=this._mismatch(e,s,o,a),i=!0):(i&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)),e=e._next}else r=0,r6(t,a=>{o=this._trackByFn(r,a),e===null||!Object.is(e.trackById,o)?(e=this._mismatch(e,a,o,r),i=!0):(i&&(e=this._verifyReinsertion(e,a,o,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let s;return t===null?s=this._itTail:(s=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new RA(e,i),s,r)),t}_verifyReinsertion(t,e,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,s=t._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){let r=e===null?this._itHead:e._next;return t._next=r,t._prev=e,r===null?this._itTail=t:r._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new Gp),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,i=t._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Gp),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},RA=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},FA=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let e=t._prevDup,i=t._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},Gp=class{map=new Map;put(t){let e=t.trackById,i=this.map.get(e);i||(i=new FA,this.map.set(e,i)),i.add(t)}get(t,e){let i=t,r=this.map.get(i);return r?r.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function IC(n,t,e){let i=n.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}function kC(){return new Wy([new NA])}var Wy=(()=>{class n{factories;static \u0275prov=he({token:n,providedIn:"root",factory:kC});constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||kC()),deps:[[n,new tF,new eF]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new Ee(901,!1)}}return n})();function aD(n){St(8);try{let{rootComponent:t,appProviders:e,platformProviders:i}=n,r=p8(i),s=[rD({}),{provide:rl,useExisting:o8},...e||[]],o=new zp({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1});return c8({r3Injector:o.injector,platformInjector:r,rootComponent:t})}catch(t){return Promise.reject(t)}finally{St(9)}}function Uy(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Cs(n){return l_(n)}function vf(n,t){return r_(n,t?.equal)}var PC=class{[gi];constructor(t){this[gi]=t}destroy(){this[gi].destroy()}};var Kt=new Se("");var uD=null;function vi(){return uD}function zy(n){uD??=n}var vu=class{},Hy=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>se(dD),providedIn:"platform"})}return n})();var dD=(()=>{class n extends Hy{_location;_history;_doc=se(Kt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return vi().getBaseHref(this._doc)}onPopState(e){let i=vi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=vi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function hD(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function lD(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function xs(n){return n&&n[0]!=="?"?`?${n}`:n}var wf=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>se(fD),providedIn:"root"})}return n})(),pD=new Se(""),fD=(()=>{class n extends wf{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??se(Kt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return hD(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+xs(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){let o=this.prepareExternalUrl(r+xs(s));this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,s){let o=this.prepareExternalUrl(r+xs(s));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)(oe(Hy),oe(pD,8))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_l=(()=>{class n{_subject=new ct;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=v8(lD(cD(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+xs(i))}normalize(e){return n.stripTrailingSlash(y8(this._basePath,cD(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+xs(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+xs(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=xs;static joinWithSlash=hD;static stripTrailingSlash=lD;static \u0275fac=function(i){return new(i||n)(oe(wf))};static \u0275prov=he({token:n,factory:()=>A8(),providedIn:"root"})}return n})();function A8(){return new _l(oe(wf))}function y8(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function cD(n){return n.replace(/\/index.html$/,"")}function v8(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var Yy=/\s+/,gD=[],To=(()=>{class n{_ngEl;_renderer;initialClasses=gD;rawClass;stateMap=new Map;constructor(e,i){this._ngEl=e,this._renderer=i}set klass(e){this.initialClasses=e!=null?e.trim().split(Yy):gD}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(Yy):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(Yy).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(ve(An),ve(bs))};static \u0275dir=Tt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var bf=class{$implicit;ngForOf;index;count;constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Es=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((r,s,o)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new bf(r.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)i.remove(s===null?void 0:s);else if(s!==null){let a=i.get(s);i.move(a,o),mD(a,r)}});for(let r=0,s=i.length;r<s;r++){let a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let s=i.get(r.currentIndex);mD(s,r)})}static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(ve(Bi),ve(cr),ve(Wy))};static \u0275dir=Tt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function mD(n,t){n.context.$implicit=t.item}var Io=(()=>{class n{_viewContainer;_context=new Sf;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,i){this._viewContainer=e,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){_D(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){_D(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(ve(Bi),ve(cr))};static \u0275dir=Tt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Sf=class{$implicit=null;ngIf=null};function _D(n,t){if(n&&!n.createEmbeddedView)throw new Ee(2020,!1)}var Gy=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(e){this._viewContainerRef=e}ngOnChanges(e){if(this._shouldRecreateView(e)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(e,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static \u0275fac=function(i){return new(i||n)(ve(Bi))};static \u0275dir=Tt({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[Li]})}return n})();var Ds=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ji({type:n});static \u0275inj=Fi({})}return n})();function wu(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[r,s]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}var Ky="browser",AD="server";function Cf(n){return n===AD}var ko=class{};var Df=new Se(""),Jy=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r,s){return this._findPluginFor(i).addEventListener(e,i,r,s)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(s=>s.supports(e)),!i)throw new Ee(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||n)(oe(Df),oe(Mt))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),bu=class{_doc;constructor(t){this._doc=t}manager},xf="ng-app-id";function yD(n){for(let t of n)t.remove()}function vD(n,t){let e=t.createElement("style");return e.textContent=n,e}function C8(n,t,e,i){let r=n.head?.querySelectorAll(`style[${xf}="${t}"],link[${xf}="${t}"]`);if(r)for(let s of r)s.removeAttribute(xf),s instanceof HTMLLinkElement?i.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&e.set(s.textContent,{usage:0,elements:[s]})}function Zy(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var e1=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,i,r,s={}){this.doc=e,this.appId=i,this.nonce=r,this.isServer=Cf(s),C8(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let r of e)this.addUsage(r,this.inline,vD);i?.forEach(r=>this.addUsage(r,this.external,Zy))}removeStyles(e,i){for(let r of e)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,i,r){let s=i.get(e);s?s.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,r(e,this.doc)))})}removeUsage(e,i){let r=i.get(e);r&&(r.usage--,r.usage<=0&&(yD(r.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])yD(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(e,vD(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(e,Zy(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(xf,this.appId),e.appendChild(i)}static \u0275fac=function(i){return new(i||n)(oe(Kt),oe(sy),oe(ay,8),oe(ws))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),Xy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},t1=/%COMP%/g;var bD="%COMP%",x8=`_nghost-${bD}`,E8=`_ngcontent-${bD}`,D8=!0,M8=new Se("",{providedIn:"root",factory:()=>D8});function T8(n){return E8.replace(t1,n)}function I8(n){return x8.replace(t1,n)}function SD(n,t){return t.map(e=>e.replace(t1,n))}var n1=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,r,s,o,a,l,c=null,u=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=Cf(a),this.defaultRenderer=new Su(e,o,l,this.platformIsServer,this.tracingService)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===lr.ShadowDom&&(i=Ne(re({},i),{encapsulation:lr.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof Ef?r.applyToHost(e):r instanceof Cu&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(i.encapsulation){case lr.Emulated:s=new Ef(l,c,i,this.appId,u,o,a,d,h);break;case lr.ShadowDom:return new Qy(l,c,e,i,o,a,this.nonce,d,h);default:s=new Cu(l,c,i,u,o,a,d,h);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(i){return new(i||n)(oe(Jy),oe(e1),oe(sy),oe(M8),oe(Kt),oe(ws),oe(Mt),oe(ay),oe(fl,8))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),Su=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,i,r,s){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.tracingService=s}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(Xy[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(wD(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(wD(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new Ee(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let s=Xy[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=Xy[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(jr.DashCase|jr.Important)?t.style.setProperty(e,i,r&jr.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&jr.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i,r){if(typeof t=="string"&&(t=vi().getGlobalEventTarget(this.doc,t),!t))throw new Ee(5102,!1);let s=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(t,e,s)),this.eventManager.addEventListener(t,e,s,r)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function wD(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Qy=class extends Su{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,i,r,s,o,a,l,c){super(t,s,o,l,c),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=SD(r.id,u);for(let h of u){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}let d=r.getExternalStyles?.();if(d)for(let h of d){let p=Zy(h,s);a&&p.setAttribute("nonce",a),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Cu=class extends Su{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,i,r,s,o,a,l,c){super(t,s,o,a,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r;let u=i.styles;this.styles=c?SD(c,u):u,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ef=class extends Cu{contentAttr;hostAttr;constructor(t,e,i,r,s,o,a,l,c){let u=r+"-"+i.id;super(t,e,i,s,o,a,l,c,u),this.contentAttr=T8(u),this.hostAttr=I8(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}};var i1=class extends vu{supportsDOMEvents=!0},Mf=class n extends i1{static makeCurrent(){zy(new n)}onAndCancel(t,e,i,r){return t.addEventListener(e,i,r),()=>{t.removeEventListener(e,i,r)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=k8();return e==null?null:P8(e)}resetBaseElement(){xu=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return wu(document.cookie,t)}},xu=null;function k8(){return xu=xu||document.querySelector("base"),xu?xu.getAttribute("href"):null}function P8(n){return new URL(n,document.baseURI).pathname}var N8=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),xD=(()=>{class n extends bu{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r,s){return e.addEventListener(i,r,s),()=>this.removeEventListener(e,i,r,s)}removeEventListener(e,i,r,s){return e.removeEventListener(i,r,s)}static \u0275fac=function(i){return new(i||n)(oe(Kt))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),CD=["alt","control","meta","shift"],O8={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},R8={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},ED=(()=>{class n extends bu{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r,s){let o=n.parseEventName(i),a=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vi().onAndCancel(e,o.domEventName,a,s))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),CD.forEach(c=>{let u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(e,i){let r=O8[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),CD.forEach(o=>{if(o!==r){let a=R8[o];a(e)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||n)(oe(Kt))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})();function r1(n,t){return aD(re({rootComponent:n},F8(t)))}function F8(n){return{appProviders:[...j8,...n?.providers??[]],platformProviders:q8}}function L8(){Mf.makeCurrent()}function V8(){return new ar}function B8(){return Gx(document),document}var q8=[{provide:ws,useValue:Ky},{provide:oy,useValue:L8,multi:!0},{provide:Kt,useFactory:B8}];var j8=[{provide:Xp,useValue:"root"},{provide:ar,useFactory:V8},{provide:Df,useClass:xD,multi:!0,deps:[Kt]},{provide:Df,useClass:ED,multi:!0,deps:[Kt]},n1,e1,Jy,{provide:sl,useExisting:n1},{provide:ko,useClass:N8},[]];var yl=class{},Eu=class{},Fe=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),s=e.slice(i+1).trim();this.addHeaderEntry(r,s)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.addHeaderEntry(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let s=t.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let o=this.headers.get(e);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}break}}addHeaderEntry(t,e){let i=t.toLowerCase();this.maybeSetNormalizedName(t,i),this.headers.has(i)?this.headers.get(i).push(e):this.headers.set(i,[e])}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(s=>s.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var If=class{encodeKey(t){return DD(t)}encodeValue(t){return DD(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function W8(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,a]=s==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}var U8=/%(\d[a-f0-9])/gi,z8={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function DD(n){return encodeURIComponent(n).replace(U8,(t,e)=>z8[e]??t)}function Tf(n){return`${n}`}var wi=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new If,t.fromString){if(t.fromObject)throw new Ee(2805,!1);this.map=W8(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(Tf):[Tf(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(Tf(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(Tf(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var kf=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function H8(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function MD(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function TD(n){return typeof Blob<"u"&&n instanceof Blob}function ID(n){return typeof FormData<"u"&&n instanceof FormData}function Y8(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var kD="Content-Type",PD="Accept",ND="X-Request-URL",OD="text/plain",RD="application/json",G8=`${RD}, ${OD}, */*`,Al=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,e,i,r){this.url=e,this.method=t.toUpperCase();let s;if(H8(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Fe,this.context??=new kf,!this.params)this.params=new wi,this.urlWithParams=e;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||MD(this.body)||TD(this.body)||ID(this.body)||Y8(this.body)?this.body:this.body instanceof wi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||ID(this.body)?null:TD(this.body)?this.body.type||null:MD(this.body)?null:typeof this.body=="string"?OD:this.body instanceof wi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?RD:null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=t.transferCache??this.transferCache,o=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,c=t.headers||this.headers,u=t.params||this.params,d=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((h,p)=>h.set(p,t.setHeaders[p]),c)),t.setParams&&(u=Object.keys(t.setParams).reduce((h,p)=>h.set(p,t.setParams[p]),u)),new n(e,i,o,{params:u,headers:c,context:d,reportProgress:l,responseType:r,withCredentials:a,transferCache:s})}},Po=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Po||{}),vl=class{headers;status;statusText;url;ok;type;constructor(t,e=200,i="OK"){this.headers=t.headers||new Fe,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},Pf=class n extends vl{constructor(t={}){super(t)}type=Po.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Du=class n extends vl{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Po.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Mu=class extends vl{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},K8=200,$8=204;function s1(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var It=(()=>{class n{handler;constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof Al)s=e;else{let l;r.headers instanceof Fe?l=r.headers:l=new Fe(r.headers);let c;r.params&&(r.params instanceof wi?c=r.params:c=new wi({fromObject:r.params})),s=new Al(e,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let o=Ie(s).pipe(gs(l=>this.handler.handle(l)));if(e instanceof Al||r.observe==="events")return o;let a=o.pipe(_n(l=>l instanceof Du));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(We(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Ee(2806,!1);return l.body}));case"blob":return a.pipe(We(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Ee(2807,!1);return l.body}));case"text":return a.pipe(We(l=>{if(l.body!==null&&typeof l.body!="string")throw new Ee(2808,!1);return l.body}));case"json":default:return a.pipe(We(l=>l.body))}case"response":return a;default:throw new Ee(2809,!1)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new wi().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,s1(r,i))}post(e,i,r={}){return this.request("POST",e,s1(r,i))}put(e,i,r={}){return this.request("PUT",e,s1(r,i))}static \u0275fac=function(i){return new(i||n)(oe(yl))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})();var X8=new Se("");function Z8(n,t){return t(n)}function Q8(n,t,e){return(i,r)=>ai(e,()=>t(i,s=>n(s,r)))}var FD=new Se(""),LD=new Se(""),VD=new Se("",{providedIn:"root",factory:()=>!0});var Nf=(()=>{class n extends yl{backend;injector;chain=null;pendingTasks=se(vs);contributeToStability=se(VD);constructor(e,i){super(),this.backend=e,this.injector=i}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(FD),...this.injector.get(LD,[])]));this.chain=i.reduceRight((r,s)=>Q8(r,s,this.injector),Z8)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(_s(()=>this.pendingTasks.remove(i)))}else return this.chain(e,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(oe(Eu),oe(Pn))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})();var J8=/^\)\]\}',?\n/,eB=RegExp(`^${ND}:`,"m");function tB(n){return"responseURL"in n&&n.responseURL?n.responseURL:eB.test(n.getAllResponseHeaders())?n.getResponseHeader(ND):null}var o1=(()=>{class n{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new Ee(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Lt(i.\u0275loadImpl()):Ie(null)).pipe(Un(()=>new Je(s=>{let o=i.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((A,y)=>o.setRequestHeader(A,y.join(","))),e.headers.has(PD)||o.setRequestHeader(PD,G8),!e.headers.has(kD)){let A=e.detectContentTypeHeader();A!==null&&o.setRequestHeader(kD,A)}if(e.responseType){let A=e.responseType.toLowerCase();o.responseType=A!=="json"?A:"text"}let a=e.serializeBody(),l=null,c=()=>{if(l!==null)return l;let A=o.statusText||"OK",y=new Fe(o.getAllResponseHeaders()),b=tB(o)||e.url;return l=new Pf({headers:y,status:o.status,statusText:A,url:b}),l},u=()=>{let{headers:A,status:y,statusText:b,url:x}=c(),P=null;y!==$8&&(P=typeof o.response>"u"?o.responseText:o.response),y===0&&(y=P?K8:0);let T=y>=200&&y<300;if(e.responseType==="json"&&typeof P=="string"){let k=P;P=P.replace(J8,"");try{P=P!==""?JSON.parse(P):null}catch(C){P=k,T&&(T=!1,P={error:C,text:P})}}T?(s.next(new Du({body:P,headers:A,status:y,statusText:b,url:x||void 0})),s.complete()):s.error(new Mu({error:P,headers:A,status:y,statusText:b,url:x||void 0}))},d=A=>{let{url:y}=c(),b=new Mu({error:A,status:o.status||0,statusText:o.statusText||"Unknown Error",url:y||void 0});s.error(b)},h=!1,p=A=>{h||(s.next(c()),h=!0);let y={type:Po.DownloadProgress,loaded:A.loaded};A.lengthComputable&&(y.total=A.total),e.responseType==="text"&&o.responseText&&(y.partialText=o.responseText),s.next(y)},g=A=>{let y={type:Po.UploadProgress,loaded:A.loaded};A.lengthComputable&&(y.total=A.total),s.next(y)};return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),e.reportProgress&&(o.addEventListener("progress",p),a!==null&&o.upload&&o.upload.addEventListener("progress",g)),o.send(a),s.next({type:Po.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",d),e.reportProgress&&(o.removeEventListener("progress",p),a!==null&&o.upload&&o.upload.removeEventListener("progress",g)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(i){return new(i||n)(oe(ko))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),BD=new Se(""),nB="XSRF-TOKEN",iB=new Se("",{providedIn:"root",factory:()=>nB}),rB="X-XSRF-TOKEN",sB=new Se("",{providedIn:"root",factory:()=>rB}),Tu=class{},oB=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=wu(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(i){return new(i||n)(oe(Kt),oe(ws),oe(iB))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})();function aB(n,t){let e=n.url.toLowerCase();if(!se(BD)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let i=se(Tu).getToken(),r=se(sB);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}function a1(...n){let t=[It,o1,Nf,{provide:yl,useExisting:Nf},{provide:Eu,useFactory:()=>se(X8,{optional:!0})??se(o1)},{provide:FD,useValue:aB,multi:!0},{provide:BD,useValue:!0},{provide:Tu,useClass:oB}];for(let e of n)t.push(...e.\u0275providers);return uu(t)}var qD=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(i){return new(i||n)(oe(Kt))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Qe="primary",Uu=Symbol("RouteTitle"),h1=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Ro(n){return new h1(n)}function KD(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function cB(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!pr(n[e],t[e]))return!1;return!0}function pr(n,t){let e=n?p1(n):void 0,i=t?p1(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!$D(n[r],t[r]))return!1;return!0}function p1(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function $D(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}else return n===t}function XD(n){return n.length>0?n[n.length-1]:null}function Ts(n){return v_(n)?n:Mo(n)?Lt(Promise.resolve(n)):Ie(n)}var uB={exact:QD,subset:JD},ZD={exact:dB,subset:hB,ignored:()=>!0};function jD(n,t,e){return uB[e.paths](n.root,t.root,e.matrixParams)&&ZD[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function dB(n,t){return pr(n,t)}function QD(n,t,e){if(!No(n.segments,t.segments)||!Ff(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!QD(n.children[i],t.children[i],e))return!1;return!0}function hB(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>$D(n[e],t[e]))}function JD(n,t,e){return eM(n,t,t.segments,e)}function eM(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!No(r,e)||t.hasChildren()||!Ff(r,e,i))}else if(n.segments.length===e.length){if(!No(n.segments,e)||!Ff(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!JD(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!No(n.segments,r)||!Ff(n.segments,r,i)||!n.children[Qe]?!1:eM(n.children[Qe],t,s,i)}}function Ff(n,t,e){return t.every((i,r)=>ZD[e](n[r].parameters,i.parameters))}var gr=class{root;queryParams;fragment;_queryParamMap;constructor(t=new gt([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Ro(this.queryParams),this._queryParamMap}toString(){return gB.serialize(this)}},gt=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Lf(this)}},Ms=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Ro(this.parameters),this._parameterMap}toString(){return nM(this)}};function pB(n,t){return No(n,t)&&n.every((e,i)=>pr(e.parameters,t[i].parameters))}function No(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function fB(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===Qe&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Qe&&(e=e.concat(t(r,i)))}),e}var zu=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>new Fo,providedIn:"root"})}return n})(),Fo=class{parse(t){let e=new g1(t);return new gr(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Iu(t.root,!0)}`,i=AB(t.queryParams),r=typeof t.fragment=="string"?`#${mB(t.fragment)}`:"";return`${e}${i}${r}`}},gB=new Fo;function Lf(n){return n.segments.map(t=>nM(t)).join("/")}function Iu(n,t){if(!n.hasChildren())return Lf(n);if(t){let e=n.children[Qe]?Iu(n.children[Qe],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==Qe&&i.push(`${r}:${Iu(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=fB(n,(i,r)=>r===Qe?[Iu(n.children[Qe],!1)]:[`${r}:${Iu(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[Qe]!=null?`${Lf(n)}/${e[0]}`:`${Lf(n)}/(${e.join("//")})`}}function tM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Of(n){return tM(n).replace(/%3B/gi,";")}function mB(n){return encodeURI(n)}function f1(n){return tM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vf(n){return decodeURIComponent(n)}function WD(n){return Vf(n.replace(/\+/g,"%20"))}function nM(n){return`${f1(n.path)}${_B(n.parameters)}`}function _B(n){return Object.entries(n).map(([t,e])=>`;${f1(t)}=${f1(e)}`).join("")}function AB(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${Of(e)}=${Of(r)}`).join("&"):`${Of(e)}=${Of(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var yB=/^[^\/()?;#]+/;function l1(n){let t=n.match(yB);return t?t[0]:""}var vB=/^[^\/()?;=#]+/;function wB(n){let t=n.match(vB);return t?t[0]:""}var bB=/^[^=?&#]+/;function SB(n){let t=n.match(bB);return t?t[0]:""}var CB=/^[^&#]+/;function xB(n){let t=n.match(CB);return t?t[0]:""}var g1=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new gt([],{}):new gt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[Qe]=new gt(t,e)),i}parseSegment(){let t=l1(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Ee(4009,!1);return this.capture(t),new Ms(Vf(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=wB(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=l1(this.remaining);r&&(i=r,this.capture(i))}t[Vf(e)]=Vf(i)}parseQueryParam(t){let e=SB(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let o=xB(this.remaining);o&&(i=o,this.capture(i))}let r=WD(e),s=WD(i);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=l1(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Ee(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Qe);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[Qe]:new gt([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Ee(4011,!1)}};function iM(n){return n.segments.length>0?new gt([],{[Qe]:n}):n}function rM(n){let t={};for(let[i,r]of Object.entries(n.children)){let s=rM(r);if(i===Qe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}let e=new gt(n.segments,t);return EB(e)}function EB(n){if(n.numberOfChildren===1&&n.children[Qe]){let t=n.children[Qe];return new gt(n.segments.concat(t.segments),t.children)}return n}function xl(n){return n instanceof gr}function sM(n,t,e=null,i=null){let r=oM(n);return aM(r,t,e,i)}function oM(n){let t;function e(s){let o={};for(let l of s.children){let c=e(l);o[l.outlet]=c}let a=new gt(s.url,o);return s===n&&(t=a),a}let i=e(n.root),r=iM(i);return t??r}function aM(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return c1(r,r,r,e,i);let s=DB(t);if(s.toRoot())return c1(r,r,new gt([],{}),e,i);let o=MB(s,r,n),a=o.processChildren?Pu(o.segmentGroup,o.index,s.commands):cM(o.segmentGroup,o.index,s.commands);return c1(r,o.segmentGroup,a,e,i)}function qf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ou(n){return typeof n=="object"&&n!=null&&n.outlets}function c1(n,t,e,i,r){let s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;n===t?o=e:o=lM(n,t,e);let a=iM(rM(o));return new gr(a,s,r)}function lM(n,t,e){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===t?i[r]=e:i[r]=lM(s,t,e)}),new gt(n.segments,i)}var jf=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&qf(i[0]))throw new Ee(4003,!1);let r=i.find(Ou);if(r&&r!==XD(i))throw new Ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function DB(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new jf(!0,0,n);let t=0,e=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new jf(e,t,i)}var Sl=class{segmentGroup;processChildren;index;constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function MB(n,t,e){if(n.isAbsolute)return new Sl(t,!0,0);if(!e)return new Sl(t,!1,NaN);if(e.parent===null)return new Sl(e,!0,0);let i=qf(n.commands[0])?0:1,r=e.segments.length-1+i;return TB(e,r,n.numberOfDoubleDots)}function TB(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Ee(4005,!1);r=i.segments.length}return new Sl(i,!1,r-s)}function IB(n){return Ou(n[0])?n[0].outlets:{[Qe]:n}}function cM(n,t,e){if(n??=new gt([],{}),n.segments.length===0&&n.hasChildren())return Pu(n,t,e);let i=kB(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new gt(n.segments.slice(0,i.pathIndex),{});return s.children[Qe]=new gt(n.segments.slice(i.pathIndex),n.children),Pu(s,0,r)}else return i.match&&r.length===0?new gt(n.segments,{}):i.match&&!n.hasChildren()?m1(n,t,e):i.match?Pu(n,0,r):m1(n,t,e)}function Pu(n,t,e){if(e.length===0)return new gt(n.segments,{});{let i=IB(e),r={};if(Object.keys(i).some(s=>s!==Qe)&&n.children[Qe]&&n.numberOfChildren===1&&n.children[Qe].segments.length===0){let s=Pu(n.children[Qe],t,e);return new gt(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=cM(n.children[s],t,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new gt(n.segments,r)}}function kB(n,t,e){let i=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;let o=n.segments[r],a=e[i];if(Ou(a))break;let l=`${a}`,c=i<e.length-1?e[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!zD(l,c,o))return s;i+=2}else{if(!zD(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function m1(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(Ou(s)){let l=PB(s.outlets);return new gt(i,l)}if(r===0&&qf(e[0])){let l=n.segments[t];i.push(new Ms(l.path,UD(e[0]))),r++;continue}let o=Ou(s)?s.outlets[Qe]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&qf(a)?(i.push(new Ms(o,UD(a))),r+=2):(i.push(new Ms(o,{})),r++)}return new gt(i,{})}function PB(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=m1(new gt([],{}),0,i))}),t}function UD(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function zD(n,t,e){return n==e.path&&pr(t,e.parameters)}var Bf="imperative",un=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(un||{}),di=class{id;url;constructor(t,e){this.id=t,this.url=e}},Lo=class extends di{type=un.NavigationStart;navigationTrigger;restoredState;constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Hr=class extends di{urlAfterRedirects;type=un.NavigationEnd;constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Xn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Xn||{}),Ru=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ru||{}),fr=class extends di{reason;code;type=un.NavigationCancel;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Yr=class extends di{reason;code;type=un.NavigationSkipped;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}},El=class extends di{error;target;type=un.NavigationError;constructor(t,e,i,r){super(t,e),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Fu=class extends di{urlAfterRedirects;state;type=un.RoutesRecognized;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wf=class extends di{urlAfterRedirects;state;type=un.GuardsCheckStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uf=class extends di{urlAfterRedirects;state;shouldActivate;type=un.GuardsCheckEnd;constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},zf=class extends di{urlAfterRedirects;state;type=un.ResolveStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hf=class extends di{urlAfterRedirects;state;type=un.ResolveEnd;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yf=class{route;type=un.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Gf=class{route;type=un.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Kf=class{snapshot;type=un.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$f=class{snapshot;type=un.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xf=class{snapshot;type=un.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zf=class{snapshot;type=un.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Lu=class{},Dl=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function NB(n,t){return n.providers&&!n._injector&&(n._injector=pf(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Wi(n){return n.outlet||Qe}function OB(n,t){let e=n.filter(i=>Wi(i)===t);return e.push(...n.filter(i=>Wi(i)!==t)),e}function Hu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Qf=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Hu(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Il(this.rootInjector)}},Il=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Qf(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||n)(oe(Pn))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jf=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=_1(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=_1(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=A1(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return A1(t,this._root).map(e=>e.value)}};function _1(n,t){if(n===t.value)return t;for(let e of t.children){let i=_1(n,e);if(i)return i}return null}function A1(n,t){if(n===t.value)return[t];for(let e of t.children){let i=A1(n,e);if(i.length)return i.unshift(t),i}return[]}var ui=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function bl(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Vu=class extends Jf{snapshot;constructor(t,e){super(t),this.snapshot=e,E1(this,t)}toString(){return this.snapshot.toString()}};function uM(n){let t=RB(n),e=new Qt([new Ms("",{})]),i=new Qt({}),r=new Qt({}),s=new Qt({}),o=new Qt(""),a=new mr(e,i,s,o,r,Qe,n,t.root);return a.snapshot=t.root,new Vu(new ui(a,[]),t)}function RB(n){let t={},e={},i={},r="",s=new Oo([],t,i,r,e,Qe,n,null,{});return new Bu("",new ui(s,[]))}var mr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,i,r,s,o,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(We(c=>c[Uu]))??Ie(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(We(t=>Ro(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(We(t=>Ro(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function e0(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:re(re({},t.params),n.params),data:re(re({},t.data),n.data),resolve:re(re(re(re({},n.data),t.data),r?.data),n._resolvedData)}:i={params:re({},n.params),data:re({},n.data),resolve:re(re({},n.data),n._resolvedData??{})},r&&hM(r)&&(i.resolve[Uu]=r.title),i}var Oo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Uu]}constructor(t,e,i,r,s,o,a,l,c){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ro(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ro(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Bu=class extends Jf{url;constructor(t,e){super(e),this.url=t,E1(this,e)}toString(){return dM(this._root)}};function E1(n,t){t.value._routerState=n,t.children.forEach(e=>E1(n,e))}function dM(n){let t=n.children.length>0?` { ${n.children.map(dM).join(", ")} } `:"";return`${n.value}${t}`}function u1(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,pr(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),pr(t.params,e.params)||n.paramsSubject.next(e.params),cB(t.url,e.url)||n.urlSubject.next(e.url),pr(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function y1(n,t){let e=pr(n.params,t.params)&&pB(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||y1(n.parent,t.parent))}function hM(n){return typeof n.title=="string"||n.title===null}var pM=new Se(""),Yu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Qe;activateEvents=new Nt;deactivateEvents=new Nt;attachEvents=new Nt;detachEvents=new Nt;routerOutletData=Bx(void 0);parentContexts=se(Il);location=se(Bi);changeDetector=se(Ss);inputBinder=se(r0,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ee(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Ee(4013,!1);this._activatedRoute=e;let r=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new v1(e,a,r.injector,this.routerOutletData);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Tt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Li]})}return n})(),v1=class{route;childContexts;parent;outletData;constructor(t,e,i,r){this.route=t,this.childContexts=e,this.parent=i,this.outletData=r}get(t,e){return t===mr?this.route:t===Il?this.childContexts:t===pM?this.outletData:this.parent.get(t,e)}},r0=new Se("");function FB(n,t,e){let i=qu(n,t._root,e?e._root:void 0);return new Vu(i,t)}function qu(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=LB(n,t,e);return new ui(i,r)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>qu(n,a)),o}}let i=VB(t.value),r=t.children.map(s=>qu(n,s));return new ui(i,r)}}function LB(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return qu(n,i,r);return qu(n,i)})}function VB(n){return new mr(new Qt(n.url),new Qt(n.params),new Qt(n.queryParams),new Qt(n.fragment),new Qt(n.data),n.outlet,n.component,n)}var Ml=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},fM="ngNavigationCancelingError";function t0(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=xl(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=gM(!1,Xn.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function gM(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[fM]=!0,e.cancellationCode=t,e}function BB(n){return mM(n)&&xl(n.url)}function mM(n){return!!n&&n[fM]}var qB=(n,t,e,i)=>We(r=>(new w1(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),w1=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),u1(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=bl(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=bl(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=bl(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=bl(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Zf(s.value.snapshot))}),t.children.length&&this.forwardEvent(new $f(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(u1(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),u1(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,i)}},n0=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Cl=class{component;route;constructor(t,e){this.component=t,this.route=e}};function jB(n,t,e){let i=n._root,r=t?t._root:null;return ku(i,r,e,[i.value])}function WB(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function kl(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!BC(n)?n:t.get(n):i}function ku(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=bl(t);return n.children.forEach(o=>{UB(o,s[o.value.outlet],e,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Nu(a,e.getContext(o),r)),r}function UB(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=zB(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new n0(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ku(n,t,a?a.children:null,i,r):ku(n,t,e,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Cl(a.outlet.component,o))}else o&&Nu(t,a,r),r.canActivateChecks.push(new n0(i)),s.component?ku(n,null,a?a.children:null,i,r):ku(n,null,e,i,r);return r}function zB(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!No(n.url,t.url);case"pathParamsOrQueryParamsChange":return!No(n.url,t.url)||!pr(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!y1(n,t)||!pr(n.queryParams,t.queryParams);case"paramsChange":default:return!y1(n,t)}}function Nu(n,t,e){let i=bl(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?t?Nu(o,t.children.getContext(s),e):Nu(o,null,e):Nu(o,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Cl(t.outlet.component,r)):e.canDeactivateChecks.push(new Cl(null,r)):e.canDeactivateChecks.push(new Cl(null,r))}function Gu(n){return typeof n=="function"}function HB(n){return typeof n=="boolean"}function YB(n){return n&&Gu(n.canLoad)}function GB(n){return n&&Gu(n.canActivate)}function KB(n){return n&&Gu(n.canActivateChild)}function $B(n){return n&&Gu(n.canDeactivate)}function XB(n){return n&&Gu(n.canMatch)}function _M(n){return n instanceof Lr||n?.name==="EmptyError"}var Rf=Symbol("INITIAL_VALUE");function Tl(){return Un(n=>Gc(n.map(t=>t.pipe(ri(1),pp(Rf)))).pipe(We(t=>{for(let e of t)if(e!==!0){if(e===Rf)return Rf;if(e===!1||ZB(e))return e}return!0}),_n(t=>t!==Rf),ri(1)))}function ZB(n){return xl(n)||n instanceof Ml}function QB(n,t){return Pt(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?Ie(Ne(re({},e),{guardsResult:!0})):JB(o,i,r,n).pipe(Pt(a=>a&&HB(a)?e9(i,s,n,t):Ie(a)),We(a=>Ne(re({},e),{guardsResult:a})))})}function JB(n,t,e,i){return Lt(n).pipe(Pt(r=>s9(r.component,r.route,e,t,i)),Vr(r=>r!==!0,!0))}function e9(n,t,e,i){return Lt(t).pipe(gs(r=>er(n9(r.route.parent,i),t9(r.route,i),r9(n,r.path,e),i9(n,r.route,e))),Vr(r=>r!==!0,!0))}function t9(n,t){return n!==null&&t&&t(new Xf(n)),Ie(!0)}function n9(n,t){return n!==null&&t&&t(new Kf(n)),Ie(!0)}function i9(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return Ie(!0);let r=i.map(s=>lp(()=>{let o=Hu(t)??e,a=kl(s,o),l=GB(a)?a.canActivate(t,n):ai(o,()=>a(t,n));return Ts(l).pipe(Vr())}));return Ie(r).pipe(Tl())}function r9(n,t,e){let i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>WB(o)).filter(o=>o!==null).map(o=>lp(()=>{let a=o.guards.map(l=>{let c=Hu(o.node)??e,u=kl(l,c),d=KB(u)?u.canActivateChild(i,n):ai(c,()=>u(i,n));return Ts(d).pipe(Vr())});return Ie(a).pipe(Tl())}));return Ie(s).pipe(Tl())}function s9(n,t,e,i,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return Ie(!0);let o=s.map(a=>{let l=Hu(t)??r,c=kl(a,l),u=$B(c)?c.canDeactivate(n,t,e,i):ai(l,()=>c(n,t,e,i));return Ts(u).pipe(Vr())});return Ie(o).pipe(Tl())}function o9(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return Ie(!0);let s=r.map(o=>{let a=kl(o,n),l=YB(a)?a.canLoad(t,e):ai(n,()=>a(t,e));return Ts(l)});return Ie(s).pipe(Tl(),AM(i))}function AM(n){return g_(Jt(t=>{if(typeof t!="boolean")throw t0(n,t)}),We(t=>t===!0))}function a9(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return Ie(!0);let s=r.map(o=>{let a=kl(o,n),l=XB(a)?a.canMatch(t,e):ai(n,()=>a(t,e));return Ts(l)});return Ie(s).pipe(Tl(),AM(i))}var ju=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Wu=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function wl(n){return Wa(new ju(n))}function l9(n){return Wa(new Ee(4e3,!1))}function c9(n){return Wa(gM(!1,Xn.GuardRejected))}var b1=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Ie(i);if(r.numberOfChildren>1||!r.children[Qe])return l9(`${t.redirectTo}`);r=r.children[Qe]}}applyRedirectCommands(t,e,i,r,s){if(typeof e!="string"){let a=e,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,params:p,data:g,title:A}=r,y=ai(s,()=>a({params:p,data:g,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,title:A}));if(y instanceof gr)throw new Wu(y);e=y}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e[0]==="/")throw new Wu(o);return o}applyRedirectCreateUrlTree(t,e,i,r){let s=this.createSegmentGroup(t,e.root,i,r);return new gr(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);i[r]=e[a]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){let s=this.createSegments(t,e.segments,i,r),o={};return Object.entries(e.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(t,l,i,r)}),new gt(s,o)}createSegments(t,e,i,r){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new Ee(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},S1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function u9(n,t,e,i,r){let s=yM(n,t,e);return s.matched?(i=NB(t,i),a9(i,t,e,r).pipe(We(o=>o===!0?s:re({},S1)))):Ie(s)}function yM(n,t,e){if(t.path==="**")return d9(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?re({},S1):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||KD)(e,n,t);if(!r)return re({},S1);let s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=r.consumed.length>0?re(re({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function d9(n){return{matched:!0,parameters:n.length>0?XD(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function HD(n,t,e,i){return e.length>0&&f9(n,e,i)?{segmentGroup:new gt(t,p9(i,new gt(e,n.children))),slicedSegments:[]}:e.length===0&&g9(n,e,i)?{segmentGroup:new gt(n.segments,h9(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new gt(n.segments,n.children),slicedSegments:e}}function h9(n,t,e,i){let r={};for(let s of e)if(s0(n,t,s)&&!i[Wi(s)]){let o=new gt([],{});r[Wi(s)]=o}return re(re({},i),r)}function p9(n,t){let e={};e[Qe]=t;for(let i of n)if(i.path===""&&Wi(i)!==Qe){let r=new gt([],{});e[Wi(i)]=r}return e}function f9(n,t,e){return e.some(i=>s0(n,t,i)&&Wi(i)!==Qe)}function g9(n,t,e){return e.some(i=>s0(n,t,i))}function s0(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function m9(n,t,e){return t.length===0&&!n.children[e]}var C1=class{};function _9(n,t,e,i,r,s,o="emptyOnly"){return new x1(n,t,e,i,r,o,s).recognize()}var A9=31,x1=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,i,r,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new b1(this.urlSerializer,this.urlTree)}noMatchError(t){return new Ee(4002,`'${t.segmentGroup}'`)}recognize(){let t=HD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(We(({children:e,rootSnapshot:i})=>{let r=new ui(i,e),s=new Bu("",r),o=sM(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let e=new Oo([],Object.freeze({}),Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Qe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,Qe,e).pipe(We(i=>({children:i,rootSnapshot:e})),tr(i=>{if(i instanceof Wu)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof ju?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,s):this.processSegment(t,e,i,i.segments,r,!0,s).pipe(We(o=>o instanceof ui?[o]:[]))}processChildren(t,e,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return Lt(s).pipe(gs(o=>{let a=i.children[o],l=OB(e,o);return this.processSegmentGroup(t,l,a,o,r)}),x_((o,a)=>(o.push(...a),o)),ms(null),C_(),Pt(o=>{if(o===null)return wl(i);let a=vM(o);return y9(a),Ie(a)}))}processSegment(t,e,i,r,s,o,a){return Lt(e).pipe(gs(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,i,r,s,o,a).pipe(tr(c=>{if(c instanceof ju)return Ie(null);throw c}))),Vr(l=>!!l),tr(l=>{if(_M(l))return m9(i,r,s)?Ie(new C1):wl(i);throw l}))}processSegmentAgainstRoute(t,e,i,r,s,o,a,l){return Wi(i)!==o&&(o===Qe||!s0(r,s,i))?wl(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,o,l):wl(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=yM(e,r,s);if(!l)return wl(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>A9&&(this.allowRedirects=!1));let p=new Oo(s,c,Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,YD(r),Wi(r),r.component??r._loadedComponent??null,r,GD(r)),g=e0(p,a,this.paramsInheritanceStrategy);p.params=Object.freeze(g.params),p.data=Object.freeze(g.data);let A=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,p,t);return this.applyRedirects.lineralizeSegments(r,A).pipe(Pt(y=>this.processSegment(t,i,e,y.concat(h),o,!1,a)))}matchSegmentAgainstRoute(t,e,i,r,s,o){let a=u9(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),a.pipe(Un(l=>l.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(Un(({routes:c})=>{let u=i._loadedInjector??t,{parameters:d,consumedSegments:h,remainingSegments:p}=l,g=new Oo(h,d,Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,YD(i),Wi(i),i.component??i._loadedComponent??null,i,GD(i)),A=e0(g,o,this.paramsInheritanceStrategy);g.params=Object.freeze(A.params),g.data=Object.freeze(A.data);let{segmentGroup:y,slicedSegments:b}=HD(e,h,p,c);if(b.length===0&&y.hasChildren())return this.processChildren(u,c,y,g).pipe(We(P=>new ui(g,P)));if(c.length===0&&b.length===0)return Ie(new ui(g,[]));let x=Wi(i)===s;return this.processSegment(u,c,y,b,x?Qe:s,!0,g).pipe(We(P=>new ui(g,P instanceof ui?[P]:[])))}))):wl(e)))}getChildConfig(t,e,i){return e.children?Ie({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?Ie({routes:e._loadedRoutes,injector:e._loadedInjector}):o9(t,e,i,this.urlSerializer).pipe(Pt(r=>r?this.configLoader.loadChildren(t,e).pipe(Jt(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):c9(e))):Ie({routes:[],injector:t})}};function y9(n){n.sort((t,e)=>t.value.outlet===Qe?-1:e.value.outlet===Qe?1:t.value.outlet.localeCompare(e.value.outlet))}function v9(n){let t=n.value.routeConfig;return t&&t.path===""}function vM(n){let t=[],e=new Set;for(let i of n){if(!v9(i)){t.push(i);continue}let r=t.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=vM(i.children);t.push(new ui(i.value,r))}return t.filter(i=>!e.has(i))}function YD(n){return n.data||{}}function GD(n){return n.resolve||{}}function w9(n,t,e,i,r,s){return Pt(o=>_9(n,t,e,i,o.extractedUrl,r,s).pipe(We(({state:a,tree:l})=>Ne(re({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function b9(n,t){return Pt(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Ie(e);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of wM(l))o.add(c);let a=0;return Lt(o).pipe(gs(l=>s.has(l)?S9(l,i,n,t):(l.data=e0(l,l.parent,n).resolve,Ie(void 0))),Jt(()=>a++),za(1),Pt(l=>a===o.size?Ie(e):xn))})}function wM(n){let t=n.children.map(e=>wM(e)).flat();return[n,...t]}function S9(n,t,e,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!hM(r)&&(s[Uu]=r.title),C9(s,n,t,i).pipe(We(o=>(n._resolvedData=o,n.data=e0(n,n.parent,e).resolve,null)))}function C9(n,t,e,i){let r=p1(n);if(r.length===0)return Ie({});let s={};return Lt(r).pipe(Pt(o=>x9(n[o],t,e,i).pipe(Vr(),Jt(a=>{if(a instanceof Ml)throw t0(new Fo,a);s[o]=a}))),za(1),We(()=>s),tr(o=>_M(o)?xn:Wa(o)))}function x9(n,t,e,i){let r=Hu(t)??i,s=kl(n,r),o=s.resolve?s.resolve(t,e):ai(r,()=>s(t,e));return Ts(o)}function d1(n){return Un(t=>{let e=n(t);return e?Lt(e).pipe(We(()=>t)):Ie(t)})}var D1=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===Qe);return i}getResolvedTitleForRoute(e){return e.data[Uu]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>se(bM),providedIn:"root"})}return n})(),bM=(()=>{class n extends D1{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(oe(qD))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ku=new Se("",{providedIn:"root",factory:()=>({})}),M1=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=qi({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&Ze(0,"router-outlet")},dependencies:[Yu],encapsulation:2})}return n})();function T1(n){let t=n.children&&n.children.map(T1),e=t?Ne(re({},n),{children:t}):re({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Qe&&(e.component=M1),e}var $u=new Se(""),SM=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=se(iD);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Ie(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=Ts(e.loadComponent()).pipe(We(xM),Jt(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),_s(()=>{this.componentLoaders.delete(e)})),r=new Va(i,()=>new ct).pipe(La());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Ie({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=CM(i,this.compiler,e,this.onLoadEndListener).pipe(_s(()=>{this.childrenLoaders.delete(i)})),o=new Va(s,()=>new ct).pipe(La());return this.childrenLoaders.set(i,o),o}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function CM(n,t,e,i){return Ts(n.loadChildren()).pipe(We(xM),Pt(r=>r instanceof Iy||Array.isArray(r)?Ie(r):Lt(t.compileModuleAsync(r))),We(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(e).injector,o=s.get($u,[],{optional:!0,self:!0}).flat()),{routes:o.map(T1),injector:s}}))}function E9(n){return n&&typeof n=="object"&&"default"in n}function xM(n){return E9(n)?n.default:n}var o0=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>se(D9),providedIn:"root"})}return n})(),D9=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),EM=new Se("");var DM=new Se(""),MM=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ct;transitionAbortSubject=new ct;configLoader=se(SM);environmentInjector=se(Pn);destroyRef=se(dl);urlSerializer=se(zu);rootContexts=se(Il);location=se(_l);inputBindingEnabled=se(r0,{optional:!0})!==null;titleStrategy=se(D1);options=se(Ku,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=se(o0);createViewTransition=se(EM,{optional:!0});navigationErrorHandler=se(DM,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Ie(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=r=>this.events.next(new Yf(r)),i=r=>this.events.next(new Gf(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(Ne(re({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))}setupNavigations(e){return this.transitions=new Qt(null),this.transitions.pipe(_n(i=>i!==null),Un(i=>{let r=!1,s=!1;return Ie(i).pipe(Un(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Xn.SupersededByNewNavigation),xn;this.currentTransition=i,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Ne(re({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!a&&l!=="reload"){let c="";return this.events.next(new Yr(o.id,this.urlSerializer.serialize(o.rawUrl),c,Ru.IgnoredSameUrlNavigation)),o.resolve(!1),xn}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Ie(o).pipe(Un(c=>(this.events.next(new Lo(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?xn:Promise.resolve(c))),w9(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Jt(c=>{i.targetSnapshot=c.targetSnapshot,i.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=Ne(re({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let u=new Fu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:u,source:d,restoredState:h,extras:p}=o,g=new Lo(c,this.urlSerializer.serialize(u),d,h);this.events.next(g);let A=uM(this.rootComponentType).snapshot;return this.currentTransition=i=Ne(re({},o),{targetSnapshot:A,urlAfterRedirects:u,extras:Ne(re({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,Ie(i)}else{let c="";return this.events.next(new Yr(o.id,this.urlSerializer.serialize(o.extractedUrl),c,Ru.IgnoredByUrlHandlingStrategy)),o.resolve(!1),xn}}),Jt(o=>{let a=new Wf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),We(o=>(this.currentTransition=i=Ne(re({},o),{guards:jB(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),QB(this.environmentInjector,o=>this.events.next(o)),Jt(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw t0(this.urlSerializer,o.guardsResult);let a=new Uf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),_n(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Xn.GuardRejected),!1)),d1(o=>{if(o.guards.canActivateChecks.length!==0)return Ie(o).pipe(Jt(a=>{let l=new zf(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),Un(a=>{let l=!1;return Ie(a).pipe(b9(this.paramsInheritanceStrategy,this.environmentInjector),Jt({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",Xn.NoDataFromResolver)}}))}),Jt(a=>{let l=new Hf(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),d1(o=>{let a=l=>{let c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(Jt(u=>{l.component=u}),We(()=>{})));for(let u of l.children)c.push(...a(u));return c};return Gc(a(o.targetSnapshot.root)).pipe(ms(null),ri(1))}),d1(()=>this.afterPreactivation()),Un(()=>{let{currentSnapshot:o,targetSnapshot:a}=i,l=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return l?Lt(l).pipe(We(()=>i)):Ie(i)}),We(o=>{let a=FB(e.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=Ne(re({},o),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,i}),Jt(()=>{this.events.next(new Lu)}),qB(this.rootContexts,e.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),ri(1),Jt({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Hr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),nr(this.transitionAbortSubject.pipe(Jt(o=>{throw o}))),_s(()=>{!r&&!s&&this.cancelNavigationTransition(i,"",Xn.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),tr(o=>{if(this.destroyed)return i.resolve(!1),xn;if(s=!0,mM(o))this.events.next(new fr(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),BB(o)?this.events.next(new Dl(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let a=new El(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let l=ai(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof Ml){let{message:c,cancellationCode:u}=t0(this.urlSerializer,l);this.events.next(new fr(i.id,this.urlSerializer.serialize(i.extractedUrl),c,u)),this.events.next(new Dl(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return xn}))}))}cancelNavigationTransition(e,i,r){let s=new fr(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function M9(n){return n!==Bf}var TM=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>se(T9),providedIn:"root"})}return n})(),i0=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},T9=(()=>{class n extends i0{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Vi(n)))(r||n)}})();static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),IM=(()=>{class n{urlSerializer=se(zu);options=se(Ku,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=se(_l);urlHandlingStrategy=se(o0);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new gr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:i,targetBrowserUrl:r}){let s=e!==void 0?this.urlHandlingStrategy.merge(e,i):i,o=r??s;return o instanceof gr?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:e,finalUrl:i,initialUrl:r}){i&&e?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=e):this.rawUrlTree=r}routerState=uM(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>se(I9),providedIn:"root"})}return n})(),I9=(()=>{class n extends IM{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{e(i.url,i.state,"popstate")})})}handleRouterEvent(e,i){e instanceof Lo?this.updateStateMemento():e instanceof Yr?this.commitTransition(i):e instanceof Fu?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Lu?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof fr&&(e.code===Xn.GuardRejected||e.code===Xn.NoDataFromResolver)?this.restoreHistory(i):e instanceof El?this.restoreHistory(i,!0):e instanceof Hr&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:i,id:r}){let{replaceUrl:s,state:o}=i;if(this.location.isCurrentPathEqualTo(e)||s){let a=this.browserPageId,l=re(re({},o),this.generateNgRouterState(r,a));this.location.replaceState(e,"",l)}else{let a=re(re({},o),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===e.finalUrl&&s===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Vi(n)))(r||n)}})();static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function I1(n,t){n.events.pipe(_n(e=>e instanceof Hr||e instanceof fr||e instanceof El||e instanceof Yr),We(e=>e instanceof Hr||e instanceof Yr?0:(e instanceof fr?e.code===Xn.Redirect||e.code===Xn.SupersededByNewNavigation:!1)?2:1),_n(e=>e!==2),ri(1)).subscribe(()=>{t()})}var k9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},P9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},a0=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=se(WE);stateManager=se(IM);options=se(Ku,{optional:!0})||{};pendingTasks=se(vs);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=se(MM);urlSerializer=se(zu);location=se(_l);urlHandlingStrategy=se(o0);_events=new ct;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=se(TM);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=se($u,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!se(r0,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Yt;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof fr&&i.code!==Xn.Redirect&&i.code!==Xn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Hr)this.navigated=!0;else if(i instanceof Dl){let o=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=re({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||M9(r.source)},o);this.scheduleNavigation(a,Bf,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}O9(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Bf,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i,r)=>{this.navigateToSyncWithBrowser(e,r,i)})}navigateToSyncWithBrowser(e,i,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let l=re({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(T1),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=re(re({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=r?r.snapshot:this.routerState.snapshot.root;d=oM(h)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),d=this.currentUrlTree.root}return aM(d,e,u,c??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=xl(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Bf,null,i)}navigate(e,i={skipLocationChange:!1}){return N9(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=re({},k9):i===!1?r=re({},P9):r=i,xl(e))return jD(this.currentUrlTree,e,r);let s=this.parseUrl(e);return jD(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(e,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,l=h});let u=this.pendingTasks.add();return I1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function N9(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new Ee(4008,!1)}function O9(n){return!(n instanceof Lu)&&!(n instanceof Dl)}var F9=new Se("");function k1(n,...t){return uu([{provide:$u,multi:!0,useValue:n},[],{provide:mr,useFactory:L9,deps:[a0]},{provide:ky,multi:!0,useFactory:V9},t.map(e=>e.\u0275providers)])}function L9(n){return n.routerState.root}function V9(){let n=se(Rn);return t=>{let e=n.get(Wr);if(t!==e.components[0])return;let i=n.get(a0),r=n.get(B9);n.get(q9)===1&&i.initialNavigation(),n.get(j9,null,rt.Optional)?.setUpPreloading(),n.get(F9,null,rt.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var B9=new Se("",{factory:()=>new ct}),q9=new Se("",{providedIn:"root",factory:()=>1});var j9=new Se("");var kM=[];function Qu(n){return n+.5|0}var Is=(n,t,e)=>Math.max(Math.min(n,e),t);function Xu(n){return Is(Qu(n*2.55),0,255)}function ks(n){return Is(Qu(n*255),0,255)}function Gr(n){return Is(Qu(n/2.55)/100,0,1)}function PM(n){return Is(Qu(n*100),0,100)}var Si={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},N1=[..."0123456789ABCDEF"],z9=n=>N1[n&15],H9=n=>N1[(n&240)>>4]+N1[n&15],l0=n=>(n&240)>>4===(n&15),Y9=n=>l0(n.r)&&l0(n.g)&&l0(n.b)&&l0(n.a);function G9(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Si[n[1]]*17,g:255&Si[n[2]]*17,b:255&Si[n[3]]*17,a:t===5?Si[n[4]]*17:255}:(t===7||t===9)&&(e={r:Si[n[1]]<<4|Si[n[2]],g:Si[n[3]]<<4|Si[n[4]],b:Si[n[5]]<<4|Si[n[6]],a:t===9?Si[n[7]]<<4|Si[n[8]]:255})),e}var K9=(n,t)=>n<255?t(n):"";function $9(n){var t=Y9(n)?z9:H9;return n?"#"+t(n.r)+t(n.g)+t(n.b)+K9(n.a,t):void 0}var X9=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function FM(n,t,e){let i=t*Math.min(e,1-e),r=(s,o=(s+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function Z9(n,t,e){let i=(r,s=(r+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function Q9(n,t,e){let i=FM(n,1,.5),r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function J9(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function O1(n){let e=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(e,i,r),o=Math.min(e,i,r),a=(s+o)/2,l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=J9(e,i,r,u,s),l=l*60+.5),[l|0,c||0,a]}function R1(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(ks)}function F1(n,t,e){return R1(FM,n,t,e)}function eq(n,t,e){return R1(Q9,n,t,e)}function tq(n,t,e){return R1(Z9,n,t,e)}function LM(n){return(n%360+360)%360}function nq(n){let t=X9.exec(n),e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Xu(+t[5]):ks(+t[5]));let r=LM(+t[2]),s=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=eq(r,s,o):t[1]==="hsv"?i=tq(r,s,o):i=F1(r,s,o),{r:i[0],g:i[1],b:i[2],a:e}}function iq(n,t){var e=O1(n);e[0]=LM(e[0]+t),e=F1(e),n.r=e[0],n.g=e[1],n.b=e[2]}function rq(n){if(!n)return;let t=O1(n),e=t[0],i=PM(t[1]),r=PM(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${Gr(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}var NM={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},OM={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function sq(){let n={},t=Object.keys(OM),e=Object.keys(NM),i,r,s,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],r=0;r<e.length;r++)s=e[r],a=a.replace(s,NM[s]);s=parseInt(OM[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var c0;function oq(n){c0||(c0=sq(),c0.transparent=[0,0,0,0]);let t=c0[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}var aq=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function lq(n){let t=aq.exec(n),e=255,i,r,s;if(t){if(t[7]!==i){let o=+t[7];e=t[8]?Xu(o):Is(o*255,0,255)}return i=+t[1],r=+t[3],s=+t[5],i=255&(t[2]?Xu(i):Is(i,0,255)),r=255&(t[4]?Xu(r):Is(r,0,255)),s=255&(t[6]?Xu(s):Is(s,0,255)),{r:i,g:r,b:s,a:e}}}function cq(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Gr(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var P1=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Pl=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function uq(n,t,e){let i=Pl(Gr(n.r)),r=Pl(Gr(n.g)),s=Pl(Gr(n.b));return{r:ks(P1(i+e*(Pl(Gr(t.r))-i))),g:ks(P1(r+e*(Pl(Gr(t.g))-r))),b:ks(P1(s+e*(Pl(Gr(t.b))-s))),a:n.a+e*(t.a-n.a)}}function u0(n,t,e){if(n){let i=O1(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=F1(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function VM(n,t){return n&&Object.assign(t||{},n)}function RM(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=ks(n[3]))):(t=VM(n,{r:0,g:0,b:0,a:1}),t.a=ks(t.a)),t}function dq(n){return n.charAt(0)==="r"?lq(n):nq(n)}var Zu=class n{constructor(t){if(t instanceof n)return t;let e=typeof t,i;e==="object"?i=RM(t):e==="string"&&(i=G9(t)||oq(t)||dq(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=VM(this._rgb);return t&&(t.a=Gr(t.a)),t}set rgb(t){this._rgb=RM(t)}rgbString(){return this._valid?cq(this._rgb):void 0}hexString(){return this._valid?$9(this._rgb):void 0}hslString(){return this._valid?rq(this._rgb):void 0}mix(t,e){if(t){let i=this.rgb,r=t.rgb,s,o=e===s?.5:e,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=uq(this._rgb,t._rgb,e)),this}clone(){return new n(this.rgb)}alpha(t){return this._rgb.a=ks(t),this}clearer(t){let e=this._rgb;return e.a*=1-t,this}greyscale(){let t=this._rgb,e=Qu(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){let e=this._rgb;return e.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return u0(this._rgb,2,t),this}darken(t){return u0(this._rgb,2,-t),this}saturate(t){return u0(this._rgb,1,t),this}desaturate(t){return u0(this._rgb,1,-t),this}rotate(t){return iq(this._rgb,t),this}};function Hi(){}var B1=(()=>{let n=0;return()=>n++})();function ot(n){return n==null}function dt(n){if(Array.isArray&&Array.isArray(n))return!0;let t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ge(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Et(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Vn(n,t){return Et(n)?n:t}function Ve(n,t){return typeof n>"u"?t:n}var q1=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,m0=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function pt(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function mt(n,t,e,i){let r,s,o;if(dt(n))if(s=n.length,i)for(r=s-1;r>=0;r--)t.call(e,n[r],r);else for(r=0;r<s;r++)t.call(e,n[r],r);else if(Ge(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)t.call(e,n[o[r]],o[r])}function Fl(n,t){let e,i,r,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function ed(n){if(dt(n))return n.map(ed);if(Ge(n)){let t=Object.create(null),e=Object.keys(n),i=e.length,r=0;for(;r<i;++r)t[e[r]]=ed(n[e[r]]);return t}return n}function KM(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function $M(n,t,e,i){if(!KM(n))return;let r=t[n],s=e[n];Ge(r)&&Ge(s)?qo(r,s,i):t[n]=ed(s)}function qo(n,t,e){let i=dt(t)?t:[t],r=i.length;if(!Ge(n))return n;e=e||{};let s=e.merger||$M,o;for(let a=0;a<r;++a){if(o=i[a],!Ge(o))continue;let l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],n,o,e)}return n}function jo(n,t){return qo(n,t,{merger:XM})}function XM(n,t,e){if(!KM(n))return;let i=t[n],r=e[n];Ge(i)&&Ge(r)?jo(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=ed(r))}var BM={"":n=>n,x:n=>n.x,y:n=>n.y};function ZM(n){let t=n.split("."),e=[],i="";for(let r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function hq(n){let t=ZM(n);return e=>{for(let i of t){if(i==="")break;e=e&&e[i]}return e}}function Ar(n,t){return(BM[t]||(BM[t]=hq(t)))(n)}function nd(n){return n.charAt(0).toUpperCase()+n.slice(1)}var vn=n=>typeof n<"u",yn=n=>typeof n=="function",_0=(n,t)=>{if(n.size!==t.size)return!1;for(let e of n)if(!t.has(e))return!1;return!0};function j1(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var st=Math.PI,At=2*st,QM=At+st,td=Number.POSITIVE_INFINITY,id=st/180,Ct=st/2,Zn=st/4,Nl=st*2/3,_r=Math.log10,Ci=Math.sign;function Wo(n,t,e){return Math.abs(n-t)<e}function A0(n){let t=Math.round(n);n=Wo(n,t,n/1e3)?t:n;let e=Math.pow(10,Math.floor(_r(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function W1(n){let t=[],e=Math.sqrt(n),i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}function pq(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Yi(n){return!pq(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function U1(n,t){let e=Math.round(n);return e-t<=n&&e+t>=n}function y0(n,t,e){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function jt(n){return n*(st/180)}function Uo(n){return n*(180/st)}function v0(n){if(!Et(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function zo(n,t){let e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i),s=Math.atan2(i,e);return s<-.5*st&&(s+=At),{angle:s,distance:r}}function $r(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function JM(n,t){return(n-t+QM)%At-st}function Ln(n){return(n%At+At)%At}function Ho(n,t,e,i){let r=Ln(n),s=Ln(t),o=Ln(e),a=Ln(s-r),l=Ln(o-r),c=Ln(r-s),u=Ln(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function en(n,t,e){return Math.max(t,Math.min(e,n))}function z1(n){return en(n,-32768,32767)}function Gi(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function rd(n,t,e){e=e||(o=>n[o]<t);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,e(s)?r=s:i=s;return{lo:r,hi:i}}var Ui=(n,t,e,i)=>rd(n,e,i?r=>{let s=n[r][t];return s<e||s===e&&n[r+1][t]===e}:r=>n[r][t]<e),H1=(n,t,e)=>rd(n,e,i=>n[i][t]>=e);function Y1(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}var eT=["push","pop","shift","splice","unshift"];function G1(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),eT.forEach(e=>{let i="_onData"+nd(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){let o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function w0(n,t){let e=n._chartjs;if(!e)return;let i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(eT.forEach(s=>{delete n[s]}),delete n._chartjs)}function b0(n){let t=new Set(n);return t.size===n.length?n:Array.from(t)}var S0=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function C0(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,S0.call(window,()=>{i=!1,n.apply(t,e)}))}}function K1(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}var sd=n=>n==="start"?"left":n==="end"?"right":"center",dn=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,$1=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function x0(n,t,e){let i=t.length,r=0,s=i;if(n._sorted){let{iScale:o,vScale:a,_parsed:l}=n,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:p,maxDefined:g}=o.getUserBounds();if(p){if(r=Math.min(Ui(l,u,d).lo,e?i:Ui(t,u,o.getPixelForValue(d)).lo),c){let A=l.slice(0,r+1).reverse().findIndex(y=>!ot(y[a.axis]));r-=Math.max(0,A)}r=en(r,0,i-1)}if(g){let A=Math.max(Ui(l,o.axis,h,!0).hi+1,e?0:Ui(t,u,o.getPixelForValue(h),!0).hi+1);if(c){let y=l.slice(A-1).findIndex(b=>!ot(b[a.axis]));A+=Math.max(0,y)}s=en(A,r,i)-r}else s=i-r}return{start:r,count:s}}function E0(n){let{xScale:t,yScale:e,_scaleRanges:i}=n,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=r,!0;let s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,r),s}var d0=n=>n===0||n===1,qM=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*At/e)),jM=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*At/e)+1,Vo={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Ct)+1,easeOutSine:n=>Math.sin(n*Ct),easeInOutSine:n=>-.5*(Math.cos(st*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>d0(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>d0(n)?n:qM(n,.075,.3),easeOutElastic:n=>d0(n)?n:jM(n,.075,.3),easeInOutElastic(n){return d0(n)?n:n<.5?.5*qM(n*2,.1125,.45):.5+.5*jM(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Vo.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Vo.easeInBounce(n*2)*.5:Vo.easeOutBounce(n*2-1)*.5+.5};function D0(n){if(n&&typeof n=="object"){let t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function M0(n){return D0(n)?n:new Zu(n)}function f0(n){return D0(n)?n:new Zu(n).saturate(.5).darken(.1).hexString()}var fq=["x","y","borderWidth","radius","tension"],gq=["color","borderColor","backgroundColor"];function mq(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:gq},numbers:{type:"number",properties:fq}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function _q(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var WM=new Map;function Aq(n,t){t=t||{};let e=n+JSON.stringify(t),i=WM.get(e);return i||(i=new Intl.NumberFormat(n,t),WM.set(e,i)),i}function Yo(n,t,e){return Aq(t,e).format(n)}var tT={values(n){return dt(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";let i=this.chart.options.locale,r,s=n;if(e.length>1){let c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=yq(n,e)}let o=_r(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Yo(n,i,l)},logarithmic(n,t,e){if(n===0)return"0";let i=e[t].significand||n/Math.pow(10,Math.floor(_r(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?tT.numeric.call(this,n,t,e):""}};function yq(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var od={formatters:tT};function vq(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:od.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}var Ns=Object.create(null),T0=Object.create(null);function Ju(n,t){if(!t)return n;let e=t.split(".");for(let i=0,r=e.length;i<r;++i){let s=e[i];n=n[s]||(n[s]=Object.create(null))}return n}function L1(n,t,e){return typeof t=="string"?qo(Ju(n,t),e):qo(Ju(n,""),t)}var V1=class{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>f0(r.backgroundColor),this.hoverBorderColor=(i,r)=>f0(r.borderColor),this.hoverColor=(i,r)=>f0(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return L1(this,t,e)}get(t){return Ju(this,t)}describe(t,e){return L1(T0,t,e)}override(t,e){return L1(Ns,t,e)}route(t,e,i,r){let s=Ju(this,t),o=Ju(this,i),a="_"+e;Object.defineProperties(s,{[a]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){let l=this[a],c=o[r];return Ge(l)?Object.assign({},c,l):Ve(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}},bt=new V1({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[mq,_q,vq]);function nT(n){return!n||ot(n.size)||ot(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Ol(n,t,e,i,r){let s=t[r];return s||(s=t[r]=n.measureText(r).width,e.push(r)),s>i&&(i=s),i}function X1(n,t,e,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let o=0,a=e.length,l,c,u,d,h;for(l=0;l<a;l++)if(d=e[l],d!=null&&!dt(d))o=Ol(n,r,s,o,d);else if(dt(d))for(c=0,u=d.length;c<u;c++)h=d[c],h!=null&&!dt(h)&&(o=Ol(n,r,s,o,h));n.restore();let p=s.length/2;if(p>e.length){for(l=0;l<p;l++)delete r[s[l]];s.splice(0,p)}return o}function Xr(n,t,e){let i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function I0(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function ad(n,t,e,i){k0(n,t,e,i,null)}function k0(n,t,e,i,r){let s,o,a,l,c,u,d,h,p=t.pointStyle,g=t.rotation,A=t.radius,y=(g||0)*id;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(y),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),n.restore();return}if(!(isNaN(A)||A<=0)){switch(n.beginPath(),p){default:r?n.ellipse(e,i,r/2,A,0,0,At):n.arc(e,i,A,0,At),n.closePath();break;case"triangle":u=r?r/2:A,n.moveTo(e+Math.sin(y)*u,i-Math.cos(y)*A),y+=Nl,n.lineTo(e+Math.sin(y)*u,i-Math.cos(y)*A),y+=Nl,n.lineTo(e+Math.sin(y)*u,i-Math.cos(y)*A),n.closePath();break;case"rectRounded":c=A*.516,l=A-c,o=Math.cos(y+Zn)*l,d=Math.cos(y+Zn)*(r?r/2-c:l),a=Math.sin(y+Zn)*l,h=Math.sin(y+Zn)*(r?r/2-c:l),n.arc(e-d,i-a,c,y-st,y-Ct),n.arc(e+h,i-o,c,y-Ct,y),n.arc(e+d,i+a,c,y,y+Ct),n.arc(e-h,i+o,c,y+Ct,y+st),n.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*A,u=r?r/2:l,n.rect(e-u,i-l,2*u,2*l);break}y+=Zn;case"rectRot":d=Math.cos(y)*(r?r/2:A),o=Math.cos(y)*A,a=Math.sin(y)*A,h=Math.sin(y)*(r?r/2:A),n.moveTo(e-d,i-a),n.lineTo(e+h,i-o),n.lineTo(e+d,i+a),n.lineTo(e-h,i+o),n.closePath();break;case"crossRot":y+=Zn;case"cross":d=Math.cos(y)*(r?r/2:A),o=Math.cos(y)*A,a=Math.sin(y)*A,h=Math.sin(y)*(r?r/2:A),n.moveTo(e-d,i-a),n.lineTo(e+d,i+a),n.moveTo(e+h,i-o),n.lineTo(e-h,i+o);break;case"star":d=Math.cos(y)*(r?r/2:A),o=Math.cos(y)*A,a=Math.sin(y)*A,h=Math.sin(y)*(r?r/2:A),n.moveTo(e-d,i-a),n.lineTo(e+d,i+a),n.moveTo(e+h,i-o),n.lineTo(e-h,i+o),y+=Zn,d=Math.cos(y)*(r?r/2:A),o=Math.cos(y)*A,a=Math.sin(y)*A,h=Math.sin(y)*(r?r/2:A),n.moveTo(e-d,i-a),n.lineTo(e+d,i+a),n.moveTo(e+h,i-o),n.lineTo(e-h,i+o);break;case"line":o=r?r/2:Math.cos(y)*A,a=Math.sin(y)*A,n.moveTo(e-o,i-a),n.lineTo(e+o,i+a);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(y)*(r?r/2:A),i+Math.sin(y)*A);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function zi(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Os(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Rs(n){n.restore()}function Z1(n,t,e,i,r){if(!t)return n.lineTo(e.x,e.y);if(r==="middle"){let s=(t.x+e.x)/2;n.lineTo(s,t.y),n.lineTo(s,e.y)}else r==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function Q1(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function wq(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),ot(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function bq(n,t,e,i,r){if(r.strikethrough||r.underline){let s=n.measureText(i),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=e-s.actualBoundingBoxAscent,c=e+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function Sq(n,t){let e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Zr(n,t,e,i,r,s={}){let o=dt(t)?t:[t],a=s.strokeWidth>0&&s.strokeColor!=="",l,c;for(n.save(),n.font=r.string,wq(n,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&Sq(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),ot(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,e,i,s.maxWidth)),n.fillText(c,e,i,s.maxWidth),bq(n,e,i,c,s),i+=Number(r.lineHeight);n.restore()}function Qr(n,t){let{x:e,y:i,w:r,h:s,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,1.5*st,st,!0),n.lineTo(e,i+s-o.bottomLeft),n.arc(e+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,st,Ct,!0),n.lineTo(e+r-o.bottomRight,i+s),n.arc(e+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Ct,0,!0),n.lineTo(e+r,i+o.topRight),n.arc(e+r-o.topRight,i+o.topRight,o.topRight,0,-Ct,!0),n.lineTo(e+o.topLeft,i)}var Cq=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,xq=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function iT(n,t){let e=(""+n).match(Cq);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}var Eq=n=>+n||0;function ld(n,t){let e={},i=Ge(t),r=i?Object.keys(t):t,s=Ge(n)?i?o=>Ve(n[o],n[t[o]]):o=>n[o]:()=>n;for(let o of r)e[o]=Eq(s(o));return e}function P0(n){return ld(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ki(n){return ld(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Wt(n){let t=P0(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ot(n,t){n=n||{},t=t||bt.font;let e=Ve(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Ve(n.style,t.style);i&&!(""+i).match(xq)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let r={family:Ve(n.family,t.family),lineHeight:iT(Ve(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Ve(n.weight,t.weight),string:""};return r.string=nT(r),r}function Go(n,t,e,i){let r=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),r=!1),e!==void 0&&dt(a)&&(a=a[e%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function J1(n,t,e){let{min:i,max:r}=n,s=m0(t,(r-i)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function yr(n,t){return Object.assign(Object.create(n),t)}function cd(n,t=[""],e,i,r=()=>n[0]){let s=e||n;typeof i>"u"&&(i=oT("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>cd([a,...n],t,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return rT(a,l,()=>Oq(l,t,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return zM(a).includes(l)},ownKeys(a){return zM(a)},set(a,l,c){let u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function Ps(n,t,e,i){let r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:N0(n,i),setContext:s=>Ps(n,s,e,i),override:s=>Ps(n.override(s),t,e,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return rT(s,o,()=>Mq(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function N0(n,t={scriptable:!0,indexable:!0}){let{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:yn(e)?e:()=>e,isIndexable:yn(i)?i:()=>i}}var Dq=(n,t)=>n?n+nd(t):t,ev=(n,t)=>Ge(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function rT(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];let i=e();return n[t]=i,i}function Mq(n,t,e){let{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n,a=i[t];return yn(a)&&o.isScriptable(t)&&(a=Tq(t,a,n,e)),dt(a)&&a.length&&(a=Iq(t,a,n,o.isIndexable)),ev(t,a)&&(a=Ps(a,r,s&&s[t],o)),a}function Tq(n,t,e,i){let{_proxy:r,_context:s,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=t(s,o||i);return a.delete(n),ev(n,l)&&(l=tv(r._scopes,r,n,l)),l}function Iq(n,t,e,i){let{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=e;if(typeof s.index<"u"&&i(n))return t[s.index%t.length];if(Ge(t[0])){let l=t,c=r._scopes.filter(u=>u!==l);t=[];for(let u of l){let d=tv(c,r,n,u);t.push(Ps(d,s,o&&o[n],a))}}return t}function sT(n,t,e){return yn(n)?n(t,e):n}var kq=(n,t)=>n===!0?t:typeof n=="string"?Ar(t,n):void 0;function Pq(n,t,e,i,r){for(let s of t){let o=kq(e,s);if(o){n.add(o);let a=sT(o._fallback,e,r);if(typeof a<"u"&&a!==e&&a!==i)return a}else if(o===!1&&typeof i<"u"&&e!==i)return null}return!1}function tv(n,t,e,i){let r=t._rootScopes,s=sT(t._fallback,e,i),o=[...n,...r],a=new Set;a.add(i);let l=UM(a,o,e,s||e,i);return l===null||typeof s<"u"&&s!==e&&(l=UM(a,o,s,l,i),l===null)?!1:cd(Array.from(a),[""],r,s,()=>Nq(t,e,i))}function UM(n,t,e,i,r){for(;e;)e=Pq(n,t,e,i,r);return e}function Nq(n,t,e){let i=n._getTarget();t in i||(i[t]={});let r=i[t];return dt(r)&&Ge(e)?e:r||{}}function Oq(n,t,e,i){let r;for(let s of t)if(r=oT(Dq(s,n),e),typeof r<"u")return ev(n,r)?tv(e,i,n,r):r}function oT(n,t){for(let e of t){if(!e)continue;let i=e[n];if(typeof i<"u")return i}}function zM(n){let t=n._keys;return t||(t=n._keys=Rq(n._scopes)),t}function Rq(n){let t=new Set;for(let e of n)for(let i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function O0(n,t,e,i){let{iScale:r}=n,{key:s="r"}=this._parsing,o=new Array(i),a,l,c,u;for(a=0,l=i;a<l;++a)c=a+e,u=t[c],o[a]={r:r.parse(Ar(u,s),c)};return o}var Fq=Number.EPSILON||1e-14,Rl=(n,t)=>t<n.length&&!n[t].skip&&n[t],aT=n=>n==="x"?"y":"x";function lT(n,t,e,i){let r=n.skip?t:n,s=t,o=e.skip?t:e,a=$r(s,r),l=$r(o,s),c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;let d=i*c,h=i*u;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+h*(o.x-r.x),y:s.y+h*(o.y-r.y)}}}function Lq(n,t,e){let i=n.length,r,s,o,a,l,c=Rl(n,0);for(let u=0;u<i-1;++u)if(l=c,c=Rl(n,u+1),!(!l||!c)){if(Wo(t[u],0,Fq)){e[u]=e[u+1]=0;continue}r=e[u]/t[u],s=e[u+1]/t[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),e[u]=r*o*t[u],e[u+1]=s*o*t[u])}}function Vq(n,t,e="x"){let i=aT(e),r=n.length,s,o,a,l=Rl(n,0);for(let c=0;c<r;++c){if(o=a,a=l,l=Rl(n,c+1),!a)continue;let u=a[e],d=a[i];o&&(s=(u-o[e])/3,a[`cp1${e}`]=u-s,a[`cp1${i}`]=d-s*t[c]),l&&(s=(l[e]-u)/3,a[`cp2${e}`]=u+s,a[`cp2${i}`]=d+s*t[c])}}function cT(n,t="x"){let e=aT(t),i=n.length,r=Array(i).fill(0),s=Array(i),o,a,l,c=Rl(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=Rl(n,o+1),!!l){if(c){let u=c[t]-l[t];r[o]=u!==0?(c[e]-l[e])/u:0}s[o]=a?c?Ci(r[o-1])!==Ci(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}Lq(n,r,s),Vq(n,s,t)}function h0(n,t,e){return Math.max(Math.min(n,e),t)}function Bq(n,t){let e,i,r,s,o,a=zi(n[0],t);for(e=0,i=n.length;e<i;++e)o=s,s=a,a=e<i-1&&zi(n[e+1],t),s&&(r=n[e],o&&(r.cp1x=h0(r.cp1x,t.left,t.right),r.cp1y=h0(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=h0(r.cp2x,t.left,t.right),r.cp2y=h0(r.cp2y,t.top,t.bottom)))}function nv(n,t,e,i,r){let s,o,a,l;if(t.spanGaps&&(n=n.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")cT(n,r);else{let c=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],l=lT(c,a,n[Math.min(s+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&Bq(n,e)}function ud(){return typeof window<"u"&&typeof document<"u"}function dd(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function g0(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}var R0=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function uT(n,t){return R0(n).getPropertyValue(t)}var qq=["top","right","bottom","left"];function Bo(n,t,e){let i={};e=e?"-"+e:"";for(let r=0;r<4;r++){let s=qq[r];i[s]=parseFloat(n[t+"-"+s+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var jq=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function Wq(n,t){let e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:s}=i,o=!1,a,l;if(jq(r,s,n.target))a=r,l=s;else{let c=t.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Jr(n,t){if("native"in n)return n;let{canvas:e,currentDevicePixelRatio:i}=t,r=R0(e),s=r.boxSizing==="border-box",o=Bo(r,"padding"),a=Bo(r,"border","width"),{x:l,y:c,box:u}=Wq(n,e),d=o.left+(u&&a.left),h=o.top+(u&&a.top),{width:p,height:g}=t;return s&&(p-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-d)/p*e.width/i),y:Math.round((c-h)/g*e.height/i)}}function Uq(n,t,e){let i,r;if(t===void 0||e===void 0){let s=n&&dd(n);if(!s)t=n.clientWidth,e=n.clientHeight;else{let o=s.getBoundingClientRect(),a=R0(s),l=Bo(a,"border","width"),c=Bo(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,i=g0(a.maxWidth,s,"clientWidth"),r=g0(a.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:i||td,maxHeight:r||td}}var p0=n=>Math.round(n*10)/10;function iv(n,t,e,i){let r=R0(n),s=Bo(r,"margin"),o=g0(r.maxWidth,n,"clientWidth")||td,a=g0(r.maxHeight,n,"clientHeight")||td,l=Uq(n,t,e),{width:c,height:u}=l;if(r.boxSizing==="content-box"){let h=Bo(r,"border","width"),p=Bo(r,"padding");c-=p.width+h.width,u-=p.height+h.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=p0(Math.min(c,o,l.maxWidth)),u=p0(Math.min(u,a,l.maxHeight)),c&&!u&&(u=p0(c/2)),(t!==void 0||e!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=p0(Math.floor(u*i))),{width:c,height:u}}function F0(n,t,e){let i=t||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);let o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var rv=function(){let n=!1;try{let t={get passive(){return n=!0,!1}};ud()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function L0(n,t){let e=uT(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Kr(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function sv(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function ov(n,t,e,i){let r={x:n.cp2x,y:n.cp2y},s={x:t.cp1x,y:t.cp1y},o=Kr(n,r,e),a=Kr(r,s,e),l=Kr(s,t,e),c=Kr(o,a,e),u=Kr(a,l,e);return Kr(c,u,e)}var zq=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},Hq=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Fs(n,t,e){return n?zq(t,e):Hq()}function V0(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function B0(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function dT(n){return n==="angle"?{between:Ho,compare:JM,normalize:Ln}:{between:Gi,compare:(t,e)=>t-e,normalize:t=>t}}function HM({start:n,end:t,count:e,loop:i,style:r}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:r}}function Yq(n,t,e){let{property:i,start:r,end:s}=e,{between:o,normalize:a}=dT(i),l=t.length,{start:c,end:u,loop:d}=n,h,p;if(d){for(c+=l,u+=l,h=0,p=l;h<p&&o(a(t[c%l][i]),r,s);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:n.style}}function q0(n,t,e){if(!e)return[n];let{property:i,start:r,end:s}=e,o=t.length,{compare:a,between:l,normalize:c}=dT(i),{start:u,end:d,loop:h,style:p}=Yq(n,t,e),g=[],A=!1,y=null,b,x,P,T=()=>l(r,P,b)&&a(r,P)!==0,k=()=>a(s,b)===0||l(s,P,b),C=()=>A||T(),M=()=>!A||k();for(let O=u,R=u;O<=d;++O)x=t[O%o],!x.skip&&(b=c(x[i]),b!==P&&(A=l(b,r,s),y===null&&C()&&(y=a(b,r)===0?O:R),y!==null&&M()&&(g.push(HM({start:y,end:O,loop:h,count:o,style:p})),y=null),R=O,P=b));return y!==null&&g.push(HM({start:y,end:d,loop:h,count:o,style:p})),g}function j0(n,t){let e=[],i=n.segments;for(let r=0;r<i.length;r++){let s=q0(i[r],n.points,t);s.length&&e.push(...s)}return e}function Gq(n,t,e,i){let r=0,s=t-1;if(e&&!i)for(;r<t&&!n[r].skip;)r++;for(;r<t&&n[r].skip;)r++;for(r%=t,e&&(s+=r);s>r&&n[s%t].skip;)s--;return s%=t,{start:r,end:s}}function Kq(n,t,e,i){let r=n.length,s=[],o=t,a=n[t],l;for(l=t+1;l<=e;++l){let c=n[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:t%r,end:(l-1)%r,loop:i}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&s.push({start:t%r,end:o%r,loop:i}),s}function av(n,t){let e=n.points,i=n.options.spanGaps,r=e.length;if(!r)return[];let s=!!n._loop,{start:o,end:a}=Gq(e,r,s,i);if(i===!0)return YM(n,[{start:o,end:a,loop:s}],e,t);let l=a<o?a+r:a,c=!!n._fullLoop&&o===0&&a===r-1;return YM(n,Kq(e,o,l,c),e,t)}function YM(n,t,e,i){return!i||!i.setContext||!e?t:$q(n,t,e,i)}function $q(n,t,e,i){let r=n._chart.getContext(),s=GM(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=e.length,c=[],u=s,d=t[0].start,h=d;function p(g,A,y,b){let x=a?-1:1;if(g!==A){for(g+=l;e[g%l].skip;)g-=x;for(;e[A%l].skip;)A+=x;g%l!==A%l&&(c.push({start:g%l,end:A%l,loop:y,style:b}),u=b,d=A%l)}}for(let g of t){d=a?d:g.start;let A=e[d%l],y;for(h=d+1;h<=g.end;h++){let b=e[h%l];y=GM(i.setContext(yr(r,{type:"segment",p0:A,p1:b,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),Xq(y,u)&&p(d,h-1,g.loop,u),A=b,u=y}d<h-1&&p(d,h-1,g.loop,u)}return c}function GM(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Xq(n,t){if(!t)return!1;let e=[],i=function(r,s){return D0(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(t,i)}var Av=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){let s=e.listeners[r],o=e.duration;s.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=S0.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;let s=i.items,o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,t,"progress")),s.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){let e=this._charts,i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let i=e.items,r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}},es=new Av,hT="transparent",Zq={boolean(n,t,e){return e>.5?t:n},color(n,t,e){let i=M0(n||hT),r=i.valid&&M0(t||hT);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}},yv=class{constructor(t,e,i,r){let s=e[i];r=Go([t.to,r,s,t.from]);let o=Go([t.from,s,r]);this._active=!0,this._fn=t.fn||Zq[t.type||typeof o],this._easing=Vo[t.easing]||Vo.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);let r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=Go([t.to,e,r,t.from]),this._from=Go([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e=t-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to,l;if(this._active=s!==a&&(o||e<i),!this._active){this._target[r]=a,this._notify(!0);return}if(e<0){this._target[r]=s;return}l=e/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){let e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}},Bl=class{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Ge(t))return;let e=Object.keys(bt.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{let s=t[r];if(!Ge(s))return;let o={};for(let a of e)o[a]=s[a];(dt(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,e){let i=e.options,r=Jq(t,i);if(!r)return[];let s=this._createAnimations(r,i);return i.$shared&&Qq(t.options.$animations,i).then(()=>{t.options=i},()=>{}),s}_createAnimations(t,e){let i=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now(),l;for(l=o.length-1;l>=0;--l){let c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(t,e));continue}let u=e[c],d=s[c],h=i.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){t[c]=u;continue}s[c]=d=new yv(h,t,c,u),r.push(d)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}let i=this._createAnimations(t,e);if(i.length)return es.add(this._chart,i),!0}};function Qq(n,t){let e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){let s=n[i[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function Jq(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function pT(n,t){let e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:i?s:r,end:i?r:s}}function ej(n,t,e){if(e===!1)return!1;let i=pT(n,e),r=pT(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function tj(n){let t,e,i,r;return Ge(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function hI(n,t){let e=[],i=n._getSortedDatasetMetas(t),r,s;for(r=0,s=i.length;r<s;++r)e.push(i[r].index);return e}function fT(n,t,e,i={}){let r=n.keys,s=i.mode==="single",o,a,l,c;if(t===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===e){if(u=!0,i.all)continue;break}c=n.values[l],Et(c)&&(s||t===0||Ci(t)===Ci(c))&&(t+=c)}return!u&&!i.all?0:t}function nj(n,t){let{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length),l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:n[u]};return a}function lv(n,t){let e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function ij(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function rj(n){let{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function sj(n,t,e){let i=n[t]||(n[t]={});return i[e]||(i[e]={})}function gT(n,t,e,i){for(let r of t.getMatchingVisibleMetas(i).reverse()){let s=n[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function mT(n,t){let{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=ij(s,o,i),d=t.length,h;for(let p=0;p<d;++p){let g=t[p],{[l]:A,[c]:y}=g,b=g._stacks||(g._stacks={});h=b[c]=sj(r,u,A),h[a]=y,h._top=gT(h,o,!0,i.type),h._bottom=gT(h,o,!1,i.type);let x=h._visualValues||(h._visualValues={});x[a]=y}}function cv(n,t){let e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function oj(n,t){return yr(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function aj(n,t,e){return yr(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function hd(n,t){let e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(let r of t){let s=r._stacks;if(!s||s[i]===void 0||s[i][e]===void 0)return;delete s[i][e],s[i]._visualValues!==void 0&&s[i]._visualValues[e]!==void 0&&delete s[i]._visualValues[e]}}}var uv=n=>n==="reset"||n==="none",_T=(n,t)=>t?n:Object.assign({},n),lj=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:hI(e,!0),values:null},Vs=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,i){this.chart=e,this._ctx=e.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=lv(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&hd(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,i=this._cachedMeta,r=this.getDataset(),s=(h,p,g,A)=>h==="x"?p:h==="r"?A:g,o=i.xAxisID=Ve(r.xAxisID,cv(e,"x")),a=i.yAxisID=Ve(r.yAxisID,cv(e,"y")),l=i.rAxisID=Ve(r.rAxisID,cv(e,"r")),c=i.indexAxis,u=i.iAxisID=s(c,o,a,l),d=i.vAxisID=s(c,a,o,l);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(u),i.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let i=this._cachedMeta;return e===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&w0(this._data,this),e._stacked&&hd(e)}_dataCheck(){let e=this.getDataset(),i=e.data||(e.data=[]),r=this._data;if(Ge(i)){let s=this._cachedMeta;this._data=nj(i,s)}else if(r!==i){if(r){w0(r,this);let s=this._cachedMeta;hd(s),s._parsed=[]}i&&Object.isExtensible(i)&&G1(i,this),this._syncList=[],this._data=i}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let i=this._cachedMeta,r=this.getDataset(),s=!1;this._dataCheck();let o=i._stacked;i._stacked=lv(i.vScale,i),i.stack!==r.stack&&(s=!0,hd(i),i.stack=r.stack),this._resyncElements(e),(s||o!==i._stacked)&&(mT(this,i._parsed),i._stacked=lv(i.vScale,i))}configure(){let e=this.chart.config,i=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),i,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,i){let{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:a}=r,l=o.axis,c=e===0&&i===s.length?!0:r._sorted,u=e>0&&r._parsed[e-1],d,h,p;if(this._parsing===!1)r._parsed=s,r._sorted=!0,p=s;else{dt(s[e])?p=this.parseArrayData(r,s,e,i):Ge(s[e])?p=this.parseObjectData(r,s,e,i):p=this.parsePrimitiveData(r,s,e,i);let g=()=>h[l]===null||u&&h[l]<u[l];for(d=0;d<i;++d)r._parsed[d+e]=h=p[d],c&&(g()&&(c=!1),u=h);r._sorted=c}a&&mT(this,p)}parsePrimitiveData(e,i,r,s){let{iScale:o,vScale:a}=e,l=o.axis,c=a.axis,u=o.getLabels(),d=o===a,h=new Array(s),p,g,A;for(p=0,g=s;p<g;++p)A=p+r,h[p]={[l]:d||o.parse(u[A],A),[c]:a.parse(i[A],A)};return h}parseArrayData(e,i,r,s){let{xScale:o,yScale:a}=e,l=new Array(s),c,u,d,h;for(c=0,u=s;c<u;++c)d=c+r,h=i[d],l[c]={x:o.parse(h[0],d),y:a.parse(h[1],d)};return l}parseObjectData(e,i,r,s){let{xScale:o,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(s),d,h,p,g;for(d=0,h=s;d<h;++d)p=d+r,g=i[p],u[d]={x:o.parse(Ar(g,l),p),y:a.parse(Ar(g,c),p)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,i,r){let s=this.chart,o=this._cachedMeta,a=i[e.axis],l={keys:hI(s,!0),values:i._stacks[e.axis]._visualValues};return fT(l,a,o.index,{mode:r})}updateRangeFromParsed(e,i,r,s){let o=r[i.axis],a=o===null?NaN:o,l=s&&r._stacks[i.axis];s&&l&&(s.values=l,a=fT(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,i){let r=this._cachedMeta,s=r._parsed,o=r._sorted&&e===r.iScale,a=s.length,l=this._getOtherScale(e),c=lj(i,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=rj(l),p,g;function A(){g=s[p];let y=g[l.axis];return!Et(g[e.axis])||d>y||h<y}for(p=0;p<a&&!(!A()&&(this.updateRangeFromParsed(u,e,g,c),o));++p);if(o){for(p=a-1;p>=0;--p)if(!A()){this.updateRangeFromParsed(u,e,g,c);break}}return u}getAllParsedValues(e){let i=this._cachedMeta._parsed,r=[],s,o,a;for(s=0,o=i.length;s<o;++s)a=i[s][e.axis],Et(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(e){let i=this._cachedMeta,r=i.iScale,s=i.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){let i=this._cachedMeta;this.update(e||"default"),i._clip=tj(Ve(this.options.clip,ej(i.xScale,i.yScale,this.getMaxOverflow())))}update(e){}draw(){let e=this._ctx,i=this.chart,r=this._cachedMeta,s=r.data||[],o=i.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop,d;for(r.dataset&&r.dataset.draw(e,o,l,c),d=l;d<l+c;++d){let h=s[d];h.hidden||(h.active&&u?a.push(h):h.draw(e,o))}for(d=0;d<a.length;++d)a[d].draw(e,o)}getStyle(e,i){let r=i?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,i,r){let s=this.getDataset(),o;if(e>=0&&e<this._cachedMeta.data.length){let a=this._cachedMeta.data[e];o=a.$context||(a.$context=aj(this.getContext(),e,a)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=oj(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,i){return this._resolveElementOptions(this.dataElementType.id,i,e)}_resolveElementOptions(e,i="default",r){let s=i==="active",o=this._cachedDataOpts,a=e+"-"+i,l=o[a],c=this.enableOptionSharing&&vn(r);if(l)return _T(l,c);let u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],p=u.getOptionScopes(this.getDataset(),d),g=Object.keys(bt.elements[e]),A=()=>this.getContext(r,s,i),y=u.resolveNamedOptions(p,g,A,h);return y.$shared&&(y.$shared=c,o[a]=Object.freeze(_T(y,c))),y}_resolveAnimations(e,i,r){let s=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,l=o[a];if(l)return l;let c;if(s.options.animation!==!1){let d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,i),p=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(p,this.getContext(e,r,i))}let u=new Bl(s,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,i){return!i||uv(e)||this.chart._animationsDisabled}_getSharedOptions(e,i){let r=this.resolveDataElementOptions(e,i),s=this._sharedOptions,o=this.getSharedOptions(r),a=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,r),{sharedOptions:o,includeOptions:a}}updateElement(e,i,r,s){uv(s)?Object.assign(e,r):this._resolveAnimations(i,s).update(e,r)}updateSharedOptions(e,i,r){e&&!uv(i)&&this._resolveAnimations(void 0,i).update(e,r)}_setStyle(e,i,r,s){e.active=s;let o=this.getStyle(i,s);this._resolveAnimations(i,r,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,i,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,i,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let i=this._data,r=this._cachedMeta.data;for(let[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];let s=r.length,o=i.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,i,r=!0){let s=this._cachedMeta,o=s.data,a=e+i,l,c=u=>{for(u.length+=i,l=u.length-1;l>=a;l--)u[l]=u[l-i]};for(c(o),l=e;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(e,i),r&&this.updateElements(o,e,i,"reset")}updateElements(e,i,r,s){}_removeElements(e,i){let r=this._cachedMeta;if(this._parsing){let s=r._parsed.splice(e,i);r._stacked&&hd(r,s)}r.data.splice(e,i)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[i,r,s]=e;this[i](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,i){i&&this._sync(["_removeElements",e,i]);let r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function cj(n,t){if(!n._cache.$bar){let e=n.getMatchingVisibleMetas(t),i=[];for(let r=0,s=e.length;r<s;r++)i=i.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=b0(i.sort((r,s)=>r-s))}return n._cache.$bar}function uj(n){let t=n.iScale,e=cj(t,n.type),i=t._length,r,s,o,a,l=()=>{o===32767||o===-32768||(vn(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=e.length;r<s;++r)o=t.getPixelForValue(e[r]),l();for(a=void 0,r=0,s=t.ticks.length;r<s;++r)o=t.getPixelForTick(r),l();return i}function dj(n,t,e,i){let r=e.barThickness,s,o;return ot(r)?(s=t.min*e.categoryPercentage,o=e.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:t.pixels[n]-s/2}}function hj(n,t,e,i){let r=t.pixels,s=r[n],o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null,l=e.categoryPercentage;o===null&&(o=s-(a===null?t.end-t.start:a-s)),a===null&&(a=s+s-o);let c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:e.barPercentage,start:c}}function pj(n,t,e,i){let r=e.parse(n[0],i),s=e.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s),l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function pI(n,t,e,i){return dt(n)?pj(n,t,e,i):t[e.axis]=e.parse(n,i),t}function AT(n,t,e,i){let r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,l=[],c,u,d,h;for(c=e,u=e+i;c<u;++c)h=t[c],d={},d[r.axis]=a||r.parse(o[c],c),l.push(pI(h,d,s,c));return l}function dv(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function fj(n,t,e){return n!==0?Ci(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function gj(n){let t,e,i,r,s;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:i,reverse:t,top:r,bottom:s}}function mj(n,t,e,i){let r=t.borderSkipped,s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:l,top:c,bottom:u}=gj(n);r==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?r=c:(e._bottom||0)===i?r=u:(s[yT(u,o,a,l)]=!0,r=c)),s[yT(r,o,a,l)]=!0,n.borderSkipped=s}function yT(n,t,e,i){return i?(n=_j(n,t,e),n=vT(n,e,t)):n=vT(n,t,e),n}function _j(n,t,e){return n===t?e:n===e?t:n}function vT(n,t,e){return n==="start"?t:n==="end"?e:n}function Aj(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}var yj=(()=>{class n extends Vs{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,i,r,s){return AT(e,i,r,s)}parseArrayData(e,i,r,s){return AT(e,i,r,s)}parseObjectData(e,i,r,s){let{iScale:o,vScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=o.axis==="x"?l:c,d=a.axis==="x"?l:c,h=[],p,g,A,y;for(p=r,g=r+s;p<g;++p)y=i[p],A={},A[o.axis]=o.parse(Ar(y,u),p),h.push(pI(Ar(y,d),A,a,p));return h}updateRangeFromParsed(e,i,r,s){super.updateRangeFromParsed(e,i,r,s);let o=r._custom;o&&i===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let i=this._cachedMeta,{iScale:r,vScale:s}=i,o=this.getParsed(e),a=o._custom,l=dv(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();let e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,e)}updateElements(e,i,r,s){let o=s==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:p}=this._getSharedOptions(i,s);for(let g=i;g<i+r;g++){let A=this.getParsed(g),y=o||ot(A[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(g),b=this._calculateBarIndexPixels(g,d),x=(A._stacks||{})[l.axis],P={horizontal:u,base:y.base,enableBorderRadius:!x||dv(A._custom)||a===x._top||a===x._bottom,x:u?y.head:b.center,y:u?b.center:y.head,height:u?b.size:Math.abs(y.size),width:u?Math.abs(y.size):b.size};p&&(P.options=h||this.resolveDataElementOptions(g,e[g].active?"active":s));let T=P.options||e[g].options;mj(P,T,x,a),Aj(P,T,d.ratio),this.updateElement(e[g],g,P,s)}}_getStacks(e,i){let{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),o=r.options.stacked,a=[],l=this._cachedMeta.controller.getParsed(i),c=l&&l[r.axis],u=d=>{let h=d._parsed.find(g=>g[r.axis]===c),p=h&&h[d.vScale.axis];if(ot(p)||isNaN(p))return!0};for(let d of s)if(!(i!==void 0&&u(d))&&((o===!1||a.indexOf(d.stack)===-1||o===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,i,r){let s=this._getStacks(e,r),o=i!==void 0?s.indexOf(i):-1;return o===-1?s.length-1:o}_getRuler(){let e=this.options,i=this._cachedMeta,r=i.iScale,s=[],o,a;for(o=0,a=i.data.length;o<a;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));let l=e.barThickness;return{min:l||uj(i),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){let{_cachedMeta:{vScale:i,_stacked:r,index:s},options:{base:o,minBarLength:a}}=this,l=o||0,c=this.getParsed(e),u=c._custom,d=dv(u),h=c[i.axis],p=0,g=r?this.applyStack(i,c,r):h,A,y;g!==h&&(p=g-h,g=h),d&&(h=u.barStart,g=u.barEnd-u.barStart,h!==0&&Ci(h)!==Ci(u.barEnd)&&(p=0),p+=h);let b=!ot(o)&&!d?o:p,x=i.getPixelForValue(b);if(this.chart.getDataVisibility(e)?A=i.getPixelForValue(p+g):A=x,y=A-x,Math.abs(y)<a){y=fj(y,i,l)*a,h===l&&(x-=y/2);let P=i.getPixelForDecimal(0),T=i.getPixelForDecimal(1),k=Math.min(P,T),C=Math.max(P,T);x=Math.max(Math.min(x,C),k),A=x+y,r&&!d&&(c._stacks[i.axis]._visualValues[s]=i.getValueForPixel(A)-i.getValueForPixel(x))}if(x===i.getPixelForValue(l)){let P=Ci(y)*i.getLineWidthForValue(l)/2;x+=P,y-=P}return{size:y,base:x,head:A,center:A+y/2}}_calculateBarIndexPixels(e,i){let r=i.scale,s=this.options,o=s.skipNull,a=Ve(s.maxBarThickness,1/0),l,c;if(i.grouped){let u=o?this._getStackCount(e):i.stackCount,d=s.barThickness==="flex"?hj(e,i,s,u):dj(e,i,s,u),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);l=d.start+d.chunk*h+d.chunk/2,c=Math.min(a,d.chunk*d.ratio)}else l=r.getPixelForValue(this.getParsed(e)[r.axis],e),c=Math.min(a,i.min*i.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){let e=this._cachedMeta,i=e.vScale,r=e.data,s=r.length,o=0;for(;o<s;++o)this.getParsed(o)[i.axis]!==null&&!r[o].hidden&&r[o].draw(this._ctx)}}return n})(),vj=(()=>{class n extends Vs{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,i,r,s){let o=super.parsePrimitiveData(e,i,r,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+r).radius;return o}parseArrayData(e,i,r,s){let o=super.parseArrayData(e,i,r,s);for(let a=0;a<o.length;a++){let l=i[r+a];o[a]._custom=Ve(l[2],this.resolveDataElementOptions(a+r).radius)}return o}parseObjectData(e,i,r,s){let o=super.parseObjectData(e,i,r,s);for(let a=0;a<o.length;a++){let l=i[r+a];o[a]._custom=Ve(l&&l.r&&+l.r,this.resolveDataElementOptions(a+r).radius)}return o}getMaxOverflow(){let e=this._cachedMeta.data,i=0;for(let r=e.length-1;r>=0;--r)i=Math.max(i,e[r].size(this.resolveDataElementOptions(r))/2);return i>0&&i}getLabelAndValue(e){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(e),l=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y),u=a._custom;return{label:r[e]||"",value:"("+l+", "+c+(u?", "+u:"")+")"}}update(e){let i=this._cachedMeta.data;this.updateElements(i,0,i.length,e)}updateElements(e,i,r,s){let o=s==="reset",{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(i,s),d=a.axis,h=l.axis;for(let p=i;p<i+r;p++){let g=e[p],A=!o&&this.getParsed(p),y={},b=y[d]=o?a.getPixelForDecimal(.5):a.getPixelForValue(A[d]),x=y[h]=o?l.getBasePixel():l.getPixelForValue(A[h]);y.skip=isNaN(b)||isNaN(x),u&&(y.options=c||this.resolveDataElementOptions(p,g.active?"active":s),o&&(y.options.radius=0)),this.updateElement(g,p,y,s)}}resolveDataElementOptions(e,i){let r=this.getParsed(e),s=super.resolveDataElementOptions(e,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let o=s.radius;return i!=="active"&&(s.radius=0),s.radius+=Ve(r&&r._custom,o),s}}return n})();function wj(n,t,e){let i=1,r=1,s=0,o=0;if(t<At){let a=n,l=a+t,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),p=(P,T,k)=>Ho(P,a,l,!0)?1:Math.max(T,T*e,k,k*e),g=(P,T,k)=>Ho(P,a,l,!0)?-1:Math.min(T,T*e,k,k*e),A=p(0,c,d),y=p(Ct,u,h),b=g(st,c,d),x=g(st+Ct,u,h);i=(A-b)/2,r=(y-x)/2,s=-(A+b)/2,o=-(y+x)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}var bd=(()=>{class n extends Vs{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let i=e.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:s}}=e.legend.options;return i.labels.map((o,a)=>{let c=e.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}}};constructor(e,i){super(e,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,i){let r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let o=c=>+r[c];if(Ge(r[e])){let{key:c="value"}=this._parsing;o=u=>+Ar(r[u],c)}let a,l;for(a=e,l=e+i;a<l;++a)s._parsed[a]=o(a)}}_getRotation(){return jt(this.options.rotation-90)}_getCircumference(){return jt(this.options.circumference)}_getRotationExtents(){let e=At,i=-At;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){let s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),a=s._getCircumference();e=Math.min(e,o),i=Math.max(i,o+a)}return{rotation:e,circumference:i-e}}update(e){let i=this.chart,{chartArea:r}=i,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-a)/2,0),c=Math.min(q1(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:A,offsetY:y}=wj(h,d,c),b=(r.width-a)/p,x=(r.height-a)/g,P=Math.max(Math.min(b,x)/2,0),T=m0(this.options.radius,P),k=Math.max(T*c,0),C=(T-k)/this._getVisibleDatasetWeightTotal();this.offsetX=A*T,this.offsetY=y*T,s.total=this.calculateTotal(),this.outerRadius=T-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*u,0),this.updateElements(o,0,o.length,e)}_circumference(e,i){let r=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/At)}updateElements(e,i,r,s){let o=s==="reset",a=this.chart,l=a.chartArea,u=a.options.animation,d=(l.left+l.right)/2,h=(l.top+l.bottom)/2,p=o&&u.animateScale,g=p?0:this.innerRadius,A=p?0:this.outerRadius,{sharedOptions:y,includeOptions:b}=this._getSharedOptions(i,s),x=this._getRotation(),P;for(P=0;P<i;++P)x+=this._circumference(P,o);for(P=i;P<i+r;++P){let T=this._circumference(P,o),k=e[P],C={x:d+this.offsetX,y:h+this.offsetY,startAngle:x,endAngle:x+T,circumference:T,outerRadius:A,innerRadius:g};b&&(C.options=y||this.resolveDataElementOptions(P,k.active?"active":s)),x+=T,this.updateElement(k,P,C,s)}}calculateTotal(){let e=this._cachedMeta,i=e.data,r=0,s;for(s=0;s<i.length;s++){let o=e._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(e){let i=this._cachedMeta.total;return i>0&&!isNaN(e)?At*(Math.abs(e)/i):0}getLabelAndValue(e){let i=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=Yo(i._parsed[e],r.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let i=0,r=this.chart,s,o,a,l,c;if(!e){for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),e=a.data,l=a.controller;break}}if(!e)return 0;for(s=0,o=e.length;s<o;++s)c=l.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(i=Math.max(i,c.borderWidth||0,c.hoverBorderWidth||0));return i}getMaxOffset(e){let i=0;for(let r=0,s=e.length;r<s;++r){let o=this.resolveDataElementOptions(r);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(e){let i=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(i+=this._getRingWeight(r));return i}_getRingWeight(e){return Math.max(Ve(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})(),bj=(()=>{class n extends Vs{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let i=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=i,a=this.chart._animationsDisabled,{start:l,count:c}=x0(i,s,a);this._drawStart=l,this._drawCount=c,E0(i)&&(l=0,c=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;let u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:u},e),this.updateElements(s,l,c,e)}updateElements(e,i,r,s){let o=s==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(i,s),p=a.axis,g=l.axis,{spanGaps:A,segment:y}=this.options,b=Yi(A)?A:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||o||s==="none",P=i+r,T=e.length,k=i>0&&this.getParsed(i-1);for(let C=0;C<T;++C){let M=e[C],O=x?M:{};if(C<i||C>=P){O.skip=!0;continue}let R=this.getParsed(C),q=ot(R[g]),H=O[p]=a.getPixelForValue(R[p],C),Z=O[g]=o||q?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,R,c):R[g],C);O.skip=isNaN(H)||isNaN(Z)||q,O.stop=C>0&&Math.abs(R[p]-k[p])>b,y&&(O.parsed=R,O.raw=u.data[C]),h&&(O.options=d||this.resolveDataElementOptions(C,M.active?"active":s)),x||this.updateElement(M,C,O,s),k=R}}getMaxOverflow(){let e=this._cachedMeta,i=e.dataset,r=i.options&&i.options.borderWidth||0,s=e.data||[];if(!s.length)return r;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,a)/2}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return n})(),fI=(()=>{class n extends Vs{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let i=e.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:s}}=e.legend.options;return i.labels.map((o,a)=>{let c=e.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,i){super(e,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){let i=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=Yo(i._parsed[e].r,r.options.locale);return{label:s[e]||"",value:o}}parseObjectData(e,i,r,s){return O0.bind(this)(e,i,r,s)}update(e){let i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,e)}getMinMax(){let e=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,s)=>{let o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){let e=this.chart,i=e.chartArea,r=e.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),a=Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0),l=(o-a)/e.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,i,r,s){let o=s==="reset",a=this.chart,c=a.options.animation,u=this._cachedMeta.rScale,d=u.xCenter,h=u.yCenter,p=u.getIndexAngle(0)-.5*st,g=p,A,y=360/this.countVisibleElements();for(A=0;A<i;++A)g+=this._computeAngle(A,s,y);for(A=i;A<i+r;A++){let b=e[A],x=g,P=g+this._computeAngle(A,s,y),T=a.getDataVisibility(A)?u.getDistanceFromCenterForValue(this.getParsed(A).r):0;g=P,o&&(c.animateScale&&(T=0),c.animateRotate&&(x=P=p));let k={x:d,y:h,innerRadius:0,outerRadius:T,startAngle:x,endAngle:P,options:this.resolveDataElementOptions(A,b.active?"active":s)};this.updateElement(b,A,k,s)}}countVisibleElements(){let e=this._cachedMeta,i=0;return e.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(e,i,r){return this.chart.getDataVisibility(e)?jt(this.resolveDataElementOptions(e,i).angle||r):0}}return n})(),Sj=(()=>{class n extends bd{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})(),Cj=(()=>{class n extends Vs{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){let i=this._cachedMeta.vScale,r=this.getParsed(e);return{label:i.getLabels()[e],value:""+i.getLabelForValue(r[i.axis])}}parseObjectData(e,i,r,s){return O0.bind(this)(e,i,r,s)}update(e){let i=this._cachedMeta,r=i.dataset,s=i.data||[],o=i.iScale.getLabels();if(r.points=s,e!=="resize"){let a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);let l={_loop:!0,_fullLoop:o.length===s.length,options:a};this.updateElement(r,void 0,l,e)}this.updateElements(s,0,s.length,e)}updateElements(e,i,r,s){let o=this._cachedMeta.rScale,a=s==="reset";for(let l=i;l<i+r;l++){let c=e[l],u=this.resolveDataElementOptions(l,c.active?"active":s),d=o.getPointPositionForValue(l,this.getParsed(l).r),h=a?o.xCenter:d.x,p=a?o.yCenter:d.y,g={x:h,y:p,angle:d.angle,skip:isNaN(h)||isNaN(p),options:u};this.updateElement(c,l,g,s)}}}return n})(),xj=(()=>{class n extends Vs{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(e),l=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y);return{label:r[e]||"",value:"("+l+", "+c+")"}}update(e){let i=this._cachedMeta,{data:r=[]}=i,s=this.chart._animationsDisabled,{start:o,count:a}=x0(i,r,s);if(this._drawStart=o,this._drawCount=a,E0(i)&&(o=0,a=r.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:l,_dataset:c}=i;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=r;let u=this.resolveDatasetElementOptions(e);u.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:u},e)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(r,o,a,e)}addElements(){let{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,i,r,s){let o=s==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,d=this.resolveDataElementOptions(i,s),h=this.getSharedOptions(d),p=this.includeOptions(s,h),g=a.axis,A=l.axis,{spanGaps:y,segment:b}=this.options,x=Yi(y)?y:Number.POSITIVE_INFINITY,P=this.chart._animationsDisabled||o||s==="none",T=i>0&&this.getParsed(i-1);for(let k=i;k<i+r;++k){let C=e[k],M=this.getParsed(k),O=P?C:{},R=ot(M[A]),q=O[g]=a.getPixelForValue(M[g],k),H=O[A]=o||R?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,M,c):M[A],k);O.skip=isNaN(q)||isNaN(H)||R,O.stop=k>0&&Math.abs(M[g]-T[g])>x,b&&(O.parsed=M,O.raw=u.data[k]),p&&(O.options=h||this.resolveDataElementOptions(k,C.active?"active":s)),P||this.updateElement(C,k,O,s),T=M}this.updateSharedOptions(h,s,d)}getMaxOverflow(){let e=this._cachedMeta,i=e.data||[];if(!this.options.showLine){let l=0;for(let c=i.length-1;c>=0;--c)l=Math.max(l,i[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}let r=e.dataset,s=r.options&&r.options.borderWidth||0;if(!i.length)return s;let o=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,a)/2}}return n})(),Ej=Object.freeze({__proto__:null,BarController:yj,BubbleController:vj,DoughnutController:bd,LineController:bj,PieController:Sj,PolarAreaController:fI,RadarController:Cj,ScatterController:xj});function Ko(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var vv=class n{static override(t){Object.assign(n.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Ko()}parse(){return Ko()}format(){return Ko()}add(){return Ko()}diff(){return Ko()}startOf(){return Ko()}endOf(){return Ko()}},Dj={_date:vv};function Mj(n,t,e,i){let{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&s.length){let c=a._reversePixels?H1:Ui;if(i){if(r._sharedOptions){let u=s[0],d=typeof u.getRange=="function"&&u.getRange(t);if(d){let h=c(s,t,e-d),p=c(s,t,e+d);return{lo:h.lo,hi:p.hi}}}}else{let u=c(s,t,e);if(l){let{vScale:d}=r._cachedMeta,{_parsed:h}=n,p=h.slice(0,u.lo+1).reverse().findIndex(A=>!ot(A[d.axis]));u.lo-=Math.max(0,p);let g=h.slice(u.hi).findIndex(A=>!ot(A[d.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:s.length-1}}function Sd(n,t,e,i,r){let s=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=s.length;a<l;++a){let{index:c,data:u}=s[a],{lo:d,hi:h}=Mj(s[a],t,o,r);for(let p=d;p<=h;++p){let g=u[p];g.skip||i(g,c,p)}}}function Tj(n){let t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){let s=t?Math.abs(i.x-r.x):0,o=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function hv(n,t,e,i,r){let s=[];return!r&&!n.isPointInArea(t)||Sd(n,e,t,function(a,l,c){!r&&!zi(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function Ij(n,t,e,i){let r=[];function s(o,a,l){let{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:d}=zo(o,{x:t.x,y:t.y});Ho(d,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return Sd(n,e,t,s),r}function kj(n,t,e,i,r,s){let o=[],a=Tj(e),l=Number.POSITIVE_INFINITY;function c(u,d,h){let p=u.inRange(t.x,t.y,r);if(i&&!p)return;let g=u.getCenterPoint(r);if(!(!!s||n.isPointInArea(g))&&!p)return;let y=a(t,g);y<l?(o=[{element:u,datasetIndex:d,index:h}],l=y):y===l&&o.push({element:u,datasetIndex:d,index:h})}return Sd(n,e,t,c),o}function pv(n,t,e,i,r,s){return!s&&!n.isPointInArea(t)?[]:e==="r"&&!i?Ij(n,t,e,r):kj(n,t,e,i,r,s)}function wT(n,t,e,i,r){let s=[],o=e==="x"?"inXRange":"inYRange",a=!1;return Sd(n,e,t,(l,c,u)=>{l[o]&&l[o](t[e],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,r))}),i&&!a?[]:s}var Pj={evaluateInteractionItems:Sd,modes:{index(n,t,e,i){let r=Jr(t,n),s=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?hv(n,r,s,i,o):pv(n,r,s,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{let u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(n,t,e,i){let r=Jr(t,n),s=e.axis||"xy",o=e.includeInvisible||!1,a=e.intersect?hv(n,r,s,i,o):pv(n,r,s,!1,i,o);if(a.length>0){let l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,t,e,i){let r=Jr(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;return hv(n,r,s,i,o)},nearest(n,t,e,i){let r=Jr(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;return pv(n,r,s,e.intersect,i,o)},x(n,t,e,i){let r=Jr(t,n);return wT(n,r,"x",e.intersect,i)},y(n,t,e,i){let r=Jr(t,n);return wT(n,r,"y",e.intersect,i)}}},gI=["left","top","right","bottom"];function pd(n,t){return n.filter(e=>e.pos===t)}function bT(n,t){return n.filter(e=>gI.indexOf(e.pos)===-1&&e.box.axis===t)}function fd(n,t){return n.sort((e,i)=>{let r=t?i:e,s=t?e:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function Nj(n){let t=[],e,i,r,s,o,a;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:s,options:{stack:o,stackWeight:a=1}}=r,t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}function Oj(n){let t={};for(let e of n){let{stack:i,pos:r,stackWeight:s}=e;if(!i||!gI.includes(r))continue;let o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}function Rj(n,t){let e=Oj(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t,s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];let{fullSize:l}=a.box,c=e[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&t.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&t.availableHeight)}return e}function Fj(n){let t=Nj(n),e=fd(t.filter(c=>c.box.fullSize),!0),i=fd(pd(t,"left"),!0),r=fd(pd(t,"right")),s=fd(pd(t,"top"),!0),o=fd(pd(t,"bottom")),a=bT(t,"x"),l=bT(t,"y");return{fullSize:e,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:pd(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function ST(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function mI(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function Lj(n,t,e,i){let{pos:r,box:s}=e,o=n.maxPadding;if(!Ge(r)){e.size&&(n[r]-=e.size);let d=i[e.stack]||{size:0,count:1};d.size=Math.max(d.size,e.horizontal?s.height:s.width),e.size=d.size/d.count,n[r]+=e.size}s.getPadding&&mI(o,s.getPadding());let a=Math.max(0,t.outerWidth-ST(o,n,"left","right")),l=Math.max(0,t.outerHeight-ST(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:c,other:u}:{same:u,other:c}}function Vj(n){let t=n.maxPadding;function e(i){let r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function Bj(n,t){let e=t.maxPadding;function i(r){let s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],e[o])}),s}return i(n?["left","right"]:["top","bottom"])}function _d(n,t,e,i){let r=[],s,o,a,l,c,u;for(s=0,o=n.length,c=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||t.w,a.height||t.h,Bj(a.horizontal,t));let{same:d,other:h}=Lj(t,e,a,i);c|=d&&r.length,u=u||h,l.fullSize||r.push(a)}return c&&_d(r,t,e,i)||u}function W0(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function CT(n,t,e,i){let r=e.padding,{x:s,y:o}=t;for(let a of n){let l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){let d=t.w*u,h=c.size||l.height;vn(c.start)&&(o=c.start),l.fullSize?W0(l,r.left,o,e.outerWidth-r.right-r.left,h):W0(l,t.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{let d=t.h*u,h=c.size||l.width;vn(c.start)&&(s=c.start),l.fullSize?W0(l,s,r.top,h,e.outerHeight-r.bottom-r.top):W0(l,s,t.top+c.placed,h,d),c.start=s,c.placed+=d,s=l.right}}t.x=s,t.y=o}var Dn={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){let e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;let r=Wt(n.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(e-r.height,0),a=Fj(n.boxes),l=a.vertical,c=a.horizontal;mt(n.boxes,A=>{typeof A.beforeLayout=="function"&&A.beforeLayout()});let u=l.reduce((A,y)=>y.box.options&&y.box.options.display===!1?A:A+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},r);mI(h,Wt(i));let p=Object.assign({maxPadding:h,w:s,h:o,x:r.left,y:r.top},r),g=Rj(l.concat(c),d);_d(a.fullSize,p,d,g),_d(l,p,d,g),_d(c,p,d,g)&&_d(l,p,d,g),Vj(p),CT(a.leftAndTop,p,d,g),p.x+=p.w,p.y+=p.h,CT(a.rightAndBottom,p,d,g),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},mt(a.chartArea,A=>{let y=A.box;Object.assign(y,n.chartArea),y.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}},Z0=class{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}},wv=class extends Z0{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}},$0="$chartjs",qj={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},xT=n=>n===null||n==="";function jj(n,t){let e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[$0]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",xT(r)){let s=L0(n,"width");s!==void 0&&(n.width=s)}if(xT(i))if(n.style.height==="")n.height=n.width/(t||2);else{let s=L0(n,"height");s!==void 0&&(n.height=s)}return n}var _I=rv?{passive:!0}:!1;function Wj(n,t,e){n&&n.addEventListener(t,e,_I)}function Uj(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,_I)}function zj(n,t){let e=qj[n.type]||n.type,{x:i,y:r}=Jr(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Q0(n,t){for(let e of n)if(e===t||e.contains(t))return!0}function Hj(n,t,e){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||Q0(a.addedNodes,i),o=o&&!Q0(a.removedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function Yj(n,t,e){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||Q0(a.removedNodes,i),o=o&&!Q0(a.addedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}var yd=new Map,ET=0;function AI(){let n=window.devicePixelRatio;n!==ET&&(ET=n,yd.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function Gj(n,t){yd.size||window.addEventListener("resize",AI),yd.set(n,t)}function Kj(n){yd.delete(n),yd.size||window.removeEventListener("resize",AI)}function $j(n,t,e){let i=n.canvas,r=i&&dd(i);if(!r)return;let s=C0((a,l)=>{let c=r.clientWidth;e(a,l),c<r.clientWidth&&e()},window),o=new ResizeObserver(a=>{let l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(r),Gj(n,s),o}function fv(n,t,e){e&&e.disconnect(),t==="resize"&&Kj(n)}function Xj(n,t,e){let i=n.canvas,r=C0(s=>{n.ctx!==null&&e(zj(s,n))},n);return Wj(i,t,r),r}var bv=class extends Z0{acquireContext(t,e){let i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(jj(t,e),i):null}releaseContext(t){let e=t.canvas;if(!e[$0])return!1;let i=e[$0].initial;["height","width"].forEach(s=>{let o=i[s];ot(o)?e.removeAttribute(s):e.setAttribute(s,o)});let r=i.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[$0],!0}addEventListener(t,e,i){this.removeEventListener(t,e);let r=t.$proxies||(t.$proxies={}),o={attach:Hj,detach:Yj,resize:$j}[e]||Xj;r[e]=o(t,e,i)}removeEventListener(t,e){let i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:fv,detach:fv,resize:fv}[e]||Uj)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return iv(t,e,i,r)}isAttached(t){let e=t&&dd(t);return!!(e&&e.isConnected)}};function Zj(n){return!ud()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?wv:bv}var on=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){let{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Yi(this.x)&&Yi(this.y)}getProps(t,e){let i=this.$animations;if(!e||!i)return this;let r={};return t.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}};function Qj(n,t){let e=n.options.ticks,i=Jj(n),r=Math.min(e.maxTicksLimit||i,i),s=e.major.enabled?t7(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return n7(t,c,s,o/r),c;let u=e7(s,t,r);if(o>0){let d,h,p=o>1?Math.round((l-a)/(o-1)):null;for(U0(t,c,u,ot(p)?0:a-p,a),d=0,h=o-1;d<h;d++)U0(t,c,u,s[d],s[d+1]);return U0(t,c,u,l,ot(p)?t.length:l+p),c}return U0(t,c,u),c}function Jj(n){let t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function e7(n,t,e){let i=i7(n),r=t.length/e;if(!i)return Math.max(r,1);let s=W1(i);for(let o=0,a=s.length-1;o<a;o++){let l=s[o];if(l>r)return l}return Math.max(r,1)}function t7(n){let t=[],e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function n7(n,t,e,i){let r=0,s=e[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(t.push(n[o]),r++,s=e[r*i])}function U0(n,t,e,i,r){let s=Ve(i,0),o=Math.min(Ve(r,n.length),n.length),a=0,l,c,u;for(e=Math.ceil(e),r&&(l=r-i,e=l/Math.floor(l/e)),u=s;u<0;)a++,u=Math.round(s+a*e);for(c=Math.max(s,0);c<o;c++)c===u&&(t.push(n[c]),a++,u=Math.round(s+a*e))}function i7(n){let t=n.length,e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}var r7=n=>n==="left"?"right":n==="right"?"left":n,DT=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,MT=(n,t)=>Math.min(t||n,n);function TT(n,t){let e=[],i=n.length/t,r=n.length,s=0;for(;s<r;s+=i)e.push(n[Math.floor(s)]);return e}function s7(n,t,e){let i=n.ticks.length,r=Math.min(t,i-1),s=n._startPixel,o=n._endPixel,a=1e-6,l=n.getPixelForTick(r),c;if(!(e&&(i===1?c=Math.max(l-s,o-l):t===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(r-1))/2,l+=r<t?c:-c,l<s-a||l>o+a)))return l}function o7(n,t){mt(n,e=>{let i=e.gc,r=i.length/2,s;if(r>t){for(s=0;s<r;++s)delete e.data[i[s]];i.splice(0,r)}})}function gd(n){return n.drawTicks?n.tickLength:0}function IT(n,t){if(!n.display)return 0;let e=Ot(n.font,t),i=Wt(n.padding);return(dt(n.text)?n.text.length:1)*e.lineHeight+i.height}function a7(n,t){return yr(n,{scale:t,type:"scale"})}function l7(n,t,e){return yr(n,{tick:e,index:t,type:"tick"})}function c7(n,t,e){let i=sd(n);return(e&&t!=="right"||!e&&t==="right")&&(i=r7(i)),i}function u7(n,t,e,i){let{top:r,left:s,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l,d=0,h,p,g,A=o-r,y=a-s;if(n.isHorizontal()){if(p=dn(i,s,a),Ge(e)){let b=Object.keys(e)[0],x=e[b];g=u[b].getPixelForValue(x)+A-t}else e==="center"?g=(c.bottom+c.top)/2+A-t:g=DT(n,e,t);h=a-s}else{if(Ge(e)){let b=Object.keys(e)[0],x=e[b];p=u[b].getPixelForValue(x)-y+t}else e==="center"?p=(c.left+c.right)/2-y+t:p=DT(n,e,t);g=dn(i,o,r),d=e==="left"?-Ct:Ct}return{titleX:p,titleY:g,maxWidth:h,rotation:d}}var Xo=class n extends on{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=Vn(t,Number.POSITIVE_INFINITY),e=Vn(e,Number.NEGATIVE_INFINITY),i=Vn(i,Number.POSITIVE_INFINITY),r=Vn(r,Number.NEGATIVE_INFINITY),{min:Vn(t,i),max:Vn(e,r),minDefined:Et(t),maxDefined:Et(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:e,max:i};let a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),r||(e=Math.min(e,o.min)),s||(i=Math.max(i,o.max));return e=s&&e>i?i:e,i=r&&e>i?e:i,{min:Vn(e,Vn(i,e)),max:Vn(i,Vn(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){pt(this.options.beforeUpdate,[this])}update(t,e,i){let{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=J1(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?TT(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Qj(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){pt(this.options.afterUpdate,[this])}beforeSetDimensions(){pt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){pt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),pt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){pt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e=this.options.ticks,i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i],s.label=pt(e.callback,[s.value,i,t],this)}afterTickToLabelConversion(){pt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){pt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,e=t.ticks,i=MT(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,s=e.maxRotation,o=r,a,l,c;if(!this._isVisible()||!e.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}let u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,p=en(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/i:p/(i-1),d+6>a&&(a=p/(i-(t.offset?.5:1)),l=this.maxHeight-gd(t.grid)-e.padding-IT(t.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=Uo(Math.min(Math.asin(en((u.highest.height+6)/a,-1,1)),Math.asin(en(l/c,-1,1))-Math.asin(en(h/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){pt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){pt(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let l=IT(r,e.options.font);if(a?(t.width=this.maxWidth,t.height=gd(s)+l):(t.height=this.maxHeight,t.width=gd(s)+l),i.display&&this.ticks.length){let{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),p=i.padding*2,g=jt(this.labelRotation),A=Math.cos(g),y=Math.sin(g);if(a){let b=i.mirror?0:y*d.width+A*h.height;t.height=Math.min(this.maxHeight,t.height+b+p)}else{let b=i.mirror?0:A*d.width+y*h.height;t.width=Math.min(this.maxWidth,t.width+b+p)}this._calculatePadding(c,u,y,A)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){let{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),h=0,p=0;l?c?(h=r*t.width,p=i*e.height):(h=i*t.height,p=r*e.width):s==="start"?p=e.width:s==="end"?h=t.width:s!=="inner"&&(h=t.width/2,p=e.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=e.height/2,d=t.height/2;s==="start"?(u=0,d=t.height):s==="end"&&(u=e.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){pt(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)ot(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,i=this.ticks;e<i.length&&(i=TT(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){let{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(e/MT(e,i)),c=0,u=0,d,h,p,g,A,y,b,x,P,T,k;for(d=0;d<e;d+=l){if(g=t[d].label,A=this._resolveTickFontOptions(d),r.font=y=A.string,b=s[y]=s[y]||{data:{},gc:[]},x=A.lineHeight,P=T=0,!ot(g)&&!dt(g))P=Ol(r,b.data,b.gc,P,g),T=x;else if(dt(g))for(h=0,p=g.length;h<p;++h)k=g[h],!ot(k)&&!dt(k)&&(P=Ol(r,b.data,b.gc,P,k),T+=x);o.push(P),a.push(T),c=Math.max(P,c),u=Math.max(T,u)}o7(s,e);let C=o.indexOf(c),M=a.indexOf(u),O=R=>({width:o[R]||0,height:a[R]||0});return{first:O(0),last:O(e-1),widest:O(C),highest:O(M),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return z1(this._alignToPixels?Xr(this.chart,e,0):e)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){let e=this.ticks||[];if(t>=0&&t<e.length){let i=e[t];return i.$context||(i.$context=l7(this.getContext(),t,i))}return this.$context||(this.$context=a7(this.chart.getContext(),this))}_tickSize(){let t=this.options.ticks,e=jt(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=gd(s),p=[],g=a.setContext(this.getContext()),A=g.display?g.width:0,y=A/2,b=function($){return Xr(i,$,A)},x,P,T,k,C,M,O,R,q,H,Z,ne;if(o==="top")x=b(this.bottom),M=this.bottom-h,R=x-y,H=b(t.top)+y,ne=t.bottom;else if(o==="bottom")x=b(this.top),H=t.top,ne=b(t.bottom)-y,M=x+y,R=this.top+h;else if(o==="left")x=b(this.right),C=this.right-h,O=x-y,q=b(t.left)+y,Z=t.right;else if(o==="right")x=b(this.left),q=t.left,Z=b(t.right)-y,C=x+y,O=this.left+h;else if(e==="x"){if(o==="center")x=b((t.top+t.bottom)/2+.5);else if(Ge(o)){let $=Object.keys(o)[0],ee=o[$];x=b(this.chart.scales[$].getPixelForValue(ee))}H=t.top,ne=t.bottom,M=x+y,R=M+h}else if(e==="y"){if(o==="center")x=b((t.left+t.right)/2);else if(Ge(o)){let $=Object.keys(o)[0],ee=o[$];x=b(this.chart.scales[$].getPixelForValue(ee))}C=x-y,O=C-h,q=t.left,Z=t.right}let ce=Ve(r.ticks.maxTicksLimit,d),G=Math.max(1,Math.ceil(d/ce));for(P=0;P<d;P+=G){let $=this.getContext(P),ee=s.setContext($),ye=a.setContext($),de=ee.lineWidth,ge=ee.color,ie=ye.dash||[],ue=ye.dashOffset,me=ee.tickWidth,we=ee.tickColor,Be=ee.tickBorderDash||[],Ce=ee.tickBorderDashOffset;T=s7(this,P,l),T!==void 0&&(k=Xr(i,T,de),c?C=O=q=Z=k:M=R=H=ne=k,p.push({tx1:C,ty1:M,tx2:O,ty2:R,x1:q,y1:H,x2:Z,y2:ne,width:de,color:ge,borderDash:ie,borderDashOffset:ue,tickWidth:me,tickColor:we,tickBorderDash:Be,tickBorderDashOffset:Ce}))}return this._ticksLength=d,this._borderValue=x,p}_computeLabelItems(t){let e=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,h=gd(i.grid),p=h+u,g=d?-u:p,A=-jt(this.labelRotation),y=[],b,x,P,T,k,C,M,O,R,q,H,Z,ne="middle";if(r==="top")C=this.bottom-g,M=this._getXAxisLabelAlignment();else if(r==="bottom")C=this.top+g,M=this._getXAxisLabelAlignment();else if(r==="left"){let G=this._getYAxisLabelAlignment(h);M=G.textAlign,k=G.x}else if(r==="right"){let G=this._getYAxisLabelAlignment(h);M=G.textAlign,k=G.x}else if(e==="x"){if(r==="center")C=(t.top+t.bottom)/2+p;else if(Ge(r)){let G=Object.keys(r)[0],$=r[G];C=this.chart.scales[G].getPixelForValue($)+p}M=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")k=(t.left+t.right)/2-p;else if(Ge(r)){let G=Object.keys(r)[0],$=r[G];k=this.chart.scales[G].getPixelForValue($)}M=this._getYAxisLabelAlignment(h).textAlign}e==="y"&&(l==="start"?ne="top":l==="end"&&(ne="bottom"));let ce=this._getLabelSizes();for(b=0,x=a.length;b<x;++b){P=a[b],T=P.label;let G=s.setContext(this.getContext(b));O=this.getPixelForTick(b)+s.labelOffset,R=this._resolveTickFontOptions(b),q=R.lineHeight,H=dt(T)?T.length:1;let $=H/2,ee=G.color,ye=G.textStrokeColor,de=G.textStrokeWidth,ge=M;o?(k=O,M==="inner"&&(b===x-1?ge=this.options.reverse?"left":"right":b===0?ge=this.options.reverse?"right":"left":ge="center"),r==="top"?c==="near"||A!==0?Z=-H*q+q/2:c==="center"?Z=-ce.highest.height/2-$*q+q:Z=-ce.highest.height+q/2:c==="near"||A!==0?Z=q/2:c==="center"?Z=ce.highest.height/2-$*q:Z=ce.highest.height-H*q,d&&(Z*=-1),A!==0&&!G.showLabelBackdrop&&(k+=q/2*Math.sin(A))):(C=O,Z=(1-H)*q/2);let ie;if(G.showLabelBackdrop){let ue=Wt(G.backdropPadding),me=ce.heights[b],we=ce.widths[b],Be=Z-ue.top,Ce=0-ue.left;switch(ne){case"middle":Be-=me/2;break;case"bottom":Be-=me;break}switch(M){case"center":Ce-=we/2;break;case"right":Ce-=we;break;case"inner":b===x-1?Ce-=we:b>0&&(Ce-=we/2);break}ie={left:Ce,top:Be,width:we+ue.width,height:me+ue.height,color:G.backdropColor}}y.push({label:T,font:R,textOffset:Z,options:{rotation:A,color:ee,strokeColor:ye,strokeWidth:de,textAlign:ge,textBaseline:ne,translation:[k,C],backdrop:ie}})}return y}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-jt(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){let{position:e,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=t+s,l=o.widest.width,c,u;return e==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):e==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:i,top:r,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,s,o),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){let e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),s,o,a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(e.display)for(s=0,o=r.length;s<o;++s){let l=r[s];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:e,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;let a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue,c,u,d,h;this.isHorizontal()?(c=Xr(t,this.left,o)-o/2,u=Xr(t,this.right,a)+a/2,d=h=l):(d=Xr(t,this.top,o)-o/2,h=Xr(t,this.bottom,a)+a/2,c=u=l),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(c,d),e.lineTo(u,h),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;let i=this.ctx,r=this._computeLabelArea();r&&Os(i,r);let s=this.getLabelItems(t);for(let o of s){let a=o.options,l=o.font,c=o.label,u=o.textOffset;Zr(i,c,0,u,l,a)}r&&Rs(i)}drawTitle(){let{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;let s=Ot(i.font),o=Wt(i.padding),a=i.align,l=s.lineHeight/2;e==="bottom"||e==="center"||Ge(e)?(l+=o.bottom,dt(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;let{titleX:c,titleY:u,maxWidth:d,rotation:h}=u7(this,l,e,a);Zr(t,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:h,textAlign:c7(a,e,r),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,i=Ve(t.grid&&t.grid.z,-1),r=Ve(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){let e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[],s,o;for(s=0,o=e.length;s<o;++s){let a=e[s];a[i]===this.id&&(!t||a.type===t)&&r.push(a)}return r}_resolveTickFontOptions(t){let e=this.options.ticks.setContext(this.getContext(t));return Ot(e.font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},Vl=class{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let e=Object.getPrototypeOf(t),i;p7(e)&&(i=this.register(e));let r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,d7(t,o,i),this.override&&bt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){let e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in bt[r]&&(delete bt[r][i],this.override&&delete Ns[i])}};function d7(n,t,e){let i=qo(Object.create(null),[e?bt.get(e):{},bt.get(t),n.defaults]);bt.set(t,i),n.defaultRoutes&&h7(t,n.defaultRoutes),n.descriptors&&bt.describe(t,n.descriptors)}function h7(n,t){Object.keys(t).forEach(e=>{let i=e.split("."),r=i.pop(),s=[n].concat(i).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");bt.route(s,r,l,a)})}function p7(n){return"id"in n&&"defaults"in n}var Sv=class{constructor(){this.controllers=new Vl(Vs,"datasets",!0),this.elements=new Vl(on,"elements"),this.plugins=new Vl(Object,"plugins"),this.scales=new Vl(Xo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{let s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):mt(r,o=>{let a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,i){let r=nd(t);pt(i["before"+r],[],i),e[t](i),pt(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){let r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}},wr=new Sv,Cv=class{constructor(){this._init=[]}notify(t,e,i,r){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));let s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,e,i);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,r){r=r||{};for(let s of t){let o=s.plugin,a=o[i],l=[e,r,s.options];if(pt(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){ot(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let i=t&&t.config,r=Ve(i.options&&i.options.plugins,{}),s=f7(i);return r===!1&&!e?[]:m7(t,s,r,e)}_notifyStateChanges(t){let e=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}};function f7(n){let t={},e=[],i=Object.keys(wr.plugins.items);for(let s=0;s<i.length;s++)e.push(wr.getPlugin(i[s]));let r=n.plugins||[];for(let s=0;s<r.length;s++){let o=r[s];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function g7(n,t){return!t&&n===!1?null:n===!0?{}:n}function m7(n,{plugins:t,localIds:e},i,r){let s=[],o=n.getContext();for(let a of t){let l=a.id,c=g7(i[l],r);c!==null&&s.push({plugin:a,options:_7(n.config,{plugin:a,local:e[l]},c,o)})}return s}function _7(n,{plugin:t,local:e},i,r){let s=n.pluginScopeKeys(t),o=n.getOptionScopes(i,s);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function xv(n,t){let e=bt.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function A7(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function y7(n,t){return n===t?"_index_":"_value_"}function kT(n){if(n==="x"||n==="y"||n==="r")return n}function v7(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Ev(n,...t){if(kT(n))return n;for(let e of t){let i=e.axis||v7(e.position)||n.length>1&&kT(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function PT(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function w7(n,t){if(t.data&&t.data.datasets){let e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return PT(n,"x",e[0])||PT(n,"y",e[0])}return{}}function b7(n,t){let e=Ns[n.type]||{scales:{}},i=t.scales||{},r=xv(n.type,t),s=Object.create(null);return Object.keys(i).forEach(o=>{let a=i[o];if(!Ge(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let l=Ev(o,a,w7(o,n),bt.scales[a.type]),c=y7(l,r),u=e.scales||{};s[o]=jo(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,l=o.indexAxis||xv(a,t),u=(Ns[a]||{}).scales||{};Object.keys(u).forEach(d=>{let h=A7(d,l),p=o[h+"AxisID"]||h;s[p]=s[p]||Object.create(null),jo(s[p],[{axis:h},i[p],u[d]])})}),Object.keys(s).forEach(o=>{let a=s[o];jo(a,[bt.scales[a.type],bt.scale])}),s}function yI(n){let t=n.options||(n.options={});t.plugins=Ve(t.plugins,{}),t.scales=b7(n,t)}function vI(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function S7(n){return n=n||{},n.data=vI(n.data),yI(n),n}var NT=new Map,wI=new Set;function z0(n,t){let e=NT.get(n);return e||(e=t(),NT.set(n,e),wI.add(e)),e}var md=(n,t,e)=>{let i=Ar(t,e);i!==void 0&&n.add(i)},Dv=class{constructor(t){this._config=S7(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=vI(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),yI(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return z0(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return z0(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return z0(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id,i=this.type;return z0(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let i=this._scopeCache,r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){let{options:r,type:s}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;let l=new Set;e.forEach(u=>{t&&(l.add(t),u.forEach(d=>md(l,t,d))),u.forEach(d=>md(l,r,d)),u.forEach(d=>md(l,Ns[s]||{},d)),u.forEach(d=>md(l,bt,d)),u.forEach(d=>md(l,T0,d))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),wI.has(e)&&o.set(e,c),c}chartOptionScopes(){let{options:t,type:e}=this;return[t,Ns[e]||{},bt.datasets[e]||{},{type:e},bt,T0]}resolveNamedOptions(t,e,i,r=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=OT(this._resolverCache,t,r),l=o;if(x7(o,e)){s.$shared=!1,i=yn(i)?i():i;let c=this.createResolver(t,i,a);l=Ps(o,i,c)}for(let c of e)s[c]=l[c];return s}createResolver(t,e,i=[""],r){let{resolver:s}=OT(this._resolverCache,t,i);return Ge(e)?Ps(s,e,void 0,r):s}};function OT(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));let r=e.join(),s=i.get(r);return s||(s={resolver:cd(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}var C7=n=>Ge(n)&&Object.getOwnPropertyNames(n).some(t=>yn(n[t]));function x7(n,t){let{isScriptable:e,isIndexable:i}=N0(n);for(let r of t){let s=e(r),o=i(r),a=(o||s)&&n[r];if(s&&(yn(a)||C7(a))||o&&dt(a))return!0}return!1}var E7="4.4.8",D7=["top","bottom","left","right","chartArea"];function RT(n,t){return n==="top"||n==="bottom"||D7.indexOf(n)===-1&&t==="x"}function FT(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function LT(n){let t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),pt(e&&e.onComplete,[n],t)}function M7(n){let t=n.chart,e=t.options.animation;pt(e&&e.onProgress,[n],t)}function bI(n){return ud()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var X0={},VT=n=>{let t=bI(n);return Object.values(X0).filter(e=>e.canvas===t).pop()};function T7(n,t,e){let i=Object.keys(n);for(let r of i){let s=+r;if(s>=t){let o=n[r];delete n[r],(e>0||s>t)&&(n[s+e]=o)}}}function I7(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}function H0(n,t,e){return n.options.clip?n[e]:t[e]}function k7(n,t){let{xScale:e,yScale:i}=n;return e&&i?{left:H0(e,t,"left"),right:H0(e,t,"right"),top:H0(i,t,"top"),bottom:H0(i,t,"bottom")}:t}var br=(()=>{class n{static defaults=bt;static instances=X0;static overrides=Ns;static registry=wr;static version=E7;static getChart=VT;static register(...e){wr.add(...e),BT()}static unregister(...e){wr.remove(...e),BT()}constructor(e,i){let r=this.config=new Dv(i),s=bI(e),o=VT(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||Zj(s)),this.platform.updateConfig(r);let l=this.platform.acquireContext(s,a.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=B1(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Cv,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=K1(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],X0[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}es.listen(this,"complete",LT),es.listen(this,"progress",M7),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:i},width:r,height:s,_aspectRatio:o}=this;return ot(e)?i&&o?o:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return wr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():F0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return I0(this.canvas,this.ctx),this}stop(){return es.stop(this),this}resize(e,i){es.running(this)?this._resizeBeforeDraw={width:e,height:i}:this._resize(e,i)}_resize(e,i){let r=this.options,s=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,e,i,o),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,F0(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),pt(r.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};mt(i,(r,s)=>{r.id=s})}buildOrUpdateScales(){let e=this.options,i=e.scales,r=this.scales,s=Object.keys(r).reduce((a,l)=>(a[l]=!1,a),{}),o=[];i&&(o=o.concat(Object.keys(i).map(a=>{let l=i[a],c=Ev(a,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),mt(o,a=>{let l=a.options,c=l.id,u=Ev(c,l),d=Ve(l.type,a.dtype);(l.position===void 0||RT(l.position,u)!==RT(a.dposition))&&(l.position=a.dposition),s[c]=!0;let h=null;if(c in r&&r[c].type===d)h=r[c];else{let p=wr.getScale(d);h=new p({id:c,type:d,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(l,e)}),mt(s,(a,l)=>{a||delete r[l]}),mt(r,a=>{Dn.configure(this,a,a.options),Dn.addBox(this,a)})}_updateMetasets(){let e=this._metasets,i=this.data.datasets.length,r=e.length;if(e.sort((s,o)=>s.index-o.index),r>i){for(let s=i;s<r;++s)this._destroyDatasetMeta(s);e.splice(i,r-i)}this._sortedMetasets=e.slice(0).sort(FT("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:i}}=this;e.length>i.length&&delete this._stacks,e.forEach((r,s)=>{i.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let e=[],i=this.data.datasets,r,s;for(this._removeUnreferencedMetasets(),r=0,s=i.length;r<s;r++){let o=i[r],a=this.getDatasetMeta(r),l=o.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=l,a.indexAxis=o.indexAxis||xv(l,this.options),a.order=o.order||0,a.index=r,a.label=""+o.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{let c=wr.getController(l),{datasetElementType:u,dataElementType:d}=bt.datasets[l];Object.assign(c,{dataElementType:wr.getElement(d),datasetElementType:u&&wr.getElement(u)}),a.controller=new c(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){mt(this.data.datasets,(e,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let i=this.config;i.update();let r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){let{controller:h}=this.getDatasetMeta(u),p=!s&&o.indexOf(h)===-1;h.buildOrUpdateElements(p),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||mt(o,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(FT("z","_idx"));let{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){mt(this.scales,e=>{Dn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options,i=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!_0(i,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this,i=this._getUniformDataChanges()||[];for(let{method:r,start:s,count:o}of i){let a=r==="_removeElements"?-o:o;T7(e,s,a)}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let i=this.data.datasets.length,r=o=>new Set(e.filter(a=>a[0]===o).map((a,l)=>l+","+a.splice(1).join(","))),s=r(0);for(let o=1;o<i;o++)if(!_0(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Dn.update(this,this.width,this.height,e);let i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],mt(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let i=0,r=this.data.datasets.length;i<r;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,yn(e)?e({datasetIndex:i}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,i){let r=this.getDatasetMeta(e),s={meta:r,index:e,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(es.has(this)?this.attached&&!es.running(this)&&es.start(this):(this.draw(),LT({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(this.chartArea);for(this._drawDatasets();e<i.length;++e)i[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let i=this._sortedMetasets,r=[],s,o;for(s=0,o=i.length;s<o;++s){let a=i[s];(!e||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let e=this.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i)this._drawDataset(e[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let i=this.ctx,r=e._clip,s=!r.disabled,o=k7(e,this.chartArea),a={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(s&&Os(i,{left:r.left===!1?0:o.left-r.left,right:r.right===!1?this.width:o.right+r.right,top:r.top===!1?0:o.top-r.top,bottom:r.bottom===!1?this.height:o.bottom+r.bottom}),e.controller.draw(),s&&Rs(i),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(e){return zi(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,i,r,s){let o=Pj.modes[i];return typeof o=="function"?o(this,e,r,s):[]}getDatasetMeta(e){let i=this.data.datasets[e],r=this._metasets,s=r.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:e,_dataset:i,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=yr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let i=this.data.datasets[e];if(!i)return!1;let r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!i.hidden}setDatasetVisibility(e,i){let r=this.getDatasetMeta(e);r.hidden=!i}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,i,r){let s=r?"show":"hide",o=this.getDatasetMeta(e),a=o.controller._resolveAnimations(void 0,s);vn(i)?(o.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),a.update(o,{visible:r}),this.update(l=>l.datasetIndex===e?s:void 0))}hide(e,i){this._updateVisibility(e,i,!1)}show(e,i){this._updateVisibility(e,i,!0)}_destroyDatasetMeta(e){let i=this._metasets[e];i&&i.controller&&i.controller._destroy(),delete this._metasets[e]}_stop(){let e,i;for(this.stop(),es.remove(this),e=0,i=this.data.datasets.length;e<i;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:i}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),I0(e,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete X0[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,i=this.platform,r=(o,a)=>{i.addEventListener(this,o,a),e[o]=a},s=(o,a,l)=>{o.offsetX=a,o.offsetY=l,this._eventHandler(o)};mt(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,i=this.platform,r=(c,u)=>{i.addEventListener(this,c,u),e[c]=u},s=(c,u)=>{e[c]&&(i.removeEventListener(this,c,u),delete e[c])},o=(c,u)=>{this.canvas&&this.resize(c,u)},a,l=()=>{s("attach",l),this.attached=!0,this.resize(),r("resize",o),r("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",l)},i.isAttached(this.canvas)?l():a()}unbindEvents(){mt(this._listeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._listeners={},mt(this._responsiveListeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,i,r){let s=r?"set":"remove",o,a,l,c;for(i==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){a=e[l];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let i=this._active||[],r=e.map(({datasetIndex:o,index:a})=>{let l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[a],index:a}});!Fl(r,i)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(e,i,r){return this._plugins.notify(this,e,i,r)}isPluginEnabled(e){return this._plugins._cache.filter(i=>i.plugin.id===e).length===1}_updateHoverStyles(e,i,r){let s=this.options.hover,o=(c,u)=>c.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=o(i,e),l=r?e:o(e,i);a.length&&this.updateHoverStyle(a,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(e,i){let r={event:e,replay:i,cancelable:!0,inChartArea:this.isPointInArea(e)},s=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;let o=this._handleEvent(e,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(e,i,r){let{_active:s=[],options:o}=this,a=i,l=this._getActiveElements(e,s,r,a),c=j1(e),u=I7(e,this._lastEvent,r,c);r&&(this._lastEvent=null,pt(o.onHover,[e,l,this],this),c&&pt(o.onClick,[e,l,this],this));let d=!Fl(l,s);return(d||i)&&(this._active=l,this._updateHoverStyles(l,s,i)),this._lastEvent=u,d}_getActiveElements(e,i,r,s){if(e.type==="mouseout")return[];if(!r)return i;let o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,s)}}return n})();function BT(){return mt(br.instances,n=>n._plugins.invalidate())}function P7(n,t,e){let{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=t,c=r/a;n.beginPath(),n.arc(s,o,a,i-c,e+c),l>r?(c=r/l,n.arc(s,o,l,e+c,i-c,!0)):n.arc(s,o,r,e+Ct,i-Ct),n.closePath(),n.clip()}function N7(n){return ld(n,["outerStart","outerEnd","innerStart","innerEnd"])}function O7(n,t,e,i){let r=N7(n.options.borderRadius),s=(e-t)/2,o=Math.min(s,i*t/2),a=l=>{let c=(e-Math.min(s,l))*i/2;return en(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:en(r.innerStart,0,o),innerEnd:en(r.innerEnd,0,o)}}function Ll(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function J0(n,t,e,i,r,s){let{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+i+e-c,0),h=u>0?u+i+e+c:0,p=0,g=r-l;if(i){let G=u>0?u-i:0,$=d>0?d-i:0,ee=(G+$)/2,ye=ee!==0?g*ee/(ee+i):g;p=(g-ye)/2}let A=Math.max(.001,g*d-e/st)/d,y=(g-A)/2,b=l+y+p,x=r-y-p,{outerStart:P,outerEnd:T,innerStart:k,innerEnd:C}=O7(t,h,d,x-b),M=d-P,O=d-T,R=b+P/M,q=x-T/O,H=h+k,Z=h+C,ne=b+k/H,ce=x-C/Z;if(n.beginPath(),s){let G=(R+q)/2;if(n.arc(o,a,d,R,G),n.arc(o,a,d,G,q),T>0){let de=Ll(O,q,o,a);n.arc(de.x,de.y,T,q,x+Ct)}let $=Ll(Z,x,o,a);if(n.lineTo($.x,$.y),C>0){let de=Ll(Z,ce,o,a);n.arc(de.x,de.y,C,x+Ct,ce+Math.PI)}let ee=(x-C/h+(b+k/h))/2;if(n.arc(o,a,h,x-C/h,ee,!0),n.arc(o,a,h,ee,b+k/h,!0),k>0){let de=Ll(H,ne,o,a);n.arc(de.x,de.y,k,ne+Math.PI,b-Ct)}let ye=Ll(M,b,o,a);if(n.lineTo(ye.x,ye.y),P>0){let de=Ll(M,R,o,a);n.arc(de.x,de.y,P,b-Ct,R)}}else{n.moveTo(o,a);let G=Math.cos(R)*d+o,$=Math.sin(R)*d+a;n.lineTo(G,$);let ee=Math.cos(q)*d+o,ye=Math.sin(q)*d+a;n.lineTo(ee,ye)}n.closePath()}function R7(n,t,e,i,r){let{fullCircles:s,startAngle:o,circumference:a}=t,l=t.endAngle;if(s){J0(n,t,e,i,l,r);for(let c=0;c<s;++c)n.fill();isNaN(a)||(l=o+(a%At||At))}return J0(n,t,e,i,l,r),n.fill(),l}function F7(n,t,e,i,r){let{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h}=l,p=l.borderAlign==="inner";if(!c)return;n.setLineDash(d||[]),n.lineDashOffset=h,p?(n.lineWidth=c*2,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let g=t.endAngle;if(s){J0(n,t,e,i,g,r);for(let A=0;A<s;++A)n.stroke();isNaN(a)||(g=o+(a%At||At))}p&&P7(n,t,g),s||(J0(n,t,e,i,g,r),n.stroke())}var Mv=class extends on{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){let r=this.getProps(["x","y"],i),{angle:s,distance:o}=zo(r,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),h=(this.options.spacing+this.options.borderWidth)/2,p=Ve(d,l-a),g=Ho(s,a,l)&&a!==l,A=p>=At||g,y=Gi(o,c+h,u+h);return A&&y}getCenterPoint(t){let{x:e,y:i,startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,u=(r+s)/2,d=(o+a+c+l)/2;return{x:e+Math.cos(u)*d,y:i+Math.sin(u)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:e,circumference:i}=this,r=(e.offset||0)/4,s=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=i>At?Math.floor(i/At):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*r,Math.sin(a)*r);let l=1-Math.sin(Math.min(st,i||0)),c=r*l;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,R7(t,this,c,s,o),F7(t,this,c,s,o),t.restore()}};function SI(n,t,e=t){n.lineCap=Ve(e.borderCapStyle,t.borderCapStyle),n.setLineDash(Ve(e.borderDash,t.borderDash)),n.lineDashOffset=Ve(e.borderDashOffset,t.borderDashOffset),n.lineJoin=Ve(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=Ve(e.borderWidth,t.borderWidth),n.strokeStyle=Ve(e.borderColor,t.borderColor)}function L7(n,t,e){n.lineTo(e.x,e.y)}function V7(n){return n.stepped?Z1:n.tension||n.cubicInterpolationMode==="monotone"?Q1:L7}function CI(n,t,e={}){let i=n.length,{start:r=0,end:s=i-1}=e,{start:o,end:a}=t,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:t.loop,ilen:c<l&&!u?i+c-l:c-l}}function B7(n,t,e,i){let{points:r,options:s}=t,{count:o,start:a,loop:l,ilen:c}=CI(r,e,i),u=V7(s),{move:d=!0,reverse:h}=i||{},p,g,A;for(p=0;p<=c;++p)g=r[(a+(h?c-p:p))%o],!g.skip&&(d?(n.moveTo(g.x,g.y),d=!1):u(n,A,g,h,s.stepped),A=g);return l&&(g=r[(a+(h?c:0))%o],u(n,A,g,h,s.stepped)),!!l}function q7(n,t,e,i){let r=t.points,{count:s,start:o,ilen:a}=CI(r,e,i),{move:l=!0,reverse:c}=i||{},u=0,d=0,h,p,g,A,y,b,x=T=>(o+(c?a-T:T))%s,P=()=>{A!==y&&(n.lineTo(u,y),n.lineTo(u,A),n.lineTo(u,b))};for(l&&(p=r[x(0)],n.moveTo(p.x,p.y)),h=0;h<=a;++h){if(p=r[x(h)],p.skip)continue;let T=p.x,k=p.y,C=T|0;C===g?(k<A?A=k:k>y&&(y=k),u=(d*u+T)/++d):(P(),n.lineTo(T,k),g=C,d=0,A=y=k),b=k}P()}function Tv(n){let t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?q7:B7}function j7(n){return n.stepped?sv:n.tension||n.cubicInterpolationMode==="monotone"?ov:Kr}function W7(n,t,e,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,i)&&r.closePath()),SI(n,t.options),n.stroke(r)}function U7(n,t,e,i){let{segments:r,options:s}=t,o=Tv(t);for(let a of r)SI(n,s,a.style),n.beginPath(),o(n,t,a,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}var z7=typeof Path2D=="function";function H7(n,t,e,i){z7&&!t.options.segment?W7(n,t,e,i):U7(n,t,e,i)}var ng=(()=>{class n extends on{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,i){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let s=r.spanGaps?this._loop:this._fullLoop;nv(this._points,r,e,s,i),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=av(this,this.options.segment))}first(){let e=this.segments,i=this.points;return e.length&&i[e[0].start]}last(){let e=this.segments,i=this.points,r=e.length;return r&&i[e[r-1].end]}interpolate(e,i){let r=this.options,s=e[i],o=this.points,a=j0(this,{property:i,start:s,end:s});if(!a.length)return;let l=[],c=j7(r),u,d;for(u=0,d=a.length;u<d;++u){let{start:h,end:p}=a[u],g=o[h],A=o[p];if(g===A){l.push(g);continue}let y=Math.abs((s-g[i])/(A[i]-g[i])),b=c(g,A,y,r.stepped);b[i]=e[i],l.push(b)}return l.length===1?l[0]:l}pathSegment(e,i,r){return Tv(this)(e,this,i,r)}path(e,i,r){let s=this.segments,o=Tv(this),a=this._loop;i=i||0,r=r||this.points.length-i;for(let l of s)a&=o(e,this,l,{start:i,end:i+r-1});return!!a}draw(e,i,r,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),H7(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function qT(n,t,e,i){let r=n.options,{[e]:s}=n.getProps([e],i);return Math.abs(t-s)<r.radius+r.hitRadius}var Y7=(()=>{class n extends on{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,r){let s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(e-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,i){return qT(this,e,"x",i)}inYRange(e,i){return qT(this,e,"y",i)}getCenterPoint(e){let{x:i,y:r}=this.getProps(["x","y"],e);return{x:i,y:r}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);let r=i&&e.borderWidth||0;return(i+r)*2}draw(e,i){let r=this.options;this.skip||r.radius<.1||!zi(this,i,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,ad(e,r,this.x,this.y))}getRange(){let e=this.options||{};return e.radius+e.hitRadius}}return n})();function xI(n,t){let{x:e,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],t),a,l,c,u,d;return n.horizontal?(d=o/2,a=Math.min(e,r),l=Math.max(e,r),c=i-d,u=i+d):(d=s/2,a=e-d,l=e+d,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function Ls(n,t,e,i){return n?0:en(t,e,i)}function G7(n,t,e){let i=n.options.borderWidth,r=n.borderSkipped,s=P0(i);return{t:Ls(r.top,s.top,0,e),r:Ls(r.right,s.right,0,t),b:Ls(r.bottom,s.bottom,0,e),l:Ls(r.left,s.left,0,t)}}function K7(n,t,e){let{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=Ki(r),o=Math.min(t,e),a=n.borderSkipped,l=i||Ge(r);return{topLeft:Ls(!l||a.top||a.left,s.topLeft,0,o),topRight:Ls(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Ls(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Ls(!l||a.bottom||a.right,s.bottomRight,0,o)}}function $7(n){let t=xI(n),e=t.right-t.left,i=t.bottom-t.top,r=G7(n,e/2,i/2),s=K7(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function gv(n,t,e,i){let r=t===null,s=e===null,a=n&&!(r&&s)&&xI(n,i);return a&&(r||Gi(t,a.left,a.right))&&(s||Gi(e,a.top,a.bottom))}function X7(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Z7(n,t){n.rect(t.x,t.y,t.w,t.h)}function mv(n,t,e={}){let i=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0,s=(n.x+n.w!==e.x+e.w?t:0)-i,o=(n.y+n.h!==e.y+e.h?t:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+o,radius:n.radius}}var Iv=class extends on{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){let{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=$7(this),a=X7(o.radius)?Qr:Z7;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),a(t,mv(o,e,s)),t.clip(),a(t,mv(s,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,mv(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return gv(this,t,e,i)}inXRange(t,e){return gv(this,t,null,e)}inYRange(t,e){return gv(this,null,t,e)}getCenterPoint(t){let{x:e,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}},Q7=Object.freeze({__proto__:null,ArcElement:Mv,BarElement:Iv,LineElement:ng,PointElement:Y7}),kv=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],jT=kv.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function EI(n){return kv[n%kv.length]}function DI(n){return jT[n%jT.length]}function J7(n,t){return n.borderColor=EI(t),n.backgroundColor=DI(t),++t}function eW(n,t){return n.backgroundColor=n.data.map(()=>EI(t++)),t}function tW(n,t){return n.backgroundColor=n.data.map(()=>DI(t++)),t}function nW(n){let t=0;return(e,i)=>{let r=n.getDatasetMeta(i).controller;r instanceof bd?t=eW(e,t):r instanceof fI?t=tW(e,t):r&&(t=J7(e,t))}}function WT(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function iW(n){return n&&(n.borderColor||n.backgroundColor)}function rW(){return bt.borderColor!=="rgba(0,0,0,0.1)"||bt.backgroundColor!=="rgba(0,0,0,0.1)"}var sW={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;let{data:{datasets:i},options:r}=n.config,{elements:s}=r,o=WT(i)||iW(r)||s&&WT(s)||rW();if(!e.forceOverride&&o)return;let a=nW(n);i.forEach(a)}};function oW(n,t,e,i,r){let s=r.samples||i;if(s>=e)return n.slice(t,t+e);let o=[],a=(e-2)/(s-2),l=0,c=t+e-1,u=t,d,h,p,g,A;for(o[l++]=n[u],d=0;d<s-2;d++){let y=0,b=0,x,P=Math.floor((d+1)*a)+1+t,T=Math.min(Math.floor((d+2)*a)+1,e)+t,k=T-P;for(x=P;x<T;x++)y+=n[x].x,b+=n[x].y;y/=k,b/=k;let C=Math.floor(d*a)+1+t,M=Math.min(Math.floor((d+1)*a)+1,e)+t,{x:O,y:R}=n[u];for(p=g=-1,x=C;x<M;x++)g=.5*Math.abs((O-y)*(n[x].y-R)-(O-n[x].x)*(b-R)),g>p&&(p=g,h=n[x],A=x);o[l++]=h,u=A}return o[l++]=n[c],o}function aW(n,t,e,i){let r=0,s=0,o,a,l,c,u,d,h,p,g,A,y=[],b=t+e-1,x=n[t].x,T=n[b].x-x;for(o=t;o<t+e;++o){a=n[o],l=(a.x-x)/T*i,c=a.y;let k=l|0;if(k===u)c<g?(g=c,d=o):c>A&&(A=c,h=o),r=(s*r+a.x)/++s;else{let C=o-1;if(!ot(d)&&!ot(h)){let M=Math.min(d,h),O=Math.max(d,h);M!==p&&M!==C&&y.push(Ne(re({},n[M]),{x:r})),O!==p&&O!==C&&y.push(Ne(re({},n[O]),{x:r}))}o>0&&C!==p&&y.push(n[C]),y.push(a),u=k,s=0,g=A=c,d=h=p=o}}return y}function MI(n){if(n._decimated){let t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function UT(n){n.data.datasets.forEach(t=>{MI(t)})}function lW(n,t){let e=t.length,i=0,r,{iScale:s}=n,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=en(Ui(t,s.axis,o).lo,0,e-1)),c?r=en(Ui(t,s.axis,a).hi+1,i,e)-i:r=e-i,{start:i,count:r}}var cW={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){UT(n);return}let i=n.width;n.data.datasets.forEach((r,s)=>{let{_data:o,indexAxis:a}=r,l=n.getDatasetMeta(s),c=o||r.data;if(Go([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let u=n.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:d,count:h}=lW(l,c),p=e.threshold||4*i;if(h<=p){MI(r);return}ot(o)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(A){this._data=A}}));let g;switch(e.algorithm){case"lttb":g=oW(c,d,h,i,e);break;case"min-max":g=aW(c,d,h,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=g})},destroy(n){UT(n)}};function uW(n,t,e){let i=n.segments,r=n.points,s=t.points,o=[];for(let a of i){let{start:l,end:c}=a;c=Bv(l,c,r);let u=Pv(e,r[l],r[c],a.loop);if(!t.segments){o.push({source:a,target:u,start:r[l],end:r[c]});continue}let d=j0(t,u);for(let h of d){let p=Pv(e,s[h.start],s[h.end],h.loop),g=q0(a,r,p);for(let A of g)o.push({source:A,target:h,start:{[e]:zT(u,p,"start",Math.max)},end:{[e]:zT(u,p,"end",Math.min)}})}}return o}function Pv(n,t,e,i){if(i)return;let r=t[n],s=e[n];return n==="angle"&&(r=Ln(r),s=Ln(s)),{property:n,start:r,end:s}}function dW(n,t){let{x:e=null,y:i=null}=n||{},r=t.points,s=[];return t.segments.forEach(({start:o,end:a})=>{a=Bv(o,a,r);let l=r[o],c=r[a];i!==null?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):e!==null&&(s.push({x:e,y:l.y}),s.push({x:e,y:c.y}))}),s}function Bv(n,t,e){for(;t>n;t--){let i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function zT(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function TI(n,t){let e=[],i=!1;return dt(n)?(i=!0,e=n):e=dW(n,t),e.length?new ng({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function HT(n){return n&&n.fill!==!1}function hW(n,t,e){let r=n[t].fill,s=[t],o;if(!e)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Et(r))return r;if(o=n[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function pW(n,t,e){let i=_W(n);if(Ge(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Et(r)&&Math.floor(r)===r?fW(i[0],t,r,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function fW(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function gW(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:Ge(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function mW(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:Ge(n)?i=n.value:i=t.getBaseValue(),i}function _W(n){let t=n.options,e=t.fill,i=Ve(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function AW(n){let{scale:t,index:e,line:i}=n,r=[],s=i.segments,o=i.points,a=yW(t,e);a.push(TI({x:null,y:t.bottom},i));for(let l=0;l<s.length;l++){let c=s[l];for(let u=c.start;u<=c.end;u++)vW(r,o[u],a)}return new ng({points:r,options:{}})}function yW(n,t){let e=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){let s=i[r];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}function vW(n,t,e){let i=[];for(let r=0;r<e.length;r++){let s=e[r],{first:o,last:a,point:l}=wW(s,t,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(n.push(l),!a)break}}n.push(...i)}function wW(n,t,e){let i=n.interpolate(t,e);if(!i)return{};let r=i[e],s=n.segments,o=n.points,a=!1,l=!1;for(let c=0;c<s.length;c++){let u=s[c],d=o[u.start][e],h=o[u.end][e];if(Gi(r,d,h)){a=r===d,l=r===h;break}}return{first:a,last:l,point:i}}var eg=class{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){let{x:r,y:s,radius:o}=this;return e=e||{start:0,end:At},t.arc(r,s,o,e.end,e.start,!0),!i.bounds}interpolate(t){let{x:e,y:i,radius:r}=this,s=t.angle;return{x:e+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}};function bW(n){let{chart:t,fill:e,line:i}=n;if(Et(e))return SW(t,e);if(e==="stack")return AW(n);if(e==="shape")return!0;let r=CW(n);return r instanceof eg?r:TI(r,i)}function SW(n,t){let e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function CW(n){return(n.scale||{}).getPointPositionForValue?EW(n):xW(n)}function xW(n){let{scale:t={},fill:e}=n,i=gW(e,t);if(Et(i)){let r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function EW(n){let{scale:t,fill:e}=n,i=t.options,r=t.getLabels().length,s=i.reverse?t.max:t.min,o=mW(e,t,s),a=[];if(i.grid.circular){let l=t.getPointPositionForValue(0,s);return new eg({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(t.getPointPositionForValue(l,o));return a}function _v(n,t,e){let i=bW(t),{line:r,scale:s,axis:o}=t,a=r.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:d=c}=l||{};i&&r.points.length&&(Os(n,e),DW(n,{line:r,target:i,above:u,below:d,area:e,scale:s,axis:o}),Rs(n))}function DW(n,t){let{line:e,target:i,above:r,below:s,area:o,scale:a}=t,l=e._loop?"angle":t.axis;n.save(),l==="x"&&s!==r&&(YT(n,i,o.top),GT(n,{line:e,target:i,color:r,scale:a,property:l}),n.restore(),n.save(),YT(n,i,o.bottom)),GT(n,{line:e,target:i,color:s,scale:a,property:l}),n.restore()}function YT(n,t,e){let{segments:i,points:r}=t,s=!0,o=!1;n.beginPath();for(let a of i){let{start:l,end:c}=a,u=r[l],d=r[Bv(l,c,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,e),n.lineTo(u.x,u.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function GT(n,t){let{line:e,target:i,property:r,color:s,scale:o}=t,a=uW(e,i,r);for(let{source:l,target:c,start:u,end:d}of a){let{style:{backgroundColor:h=s}={}}=l,p=i!==!0;n.save(),n.fillStyle=h,MW(n,o,p&&Pv(r,u,d)),n.beginPath();let g=!!e.pathSegment(n,l),A;if(p){g?n.closePath():KT(n,i,d,r);let y=!!i.pathSegment(n,c,{move:g,reverse:!0});A=g&&y,A||KT(n,i,u,r)}n.closePath(),n.fill(A?"evenodd":"nonzero"),n.restore()}}function MW(n,t,e){let{top:i,bottom:r}=t.chart.chartArea,{property:s,start:o,end:a}=e||{};s==="x"&&(n.beginPath(),n.rect(o,i,a-o,r-i),n.clip())}function KT(n,t,e,i){let r=t.interpolate(e,i);r&&n.lineTo(r.x,r.y)}var TW={id:"filler",afterDatasetsUpdate(n,t,e){let i=(n.data.datasets||[]).length,r=[],s,o,a,l;for(o=0;o<i;++o)s=n.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof ng&&(l={visible:n.isDatasetVisible(o),index:o,fill:pW(a,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=hW(r,o,e.propagate))},beforeDraw(n,t,e){let i=e.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=r.length-1;o>=0;--o){let a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&_v(n.ctx,a,s))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;let i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){let s=i[r].$filler;HT(s)&&_v(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,t,e){let i=t.meta.$filler;!HT(i)||e.drawTime!=="beforeDatasetDraw"||_v(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},$T=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},IW=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index,tg=class extends on{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},e=pt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}let i=t.labels,r=Ot(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=$T(i,s),c,u;e.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a,d=t;s.textAlign="left",s.textBaseline="middle";let h=-1,p=-u;return this.legendItems.forEach((g,A)=>{let y=i+e/2+s.measureText(g.text).width;(A===0||c[c.length-1]+y+2*a>o)&&(d+=u,c[c.length-(A>0?0:1)]=0,p+=u,h++),l[A]={left:0,top:p,row:h,width:y,height:r},c[c.length-1]+=y+a}),d}_fitCols(t,e,i,r){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t,d=a,h=0,p=0,g=0,A=0;return this.legendItems.forEach((y,b)=>{let{itemWidth:x,itemHeight:P}=kW(i,e,s,y,r);b>0&&p+P+2*a>u&&(d+=h+a,c.push({width:h,height:p}),g+=h+a,A++,h=p=0),l[b]={left:g,top:p,col:A,width:x,height:P},h=Math.max(h,x),p+=P+a}),d+=h,c.push({width:h,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Fs(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=dn(i,this.left+r,this.right-this.lineWidths[a]);for(let c of e)a!==c.row&&(a=c.row,l=dn(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+t+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=dn(i,this.top+t+r,this.bottom-this.columnSizes[a].height);for(let c of e)c.col!==a&&(a=c.col,l=dn(i,this.top+t+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;Os(t,this),this._draw(),Rs(t)}}_draw(){let{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:s,labels:o}=t,a=bt.color,l=Fs(t.rtl,this.left,this.width),c=Ot(o.font),{padding:u}=o,d=c.size,h=d/2,p;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;let{boxWidth:g,boxHeight:A,itemHeight:y}=$T(o,d),b=function(C,M,O){if(isNaN(g)||g<=0||isNaN(A)||A<0)return;r.save();let R=Ve(O.lineWidth,1);if(r.fillStyle=Ve(O.fillStyle,a),r.lineCap=Ve(O.lineCap,"butt"),r.lineDashOffset=Ve(O.lineDashOffset,0),r.lineJoin=Ve(O.lineJoin,"miter"),r.lineWidth=R,r.strokeStyle=Ve(O.strokeStyle,a),r.setLineDash(Ve(O.lineDash,[])),o.usePointStyle){let q={radius:A*Math.SQRT2/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:R},H=l.xPlus(C,g/2),Z=M+h;k0(r,q,H,Z,o.pointStyleWidth&&g)}else{let q=M+Math.max((d-A)/2,0),H=l.leftForLtr(C,g),Z=Ki(O.borderRadius);r.beginPath(),Object.values(Z).some(ne=>ne!==0)?Qr(r,{x:H,y:q,w:g,h:A,radius:Z}):r.rect(H,q,g,A),r.fill(),R!==0&&r.stroke()}r.restore()},x=function(C,M,O){Zr(r,O.text,C,M+y/2,c,{strikethrough:O.hidden,textAlign:l.textAlign(O.textAlign)})},P=this.isHorizontal(),T=this._computeTitleHeight();P?p={x:dn(s,this.left+u,this.right-i[0]),y:this.top+u+T,line:0}:p={x:this.left+u,y:dn(s,this.top+T+u,this.bottom-e[0].height),line:0},V0(this.ctx,t.textDirection);let k=y+u;this.legendItems.forEach((C,M)=>{r.strokeStyle=C.fontColor,r.fillStyle=C.fontColor;let O=r.measureText(C.text).width,R=l.textAlign(C.textAlign||(C.textAlign=o.textAlign)),q=g+h+O,H=p.x,Z=p.y;l.setWidth(this.width),P?M>0&&H+q+u>this.right&&(Z=p.y+=k,p.line++,H=p.x=dn(s,this.left+u,this.right-i[p.line])):M>0&&Z+k>this.bottom&&(H=p.x=H+e[p.line].width+u,p.line++,Z=p.y=dn(s,this.top+T+u,this.bottom-e[p.line].height));let ne=l.x(H);if(b(ne,Z,C),H=$1(R,H+g+h,P?H+q:this.right,t.rtl),x(l.x(H),Z,C),P)p.x+=q+u;else if(typeof C.text!="string"){let ce=c.lineHeight;p.y+=II(C,ce)+u}else p.y+=k}),B0(this.ctx,t.textDirection)}drawTitle(){let t=this.options,e=t.title,i=Ot(e.font),r=Wt(e.padding);if(!e.display)return;let s=Fs(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=i.size/2,c=r.top+l,u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=dn(t.align,d,this.right-h);else{let g=this.columnSizes.reduce((A,y)=>Math.max(A,y.height),0);u=c+dn(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}let p=dn(a,d,d+h);o.textAlign=s.textAlign(sd(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,Zr(o,e.text,p,u,i)}_computeTitleHeight(){let t=this.options.title,e=Ot(t.font),i=Wt(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,s;if(Gi(t,this.left,this.right)&&Gi(e,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Gi(t,r.left,r.left+r.width)&&Gi(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){let e=this.options;if(!OW(t.type,e))return;let i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let r=this._hoveredItem,s=IW(r,i);r&&!s&&pt(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!s&&pt(e.onHover,[t,i,this],this)}else i&&pt(e.onClick,[t,i,this],this)}};function kW(n,t,e,i,r){let s=PW(i,n,t,e),o=NW(r,i,t.lineHeight);return{itemWidth:s,itemHeight:o}}function PW(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),t+e.size/2+i.measureText(r).width}function NW(n,t,e){let i=n;return typeof t.text!="string"&&(i=II(t,e)),i}function II(n,t){let e=n.text?n.text.length:0;return t*e}function OW(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var RW={id:"legend",_element:tg,start(n,t,e){let i=n.legend=new tg({ctx:n.ctx,options:e,chart:n});Dn.configure(n,i,e),Dn.addBox(n,i)},stop(n){Dn.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){let i=n.legend;Dn.configure(n,i,e),i.options=e},afterUpdate(n){let t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){let i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{let c=l.controller.getStyle(e?0:void 0),u=Wt(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},vd=class extends on{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;let r=dt(i.text)?i.text.length:1;this._padding=Wt(i.padding);let s=r*Ot(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){let{top:e,left:i,bottom:r,right:s,options:o}=this,a=o.align,l=0,c,u,d;return this.isHorizontal()?(u=dn(a,i,s),d=e+t,c=s-i):(o.position==="left"?(u=i+t,d=dn(a,r,e),l=st*-.5):(u=s-t,d=dn(a,e,r),l=st*.5),c=r-e),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){let t=this.ctx,e=this.options;if(!e.display)return;let i=Ot(e.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Zr(t,e.text,0,0,i,{color:e.color,maxWidth:l,rotation:c,textAlign:sd(e.align),textBaseline:"middle",translation:[o,a]})}};function FW(n,t){let e=new vd({ctx:n.ctx,options:t,chart:n});Dn.configure(n,e,t),Dn.addBox(n,e),n.titleBlock=e}var LW={id:"title",_element:vd,start(n,t,e){FW(n,e)},stop(n){let t=n.titleBlock;Dn.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){let i=n.titleBlock;Dn.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Y0=new WeakMap,VW={id:"subtitle",start(n,t,e){let i=new vd({ctx:n.ctx,options:e,chart:n});Dn.configure(n,i,e),Dn.addBox(n,i),Y0.set(n,i)},stop(n){Dn.removeBox(n,Y0.get(n)),Y0.delete(n)},beforeUpdate(n,t,e){let i=Y0.get(n);Dn.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Ad={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,s=0;for(t=0,e=n.length;t<e;++t){let a=n[t].element;if(a&&a.hasValue()){let l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){let l=n[s].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),u=$r(t,c);u<r&&(r=u,a=l)}}if(a){let l=a.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function vr(n,t){return t&&(dt(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function ts(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function BW(n,t){let{element:e,datasetIndex:i,index:r}=t,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function XT(n,t){let e=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=t,l=Ot(t.bodyFont),c=Ot(t.titleFont),u=Ot(t.footerFont),d=s.length,h=r.length,p=i.length,g=Wt(t.padding),A=g.height,y=0,b=i.reduce((T,k)=>T+k.before.length+k.lines.length+k.after.length,0);if(b+=n.beforeBody.length+n.afterBody.length,d&&(A+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),b){let T=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;A+=p*T+(b-p)*l.lineHeight+(b-1)*t.bodySpacing}h&&(A+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let x=0,P=function(T){y=Math.max(y,e.measureText(T).width+x)};return e.save(),e.font=c.string,mt(n.title,P),e.font=l.string,mt(n.beforeBody.concat(n.afterBody),P),x=t.displayColors?o+2+t.boxPadding:0,mt(i,T=>{mt(T.before,P),mt(T.lines,P),mt(T.after,P)}),x=0,e.font=u.string,mt(n.footer,P),e.restore(),y+=g.width,{width:y,height:A}}function qW(n,t){let{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function jW(n,t,e,i){let{x:r,width:s}=i,o=e.caretSize+e.caretPadding;if(n==="left"&&r+s+o>t.width||n==="right"&&r-s-o<0)return!0}function WW(n,t,e,i){let{x:r,width:s}=e,{width:o,chartArea:{left:a,right:l}}=n,c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),jW(c,n,t,e)&&(c="center"),c}function ZT(n,t,e){let i=e.yAlign||t.yAlign||qW(n,e);return{xAlign:e.xAlign||t.xAlign||WW(n,t,e,i),yAlign:i}}function UW(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function zW(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function QT(n,t,e,i){let{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:l}=e,c=r+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=Ki(o),g=UW(t,a),A=zW(t,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,h)+r:a==="right"&&(g+=Math.max(d,p)+r),{x:en(g,0,i.width-t.width),y:en(A,0,i.height-t.height)}}function G0(n,t,e){let i=Wt(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function JT(n){return vr([],ts(n))}function HW(n,t,e){return yr(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function eI(n,t){let e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}var kI={beforeTitle:Hi,title(n){if(n.length>0){let t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Hi,beforeBody:Hi,beforeLabel:Hi,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");let e=n.formattedValue;return ot(e)||(t+=e),t},labelColor(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Hi,afterBody:Hi,beforeFooter:Hi,footer:Hi,afterFooter:Hi};function Qn(n,t,e,i){let r=n[t].call(e,i);return typeof r>"u"?kI[t].call(e,i):r}var tI=(()=>{class n extends on{static positioners=Ad;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let i=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&i.options.animation&&r.animations,o=new Bl(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=HW(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,i){let{callbacks:r}=i,s=Qn(r,"beforeTitle",this,e),o=Qn(r,"title",this,e),a=Qn(r,"afterTitle",this,e),l=[];return l=vr(l,ts(s)),l=vr(l,ts(o)),l=vr(l,ts(a)),l}getBeforeBody(e,i){return JT(Qn(i.callbacks,"beforeBody",this,e))}getBody(e,i){let{callbacks:r}=i,s=[];return mt(e,o=>{let a={before:[],lines:[],after:[]},l=eI(r,o);vr(a.before,ts(Qn(l,"beforeLabel",this,o))),vr(a.lines,Qn(l,"label",this,o)),vr(a.after,ts(Qn(l,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(e,i){return JT(Qn(i.callbacks,"afterBody",this,e))}getFooter(e,i){let{callbacks:r}=i,s=Qn(r,"beforeFooter",this,e),o=Qn(r,"footer",this,e),a=Qn(r,"afterFooter",this,e),l=[];return l=vr(l,ts(s)),l=vr(l,ts(o)),l=vr(l,ts(a)),l}_createItems(e){let i=this._active,r=this.chart.data,s=[],o=[],a=[],l=[],c,u;for(c=0,u=i.length;c<u;++c)l.push(BW(this.chart,i[c]));return e.filter&&(l=l.filter((d,h,p)=>e.filter(d,h,p,r))),e.itemSort&&(l=l.sort((d,h)=>e.itemSort(d,h,r))),mt(l,d=>{let h=eI(e.callbacks,d);s.push(Qn(h,"labelColor",this,d)),o.push(Qn(h,"labelPointStyle",this,d)),a.push(Qn(h,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(e,i){let r=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let l=Ad[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);let c=this._size=XT(this,r),u=Object.assign({},l,c),d=ZT(this.chart,r,u),h=QT(r,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(e,i,r,s){let o=this.getCaretPosition(e,r,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(e,i,r){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:l}=r,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:h}=Ki(l),{x:p,y:g}=e,{width:A,height:y}=i,b,x,P,T,k,C;return o==="center"?(k=g+y/2,s==="left"?(b=p,x=b-a,T=k+a,C=k-a):(b=p+A,x=b+a,T=k-a,C=k+a),P=b):(s==="left"?x=p+Math.max(c,d)+a:s==="right"?x=p+A-Math.max(u,h)-a:x=this.caretX,o==="top"?(T=g,k=T-a,b=x-a,P=x+a):(T=g+y,k=T+a,b=x+a,P=x-a),C=T),{x1:b,x2:x,x3:P,y1:T,y2:k,y3:C}}drawTitle(e,i,r){let s=this.title,o=s.length,a,l,c;if(o){let u=Fs(r.rtl,this.x,this.width);for(e.x=G0(this,r.titleAlign,r),i.textAlign=u.textAlign(r.titleAlign),i.textBaseline="middle",a=Ot(r.titleFont),l=r.titleSpacing,i.fillStyle=r.titleColor,i.font=a.string,c=0;c<o;++c)i.fillText(s[c],u.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===o&&(e.y+=r.titleMarginBottom-l)}}_drawColorBox(e,i,r,s,o){let a=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:u}=o,d=Ot(o.bodyFont),h=G0(this,"left",o),p=s.x(h),g=c<d.lineHeight?(d.lineHeight-c)/2:0,A=i.y+g;if(o.usePointStyle){let y={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=s.leftForLtr(p,u)+u/2,x=A+c/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,ad(e,y,b,x),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,ad(e,y,b,x)}else{e.lineWidth=Ge(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;let y=s.leftForLtr(p,u),b=s.leftForLtr(s.xPlus(p,1),u-2),x=Ki(a.borderRadius);Object.values(x).some(P=>P!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Qr(e,{x:y,y:A,w:u,h:c,radius:x}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Qr(e,{x:b,y:A+1,w:u-2,h:c-2,radius:x}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(y,A,u,c),e.strokeRect(y,A,u,c),e.fillStyle=a.backgroundColor,e.fillRect(b,A+1,u-2,c-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,i,r){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=r,h=Ot(r.bodyFont),p=h.lineHeight,g=0,A=Fs(r.rtl,this.x,this.width),y=function(R){i.fillText(R,A.x(e.x+g),e.y+p/2),e.y+=p+o},b=A.textAlign(a),x,P,T,k,C,M,O;for(i.textAlign=a,i.textBaseline="middle",i.font=h.string,e.x=G0(this,b,r),i.fillStyle=r.bodyColor,mt(this.beforeBody,y),g=l&&b!=="right"?a==="center"?u/2+d:u+2+d:0,k=0,M=s.length;k<M;++k){for(x=s[k],P=this.labelTextColors[k],i.fillStyle=P,mt(x.before,y),T=x.lines,l&&T.length&&(this._drawColorBox(i,e,k,A,r),p=Math.max(h.lineHeight,c)),C=0,O=T.length;C<O;++C)y(T[C]),p=h.lineHeight;mt(x.after,y)}g=0,p=h.lineHeight,mt(this.afterBody,y),e.y-=o}drawFooter(e,i,r){let s=this.footer,o=s.length,a,l;if(o){let c=Fs(r.rtl,this.x,this.width);for(e.x=G0(this,r.footerAlign,r),e.y+=r.footerMarginTop,i.textAlign=c.textAlign(r.footerAlign),i.textBaseline="middle",a=Ot(r.footerFont),i.fillStyle=r.footerColor,i.font=a.string,l=0;l<o;++l)i.fillText(s[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+r.footerSpacing}}drawBackground(e,i,r,s){let{xAlign:o,yAlign:a}=this,{x:l,y:c}=e,{width:u,height:d}=r,{topLeft:h,topRight:p,bottomLeft:g,bottomRight:A}=Ki(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(l+h,c),a==="top"&&this.drawCaret(e,i,r,s),i.lineTo(l+u-p,c),i.quadraticCurveTo(l+u,c,l+u,c+p),a==="center"&&o==="right"&&this.drawCaret(e,i,r,s),i.lineTo(l+u,c+d-A),i.quadraticCurveTo(l+u,c+d,l+u-A,c+d),a==="bottom"&&this.drawCaret(e,i,r,s),i.lineTo(l+g,c+d),i.quadraticCurveTo(l,c+d,l,c+d-g),a==="center"&&o==="left"&&this.drawCaret(e,i,r,s),i.lineTo(l,c+h),i.quadraticCurveTo(l,c,l+h,c),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(e){let i=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){let a=Ad[e.position].call(this,this._active,this._eventPosition);if(!a)return;let l=this._size=XT(this,e),c=Object.assign({},a,this._size),u=ZT(i,e,c),d=QT(e,c,u,i);(s._to!==d.x||o._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){let i=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(i);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let a=Wt(i.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&l&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,s,i),V0(e,i.textDirection),o.y+=a.top,this.drawTitle(o,e,i),this.drawBody(o,e,i),this.drawFooter(o,e,i),B0(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,i){let r=this._active,s=e.map(({datasetIndex:l,index:c})=>{let u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),o=!Fl(r,s),a=this._positionChanged(s,i);(o||a)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(e,o,i,r),l=this._positionChanged(a,e),c=i||!Fl(a,o)||l;return c&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,i))),c}_getActiveElements(e,i,r,s){let o=this.options;if(e.type==="mouseout")return[];if(!s)return i.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);let a=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&a.reverse(),a}_positionChanged(e,i){let{caretX:r,caretY:s,options:o}=this,a=Ad[o.position].call(this,e,i);return a!==!1&&(r!==a.x||s!==a.y)}}return n})(),YW={id:"tooltip",_element:tI,positioners:Ad,afterInit(n,t,e){e&&(n.tooltip=new tI({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){let t=n.tooltip;if(t&&t._willRender()){let e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",Ne(re({},e),{cancelable:!0}))===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){let e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:kI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},GW=Object.freeze({__proto__:null,Colors:sW,Decimation:cW,Filler:TW,Legend:RW,SubTitle:VW,Title:LW,Tooltip:YW}),KW=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function $W(n,t,e,i){let r=n.indexOf(t);if(r===-1)return KW(n,t,e,i);let s=n.lastIndexOf(t);return r!==s?e:r}var XW=(n,t)=>n===null?null:en(Math.round(n),0,t);function nI(n){let t=this.getLabels();return n>=0&&n<t.length?t[n]:n}var ZW=(()=>{class n extends Xo{static id="category";static defaults={ticks:{callback:nI}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let i=this._addedLabels;if(i.length){let r=this.getLabels();for(let{index:s,label:o}of i)r[s]===o&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,i){if(ot(e))return null;let r=this.getLabels();return i=isFinite(i)&&r[i]===e?i:$W(r,e,Ve(i,e),this._addedLabels),XW(i,r.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),i||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){let e=this.min,i=this.max,r=this.options.offset,s=[],o=this.getLabels();o=e===0&&i===o.length-1?o:o.slice(e,i+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=e;a<=i;a++)s.push({value:a});return s}getLabelForValue(e){return nI.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function QW(n,t){let e=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=n,p=s||1,g=u-1,{min:A,max:y}=t,b=!ot(o),x=!ot(a),P=!ot(c),T=(y-A)/(d+1),k=A0((y-A)/g/p)*p,C,M,O,R;if(k<1e-14&&!b&&!x)return[{value:A},{value:y}];R=Math.ceil(y/k)-Math.floor(A/k),R>g&&(k=A0(R*k/g/p)*p),ot(l)||(C=Math.pow(10,l),k=Math.ceil(k*C)/C),r==="ticks"?(M=Math.floor(A/k)*k,O=Math.ceil(y/k)*k):(M=A,O=y),b&&x&&s&&U1((a-o)/s,k/1e3)?(R=Math.round(Math.min((a-o)/k,u)),k=(a-o)/R,M=o,O=a):P?(M=b?o:M,O=x?a:O,R=c-1,k=(O-M)/R):(R=(O-M)/k,Wo(R,Math.round(R),k/1e3)?R=Math.round(R):R=Math.ceil(R));let q=Math.max(v0(k),v0(M));C=Math.pow(10,ot(l)?q:l),M=Math.round(M*C)/C,O=Math.round(O*C)/C;let H=0;for(b&&(h&&M!==o?(e.push({value:o}),M<o&&H++,Wo(Math.round((M+H*k)*C)/C,o,iI(o,T,n))&&H++):M<o&&H++);H<R;++H){let Z=Math.round((M+H*k)*C)/C;if(x&&Z>a)break;e.push({value:Z})}return x&&h&&O!==a?e.length&&Wo(e[e.length-1].value,a,iI(a,T,n))?e[e.length-1].value=a:e.push({value:a}):(!x||O===a)&&e.push({value:O}),e}function iI(n,t,{horizontal:e,minRotation:i}){let r=jt(i),s=(e?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+n).length;return Math.min(t/s,o)}var ql=class extends Xo{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ot(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this,o=l=>r=e?r:l,a=l=>s=i?s:l;if(t){let l=Ci(r),c=Ci(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),t||o(r-l)}this.min=r,this.max=s}getTickLimit(){let t=this.options.ticks,{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,e=t.ticks,i=this.getTickLimit();i=Math.max(2,i);let r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,o=QW(r,s);return t.bounds==="ticks"&&y0(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let t=this.ticks,e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){let r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Yo(t,this.chart.options.locale,this.options.ticks.format)}},Nv=class extends ql{static id="linear";static defaults={ticks:{callback:od.formatters.numeric}};determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=Et(t)?t:0,this.max=Et(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,i=jt(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}},wd=n=>Math.floor(_r(n)),$o=(n,t)=>Math.pow(10,wd(n)+t);function rI(n){return n/Math.pow(10,wd(n))===1}function sI(n,t,e){let i=Math.pow(10,e),r=Math.floor(n/i);return Math.ceil(t/i)-r}function JW(n,t){let e=t-n,i=wd(e);for(;sI(n,t,i)>10;)i++;for(;sI(n,t,i)<10;)i--;return Math.min(i,wd(n))}function eU(n,{min:t,max:e}){t=Vn(n.min,t);let i=[],r=wd(t),s=JW(t,e),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((t-l)*o)/o,u=Math.floor((t-l)/a/10)*a*10,d=Math.floor((c-u)/Math.pow(10,s)),h=Vn(n.min,Math.round((l+u+d*Math.pow(10,s))*o)/o);for(;h<e;)i.push({value:h,major:rI(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),h=Math.round((l+u+d*Math.pow(10,s))*o)/o;let p=Vn(n.max,h);return i.push({value:p,major:rI(p),significand:d}),i}var Ov=class extends Xo{static id="logarithmic";static defaults={ticks:{callback:od.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let i=ql.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return Et(i)&&i>0?i:null}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=Et(t)?Math.max(0,t):null,this.max=Et(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Et(this._userMin)&&(this.min=t===$o(this.min,0)?$o(this.min,-1):$o(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),i=this.min,r=this.max,s=a=>i=t?i:a,o=a=>r=e?r:a;i===r&&(i<=0?(s(1),o(10)):(s($o(i,-1)),o($o(r,1)))),i<=0&&s($o(r,-1)),r<=0&&o($o(i,1)),this.min=i,this.max=r}buildTicks(){let t=this.options,e={min:this._userMin,max:this._userMax},i=eU(e,this);return t.bounds==="ticks"&&y0(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":Yo(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=_r(t),this._valueRange=_r(this.max)-_r(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(_r(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}};function Rv(n){let t=n.ticks;if(t.display&&n.display){let e=Wt(t.backdropPadding);return Ve(t.font&&t.font.size,bt.font.size)+e.height}return 0}function tU(n,t,e){return e=dt(e)?e:[e],{w:X1(n,t.string,e),h:e.length*t.lineHeight}}function oI(n,t,e,i,r){return n===i||n===r?{start:t-e/2,end:t+e/2}:n<i||n>r?{start:t-e,end:t}:{start:t,end:t+e}}function nU(n){let t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?st/s:0;for(let l=0;l<s;l++){let c=o.setContext(n.getPointLabelContext(l));r[l]=c.padding;let u=n.getPointPosition(l,n.drawingArea+r[l],a),d=Ot(c.font),h=tU(n.ctx,d,n._pointLabels[l]);i[l]=h;let p=Ln(n.getIndexAngle(l)+a),g=Math.round(Uo(p)),A=oI(g,u.x,h.w,0,180),y=oI(g,u.y,h.h,90,270);iU(e,t,p,A,y)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=oU(n,i,r)}function iU(n,t,e,i,r){let s=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e)),a=0,l=0;i.start<t.l?(a=(t.l-i.start)/s,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/s,n.r=Math.max(n.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/o,n.t=Math.min(n.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/o,n.b=Math.max(n.b,t.b+l))}function rU(n,t,e){let i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=e,l=n.getPointPosition(t,i+r+o,s),c=Math.round(Uo(Ln(l.angle+Ct))),u=cU(l.y,a.h,c),d=aU(c),h=lU(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function sU(n,t){if(!t)return!0;let{left:e,top:i,right:r,bottom:s}=n;return!(zi({x:e,y:i},t)||zi({x:e,y:s},t)||zi({x:r,y:i},t)||zi({x:r,y:s},t))}function oU(n,t,e){let i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Rv(s)/2,additionalAngle:o?st/r:0},c;for(let u=0;u<r;u++){l.padding=e[u],l.size=t[u];let d=rU(n,u,l);i.push(d),a==="auto"&&(d.visible=sU(d,c),d.visible&&(c=d))}return i}function aU(n){return n===0||n===180?"center":n<180?"left":"right"}function lU(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function cU(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function uU(n,t,e){let{left:i,top:r,right:s,bottom:o}=e,{backdropColor:a}=t;if(!ot(a)){let l=Ki(t.borderRadius),c=Wt(t.backdropPadding);n.fillStyle=a;let u=i-c.left,d=r-c.top,h=s-i+c.width,p=o-r+c.height;Object.values(l).some(g=>g!==0)?(n.beginPath(),Qr(n,{x:u,y:d,w:h,h:p,radius:l}),n.fill()):n.fillRect(u,d,h,p)}}function dU(n,t){let{ctx:e,options:{pointLabels:i}}=n;for(let r=t-1;r>=0;r--){let s=n._pointLabelItems[r];if(!s.visible)continue;let o=i.setContext(n.getPointLabelContext(r));uU(e,o,s);let a=Ot(o.font),{x:l,y:c,textAlign:u}=s;Zr(e,n._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function PI(n,t,e,i){let{ctx:r}=n;if(e)r.arc(n.xCenter,n.yCenter,t,0,At);else{let s=n.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,t),r.lineTo(s.x,s.y)}}function hU(n,t,e,i,r){let s=n.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||e<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),PI(n,e,o,i),s.closePath(),s.stroke(),s.restore())}function pU(n,t,e){return yr(n,{label:e,index:t,type:"pointLabel"})}var Fv=class extends ql{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:od.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=Wt(Rv(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=Et(t)&&!isNaN(t)?t:0,this.max=Et(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Rv(this.options))}generateTickLabels(t){ql.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{let r=pt(this.options.pointLabels.callback,[e,i],this);return r||r===0?r:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){let t=this.options;t.display&&t.pointLabels.display?nU(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){let e=At/(this._pointLabels.length||1),i=this.options.startAngle||0;return Ln(t*e+jt(i))}getDistanceFromCenterForValue(t){if(ot(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(ot(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){let i=e[t];return pU(this.getContext(),t,i)}}getPointPosition(t,e,i=0){let r=this.getIndexAngle(t)-Ct+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:i,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:s}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let i=this.ctx;i.save(),i.beginPath(),PI(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){let t=this.ctx,e=this.options,{angleLines:i,grid:r,border:s}=e,o=this._pointLabels.length,a,l,c;if(e.pointLabels.display&&dU(this,o),r.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);let h=this.getContext(d),p=r.setContext(h),g=s.setContext(h);hU(this,p,l,o,g)}}),i.display){for(t.save(),a=o-1;a>=0;a--){let u=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(t.lineWidth=h,t.strokeStyle=d,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;let r=this.getIndexAngle(0),s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;let c=i.setContext(this.getContext(l)),u=Ot(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;let d=Wt(c.backdropPadding);t.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}Zr(t,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}},ig={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Jn=Object.keys(ig);function aI(n,t){return n-t}function lI(n,t){if(ot(t))return null;let e=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts,o=t;return typeof i=="function"&&(o=i(o)),Et(o)||(o=typeof i=="string"?e.parse(o,i):e.parse(o)),o===null?null:(r&&(o=r==="week"&&(Yi(s)||s===!0)?e.startOf(o,"isoWeek",s):e.startOf(o,r)),+o)}function cI(n,t,e,i){let r=Jn.length;for(let s=Jn.indexOf(n);s<r-1;++s){let o=ig[Jn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=i)return Jn[s]}return Jn[r-1]}function fU(n,t,e,i,r){for(let s=Jn.length-1;s>=Jn.indexOf(e);s--){let o=Jn[s];if(ig[o].common&&n._adapter.diff(r,i,o)>=t-1)return o}return Jn[e?Jn.indexOf(e):0]}function gU(n){for(let t=Jn.indexOf(n)+1,e=Jn.length;t<e;++t)if(ig[Jn[t]].common)return Jn[t]}function uI(n,t,e){if(!e)n[t]=!0;else if(e.length){let{lo:i,hi:r}=rd(e,t),s=e[i]>=t?e[i]:e[r];n[s]=!0}}function mU(n,t,e,i){let r=n._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value,a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=e[a],l>=0&&(t[l].major=!0);return t}function dI(n,t,e){let i=[],r={},s=t.length,o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,i.push({value:a,major:!1});return s===0||!e?i:mU(n,i,r,e)}var Lv=(()=>{class n extends Xo{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,i={}){let r=e.time||(e.time={}),s=this._adapter=new Dj._date(e.adapters.date);s.init(i),jo(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=i.normalized}parse(e,i){return e===void 0?null:lI(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,i=this._adapter,r=e.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=Et(s)&&!isNaN(s)?s:+i.startOf(Date.now(),r),o=Et(o)&&!isNaN(o)?o:+i.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let e=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(i=e[0],r=e[e.length-1]),{min:i,max:r}}buildTicks(){let e=this.options,i=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,l=Y1(s,o,a);return this._unit=i.unit||(r.autoSkip?cI(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):fU(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:gU(this._unit),this.initOffsets(s),e.reverse&&l.reverse(),dI(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let i=0,r=0,s,o;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?i=1-s:i=(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?r=o:r=(o-this.getDecimalForValue(e[e.length-2]))/2);let a=e.length<3?.5:.25;i=en(i,0,a),r=en(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){let e=this._adapter,i=this.min,r=this.max,s=this.options,o=s.time,a=o.unit||cI(o.minUnit,i,r,this._getLabelCapacity(i)),l=Ve(s.ticks.stepSize,1),c=a==="week"?o.isoWeekday:!1,u=Yi(c)||c===!0,d={},h=i,p,g;if(u&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,u?"day":a),e.diff(r,i,a)>1e5*l)throw new Error(i+" and "+r+" are too far apart with stepSize of "+l+" "+a);let A=s.ticks.source==="data"&&this.getDataTimestamps();for(p=h,g=0;p<r;p=+e.add(p,l,a),g++)uI(d,p,A);return(p===r||s.bounds==="ticks"||g===1)&&uI(d,p,A),Object.keys(d).sort(aI).map(y=>+y)}getLabelForValue(e){let i=this._adapter,r=this.options.time;return r.tooltipFormat?i.format(e,r.tooltipFormat):i.format(e,r.displayFormats.datetime)}format(e,i){let s=this.options.time.displayFormats,o=this._unit,a=i||s[o];return this._adapter.format(e,a)}_tickFormatFunction(e,i,r,s){let o=this.options,a=o.ticks.callback;if(a)return pt(a,[e,i,r],this);let l=o.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],h=u&&l[u],p=r[i],g=u&&h&&p&&p.major;return this._adapter.format(e,s||(g?h:d))}generateTickLabels(e){let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i],s.label=this._tickFormatFunction(s.value,i,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let i=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(e){let i=this._offsets,r=this.getDecimalForPixel(e)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){let i=this.options.ticks,r=this.ctx.measureText(e).width,s=jt(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),a=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*o+l*a,h:r*a+l*o}}_getLabelCapacity(e){let i=this.options.time,r=i.displayFormats,s=r[i.unit]||r.millisecond,o=this._tickFormatFunction(e,0,dI(this,[e],this._majorUnit),s),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],i,r;if(e.length)return e;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,r=s.length;i<r;++i)e=e.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){let e=this._cache.labels||[],i,r;if(e.length)return e;let s=this.getLabels();for(i=0,r=s.length;i<r;++i)e.push(lI(this,s[i]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return b0(e.sort(aI))}}return n})();function K0(n,t,e){let i=0,r=n.length-1,s,o,a,l;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=Ui(n,"pos",t)),{pos:s,time:a}=n[i],{pos:o,time:l}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=Ui(n,"time",t)),{time:s,pos:a}=n[i],{time:o,pos:l}=n[r]);let c=o-s;return c?a+(l-a)*(t-s)/c:a}var Vv=class extends Lv{static id="timeseries";static defaults=Lv.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=K0(e,this.min),this._tableRange=K0(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let{min:e,max:i}=this,r=[],s=[],o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=i&&r.push(c);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){let t=this.min,e=this.max,i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(K0(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return K0(this._table,i*this._tableRange+this._minPos,!0)}},_U=Object.freeze({__proto__:null,CategoryScale:ZW,LinearScale:Nv,LogarithmicScale:Ov,RadialLinearScale:Fv,TimeScale:Lv,TimeSeriesScale:Vv}),rg=[Ej,Q7,GW,_U];var AU=typeof global=="object"&&global&&global.Object===Object&&global,sg=AU;var yU=typeof self=="object"&&self&&self.Object===Object&&self,vU=sg||yU||Function("return this")(),xi=vU;var wU=xi.Symbol,jl=wU;var NI=Object.prototype,bU=NI.hasOwnProperty,SU=NI.toString,Cd=jl?jl.toStringTag:void 0;function CU(n){var t=bU.call(n,Cd),e=n[Cd];try{n[Cd]=void 0;var i=!0}catch{}var r=SU.call(n);return i&&(t?n[Cd]=e:delete n[Cd]),r}var OI=CU;var xU=Object.prototype,EU=xU.toString;function DU(n){return EU.call(n)}var RI=DU;var MU="[object Null]",TU="[object Undefined]",FI=jl?jl.toStringTag:void 0;function IU(n){return n==null?n===void 0?TU:MU:FI&&FI in Object(n)?OI(n):RI(n)}var Bs=IU;function kU(n){return n!=null&&typeof n=="object"}var Sr=kU;var PU=Array.isArray,xd=PU;function NU(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var ei=NU;function OU(n){return n}var og=OU;var RU="[object AsyncFunction]",FU="[object Function]",LU="[object GeneratorFunction]",VU="[object Proxy]";function BU(n){if(!ei(n))return!1;var t=Bs(n);return t==FU||t==LU||t==RU||t==VU}var Wl=BU;var qU=xi["__core-js_shared__"],ag=qU;var LI=function(){var n=/[^.]+$/.exec(ag&&ag.keys&&ag.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function jU(n){return!!LI&&LI in n}var VI=jU;var WU=Function.prototype,UU=WU.toString;function zU(n){if(n!=null){try{return UU.call(n)}catch{}try{return n+""}catch{}}return""}var BI=zU;var HU=/[\\^$.*+?()[\]{}|]/g,YU=/^\[object .+?Constructor\]$/,GU=Function.prototype,KU=Object.prototype,$U=GU.toString,XU=KU.hasOwnProperty,ZU=RegExp("^"+$U.call(XU).replace(HU,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function QU(n){if(!ei(n)||VI(n))return!1;var t=Wl(n)?ZU:YU;return t.test(BI(n))}var qI=QU;function JU(n,t){return n?.[t]}var jI=JU;function ez(n,t){var e=jI(n,t);return qI(e)?e:void 0}var Ul=ez;var WI=Object.create,tz=function(){function n(){}return function(t){if(!ei(t))return{};if(WI)return WI(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}}(),UI=tz;function nz(n,t,e){switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}var zI=nz;function iz(n,t){var e=-1,i=n.length;for(t||(t=Array(i));++e<i;)t[e]=n[e];return t}var HI=iz;var rz=800,sz=16,oz=Date.now;function az(n){var t=0,e=0;return function(){var i=oz(),r=sz-(i-e);if(e=i,r>0){if(++t>=rz)return arguments[0]}else t=0;return n.apply(void 0,arguments)}}var YI=az;function lz(n){return function(){return n}}var GI=lz;var cz=function(){try{var n=Ul(Object,"defineProperty");return n({},"",{}),n}catch{}}(),zl=cz;var uz=zl?function(n,t){return zl(n,"toString",{configurable:!0,enumerable:!1,value:GI(t),writable:!0})}:og,KI=uz;var dz=YI(KI),$I=dz;var hz=9007199254740991,pz=/^(?:0|[1-9]\d*)$/;function fz(n,t){var e=typeof n;return t=t??hz,!!t&&(e=="number"||e!="symbol"&&pz.test(n))&&n>-1&&n%1==0&&n<t}var lg=fz;function gz(n,t,e){t=="__proto__"&&zl?zl(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}var Hl=gz;function mz(n,t){return n===t||n!==n&&t!==t}var qs=mz;var _z=Object.prototype,Az=_z.hasOwnProperty;function yz(n,t,e){var i=n[t];(!(Az.call(n,t)&&qs(i,e))||e===void 0&&!(t in n))&&Hl(n,t,e)}var XI=yz;function vz(n,t,e,i){var r=!e;e||(e={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=i?i(e[a],n[a],a,e,n):void 0;l===void 0&&(l=n[a]),r?Hl(e,a,l):XI(e,a,l)}return e}var ZI=vz;var QI=Math.max;function wz(n,t,e){return t=QI(t===void 0?n.length-1:t,0),function(){for(var i=arguments,r=-1,s=QI(i.length-t,0),o=Array(s);++r<s;)o[r]=i[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=i[r];return a[t]=e(o),zI(n,this,a)}}var JI=wz;function bz(n,t){return $I(JI(n,t,og),n+"")}var ek=bz;var Sz=9007199254740991;function Cz(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Sz}var cg=Cz;function xz(n){return n!=null&&cg(n.length)&&!Wl(n)}var Yl=xz;function Ez(n,t,e){if(!ei(e))return!1;var i=typeof t;return(i=="number"?Yl(e)&&lg(t,e.length):i=="string"&&t in e)?qs(e[t],n):!1}var tk=Ez;function Dz(n){return ek(function(t,e){var i=-1,r=e.length,s=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(s=n.length>3&&typeof s=="function"?(r--,s):void 0,o&&tk(e[0],e[1],o)&&(s=r<3?void 0:s,r=1),t=Object(t);++i<r;){var a=e[i];a&&n(t,a,i,s)}return t})}var nk=Dz;var Mz=Object.prototype;function Tz(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||Mz;return n===e}var ug=Tz;function Iz(n,t){for(var e=-1,i=Array(n);++e<n;)i[e]=t(e);return i}var ik=Iz;var kz="[object Arguments]";function Pz(n){return Sr(n)&&Bs(n)==kz}var qv=Pz;var rk=Object.prototype,Nz=rk.hasOwnProperty,Oz=rk.propertyIsEnumerable,Rz=qv(function(){return arguments}())?qv:function(n){return Sr(n)&&Nz.call(n,"callee")&&!Oz.call(n,"callee")},Ed=Rz;function Fz(){return!1}var sk=Fz;var lk=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ok=lk&&typeof module=="object"&&module&&!module.nodeType&&module,Lz=ok&&ok.exports===lk,ak=Lz?xi.Buffer:void 0,Vz=ak?ak.isBuffer:void 0,Bz=Vz||sk,dg=Bz;var qz="[object Arguments]",jz="[object Array]",Wz="[object Boolean]",Uz="[object Date]",zz="[object Error]",Hz="[object Function]",Yz="[object Map]",Gz="[object Number]",Kz="[object Object]",$z="[object RegExp]",Xz="[object Set]",Zz="[object String]",Qz="[object WeakMap]",Jz="[object ArrayBuffer]",eH="[object DataView]",tH="[object Float32Array]",nH="[object Float64Array]",iH="[object Int8Array]",rH="[object Int16Array]",sH="[object Int32Array]",oH="[object Uint8Array]",aH="[object Uint8ClampedArray]",lH="[object Uint16Array]",cH="[object Uint32Array]",Rt={};Rt[tH]=Rt[nH]=Rt[iH]=Rt[rH]=Rt[sH]=Rt[oH]=Rt[aH]=Rt[lH]=Rt[cH]=!0;Rt[qz]=Rt[jz]=Rt[Jz]=Rt[Wz]=Rt[eH]=Rt[Uz]=Rt[zz]=Rt[Hz]=Rt[Yz]=Rt[Gz]=Rt[Kz]=Rt[$z]=Rt[Xz]=Rt[Zz]=Rt[Qz]=!1;function uH(n){return Sr(n)&&cg(n.length)&&!!Rt[Bs(n)]}var ck=uH;function dH(n){return function(t){return n(t)}}var uk=dH;var dk=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Dd=dk&&typeof module=="object"&&module&&!module.nodeType&&module,hH=Dd&&Dd.exports===dk,jv=hH&&sg.process,pH=function(){try{var n=Dd&&Dd.require&&Dd.require("util").types;return n||jv&&jv.binding&&jv.binding("util")}catch{}}(),Wv=pH;var hk=Wv&&Wv.isTypedArray,fH=hk?uk(hk):ck,hg=fH;var gH=Object.prototype,mH=gH.hasOwnProperty;function _H(n,t){var e=xd(n),i=!e&&Ed(n),r=!e&&!i&&dg(n),s=!e&&!i&&!r&&hg(n),o=e||i||r||s,a=o?ik(n.length,String):[],l=a.length;for(var c in n)(t||mH.call(n,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||lg(c,l)))&&a.push(c);return a}var pk=_H;function AH(n,t){return function(e){return n(t(e))}}var fk=AH;function yH(n){var t=[];if(n!=null)for(var e in Object(n))t.push(e);return t}var gk=yH;var vH=Object.prototype,wH=vH.hasOwnProperty;function bH(n){if(!ei(n))return gk(n);var t=ug(n),e=[];for(var i in n)i=="constructor"&&(t||!wH.call(n,i))||e.push(i);return e}var mk=bH;function SH(n){return Yl(n)?pk(n,!0):mk(n)}var pg=SH;var CH=Ul(Object,"create"),ns=CH;function xH(){this.__data__=ns?ns(null):{},this.size=0}var _k=xH;function EH(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}var Ak=EH;var DH="__lodash_hash_undefined__",MH=Object.prototype,TH=MH.hasOwnProperty;function IH(n){var t=this.__data__;if(ns){var e=t[n];return e===DH?void 0:e}return TH.call(t,n)?t[n]:void 0}var yk=IH;var kH=Object.prototype,PH=kH.hasOwnProperty;function NH(n){var t=this.__data__;return ns?t[n]!==void 0:PH.call(t,n)}var vk=NH;var OH="__lodash_hash_undefined__";function RH(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=ns&&t===void 0?OH:t,this}var wk=RH;function Gl(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}Gl.prototype.clear=_k;Gl.prototype.delete=Ak;Gl.prototype.get=yk;Gl.prototype.has=vk;Gl.prototype.set=wk;var Uv=Gl;function FH(){this.__data__=[],this.size=0}var bk=FH;function LH(n,t){for(var e=n.length;e--;)if(qs(n[e][0],t))return e;return-1}var js=LH;var VH=Array.prototype,BH=VH.splice;function qH(n){var t=this.__data__,e=js(t,n);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():BH.call(t,e,1),--this.size,!0}var Sk=qH;function jH(n){var t=this.__data__,e=js(t,n);return e<0?void 0:t[e][1]}var Ck=jH;function WH(n){return js(this.__data__,n)>-1}var xk=WH;function UH(n,t){var e=this.__data__,i=js(e,n);return i<0?(++this.size,e.push([n,t])):e[i][1]=t,this}var Ek=UH;function Kl(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}Kl.prototype.clear=bk;Kl.prototype.delete=Sk;Kl.prototype.get=Ck;Kl.prototype.has=xk;Kl.prototype.set=Ek;var Ws=Kl;var zH=Ul(xi,"Map"),fg=zH;function HH(){this.size=0,this.__data__={hash:new Uv,map:new(fg||Ws),string:new Uv}}var Dk=HH;function YH(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}var Mk=YH;function GH(n,t){var e=n.__data__;return Mk(t)?e[typeof t=="string"?"string":"hash"]:e.map}var Us=GH;function KH(n){var t=Us(this,n).delete(n);return this.size-=t?1:0,t}var Tk=KH;function $H(n){return Us(this,n).get(n)}var Ik=$H;function XH(n){return Us(this,n).has(n)}var kk=XH;function ZH(n,t){var e=Us(this,n),i=e.size;return e.set(n,t),this.size+=e.size==i?0:1,this}var Pk=ZH;function $l(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}$l.prototype.clear=Dk;$l.prototype.delete=Tk;$l.prototype.get=Ik;$l.prototype.has=kk;$l.prototype.set=Pk;var Nk=$l;var QH=fk(Object.getPrototypeOf,Object),gg=QH;var JH="[object Object]",eY=Function.prototype,tY=Object.prototype,Ok=eY.toString,nY=tY.hasOwnProperty,iY=Ok.call(Object);function rY(n){if(!Sr(n)||Bs(n)!=JH)return!1;var t=gg(n);if(t===null)return!0;var e=nY.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&Ok.call(e)==iY}var Rk=rY;function sY(){this.__data__=new Ws,this.size=0}var Fk=sY;function oY(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}var Lk=oY;function aY(n){return this.__data__.get(n)}var Vk=aY;function lY(n){return this.__data__.has(n)}var Bk=lY;var cY=200;function uY(n,t){var e=this.__data__;if(e instanceof Ws){var i=e.__data__;if(!fg||i.length<cY-1)return i.push([n,t]),this.size=++e.size,this;e=this.__data__=new Nk(i)}return e.set(n,t),this.size=e.size,this}var qk=uY;function Xl(n){var t=this.__data__=new Ws(n);this.size=t.size}Xl.prototype.clear=Fk;Xl.prototype.delete=Lk;Xl.prototype.get=Vk;Xl.prototype.has=Bk;Xl.prototype.set=qk;var jk=Xl;var Hk=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Wk=Hk&&typeof module=="object"&&module&&!module.nodeType&&module,dY=Wk&&Wk.exports===Hk,Uk=dY?xi.Buffer:void 0,zk=Uk?Uk.allocUnsafe:void 0;function hY(n,t){if(t)return n.slice();var e=n.length,i=zk?zk(e):new n.constructor(e);return n.copy(i),i}var Yk=hY;var pY=xi.Uint8Array,zv=pY;function fY(n){var t=new n.constructor(n.byteLength);return new zv(t).set(new zv(n)),t}var Gk=fY;function gY(n,t){var e=t?Gk(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}var Kk=gY;function mY(n){return typeof n.constructor=="function"&&!ug(n)?UI(gg(n)):{}}var $k=mY;function _Y(n){return function(t,e,i){for(var r=-1,s=Object(t),o=i(t),a=o.length;a--;){var l=o[n?a:++r];if(e(s[l],l,s)===!1)break}return t}}var Xk=_Y;var AY=Xk(),Zk=AY;function yY(n,t,e){(e!==void 0&&!qs(n[t],e)||e===void 0&&!(t in n))&&Hl(n,t,e)}var Md=yY;function vY(n){return Sr(n)&&Yl(n)}var Qk=vY;function wY(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}var Td=wY;function bY(n){return ZI(n,pg(n))}var Jk=bY;function SY(n,t,e,i,r,s,o){var a=Td(n,e),l=Td(t,e),c=o.get(l);if(c){Md(n,e,c);return}var u=s?s(a,l,e+"",n,t,o):void 0,d=u===void 0;if(d){var h=xd(l),p=!h&&dg(l),g=!h&&!p&&hg(l);u=l,h||p||g?xd(a)?u=a:Qk(a)?u=HI(a):p?(d=!1,u=Yk(l,!0)):g?(d=!1,u=Kk(l,!0)):u=[]:Rk(l)||Ed(l)?(u=a,Ed(a)?u=Jk(a):(!ei(a)||Wl(a))&&(u=$k(l))):d=!1}d&&(o.set(l,u),r(u,l,i,s,o),o.delete(l)),Md(n,e,u)}var eP=SY;function tP(n,t,e,i,r){n!==t&&Zk(t,function(s,o){if(r||(r=new jk),ei(s))eP(n,t,o,e,tP,i,r);else{var a=i?i(Td(n,o),s,o+"",n,t,r):void 0;a===void 0&&(a=s),Md(n,o,a)}},pg)}var nP=tP;var CY=nk(function(n,t,e){nP(n,t,e)}),mg=CY;var iP=new Se("Configuration for ngCharts");function rP(...n){return{registerables:[...rg,...n]}}function sP(...n){let t=mg({},...n);return{provide:iP,useValue:t}}var xY=(()=>{class n{constructor(){this.colorschemesOptions=new Qt(void 0)}setColorschemesOptions(e){this.pColorschemesOptions=e,this.colorschemesOptions.next(e)}getColorschemesOptions(){return this.pColorschemesOptions}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hv=(()=>{class n{constructor(e,i,r,s){this.zone=i,this.themeService=r,this.type="bar",this.plugins=[],this.chartClick=new Nt,this.chartHover=new Nt,this.subs=[],this.themeOverrides={},s?.registerables&&br.register(...s.registerables),s?.defaults&&bt.set(s.defaults),this.ctx=e.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(dp()).subscribe(o=>this.themeChanged(o)))}ngOnChanges(e){let i=["type"],r=Object.getOwnPropertyNames(e);if(r.some(s=>i.includes(s))||r.every(s=>e[s].isFirstChange()))this.render();else{let s=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,s.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,s.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,s.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(e=>e.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new br(this.ctx,this.getChartConfiguration()))}update(e){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(e))}hideDataset(e,i){this.chart&&(this.chart.getDatasetMeta(e).hidden=i,this.update())}isDatasetHidden(e){return this.chart?.getDatasetMeta(e)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(e){this.themeOverrides=e,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return mg({onHover:(e,i)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:e,active:i}))},onClick:(e,i)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:e,active:i}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}static{this.\u0275fac=function(i){return new(i||n)(ve(An),ve(Mt),ve(xY),ve(iP,8))}}static{this.\u0275dir=Tt({type:n,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[Li]})}}return n})();var oP={providers:[sD({eventCoalescing:!0}),k1(kM),sP(rP()),a1()]};var f=class{static logWSFeed=!1;static miscEvent$=new ct;static websocketEvent$=new ct;static requestStatusEvent$=new ct;static SocketMode="zerodha";static RestMode="zerodha";static zerodhaUserId="FW6041";static AliceblueUserId="AB033978";static AliceblueApiKey="49LHZEV09feJdK7c59mzI4vxZOpJ0McPVg6aYP0kKmnMq1Gbn3DQMBOAb8xE7b6EJCkOspKl1EBljBUEmVppzSTT39G7rd9gIy01cWqzZTocnuCHXpBSj14TiyP0SDF8";static AliceblueEncKey="";static AliceblueSessionId="";static fyersAppId="FUU5Z8ICUH";static fyersSecretId="IYF3LPXJ0X";static angelUserId="A165307";static angelPassword="scjFNB5iYLI";static angelAPIKey="I5nI74Nm";static angelFeedToken="";static angelJWTToken="";static angelRefreshToken="";static year="23";static INTEREST_RATE=6.89;static USDINR_FUT_TOKEN;static knife_threshold=5;static knife_threshold_adjust1=2;static knife_threshold_adjust2=7;static orders=[];static completeOrders=0;static placedOrders=0;static curr_positions_trades=[];static fetchedPositions=[];static isSimulatedStrategy=!1;static simulateCurrDateObj=null;static isProduction=!1;static numAlerts=4;static broker_auth="enctoken MNyfe/S7e6hVoUslcB8a4Ch/S+/EyS9DtavSmdQmevXzmPvOYv9neIMZkyI8L38HFIiNc2VPoNTrM3waBrvS0Hj4IPW+5LHN5B7J2p+s5gtdbW0/sueWOg==";static nfCEOILimit=null;static nfPEOILimit=null;static bnfCEOILimit=null;static bnfPEOILimit=null;static isHistoricalRunning=!1;static numStrategies=8;static stockPositions=null;static showATPLine=!0;static st_simulate_ce=[];static st_simulate_pe=[];static st_simulate_charts=[];static st_simulate_charts_values=[];static st_simulate_charts_print=[];static st_simulate_charts_print_strangle=[];static st_simulate_exits=[];static isIStrangleEnabled=!0;static isIStrangleInit=!1;static SL1=10;static SL2=12;static rollout_premium=10;static rollin_threshold=8;static stocksStrategyNum=8;static defaultTag="t:intraday2:228655";static supportedInstru=["NIFTY","BANKNIFTY","FINNIFTY","MIDCPNIFTY","SENSEX","BANKEX","USDINR"];static strike_diff={NIFTY:50,BANKNIFTY:100,FINNIFTY:50,MIDCPNIFTY:25,SENSEX:100,BANKEX:100};static freezeLimit={NIFTY:1800,BANKNIFTY:900,FINNIFTY:1800,MIDCPNIFTY:2800,SENSEX:1e3,BANKEX:900};static qtyStep={NIFTY:75,BANKNIFTY:15,FINNIFTY:25,MIDCPNIFTY:50,SENSEX:20,BANKEX:15};static enableAlgo=!1;static instruToTrade="";static expiryDateToTrade=null;static algoStrategyNum=1;static algoSSStrike=null;static algoTag="t:intraday-a:468568";static algoSS_CE;static algoSS_PE;static secsToWaitForSL=5;static numSlabs={MIDCPNIFTY:3,FINNIFTY:3,BANKNIFTY:3,NIFTY:3,SENSEX:3,BANKEX:3};static slabOrderId={MIDCPNIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},FINNIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},BANKNIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},NIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},SENSEX:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},BANKEX:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}}};static minDistTillTime={MIDCPNIFTY:{"12:00":150,"13:30":100,"14:30":100,"15:31":100,"23:59":100},FINNIFTY:{"12:00":150,"13:30":150,"14:30":100,"15:31":50,"23:59":50},BANKNIFTY:{"12:00":400,"13:30":300,"14:30":200,"15:31":200,"23:59":200},NIFTY:{"12:00":150,"13:30":150,"14:30":100,"15:31":50,"23:59":50},SENSEX:{"12:00":400,"13:30":300,"14:30":200,"15:31":200,"23:59":200},BANKEX:{"12:00":400,"13:30":300,"14:30":200,"15:31":200,"23:59":200}};static slabEntryTime={MIDCPNIFTY:{1:"9:46",2:"10:06",3:"10:36"},FINNIFTY:{1:"9:31",2:"9:46",3:"10:06"},BANKNIFTY:{1:"9:31",2:"9:46",3:"10:06"},NIFTY:{1:"9:31",2:"9:46",3:"10:06"},SENSEX:{1:"9:31",2:"9:46",3:"10:06"},BANKEX:{1:"9:31",2:"9:46",3:"10:06"}};static slabEntryDist={MIDCPNIFTY:{1:200,2:200,3:200},FINNIFTY:{1:200,2:150,3:200},BANKNIFTY:{1:500,2:400,3:500},NIFTY:{1:200,2:150,3:200},SENSEX:{1:500,2:400,3:500},BANKEX:{1:500,2:400,3:500}};static slabQty={MIDCPNIFTY:{1:-3e3,2:-3e3,3:-3e3},FINNIFTY:{1:-1320,2:-1320,3:-1320},BANKNIFTY:{1:-510,2:-675,3:-510},NIFTY:{1:-1500,2:-1500,3:-1500},SENSEX:{1:-430,2:-430,3:-430},BANKEX:{1:-450,2:-450,3:-450}};static slabEntered={MIDCPNIFTY:{1:!1,2:!1,3:!1},FINNIFTY:{1:!1,2:!1,3:!1},BANKNIFTY:{1:!1,2:!1,3:!1},NIFTY:{1:!1,2:!1,3:!1},SENSEX:{1:!1,2:!1,3:!1},BANKEX:{1:!1,2:!1,3:!1}};static slabStrikes={MIDCPNIFTY:{1:{CE:"",PE:""},2:{CE:"",PE:""},3:{CE:"",PE:""}},FINNIFTY:{1:{CE:"",PE:""},2:{CE:"",PE:""},3:{CE:"",PE:""}},BANKNIFTY:{1:{CE:"",PE:""},2:{CE:"",PE:""},3:{CE:"",PE:""}},NIFTY:{1:{CE:"",PE:""},2:{CE:"",PE:""},3:{CE:"",PE:""}},SENSEX:{1:{CE:"",PE:""},2:{CE:"",PE:""},3:{CE:"",PE:""}},BANKEX:{1:{CE:"",PE:""},2:{CE:"",PE:""},3:{CE:"",PE:""}}};static slabCurrEntryPrice={MIDCPNIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},FINNIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},BANKNIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},NIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},SENSEX:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},BANKEX:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}}};static slabSL={MIDCPNIFTY:{1:.6,2:.7,3:.8},FINNIFTY:{1:.35,2:.4,3:.45},BANKNIFTY:{1:.35,2:.4,3:.45},NIFTY:{1:.35,2:.4,3:.45},SENSEX:{1:.35,2:.4,3:.45},BANKEX:{1:.35,2:.4,3:.45}};static slabSLCounter={MIDCPNIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},FINNIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},BANKNIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},NIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},SENSEX:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},BANKEX:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}}};static slabRollIn={MIDCPNIFTY:{1:.3,2:.35,3:.4},FINNIFTY:{1:.3,2:.35,3:.4},BANKNIFTY:{1:.3,2:.35,3:.4},NIFTY:{1:.3,2:.35,3:.4},SENSEX:{1:.3,2:.35,3:.4},BANKEX:{1:.3,2:.35,3:.4}};static slabRollInCounter={MIDCPNIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},FINNIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},BANKNIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},NIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},SENSEX:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},BANKEX:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}}};static rolloutStrikeMultiple=1;static babyNamesLetters={A:1,B:2,C:3,D:4,E:5,F:8,G:3,H:5,I:1,J:1,K:2,L:3,M:4,N:5,O:7,P:8,Q:1,R:2,S:3,T:4,U:6,V:6,W:6,X:5,Y:1,Z:7};static mastersContract=new Map;static monthsMapping={1:"JAN",2:"FEB",3:"MAR",4:"APR",5:"MAY",6:"JUN",7:"JUL",8:"AUG",9:"SEP",10:"OCT",11:"NOV",12:"DEC"};static monthlyExpiryDates={"23JAN":new Date(2023,0,25),"23FEB":new Date(2023,1,23),"23MAR":new Date(2023,2,29),"23APR":new Date(2023,3,27),"23MAY":new Date(2023,4,25),"23JUN":new Date(2023,5,28),"23JUL":new Date(2023,6,27),"23AUG":new Date(2023,7,31),"23SEP":new Date(2023,8,28),"23OCT":new Date(2023,9,26),"23NOV":new Date(2023,10,30),"23DEC":new Date(2023,11,28),"24JAN":new Date(2024,0,25),"24FEB":new Date(2024,1,29),"24MAR":new Date(2024,2,28),"24APR":new Date(2024,3,25),"24MAY":new Date(2024,4,30),"24JUN":new Date(2024,5,27),"24JUL":new Date(2024,6,25),"24AUG":new Date(2024,7,29),"24SEP":new Date(2024,8,26),"24OCT":new Date(2024,9,31),"24NOV":new Date(2024,10,28),"24DEC":new Date(2024,11,26),"25JAN":new Date(2025,0,30),"25FEB":new Date(2025,1,27),"25MAR":new Date(2025,2,27),"25APR":new Date(2025,3,24),"25MAY":new Date(2025,4,29),"25JUN":new Date(2025,5,26)};static monthlyExpiryDatesBNF={"23JAN":new Date(2023,0,25),"23FEB":new Date(2023,1,23),"23MAR":new Date(2023,2,29),"23APR":new Date(2023,3,27),"23MAY":new Date(2023,4,25),"23JUN":new Date(2023,5,28),"23JUL":new Date(2023,6,27),"23AUG":new Date(2023,7,31),"23SEP":new Date(2023,8,28),"23OCT":new Date(2023,9,26),"23NOV":new Date(2023,10,30),"23DEC":new Date(2023,11,28),"24JAN":new Date(2024,0,25),"24FEB":new Date(2024,1,29),"24MAR":new Date(2024,2,27),"24APR":new Date(2024,3,24),"24MAY":new Date(2024,4,29),"24JUN":new Date(2024,5,26),"24JUL":new Date(2024,6,31),"24AUG":new Date(2024,7,28),"24SEP":new Date(2024,8,25),"24OCT":new Date(2024,9,30),"24NOV":new Date(2024,10,27),"24DEC":new Date(2024,11,24),"25JAN":new Date(2025,0,30),"25FEB":new Date(2025,1,27),"25MAR":new Date(2025,2,27),"25APR":new Date(2025,3,24),"25MAY":new Date(2025,4,29),"25JUN":new Date(2025,5,26)};static monthlyExpiryDatesFINNIFTY={"23JAN":new Date(2023,0,31),"23FEB":new Date(2023,1,28),"23MAR":new Date(2023,2,28),"23APR":new Date(2023,3,25),"23MAY":new Date(2023,4,30),"23JUN":new Date(2023,5,27),"23JUL":new Date(2023,6,25),"23AUG":new Date(2023,7,29),"23SEP":new Date(2023,8,26),"23OCT":new Date(2023,9,31),"23NOV":new Date(2023,10,28),"23DEC":new Date(2023,11,26),"24JAN":new Date(2024,0,30),"24FEB":new Date(2024,1,27),"24MAR":new Date(2024,2,26),"24APR":new Date(2024,3,30),"24MAY":new Date(2024,4,28),"24JUN":new Date(2024,5,25),"24JUL":new Date(2024,6,30),"24AUG":new Date(2024,7,27),"24SEP":new Date(2024,8,24),"24OCT":new Date(2024,9,29),"24NOV":new Date(2024,10,26),"24DEC":new Date(2024,11,31),"25JAN":new Date(2025,0,30),"25FEB":new Date(2025,1,27),"25MAR":new Date(2025,2,27),"25APR":new Date(2025,3,24),"25MAY":new Date(2025,4,29),"25JUN":new Date(2025,5,26)};static monthlyExpiryDatesMidcap={"23JAN":new Date(2023,0,31),"23FEB":new Date(2023,1,28),"23MAR":new Date(2023,2,28),"23APR":new Date(2023,3,25),"23MAY":new Date(2023,4,30),"23JUN":new Date(2023,5,27),"23JUL":new Date(2023,6,26),"23AUG":new Date(2023,7,28),"23SEP":new Date(2023,8,25),"23OCT":new Date(2023,9,30),"23NOV":new Date(2023,10,24),"23DEC":new Date(2023,11,22),"24JAN":new Date(2024,0,29),"24FEB":new Date(2024,1,26),"24MAR":new Date(2024,2,22),"24APR":new Date(2024,3,29),"24MAY":new Date(2024,4,27),"24JUN":new Date(2024,5,24),"24JUL":new Date(2024,6,29),"24AUG":new Date(2024,7,26),"24SEP":new Date(2024,8,30),"24OCT":new Date(2024,9,28),"24NOV":new Date(2024,10,25),"24DEC":new Date(2024,11,30),"25JAN":new Date(2025,0,30),"25FEB":new Date(2025,1,27),"25MAR":new Date(2025,2,27),"25APR":new Date(2025,3,24),"25MAY":new Date(2025,4,29),"25JUN":new Date(2025,5,26)};static monthlyExpiryDatesSensex={"23JAN":new Date(2023,0,25),"23FEB":new Date(2023,1,23),"23MAR":new Date(2023,2,29),"23APR":new Date(2023,3,27),"23MAY":new Date(2023,4,25),"23JUN":new Date(2023,5,28),"23JUL":new Date(2023,6,28),"23AUG":new Date(2023,7,25),"23SEP":new Date(2023,8,29),"23OCT":new Date(2023,9,27),"23NOV":new Date(2023,10,24),"23DEC":new Date(2023,11,29),"24JAN":new Date(2024,0,25),"24FEB":new Date(2024,1,23),"24MAR":new Date(2024,2,28),"24APR":new Date(2024,3,26),"24MAY":new Date(2024,4,31),"24JUN":new Date(2024,5,28),"24JUL":new Date(2024,6,26),"24AUG":new Date(2024,7,30),"24SEP":new Date(2024,8,27),"24OCT":new Date(2024,9,25),"24NOV":new Date(2024,10,29),"24DEC":new Date(2024,11,27),"25JAN":new Date(2025,0,28),"25FEB":new Date(2025,1,25),"25MAR":new Date(2025,2,25),"25APR":new Date(2025,3,29),"25MAY":new Date(2025,4,27),"25JUN":new Date(2025,5,24)};static monthlyExpiryDatesBankex={"23JAN":new Date(2023,0,31),"23FEB":new Date(2023,1,28),"23MAR":new Date(2023,2,28),"23APR":new Date(2023,3,25),"23MAY":new Date(2023,4,30),"23JUN":new Date(2023,5,27),"23JUL":new Date(2023,6,26),"23AUG":new Date(2023,7,28),"23SEP":new Date(2023,8,25),"23OCT":new Date(2023,9,30),"23NOV":new Date(2023,10,24),"23DEC":new Date(2023,11,22),"24JAN":new Date(2024,0,29),"24FEB":new Date(2024,1,26),"24MAR":new Date(2024,2,22),"24APR":new Date(2024,3,29),"24MAY":new Date(2024,4,27),"24JUN":new Date(2024,5,24),"24JUL":new Date(2024,6,29),"24AUG":new Date(2024,7,26),"24SEP":new Date(2024,8,30),"24OCT":new Date(2024,9,28),"24NOV":new Date(2024,10,25),"24DEC":new Date(2024,11,30),"25JAN":new Date(2025,0,28),"25FEB":new Date(2025,1,25),"25MAR":new Date(2025,2,25),"25APR":new Date(2025,3,29),"25MAY":new Date(2025,4,27),"25JUN":new Date(2025,5,24)};static monthlyExpiryDatesUSDINR={"23JAN":new Date(2023,0,27),"23FEB":new Date(2023,1,24),"23MAR":new Date(2023,2,28),"23APR":new Date(2023,3,26),"23MAY":new Date(2023,4,29),"23JUN":new Date(2023,5,27),"23JUL":new Date(2023,6,27),"23AUG":new Date(2023,7,25),"23SEP":new Date(2023,8,26),"23OCT":new Date(2023,9,27),"23NOV":new Date(2023,10,24),"23DEC":new Date(2023,11,28),"24JAN":new Date(2024,0,27),"24FEB":new Date(2024,1,24),"24MAR":new Date(2024,2,28),"24APR":new Date(2024,3,26),"24MAY":new Date(2024,4,29),"24JUN":new Date(2024,5,27),"24JUL":new Date(2024,6,27),"24AUG":new Date(2024,7,25),"24SEP":new Date(2024,8,26),"24OCT":new Date(2024,9,27),"24NOV":new Date(2024,10,24),"24DEC":new Date(2024,11,28),"25JAN":new Date(2024,0,27),"25FEB":new Date(2024,1,24),"25MAR":new Date(2024,2,28),"25APR":new Date(2024,3,26),"25MAY":new Date(2024,4,29),"25JUN":new Date(2024,5,27),"25JUL":new Date(2024,6,27),"25AUG":new Date(2024,7,25),"25SEP":new Date(2024,8,26),"25OCT":new Date(2024,9,27),"25NOV":new Date(2024,10,24),"25DEC":new Date(2024,11,28),"26JAN":new Date(2024,0,27),"26FEB":new Date(2024,1,24),"26MAR":new Date(2024,2,28),"26APR":new Date(2024,3,26),"26MAY":new Date(2024,4,29),"26JUN":new Date(2024,5,27),"26JUL":new Date(2024,6,27),"26AUG":new Date(2024,7,25),"26SEP":new Date(2024,8,26),"26OCT":new Date(2024,9,27),"26NOV":new Date(2024,10,24),"26DEC":new Date(2024,11,28),"27JAN":new Date(2024,0,27),"27FEB":new Date(2024,1,24),"27MAR":new Date(2024,2,28),"27APR":new Date(2024,3,26),"27MAY":new Date(2024,4,29),"27JUN":new Date(2024,5,27),"27JUL":new Date(2024,6,27),"27AUG":new Date(2024,7,25),"27SEP":new Date(2024,8,26),"27OCT":new Date(2024,9,27),"27NOV":new Date(2024,10,24),"27DEC":new Date(2024,11,28)};static holidays=[new Date(2023,0,26),new Date(2023,2,7),new Date(2023,2,30),new Date(2023,3,4),new Date(2023,3,7),new Date(2023,3,14),new Date(2023,4,1),new Date(2023,5,29),new Date(2023,7,15),new Date(2023,8,19),new Date(2023,9,2),new Date(2023,9,24),new Date(2023,10,14),new Date(2023,10,27),new Date(2023,11,25),new Date(2024,0,22),new Date(2024,0,26),new Date(2024,2,8),new Date(2024,2,25),new Date(2024,2,29),new Date(2024,3,11),new Date(2024,3,17),new Date(2024,4,1),new Date(2024,4,20),new Date(2024,5,17),new Date(2024,6,17),new Date(2024,7,15),new Date(2024,9,2),new Date(2024,10,1),new Date(2024,10,15),new Date(2024,10,20),new Date(2024,11,25),new Date(2025,1,26),new Date(2025,2,14),new Date(2025,2,31),new Date(2025,3,10),new Date(2025,3,14),new Date(2025,3,18),new Date(2025,4,1),new Date(2025,7,15),new Date(2025,7,27),new Date(2025,9,2),new Date(2025,9,21),new Date(2025,9,22),new Date(2025,10,5),new Date(2025,11,25)];static niftyExpiries=[new Date(2022,0,6),new Date(2022,0,13),new Date(2022,0,22),new Date(2022,0,27),new Date(2022,1,3),new Date(2022,1,10),new Date(2022,1,17),new Date(2022,1,24),new Date(2022,2,3),new Date(2022,2,10),new Date(2022,2,17),new Date(2022,2,24),new Date(2022,2,31),new Date(2022,3,7),new Date(2022,3,13),new Date(2022,3,21),new Date(2022,3,28),new Date(2022,4,5),new Date(2022,4,12),new Date(2022,4,19),new Date(2022,4,26),new Date(2022,5,2),new Date(2022,5,9),new Date(2022,5,16),new Date(2022,5,23),new Date(2022,5,30),new Date(2022,6,7),new Date(2022,6,14),new Date(2022,6,21),new Date(2022,6,28),new Date(2022,7,4),new Date(2022,7,11),new Date(2022,7,18),new Date(2022,7,25),new Date(2022,8,1),new Date(2022,8,8),new Date(2022,8,15),new Date(2022,8,22),new Date(2022,8,29),new Date(2022,9,6),new Date(2022,9,13),new Date(2022,9,20),new Date(2022,9,27),new Date(2022,10,3),new Date(2022,10,10),new Date(2022,10,17),new Date(2022,10,24),new Date(2022,11,1),new Date(2022,11,8),new Date(2022,11,15),new Date(2022,11,22),new Date(2022,11,29),new Date(2023,0,5),new Date(2023,0,12),new Date(2023,0,19),new Date(2023,0,25),new Date(2023,1,2),new Date(2023,1,9),new Date(2023,1,16),new Date(2023,1,23),new Date(2023,2,2),new Date(2023,2,9),new Date(2023,2,16),new Date(2023,2,23),new Date(2023,2,29),new Date(2023,3,6),new Date(2023,3,13),new Date(2023,3,20),new Date(2023,3,27),new Date(2023,4,4),new Date(2023,4,11),new Date(2023,4,18),new Date(2023,4,25),new Date(2023,5,1),new Date(2023,5,8),new Date(2023,5,15),new Date(2023,5,22),new Date(2023,5,28),new Date(2023,6,6),new Date(2023,6,13),new Date(2023,6,20),new Date(2023,6,27),new Date(2023,7,3),new Date(2023,7,10),new Date(2023,7,17),new Date(2023,7,24),new Date(2023,7,31),new Date(2023,8,7),new Date(2023,8,14),new Date(2023,8,21),new Date(2023,8,28),new Date(2023,9,5),new Date(2023,9,12),new Date(2023,9,19),new Date(2023,9,26),new Date(2023,10,2),new Date(2023,10,9),new Date(2023,10,16),new Date(2023,10,23),new Date(2023,10,30),new Date(2023,11,7),new Date(2023,11,14),new Date(2023,11,21),new Date(2023,11,28),new Date(2024,0,4),new Date(2024,0,11),new Date(2024,0,18),new Date(2024,0,25),new Date(2024,1,1),new Date(2024,1,8),new Date(2024,1,15),new Date(2024,1,22),new Date(2024,1,29),new Date(2024,2,7),new Date(2024,2,14),new Date(2024,2,21),new Date(2024,2,28),new Date(2024,3,4),new Date(2024,3,10),new Date(2024,3,18),new Date(2024,3,25),new Date(2024,4,2),new Date(2024,4,9),new Date(2024,4,16),new Date(2024,4,23),new Date(2024,4,30),new Date(2024,5,6),new Date(2024,5,13),new Date(2024,5,20),new Date(2024,5,27),new Date(2024,6,4),new Date(2024,6,11),new Date(2024,6,18),new Date(2024,6,25),new Date(2024,7,1),new Date(2024,7,8),new Date(2024,7,14),new Date(2024,7,22),new Date(2024,7,29),new Date(2024,8,5),new Date(2024,8,12),new Date(2024,8,19),new Date(2024,8,26),new Date(2024,9,3),new Date(2024,9,10),new Date(2024,9,17),new Date(2024,9,24),new Date(2024,9,31),new Date(2024,10,7),new Date(2024,10,14),new Date(2024,10,21),new Date(2024,10,28),new Date(2024,11,5),new Date(2024,11,12),new Date(2024,11,19),new Date(2024,11,26),new Date(2025,0,2),new Date(2025,0,9),new Date(2025,0,16),new Date(2025,0,23),new Date(2025,0,30),new Date(2025,1,6),new Date(2025,1,13),new Date(2025,1,20),new Date(2025,1,27),new Date(2025,2,6),new Date(2025,2,13),new Date(2025,2,20),new Date(2025,2,27),new Date(2025,3,3),new Date(2025,3,9),new Date(2025,3,17),new Date(2025,3,24),new Date(2025,3,30)];static bnfExpiries=[new Date(2022,0,6),new Date(2022,0,13),new Date(2022,0,22),new Date(2022,0,27),new Date(2022,1,3),new Date(2022,1,10),new Date(2022,1,17),new Date(2022,1,24),new Date(2022,2,3),new Date(2022,2,10),new Date(2022,2,17),new Date(2022,2,24),new Date(2022,2,31),new Date(2022,3,7),new Date(2022,3,13),new Date(2022,3,21),new Date(2022,3,28),new Date(2022,4,5),new Date(2022,4,12),new Date(2022,4,19),new Date(2022,4,26),new Date(2022,5,2),new Date(2022,5,9),new Date(2022,5,16),new Date(2022,5,23),new Date(2022,5,30),new Date(2022,6,7),new Date(2022,6,14),new Date(2022,6,21),new Date(2022,6,28),new Date(2022,7,4),new Date(2022,7,11),new Date(2022,7,18),new Date(2022,7,25),new Date(2022,8,1),new Date(2022,8,8),new Date(2022,8,15),new Date(2022,8,22),new Date(2022,8,29),new Date(2022,9,6),new Date(2022,9,13),new Date(2022,9,20),new Date(2022,9,27),new Date(2022,10,3),new Date(2022,10,10),new Date(2022,10,17),new Date(2022,10,24),new Date(2022,11,1),new Date(2022,11,8),new Date(2022,11,15),new Date(2022,11,22),new Date(2022,11,29),new Date(2023,0,5),new Date(2023,0,12),new Date(2023,0,19),new Date(2023,0,25),new Date(2023,1,2),new Date(2023,1,9),new Date(2023,1,16),new Date(2023,1,23),new Date(2023,2,2),new Date(2023,2,9),new Date(2023,2,16),new Date(2023,2,23),new Date(2023,2,29),new Date(2023,3,6),new Date(2023,3,13),new Date(2023,3,20),new Date(2023,3,27),new Date(2023,4,4),new Date(2023,4,11),new Date(2023,4,18),new Date(2023,4,25),new Date(2023,5,1),new Date(2023,5,8),new Date(2023,5,15),new Date(2023,5,22),new Date(2023,5,28),new Date(2023,6,6),new Date(2023,6,13),new Date(2023,6,20),new Date(2023,6,27),new Date(2023,7,3),new Date(2023,7,10),new Date(2023,7,17),new Date(2023,7,24),new Date(2023,7,31),new Date(2023,8,6),new Date(2023,8,13),new Date(2023,8,20),new Date(2023,8,27),new Date(2023,9,4),new Date(2023,9,11),new Date(2023,9,18),new Date(2023,9,26),new Date(2023,10,1),new Date(2023,10,8),new Date(2023,10,15),new Date(2023,10,22),new Date(2023,10,30),new Date(2023,11,6),new Date(2023,11,13),new Date(2023,11,20),new Date(2023,11,28),new Date(2024,0,3),new Date(2024,0,10),new Date(2024,0,17),new Date(2024,0,25),new Date(2024,0,31),new Date(2024,1,7),new Date(2024,1,14),new Date(2024,1,21),new Date(2024,1,29),new Date(2024,2,6),new Date(2024,2,13),new Date(2024,2,20),new Date(2024,2,27),new Date(2024,3,3),new Date(2024,3,10),new Date(2024,3,16),new Date(2024,3,24),new Date(2024,3,30),new Date(2024,4,8),new Date(2024,4,15),new Date(2024,4,22),new Date(2024,4,29),new Date(2024,5,5),new Date(2024,5,12),new Date(2024,5,19),new Date(2024,5,26),new Date(2024,6,3),new Date(2024,6,10),new Date(2024,6,16),new Date(2024,6,24),new Date(2024,6,31),new Date(2024,7,7),new Date(2024,7,14),new Date(2024,7,21),new Date(2024,7,28),new Date(2024,8,4),new Date(2024,8,11),new Date(2024,8,18),new Date(2024,8,25),new Date(2024,9,1),new Date(2024,9,9),new Date(2024,9,16),new Date(2024,9,23),new Date(2024,9,30),new Date(2024,10,6),new Date(2024,10,13),new Date(2024,10,27),new Date(2024,11,24),new Date(2025,0,30),new Date(2025,1,27),new Date(2025,2,27),new Date(2025,3,24)];static finniftyExpiries=[new Date(2023,0,5),new Date(2023,0,12),new Date(2023,0,19),new Date(2023,0,25),new Date(2023,1,7),new Date(2023,1,14),new Date(2023,1,21),new Date(2023,1,28),new Date(2023,2,6),new Date(2023,2,14),new Date(2023,2,21),new Date(2023,2,28),new Date(2023,3,3),new Date(2023,3,11),new Date(2023,3,18),new Date(2023,3,25),new Date(2023,4,2),new Date(2023,4,9),new Date(2023,4,16),new Date(2023,4,23),new Date(2023,4,30),new Date(2023,5,6),new Date(2023,5,13),new Date(2023,5,20),new Date(2023,5,27),new Date(2023,6,6),new Date(2023,6,13),new Date(2023,6,20),new Date(2023,6,27),new Date(2023,7,1),new Date(2023,7,8),new Date(2023,7,14),new Date(2023,7,22),new Date(2023,7,29),new Date(2023,8,5),new Date(2023,8,12),new Date(2023,8,18),new Date(2023,8,26),new Date(2023,9,3),new Date(2023,9,10),new Date(2023,9,17),new Date(2023,9,23),new Date(2023,9,31),new Date(2023,10,7),new Date(2023,10,13),new Date(2023,10,21),new Date(2023,10,28),new Date(2023,11,5),new Date(2023,11,12),new Date(2023,11,19),new Date(2023,11,26),new Date(2024,0,2),new Date(2024,0,9),new Date(2024,0,16),new Date(2024,0,23),new Date(2024,0,30),new Date(2024,1,6),new Date(2024,1,13),new Date(2024,1,20),new Date(2024,1,27),new Date(2024,2,5),new Date(2024,2,12),new Date(2024,2,19),new Date(2024,2,26),new Date(2024,3,2),new Date(2024,3,9),new Date(2024,3,16),new Date(2024,3,23),new Date(2024,3,30),new Date(2024,4,7),new Date(2024,4,14),new Date(2024,4,21),new Date(2024,4,28),new Date(2024,5,4),new Date(2024,5,11),new Date(2024,5,18),new Date(2024,5,25),new Date(2024,6,2),new Date(2024,6,9),new Date(2024,6,16),new Date(2024,6,23),new Date(2024,6,30),new Date(2024,7,6),new Date(2024,7,13),new Date(2024,7,20),new Date(2024,7,27),new Date(2024,8,3),new Date(2024,8,10),new Date(2024,8,17),new Date(2024,8,24),new Date(2024,9,1),new Date(2024,9,8),new Date(2024,9,15),new Date(2024,9,22),new Date(2024,9,29),new Date(2024,10,5),new Date(2024,10,12),new Date(2024,10,19),new Date(2024,10,26),new Date(2024,11,31),new Date(2025,0,28),new Date(2025,1,27),new Date(2025,2,27),new Date(2025,3,24)];static midcapExpiries=[new Date(2023,6,12),new Date(2023,6,19),new Date(2023,6,26),new Date(2023,7,2),new Date(2023,7,9),new Date(2023,7,16),new Date(2023,7,21),new Date(2023,7,28),new Date(2023,8,4),new Date(2023,8,11),new Date(2023,8,18),new Date(2023,8,25),new Date(2023,8,29),new Date(2023,9,9),new Date(2023,9,16),new Date(2023,9,23),new Date(2023,9,30),new Date(2023,10,6),new Date(2023,10,13),new Date(2023,10,20),new Date(2023,10,24),new Date(2023,11,4),new Date(2023,11,11),new Date(2023,11,18),new Date(2023,11,22),new Date(2024,0,1),new Date(2024,0,8),new Date(2024,0,15),new Date(2024,0,20),new Date(2024,0,29),new Date(2024,1,5),new Date(2024,1,12),new Date(2024,1,19),new Date(2024,1,26),new Date(2024,2,11),new Date(2024,2,18),new Date(2024,2,22),new Date(2024,3,1),new Date(2024,3,8),new Date(2024,3,15),new Date(2024,3,22),new Date(2024,3,29),new Date(2024,4,6),new Date(2024,4,13),new Date(2024,4,17),new Date(2024,4,27),new Date(2024,5,3),new Date(2024,5,10),new Date(2024,5,14),new Date(2024,5,24),new Date(2024,6,1),new Date(2024,6,8),new Date(2024,6,15),new Date(2024,6,22),new Date(2024,6,29),new Date(2024,7,5),new Date(2024,7,12),new Date(2024,7,19),new Date(2024,7,26),new Date(2024,8,2),new Date(2024,8,9),new Date(2024,8,16),new Date(2024,8,23),new Date(2024,8,30),new Date(2024,9,7),new Date(2024,9,14),new Date(2024,9,21),new Date(2024,9,28),new Date(2024,10,4),new Date(2024,10,11),new Date(2024,10,18),new Date(2024,10,25),new Date(2024,11,30),new Date(2025,0,27),new Date(2025,1,27),new Date(2025,2,27),new Date(2025,3,24)];static sensexExpiries=[new Date(2023,6,14),new Date(2023,6,21),new Date(2023,6,28),new Date(2023,7,4),new Date(2023,7,11),new Date(2023,7,18),new Date(2023,7,25),new Date(2023,8,1),new Date(2023,8,8),new Date(2023,8,15),new Date(2023,8,22),new Date(2023,8,29),new Date(2023,9,6),new Date(2023,9,13),new Date(2023,9,20),new Date(2023,9,27),new Date(2023,10,3),new Date(2023,10,10),new Date(2023,10,17),new Date(2023,10,24),new Date(2023,11,1),new Date(2023,11,8),new Date(2023,11,15),new Date(2023,11,22),new Date(2023,11,29),new Date(2024,0,5),new Date(2024,0,12),new Date(2024,0,19),new Date(2024,0,25),new Date(2024,1,2),new Date(2024,1,9),new Date(2024,1,16),new Date(2024,1,23),new Date(2024,2,1),new Date(2024,2,7),new Date(2024,2,15),new Date(2024,2,22),new Date(2024,2,28),new Date(2024,3,5),new Date(2024,3,12),new Date(2024,3,19),new Date(2024,3,26),new Date(2024,4,3),new Date(2024,4,10),new Date(2024,4,17),new Date(2024,4,24),new Date(2024,4,31),new Date(2024,5,7),new Date(2024,5,14),new Date(2024,5,21),new Date(2024,5,28),new Date(2024,6,5),new Date(2024,6,12),new Date(2024,6,19),new Date(2024,6,26),new Date(2024,7,2),new Date(2024,7,9),new Date(2024,7,16),new Date(2024,7,23),new Date(2024,7,30),new Date(2024,8,6),new Date(2024,8,13),new Date(2024,8,20),new Date(2024,8,27),new Date(2024,9,4),new Date(2024,9,11),new Date(2024,9,18),new Date(2024,9,25),new Date(2024,10,8),new Date(2024,10,14),new Date(2024,10,22),new Date(2024,10,29),new Date(2024,11,6),new Date(2024,11,13),new Date(2024,11,20),new Date(2024,11,27),new Date(2025,0,3),new Date(2025,0,7),new Date(2025,0,14),new Date(2025,0,21),new Date(2025,0,28),new Date(2025,1,4),new Date(2025,1,11),new Date(2025,1,18),new Date(2025,1,25),new Date(2025,2,4),new Date(2025,2,11),new Date(2025,2,18),new Date(2025,2,25),new Date(2025,3,1),new Date(2025,3,8),new Date(2025,3,15),new Date(2025,3,22),new Date(2025,3,29)];static bankexExpiries=[new Date(2023,9,23),new Date(2023,9,30),new Date(2023,10,6),new Date(2023,10,13),new Date(2023,10,20),new Date(2023,10,24),new Date(2023,11,4),new Date(2023,11,11),new Date(2023,11,18),new Date(2023,11,22),new Date(2024,0,1),new Date(2024,0,8),new Date(2024,0,15),new Date(2024,0,20),new Date(2024,0,29),new Date(2024,1,5),new Date(2024,1,12),new Date(2024,1,19),new Date(2024,1,26),new Date(2024,2,11),new Date(2024,2,18),new Date(2024,2,22),new Date(2024,3,1),new Date(2024,3,8),new Date(2024,3,15),new Date(2024,3,22),new Date(2024,3,29),new Date(2024,4,6),new Date(2024,4,13),new Date(2024,4,17),new Date(2024,4,27),new Date(2024,5,3),new Date(2024,5,10),new Date(2024,5,14),new Date(2024,5,24),new Date(2024,6,1),new Date(2024,6,8),new Date(2024,6,15),new Date(2024,6,22),new Date(2024,6,29),new Date(2024,7,5),new Date(2024,7,12),new Date(2024,7,19),new Date(2024,7,26),new Date(2024,8,2),new Date(2024,8,9),new Date(2024,8,16),new Date(2024,8,23),new Date(2024,8,30),new Date(2024,9,7),new Date(2024,9,14),new Date(2024,9,21),new Date(2024,9,28),new Date(2024,10,4),new Date(2024,10,11),new Date(2024,10,18),new Date(2024,10,25),new Date(2024,11,30),new Date(2025,0,28),new Date(2025,1,25),new Date(2025,2,25),new Date(2025,3,29)];static usdinrExpiries=[new Date(2023,0,5),new Date(2023,0,12),new Date(2023,0,19),new Date(2023,0,25),new Date(2023,1,3),new Date(2023,1,10),new Date(2023,1,17),new Date(2023,1,24),new Date(2023,2,3),new Date(2023,2,10),new Date(2023,2,17),new Date(2023,2,24),new Date(2023,2,28),new Date(2023,2,31),new Date(2023,3,6),new Date(2023,3,13),new Date(2023,3,21),new Date(2023,3,28),new Date(2023,4,5),new Date(2023,4,12),new Date(2023,4,19),new Date(2023,4,26),new Date(2023,5,2),new Date(2023,5,9),new Date(2023,5,16),new Date(2023,5,23),new Date(2023,5,30),new Date(2023,6,7),new Date(2023,6,14),new Date(2023,6,21),new Date(2023,6,28),new Date(2023,7,4),new Date(2023,7,11),new Date(2023,7,18),new Date(2023,7,25),new Date(2023,8,1),new Date(2023,8,8),new Date(2023,8,15),new Date(2023,8,22),new Date(2023,8,29),new Date(2023,9,6),new Date(2023,9,13),new Date(2023,9,20),new Date(2023,9,27),new Date(2023,10,3),new Date(2023,10,10),new Date(2023,10,17),new Date(2023,10,24),new Date(2023,11,1),new Date(2023,11,8),new Date(2023,11,15),new Date(2023,11,22),new Date(2023,11,29)];static coveredCallPositions=[["NIFTY24FEB21800CE",-100],["NIFTY24FEB21700CE",-50],["NIFTY24FEB21450CE",-50],["NIFTY24FEB21400CE",-50]];static mfInvested=[["NIFTYBEES",.01116,0],["INF179K01WM1",.00962,0],["INF109K012M7",.0104,0]];static holdings={NIFTYBEES:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:182.78,qty:696,support:[180],resistance:[207]},BANKBEES:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:373.28,qty:171,support:[350],resistance:[410]},NETFIT:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:35.33,qty:1750,support:[35],resistance:[40]},ADANIPORTS:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[650],resistance:[900]},ASIANPAINT:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:3098.95,qty:3,support:[3e3,2860],resistance:[3600]},AXISBANK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[650],resistance:[770,850]},"BAJAJ-AUTO":{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[3300],resistance:[4e3,4300]},BAJAJFINSV:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:17013.7,qty:1,support:[15500],resistance:[19200]},BAJFINANCE:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[6500],resistance:[8e3]},BHARTIARTL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[650],resistance:[780]},BPCL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[360,250],resistance:[500,550]},BRITANNIA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[3400],resistance:[3800,4150]},CIPLA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[870],resistance:[1e3]},COALINDIA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[140],resistance:[200]},DIVISLAB:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[4350],resistance:[5400]},DRREDDY:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[4250],resistance:[5600]},EICHERMOT:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2350],resistance:[3e3]},GRASIM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:1733.95,qty:6,support:[1600],resistance:[1900]},HCLTECH:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1100],resistance:[1360]},HDFC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2500],resistance:[3e3]},HDFCBANK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1400],resistance:[1700]},HDFCLIFE:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[630],resistance:[760]},HEROMOTOCO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2300],resistance:[3600]},HINDALCO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[410],resistance:[550]},HINDUNILVR:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2230],resistance:[2800]},ICICIBANK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[710],resistance:[850]},INDUSINDBK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[810],resistance:[1230]},INFY:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1800,1670],resistance:[1950]},IOC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[110],resistance:[140,170]},ITC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[210,200],resistance:[260]},JSWSTEEL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[620],resistance:[770]},KOTAKBANK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1720],resistance:[2200]},LT:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1740],resistance:[2070]},"M&M":{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[800,730],resistance:[980]},MARUTI:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:8565.9,qty:1,support:[7e3],resistance:[8300,9900]},NESTLEIND:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:18927.05,qty:1,support:[18600],resistance:[20600]},NTPC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[120],resistance:[150]},ONGC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[130],resistance:[170]},POWERGRID:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:202.1,qty:45,support:[198],resistance:[215]},RELIANCE:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:2481,qty:4,support:[2350],resistance:[2750]},SBILIFE:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:1183.8,qty:8,support:[1100],resistance:[1290]},SBIN:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[450],resistance:[540]},SHREECEM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[25300],resistance:[31300]},SUNPHARMA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:829.8,qty:12,support:[730],resistance:[870]},TATACONSUM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[700],resistance:[880]},TATAMOTORS:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:513.9,qty:20,support:[440],resistance:[530]},TATASTEEL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1060],resistance:[1500]},TCS:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[3400],resistance:[4e3]},TECHM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1540],resistance:[1830]},TITAN:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:2330.5,qty:4,support:[2200],resistance:[2680]},ULTRACEMCO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[7e3],resistance:[8200]},UPL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[700],resistance:[850]},WIPRO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[600],resistance:[725]},RADICO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:1068.1,qty:9,support:[1e3],resistance:[1300]},VBL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:901.7,qty:11,support:[810],resistance:[1e3]},ACC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2100],resistance:[2600]},ADANIENT:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:1860.9,qty:6,support:[1750,1350],resistance:[1800,1900]},ADANIGREEN:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1500,875],resistance:[1500,1900]},ADANITRANS:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1650],resistance:[2040]},AMBUJACEM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[350],resistance:[440]},APOLLOHOSP:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[4e3],resistance:[5930]},AUROPHARMA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[620],resistance:[770,1060]},BAJAJHLDNG:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[5e3],resistance:[5650]},BANDHANBNK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[250],resistance:[430,630]},BANKBARODA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[70],resistance:[140]},BERGEPAINT:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[720],resistance:[870]},BIOCON:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[320],resistance:[480]},BOSCHLTD:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[13300,8e3],resistance:[19100,22400,27900]},CADILAHC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[410],resistance:[570,670]},CHOLAFIN:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:654.79,qty:31,support:[470],resistance:[670]},COLPAL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1400],resistance:[1750,1800]},DABUR:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[550],resistance:[650]},DLF:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[360],resistance:[450]},DMART:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:4704.85,qty:2,support:[4170],resistance:[5200]},GAIL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[125],resistance:[170,200]},GLAND:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[3350],resistance:[4050,4300]},GODREJCP:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[880],resistance:[1130]},HAVELLS:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1240],resistance:[1500]},HDFCAMC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2200],resistance:[3300]},HINDPETRO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[275],resistance:[350]},ICICIGI:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1330],resistance:[1650]},ICICIPRULI:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[530],resistance:[700]},IGL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[450,370],resistance:[600]},INDIGO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1800],resistance:[2350]},INDUSTOWER:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[235],resistance:[330]},JINDALSTEL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[350],resistance:[500]},JUBLFOOD:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[3400],resistance:[4575]},LTI:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[6300],resistance:[7550]},LUPIN:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[860],resistance:[1260]},MARICO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[490],resistance:[600]},"MCDOWELL-N":{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[860,820],resistance:[1e3]},MUTHOOTFIN:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1410],resistance:[1700]},NAUKRI:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[5100],resistance:[7200]},NMDC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[130],resistance:[200]},PEL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2400],resistance:[3e3]},PGHH:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[15400,14300],resistance:[16200]},PIDILITIND:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:2648.45,qty:4,support:[2500],resistance:[2750]},PIIND:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2730],resistance:[3500]},PNB:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[36],resistance:[48]},SAIL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[100],resistance:[145]},SBICARD:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[880],resistance:[1150]},SIEMENS:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2100],resistance:[2550]},TORNTPHARM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2740],resistance:[3280]},VEDL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[300],resistance:[370]},YESBANK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[10],resistance:[20]},NYKAA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:1690,qty:3,support:[],resistance:[]},ZOMATO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:92.75,qty:50,support:[],resistance:[]},PAYTM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:779.91,qty:12,support:[],resistance:[]}};static audioSuccess="data:audio/mp3;base64,SUQzBAAAAAAJAVRQRTEAAAAbAAADU291bmRKYXkuY29tIFNvdW5kIEVmZmVjdHNURU5DAAAAFgAAAExBTUUgMy45OCAoTWF4IDAuOS4xKVRERU4AAAAUAAAAMjAxMS0wNS0yNFQxMDo1MDo0OFREVEcAAAAUAAAAMjAxMS0wNS0yNFQxMDo1MDo0OAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/++BkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABJbmZvAAAADwAAAAoAACzlABkZGRkZGRkZGTMzMzMzMzMzMzNMTExMTExMTExMZmZmZmZmZmZmZoCAgICAgICAgICZmZmZmZmZmZmZs7Ozs7Ozs7Ozs8zMzMzMzMzMzMzm5ubm5ubm5ubm/////////////wAAADpMQU1FMy45OCABzQAAAAAAAAAANP8kBgVNAAFAAAAs5eu8Xd8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/++BEAAAFZG+/7Q0gANLv92CjPABlai8XuZ2ABKxF4zczoAABJJsTUgyuNfEAABEL67gYtz//XIxWTvIxWK0eqIGFwxk0aOcy4BwAAYcRgHAGAMNyIw2j3/75+CADAIEmWogQIGMue5/PfUII0aMjFYrFaxAAMNtqIEEP4f3Oc/BG3RAKBQSMLigkQQhCGWghlznOkCMVo26QCgkY3+EIQhCc5+CBA4LgADCYXBMn2HhDznOc///NGjbpGjbnOc50u3v9Q///hBAcBAMf/4Ph+yYOT0wAABBnJk02IEEPijxgVisiQ1YyRM3v//Dfv8KxDDkJwLmmxgADgAAACgG4eB/hqBDCEKCJr0gP39/SlIDxXs8fwHjyJrHze+///7v1er48BD0PUbPH+NfGv///SlKaze+Ice973vuj9/v/w3794nC2E4OhwY0PZ3jx48ePHlNf3hv1eztRBAc4h6PUhOCEFwVFWBWPNZhv499ZhsavV7+9H7+P6PHmn6GKCJl+/ve9KPImob+PAQ9X7gPKZ3h/Hv6Upq7x48prN9vFer48AQwIAiIBQMBgMAgCAAAAGDuWHkO2LQFuFd13zlNNDVe+yt170avJ7y+1CZWuOWsIeSVyvrqS9bhWITyldx2dRaN9lTNDDTI7yALiGAARdyjMzJU4KOQwQaEZDwI+jvhAYhkwlnbJnVwa5LNOjPxDKLSJulD+87di5EM6LKpZp138rUuFSAyENUnb5vD9UECMutYT/4WngfkoBKSXyible4wrXzed7faWR44Z2MdS/moIRYy7K4xfuVKOn0LAdWmuf3OVqrwNzGvbt8pL/3bFpcgoHY1atFWqe0Ztu0Fy208wkXoaaLZ09NHVM3cltJr872V2vf5+HKfv6m7X/////9I3lXB+CwCojQu3hT95UndZx6HP/////+vzIqViaM78uLJ5fH6t+anZi43G3AEBAHRwOBwMAgEQAAAdsYs2FkGVhGCNfOSytImJrweykj8DPNLKwkZWCc1ubQUAqecT3Qw9TwGrgFETKgwMLmmWs2hpymSyZqJpUp/dKD4sQQkMjIQSiEDS59g6KRAFHILWoy5/VL1QK/oHhfSWfQwxxyoAgiesfh3WNztDT4dxdCc7SSjlsRBK0Y5+Hy+V33LsbtZ3aeIyqepr2VnU+8bLP/Duf00dt8z7X+tS3IIjFrOQWtyzGnpJ5k8ph6V5/UqPBObpLNvPlv/pKammE+4RFKaHbX1G50V6k688PEoGmiF+Gbdiq8LUI/nd78qWEZJA//Sc33WHafv/////7t2L8w7Cl6u2/vY3YfqSixyrMzH/////8fppiWPAKgcnWlGEssRS/Kcqr6zCEAdHQ1gkiYEgAHaLLBgDAD+59JY1+80eOdf/++JEDQAHwYvP/jKAAP6xei3EUAAYzgc//YoAA0fBJ7+fUAG/CzCTikz8slIqFwN8A0ZcDFjQO+LC4ADGI93HGKADEAgAK1DIQWyIdJNsMuCBRH5RHPCYADLOwyoywhMQ8mSTNTxuJzLZoRcLDAuACyIRQV8SiDewbR+dFgHeYFwnx0DIE0USKl1KBESSy/ZZ8UozoczNwcIKqlo4vRZTN6tS09AuFwZcQXGTNFJKLyJwiwtIARAgxRMn0CAV/OsuZpuG2EgaC5yDlcuEwThPpkNIsTwZfAwqETuTCJBisyguHGs/zBf///TN3qOG39NMuDmEQ/41CKdRc0Vd0SkHvkoUJXbs5dowgdams5SoUW4JsMp7uFkxSxrdZMCzDgdE6CgvoLjGXAEAiUQKA2NDZyDlwPQEABWoZCC2RApEkEnFICiEHJsc8GoAAyaCgYvEo0+ykgtPC0QOUIGAEIC6gO0AaOAWFg3ND7BezrzhOGxcNDcZwWQRYxJ01SI4BIUknWit1KNTIuHk00zMi5uGQlkyTRFieMRXQoTemhdNKqbpugXDRZAyJni+UjImjE8XiMAaQFIY0hm54pPdftNzRBAOUPGgoMZsrmh0+LjPlEixeCxsDFuwtLIggIJDuNSaAcIDazb9v///TepTt9ablwuGn/MxtpakvWitKZC5xypiorM2V3ACeNACnBUUuZtkcrZ1fb+FLBQG86lUFNnbVpRTMiDIGZEQHDQDAAGBGBxoCiwBgiN1GnGdEHJJPeZOZEWHKAiJA/oILNCzieaia6lJJdRWNnMlqFlAmhGdILZKs1MTpokYIsgyRkmMaFnQMENAK4ABBRlR2qUm2p/960SAg0HijspO39+kvYhwNtwRSRZpqykfb95iTosJERyQHFwGGQpY2dv9X9EujGgSEJIsjuopiPTVv+qnPI9f///86iHykkkUVFbNQcwAXFkGzzQGnOJifqGlyRJCUIYy3U2mGAuDpLhcLBNDNAWE4EgcJ9GXIsQdajqI1Q+YvF4+kkkXj5HEGGWBMVgavFwCgeDIw7momqtJ3rdRJGRXSLpZIkBhYQikyClVGfdZiiaGDILdFzY3GdDIoWQgYACohqaP7//cxGNBtUHAovIlFfV/pOko4MsAkCAoKRzWZVfNW9nRKJFRSo4RSICBOAcegxkTzt9tJ3+kQ4LbBo5CkSSfrH4WgvP/2uieoav//YtP+dREaDuLyQxMQU1FMy45OKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqokepqZU2YAXTAHe/Jg+LGiCas54neW6KZEGMc6//viRA4AByCCzvn7pHDv8Fm+cfTUHPYLPew+W0OTwWg898r4DQy+Wu9yPKGiRQVg0DPo/ERlcviD+Tj6Q5Zf+RyiWWOzEUaQMC5yCEihS3a8ssV5XflEs3f/WGeVje+V5aIxJXEYuxuX4IrrrgxnDXLMbfeRxOH43L7bgF7FFAMO2C7h6PXUhT0//WTYapAaLltEzRTdAwZaCDJl8vkwRQqGBMDGh3wWekMTr/02TTUggiSJfH4CBkDLEhDDiKaby+bmBotN1Juggs3J8ToEg5eOpvQQTEVJwvN/6CKZfd3p////zqYKBi2bmB4jWZeJIXABAI+87hS5ic27rJJxvLTdrL/O3GWluN+f4aoXrIgUigg4PARKxsNPTzEojEeYZBy72nxByJzsARRVQwAIzjBSMEAKJ19yhgisbPIrNezBMr4USG/7HwC4uFMv4+H7/cB5T3vq+cw504HwAsuFkj26kOrVrq9aaAYMDjzZM7TdSDLLjU03UYMojBzQ2QBp6QBSC0GTUYrT1l9zBCTIwS+LoBD0DILgYALyJfN01kXK5ACIHSfdAvm6i4aHS8FwYGdFDWI4nJmX0zwX4EMJFl+rWo0MVmKbutTf11IVsg5HW+YkoCIWN8nyYLSs8TV3CqwFEWApa7TAZ9sclqPM/7Xl7PJWUBelbkPu1Mv7LKaVSJ2XFmWRONHWszr7ONm2FK6nYDCGtP1Kb0ph7UFlzTM0FFcW9dtltOlgJUcR+nS2KlPL7oylzFYmZiXZOS4kpIS4HMaVGJm3Be18Kv+4T6cdoDqZTluuN5rrNf9////MFgIMOJVVe11Z9d7F9avYrEhzmX19OXUFKLCyxf81xuuL1pBiwo266rk2AcYHCh9TEusqYniaJ4ul1BJKk6y6xDhCwauIKepJUUSZJo2RR/VopHzC/osk//7frRMRzSqUisUTabzMyUVgKPlAnlC2w1UqBHnEbJyGUrzwOuIdrMikilkOhwYq5IKOFXQ0NNFlUxlMRvgYnY+UCW4ym2KrY1JzlGCAml5tDjMKdVKKOqWLRuVRbVYMYuqEro6oj8nouJooTMpkO1Z9G3Be6hPdbzVTIU9KsjYyg1RxJ1Qwlc/OZHNqtitiujQX0eusPk8dT7X/tbNa5rX/D7cFiVy5EJNWtawdvXjM2zW+HtH0bL3T1vKwDjA6MPrMUaiZPE0RImSdMDZJkknRLqJDRQJElomrUjIixdRRb/VWmk3/9X6KP+mjKRWKKYgpqKZlxycVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVBnh3iZitFbpaxoVExgInBLLJgUzk2KSwS2y4Iv/74kQOAAcgcM19MwAI3e4Zv6ZgASMCLUH4ygAEWUWofxNAADTXTikrm3Rm2MujEou/FBGodnYy0lh16ngWAaWUYRbm5mNm8z6RuK3+27cA4xKlqUkksxGdnKaHo5JZJF3CdTGxO81Zs08tkFJRW8o9DUppa043F0AQZzWpzc7eprmGM3dtUvcKWx21Wu2ZZAT4pIRWdq37NWRT1bC7Xm7NSlr1MI/F3dQ5looKi09OQ1Wpqs7qXzk7Fbd5+dVLkdbtDEnBKpRhjjd/Pktu63TX9du5du9tS5vrNFqzdwu4zNa5//////r/+j7ZBnhnmImZJt5JB6uMRgcA3EgJRDTl1CB0eDI5OyxWgKDKkprwyu6MvPB8pk+cppbUMw/FIm3sr3Kuw1NU8pRnEiqteatB+NeGXjpYAhqxNRiOubZpH9hu5jDUBwmYkWGN2ivO7Z3HZrTs08huXJXehl9U9yEc5KZPZx3nS0k7+GfcKGxlU/O729RtDn8ZTVpO8q91zCpf7S/lvKmdJs8flk9Tdvcyyj9FnUvWp+rZvYU0d5QOi0lflmz2zq/96O4U8ktY4WcP3hQUzWb3dWp6/luXYWv///v///+P1bPQJCzw8vVA0gBAYJw8PQaHgf2K0i3lC1YfCWeNRFxYPPD+TIuUEJZai4RcagGeDACiwMSkFqIWhUaDkgIBgwWH1OmpGjMmo6TBlAYhaBrwwDTAAQCACCDHgOcpJly6VCcOm5XPADbBOIsgDFEgTgAKbCUIaRFAXQ4UzdVaRcD8A/ALhxKBUFwgZsugrmYrUahNpMimbkosDcACVHGSaJcMB0EPDSf1Cevumyaah5IGWxxFUQEJEDPtQYVEXEJyS9QvwGCRPomqB5JiArNCo6BpQLSYWFg1ChACBMGBx9oEwYYPABFgAFA2UQlEIQNCXBFYJpGongifDtHzEuuozDLoors3Wm3//+RceOdspm//+aDt6zBNX8zDzkIsiNCNAEwAgKh8PC8LB0HUhNz00aCmqutXBSdG6AtgXGrpnAAhAbeEhQtZOUGUaAmBAwS0BrEFEI+SKkNHaVCNJw0SA0BkDEtgLaAkHCAcCEABxn5FUzU0Lh03PoADFQMipAYJAZYoASiAkoMByRmTxGDBTTUzTUNWC4BAMdhOBekDQlWU+dBoBHgvqdBOtICWULjhlgSIUKO4nwQAgMkCDmfqGSffdB01BoQvx1CUhkDQEyoG7bgsSBtuHBGXqF6H7HTEnWZTEVmhUdBBZ95AQxaGRg9kDc2QN2DCz4BokBBIMYiURxAYIEAFbDECKpPBAjBYcfMSKpJHAxGSh761t///lwtrVWaL7J//8axCv0P1LpCaqmiYu86zfgCdQAR4LgWMfA/CmIU0hUGqyCYi5mj/++JEDgAGYIFO/z6gAOpwSYvmVAAfRgU1zem7g6LAp72NKzkOt4LcnxZ45gggOajJoM6AyUKwbzCDiJF8ulVEgIfqKTXSskXj5SFbBboBQDAaxCocGOUS9lotdVJekdMkFOWBZwj4BovB4SYU9TGSi8cLijU6YM0uDGgQCIGChoGvHNJ11P//7MRgAoRAkHRWxHP39+Yl0urKI5oEA+HjHetf//YukyakyIVAIE4CAUNJJG/9vqdxaQGA0MQkfWM+HLGLf/XOqXej//9/rMScC7B3HwrNfsDAALlkcyQJpyrMQMnSY4Gk6G9F5MKBuRAvmZVJ0G9QAAITJBUTFZ6YjKldckmYvDLDuGeCwoAELAKEMD6YPBQpA2yEyOpEyRU86VbzZBzFBSTy8LKACDYtpVpJpdJTfSmI5oeiBjIDAYEAIuUgqvX1/9aJDQmGS+fUj9dqtbTEfIyoJj0EQVGPLqOpI4aoq91JmouEXKOETaBgACgYcRIGByAA0CiDHTR71pOYmt1OksuiMQaAUDIgEEbmZdRZysEQAEQCMsRJJ/Ut3m6RuakimbMf1Vf/TFzGlaNaI0AMDAYPeIMXi2RtUPVQSAFsCt7qNJvNxZcrxuz6N84b70DzyWOKptXpmuOA1jliIDoAY+EpqyevDdeNxuNw25DDF2MQdyKYVIg47K3OMNVTYo4wICUollJzPedPG43G5fYry/6ljOXy9/HIXSZoagPle9YU9PT09PT26fPDedPDb/qZkIkWhER577+sMMMMM8/7+eefcMMP32AxEXQGN/K6e3b7+H5/+GFJKJZGKeVusIVaXj6XLGHf/eef4YZ7/mHL1T5iAAADBdl34fp43bwqSiMP5DkspMM8+/+6ZvyJzKYThzDllSlm89j7/dFJjcknPKZ1dqH/WumtMwJgIYATxuLUWqyZqUQgCVRBfcuabZLopptdcmIsudxsjqOwzB2GWd5x0HEwfiGFMSOriUmsc6eV08baw1hhjEHchyksUkvib/AleeacXgaRe+kwsVOb7369PbqM4fixXl7+OQ00rHIp3e65X3nn3lzWrdenp4nDaX4hCmNTMXkdfPPP/13uee89/////yhCw9Jp15Tfzzz7//+X3KSMRiMRuJu+DUJEgdyph+sKlL9PT9//wqUmE5U5UlAUBkYy7b3T54VKSMRiWWOf+sMMKSdWEL7wVcpKlTCoo9P3sGYz9ayp59tv/+wvb6B4DI6Th6YgpqKZlxycVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVHvNzdtXqDlskDlkGzgNBHjBICwsKYcCoSxODI//viRA4ABhWA0XmPFnDrkFmuMy+kIpHvES2/GoN5uKX8zD8kw9esSCNb2iUHyYnRsrVveKUdmxJEkSSzWfhrBggGJwvaWgqFWoahqhZa4YXsJmngwXr18+UxpKr2tZ69evXta1rb/Os1JiABSxRrYtWta2tb/P////ywlxcva1rW3/8Wt/BevmI0kWGpLCrWV7a24NcRt1hPmJmfMTNGti7oFMEGd2jWwxMz6d69YYu7fMFWl9JapGWDFrrwmZtjW//3X////0DCsREbu0RDEAAgADAXkqAPiECxagJw7CMHQRII9RnwnmZyyytOSyVj2q1bGYdnarIXGcqLqApEpirph2GY1Gk7zYvOhcSBS9ezsRUL1DTRNFUvaRWotxclWcqGoanVcrk8SohSiVzM+gxXta11r/1q9VqGiugOqjRua//Fq1//////8J+aLM+fPnz59aFWuva3/zVvElFhRr2LBtbbarYtrVs+Zn0aFG3luZx6R2AxnOm8SJ5XK6GcqGnKywmJ9GttqG8LE4Pt5zmK1IdF9a1rWtfb/6h2mmr/85/9a1rXX/xb1r8+2FMW5RMz4/i5AAoyAEKDAoZKBP+vKYbJL3VjMSgZd8NPHD3Yfgx+Y09kMXY+7cBxyDpBIp+HobtO8lSXGf17YysFXgyEq6hx0lpA0kOJSlipPOtAsmhqYlS4J68QpYRBej+JshzMulKf0itYxuq6iug1TkREKpXKRUszLDZUapW5bCqCPiPjP3XvQfTT1BYyuXKezavUFNX1SYymC8JEzZAHK6CZyznuRmvhnbs4yqdllmecBhyaBOatL5BNy+URq1XzvQ9MyB/pXYcWW09qUM5ZY0I9ZZtOYUlNfilHKKGITzkv7hVp9x/GifRgO7MqtUlNIYY3+s5XLY/VpaWmxmI64tCtFORnxFFxXZk26eeytSCW36lvGd3er26s6DM7REzUKy72pg8IxABsJwkg0HMCh0VByBEKTsJiymXA0oRwuTgRQgVQiS4v+tLjiRlBUMQkcgZHKKTUSGDqRTVgiGX5mLsMs6h6V3qlNIXaeaec5kMbls/QxHVO5T9Q9K6sslNaaxfqIW4ch7liZfyNQYz4VSRIdtsUqqX6eZjv341K6e7LpfhauzsTI2R2YMhRRuptRNuL5tZKIVR3D8W9USPSW11Hl1i0bO4OrTSetXt7appsbh7FfEhQsQ5rQHrpihwaxaZv4L05Hsbfr27Mu9f//7z/6966bnEx6UxBTUUzLjk4VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVDcslu9glrJAghalwY2aIW04HMlUkfE+lIl2aEv/74kQOAAZ9ckhp+G5I74+IdmWP0hxhzROn5fgLpboh9Yy+eVYunzAy8YSgV6uVKeTGVsxS+M6edHq9UD5H391oIMw06ZDDtvsaidHYvtZf2I5Q25MtfWJwJCJRDtiDJXHodhukuT8O1M7uNJGI/O7szFHJaRXIVCGaft0qarP1Mu41pHn+scL+Gk0DpIyRGQPSkzOqs1TqZE2c4zk4eY6ou6lJpKckkqJOLyapgSrGBwyDlAFkS+maWSSrs7+tFEcRrddSlqW316VdFMRlMTE4iSGNMvZRUAcApAC7DJlLqjfreXVKKZ9I84VDlOXaehmY9Kqe3RS54HCkMuhqfmZa/M9MsidtuVqrOyrKXVYPnEOZyCmgGwVOle2y2dlMWLwRiVtE8sDWV0ghPmjp7Yrj6eLiSSWJniL7+G6csvjlWavF5Pj6ExB7Ic9c8RXzK2wH1Y8dkrBf7j7zd5LEKObEX51C9a23imbRWFqh1yP59Gq1w6/yUfxaaZozcz21EUycZhFgNYUTI/iZq9kjUTsJU6a3j59mJBZTmYYcS2IUm4tZKMdm1WwXekywtEy+lQ+SiAsp1Ur650ssKti3VuJKwYWaxbv9BJNuS71f6tkIcPwI2LCzLabRquLanFG2VXCubIp+rhnbmRLsKGFySqcPg7TlfPlOLaO4uRlGYjmVUN43btWTCMY9wlrUjtTNtKqNAHkIU8N2KlVcbJbThO4d5+os6T+Jo/DUn6sGChLkwrB1M6+qcKqdLwpTuOo+BHhcG9lRL1JP4iKV2XjctZ3M8i4rLeJuO9eMkKFrwtSOVp93xD141cqlhbNU+4zltxzXEObNrfMWsjk+hQhZgRTub79sf4+/j4zX1e1zrF9V9rZpb/W6/0tPBeNJgIeZa6Y4tgtgG/I5gq0ASyk3LHrIiBka/Hnb174disGt2cGTS6G7ccjVLubikFONWe+EROBKTVqVtJmGxQpbKJz7X2tO9Ak64zOc56XDAw2kBkk1lMp2uyJor8wZYbx00fY6yVu0BNOib/Sa973Tr+td3LeMqikDSmapKGXRGXSevDNjXIbbkZtDWl1TU/Gbli/BUMwLEpa4ssznI7ckWLediVx6qmkPcXVpodYUGsz3W4ubWla3HEf63qr2l3uNZi4yw1mkks+OYi4vzuTPxSvxvP1/bOoutyb+fTfxa2bbxZ7PFiyvHM0U2QWzHEgvaAxIJnHd4kTEFNRTMuOThVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQABrm9bRAJRYcFhTJZm9LYrTyq5upP8npflNRr/++JEDgCWwnTAU0x/QuAut+pnL14fCdbtrb8bg806nWmmP9iMztBR/Kb8NRa802LSek3FXCQiWqjolm3jjN1Xi7xYBjAAwO80xgqRTOCWQISm0aG5MMysvC3jgtqkM+z1s5QFfRu2Kty8K0N1pgplQ+bSLhMHZUrWmlzs1JJUCpX0BKXWj95apbtej6Z6LqsrYLYkLLktdU+mVrPM5dbScsmKyHFOrbTabZu9ktPda05qkiuFeVdMZvWm4ON1+629I2qxcZ1LrGa+m67lrnOsPrPoTMrBzNJwKbbM3M14UEAAR5ZGiAARGW9ZawViT5ymcyv0U19eMvbL4cvwJMW60zLs3xpWUS9Uq6WAw45TjvekcmM6axWCPcCA3mZSyFVqORssAMsMBcJhy1TFaryF/LYWOAK8m1Mq1CrE6vKU5jlbX7czop/dvdYgxWuZhL6xeuq1bxCQ2TGi3o2xHUGsPM6liWixFdM52kl1fG9IdesHxcyvn0be42d1+ZIcbVrvd2tJ5t3rq1t4nrZ9qE+YZKwn25I1ZtRYNcwfChQvLAi4808ktZ6fT7FL2vFzjTbpRIoWYQMCSMqc5ssrYom3IAAKBcu9jYIMIJwAAl2V0rtdWil1JDMVgxiTEmTSrdnXwzSQ9KKdlSjrX1qxKtDatqXNh2W4FtoDgNrrLUxUAqaIGGlZCITNAzTsCgx8aHQteDNmdRni2n0bHPJaLadgVx2lor3ysQSiV5OVlIj0i4uJ+wp24nTs/WBVZi1YkOa2FhG6DdJClH8BRH8izhSSNVWVauFqdlZjeIVBq4+tI2M/vo7DM+xea+oU72FXEIYRxXxGhPczbfQaQ8QI2XurPn8TVHz4WZVWfQY33mtay1bZrYtBi2i1tvb2FvOIT61Wtbw7SxrOrhnegpCcLSQyaU40WjU9+u0wLzaNBQClX8WQkk9z22IHvPsxKH2UurVpdzcALmdehfiLwy2YEAVLZVMuSlTGXQVTSuMCIAxYKgQcdZyhwQXMEDYco4nOYrqdA9G000OTF0vpc0RIpy2g9iMNRiCGDv6piyWK2YMdCBnhYjOMuj0jgFbnmRKH5E0bnUK2K1iEB4kpniUTpMU1oqsnLuNWMi01CYnsTr2oZOjaXrZgbPfd9yF36PX5ovFoSlbMXXr1WlzcCFHY6bo8cxQoTEW4L5+wzbYma0HD2WS0jk2OW/Fgyq5yfOTLlvVM00rLbbDFrGexruOlonhXgD4ZIQBjPUyWhzpMmIKaimZccnCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqoBDnqIAAXAwQAwUEXdpZx2lMmDOS5L+yy/2WxJ//viRA4IByZyNDuMf1DhbkaDaZjqHbmisaxpmIO4M9Yo/b8BrVFGs6vO1pVLqv3uuCsK/DDnGfZYZU0fiCEpQaB40WACUB0wmCzUUFOYQ0zEMAwvhAlam/0Sa0rqnh12UMTAgNMCgZHJ8V0nR+IrBdXW1hsST11pqOUrrPNLmjJ7l0NDpeZHy67rUZjRqOBc02erTltb1Wvms/lrMmKmWXtrzR9Z5KuaumMlWbrzLD5ie8ycrly7eu1Gu6A+OSaBY/JuLdOT1oyehJNzmL7u9z3e6tml6rFrLDEnbn8WEwvJ4LLYzAAcAnBwkkLVKIgAAz8gSxGMBt0adTXFMnTkVBD1ezGYrDLDZfFXary2gi2FNcjUNRZrTRUiZBKYJjDOpXHH6cJ1pVDK2BIGbK2fLCYoUguhrFXCo8aFrMsf6Hqd9lhn/hKUST1glLD77JQIoDX5nrVpjFY5XPetrQ+TAk4ZPuxetd1o+tXpy+7zJzE03Jy2Yu2OTE9WrbacuLnrWZXRsjkO32Zgy30+I69bi6Oh1C66mMYhKbaAsfqVunJiYxQ0aOqWKw7XbofJXstJWA8ndMkIyl12pR8yfWHtOi9jjLRITBmjEsYePZLNEly72JEAEqRjeRpzs3pTQSt2pPZWktaU0EujVl9YrNLqWyhqzJqcPl/WGF4mXlnVmvSg6oqaCl2S4Ja1xHGbCAgoIXQW6a3AdUMZw6MAlB1aQsDLato60MsKQBP++ipXFYCoLGFhm2jzrJpIbQW7tmJMOa9PNLjJODVSypXFYdm+aXLhKOxCVuycntDIJgIoAlEEDqlMJR2Ti6iuOJNcjEFeesnqYyPruy0uslElQSi0mVHLtmWD4uiU8yST2dJIirySTXDJOTUIlGPHKQrgdSIzmMcSzZKJIkk2B1olFq3wAkH2Xd8qrASHZeEwfAApe97GiQplFCUTa4qVUsUVPKJcqlPR6MTxVJ1sQpfElPpRbTp8EmTs0GZ99naAkiAvpiDEhWSmiYkBmYvxwpoZAdmDBBdMgCAwBEdDBMlWoayEGQpWqYgIzQviTZmQ5sXZBThHMCqQ9CT+YC3IVluWi+nC/EeK4bpLWQnSnQmRWqZVKZCkSaKpRSho++JWXFVKqYT6rcopWXMWFKytSifH84GktobEa0NeOy/IVBgIdHexV0W1UIc3uJ/NKtUzp81q2SNBoxPdIoyhgjFYtvm5DnJSqGZTGkxmk/cSfC5Ks5ScmS2uLFOnVTCjQkSYgpqKZlxycVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVACBKc2/9jaAIDFQkd1AF1tMUvXQ/dHS3qarel//74mQOD/iLaJXrODZgg4zzejzD4kAAAaQAAAAgAAA0gAAABEzLHVcp/XeTBLLAQ0QpEm45mBKDJXNAIWjGmQccYQYBKAqhVjMJIDLjxC114J7pCM0g+OOmvwvUAChdRCkVCX8RTRoHjAZplYDKjtirIKrLICR2OsGXarcmijKkopmrxizJWtOC3J4nrhyT2eSqhlkVjUzqy/zWW5PXDb8Pe3rBlAUbkdUXknky1MFrscZs11lTIV4tUdOMTb7Mxao0t34Ei8Ib5TVHpGVAgn4pWpos9SKPyCUvsKDQZSkUrXQ28CRuMReenbU6/TOVblDVZlZllsgZ26j5uq7z6iRBNBc1JIGAyC0af+Wf5REUJEiDyCakiJxSYBJL3/2Ikf63W1ZGttkvjOJZIecZxnGcSyyZpfEsl54saKzIaX4wTYNg7zkQtKIUaJvHqmU4o00jjpL8XUmRMirL4hYxebk0/mjRQu4uNk40oo+FokiIoGDjoZf////////2W//8mRq1lsssstlhkd/8mWWo5MoYKCBA0cjJlWWcoIHUmIKaimZccnCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqkxBTUUzLjk4qqqqqqqqqqqqqqqqqqqqqqqqqqpUQUcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABTb3VuZEpheS5jb20gU291bmQgRWZmZWN0cwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/w==";static audioError="data:audio/mp3;base64,SUQzAwAAAAAAJlRQRTEAAAAcAAAAU291bmRKYXkuY29tIFNvdW5kIEVmZmVjdHMA//uSwAAAAAABLBQAAAMIQ+rzN1AAAQCAgDBgECBGDDP/99NXazg4//5w38zMeAP/PMwIgM8Is3UBpEihZV2w9MDHxGAyMKv8LkhCBwMQjUDGYP/u8RoKEBvABiEEjJf/og2AA2MEiPsG5f/3wGAWNgfAeoAEHyJHv//wMBAYAIIDeF+AKBQFAWNgagao///8AIPjiJwAQAAFAQhBrgGgEBoBkIPj//3/28R4AUDx3EQBvgNjA8D7CxsLTyRJQToAcAyJf////////5oMoMweOjLjjY4TguNAUBAMOgYBACCBBAwaEsxCreXFUd5wkHUw/PwwQBoeAC2PBRQigEFg0HtIAasFUIDiocMGgUeAVlPaOGJAyKX4LlGXEoEHgPLVDh4RmOBYABmIrqYcSHypbJEBJulkJQFFiLBBYVGIwIj/9Km0syZj8wvooAlx3SALF910NVIQbTRpGOpKqKbetSVenegABpIhHYwAGDBIQQXclNixQvErTQ0Dk3pZK3RzowsEgCE0UEO4hBZgAMLER2MCAaXrOuXKRetinlUpYhhLq//7ksBlgCvqH2GZ3hAC6qrut7GgAi95iZg0hBC64dRUBoJYgrOqcGAqGFgmm3aTNrVbnXR5PM3q0GbQa0cycaXRsvQKAhp8VS4BoJa4tlb4UBHVVkSBABoXWenk5Yei1S07p/GsHbsRl0rMYrvjWorT6W6aifzvJM++EzPQBnTSGAP//////////+Wyx9J6U14byiWov///////////4zkXvSWvRS2IU0R0IEyMlkqSbCHIaHKRQb+jnVYLeOqaMF6RJjcq0aW0RBLPfyfLF88qtoqjTjgggdJ4Pbq31LAXIKqCoQRHWWxSXTcqtOnjdqsJMmZQAto/UaVjmWCP1KU6VSiWye7zl78e/arMiot46x+5z8dsI1vX1Pu8/P4bkPM/zy+9/Nyl7su/WvXZd2tg0V1rV3Gh7Wm8qDJ4nf5SZXL2UP/uzZW5zDu6P5D27auM15c5cs/HtmrP9013SdS9mp8ieDADgyVbbZHIaNGNryLGRBK1D/+5cL0CIFlGVR008ef/ybGBMaSNDgpuDRWPfN6+I/WnH3A4Uj1lt7ORjt3/+5LAHwAS7VmB7OYtkmKrMH2NTbK9DgEMRJSdJqOpAwLSACuaeleYH1oHQweitpenDyy84zRCT03nWoLG6jVXUevkLZZmyzSdYXaUynXlakyQq3TnGkxOrLBDZymfk9n0hb3TZRvI/K/KdtfR/VEGAJBoyXbVyQqPt2jUDZEDWrf/0Ew2pOKpngnepjW1+L5Zu/9zNuAkZgSX8oZzTxauTjSThAnlgP5JAvIGvUMgccQpTIlDRhgojHniUmYHCZvLUnI/IKKqQXMD0Y6NTWUNdFTWrPVrFpHtj0wnEaMwGLTWddRVoMN0qUaz8qTsjx3WnGna3SGG5nW8u2c6QCdz8uZbtp+r6v2A+lZLK22xAI+ifBhbQiWVk5/3IgqqBgR3fU7R4+1j9V7LbodlUZHRDfFi0R7dk3sx3k/JKAZNcalN65C+wz3c7FBGgtIkSkQNxZpJmQ7ygBi0zLPKO0jyk0Ay8VDp+ZVnlHWFykKgnL06WqpODFQTpOcN6UfAxaS2c4nSYao2JlUfUY2cfycpTjS9U5ZI6jMWk9Sc4ObQdapt//uSwE2AFIlZeaxmjZJxOC61jTW6lfo+nsr7a3batiC81ZJIikgxpA2XF7OtwK3c3+4AjQcGVyiVt4ROr+HzLHJQwHCblgjCnJDN++l+w9unq+biiyzRkIvAHKeFabBrcghZiDOE3RZwNk3TLcnmxEdralOtdYQa711tdY0JXrrPUVCEKU/O5bRjMOtGcy2tisXqM48pTlEWjI1NNarC8xys9Ls48WznM9MfNqt6vS96vR/V539fndpKoJwAArIle3aJOB+lJs+YhmSAJ+4d+7cTiDjRXKuQAIHb/krpakSlr8wAMMn4lIa1m1O5x/VXdkjAhFrVDP9rzk3QyA0yKOdnI/ZuSSTUlzo4okieTKKZWpFZsBcFJalu6Jou45iygtJ2PKSiGNLUF0ruLA2Wpj7sYLSczEggcWZKYoayoWrJOcWkSzH0xoJrIMZonB+Z3OhfEFIpHkB88sbU+1cx2XqbmG1qvQeu9bL0X6s9zkyAAciTHdawmw0VwKdNrMgkR9w7/I065EDmvReEkUufwXvsM/c2zAPLAk9Y3B2n4+SU6v/7ksBzgBaF2W/sZa3ClDttvYw1uKR3vGo52hl2cA/dtS4FpvZXtwjkN3rlHdC70TmYya8+gE6KDtQrbUNaKtdR6lNh0c/TrPVRHaM66ijaiK03nTyi/ORmLqjKo/KO6QpunWek+ZzgnsyZRrNt5Tq0J3ydU1trS+ynrnPMmvbPWnHvXVrnDwCJAAOyBUtlJJYpSICCWx1yS4a1wx+YjQOKEJLIMqRVYpBe18F/ffrK1GR0h/O/UA9mITp19UFZVM44jdbK69mEEfdtykbdR0Nm5Q+6NvsjrGaTqzag60Fg4U56bzrKMWHKR1POTh6yxNyDVRaWU4jj1Kp1Jzk4L1CdrNrsThvnai2Os4kRRjLMaJZHZMXTCWdNjicdu8lKtGzraRamvOty696E49pmeXpZ6nKt7VH6pw9VAAFAgqaTIAoKyJWwWDArpU0Qhw78xaX+hdUr1EdxonDP3xywe3CbsIzgeZf7kT8ARXsU+Y7GBM2QRPtSQ/DfKHKgFrJC9eObQsmYWqGRVTdRY40slWaqA6Gy2oTu6xCJLenU14up2nL/+5LAjQAWJdtp7OGtwq67bT2ctbij1CMxZacy2m5EHSnOvLJ2Zi2dCo/JScsKzGFR6Sc66IXxjuWx83j3q3nNo+VNQnXvIm9Oo/eTXtXUeoScetVn66iwmQACgAMonAASGfDyt6wSGmSrcDgdznxzNGsOIUW9FV6KdNZ7BPePPyZphwJ4A4r/WXqz+R/NWXiAa56lvXIv2Q9oexMBznojR1X44/05Q4ZBNLis/pVD6CRk+oP6q8oYeiNMZzUrZiiNcP7tRu/FQ43w6lY2Lg8Mc01V4N+rFY7pP6i+S91EQiw/UWx2b11AS+rl2O/m8EjiojP1FY38Vv6X3Y31N6HmfGaLw3Q1DLneZQ3fSpds4I0QAAUABk42AAAxkOJPiz2ZIaglfps/uSlCpCTfqZocR8ee/4Jv5v5+FOmQCzXkgPk1J/ezU1GEXxmKbgDl+T6fblDqGDSIs8o7kV2+ON2c4LPMpphM2n0wbpuvNKz9FQPZrPTacanHYL8/MWOG9o1C9SUZtLKTi4a08+spTkfROLVH5ytnEi5jOZfs6xhpys9N//uSwKUAFx3bY+1hbcLhO2x9rLW4WW8Y9bT0mup45HUepSY6z0erreZzp+ioakFPTnCyqP56fmLnVU8jAJcAAXADJuMAAgYAloIygQqjMIXP2rH7lK4yIND9yuqoLfW8fg2/lBuUkujoBtgv1LMrkH7g/7lluBzBwJKp+ZgbNou5Lecs0X7Uxf1A/Zy/8mzMoF1NMZXXUBSGy3m9R+bxLSOg0xnGqUGApLQmFRbeThITVR11Izri4b0Jx5QvQESyVR9RIzsijsWYMcPyUz7CiyTKNY7nW8Zp2tOYPPyOykJrJzKRULJS2mErPz83LHP0Zw9RjOmtCcnShQrIywAADgBlE0QABFWIt0cqqKtBvfIsMqGPuEHAG/sUJAknNZy7EaegejOnrIcwPEx+GI3DEKlMRyu3X2CS4VOS56a9SUSeW0LWAs1ev0dWR1oIt552DDEpm9HdW9ylhzBpuq2zTW3dc5EgfX3WNaSPfWh3KjMtJ9XfZzp+bVZPApt3W8Y2Gnf1Cxlj3NVMJWudX3ZuzSnLTUCsltxq2s3IXvU0KmW/ev/7ksCygBft22PtZa3DUbtsPay9uK2P3OqXj2Xq4xtA61BxvdHUKnP/OottZbZ9X2et6U3PuBXFtvXOWXF90WcUwu3EvAAoEV2ABNJRzgVALIhECM3k9XVWA4CWPcrYEKAahFZVjWc+w3PGUw8MFnQU/MNY3IP9u2sYeSdMSKUyq/dezj7c1PQOIF9YyerGOO1OVYpNmI/fE+ZPWfNLheucCbLb8O8ybNI+rxO98jvwdM5aXp4upXDwee5aeDjc0sDwZz2NfwfmbML70eyj73yz9h96ry5xbwt9l9ZpTS99SZ7jWTfLl86xG8ebGecWpLd92+L69onk343X5/bpx3ivm2vT+N0g7zG9NtVdT9MzRAAAwIIckgAADGUDpaXv4nuUvp+prUThkSBUlekeci5vZ/chdd9s5i2jIA4W8fe9be7F6fmIusg4kYpAfaSE7bHvUjhBksZzFHhAuLd8dSaYEblT0Zx7KCAVaZTh+ygozWenKj9JYhyjPTmWUozjpSncsqcqF+lOtKM7SFu6Vbzau4vudqPy9OtFqx3PzJ1PHjP/+5LArwAZhdtfjeXtwsE7bL2stbi56V1PHC6nnpXUfjuZT0ZXtGpC9Kce0iZ6ZTh+jIrAegAAYAMmpAACG4pmMkYhUFUY/On8cLk2+SeEsu1B0kMJyw/CFZPz8eqjoBsgv1O2pmRfJPudnib+T0s5QXdOBlnInuNxmxBn1nn7IaO5OzIjlqebSplJohPyxz0xlTzeJaR0GmdR+ywwm6k6bqLK4jyNPUXUjM6QkaM7Ub2cnidOdnXkadcij4swy2SM7SC5ui6zZY/1PGVOutOXHn4xpzN5ifpLGOio/NpWepy+eTPzsqPz8nFBS5m0j0pF3AA4CH+ABEEgX8VqpBWaJxpfcwrTKmih9Bc0VIho5dd/CRcg/8rDMw8TzwR8lnvenUcplknyUVjlmmkfwvm5HFT+a/JLF2NabFqgzrADCSnmlM9PpgtJTWeWXpUy0FglCko/LlRbPuJ6L82mLHEZyKpRpzB1FOjMxXm066y9OKGcuTCdeU7OgKLJVn5JTGdGicrNJcWo/F6t5tJzLSWLs49CTD6z0gH5+azpYtJYsU1o//uSwLcAF6HZY+1lrcL+u2wxrDW4TCVFs0mZGUfoudKUxjO4hgAAgAQr8ARJZHuYQLmB3CHfqezhWpUuQxE5eq60Sl+evdmGz0rTOUNQcFOISHZXjQ2Pej4MuqoGQzGJVbqvNm7PbsijQSTRZUXvZyH71yT1TLPY48zlbLnAIZA60uzh6aOHKGxz8/ls0UJoLZE0mE4bzsNK6UqY6bUmIoiprWfkamxiKDJzp9Y9JU5EE/UVuZpR2zM+cCqsZMooyk8/E7qdRosnstomk5nZEQUioT5BZ+bUSyelAtnpvOFtONZrQnJWqcjOfegAAcAIaoACNERNMpCRQEu0MPV62HZ1JEMCQXjNjAgZtnl9yR9jf3a6hgO5gTHVDIPgv5qxDYaVI7uVDLMIK+7P0JNffob1yb+Ae50eQOMc46zKYn55EEfKKeXqj0+oEuUU8u5bTUEAlRpOotmENJTmt2WUJ1hdG6bVH1F+dWTA4WadeT5xkxSdCdaTq3cRbnWUuSLT8SicdaMkXnol8482pHkj6Im7LeazAspqFxSkZq5wtoRdTv/7ksC/ABjZ22HNZa3C+ztsOay1uGtNjpQnZFLQ1AAoBECAA4RZhhy0YCIM0BHERr6g3iBpdd3bkyVNjMEd23OvVqNP5amoyMjHCGuqzAzdb0SjFqhnm4m4BAvz1DIKWnnal6CAdRFakVmoXTcgapdqCV9I7llYfQ1q8CGC9R8R9DaKsCNox0COmPEg0abMaq0/kC1DwnarsuH6i2yZCWkPmbIathxFLqPEEFNerfRTPNpjUbQ0mWEwbUryyI3BnME/IMDalvBO+LAcFKQR7dxXW3x2RW6aEPXG7ttu+Ui027qLhW7uC4PYaNx6ksvAcZFXGhIGS9jjcLuUq2+fmNl5BWUfDfZcILwvNGeCpTzeAABgAME4wAAGfCwl6GRTQ5jDuFLY+7NBwEuFYr4DoQ2pId+9V6o//52GZh0UDxztWi+F7qy9NocbmIDtXny2ynODNtbOdu12iuxbTYMrk/mJUnzrzOYH5qgB2NFZvUepLBKG0/NZW9COMWqjWTnOmk3jSJGisweR6LCPNqGeUSs7H4TufrPSup2FZjKdy5djgmL/+5LAwoAeSdtZjeXtwwQ7bD2stbjHajebOpoxKnn4/MtowbLNpjH9lH49jxxphOFk2WLFNbTSdLZ2NB9Z6ZMVI0MdQNwAMARMgAJ1LyMCBjBAdAWAXs4IKCAyxfhiVOKHArA4m/6Cc8AaaYpIhexkn1dkIYGcV5YnKGE6kOdeH2Hm2JSSmWRCHevF2gjbSDAQqWZzGQfP2OxeNgI5QV3d9118Q4YLtZtEo8zdw7hILkYmo3Yu128sMQdNUf3f7laNRbK0i7vqwtQ32mqIQNQRIeW+bC39b2M672+Yt1dRqwiEXuXw5uz68Sch3gx7uXTsSBqAZuYW8UyxzZcKGrHzHuzdSx725Q1hX8Oi4cPEoqFvutRu1uWYVDO+Id2/TUq7x8NiDkAgAAAuCAQ5J8xxkyjM7Xk+lM0wcwQdDZTJa1DZhmlepZwJYCrSK/S9lMtqPqlSZFgaLquy7r+zuVNamaVeIAGgNh2mprVWlwpm5Fwmaxq7GYzZxlM7VlK0S5IdKhVr1W31azccyvLi4RYMXLDFoniVCElheq1WsuoL232b//uSwK8AHBnbXY3l7cPTO2ohrD24pCVn+uXsXD45iFKrDCnWWsFWxdyF9ISqYL17FhbtCVyihuL58+1BVsXDEW4hTMwq17F8F69e2UqpxbdYSui2YjmOqNCYldFqwq2LqEcyir8xcPsvWFPKrMj59GsnmWLhiOZCrPnz2m4L169mYoD6NbDEzWyxHMqgLaX4uphGaZhvnQa44hbRhDtI0QMcg+ycIQtxcZxmEwp0/kSkkykEWnE+/iX//rGVzCplyvLtsY2CBbOzxaiJISKAxB5h5ZRZRZR8LSInFlHmHlFGnFlFmWgjUs7WzmnGlFlHxeyzs7PRxpxZRZlxG///zJxpRZR8XbOzs+bRpxZRcBlNNMNCE0wyNVVURMSqqqCaaYYgrT9IMSqiDwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7ksCKgBOhUsgHvM2IAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LA/4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uSwP+AAAABLAAAAAAAACWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7ksD/gAAAASwAAAAAAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LA/4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uSwP+AAAABLAAAAAAAACWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7ksD/gAAAASwAAAAAAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LA/4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAA//uSwP+AAAABLAAAAAAAACWAAAAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAAA==";static audioWarn="data:audio/mp3;base64,SUQzAwAAAAAAJlRQRTEAAAAcAAAAU291bmRKYXkuY29tIFNvdW5kIEVmZmVjdHMA//uSwAAAAAABLBQAAAMCQ2snK0AJADDABDGJBOCD1MB0aTAbQJXYDJJPCEVamAyIEAMUivQgHhAM2r/A1YMDcpwEkPvgdRYCY4DIBA3z/aAaEACUA2HAlcAy5//3gSFgYkCIRA2OB9w9j//CygLaAiABaOF2g2DxOf/7/E9icxWgBxcEgACggBAIFgAN3///+I1C4cQDEehicjgDiYX4AUCBZIG8f////g3eJiHxiCYWsg2HFWBkwIJBABjABgAOBC5swJ3/////////TLRNuRMwJwwbAGAQEBQKBAIAwIBQKBQAFfDqwhM7HUymRTUhAMKhQzSAEijHIRLag4ZCIDmPwoRG0wKESgFiADl4QeFNUxXoxdVdIkfTnLJEo50W5wAYgCtCGTQBTXHU0zEkFbEK3eX4mjAT5vMaM8uAhAmONgkAhvGn8fOHGtxheTWWassBooUCwGMCRgJDjSGcSFnDLIMdV9atHD0jHAwVFogK3iAQDQ8oiFihpYm/fvs0p/ohGnGcgKizGDHsR4MaHUvjJgBUgfd+4Ejcbnbtabr4V//7ksBmACwWH125zQADf0LswzTwAZa5MQuuiHAEYgqFIh5ENYALCSYc6qIwsRl8jsuXP0ED27GUolVHXn6k1LYrcjMMiQJroKJBwF4AABRqX+iEj6hSoqXOLNMKnJh/IxWjE729aqV43FKtmn+zNSqXVKZ3q+U1u9HYZ3MRK7XjsorST///////////l8Uq27NvOJxu1G///////////+WyjOI009dnq2rJlDBpjZpmZpSZygChBZZY5fvBL1jqQiI6GCSCxYLPIfRjtC8dRITpU6PLwixMl2kSWHC/SSXqzIQXVpaXI/o7GhSpPOSCdDgn6tzPaGkWSMyqJ+1qOM5wGFmbpIKpitivcMK1ieNjJmqvZ4sjc+pqu3jPGhNr3LzUjg507ysfUGDiyuzLBZZ5G6PmM9vK8mvRntp48zV/PPuHXF8VtCnq+rR/E1BhWo/jYj33Szynhv5t6f4xWLFxJan+qwfuWDqkWNiFesb////////0xq8S/fz6x////////32c53Pw2GAzmjAXNCESfK9CZFFCXKaM6DBW6JUsge3/+5LADAAXqeNqGZYAAv60bUMy8ABiaym7RAVGx0tPQ0xKAwboZqf3FSE+VhHKC4maW0Z8dI0xWVnzi9DVncKXH6FZ+JMvokPLnatc5N3HYmk7mIayjDr9bLKwITVYouZY6FJ14I4T+LFltf+03+zes0+DI8gj6B/fox3tx0Y7/t07Ss0zsvFl4uhcrrFdvfKZr/Uc/b7lqxdlp2cvtf9jvg78o9mTMzMzMzMzMzNKd9/ljgP/lhcNQgaNSIQkmU6FQAfKTMDSMCBhD/kRDvrWVtSLkjA26wS7HkkXKEaaigD/esC5QxeQpPP0kxoCEoF0tu1dFjQE7RcRYDSyZ3twdXbXG8Zhup41XqvisctYF5oUeLp9BxAgueHl8ySUvPG8KPG0+teSLI4e9HdY+dWiai3zBruj3Wcxc2gw93ix6PK+0T/wMYjz219Y3F1Cz8T28LGc3kiZj03LH+rzY3rVLw8/1pjG9yV+oI0qJv8ocBI4FhL/lqDAXEgAQQQQ4QgQgkw0nCZIwjQoccgKWCDrkkwrIVAH/eBYyfirIzDzEiUJ//uSwBQAGknbbTmXgAN2MzC3NYCQM5YgnirW4kioXSmZ4DGnrroNAuEg4D2ZLocw0bY0FOVVike0xCjxsYfblZWxEK2EkFbZ5AxHj+FGg1o+nanrnJFZ54ECm48fEsWuLwsyUiqOule96vpjUfd4n8HwbZx7fMV7O/YZ7vXPT1zj7zTVcZzvPtauaW3mucXtmJBVby7O8nfsDlDgOVa41X3z6aznOtYr5bZx7fP////////xPrznAIn/QFyjguaQDgKEQjLqbMQaDQaMaRUYMZYeaxQcpOiHL/Mm9MkGLtN0lNkOQgJuggWZSzTWiErF4Ah7LZeIWs0tXr7vjM5fcPXAahpAOg96SEtZNV5vLIaAxdeaAVfzDIhekdP+OOHMoDYG0iy/TNKV24bv3e91+946i70Nxe6s1t9LUolFFlSUX6//5/6kcPNMoo5KXltOXXu2rGdHKNY/+9f++f+UG5U73xSYfaK1oYfe3yy/9PlXv35RSf+PP/L/3/639aUve/EfeqKzr+O3LZS68jmZ2Ylk5Xu016XyOWdq52AAlWV78v/7ksACgBdBjX05h4JKxTLt4zDAAAl1669FBdRWINgepmMMDUwPmvgSm9tNXRXTETnZfGlfkwQB/q3EoM8lpUjzJYu2G+pCZCZMCNLeKQsoKusV0WFaZzyTSGTSsjJ//izYoELgqdOWTjJFeKzeLf+r9IHu3MaKVryAwOsPHnzX/Gfh0rU2tbQhosh8ZsdM7xgc4U1fv/OLfG38ykXocNSt2mJWq/wGefTPfD+P/9euv8f2/jVVTrLgq7P1ZiAxvZbv3+8x71hrB6MAAIEQtANs+ELRFrAeE3RNI0cpejVD6OcZdpwl5PDL3QRMIh7NhwEpLICKMDobsHTMUADw+cLJiTCyL3WbX4RXkhWbJlb6/3bvzC2os6q07fyzHZO/aXbM2uw24ws6dfzPz//Ml9Q7V5dkMTcfW5flOm29lazWrMsUj1532Wn+ximuTe6/tr1a12tZ2vz0DdNcf+ztdgtn3/pYc+mZt3CrAWHg0Lf5ckGHgyv/LtEZooUAPIJ6jKSM5U0owFW/bOVZn7pnCUpVtV6rpMR7S2rH4cFoT+rLwGz/+5LAEwAXZeNqGZYAAvjB7ZcysAF2KQVrS4HSlFQVvuFUdEbpPWXOWlRJicElpAfWG9PbrSF1JEfUQlcnkPr3nYGnoLPRNIbkrWnGHL1fnYWb6ttjXxPPQL3sh9juu/uOd1u3bPT+b1VtMdtlHrdeK+R06m5rte7cs9eZ+ey8WM0mtrY/bPvamdfrz9Optcyem1az8zMzMzMzMzMy3/bD0s4Q/y5MIBkFyIABIAAAuoiSZSwoaZDI0Eii5CFkoQ0fp0GtM/Y4vte46C0fR3mgIAeR2ICUdLxADoNyUWHTUdI2sJI2A20dZIScZHSSsYqlpNXOEhZpQlaxqm8mzZJeT1GnTdqCR6jqO4kshE5ahx8uNGQbU1FkOpU42VjXbaZ/ZnNlNaxzmtmHI01Gpk6+Tq9Pa+kKt7Lpsw51NbEOqezWNFnLKljepP8U+oOXNv2xuqZi7b/////7G9I1tq5//////OYkDnwAAAABCTBACBBDHwSgUylEFzANKgSFsqL8wKjQ9b/US5nfc5livc3JwS5znU/azSs1n4VyZbXCZ6yK//uSwByAF62XbzmXgANss233MYAA2ilNck8EhbBJCvjcW7FOvxmNlc/Dlri8lYW4MXuD/ECW9JLa1rdoM2o0GdqdM9FZD3et9xv/8RrZkr6xYE02HmO81quMYvb5znWbZxi3rqNrx6Xf4zLP8fOMY/98539+usbr7Xt4X8SCzwLMc9oLPnTPFBo4gAvT/oDQmOh0Q/8yAFECwAAoCAQEIoDAQEAgFAgP6iwcKB0gIMAKTUdtgMZNzS8LP4bcV4i2DI5ZIKKXOYyyBa83ANbEtOv17YJ/ktgKW6joGW6MEl28OY37cqzmqXB26sDtvOdqXMM7d2mzwq4dg+KXIekHcKmt9tX8t471TVnSeWeeh9ZP+Gufln/5bpf1Tf9WOPXIqZ95qRQ3DGHOV97w5zPfeZflvuPPyganaxD2muRzkOP5T71zH/x7+8Nf3vfx5+Xfx5jruvwikv+Qxfkpkdihl05QzXQgRAxxf+gNKeCqv9CjAqMB0AIQ3Wn2gaZmmjRB2gpELqN0VPhCHAEnk9Y2qkwRBlEEVZSYqybUZt168tFlhf/7ksAWgBsdmX05rJCDXbKvszeECYNv3coLlW4cSjDCoNZfu1GY1h2UlVM2iWTmaHu7MxScrd/eIkeqwvoIRFy3pXX7vWt/+sqBUKcb+rLWArUkoqZy+X9/HHeOojAS1WLyRc7KKTLGf1Z3du/rL/x1/wOvJiq/YYSHeuOvFYvYU+eXfyqVN8y3+9Zf+06oSzhiDjwGtFrUZe9emu289dx7he3vOxz98/8u/+P7//kbdGNw1Tt8ySUtwbnAsRb9zqoAAEACQaMLQpSxTxxTCY2Ro+MSEgQmNR5KRMda0TBdMFxIxQblVMxZbjzoaVKZmrTUHER1sS61WVezaVImBj2bLVu3L8y9jq25GX/cOHpuF5ZVa1pp0hvNdi0LcixGXEZZvLL9d+HpbflMahiIMogSXRiEfr9/vGdmoZl1eJUsbvRLCLw26kdhv94/+P/96ZlUuoJmW7oHUnJc7Eos0k5OV9f/83rfPxxlX3ZTcqTV3dDMVpfD8roXTkdFG4XGM6G9Oc3j+///y3rLn7uTdSvMV8K8oyqSusAAAAgICAMEBBD/+5LABIAWNVtvmYYAAsCwbaMywACBCA4PMoT8BQYwANgUK4dXs9KYTvpztDiMVZAy8WDuhk14nAuONBFWMjqTUMeANlooFV6PQ4WRoyf7Cv/gaddMuTobjnsUYPGmVtN7Fq6kC9xhZFLmVz/s813rXrsN5dtyFWea/ONdNt2s2drrGTdyb9f7v3bvaa5+/aZ57t3srbsv97zNKew4+w4+4FQmCsJJaZBYWPmgmKKlHAgj/LEiDZb/LhwXGAJQAAAECAAABoMmeKD0G8MhIAHqX4tZeVUk8yhgjOYJUxZ4R1CYtSIKoKBWB5Ohh00yO5o8oKquPRyOrnxPtyxQvomb4lR+Sm/cb9e+taatzunUNVyWmLIp1+vd+We6y3PWtde345HN9ZZ/7Xm31atzzU+519vkeUYp81tmVd6mLpuu3bV21d299yn0pO3pP5P1rX/teZ+Z92wFDoCPAafGHDgH/yo4KmBEj/LngeCYMkwAAIAAA0IQ58noIkTSiEZKxGVBgrcB5F+G8Z2tpmS9lMRiTiaPpqAsDgZohqfcGY7igEcS//uSwBoAGLofarmVgAMaw21XMrABOHQkIMzPDUCE8EocnCWWk8b0UTxmkZkAO1JhsOyUSebGqsoTA8nD6ZNtQmNabw9jDzFjVzik4x5Ncx5y2H97FEqo6/hqRTaiZtuLNh9krP3Gi92nLXLubKVqU6DWLRWqTe4Qqn9sk5vjlkOqjrIS+7NWQqtVozCroz/Jzz8df////+1/3fMzH/////2lbouGu0QABAAADKdLZBMpMwbEhEuEEP2UEQOWta6ifAzW2ksKUuEEO0hyGHcB0AsQJAD+HggATA8lRGBxgiCN7haO6gSh+Mj463DeqUlh3PNKSbJNJ8Eg61JRh8zVHcuw1SPuHY2XEw9VHqWWXsknGGyNp2fo3Oup6aN3JpCWwlRJ1rEzTYeOWbuppvduTmTh1twbWo2Jk7SR7Y0/oVTjlzb+rXumOqqfM/tpzkTtJPdKTd526Zw5m//////9kRdxM9f////+3rSuEajAAAgQQkkQgwQgMI0LGHIClAbDQCmTYbqmI/7W/IQB4CIxZTF8lCdyUiq1FDEeMS6UdDKfSv/7ksAaABhVW205l4ADna+u9zOCQCwLihOG5UafHLPpTHc4oYfyy/3Czhho2sUaAxLFmJUWpi0PdGFl1IzP4Sgf0VjfakC2bxp/Bi1w+cU43rLZBTUKL4GPuNTGLbg7rJXGXDdHl6PIeIEsfdoGMR590pC3qtcate2Y0CDHkgueKs9dM9UAcLEDYOQ+NAQiJhoJBQuGwdeC5X/nEvYM/ysGVh1YASCIIKYkTJaEIZDQiJoGnBAfz62wMIgsF0UBhhiKKNtGiZkBThYRPimoZIrK59BflKcSTTd0UXZTfjPKoAQBhQIBgI/hzHFTqvVcIkmJA8RS5W/MSSUNvI6uFbnvGtllUZa+sJGXbidd1H43llvLsfdJWlX70KOttcjEQwty+b/8f3j8WdtrEWpmWQ5NSmvE6e9YuWpik/Wvy7/7bWTvu8Mam37fz4ae2R36tihm4EotZ3P/H///1v4PeBsMWrM7diXw80yigyUt7WuQ/F6+dfGWSykwpLmcv+JjzIaEoXvS5n///1XrAkUq59qo596+HjQOAcTJihoDGJG6Clr/+5LAC4AZDX17OZeSAwg1baMy8AAJNuY61suenIl+u+VSo8xBisPeJIGaEpO0iicMaulwKsLpZEMJmSRAodCrqEcC2b57qQvjA9UCMg1hSxWw3k7GTqFPE4nHBsUGK1+dJVzLwcbYX8/FRhOMkZ44a1WvzWOmFyqW1pR2lA/YGBzhOKv7V81/rj5WHafXbxsRTDZWqpnj1Y3+37PHhseN5tbON/dnGdYW4CfVl15tcYLkqtR5Wdz0xv5obt5eG4ReInik8r1AAECoOACDAoQHYmouZ44DQdIaCh8vW/sLayrc4LlvgtFlKye60biFvyQPmw4Ee2PYy6J20zKg+oyVTZ/OpoSpnsnoKGahurxJW185Q22BaA53Y39o+8z4xBcZtuMa8KDTDyJiJiuq5tGfTNbZaAx71E948S96/F7Y9XtPWLvb6uYNMUjx96vjVInprG7Zri+tYtrcWfMKupZLYf7+cv4+b7+Ikemt63je81rf1xi2vSu/auYOBT/SGAcicv/lhpMeOQAAAEAAAykjQTNSE1Qw+hFlRZ34W+yKLiLd//uSwAyAF9XbarmWAAMNPG1XMsAAViSEaA7DtD8KGw7EhwD5aLwDyKhLTCITUOh6Ogv5+pYcOhJw4PT4dK2J6s89K5VhCRxHSGwkPNZM2otux8VjFq7iq/nDk6v91ncee+Bf9mazE79H6S5X9ZZ/126ytljnsgf5pnfpakuX++f9t3bR2hZ73bbSP4G5tWs9Sl9vM0pOv9Nfetu1/7X3f+jssU/Gr1tMzMzMzMzMzM0jmXIfAH/PpHnxGAAkAAAaDwWTM6EiOG5ShkWAmC+DXhImAlG1mMLVja1LB9HssBISzcMBFbAwYFcGxmUyKIPHqQGfE8eXOkkuMlVQRH1iZQSIE1XG0qJ+FTcrx8shdXw9ZG9c9a9a0/Y4i1fj3VepEt9lC6FCrrD1V8WLLb9Gsv9m9Zd9h22LWrMwL/lzcecmF+Zsxlq915/WI9pH9HrTa05Tr6w5N/+l3J747bX6dWmZ82t+Z+Y9lJmZmZmZmZmZmkfX38Y4v/wudAwQNAAAgAAjWkLNmQySlAeEiUDDXtEiG7iQDO0hmVsXU0WW+5sYEf/7ksASABiN42q5lgADTbMt9zDwAMJ1hYAMZF1MNy6FLkI8CTJJBmJdwblU/uyyiQyVcxRtoB+SGKG6NiA+scrKGENkJFY4gtdqO5jTLnr9jzapHM273OMVabtRda7FbHn3Yjr94f7u6tVss67rV6Yufm8P7V+aN32rnVfvLGfWj3s067tcvabMMv44/zHRY5SZ+0z/0pl72nrZ+Mzu1m0zMzMzMzMzMzS3ZHTW8F/9RguLhgBgARBApBIRiIMBoQiERG6glIADAij4FoKwsMgLKAVBiLwlpRbhursQY8ZylJRFMstuKE/JqwFcaC8f2rq0FOLC5CFqwda021rCxGHyqiDlGnlZVtZIuYL3Uj5vL+kIKfPyr+HfUTdXtMRsvX5yS6QxjeZ1GrHcvWFrcHHhNCgOdZoabDc68QKR93ifNfX1x7b9V3ZXp+BDUbBVnQzfrDzmJE1nOsW3601bOM4r8zqCHRUK+JMo4tVHDzvO7YgU3ePE9Y/Eyjos3/g+kLJOP/zouGAGTADz2Sn33Tn33y2iPwGVOJA8Gyz8H0xusgT/+5LADIAaCZmJOZeUgzay7rcw8AAQTCQwiMZBCos8n4j7DiiNCZpclkKsgBwniqDkDTMCNjb0ekCytA5xXAlZrHLCviDFG+qD0DVF5N9Fs5eGTHtm1kQQghcEmJboxyKxxVig/rr+yNZyWHWpDBQpQYYIE8dr9s7zX+y0qyWUXlKcOzreotbRjemzo7bX5tvP/rpRzNhzMsBUIXlIqZwcIjPaRC1HKn0//bf+fX/Fv3GdCFW2Jl87doRpsa1TdzlfucDD3bIrHNsYFXGAAKDQhVZ2FZiEpqFZtA0EAS/CYhiCg+taNJNzQkN+Xah5ONERW9t5HxwlgWFe7fWAKzWT5ppprbX22EAeDwUQNs4nA+1LC3BtYy0oXw0DjU7+Eo1XXG/uq7T6ghKRD6q9/aPH1mtc1rEb04zwFOwVhwIEZgVGa617Z8K6kP+reiGKRT7gRI9IkfFK+2dY1/+pdNimlhqVqoulzH1TFNUiUgPP7Wxa3t/879mtdQYC5fTtz1xgvmbEzxkgSUr6zwLv2QFWC3/50s4Np/0nEDuKLbGQMbRJ//uSwAQAGAYPahmVgAr+Qm1DMrABsQmuShU+Jdpr6OdLN0ihip2AMEKQTTwghmOgHJMHkGQTSKgSCDDEuPjaKBU4dYJ4gF1iUkiguOoyMR5QD2eNEiZadMRJqBwhliUU47GvTJ9GpJNXtNYTLDOTZF9oHHHOOYtz4SpM0pp42hOkz5y6N4Y2kkWxNUzfTDV0JPbZ2Ks0m0z/bJc63JOY49O7q5UexdakVHQfuKYzlM/Wx8Vt6mbtrnTH/////tR0GXubM/////+855rJEAHkbQzGDEXNCMMjaS2qXlGxBlS7XhSFY00xyzYE5wD0YkOAUPZWA6Hc0dAnopLz5JD0HqzMbxJZMPqFSJaHp6Y3IiDYmQibTBJ7JVJw7ZXJuXmjViXZ1FFx42c8tPPOFx+yQck3Pve18mtwlaB88obnoTpA5yfmKbVIOlm5qN0q9aVVrRYynp3SCz07mzzrupadiEqq5UuUn6Su5GdjKfNstr1oYv7NsW5re//////a2qRiGxDf/////etbFxKOEAAAAAQgAQCNQiFMxohHMZdAMXxdAv/7ksAKgBfKE20ZlYALB7Lt5zLwAGFhwMAkbGm5OeulL+FGRCk0EIfi0NWGAK2VAFhERCq9o3jqYZgYBEaOg3bRmeG5cqULhrOG5Wu4rRa5dA6bONVMsN3KFjmq3D5XVWPWapPegck3jz1NRZCWig2VkdE8qT6QoszRlNZURH1NK22UppK3U83iWn4QbVuiWtu3PnfNQebpPuF3bom7QqbZb39PWju7mZi7r/////1KuGxtq5/////9kVB8DnwAAADADCBDDCDEwSgQzFh4MAEiIZLGRoavyoQ8L/vq3Jtm5M0W3JmP1OkqaXjYnGGxkQrLqJqqJjUZgwDmik4Y5YNMwp8MMx1NDAhSo8CTF7SvpaUfYcmS86stmXdNRd5i4xeLBfn5FgpBYxvV9xv8ahT2zJXwYq8qIkJQQOrNarfNfvdMb1u28QdXtWFp4+mw+cPGZMZ+M5z/WmMb3rFvnVvmusXt77VmasFYrZNNI4RBFQAXp/1HRdwdK/5Q4EBhBQAAAUBApBsVNBJPOMMKtQMEEL1GWLmkVNcjcT2STwiJMzz/+5LAEIAafZt1mayAQ1yzbnc08AjszgOUGTDzl6WxJliNsxD+56tdB06LaBGs/FFcpd8pgqEDxk6TEQp8+2LG9VcvL3PKqRIRpet77jhqrz8stQc/eMRi2t77z9fvHnMuwc8bRIrVaw++f5c/LP9fvH/y/9wiEq7rwS97nymAMOZb/Letc/L9b5vLv7xZdIXAbFKZQ4jl6h1v+7/X4Zc/Lutf//l398/WX/j/zkGu1B1C6EpnYccudpXHl8z//9TRNJf+8ROFUABgoBAMGAsGAwGAwGAgYzHTFBAUGDnpyCCVUFL+f41YsRAlVHEtRELiUQEe5TsJXiRJFGJNQ6qGCDRTpvk0TTZCg0YglYqlCF4o7NyFrctMyRi6LZdxgp5zTjxlViozCt810S4vKuRhY3Bvb3Kr9y1WutYssIsninYDtUUBqmc8MsOW/tv+uM1cmY8FmAabfBUioiWpJIzs993/xXWP/aye1VCVqGtqiEpE/WIyPL0tqPHeet6bxv+tfrHxb/C+pntGVbjM6gw2Kd7Lo/hD/4mrX/zxgeLKAKCY//uSwAGAGF2Xe7mXkALxQm2XMrABUMZmMpcDhcMSjkOJkww0BjEl0IQh2bNHWvqinyz5f+VSpwn9EQJjEhJUzR1EojK6XBmK5cA4R0BYECYq6fF/f1Qwzi6JRRHhB1CrV1PdmioxnUjAlr4rX5r2GFSSGsqe7FHVa/qta5rXV3kfE8z1dqpkZ0+jGtn+a/1+c6rGjSQXuYDJ51ZqVkiWYHm/XHzvfx5Nw7zYixtWexXigeSKR1OyMjm2PFXa9rfFt4t7Y+N7lkziHT0j73NFa9P////WBAABIIai5mjnQAyoxijMLL1v65zgqVO+w+HmAspZox5xgO8pEELhAAnlAIqRUGdpD4P7ECosYNw7RtkdhQcVHQcKUXH3E1cwMC95ybTJ6KRtbLkdyMvLTdM/doGlootlp08qgfzZFdAsPshjXxDmONpmKecOqoRuNN9Tbz++72w6Yu5ababmyqy2pexjkDlsmpXOTUtbEXDj08fsXqFWbXOh7ofXvfD7r/////9sbYu5qJ/////9WapGhEwAEAAAAANSE1Qw2hKEznAoq//7ksAIABgyE2q5lYAK4sFtlzKwATd9kiWmF+KBExfj8Q8tlahuH8bECFF4B4ch5MNQGB0lYeA3iCScgdwgA8yTA8HT5LJ6ypSguHljBtQY4djVkzY1RlIux5NFyk0PpuOOOZ5EpRs8bLqnC55wupNfg4vveqi+3PnujZ1GyWkc83ukDnJuvcvqHw24StJJeFF2Qeu0GRL6urZTJZNU50bTsQlVUw82jyO5Hcrw9tsXZnO3/////+2Iiq4d1/////6t0rZNLGAAEAAAMhkoKH1Sg0znC4aPjlCwMFCQsJbKtdwpQoE3MhBQJZ8zHgHCRWNw7yDB0O4pLgT3G489mwhE15NEA80LjQdijljIkrGJsi8xJ7EFjVeGHz2Si5h0lPeoc0z7pRmOV1TrnInNClrYfz7FEqpr+as14elpLWyKtO6ZK9ubMsbxEXCLJk7Ln3aFS/un1DLmJqHy27d/VVB6Zg9bVKmm75umVvjr/////2xEX754/////9U5M0DYgAAAAEIAJBDETGQgeaTEGo4LNCQD7oQOWoC/q13IX29cIXP/+5LAEQAYAZ9tGZeAAz6r7jcxgAAmzvkZIDGeaPYTpebJzWQWNDXzHBVc8ZDpI7KlJ4isqrJITnGezbbnKj5w3HYLa+6xMMLjlujRW984XZ4FIct8ai6g6hYu9jN7nfT+LbPvXe80xisj7GYtcbibpA1i0TN6R92p7enzmFukHWYW8V1qWeJl/jcsf6jzY3TWvfO/mmPve7ZrXFvmtcbtnUThAYBC/+WCDIuj/KBoTDg0JgBCEQiahYYQyGRCGRCAQEGEA6XNNzAM4HVRNWhL2/lSEx2X8gpwWut60i9D9DRKpjxWYN9GI5DVWaTTRFh5TN0FfvnT25VbjK6YU4bKYVGMMe71utVszcExalguVY09fGxYzrU2eW6KPx6iuxyisZ17/Oa5jjrlbKdgidk0xVhNab7hr87WGtZbq95rHWUhv15bR15TR4zM9b7+H81veeeu46/W8f/K9Q005dmpBjQTl6gvTlbYIBEm4iKJHFSrhFDcyh5kr/pOJez/qOsWHVgCiiBiiWiiiik0AToYPqEuuChEUjRTLOBkyejJo0BC//uSwA+AGk19dzmXkgNSL243MPAAyhoYASBhqeC6BtnmXCFODYOo7gaARtcQYWRqhuqIL82Gk8z/YbbekBhOQ6jUMhlaywIRJf30iCgPeMhJrrx+KRwVbHitfmqwizAYXiVOOVFnOm4qrV/z8fFoSLXlVY6GSEp3mor9kUiFvqfFv9/5Q2Mr1WyQEUrYTIo1W/bYtYygYKKRWY3nG///mIvqZxyoFfRtcnK6GSSOrzYhv3OIxsbhW3gcSjTtgichbUuZ/pn//v1ABkEmkRi8SBsRiQQiwJwEWDYktGA2JjB92xCQ35WtH17rUVvbe3MEJBUJRD4LKAdqs7xxlIk2WZtAHBfE8EDBrgWCTjfYZ7q0z3AuhnJ9hY4yfOOFaDJGb0iuKJJIwz/Q+Mr1HndvrT5fO5heIlXP29jjZjy+tdZrFdqZUqmCtKqjhB8k9nFX4bNVg79cfKpdv1pogOmmDHWI+9P94j71f43u/xWvrV28QtUQ0MUeFOnLNifbZaWpE2wPJ3jI5wIjPQaCq21VMEsKlf9D8QK/yzRUYCoABIAAA//7ksACgBfp22q5lgACrqjtlzLAACBjaHNiE1SQPI6hdJr6FcteFxVUFzuAyxcrccI43ERUOwYDqXRITF8CRnchEqxLA+DC8OPyJKNFUktEuNYrpBAmUnrCQ/q8e0MHNqvxz72eehQm6Ron270ssWWhZdvmcy1bF/9W23cves0yBrqrafq32IL6877MCuaMU1zbtv7rV9ra0z30jixm30f/61230plN67/Tl87q1yz07t9r+QZ97drOZSZmZmZmZmZmZp864AxOX/yxIQLIgUABIAAAxjjEPMxkIXH0CYFaEjfxwi+LgKasqYhQtEaUqNTUnmhqHxOYkdzgKVhSLYlMFdaOjLY9dEYn0SdtSZvcYOR40/jaVRGlYudv0Ycqv2l3o6pryuZvC/lnJteGvxvd7tdid1jr59Jpv3hZ/3t1l34KR5BHzV3/ox3t3oxSZtSdpWaZ1maFWAseAwqJ1BEBpYcNAEUDgBFDwDDhMaSAv/PlHB8p/lZFZ9IAAIAAA0ICqeZj5a4NlKGCsZ/AgSDyYmTtupaj2579uyWRGPiwP5T/+5LAE4AYUeNquZYAAvovbecw8ABArUvCONikLliQVlpgzAwhLaF48iPRKvYrIx3odnKszhZs+xAfUdMqGDNnjCxxBaGnsoUd3FVW43JTv0bQ9yYfqmyFCrtJpeLFltykEE/a+srZ5nt12/rX5u6/RZX/Wd1czH7WrvWh7Lu9Zmch/K7HTG38peLHLb9Iqzbv96ZynXtPtfmPZ0zMzMzMzMzMzL83rejHJ/yp8mBggPAAEMINEEEIJMNlEIwAkUMC+pQIavyng9Kmjtsib5gSfD4ydmTq5MpUOCQe7DkUT9kV8p+3pOJoWJlOSOjHUzFO1MNEc6w0sivzlwml291JGuzsGWNq0xw/Em9aRtwZpocJwljMmocu/NrVpd99jOrx1ZGu8cq4zn/WvnMHUts4xb1071tzpd/JmHCzWudVzXOde2de196t81ziZrjOErmyXfvI0OR3VzUGRcwAxOeEMSlv+8DrCy/9YYBcXDADAAhCBYKCiYIJNIdAACSRoIm1EfzbKZLiFJyZgRgPE/tIBnDJDQmMQsxpSCKrzwunproQ//uSwBmAG62Zd5mcAkNbMu5XNPBIt12MwG6kfsSnC+hcTaZykYvttHsgSt3HdlOp7WUKdQy5dutT39fl38Y4zhreUCtPtQxKL1zfN6y/eMsg1+nkkr4SGllb7z96xQf+X/jr9RVwIDeWwzuI3XHvyiUW79eWbu4/vLv75+sofvZQqQVIakNaOSWxe5K88s+5UlT94/+Xfx5+u/8upHbmM4HdyvKn4opJSwmtYy3jubt85ct1Klu+5X/5JbU/+U1hFttpNmKCAoMEOTjFDnOzKlV/Q0akaIAQsvZJm+ojEp2IS0b52EVoSY2jpVNahMg/XAnR8Lpue0fAaZJ06I4hrOjEMviDCjDmgrkXE4jzXTAXuPnGfmKuzXJoxHYT9ZLezsSFmXqvxi1pEyX5U0Spxw2NPu6qNX49d5r/iMnzkfLy5Qm6rmU7OsQ3aszDrq3+cW+OlnScUj9vRLFVmSqEOEJOPIrxkiUYPmus/Htb/O+5PFGyQ1w2zMLS5XUESSJak19Qtx5ayxogOxV1X+s6WcZX/3InCgAAAAAgwFAoUAUEU//7ksAFgBeFl2+ZhgACxDLtlzLAAI9GAwi9AuU3RM4UKpEi1RoVv6yplTEm1YfAx4dC0OTgJgPNphCHYpDAKx4HJTxkJ5JhHgRANwGCG4mWul58rnah5ipgeWhdpWsDiOsan1nbW87Xq1l6p87Q5XPwncev7s53W2c+CGusZje0o/Rx/OrW29laztb8w5HscVqvZ3rKa53631a12tZrWdrmutHK5tNDROkswd32O6++zn0cfYcfAMJLSr/KGQ+4Fi3/YJDJxYIAoAABzALDGIQZxZnMmeC0J0U5nfZPEmQtZZIx9TBmhmcloVKymB1CgFdfCsiXxRYSiyJMJUOA/aWIdWm+ijaKzZxEvdX1gteB6F49uhrOVscsievNNdWx1OtpHFeFfbFjnVZ/7XxroWJq8uxv7vufz+dXs7dtabW/tZplbZj9OvW+R06nZ1ZrWvzXMt09ZnJ6P8vOVrt9vOMdO36aPlhdJURK/ygbFB4Mi//DAXeBCgAJkUJM5wGKmdCPLpitohRNI+M6hEuUVXQ+quxsSIUKRgIhOOFIDwdJFAP/+5LAFQAYEg9qGZWACxhDbVcysAEH4gw+scHoPA6UxsEGqbGiKpSkZjpcUDtSGw64dbjxSi1xcoO0qcalWTE3Lkhz1Tr7hdEqPyVG6yo77g0m3Q+TtwlahueUNz0JnbOH5N1nHOmuiGnahxtSZs2TZrXIup6q9IU97rprap0d1LfpyLIVZqsbLGzTE36DN92zObuWxbpb3/////7G7Guhrob/////7F8cGBHQAAQAQCeUmVNSIKhmU2IxA4l6BY2EBxDpryghQZhKdbWCtU+LhkKZgOsrCYemhuTzo8l5mOoMkDceACxKbVT0Sw6HlhSUloJjx2GBk0oScqcKzZFYqLoMx2SS0qt5165sdolH5YTjipPY4rPvVV/ZEWio2VkYRcdJ6yDSxxMqm3EPdqq3TzZ8QehsKUxc483dtPti7qnMprIj7k660WVZ1sJu2MTuGn6Z1ByPfM3bmzLP/////c61GuhGn//////sXq372n8AABBQDDCBBDDDB5pMQajg0sYRIEOQsd9MV/UaWUsjfGHFhkQHFfPJF2jTcQ1WQi4v//uSwBgAGVmXbTmXgAOMMu63NZAIWotoeSo6rdsyibo8Q9RQq5FqySFfCtmlYpzFaW84UfiWW8SaAwxLwpbq1bqwrc14dcfM1YUbcGaJK7cJYzJTFL7jYxisK9qyV8G75CMQkIYMKDWvDzmmq79vCrbPrrEZWd4rIcBWMdmRT6xu+MY+7f41reYuMWz9Qvmv9qJ+FZXyTscByhsDkdC5IAvM/5YOlRodK/5QOAkMDigARiIk0I1SGwyGhSIxAgi+RggRb4yws1yJpEvgesdf6bBhLIk+sOmkNgL3RRuZpEBwVNgapHIa3WECQOiZ1HIHo56bjWctOIwHIKVFUOMYfbt48rY+EAseS/SraRvL7NJe3Wy/eOCdShD/LIW3jnXz5hhzestZbf6Wq/YJAbCnVz32x+Wetfjzn5f+1+qaFy3dZ6uNKKGUeP/LDWs+91rL/3zX/+usCnXcX40+JsBa9DLlrs5rPf57/C9vedjn7x/9Zf+///+u8TTXPjjI4IkcDMEonogltTx//9UWkv+XakYKoAAwGAgCBAkGQEKhSKRTrP/7ksAHgBfx02O5poAKMzhfB7KAAcS+4EHGjKPtAxpxQEEAok0rLYoSFhKYzbc2C+CuD2M8GUFrJoW0kh94DOGEBzggwnpJGY9V8D0PCShcA4FScSJK6slCTOEkPMYMnEiSqBij+OMzE/JMsKA/VF4vKJIlv1mQ0EoQ0hykmVn1JJpLJFJMu6/yhKQ4DBFA8eJNNJ9jhiaoGJr/qzYzJcl0EzFjQwNzAwNz7LpS8XlJJaKS/rb/RWtZogkYGDP//8xGkuAsEQAK4ePR+6HKYiGZiJmApuGOYgNZkkUxKRRFrLOWuiMDoAEAKHqB0AsAsaHQCwLg+cVBqDWyQah6bTCwtRQsdf/yqr/7f8My7M2pIrcqq0xQtTMzaqbaqtcM3DNf//////w38Xyq3KqvDNUM18quq1Darars2oraqtcM3DN//////+zVszXKirYKbCOCgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LAJ4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uSwO4AAAABLAAAAAAAACWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7ksD/gAAAASwAAAAAAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LA/4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uSwP+AAAABLAAAAAAAACWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7ksD/gAAAASwAAAAAAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LA/4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uSwP+AAAABLAAAAAAAACWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAP/7ksD/gAAAASwAAAAAAAAlgAAAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAAA=";static dummyResPos='{"s":"ok","netPositions":[{"crossCurrency":"N","qty":16,"realized_profit":0,"id":"NSE:JPASSOCIAT-EQ-CNC","unrealized_profit":0.32,"buyQty":16,"sellAvg":0,"sellQty":0,"buyAvg":4.78,"symbol":"NSE:JPASSOCIAT-EQ","fyToken":"101000000011460","slNo":0,"avgPrice":4.78,"segment":"E","dummy":" ","rbiRefRate":1,"side":1,"netQty":16,"pl":0.32,"productType":"CNC","netAvg":4.78,"qtyMulti_com":1},{"crossCurrency":"N","qty":16,"realized_profit":0,"id":"NSE:JPASSOCIAT-EQ-CNC","unrealized_profit":0.32,"buyQty":16,"sellAvg":0,"sellQty":0,"buyAvg":4.78,"symbol":"NSE:JPASSOCIAT-EQ","fyToken":"101000000011460","slNo":0,"avgPrice":4.78,"segment":"E","dummy":" ","rbiRefRate":1,"side":1,"netQty":16,"pl":0.32,"productType":"CNC","netAvg":4.78,"qtyMulti_com":1}],"message":""}';static dummyResOrd='{"s":"ok","message":"","orderBook":[{"status":5,"symbol":"NSE:TCSEQ","qty":1,"orderNumStatus":"119050790482:5","dqQtyRem":5,"orderDateTime":"07-May-2019 15:18:04","orderValidity":"IOC","fyToken":"101000000011536","slNo":1,"message":"RMS:119050790482:Not allowed to trade in NSE EQ","segment":"E","id":"119050790482","stopPrice":0,"exchOrdId":0,"remainingQuantity":1,"filledQty":0,"limitPrice":2155,"offlineOrder":"false","instrument":"EQUITY","productType":"CNC","type":1,"side":1,"discloseQty":5,"tradedPrice":0}]}';static dummyResOrdJson1={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4,trigger_price:0,average_price:4,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5,trigger_price:0,average_price:5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson1_1={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4,trigger_price:0,average_price:4,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5,trigger_price:0,average_price:5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson2={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4,trigger_price:0,average_price:4,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5,trigger_price:0,average_price:5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson2_1={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:11,trigger_price:10,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:12,trigger_price:9,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson3={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:11,trigger_price:10,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:12,trigger_price:9,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4,trigger_price:0,average_price:4,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5,trigger_price:0,average_price:5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson4={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson5={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson6={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:11,trigger_price:10,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:12,trigger_price:9,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:11,trigger_price:10,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:12,trigger_price:9,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:11,trigger_price:10,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:12,trigger_price:9,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:11,trigger_price:10,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:12,trigger_price:9,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4,trigger_price:0,average_price:4,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5,trigger_price:0,average_price:5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]}};var Id=class{id;instru;scrip;expiry;cmp;netQty;buyAvg;sellAvg;type;realizedProfit;pnl;includeInSum1=!1;includeInSum2=!1;includeInSum3=!1;includeInSum4=!1},kd=class{instru;expiry;scrip;symbol;qty;entry;exit;strategy},Pd=class{instru;expiry;scrip;symbol;qty;price;strategy},_g=class{id;scrip;qty;status;message;type;limit;stop;tradedPrice;side;orderDateTime},Ag=class{slab;type;qty;entry;scrip;sl;sl_strike;rollin;rollin_strike;orderId;orderStatus},Nd=class{entry;pos_open=!1;multiple_pos_open=!1;sl_open=!1;multiple_sl_open=!1;reentry_open=!1;reentry_multiple_open=!1;sl_times=0},yg=class{addToOrders;guid;id;time;instru;scrip;expiry;qty;tradedPrice;triggerPrice;status;message;tradingsymbol;tags};var zs=class{token;instru;expiry;strike;optionType;lotSize;exchange;tradingSymbol},Cr=class{expiry;instru;strike;type;tradingSymbol;exchange},Od=class{exchange_code;token;ltp;ltt_unix;last_traded_qty;volume;best_bid;best_bid_qty;best_ask;best_ask_qty;total_buy_qty;total_sell_qty;atp;exchange_timestamp;open;high;low;close;year_high;year_low};var Yv=function(n){return n.MARKET_DATA="marketdata",n.COMPACT="compact_marketdata",n.SNAPQUOTE="snapquote",n.FULL_SNAPQUOTE="full_snapquote",n}(Yv||{}),xr=function(n){return n[n.MARKETDATA=1]="MARKETDATA",n[n.COMPACT_MARKETDATA=2]="COMPACT_MARKETDATA",n[n.SNAPQUOTE=3]="SNAPQUOTE",n[n.FULL_SNAPQUOTE=4]="FULL_SNAPQUOTE",n[n.SPREADDATA=5]="SPREADDATA",n[n.SPREAD_SNAPQUOTE=6]="SPREAD_SNAPQUOTE",n[n.DPR=7]="DPR",n[n.OI=8]="OI",n[n.MARKET_STATUS=9]="MARKET_STATUS",n[n.EXCHANGE_MESSAGES=10]="EXCHANGE_MESSAGES",n}(xr||{}),Ut=function(n){return n.CEsell="cesell",n.PEsell="pesell",n.CEbuy="cebuy",n.PEbuy="pebuy",n.CE="ce",n.PE="pe",n}(Ut||{});var Ue=(()=>{class n{ltpMap=new Map;atpMap=new Map;volumeMap=new Map;oiMap=new Map;lastDayOIMap=new Map;chgoiMap=new Map;ohlcMap=new Map;intradayData=new Array;static simulateData={};static simulateData2={};static stockChartData={};static stockChartData2={};constructor(){}updateMaps_zerodha(e){let i="";if(e.instrument_token===256265)i="NIFTY50";else if(e.instrument_token===260105)i="BANKNIFTY";else if(e.instrument_token===257801)i="FINNIFTY";else if(e.instrument_token===288009)i="MIDCPNIFTY";else if(e.instrument_token===265)i="SENSEX";else if(e.instrument_token===274441)i="BANKEX";else if(e.instrument_token===2707457)i="NIFTYBEES";else{let r=f.mastersContract.get(e.instrument_token);if(r.strike==0)i=r.tradingSymbol;else{let s=""+r.strike;r.tradingSymbol.includes("USDINR")&&r.tradingSymbol.includes("FUT")&&(s="USDINR"),r&&(i=this.getMapKey({instru:r.instru,expiry:r.expiry,strike:s,optionType:r.optionType}))}}f.logWSFeed&&console.log("updateMaps symbol is",i),e.instrument_token===3465729&&console.log("updateMaps_zerodha",e.instrument_token,e.last_price),this.setLtp(i,e.last_price),this.setAtp(i,e.average_traded_price),this.setVolume(i,e.volume),this.setOI(i,e.oi),this.setOHLC(i,e.ohlc)}setLastDayOI(e,i,r,s,o){let a={instru:e,expiry:i,strike:r,optionType:s},l=this.getMapKey(a);this.lastDayOIMap.set(l,o)}getLastDayOI(e){return this.lastDayOIMap.get(e)}updateMaps_aliceblue(e){let i=f.mastersContract.get(e.token);if(i){let r=this.getMapKey({instru:i.instru,expiry:i.expiry,strike:i.strike,optionType:i.optionType});console.log("updateMaps symbol is",r),this.setLtp(r,e.ltp),this.setAtp(r,e.atp),this.setVolume(r,e.volume),this.setOHLC(r,{open:e.open,high:e.high,low:e.low,close:e.close})}else{let r="";e.token===26e3?r="NIFTY50":e.token===26009?r="BANKNIFTY":e.token===26037?r="FINNIFTY":e.token===1?r="USDINR":console.error(e.token,"not found in masters"),console.log("updateMaps symbol is",r),this.setLtp(r,e.ltp),this.setAtp(r,e.atp),this.setVolume(r,e.volume)}}getZerodhaInstruToken(e){if(e==="NIFTY50"||e==="NIFTY")return 256265;if(e==="BANKNIFTY")return 260105;if(e==="FINNIFTY")return 257801;if(e==="MIDCPNIFTY")return 288009;if(e==="SENSEX")return 265;if(e==="BANKEX")return 274441;if(e==="USDINR")return f.USDINR_FUT_TOKEN}getMapKey(e){let i=e.instru,r=e.expiry,s=e.strike,o=e.optionType,a="";if(s==="NIFTY50"||s==="NIFTY")a="NIFTY50";else if(s==="BANKNIFTY")a="BANKNIFTY";else if(s==="FINNIFTY")a="FINNIFTY";else if(s==="MIDCPNIFTY")a="MIDCPNIFTY";else if(s==="SENSEX")a="SENSEX";else if(s==="BANKEX")a="BANKEX";else if(f.mfInvested.find(l=>l[0]===s))a=s;else if(!this.isOption(s+o))a=s;else if(s==="USDINR")a="USDINR";else{let l=this.getExpiry(r,i);a=i+l+s+o}return a}isOption(e){if(e.endsWith("CE")||e.endsWith("PE")){let i=e.slice(0,-2);if(!isNaN(Number(i)))return!0}return!1}getExpiry(e,i){let r="",s=this.isMonthlyExpiry(e,i);return s?r=s:r=this.getExpiryString(new Date(e)),r}isMonthlyExpiry(e,i){let r=!1,s=null,o=new Date(e);o.setHours(0,0,0,0);let a=f.monthlyExpiryDates;i==="BANKNIFTY"?a=f.monthlyExpiryDatesBNF:i==="FINNIFTY"?a=f.monthlyExpiryDatesFINNIFTY:i==="MIDCPNIFTY"?a=f.monthlyExpiryDatesMidcap:i==="SENSEX"?a=f.monthlyExpiryDatesSensex:i==="BANKEX"?a=f.monthlyExpiryDatesBankex:i==="USDINR"&&(a=f.monthlyExpiryDatesUSDINR);for(let l in a)if(a.hasOwnProperty(l)&&o.getTime()===a[l].getTime()){r=!0,s=l;break}return s}getExpiryString(e){let i=null;return e.getMonth()+1===10?i="O":e.getMonth()+1===11?i="N":e.getMonth()+1===12?i="D":i=e.getMonth()+1,""+(e.getFullYear()-2e3)+i+("0"+e.getDate()).slice(-2)}findCurrExpiryForDisplay(e){let i=1e19,r=new Date;for(let o in e){let a=e[o],l=new Date;if(a.getFullYear()===l.getFullYear()&&a.getMonth()===l.getMonth()&&a.getDate()===l.getDate())i=0,r=a;else{let u=a.getTime()-new Date().getTime();u>=0&&u<i&&(i=u,r=a)}}return""+r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+("0"+r.getDate()).slice(-2)}findTodayExpiry(e){let i=new Date;for(let r in e){let s=e[r],o=new Date;if(s.getFullYear()===o.getFullYear()&&s.getMonth()===o.getMonth()&&s.getDate()===o.getDate())return s}return null}getSubscriptionObject(e,i,r){let s=e;if(!this.isOption(e)){let c=new Cr;return c.tradingSymbol=s,console.log("getSubscriptionObject stock: "+s,c),c}let o="";s.includes("CE")&&(o="CE"),s.includes("PE")&&(o="PE"),s=s.slice(0,-2);let a=new Date(r).toDateString(),l=new Cr;return l.expiry=a,l.instru=i,l.strike=Number(s),l.type=o,console.log("getSubscriptionObject symbol: "+s,l),l}getSubscriptionObjectForFuture(e,i){console.log("getSubscriptionObject tradingSymbol: "+e);let r=new Cr;return r.tradingSymbol=e,r.exchange=i,r}parseSymbol(e){e=e.replace("NSE:","");let i="";e.startsWith("NIFTY")&&(i="NIFTY",e=e.replace("NIFTY","")),e.startsWith("BANKNIFTY")&&(i="BANKNIFTY",e=e.replace("BANKNIFTY","")),e.startsWith("FINNIFTY")&&(i="FINNIFTY",e=e.replace("FINNIFTY","")),e.startsWith("MIDCPNIFTY")&&(i="MIDCPNIFTY",e=e.replace("MIDCPNIFTY","")),e.startsWith("SENSEX")&&(i="SENSEX",e=e.replace("SENSEX","")),e.startsWith("BANKEX")&&(i="BANKEX",e=e.replace("BANKEX","")),e.startsWith("USDINR")&&(i="USDINR",e=e.replace("USDINR",""));let r="";e.includes("CE")&&(r="CE"),e.includes("PE")&&(r="PE"),e=e.slice(0,-2);let s=e.substring(5),o=e.substring(0,5);return{instru:i,expiry:o,strike:s,type:r}}parseScrip(e){if(e){if(f.mfInvested.find(i=>i[0]===e)||!this.isOption(e))return{scrip:e,type:""};{let i="";return e.includes("CE")&&(i="CE"),e.includes("PE")&&(i="PE"),e=e.slice(0,-2),{scrip:e,type:i}}}return{scrip:"",type:""}}getScripLTP(e,i,r,s){let o={instru:e,expiry:i,strike:r,optionType:s},a=this.getMapKey(o);return this.getLtp(a)}getScripATP(e,i,r,s){let o={instru:e,expiry:i,strike:r,optionType:s},a=this.getMapKey(o);return this.getAtp(a)}getScripOI(e,i,r,s){let o={instru:e,expiry:i,strike:r,optionType:s},a=this.getMapKey(o);return this.getOI(a)}getScripLastDayOI(e,i,r,s){let o={instru:e,expiry:i,strike:r,optionType:s},a=this.getMapKey(o);return this.getLastDayOI(a)}getScripOHLC(e,i,r,s){let o={instru:e,expiry:i,strike:r,optionType:s},a=this.getMapKey(o);return this.getOHLC(a)}getLtp(e){return this.ltpMap.get(e)}setLtp(e,i){this.ltpMap.set(e,i)}getAtp(e){return this.atpMap.get(e)}setAtp(e,i){this.atpMap.set(e,i)}getVolume(e){return this.volumeMap.get(e)}setVolume(e,i){this.volumeMap.set(e,i)}getOI(e){return this.oiMap.get(e)}setOI(e,i){this.oiMap.set(e,i)}getChgOI(e){return this.chgoiMap.get(e)}setChgOI(e,i){this.chgoiMap.set(e,i)}getOHLC(e){return this.ohlcMap.get(e)}setOHLC(e,i){this.ohlcMap.set(e,i)}getIntradayData(e){return this.intradayData.slice(Math.max(this.intradayData.length-e,0))}setIntradayData(){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var mP=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(ve(bs),ve(An))};static \u0275dir=Tt({type:n})}return n})(),tc=(()=>{class n extends mP{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Vi(n)))(r||n)}})();static \u0275dir=Tt({type:n,features:[li]})}return n})(),Zo=new Se(""),EY={provide:Zo,useExisting:yi(()=>Qo),multi:!0},Qo=(()=>{class n extends tc{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Vi(n)))(r||n)}})();static \u0275dir=Tt({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&j("change",function(o){return r.onChange(o.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[hr([EY]),li]})}return n})(),DY={provide:Zo,useExisting:yi(()=>Hs),multi:!0};function MY(){let n=vi()?vi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var TY=new Se(""),Hs=(()=>{class n extends mP{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!MY())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(ve(bs),ve(An),ve(TY,8))};static \u0275dir=Tt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&j("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},standalone:!1,features:[hr([DY]),li]})}return n})();var _P=new Se(""),IY=new Se("");function kY(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function aP(n){return null}function AP(n){return n!=null}function yP(n){return Mo(n)?Lt(n):n}function vP(n){let t={};return n.forEach(e=>{t=e!=null?re(re({},t),e):t}),Object.keys(t).length===0?null:t}function wP(n,t){return t.map(e=>e(n))}function PY(n){return!n.validate}function bP(n){return n.map(t=>PY(t)?t:e=>t.validate(e))}function NY(n){if(!n)return null;let t=n.filter(AP);return t.length==0?null:function(e){return vP(wP(e,t))}}function SP(n){return n!=null?NY(bP(n)):null}function OY(n){if(!n)return null;let t=n.filter(AP);return t.length==0?null:function(e){let i=wP(e,t).map(yP);return Kc(i).pipe(We(vP))}}function CP(n){return n!=null?OY(bP(n)):null}function lP(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function RY(n){return n._rawValidators}function FY(n){return n._rawAsyncValidators}function Gv(n){return n?Array.isArray(n)?n:[n]:[]}function wg(n,t){return Array.isArray(n)?n.includes(t):n===t}function cP(n,t){let e=Gv(t);return Gv(n).forEach(r=>{wg(e,r)||e.push(r)}),e}function uP(n,t){return Gv(t).filter(e=>!wg(n,e))}var bg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=SP(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=CP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Kv=class extends bg{name;get formDirective(){return null}get path(){return null}},Jl=class extends bg{_parent=null;name=null;valueAccessor=null},$v=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},LY={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},lye=Ne(re({},LY),{"[class.ng-submitted]":"isSubmitted"}),nc=(()=>{class n extends $v{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(ve(Jl,2))};static \u0275dir=Tt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&gl("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[li]})}return n})();var Rd="VALID",vg="INVALID",Zl="PENDING",Fd="DISABLED",ec=class{},Sg=class extends ec{value;source;constructor(t,e){super(),this.value=t,this.source=e}},Ld=class extends ec{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},Vd=class extends ec{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Ql=class extends ec{status;source;constructor(t,e){super(),this.status=t,this.source=e}};function VY(n){return(Cg(n)?n.validators:n)||null}function BY(n){return Array.isArray(n)?SP(n):n||null}function qY(n,t){return(Cg(t)?t.asyncValidators:n)||null}function jY(n){return Array.isArray(n)?CP(n):n||null}function Cg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var Xv=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Cs(this.statusReactive)}set status(t){Cs(()=>this.statusReactive.set(t))}_status=vf(()=>this.statusReactive());statusReactive=nf(void 0);get valid(){return this.status===Rd}get invalid(){return this.status===vg}get pending(){return this.status==Zl}get disabled(){return this.status===Fd}get enabled(){return this.status!==Fd}errors;get pristine(){return Cs(this.pristineReactive)}set pristine(t){Cs(()=>this.pristineReactive.set(t))}_pristine=vf(()=>this.pristineReactive());pristineReactive=nf(!0);get dirty(){return!this.pristine}get touched(){return Cs(this.touchedReactive)}set touched(t){Cs(()=>this.touchedReactive.set(t))}_touched=vf(()=>this.touchedReactive());touchedReactive=nf(!1);get untouched(){return!this.touched}_events=new ct;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(cP(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(cP(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(uP(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(uP(t,this._rawAsyncValidators))}hasValidator(t){return wg(this._rawValidators,t)}hasAsyncValidator(t){return wg(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Ne(re({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Vd(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new Vd(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Ne(re({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Ld(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new Ld(!0,i))}markAsPending(t={}){this.status=Zl;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ql(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Ne(re({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Fd,this.errors=null,this._forEachChild(r=>{r.disable(Ne(re({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Sg(this.value,i)),this._events.next(new Ql(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ne(re({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Rd,this._forEachChild(i=>{i.enable(Ne(re({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Ne(re({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rd||this.status===Zl)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Sg(this.value,e)),this._events.next(new Ql(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Ne(re({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Fd:Rd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Zl,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=yP(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new Ql(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new Nt,this.statusChanges=new Nt}_calculateStatus(){return this._allControlsDisabled()?Fd:this.errors?vg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zl)?Zl:this._anyControlsHaveStatus(vg)?vg:Rd}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new Ld(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Vd(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Cg(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=BY(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=jY(this._rawAsyncValidators)}};var Zv=new Se("",{providedIn:"root",factory:()=>xg}),xg="always";function WY(n,t){return[...t.path,n]}function UY(n,t,e=xg){HY(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),YY(n,t),KY(n,t),GY(n,t),zY(n,t)}function dP(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function zY(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function HY(n,t){let e=RY(n);t.validator!==null?n.setValidators(lP(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=FY(n);t.asyncValidator!==null?n.setAsyncValidators(lP(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();dP(t._rawValidators,r),dP(t._rawAsyncValidators,r)}function YY(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&xP(n,t)})}function GY(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&xP(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function xP(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function KY(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function $Y(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function XY(n){return Object.getPrototypeOf(n.constructor)===tc}function ZY(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(s=>{s.constructor===Hs?e=s:XY(s)?i=s:r=s}),r||i||e||null}function hP(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function pP(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var QY=class extends Xv{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(VY(e),qY(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Cg(e)&&(e.nonNullable||e.initialValueIsDefault)&&(pP(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){hP(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){hP(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){pP(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var JY={provide:Jl,useExisting:yi(()=>Jo)},fP=Promise.resolve(),Jo=(()=>{class n extends Jl{_changeDetectorRef;callSetDisabledState;control=new QY;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Nt;constructor(e,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=ZY(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),$Y(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){UY(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){fP.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&Uy(i);fP.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?WY(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(ve(Kv,9),ve(_P,10),ve(IY,10),ve(Zo,10),ve(Ss,8),ve(Zv,8))};static \u0275dir=Tt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[hr([JY]),li,Li]})}return n})();var eG={provide:Zo,useExisting:yi(()=>ea),multi:!0},ea=(()=>{class n extends tc{writeValue(e){let i=e??"";this.setProperty("value",i)}registerOnChange(e){this.onChange=i=>{e(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Vi(n)))(r||n)}})();static \u0275dir=Tt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&j("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[hr([eG]),li]})}return n})(),tG={provide:Zo,useExisting:yi(()=>Bd),multi:!0};var nG=(()=>{class n{_accessors=[];add(e,i){this._accessors.push([e,i])}remove(e){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===e){this._accessors.splice(i,1);return}}select(e){this._accessors.forEach(i=>{this._isSameGroup(i,e)&&i[1]!==e&&i[1].fireUncheck(e.value)})}_isSameGroup(e,i){return e[0].control?e[0]._parent===i._control._parent&&e[1].name===i.name:!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bd=(()=>{class n extends tc{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=se(Zv,{optional:!0})??xg;constructor(e,i,r,s){super(e,i),this._registry=r,this._injector=s}ngOnInit(){this._control=this._injector.get(Jl),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this.setProperty("checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}setDisabledState(e){(this.setDisabledStateFired||e||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",e),this.setDisabledStateFired=!0}fireUncheck(e){this.writeValue(e)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(i){return new(i||n)(ve(bs),ve(An),ve(nG),ve(Rn))};static \u0275dir=Tt({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,r){i&1&&j("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[hr([tG]),li]})}return n})();var iG={provide:Zo,useExisting:yi(()=>ic),multi:!0};function EP(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function rG(n){return n.split(":")[0]}var ic=(()=>{class n extends tc{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i=this._getOptionId(e),r=EP(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=rG(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Vi(n)))(r||n)}})();static \u0275dir=Tt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&j("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[hr([iG]),li]})}return n})(),Eg=(()=>{class n{_element;_renderer;_select;id;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(EP(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(ve(An),ve(bs),ve(ic,9))};static \u0275dir=Tt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),sG={provide:Zo,useExisting:yi(()=>DP),multi:!0};function gP(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function oG(n){return n.split(":")[0]}var DP=(()=>{class n extends tc{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(s=>this._getOptionId(s));i=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],s=i.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let l=o[a],c=this._getOptionValue(l.value);r.push(c)}}else{let o=i.options;for(let a=0;a<o.length;a++){let l=o[a];if(l.selected){let c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=oG(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Vi(n)))(r||n)}})();static \u0275dir=Tt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&j("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[hr([sG]),li]})}return n})(),Dg=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(gP(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(gP(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(ve(An),ve(bs),ve(DP,9))};static \u0275dir=Tt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function aG(n){return typeof n=="number"?n:parseFloat(n)}var lG=(()=>{class n{_validator=aP;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):aP,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Tt({type:n,features:[Li]})}return n})();var cG={provide:_P,useExisting:yi(()=>Qv),multi:!0},Qv=(()=>{class n extends lG{min;inputName="min";normalizeInput=e=>aG(e);createValidator=e=>kY(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Vi(n)))(r||n)}})();static \u0275dir=Tt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&ff("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[hr([cG]),li]})}return n})();var uG=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ji({type:n});static \u0275inj=Fi({})}return n})();var rc=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Zv,useValue:e.callSetDisabledState??xg}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ji({type:n});static \u0275inj=Fi({imports:[uG]})}return n})();var MP={modes:{point(n,t){return Mg(n,t,{intersect:!0})},nearest(n,t,e){return pG(n,t,e)},x(n,t,e){return Mg(n,t,{intersect:e.intersect,axis:"x"})},y(n,t,e){return Mg(n,t,{intersect:e.intersect,axis:"y"})}}};function lw(n,t,e){return(MP.modes[e.mode]||MP.modes.nearest)(n,t,e)}function dG(n,t,e){return e!=="x"&&e!=="y"?n.inRange(t.x,t.y,"x",!0)||n.inRange(t.x,t.y,"y",!0):n.inRange(t.x,t.y,e,!0)}function hG(n,t,e){return e==="x"?{x:n.x,y:t.y}:e==="y"?{x:t.x,y:n.y}:t}function Mg(n,t,e){return n.filter(i=>e.intersect?i.inRange(t.x,t.y):dG(i,t,e.axis))}function pG(n,t,e){let i=Number.POSITIVE_INFINITY;return Mg(n,t,e).reduce((r,s)=>{let o=s.getCenterPoint(),a=hG(t,o,e.axis),l=$r(t,a);return l<i?(r=[s],i=l):l===i&&r.push(s),r},[]).sort((r,s)=>r._index-s._index).slice(0,1)}function sa(n,t,e){let i=Math.cos(e),r=Math.sin(e),s=t.x,o=t.y;return{x:s+i*(n.x-s)-r*(n.y-o),y:o+r*(n.x-s)+i*(n.y-o)}}var fG=(n,t)=>t>n||n.length>t.length&&n.slice(0,t.length)===t,ta=.001,Ig=(n,t,e)=>Math.min(e,Math.max(t,n)),KP=(n,t)=>n.value>=n.start-t&&n.value<=n.end+t;function gG(n,t,e){for(let i of Object.keys(n))n[i]=Ig(n[i],t,e);return n}function mG(n,t,e,i){return!n||!t||e<=0?!1:Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)<=Math.pow(e+i,2)}function $P(n,{x:t,y:e,x2:i,y2:r},s,{borderWidth:o,hitTolerance:a}){let l=(o+a)/2,c=n.x>=t-l-ta&&n.x<=i+l+ta,u=n.y>=e-l-ta&&n.y<=r+l+ta;return s==="x"?c:(s==="y"||c)&&u}function XP(n,{rect:t,center:e},i,{rotation:r,borderWidth:s,hitTolerance:o}){let a=sa(n,e,jt(-r));return $P(a,t,i,{borderWidth:s,hitTolerance:o})}function oa(n,t){let{centerX:e,centerY:i}=n.getProps(["centerX","centerY"],t);return{x:e,y:i}}function _G(n,t,e,i=!0){let r=e.split("."),s=0;for(let o of t.split(".")){let a=r[s++];if(parseInt(o,10)<parseInt(a,10))break;if(fG(a,o)){if(i)throw new Error(`${n} v${e} is not supported. v${t} or newer is required.`);return!1}}return!0}var ZP=n=>typeof n=="string"&&n.endsWith("%"),QP=n=>parseFloat(n)/100,JP=n=>Ig(QP(n),0,1),qd=(n,t)=>({x:n,y:t,x2:n,y2:t,width:0,height:0}),AG={box:n=>qd(n.centerX,n.centerY),doughnutLabel:n=>qd(n.centerX,n.centerY),ellipse:n=>({centerX:n.centerX,centerY:n.centerX,radius:0,width:0,height:0}),label:n=>qd(n.centerX,n.centerY),line:n=>qd(n.x,n.y),point:n=>({centerX:n.centerX,centerY:n.centerY,radius:0,width:0,height:0}),polygon:n=>qd(n.centerX,n.centerY)};function cw(n,t){return t==="start"?0:t==="end"?n:ZP(t)?JP(t)*n:n/2}function Ks(n,t,e=!0){return typeof t=="number"?t:ZP(t)?(e?JP(t):QP(t))*n:n}function yG(n,t){let{x:e,width:i}=n,r=t.textAlign;return r==="center"?e+i/2:r==="end"||r==="right"?e+i:e}function eN(n,t,{borderWidth:e,position:i,xAdjust:r,yAdjust:s},o){let a=Ge(o),l=t.width+(a?o.width:0)+e,c=t.height+(a?o.height:0)+e,u=uw(i),d=TP(n.x,l,r,u.x),h=TP(n.y,c,s,u.y);return{x:d,y:h,x2:d+l,y2:h+c,width:l,height:c,centerX:d+l/2,centerY:h+c/2}}function uw(n,t="center"){return Ge(n)?{x:Ve(n.x,t),y:Ve(n.y,t)}:(n=Ve(n,t),{x:n,y:n})}var tN=(n,t)=>n&&n.autoFit&&t<1;function nN(n,t){let e=n.font,i=dt(e)?e:[e];return tN(n,t)?i.map(function(r){let s=Ot(r);return s.size=Math.floor(r.size*t),s.lineHeight=r.lineHeight,Ot(s)}):i.map(r=>Ot(r))}function iN(n){return n&&(vn(n.xValue)||vn(n.yValue))}function TP(n,t,e=0,i){return n-cw(t,i)+e}function cc(n,t,e){let i=e.init;if(i){if(i===!0)return sN(t,e)}else return;return vG(n,t,e)}function rN(n,t,e){let i=!1;return t.forEach(r=>{yn(n[r])?(i=!0,e[r]=n[r]):vn(e[r])&&delete e[r]}),i}function sN(n,t){let e=t.type||"line";return AG[e](n)}function vG(n,t,e){let i=pt(e.init,[{chart:n,properties:t,options:e}]);if(i===!0)return sN(t,e);if(Ge(i))return i}var ew=new Map,wG=n=>isNaN(n)||n<=0,bG=n=>n.reduce(function(t,e){return t+=e.string,t},"");function kg(n){if(n&&typeof n=="object"){let t=n.toString();return t==="[object HTMLImageElement]"||t==="[object HTMLCanvasElement]"}}function Pg(n,{x:t,y:e},i){i&&(n.translate(t,e),n.rotate(jt(i)),n.translate(-t,-e))}function is(n,t){if(t&&t.borderWidth)return n.lineCap=t.borderCapStyle||"butt",n.setLineDash(t.borderDash),n.lineDashOffset=t.borderDashOffset,n.lineJoin=t.borderJoinStyle||"miter",n.lineWidth=t.borderWidth,n.strokeStyle=t.borderColor,!0}function uc(n,t){n.shadowColor=t.backgroundShadowColor,n.shadowBlur=t.shadowBlur,n.shadowOffsetX=t.shadowOffsetX,n.shadowOffsetY=t.shadowOffsetY}function Ng(n,t){let e=t.content;if(kg(e))return{width:Ks(e.width,t.width),height:Ks(e.height,t.height)};let i=nN(t),r=t.textStrokeWidth,s=dt(e)?e:[e],o=s.join()+bG(i)+r+(n._measureText?"-spriting":"");return ew.has(o)||ew.set(o,EG(n,s,i,r)),ew.get(o)}function oN(n,t,e){let{x:i,y:r,width:s,height:o}=t;n.save(),uc(n,e);let a=is(n,e);n.fillStyle=e.backgroundColor,n.beginPath(),Qr(n,{x:i,y:r,w:s,h:o,radius:gG(Ki(e.borderRadius),0,Math.min(s,o)/2)}),n.closePath(),n.fill(),a&&(n.shadowColor=e.borderShadowColor,n.stroke()),n.restore()}function aN(n,t,e,i){let r=e.content;if(kg(r)){n.save(),n.globalAlpha=TG(e.opacity,r.style.opacity),n.drawImage(r,t.x,t.y,t.width,t.height),n.restore();return}let s=dt(r)?r:[r],o=nN(e,i),a=e.color,l=dt(a)?a:[a],c=yG(t,e),u=t.y+e.textStrokeWidth/2;n.save(),n.textBaseline="middle",n.textAlign=e.textAlign,SG(n,e)&&DG(n,{x:c,y:u},s,o),MG(n,{x:c,y:u},s,{fonts:o,colors:l}),n.restore()}function SG(n,t){if(t.textStrokeWidth>0)return n.lineJoin="round",n.miterLimit=2,n.lineWidth=t.textStrokeWidth,n.strokeStyle=t.textStrokeColor,!0}function CG(n,t,e,i){let{radius:r,options:s}=t,o=s.pointStyle,a=s.rotation,l=(a||0)*id;if(kg(o)){n.save(),n.translate(e,i),n.rotate(l),n.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),n.restore();return}wG(r)||xG(n,{x:e,y:i,radius:r,rotation:a,style:o,rad:l})}function xG(n,{x:t,y:e,radius:i,rotation:r,style:s,rad:o}){let a,l,c,u;switch(n.beginPath(),s){default:n.arc(t,e,i,0,At),n.closePath();break;case"triangle":n.moveTo(t+Math.sin(o)*i,e-Math.cos(o)*i),o+=Nl,n.lineTo(t+Math.sin(o)*i,e-Math.cos(o)*i),o+=Nl,n.lineTo(t+Math.sin(o)*i,e-Math.cos(o)*i),n.closePath();break;case"rectRounded":u=i*.516,c=i-u,a=Math.cos(o+Zn)*c,l=Math.sin(o+Zn)*c,n.arc(t-a,e-l,u,o-st,o-Ct),n.arc(t+l,e-a,u,o-Ct,o),n.arc(t+a,e+l,u,o,o+Ct),n.arc(t-l,e+a,u,o+Ct,o+st),n.closePath();break;case"rect":if(!r){c=Math.SQRT1_2*i,n.rect(t-c,e-c,2*c,2*c);break}o+=Zn;case"rectRot":a=Math.cos(o)*i,l=Math.sin(o)*i,n.moveTo(t-a,e-l),n.lineTo(t+l,e-a),n.lineTo(t+a,e+l),n.lineTo(t-l,e+a),n.closePath();break;case"crossRot":o+=Zn;case"cross":a=Math.cos(o)*i,l=Math.sin(o)*i,n.moveTo(t-a,e-l),n.lineTo(t+a,e+l),n.moveTo(t+l,e-a),n.lineTo(t-l,e+a);break;case"star":a=Math.cos(o)*i,l=Math.sin(o)*i,n.moveTo(t-a,e-l),n.lineTo(t+a,e+l),n.moveTo(t+l,e-a),n.lineTo(t-l,e+a),o+=Zn,a=Math.cos(o)*i,l=Math.sin(o)*i,n.moveTo(t-a,e-l),n.lineTo(t+a,e+l),n.moveTo(t+l,e-a),n.lineTo(t-l,e+a);break;case"line":a=Math.cos(o)*i,l=Math.sin(o)*i,n.moveTo(t-a,e-l),n.lineTo(t+a,e+l);break;case"dash":n.moveTo(t,e),n.lineTo(t+Math.cos(o)*i,e+Math.sin(o)*i);break}n.fill()}function EG(n,t,e,i){n.save();let r=t.length,s=0,o=i;for(let a=0;a<r;a++){let l=e[Math.min(a,e.length-1)];n.font=l.string;let c=t[a];s=Math.max(s,n.measureText(c).width+i),o+=l.lineHeight}return n.restore(),{width:s,height:o}}function DG(n,{x:t,y:e},i,r){n.beginPath();let s=0;i.forEach(function(o,a){let l=r[Math.min(a,r.length-1)],c=l.lineHeight;n.font=l.string,n.strokeText(o,t,e+c/2+s),s+=c}),n.stroke()}function MG(n,{x:t,y:e},i,{fonts:r,colors:s}){let o=0;i.forEach(function(a,l){let c=s[Math.min(l,s.length-1)],u=r[Math.min(l,r.length-1)],d=u.lineHeight;n.beginPath(),n.font=u.string,n.fillStyle=c,n.fillText(a,t,e+d/2+o),o+=d,n.fill()})}function TG(n,t){let e=Yi(n)?n:t;return Yi(e)?Ig(e,0,1):1}var lN=["left","bottom","top","right"];function IG(n,t){let{pointX:e,pointY:i,options:r}=t,s=r.callout,o=s&&s.display&&RG(t,s);if(!o||LG(t,s,o))return;if(n.save(),n.beginPath(),!is(n,s))return n.restore();let{separatorStart:l,separatorEnd:c}=kG(t,o),{sideStart:u,sideEnd:d}=NG(t,o,l);(s.margin>0||r.borderWidth===0)&&(n.moveTo(l.x,l.y),n.lineTo(c.x,c.y)),n.moveTo(u.x,u.y),n.lineTo(d.x,d.y);let h=sa({x:e,y:i},t.getCenterPoint(),jt(-t.rotation));n.lineTo(h.x,h.y),n.stroke(),n.restore()}function kG(n,t){let{x:e,y:i,x2:r,y2:s}=n,o=PG(n,t),a,l;return t==="left"||t==="right"?(a={x:e+o,y:i},l={x:a.x,y:s}):(a={x:e,y:i+o},l={x:r,y:a.y}),{separatorStart:a,separatorEnd:l}}function PG(n,t){let{width:e,height:i,options:r}=n,s=r.callout.margin+r.borderWidth/2;return t==="right"?e+s:t==="bottom"?i+s:-s}function NG(n,t,e){let{y:i,width:r,height:s,options:o}=n,a=o.callout.start,l=OG(t,o.callout),c,u;return t==="left"||t==="right"?(c={x:e.x,y:i+Ks(s,a)},u={x:c.x+l,y:c.y}):(c={x:e.x+Ks(r,a),y:e.y},u={x:c.x,y:c.y+l}),{sideStart:c,sideEnd:u}}function OG(n,t){let e=t.side;return n==="left"||n==="top"?-e:e}function RG(n,t){let e=t.position;return lN.includes(e)?e:FG(n,t)}function FG(n,t){let{x:e,y:i,x2:r,y2:s,width:o,height:a,pointX:l,pointY:c,centerX:u,centerY:d,rotation:h}=n,p={x:u,y:d},g=t.start,A=Ks(o,g),y=Ks(a,g),b=[e,e+A,e+A,r],x=[i+y,s,i,s],P=[];for(let T=0;T<4;T++){let k=sa({x:b[T],y:x[T]},p,jt(h));P.push({position:lN[T],distance:$r(k,{x:l,y:c})})}return P.sort((T,k)=>T.distance-k.distance)[0].position}function LG(n,t,e){let{pointX:i,pointY:r}=n,s=t.margin,o=i,a=r;return e==="left"?o+=s:e==="right"?o-=s:e==="top"?a+=s:e==="bottom"&&(a-=s),n.inRange(o,a)}var IP={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function sc(n,t,e){return t=typeof t=="number"?t:n.parse(t),Et(t)?n.getPixelForValue(t):e}function na(n,t,e){let i=t[e];if(i||e==="scaleID")return i;let r=e.charAt(0),s=Object.values(n).filter(o=>o.axis&&o.axis===r);return s.length?s[0].id:r}function cN(n,t){if(n){let e=n.options.reverse,i=sc(n,t.min,e?t.end:t.start),r=sc(n,t.max,e?t.start:t.end);return{start:i,end:r}}}function uN(n,t){let{chartArea:e,scales:i}=n,r=i[na(i,t,"xScaleID")],s=i[na(i,t,"yScaleID")],o=e.width/2,a=e.height/2;return r&&(o=sc(r,t.xValue,r.left+r.width/2)),s&&(a=sc(s,t.yValue,s.top+s.height/2)),{x:o,y:a}}function dw(n,t){let e=n.scales,i=e[na(e,t,"xScaleID")],r=e[na(e,t,"yScaleID")];if(!i&&!r)return{};let{left:s,right:o}=i||n.chartArea,{top:a,bottom:l}=r||n.chartArea,c=kP(i,{min:t.xMin,max:t.xMax,start:s,end:o});s=c.start,o=c.end;let u=kP(r,{min:t.yMin,max:t.yMax,start:l,end:a});return a=u.start,l=u.end,{x:s,y:a,x2:o,y2:l,width:o-s,height:l-a,centerX:s+(o-s)/2,centerY:a+(l-a)/2}}function dN(n,t){if(!iN(t)){let e=dw(n,t),i=t.radius;(!i||isNaN(i))&&(i=Math.min(e.width,e.height)/2,t.radius=i);let r=i*2,s=e.centerX+t.xAdjust,o=e.centerY+t.yAdjust;return{x:s-i,y:o-i,x2:s+i,y2:o+i,centerX:s,centerY:o,width:r,height:r,radius:i}}return BG(n,t)}function VG(n,t){let{scales:e,chartArea:i}=n,r=e[t.scaleID],s={x:i.left,y:i.top,x2:i.right,y2:i.bottom};return r?qG(r,s,t):jG(e,s,t),s}function hN(n,t){let e=dw(n,t);return e.initProperties=cc(n,e,t),e.elements=[{type:"label",optionScope:"label",properties:zG(n,e,t),initProperties:e.initProperties}],e}function BG(n,t){let e=uN(n,t),i=t.radius*2;return{x:e.x-t.radius+t.xAdjust,y:e.y-t.radius+t.yAdjust,x2:e.x+t.radius+t.xAdjust,y2:e.y+t.radius+t.yAdjust,centerX:e.x+t.xAdjust,centerY:e.y+t.yAdjust,radius:t.radius,width:i,height:i}}function kP(n,t){let e=cN(n,t)||t;return{start:Math.min(e.start,e.end),end:Math.max(e.start,e.end)}}function qG(n,t,e){let i=sc(n,e.value,NaN),r=sc(n,e.endValue,i);n.isHorizontal()?(t.x=i,t.x2=r):(t.y=i,t.y2=r)}function jG(n,t,e){for(let i of Object.keys(IP)){let r=n[na(n,e,i)];if(r){let{min:s,max:o,start:a,end:l,startProp:c,endProp:u}=IP[i],d=cN(r,{min:e[s],max:e[o],start:r[a],end:r[l]});t[c]=d.start,t[u]=d.end}}}function WG({properties:n,options:t},e,i,r){let{x:s,x2:o,width:a}=n;return pN({start:s,end:o,size:a,borderWidth:t.borderWidth},{position:i.x,padding:{start:r.left,end:r.right},adjust:t.label.xAdjust,size:e.width})}function UG({properties:n,options:t},e,i,r){let{y:s,y2:o,height:a}=n;return pN({start:s,end:o,size:a,borderWidth:t.borderWidth},{position:i.y,padding:{start:r.top,end:r.bottom},adjust:t.label.yAdjust,size:e.height})}function pN(n,t){let{start:e,end:i,borderWidth:r}=n,{position:s,padding:{start:o,end:a},adjust:l}=t,c=i-r-e-o-a-t.size;return e+r/2+l+cw(c,s)}function zG(n,t,e){let i=e.label;i.backgroundColor="transparent",i.callout.display=!1;let r=uw(i.position),s=Wt(i.padding),o=Ng(n.ctx,i),a=WG({properties:t,options:e},o,r,s),l=UG({properties:t,options:e},o,r,s),c=o.width+s.width,u=o.height+s.height;return{x:a,y:l,x2:a+c,y2:l+u,width:c,height:u,centerX:a+c/2,centerY:l+u/2,rotation:i.rotation}}var tw=["enter","leave"],hw=tw.concat("click");function HG(n,t,e){t.listened=rN(e,hw,t.listeners),t.moveListened=!1,tw.forEach(i=>{yn(e[i])&&(t.moveListened=!0)}),(!t.listened||!t.moveListened)&&t.annotations.forEach(i=>{!t.listened&&yn(i.click)&&(t.listened=!0),t.moveListened||tw.forEach(r=>{yn(i[r])&&(t.listened=!0,t.moveListened=!0)})})}function YG(n,t,e){if(n.listened)switch(t.type){case"mousemove":case"mouseout":return GG(n,t,e);case"click":return KG(n,t,e)}}function GG(n,t,e){if(!n.moveListened)return;let i;t.type==="mousemove"?i=lw(n.visibleElements,t,e.interaction):i=[];let r=n.hovered;n.hovered=i;let s={state:n,event:t},o=PP(s,"leave",r,i);return PP(s,"enter",i,r)||o}function PP({state:n,event:t},e,i,r){let s;for(let o of i)r.indexOf(o)<0&&(s=fN(o.options[e]||n.listeners[e],o,t)||s);return s}function KG(n,t,e){let i=n.listeners,r=lw(n.visibleElements,t,e.interaction),s;for(let o of r)s=fN(o.options.click||i.click,o,t)||s;return s}function fN(n,t,e){return pt(n,[t.$context,e])===!0}var Tg=["afterDraw","beforeDraw"];function $G(n,t,e){let i=t.visibleElements;t.hooked=rN(e,Tg,t.hooks),t.hooked||i.forEach(r=>{t.hooked||Tg.forEach(s=>{yn(r.options[s])&&(t.hooked=!0)})})}function NP(n,t,e){if(n.hooked){let i=t.options[e]||n.hooks[e];return pt(i,[t.$context])}}function XG(n,t,e){let i=tK(n.scales,t,e),r=OP(t,i,"min","suggestedMin");r=OP(t,i,"max","suggestedMax")||r,r&&yn(t.handleTickRangeOptions)&&t.handleTickRangeOptions()}function ZG(n,t){for(let e of n)JG(e,t)}function OP(n,t,e,i){if(Et(t[e])&&!QG(n.options,e,i)){let r=n[e]!==t[e];return n[e]=t[e],r}}function QG(n,t,e){return vn(n[t])||vn(n[e])}function JG(n,t){for(let e of["scaleID","xScaleID","yScaleID"]){let i=na(t,n,e);i&&!t[i]&&eK(n,e)&&console.warn(`No scale found with id '${i}' for annotation '${n.id}'`)}}function eK(n,t){if(t==="scaleID")return!0;let e=t.charAt(0);for(let i of["Min","Max","Value"])if(vn(n[e+i]))return!0;return!1}function tK(n,t,e){let i=t.axis,r=t.id,s=i+"ScaleID",o={min:Ve(t.min,Number.NEGATIVE_INFINITY),max:Ve(t.max,Number.POSITIVE_INFINITY)};for(let a of e)a.scaleID===r?RP(a,t,["value","endValue"],o):na(n,a,s)===r&&RP(a,t,[i+"Min",i+"Max",i+"Value"],o);return o}function RP(n,t,e,i){for(let r of e){let s=n[r];if(vn(s)){let o=t.parse(s);i.min=Math.min(i.min,o),i.max=Math.max(i.max,o)}}}var $s=class extends on{inRange(t,e,i,r){let{x:s,y:o}=sa({x:t,y:e},this.getCenterPoint(r),jt(-this.options.rotation));return $P({x:s,y:o},this.getProps(["x","y","x2","y2"],r),i,this.options)}getCenterPoint(t){return oa(this,t)}draw(t){t.save(),Pg(t,this.getCenterPoint(),this.options.rotation),oN(t,this,this.options),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,e){return hN(t,e)}};$s.id="boxAnnotation";$s.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};$s.defaultRoutes={borderColor:"color",backgroundColor:"color"};$s.descriptors={label:{_fallback:!0}};var oc=class extends on{inRange(t,e,i,r){return XP({x:t,y:e},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},i,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(t){return oa(this,t)}draw(t){let e=this.options;!e.display||!e.content||(aK(t,this),t.save(),Pg(t,this.getCenterPoint(),this.rotation),aN(t,this,e,this._fitRatio),t.restore())}resolveElementProperties(t,e){let i=nK(t,e);if(!i)return{};let{controllerMeta:r,point:s,radius:o}=rK(t,e,i),a=Ng(t.ctx,e),l=sK(a,o);tN(e,l)&&(a={width:a.width*l,height:a.height*l});let{position:c,xAdjust:u,yAdjust:d}=e,h=eN(s,a,{borderWidth:0,position:c,xAdjust:u,yAdjust:d});return Ne(re(re({initProperties:cc(t,h,e)},h),r),{rotation:e.rotation,_fitRatio:l})}};oc.id="doughnutLabelAnnotation";oc.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};oc.defaultRoutes={};function nK(n,t){return n.getSortedVisibleDatasetMetas().reduce(function(e,i){let r=i.controller;return r instanceof bd&&iK(n,t,i.data)&&(!e||r.innerRadius<e.controller.innerRadius)&&r.options.circumference>=90?i:e},void 0)}function iK(n,t,e){if(!t.autoHide)return!0;for(let i=0;i<e.length;i++)if(!e[i].hidden&&n.getDataVisibility(i))return!0}function rK({chartArea:n},t,e){let{left:i,top:r,right:s,bottom:o}=n,{innerRadius:a,offsetX:l,offsetY:c}=e.controller,u=(i+s)/2+l,d=(r+o)/2+c,h={left:Math.max(u-a,i),right:Math.min(u+a,s),top:Math.max(d-a,r),bottom:Math.min(d+a,o)},p={x:(h.left+h.right)/2,y:(h.top+h.bottom)/2},g=t.spacing+t.borderWidth/2,A=a-g,y=p.y>d,b=y?r+g:o-g,x=oK(b,u,d,A);return{controllerMeta:re({_centerX:u,_centerY:d,_radius:A,_counterclockwise:y},x),point:p,radius:Math.min(a,Math.min(h.right-h.left,h.bottom-h.top)/2)}}function sK({width:n,height:t},e){let i=Math.sqrt(Math.pow(n,2)+Math.pow(t,2));return e*2/i}function oK(n,t,e,i){let r=Math.pow(e-n,2),s=Math.pow(i,2),o=t*-2,a=Math.pow(t,2)+r-s,l=Math.pow(o,2)-4*a;if(l<=0)return{_startAngle:0,_endAngle:At};let c=(-o-Math.sqrt(l))/2,u=(-o+Math.sqrt(l))/2;return{_startAngle:zo({x:t,y:e},{x:c,y:n}).angle,_endAngle:zo({x:t,y:e},{x:u,y:n}).angle}}function aK(n,t){let{_centerX:e,_centerY:i,_radius:r,_startAngle:s,_endAngle:o,_counterclockwise:a,options:l}=t;n.save();let c=is(n,l);n.fillStyle=l.backgroundColor,n.beginPath(),n.arc(e,i,r,s,o,a),n.closePath(),n.fill(),c&&n.stroke(),n.restore()}var ia=class extends on{inRange(t,e,i,r){return XP({x:t,y:e},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},i,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(t){return oa(this,t)}draw(t){let e=this.options,i=!vn(this._visible)||this._visible;!e.display||!e.content||!i||(t.save(),Pg(t,this.getCenterPoint(),this.rotation),IG(t,this),oN(t,this,e),aN(t,lK(this),e),t.restore())}resolveElementProperties(t,e){let i;if(iN(e))i=uN(t,e);else{let{centerX:a,centerY:l}=dw(t,e);i={x:a,y:l}}let r=Wt(e.padding),s=Ng(t.ctx,e),o=eN(i,s,e,r);return Ne(re({initProperties:cc(t,o,e),pointX:i.x,pointY:i.y},o),{rotation:e.rotation})}};ia.id="labelAnnotation";ia.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};ia.defaultRoutes={borderColor:"color"};function lK({x:n,y:t,width:e,height:i,options:r}){let s=r.borderWidth/2,o=Wt(r.padding);return{x:n+o.left+s,y:t+o.top+s,width:e-o.left-o.right-r.borderWidth,height:i-o.top-o.bottom-r.borderWidth}}var pw=(n,t,e)=>({x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}),nw=(n,t,e)=>pw(t,e,Math.abs((n-t.y)/(e.y-t.y))).x,FP=(n,t,e)=>pw(t,e,Math.abs((n-t.x)/(e.x-t.x))).y,Wd=n=>n*n,cK=(n,t,{x:e,y:i,x2:r,y2:s},o)=>o==="y"?{start:Math.min(i,s),end:Math.max(i,s),value:t}:{start:Math.min(e,r),end:Math.max(e,r),value:n},LP=(n,t,e,i)=>(1-i)*(1-i)*n+2*(1-i)*i*t+i*i*e,iw=(n,t,e,i)=>({x:LP(n.x,t.x,e.x,i),y:LP(n.y,t.y,e.y,i)}),VP=(n,t,e,i)=>2*(1-i)*(t-n)+2*i*(e-t),BP=(n,t,e,i)=>-Math.atan2(VP(n.x,t.x,e.x,i),VP(n.y,t.y,e.y,i))+.5*st,Og=(()=>{class n extends on{inRange(e,i,r,s){let o=(this.options.borderWidth+this.options.hitTolerance)/2;if(r!=="x"&&r!=="y"){let a={mouseX:e,mouseY:i},{path:l,ctx:c}=this;if(l){is(c,this.options),c.lineWidth+=this.options.hitTolerance;let{chart:d}=this.$context,h=e*d.currentDevicePixelRatio,p=i*d.currentDevicePixelRatio,g=c.isPointInStroke(l,h,p)||rw(this,a,s);return c.restore(),g}let u=Wd(o);return pK(this,a,u,s)||rw(this,a,s)}return uK(this,{mouseX:e,mouseY:i},r,{hitSize:o,useFinalPosition:s})}getCenterPoint(e){return oa(this,e)}draw(e){let{x:i,y:r,x2:s,y2:o,cp:a,options:l}=this;if(e.save(),!is(e,l))return e.restore();uc(e,l);let c=Math.sqrt(Math.pow(s-i,2)+Math.pow(o-r,2));if(l.curve&&a)return wK(e,this,a,c),e.restore();let{startOpts:u,endOpts:d,startAdjust:h,endAdjust:p}=gN(this),g=Math.atan2(o-r,s-i);e.translate(i,r),e.rotate(g),e.beginPath(),e.moveTo(0+h,0),e.lineTo(c-p,0),e.shadowColor=l.borderShadowColor,e.stroke(),sw(e,0,h,u),sw(e,c,-p,d),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,i){let r=VG(e,i),{x:s,y:o,x2:a,y2:l}=r,c=dK(r,e.chartArea),u=c?hK({x:s,y:o},{x:a,y:l},e.chartArea):{x:s,y:o,x2:a,y2:l,width:Math.abs(a-s),height:Math.abs(l-o)};if(u.centerX=(a+s)/2,u.centerY=(l+o)/2,u.initProperties=cc(e,u,i),i.curve){let h={x:u.x,y:u.y},p={x:u.x2,y:u.y2};u.cp=vK(u,i,$r(h,p))}let d=fK(e,u,i.label);return d._visible=c,u.elements=[{type:"label",optionScope:"label",properties:d,initProperties:u.initProperties}],u}}return n.id="lineAnnotation",n})(),qP={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};Og.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},qP),fill:!1,length:12,start:Object.assign({},qP),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},ia.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Og.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};Og.defaultRoutes={borderColor:"color"};function uK(n,{mouseX:t,mouseY:e},i,{hitSize:r,useFinalPosition:s}){let o=cK(t,e,n.getProps(["x","y","x2","y2"],s),i);return KP(o,r)||rw(n,{mouseX:t,mouseY:e},s,i)}function dK({x:n,y:t,x2:e,y2:i},{top:r,right:s,bottom:o,left:a}){return!(n<a&&e<a||n>s&&e>s||t<r&&i<r||t>o&&i>o)}function jP({x:n,y:t},e,{top:i,right:r,bottom:s,left:o}){return n<o&&(t=FP(o,{x:n,y:t},e),n=o),n>r&&(t=FP(r,{x:n,y:t},e),n=r),t<i&&(n=nw(i,{x:n,y:t},e),t=i),t>s&&(n=nw(s,{x:n,y:t},e),t=s),{x:n,y:t}}function hK(n,t,e){let{x:i,y:r}=jP(n,t,e),{x:s,y:o}=jP(t,n,e);return{x:i,y:r,x2:s,y2:o,width:Math.abs(s-i),height:Math.abs(o-r)}}function pK(n,{mouseX:t,mouseY:e},i=ta,r){let{x:s,y:o,x2:a,y2:l}=n.getProps(["x","y","x2","y2"],r),c=a-s,u=l-o,d=Wd(c)+Wd(u),h=d===0?-1:((t-s)*c+(e-o)*u)/d,p,g;return h<0?(p=s,g=o):h>1?(p=a,g=l):(p=s+h*c,g=o+h*u),Wd(t-p)+Wd(e-g)<=i}function rw(n,{mouseX:t,mouseY:e},i,r){let s=n.label;return s.options.display&&s.inRange(t,e,r,i)}function fK(n,t,e){let i=e.borderWidth,r=Wt(e.padding),s=Ng(n.ctx,e),o=s.width+r.width+i,a=s.height+r.height+i;return mK(t,e,{width:o,height:a,padding:r},n.chartArea)}function gK(n){let{x:t,y:e,x2:i,y2:r}=n,s=Math.atan2(r-e,i-t);return s>st/2?s-st:s<st/-2?s+st:s}function mK(n,t,e,i){let{width:r,height:s,padding:o}=e,{xAdjust:a,yAdjust:l}=t,c={x:n.x,y:n.y},u={x:n.x2,y:n.y2},d=t.rotation==="auto"?gK(n):jt(t.rotation),h=_K(r,s,d),p=AK(n,t,{labelSize:h,padding:o},i),g=n.cp?iw(c,n.cp,u,p):pw(c,u,p),A={size:h.w,min:i.left,max:i.right,padding:o.left},y={size:h.h,min:i.top,max:i.bottom,padding:o.top},b=UP(g.x,A)+a,x=UP(g.y,y)+l;return{x:b-r/2,y:x-s/2,x2:b+r/2,y2:x+s/2,centerX:b,centerY:x,pointX:g.x,pointY:g.y,width:r,height:s,rotation:Uo(d)}}function _K(n,t,e){let i=Math.cos(e),r=Math.sin(e);return{w:Math.abs(n*i)+Math.abs(t*r),h:Math.abs(n*r)+Math.abs(t*i)}}function AK(n,t,e,i){let r,s=yK(n,i);return t.position==="start"?r=WP({w:n.x2-n.x,h:n.y2-n.y},e,t,s):t.position==="end"?r=1-WP({w:n.x-n.x2,h:n.y-n.y2},e,t,s):r=cw(1,t.position),r}function WP(n,t,e,i){let{labelSize:r,padding:s}=t,o=n.w*i.dx,a=n.h*i.dy,l=o>0&&(r.w/2+s.left-i.x)/o,c=a>0&&(r.h/2+s.top-i.y)/a;return Ig(Math.max(l,c),0,.25)}function yK(n,t){let{x:e,x2:i,y:r,y2:s}=n,o=Math.min(r,s)-t.top,a=Math.min(e,i)-t.left,l=t.bottom-Math.max(r,s),c=t.right-Math.max(e,i);return{x:Math.min(a,c),y:Math.min(o,l),dx:a<=c?1:-1,dy:o<=l?1:-1}}function UP(n,t){let{size:e,min:i,max:r,padding:s}=t,o=e/2;return e>r-i?(r+i)/2:(i>=n-s-o&&(n=i+s+o),r<=n+s+o&&(n=r-s-o),n)}function gN(n){let t=n.options,e=t.arrowHeads&&t.arrowHeads.start,i=t.arrowHeads&&t.arrowHeads.end;return{startOpts:e,endOpts:i,startAdjust:zP(n,e),endAdjust:zP(n,i)}}function zP(n,t){if(!t||!t.display)return 0;let{length:e,width:i}=t,r=n.options.borderWidth/2,s={x:e,y:i+r};return Math.abs(nw(0,s,{x:0,y:r}))}function sw(n,t,e,i){if(!i||!i.display)return;let{length:r,width:s,fill:o,backgroundColor:a,borderColor:l}=i,c=Math.abs(t-r)+e;n.beginPath(),uc(n,i),is(n,i),n.moveTo(c,-s),n.lineTo(t+e,0),n.lineTo(c,s),o===!0?(n.fillStyle=a||l,n.closePath(),n.fill(),n.shadowColor="transparent"):n.shadowColor=i.borderShadowColor,n.stroke()}function vK(n,t,e){let{x:i,y:r,x2:s,y2:o,centerX:a,centerY:l}=n,c=Math.atan2(o-r,s-i),u=uw(t.controlPoint,0),d={x:a+Ks(e,u.x,!1),y:l+Ks(e,u.y,!1)};return sa(d,{x:a,y:l},c)}function HP(n,{x:t,y:e},{angle:i,adjust:r},s){!s||!s.display||(n.save(),n.translate(t,e),n.rotate(i),sw(n,0,-r,s),n.restore())}function wK(n,t,e,i){let{x:r,y:s,x2:o,y2:a,options:l}=t,{startOpts:c,endOpts:u,startAdjust:d,endAdjust:h}=gN(t),p={x:r,y:s},g={x:o,y:a},A=BP(p,e,g,0),y=BP(p,e,g,1)-st,b=iw(p,e,g,d/i),x=iw(p,e,g,1-h/i),P=new Path2D;n.beginPath(),P.moveTo(b.x,b.y),P.quadraticCurveTo(e.x,e.y,x.x,x.y),n.shadowColor=l.borderShadowColor,n.stroke(P),t.path=P,t.ctx=n,HP(n,b,{angle:A,adjust:d},c),HP(n,x,{angle:y,adjust:h},u)}var ra=class extends on{inRange(t,e,i,r){let s=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(i!=="x"&&i!=="y")return bK({x:t,y:e},this.getProps(["width","height","centerX","centerY"],r),s,o);let{x:a,y:l,x2:c,y2:u}=this.getProps(["x","y","x2","y2"],r),d=i==="y"?{start:l,end:u}:{start:a,end:c},h=sa({x:t,y:e},this.getCenterPoint(r),jt(-s));return h[i]>=d.start-o-ta&&h[i]<=d.end+o+ta}getCenterPoint(t){return oa(this,t)}draw(t){let{width:e,height:i,centerX:r,centerY:s,options:o}=this;t.save(),Pg(t,this.getCenterPoint(),o.rotation),uc(t,this.options),t.beginPath(),t.fillStyle=o.backgroundColor;let a=is(t,o);t.ellipse(r,s,i/2,e/2,st/2,0,2*st),t.fill(),a&&(t.shadowColor=o.borderShadowColor,t.stroke()),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,e){return hN(t,e)}};ra.id="ellipseAnnotation";ra.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},$s.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};ra.defaultRoutes={borderColor:"color",backgroundColor:"color"};ra.descriptors={label:{_fallback:!0}};function bK(n,t,e,i){let{width:r,height:s,centerX:o,centerY:a}=t,l=r/2,c=s/2;if(l<=0||c<=0)return!1;let u=jt(e||0),d=Math.cos(u),h=Math.sin(u),p=Math.pow(d*(n.x-o)+h*(n.y-a),2),g=Math.pow(h*(n.x-o)-d*(n.y-a),2);return p/Math.pow(l+i,2)+g/Math.pow(c+i,2)<=1.0001}var ac=class extends on{inRange(t,e,i,r){let{x:s,y:o,x2:a,y2:l,width:c}=this.getProps(["x","y","x2","y2","width"],r),u=(this.options.borderWidth+this.options.hitTolerance)/2;return i!=="x"&&i!=="y"?mG({x:t,y:e},this.getCenterPoint(r),c/2,u):KP(i==="y"?{start:o,end:l,value:e}:{start:s,end:a,value:t},u)}getCenterPoint(t){return oa(this,t)}draw(t){let e=this.options,i=e.borderWidth;if(e.radius<.1)return;t.save(),t.fillStyle=e.backgroundColor,uc(t,e);let r=is(t,e);CG(t,this,this.centerX,this.centerY),r&&!kg(e.pointStyle)&&(t.shadowColor=e.borderShadowColor,t.stroke()),t.restore(),e.borderWidth=i}resolveElementProperties(t,e){let i=dN(t,e);return i.initProperties=cc(t,i,e),i}};ac.id="pointAnnotation";ac.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};ac.defaultRoutes={borderColor:"color",backgroundColor:"color"};var lc=class extends on{inRange(t,e,i,r){if(i!=="x"&&i!=="y")return this.options.radius>=.1&&this.elements.length>1&&CK(this.elements,t,e,r);let s=sa({x:t,y:e},this.getCenterPoint(r),jt(-this.options.rotation)),o=this.elements.map(c=>i==="y"?c.bY:c.bX),a=Math.min(...o),l=Math.max(...o);return s[i]>=a&&s[i]<=l}getCenterPoint(t){return oa(this,t)}draw(t){let{elements:e,options:i}=this;t.save(),t.beginPath(),t.fillStyle=i.backgroundColor,uc(t,i);let r=is(t,i),s=!0;for(let o of e)s?(t.moveTo(o.x,o.y),s=!1):t.lineTo(o.x,o.y);t.closePath(),t.fill(),r&&(t.shadowColor=i.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,e){let i=dN(t,e),{sides:r,rotation:s}=e,o=[],a=2*st/r,l=s*id;for(let c=0;c<r;c++,l+=a){let u=SK(i,e,l);u.initProperties=cc(t,i,e),o.push(u)}return i.elements=o,i}};lc.id="polygonAnnotation";lc.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};lc.defaultRoutes={borderColor:"color",backgroundColor:"color"};function SK({centerX:n,centerY:t},{radius:e,borderWidth:i,hitTolerance:r},s){let o=(i+r)/2,a=Math.sin(s),l=Math.cos(s),c={x:n+a*e,y:t-l*e};return{type:"point",optionScope:"point",properties:{x:c.x,y:c.y,centerX:c.x,centerY:c.y,bX:n+a*(e+o),bY:t-l*(e+o)}}}function CK(n,t,e,i){let r=!1,s=n[n.length-1].getProps(["bX","bY"],i);for(let o of n){let a=o.getProps(["bX","bY"],i);a.bY>e!=s.bY>e&&t<(s.bX-a.bX)*(e-a.bY)/(s.bY-a.bY)+a.bX&&(r=!r),s=a}return r}var Gs={box:$s,doughnutLabel:oc,ellipse:ra,label:ia,line:Og,point:ac,polygon:lc};Object.keys(Gs).forEach(n=>{bt.describe(`elements.${Gs[n].id}`,{_fallback:"plugins.annotation.common"})});var xK={update:Object.assign},EK=hw.concat(Tg),YP=(n,t)=>Ge(t)?aw(n,t):n,ow=n=>n==="color"||n==="font";function fw(n="line"){return Gs[n]?n:(console.warn(`Unknown annotation type: '${n}', defaulting to 'line'`),"line")}function DK(n,t,e,i){let r=TK(n,e.animations,i),s=t.annotations,o=PK(t.elements,s);for(let a=0;a<s.length;a++){let l=s[a],c=mN(o,a,l.type),u=l.setContext(kK(n,c,o,l)),d=c.resolveElementProperties(n,u);d.skip=MK(d),"elements"in d&&(IK(c,d.elements,u,r),delete d.elements),vn(c.x)||Object.assign(c,d),Object.assign(c,d.initProperties),d.options=_N(u),r.update(c,d)}}function MK(n){return isNaN(n.x)||isNaN(n.y)}function TK(n,t,e){return e==="reset"||e==="none"||e==="resize"?xK:new Bl(n,t)}function IK(n,t,e,i){let r=n.elements||(n.elements=[]);r.length=t.length;for(let s=0;s<t.length;s++){let o=t[s],a=o.properties,l=mN(r,s,o.type,o.initProperties),c=e[o.optionScope].override(o);a.options=_N(c),i.update(l,a)}}function mN(n,t,e,i){let r=Gs[fw(e)],s=n[t];return(!s||!(s instanceof r))&&(s=n[t]=new r,Object.assign(s,i)),s}function _N(n){let t=Gs[fw(n.type)],e={};e.id=n.id,e.type=n.type,e.drawTime=n.drawTime,Object.assign(e,aw(n,t.defaults),aw(n,t.defaultRoutes));for(let i of EK)e[i]=n[i];return e}function aw(n,t){let e={};for(let i of Object.keys(t)){let r=t[i],s=n[i];ow(i)&&dt(s)?e[i]=s.map(o=>YP(o,r)):e[i]=YP(s,r)}return e}function kK(n,t,e,i){return t.$context||(t.$context=Object.assign(Object.create(n.getContext()),{element:t,get elements(){return e.filter(r=>r&&r.options)},id:i.id,type:"annotation"}))}function PK(n,t){let e=t.length,i=n.length;if(i<e){let r=e-i;n.splice(i,0,...new Array(r))}else i>e&&n.splice(e,i-e);return n}var NK="3.1.0",Ys=new Map,GP=n=>n.type!=="doughnutLabel",OK=hw.concat(Tg),AN={id:"annotation",version:NK,beforeRegister(){_G("chart.js","4.0",br.version)},afterRegister(){br.register(Gs)},afterUnregister(){br.unregister(Gs)},beforeInit(n){Ys.set(n,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(n,t,e){let i=Ys.get(n),r=i.annotations=[],s=e.annotations;Ge(s)?Object.keys(s).forEach(o=>{let a=s[o];Ge(a)&&(a.id=o,r.push(a))}):dt(s)&&r.push(...s),ZG(r.filter(GP),n.scales)},afterDataLimits(n,t){let e=Ys.get(n);XG(n,t.scale,e.annotations.filter(GP).filter(i=>i.display&&i.adjustScaleRange))},afterUpdate(n,t,e){let i=Ys.get(n);HG(n,i,e),DK(n,i,e,t.mode),i.visibleElements=i.elements.filter(r=>!r.skip&&r.options.display),$G(n,i,e)},beforeDatasetsDraw(n,t,e){jd(n,"beforeDatasetsDraw",e.clip)},afterDatasetsDraw(n,t,e){jd(n,"afterDatasetsDraw",e.clip)},beforeDatasetDraw(n,t,e){jd(n,t.index,e.clip)},beforeDraw(n,t,e){jd(n,"beforeDraw",e.clip)},afterDraw(n,t,e){jd(n,"afterDraw",e.clip)},beforeEvent(n,t,e){let i=Ys.get(n);YG(i,t.event,e)&&(t.changed=!0)},afterDestroy(n){Ys.delete(n)},getAnnotations(n){let t=Ys.get(n);return t?t.elements:[]},_getAnnotationElementsAtEventForMode(n,t,e){return lw(n,t,e)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:n=>!OK.includes(n)&&n!=="init",annotations:{_allKeys:!1,_fallback:(n,t)=>`elements.${Gs[fw(t.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:ow,_fallback:!0},_indexable:ow}},additionalOptionScopes:[""]};function jd(n,t,e){let{ctx:i,chartArea:r}=n,s=Ys.get(n);e&&Os(i,r);let o=RK(s.visibleElements,t).sort((a,l)=>a.element.options.z-l.element.options.z);for(let a of o)FK(i,r,s,a);e&&Rs(i)}function RK(n,t){let e=[];for(let i of n)if(i.options.drawTime===t&&e.push({element:i,main:!0}),i.elements&&i.elements.length)for(let r of i.elements)r.options.display&&r.options.drawTime===t&&e.push({element:r});return e}function FK(n,t,e,i){let r=i.element;i.main?(NP(e,r,"beforeDraw"),r.draw(n,t),NP(e,r,"afterDraw")):r.draw(n,t)}var tn="top",wn="bottom",hn="right",an="left",Rg="auto",Xs=[tn,wn,hn,an],rs="start",aa="end",yN="clippingParents",Fg="viewport",dc="popper",vN="reference",gw=Xs.reduce(function(n,t){return n.concat([t+"-"+rs,t+"-"+aa])},[]),Lg=[].concat(Xs,[Rg]).reduce(function(n,t){return n.concat([t,t+"-"+rs,t+"-"+aa])},[]),LK="beforeRead",VK="read",BK="afterRead",qK="beforeMain",jK="main",WK="afterMain",UK="beforeWrite",zK="write",HK="afterWrite",wN=[LK,VK,BK,qK,jK,WK,UK,zK,HK];function pn(n){return n?(n.nodeName||"").toLowerCase():null}function Bt(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var t=n.ownerDocument;return t&&t.defaultView||window}return n}function Ei(n){var t=Bt(n).Element;return n instanceof t||n instanceof Element}function ln(n){var t=Bt(n).HTMLElement;return n instanceof t||n instanceof HTMLElement}function hc(n){if(typeof ShadowRoot>"u")return!1;var t=Bt(n).ShadowRoot;return n instanceof t||n instanceof ShadowRoot}function YK(n){var t=n.state;Object.keys(t.elements).forEach(function(e){var i=t.styles[e]||{},r=t.attributes[e]||{},s=t.elements[e];!ln(s)||!pn(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function GK(n){var t=n.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(i){var r=t.elements[i],s=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:e[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!ln(r)||!pn(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}var bN={name:"applyStyles",enabled:!0,phase:"write",fn:YK,effect:GK,requires:["computeStyles"]};function fn(n){return n.split("-")[0]}var Xi=Math.max,la=Math.min,ss=Math.round;function pc(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Ud(){return!/^((?!chrome|android).)*safari/i.test(pc())}function Di(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var i=n.getBoundingClientRect(),r=1,s=1;t&&ln(n)&&(r=n.offsetWidth>0&&ss(i.width)/n.offsetWidth||1,s=n.offsetHeight>0&&ss(i.height)/n.offsetHeight||1);var o=Ei(n)?Bt(n):window,a=o.visualViewport,l=!Ud()&&e,c=(i.left+(l&&a?a.offsetLeft:0))/r,u=(i.top+(l&&a?a.offsetTop:0))/s,d=i.width/r,h=i.height/s;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function ca(n){var t=Di(n),e=n.offsetWidth,i=n.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:n.offsetLeft,y:n.offsetTop,width:e,height:i}}function zd(n,t){var e=t.getRootNode&&t.getRootNode();if(n.contains(t))return!0;if(e&&hc(e)){var i=t;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Bn(n){return Bt(n).getComputedStyle(n)}function mw(n){return["table","td","th"].indexOf(pn(n))>=0}function bn(n){return((Ei(n)?n.ownerDocument:n.document)||window.document).documentElement}function os(n){return pn(n)==="html"?n:n.assignedSlot||n.parentNode||(hc(n)?n.host:null)||bn(n)}function SN(n){return!ln(n)||Bn(n).position==="fixed"?null:n.offsetParent}function KK(n){var t=/firefox/i.test(pc()),e=/Trident/i.test(pc());if(e&&ln(n)){var i=Bn(n);if(i.position==="fixed")return null}var r=os(n);for(hc(r)&&(r=r.host);ln(r)&&["html","body"].indexOf(pn(r))<0;){var s=Bn(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function Zi(n){for(var t=Bt(n),e=SN(n);e&&mw(e)&&Bn(e).position==="static";)e=SN(e);return e&&(pn(e)==="html"||pn(e)==="body"&&Bn(e).position==="static")?t:e||KK(n)||t}function ua(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function da(n,t,e){return Xi(n,la(t,e))}function CN(n,t,e){var i=da(n,t,e);return i>e?e:i}function Hd(){return{top:0,right:0,bottom:0,left:0}}function Yd(n){return Object.assign({},Hd(),n)}function Gd(n,t){return t.reduce(function(e,i){return e[i]=n,e},{})}var $K=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,Yd(typeof t!="number"?t:Gd(t,Xs))};function XK(n){var t,e=n.state,i=n.name,r=n.options,s=e.elements.arrow,o=e.modifiersData.popperOffsets,a=fn(e.placement),l=ua(a),c=[an,hn].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var d=$K(r.padding,e),h=ca(s),p=l==="y"?tn:an,g=l==="y"?wn:hn,A=e.rects.reference[u]+e.rects.reference[l]-o[l]-e.rects.popper[u],y=o[l]-e.rects.reference[l],b=Zi(s),x=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,P=A/2-y/2,T=d[p],k=x-h[u]-d[g],C=x/2-h[u]/2+P,M=da(T,C,k),O=l;e.modifiersData[i]=(t={},t[O]=M,t.centerOffset=M-C,t)}}function ZK(n){var t=n.state,e=n.options,i=e.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||zd(t.elements.popper,r)&&(t.elements.arrow=r))}var _w={name:"arrow",enabled:!0,phase:"main",fn:XK,effect:ZK,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Mi(n){return n.split("-")[1]}var QK={top:"auto",right:"auto",bottom:"auto",left:"auto"};function JK(n,t){var e=n.x,i=n.y,r=t.devicePixelRatio||1;return{x:ss(e*r)/r||0,y:ss(i*r)/r||0}}function xN(n){var t,e=n.popper,i=n.popperRect,r=n.placement,s=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,c=n.adaptive,u=n.roundOffsets,d=n.isFixed,h=o.x,p=h===void 0?0:h,g=o.y,A=g===void 0?0:g,y=typeof u=="function"?u({x:p,y:A}):{x:p,y:A};p=y.x,A=y.y;var b=o.hasOwnProperty("x"),x=o.hasOwnProperty("y"),P=an,T=tn,k=window;if(c){var C=Zi(e),M="clientHeight",O="clientWidth";if(C===Bt(e)&&(C=bn(e),Bn(C).position!=="static"&&a==="absolute"&&(M="scrollHeight",O="scrollWidth")),C=C,r===tn||(r===an||r===hn)&&s===aa){T=wn;var R=d&&C===k&&k.visualViewport?k.visualViewport.height:C[M];A-=R-i.height,A*=l?1:-1}if(r===an||(r===tn||r===wn)&&s===aa){P=hn;var q=d&&C===k&&k.visualViewport?k.visualViewport.width:C[O];p-=q-i.width,p*=l?1:-1}}var H=Object.assign({position:a},c&&QK),Z=u===!0?JK({x:p,y:A},Bt(e)):{x:p,y:A};if(p=Z.x,A=Z.y,l){var ne;return Object.assign({},H,(ne={},ne[T]=x?"0":"",ne[P]=b?"0":"",ne.transform=(k.devicePixelRatio||1)<=1?"translate("+p+"px, "+A+"px)":"translate3d("+p+"px, "+A+"px, 0)",ne))}return Object.assign({},H,(t={},t[T]=x?A+"px":"",t[P]=b?p+"px":"",t.transform="",t))}function e$(n){var t=n.state,e=n.options,i=e.gpuAcceleration,r=i===void 0?!0:i,s=e.adaptive,o=s===void 0?!0:s,a=e.roundOffsets,l=a===void 0?!0:a,c={placement:fn(t.placement),variation:Mi(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,xN(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,xN(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var EN={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:e$,data:{}};var Vg={passive:!0};function t$(n){var t=n.state,e=n.instance,i=n.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,a=o===void 0?!0:o,l=Bt(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",e.update,Vg)}),a&&l.addEventListener("resize",e.update,Vg),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",e.update,Vg)}),a&&l.removeEventListener("resize",e.update,Vg)}}var DN={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:t$,data:{}};var n$={left:"right",right:"left",bottom:"top",top:"bottom"};function fc(n){return n.replace(/left|right|bottom|top/g,function(t){return n$[t]})}var i$={start:"end",end:"start"};function Bg(n){return n.replace(/start|end/g,function(t){return i$[t]})}function ha(n){var t=Bt(n),e=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:e,scrollTop:i}}function pa(n){return Di(bn(n)).left+ha(n).scrollLeft}function Aw(n,t){var e=Bt(n),i=bn(n),r=e.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var c=Ud();(c||!c&&t==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+pa(n),y:l}}function yw(n){var t,e=bn(n),i=ha(n),r=(t=n.ownerDocument)==null?void 0:t.body,s=Xi(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Xi(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+pa(n),l=-i.scrollTop;return Bn(r||e).direction==="rtl"&&(a+=Xi(e.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function fa(n){var t=Bn(n),e=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+r+i)}function qg(n){return["html","body","#document"].indexOf(pn(n))>=0?n.ownerDocument.body:ln(n)&&fa(n)?n:qg(os(n))}function Zs(n,t){var e;t===void 0&&(t=[]);var i=qg(n),r=i===((e=n.ownerDocument)==null?void 0:e.body),s=Bt(i),o=r?[s].concat(s.visualViewport||[],fa(i)?i:[]):i,a=t.concat(o);return r?a:a.concat(Zs(os(o)))}function gc(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function r$(n,t){var e=Di(n,!1,t==="fixed");return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function MN(n,t,e){return t===Fg?gc(Aw(n,e)):Ei(t)?r$(t,e):gc(yw(bn(n)))}function s$(n){var t=Zs(os(n)),e=["absolute","fixed"].indexOf(Bn(n).position)>=0,i=e&&ln(n)?Zi(n):n;return Ei(i)?t.filter(function(r){return Ei(r)&&zd(r,i)&&pn(r)!=="body"}):[]}function vw(n,t,e,i){var r=t==="clippingParents"?s$(n):[].concat(t),s=[].concat(r,[e]),o=s[0],a=s.reduce(function(l,c){var u=MN(n,c,i);return l.top=Xi(u.top,l.top),l.right=la(u.right,l.right),l.bottom=la(u.bottom,l.bottom),l.left=Xi(u.left,l.left),l},MN(n,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Kd(n){var t=n.reference,e=n.element,i=n.placement,r=i?fn(i):null,s=i?Mi(i):null,o=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,l;switch(r){case tn:l={x:o,y:t.y-e.height};break;case wn:l={x:o,y:t.y+t.height};break;case hn:l={x:t.x+t.width,y:a};break;case an:l={x:t.x-e.width,y:a};break;default:l={x:t.x,y:t.y}}var c=r?ua(r):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case rs:l[c]=l[c]-(t[u]/2-e[u]/2);break;case aa:l[c]=l[c]+(t[u]/2-e[u]/2);break;default:}}return l}function Qs(n,t){t===void 0&&(t={});var e=t,i=e.placement,r=i===void 0?n.placement:i,s=e.strategy,o=s===void 0?n.strategy:s,a=e.boundary,l=a===void 0?yN:a,c=e.rootBoundary,u=c===void 0?Fg:c,d=e.elementContext,h=d===void 0?dc:d,p=e.altBoundary,g=p===void 0?!1:p,A=e.padding,y=A===void 0?0:A,b=Yd(typeof y!="number"?y:Gd(y,Xs)),x=h===dc?vN:dc,P=n.rects.popper,T=n.elements[g?x:h],k=vw(Ei(T)?T:T.contextElement||bn(n.elements.popper),l,u,o),C=Di(n.elements.reference),M=Kd({reference:C,element:P,strategy:"absolute",placement:r}),O=gc(Object.assign({},P,M)),R=h===dc?O:C,q={top:k.top-R.top+b.top,bottom:R.bottom-k.bottom+b.bottom,left:k.left-R.left+b.left,right:R.right-k.right+b.right},H=n.modifiersData.offset;if(h===dc&&H){var Z=H[r];Object.keys(q).forEach(function(ne){var ce=[hn,wn].indexOf(ne)>=0?1:-1,G=[tn,wn].indexOf(ne)>=0?"y":"x";q[ne]+=Z[G]*ce})}return q}function ww(n,t){t===void 0&&(t={});var e=t,i=e.placement,r=e.boundary,s=e.rootBoundary,o=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,c=l===void 0?Lg:l,u=Mi(i),d=u?a?gw:gw.filter(function(g){return Mi(g)===u}):Xs,h=d.filter(function(g){return c.indexOf(g)>=0});h.length===0&&(h=d);var p=h.reduce(function(g,A){return g[A]=Qs(n,{placement:A,boundary:r,rootBoundary:s,padding:o})[fn(A)],g},{});return Object.keys(p).sort(function(g,A){return p[g]-p[A]})}function o$(n){if(fn(n)===Rg)return[];var t=fc(n);return[Bg(n),t,Bg(t)]}function a$(n){var t=n.state,e=n.options,i=n.name;if(!t.modifiersData[i]._skip){for(var r=e.mainAxis,s=r===void 0?!0:r,o=e.altAxis,a=o===void 0?!0:o,l=e.fallbackPlacements,c=e.padding,u=e.boundary,d=e.rootBoundary,h=e.altBoundary,p=e.flipVariations,g=p===void 0?!0:p,A=e.allowedAutoPlacements,y=t.options.placement,b=fn(y),x=b===y,P=l||(x||!g?[fc(y)]:o$(y)),T=[y].concat(P).reduce(function(we,Be){return we.concat(fn(Be)===Rg?ww(t,{placement:Be,boundary:u,rootBoundary:d,padding:c,flipVariations:g,allowedAutoPlacements:A}):Be)},[]),k=t.rects.reference,C=t.rects.popper,M=new Map,O=!0,R=T[0],q=0;q<T.length;q++){var H=T[q],Z=fn(H),ne=Mi(H)===rs,ce=[tn,wn].indexOf(Z)>=0,G=ce?"width":"height",$=Qs(t,{placement:H,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),ee=ce?ne?hn:an:ne?wn:tn;k[G]>C[G]&&(ee=fc(ee));var ye=fc(ee),de=[];if(s&&de.push($[Z]<=0),a&&de.push($[ee]<=0,$[ye]<=0),de.every(function(we){return we})){R=H,O=!1;break}M.set(H,de)}if(O)for(var ge=g?3:1,ie=function(Be){var Ce=T.find(function(qe){var He=M.get(qe);if(He)return He.slice(0,Be).every(function(Ae){return Ae})});if(Ce)return R=Ce,"break"},ue=ge;ue>0;ue--){var me=ie(ue);if(me==="break")break}t.placement!==R&&(t.modifiersData[i]._skip=!0,t.placement=R,t.reset=!0)}}var bw={name:"flip",enabled:!0,phase:"main",fn:a$,requiresIfExists:["offset"],data:{_skip:!1}};function l$(n,t,e){var i=fn(n),r=[an,tn].indexOf(i)>=0?-1:1,s=typeof e=="function"?e(Object.assign({},t,{placement:n})):e,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[an,hn].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function c$(n){var t=n.state,e=n.options,i=n.name,r=e.offset,s=r===void 0?[0,0]:r,o=Lg.reduce(function(u,d){return u[d]=l$(d,t.rects,s),u},{}),a=o[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=o}var Sw={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:c$};function u$(n){var t=n.state,e=n.name;t.modifiersData[e]=Kd({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var TN={name:"popperOffsets",enabled:!0,phase:"read",fn:u$,data:{}};function Cw(n){return n==="x"?"y":"x"}function d$(n){var t=n.state,e=n.options,i=n.name,r=e.mainAxis,s=r===void 0?!0:r,o=e.altAxis,a=o===void 0?!1:o,l=e.boundary,c=e.rootBoundary,u=e.altBoundary,d=e.padding,h=e.tether,p=h===void 0?!0:h,g=e.tetherOffset,A=g===void 0?0:g,y=Qs(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),b=fn(t.placement),x=Mi(t.placement),P=!x,T=ua(b),k=Cw(T),C=t.modifiersData.popperOffsets,M=t.rects.reference,O=t.rects.popper,R=typeof A=="function"?A(Object.assign({},t.rects,{placement:t.placement})):A,q=typeof R=="number"?{mainAxis:R,altAxis:R}:Object.assign({mainAxis:0,altAxis:0},R),H=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Z={x:0,y:0};if(C){if(s){var ne,ce=T==="y"?tn:an,G=T==="y"?wn:hn,$=T==="y"?"height":"width",ee=C[T],ye=ee+y[ce],de=ee-y[G],ge=p?-O[$]/2:0,ie=x===rs?M[$]:O[$],ue=x===rs?-O[$]:-M[$],me=t.elements.arrow,we=p&&me?ca(me):{width:0,height:0},Be=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Hd(),Ce=Be[ce],qe=Be[G],He=da(0,M[$],we[$]),Ae=P?M[$]/2-ge-He-Ce-q.mainAxis:ie-He-Ce-q.mainAxis,at=P?-M[$]/2+ge+He+qe+q.mainAxis:ue+He+qe+q.mainAxis,Me=t.elements.arrow&&Zi(t.elements.arrow),je=Me?T==="y"?Me.clientTop||0:Me.clientLeft||0:0,et=(ne=H?.[T])!=null?ne:0,De=ee+Ae-et-je,ke=ee+at-et,xe=da(p?la(ye,De):ye,ee,p?Xi(de,ke):de);C[T]=xe,Z[T]=xe-ee}if(a){var ze,Pe=T==="x"?tn:an,$t=T==="x"?wn:hn,Ft=C[k],B=k==="y"?"height":"width",S=Ft+y[Pe],I=Ft-y[$t],N=[tn,an].indexOf(b)!==-1,L=(ze=H?.[k])!=null?ze:0,Y=N?S:Ft-M[B]-O[B]-L+q.altAxis,X=N?Ft+M[B]+O[B]-L-q.altAxis:I,pe=p&&N?CN(Y,Ft,X):da(p?Y:S,Ft,p?X:I);C[k]=pe,Z[k]=pe-Ft}t.modifiersData[i]=Z}}var xw={name:"preventOverflow",enabled:!0,phase:"main",fn:d$,requiresIfExists:["offset"]};function Ew(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function Dw(n){return n===Bt(n)||!ln(n)?ha(n):Ew(n)}function h$(n){var t=n.getBoundingClientRect(),e=ss(t.width)/n.offsetWidth||1,i=ss(t.height)/n.offsetHeight||1;return e!==1||i!==1}function Mw(n,t,e){e===void 0&&(e=!1);var i=ln(t),r=ln(t)&&h$(t),s=bn(t),o=Di(n,r,e),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!e)&&((pn(t)!=="body"||fa(s))&&(a=Dw(t)),ln(t)?(l=Di(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=pa(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function p$(n){var t=new Map,e=new Set,i=[];n.forEach(function(s){t.set(s.name,s)});function r(s){e.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var l=t.get(a);l&&r(l)}}),i.push(s)}return n.forEach(function(s){e.has(s.name)||r(s)}),i}function Tw(n){var t=p$(n);return wN.reduce(function(e,i){return e.concat(t.filter(function(r){return r.phase===i}))},[])}function Iw(n){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(n())})})),t}}function kw(n){var t=n.reduce(function(e,i){var r=e[i.name];return e[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,e},{});return Object.keys(t).map(function(e){return t[e]})}var IN={placement:"bottom",modifiers:[],strategy:"absolute"};function kN(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function PN(n){n===void 0&&(n={});var t=n,e=t.defaultModifiers,i=e===void 0?[]:e,r=t.defaultOptions,s=r===void 0?IN:r;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},IN,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,p={state:u,setOptions:function(b){var x=typeof b=="function"?b(u.options):b;A(),u.options=Object.assign({},s,u.options,x),u.scrollParents={reference:Ei(a)?Zs(a):a.contextElement?Zs(a.contextElement):[],popper:Zs(l)};var P=Tw(kw([].concat(i,u.options.modifiers)));return u.orderedModifiers=P.filter(function(T){return T.enabled}),g(),p.update()},forceUpdate:function(){if(!h){var b=u.elements,x=b.reference,P=b.popper;if(kN(x,P)){u.rects={reference:Mw(x,Zi(P),u.options.strategy==="fixed"),popper:ca(P)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(q){return u.modifiersData[q.name]=Object.assign({},q.data)});for(var T=0;T<u.orderedModifiers.length;T++){if(u.reset===!0){u.reset=!1,T=-1;continue}var k=u.orderedModifiers[T],C=k.fn,M=k.options,O=M===void 0?{}:M,R=k.name;typeof C=="function"&&(u=C({state:u,options:O,name:R,instance:p})||u)}}}},update:Iw(function(){return new Promise(function(y){p.forceUpdate(),y(u)})}),destroy:function(){A(),h=!0}};if(!kN(a,l))return p;p.setOptions(c).then(function(y){!h&&c.onFirstUpdate&&c.onFirstUpdate(y)});function g(){u.orderedModifiers.forEach(function(y){var b=y.name,x=y.options,P=x===void 0?{}:x,T=y.effect;if(typeof T=="function"){var k=T({state:u,name:b,instance:p,options:P}),C=function(){};d.push(k||C)}})}function A(){d.forEach(function(y){return y()}),d=[]}return p}}var f$=[DN,TN,EN,bN],Pw=PN({defaultModifiers:f$});var FN=["*"];function g$(n,t){if(n&1){let e=fe();m(0,"button",1),j("click",function(){E(e);let r=F();return D(r.close())}),_()}}function m$(n,t){if(n&1&&w(0),n&2){let e=F(2);Q(e.title)}}function _$(n,t){}function A$(n,t){if(n&1&&(m(0,"h3",2),te(1,m$,1,1,"ng-template",null,0,Af)(3,_$,0,0,"ng-template",4),_()),n&2){let e=$n(2),i=F();v(3),V("ngTemplateOutlet",i.isTitleTemplate()?i.title:e)("ngTemplateOutletContext",i.context)}}var LN={animation:!0,transitionTimerDelayMs:5},VN=(()=>{class n{constructor(){this.animation=LN.animation}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function y$(n){let{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n),i=parseFloat(t),r=parseFloat(e);return(i+r)*1e3}function v$(n){return typeof n=="string"}function w$(n,t){return!t||typeof n.closest>"u"?null:n.closest(t)}function b$(n){return t=>new Je(e=>{let i=o=>n.run(()=>e.next(o)),r=o=>n.run(()=>e.error(o)),s=()=>n.run(()=>e.complete());return t.subscribe({next:i,error:r,complete:s})})}var S$=()=>{},{transitionTimerDelayMs:C$}=LN,jg=new Map,Nw=(n,t,e,i)=>{let r=i.context||{},s=jg.get(t);if(s)switch(i.runningTransition){case"continue":return xn;case"stop":n.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),jg.delete(t)}let o=e(t,i.animation,r)||S$;if(!i.animation||window.getComputedStyle(t).transitionProperty==="none")return n.run(()=>o()),Ie(void 0).pipe(b$(n));let a=new ct,l=new ct,c=a.pipe(S_(!0));jg.set(t,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});let u=y$(t);return n.runOutsideAngular(()=>{let d=fs(t,"transitionend").pipe(nr(c),_n(({target:p})=>p===t)),h=_o(u+C$).pipe(nr(c));up(h,d,l).pipe(nr(c)).subscribe(()=>{jg.delete(t),n.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};var x$=(()=>{class n{constructor(){this._ngbConfig=se(VN),this.dismissible=!0,this.type="warning"}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),E$=({classList:n})=>{n.remove("show")},BN=(()=>{class n{constructor(){this._config=se(x$),this._elementRef=se(An),this._zone=se(Mt),this.animation=this._config.animation,this.dismissible=this._config.dismissible,this.type=this._config.type,this.closed=new Nt}close(){let e=Nw(this._zone,this._elementRef.nativeElement,E$,{animation:this.animation,runningTransition:"continue"});return e.subscribe(()=>this.closed.emit()),e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=qi({type:n,selectors:[["ngb-alert"]],hostAttrs:["role","alert"],hostVars:6,hostBindings:function(i,r){i&2&&(Py("alert show"+(r.type?" alert-"+r.type:"")),gl("fade",r.animation)("alert-dismissible",r.dismissible))},inputs:{animation:"animation",dismissible:"dismissible",type:"type"},outputs:{closed:"closed"},exportAs:["ngbAlert"],ngContentSelectors:FN,decls:2,vars:1,consts:()=>{let e;return e=$localize`:@@ngb.alert.close:Close`,[["type","button","aria-label",e,1,"btn-close"],["type","button","aria-label",e,1,"btn-close",3,"click"]]},template:function(i,r){i&1&&(Ry(),Fy(0),te(1,g$,1,0,"button",0)),i&2&&(v(),Ny(r.dismissible?1:-1))},styles:[`ngb-alert{display:block}
`],encapsulation:2,changeDetection:0})}}return n})(),qN=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ji({type:n})}static{this.\u0275inj=Fi({})}}return n})();var Wg=(n,t)=>t?t.some(e=>e.contains(n)):!1,NN=(n,t)=>!t||w$(n,t)!=null,D$=(()=>{let n=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,t=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(n()||t()):!1})(),M$=n=>D$?()=>setTimeout(()=>n(),100):n;function T$(n,t,e,i,r,s,o,a){e&&n.runOutsideAngular(M$(()=>{let l=h=>{let p=h.target;return h.button===2||Wg(p,o)?!1:e==="inside"?Wg(p,s)&&NN(p,a):e==="outside"?!Wg(p,s):NN(p,a)||!Wg(p,s)},c=fs(t,"keydown").pipe(nr(r),_n(h=>h.key==="Escape"),Jt(h=>h.preventDefault())),u=fs(t,"mousedown").pipe(We(l),nr(r)),d=fs(t,"mouseup").pipe(E_(u),_n(([h,p])=>p),b_(0),nr(r));up([c.pipe(We(h=>0)),d.pipe(We(h=>1))]).subscribe(h=>n.run(()=>i(h)))}))}var Kbe=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");var I$=(()=>{class n{constructor(){this._element=se(Kt).documentElement}isRTL(){return(this._element.getAttribute("dir")||"").toLowerCase()==="rtl"}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),k$=/\s+/,P$=/  +/gi,N$={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]};function O$(n,t){let[e,i]=N$[n];return t&&i||e}var R$=/^left/,F$=/^right/,L$=/^start/,V$=/^end/;function B$(n,t){let[e,i]=t.split("-"),r=e.replace(R$,"start").replace(F$,"end"),s=[r];if(i){let o=i;(e==="left"||e==="right")&&(o=o.replace(L$,"top").replace(V$,"bottom")),s.push(`${r}-${o}`)}return n&&(s=s.map(o=>`${n}-${o}`)),s.join(" ")}function ON({placement:n,baseClass:t},e){let i=Array.isArray(n)?n:n.split(k$),r=["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"],s=i.findIndex(c=>c==="auto");s>=0&&r.forEach(function(c){i.find(u=>u.search("^"+c)!==-1)==null&&i.splice(s++,1,c)});let o=i.map(c=>O$(c,e.isRTL()));return{placement:o.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!t,phase:"write",fn({state:c}){let u=new RegExp(t+"(-[a-z]+)*","gi"),d=c.elements.popper,h=c.placement,p=d.className;p=p.replace(u,""),p+=` ${B$(t,h)}`,p=p.trim().replace(P$," "),d.className=p}},bw,xw,_w,{enabled:!0,name:"flip",options:{fallbackPlacements:o}}]}}function RN(n){return n}function q$(){let n=se(I$),t=null;return{createPopper(e){if(!t){let r=(e.updatePopperOptions||RN)(ON(e,n));t=Pw(e.hostElement,e.targetElement,r)}},update(){t&&t.update()},setOptions(e){if(t){let r=(e.updatePopperOptions||RN)(ON(e,n));t.setOptions(r)}},destroy(){t&&(t.destroy(),t=null)}}}function j$(n){return t=>(t.modifiers.push(Sw,{name:"offset",options:{offset:()=>n}}),t)}var $be=new Date(1882,10,12),Xbe=new Date(2174,10,25);var Zbe=1e3*60*60*24;var Rw=1080,W$=24*Rw,U$=12*Rw+793,Qbe=29*W$+U$,Jbe=11*Rw+204;var $d=class{constructor(t,e,i){this.nodes=t,this.viewRef=e,this.componentRef=i}},Ow=class{constructor(t){this._componentType=t,this._windowRef=null,this._contentRef=null,this._document=se(Kt),this._applicationRef=se(Wr),this._injector=se(Rn),this._viewContainerRef=se(Bi),this._ngZone=se(Mt)}open(t,e,i=!1){this._windowRef||(this._contentRef=this._getContentRef(t,e),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));let{nativeElement:r}=this._windowRef.location,s=new ct;rf({mixedReadWrite:()=>{s.next(),s.complete()}},{injector:this._injector});let o=s.pipe(Pt(()=>Nw(this._ngZone,r,({classList:a})=>a.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:o}}close(t=!1){return this._windowRef?Nw(this._ngZone,this._windowRef.location.nativeElement,({classList:e})=>e.remove("show"),{animation:t,runningTransition:"stop"}).pipe(Jt(()=>{this._windowRef?.destroy(),this._contentRef?.viewRef?.destroy(),this._windowRef=null,this._contentRef=null})):Ie(void 0)}_getContentRef(t,e){if(t)if(t instanceof cr){let i=t.createEmbeddedView(e);return this._applicationRef.attachView(i),new $d([i.rootNodes],i)}else return new $d([[this._document.createTextNode(`${t}`)]]);else return new $d([])}};var z$={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]};function H$(n){let t=(n||"").trim();if(t.length===0)return[];let e=t.split(/\s+/).map(r=>r.split(":")).map(r=>z$[r[0]]||r),i=e.filter(r=>r.includes("manual"));if(i.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(i.length===1&&e.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i.length?[]:e}function Y$(n,t,e,i,r,s=0,o=0){let a=H$(t);if(a.length===0)return()=>{};let l=new Set,c=[],u;function d(p,g){n.addEventListener(p,g),c.push(()=>n.removeEventListener(p,g))}function h(p,g){clearTimeout(u),g>0?u=setTimeout(p,g):p()}for(let[p,g]of a)g?(d(p,()=>{l.add(p),h(()=>l.size>0&&i(),s)}),d(g,()=>{l.delete(p),h(()=>l.size===0&&r(),o)})):d(p,()=>e()?h(r,o):h(i,s));return()=>c.forEach(p=>p())}var G$=(()=>{class n{constructor(){this._ngbConfig=se(VN),this.autoClose=!0,this.placement="auto",this.popperOptions=e=>e,this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),K$=0,$$=(()=>{class n{isTitleTemplate(){return this.title instanceof cr}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=qi({type:n,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip",2,"position","absolute"],hostVars:5,hostBindings:function(i,r){i&2&&(Oy("id",r.id),Py("popover"+(r.popoverClass?" "+r.popoverClass:"")),gl("fade",r.animation))},inputs:{animation:"animation",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:FN,decls:4,vars:1,consts:[["simpleTitle",""],["data-popper-arrow","",1,"popover-arrow"],[1,"popover-header"],[1,"popover-body"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,r){i&1&&(Ry(),Ze(0,"div",1),te(1,A$,4,2,"h3",2),m(2,"div",3),Fy(3),_()),i&2&&(v(),Ny(r.title?1:-1))},dependencies:[Gy],encapsulation:2,changeDetection:0})}}return n})(),jN=(()=>{class n{constructor(){this._config=se(G$),this.animation=this._config.animation,this.autoClose=this._config.autoClose,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.triggers=this._config.triggers,this.container=this._config.container,this.disablePopover=this._config.disablePopover,this.popoverClass=this._config.popoverClass,this.openDelay=this._config.openDelay,this.closeDelay=this._config.closeDelay,this.shown=new Nt,this.hidden=new Nt,this._nativeElement=se(An).nativeElement,this._ngZone=se(Mt),this._document=se(Kt),this._changeDetector=se(Ss),this._injector=se(Rn),this._ngbPopoverWindowId=`ngb-popover-${K$++}`,this._popupService=new Ow($$),this._windowRef=null,this._positioning=q$()}open(e){if(!this._windowRef&&!this._isDisabled()){let{windowRef:i,transition$:r}=this._popupService.open(this.ngbPopover,e??this.popoverContext,this.animation);this._windowRef=i,this._windowRef.setInput("animation",this.animation),this._windowRef.setInput("title",this.popoverTitle),this._windowRef.setInput("context",e??this.popoverContext),this._windowRef.setInput("popoverClass",this.popoverClass),this._windowRef.setInput("id",this._ngbPopoverWindowId),this._getPositionTargetElement().setAttribute("aria-describedby",this._ngbPopoverWindowId),this.container==="body"&&this._document.body.appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._getPositionTargetElement(),targetElement:this._windowRef.location.nativeElement,placement:this.placement,baseClass:"bs-popover",updatePopperOptions:s=>this.popperOptions(j$([0,8])(s))}),Promise.resolve().then(()=>{this._positioning.update()}),this._afterRenderRef=cy({mixedReadWrite:()=>{this._positioning.update()}},{injector:this._injector})}),T$(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),r.subscribe(()=>this.shown.emit())}}close(e=this.animation){this._windowRef&&(this._getPositionTargetElement().removeAttribute("aria-describedby"),this._popupService.close(e).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this._afterRenderRef?.destroy(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return this._windowRef!=null}ngOnInit(){this._unregisterListenersFn=Y$(this._nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:e,popoverTitle:i,disablePopover:r,popoverClass:s}){s&&this.isOpen()&&this._windowRef.setInput("popoverClass",s.currentValue),(e||i||r)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(!1),this._unregisterListenersFn?.()}_isDisabled(){return this.disablePopover?!0:!this.ngbPopover&&!this.popoverTitle}_getPositionTargetElement(){return(v$(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget)||this._nativeElement}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Tt({type:n,selectors:[["","ngbPopover",""]],inputs:{animation:"animation",autoClose:"autoClose",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle",placement:"placement",popperOptions:"popperOptions",triggers:"triggers",positionTarget:"positionTarget",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",popoverContext:"popoverContext",openDelay:"openDelay",closeDelay:"closeDelay"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[Li]})}}return n})(),WN=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ji({type:n})}static{this.\u0275inj=Fi({})}}return n})();var e2e=new Se("live announcer delay",{providedIn:"root",factory:()=>100});var Js=(()=>{class n{http;baseUrl="https://api.fyers.in/api/v1/";dataUrl="https://data.fyers.in/data-api/v1/";testUrl="https://jsonplaceholder.typicode.com/posts";constructor(e){this.http=e}auth(){let e={headers:new Fe({"Content-Type":"application/json"}),responseType:"json"},i=this.baseUrl+"auth",r={app_id:f.fyersAppId,secret_key:f.fyersSecretId};return this.http.post(i,r,e)}getTokenUrl(e,i){return this.baseUrl+"genrateToken?authorization_code="+e+"&appId="+i}getFunds(e){let i={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"},r=this.baseUrl+"funds";return this.http.get(r,i)}getPositions(e){let i={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"},r=this.baseUrl+"positions";return this.http.get(r,i)}getOrders(e){let i={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"},r=this.baseUrl+"orders";return this.http.get(r,i)}place_order(e,i){let r={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"},s=this.baseUrl+"orders";return this.http.post(s,i,r)}static \u0275fac=function(i){return new(i||n)(oe(It))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var HN=ka(Fw());var Lw=ka(Fw());var zg=(()=>{class n{http;mapService;constructor(e,i){this.http=e,this.mapService=i}handleSocketMessage(e){console.log("AliceblueService message",e),this.parseSocketMessageNew(e)}parseSocketMessageNew(e){let i=JSON.parse(e),r=new Od;r.token=Number(i.tk),r.exchange_code=i.e,i.lp&&(r.ltp=Number(i.lp)),i.atp&&(r.atp=Number(i.ap)),i.v&&(r.volume=Number(i.v)),i.o&&(r.open=Number(i.o)),i.h&&(r.high=Number(i.h)),i.l&&(r.low=Number(i.l)),i.c&&(r.close=Number(i.c)),r.ltp&&this.mapService.updateMaps_aliceblue(r)}parseSocketMessage(e){let i=new Uint8Array(e);if(i instanceof Uint8Array){let r=i[0];r===xr.MARKETDATA?this.parseMarketData(i):r===xr.COMPACT_MARKETDATA||r===xr.SNAPQUOTE||r===xr.FULL_SNAPQUOTE||r===xr.DPR||(r===xr.OI?console.log("***** RECEIVED OI"):r===xr.MARKET_STATUS||xr.EXCHANGE_MESSAGES)}else console.error("Error while converting binary data to byte array")}parseMarketData(e){let i=new Od;i.exchange_code=e[1];let r=100;i.exchange_code===3&&(r=1e7),i.token=this.byteArrayToNumber(e.subarray(2,6),24),i.ltp=this.byteArrayToNumber(e.subarray(6,10),24)/r,i.ltt_unix=this.byteArrayToNumber(e.subarray(10,14),24),i.last_traded_qty=this.byteArrayToNumber(e.subarray(14,18),24),i.volume=this.byteArrayToNumber(e.subarray(18,22),24),i.best_bid=this.byteArrayToNumber(e.subarray(22,26),24)/r,i.best_bid_qty=this.byteArrayToNumber(e.subarray(26,30),24),i.best_ask=this.byteArrayToNumber(e.subarray(30,34),24)/r,i.best_ask_qty=this.byteArrayToNumber(e.subarray(34,38),24),i.total_buy_qty=this.byteArrayToNumber(e.subarray(38,46),56),i.total_sell_qty=this.byteArrayToNumber(e.subarray(46,54),56),i.atp=this.byteArrayToNumber(e.subarray(54,58),24)/r,i.exchange_timestamp=this.byteArrayToNumber(e.subarray(58,62),24),i.open=this.byteArrayToNumber(e.subarray(62,66),24)/r,i.high=this.byteArrayToNumber(e.subarray(66,70),24)/r,i.low=this.byteArrayToNumber(e.subarray(70,74),24)/r,i.close=this.byteArrayToNumber(e.subarray(74,78),24)/r,i.year_high=this.byteArrayToNumber(e.subarray(78,82),24)/r,i.year_low=this.byteArrayToNumber(e.subarray(82,86),24)/r,this.updateMaps(i)}convertPayloadToString(e){return String.fromCharCode.apply(null,e)}byteArrayToNumber(e,i){let r=0,s=0,o=0;for(s=i;s>=0;s-=8)r|=(e[o]&255)<<s,o++;return r}updateMaps(e){let i=f.mastersContract.get(e.token);if(i){let r=i.instru,s=i.strike,o=i.optionType,a=!1,l="",c=new Date(i.expiry);c.setHours(0,0,0,0);let u=f.monthlyExpiryDates;r==="USDINR"&&(u=f.monthlyExpiryDatesUSDINR);for(let p in u)if(u.hasOwnProperty(p)&&c.getTime()===u[p].getTime()){a=!0,l=p;break}let d="";if(a)d=l;else{let p=new Date(i.expiry),g=null;p.getMonth()+1===10?g="O":p.getMonth()+1===11?g="N":p.getMonth()+1===12?g="D":g=p.getMonth()+1,d=""+(p.getFullYear()-2e3)+g+("0"+p.getDate()).slice(-2)}let h=r+d+s+o;console.log("updateMaps strike is",h),h.startsWith("FINNIFTY")&&h.endsWith("FUT")&&(h="FINNIFTY",console.log("finnifty fut update")),this.mapService.setLtp(h,e.ltp),this.mapService.setAtp(h,e.atp),this.mapService.setVolume(h,e.volume)}else{let r="";e.token===26e3?r="NIFTY50":e.token===26009?r="BANKNIFTY":e.token===26037?r="FINNIFTY":e.token===1?r="USDINR":console.error(e.token,"not found in masters"),this.mapService.setLtp(r,e.ltp),this.mapService.setAtp(r,e.atp),this.mapService.setVolume(r,e.volume)}}static \u0275fac=function(i){return new(i||n)(oe(It),oe(Ue))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var eo=(()=>{class n{aliceblueParserService;heartbeatInterval;websocket;access_token;baseUrl="https://ant.aliceblueonline.com";socket_endpoint="wss://ws1.aliceblueonline.com/NorenWS/";user_id="AB033978";constructor(e){this.aliceblueParserService=e}isSocketConnected(){return!!(this.websocket&&this.websocket.OPEN===1)}connect(e){this.access_token=e,this.websocket=new WebSocket(this.socket_endpoint),this.websocket.onopen=()=>{this.handleOnOpen(event)},this.websocket.onmessage=i=>{this.handleOnMessage(i)},this.websocket.onerror=i=>{this.handleOnError(i)},this.websocket.onclose=i=>{this.handleOnClose(i)}}handleOnOpen(e){if(console.log("Opened Web Socket connection"),f.SocketMode==="aliceblue"){let i=JSON.stringify({susertoken:(0,Lw.sha256)((0,Lw.sha256)(f.AliceblueSessionId)),t:"c",actid:this.user_id+"_API",uid:this.user_id+"_API",source:"API"});this.sendMessage(i),setTimeout(()=>{this.sendInitialSubscription(),this.sendHeartbeat()},2e3),setTimeout(()=>{f.websocketEvent$.next("connected")},4e3)}}sendHeartbeat(){this.heartbeatInterval=setInterval(()=>{let e=JSON.stringify({t:"h"});this.sendMessage(e)},5e3)}sendInitialSubscription(){console.log("sending initial subscription");let e=JSON.stringify({k:"NSE|26000#NSE|26009#NSE|26037",t:"t"});this.sendMessage(e)}handleOnMessage(e){console.log("handleOnMessage",e),f.SocketMode==="aliceblue"&&this.aliceblueParserService.handleSocketMessage(e.data)}handleOnError(e){console.log("Error in WS connection",e)}handleOnClose(e){console.log("Closed WS connection",e),clearInterval(this.heartbeatInterval),this.websocket=null,setTimeout(()=>{console.log("Reconnecting websocket"),this.connect(this.access_token)},2e3)}closeSocket(){console.log("Closing WS connection manually"),this.websocket.close(),clearInterval(this.heartbeatInterval),this.websocket=null}sendMessage(e){this.websocket&&this.websocket.OPEN===1?(console.log("Sending message over websocket: "+e),this.websocket.send(e)):console.log("Cannot send the message. Socket is not yet opened or it has been closed - ",e)}static \u0275fac=function(i){return new(i||n)(oe(zg))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var to=(()=>{class n{http;webSocketService;baseUrl="https://ant.aliceblueonline.com/rest/AliceBlueAPIService/api/";constructor(e,i){this.http=e,this.webSocketService=i}getMastersContract(e){let i={responseType:"json"};this.http.get("https://v2api.aliceblueonline.com/restpy/contract_master?exch=NFO",i).subscribe(s=>{console.log("AliceblueService getMastersContract",s),this.parseContractMaster(s)},s=>{console.log("AliceblueService getMastersContract error",s)})}parseContractMaster(e){if(e){f.mastersContract.clear();for(let i in e)e[i]instanceof Array&&e[i].forEach(r=>{let s=new zs;s.token=Number(r.token),s.instru=r.symbol,s.expiry=new Date(r.expiry_date).toDateString(),s.strike=Number(r.strike_price),s.optionType=r.option_type,s.lotSize=Number(r.lot_size),s.exchange=r.exch,s.tradingSymbol=r.trading_symbol,f.mastersContract.set(s.token,s)})}console.log("AliceblueService getMastersContract mastersContract",f.mastersContract),this.getEncKey()}getEncKey(){let e={headers:new Fe({"Content-Type":"application/json"}),responseType:"json"},i=this.baseUrl+"customer/getAPIEncpkey",r={userId:f.AliceblueUserId};this.http.post(i,r,e).subscribe(s=>{console.log("AliceblueService getEncKey res",s),s.stat=="Ok"?(f.AliceblueEncKey=s.encKey,console.log("AliceblueService encKey is",s.encKey),this.getSessionId()):console.log("AliceblueService getEncKey res stat Not OK. Check if you are logged in to Aliceblue web or mobile application.")},s=>{console.log("AliceblueService getEncKey error",s)})}getSessionId(){let e={headers:new Fe({"Content-Type":"application/json"}),responseType:"json"},i=this.baseUrl+"customer/getUserSID",r={userId:f.AliceblueUserId,userData:(0,HN.sha256)(f.AliceblueUserId+f.AliceblueApiKey+f.AliceblueEncKey)};this.http.post(i,r,e).subscribe(s=>{console.log("AliceblueService getSessionId res",s),s.stat=="Ok"?(f.AliceblueSessionId=s.sessionID,console.log("AliceblueService sessionID is",s.sessionID),this.invalidateSocketSess()):console.log("AliceblueService getSessionId res stat Not OK")},s=>{console.log("AliceblueService getSessionId error",s)})}invalidateSocketSess(){let e={headers:new Fe({Authorization:"Bearer "+f.AliceblueUserId+" "+f.AliceblueSessionId,"Content-Type":"application/json"}),responseType:"json"},i=this.baseUrl+"ws/invalidateSocketSess",r={loginType:"API"};this.http.post(i,r,e).subscribe(s=>{console.log("AliceblueService invalidateSocketSess res",s),s.stat=="Ok"?(console.log("AliceblueService invalidateSocketSess is",s.message),this.createSocketSess()):console.log("AliceblueService invalidateSocketSess res stat Not OK")},s=>{console.log("AliceblueService invalidateSocketSess error",s)})}createSocketSess(){let e={headers:new Fe({Authorization:"Bearer "+f.AliceblueUserId+" "+f.AliceblueSessionId,"Content-Type":"application/json"}),responseType:"json"},i=this.baseUrl+"ws/createSocketSess",r={loginType:"API"};this.http.post(i,r,e).subscribe(s=>{console.log("AliceblueService createSocketSess res",s),s.stat=="Ok"?(console.log("AliceblueService createSocketSess is",s.message),this.connectWebsocket(null)):console.log("AliceblueService createSocketSess res stat Not OK")},s=>{console.log("AliceblueService createSocketSess error",s)})}isSocketConnected(){return this.webSocketService.isSocketConnected()}connectWebsocket(e){this.webSocketService.connect(e)}closeWebsocket(){this.webSocketService.closeSocket()}sendSubscriptions(e){let i="";e.forEach(s=>{let o=this.findStrikeInMasters(s);o&&(i+=o.exchange+"|"+o.token+"#")}),i=i.replace(/#\s*$/,"");let r=JSON.stringify({k:i,t:"t"});console.log("sendSubscriptions: "+r),this.webSocketService.sendMessage(r)}findStrikeInMasters(e){let i=null;return f.mastersContract.forEach(r=>{if(e.expiry===r.expiry&&e.instru===r.instru&&e.strike===r.strike&&e.type===r.optionType){i=r;return}}),i}static \u0275fac=function(i){return new(i||n)(oe(It),oe(eo))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wc(n){let t=n.length;for(;--t>=0;)n[t]=0}var X$=0,IO=1,Z$=2,Q$=3,J$=258,ab=29,uh=256,nh=uh+1+ab,Ac=30,lb=19,kO=2*nh+1,ga=15,Vw=16,eX=7,cb=256,PO=16,NO=17,OO=18,Qw=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Qg=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),tX=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),RO=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nX=512,ls=new Array((nh+2)*2);wc(ls);var Jd=new Array(Ac*2);wc(Jd);var ih=new Array(nX);wc(ih);var rh=new Array(J$-Q$+1);wc(rh);var ub=new Array(ab);wc(ub);var Jg=new Array(Ac);wc(Jg);function Bw(n,t,e,i,r){this.static_tree=n,this.extra_bits=t,this.extra_base=e,this.elems=i,this.max_length=r,this.has_stree=n&&n.length}var FO,LO,VO;function qw(n,t){this.dyn_tree=n,this.max_code=0,this.stat_desc=t}var BO=n=>n<256?ih[n]:ih[256+(n>>>7)],sh=(n,t)=>{n.pending_buf[n.pending++]=t&255,n.pending_buf[n.pending++]=t>>>8&255},ti=(n,t,e)=>{n.bi_valid>Vw-e?(n.bi_buf|=t<<n.bi_valid&65535,sh(n,n.bi_buf),n.bi_buf=t>>Vw-n.bi_valid,n.bi_valid+=e-Vw):(n.bi_buf|=t<<n.bi_valid&65535,n.bi_valid+=e)},Dr=(n,t,e)=>{ti(n,e[t*2],e[t*2+1])},qO=(n,t)=>{let e=0;do e|=n&1,n>>>=1,e<<=1;while(--t>0);return e>>>1},iX=n=>{n.bi_valid===16?(sh(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)},rX=(n,t)=>{let e=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length,c,u,d,h,p,g,A=0;for(h=0;h<=ga;h++)n.bl_count[h]=0;for(e[n.heap[n.heap_max]*2+1]=0,c=n.heap_max+1;c<kO;c++)u=n.heap[c],h=e[e[u*2+1]*2+1]+1,h>l&&(h=l,A++),e[u*2+1]=h,!(u>i)&&(n.bl_count[h]++,p=0,u>=a&&(p=o[u-a]),g=e[u*2],n.opt_len+=g*(h+p),s&&(n.static_len+=g*(r[u*2+1]+p)));if(A!==0){do{for(h=l-1;n.bl_count[h]===0;)h--;n.bl_count[h]--,n.bl_count[h+1]+=2,n.bl_count[l]--,A-=2}while(A>0);for(h=l;h!==0;h--)for(u=n.bl_count[h];u!==0;)d=n.heap[--c],!(d>i)&&(e[d*2+1]!==h&&(n.opt_len+=(h-e[d*2+1])*e[d*2],e[d*2+1]=h),u--)}},jO=(n,t,e)=>{let i=new Array(ga+1),r=0,s,o;for(s=1;s<=ga;s++)r=r+e[s-1]<<1,i[s]=r;for(o=0;o<=t;o++){let a=n[o*2+1];a!==0&&(n[o*2]=qO(i[a]++,a))}},sX=()=>{let n,t,e,i,r,s=new Array(ga+1);for(e=0,i=0;i<ab-1;i++)for(ub[i]=e,n=0;n<1<<Qw[i];n++)rh[e++]=i;for(rh[e-1]=i,r=0,i=0;i<16;i++)for(Jg[i]=r,n=0;n<1<<Qg[i];n++)ih[r++]=i;for(r>>=7;i<Ac;i++)for(Jg[i]=r<<7,n=0;n<1<<Qg[i]-7;n++)ih[256+r++]=i;for(t=0;t<=ga;t++)s[t]=0;for(n=0;n<=143;)ls[n*2+1]=8,n++,s[8]++;for(;n<=255;)ls[n*2+1]=9,n++,s[9]++;for(;n<=279;)ls[n*2+1]=7,n++,s[7]++;for(;n<=287;)ls[n*2+1]=8,n++,s[8]++;for(jO(ls,nh+1,s),n=0;n<Ac;n++)Jd[n*2+1]=5,Jd[n*2]=qO(n,5);FO=new Bw(ls,Qw,uh+1,nh,ga),LO=new Bw(Jd,Qg,0,Ac,ga),VO=new Bw(new Array(0),tX,0,lb,eX)},WO=n=>{let t;for(t=0;t<nh;t++)n.dyn_ltree[t*2]=0;for(t=0;t<Ac;t++)n.dyn_dtree[t*2]=0;for(t=0;t<lb;t++)n.bl_tree[t*2]=0;n.dyn_ltree[cb*2]=1,n.opt_len=n.static_len=0,n.sym_next=n.matches=0},UO=n=>{n.bi_valid>8?sh(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},YN=(n,t,e,i)=>{let r=t*2,s=e*2;return n[r]<n[s]||n[r]===n[s]&&i[t]<=i[e]},jw=(n,t,e)=>{let i=n.heap[e],r=e<<1;for(;r<=n.heap_len&&(r<n.heap_len&&YN(t,n.heap[r+1],n.heap[r],n.depth)&&r++,!YN(t,i,n.heap[r],n.depth));)n.heap[e]=n.heap[r],e=r,r<<=1;n.heap[e]=i},GN=(n,t,e)=>{let i,r,s=0,o,a;if(n.sym_next!==0)do i=n.pending_buf[n.sym_buf+s++]&255,i+=(n.pending_buf[n.sym_buf+s++]&255)<<8,r=n.pending_buf[n.sym_buf+s++],i===0?Dr(n,r,t):(o=rh[r],Dr(n,o+uh+1,t),a=Qw[o],a!==0&&(r-=ub[o],ti(n,r,a)),i--,o=BO(i),Dr(n,o,e),a=Qg[o],a!==0&&(i-=Jg[o],ti(n,i,a)));while(s<n.sym_next);Dr(n,cb,t)},Jw=(n,t)=>{let e=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,s=t.stat_desc.elems,o,a,l=-1,c;for(n.heap_len=0,n.heap_max=kO,o=0;o<s;o++)e[o*2]!==0?(n.heap[++n.heap_len]=l=o,n.depth[o]=0):e[o*2+1]=0;for(;n.heap_len<2;)c=n.heap[++n.heap_len]=l<2?++l:0,e[c*2]=1,n.depth[c]=0,n.opt_len--,r&&(n.static_len-=i[c*2+1]);for(t.max_code=l,o=n.heap_len>>1;o>=1;o--)jw(n,e,o);c=s;do o=n.heap[1],n.heap[1]=n.heap[n.heap_len--],jw(n,e,1),a=n.heap[1],n.heap[--n.heap_max]=o,n.heap[--n.heap_max]=a,e[c*2]=e[o*2]+e[a*2],n.depth[c]=(n.depth[o]>=n.depth[a]?n.depth[o]:n.depth[a])+1,e[o*2+1]=e[a*2+1]=c,n.heap[1]=c++,jw(n,e,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],rX(n,t),jO(e,l,n.bl_count)},KN=(n,t,e)=>{let i,r=-1,s,o=t[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),t[(e+1)*2+1]=65535,i=0;i<=e;i++)s=o,o=t[(i+1)*2+1],!(++a<l&&s===o)&&(a<c?n.bl_tree[s*2]+=a:s!==0?(s!==r&&n.bl_tree[s*2]++,n.bl_tree[PO*2]++):a<=10?n.bl_tree[NO*2]++:n.bl_tree[OO*2]++,a=0,r=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))},$N=(n,t,e)=>{let i,r=-1,s,o=t[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),i=0;i<=e;i++)if(s=o,o=t[(i+1)*2+1],!(++a<l&&s===o)){if(a<c)do Dr(n,s,n.bl_tree);while(--a!==0);else s!==0?(s!==r&&(Dr(n,s,n.bl_tree),a--),Dr(n,PO,n.bl_tree),ti(n,a-3,2)):a<=10?(Dr(n,NO,n.bl_tree),ti(n,a-3,3)):(Dr(n,OO,n.bl_tree),ti(n,a-11,7));a=0,r=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}},oX=n=>{let t;for(KN(n,n.dyn_ltree,n.l_desc.max_code),KN(n,n.dyn_dtree,n.d_desc.max_code),Jw(n,n.bl_desc),t=lb-1;t>=3&&n.bl_tree[RO[t]*2+1]===0;t--);return n.opt_len+=3*(t+1)+5+5+4,t},aX=(n,t,e,i)=>{let r;for(ti(n,t-257,5),ti(n,e-1,5),ti(n,i-4,4),r=0;r<i;r++)ti(n,n.bl_tree[RO[r]*2+1],3);$N(n,n.dyn_ltree,t-1),$N(n,n.dyn_dtree,e-1)},lX=n=>{let t=4093624447,e;for(e=0;e<=31;e++,t>>>=1)if(t&1&&n.dyn_ltree[e*2]!==0)return 0;if(n.dyn_ltree[9*2]!==0||n.dyn_ltree[10*2]!==0||n.dyn_ltree[13*2]!==0)return 1;for(e=32;e<uh;e++)if(n.dyn_ltree[e*2]!==0)return 1;return 0},XN=!1,cX=n=>{XN||(sX(),XN=!0),n.l_desc=new qw(n.dyn_ltree,FO),n.d_desc=new qw(n.dyn_dtree,LO),n.bl_desc=new qw(n.bl_tree,VO),n.bi_buf=0,n.bi_valid=0,WO(n)},zO=(n,t,e,i)=>{ti(n,(X$<<1)+(i?1:0),3),UO(n),sh(n,e),sh(n,~e),e&&n.pending_buf.set(n.window.subarray(t,t+e),n.pending),n.pending+=e},uX=n=>{ti(n,IO<<1,3),Dr(n,cb,ls),iX(n)},dX=(n,t,e,i)=>{let r,s,o=0;n.level>0?(n.strm.data_type===2&&(n.strm.data_type=lX(n)),Jw(n,n.l_desc),Jw(n,n.d_desc),o=oX(n),r=n.opt_len+3+7>>>3,s=n.static_len+3+7>>>3,s<=r&&(r=s)):r=s=e+5,e+4<=r&&t!==-1?zO(n,t,e,i):n.strategy===4||s===r?(ti(n,(IO<<1)+(i?1:0),3),GN(n,ls,Jd)):(ti(n,(Z$<<1)+(i?1:0),3),aX(n,n.l_desc.max_code+1,n.d_desc.max_code+1,o+1),GN(n,n.dyn_ltree,n.dyn_dtree)),WO(n),i&&UO(n)},hX=(n,t,e)=>(n.pending_buf[n.sym_buf+n.sym_next++]=t,n.pending_buf[n.sym_buf+n.sym_next++]=t>>8,n.pending_buf[n.sym_buf+n.sym_next++]=e,t===0?n.dyn_ltree[e*2]++:(n.matches++,t--,n.dyn_ltree[(rh[e]+uh+1)*2]++,n.dyn_dtree[BO(t)*2]++),n.sym_next===n.sym_end),pX=cX,fX=zO,gX=dX,mX=hX,_X=uX,AX={_tr_init:pX,_tr_stored_block:fX,_tr_flush_block:gX,_tr_tally:mX,_tr_align:_X},yX=(n,t,e,i)=>{let r=n&65535|0,s=n>>>16&65535|0,o=0;for(;e!==0;){o=e>2e3?2e3:e,e-=o;do r=r+t[i++]|0,s=s+r|0;while(--o);r%=65521,s%=65521}return r|s<<16|0},oh=yX,vX=()=>{let n,t=[];for(var e=0;e<256;e++){n=e;for(var i=0;i<8;i++)n=n&1?3988292384^n>>>1:n>>>1;t[e]=n}return t},wX=new Uint32Array(vX()),bX=(n,t,e,i)=>{let r=wX,s=i+e;n^=-1;for(let o=i;o<s;o++)n=n>>>8^r[(n^t[o])&255];return n^-1},gn=bX,Aa={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},bc={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:SX,_tr_stored_block:eb,_tr_flush_block:CX,_tr_tally:ro,_tr_align:xX}=AX,{Z_NO_FLUSH:so,Z_PARTIAL_FLUSH:EX,Z_FULL_FLUSH:DX,Z_FINISH:Ti,Z_BLOCK:ZN,Z_OK:Sn,Z_STREAM_END:QN,Z_STREAM_ERROR:Mr,Z_DATA_ERROR:MX,Z_BUF_ERROR:Ww,Z_DEFAULT_COMPRESSION:TX,Z_FILTERED:IX,Z_HUFFMAN_ONLY:Gg,Z_RLE:kX,Z_FIXED:PX,Z_DEFAULT_STRATEGY:NX,Z_UNKNOWN:OX,Z_DEFLATED:nm}=bc,RX=9,FX=15,LX=8,VX=29,BX=256,tb=BX+1+VX,qX=30,jX=19,WX=2*tb+1,UX=15,ut=3,io=258,Tr=io+ut+1,zX=32,yc=42,db=57,nb=69,ib=73,rb=91,sb=103,ma=113,Zd=666,qn=1,Sc=2,ya=3,Cc=4,HX=3,_a=(n,t)=>(n.msg=Aa[t],t),JN=n=>n*2-(n>4?9:0),no=n=>{let t=n.length;for(;--t>=0;)n[t]=0},YX=n=>{let t,e,i,r=n.w_size;t=n.hash_size,i=t;do e=n.head[--i],n.head[i]=e>=r?e-r:0;while(--t);t=r,i=t;do e=n.prev[--i],n.prev[i]=e>=r?e-r:0;while(--t)},GX=(n,t,e)=>(t<<n.hash_shift^e)&n.hash_mask,oo=GX,hi=n=>{let t=n.state,e=t.pending;e>n.avail_out&&(e=n.avail_out),e!==0&&(n.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+e),n.next_out),n.next_out+=e,t.pending_out+=e,n.total_out+=e,n.avail_out-=e,t.pending-=e,t.pending===0&&(t.pending_out=0))},pi=(n,t)=>{CX(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,t),n.block_start=n.strstart,hi(n.strm)},_t=(n,t)=>{n.pending_buf[n.pending++]=t},Xd=(n,t)=>{n.pending_buf[n.pending++]=t>>>8&255,n.pending_buf[n.pending++]=t&255},ob=(n,t,e,i)=>{let r=n.avail_in;return r>i&&(r=i),r===0?0:(n.avail_in-=r,t.set(n.input.subarray(n.next_in,n.next_in+r),e),n.state.wrap===1?n.adler=oh(n.adler,t,r,e):n.state.wrap===2&&(n.adler=gn(n.adler,t,r,e)),n.next_in+=r,n.total_in+=r,r)},HO=(n,t)=>{let e=n.max_chain_length,i=n.strstart,r,s,o=n.prev_length,a=n.nice_match,l=n.strstart>n.w_size-Tr?n.strstart-(n.w_size-Tr):0,c=n.window,u=n.w_mask,d=n.prev,h=n.strstart+io,p=c[i+o-1],g=c[i+o];n.prev_length>=n.good_match&&(e>>=2),a>n.lookahead&&(a=n.lookahead);do if(r=t,!(c[r+o]!==g||c[r+o-1]!==p||c[r]!==c[i]||c[++r]!==c[i+1])){i+=2,r++;do;while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<h);if(s=io-(h-i),i=h-io,s>o){if(n.match_start=t,o=s,s>=a)break;p=c[i+o-1],g=c[i+o]}}while((t=d[t&u])>l&&--e!==0);return o<=n.lookahead?o:n.lookahead},vc=n=>{let t=n.w_size,e,i,r;do{if(i=n.window_size-n.lookahead-n.strstart,n.strstart>=t+(t-Tr)&&(n.window.set(n.window.subarray(t,t+t-i),0),n.match_start-=t,n.strstart-=t,n.block_start-=t,n.insert>n.strstart&&(n.insert=n.strstart),YX(n),i+=t),n.strm.avail_in===0)break;if(e=ob(n.strm,n.window,n.strstart+n.lookahead,i),n.lookahead+=e,n.lookahead+n.insert>=ut)for(r=n.strstart-n.insert,n.ins_h=n.window[r],n.ins_h=oo(n,n.ins_h,n.window[r+1]);n.insert&&(n.ins_h=oo(n,n.ins_h,n.window[r+ut-1]),n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,n.insert--,!(n.lookahead+n.insert<ut)););}while(n.lookahead<Tr&&n.strm.avail_in!==0)},YO=(n,t)=>{let e=n.pending_buf_size-5>n.w_size?n.w_size:n.pending_buf_size-5,i,r,s,o=0,a=n.strm.avail_in;do{if(i=65535,s=n.bi_valid+42>>3,n.strm.avail_out<s||(s=n.strm.avail_out-s,r=n.strstart-n.block_start,i>r+n.strm.avail_in&&(i=r+n.strm.avail_in),i>s&&(i=s),i<e&&(i===0&&t!==Ti||t===so||i!==r+n.strm.avail_in)))break;o=t===Ti&&i===r+n.strm.avail_in?1:0,eb(n,0,0,o),n.pending_buf[n.pending-4]=i,n.pending_buf[n.pending-3]=i>>8,n.pending_buf[n.pending-2]=~i,n.pending_buf[n.pending-1]=~i>>8,hi(n.strm),r&&(r>i&&(r=i),n.strm.output.set(n.window.subarray(n.block_start,n.block_start+r),n.strm.next_out),n.strm.next_out+=r,n.strm.avail_out-=r,n.strm.total_out+=r,n.block_start+=r,i-=r),i&&(ob(n.strm,n.strm.output,n.strm.next_out,i),n.strm.next_out+=i,n.strm.avail_out-=i,n.strm.total_out+=i)}while(o===0);return a-=n.strm.avail_in,a&&(a>=n.w_size?(n.matches=2,n.window.set(n.strm.input.subarray(n.strm.next_in-n.w_size,n.strm.next_in),0),n.strstart=n.w_size,n.insert=n.strstart):(n.window_size-n.strstart<=a&&(n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,n.insert>n.strstart&&(n.insert=n.strstart)),n.window.set(n.strm.input.subarray(n.strm.next_in-a,n.strm.next_in),n.strstart),n.strstart+=a,n.insert+=a>n.w_size-n.insert?n.w_size-n.insert:a),n.block_start=n.strstart),n.high_water<n.strstart&&(n.high_water=n.strstart),o?Cc:t!==so&&t!==Ti&&n.strm.avail_in===0&&n.strstart===n.block_start?Sc:(s=n.window_size-n.strstart,n.strm.avail_in>s&&n.block_start>=n.w_size&&(n.block_start-=n.w_size,n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,s+=n.w_size,n.insert>n.strstart&&(n.insert=n.strstart)),s>n.strm.avail_in&&(s=n.strm.avail_in),s&&(ob(n.strm,n.window,n.strstart,s),n.strstart+=s,n.insert+=s>n.w_size-n.insert?n.w_size-n.insert:s),n.high_water<n.strstart&&(n.high_water=n.strstart),s=n.bi_valid+42>>3,s=n.pending_buf_size-s>65535?65535:n.pending_buf_size-s,e=s>n.w_size?n.w_size:s,r=n.strstart-n.block_start,(r>=e||(r||t===Ti)&&t!==so&&n.strm.avail_in===0&&r<=s)&&(i=r>s?s:r,o=t===Ti&&n.strm.avail_in===0&&i===r?1:0,eb(n,n.block_start,i,o),n.block_start+=i,hi(n.strm)),o?ya:qn)},Uw=(n,t)=>{let e,i;for(;;){if(n.lookahead<Tr){if(vc(n),n.lookahead<Tr&&t===so)return qn;if(n.lookahead===0)break}if(e=0,n.lookahead>=ut&&(n.ins_h=oo(n,n.ins_h,n.window[n.strstart+ut-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),e!==0&&n.strstart-e<=n.w_size-Tr&&(n.match_length=HO(n,e)),n.match_length>=ut)if(i=ro(n,n.strstart-n.match_start,n.match_length-ut),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=ut){n.match_length--;do n.strstart++,n.ins_h=oo(n,n.ins_h,n.window[n.strstart+ut-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=oo(n,n.ins_h,n.window[n.strstart+1]);else i=ro(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(i&&(pi(n,!1),n.strm.avail_out===0))return qn}return n.insert=n.strstart<ut-1?n.strstart:ut-1,t===Ti?(pi(n,!0),n.strm.avail_out===0?ya:Cc):n.sym_next&&(pi(n,!1),n.strm.avail_out===0)?qn:Sc},mc=(n,t)=>{let e,i,r;for(;;){if(n.lookahead<Tr){if(vc(n),n.lookahead<Tr&&t===so)return qn;if(n.lookahead===0)break}if(e=0,n.lookahead>=ut&&(n.ins_h=oo(n,n.ins_h,n.window[n.strstart+ut-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=ut-1,e!==0&&n.prev_length<n.max_lazy_match&&n.strstart-e<=n.w_size-Tr&&(n.match_length=HO(n,e),n.match_length<=5&&(n.strategy===IX||n.match_length===ut&&n.strstart-n.match_start>4096)&&(n.match_length=ut-1)),n.prev_length>=ut&&n.match_length<=n.prev_length){r=n.strstart+n.lookahead-ut,i=ro(n,n.strstart-1-n.prev_match,n.prev_length-ut),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=r&&(n.ins_h=oo(n,n.ins_h,n.window[n.strstart+ut-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=ut-1,n.strstart++,i&&(pi(n,!1),n.strm.avail_out===0))return qn}else if(n.match_available){if(i=ro(n,0,n.window[n.strstart-1]),i&&pi(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return qn}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(i=ro(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<ut-1?n.strstart:ut-1,t===Ti?(pi(n,!0),n.strm.avail_out===0?ya:Cc):n.sym_next&&(pi(n,!1),n.strm.avail_out===0)?qn:Sc},KX=(n,t)=>{let e,i,r,s,o=n.window;for(;;){if(n.lookahead<=io){if(vc(n),n.lookahead<=io&&t===so)return qn;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=ut&&n.strstart>0&&(r=n.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){s=n.strstart+io;do;while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<s);n.match_length=io-(s-r),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=ut?(e=ro(n,1,n.match_length-ut),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(e=ro(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),e&&(pi(n,!1),n.strm.avail_out===0))return qn}return n.insert=0,t===Ti?(pi(n,!0),n.strm.avail_out===0?ya:Cc):n.sym_next&&(pi(n,!1),n.strm.avail_out===0)?qn:Sc},$X=(n,t)=>{let e;for(;;){if(n.lookahead===0&&(vc(n),n.lookahead===0)){if(t===so)return qn;break}if(n.match_length=0,e=ro(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,e&&(pi(n,!1),n.strm.avail_out===0))return qn}return n.insert=0,t===Ti?(pi(n,!0),n.strm.avail_out===0?ya:Cc):n.sym_next&&(pi(n,!1),n.strm.avail_out===0)?qn:Sc};function Er(n,t,e,i,r){this.good_length=n,this.max_lazy=t,this.nice_length=e,this.max_chain=i,this.func=r}var Qd=[new Er(0,0,0,0,YO),new Er(4,4,8,4,Uw),new Er(4,5,16,8,Uw),new Er(4,6,32,32,Uw),new Er(4,4,16,16,mc),new Er(8,16,32,32,mc),new Er(8,16,128,128,mc),new Er(8,32,128,256,mc),new Er(32,128,258,1024,mc),new Er(32,258,258,4096,mc)],XX=n=>{n.window_size=2*n.w_size,no(n.head),n.max_lazy_match=Qd[n.level].max_lazy,n.good_match=Qd[n.level].good_length,n.nice_match=Qd[n.level].nice_length,n.max_chain_length=Qd[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=ut-1,n.match_available=0,n.ins_h=0};function ZX(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=nm,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(WX*2),this.dyn_dtree=new Uint16Array((2*qX+1)*2),this.bl_tree=new Uint16Array((2*jX+1)*2),no(this.dyn_ltree),no(this.dyn_dtree),no(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(UX+1),this.heap=new Uint16Array(2*tb+1),no(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*tb+1),no(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var dh=n=>{if(!n)return 1;let t=n.state;return!t||t.strm!==n||t.status!==yc&&t.status!==db&&t.status!==nb&&t.status!==ib&&t.status!==rb&&t.status!==sb&&t.status!==ma&&t.status!==Zd?1:0},GO=n=>{if(dh(n))return _a(n,Mr);n.total_in=n.total_out=0,n.data_type=OX;let t=n.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?db:t.wrap?yc:ma,n.adler=t.wrap===2?0:1,t.last_flush=-2,SX(t),Sn},KO=n=>{let t=GO(n);return t===Sn&&XX(n.state),t},QX=(n,t)=>dh(n)||n.state.wrap!==2?Mr:(n.state.gzhead=t,Sn),$O=(n,t,e,i,r,s)=>{if(!n)return Mr;let o=1;if(t===TX&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),r<1||r>RX||e!==nm||i<8||i>15||t<0||t>9||s<0||s>PX||i===8&&o!==1)return _a(n,Mr);i===8&&(i=9);let a=new ZX;return n.state=a,a.strm=n,a.status=yc,a.wrap=o,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+ut-1)/ut),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=t,a.strategy=s,a.method=e,KO(n)},JX=(n,t)=>$O(n,t,nm,FX,LX,NX),eZ=(n,t)=>{if(dh(n)||t>ZN||t<0)return n?_a(n,Mr):Mr;let e=n.state;if(!n.output||n.avail_in!==0&&!n.input||e.status===Zd&&t!==Ti)return _a(n,n.avail_out===0?Ww:Mr);let i=e.last_flush;if(e.last_flush=t,e.pending!==0){if(hi(n),n.avail_out===0)return e.last_flush=-1,Sn}else if(n.avail_in===0&&JN(t)<=JN(i)&&t!==Ti)return _a(n,Ww);if(e.status===Zd&&n.avail_in!==0)return _a(n,Ww);if(e.status===yc&&e.wrap===0&&(e.status=ma),e.status===yc){let r=nm+(e.w_bits-8<<4)<<8,s=-1;if(e.strategy>=Gg||e.level<2?s=0:e.level<6?s=1:e.level===6?s=2:s=3,r|=s<<6,e.strstart!==0&&(r|=zX),r+=31-r%31,Xd(e,r),e.strstart!==0&&(Xd(e,n.adler>>>16),Xd(e,n.adler&65535)),n.adler=1,e.status=ma,hi(n),e.pending!==0)return e.last_flush=-1,Sn}if(e.status===db){if(n.adler=0,_t(e,31),_t(e,139),_t(e,8),e.gzhead)_t(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),_t(e,e.gzhead.time&255),_t(e,e.gzhead.time>>8&255),_t(e,e.gzhead.time>>16&255),_t(e,e.gzhead.time>>24&255),_t(e,e.level===9?2:e.strategy>=Gg||e.level<2?4:0),_t(e,e.gzhead.os&255),e.gzhead.extra&&e.gzhead.extra.length&&(_t(e,e.gzhead.extra.length&255),_t(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(n.adler=gn(n.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=nb;else if(_t(e,0),_t(e,0),_t(e,0),_t(e,0),_t(e,0),_t(e,e.level===9?2:e.strategy>=Gg||e.level<2?4:0),_t(e,HX),e.status=ma,hi(n),e.pending!==0)return e.last_flush=-1,Sn}if(e.status===nb){if(e.gzhead.extra){let r=e.pending,s=(e.gzhead.extra.length&65535)-e.gzindex;for(;e.pending+s>e.pending_buf_size;){let a=e.pending_buf_size-e.pending;if(e.pending_buf.set(e.gzhead.extra.subarray(e.gzindex,e.gzindex+a),e.pending),e.pending=e.pending_buf_size,e.gzhead.hcrc&&e.pending>r&&(n.adler=gn(n.adler,e.pending_buf,e.pending-r,r)),e.gzindex+=a,hi(n),e.pending!==0)return e.last_flush=-1,Sn;r=0,s-=a}let o=new Uint8Array(e.gzhead.extra);e.pending_buf.set(o.subarray(e.gzindex,e.gzindex+s),e.pending),e.pending+=s,e.gzhead.hcrc&&e.pending>r&&(n.adler=gn(n.adler,e.pending_buf,e.pending-r,r)),e.gzindex=0}e.status=ib}if(e.status===ib){if(e.gzhead.name){let r=e.pending,s;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>r&&(n.adler=gn(n.adler,e.pending_buf,e.pending-r,r)),hi(n),e.pending!==0)return e.last_flush=-1,Sn;r=0}e.gzindex<e.gzhead.name.length?s=e.gzhead.name.charCodeAt(e.gzindex++)&255:s=0,_t(e,s)}while(s!==0);e.gzhead.hcrc&&e.pending>r&&(n.adler=gn(n.adler,e.pending_buf,e.pending-r,r)),e.gzindex=0}e.status=rb}if(e.status===rb){if(e.gzhead.comment){let r=e.pending,s;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>r&&(n.adler=gn(n.adler,e.pending_buf,e.pending-r,r)),hi(n),e.pending!==0)return e.last_flush=-1,Sn;r=0}e.gzindex<e.gzhead.comment.length?s=e.gzhead.comment.charCodeAt(e.gzindex++)&255:s=0,_t(e,s)}while(s!==0);e.gzhead.hcrc&&e.pending>r&&(n.adler=gn(n.adler,e.pending_buf,e.pending-r,r))}e.status=sb}if(e.status===sb){if(e.gzhead.hcrc){if(e.pending+2>e.pending_buf_size&&(hi(n),e.pending!==0))return e.last_flush=-1,Sn;_t(e,n.adler&255),_t(e,n.adler>>8&255),n.adler=0}if(e.status=ma,hi(n),e.pending!==0)return e.last_flush=-1,Sn}if(n.avail_in!==0||e.lookahead!==0||t!==so&&e.status!==Zd){let r=e.level===0?YO(e,t):e.strategy===Gg?$X(e,t):e.strategy===kX?KX(e,t):Qd[e.level].func(e,t);if((r===ya||r===Cc)&&(e.status=Zd),r===qn||r===ya)return n.avail_out===0&&(e.last_flush=-1),Sn;if(r===Sc&&(t===EX?xX(e):t!==ZN&&(eb(e,0,0,!1),t===DX&&(no(e.head),e.lookahead===0&&(e.strstart=0,e.block_start=0,e.insert=0))),hi(n),n.avail_out===0))return e.last_flush=-1,Sn}return t!==Ti?Sn:e.wrap<=0?QN:(e.wrap===2?(_t(e,n.adler&255),_t(e,n.adler>>8&255),_t(e,n.adler>>16&255),_t(e,n.adler>>24&255),_t(e,n.total_in&255),_t(e,n.total_in>>8&255),_t(e,n.total_in>>16&255),_t(e,n.total_in>>24&255)):(Xd(e,n.adler>>>16),Xd(e,n.adler&65535)),hi(n),e.wrap>0&&(e.wrap=-e.wrap),e.pending!==0?Sn:QN)},tZ=n=>{if(dh(n))return Mr;let t=n.state.status;return n.state=null,t===ma?_a(n,MX):Sn},nZ=(n,t)=>{let e=t.length;if(dh(n))return Mr;let i=n.state,r=i.wrap;if(r===2||r===1&&i.status!==yc||i.lookahead)return Mr;if(r===1&&(n.adler=oh(n.adler,t,e,0)),i.wrap=0,e>=i.w_size){r===0&&(no(i.head),i.strstart=0,i.block_start=0,i.insert=0);let l=new Uint8Array(i.w_size);l.set(t.subarray(e-i.w_size,e),0),t=l,e=i.w_size}let s=n.avail_in,o=n.next_in,a=n.input;for(n.avail_in=e,n.next_in=0,n.input=t,vc(i);i.lookahead>=ut;){let l=i.strstart,c=i.lookahead-(ut-1);do i.ins_h=oo(i,i.ins_h,i.window[l+ut-1]),i.prev[l&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=l,l++;while(--c);i.strstart=l,i.lookahead=ut-1,vc(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=ut-1,i.match_available=0,n.next_in=o,n.input=a,n.avail_in=s,i.wrap=r,Sn},iZ=JX,rZ=$O,sZ=KO,oZ=GO,aZ=QX,lZ=eZ,cZ=tZ,uZ=nZ,dZ="pako deflate (from Nodeca project)",eh={deflateInit:iZ,deflateInit2:rZ,deflateReset:sZ,deflateResetKeep:oZ,deflateSetHeader:aZ,deflate:lZ,deflateEnd:cZ,deflateSetDictionary:uZ,deflateInfo:dZ},hZ=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),pZ=function(n){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(let i in e)hZ(e,i)&&(n[i]=e[i])}}return n},fZ=n=>{let t=0;for(let i=0,r=n.length;i<r;i++)t+=n[i].length;let e=new Uint8Array(t);for(let i=0,r=0,s=n.length;i<s;i++){let o=n[i];e.set(o,r),r+=o.length}return e},im={assign:pZ,flattenChunks:fZ},XO=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{XO=!1}var ah=new Uint8Array(256);for(let n=0;n<256;n++)ah[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;ah[254]=ah[254]=1;var gZ=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let t,e,i,r,s,o=n.length,a=0;for(r=0;r<o;r++)e=n.charCodeAt(r),(e&64512)===55296&&r+1<o&&(i=n.charCodeAt(r+1),(i&64512)===56320&&(e=65536+(e-55296<<10)+(i-56320),r++)),a+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(a),s=0,r=0;s<a;r++)e=n.charCodeAt(r),(e&64512)===55296&&r+1<o&&(i=n.charCodeAt(r+1),(i&64512)===56320&&(e=65536+(e-55296<<10)+(i-56320),r++)),e<128?t[s++]=e:e<2048?(t[s++]=192|e>>>6,t[s++]=128|e&63):e<65536?(t[s++]=224|e>>>12,t[s++]=128|e>>>6&63,t[s++]=128|e&63):(t[s++]=240|e>>>18,t[s++]=128|e>>>12&63,t[s++]=128|e>>>6&63,t[s++]=128|e&63);return t},mZ=(n,t)=>{if(t<65534&&n.subarray&&XO)return String.fromCharCode.apply(null,n.length===t?n:n.subarray(0,t));let e="";for(let i=0;i<t;i++)e+=String.fromCharCode(n[i]);return e},_Z=(n,t)=>{let e=t||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,t));let i,r,s=new Array(e*2);for(r=0,i=0;i<e;){let o=n[i++];if(o<128){s[r++]=o;continue}let a=ah[o];if(a>4){s[r++]=65533,i+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&i<e;)o=o<<6|n[i++]&63,a--;if(a>1){s[r++]=65533;continue}o<65536?s[r++]=o:(o-=65536,s[r++]=55296|o>>10&1023,s[r++]=56320|o&1023)}return mZ(s,r)},AZ=(n,t)=>{t=t||n.length,t>n.length&&(t=n.length);let e=t-1;for(;e>=0&&(n[e]&192)===128;)e--;return e<0||e===0?t:e+ah[n[e]]>t?e:t},lh={string2buf:gZ,buf2string:_Z,utf8border:AZ};function yZ(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ZO=yZ,QO=Object.prototype.toString,{Z_NO_FLUSH:vZ,Z_SYNC_FLUSH:wZ,Z_FULL_FLUSH:bZ,Z_FINISH:SZ,Z_OK:em,Z_STREAM_END:CZ,Z_DEFAULT_COMPRESSION:xZ,Z_DEFAULT_STRATEGY:EZ,Z_DEFLATED:DZ}=bc;function hh(n){this.options=im.assign({level:xZ,method:DZ,chunkSize:16384,windowBits:15,memLevel:8,strategy:EZ},n||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZO,this.strm.avail_out=0;let e=eh.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==em)throw new Error(Aa[e]);if(t.header&&eh.deflateSetHeader(this.strm,t.header),t.dictionary){let i;if(typeof t.dictionary=="string"?i=lh.string2buf(t.dictionary):QO.call(t.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(t.dictionary):i=t.dictionary,e=eh.deflateSetDictionary(this.strm,i),e!==em)throw new Error(Aa[e]);this._dict_set=!0}}hh.prototype.push=function(n,t){let e=this.strm,i=this.options.chunkSize,r,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?SZ:vZ,typeof n=="string"?e.input=lh.string2buf(n):QO.call(n)==="[object ArrayBuffer]"?e.input=new Uint8Array(n):e.input=n,e.next_in=0,e.avail_in=e.input.length;;){if(e.avail_out===0&&(e.output=new Uint8Array(i),e.next_out=0,e.avail_out=i),(s===wZ||s===bZ)&&e.avail_out<=6){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(r=eh.deflate(e,s),r===CZ)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),r=eh.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===em;if(e.avail_out===0){this.onData(e.output);continue}if(s>0&&e.next_out>0){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(e.avail_in===0)break}return!0};hh.prototype.onData=function(n){this.chunks.push(n)};hh.prototype.onEnd=function(n){n===em&&(this.result=im.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function hb(n,t){let e=new hh(t);if(e.push(n,!0),e.err)throw e.msg||Aa[e.err];return e.result}function MZ(n,t){return t=t||{},t.raw=!0,hb(n,t)}function TZ(n,t){return t=t||{},t.gzip=!0,hb(n,t)}var IZ=hh,kZ=hb,PZ=MZ,NZ=TZ,OZ=bc,RZ={Deflate:IZ,deflate:kZ,deflateRaw:PZ,gzip:NZ,constants:OZ},Kg=16209,FZ=16191,LZ=function(t,e){let i,r,s,o,a,l,c,u,d,h,p,g,A,y,b,x,P,T,k,C,M,O,R,q,H=t.state;i=t.next_in,R=t.input,r=i+(t.avail_in-5),s=t.next_out,q=t.output,o=s-(e-t.avail_out),a=s+(t.avail_out-257),l=H.dmax,c=H.wsize,u=H.whave,d=H.wnext,h=H.window,p=H.hold,g=H.bits,A=H.lencode,y=H.distcode,b=(1<<H.lenbits)-1,x=(1<<H.distbits)-1;e:do{g<15&&(p+=R[i++]<<g,g+=8,p+=R[i++]<<g,g+=8),P=A[p&b];t:for(;;){if(T=P>>>24,p>>>=T,g-=T,T=P>>>16&255,T===0)q[s++]=P&65535;else if(T&16){k=P&65535,T&=15,T&&(g<T&&(p+=R[i++]<<g,g+=8),k+=p&(1<<T)-1,p>>>=T,g-=T),g<15&&(p+=R[i++]<<g,g+=8,p+=R[i++]<<g,g+=8),P=y[p&x];n:for(;;){if(T=P>>>24,p>>>=T,g-=T,T=P>>>16&255,T&16){if(C=P&65535,T&=15,g<T&&(p+=R[i++]<<g,g+=8,g<T&&(p+=R[i++]<<g,g+=8)),C+=p&(1<<T)-1,C>l){t.msg="invalid distance too far back",H.mode=Kg;break e}if(p>>>=T,g-=T,T=s-o,C>T){if(T=C-T,T>u&&H.sane){t.msg="invalid distance too far back",H.mode=Kg;break e}if(M=0,O=h,d===0){if(M+=c-T,T<k){k-=T;do q[s++]=h[M++];while(--T);M=s-C,O=q}}else if(d<T){if(M+=c+d-T,T-=d,T<k){k-=T;do q[s++]=h[M++];while(--T);if(M=0,d<k){T=d,k-=T;do q[s++]=h[M++];while(--T);M=s-C,O=q}}}else if(M+=d-T,T<k){k-=T;do q[s++]=h[M++];while(--T);M=s-C,O=q}for(;k>2;)q[s++]=O[M++],q[s++]=O[M++],q[s++]=O[M++],k-=3;k&&(q[s++]=O[M++],k>1&&(q[s++]=O[M++]))}else{M=s-C;do q[s++]=q[M++],q[s++]=q[M++],q[s++]=q[M++],k-=3;while(k>2);k&&(q[s++]=q[M++],k>1&&(q[s++]=q[M++]))}}else if((T&64)===0){P=y[(P&65535)+(p&(1<<T)-1)];continue n}else{t.msg="invalid distance code",H.mode=Kg;break e}break}}else if((T&64)===0){P=A[(P&65535)+(p&(1<<T)-1)];continue t}else if(T&32){H.mode=FZ;break e}else{t.msg="invalid literal/length code",H.mode=Kg;break e}break}}while(i<r&&s<a);k=g>>3,i-=k,g-=k<<3,p&=(1<<g)-1,t.next_in=i,t.next_out=s,t.avail_in=i<r?5+(r-i):5-(i-r),t.avail_out=s<a?257+(a-s):257-(s-a),H.hold=p,H.bits=g},_c=15,eO=852,tO=592,nO=0,zw=1,iO=2,VZ=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),BZ=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),qZ=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),jZ=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),WZ=(n,t,e,i,r,s,o,a)=>{let l=a.bits,c=0,u=0,d=0,h=0,p=0,g=0,A=0,y=0,b=0,x=0,P,T,k,C,M,O=null,R,q=new Uint16Array(_c+1),H=new Uint16Array(_c+1),Z=null,ne,ce,G;for(c=0;c<=_c;c++)q[c]=0;for(u=0;u<i;u++)q[t[e+u]]++;for(p=l,h=_c;h>=1&&q[h]===0;h--);if(p>h&&(p=h),h===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<h&&q[d]===0;d++);for(p<d&&(p=d),y=1,c=1;c<=_c;c++)if(y<<=1,y-=q[c],y<0)return-1;if(y>0&&(n===nO||h!==1))return-1;for(H[1]=0,c=1;c<_c;c++)H[c+1]=H[c]+q[c];for(u=0;u<i;u++)t[e+u]!==0&&(o[H[t[e+u]]++]=u);if(n===nO?(O=Z=o,R=20):n===zw?(O=VZ,Z=BZ,R=257):(O=qZ,Z=jZ,R=0),x=0,u=0,c=d,M=s,g=p,A=0,k=-1,b=1<<p,C=b-1,n===zw&&b>eO||n===iO&&b>tO)return 1;for(;;){ne=c-A,o[u]+1<R?(ce=0,G=o[u]):o[u]>=R?(ce=Z[o[u]-R],G=O[o[u]-R]):(ce=96,G=0),P=1<<c-A,T=1<<g,d=T;do T-=P,r[M+(x>>A)+T]=ne<<24|ce<<16|G|0;while(T!==0);for(P=1<<c-1;x&P;)P>>=1;if(P!==0?(x&=P-1,x+=P):x=0,u++,--q[c]===0){if(c===h)break;c=t[e+o[u]]}if(c>p&&(x&C)!==k){for(A===0&&(A=p),M+=d,g=c-A,y=1<<g;g+A<h&&(y-=q[g+A],!(y<=0));)g++,y<<=1;if(b+=1<<g,n===zw&&b>eO||n===iO&&b>tO)return 1;k=x&C,r[k]=p<<24|g<<16|M-s|0}}return x!==0&&(r[M+x]=c-A<<24|64<<16|0),a.bits=p,0},th=WZ,UZ=0,JO=1,eR=2,{Z_FINISH:rO,Z_BLOCK:zZ,Z_TREES:$g,Z_OK:va,Z_STREAM_END:HZ,Z_NEED_DICT:YZ,Z_STREAM_ERROR:Ii,Z_DATA_ERROR:tR,Z_MEM_ERROR:nR,Z_BUF_ERROR:GZ,Z_DEFLATED:sO}=bc,rm=16180,oO=16181,aO=16182,lO=16183,cO=16184,uO=16185,dO=16186,hO=16187,pO=16188,fO=16189,tm=16190,as=16191,Hw=16192,gO=16193,Yw=16194,mO=16195,_O=16196,AO=16197,yO=16198,Xg=16199,Zg=16200,vO=16201,wO=16202,bO=16203,SO=16204,CO=16205,Gw=16206,xO=16207,EO=16208,qt=16209,iR=16210,rR=16211,KZ=852,$Z=592,XZ=15,ZZ=XZ,DO=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function QZ(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var wa=n=>{if(!n)return 1;let t=n.state;return!t||t.strm!==n||t.mode<rm||t.mode>rR?1:0},sR=n=>{if(wa(n))return Ii;let t=n.state;return n.total_in=n.total_out=t.total=0,n.msg="",t.wrap&&(n.adler=t.wrap&1),t.mode=rm,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(KZ),t.distcode=t.distdyn=new Int32Array($Z),t.sane=1,t.back=-1,va},oR=n=>{if(wa(n))return Ii;let t=n.state;return t.wsize=0,t.whave=0,t.wnext=0,sR(n)},aR=(n,t)=>{let e;if(wa(n))return Ii;let i=n.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Ii:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=e,i.wbits=t,oR(n))},lR=(n,t)=>{if(!n)return Ii;let e=new QZ;n.state=e,e.strm=n,e.window=null,e.mode=rm;let i=aR(n,t);return i!==va&&(n.state=null),i},JZ=n=>lR(n,ZZ),MO=!0,Kw,$w,eQ=n=>{if(MO){Kw=new Int32Array(512),$w=new Int32Array(32);let t=0;for(;t<144;)n.lens[t++]=8;for(;t<256;)n.lens[t++]=9;for(;t<280;)n.lens[t++]=7;for(;t<288;)n.lens[t++]=8;for(th(JO,n.lens,0,288,Kw,0,n.work,{bits:9}),t=0;t<32;)n.lens[t++]=5;th(eR,n.lens,0,32,$w,0,n.work,{bits:5}),MO=!1}n.lencode=Kw,n.lenbits=9,n.distcode=$w,n.distbits=5},cR=(n,t,e,i)=>{let r,s=n.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(t.subarray(e-s.wsize,e),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),s.window.set(t.subarray(e-i,e-i+r),s.wnext),i-=r,i?(s.window.set(t.subarray(e-i,e),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0},tQ=(n,t)=>{let e,i,r,s,o,a,l,c,u,d,h,p,g,A,y=0,b,x,P,T,k,C,M,O,R=new Uint8Array(4),q,H,Z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(wa(n)||!n.output||!n.input&&n.avail_in!==0)return Ii;e=n.state,e.mode===as&&(e.mode=Hw),o=n.next_out,r=n.output,l=n.avail_out,s=n.next_in,i=n.input,a=n.avail_in,c=e.hold,u=e.bits,d=a,h=l,O=va;e:for(;;)switch(e.mode){case rm:if(e.wrap===0){e.mode=Hw;break}for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(e.wrap&2&&c===35615){e.wbits===0&&(e.wbits=15),e.check=0,R[0]=c&255,R[1]=c>>>8&255,e.check=gn(e.check,R,2,0),c=0,u=0,e.mode=oO;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((c&255)<<8)+(c>>8))%31){n.msg="incorrect header check",e.mode=qt;break}if((c&15)!==sO){n.msg="unknown compression method",e.mode=qt;break}if(c>>>=4,u-=4,M=(c&15)+8,e.wbits===0&&(e.wbits=M),M>15||M>e.wbits){n.msg="invalid window size",e.mode=qt;break}e.dmax=1<<e.wbits,e.flags=0,n.adler=e.check=1,e.mode=c&512?fO:as,c=0,u=0;break;case oO:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(e.flags=c,(e.flags&255)!==sO){n.msg="unknown compression method",e.mode=qt;break}if(e.flags&57344){n.msg="unknown header flags set",e.mode=qt;break}e.head&&(e.head.text=c>>8&1),e.flags&512&&e.wrap&4&&(R[0]=c&255,R[1]=c>>>8&255,e.check=gn(e.check,R,2,0)),c=0,u=0,e.mode=aO;case aO:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}e.head&&(e.head.time=c),e.flags&512&&e.wrap&4&&(R[0]=c&255,R[1]=c>>>8&255,R[2]=c>>>16&255,R[3]=c>>>24&255,e.check=gn(e.check,R,4,0)),c=0,u=0,e.mode=lO;case lO:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}e.head&&(e.head.xflags=c&255,e.head.os=c>>8),e.flags&512&&e.wrap&4&&(R[0]=c&255,R[1]=c>>>8&255,e.check=gn(e.check,R,2,0)),c=0,u=0,e.mode=cO;case cO:if(e.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}e.length=c,e.head&&(e.head.extra_len=c),e.flags&512&&e.wrap&4&&(R[0]=c&255,R[1]=c>>>8&255,e.check=gn(e.check,R,2,0)),c=0,u=0}else e.head&&(e.head.extra=null);e.mode=uO;case uO:if(e.flags&1024&&(p=e.length,p>a&&(p=a),p&&(e.head&&(M=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(i.subarray(s,s+p),M)),e.flags&512&&e.wrap&4&&(e.check=gn(e.check,i,p,s)),a-=p,s+=p,e.length-=p),e.length))break e;e.length=0,e.mode=dO;case dO:if(e.flags&2048){if(a===0)break e;p=0;do M=i[s+p++],e.head&&M&&e.length<65536&&(e.head.name+=String.fromCharCode(M));while(M&&p<a);if(e.flags&512&&e.wrap&4&&(e.check=gn(e.check,i,p,s)),a-=p,s+=p,M)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=hO;case hO:if(e.flags&4096){if(a===0)break e;p=0;do M=i[s+p++],e.head&&M&&e.length<65536&&(e.head.comment+=String.fromCharCode(M));while(M&&p<a);if(e.flags&512&&e.wrap&4&&(e.check=gn(e.check,i,p,s)),a-=p,s+=p,M)break e}else e.head&&(e.head.comment=null);e.mode=pO;case pO:if(e.flags&512){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(e.wrap&4&&c!==(e.check&65535)){n.msg="header crc mismatch",e.mode=qt;break}c=0,u=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),n.adler=e.check=0,e.mode=as;break;case fO:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.adler=e.check=DO(c),c=0,u=0,e.mode=tm;case tm:if(e.havedict===0)return n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,e.hold=c,e.bits=u,YZ;n.adler=e.check=1,e.mode=as;case as:if(t===zZ||t===$g)break e;case Hw:if(e.last){c>>>=u&7,u-=u&7,e.mode=Gw;break}for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}switch(e.last=c&1,c>>>=1,u-=1,c&3){case 0:e.mode=gO;break;case 1:if(eQ(e),e.mode=Xg,t===$g){c>>>=2,u-=2;break e}break;case 2:e.mode=_O;break;case 3:n.msg="invalid block type",e.mode=qt}c>>>=2,u-=2;break;case gO:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){n.msg="invalid stored block lengths",e.mode=qt;break}if(e.length=c&65535,c=0,u=0,e.mode=Yw,t===$g)break e;case Yw:e.mode=mO;case mO:if(p=e.length,p){if(p>a&&(p=a),p>l&&(p=l),p===0)break e;r.set(i.subarray(s,s+p),o),a-=p,s+=p,l-=p,o+=p,e.length-=p;break}e.mode=as;break;case _O:for(;u<14;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(e.nlen=(c&31)+257,c>>>=5,u-=5,e.ndist=(c&31)+1,c>>>=5,u-=5,e.ncode=(c&15)+4,c>>>=4,u-=4,e.nlen>286||e.ndist>30){n.msg="too many length or distance symbols",e.mode=qt;break}e.have=0,e.mode=AO;case AO:for(;e.have<e.ncode;){for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}e.lens[Z[e.have++]]=c&7,c>>>=3,u-=3}for(;e.have<19;)e.lens[Z[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,q={bits:e.lenbits},O=th(UZ,e.lens,0,19,e.lencode,0,e.work,q),e.lenbits=q.bits,O){n.msg="invalid code lengths set",e.mode=qt;break}e.have=0,e.mode=yO;case yO:for(;e.have<e.nlen+e.ndist;){for(;y=e.lencode[c&(1<<e.lenbits)-1],b=y>>>24,x=y>>>16&255,P=y&65535,!(b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(P<16)c>>>=b,u-=b,e.lens[e.have++]=P;else{if(P===16){for(H=b+2;u<H;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c>>>=b,u-=b,e.have===0){n.msg="invalid bit length repeat",e.mode=qt;break}M=e.lens[e.have-1],p=3+(c&3),c>>>=2,u-=2}else if(P===17){for(H=b+3;u<H;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=b,u-=b,M=0,p=3+(c&7),c>>>=3,u-=3}else{for(H=b+7;u<H;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=b,u-=b,M=0,p=11+(c&127),c>>>=7,u-=7}if(e.have+p>e.nlen+e.ndist){n.msg="invalid bit length repeat",e.mode=qt;break}for(;p--;)e.lens[e.have++]=M}}if(e.mode===qt)break;if(e.lens[256]===0){n.msg="invalid code -- missing end-of-block",e.mode=qt;break}if(e.lenbits=9,q={bits:e.lenbits},O=th(JO,e.lens,0,e.nlen,e.lencode,0,e.work,q),e.lenbits=q.bits,O){n.msg="invalid literal/lengths set",e.mode=qt;break}if(e.distbits=6,e.distcode=e.distdyn,q={bits:e.distbits},O=th(eR,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,q),e.distbits=q.bits,O){n.msg="invalid distances set",e.mode=qt;break}if(e.mode=Xg,t===$g)break e;case Xg:e.mode=Zg;case Zg:if(a>=6&&l>=258){n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,e.hold=c,e.bits=u,LZ(n,h),o=n.next_out,r=n.output,l=n.avail_out,s=n.next_in,i=n.input,a=n.avail_in,c=e.hold,u=e.bits,e.mode===as&&(e.back=-1);break}for(e.back=0;y=e.lencode[c&(1<<e.lenbits)-1],b=y>>>24,x=y>>>16&255,P=y&65535,!(b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(x&&(x&240)===0){for(T=b,k=x,C=P;y=e.lencode[C+((c&(1<<T+k)-1)>>T)],b=y>>>24,x=y>>>16&255,P=y&65535,!(T+b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=T,u-=T,e.back+=T}if(c>>>=b,u-=b,e.back+=b,e.length=P,x===0){e.mode=CO;break}if(x&32){e.back=-1,e.mode=as;break}if(x&64){n.msg="invalid literal/length code",e.mode=qt;break}e.extra=x&15,e.mode=vO;case vO:if(e.extra){for(H=e.extra;u<H;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}e.length+=c&(1<<e.extra)-1,c>>>=e.extra,u-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=wO;case wO:for(;y=e.distcode[c&(1<<e.distbits)-1],b=y>>>24,x=y>>>16&255,P=y&65535,!(b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((x&240)===0){for(T=b,k=x,C=P;y=e.distcode[C+((c&(1<<T+k)-1)>>T)],b=y>>>24,x=y>>>16&255,P=y&65535,!(T+b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=T,u-=T,e.back+=T}if(c>>>=b,u-=b,e.back+=b,x&64){n.msg="invalid distance code",e.mode=qt;break}e.offset=P,e.extra=x&15,e.mode=bO;case bO:if(e.extra){for(H=e.extra;u<H;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}e.offset+=c&(1<<e.extra)-1,c>>>=e.extra,u-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){n.msg="invalid distance too far back",e.mode=qt;break}e.mode=SO;case SO:if(l===0)break e;if(p=h-l,e.offset>p){if(p=e.offset-p,p>e.whave&&e.sane){n.msg="invalid distance too far back",e.mode=qt;break}p>e.wnext?(p-=e.wnext,g=e.wsize-p):g=e.wnext-p,p>e.length&&(p=e.length),A=e.window}else A=r,g=o-e.offset,p=e.length;p>l&&(p=l),l-=p,e.length-=p;do r[o++]=A[g++];while(--p);e.length===0&&(e.mode=Zg);break;case CO:if(l===0)break e;r[o++]=e.length,l--,e.mode=Zg;break;case Gw:if(e.wrap){for(;u<32;){if(a===0)break e;a--,c|=i[s++]<<u,u+=8}if(h-=l,n.total_out+=h,e.total+=h,e.wrap&4&&h&&(n.adler=e.check=e.flags?gn(e.check,r,h,o-h):oh(e.check,r,h,o-h)),h=l,e.wrap&4&&(e.flags?c:DO(c))!==e.check){n.msg="incorrect data check",e.mode=qt;break}c=0,u=0}e.mode=xO;case xO:if(e.wrap&&e.flags){for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(e.wrap&4&&c!==(e.total&4294967295)){n.msg="incorrect length check",e.mode=qt;break}c=0,u=0}e.mode=EO;case EO:O=HZ;break e;case qt:O=tR;break e;case iR:return nR;case rR:default:return Ii}return n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,e.hold=c,e.bits=u,(e.wsize||h!==n.avail_out&&e.mode<qt&&(e.mode<Gw||t!==rO))&&cR(n,n.output,n.next_out,h-n.avail_out),d-=n.avail_in,h-=n.avail_out,n.total_in+=d,n.total_out+=h,e.total+=h,e.wrap&4&&h&&(n.adler=e.check=e.flags?gn(e.check,r,h,n.next_out-h):oh(e.check,r,h,n.next_out-h)),n.data_type=e.bits+(e.last?64:0)+(e.mode===as?128:0)+(e.mode===Xg||e.mode===Yw?256:0),(d===0&&h===0||t===rO)&&O===va&&(O=GZ),O},nQ=n=>{if(wa(n))return Ii;let t=n.state;return t.window&&(t.window=null),n.state=null,va},iQ=(n,t)=>{if(wa(n))return Ii;let e=n.state;return(e.wrap&2)===0?Ii:(e.head=t,t.done=!1,va)},rQ=(n,t)=>{let e=t.length,i,r,s;return wa(n)||(i=n.state,i.wrap!==0&&i.mode!==tm)?Ii:i.mode===tm&&(r=1,r=oh(r,t,e,0),r!==i.check)?tR:(s=cR(n,t,e,e),s?(i.mode=iR,nR):(i.havedict=1,va))},sQ=oR,oQ=aR,aQ=sR,lQ=JZ,cQ=lR,uQ=tQ,dQ=nQ,hQ=iQ,pQ=rQ,fQ="pako inflate (from Nodeca project)",cs={inflateReset:sQ,inflateReset2:oQ,inflateResetKeep:aQ,inflateInit:lQ,inflateInit2:cQ,inflate:uQ,inflateEnd:dQ,inflateGetHeader:hQ,inflateSetDictionary:pQ,inflateInfo:fQ};function gQ(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var mQ=gQ,uR=Object.prototype.toString,{Z_NO_FLUSH:_Q,Z_FINISH:AQ,Z_OK:ch,Z_STREAM_END:Xw,Z_NEED_DICT:Zw,Z_STREAM_ERROR:yQ,Z_DATA_ERROR:TO,Z_MEM_ERROR:vQ}=bc;function ph(n){this.options=im.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(n&&n.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZO,this.strm.avail_out=0;let e=cs.inflateInit2(this.strm,t.windowBits);if(e!==ch)throw new Error(Aa[e]);if(this.header=new mQ,cs.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=lh.string2buf(t.dictionary):uR.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=cs.inflateSetDictionary(this.strm,t.dictionary),e!==ch)))throw new Error(Aa[e])}ph.prototype.push=function(n,t){let e=this.strm,i=this.options.chunkSize,r=this.options.dictionary,s,o,a;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?AQ:_Q,uR.call(n)==="[object ArrayBuffer]"?e.input=new Uint8Array(n):e.input=n,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(i),e.next_out=0,e.avail_out=i),s=cs.inflate(e,o),s===Zw&&r&&(s=cs.inflateSetDictionary(e,r),s===ch?s=cs.inflate(e,o):s===TO&&(s=Zw));e.avail_in>0&&s===Xw&&e.state.wrap>0&&n[e.next_in]!==0;)cs.inflateReset(e),s=cs.inflate(e,o);switch(s){case yQ:case TO:case Zw:case vQ:return this.onEnd(s),this.ended=!0,!1}if(a=e.avail_out,e.next_out&&(e.avail_out===0||s===Xw))if(this.options.to==="string"){let l=lh.utf8border(e.output,e.next_out),c=e.next_out-l,u=lh.buf2string(e.output,l);e.next_out=c,e.avail_out=i-c,c&&e.output.set(e.output.subarray(l,l+c),0),this.onData(u)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(s===ch&&a===0)){if(s===Xw)return s=cs.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};ph.prototype.onData=function(n){this.chunks.push(n)};ph.prototype.onEnd=function(n){n===ch&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=im.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function pb(n,t){let e=new ph(t);if(e.push(n),e.err)throw e.msg||Aa[e.err];return e.result}function wQ(n,t){return t=t||{},t.raw=!0,pb(n,t)}var bQ=ph,SQ=pb,CQ=wQ,xQ=pb,EQ=bc,DQ={Inflate:bQ,inflate:SQ,inflateRaw:CQ,ungzip:xQ,constants:EQ},{Deflate:u2e,deflate:d2e,deflateRaw:h2e,gzip:p2e}=RZ,{Inflate:f2e,inflate:MQ,inflateRaw:g2e,ungzip:m2e}=DQ;var dR=MQ;var Ir=(()=>{class n{aliceblueParserService;heartbeatInterval;websocket;socket_endpoint="wss://omnefeeds.angelbroking.com/NestHtml5Mobile/socket/stream?";url2="wss://wsfeeds.angelbroking.com/NestHtml5Mobile/socket/stream";constructor(e){this.aliceblueParserService=e}isSocketConnected(){return!!(this.websocket&&this.websocket.OPEN===1)}connect(){this.websocket=new WebSocket(this.socket_endpoint),this.websocket.binaryType="arraybuffer",this.websocket.onopen=()=>{this.handleOnOpen(event)},this.websocket.onmessage=e=>{this.handleOnMessage(e)},this.websocket.onerror=e=>{this.handleOnError(e)},this.websocket.onclose=e=>{this.handleOnClose(e)}}handleOnOpen(e){console.log("Opened Web Socket connection");let i='{"task":"cn","channel":"","token":"'+f.angelFeedToken+'","user": "'+f.angelUserId+'","acctid":"'+f.angelUserId+'"}';this.sendMessage(i),this.sendHeartbeat()}sendHeartbeat(){this.heartbeatInterval=setInterval(()=>{let e='{"task":"hb","channel":"","token":"'+f.angelFeedToken+'","user": "'+f.angelUserId+'","acctid":"'+f.angelUserId+'"}';this.sendMessage(e)},59e3)}sendInitialSubscription(){console.log("sending initial subscription");let e=JSON.stringify({a:"subscribe",v:[[1,26e3],[1,26009],[3,1]],m:Yv.MARKET_DATA});this.sendMessage(e)}handleOnMessage(e){console.log("handleOnMessage",e,e.data);var r=atob(e.data).split("").map(function(l){return l.charCodeAt(0)}),s=new Uint8Array(r),o=this._atos(dR(s));console.log("parsed",o);let a=JSON.parse(o)[0];a&&a.msg==="connected"&&(console.log("ANGEL WS CONNECTED"),f.websocketEvent$.next("connected"))}_atos(e){var i=[];try{for(var r=0;r<e.length;r++)i.push(String.fromCharCode(e[r]))}catch{}return i.join("")}handleOnError(e){console.log("Error in WS connection",e)}handleOnClose(e){console.log("Closed WS connection",e),clearInterval(this.heartbeatInterval),this.websocket=null,setTimeout(()=>{this.websocket&&this.websocket.OPEN===1||(console.log("Reconnecting websocket"),this.connect())},2e3)}sendMessage(e){this.websocket&&this.websocket.OPEN===1?(console.log("Sending message over websocket: "+e),this.websocket.send(e)):console.log("Cannot send the message. Socket is not yet opened or it has been closed - ",e)}static \u0275fac=function(i){return new(i||n)(oe(zg))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var sm=(()=>{class n{http;angelWS;baseUrl="https://apiconnect.angelbroking.com";constructor(e,i){this.http=e,this.angelWS=i}getAngelHeaders(){}angelLogin(){this.auth().subscribe(e=>{console.log("angel auth",e),e&&e.data&&(f.angelFeedToken=e.data.feedToken,f.angelJWTToken=e.data.jwtToken,f.angelRefreshToken=e.data.refreshToken,this.angelWS.connect())},e=>{console.log("angel auth error",e)})}getMastersContract(){let e={responseType:"json"};this.http.get("https://margincalculator.angelbroking.com/OpenAPI_File/files/OpenAPIScripMaster.json",e).subscribe(r=>{console.log("AngelService getMastersContract",r),r&&(f.mastersContract.clear(),r.forEach(s=>{let o=new zs,a=100;s.exch_seg==="CDS"&&(a=1e7),o.instru=s.name,o.strike=Number(s.strike)/a,s.symbol.endsWith("CE")&&(o.optionType="CE"),s.symbol.endsWith("PE")&&(o.optionType="PE"),s.symbol.endsWith("FUT")&&(o.optionType="FUT"),o.tradingSymbol=s.symbol,o.lotSize=Number(s.lotsize),o.expiry=new Date(s.expiry).toDateString(),o.exchange=s.exch_seg,o.token=Number(s.token),o.token,f.mastersContract.set(o.token,o)}),this.angelLogin()),console.log("AngelService getMastersContract mastersContract",f.mastersContract)},r=>{console.log("AngelService getMastersContract error",r)})}sendSubscriptions(e){let i=[];e.forEach(o=>{let a=this.findStrikeInMasters(o)});let s='{"task":"mw","channel":"'+"nse_fo|43315&nse_fo|38692"+'","token":"'+f.angelFeedToken+'","user": "'+f.angelUserId+'","acctid":"'+f.angelUserId+'"}';console.log("angel sendSubscriptions: "+s),this.angelWS.sendMessage(s)}findStrikeInMasters(e){let i=null;return f.mastersContract.forEach(r=>{if(e.expiry===r.expiry&&e.instru===r.instru&&e.strike===r.strike&&e.type===r.optionType){i=r;return}}),i}auth(){let e={headers:new Fe({"Content-Type":"application/json",Accept:"application/json","X-UserType":"USER","X-SourceID":"WEB","X-ClientLocalIP":"192.168.0.2","X-ClientPublicIP":"101.190.74.150","X-MACAddress":"37:ab:f8:95:27:ff","X-PrivateKey":f.angelAPIKey}),responseType:"json"},i=this.baseUrl+"/rest/auth/angelbroking/user/v1/loginByPassword",r={clientcode:f.angelUserId,password:f.angelPassword};return this.http.post(i,r,e)}getFunds(e){let i={headers:new Fe({Authorization:"Bearer "+e,"Content-Type":"application/json",Accept:"application/json","X-UserType":"USER","X-SourceID":"WEB","X-ClientLocalIP":"192.168.0.2","X-ClientPublicIP":"101.190.74.150","X-MACAddress":"37:ab:f8:95:27:ff","X-PrivateKey":f.angelAPIKey}),responseType:"json"},r=this.baseUrl+"/rest/secure/angelbroking/user/v1/getRMS";return this.http.get(r,i)}getPositions(e){let i={headers:new Fe({Authorization:"Bearer "+e,"Content-Type":"application/json",Accept:"application/json","X-UserType":"USER","X-SourceID":"WEB","X-ClientLocalIP":"192.168.0.2","X-ClientPublicIP":"101.190.74.150","X-MACAddress":"37:ab:f8:95:27:ff","X-PrivateKey":f.angelAPIKey}),responseType:"json"},r=this.baseUrl+"/rest/secure/angelbroking/order/v1/getPosition";return this.http.get(r,i)}getOrders(e){let i={headers:new Fe({Authorization:"Bearer "+e,"Content-Type":"application/json",Accept:"application/json","X-UserType":"USER","X-SourceID":"WEB","X-ClientLocalIP":"192.168.0.2","X-ClientPublicIP":"101.190.74.150","X-MACAddress":"37:ab:f8:95:27:ff","X-PrivateKey":f.angelAPIKey}),responseType:"json"},r=this.baseUrl+"/rest/secure/angelbroking/order/v1/getOrderBook";return this.http.get(r,i)}place_order(e,i){let r={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"},s=this.baseUrl+"orders";return this.http.post(s,i,r)}static \u0275fac=function(i){return new(i||n)(oe(It),oe(Ir))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var gh=class{tradingsymbol;ltp;return1;return2;return3;return4;return5;return6;return1_rank;return2_rank;return3_rank;return4_rank;return5_rank;return6_rank;dist1;dist2;dist3;dist4;dist4_rank;isDist4Within1Month;DMA200;mf;watchlist;isIndex;index;isVisible;isMatchingFilter=!0},ae=class{static RS_period=55;static chartDayToFetch=2e3;static chartDaysToPlot=540;static stocksEvent$=new ct;static all_rows=[];static candlesData={};static watchlist=[];static riskFreeRate=.067;static fetchFromWebsite=!0;static stocksList=[{tradingsymbol:"NIFTY 50",niftyIndicesSymbol:"ind_nifty50list.csv",stocks:[]},{tradingsymbol:"NIFTY 100",niftyIndicesSymbol:"ind_nifty100list.csv",stocks:[]},{tradingsymbol:"NIFTY 500",niftyIndicesSymbol:"ind_nifty500list.csv",stocks:[]},{tradingsymbol:"NIFTY MIDCAP 150",niftyIndicesSymbol:"ind_niftymidcap150list.csv",stocks:[]},{tradingsymbol:"NIFTYM150MOMNTM50",niftyIndicesSymbol:"ind_niftymidcap150momentum50_list.csv",stocks:[]},{tradingsymbol:"MOMENTUM50",niftyIndicesSymbol:"ind_nifty500Momentum50_list.csv",stocks:[]},{tradingsymbol:"NIFTY ALPHA 50",niftyIndicesSymbol:"ind_nifty_Alpha_Index.csv",stocks:[]},{tradingsymbol:"NIFTY BANK",niftyIndicesSymbol:"ind_niftybanklist.csv",stocks:[]},{tradingsymbol:"NIFTY PHARMA",niftyIndicesSymbol:"ind_niftypharmalist.csv",stocks:[]},{tradingsymbol:"NIFTY HEALTHCARE",niftyIndicesSymbol:"ind_niftyhealthcarelist.csv",stocks:[]},{tradingsymbol:"NIFTY MIDSML HLTH",niftyIndicesSymbol:"ind_niftymidsmallhealthcare_list.csv",stocks:[]},{tradingsymbol:"NIFTY IT",niftyIndicesSymbol:"ind_niftyitlist.csv",stocks:[]}]};var om=(()=>{class n{mapService;user_id=f.zerodhaUserId;root="wss://ws.zerodha.com/";read_timeout=10;reconnect_max_delay=0;reconnect_max_tries=0;mSubscribe="subscribe";mUnSubscribe="unsubscribe";mSetMode="mode";mAlert=10;mMessage=11;mLogout=12;mReload=13;mClearCache=14;modeFull="full";modeQuote="quote";modeLTP="ltp";ws=null;triggers={connect:[],ticks:[],disconnect:[],error:[],close:[],reconnect:[],noreconnect:[],message:[],order_update:[]};read_timer=null;last_read=null;reconnect_timer=null;auto_reconnect=!1;current_reconnection_count=0;last_reconnect_interval=0;current_ws_url=null;defaultReconnectMaxDelay=60;defaultReconnectMaxRetries=50;maximumReconnectMaxRetries=300;minimumReconnectMaxDelay=5;NseCM=1;NseFO=2;NseCD=3;BseCM=4;BseFO=5;BseCD=6;McxFO=7;McxSX=8;Indices=9;constructor(e){this.mapService=e}connect(){if(this.ws&&(this.ws.readyState===this.ws.CONNECTING||this.ws.readyState===this.ws.OPEN))return;console.log("Trying to establish Zerodha WS connection");let e=this.root+"?api_key=kitefront&user_id="+this.user_id+"&enctoken="+encodeURIComponent(f.broker_auth.replace("enctoken ",""))+"&uid="+Date.now()+"&user-agent=kite3-web&version=3.0.10";this.ws=new WebSocket(e),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{this.handleOnOpen(event)},this.ws.onmessage=i=>{this.handleOnMessage(i)},this.ws.onerror=i=>{this.handleOnError(i)},this.ws.onclose=i=>{this.handleOnClose(i)}}isSocketConnected(){return!!(this.ws&&this.ws.readyState==this.ws.OPEN)}handleOnOpen(e){console.log("Opened Zerodha Web Socket connection");let i=[256265,260105,257801,265,288009,274441,2707457];this.subscribe(i),this.setMode(this.modeFull,i),f.websocketEvent$.next("connected"),this.initStatusCheck()}initStatusCheck(){clearInterval(this.read_timer),this.last_read=new Date,this.read_timer=setInterval(()=>{if((new Date().valueOf()-this.last_read)/1e3>=this.read_timeout){f.requestStatusEvent$.next({status:"info",message:"WS Reconnecting..."}),console.log("Reconnecting WS..."),this.ws&&(this.ws.close(),this.ws=null),clearInterval(this.read_timer);let e=setTimeout(()=>{this.connect()},2e3)}},this.read_timeout*1e3)}handleOnMessage(e){if(f.logWSFeed&&console.log("handleOnMessage",e),e.data instanceof ArrayBuffer){if(e.data.byteLength>2){let i=this.parseBinary(e.data);f.logWSFeed&&console.log("Parsed binary message",i),i.forEach(r=>{this.mapService.updateMaps_zerodha(r)})}}else this.parseTextMessage(e.data);this.last_read=new Date}handleOnError(e){console.log("Error in WS connection",e)}handleOnClose(e){console.log("Closed WS connection",e),this.ws=null,setTimeout(()=>{console.log("Reconnecting websocket"),this.connect()},5e3)}closeSocket(){console.log("Closing WS connection manually"),this.ws.close(),this.ws=null}subscribe(e){return e.length>0&&this.send({a:this.mSubscribe,v:e}),e}setMode(e,i){return e||(e=this.modeFull),i.length>0&&this.send({a:this.mSetMode,v:[e,i]}),i}send(e){if(!this.ws||this.ws.readyState!==this.ws.OPEN){console.log("Cannot send the message. Socket is not yet opened or it has been closed - ",e);return}try{typeof e=="object"&&(e=JSON.stringify(e)),this.ws.send(e)}catch{this.ws.close()}}parseTextMessage(e){try{e=JSON.parse(e),console.log("text message on ws: ",e)}catch{return}if(e.type==="order"){if(e.status,e.status==="COMPLETE"){let i=this.mapService.parseSymbol(e.tradingsymbol),r=i.strike+i.type;f.requestStatusEvent$.next({status:"success",message:"COMPLETE "+r+" "+e.transaction_type+" "+e.quantity}),setTimeout(()=>{f.enableAlgo||f.miscEvent$.next("refreshAll")},500)}if(e.status==="REJECTED"){let i=this.mapService.parseSymbol(e.tradingsymbol),r=i.strike+i.type;f.requestStatusEvent$.next({status:"danger",message:"REJECTED "+r+" "+e.transaction_type+" "+e.quantity+" "+e.status_message}),setTimeout(()=>{f.enableAlgo||f.miscEvent$.next("refreshAll")},500)}}}parseBinary(e){let i=this.splitPackets(e),r=[];for(let s=0;s<i.length;s++){let o=i[s],a=this.buf2long(o.slice(0,4)),l=a&255,c=!0;l===this.Indices&&(c=!1);let u=100;if(l===this.NseCD?u=1e7:l==this.BseCD&&(u=1e4),o.byteLength===8)r.push({tradable:c,mode:this.modeLTP,instrument_token:a,last_price:this.buf2long(o.slice(4,8))/u});else if(o.byteLength===28||o.byteLength===32){let d=this.modeQuote;o.byteLength===32&&(d=this.modeFull);let h={tradable:c,mode:d,instrument_token:a,last_price:this.buf2long(o.slice(4,8))/u,ohlc:{high:this.buf2long(o.slice(8,12))/u,low:this.buf2long(o.slice(12,16))/u,open:this.buf2long(o.slice(16,20))/u,close:this.buf2long(o.slice(20,24))/u},change:this.buf2long(o.slice(24,28)),exchange_timestamp:null};if(h.ohlc.close!=0&&(h.change=(h.last_price-h.ohlc.close)*100/h.ohlc.close),o.byteLength===32){h.exchange_timestamp=null;let p=this.buf2long(o.slice(28,32));p&&(h.exchange_timestamp=new Date(p*1e3))}r.push(h)}else if(o.byteLength===44||o.byteLength===184){let d=this.modeQuote;o.byteLength===184&&(d=this.modeFull);let h={tradable:c,mode:d,instrument_token:a,last_price:this.buf2long(o.slice(4,8))/u,last_traded_quantity:this.buf2long(o.slice(8,12)),average_traded_price:this.buf2long(o.slice(12,16))/u,volume_traded:this.buf2long(o.slice(16,20)),total_buy_quantity:this.buf2long(o.slice(20,24)),total_sell_quantity:this.buf2long(o.slice(24,28)),ohlc:{open:this.buf2long(o.slice(28,32))/u,high:this.buf2long(o.slice(32,36))/u,low:this.buf2long(o.slice(36,40))/u,close:this.buf2long(o.slice(40,44))/u},change:null,last_trade_time:null,exchange_timestamp:null,oi:null,oi_day_high:null,oi_day_low:null,depth:null};if(h.ohlc.close!=0&&(h.change=(h.last_price-h.ohlc.close)*100/h.ohlc.close),o.byteLength===184){h.last_trade_time=null;let p=this.buf2long(o.slice(44,48));p&&(h.last_trade_time=new Date(p*1e3)),h.exchange_timestamp=null;let g=this.buf2long(o.slice(60,64));g&&(h.exchange_timestamp=new Date(g*1e3)),h.oi=this.buf2long(o.slice(48,52)),h.oi_day_high=this.buf2long(o.slice(52,56)),h.oi_day_low=this.buf2long(o.slice(56,60)),h.depth={buy:[],sell:[]};let A=0,y=o.slice(64,184);for(let b=0;b<10;b++)A=b*12,h.depth[b<5?"buy":"sell"].push({quantity:this.buf2long(y.slice(A,A+4)),price:this.buf2long(y.slice(A+4,A+8))/u,orders:this.buf2long(y.slice(A+8,A+10))})}r.push(h)}}return r}splitPackets(e){let i=this.buf2long(e.slice(0,2)),r=2,s=[];for(let o=0;o<i;o++){let a=this.buf2long(e.slice(r,r+2)),l=e.slice(r+2,r+2+a);s.push(l),r+=2+a}return s}buf2long(e){let i=new Uint8Array(e),r=0,s=i.length;for(let o=0,a=s-1;o<s;o++,a--)r+=i[a]<<o*8;return r}static \u0275fac=function(i){return new(i||n)(oe(Ue))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Mn=(()=>{class n{http;zerodhaWebsocketService;mapService;baseUrl="https://kite.zerodha.com/";constructor(e,i,r){this.http=e,this.zerodhaWebsocketService=i,this.mapService=r}getMastersContract(){let e={responseType:"text"};this.http.get("https://api.kite.trade/instruments",e).subscribe(r=>{console.log("zerodha instruments",r),this.parseContractMaster(r)},r=>{console.log("zerodha instruments error",r)})}parseContractMaster(e){let r=e.split(/\r|\n|\r/).filter(function(l){return l!==""}),s=this.mapService.findCurrExpiryForDisplay(f.usdinrExpiries),a="USDINR"+this.mapService.getExpiry(s)+"FUT";for(let l=1;l<r.length;l++){let c=r[l].split(","),u=c[0],d=c[1],h=c[2],p=c[3].replaceAll('"',""),g=c[4],A=c[5],y=c[6],b=c[8],x=c[9],P=c[11],T=new zs;T.token=Number(u),T.instru=p,T.expiry=new Date(A).toDateString(),T.strike=Number(y),T.optionType=x,T.lotSize=Number(b),T.exchange=P,T.tradingSymbol=h,f.mastersContract.set(T.token,T),h===a&&P==="CDS"&&(f.USDINR_FUT_TOKEN=T.token,console.log("USDINR_FUT_TOKEN",f.USDINR_FUT_TOKEN))}console.log("ZerodhaService getMastersContract mastersContract",f.mastersContract),this.getInvestedMFData(),this.getInvestedStocksData(),this.connectWebsocket()}getInvestedMFData(){f.mfInvested.forEach(e=>{e[0]!=="NIFTYBEES"&&this.getMFData(e[0]).subscribe(i=>{console.log("zerodha getMFData response",i);let r=i.data.at(-1)[1];this.mapService.setLtp(String(e[0]),r),e[2]=r,console.log("mf ltpMap",this.mapService.ltpMap)},i=>{console.log("zerodha getMFData error",i),f.requestStatusEvent$.next({status:"danger",message:"MF Fetch Failed"})})})}getInvestedStocksData(){let e=JSON.parse(localStorage.getItem("curr_positions"+f.stocksStrategyNum));e&&e.trades&&e.trades.forEach(r=>{let s=new Cr;s.tradingSymbol=r.scrip,this.fetchChartData(s)})}fetchChartData(e){let i=this.findStockInMasters(e),r=new Date,s=new Date;s.setDate(s.getDate()-ae.chartDayToFetch);let o=""+s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2),a=""+r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+("0"+r.getDate()).slice(-2);if(i&&i.token){let c={responseType:"json",headers:new Fe({authorization:f.broker_auth})},u="https://kite.zerodha.com/oms/instruments/historical/"+i.token+"/day?user_id="+f.zerodhaUserId+"&oi=1&from="+o+"&to="+a;this.http.get(u,c).subscribe(d=>{if(f.requestStatusEvent$.next({status:"success",message:"FETCHED "+i.tradingSymbol}),console.log("fetchChartData data:",i.tradingSymbol,d),d.data.candles){let h=d.data.candles;h.length===0&&console.log("ZERO CANDLES FOR ",i.tradingSymbol);for(let p=0;p<h.length;p++){let g=h[p],A=ae.candlesData[i.tradingSymbol];A||(A={});let y=this.getDateInFormat(g[0]);A[y]=[g[1],g[2],g[3],g[4],g[5],g[6]],ae.candlesData[i.tradingSymbol]=A}}console.log("candles:",Object.keys(ae.candlesData).length,ae.candlesData)})}}getDateInFormat(e=null){e||(e=new Date);let i=new Date(e),r=i.getDate(),s=i.getMonth()+1,o=i.getFullYear(),a=i.getHours(),l=i.getMinutes(),c=i.getSeconds();return""+(r<=9?"0"+r:r)+"-"+(s<=9?"0"+s:s)+"-"+o+" "+(a<=9?"0"+a:a)+":"+(l<=9?"0"+l:l)+":"+(c<=9?"0"+c:c)}isSocketConnected(){return this.zerodhaWebsocketService.isSocketConnected()}connectWebsocket(){this.zerodhaWebsocketService.connect()}closeWebsocket(){this.zerodhaWebsocketService.closeSocket()}sendSubscriptions(e){let i=[];e.forEach(r=>{let s=this.findStrikeInMasters(r);if(s)i.push(s.token);else{let o=this.findFutureInMasters(r);if(o)i.push(o.token);else{let a=this.findStockInMasters(r);a&&i.push(a.token)}}}),console.log("sendSubscriptions: ",i),this.zerodhaWebsocketService.subscribe(i),this.zerodhaWebsocketService.setMode(null,i)}findInMastersByToken(e){return f.mastersContract.get(e)}findStrikeInMasters(e){let i=null;return f.mastersContract.forEach(r=>{if(e.expiry===r.expiry&&e.instru===r.instru&&e.strike===r.strike&&e.type===r.optionType){i=r;return}}),i}findFutureInMasters(e){let i=null;return f.mastersContract.forEach(r=>{if(e.tradingSymbol===r.tradingSymbol&&e.exchange===r.exchange){i=r;return}}),i}findStockInMasters(e){let i=null;return f.mastersContract.forEach(r=>{if(e.tradingSymbol===r.tradingSymbol&&r.exchange==="NSE"){i=r;return}}),i}getMFData(e){let i="https://staticassets.zerodha.com/coin/historical-nav/"+e+".json";return this.http.get(i)}getFunds(){let e=f.broker_auth,i={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"};return this.http.get("https://kite.zerodha.com/oms/user/margins",i)}getPositions(){let e=f.broker_auth,i={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"};return this.http.get("https://kite.zerodha.com/oms/portfolio/positions",i)}getOrders(){let e=f.broker_auth,i={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"};return this.http.get("https://kite.zerodha.com/oms/orders",i)}place_order(e,i,r,s=null,o=null,a="NRML",l=f.defaultTag,c=0){let u="BUY";i<0&&(u="SELL",i=Math.abs(i));let d="MARKET",h=0;s&&(d="LIMIT",h=s),c&&(d="SL");let p={headers:new Fe({Authorization:r,"Content-Type":"application/x-www-form-urlencoded"}),responseType:"json"},g="NFO";(e.includes("SENSEX")||e.includes("BANKEX"))&&(g="BFO");let A=this.baseUrl+"oms/orders/regular";if(o){let y=new wi().set("variety","regular").set("exchange",g).set("tradingsymbol",e).set("transaction_type",u).set("order_type",""+d).set("quantity",i).set("price",""+h).set("product",a).set("validity","DAY").set("disclosed_quantity","0").set("trigger_price",""+c).set("squareoff","0").set("stoploss","0").set("trailing_stoploss","0").set("user_id",f.zerodhaUserId).set("order_id",o).set("parent_order_id","");return A+="/"+o,this.http.put(A,y.toString(),p)}else{let y=new wi().set("variety","regular").set("exchange",g).set("tradingsymbol",e).set("transaction_type",u).set("order_type",""+d).set("quantity",i).set("price",""+h).set("product",a).set("validity","DAY").set("disclosed_quantity","0").set("trigger_price",""+c).set("squareoff","0").set("stoploss","0").set("trailing_stoploss","0").set("user_id",f.zerodhaUserId).set("tag",l);return this.http.post(A,y.toString(),p)}}cancel_order(e){let i=f.broker_auth,r={headers:new Fe({Authorization:i,"Content-Type":"application/json"}),responseType:"json"},s="https://kite.zerodha.com/oms/orders/regular/"+e+"?order_id="+e+"&parent_order_id=&variety=regular";return this.http.delete(s,r)}nudge_order(e,i){let r={headers:new Fe({Authorization:i}),responseType:"json"},s=this.baseUrl+"oms/nudge/orders",o=[{exchange:"NFO",tradingsymbol:e,transaction_type:"BUY",variety:"regular",product:"NRML",order_type:"MARKET",quantity:1e3}];return this.http.post(s,o,r)}historical(e,i,r,s,o,a){let l={headers:new Fe({Authorization:f.broker_auth}),responseType:"json"},c="https://api.kite.trade/instruments/historical/"+e+"/"+i+"?from="+r+"&to="+s+"&continuous="+o+"&oi="+a;this.http.get(c,l).subscribe(u=>{console.log("zerodha historical",u);let d=[];for(let h=0;h<u.data.candles.length;h++){let p=u.data.candles[h],g={date:new Date(p[0]),open:p[1],high:p[2],low:p[3],close:p[4],volume:p[5]};p[6]&&(g.oi=p[6]),d.push(g)}console.log("zerodha historical result:",d)},u=>{console.log("zerodha historical error",u)})}static \u0275fac=function(i){return new(i||n)(oe(It),oe(om),oe(Ue))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ni=(()=>{class n{http;fyersService;aliceblueService;angelService;angelWS;mapService;zerodhaService;payOffEvent$=new ct;chartEvent$=new ct;stockChartEvent$=new ct;placeOrdersEvent$=new ct;mean=0;variance=1;constructor(e,i,r,s,o,a,l){this.http=e,this.fyersService=i,this.aliceblueService=r,this.angelService=s,this.angelWS=o,this.mapService=a,this.zerodhaService=l}dummyRequest(){let e="https://httpstat.us/200?sleep=10000";e="https://www.nseindia.com/api/option-chain-indices?symbol=BANKNIFTY",console.log("making dummy request"),this.http.get(e).subscribe(i=>{console.log("success",i)},i=>{console.log("error",i);let r="Error (mostly timeout)";i.error&&i.error.message?r=i.error.message:r=i.message,f.requestStatusEvent$.next({status:"danger",message:r})})}getRawCsvData(){return this.http.get("https://www.niftyindices.com/IndexConstituent/ind_nifty500list.csv",{responseType:"text"})}coinRequest(){let e={withCredentials:!0,headers:new Fe({cookie:"_ga=GA1.2.1309723177.1657258383; coin_session=pcJknMigqOhgkkMqqVzVsNrS3XcgvOy9; _pk_id.1.35a4=7cc08132c0469b55.1678078440.; signup_csrftoken=OF2XrKuTPpUNJZGGK5ODQJVW4joNdL7YjkuA7LEYwAX8SeWJqULTjbSe8Ucrqexg; AMP_MKTG_d9d4ec74fa=JTdCJTdE; _ga_Y19MKQM0YF=GS1.2.1700802963.1.0.1700802963.0.0.0; AMP_d9d4ec74fa=JTdCJTIyZGV2aWNlSWQlMjIlM0ElMjJlMjdiOGYwOS1mZWUzLTQ3OWMtYjIzNy02OTA4YjAwNTliYjQlMjIlMkMlMjJzZXNzaW9uSWQlMjIlM0ExNzAwODAyOTYyNzU0JTJDJTIyb3B0T3V0JTIyJTNBZmFsc2UlMkMlMjJsYXN0RXZlbnRUaW1lJTIyJTNBMTcwMDgwMjk3MzE3OSUyQyUyMmxhc3RFdmVudElkJTIyJTNBMiU3RA==; cf_clearance=QcTTs0eM7QOX7QqkJ..WB6SxuV4BMtvtclA_wV0RFxo-1702439681-0-1-aa6e5b56.99ac5591.5bd7611e-160.0.0; public_token=W7msMal5BeMrBUeLH4NnyEgLR6zMpAXa; _cfuvid=745C8KuaaVvRRW4gl8oox4K.jm3iqePintSSSArejws-1703667311507-0-604800000; __cf_bm=vQXpFrgA1cJCeU.22dFnMGaJyyN6rvKuZgPY7xcSysk-1703681906-1-AekhZ3Q2fm30ewvnalldMjowBNU6kpt1v9t2bR5/pcI9op+6FikhnmazsZzXrvSa4Q1/yKjPPEYrupu8554kSCQ=; _pk_ref.1.35a4=%5B%22%22%2C%22%22%2C1703682483%2C%22https%3A%2F%2Fconsole.zerodha.com%2F%22%5D; _pk_ses.1.35a4=1","x-csrftoken":"W7msMal5BeMrBUeLH4NnyEgLR6zMpAXa"})},i="https://coin.zerodha.com/api/mf/holdings";console.log("*** making coin request"),this.http.get(i,e).subscribe(r=>{console.log("*** success",r)},r=>{console.log("*** error",r);let s="Error (mostly timeout)";r.error&&r.error.message?s=r.error.message:s=r.message,f.requestStatusEvent$.next({status:"danger",message:s})})}coinRequest2(){let e={headers:new Fe({Authorization:"enctoken 2yAOdBPOZ/+KPIvhO3XXZxa6FheVGkciQfm+zluD8KX9tlc4yaVLLqqPSx/SKtZx9Uv97XGtIM02ipPEktyvV06q6l8cFidfuqAbbMVUjUihABNuDug0Vw==","Content-Type":"application/json"}),responseType:"json"},i="https://api.kite.trade/mf/holdings";console.log("*** making mf request"),this.http.get(i,e).subscribe(r=>{console.log("*** success",r)},r=>{console.log("*** error",r);let s="Error (mostly timeout)";r.error&&r.error.message?s=r.error.message:s=r.message,f.requestStatusEvent$.next({status:"danger",message:s})})}coinRequest3(){let e={headers:new Fe({Authorization:"enctoken 2yAOdBPOZ/+KPIvhO3XXZxa6FheVGkciQfm+zluD8KX9tlc4yaVLLqqPSx/SKtZx9Uv97XGtIM02ipPEktyvV06q6l8cFidfuqAbbMVUjUihABNuDug0Vw==","Content-Type":"application/json"}),responseType:"json"},i="https://staticassets.zerodha.com/coin/historical-nav/INF179K01WM1.json";console.log("*** making mf request"),this.http.get(i).subscribe(r=>{console.log("*** success",r)},r=>{console.log("*** error",r);let s="Error (mostly timeout)";r.error&&r.error.message?s=r.error.message:s=r.message,f.requestStatusEvent$.next({status:"danger",message:s})})}getZerodhaInstruments(){let e={responseType:"text"};this.http.get("https://api.kite.trade/instruments",e).subscribe(r=>{console.log("zerodha instruments",r),f.requestStatusEvent$.next({status:"success",message:"Fetched Zerodha instruments"});let o=r.split(/\r|\n|\r/).filter(function(a){return a!==""});for(let a=1;a<o.length;a++){let l=o[a].split(","),c=l[0],u=l[1],d=l[2],h=l[3].replaceAll('"',""),p=l[4],g=l[5],A=l[6],y=l[9];(h==="NIFTY"||h==="BANKNIFTY"||h==="FINNIFTY"||h==="SENSEX"||h==="BANKEX"||h==="MIDCPNIFTY")&&this.parseAndSetMaps(h,g,A,y,p),h==="NIFTY 50"&&this.mapService.setLtp("NIFTY50",p),h==="NIFTY BANK"&&this.mapService.setLtp("BANKNIFTY",p),h==="NIFTY FIN SERVICE"&&this.mapService.setLtp("FINNIFTY",p),h==="NIFTY MIDCAP SELECT (MIDCPNIFTY)"&&this.mapService.setLtp("MIDCPNIFTY",p),d==="SENSEX"&&this.mapService.setLtp("SENSEX",p),d==="BANKEX"&&this.mapService.setLtp("BANKEX",p)}},r=>{console.log("zerodha instruments error",r),f.requestStatusEvent$.next({status:"danger",message:r.status+" - Failed to fetch Zerodha instruments"})})}getNSE_OC(e){let i=e;e==="NIFTY50"&&(i="NIFTY");let r={responseType:"json"},s="https://www.nseindia.com/api/option-chain-indices?symbol="+i;this.http.get(s,r).subscribe(o=>{console.log("getNSE_OC",o),f.requestStatusEvent$.next({status:"success",message:"Fetched NSE OC of "+e});for(let[a,l]of Object.entries(o.records.data))l.hasOwnProperty("CE")&&this.parseAndSetMaps(i,l.CE.expiryDate,l.CE.strikePrice,"CE",l.CE.lastPrice),l.hasOwnProperty("PE")&&this.parseAndSetMaps(i,l.PE.expiryDate,l.PE.strikePrice,"PE",l.PE.lastPrice);this.mapService.setLtp(e,o.records.underlyingValue)},o=>{console.log("getNSE_OC error",o),f.requestStatusEvent$.next({status:"danger",message:o.status+" - Failed to fetch NSE OC of "+e})})}parseAndSetMaps(e,i,r,s,o){let a={instru:e,expiry:i,strike:r,optionType:s},l=this.mapService.getMapKey(a);this.mapService.setLtp(l,o)}uploadedMastersContract(e){if(f.SocketMode==="zerodha"){let i=String(e);this.zerodhaService.parseContractMaster(i)}else if(f.SocketMode==="aliceblue"){let i=JSON.parse(e.toString());this.aliceblueService.parseContractMaster(i)}else f.SocketMode}getMastersContract(e){if(f.SocketMode==="zerodha")this.zerodhaService.getMastersContract();else if(f.SocketMode==="aliceblue")this.aliceblueService.getMastersContract(e);else if(f.SocketMode==="angel")return this.angelService.getMastersContract()}reopenWebsocket(){f.SocketMode==="zerodha"?this.zerodhaService.connectWebsocket():f.SocketMode==="aliceblue"?this.aliceblueService.getEncKey():f.SocketMode}getDelta(e,i,r,s,o,a=!1,l=null){return this.getGreeks(e,i,r,s,o,a,l).delta}getGreeks(e,i,r,s,o,a=!1,l=null){var c=new gaussian(0,1);let u=new Date(s);e==="USDINR"?u.setHours(12,30,0):u.setHours(15,30,0);let d=new Date;a&&(d=l);let h=Math.floor((u.getTime()-d.getTime())/1e3),p=Math.floor(h/60),g=Math.floor(p/60),A=Math.floor(g/24)/365,y="NIFTY50";e==="BANKNIFTY"?y="BANKNIFTY":e==="FINNIFTY"?y="FINNIFTY":e==="USDINR"&&(y="USDINR");let b=this.mapService.getScripLTP(null,null,y,null),x=o,P=null;r==="CE"&&(P=Ut.CE),r==="PE"&&(P=Ut.PE);let k=this.calculateIV(e,b,i,f.INTEREST_RATE,u,P,x)/100,C=f.INTEREST_RATE/100,M=(Math.log(b/i)+(C+Math.pow(k,2)/2)*A)/(k*Math.sqrt(A)),O=(Math.log(b/i)+(C-Math.pow(k,2)/2)*A)/(k*Math.sqrt(A)),R=i*Math.exp(-1*C*A),q=b*c.cdf(M)-R*c.cdf(O),H=R*c.cdf(-1*O)-b*c.cdf(-1*M),Z=c.cdf(M),ne=Z-1,ce=c.pdf(M)/(b*k*Math.sqrt(A)),G=ce,$=b*c.pdf(M)*Math.sqrt(A)/100,ee=$,ye=(-1*b*c.pdf(M)*k/(2*Math.sqrt(A))-C*R*c.cdf(O))/365,de=(-1*b*c.pdf(M)*k/(2*Math.sqrt(A))+C*R*c.cdf(-1*O))/365,ge=R*A*c.cdf(O)/100,ie=-1*R*A*c.cdf(-1*O)/100,ue=0,me=0,we=0,Be=0;return r==="CE"?(ue=Z,me=ce,we=$,Be=ye):r==="PE"&&(ue=ne,me=G,we=ee,Be=de),ue=Math.round((ue+1e-5)*100)/100,me=Math.round((me+1e-5)*1e4)/1e4,we=Math.round((we+1e-5)*100)/100,Be=Math.round((Be+1e-5)*100)/100,{delta:ue,gamma:me,vega:we,theta:Be}}getGreeks0(e,i,r,s,o,a=!1,l=null){var c=new gaussian(0,1);console.log(c);let u=new Date(s);e==="USDINR"?u.setHours(12,30,0):u.setHours(15,30,0);let d=new Date;a&&(d=l);let h=Math.floor((u.getTime()-d.getTime())/1e3),p=Math.floor(h/60),g=Math.floor(p/60),A=Math.floor(g/24)/365,y="NIFTY50";e==="BANKNIFTY"?y="BANKNIFTY":e==="FINNIFTY"?y="FINNIFTY":e==="MIDCPNIFTY"?y="MIDCPNIFTY":e==="SENSEX"?y="SENSEX":e==="BANKEX"?y="BANKEX":e==="USDINR"&&(y="USDINR");let b=this.mapService.getScripLTP(null,null,y,null),x=o,P=null;r==="CE"&&(P=Ut.CE),r==="PE"&&(P=Ut.PE);let k=this.calculateIV(e,b,i,f.INTEREST_RATE,u,P,x)/100,C=f.INTEREST_RATE/100,M=(Math.log(b/i)+(C+Math.pow(k,2)/2)*A)/(k*Math.sqrt(A)),O=0;r==="CE"?O=this.getCDF(M):r==="PE"&&(O=this.getCDF(M)-1),O=Math.round((O+1e-5)*100)/100;let R=Math.exp(-Math.pow(M,2)/2)/Math.sqrt(2*3.14159265358979),q=R/(b*(k*Math.sqrt(A)));q=Math.round((q+1e-5)*1e4)/1e4;let H=.01*b*Math.sqrt(A)*R;H=Math.round((H+1e-5)*100)/100;let Z=M-k*Math.sqrt(A),ne=this.getCDF(Z),ce=0;return r==="CE"?ce=-(b*k*R)/(2*Math.sqrt(A))-C*i*Math.exp(-C*A)*ne:r==="PE"&&(ce=-(b*k*R)/(2*Math.sqrt(A))+C*i*Math.exp(-C*A)*(1-ne)),ce=ce/365,ce=Math.round((ce+1e-5)*100)/100,{delta:O,gamma:q,vega:H,theta:ce}}calcHolidays(e,i){let r=0,s=new Date(e.getTime());for(;s<=i;){let o=s.getDay();(o===0||o===6)&&r++,s.setDate(s.getDate()+1)}return f.holidays.forEach(o=>{o>=e&&o<=i&&r++}),r}getLastWorkingDay(e){let i=new Date(e.getTime());for(i.setDate(i.getDate()-1);;){let r=i.getDay();if(r===0||r===6)i.setDate(i.getDate()-1);else{let s=!1;if(f.holidays.forEach(o=>{o.toLocaleDateString()===i.toLocaleDateString()&&(i.setDate(i.getDate()-1),s=!0)}),!s)break}}return i}calcWorkingDays(e,i){let r=0,s=new Date(e.getTime());for(;s<=i;){let o=s.getDay();o!==0&&o!==6&&r++,s.setDate(s.getDate()+1)}return f.holidays.forEach(o=>{o>=e&&o<=i&&r--}),r-1}calculateIV(e,i,r,s,o,a,l){let c=80,u=0,d=0;for(;c-u>1e-4;)this.calculateT0AtPoint(e,i,r,s,o,(c+u)/2,a)>l?c=(c+u)/2:u=(c+u)/2;return d=(c+u)/2,d}calculateT0AtPoint(e,i,r,s,o,a,l,c){let u=0,d=new Date(o);e==="USDINR"?d.setHours(12,30,0):d.setHours(15,30,0);let h=new Date,p=0;if(c){let y=new Date(h);y.setDate(y.getDate()+c),y.setHours(9,15,0),p=Math.floor((y.getTime()-h.getTime())/1e3)}let g=this.calcHolidays(h,d)*86400,A=Math.floor((d.getTime()-h.getTime())/1e3)-g-p;if(A>0){let x=A/60/60/24/365,P=a/100;s=s/100;let T=(Math.log(i/r)+(s+Math.pow(P,2)/2)*x)/(P*Math.sqrt(x)),k=T-P*Math.sqrt(x),C=r*Math.exp(-1*s*x);l===Ut.CE&&(u=i*this.getCDF(T)-C*this.getCDF(k)),l===Ut.PE&&(u=C*this.getCDF(-1*k)-i*this.getCDF(-1*T))}return u}getCDF(e){let i=Math.sqrt(this.variance);return .5*this.erfc(-(e-this.mean)/(i*Math.sqrt(2)))}erfc(e){let i=Math.abs(e),r=1/(1+i/2),s=r*Math.exp(-i*i-1.26551223+r*(1.00002368+r*(.37409196+r*(.09678418+r*(-.18628806+r*(.27886807+r*(-1.13520398+r*(1.48851587+r*(-.82215223+r*.17087277)))))))));return e>=0?s:2-s}playAudio(e){let i="";f.isProduction===!1&&(i="../");let r=new Audio;e==="success"?r.src=f.audioSuccess:e==="error"?r.src=f.audioError:e==="warn"&&(r.src=f.audioWarn),r.load(),r.play()}get(e){let i={},r=e;return this.http.get(r,i)}getZerodhaMargin(e,i,r,s){let o=[];for(let l=0;l<i.length;l++){let c=i[l];if(c.exit!==null&&c.exit===0){let u={instru:e,expiry:c.expiry,strike:this.mapService.parseScrip(c.scrip).scrip,optionType:this.mapService.parseScrip(c.scrip).type},d=this.mapService.getMapKey(u),h="SELL";c.qty>0&&(h="BUY");let p="CDS";(r.includes("NIFTY")||r.includes("BANKNIFTY")||r.includes("FINNIFTY")||r.includes("MIDCPNIFTY"))&&(p="NFO"),(r.includes("SENSEX")||r.includes("BANKEX"))&&(p="BFO");let g={exchange:p,tradingsymbol:d,transaction_type:h,variety:"regular",product:"NRML",order_type:"MARKET",quantity:Math.abs(c.qty),price:0,trigger_price:0,squareoff:0,stoploss:0};o.push(g)}}let a={headers:new Fe({Authorization:s}),responseType:"json"};return this.http.post("https://kite.zerodha.com/oms/margins/basket?consider_positions=&mode=compact",o,a)}getZerodhaMargin_old(e,i,r,s){let o=new FormData;o.append("action","calculate");for(let a=0;a<r.length;a++){let l=r[a];if(l.exit!==null&&l.exit===0){let c=l.scrip.slice(0,-2),u="";l.scrip.includes("CE")&&(u="CE"),l.scrip.includes("PE")&&(u="PE");let d="sell";l.qty>0&&(d="buy");let h="CDS";s.includes("NIFTY")&&(h="NFO");let p=1e3;(s==="NIFTY"||s==="BANKNIFTY")&&(p=1);let g=e+f.year+i;o.append("exchange[]",h),o.append("product[]","OPT"),o.append("scrip[]",g),o.append("option_type[]",u),o.append("strike_price[]",c),o.append("qty[]",Math.abs(l.qty)/p),o.append("trade[]",d)}}return this.http.post("https://zerodha.com/margin-calculator/SPAN",o)}sendSubscriptions(e){f.SocketMode==="zerodha"?this.zerodhaService.sendSubscriptions(e):f.SocketMode==="aliceblue"?this.aliceblueService.sendSubscriptions(e):f.SocketMode==="angel"&&this.angelService.sendSubscriptions(e)}connectWebsocket(e){f.SocketMode==="aliceblue"?this.aliceblueService.connectWebsocket(e):f.SocketMode==="angel"&&this.angelService.angelLogin()}closeWebsocket(){f.SocketMode==="zerodha"?this.zerodhaService.closeWebsocket():f.SocketMode==="aliceblue"?this.aliceblueService.closeWebsocket():f.SocketMode}isSocketConnected(){return f.SocketMode==="zerodha"?this.zerodhaService.isSocketConnected():f.SocketMode==="aliceblue"?this.aliceblueService.isSocketConnected():f.SocketMode==="angel"?this.angelWS.isSocketConnected():!1}auth(){return f.RestMode==="fyers"?this.fyersService.auth():null}getTokenUrl(e,i){return f.RestMode==="fyers"?this.fyersService.getTokenUrl(e,i):""}getFunds(e){return f.SocketMode==="zerodha"?this.zerodhaService.getFunds():f.RestMode==="fyers"?this.fyersService.getFunds(e):Ie(null)}getPositions(e){return f.RestMode==="fyers"?this.fyersService.getPositions(e):Ie(null)}getOrders(e){return f.RestMode==="fyers"?this.fyersService.getOrders(e):Ie(null)}placeOrder(e,i,r,s,o,a,l,c){if(f.RestMode==="fyers"){let u={symbol:i,qty:r,type:s,side:o,productType:a,limitPrice:l,stopPrice:c,disclosedQty:0,validity:"DAY",offlineOrder:"False",stopLoss:0,takeProfit:0};return console.log("Order: "+u),this.fyersService.place_order(e,u)}return Ie(null)}getQtyUptoFreezeLimit(e,i,r){let s=f.freezeLimit[e];return r&&Math.abs(r)<Math.abs(i)?s<Math.abs(r)?r<0?-s:s:r:s<Math.abs(i)?i<0?-s:s:i}static \u0275fac=function(i){return new(i||n)(oe(It),oe(Js),oe(to),oe(sm),oe(Ir),oe(Ue),oe(Mn))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var am=(()=>{class n{http;mapService;fyersService;aliceblueService;zerodhaService;appService;optionChainEvent$=new ct;strategyPnLEvent$=new ct;intradayData=new Map;oc_instru;oc_year;oc_month;oc_date;oc_year2;oc_month2;oc_date2;oc_range_multiple;oc_range_higher;oc_range_lower;expiryString;expiryString2;oc_strikes;oc_strikes2;multi_oc_strikes1;multi_oc_strikes2;multi_oc_strikes3;multi_oc_strikes4;multi_oc_strikes5;ocSpotStrike;bfly_monitor;ds_monitor;charts={};candlestickSeries={};strike_interval;charts_instru;charts_expiry;charts_data={};fetch_delay=200;fetch_ce_interval;fetch_pe_interval;refresh_ce_interval;refresh_pe_interval;spot_chart_instru;spot_chart_chart;spot_candlestickSeries;spot_charts_data;single_strike_ce;single_strike_pe;single_chart_ce;single_chart_pe;single_chart_ce_candlestickSeries;single_chart_pe_candlestickSeries;constructor(e,i,r,s,o,a){this.http=e,this.mapService=i,this.fyersService=r,this.aliceblueService=s,this.zerodhaService=o,this.appService=a}getIntradayData(e,i,r){return this.intradayData.get(i+" "+r+" "+e)}loadIntradayData(e){console.log("Loading intraday data"),e.forEach(i=>{let r=JSON.parse(localStorage.getItem(i.instru+" "+i.expiry+" "+i.scrip));this.intradayData.set(i.instru+" "+i.expiry+" "+i.scrip,r)}),console.log("Loaded intraday data: ",this.intradayData)}initFetchIntraday(e){cp(500).subscribe(i=>{let r=new Date;r.setHours(17,5,0,0);let s=new Date;s.setHours(8,55,0,0);let o=new Date().getTime();o>r.getTime()||o<s.getTime()||new Date().getDay()===6||new Date().getDay()===0||e.forEach(a=>{let l=a.scrip,c=a.instru,u=a.expiry,d=null;if((l==="FUT"||l==="SPOT")&&(d=this.mapService.getScripLTP(null,null,c,null)),d){let h=this.intradayData.get(c+" "+u+" "+l);h||(h=[]);let p=new Date,g=[p.getFullYear(),p.getMonth()+1,p.getDate()].join("-")+" "+[p.getHours(),p.getMinutes()].join(":"),A=null;for(let y=0;y<h.length;y++)if(h[y].time&&h[y].time===g){A=y;break}A!==null?h[A]={time:g,price:d}:h.push({time:g,price:d}),this.intradayData.set(c+" "+u+" "+l,h)}})})}saveIntradayData(){cp(1e3).subscribe(e=>{for(let[i,r]of this.intradayData){let s=r;localStorage.setItem(i,JSON.stringify(s))}})}processOCRequest(e,i,r=null,s=null,o=null){this.oc_instru=e;let a=new Date(i);if(this.oc_year=a.getFullYear(),this.oc_month=a.getMonth()+1,this.oc_date=a.getDate(),this.oc_instru==="NIFTY"){this.oc_range_multiple=50;let l=this.mapService.getScripLTP(null,null,"NIFTY50",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+500,this.oc_range_lower=c-500}else if(this.oc_instru==="BANKNIFTY"){this.oc_range_multiple=100;let l=this.mapService.getScripLTP(null,null,"BANKNIFTY",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+1500,this.oc_range_lower=c-1500}else if(this.oc_instru==="FINNIFTY"){this.oc_range_multiple=50;let l=this.mapService.getScripLTP(null,null,"FINNIFTY",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+500,this.oc_range_lower=c-500}else if(this.oc_instru==="MIDCPNIFTY"){this.oc_range_multiple=25;let l=this.mapService.getScripLTP(null,null,"MIDCPNIFTY",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+300,this.oc_range_lower=c-300}else if(this.oc_instru==="SENSEX"){this.oc_range_multiple=100;let l=this.mapService.getScripLTP(null,null,"SENSEX",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+1500,this.oc_range_lower=c-1500}else if(this.oc_instru==="BANKEX"){this.oc_range_multiple=100;let l=this.mapService.getScripLTP(null,null,"BANKEX",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+1500,this.oc_range_lower=c-1500}else if(this.oc_instru==="USDINR"){this.oc_range_multiple=.25;let l=this.mapService.getScripLTP(null,null,"USDINR",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+2,this.oc_range_lower=c-2}this.updateOCRange(!1,r,s),o&&this.processOCRequest2(o)}processMultiOCRequest(e,i,r,s,o,a){if(this.oc_instru=e,this.oc_instru==="NIFTY"){this.oc_range_multiple=50;let l=this.mapService.getScripLTP(null,null,"NIFTY50",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+1e3,this.oc_range_lower=c-1e3}else if(this.oc_instru==="BANKNIFTY"){this.oc_range_multiple=100;let l=this.mapService.getScripLTP(null,null,"BANKNIFTY",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+1500,this.oc_range_lower=c-1500}else if(this.oc_instru==="FINNIFTY"){this.oc_range_multiple=50;let l=this.mapService.getScripLTP(null,null,"FINNIFTY",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+500,this.oc_range_lower=c-500}else if(this.oc_instru==="MIDCPNIFTY"){this.oc_range_multiple=25;let l=this.mapService.getScripLTP(null,null,"MIDCPNIFTY",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+300,this.oc_range_lower=c-300}else if(this.oc_instru==="SENSEX"){this.oc_range_multiple=100;let l=this.mapService.getScripLTP(null,null,"SENSEX",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+1500,this.oc_range_lower=c-1500}else if(this.oc_instru==="BANKEX"){this.oc_range_multiple=100;let l=this.mapService.getScripLTP(null,null,"BANKEX",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+1500,this.oc_range_lower=c-1500}else if(this.oc_instru==="USDINR"){this.oc_range_multiple=.25;let l=this.mapService.getScripLTP(null,null,"USDINR",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+2,this.oc_range_lower=c-2}this.updateMultiOCRange(!0,e,null,null,i,r,s,o,a)}updateMultiOCRange(e=!1,i,r=null,s=null,o,a,l,c,u){let d=this.mapService.getExpiry(new Date(o),i),h=this.mapService.getExpiry(new Date(a),i),p=this.mapService.getExpiry(new Date(l),i),g=this.mapService.getExpiry(new Date(c),i),A=this.mapService.getExpiry(new Date(u),i);console.log("chartService updateMultiOCRange: ",d,h),r&&(console.log("setting oc_range_higher",r),this.oc_range_higher=Number(r)),s&&(console.log("setting oc_range_lower",s),this.oc_range_lower=Number(s)),console.log("setting",r,this.oc_range_higher,s,this.oc_range_lower,this.oc_range_multiple),this.multi_oc_strikes1=[],this.multi_oc_strikes2=[],this.multi_oc_strikes3=[],this.multi_oc_strikes4=[],this.multi_oc_strikes5=[];for(let y=this.oc_range_lower;y<=this.oc_range_higher;y+=this.oc_range_multiple)this.multi_oc_strikes1.push({symbol:this.oc_instru+d+y,strike:y,ltpCE:0,ltpPE:0,isSpot:!1}),this.multi_oc_strikes2.push({symbol:this.oc_instru+h+y,strike:y,ltpCE:0,ltpPE:0,isSpot:!1}),this.multi_oc_strikes3.push({symbol:this.oc_instru+p+y,strike:y,ltpCE:0,ltpPE:0,isSpot:!1}),this.multi_oc_strikes4.push({symbol:this.oc_instru+g+y,strike:y,ltpCE:0,ltpPE:0,isSpot:!1}),this.multi_oc_strikes5.push({symbol:this.oc_instru+A+y,strike:y,ltpCE:0,ltpPE:0,isSpot:!1});if(console.log("chartService updateMultiOCRange: ",this.multi_oc_strikes1,this.multi_oc_strikes2),!f.isSimulatedStrategy&&e){let y=[];this.multi_oc_strikes1.forEach(b=>{y.push(this.mapService.getSubscriptionObject(b.strike+"CE",this.oc_instru,new Date(o).toDateString())),y.push(this.mapService.getSubscriptionObject(b.strike+"PE",this.oc_instru,new Date(o).toDateString()))}),this.multi_oc_strikes2.forEach(b=>{y.push(this.mapService.getSubscriptionObject(b.strike+"CE",this.oc_instru,new Date(a).toDateString())),y.push(this.mapService.getSubscriptionObject(b.strike+"PE",this.oc_instru,new Date(a).toDateString()))}),this.multi_oc_strikes3.forEach(b=>{y.push(this.mapService.getSubscriptionObject(b.strike+"CE",this.oc_instru,new Date(l).toDateString())),y.push(this.mapService.getSubscriptionObject(b.strike+"PE",this.oc_instru,new Date(l).toDateString()))}),this.multi_oc_strikes4.forEach(b=>{y.push(this.mapService.getSubscriptionObject(b.strike+"CE",this.oc_instru,new Date(c).toDateString())),y.push(this.mapService.getSubscriptionObject(b.strike+"PE",this.oc_instru,new Date(c).toDateString()))}),this.multi_oc_strikes5.forEach(b=>{y.push(this.mapService.getSubscriptionObject(b.strike+"CE",this.oc_instru,new Date(u).toDateString())),y.push(this.mapService.getSubscriptionObject(b.strike+"PE",this.oc_instru,new Date(u).toDateString()))}),console.log("chartService updateOCRange Subscriptions: "+y),this.appService.sendSubscriptions(y)}}updateMultiOCValues1(e){return this.multi_oc_strikes1&&this.multi_oc_strikes1.length>0&&this.multi_oc_strikes1.forEach(i=>{i.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(e),i.strike,"CE"),i.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(e),i.strike,"PE"),i.isSpot=this.isSpotStrike(i.strike)}),this.multi_oc_strikes1}updateMultiOCValues2(e){return this.multi_oc_strikes2&&this.multi_oc_strikes2.length>0&&this.multi_oc_strikes2.forEach(i=>{i.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(e),i.strike,"CE"),i.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(e),i.strike,"PE"),i.isSpot=this.isSpotStrike(i.strike)}),this.multi_oc_strikes2}updateMultiOCValues3(e){return this.multi_oc_strikes3&&this.multi_oc_strikes3.length>0&&this.multi_oc_strikes3.forEach(i=>{i.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(e),i.strike,"CE"),i.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(e),i.strike,"PE"),i.isSpot=this.isSpotStrike(i.strike)}),this.multi_oc_strikes3}updateMultiOCValues4(e){return this.multi_oc_strikes4&&this.multi_oc_strikes4.length>0&&this.multi_oc_strikes4.forEach(i=>{i.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(e),i.strike,"CE"),i.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(e),i.strike,"PE"),i.isSpot=this.isSpotStrike(i.strike)}),this.multi_oc_strikes4}updateMultiOCValues5(e){return this.multi_oc_strikes5&&this.multi_oc_strikes5.length>0&&this.multi_oc_strikes5.forEach(i=>{i.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(e),i.strike,"CE"),i.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(e),i.strike,"PE"),i.isSpot=this.isSpotStrike(i.strike)}),this.multi_oc_strikes5}updateOCRange(e=!1,i=null,r=null){this.expiryString=this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),this.oc_instru),i&&(console.log("setting oc_range_higher",i),this.oc_range_higher=Number(i)),r&&(console.log("setting oc_range_lower",r),this.oc_range_lower=Number(r)),console.log("setting",i,this.oc_range_higher,r,this.oc_range_lower,this.oc_range_multiple),this.oc_strikes=[];for(let s=this.oc_range_lower;s<=this.oc_range_higher;s+=this.oc_range_multiple)this.oc_strikes.push({symbol:this.oc_instru+this.expiryString+s,strike:s,inCurrStrategyCE:!1,inCurrStrategyPE:!1,addCEToOrders:!1,addPEToOrders:!1,qtyInputCE:200,qtyInputPE:200,volumeCE:0,volumePE:0,deltaCE:0,gammaCE:0,vegaCE:0,thetaCE:0,deltaPE:0,gammaPE:0,vegaPE:0,thetaPE:0,ltpCE:0,ltpPE:0,qtyCE:0,qtyPE:0,costCE:0,costPE:0,inlineStrategyPnLCE:"",inlineStrategyPnLPE:"",isSpot:!1,showNudge:!1});if(!f.isSimulatedStrategy&&e){let s=[];this.oc_strikes.forEach(o=>{s.push(this.mapService.getSubscriptionObject(o.strike+"CE",this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date).toDateString())),s.push(this.mapService.getSubscriptionObject(o.strike+"PE",this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date).toDateString()))}),console.log("chartService updateOCRange Subscriptions: "+s),this.appService.sendSubscriptions(s)}}updateOCValues(){return this.oc_strikes&&this.oc_strikes.length>0&&this.oc_strikes.forEach(e=>{e.inCurrStrategyCE=this.isStrikeInCurrStrategy(e.strike+"CE"),e.inCurrStrategyPE=this.isStrikeInCurrStrategy(e.strike+"PE"),e.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"CE"),e.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"PE"),e.qtyCE=this.getQtyOfStrikeInStrategy(e.strike+"CE"),e.qtyPE=this.getQtyOfStrikeInStrategy(e.strike+"PE"),e.costCE=Math.round((this.getCostOfStrikeInStrategy(e.strike+"CE")+1e-5)*100)/100,e.costPE=Math.round((this.getCostOfStrikeInStrategy(e.strike+"PE")+1e-5)*100)/100,e.isSpot=this.isSpotStrike(e.strike),e.showNudge=this.showOILimit(this.oc_instru,e.strike)}),this.oc_strikes}processOCRequest2(e){let i=new Date(e);this.oc_year2=i.getFullYear(),this.oc_month2=i.getMonth()+1,this.oc_date2=i.getDate(),this.updateOCRange2()}updateOCRange2(){this.expiryString2=this.mapService.getExpiry(new Date(this.oc_year2,this.oc_month2-1,this.oc_date2),this.oc_instru),this.oc_strikes2=[];for(let e=this.oc_range_lower;e<=this.oc_range_higher;e+=this.oc_range_multiple)this.oc_strikes2.push({symbol:this.oc_instru+this.expiryString2+e,strike:e,ltpCE:0,ltpPE:0});if(!f.isSimulatedStrategy){let e=[];this.oc_strikes2.forEach(i=>{e.push(this.mapService.getSubscriptionObject(i.strike+"CE",this.oc_instru,new Date(this.oc_year2,this.oc_month2-1,this.oc_date2).toDateString())),e.push(this.mapService.getSubscriptionObject(i.strike+"PE",this.oc_instru,new Date(this.oc_year2,this.oc_month2-1,this.oc_date2).toDateString()))}),console.log("updateOCRange2 Subscriptions: "+e),this.appService.sendSubscriptions(e)}}updateOCValues2(){return this.oc_strikes2&&this.oc_strikes2.length>0&&this.oc_strikes2.forEach(e=>{e.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year2,this.oc_month2-1,this.oc_date2),e.strike,"CE"),e.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year2,this.oc_month2-1,this.oc_date2),e.strike,"PE"),e.isSpot=this.isSpotStrike(e.strike)}),this.oc_strikes2}updateBflyMonitorStrikes(e){if(this.oc_strikes&&this.oc_strikes.length>0){let i=this.oc_instru;this.oc_instru==="NIFTY"&&(i="NIFTY50");let r=this.mapService.getScripLTP(null,null,i,null),s=Math.round(r/this.oc_range_multiple)*this.oc_range_multiple,o=s+this.oc_range_multiple*3,a=s-this.oc_range_multiple*3;this.bfly_monitor=[];for(let l=a;l<s;l+=this.oc_range_multiple){let c=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),l,"PE"),u=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),l-this.oc_range_multiple,"PE"),d=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),l+this.oc_range_multiple,"PE"),h=c*e+u*-e/2+d*-e/2,p=Math.round(h),g=Math.round(this.oc_range_multiple*-e/2-p);this.bfly_monitor.push({symbol:this.oc_instru+this.expiryString+l,strike:l,scrip:l+"PE",maxProfit:g,maxLoss:p});let A=c*e+u*-e,y=Math.round(A),b=Math.round(this.oc_range_multiple*e-y)}for(let l=s+this.oc_range_multiple;l<=o;l+=this.oc_range_multiple){let c=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),l,"CE"),u=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),l+this.oc_range_multiple,"CE"),d=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),l-this.oc_range_multiple,"CE"),h=c*e+u*-e/2+d*-e/2,p=Math.round(h),g=Math.round(this.oc_range_multiple*-e/2-p);this.bfly_monitor.push({symbol:this.oc_instru+this.expiryString+l,strike:l,scrip:l+"CE",maxProfit:g,maxLoss:p});let A=c*e+u*-e,y=Math.round(A),b=Math.round(this.oc_range_multiple*e-y)}}return this.bfly_monitor}updateDSMonitorStrikes(e){if(this.oc_strikes&&this.oc_strikes.length>0){let i=this.oc_instru;this.oc_instru==="NIFTY"&&(i="NIFTY50");let r=this.mapService.getScripLTP(null,null,i,null),s=Math.round(r/this.oc_range_multiple)*this.oc_range_multiple,o=s+this.oc_range_multiple*3,a=s-this.oc_range_multiple*3;this.ds_monitor=[];for(let l=a;l<s;l+=this.oc_range_multiple){let c=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),l,"PE"),u=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),l-this.oc_range_multiple,"PE"),d=c*e+u*-e,h=Math.round(d),p=Math.round(this.oc_range_multiple*e-h);this.ds_monitor.push({symbol:this.oc_instru+this.expiryString+l,strike:l,scrip:l+"PE",maxProfit:-p,maxLoss:-h})}for(let l=s+this.oc_range_multiple;l<=o;l+=this.oc_range_multiple){let c=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),l,"CE"),u=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),l+this.oc_range_multiple,"CE"),d=c*e+u*-e,h=Math.round(d),p=Math.round(this.oc_range_multiple*e-h);this.ds_monitor.push({symbol:this.oc_instru+this.expiryString+l,strike:l,scrip:l+"CE",maxProfit:-p,maxLoss:-h})}}return this.ds_monitor}getQtyOfStrikeInStrategy(e){let i=f.curr_positions_trades;if(i){for(let r=0;r<i.length;r++){let s=i[r],o=new Date(this.oc_year,this.oc_month-1,this.oc_date),a=new Date(s.expiry);if(o.getDate()===a.getDate()&&s.scrip===e&&s.exit===0)return s.qty}return null}}getCostOfStrikeInStrategy(e){let i=f.curr_positions_trades;if(i){for(let r=0;r<i.length;r++){let s=i[r],o=new Date(this.oc_year,this.oc_month-1,this.oc_date),a=new Date(s.expiry);if(o.getDate()===a.getDate()&&s.scrip===e&&s.exit===0)return s.entry}return null}}isStrikeInCurrStrategy(e){let i=f.curr_positions_trades;if(i)for(let r=0;r<i.length;r++){let s=i[r],o=new Date(this.oc_year,this.oc_month-1,this.oc_date),a=new Date(s.expiry);if(s.exit===0&&o.getDate()===a.getDate()&&s.scrip===e)return!0}return!1}isChartStrikeInCurrStrategy(e){let i=f.curr_positions_trades;if(i){for(let r=0;r<i.length;r++){let s=i[r];if(s.exit===0&&s.scrip===e)return s.qty}return""}}fetchChartData(e,i,r){let s=this.mapService.getSubscriptionObject(e,i,r),o=this.zerodhaService.findStrikeInMasters(s),a=this.appService.getLastWorkingDay(new Date),l=""+a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2),c=new Date,u=""+c.getFullYear()+"-"+("0"+(c.getMonth()+1)).slice(-2)+"-"+("0"+c.getDate()).slice(-2);if(o&&o.token){let h={responseType:"json",headers:new Fe({authorization:f.broker_auth})},p="https://kite.zerodha.com/oms/instruments/historical/"+o.token+"/minute?user_id="+f.zerodhaUserId+"&oi=1&from="+l+"&to="+u;return this.http.get(p,h)}return null}updateSpotStrike(){let e="";this.oc_instru==="NIFTY"?e="NIFTY50":this.oc_instru==="BANKNIFTY"?e="BANKNIFTY":this.oc_instru==="FINNIFTY"?e="FINNIFTY":this.oc_instru==="MIDCPNIFTY"?e="MIDCPNIFTY":this.oc_instru==="SENSEX"?e="SENSEX":this.oc_instru==="BANKEX"?e="BANKEX":this.oc_instru==="USDINR"&&(e="USDINR");let i=this.mapService.getScripLTP(null,null,e,null),r=Math.round(i/this.oc_range_multiple)*this.oc_range_multiple;this.ocSpotStrike=r}isSpotStrike(e){return e===this.ocSpotStrike}showOILimit(e,i){return!!(e==="NIFTY"&&f.nfCEOILimit&&f.nfPEOILimit&&(i>f.nfCEOILimit||i<f.nfPEOILimit)||e==="BANKNIFTY"&&f.bnfCEOILimit&&f.bnfPEOILimit&&(i>f.bnfCEOILimit||i<f.bnfPEOILimit))}static \u0275fac=function(i){return new(i||n)(oe(It),oe(Ue),oe(Js),oe(to),oe(Mn),oe(ni))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yt(n){var t=n.width,e=n.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(e<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:e}}function kr(n,t){return n.width===t.width&&n.height===t.height}var IQ=function(){function n(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return n.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(n.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),n.prototype.subscribe=function(t){var e=this,i={next:t};return this._observers.push(i),{unsubscribe:function(){e._observers=e._observers.filter(function(r){return r!==i})}}},n.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},n.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},n.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},n.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},n}();function gR(n){return new IQ(n)}var kQ=function(){function n(t,e,i){var r;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=yt({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=e??function(s){return s},this._allowResizeObserver=(r=i?.allowResizeObserver)!==null&&r!==void 0?r:!0,this._chooseAndInitObserver()}return n.prototype.dispose=function(){var t,e;if(this._canvasElement===null)throw new Error("Object is disposed");(t=this._canvasElementResizeObserver)===null||t===void 0||t.disconnect(),this._canvasElementResizeObserver=null,(e=this._devicePixelRatioObservable)===null||e===void 0||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(n.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bitmapSize",{get:function(){return yt({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),n.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=yt(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},n.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},n.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(n.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),n.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},n.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},n.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},n.prototype._resizeBitmap=function(t){var e=this.bitmapSize;kr(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},n.prototype._emitBitmapSizeChanged=function(t,e){var i=this;this._bitmapSizeChangedListeners.forEach(function(r){return r.call(i,t,e)})},n.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,i=yt(this._transformBitmapSize(t,this._canvasElementClientSize)),r=kr(this.bitmapSize,i)?null:i;e===null&&r===null||e!==null&&r!==null&&kr(e,r)||(this._suggestedBitmapSize=r,this._emitSuggestedBitmapSizeChanged(e,r))},n.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(r){return r.call(i,t,e)})},n.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}PQ().then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})},n.prototype._initDevicePixelRatioObservable=function(){var t=this;if(this._canvasElement!==null){var e=mR(this._canvasElement);if(e===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=gR(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},n.prototype._invalidateBitmapSize=function(){var t,e;if(this._canvasElement!==null){var i=mR(this._canvasElement);if(i!==null){var r=(e=(t=this._devicePixelRatioObservable)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:i.devicePixelRatio,s=this._canvasElement.getClientRects(),o=s[0]!==void 0?NQ(s[0],r):yt({width:this._canvasElementClientSize.width*r,height:this._canvasElementClientSize.height*r});this._suggestNewBitmapSize(o)}}},n.prototype._initResizeObserver=function(){var t=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var i=e.find(function(o){return o.target===t._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var r=i.devicePixelContentBoxSize[0],s=yt({width:r.inlineSize,height:r.blockSize});t._suggestNewBitmapSize(s)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},n}();function fb(n,t){if(t.type==="device-pixel-content-box")return new kQ(n,t.transform,t.options);throw new Error("Unsupported binding target")}function mR(n){return n.ownerDocument.defaultView}function PQ(){return new Promise(function(n){var t=new ResizeObserver(function(e){n(e.every(function(i){return"devicePixelContentBoxSize"in i})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function NQ(n,t){return yt({width:Math.round(n.left*t+n.width*t)-Math.round(n.left*t),height:Math.round(n.top*t+n.height*t)-Math.round(n.top*t)})}var _R=function(){function n(t,e,i){if(e.width===0||e.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=t}return n.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},n.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(n.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),n}();function us(n,t){var e=n.canvasElementClientSize;if(e.width===0||e.height===0)return null;var i=n.bitmapSize;if(i.width===0||i.height===0)return null;var r=n.canvasElement.getContext("2d",t);return r===null?null:new _R(r,e,i)}var o5={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},AR,bh;function Mc(n,t){let e={0:[],1:[n.lineWidth,n.lineWidth],2:[2*n.lineWidth,2*n.lineWidth],3:[6*n.lineWidth,6*n.lineWidth],4:[n.lineWidth,4*n.lineWidth]}[t];n.setLineDash(e)}function a5(n,t,e,i){n.beginPath();let r=n.lineWidth%2?.5:0;n.moveTo(e,t+r),n.lineTo(i,t+r),n.stroke()}function jn(n,t){if(!n)throw new Error("Assertion failed"+(t?": "+t:""))}function ii(n){if(n===void 0)throw new Error("Value is undefined");return n}function le(n){if(n===null)throw new Error("Value is null");return n}function Ca(n){return le(ii(n))}(function(n){n[n.Simple=0]="Simple",n[n.WithSteps=1]="WithSteps",n[n.Curved=2]="Curved"})(AR||(AR={})),function(n){n[n.Solid=0]="Solid",n[n.Dotted=1]="Dotted",n[n.Dashed=2]="Dashed",n[n.LargeDashed=3]="LargeDashed",n[n.SparseDotted=4]="SparseDotted"}(bh||(bh={}));var zt=class{constructor(){this.t=[]}i(t,e,i){let r={h:t,l:e,o:i===!0};this.t.push(r)}_(t){let e=this.t.findIndex(i=>t===i.h);e>-1&&this.t.splice(e,1)}u(t){this.t=this.t.filter(e=>e.l!==t)}p(t,e,i){let r=[...this.t];this.t=this.t.filter(s=>!s.o),r.forEach(s=>s.h(t,e,i))}v(){return this.t.length>0}m(){this.t=[]}};function fi(n,...t){for(let e of t)for(let i in e)e[i]!==void 0&&Object.prototype.hasOwnProperty.call(e,i)&&!["__proto__","constructor","prototype"].includes(i)&&(typeof e[i]!="object"||n[i]===void 0||Array.isArray(e[i])?n[i]=e[i]:fi(n[i],e[i]));return n}function xa(n){return typeof n=="number"&&isFinite(n)}function Sh(n){return typeof n=="number"&&n%1==0}function Mh(n){return typeof n=="string"}function lm(n){return typeof n=="boolean"}function ds(n){let t=n;if(!t||typeof t!="object")return t;let e,i,r;for(i in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(i)&&(r=t[i],e[i]=r&&typeof r=="object"?ds(r):r);return e}function OQ(n){return n!==null}function Ch(n){return n===null?void 0:n}var l5="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function xh(n,t,e){return t===void 0&&(t=l5),`${e=e!==void 0?`${e} `:""}${n}px ${t}`}var kb=class{constructor(t){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,I:0,B:0,A:0,L:0},this.O=t}N(){let t=this.M,e=this.W(),i=this.F();return t.P===e&&t.T===i||(t.P=e,t.T=i,t.k=xh(e,i),t.A=2.5/12*e,t.V=t.A,t.I=e/12*t.C,t.B=e/12*t.C,t.L=0),t.R=this.H(),t.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}W(){return this.O.N().layout.fontSize}F(){return this.O.N().layout.fontFamily}};function gb(n){return n<0?0:n>255?255:Math.round(n)||0}function yR(n){return .199*n[0]+.687*n[1]+.114*n[2]}var Pb=class{constructor(t,e){this.q=new Map,this.Y=t,e&&(this.q=e)}j(t,e){if(t==="transparent")return t;let i=this.Z(t),r=i[3];return`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${e*r})`}K(t){let e=this.Z(t);return{X:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,G:yR(e)>160?"black":"white"}}J(t){return yR(this.Z(t))}tt(t,e,i){let[r,s,o,a]=this.Z(t),[l,c,u,d]=this.Z(e),h=[gb(r+i*(l-r)),gb(s+i*(c-s)),gb(o+i*(u-o)),(p=a+i*(d-a),p<=0||p>1?Math.min(Math.max(p,0),1):Math.round(1e4*p)/1e4)];var p;return`rgba(${h[0]}, ${h[1]}, ${h[2]}, ${h[3]})`}Z(t){let e=this.q.get(t);if(e)return e;let i=function(o){let a=document.createElement("div");a.style.display="none",document.body.appendChild(a),a.style.color=o;let l=window.getComputedStyle(a).color;return document.body.removeChild(a),l}(t),r=i.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!r){if(this.Y.length)for(let o of this.Y){let a=o(t);if(a)return this.q.set(t,a),a}throw new Error(`Failed to parse color: ${t}`)}let s=[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),r[4]?parseFloat(r[4]):1];return this.q.set(t,s),s}},Nb=class{constructor(){this.it=[]}st(t){this.it=t}nt(t,e,i){this.it.forEach(r=>{r.nt(t,e,i)})}},Nr=class{nt(t,e,i){t.useBitmapCoordinateSpace(r=>this.et(r,e,i))}},Ob=class extends Nr{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(this.rt===null||this.rt.lt===null)return;let r=this.rt.lt,s=this.rt,o=Math.max(1,Math.floor(e))%2/2,a=l=>{t.beginPath();for(let c=r.to-1;c>=r.from;--c){let u=s.ot[c],d=Math.round(u._t*e)+o,h=u.ut*i,p=l*i+o;t.moveTo(d,h),t.arc(d,h,p,0,2*Math.PI)}t.fill()};s.ct>0&&(t.fillStyle=s.dt,a(s.ft+s.ct)),t.fillStyle=s.vt,a(s.ft)}};function RQ(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}var FQ={from:0,to:1},Rb=class{constructor(t,e,i){this.Mt=new Nb,this.bt=[],this.xt=[],this.St=!0,this.O=t,this.Ct=e,this.yt=i,this.Mt.st(this.bt)}Pt(t){this.kt(),this.St=!0}Tt(){return this.St&&(this.Rt(),this.St=!1),this.Mt}kt(){let t=this.yt.Dt();t.length!==this.bt.length&&(this.xt=t.map(RQ),this.bt=this.xt.map(e=>{let i=new Ob;return i.ht(e),i}),this.Mt.st(this.bt))}Rt(){let t=this.Ct.N().mode===2||!this.Ct.Vt(),e=this.yt.It(),i=this.Ct.Bt(),r=this.O.At();this.kt(),e.forEach((s,o)=>{let a=this.xt[o],l=s.Et(i),c=s.zt();!t&&l!==null&&s.Vt()&&c!==null?(a.vt=l.Lt,a.ft=l.ft,a.ct=l.Ot,a.ot[0].gt=l.gt,a.ot[0].ut=s.Wt().Nt(l.gt,c.Ft),a.dt=l.Ht??this.O.Ut(a.ot[0].ut/s.Wt().$t()),a.ot[0].wt=i,a.ot[0]._t=r.qt(i),a.lt=FQ):a.lt=null})}},Fb=class extends Nr{constructor(t){super(),this.Yt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.Yt===null)return;let s=this.Yt.jt.Vt,o=this.Yt.Zt.Vt;if(!s&&!o)return;let a=Math.round(this.Yt._t*i),l=Math.round(this.Yt.ut*r);t.lineCap="butt",s&&a>=0&&(t.lineWidth=Math.floor(this.Yt.jt.ct*i),t.strokeStyle=this.Yt.jt.R,t.fillStyle=this.Yt.jt.R,Mc(t,this.Yt.jt.Kt),function(c,u,d,h){c.beginPath();let p=c.lineWidth%2?.5:0;c.moveTo(u+p,d),c.lineTo(u+p,h),c.stroke()}(t,a,0,e.height)),o&&l>=0&&(t.lineWidth=Math.floor(this.Yt.Zt.ct*r),t.strokeStyle=this.Yt.Zt.R,t.fillStyle=this.Yt.Zt.R,Mc(t,this.Yt.Zt.Kt),a5(t,l,0,e.width))}},Lb=class{constructor(t,e){this.St=!0,this.Xt={jt:{ct:1,Kt:0,R:"",Vt:!1},Zt:{ct:1,Kt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new Fb(this.Xt),this.Jt=t,this.yt=e}Pt(){this.St=!0}Tt(t){return this.St&&(this.Rt(),this.St=!1),this.Gt}Rt(){let t=this.Jt.Vt(),e=this.yt.Qt().N().crosshair,i=this.Xt;if(e.mode===2)return i.Zt.Vt=!1,void(i.jt.Vt=!1);i.Zt.Vt=t&&this.Jt.ti(this.yt),i.jt.Vt=t&&this.Jt.ii(),i.Zt.ct=e.horzLine.width,i.Zt.Kt=e.horzLine.style,i.Zt.R=e.horzLine.color,i.jt.ct=e.vertLine.width,i.jt.Kt=e.vertLine.style,i.jt.R=e.vertLine.color,i._t=this.Jt.si(),i.ut=this.Jt.ni()}};function LQ(n,t,e,i,r,s){n.fillRect(t+s,e,i-2*s,s),n.fillRect(t+s,e+r-s,i-2*s,s),n.fillRect(t,e,s,r),n.fillRect(t+i-s,e,s,r)}function Fm(n,t,e,i,r,s){n.save(),n.globalCompositeOperation="copy",n.fillStyle=s,n.fillRect(t,e,i,r),n.restore()}function vR(n,t,e,i,r,s){n.beginPath(),n.roundRect?n.roundRect(t,e,i,r,s):(n.lineTo(t+i-s[1],e),s[1]!==0&&n.arcTo(t+i,e,t+i,e+s[1],s[1]),n.lineTo(t+i,e+r-s[2]),s[2]!==0&&n.arcTo(t+i,e+r,t+i-s[2],e+r,s[2]),n.lineTo(t+s[3],e+r),s[3]!==0&&n.arcTo(t,e+r,t,e+r-s[3],s[3]),n.lineTo(t,e+s[0]),s[0]!==0&&n.arcTo(t,e,t+s[0],e,s[0]))}function wR(n,t,e,i,r,s,o=0,a=[0,0,0,0],l=""){if(n.save(),!o||!l||l===s)return vR(n,t,e,i,r,a),n.fillStyle=s,n.fill(),void n.restore();let c=o/2;var u;vR(n,t+c,e+c,i-o,r-o,(u=-c,a.map(d=>d===0?d:d+u))),s!=="transparent"&&(n.fillStyle=s,n.fill()),l!=="transparent"&&(n.lineWidth=o,n.strokeStyle=l,n.closePath(),n.stroke()),n.restore()}function c5(n,t,e,i,r,s,o){n.save(),n.globalCompositeOperation="copy";let a=n.createLinearGradient(0,0,0,r);a.addColorStop(0,s),a.addColorStop(1,o),n.fillStyle=a,n.fillRect(t,e,i,r),n.restore()}var Am=class{constructor(t,e){this.ht(t,e)}ht(t,e){this.Yt=t,this.ei=e}$t(t,e){return this.Yt.Vt?t.P+t.A+t.V:0}nt(t,e,i,r){if(!this.Yt.Vt||this.Yt.ri.length===0)return;let s=this.Yt.R,o=this.ei.X,a=t.useBitmapCoordinateSpace(l=>{let c=l.context;c.font=e.k;let u=this.hi(l,e,i,r),d=u.ai;return u.li?wR(c,d.oi,d._i,d.ui,d.ci,o,d.di,[d.ft,0,0,d.ft],o):wR(c,d.fi,d._i,d.ui,d.ci,o,d.di,[0,d.ft,d.ft,0],o),this.Yt.pi&&(c.fillStyle=s,c.fillRect(d.fi,d.mi,d.wi-d.fi,d.gi)),this.Yt.Mi&&(c.fillStyle=e.D,c.fillRect(u.li?d.bi-d.di:0,d._i,d.di,d.xi-d._i)),u});t.useMediaCoordinateSpace(({context:l})=>{let c=a.Si;l.font=e.k,l.textAlign=a.li?"right":"left",l.textBaseline="middle",l.fillStyle=s,l.fillText(this.Yt.ri,c.Ci,(c._i+c.xi)/2+c.yi)})}hi(t,e,i,r){let{context:s,bitmapSize:o,mediaSize:a,horizontalPixelRatio:l,verticalPixelRatio:c}=t,u=this.Yt.pi||!this.Yt.Pi?e.C:0,d=this.Yt.ki?e.S:0,h=e.A+this.ei.Ti,p=e.V+this.ei.Ri,g=e.I,A=e.B,y=this.Yt.ri,b=e.P,x=i.Di(s,y),P=Math.ceil(i.Vi(s,y)),T=b+h+p,k=e.S+g+A+P+u,C=Math.max(1,Math.floor(c)),M=Math.round(T*c);M%2!=C%2&&(M+=1);let O=d>0?Math.max(1,Math.floor(d*l)):0,R=Math.round(k*l),q=Math.round(u*l),H=this.ei.Ii??this.ei.Bi,Z=Math.round(H*c)-Math.floor(.5*c),ne=Math.floor(Z+C/2-M/2),ce=ne+M,G=r==="right",$=G?a.width-d:d,ee=G?o.width-O:O,ye,de,ge;return G?(ye=ee-R,de=ee-q,ge=$-u-g-d):(ye=ee+R,de=ee+q,ge=$+u+g),{li:G,ai:{_i:ne,mi:Z,xi:ce,ui:R,ci:M,ft:2*l,di:O,oi:ye,fi:ee,wi:de,gi:C,bi:o.width},Si:{_i:ne/c,xi:ce/c,Ci:ge,yi:x}}}},Tc=class{constructor(t){this.Ai={Bi:0,X:"#000",Ri:0,Ti:0},this.Ei={ri:"",Vt:!1,pi:!0,Pi:!1,Ht:"",R:"#FFF",Mi:!1,ki:!1},this.zi={ri:"",Vt:!1,pi:!1,Pi:!0,Ht:"",R:"#FFF",Mi:!0,ki:!0},this.St=!0,this.Li=new(t||Am)(this.Ei,this.Ai),this.Oi=new(t||Am)(this.zi,this.Ai)}ri(){return this.Ni(),this.Ei.ri}Bi(){return this.Ni(),this.Ai.Bi}Pt(){this.St=!0}$t(t,e=!1){return Math.max(this.Li.$t(t,e),this.Oi.$t(t,e))}Wi(){return this.Ai.Ii||0}Fi(t){this.Ai.Ii=t}Hi(){return this.Ni(),this.Ei.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ei.Vt}Tt(t){return this.Ni(),this.Ei.pi=this.Ei.pi&&t.N().ticksVisible,this.zi.pi=this.zi.pi&&t.N().ticksVisible,this.Li.ht(this.Ei,this.Ai),this.Oi.ht(this.zi,this.Ai),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ei,this.Ai),this.Oi.ht(this.zi,this.Ai),this.Oi}Ni(){this.St&&(this.Ei.pi=!0,this.zi.pi=!1,this.qi(this.Ei,this.zi,this.Ai))}},Vb=class extends Tc{constructor(t,e,i){super(),this.Jt=t,this.Yi=e,this.ji=i}qi(t,e,i){if(t.Vt=!1,this.Jt.N().mode===2)return;let r=this.Jt.N().horzLine;if(!r.labelVisible)return;let s=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Zi()||s===null)return;let o=this.Yi.Ki().K(r.labelBackgroundColor);i.X=o.X,t.R=o.G;let a=2/12*this.Yi.P();i.Ti=a,i.Ri=a;let l=this.ji(this.Yi);i.Bi=l.Bi,t.ri=this.Yi.Xi(l.gt,s),t.Vt=!0}},VQ=/[1-9]/g,ym=class{constructor(){this.Yt=null}ht(t){this.Yt=t}nt(t,e){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;let i=t.useMediaCoordinateSpace(({context:h})=>(h.font=e.k,Math.round(e.Gi.Vi(h,le(this.Yt).ri,VQ))));if(i<=0)return;let r=e.Ji,s=i+2*r,o=s/2,a=this.Yt.Qi,l=this.Yt.Bi,c=Math.floor(l-o)+.5;c<0?(l+=Math.abs(0-c),c=Math.floor(l-o)+.5):c+s>a&&(l-=Math.abs(a-(c+s)),c=Math.floor(l-o)+.5);let u=c+s,d=Math.ceil(0+e.S+e.C+e.A+e.P+e.V);t.useBitmapCoordinateSpace(({context:h,horizontalPixelRatio:p,verticalPixelRatio:g})=>{let A=le(this.Yt);h.fillStyle=A.X;let y=Math.round(c*p),b=Math.round(0*g),x=Math.round(u*p),P=Math.round(d*g),T=Math.round(2*p);if(h.beginPath(),h.moveTo(y,b),h.lineTo(y,P-T),h.arcTo(y,P,y+T,P,T),h.lineTo(x-T,P),h.arcTo(x,P,x,P-T,T),h.lineTo(x,b),h.fill(),A.pi){let k=Math.round(A.Bi*p),C=b,M=Math.round((C+e.C)*g);h.fillStyle=A.R;let O=Math.max(1,Math.floor(p)),R=Math.floor(.5*p);h.fillRect(k-R,C,O,M-C)}}),t.useMediaCoordinateSpace(({context:h})=>{let p=le(this.Yt),g=0+e.S+e.C+e.A+e.P/2;h.font=e.k,h.textAlign="left",h.textBaseline="middle",h.fillStyle=p.R;let A=e.Gi.Di(h,"Apr0");h.translate(c+r,g+A),h.fillText(p.ri,0,0)})}},Bb=class{constructor(t,e,i){this.St=!0,this.Gt=new ym,this.Xt={Vt:!1,X:"#4c525e",R:"white",ri:"",Qi:0,Bi:NaN,pi:!0},this.Ct=t,this.ts=e,this.ji=i}Pt(){this.St=!0}Tt(){return this.St&&(this.Rt(),this.St=!1),this.Gt.ht(this.Xt),this.Gt}Rt(){let t=this.Xt;if(t.Vt=!1,this.Ct.N().mode===2)return;let e=this.Ct.N().vertLine;if(!e.labelVisible)return;let i=this.ts.At();if(i.Zi())return;t.Qi=i.Qi();let r=this.ji();if(r===null)return;t.Bi=r.Bi;let s=i.ss(this.Ct.Bt());t.ri=i.ns(le(s)),t.Vt=!0;let o=this.ts.Ki().K(e.labelBackgroundColor);t.X=o.X,t.R=o.G,t.pi=i.N().ticksVisible}},vm=class{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(t){this.rs=t}Wt(){return this.es}_s(t){this.es=t}us(t){return[]}cs(){return[]}Vt(){return!0}},Ht;(function(n){n[n.Normal=0]="Normal",n[n.Magnet=1]="Magnet",n[n.Hidden=2]="Hidden",n[n.MagnetOHLC=3]="MagnetOHLC"})(Ht||(Ht={}));var qb=class extends vm{constructor(t,e){super(),this.yt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.xs=NaN,this.Ss=NaN,this.Cs=NaN,this.ts=t,this.ys=e,this.Ps=((r,s)=>o=>{let a=s(),l=r();if(o===le(this.yt).ks())return{gt:l,Bi:a};{let c=le(o.zt());return{gt:o.Ts(a,c),Bi:a}}})(()=>this.ds,()=>this.xs);let i=((r,s)=>()=>{let o=this.ts.At().Rs(r()),a=s();return o&&Number.isFinite(a)?{wt:o,Bi:a}:null})(()=>this.fs,()=>this.si());this.Ds=new Bb(this,t,i)}N(){return this.ys}Vs(t,e){this.Ss=t,this.Cs=e}Is(){this.Ss=NaN,this.Cs=NaN}Bs(){return this.Ss}As(){return this.Cs}Es(t,e,i){this.ws||(this.ws=!0),this.ps=!0,this.zs(t,e,i)}Bt(){return this.fs}si(){return this.bs}ni(){return this.xs}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.xs=NaN,this.yt=null,this.Is(),this.Ns()}Ws(t){let e=this.gs.get(t);e||(e=new Lb(this,t),this.gs.set(t,e));let i=this.Ms.get(t);return i||(i=new Rb(this.ts,this,t),this.Ms.set(t,i)),[e,i]}ti(t){return t===this.yt&&this.ys.horzLine.visible}ii(){return this.ys.vertLine.visible}Fs(t,e){this.ps&&this.yt===t||this.vs.clear();let i=[];return this.yt===t&&i.push(this.Hs(this.vs,e,this.Ps)),i}cs(){return this.ps?[this.Ds]:[]}Us(){return this.yt}Ns(){this.ts.$s().forEach(t=>{this.gs.get(t)?.Pt(),this.Ms.get(t)?.Pt()}),this.vs.forEach(t=>t.Pt()),this.Ds.Pt()}qs(t){return t&&!t.ks().Zi()?t.ks():null}zs(t,e,i){this.Ys(t,e,i)&&this.Ns()}Ys(t,e,i){let r=this.bs,s=this.xs,o=this.ds,a=this.fs,l=this.yt,c=this.qs(i);this.fs=t,this.bs=isNaN(t)?NaN:this.ts.At().qt(t),this.yt=i;let u=c!==null?c.zt():null;return c!==null&&u!==null?(this.ds=e,this.xs=c.Nt(e,u)):(this.ds=NaN,this.xs=NaN),r!==this.bs||s!==this.xs||a!==this.fs||o!==this.ds||l!==this.yt}Os(){let t=this.ts.js().map(i=>i.Ks().Zs()).filter(OQ),e=t.length===0?null:Math.max(...t);this.fs=e!==null?e:NaN}Hs(t,e,i){let r=t.get(e);return r===void 0&&(r=new Vb(this,e,i),t.set(e,r)),r}};function Lm(n){return n==="left"||n==="right"}var Tn=class n{constructor(t){this.Xs=new Map,this.Gs=[],this.Js=t}Qs(t,e){let i=function(r,s){return r===void 0?s:{tn:Math.max(r.tn,s.tn),sn:r.sn||s.sn}}(this.Xs.get(t),e);this.Xs.set(t,i)}nn(){return this.Js}en(t){let e=this.Xs.get(t);return e===void 0?{tn:this.Js}:{tn:Math.max(this.Js,e.tn),sn:e.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(t){this.hn(),this.Gs=[{an:1,Ft:t}]}_n(t){this.un(),this.Gs.push({an:5,Ft:t})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(t){this.hn(),this.Gs.push({an:2,Ft:t})}fn(t){this.hn(),this.Gs.push({an:3,Ft:t})}pn(){return this.Gs}vn(t){for(let e of t.Gs)this.mn(e);this.Js=Math.max(this.Js,t.Js),t.Xs.forEach((e,i)=>{this.Qs(i,e)})}static wn(){return new n(2)}static gn(){return new n(3)}mn(t){switch(t.an){case 0:this.rn();break;case 1:this.ln(t.Ft);break;case 2:this.dn(t.Ft);break;case 3:this.fn(t.Ft);break;case 4:this.cn();break;case 5:this._n(t.Ft);break;case 6:this.un()}}un(){let t=this.Gs.findIndex(e=>e.an===5);t!==-1&&this.Gs.splice(t,1)}},bR=".";function hs(n,t){if(!xa(n))return"n/a";if(!Sh(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return t===0?n.toString():("0000000000000000"+n.toString()).slice(-t)}var Ic=class{constructor(t,e){if(e||(e=1),xa(t)&&Sh(t)||(t=100),t<0)throw new TypeError("invalid base");this.Yi=t,this.Mn=e,this.bn()}format(t){let e=t<0?"\u2212":"";return t=Math.abs(t),e+this.xn(t)}bn(){if(this.Sn=0,this.Yi>0&&this.Mn>0){let t=this.Yi;for(;t>1;)t/=10,this.Sn++}}xn(t){let e=this.Yi/this.Mn,i=Math.floor(t),r="",s=this.Sn!==void 0?this.Sn:NaN;if(e>1){let o=+(Math.round(t*e)-i*e).toFixed(this.Sn);o>=e&&(o-=e,i+=1),r=bR+hs(+o.toFixed(this.Sn)*this.Mn,s)}else i=Math.round(i*e)/e,s>0&&(r=bR+hs(0,s));return i.toFixed(0)+r}},wm=class extends Ic{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}},jb=class{constructor(t){this.Cn=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.yn(t):t<999995?e+this.yn(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.yn(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.yn(t/1e9)+"B")}yn(t){let e,i=Math.pow(10,this.Cn);return e=(t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.Cn).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,(r,s)=>s)}},BQ=/[2-9]/g,Ea=class{constructor(t=50){this.Pn=0,this.kn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=t}In(){this.Pn=0,this.Dn.clear(),this.kn=1,this.Tn=1,this.Rn={}}Vi(t,e,i){return this.Bn(t,e,i).width}Di(t,e,i){let r=this.Bn(t,e,i);return((r.actualBoundingBoxAscent||0)-(r.actualBoundingBoxDescent||0))/2}Bn(t,e,i){let r=i||BQ,s=String(e).replace(r,"0");if(this.Dn.has(s))return ii(this.Dn.get(s)).An;if(this.Pn===this.Vn){let a=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(a),this.Tn++,this.Pn--}t.save(),t.textBaseline="middle";let o=t.measureText(s);return t.restore(),o.width===0&&e.length||(this.Dn.set(s,{An:o,En:this.kn}),this.Rn[this.kn]=s,this.Pn++,this.kn++),o}},Wb=class{constructor(t){this.zn=null,this.M=null,this.Ln="right",this.On=t}Nn(t,e,i){this.zn=t,this.M=e,this.Ln=i}nt(t){this.M!==null&&this.zn!==null&&this.zn.nt(t,this.M,this.On,this.Ln)}},bm=class{constructor(t,e,i){this.Wn=t,this.On=new Ea(50),this.Fn=e,this.O=i,this.W=-1,this.Gt=new Wb(this.On)}Tt(){let t=this.O.Hn(this.Fn);if(t===null)return null;let e=t.Un(this.Fn)?t.$n():this.Fn.Wt();if(e===null)return null;let i=t.qn(e);if(i==="overlay")return null;let r=this.O.Yn();return r.P!==this.W&&(this.W=r.P,this.On.In()),this.Gt.Nn(this.Wn.$i(),r,i),this.Gt}},Ub=class extends Nr{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}jn(t,e){if(!this.Yt?.Vt)return null;let{ut:i,ct:r,Zn:s}=this.Yt;return e>=i-r-7&&e<=i+r+7?{Kn:this.Yt,Zn:s}:null}et({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.Yt===null||this.Yt.Vt===!1)return;let s=Math.round(this.Yt.ut*r);s<0||s>e.height||(t.lineCap="butt",t.strokeStyle=this.Yt.R,t.lineWidth=Math.floor(this.Yt.ct*i),Mc(t,this.Yt.Kt),a5(t,s,0,e.width))}},Eh=class{constructor(t){this.Xn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Kt:0,Vt:!1},this.Gn=new Ub,this.St=!0,this.Jn=t,this.Qn=t.Qt(),this.Gn.ht(this.Xn)}Pt(){this.St=!0}Tt(){return this.Jn.Vt()?(this.St&&(this.te(),this.St=!1),this.Gn):null}},zb=class extends Eh{constructor(t){super(t)}te(){this.Xn.Vt=!1;let t=this.Jn.Wt(),e=t.ie().ie;if(e!==2&&e!==3)return;let i=this.Jn.N();if(!i.baseLineVisible||!this.Jn.Vt())return;let r=this.Jn.zt();r!==null&&(this.Xn.Vt=!0,this.Xn.ut=t.Nt(r.Ft,r.Ft),this.Xn.R=i.baseLineColor,this.Xn.ct=i.baseLineWidth,this.Xn.Kt=i.baseLineStyle)}},Hb=class extends Nr{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}se(){return this.Yt}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){let r=this.Yt;if(r===null)return;let s=Math.max(1,Math.floor(e)),o=s%2/2,a=Math.round(r.ne.x*e)+o,l=r.ne.y*i;t.fillStyle=r.ee,t.beginPath();let c=Math.max(2,1.5*r.re)*e;t.arc(a,l,c,0,2*Math.PI,!1),t.fill(),t.fillStyle=r.he,t.beginPath(),t.arc(a,l,r.ft*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=s,t.strokeStyle=r.ae,t.beginPath(),t.arc(a,l,r.ft*e+s/2,0,2*Math.PI,!1),t.stroke()}},qQ=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}],Yb=class{constructor(t){this.Gt=new Hb,this.St=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=t}Me(){this.we=this.me-1,this.Pt()}be(){if(this.Pt(),this.ge.N().lastPriceAnimation===2){let t=performance.now(),e=this.we-t;if(e>0)return void(e<650&&(this.we+=2600));this.me=t,this.we=t+2600}}Pt(){this.St=!0}xe(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}Se(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.St?(this.Rt(),this.St=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);let t=this.ge.Qt().At(),e=t.ye(),i=this.ge.zt();if(e===null||i===null)return;let r=this.ge.Pe(!0);if(r.ke||!e.Te(r.Re))return;let s={x:t.qt(r.Re),y:this.ge.Wt().Nt(r.gt,i.Ft)},o=r.R,a=this.ge.N().lineWidth,l=this.De(this.Ve(),o);this.Gt.ht({ee:o,re:a,he:l.he,ae:l.ae,ft:l.ft,ne:s})}Ce(){let t=this.Gt.se();if(t!==null){let e=this.De(this.Ve(),t.ee);t.he=e.he,t.ae=e.ae,t.ft=e.ft}}Ve(){return this.Se()?performance.now()-this.me:2599}Ie(t,e,i,r){let s=i+(r-i)*e;return this.ge.Qt().Ki().j(t,s)}De(t,e){let i=t%2600/2600,r;for(let c of qQ)if(i>=c.le&&i<=c.oe){r=c;break}jn(r!==void 0,"Last price animation internal logic error");let s=(i-r.le)/(r.oe-r.le);return{he:this.Ie(e,s,r.ce,r.de),ae:this.Ie(e,s,r.fe,r.pe),ft:(o=s,a=r._e,l=r.ue,a+(l-a)*o)};var o,a,l}},Gb=class extends Eh{constructor(t){super(t)}te(){let t=this.Xn;t.Vt=!1;let e=this.Jn.N();if(!e.priceLineVisible||!this.Jn.Vt())return;let i=this.Jn.Pe(e.priceLineSource===0);i.ke||(t.Vt=!0,t.ut=i.Bi,t.R=this.Jn.Be(i.R),t.ct=e.priceLineWidth,t.Kt=e.priceLineStyle)}},Kb=class extends Tc{constructor(t){super(),this.Jt=t}qi(t,e,i){t.Vt=!1,e.Vt=!1;let r=this.Jt;if(!r.Vt())return;let s=r.N(),o=s.lastValueVisible,a=r.Ae()!=="",l=s.seriesLastValueMode===0,c=r.Pe(!1);if(c.ke)return;o&&(t.ri=this.Ee(c,o,l),t.Vt=t.ri.length!==0),(a||l)&&(e.ri=this.ze(c,o,a,l),e.Vt=e.ri.length>0);let u=r.Be(c.R),d=this.Jt.Qt().Ki().K(u);i.X=d.X,i.Bi=c.Bi,e.Ht=r.Qt().Ut(c.Bi/r.Wt().$t()),t.Ht=u,t.R=d.G,e.R=d.G}ze(t,e,i,r){let s="",o=this.Jt.Ae();return i&&o.length!==0&&(s+=`${o} `),e&&r&&(s+=this.Jt.Wt().Le()?t.Oe:t.Ne),s.trim()}Ee(t,e,i){return e?i?this.Jt.Wt().Le()?t.Ne:t.Oe:t.ri:""}};function SR(n,t,e,i){let r=Number.isFinite(t),s=Number.isFinite(e);return r&&s?n(t,e):r||s?r?t:e:i}var ki=class n{constructor(t,e){this.We=t,this.Fe=e}He(t){return t!==null&&this.We===t.We&&this.Fe===t.Fe}Ue(){return new n(this.We,this.Fe)}$e(){return this.We}qe(){return this.Fe}Ye(){return this.Fe-this.We}Zi(){return this.Fe===this.We||Number.isNaN(this.Fe)||Number.isNaN(this.We)}vn(t){return t===null?this:new n(SR(Math.min,this.$e(),t.$e(),-1/0),SR(Math.max,this.qe(),t.qe(),1/0))}je(t){if(!xa(t)||this.Fe-this.We===0)return;let e=.5*(this.Fe+this.We),i=this.Fe-e,r=this.We-e;i*=t,r*=t,this.Fe=e+i,this.We=e+r}Ze(t){xa(t)&&(this.Fe+=t,this.We+=t)}Ke(){return{minValue:this.We,maxValue:this.Fe}}static Xe(t){return t===null?null:new n(t.minValue,t.maxValue)}},Sm=class n{constructor(t,e){this.Ge=t,this.Je=e||null}Qe(){return this.Ge}tr(){return this.Je}Ke(){return{priceRange:this.Ge===null?null:this.Ge.Ke(),margins:this.Je||void 0}}static Xe(t){return t===null?null:new n(ki.Xe(t.priceRange),t.margins)}},$b=class extends Eh{constructor(t,e){super(t),this.ir=e}te(){let t=this.Xn;t.Vt=!1;let e=this.ir.N();if(!this.Jn.Vt()||!e.lineVisible)return;let i=this.ir.sr();i!==null&&(t.Vt=!0,t.ut=i,t.R=e.color,t.ct=e.lineWidth,t.Kt=e.lineStyle,t.Zn=this.ir.N().id)}},Xb=class extends Tc{constructor(t,e){super(),this.ge=t,this.ir=e}qi(t,e,i){t.Vt=!1,e.Vt=!1;let r=this.ir.N(),s=r.axisLabelVisible,o=r.title!=="",a=this.ge;if(!s||!a.Vt())return;let l=this.ir.sr();if(l===null)return;o&&(e.ri=r.title,e.Vt=!0),e.Ht=a.Qt().Ut(l/a.Wt().$t()),t.ri=this.nr(r.price),t.Vt=!0;let c=this.ge.Qt().Ki().K(r.axisLabelColor||r.color);i.X=c.X;let u=r.axisLabelTextColor||c.G;t.R=u,e.R=u,i.Bi=l}nr(t){let e=this.ge.zt();return e===null?"":this.ge.Wt().Xi(t,e.Ft)}},Zb=class{constructor(t,e){this.ge=t,this.ys=e,this.er=new $b(t,this),this.Wn=new Xb(t,this),this.rr=new bm(this.Wn,t,t.Qt())}hr(t){fi(this.ys,t),this.Pt(),this.ge.Qt().ar()}N(){return this.ys}lr(){return this.er}_r(){return this.rr}ur(){return this.Wn}Pt(){this.er.Pt(),this.Wn.Pt()}sr(){let t=this.ge,e=t.Wt();if(t.Qt().At().Zi()||e.Zi())return null;let i=t.zt();return i===null?null:e.Nt(this.ys.price,i.Ft)}},Qb=class extends vm{constructor(t){super(),this.ts=t}Qt(){return this.ts}},jQ={Bar:(n,t,e,i)=>{let r=t.upColor,s=t.downColor,o=le(n(e,i)),a=Ca(o.Ft[0])<=Ca(o.Ft[3]);return{cr:o.R??(a?r:s)}},Candlestick:(n,t,e,i)=>{let r=t.upColor,s=t.downColor,o=t.borderUpColor,a=t.borderDownColor,l=t.wickUpColor,c=t.wickDownColor,u=le(n(e,i)),d=Ca(u.Ft[0])<=Ca(u.Ft[3]);return{cr:u.R??(d?r:s),dr:u.Ht??(d?o:a),pr:u.vr??(d?l:c)}},Custom:(n,t,e,i)=>({cr:le(n(e,i)).R??t.color}),Area:(n,t,e,i)=>{let r=le(n(e,i));return{cr:r.vt??t.lineColor,vt:r.vt??t.lineColor,mr:r.mr??t.topColor,wr:r.wr??t.bottomColor}},Baseline:(n,t,e,i)=>{let r=le(n(e,i));return{cr:r.Ft[3]>=t.baseValue.price?t.topLineColor:t.bottomLineColor,gr:r.gr??t.topLineColor,Mr:r.Mr??t.bottomLineColor,br:r.br??t.topFillColor1,Sr:r.Sr??t.topFillColor2,Cr:r.Cr??t.bottomFillColor1,yr:r.yr??t.bottomFillColor2}},Line:(n,t,e,i)=>{let r=le(n(e,i));return{cr:r.R??t.color,vt:r.R??t.color}},Histogram:(n,t,e,i)=>({cr:le(n(e,i)).R??t.color})},Jb=class{constructor(t){this.Pr=(e,i)=>i!==void 0?i.Ft:this.ge.Ks().kr(e),this.ge=t,this.Tr=jQ[t.Rr()]}Dr(t,e){return this.Tr(this.Pr,this.ge.N(),t,e)}};function u5(n,t,e,i,r=0,s=t.length){let o=s-r;for(;0<o;){let a=o>>1,l=r+a;i(t[l],e)===n?(r=l+1,o-=a+1):o=a}return r}var kc=u5.bind(null,!0),d5=u5.bind(null,!1),CR;(function(n){n[n.NearestLeft=-1]="NearestLeft",n[n.None=0]="None",n[n.NearestRight=1]="NearestRight"})(CR||(CR={}));var lo=30,e2=class{constructor(){this.Vr=[],this.Ir=new Map,this.Br=new Map,this.Ar=[]}Er(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Zs(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Zi(){return this.zr()===0}Te(t){return this.Nr(t,0)!==null}kr(t){return this.Wr(t)}Wr(t,e=0){let i=this.Nr(t,e);return i===null?null:Ne(re({},this.Fr(i)),{Re:this.Or(i)})}Hr(){return this.Vr}Ur(t,e,i){if(this.Zi())return null;let r=null;for(let s of i)r=cm(r,this.$r(t,e,s));return r}ht(t){this.Br.clear(),this.Ir.clear(),this.Vr=t,this.Ar=t.map(e=>e.Re)}qr(){return this.Ar}Or(t){return this.Vr[t].Re}Fr(t){return this.Vr[t]}Nr(t,e){let i=this.Yr(t);if(i===null&&e!==0)switch(e){case-1:return this.jr(t);case 1:return this.Zr(t);default:throw new TypeError("Unknown search mode")}return i}jr(t){let e=this.Kr(t);return e>0&&(e-=1),e!==this.Vr.length&&this.Or(e)<t?e:null}Zr(t){let e=this.Xr(t);return e!==this.Vr.length&&t<this.Or(e)?e:null}Yr(t){let e=this.Kr(t);return e===this.Vr.length||t<this.Vr[e].Re?null:e}Kr(t){return kc(this.Vr,t,(e,i)=>e.Re<i)}Xr(t){return d5(this.Vr,t,(e,i)=>e.Re>i)}Gr(t,e,i){let r=null;for(let s=t;s<e;s++){let o=this.Vr[s].Ft[i];Number.isNaN(o)||(r===null?r={Jr:o,Qr:o}:(o<r.Jr&&(r.Jr=o),o>r.Qr&&(r.Qr=o)))}return r}$r(t,e,i){if(this.Zi())return null;let r=null,s=le(this.Lr()),o=le(this.Zs()),a=Math.max(t,s),l=Math.min(e,o),c=Math.ceil(a/lo)*lo,u=Math.max(c,Math.floor(l/lo)*lo);{let h=this.Kr(a),p=this.Xr(Math.min(l,c,e));r=cm(r,this.Gr(h,p,i))}let d=this.Ir.get(i);d===void 0&&(d=new Map,this.Ir.set(i,d));for(let h=Math.max(c+1,a);h<u;h+=lo){let p=Math.floor(h/lo),g=d.get(p);if(g===void 0){let A=this.Kr(p*lo),y=this.Xr((p+1)*lo-1);g=this.Gr(A,y,i),d.set(p,g)}r=cm(r,g)}{let h=this.Kr(u),p=this.Xr(l);r=cm(r,this.Gr(h,p,i))}return r}};function cm(n,t){return n===null?t:t===null?n:{Jr:Math.min(n.Jr,t.Jr),Qr:Math.max(n.Qr,t.Qr)}}var t2=class{constructor(t){this.th=t}nt(t,e,i){this.th.draw(t)}ih(t,e,i){this.th.drawBackground?.(t)}},n2=class{constructor(t){this.Dn=null,this.sh=t}Tt(){let t=this.sh.renderer();if(t===null)return null;if(this.Dn?.nh===t)return this.Dn.eh;let e=new t2(t);return this.Dn={nh:t,eh:e},e}rh(){return this.sh.zOrder?.()??"normal"}},Cm=class{constructor(t){this.hh=null,this.ah=t}oh(){return this.ah}Ns(){this.ah.updateAllViews?.()}Ws(){let t=this.ah.paneViews?.()??[];if(this.hh?.nh===t)return this.hh.eh;let e=t.map(i=>new n2(i));return this.hh={nh:t,eh:e},e}jn(t,e){return this.ah.hitTest?.(t,e)??null}},WQ=class extends Cm{us(){return[]}},i2=class{constructor(t){this.th=t}nt(t,e,i){this.th.draw(t)}ih(t,e,i){this.th.drawBackground?.(t)}},xm=class{constructor(t){this.Dn=null,this.sh=t}Tt(){let t=this.sh.renderer();if(t===null)return null;if(this.Dn?.nh===t)return this.Dn.eh;let e=new i2(t);return this.Dn={nh:t,eh:e},e}rh(){return this.sh.zOrder?.()??"normal"}};function h5(n){return{ri:n.text(),Bi:n.coordinate(),Ii:n.fixedCoordinate?.(),R:n.textColor(),X:n.backColor(),Vt:n.visible?.()??!0,pi:n.tickVisible?.()??!0}}var r2=class{constructor(t,e){this.Gt=new ym,this._h=t,this.uh=e}Tt(){return this.Gt.ht(re({Qi:this.uh.Qi()},h5(this._h))),this.Gt}},s2=class extends Tc{constructor(t,e){super(),this._h=t,this.Yi=e}qi(t,e,i){let r=h5(this._h);i.X=r.X,t.R=r.R;let s=2/12*this.Yi.P();i.Ti=s,i.Ri=s,i.Bi=r.Bi,i.Ii=r.Ii,t.ri=r.ri,t.Vt=r.Vt,t.pi=r.pi}},o2=class extends Cm{constructor(t,e){super(t),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=e}cs(){let t=this.ah.timeAxisViews?.()??[];if(this.dh?.nh===t)return this.dh.eh;let e=this.ge.Qt().At(),i=t.map(r=>new r2(r,e));return this.dh={nh:t,eh:i},i}Fs(){let t=this.ah.priceAxisViews?.()??[];if(this.fh?.nh===t)return this.fh.eh;let e=this.ge.Wt(),i=t.map(r=>new s2(r,e));return this.fh={nh:t,eh:i},i}wh(){let t=this.ah.priceAxisPaneViews?.()??[];if(this.ph?.nh===t)return this.ph.eh;let e=t.map(i=>new xm(i));return this.ph={nh:t,eh:e},e}gh(){let t=this.ah.timeAxisPaneViews?.()??[];if(this.mh?.nh===t)return this.mh.eh;let e=t.map(i=>new xm(i));return this.mh={nh:t,eh:e},e}Mh(t,e){return this.ah.autoscaleInfo?.(t,e)??null}};function mb(n,t,e,i){n.forEach(r=>{t(r).forEach(s=>{s.rh()===e&&i.push(s)})})}function _b(n){return n.Ws()}function UQ(n){return n.wh()}function zQ(n){return n.gh()}var HQ=["Area","Line","Baseline"],Pc=class extends Qb{constructor(t,e,i,r,s){super(t),this.Yt=new e2,this.er=new Gb(this),this.bh=[],this.xh=new zb(this),this.Sh=null,this.Ch=null,this.yh=null,this.Ph=[],this.ys=i,this.kh=e;let o=new Kb(this);this.vs=[o],this.rr=new bm(o,this,t),HQ.includes(this.kh)&&(this.Sh=new Yb(this)),this.Th(),this.sh=r(this,this.Qt(),s)}m(){this.yh!==null&&clearTimeout(this.yh)}Be(t){return this.ys.priceLineColor||t}Pe(t){let e={ke:!0},i=this.Wt();if(this.Qt().At().Zi()||i.Zi()||this.Yt.Zi())return e;let r=this.Qt().At().ye(),s=this.zt();if(r===null||s===null)return e;let o,a;if(t){let d=this.Yt.Er();if(d===null)return e;o=d,a=d.Re}else{let d=this.Yt.Wr(r.bi(),-1);if(d===null||(o=this.Yt.kr(d.Re),o===null))return e;a=d.Re}let l=o.Ft[3],c=this.Rh().Dr(a,{Ft:o}),u=i.Nt(l,s.Ft);return{ke:!1,gt:l,ri:i.Xi(l,s.Ft),Oe:i.Dh(l),Ne:i.Vh(l,s.Ft),R:c.cr,Bi:u,Re:a}}Rh(){return this.Ch!==null||(this.Ch=new Jb(this)),this.Ch}N(){return this.ys}hr(t){let e=t.priceScaleId;e!==void 0&&e!==this.ys.priceScaleId&&this.Qt().Ih(this,e),fi(this.ys,t),t.priceFormat!==void 0&&(this.Th(),this.Qt().Bh()),this.Qt().Ah(this),this.Qt().Eh(),this.sh.Pt("options")}ht(t,e){this.Yt.ht(t),this.sh.Pt("data"),this.Sh!==null&&(e&&e.zh?this.Sh.be():t.length===0&&this.Sh.Me());let i=this.Qt().Hn(this);this.Qt().Lh(i),this.Qt().Ah(this),this.Qt().Eh(),this.Qt().ar()}Oh(t){let e=new Zb(this,t);return this.bh.push(e),this.Qt().Ah(this),e}Nh(t){let e=this.bh.indexOf(t);e!==-1&&this.bh.splice(e,1),this.Qt().Ah(this)}Wh(){return this.bh}Rr(){return this.kh}zt(){let t=this.Fh();return t===null?null:{Ft:t.Ft[3],Hh:t.wt}}Fh(){let t=this.Qt().At().ye();if(t===null)return null;let e=t.Uh();return this.Yt.Wr(e,1)}Ks(){return this.Yt}$h(t){let e=this.Yt.kr(t);return e===null?null:this.kh==="Bar"||this.kh==="Candlestick"||this.kh==="Custom"?{qh:e.Ft[0],Yh:e.Ft[1],jh:e.Ft[2],Zh:e.Ft[3]}:e.Ft[3]}Kh(t){let e=[];mb(this.Ph,_b,"top",e);let i=this.Sh;return i!==null&&i.Vt()&&(this.yh===null&&i.Se()&&(this.yh=setTimeout(()=>{this.yh=null,this.Qt().Xh()},0)),i.xe(),e.unshift(i)),e}Ws(){let t=[];this.Gh()||t.push(this.xh),t.push(this.sh,this.er);let e=this.bh.map(i=>i.lr());return t.push(...e),mb(this.Ph,_b,"normal",t),t}Jh(){return this.Qh(_b,"bottom")}ta(t){return this.Qh(UQ,t)}ia(t){return this.Qh(zQ,t)}sa(t,e){return this.Ph.map(i=>i.jn(t,e)).filter(i=>i!==null)}us(){return[this.rr,...this.bh.map(t=>t._r())]}Fs(t,e){if(e!==this.es&&!this.Gh())return[];let i=[...this.vs];for(let r of this.bh)i.push(r.ur());return this.Ph.forEach(r=>{i.push(...r.Fs())}),i}cs(){let t=[];return this.Ph.forEach(e=>{t.push(...e.cs())}),t}Mh(t,e){if(this.ys.autoscaleInfoProvider!==void 0){let i=this.ys.autoscaleInfoProvider(()=>{let r=this.na(t,e);return r===null?null:r.Ke()});return Sm.Xe(i)}return this.na(t,e)}ea(){return this.ys.priceFormat.minMove}ra(){return this.ha}Ns(){this.sh.Pt();for(let t of this.vs)t.Pt();for(let t of this.bh)t.Pt();this.er.Pt(),this.xh.Pt(),this.Sh?.Pt(),this.Ph.forEach(t=>t.Ns())}Wt(){return le(super.Wt())}Et(t){if(!((this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline")&&this.ys.crosshairMarkerVisible))return null;let e=this.Yt.kr(t);return e===null?null:{gt:e.Ft[3],ft:this.aa(),Ht:this.la(),Ot:this.oa(),Lt:this._a(t)}}Ae(){return this.ys.title}Vt(){return this.ys.visible}ua(t){this.Ph.push(new o2(t,this))}ca(t){this.Ph=this.Ph.filter(e=>e.oh()!==t)}da(){if(this.kh==="Custom")return t=>this.sh.fa(t)}pa(){if(this.kh==="Custom")return t=>this.sh.va(t)}ma(){return this.Yt.qr()}Gh(){return!Lm(this.Wt().wa())}na(t,e){if(!Sh(t)||!Sh(e)||this.Yt.Zi())return null;let i=this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline"||this.kh==="Histogram"?[3]:[2,1],r=this.Yt.Ur(t,e,i),s=r!==null?new ki(r.Jr,r.Qr):null,o=null;if(this.Rr()==="Histogram"){let a=this.ys.base,l=new ki(a,a);s=s!==null?s.vn(l):l}return this.Ph.forEach(a=>{let l=a.Mh(t,e);if(l?.priceRange){let c=new ki(l.priceRange.minValue,l.priceRange.maxValue);s=s!==null?s.vn(c):c}l?.margins&&(o=l.margins)}),new Sm(s,o)}aa(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.ys.crosshairMarkerRadius}return 0}la(){switch(this.kh){case"Line":case"Area":case"Baseline":{let t=this.ys.crosshairMarkerBorderColor;if(t.length!==0)return t}}return null}oa(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.ys.crosshairMarkerBorderWidth}return 0}_a(t){switch(this.kh){case"Line":case"Area":case"Baseline":{let e=this.ys.crosshairMarkerBackgroundColor;if(e.length!==0)return e}}return this.Rh().Dr(t).cr}Th(){switch(this.ys.priceFormat.type){case"custom":this.ha={format:this.ys.priceFormat.formatter};break;case"volume":this.ha=new jb(this.ys.priceFormat.precision);break;case"percent":this.ha=new wm(this.ys.priceFormat.precision);break;default:{let t=Math.pow(10,this.ys.priceFormat.precision);this.ha=new Ic(t,this.ys.priceFormat.minMove*t)}}this.es!==null&&this.es.ga()}Qh(t,e){let i=[];return mb(this.Ph,t,e,i),i}},YQ=[3],GQ=[0,1,2,3],a2=class{constructor(t){this.ys=t}Ma(t,e,i){let r=t;if(this.ys.mode===0)return r;let s=i.ks(),o=s.zt();if(o===null)return r;let a=s.Nt(t,o),l=i.ba().filter(u=>u instanceof Pc).reduce((u,d)=>{if(i.Un(d)||!d.Vt())return u;let h=d.Wt(),p=d.Ks();if(h.Zi()||!p.Te(e))return u;let g=p.kr(e);if(g===null)return u;let A=Ca(d.zt()),y=this.ys.mode===3?GQ:YQ;return u.concat(y.map(b=>h.Nt(g.Ft[b],A.Ft)))},[]);if(l.length===0)return r;l.sort((u,d)=>Math.abs(u-a)-Math.abs(d-a));let c=l[0];return r=s.Ts(c,o),r}},l2=class extends Nr{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.Yt===null)return;let s=Math.max(1,Math.floor(i));t.lineWidth=s,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(t,()=>{let o=le(this.Yt);if(o.xa){t.strokeStyle=o.Sa,Mc(t,o.Ca),t.beginPath();for(let a of o.ya){let l=Math.round(a.Pa*i);t.moveTo(l,-s),t.lineTo(l,e.height+s)}t.stroke()}if(o.ka){t.strokeStyle=o.Ta,Mc(t,o.Ra),t.beginPath();for(let a of o.Da){let l=Math.round(a.Pa*r);t.moveTo(-s,l),t.lineTo(e.width+s,l)}t.stroke()}})}},c2=class{constructor(t){this.Gt=new l2,this.St=!0,this.yt=t}Pt(){this.St=!0}Tt(){if(this.St){let t=this.yt.Qt().N().grid,e={ka:t.horzLines.visible,xa:t.vertLines.visible,Ta:t.horzLines.color,Sa:t.vertLines.color,Ra:t.horzLines.style,Ca:t.vertLines.style,Da:this.yt.ks().Va(),ya:(this.yt.Qt().At().Va()||[]).map(i=>({Pa:i.coord}))};this.Gt.ht(e),this.St=!1}return this.Gt}},u2=class{constructor(t){this.sh=new c2(t)}lr(){return this.sh}},Ab={Ia:4,Ba:1e-4};function Ec(n,t){let e=100*(n-t)/t;return t<0?-e:e}function KQ(n,t){let e=Ec(n.$e(),t),i=Ec(n.qe(),t);return new ki(e,i)}function Ah(n,t){let e=100*(n-t)/t+100;return t<0?-e:e}function $Q(n,t){let e=Ah(n.$e(),t),i=Ah(n.qe(),t);return new ki(e,i)}function Em(n,t){let e=Math.abs(n);if(e<1e-15)return 0;let i=Math.log10(e+t.Ba)+t.Ia;return n<0?-i:i}function yh(n,t){let e=Math.abs(n);if(e<1e-15)return 0;let i=Math.pow(10,e-t.Ia)-t.Ba;return n<0?-i:i}function mh(n,t){if(n===null)return null;let e=Em(n.$e(),t),i=Em(n.qe(),t);return new ki(e,i)}function um(n,t){if(n===null)return null;let e=yh(n.$e(),t),i=yh(n.qe(),t);return new ki(e,i)}function yb(n){if(n===null)return Ab;let t=Math.abs(n.qe()-n.$e());if(t>=1||t<1e-15)return Ab;let e=Math.ceil(Math.abs(Math.log10(t))),i=Ab.Ia+e;return{Ia:i,Ba:1/Math.pow(10,i)}}function mm(n,t,e){return Math.min(Math.max(n,t),e)}function dm(n,t,e){return t-n<=e}function $2(n){let t=Math.ceil(n);return t%2==0?t-1:t}var vh=class{constructor(t,e){if(this.Aa=t,this.Ea=e,function(i){if(i<0)return!1;for(let r=i;r>1;r/=10)if(r%10!=0)return!1;return!0}(this.Aa))this.za=[2,2.5,2];else{this.za=[];for(let i=this.Aa;i!==1;){if(i%2==0)this.za.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.za.push(2,2.5),i/=5}if(this.za.length>100)throw new Error("something wrong with base")}}}La(t,e,i){let r=this.Aa===0?0:1/this.Aa,s=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),o=0,a=this.Ea[0];for(;;){let d=dm(s,r,1e-14)&&s>r+1e-14,h=dm(s,i*a,1e-14),p=dm(s,1,1e-14);if(!(d&&h&&p))break;s/=a,a=this.Ea[++o%this.Ea.length]}if(s<=r+1e-14&&(s=r),s=Math.max(1,s),this.za.length>0&&(l=s,c=1,u=1e-14,Math.abs(l-c)<u))for(o=0,a=this.za[0];dm(s,i*a,1e-14)&&s>r+1e-14;)s/=a,a=this.za[++o%this.za.length];var l,c,u;return s}},Dm=class{constructor(t,e,i,r){this.Oa=[],this.Yi=t,this.Aa=e,this.Na=i,this.Wa=r}La(t,e){if(t<e)throw new Error("high < low");let i=this.Yi.$t(),r=(t-e)*this.Fa()/i,s=new vh(this.Aa,[2,2.5,2]),o=new vh(this.Aa,[2,2,2.5]),a=new vh(this.Aa,[2.5,2,2]),l=[];return l.push(s.La(t,e,r),o.La(t,e,r),a.La(t,e,r)),function(c){if(c.length<1)throw Error("array is empty");let u=c[0];for(let d=1;d<c.length;++d)c[d]<u&&(u=c[d]);return u}(l)}Ha(){let t=this.Yi,e=t.zt();if(e===null)return void(this.Oa=[]);let i=t.$t(),r=this.Na(i-1,e),s=this.Na(0,e),o=this.Yi.N().entireTextOnly?this.Ua()/2:0,a=o,l=i-1-o,c=Math.max(r,s),u=Math.min(r,s);if(c===u)return void(this.Oa=[]);let d=this.La(c,u),h=c%d;h+=h<0?d:0;let p=c>=u?1:-1,g=null,A=0;for(let y=c-h;y>u;y-=d){let b=this.Wa(y,e,!0);g!==null&&Math.abs(b-g)<this.Fa()||b<a||b>l||(A<this.Oa.length?(this.Oa[A].Pa=b,this.Oa[A].$a=t.qa(y)):this.Oa.push({Pa:b,$a:t.qa(y)}),A++,g=b,t.Ya()&&(d=this.La(y*p,u)))}this.Oa.length=A}Va(){return this.Oa}Ua(){return this.Yi.P()}Fa(){return Math.ceil(2.5*this.Ua())}};function p5(n){return n.slice().sort((t,e)=>le(t.hs())-le(e.hs()))}var xR;(function(n){n[n.Normal=0]="Normal",n[n.Logarithmic=1]="Logarithmic",n[n.Percentage=2]="Percentage",n[n.IndexedTo100=3]="IndexedTo100"})(xR||(xR={}));var ER=new wm,DR=new Ic(100,1),d2=class{constructor(t,e,i,r,s){this.ja=0,this.Za=null,this.Ge=null,this.Ka=null,this.Xa={Ga:!1,Ja:null},this.Qa=0,this.tl=0,this.il=new zt,this.sl=new zt,this.nl=[],this.el=null,this.rl=null,this.hl=null,this.al=null,this.ha=DR,this.ll=yb(null),this.ol=t,this.ys=e,this._l=i,this.ul=r,this.cl=s,this.dl=new Dm(this,100,this.fl.bind(this),this.pl.bind(this))}wa(){return this.ol}N(){return this.ys}hr(t){if(fi(this.ys,t),this.ga(),t.mode!==void 0&&this.vl({ie:t.mode}),t.scaleMargins!==void 0){let e=ii(t.scaleMargins.top),i=ii(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(e+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+i}`);this.ml(),this.rl=null}}wl(){return this.ys.autoScale}Ya(){return this.ys.mode===1}Le(){return this.ys.mode===2}gl(){return this.ys.mode===3}ie(){return{sn:this.ys.autoScale,Ml:this.ys.invertScale,ie:this.ys.mode}}vl(t){let e=this.ie(),i=null;t.sn!==void 0&&(this.ys.autoScale=t.sn),t.ie!==void 0&&(this.ys.mode=t.ie,t.ie!==2&&t.ie!==3||(this.ys.autoScale=!0),this.Xa.Ga=!1),e.ie===1&&t.ie!==e.ie&&(function(s,o){if(s===null)return!1;let a=yh(s.$e(),o),l=yh(s.qe(),o);return isFinite(a)&&isFinite(l)}(this.Ge,this.ll)?(i=um(this.Ge,this.ll),i!==null&&this.bl(i)):this.ys.autoScale=!0),t.ie===1&&t.ie!==e.ie&&(i=mh(this.Ge,this.ll),i!==null&&this.bl(i));let r=e.ie!==this.ys.mode;r&&(e.ie===2||this.Le())&&this.ga(),r&&(e.ie===3||this.gl())&&this.ga(),t.Ml!==void 0&&e.Ml!==t.Ml&&(this.ys.invertScale=t.Ml,this.xl()),this.sl.p(e,this.ie())}Sl(){return this.sl}P(){return this._l.fontSize}$t(){return this.ja}Cl(t){this.ja!==t&&(this.ja=t,this.ml(),this.rl=null)}yl(){if(this.Za)return this.Za;let t=this.$t()-this.Pl()-this.kl();return this.Za=t,t}Qe(){return this.Tl(),this.Ge}bl(t,e){let i=this.Ge;(e||i===null&&t!==null||i!==null&&!i.He(t))&&(this.rl=null,this.Ge=t)}Zi(){return this.Tl(),this.ja===0||!this.Ge||this.Ge.Zi()}Rl(t){return this.Ml()?t:this.$t()-1-t}Nt(t,e){return this.Le()?t=Ec(t,e):this.gl()&&(t=Ah(t,e)),this.pl(t,e)}Dl(t,e,i){this.Tl();let r=this.kl(),s=le(this.Qe()),o=s.$e(),a=s.qe(),l=this.yl()-1,c=this.Ml(),u=l/(a-o),d=i===void 0?0:i.from,h=i===void 0?t.length:i.to,p=this.Vl();for(let g=d;g<h;g++){let A=t[g],y=A.gt;if(isNaN(y))continue;let b=y;p!==null&&(b=p(A.gt,e));let x=r+u*(b-o),P=c?x:this.ja-1-x;A.ut=P}}Il(t,e,i){this.Tl();let r=this.kl(),s=le(this.Qe()),o=s.$e(),a=s.qe(),l=this.yl()-1,c=this.Ml(),u=l/(a-o),d=i===void 0?0:i.from,h=i===void 0?t.length:i.to,p=this.Vl();for(let g=d;g<h;g++){let A=t[g],y=A.qh,b=A.Yh,x=A.jh,P=A.Zh;p!==null&&(y=p(A.qh,e),b=p(A.Yh,e),x=p(A.jh,e),P=p(A.Zh,e));let T=r+u*(y-o),k=c?T:this.ja-1-T;A.Bl=k,T=r+u*(b-o),k=c?T:this.ja-1-T,A.Al=k,T=r+u*(x-o),k=c?T:this.ja-1-T,A.El=k,T=r+u*(P-o),k=c?T:this.ja-1-T,A.zl=k}}Ts(t,e){let i=this.fl(t,e);return this.Ll(i,e)}Ll(t,e){let i=t;return this.Le()?i=function(r,s){return s<0&&(r=-r),r/100*s+s}(i,e):this.gl()&&(i=function(r,s){return r-=100,s<0&&(r=-r),r/100*s+s}(i,e)),i}ba(){return this.nl}Dt(){if(this.el)return this.el;let t=[];for(let e=0;e<this.nl.length;e++){let i=this.nl[e];i.hs()===null&&i.ls(e+1),t.push(i)}return t=p5(t),this.el=t,this.el}Ol(t){this.nl.indexOf(t)===-1&&(this.nl.push(t),this.ga(),this.Nl())}Wl(t){let e=this.nl.indexOf(t);if(e===-1)throw new Error("source is not attached to scale");this.nl.splice(e,1),this.nl.length===0&&(this.vl({sn:!0}),this.bl(null)),this.ga(),this.Nl()}zt(){let t=null;for(let e of this.nl){let i=e.zt();i!==null&&(t===null||i.Hh<t.Hh)&&(t=i)}return t===null?null:t.Ft}Ml(){return this.ys.invertScale}Va(){let t=this.zt()===null;if(this.rl!==null&&(t||this.rl.Fl===t))return this.rl.Va;this.dl.Ha();let e=this.dl.Va();return this.rl={Va:e,Fl:t},this.il.p(),e}Hl(){return this.il}Ul(t){this.Le()||this.gl()||this.hl===null&&this.Ka===null&&(this.Zi()||(this.hl=this.ja-t,this.Ka=le(this.Qe()).Ue()))}$l(t){if(this.Le()||this.gl()||this.hl===null)return;this.vl({sn:!1}),(t=this.ja-t)<0&&(t=0);let e=(this.hl+.2*(this.ja-1))/(t+.2*(this.ja-1)),i=le(this.Ka).Ue();e=Math.max(e,.1),i.je(e),this.bl(i)}ql(){this.Le()||this.gl()||(this.hl=null,this.Ka=null)}Yl(t){this.wl()||this.al===null&&this.Ka===null&&(this.Zi()||(this.al=t,this.Ka=le(this.Qe()).Ue()))}jl(t){if(this.wl()||this.al===null)return;let e=le(this.Qe()).Ye()/(this.yl()-1),i=t-this.al;this.Ml()&&(i*=-1);let r=i*e,s=le(this.Ka).Ue();s.Ze(r),this.bl(s,!0),this.rl=null}Zl(){this.wl()||this.al!==null&&(this.al=null,this.Ka=null)}ra(){return this.ha||this.ga(),this.ha}Xi(t,e){switch(this.ys.mode){case 2:return this.Kl(Ec(t,e));case 3:return this.ra().format(Ah(t,e));default:return this.nr(t)}}qa(t){switch(this.ys.mode){case 2:return this.Kl(t);case 3:return this.ra().format(t);default:return this.nr(t)}}Dh(t){return this.nr(t,le(this.Xl()).ra())}Vh(t,e){return t=Ec(t,e),this.Kl(t,ER)}Gl(){return this.nl}Jl(t){this.Xa={Ja:t,Ga:!1}}Ns(){this.nl.forEach(t=>t.Ns())}ga(){this.rl=null;let t=this.Xl(),e=100;t!==null&&(e=Math.round(1/t.ea())),this.ha=DR,this.Le()?(this.ha=ER,e=100):this.gl()?(this.ha=new Ic(100,1),e=100):t!==null&&(this.ha=t.ra()),this.dl=new Dm(this,e,this.fl.bind(this),this.pl.bind(this)),this.dl.Ha()}Nl(){this.el=null}Ki(){return this.cl}Xl(){return this.nl[0]||null}Pl(){return this.Ml()?this.ys.scaleMargins.bottom*this.$t()+this.tl:this.ys.scaleMargins.top*this.$t()+this.Qa}kl(){return this.Ml()?this.ys.scaleMargins.top*this.$t()+this.Qa:this.ys.scaleMargins.bottom*this.$t()+this.tl}Tl(){this.Xa.Ga||(this.Xa.Ga=!0,this.Ql())}ml(){this.Za=null}pl(t,e){if(this.Tl(),this.Zi())return 0;t=this.Ya()&&t?Em(t,this.ll):t;let i=le(this.Qe()),r=this.kl()+(this.yl()-1)*(t-i.$e())/i.Ye();return this.Rl(r)}fl(t,e){if(this.Tl(),this.Zi())return 0;let i=this.Rl(t),r=le(this.Qe()),s=r.$e()+r.Ye()*((i-this.kl())/(this.yl()-1));return this.Ya()?yh(s,this.ll):s}xl(){this.rl=null,this.dl.Ha()}Ql(){let t=this.Xa.Ja;if(t===null)return;let e=null,i=this.Gl(),r=0,s=0;for(let l of i){if(!l.Vt())continue;let c=l.zt();if(c===null)continue;let u=l.Mh(t.Uh(),t.bi()),d=u&&u.Qe();if(d!==null){switch(this.ys.mode){case 1:d=mh(d,this.ll);break;case 2:d=KQ(d,c.Ft);break;case 3:d=$Q(d,c.Ft)}if(e=e===null?d:e.vn(le(d)),u!==null){let h=u.tr();h!==null&&(r=Math.max(r,h.above),s=Math.max(s,h.below))}}}if(r===this.Qa&&s===this.tl||(this.Qa=r,this.tl=s,this.rl=null,this.ml()),e!==null){if(e.$e()===e.qe()){let l=this.Xl(),c=5*(l===null||this.Le()||this.gl()?1:l.ea());this.Ya()&&(e=um(e,this.ll)),e=new ki(e.$e()-c,e.qe()+c),this.Ya()&&(e=mh(e,this.ll))}if(this.Ya()){let l=um(e,this.ll),c=yb(l);if(o=c,a=this.ll,o.Ia!==a.Ia||o.Ba!==a.Ba){let u=this.Ka!==null?um(this.Ka,this.ll):null;this.ll=c,e=mh(l,c),u!==null&&(this.Ka=mh(u,c))}}this.bl(e)}else this.Ge===null&&(this.bl(new ki(-.5,.5)),this.ll=yb(null));var o,a;this.Xa.Ga=!0}Vl(){return this.Le()?Ec:this.gl()?Ah:this.Ya()?t=>Em(t,this.ll):null}io(t,e,i){return e===void 0?(i===void 0&&(i=this.ra()),i.format(t)):e(t)}nr(t,e){return this.io(t,this.ul.priceFormatter,e)}Kl(t,e){return this.io(t,this.ul.percentageFormatter,e)}};function MR(n){return n instanceof Pc}var Mm=class{constructor(t,e){this.nl=[],this.so=new Map,this.ja=0,this.no=0,this.eo=1e3,this.el=null,this.ro=new zt,this.Ph=[],this.uh=t,this.ts=e,this.ho=new u2(this);let i=e.N();this.ao=this.lo("left",i.leftPriceScale),this.oo=this.lo("right",i.rightPriceScale),this.ao.Sl().i(this._o.bind(this,this.ao),this),this.oo.Sl().i(this._o.bind(this,this.oo),this),this.uo(i)}uo(t){if(t.leftPriceScale&&this.ao.hr(t.leftPriceScale),t.rightPriceScale&&this.oo.hr(t.rightPriceScale),t.localization&&(this.ao.ga(),this.oo.ga()),t.overlayPriceScales){let e=Array.from(this.so.values());for(let i of e){let r=le(i[0].Wt());r.hr(t.overlayPriceScales),t.localization&&r.ga()}}}co(t){switch(t){case"left":return this.ao;case"right":return this.oo}return this.so.has(t)?ii(this.so.get(t))[0].Wt():null}m(){this.Qt().do().u(this),this.ao.Sl().u(this),this.oo.Sl().u(this),this.nl.forEach(t=>{t.m&&t.m()}),this.Ph=this.Ph.filter(t=>{let e=t.oh();return e.detached&&e.detached(),!1}),this.ro.p()}fo(){return this.eo}po(t){this.eo=t}Qt(){return this.ts}Qi(){return this.no}$t(){return this.ja}vo(t){this.no=t,this.mo()}Cl(t){this.ja=t,this.ao.Cl(t),this.oo.Cl(t),this.nl.forEach(e=>{if(this.Un(e)){let i=e.Wt();i!==null&&i.Cl(t)}}),this.mo()}wo(){return this.nl.filter(MR)}ba(){return this.nl}Un(t){let e=t.Wt();return e===null||this.ao!==e&&this.oo!==e}Ol(t,e,i){let r=i!==void 0?i:this.bo().Mo+1;this.xo(t,e,r)}Wl(t){let e=this.nl.indexOf(t);jn(e!==-1,"removeDataSource: invalid data source"),this.nl.splice(e,1);let i=le(t.Wt()).wa();if(this.so.has(i)){let s=ii(this.so.get(i)),o=s.indexOf(t);o!==-1&&(s.splice(o,1),s.length===0&&this.so.delete(i))}let r=t.Wt();r&&r.ba().indexOf(t)>=0&&r.Wl(t),r!==null&&(r.Nl(),this.So(r)),this.el=null}qn(t){return t===this.ao?"left":t===this.oo?"right":"overlay"}Co(){return this.ao}yo(){return this.oo}Po(t,e){t.Ul(e)}ko(t,e){t.$l(e),this.mo()}To(t){t.ql()}Ro(t,e){t.Yl(e)}Do(t,e){t.jl(e),this.mo()}Vo(t){t.Zl()}mo(){this.nl.forEach(t=>{t.Ns()})}ks(){let t=null;return this.ts.N().rightPriceScale.visible&&this.oo.ba().length!==0?t=this.oo:this.ts.N().leftPriceScale.visible&&this.ao.ba().length!==0?t=this.ao:this.nl.length!==0&&(t=this.nl[0].Wt()),t===null&&(t=this.oo),t}$n(){let t=null;return this.ts.N().rightPriceScale.visible?t=this.oo:this.ts.N().leftPriceScale.visible&&(t=this.ao),t}So(t){t!==null&&t.wl()&&this.Io(t)}Bo(t){let e=this.uh.ye();t.vl({sn:!0}),e!==null&&t.Jl(e),this.mo()}Ao(){this.Io(this.ao),this.Io(this.oo)}Eo(){this.So(this.ao),this.So(this.oo),this.nl.forEach(t=>{this.Un(t)&&this.So(t.Wt())}),this.mo(),this.ts.ar()}Dt(){return this.el===null&&(this.el=p5(this.nl)),this.el}It(){return this.Dt().filter(MR)}zo(){return this.ro}Lo(){return this.ho}ua(t){this.Ph.push(new WQ(t))}ca(t){this.Ph=this.Ph.filter(e=>e.oh()!==t),t.detached&&t.detached(),this.ts.ar()}Oo(){return this.Ph}sa(t,e){return this.Ph.map(i=>i.jn(t,e)).filter(i=>i!==null)}Io(t){let e=t.Gl();if(e&&e.length>0&&!this.uh.Zi()){let i=this.uh.ye();i!==null&&t.Jl(i)}t.Ns()}bo(){let t=this.Dt();if(t.length===0)return{No:0,Mo:0};let e=0,i=0;for(let r=0;r<t.length;r++){let s=t[r].hs();s!==null&&(s<e&&(e=s),s>i&&(i=s))}return{No:e,Mo:i}}xo(t,e,i){let r=this.co(e);if(r===null&&(r=this.lo(e,this.ts.N().overlayPriceScales)),this.nl.push(t),!Lm(e)){let s=this.so.get(e)||[];s.push(t),this.so.set(e,s)}r.Ol(t),t._s(r),t.ls(i),this.So(r),this.el=null}_o(t,e,i){e.ie!==i.ie&&this.Io(t)}lo(t,e){let i=re({visible:!0,autoScale:!0},ds(e)),r=new d2(t,i,this.ts.N().layout,this.ts.N().localization,this.ts.Ki());return r.Cl(this.$t()),r}};function hm(n){return{Wo:n.Wo,Fo:{Zn:n.Ho.externalId},Uo:n.Ho.cursorStyle}}function XQ(n,t,e,i){for(let r of n){let s=r.Tt(i);if(s!==null&&s.jn){let o=s.jn(t,e);if(o!==null)return{$o:r,Fo:o}}}return null}function ZQ(n){return n.Ws!==void 0}function f5(n,t,e){let i=[n,...n.Dt()],r=function(s,o,a){let l,c;for(let h of s){let p=h.sa?.(o,a)??[];for(let g of p)u=g.zOrder,d=l?.zOrder,(!d||u==="top"&&d!=="top"||u==="normal"&&d==="bottom")&&(l=g,c=h)}var u,d;return l&&c?{Ho:l,Wo:c}:null}(i,t,e);if(r?.Ho.zOrder==="top")return hm(r);for(let s of i){if(r&&r.Wo===s&&r.Ho.zOrder!=="bottom"&&!r.Ho.isBackground)return hm(r);if(ZQ(s)){let o=XQ(s.Ws(n),t,e,n);if(o!==null)return{Wo:s,$o:o.$o,Fo:o.Fo}}if(r&&r.Wo===s&&r.Ho.zOrder!=="bottom"&&r.Ho.isBackground)return hm(r)}return r?.Ho?hm(r):null}var h2=class{constructor(t,e,i=50){this.Pn=0,this.kn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.qo=t,this.Yo=e,this.Vn=i}jo(t){let e=t.time,i=this.Yo.cacheKey(e),r=this.Dn.get(i);if(r!==void 0)return r.Zo;if(this.Pn===this.Vn){let o=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(ii(o)),this.Tn++,this.Pn--}let s=this.qo(t);return this.Dn.set(i,{Zo:s,En:this.kn}),this.Rn.set(this.kn,i),this.Pn++,this.kn++,s}},co=class{constructor(t,e){jn(t<=e,"right should be >= left"),this.Ko=t,this.Xo=e}Uh(){return this.Ko}bi(){return this.Xo}Go(){return this.Xo-this.Ko+1}Te(t){return this.Ko<=t&&t<=this.Xo}He(t){return this.Ko===t.Uh()&&this.Xo===t.bi()}};function TR(n,t){return n===null||t===null?n===t:n.He(t)}var p2=class{constructor(){this.Jo=new Map,this.Dn=null,this.Qo=!1}t_(t){this.Qo=t,this.Dn=null}i_(t,e){this.s_(e),this.Dn=null;for(let i=e;i<t.length;++i){let r=t[i],s=this.Jo.get(r.timeWeight);s===void 0&&(s=[],this.Jo.set(r.timeWeight,s)),s.push({index:i,time:r.time,weight:r.timeWeight,originalTime:r.originalTime})}}n_(t,e,i,r,s){let o=Math.ceil(e/t);return this.Dn!==null&&this.Dn.e_===o&&s===this.Dn.r_&&i===this.Dn.h_||(this.Dn={r_:s,h_:i,Va:this.a_(o,i,r),e_:o}),this.Dn.Va}s_(t){if(t===0)return void this.Jo.clear();let e=[];this.Jo.forEach((i,r)=>{t<=i[0].index?e.push(r):i.splice(kc(i,t,s=>s.index<t),1/0)});for(let i of e)this.Jo.delete(i)}a_(t,e,i){let r=[],s=o=>!e||i.has(o.index);for(let o of Array.from(this.Jo.keys()).sort((a,l)=>l-a)){if(!this.Jo.get(o))continue;let a=r;r=[];let l=a.length,c=0,u=ii(this.Jo.get(o)),d=u.length,h=1/0,p=-1/0;for(let g=0;g<d;g++){let A=u[g],y=A.index;for(;c<l;){let b=a[c],x=b.index;if(!(x<y&&s(b))){h=x;break}c++,r.push(b),p=x,h=1/0}if(h-y>=t&&y-p>=t&&s(A))r.push(A),p=y;else if(this.Qo)return a}for(;c<l;c++)s(a[c])&&r.push(a[c])}return r}},Dc=class n{constructor(t){this.l_=t}o_(){return this.l_===null?null:new co(Math.floor(this.l_.Uh()),Math.ceil(this.l_.bi()))}__(){return this.l_}static u_(){return new n(null)}};function QQ(n,t){return n.weight>t.weight?n:t}var f2=class{constructor(t,e,i,r){this.no=0,this.c_=null,this.d_=[],this.al=null,this.hl=null,this.f_=new p2,this.p_=new Map,this.v_=Dc.u_(),this.m_=!0,this.w_=new zt,this.g_=new zt,this.M_=new zt,this.b_=null,this.x_=null,this.S_=new Map,this.C_=-1,this.y_=[],this.ys=e,this.ul=i,this.P_=e.rightOffset,this.k_=e.barSpacing,this.ts=t,this.Yo=r,this.T_(),this.f_.t_(e.uniformDistribution),this.R_()}N(){return this.ys}D_(t){fi(this.ul,t),this.V_(),this.T_()}hr(t,e){fi(this.ys,t),this.ys.fixLeftEdge&&this.I_(),this.ys.fixRightEdge&&this.B_(),t.barSpacing!==void 0&&this.ts.dn(t.barSpacing),t.rightOffset!==void 0&&this.ts.fn(t.rightOffset),t.minBarSpacing===void 0&&t.maxBarSpacing===void 0||this.ts.dn(t.barSpacing??this.k_),t.ignoreWhitespaceIndices!==void 0&&t.ignoreWhitespaceIndices!==this.ys.ignoreWhitespaceIndices&&this.R_(),this.V_(),this.T_(),this.M_.p()}Rs(t){return this.d_[t]?.time??null}ss(t){return this.d_[t]??null}A_(t,e){if(this.d_.length<1)return null;if(this.Yo.key(t)>this.Yo.key(this.d_[this.d_.length-1].time))return e?this.d_.length-1:null;let i=kc(this.d_,this.Yo.key(t),(r,s)=>this.Yo.key(r.time)<s);return this.Yo.key(t)<this.Yo.key(this.d_[i].time)?e?i:null:i}Zi(){return this.no===0||this.d_.length===0||this.c_===null}E_(){return this.d_.length>0}ye(){return this.z_(),this.v_.o_()}L_(){return this.z_(),this.v_.__()}O_(){let t=this.ye();if(t===null)return null;let e={from:t.Uh(),to:t.bi()};return this.N_(e)}N_(t){let e=Math.round(t.from),i=Math.round(t.to),r=le(this.W_()),s=le(this.F_());return{from:le(this.ss(Math.max(r,e))),to:le(this.ss(Math.min(s,i)))}}H_(t){return{from:le(this.A_(t.from,!0)),to:le(this.A_(t.to,!0))}}Qi(){return this.no}vo(t){if(!isFinite(t)||t<=0||this.no===t)return;let e=this.L_(),i=this.no;if(this.no=t,this.m_=!0,this.ys.lockVisibleTimeRangeOnResize&&i!==0){let r=this.k_*t/i;this.k_=r}if(this.ys.fixLeftEdge&&e!==null&&e.Uh()<=0){let r=i-t;this.P_-=Math.round(r/this.k_)+1,this.m_=!0}this.U_(),this.q_()}qt(t){if(this.Zi()||!Sh(t))return 0;let e=this.Y_()+this.P_-t;return this.no-(e+.5)*this.k_-1}j_(t,e){let i=this.Y_(),r=e===void 0?0:e.from,s=e===void 0?t.length:e.to;for(let o=r;o<s;o++){let a=t[o].wt,l=i+this.P_-a,c=this.no-(l+.5)*this.k_-1;t[o]._t=c}}Z_(t,e){let i=Math.ceil(this.K_(t));return e&&this.ys.ignoreWhitespaceIndices&&!this.X_(i)?this.G_(i):i}fn(t){this.m_=!0,this.P_=t,this.q_(),this.ts.J_(),this.ts.ar()}Q_(){return this.k_}dn(t){this.tu(t),this.q_(),this.ts.J_(),this.ts.ar()}iu(){return this.P_}Va(){if(this.Zi())return null;if(this.x_!==null)return this.x_;let t=this.k_,e=5*(this.ts.N().layout.fontSize+4)/8*(this.ys.tickMarkMaxCharacterLength||8),i=Math.round(e/t),r=le(this.ye()),s=Math.max(r.Uh(),r.Uh()-i),o=Math.max(r.bi(),r.bi()-i),a=this.f_.n_(t,e,this.ys.ignoreWhitespaceIndices,this.S_,this.C_),l=this.W_()+i,c=this.F_()-i,u=this.su(),d=this.ys.fixLeftEdge||u,h=this.ys.fixRightEdge||u,p=0;for(let g of a){if(!(s<=g.index&&g.index<=o))continue;let A;p<this.y_.length?(A=this.y_[p],A.coord=this.qt(g.index),A.label=this.nu(g),A.weight=g.weight):(A={needAlignCoordinate:!1,coord:this.qt(g.index),label:this.nu(g),weight:g.weight},this.y_.push(A)),this.k_>e/2&&!u?A.needAlignCoordinate=!1:A.needAlignCoordinate=d&&g.index<=l||h&&g.index>=c,p++}return this.y_.length=p,this.x_=this.y_,this.y_}eu(){this.m_=!0,this.dn(this.ys.barSpacing),this.fn(this.ys.rightOffset)}ru(t){this.m_=!0,this.c_=t,this.q_(),this.I_()}hu(t,e){let i=this.K_(t),r=this.Q_(),s=r+e*(r/10);this.dn(s),this.ys.rightBarStaysOnScroll||this.fn(this.iu()+(i-this.K_(t)))}Ul(t){this.al&&this.Zl(),this.hl===null&&this.b_===null&&(this.Zi()||(this.hl=t,this.au()))}$l(t){if(this.b_===null)return;let e=mm(this.no-t,0,this.no),i=mm(this.no-le(this.hl),0,this.no);e!==0&&i!==0&&this.dn(this.b_.Q_*e/i)}ql(){this.hl!==null&&(this.hl=null,this.lu())}Yl(t){this.al===null&&this.b_===null&&(this.Zi()||(this.al=t,this.au()))}jl(t){if(this.al===null)return;let e=(this.al-t)/this.Q_();this.P_=le(this.b_).iu+e,this.m_=!0,this.q_()}Zl(){this.al!==null&&(this.al=null,this.lu())}ou(){this._u(this.ys.rightOffset)}_u(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");let i=this.P_,r=performance.now();this.ts._n({uu:s=>(s-r)/e>=1,cu:s=>{let o=(s-r)/e;return o>=1?t:i+(t-i)*o}})}Pt(t,e){this.m_=!0,this.d_=t,this.f_.i_(t,e),this.q_()}du(){return this.w_}fu(){return this.g_}pu(){return this.M_}Y_(){return this.c_||0}vu(t){let e=t.Go();this.tu(this.no/e),this.P_=t.bi()-this.Y_(),this.q_(),this.m_=!0,this.ts.J_(),this.ts.ar()}mu(){let t=this.W_(),e=this.F_();t!==null&&e!==null&&this.vu(new co(t,e+this.ys.rightOffset))}wu(t){let e=new co(t.from,t.to);this.vu(e)}ns(t){return this.ul.timeFormatter!==void 0?this.ul.timeFormatter(t.originalTime):this.Yo.formatHorzItem(t.time)}R_(){if(!this.ys.ignoreWhitespaceIndices)return;this.S_.clear();let t=this.ts.js();for(let e of t)for(let i of e.ma())this.S_.set(i,!0);this.C_++}su(){let t=this.ts.N().handleScroll,e=this.ts.N().handleScale;return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}W_(){return this.d_.length===0?null:0}F_(){return this.d_.length===0?null:this.d_.length-1}gu(t){return(this.no-1-t)/this.k_}K_(t){let e=this.gu(t),i=this.Y_()+this.P_-e;return Math.round(1e6*i)/1e6}tu(t){let e=this.k_;this.k_=t,this.U_(),e!==this.k_&&(this.m_=!0,this.Mu())}z_(){if(!this.m_)return;if(this.m_=!1,this.Zi())return void this.bu(Dc.u_());let t=this.Y_(),e=this.no/this.k_,i=this.P_+t,r=new co(i-e+1,i);this.bu(new Dc(r))}U_(){let t=mm(this.k_,this.xu(),this.Su());this.k_!==t&&(this.k_=t,this.m_=!0)}Su(){return this.ys.maxBarSpacing>0?this.ys.maxBarSpacing:.5*this.no}xu(){return this.ys.fixLeftEdge&&this.ys.fixRightEdge&&this.d_.length!==0?this.no/this.d_.length:this.ys.minBarSpacing}q_(){let t=this.Cu();t!==null&&this.P_<t&&(this.P_=t,this.m_=!0);let e=this.yu();this.P_>e&&(this.P_=e,this.m_=!0)}Cu(){let t=this.W_(),e=this.c_;return t===null||e===null?null:t-e-1+(this.ys.fixLeftEdge?this.no/this.k_:Math.min(2,this.d_.length))}yu(){return this.ys.fixRightEdge?0:this.no/this.k_-Math.min(2,this.d_.length)}au(){this.b_={Q_:this.Q_(),iu:this.iu()}}lu(){this.b_=null}nu(t){let e=this.p_.get(t.weight);return e===void 0&&(e=new h2(i=>this.Pu(i),this.Yo),this.p_.set(t.weight,e)),e.jo(t)}Pu(t){return this.Yo.formatTickmark(t,this.ul)}bu(t){let e=this.v_;this.v_=t,TR(e.o_(),this.v_.o_())||this.w_.p(),TR(e.__(),this.v_.__())||this.g_.p(),this.Mu()}Mu(){this.x_=null}V_(){this.Mu(),this.p_.clear()}T_(){this.Yo.updateFormatter(this.ul)}I_(){if(!this.ys.fixLeftEdge)return;let t=this.W_();if(t===null)return;let e=this.ye();if(e===null)return;let i=e.Uh()-t;if(i<0){let r=this.P_-i-1;this.fn(r)}this.U_()}B_(){this.q_(),this.U_()}X_(t){return!this.ys.ignoreWhitespaceIndices||this.S_.get(t)||!1}G_(t){let e=function*(r){let s=Math.round(r),o=s<r,a=1;for(;;)o?(yield s+a,yield s-a):(yield s-a,yield s+a),a++}(t),i=this.F_();for(;i;){let r=e.next().value;if(this.S_.get(r))return r;if(r<0||r>i)break}return t}},IR,kR,PR,NR,OR;(function(n){n[n.OnTouchEnd=0]="OnTouchEnd",n[n.OnNextTap=1]="OnNextTap"})(IR||(IR={}));var g2=class{constructor(t,e,i){this.ku=[],this.Tu=[],this.no=0,this.Ru=null,this.Du=new zt,this.Vu=new zt,this.Iu=null,this.Bu=t,this.ys=e,this.Yo=i,this.cl=new Pb(this.ys.layout.colorParsers),this.Au=new kb(this),this.uh=new f2(this,e.timeScale,this.ys.localization,i),this.Ct=new qb(this,e.crosshair),this.Eu=new a2(e.crosshair),this.zu(0),this.ku[0].po(2e3),this.Lu=this.Ou(0),this.Nu=this.Ou(1)}Bh(){this.Wu(Tn.gn())}ar(){this.Wu(Tn.wn())}Xh(){this.Wu(new Tn(1))}Ah(t){let e=this.Fu(t);this.Wu(e)}Hu(){return this.Ru}Uu(t){if(this.Ru?.Wo===t?.Wo&&this.Ru?.Fo?.Zn===t?.Fo?.Zn)return;let e=this.Ru;this.Ru=t,e!==null&&this.Ah(e.Wo),t!==null&&t.Wo!==e?.Wo&&this.Ah(t.Wo)}N(){return this.ys}hr(t){fi(this.ys,t),this.ku.forEach(e=>e.uo(t)),t.timeScale!==void 0&&this.uh.hr(t.timeScale),t.localization!==void 0&&this.uh.D_(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Du.p(),this.Lu=this.Ou(0),this.Nu=this.Ou(1),this.Bh()}$u(t,e,i=0){let r=this.ku[i];if(r===void 0)return;if(t==="left")return fi(this.ys,{leftPriceScale:e}),r.uo({leftPriceScale:e}),this.Du.p(),void this.Bh();if(t==="right")return fi(this.ys,{rightPriceScale:e}),r.uo({rightPriceScale:e}),this.Du.p(),void this.Bh();let s=this.qu(t,i);s!==null&&(s.Wt.hr(e),this.Du.p())}qu(t,e){let i=this.ku[e];if(i===void 0)return null;let r=i.co(t);return r!==null?{Us:i,Wt:r}:null}At(){return this.uh}$s(){return this.ku}Yu(){return this.Ct}ju(){return this.Vu}Zu(t,e){t.Cl(e),this.J_()}vo(t){this.no=t,this.uh.vo(this.no),this.ku.forEach(e=>e.vo(t)),this.J_()}Ku(t){this.ku.length!==1&&(jn(t>=0&&t<this.ku.length,"Invalid pane index"),this.ku.splice(t,1),this.Bh())}Xu(t,e){if(this.ku.length<2)return;jn(t>=0&&t<this.ku.length,"Invalid pane index");let i=this.ku[t],r=this.ku.reduce((d,h)=>d+h.fo(),0),s=this.ku.reduce((d,h)=>d+h.$t(),0),o=s-30*(this.ku.length-1);e=Math.min(o,Math.max(30,e));let a=r/s,l=i.$t();i.po(e*a);let c=e-l,u=this.ku.length-1;for(let d of this.ku)if(d!==i){let h=Math.min(o,Math.max(30,d.$t()-c/u));c-=d.$t()-h,u-=1;let p=h*a;d.po(p)}this.Bh()}Gu(t,e){jn(t>=0&&t<this.ku.length&&e>=0&&e<this.ku.length,"Invalid pane index");let i=this.ku[t],r=this.ku[e];this.ku[t]=r,this.ku[e]=i,this.Bh()}Po(t,e,i){t.Po(e,i)}ko(t,e,i){t.ko(e,i),this.Eh(),this.Wu(this.Ju(t,2))}To(t,e){t.To(e),this.Wu(this.Ju(t,2))}Ro(t,e,i){e.wl()||t.Ro(e,i)}Do(t,e,i){e.wl()||(t.Do(e,i),this.Eh(),this.Wu(this.Ju(t,2)))}Vo(t,e){e.wl()||(t.Vo(e),this.Wu(this.Ju(t,2)))}Bo(t,e){t.Bo(e),this.Wu(this.Ju(t,2))}Qu(t){this.uh.Ul(t)}tc(t,e){let i=this.At();if(i.Zi()||e===0)return;let r=i.Qi();t=Math.max(1,Math.min(t,r)),i.hu(t,e),this.J_()}sc(t){this.nc(0),this.ec(t),this.rc()}hc(t){this.uh.$l(t),this.J_()}ac(){this.uh.ql(),this.ar()}nc(t){this.uh.Yl(t)}ec(t){this.uh.jl(t),this.J_()}rc(){this.uh.Zl(),this.ar()}js(){return this.Tu}lc(t,e,i,r,s){this.Ct.Vs(t,e);let o=NaN,a=this.uh.Z_(t,!0),l=this.uh.ye();l!==null&&(a=Math.min(Math.max(l.Uh(),a),l.bi()));let c=r.ks(),u=c.zt();if(u!==null&&(o=c.Ts(e,u)),o=this.Eu.Ma(o,a,r),this.Ct.Es(a,o,r),this.Xh(),!s){let d=f5(r,t,e);this.Uu(d&&{Wo:d.Wo,Fo:d.Fo,Uo:d.Uo||null}),this.Vu.p(this.Ct.Bt(),{x:t,y:e},i)}}oc(t,e,i){let r=i.ks(),s=r.zt(),o=r.Nt(t,le(s)),a=this.uh.A_(e,!0),l=this.uh.qt(le(a));this.lc(l,o,null,i,!0)}_c(t){this.Yu().Ls(),this.Xh(),t||this.Vu.p(null,null,null)}Eh(){let t=this.Ct.Us();if(t!==null){let e=this.Ct.Bs(),i=this.Ct.As();this.lc(e,i,null,t)}this.Ct.Ns()}uc(t,e,i){let r=this.uh.Rs(0);e!==void 0&&i!==void 0&&this.uh.Pt(e,i);let s=this.uh.Rs(0),o=this.uh.Y_(),a=this.uh.ye();if(a!==null&&r!==null&&s!==null){let l=a.Te(o),c=this.Yo.key(r)>this.Yo.key(s),u=t!==null&&t>o&&!c,d=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,h=l&&(i!==void 0||d)&&this.uh.N().shiftVisibleRangeOnNewBar;if(u&&!h){let p=t-o;this.uh.fn(this.uh.iu()-p)}}this.uh.ru(t)}Lh(t){t!==null&&t.Eo()}Hn(t){if(function(i){return i instanceof Mm}(t))return t;let e=this.ku.find(i=>i.Dt().includes(t));return e===void 0?null:e}J_(){this.ku.forEach(t=>t.Eo()),this.Eh()}m(){this.ku.forEach(t=>t.m()),this.ku.length=0,this.ys.localization.priceFormatter=void 0,this.ys.localization.percentageFormatter=void 0,this.ys.localization.timeFormatter=void 0}cc(){return this.Au}Yn(){return this.Au.N()}do(){return this.Du}dc(t,e){let i=this.zu(e);this.fc(t,i),this.Tu.push(t),this.Tu.length===1?this.Bh():this.ar()}vc(t){let e=this.Hn(t),i=this.Tu.indexOf(t);jn(i!==-1,"Series not found");let r=le(e);this.Tu.splice(i,1),r.Wl(t),t.m&&t.m(),this.uh.R_(),this.mc(r)}Ih(t,e){let i=le(this.Hn(t));i.Wl(t),i.Ol(t,e,le(t.hs()))}mu(){let t=Tn.wn();t.rn(),this.Wu(t)}wc(t){let e=Tn.wn();e.ln(t),this.Wu(e)}cn(){let t=Tn.wn();t.cn(),this.Wu(t)}dn(t){let e=Tn.wn();e.dn(t),this.Wu(e)}fn(t){let e=Tn.wn();e.fn(t),this.Wu(e)}_n(t){let e=Tn.wn();e._n(t),this.Wu(e)}hn(){let t=Tn.wn();t.hn(),this.Wu(t)}gc(){return this.ys.rightPriceScale.visible?"right":"left"}Mc(t,e){if(jn(e>=0,"Index should be greater or equal to 0"),e===this.bc(t))return;let i=le(this.Hn(t));i.Wl(t);let r=this.zu(e);this.fc(t,r),i.ba().length===0&&this.mc(i)}xc(){return this.Nu}$(){return this.Lu}Ut(t){let e=this.Nu,i=this.Lu;if(e===i)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),this.Iu===null||this.Iu.mr!==i||this.Iu.wr!==e)this.Iu={mr:i,wr:e,Sc:new Map};else{let s=this.Iu.Sc.get(t);if(s!==void 0)return s}let r=this.cl.tt(i,e,t/100);return this.Iu.Sc.set(t,r),r}Cc(t){return this.ku.indexOf(t)}Ki(){return this.cl}zu(t){if(jn(t>=0,"Index should be greater or equal to 0"),(t=Math.min(this.ku.length,t))<this.ku.length)return this.ku[t];let e=new Mm(this.uh,this);this.ku.push(e);let i=Tn.gn();return i.Qs(t,{tn:0,sn:!0}),this.Wu(i),e}bc(t){return this.ku.findIndex(e=>e.wo().includes(t))}Ju(t,e){let i=new Tn(e);if(t!==null){let r=this.ku.indexOf(t);i.Qs(r,{tn:e})}return i}Fu(t,e){return e===void 0&&(e=2),this.Ju(this.Hn(t),e)}Wu(t){this.Bu&&this.Bu(t),this.ku.forEach(e=>e.Lo().lr().Pt())}fc(t,e){let i=t.N().priceScaleId,r=i!==void 0?i:this.gc();e.Ol(t,r),Lm(r)||t.hr(t.N())}Ou(t){let e=this.ys.layout;return e.background.type==="gradient"?t===0?e.background.topColor:e.background.bottomColor:e.background.color}mc(t){t.ba().length===0&&this.ku.length>1&&(this.ku.splice(this.Cc(t),1),this.Bh())}};function m2(n){return!xa(n)&&!Mh(n)}function g5(n){return xa(n)}(function(n){n[n.Disabled=0]="Disabled",n[n.Continuous=1]="Continuous",n[n.OnDataUpdate=2]="OnDataUpdate"})(kR||(kR={})),function(n){n[n.LastBar=0]="LastBar",n[n.LastVisible=1]="LastVisible"}(PR||(PR={})),function(n){n.Solid="solid",n.VerticalGradient="gradient"}(NR||(NR={})),function(n){n[n.Year=0]="Year",n[n.Month=1]="Month",n[n.DayOfMonth=2]="DayOfMonth",n[n.Time=3]="Time",n[n.TimeWithSeconds=4]="TimeWithSeconds"}(OR||(OR={}));var RR=n=>n.getUTCFullYear();function JQ(n,t,e){return t.replace(/yyyy/g,(i=>hs(RR(i),4))(n)).replace(/yy/g,(i=>hs(RR(i)%100,2))(n)).replace(/MMMM/g,((i,r)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(r,{month:"long"}))(n,e)).replace(/MMM/g,((i,r)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(r,{month:"short"}))(n,e)).replace(/MM/g,(i=>hs((r=>r.getUTCMonth()+1)(i),2))(n)).replace(/dd/g,(i=>hs((r=>r.getUTCDate())(i),2))(n))}var Tm=class{constructor(t="yyyy-MM-dd",e="default"){this.yc=t,this.Pc=e}jo(t){return JQ(t,this.yc,this.Pc)}},_2=class{constructor(t){this.kc=t||"%h:%m:%s"}jo(t){return this.kc.replace("%h",hs(t.getUTCHours(),2)).replace("%m",hs(t.getUTCMinutes(),2)).replace("%s",hs(t.getUTCSeconds(),2))}},eJ={Tc:"yyyy-MM-dd",Rc:"%h:%m:%s",Dc:" ",Vc:"default"},A2=class{constructor(t={}){let e=re(re({},eJ),t);this.Ic=new Tm(e.Tc,e.Vc),this.Bc=new _2(e.Rc),this.Ac=e.Dc}jo(t){return`${this.Ic.jo(t)}${this.Ac}${this.Bc.jo(t)}`}};function pm(n){return 60*n*60*1e3}function vb(n){return 60*n*1e3}var fm=[{Ec:(FR=1,1e3*FR),zc:10},{Ec:vb(1),zc:20},{Ec:vb(5),zc:21},{Ec:vb(30),zc:22},{Ec:pm(1),zc:30},{Ec:pm(3),zc:31},{Ec:pm(6),zc:32},{Ec:pm(12),zc:33}],FR;function LR(n,t){if(n.getUTCFullYear()!==t.getUTCFullYear())return 70;if(n.getUTCMonth()!==t.getUTCMonth())return 60;if(n.getUTCDate()!==t.getUTCDate())return 50;for(let e=fm.length-1;e>=0;--e)if(Math.floor(t.getTime()/fm[e].Ec)!==Math.floor(n.getTime()/fm[e].Ec))return fm[e].zc;return 0}function wb(n){let t=n;if(Mh(n)&&(t=X2(n)),!m2(t))throw new Error("time must be of type BusinessDay");let e=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{Lc:Math.round(e.getTime()/1e3),Oc:t}}function VR(n){if(!g5(n))throw new Error("time must be of type isUTCTimestamp");return{Lc:n}}function X2(n){let t=new Date(n);if(isNaN(t.getTime()))throw new Error(`Invalid date string=${n}, expected format=yyyy-mm-dd`);return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}}function BR(n){Mh(n.time)&&(n.time=X2(n.time))}var Im=class{options(){return this.ys}setOptions(t){this.ys=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?function(e){e.forEach(BR)}(t):BR(t)}createConverterToInternalObj(t){return le(function(e){return e.length===0?null:m2(e[0].time)||Mh(e[0].time)?wb:VR}(t))}key(t){return typeof t=="object"&&"Lc"in t?t.Lc:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){let e=t;return e.Oc===void 0?new Date(1e3*e.Lc).getTime():new Date(Date.UTC(e.Oc.year,e.Oc.month-1,e.Oc.day)).getTime()}convertHorzItemToInternal(t){return g5(e=t)?VR(e):m2(e)?wb(e):wb(X2(e));var e}updateFormatter(t){if(!this.ys)return;let e=t.dateFormat;this.ys.timeScale.timeVisible?this.Nc=new A2({Tc:e,Rc:this.ys.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Dc:"   ",Vc:t.locale}):this.Nc=new Tm(e,t.locale)}formatHorzItem(t){let e=t;return this.Nc.jo(new Date(1e3*e.Lc))}formatTickmark(t,e){let i=function(s,o,a){switch(s){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.weight,this.ys.timeScale.timeVisible,this.ys.timeScale.secondsVisible),r=this.ys.timeScale;if(r.tickMarkFormatter!==void 0){let s=r.tickMarkFormatter(t.originalTime,i,e.locale);if(s!==null)return s}return function(s,o,a){let l={};switch(o){case 0:l.year="numeric";break;case 1:l.month="short";break;case 2:l.day="numeric";break;case 3:l.hour12=!1,l.hour="2-digit",l.minute="2-digit";break;case 4:l.hour12=!1,l.hour="2-digit",l.minute="2-digit",l.second="2-digit"}let c=s.Oc===void 0?new Date(1e3*s.Lc):new Date(Date.UTC(s.Oc.year,s.Oc.month-1,s.Oc.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(a,l)}(t.time,i,e.locale)}maxTickMarkWeight(t){let e=t.reduce(QQ,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){(function(i,r=0){if(i.length===0)return;let s=r===0?null:i[r-1].time.Lc,o=s!==null?new Date(1e3*s):null,a=0;for(let l=r;l<i.length;++l){let c=i[l],u=new Date(1e3*c.time.Lc);o!==null&&(c.timeWeight=LR(u,o)),a+=c.time.Lc-(s||c.time.Lc),s=c.time.Lc,o=u}if(r===0&&i.length>1){let l=Math.ceil(a/(i.length-1)),c=new Date(1e3*(i[0].time.Lc-l));i[0].timeWeight=LR(new Date(1e3*i[0].time.Lc),c)}})(t,e)}static Wc(t){return fi({localization:{dateFormat:"dd MMM 'yy"}},t??{})}},Nc=typeof window<"u";function qR(){return!!Nc&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function bb(){return!!Nc&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function y2(n){return n+n%2}function tJ(n){Nc&&window.chrome!==void 0&&n.addEventListener("mousedown",t=>{if(t.button===1)return t.preventDefault(),!1})}var Oc=class{constructor(t,e,i){this.Fc=0,this.Hc=null,this.Uc={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.$c=0,this.qc=null,this.Yc={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.jc=null,this.Zc=!1,this.Kc=null,this.Xc=null,this.Gc=!1,this.Jc=!1,this.Qc=!1,this.td=null,this.sd=null,this.nd=null,this.ed=null,this.rd=null,this.hd=null,this.ad=null,this.ld=0,this.od=!1,this._d=!1,this.ud=!1,this.dd=0,this.fd=null,this.pd=!bb(),this.vd=r=>{this.md(r)},this.wd=r=>{if(this.gd(r)){let s=this.Md(r);if(++this.$c,this.qc&&this.$c>1){let{bd:o}=this.xd(Pr(r),this.Yc);o<30&&!this.Qc&&this.Sd(s,this.yd.Cd),this.Pd()}}else{let s=this.Md(r);if(++this.Fc,this.Hc&&this.Fc>1){let{bd:o}=this.xd(Pr(r),this.Uc);o<5&&!this.Jc&&this.kd(s,this.yd.Td),this.Rd()}}},this.Dd=t,this.yd=e,this.ys=i,this.Vd()}m(){this.td!==null&&(this.td(),this.td=null),this.sd!==null&&(this.sd(),this.sd=null),this.ed!==null&&(this.ed(),this.ed=null),this.rd!==null&&(this.rd(),this.rd=null),this.hd!==null&&(this.hd(),this.hd=null),this.nd!==null&&(this.nd(),this.nd=null),this.Id(),this.Rd()}Bd(t){this.ed&&this.ed();let e=this.Ad.bind(this);if(this.ed=()=>{this.Dd.removeEventListener("mousemove",e)},this.Dd.addEventListener("mousemove",e),this.gd(t))return;let i=this.Md(t);this.kd(i,this.yd.Ed),this.pd=!0}Rd(){this.Hc!==null&&clearTimeout(this.Hc),this.Fc=0,this.Hc=null,this.Uc={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Pd(){this.qc!==null&&clearTimeout(this.qc),this.$c=0,this.qc=null,this.Yc={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Ad(t){if(this.ud||this.Xc!==null||this.gd(t))return;let e=this.Md(t);this.kd(e,this.yd.zd),this.pd=!0}Ld(t){let e=Sb(t.changedTouches,le(this.fd));if(e===null||(this.dd=gm(t),this.ad!==null)||this._d)return;this.od=!0;let i=this.xd(Pr(e),le(this.Xc)),{Od:r,Nd:s,bd:o}=i;if(this.Gc||!(o<5)){if(!this.Gc){let a=.5*r,l=s>=a&&!this.ys.Wd(),c=a>s&&!this.ys.Fd();l||c||(this._d=!0),this.Gc=!0,this.Qc=!0,this.Id(),this.Pd()}if(!this._d){let a=this.Md(t,e);this.Sd(a,this.yd.Hd),xc(t)}}}Ud(t){if(t.button!==0)return;let e=this.xd(Pr(t),le(this.Kc)),{bd:i}=e;if(i>=5&&(this.Jc=!0,this.Rd()),this.Jc){let r=this.Md(t);this.kd(r,this.yd.$d)}}xd(t,e){let i=Math.abs(e._t-t._t),r=Math.abs(e.ut-t.ut);return{Od:i,Nd:r,bd:i+r}}qd(t){let e=Sb(t.changedTouches,le(this.fd));if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e===null)return;this.fd=null,this.dd=gm(t),this.Id(),this.Xc=null,this.hd&&(this.hd(),this.hd=null);let i=this.Md(t,e);if(this.Sd(i,this.yd.Yd),++this.$c,this.qc&&this.$c>1){let{bd:r}=this.xd(Pr(e),this.Yc);r<30&&!this.Qc&&this.Sd(i,this.yd.Cd),this.Pd()}else this.Qc||(this.Sd(i,this.yd.jd),this.yd.jd&&xc(t));this.$c===0&&xc(t),t.touches.length===0&&this.Zc&&(this.Zc=!1,xc(t))}md(t){if(t.button!==0)return;let e=this.Md(t);if(this.Kc=null,this.ud=!1,this.rd&&(this.rd(),this.rd=null),qR()&&this.Dd.ownerDocument.documentElement.removeEventListener("mouseleave",this.vd),!this.gd(t))if(this.kd(e,this.yd.Zd),++this.Fc,this.Hc&&this.Fc>1){let{bd:i}=this.xd(Pr(t),this.Uc);i<5&&!this.Jc&&this.kd(e,this.yd.Td),this.Rd()}else this.Jc||this.kd(e,this.yd.Kd)}Id(){this.jc!==null&&(clearTimeout(this.jc),this.jc=null)}Xd(t){if(this.fd!==null)return;let e=t.changedTouches[0];this.fd=e.identifier,this.dd=gm(t);let i=this.Dd.ownerDocument.documentElement;this.Qc=!1,this.Gc=!1,this._d=!1,this.Xc=Pr(e),this.hd&&(this.hd(),this.hd=null);{let s=this.Ld.bind(this),o=this.qd.bind(this);this.hd=()=>{i.removeEventListener("touchmove",s),i.removeEventListener("touchend",o)},i.addEventListener("touchmove",s,{passive:!1}),i.addEventListener("touchend",o,{passive:!1}),this.Id(),this.jc=setTimeout(this.Gd.bind(this,t),240)}let r=this.Md(t,e);this.Sd(r,this.yd.Jd),this.qc||(this.$c=0,this.qc=setTimeout(this.Pd.bind(this),500),this.Yc=Pr(e))}Qd(t){if(t.button!==0)return;let e=this.Dd.ownerDocument.documentElement;qR()&&e.addEventListener("mouseleave",this.vd),this.Jc=!1,this.Kc=Pr(t),this.rd&&(this.rd(),this.rd=null);{let r=this.Ud.bind(this),s=this.md.bind(this);this.rd=()=>{e.removeEventListener("mousemove",r),e.removeEventListener("mouseup",s)},e.addEventListener("mousemove",r),e.addEventListener("mouseup",s)}if(this.ud=!0,this.gd(t))return;let i=this.Md(t);this.kd(i,this.yd.tf),this.Hc||(this.Fc=0,this.Hc=setTimeout(this.Rd.bind(this),500),this.Uc=Pr(t))}Vd(){this.Dd.addEventListener("mouseenter",this.Bd.bind(this)),this.Dd.addEventListener("touchcancel",this.Id.bind(this));{let t=this.Dd.ownerDocument,e=i=>{this.yd.if&&(i.composed&&this.Dd.contains(i.composedPath()[0])||i.target&&this.Dd.contains(i.target)||this.yd.if())};this.sd=()=>{t.removeEventListener("touchstart",e)},this.td=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}bb()&&(this.nd=()=>{this.Dd.removeEventListener("dblclick",this.wd)},this.Dd.addEventListener("dblclick",this.wd)),this.Dd.addEventListener("mouseleave",this.sf.bind(this)),this.Dd.addEventListener("touchstart",this.Xd.bind(this),{passive:!0}),tJ(this.Dd),this.Dd.addEventListener("mousedown",this.Qd.bind(this)),this.nf(),this.Dd.addEventListener("touchmove",()=>{},{passive:!1})}nf(){this.yd.ef===void 0&&this.yd.rf===void 0&&this.yd.hf===void 0||(this.Dd.addEventListener("touchstart",t=>this.af(t.touches),{passive:!0}),this.Dd.addEventListener("touchmove",t=>{if(t.touches.length===2&&this.ad!==null&&this.yd.rf!==void 0){let e=jR(t.touches[0],t.touches[1])/this.ld;this.yd.rf(this.ad,e),xc(t)}},{passive:!1}),this.Dd.addEventListener("touchend",t=>{this.af(t.touches)}))}af(t){t.length===1&&(this.od=!1),t.length!==2||this.od||this.Zc?this.lf():this._f(t)}_f(t){let e=this.Dd.getBoundingClientRect()||{left:0,top:0};this.ad={_t:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,ut:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.ld=jR(t[0],t[1]),this.yd.ef!==void 0&&this.yd.ef(),this.Id()}lf(){this.ad!==null&&(this.ad=null,this.yd.hf!==void 0&&this.yd.hf())}sf(t){if(this.ed&&this.ed(),this.gd(t)||!this.pd)return;let e=this.Md(t);this.kd(e,this.yd.uf),this.pd=!bb()}Gd(t){let e=Sb(t.touches,le(this.fd));if(e===null)return;let i=this.Md(t,e);this.Sd(i,this.yd.cf),this.Qc=!0,this.Zc=!0}gd(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents!==void 0?t.sourceCapabilities.firesTouchEvents:gm(t)<this.dd+500}Sd(t,e){e&&e.call(this.yd,t)}kd(t,e){e&&e.call(this.yd,t)}Md(t,e){let i=e||t,r=this.Dd.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-r.left,localY:i.clientY-r.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,df:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click",ff:t.type,pf:i.target,$o:t.view,vf:()=>{t.type!=="touchstart"&&xc(t)}}}};function jR(n,t){let e=n.clientX-t.clientX,i=n.clientY-t.clientY;return Math.sqrt(e*e+i*i)}function xc(n){n.cancelable&&n.preventDefault()}function Pr(n){return{_t:n.pageX,ut:n.pageY}}function gm(n){return n.timeStamp||performance.now()}function Sb(n,t){for(let e=0;e<n.length;++e)if(n[e].identifier===t)return n[e];return null}var v2=class{constructor(t,e,i){this.mf=null,this.wf=null,this.gf=!0,this.Mf=null,this.bf=t,this.xf=t.Sf()[e],this.Cf=t.Sf()[i],this.yf=document.createElement("tr"),this.yf.style.height="1px",this.Pf=document.createElement("td"),this.Pf.style.position="relative",this.Pf.style.padding="0",this.Pf.style.margin="0",this.Pf.setAttribute("colspan","3"),this.kf(),this.yf.appendChild(this.Pf),this.gf=this.bf.N().layout.panes.enableResize,this.gf?this.Tf():(this.mf=null,this.wf=null)}m(){this.wf!==null&&this.wf.m()}Rf(){return this.yf}Df(){return yt({width:this.xf.Df().width,height:1})}Vf(){return yt({width:this.xf.Vf().width,height:1*window.devicePixelRatio})}If(t,e,i){let r=this.Vf();t.fillStyle=this.bf.N().layout.panes.separatorColor,t.fillRect(e,i,r.width,r.height)}Pt(){this.kf(),this.bf.N().layout.panes.enableResize!==this.gf&&(this.gf=this.bf.N().layout.panes.enableResize,this.gf?this.Tf():(this.mf!==null&&(this.Pf.removeChild(this.mf.Bf),this.Pf.removeChild(this.mf.Af),this.mf=null),this.wf!==null&&(this.wf.m(),this.wf=null)))}Tf(){let t=document.createElement("div"),e=t.style;e.position="fixed",e.display="none",e.zIndex="49",e.top="0",e.left="0",e.width="100%",e.height="100%",e.cursor="row-resize",this.Pf.appendChild(t);let i=document.createElement("div"),r=i.style;r.position="absolute",r.zIndex="50",r.top="-4px",r.height="9px",r.width="100%",r.backgroundColor="",r.cursor="row-resize",this.Pf.appendChild(i);let s={Ed:this.Ef.bind(this),uf:this.zf.bind(this),tf:this.Lf.bind(this),Jd:this.Lf.bind(this),$d:this.Of.bind(this),Hd:this.Of.bind(this),Zd:this.Nf.bind(this),Yd:this.Nf.bind(this)};this.wf=new Oc(i,s,{Wd:()=>!1,Fd:()=>!0}),this.mf={Af:i,Bf:t}}kf(){this.Pf.style.background=this.bf.N().layout.panes.separatorColor}Ef(t){this.mf!==null&&(this.mf.Af.style.backgroundColor=this.bf.N().layout.panes.separatorHoverColor)}zf(t){this.mf!==null&&this.Mf===null&&(this.mf.Af.style.backgroundColor="")}Lf(t){if(this.mf===null)return;let e=this.xf.Wf().fo()+this.Cf.Wf().fo(),i=e/(this.xf.Df().height+this.Cf.Df().height),r=30*i;e<=2*r||(this.Mf={Ff:t.pageY,Hf:this.xf.Wf().fo(),Uf:e-r,$f:e,qf:i,Yf:r},this.mf.Bf.style.display="block")}Of(t){let e=this.Mf;if(e===null)return;let i=(t.pageY-e.Ff)*e.qf,r=mm(e.Hf+i,e.Yf,e.Uf);this.xf.Wf().po(r),this.Cf.Wf().po(e.$f-r),this.bf.Qt().Bh()}Nf(t){this.Mf!==null&&this.mf!==null&&(this.Mf=null,this.mf.Bf.style.display="none")}};function Cb(n,t){return n.jf-t.jf}function xb(n,t,e){let i=(n.jf-t.jf)/(n.wt-t.wt);return Math.sign(i)*Math.min(Math.abs(i),e)}var w2=class{constructor(t,e,i,r){this.Zf=null,this.Kf=null,this.Xf=null,this.Gf=null,this.Jf=null,this.Qf=0,this.tp=0,this.ip=t,this.sp=e,this.np=i,this.Mn=r}ep(t,e){if(this.Zf!==null){if(this.Zf.wt===e)return void(this.Zf.jf=t);if(Math.abs(this.Zf.jf-t)<this.Mn)return}this.Gf=this.Xf,this.Xf=this.Kf,this.Kf=this.Zf,this.Zf={wt:e,jf:t}}le(t,e){if(this.Zf===null||this.Kf===null||e-this.Zf.wt>50)return;let i=0,r=xb(this.Zf,this.Kf,this.sp),s=Cb(this.Zf,this.Kf),o=[r],a=[s];if(i+=s,this.Xf!==null){let c=xb(this.Kf,this.Xf,this.sp);if(Math.sign(c)===Math.sign(r)){let u=Cb(this.Kf,this.Xf);if(o.push(c),a.push(u),i+=u,this.Gf!==null){let d=xb(this.Xf,this.Gf,this.sp);if(Math.sign(d)===Math.sign(r)){let h=Cb(this.Xf,this.Gf);o.push(d),a.push(h),i+=h}}}}let l=0;for(let c=0;c<o.length;++c)l+=a[c]/i*o[c];Math.abs(l)<this.ip||(this.Jf={jf:t,wt:e},this.tp=l,this.Qf=function(c,u){let d=Math.log(u);return Math.log(1*d/-c)/d}(Math.abs(l),this.np))}cu(t){let e=le(this.Jf),i=t-e.wt;return e.jf+this.tp*(Math.pow(this.np,i)-1)/Math.log(this.np)}uu(t){return this.Jf===null||this.rp(t)===this.Qf}rp(t){let e=t-le(this.Jf).wt;return Math.min(e,this.Qf)}},b2=class{constructor(t,e){this.hp=void 0,this.ap=void 0,this.lp=void 0,this.ps=!1,this.op=t,this._p=e,this.up()}Pt(){this.up()}cp(){this.hp&&this.op.removeChild(this.hp),this.ap&&this.op.removeChild(this.ap),this.hp=void 0,this.ap=void 0}dp(){return this.ps!==this.fp()||this.lp!==this.pp()}pp(){return this._p.Qt().Ki().J(this._p.N().layout.textColor)>160?"dark":"light"}fp(){return this._p.N().layout.attributionLogo}vp(){let t=new URL(location.href);return t.hostname?"&utm_source="+t.hostname+t.pathname:""}up(){this.dp()&&(this.cp(),this.ps=this.fp(),this.ps&&(this.lp=this.pp(),this.ap=document.createElement("style"),this.ap.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.hp=document.createElement("a"),this.hp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.vp()}`,this.hp.title="Charting by TradingView",this.hp.id="tv-attr-logo",this.hp.target="_blank",this.hp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.hp.toggleAttribute("data-dark",this.lp==="dark"),this.op.appendChild(this.ap),this.op.appendChild(this.hp)))}};function Da(n,t){let e=le(n.ownerDocument).createElement("canvas");n.appendChild(e);let i=fb(e,{type:"device-pixel-content-box",options:{allowResizeObserver:!0},transform:(r,s)=>({width:Math.max(r.width,s.width),height:Math.max(r.height,s.height)})});return i.resizeCanvasElement(t),i}function Ma(n){n.width=1,n.height=1,n.getContext("2d")?.clearRect(0,0,1,1)}function S2(n,t,e,i){n.ih&&n.ih(t,e,i)}function _m(n,t,e,i){n.nt(t,e,i)}function C2(n,t,e,i){let r=n(e,i);for(let s of r){let o=s.Tt(i);o!==null&&t(o)}}function Eb(n,t){return e=>function(i){return i.Wt!==void 0}(e)?(e.Wt()?.wa()??"")!==t?[]:e.ta?.(n)??[]:[]}function WR(n,t,e,i){if(!n.length)return;let r=0,s=n[0].$t(i,!0),o=t===1?e/2-(n[0].Wi()-s/2):n[0].Wi()-s/2-e/2;o=Math.max(0,o);for(let a=1;a<n.length;a++){let l=n[a],c=n[a-1],u=c.$t(i,!1),d=l.Wi(),h=c.Wi();if(t===1?d>h-u:d<h+u){let p=h-u*t;l.Fi(p);let g=p-t*u/2;if((t===1?g<0:g>e)&&o>0){let A=t===1?-1-g:g-e,y=Math.min(A,o);for(let b=r;b<n.length;b++)n[b].Fi(n[b].Wi()+t*y);o-=y}}else r=a,o=t===1?h-u-d:d-(h+u)}}var km=class{constructor(t,e,i,r){this.Yi=null,this.mp=null,this.wp=!1,this.gp=new Ea(200),this.Mp=null,this.bp=0,this.xp=!1,this.Sp=()=>{this.xp||this.yt.Cp().Qt().ar()},this.yp=()=>{this.xp||this.yt.Cp().Qt().ar()},this.yt=t,this.ys=e,this._l=e.layout,this.Au=i,this.Pp=r==="left",this.kp=Eb("normal",r),this.Tp=Eb("top",r),this.Rp=Eb("bottom",r),this.Pf=document.createElement("div"),this.Pf.style.height="100%",this.Pf.style.overflow="hidden",this.Pf.style.width="25px",this.Pf.style.left="0",this.Pf.style.position="relative",this.Dp=Da(this.Pf,yt({width:16,height:16})),this.Dp.subscribeSuggestedBitmapSizeChanged(this.Sp);let s=this.Dp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Vp=Da(this.Pf,yt({width:16,height:16})),this.Vp.subscribeSuggestedBitmapSizeChanged(this.yp);let o=this.Vp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";let a={tf:this.Lf.bind(this),Jd:this.Lf.bind(this),$d:this.Of.bind(this),Hd:this.Of.bind(this),if:this.Ip.bind(this),Zd:this.Nf.bind(this),Yd:this.Nf.bind(this),Td:this.Bp.bind(this),Cd:this.Bp.bind(this),Ed:this.Ap.bind(this),uf:this.zf.bind(this)};this.wf=new Oc(this.Vp.canvasElement,a,{Wd:()=>!this.ys.handleScroll.vertTouchDrag,Fd:()=>!0})}m(){this.wf.m(),this.Vp.unsubscribeSuggestedBitmapSizeChanged(this.yp),Ma(this.Vp.canvasElement),this.Vp.dispose(),this.Dp.unsubscribeSuggestedBitmapSizeChanged(this.Sp),Ma(this.Dp.canvasElement),this.Dp.dispose(),this.Yi!==null&&this.Yi.Hl().u(this),this.Yi=null}Rf(){return this.Pf}P(){return this._l.fontSize}Ep(){let t=this.Au.N();return this.Mp!==t.k&&(this.gp.In(),this.Mp=t.k),t}zp(){if(this.Yi===null)return 0;let t=0,e=this.Ep(),i=le(this.Dp.canvasElement.getContext("2d",{colorSpace:this.yt.Cp().N().layout.colorSpace}));i.save();let r=this.Yi.Va();i.font=this.Lp(),r.length>0&&(t=Math.max(this.gp.Vi(i,r[0].$a),this.gp.Vi(i,r[r.length-1].$a)));let s=this.Op();for(let c=s.length;c--;){let u=this.gp.Vi(i,s[c].ri());u>t&&(t=u)}let o=this.Yi.zt();if(o!==null&&this.mp!==null&&(a=this.ys.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){let c=this.Yi.Ts(1,o),u=this.Yi.Ts(this.mp.height-2,o);t=Math.max(t,this.gp.Vi(i,this.Yi.Xi(Math.floor(Math.min(c,u))+.11111111111111,o)),this.gp.Vi(i,this.Yi.Xi(Math.ceil(Math.max(c,u))-.11111111111111,o)))}var a;i.restore();let l=t||34;return y2(Math.ceil(e.S+e.C+e.I+e.B+5+l))}Np(t){this.mp!==null&&kr(this.mp,t)||(this.mp=t,this.xp=!0,this.Dp.resizeCanvasElement(t),this.Vp.resizeCanvasElement(t),this.xp=!1,this.Pf.style.width=`${t.width}px`,this.Pf.style.height=`${t.height}px`)}Wp(){return le(this.mp).width}_s(t){this.Yi!==t&&(this.Yi!==null&&this.Yi.Hl().u(this),this.Yi=t,t.Hl().i(this.il.bind(this),this))}Wt(){return this.Yi}In(){let t=this.yt.Wf();this.yt.Cp().Qt().Bo(t,le(this.Wt()))}Fp(t){if(this.mp===null)return;let e={colorSpace:this.yt.Cp().N().layout.colorSpace};if(t!==1){this.Hp(),this.Dp.applySuggestedBitmapSize();let r=us(this.Dp,e);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.Up(s),this.$p(s)}),this.yt.qp(r,this.Rp),this.Yp(r),this.yt.qp(r,this.kp),this.jp(r))}this.Vp.applySuggestedBitmapSize();let i=us(this.Vp,e);i!==null&&(i.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.Zp(i),this.yt.qp(i,this.Tp))}Vf(){return this.Dp.bitmapSize}If(t,e,i){let r=this.Vf();r.width>0&&r.height>0&&t.drawImage(this.Dp.canvasElement,e,i)}Pt(){this.Yi?.Va()}Lf(t){if(this.Yi===null||this.Yi.Zi()||!this.ys.handleScale.axisPressedMouseMove.price)return;let e=this.yt.Cp().Qt(),i=this.yt.Wf();this.wp=!0,e.Po(i,this.Yi,t.localY)}Of(t){if(this.Yi===null||!this.ys.handleScale.axisPressedMouseMove.price)return;let e=this.yt.Cp().Qt(),i=this.yt.Wf(),r=this.Yi;e.ko(i,r,t.localY)}Ip(){if(this.Yi===null||!this.ys.handleScale.axisPressedMouseMove.price)return;let t=this.yt.Cp().Qt(),e=this.yt.Wf(),i=this.Yi;this.wp&&(this.wp=!1,t.To(e,i))}Nf(t){if(this.Yi===null||!this.ys.handleScale.axisPressedMouseMove.price)return;let e=this.yt.Cp().Qt(),i=this.yt.Wf();this.wp=!1,e.To(i,this.Yi)}Bp(t){this.ys.handleScale.axisDoubleClickReset.price&&this.In()}Ap(t){this.Yi!==null&&(!this.yt.Cp().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.gl()||this.Kp(1))}zf(t){this.Kp(0)}Op(){let t=[],e=this.Yi===null?void 0:this.Yi;return(i=>{for(let r=0;r<i.length;++r){let s=i[r].Fs(this.yt.Wf(),e);for(let o=0;o<s.length;o++)t.push(s[o])}})(this.yt.Wf().Dt()),t}Up({context:t,bitmapSize:e}){let{width:i,height:r}=e,s=this.yt.Wf().Qt(),o=s.$(),a=s.xc();o===a?Fm(t,0,0,i,r,o):c5(t,0,0,i,r,o,a)}$p({context:t,bitmapSize:e,horizontalPixelRatio:i}){if(this.mp===null||this.Yi===null||!this.Yi.N().borderVisible)return;t.fillStyle=this.Yi.N().borderColor;let r=Math.max(1,Math.floor(this.Ep().S*i)),s;s=this.Pp?e.width-r:0,t.fillRect(s,0,r,e.height)}Yp(t){if(this.mp===null||this.Yi===null)return;let e=this.Yi.Va(),i=this.Yi.N(),r=this.Ep(),s=this.Pp?this.mp.width-r.C:0;i.borderVisible&&i.ticksVisible&&t.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:l})=>{o.fillStyle=i.borderColor;let c=Math.max(1,Math.floor(l)),u=Math.floor(.5*l),d=Math.round(r.C*a);o.beginPath();for(let h of e)o.rect(Math.floor(s*a),Math.round(h.Pa*l)-u,d,c);o.fill()}),t.useMediaCoordinateSpace(({context:o})=>{o.font=this.Lp(),o.fillStyle=i.textColor??this._l.textColor,o.textAlign=this.Pp?"right":"left",o.textBaseline="middle";let a=this.Pp?Math.round(s-r.I):Math.round(s+r.C+r.I),l=e.map(c=>this.gp.Di(o,c.$a));for(let c=e.length;c--;){let u=e[c];o.fillText(u.$a,a,u.Pa+l[c])}})}Hp(){if(this.mp===null||this.Yi===null)return;let t=this.mp.height/2,e=[],i=this.Yi.Dt().slice(),r=this.yt.Wf(),s=this.Ep();this.Yi===r.$n()&&this.yt.Wf().Dt().forEach(l=>{r.Un(l)&&i.push(l)});let o=this.Yi.ba()[0],a=this.Yi;i.forEach(l=>{let c=l.Fs(r,a);c.forEach(u=>{u.Fi(null),u.Hi()&&e.push(u)}),o===l&&c.length>0&&(t=c[0].Bi())}),e.forEach(l=>l.Fi(l.Bi())),this.Yi.N().alignLabels&&this.Xp(e,s,t)}Xp(t,e,i){if(this.mp===null)return;let r=t.filter(o=>o.Bi()<=i),s=t.filter(o=>o.Bi()>i);r.sort((o,a)=>a.Bi()-o.Bi()),r.length&&s.length&&s.push(r[0]),s.sort((o,a)=>o.Bi()-a.Bi());for(let o of t){let a=Math.floor(o.$t(e)/2),l=o.Bi();l>-a&&l<a&&o.Fi(a),l>this.mp.height-a&&l<this.mp.height+a&&o.Fi(this.mp.height-a)}WR(r,1,this.mp.height,e),WR(s,-1,this.mp.height,e)}jp(t){if(this.mp===null)return;let e=this.Op(),i=this.Ep(),r=this.Pp?"right":"left";e.forEach(s=>{s.Ui()&&s.Tt(le(this.Yi)).nt(t,i,this.gp,r)})}Zp(t){if(this.mp===null||this.Yi===null)return;let e=this.yt.Cp().Qt(),i=[],r=this.yt.Wf(),s=e.Yu().Fs(r,this.Yi);s.length&&i.push(s);let o=this.Ep(),a=this.Pp?"right":"left";i.forEach(l=>{l.forEach(c=>{c.Tt(le(this.Yi)).nt(t,o,this.gp,a)})})}Kp(t){this.Pf.style.cursor=t===1?"ns-resize":"default"}il(){let t=this.zp();this.bp<t&&this.yt.Cp().Qt().Bh(),this.bp=t}Lp(){return xh(this._l.fontSize,this._l.fontFamily)}};function nJ(n,t){return n.Jh?.(t)??[]}function UR(n,t){return n.Ws?.(t)??[]}function zR(n,t){return n.us?.(t)??[]}function iJ(n,t){return n.Kh?.(t)??[]}var x2=class n{constructor(t,e){this.mp=yt({width:0,height:0}),this.Gp=null,this.Jp=null,this.Qp=null,this.tv=null,this.iv=!1,this.sv=new zt,this.nv=new zt,this.ev=0,this.rv=!1,this.hv=null,this.av=!1,this.lv=null,this.ov=null,this.xp=!1,this.Sp=()=>{this.xp||this._v===null||this.ts().ar()},this.yp=()=>{this.xp||this._v===null||this.ts().ar()},this._p=t,this._v=e,this._v.zo().i(this.uv.bind(this),this,!0),this.cv=document.createElement("td"),this.cv.style.padding="0",this.cv.style.position="relative";let i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.dv=document.createElement("td"),this.dv.style.padding="0",this.fv=document.createElement("td"),this.fv.style.padding="0",this.cv.appendChild(i),this.Dp=Da(i,yt({width:16,height:16})),this.Dp.subscribeSuggestedBitmapSizeChanged(this.Sp);let r=this.Dp.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Vp=Da(i,yt({width:16,height:16})),this.Vp.subscribeSuggestedBitmapSizeChanged(this.yp);let s=this.Vp.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.yf=document.createElement("tr"),this.yf.appendChild(this.dv),this.yf.appendChild(this.cv),this.yf.appendChild(this.fv),this.pv(),this.wf=new Oc(this.Vp.canvasElement,this,{Wd:()=>this.hv===null&&!this._p.N().handleScroll.vertTouchDrag,Fd:()=>this.hv===null&&!this._p.N().handleScroll.horzTouchDrag})}m(){this.Gp!==null&&this.Gp.m(),this.Jp!==null&&this.Jp.m(),this.Qp=null,this.Vp.unsubscribeSuggestedBitmapSizeChanged(this.yp),Ma(this.Vp.canvasElement),this.Vp.dispose(),this.Dp.unsubscribeSuggestedBitmapSizeChanged(this.Sp),Ma(this.Dp.canvasElement),this.Dp.dispose(),this._v!==null&&(this._v.zo().u(this),this._v.m()),this.wf.m()}Wf(){return le(this._v)}vv(t){this._v!==null&&this._v.zo().u(this),this._v=t,this._v!==null&&this._v.zo().i(n.prototype.uv.bind(this),this,!0),this.pv(),this._p.Sf().indexOf(this)===this._p.Sf().length-1?(this.Qp=this.Qp??new b2(this.cv,this._p),this.Qp.Pt()):(this.Qp?.cp(),this.Qp=null)}Cp(){return this._p}Rf(){return this.yf}pv(){if(this._v!==null&&(this.mv(),this.ts().js().length!==0)){if(this.Gp!==null){let t=this._v.Co();this.Gp._s(le(t))}if(this.Jp!==null){let t=this._v.yo();this.Jp._s(le(t))}}}wv(){this.Gp!==null&&this.Gp.Pt(),this.Jp!==null&&this.Jp.Pt()}fo(){return this._v!==null?this._v.fo():0}po(t){this._v&&this._v.po(t)}Ed(t){if(!this._v)return;this.gv();let e=t.localX,i=t.localY;this.Mv(e,i,t)}tf(t){this.gv(),this.bv(),this.Mv(t.localX,t.localY,t)}zd(t){if(!this._v)return;this.gv();let e=t.localX,i=t.localY;this.Mv(e,i,t)}Kd(t){this._v!==null&&(this.gv(),this.xv(t))}Td(t){this._v!==null&&this.Sv(this.nv,t)}Cd(t){this.Td(t)}$d(t){this.gv(),this.Cv(t),this.Mv(t.localX,t.localY,t)}Zd(t){this._v!==null&&(this.gv(),this.rv=!1,this.yv(t))}jd(t){this._v!==null&&this.xv(t)}cf(t){if(this.rv=!0,this.hv===null){let e={x:t.localX,y:t.localY};this.Pv(e,e,t)}}uf(t){this._v!==null&&(this.gv(),this._v.Qt().Uu(null),this.kv())}Tv(){return this.sv}Rv(){return this.nv}ef(){this.ev=1,this.ts().hn()}rf(t,e){if(!this._p.N().handleScale.pinch)return;let i=5*(e-this.ev);this.ev=e,this.ts().tc(t._t,i)}Jd(t){this.rv=!1,this.av=this.hv!==null,this.bv();let e=this.ts().Yu();this.hv!==null&&e.Vt()&&(this.lv={x:e.si(),y:e.ni()},this.hv={x:t.localX,y:t.localY})}Hd(t){if(this._v===null)return;let e=t.localX,i=t.localY;if(this.hv===null)this.Cv(t);else{this.av=!1;let r=le(this.lv),s=r.x+(e-this.hv.x),o=r.y+(i-this.hv.y);this.Mv(s,o,t)}}Yd(t){this.Cp().N().trackingMode.exitMode===0&&(this.av=!0),this.Dv(),this.yv(t)}jn(t,e){let i=this._v;return i===null?null:f5(i,t,e)}Vv(t,e){le(e==="left"?this.Gp:this.Jp).Np(yt({width:t,height:this.mp.height}))}Df(){return this.mp}Np(t){kr(this.mp,t)||(this.mp=t,this.xp=!0,this.Dp.resizeCanvasElement(t),this.Vp.resizeCanvasElement(t),this.xp=!1,this.cv.style.width=t.width+"px",this.cv.style.height=t.height+"px")}Iv(){let t=le(this._v);t.So(t.Co()),t.So(t.yo());for(let e of t.ba())if(t.Un(e)){let i=e.Wt();i!==null&&t.So(i),e.Ns()}for(let e of t.Oo())e.Ns()}Vf(){return this.Dp.bitmapSize}If(t,e,i){let r=this.Vf();r.width>0&&r.height>0&&t.drawImage(this.Dp.canvasElement,e,i)}Fp(t){if(t===0||this._v===null)return;t>1&&this.Iv(),this.Gp!==null&&this.Gp.Fp(t),this.Jp!==null&&this.Jp.Fp(t);let e={colorSpace:this._p.N().layout.colorSpace};if(t!==1){this.Dp.applySuggestedBitmapSize();let r=us(this.Dp,e);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.Up(s)}),this._v&&(this.Bv(r,nJ),this.Av(r),this.Bv(r,UR),this.Bv(r,zR)))}this.Vp.applySuggestedBitmapSize();let i=us(this.Vp,e);i!==null&&(i.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.Ev(i),this.Bv(i,iJ),this.Bv(i,zR))}zv(){return this.Gp}Lv(){return this.Jp}qp(t,e){this.Bv(t,e)}uv(){this._v!==null&&this._v.zo().u(this),this._v=null}xv(t){this.Sv(this.sv,t)}Sv(t,e){let i=e.localX,r=e.localY;t.v()&&t.p(this.ts().At().Z_(i),{x:i,y:r},e)}Up({context:t,bitmapSize:e}){let{width:i,height:r}=e,s=this.ts(),o=s.$(),a=s.xc();o===a?Fm(t,0,0,i,r,a):c5(t,0,0,i,r,o,a)}Av(t){let e=le(this._v),i=e.Lo().lr().Tt(e);i!==null&&i.nt(t,!1)}Ev(t){this.Ov(t,UR,_m,this.ts().Yu())}Bv(t,e){let i=le(this._v),r=i.Dt(),s=i.Oo();for(let o of s)this.Ov(t,e,S2,o);for(let o of r)this.Ov(t,e,S2,o);for(let o of s)this.Ov(t,e,_m,o);for(let o of r)this.Ov(t,e,_m,o)}Ov(t,e,i,r){let s=le(this._v),o=s.Qt().Hu(),a=o!==null&&o.Wo===r,l=o!==null&&a&&o.Fo!==void 0?o.Fo.Kn:void 0;C2(e,c=>i(c,t,a,l),r,s)}mv(){if(this._v===null)return;let t=this._p,e=this._v.Co().N().visible,i=this._v.yo().N().visible;e||this.Gp===null||(this.dv.removeChild(this.Gp.Rf()),this.Gp.m(),this.Gp=null),i||this.Jp===null||(this.fv.removeChild(this.Jp.Rf()),this.Jp.m(),this.Jp=null);let r=t.Qt().cc();e&&this.Gp===null&&(this.Gp=new km(this,t.N(),r,"left"),this.dv.appendChild(this.Gp.Rf())),i&&this.Jp===null&&(this.Jp=new km(this,t.N(),r,"right"),this.fv.appendChild(this.Jp.Rf()))}Nv(t){return t.df&&this.rv||this.hv!==null}Wv(t){return Math.max(0,Math.min(t,this.mp.width-1))}Fv(t){return Math.max(0,Math.min(t,this.mp.height-1))}Mv(t,e,i){this.ts().lc(this.Wv(t),this.Fv(e),i,le(this._v))}kv(){this.ts()._c()}Dv(){this.av&&(this.hv=null,this.kv())}Pv(t,e,i){this.hv=t,this.av=!1,this.Mv(e.x,e.y,i);let r=this.ts().Yu();this.lv={x:r.si(),y:r.ni()}}ts(){return this._p.Qt()}yv(t){if(!this.iv)return;let e=this.ts(),i=this.Wf();if(e.Vo(i,i.ks()),this.tv=null,this.iv=!1,e.rc(),this.ov!==null){let r=performance.now(),s=e.At();this.ov.le(s.iu(),r),this.ov.uu(r)||e._n(this.ov)}}gv(){this.hv=null}bv(){if(this._v){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)le(document.activeElement).blur();else{let t=document.getSelection();t!==null&&t.removeAllRanges()}!this._v.ks().Zi()&&this.ts().At().Zi()}}Cv(t){if(this._v===null)return;let e=this.ts(),i=e.At();if(i.Zi())return;let r=this._p.N(),s=r.handleScroll,o=r.kineticScroll;if((!s.pressedMouseMove||t.df)&&(!s.horzTouchDrag&&!s.vertTouchDrag||!t.df))return;let a=this._v.ks(),l=performance.now();if(this.tv!==null||this.Nv(t)||(this.tv={x:t.clientX,y:t.clientY,Lc:l,Hv:t.localX,Uv:t.localY}),this.tv!==null&&!this.iv&&(this.tv.x!==t.clientX||this.tv.y!==t.clientY)){if(t.df&&o.touch||!t.df&&o.mouse){let c=i.Q_();this.ov=new w2(.2/c,7/c,.997,15/c),this.ov.ep(i.iu(),this.tv.Lc)}else this.ov=null;a.Zi()||e.Ro(this._v,a,t.localY),e.nc(t.localX),this.iv=!0}this.iv&&(a.Zi()||e.Do(this._v,a,t.localY),e.ec(t.localX),this.ov!==null&&this.ov.ep(i.iu(),l))}},Pm=class{constructor(t,e,i,r,s){this.St=!0,this.mp=yt({width:0,height:0}),this.Sp=()=>this.Fp(3),this.Pp=t==="left",this.Au=i.cc,this.ys=e,this.$v=r,this.qv=s,this.Pf=document.createElement("div"),this.Pf.style.width="25px",this.Pf.style.height="100%",this.Pf.style.overflow="hidden",this.Dp=Da(this.Pf,yt({width:16,height:16})),this.Dp.subscribeSuggestedBitmapSizeChanged(this.Sp)}m(){this.Dp.unsubscribeSuggestedBitmapSizeChanged(this.Sp),Ma(this.Dp.canvasElement),this.Dp.dispose()}Rf(){return this.Pf}Df(){return this.mp}Np(t){kr(this.mp,t)||(this.mp=t,this.Dp.resizeCanvasElement(t),this.Pf.style.width=`${t.width}px`,this.Pf.style.height=`${t.height}px`,this.St=!0)}Fp(t){if(t<3&&!this.St||this.mp.width===0||this.mp.height===0)return;this.St=!1,this.Dp.applySuggestedBitmapSize();let e=us(this.Dp,{colorSpace:this.ys.layout.colorSpace});e!==null&&e.useBitmapCoordinateSpace(i=>{this.Up(i),this.$p(i)})}Vf(){return this.Dp.bitmapSize}If(t,e,i){let r=this.Vf();r.width>0&&r.height>0&&t.drawImage(this.Dp.canvasElement,e,i)}$p({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:r}){if(!this.$v())return;t.fillStyle=this.ys.timeScale.borderColor;let s=Math.floor(this.Au.N().S*i),o=Math.floor(this.Au.N().S*r),a=this.Pp?e.width-s:0;t.fillRect(a,0,s,o)}Up({context:t,bitmapSize:e}){Fm(t,0,0,e.width,e.height,this.qv())}};function Z2(n){return t=>t.ia?.(n)??[]}var rJ=Z2("normal"),sJ=Z2("top"),oJ=Z2("bottom"),E2=class{constructor(t,e){this.Yv=null,this.jv=null,this.M=null,this.Zv=!1,this.mp=yt({width:0,height:0}),this.Kv=new zt,this.gp=new Ea(5),this.xp=!1,this.Sp=()=>{this.xp||this._p.Qt().ar()},this.yp=()=>{this.xp||this._p.Qt().ar()},this._p=t,this.Yo=e,this.ys=t.N().layout,this.hp=document.createElement("tr"),this.Xv=document.createElement("td"),this.Xv.style.padding="0",this.Gv=document.createElement("td"),this.Gv.style.padding="0",this.Pf=document.createElement("td"),this.Pf.style.height="25px",this.Pf.style.padding="0",this.Jv=document.createElement("div"),this.Jv.style.width="100%",this.Jv.style.height="100%",this.Jv.style.position="relative",this.Jv.style.overflow="hidden",this.Pf.appendChild(this.Jv),this.Dp=Da(this.Jv,yt({width:16,height:16})),this.Dp.subscribeSuggestedBitmapSizeChanged(this.Sp);let i=this.Dp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Vp=Da(this.Jv,yt({width:16,height:16})),this.Vp.subscribeSuggestedBitmapSizeChanged(this.yp);let r=this.Vp.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.hp.appendChild(this.Xv),this.hp.appendChild(this.Pf),this.hp.appendChild(this.Gv),this.Qv(),this._p.Qt().do().i(this.Qv.bind(this),this),this.wf=new Oc(this.Vp.canvasElement,this,{Wd:()=>!0,Fd:()=>!this._p.N().handleScroll.horzTouchDrag})}m(){this.wf.m(),this.Yv!==null&&this.Yv.m(),this.jv!==null&&this.jv.m(),this.Vp.unsubscribeSuggestedBitmapSizeChanged(this.yp),Ma(this.Vp.canvasElement),this.Vp.dispose(),this.Dp.unsubscribeSuggestedBitmapSizeChanged(this.Sp),Ma(this.Dp.canvasElement),this.Dp.dispose()}Rf(){return this.hp}tm(){return this.Yv}im(){return this.jv}tf(t){if(this.Zv)return;this.Zv=!0;let e=this._p.Qt();!e.At().Zi()&&this._p.N().handleScale.axisPressedMouseMove.time&&e.Qu(t.localX)}Jd(t){this.tf(t)}if(){let t=this._p.Qt();!t.At().Zi()&&this.Zv&&(this.Zv=!1,this._p.N().handleScale.axisPressedMouseMove.time&&t.ac())}$d(t){let e=this._p.Qt();!e.At().Zi()&&this._p.N().handleScale.axisPressedMouseMove.time&&e.hc(t.localX)}Hd(t){this.$d(t)}Zd(){this.Zv=!1;let t=this._p.Qt();t.At().Zi()&&!this._p.N().handleScale.axisPressedMouseMove.time||t.ac()}Yd(){this.Zd()}Td(){this._p.N().handleScale.axisDoubleClickReset.time&&this._p.Qt().cn()}Cd(){this.Td()}Ed(){this._p.Qt().N().handleScale.axisPressedMouseMove.time&&this.Kp(1)}uf(){this.Kp(0)}Df(){return this.mp}sm(){return this.Kv}nm(t,e,i){kr(this.mp,t)||(this.mp=t,this.xp=!0,this.Dp.resizeCanvasElement(t),this.Vp.resizeCanvasElement(t),this.xp=!1,this.Pf.style.width=`${t.width}px`,this.Pf.style.height=`${t.height}px`,this.Kv.p(t)),this.Yv!==null&&this.Yv.Np(yt({width:e,height:t.height})),this.jv!==null&&this.jv.Np(yt({width:i,height:t.height}))}rm(){let t=this.hm();return Math.ceil(t.S+t.C+t.P+t.A+t.V+t.am)}Pt(){this._p.Qt().At().Va()}Vf(){return this.Dp.bitmapSize}If(t,e,i){let r=this.Vf();r.width>0&&r.height>0&&t.drawImage(this.Dp.canvasElement,e,i)}Fp(t){if(t===0)return;let e={colorSpace:this.ys.colorSpace};if(t!==1){this.Dp.applySuggestedBitmapSize();let r=us(this.Dp,e);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.Up(s),this.$p(s),this.lm(r,oJ)}),this.Yp(r),this.lm(r,rJ)),this.Yv!==null&&this.Yv.Fp(t),this.jv!==null&&this.jv.Fp(t)}this.Vp.applySuggestedBitmapSize();let i=us(this.Vp,e);i!==null&&(i.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.om([...this._p.Qt().js(),this._p.Qt().Yu()],i),this.lm(i,sJ))}lm(t,e){let i=this._p.Qt().js();for(let r of i)C2(e,s=>S2(s,t,!1,void 0),r,void 0);for(let r of i)C2(e,s=>_m(s,t,!1,void 0),r,void 0)}Up({context:t,bitmapSize:e}){Fm(t,0,0,e.width,e.height,this._p.Qt().xc())}$p({context:t,bitmapSize:e,verticalPixelRatio:i}){if(this._p.N().timeScale.borderVisible){t.fillStyle=this._m();let r=Math.max(1,Math.floor(this.hm().S*i));t.fillRect(0,0,e.width,r)}}Yp(t){let e=this._p.Qt().At(),i=e.Va();if(!i||i.length===0)return;let r=this.Yo.maxTickMarkWeight(i),s=this.hm(),o=e.N();o.borderVisible&&o.ticksVisible&&t.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.strokeStyle=this._m(),a.fillStyle=this._m();let u=Math.max(1,Math.floor(l)),d=Math.floor(.5*l);a.beginPath();let h=Math.round(s.C*c);for(let p=i.length;p--;){let g=Math.round(i[p].coord*l);a.rect(g-d,0,u,h)}a.fill()}),t.useMediaCoordinateSpace(({context:a})=>{let l=s.S+s.C+s.A+s.P/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this.Lp();for(let c of i)if(c.weight<r){let u=c.needAlignCoordinate?this.um(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}this._p.N().timeScale.allowBoldLabels&&(a.font=this.dm());for(let c of i)if(c.weight>=r){let u=c.needAlignCoordinate?this.um(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}})}um(t,e,i){let r=this.gp.Vi(t,i),s=r/2,o=Math.floor(e-s)+.5;return o<0?e+=Math.abs(0-o):o+r>this.mp.width&&(e-=Math.abs(this.mp.width-(o+r))),e}om(t,e){let i=this.hm();for(let r of t)for(let s of r.cs())s.Tt().nt(e,i)}_m(){return this._p.N().timeScale.borderColor}H(){return this.ys.textColor}W(){return this.ys.fontSize}Lp(){return xh(this.W(),this.ys.fontFamily)}dm(){return xh(this.W(),this.ys.fontFamily,"bold")}hm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new Ea,am:0});let t=this.M,e=this.Lp();if(t.k!==e){let i=this.W();t.P=i,t.k=e,t.A=3*i/12,t.V=3*i/12,t.Ji=9*i/12,t.L=0,t.am=4*i/12,t.Gi.In()}return this.M}Kp(t){this.Pf.style.cursor=t===1?"ew-resize":"default"}Qv(){let t=this._p.Qt(),e=t.N();e.leftPriceScale.visible||this.Yv===null||(this.Xv.removeChild(this.Yv.Rf()),this.Yv.m(),this.Yv=null),e.rightPriceScale.visible||this.jv===null||(this.Gv.removeChild(this.jv.Rf()),this.jv.m(),this.jv=null);let i={cc:this._p.Qt().cc()},r=()=>e.leftPriceScale.borderVisible&&t.At().N().borderVisible,s=()=>t.xc();e.leftPriceScale.visible&&this.Yv===null&&(this.Yv=new Pm("left",e,i,r,s),this.Xv.appendChild(this.Yv.Rf())),e.rightPriceScale.visible&&this.jv===null&&(this.jv=new Pm("right",e,i,r,s),this.Gv.appendChild(this.jv.Rf()))}},aJ=!!Nc&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(n=>n.brand.includes("Chromium"))&&!!Nc&&(navigator?.userAgentData?.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0),D2=class{constructor(t,e,i){var r;this.fm=[],this.pm=[],this.vm=0,this.ja=0,this.no=0,this.wm=0,this.gm=0,this.Mm=null,this.bm=!1,this.sv=new zt,this.nv=new zt,this.Vu=new zt,this.xm=null,this.Sm=null,this.op=t,this.ys=e,this.Yo=i,this.hp=document.createElement("div"),this.hp.classList.add("tv-lightweight-charts"),this.hp.style.overflow="hidden",this.hp.style.direction="ltr",this.hp.style.width="100%",this.hp.style.height="100%",(r=this.hp).style.userSelect="none",r.style.webkitUserSelect="none",r.style.msUserSelect="none",r.style.MozUserSelect="none",r.style.webkitTapHighlightColor="transparent",this.Cm=document.createElement("table"),this.Cm.setAttribute("cellspacing","0"),this.hp.appendChild(this.Cm),this.ym=this.Pm.bind(this),Db(this.ys)&&this.km(!0),this.ts=new g2(this.Bu.bind(this),this.ys,i),this.Qt().ju().i(this.Tm.bind(this),this),this.Rm=new E2(this,this.Yo),this.Cm.appendChild(this.Rm.Rf());let s=e.autoSize&&this.Dm(),o=this.ys.width,a=this.ys.height;if(s||o===0||a===0){let l=t.getBoundingClientRect();o=o||l.width,a=a||l.height}this.Vm(o,a),this.Im(),t.appendChild(this.hp),this.Bm(),this.ts.At().pu().i(this.ts.Bh.bind(this.ts),this),this.ts.do().i(this.ts.Bh.bind(this.ts),this)}Qt(){return this.ts}N(){return this.ys}Sf(){return this.fm}Am(){return this.Rm}m(){this.km(!1),this.vm!==0&&window.cancelAnimationFrame(this.vm),this.ts.ju().u(this),this.ts.At().pu().u(this),this.ts.do().u(this),this.ts.m();for(let t of this.fm)this.Cm.removeChild(t.Rf()),t.Tv().u(this),t.Rv().u(this),t.m();this.fm=[];for(let t of this.pm)this.Em(t);this.pm=[],le(this.Rm).m(),this.hp.parentElement!==null&&this.hp.parentElement.removeChild(this.hp),this.Vu.m(),this.sv.m(),this.nv.m(),this.zm()}Vm(t,e,i=!1){if(this.ja===e&&this.no===t)return;let r=function(a){let l=Math.floor(a.width),c=Math.floor(a.height);return yt({width:l-l%2,height:c-c%2})}(yt({width:t,height:e}));this.ja=r.height,this.no=r.width;let s=this.ja+"px",o=this.no+"px";le(this.hp).style.height=s,le(this.hp).style.width=o,this.Cm.style.height=s,this.Cm.style.width=o,i?this.Lm(Tn.gn(),performance.now()):this.ts.Bh()}Fp(t){t===void 0&&(t=Tn.gn());for(let e=0;e<this.fm.length;e++)this.fm[e].Fp(t.en(e).tn);this.ys.timeScale.visible&&this.Rm.Fp(t.nn())}hr(t){let e=Db(this.ys);this.ts.hr(t);let i=Db(this.ys);i!==e&&this.km(i),t.layout?.panes&&this.Om(),this.Bm(),this.Nm(t)}Tv(){return this.sv}Rv(){return this.nv}ju(){return this.Vu}Wm(){this.Mm!==null&&(this.Lm(this.Mm,performance.now()),this.Mm=null);let t=this.Fm(null),e=document.createElement("canvas");e.width=t.width,e.height=t.height;let i=le(e.getContext("2d"));return this.Fm(i),e}Hm(t){return t==="left"&&!this.Um()||t==="right"&&!this.$m()||this.fm.length===0?0:le(t==="left"?this.fm[0].zv():this.fm[0].Lv()).Wp()}qm(){return this.ys.autoSize&&this.xm!==null}Af(){return this.hp}Ym(t){this.Sm=t,this.Sm?this.Af().style.setProperty("cursor",t):this.Af().style.removeProperty("cursor")}jm(){return this.Sm}Zm(t){return ii(this.fm[t]).Df()}Om(){this.pm.forEach(t=>{t.Pt()})}Nm(t){(t.autoSize!==void 0||!this.xm||t.width===void 0&&t.height===void 0)&&(t.autoSize&&!this.xm&&this.Dm(),t.autoSize===!1&&this.xm!==null&&this.zm(),t.autoSize||t.width===void 0&&t.height===void 0||this.Vm(t.width||this.no,t.height||this.ja))}Fm(t){let e=0,i=0,r=this.fm[0],s=(a,l)=>{let c=0;for(let u=0;u<this.fm.length;u++){let d=this.fm[u],h=le(a==="left"?d.zv():d.Lv()),p=h.Vf();if(t!==null&&h.If(t,l,c),c+=p.height,u<this.fm.length-1){let g=this.pm[u],A=g.Vf();t!==null&&g.If(t,l,c),c+=A.height}}};this.Um()&&(s("left",0),e+=le(r.zv()).Vf().width);for(let a=0;a<this.fm.length;a++){let l=this.fm[a],c=l.Vf();if(t!==null&&l.If(t,e,i),i+=c.height,a<this.fm.length-1){let u=this.pm[a],d=u.Vf();t!==null&&u.If(t,e,i),i+=d.height}}e+=r.Vf().width,this.$m()&&(s("right",e),e+=le(r.Lv()).Vf().width);let o=(a,l,c)=>{le(a==="left"?this.Rm.tm():this.Rm.im()).If(le(t),l,c)};if(this.ys.timeScale.visible){let a=this.Rm.Vf();if(t!==null){let l=0;this.Um()&&(o("left",l,i),l=le(r.zv()).Vf().width),this.Rm.If(t,l,i),l+=a.width,this.$m()&&o("right",l,i)}i+=a.height}return yt({width:e,height:i})}Km(){let t=0,e=0,i=0;for(let y of this.fm)this.Um()&&(e=Math.max(e,le(y.zv()).zp(),this.ys.leftPriceScale.minimumWidth)),this.$m()&&(i=Math.max(i,le(y.Lv()).zp(),this.ys.rightPriceScale.minimumWidth)),t+=y.fo();e=y2(e),i=y2(i);let r=this.no,s=this.ja,o=Math.max(r-e-i,0),a=1*this.pm.length,l=this.ys.timeScale.visible,c=l?Math.max(this.Rm.rm(),this.ys.timeScale.minimumHeight):0;var u;c=(u=c)+u%2;let d=a+c,h=s<d?0:s-d,p=h/t,g=0,A=window.devicePixelRatio||1;for(let y=0;y<this.fm.length;++y){let b=this.fm[y];b.vv(this.ts.$s()[y]);let x=0,P=0;P=y===this.fm.length-1?Math.ceil((h-g)*A)/A:Math.round(b.fo()*p*A)/A,x=Math.max(P,2),g+=x,b.Np(yt({width:o,height:x})),this.Um()&&b.Vv(e,"left"),this.$m()&&b.Vv(i,"right"),b.Wf()&&this.ts.Zu(b.Wf(),x)}this.Rm.nm(yt({width:l?o:0,height:c}),l?e:0,l?i:0),this.ts.vo(o),this.wm!==e&&(this.wm=e),this.gm!==i&&(this.gm=i)}km(t){t?this.hp.addEventListener("wheel",this.ym,{passive:!1}):this.hp.removeEventListener("wheel",this.ym)}Xm(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return aJ?1/window.devicePixelRatio:1}Pm(t){if(!(t.deltaX!==0&&this.ys.handleScroll.mouseWheel||t.deltaY!==0&&this.ys.handleScale.mouseWheel))return;let e=this.Xm(t),i=e*t.deltaX/100,r=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),r!==0&&this.ys.handleScale.mouseWheel){let s=Math.sign(r)*Math.min(1,Math.abs(r)),o=t.clientX-this.hp.getBoundingClientRect().left;this.Qt().tc(o,s)}i!==0&&this.ys.handleScroll.mouseWheel&&this.Qt().sc(-80*i)}Lm(t,e){let i=t.nn();i===3&&this.Gm(),i!==3&&i!==2||(this.Jm(t),this.Qm(t,e),this.Rm.Pt(),this.fm.forEach(r=>{r.wv()}),this.Mm?.nn()===3&&(this.Mm.vn(t),this.Gm(),this.Jm(this.Mm),this.Qm(this.Mm,e),t=this.Mm,this.Mm=null)),this.Fp(t)}Qm(t,e){for(let i of t.pn())this.mn(i,e)}Jm(t){let e=this.ts.$s();for(let i=0;i<e.length;i++)t.en(i).sn&&e[i].Ao()}mn(t,e){let i=this.ts.At();switch(t.an){case 0:i.mu();break;case 1:i.wu(t.Ft);break;case 2:i.dn(t.Ft);break;case 3:i.fn(t.Ft);break;case 4:i.eu();break;case 5:t.Ft.uu(e)||i.fn(t.Ft.cu(e))}}Bu(t){this.Mm!==null?this.Mm.vn(t):this.Mm=t,this.bm||(this.bm=!0,this.vm=window.requestAnimationFrame(e=>{if(this.bm=!1,this.vm=0,this.Mm!==null){let i=this.Mm;this.Mm=null,this.Lm(i,e);for(let r of i.pn())if(r.an===5&&!r.Ft.uu(e)){this.Qt()._n(r.Ft);break}}}))}Gm(){this.Im()}Em(t){this.Cm.removeChild(t.Rf()),t.m()}Im(){let t=this.ts.$s(),e=t.length,i=this.fm.length;for(let r=e;r<i;r++){let s=ii(this.fm.pop());this.Cm.removeChild(s.Rf()),s.Tv().u(this),s.Rv().u(this),s.m();let o=this.pm.pop();o!==void 0&&this.Em(o)}for(let r=i;r<e;r++){let s=new x2(this,t[r]);if(s.Tv().i(this.tw.bind(this,s),this),s.Rv().i(this.iw.bind(this,s),this),this.fm.push(s),r>0){let o=new v2(this,r-1,r);this.pm.push(o),this.Cm.insertBefore(o.Rf(),this.Rm.Rf())}this.Cm.insertBefore(s.Rf(),this.Rm.Rf())}for(let r=0;r<e;r++){let s=t[r],o=this.fm[r];o.Wf()!==s?o.vv(s):o.pv()}this.Bm(),this.Km()}sw(t,e,i,r){let s=new Map;t!==null&&this.ts.js().forEach(d=>{let h=d.Ks().Wr(t);h!==null&&s.set(d,h)});let o;if(t!==null){let d=this.ts.At().ss(t)?.originalTime;d!==void 0&&(o=d)}let a=this.Qt().Hu(),l=a!==null&&a.Wo instanceof Pc?a.Wo:void 0,c=a!==null&&a.Fo!==void 0?a.Fo.Zn:void 0,u=this.nw(r);return{ew:o,Re:t??void 0,rw:e??void 0,hw:u!==-1?u:void 0,aw:l,lw:s,ow:c,_w:i??void 0}}nw(t){let e=-1;if(t)e=this.fm.indexOf(t);else{let i=this.Qt().Yu().Us();i!==null&&(e=this.Qt().$s().indexOf(i))}return e}tw(t,e,i,r){this.sv.p(()=>this.sw(e,i,r,t))}iw(t,e,i,r){this.nv.p(()=>this.sw(e,i,r,t))}Tm(t,e,i){this.Ym(this.Qt().Hu()?.Uo??null),this.Vu.p(()=>this.sw(t,e,i))}Bm(){let t=this.ys.timeScale.visible?"":"none";this.Rm.Rf().style.display=t}Um(){return this.fm[0].Wf().Co().N().visible}$m(){return this.fm[0].Wf().yo().N().visible}Dm(){return"ResizeObserver"in window&&(this.xm=new ResizeObserver(t=>{let e=t[t.length-1];e&&this.Vm(e.contentRect.width,e.contentRect.height)}),this.xm.observe(this.op,{box:"border-box"}),!0)}zm(){this.xm!==null&&this.xm.disconnect(),this.xm=null}};function Db(n){return!!(n.handleScroll.mouseWheel||n.handleScale.mouseWheel)}function lJ(n){return n.open===void 0&&n.value===void 0}function cJ(n){return function(t){return t.open!==void 0}(n)||function(t){return t.value!==void 0}(n)}function HR(n,t,e,i){let r=e.value,s={Re:t,wt:n,Ft:[r,r,r,r],ew:i};return e.color!==void 0&&(s.R=e.color),s}function uJ(n,t,e,i){let r=e.value,s={Re:t,wt:n,Ft:[r,r,r,r],ew:i};return e.lineColor!==void 0&&(s.vt=e.lineColor),e.topColor!==void 0&&(s.mr=e.topColor),e.bottomColor!==void 0&&(s.wr=e.bottomColor),s}function dJ(n,t,e,i){let r=e.value,s={Re:t,wt:n,Ft:[r,r,r,r],ew:i};return e.topLineColor!==void 0&&(s.gr=e.topLineColor),e.bottomLineColor!==void 0&&(s.Mr=e.bottomLineColor),e.topFillColor1!==void 0&&(s.br=e.topFillColor1),e.topFillColor2!==void 0&&(s.Sr=e.topFillColor2),e.bottomFillColor1!==void 0&&(s.Cr=e.bottomFillColor1),e.bottomFillColor2!==void 0&&(s.yr=e.bottomFillColor2),s}function hJ(n,t,e,i){let r={Re:t,wt:n,Ft:[e.open,e.high,e.low,e.close],ew:i};return e.color!==void 0&&(r.R=e.color),r}function pJ(n,t,e,i){let r={Re:t,wt:n,Ft:[e.open,e.high,e.low,e.close],ew:i};return e.color!==void 0&&(r.R=e.color),e.borderColor!==void 0&&(r.Ht=e.borderColor),e.wickColor!==void 0&&(r.vr=e.wickColor),r}function fJ(n,t,e,i,r){let s=ii(r)(e),o=Math.max(...s),a=Math.min(...s),l=s[s.length-1],c=[l,o,a,l],p=e,{time:u,color:d}=p,h=zm(p,["time","color"]);return{Re:t,wt:n,Ft:c,ew:i,se:h,R:d}}function _h(n){return n.Ft!==void 0}function YR(n,t){return t.customValues!==void 0&&(n.uw=t.customValues),n}function Sa(n){return(t,e,i,r,s,o)=>function(a,l){return l?l(a):lJ(a)}(i,o)?YR({wt:t,Re:e,ew:r},i):YR(n(t,e,i,r,s),i)}function GR(n){return{Candlestick:Sa(pJ),Bar:Sa(hJ),Area:Sa(uJ),Baseline:Sa(dJ),Histogram:Sa(HR),Line:Sa(HR),Custom:Sa(fJ)}[n]}function KR(n){return{Re:0,cw:new Map,Hh:n}}function $R(n,t){if(n!==void 0&&n.length!==0)return{dw:t.key(n[0].wt),fw:t.key(n[n.length-1].wt)}}function XR(n){let t;return n.forEach(e=>{t===void 0&&(t=e.ew)}),ii(t)}var M2=class{constructor(t){this.pw=new Map,this.mw=new Map,this.ww=new Map,this.gw=[],this.Yo=t}m(){this.pw.clear(),this.mw.clear(),this.ww.clear(),this.gw=[]}Mw(t,e){let i=this.pw.size!==0,r=!1,s=this.mw.get(t);if(s!==void 0)if(this.mw.size===1)i=!1,r=!0,this.pw.clear();else for(let l of this.gw)l.pointData.cw.delete(t)&&(r=!0);let o=[];if(e.length!==0){let l=e.map(p=>p.time),c=this.Yo.createConverterToInternalObj(e),u=GR(t.Rr()),d=t.da(),h=t.pa();o=e.map((p,g)=>{let A=c(p.time),y=this.Yo.key(A),b=this.pw.get(y);b===void 0&&(b=KR(A),this.pw.set(y,b),r=!0);let x=u(A,b.Re,p,l[g],d,h);return b.cw.set(t,x),x})}i&&this.bw(),this.xw(t,o);let a=-1;if(r){let l=[];this.pw.forEach(c=>{l.push({timeWeight:0,time:c.Hh,pointData:c,originalTime:XR(c.cw)})}),l.sort((c,u)=>this.Yo.key(c.time)-this.Yo.key(u.time)),a=this.Sw(l)}return this.Cw(t,a,function(l,c,u){let d=$R(l,u),h=$R(c,u);if(d!==void 0&&h!==void 0)return{yw:!1,zh:d.fw>=h.fw&&d.dw>=h.dw}}(this.mw.get(t),s,this.Yo))}vc(t){return this.Mw(t,[])}Pw(t,e,i){let r=e;(function(y){y.ew===void 0&&(y.ew=y.time)})(r),this.Yo.preprocessData(e);let s=this.Yo.createConverterToInternalObj([e])(e.time),o=this.ww.get(t);if(!i&&o!==void 0&&this.Yo.key(s)<this.Yo.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${s}`);let a=this.pw.get(this.Yo.key(s));if(i&&a===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");let l=a===void 0;a===void 0&&(a=KR(s),this.pw.set(this.Yo.key(s),a));let c=GR(t.Rr()),u=t.da(),d=t.pa(),h=c(s,a.Re,e,r.ew,u,d);a.cw.set(t,h),i?this.kw(t,h,a.Re):this.Tw(t,h);let p={zh:_h(h),yw:i};if(!l)return this.Cw(t,-1,p);let g={timeWeight:0,time:a.Hh,pointData:a,originalTime:XR(a.cw)},A=kc(this.gw,this.Yo.key(g.time),(y,b)=>this.Yo.key(y.time)<b);this.gw.splice(A,0,g);for(let y=A;y<this.gw.length;++y)Mb(this.gw[y].pointData,y);return this.Yo.fillWeightsForPoints(this.gw,A),this.Cw(t,A,p)}Tw(t,e){let i=this.mw.get(t);i===void 0&&(i=[],this.mw.set(t,i));let r=i.length!==0?i[i.length-1]:null;r===null||this.Yo.key(e.wt)>this.Yo.key(r.wt)?_h(e)&&i.push(e):_h(e)?i[i.length-1]=e:i.splice(-1,1),this.ww.set(t,e.wt)}kw(t,e,i){let r=this.mw.get(t);if(r===void 0)return;let s=kc(r,i,(o,a)=>o.Re<a);_h(e)?r[s]=e:r.splice(s,1)}xw(t,e){e.length!==0?(this.mw.set(t,e.filter(_h)),this.ww.set(t,e[e.length-1].wt)):(this.mw.delete(t),this.ww.delete(t))}bw(){for(let t of this.gw)t.pointData.cw.size===0&&this.pw.delete(this.Yo.key(t.time))}Sw(t){let e=-1;for(let i=0;i<this.gw.length&&i<t.length;++i){let r=this.gw[i],s=t[i];if(this.Yo.key(r.time)!==this.Yo.key(s.time)){e=i;break}s.timeWeight=r.timeWeight,Mb(s.pointData,i)}if(e===-1&&this.gw.length!==t.length&&(e=Math.min(this.gw.length,t.length)),e===-1)return-1;for(let i=e;i<t.length;++i)Mb(t[i].pointData,i);return this.Yo.fillWeightsForPoints(t,e),this.gw=t,e}Rw(){if(this.mw.size===0)return null;let t=0;return this.mw.forEach(e=>{e.length!==0&&(t=Math.max(t,e[e.length-1].Re))}),t}Cw(t,e,i){let r={wo:new Map,At:{Y_:this.Rw()}};if(e!==-1)this.mw.forEach((s,o)=>{r.wo.set(o,{se:s,Dw:o===t?i:void 0})}),this.mw.has(t)||r.wo.set(t,{se:[],Dw:i}),r.At.Vw=this.gw,r.At.Iw=e;else{let s=this.mw.get(t);r.wo.set(t,{se:s||[],Dw:i})}return r}};function Mb(n,t){n.Re=t,n.cw.forEach(e=>{e.Re=t})}function gJ(n,t){return n.wt<t}function mJ(n,t){return t<n.wt}function m5(n,t,e){let i=t.Uh(),r=t.bi(),s=kc(n,i,gJ),o=d5(n,r,mJ);if(!e)return{from:s,to:o};let a=s,l=o;return s>0&&s<n.length&&n[s].wt>=i&&(a=s-1),o>0&&o<n.length&&n[o-1].wt<=r&&(l=o+1),{from:a,to:l}}var Dh=class{constructor(t,e,i){this.Bw=!0,this.Aw=!0,this.Ew=!0,this.zw=[],this.Lw=null,this.Jn=t,this.Qn=e,this.Ow=i}Pt(t){this.Bw=!0,t==="data"&&(this.Aw=!0),t==="options"&&(this.Ew=!0)}Tt(){return this.Jn.Vt()?(this.Nw(),this.Lw===null?null:this.Ww):null}Fw(){this.zw=this.zw.map(t=>re(re({},t),this.Jn.Rh().Dr(t.wt)))}Hw(){this.Lw=null}Nw(){this.Aw&&(this.Uw(),this.Aw=!1),this.Ew&&(this.Fw(),this.Ew=!1),this.Bw&&(this.$w(),this.Bw=!1)}$w(){let t=this.Jn.Wt(),e=this.Qn.At();if(this.Hw(),e.Zi()||t.Zi())return;let i=e.ye();if(i===null||this.Jn.Ks().zr()===0)return;let r=this.Jn.zt();r!==null&&(this.Lw=m5(this.zw,i,this.Ow),this.qw(t,e,r.Ft),this.Yw())}},T2=class{constructor(t,e){this.jw=t,this.Yi=e}nt(t,e,i){this.jw.draw(t,this.Yi,e,i)}},I2=class extends Dh{constructor(t,e,i){super(t,e,!1),this.sh=i,this.Ww=new T2(this.sh.renderer(),r=>{let s=t.zt();return s===null?null:t.Wt().Nt(r,s.Ft)})}fa(t){return this.sh.priceValueBuilder(t)}va(t){return this.sh.isWhitespace(t)}Uw(){let t=this.Jn.Rh();this.zw=this.Jn.Ks().Hr().map(e=>Ne(re({wt:e.Re,_t:NaN},t.Dr(e.Re)),{Zw:e.se}))}qw(t,e){e.j_(this.zw,Ch(this.Lw))}Yw(){this.sh.update({bars:this.zw.map(_J),barSpacing:this.Qn.At().Q_(),visibleRange:this.Lw},this.Jn.N())}};function _J(n){return{x:n._t,time:n.wt,originalData:n.Zw,barColor:n.cr}}var AJ={color:"#2196f3"},yJ=(n,t,e)=>{let i=Ca(e);return new I2(n,t,i)};function Q2(n){let t={value:n.Ft[3],time:n.ew};return n.uw!==void 0&&(t.customValues=n.uw),t}function ZR(n){let t=Q2(n);return n.R!==void 0&&(t.color=n.R),t}function vJ(n){let t=Q2(n);return n.vt!==void 0&&(t.lineColor=n.vt),n.mr!==void 0&&(t.topColor=n.mr),n.wr!==void 0&&(t.bottomColor=n.wr),t}function wJ(n){let t=Q2(n);return n.gr!==void 0&&(t.topLineColor=n.gr),n.Mr!==void 0&&(t.bottomLineColor=n.Mr),n.br!==void 0&&(t.topFillColor1=n.br),n.Sr!==void 0&&(t.topFillColor2=n.Sr),n.Cr!==void 0&&(t.bottomFillColor1=n.Cr),n.yr!==void 0&&(t.bottomFillColor2=n.yr),t}function _5(n){let t={open:n.Ft[0],high:n.Ft[1],low:n.Ft[2],close:n.Ft[3],time:n.ew};return n.uw!==void 0&&(t.customValues=n.uw),t}function bJ(n){let t=_5(n);return n.R!==void 0&&(t.color=n.R),t}function SJ(n){let t=_5(n),{R:e,Ht:i,vr:r}=n;return e!==void 0&&(t.color=e),i!==void 0&&(t.borderColor=i),r!==void 0&&(t.wickColor=r),t}function k2(n){return{Area:vJ,Line:ZR,Baseline:wJ,Histogram:ZR,Bar:bJ,Candlestick:SJ,Custom:CJ}[n]}function CJ(n){let t=n.ew;return Ne(re({},n.se),{time:t})}var xJ={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},EJ={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},DJ={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:l5,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},Tb={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},MJ={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function QR(){return{width:0,height:0,autoSize:!1,layout:DJ,crosshair:xJ,grid:EJ,overlayPriceScales:re({},Tb),leftPriceScale:Ne(re({},Tb),{visible:!1}),rightPriceScale:Ne(re({},Tb),{visible:!0}),timeScale:MJ,localization:{locale:Nc?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}var Nm=class{constructor(t,e,i){this.bf=t,this.Kw=e,this.Xw=i??0}applyOptions(t){this.bf.Qt().$u(this.Kw,t,this.Xw)}options(){return this.Yi().N()}width(){return Lm(this.Kw)?this.bf.Hm(this.Kw):0}Yi(){return le(this.bf.Qt().qu(this.Kw,this.Xw)).Wt}},P2=class{constructor(t,e,i,r){this.bf=t,this.yt=i,this.Gw=e,this.Jw=r}getHeight(){return this.yt.$t()}setHeight(t){let e=this.bf.Qt(),i=e.Cc(this.yt);e.Xu(i,t)}paneIndex(){return this.bf.Qt().Cc(this.yt)}moveTo(t){let e=this.paneIndex();e!==t&&(jn(t>=0&&t<this.bf.Sf().length,"Invalid pane index"),this.bf.Qt().Gu(e,t))}getSeries(){return this.yt.wo().map(t=>this.Gw(t))??[]}getHTMLElement(){return this.bf.Sf()[this.paneIndex()].Rf()}attachPrimitive(t){this.yt.ua(t),t.attached&&t.attached({chart:this.Jw,requestUpdate:()=>this.yt.Qt().Bh()})}detachPrimitive(t){this.yt.ca(t)}priceScale(t){if(this.yt.co(t)===null)throw new Error(`Cannot find price scale with id: ${t}`);return new Nm(this.bf,t,this.paneIndex())}},TJ={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""},Om=class{constructor(t){this.ir=t}applyOptions(t){this.ir.hr(t)}options(){return this.ir.N()}Qw(){return this.ir}},N2=class{constructor(t,e,i,r,s,o){this.tg=new zt,this.Jn=t,this.ig=e,this.sg=i,this.Yo=s,this.Jw=r,this.ng=o}m(){this.tg.m()}priceFormatter(){return this.Jn.ra()}priceToCoordinate(t){let e=this.Jn.zt();return e===null?null:this.Jn.Wt().Nt(t,e.Ft)}coordinateToPrice(t){let e=this.Jn.zt();return e===null?null:this.Jn.Wt().Ts(t,e.Ft)}barsInLogicalRange(t){if(t===null)return null;let e=new Dc(new co(t.from,t.to)).o_(),i=this.Jn.Ks();if(i.Zi())return null;let r=i.Wr(e.Uh(),1),s=i.Wr(e.bi(),-1),o=le(i.Lr()),a=le(i.Zs());if(r!==null&&s!==null&&r.Re>s.Re)return{barsBefore:t.from-o,barsAfter:a-t.to};let l={barsBefore:r===null||r.Re===o?t.from-o:r.Re-o,barsAfter:s===null||s.Re===a?a-t.to:a-s.Re};return r!==null&&s!==null&&(l.from=r.ew,l.to=s.ew),l}setData(t){this.Yo,this.Jn.Rr(),this.ig.eg(this.Jn,t),this.rg("full")}update(t,e=!1){this.Jn.Rr(),this.ig.hg(this.Jn,t,e),this.rg("update")}dataByIndex(t,e){let i=this.Jn.Ks().Wr(t,e);return i===null?null:k2(this.seriesType())(i)}data(){let t=k2(this.seriesType());return this.Jn.Ks().Hr().map(e=>t(e))}subscribeDataChanged(t){this.tg.i(t)}unsubscribeDataChanged(t){this.tg._(t)}applyOptions(t){this.Jn.hr(t)}options(){return ds(this.Jn.N())}priceScale(){return this.sg.priceScale(this.Jn.Wt().wa(),this.getPane().paneIndex())}createPriceLine(t){let e=fi(ds(TJ),t),i=this.Jn.Oh(e);return new Om(i)}removePriceLine(t){this.Jn.Nh(t.Qw())}priceLines(){return this.Jn.Wh().map(t=>new Om(t))}seriesType(){return this.Jn.Rr()}attachPrimitive(t){this.Jn.ua(t),t.attached&&t.attached({chart:this.Jw,series:this,requestUpdate:()=>this.Jn.Qt().Bh(),horzScaleBehavior:this.Yo})}detachPrimitive(t){this.Jn.ca(t),t.detached&&t.detached(),this.Jn.Qt().Bh()}getPane(){let t=this.Jn,e=le(this.Jn.Qt().Hn(t));return this.ng(e)}moveToPane(t){this.Jn.Qt().Mc(this.Jn,t)}rg(t){this.tg.v()&&this.tg.p(t)}},O2=class{constructor(t,e,i){this.ag=new zt,this.g_=new zt,this.Kv=new zt,this.ts=t,this.uh=t.At(),this.Rm=e,this.uh.du().i(this.lg.bind(this)),this.uh.fu().i(this.og.bind(this)),this.Rm.sm().i(this._g.bind(this)),this.Yo=i}m(){this.uh.du().u(this),this.uh.fu().u(this),this.Rm.sm().u(this),this.ag.m(),this.g_.m(),this.Kv.m()}scrollPosition(){return this.uh.iu()}scrollToPosition(t,e){e?this.uh._u(t,1e3):this.ts.fn(t)}scrollToRealTime(){this.uh.ou()}getVisibleRange(){let t=this.uh.O_();return t===null?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){let e={from:this.Yo.convertHorzItemToInternal(t.from),to:this.Yo.convertHorzItemToInternal(t.to)},i=this.uh.H_(e);this.ts.wc(i)}getVisibleLogicalRange(){let t=this.uh.L_();return t===null?null:{from:t.Uh(),to:t.bi()}}setVisibleLogicalRange(t){jn(t.from<=t.to,"The from index cannot be after the to index."),this.ts.wc(t)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.mu()}logicalToCoordinate(t){let e=this.ts.At();return e.Zi()?null:e.qt(t)}coordinateToLogical(t){return this.uh.Zi()?null:this.uh.Z_(t)}timeToIndex(t,e){let i=this.Yo.convertHorzItemToInternal(t);return this.uh.A_(i,e)}timeToCoordinate(t){let e=this.timeToIndex(t,!1);return e===null?null:this.uh.qt(e)}coordinateToTime(t){let e=this.ts.At(),i=e.Z_(t),r=e.ss(i);return r===null?null:r.originalTime}width(){return this.Rm.Df().width}height(){return this.Rm.Df().height}subscribeVisibleTimeRangeChange(t){this.ag.i(t)}unsubscribeVisibleTimeRangeChange(t){this.ag._(t)}subscribeVisibleLogicalRangeChange(t){this.g_.i(t)}unsubscribeVisibleLogicalRangeChange(t){this.g_._(t)}subscribeSizeChange(t){this.Kv.i(t)}unsubscribeSizeChange(t){this.Kv._(t)}applyOptions(t){this.uh.hr(t)}options(){return Ne(re({},ds(this.uh.N())),{barSpacing:this.uh.Q_()})}lg(){this.ag.v()&&this.ag.p(this.getVisibleRange())}og(){this.g_.v()&&this.g_.p(this.getVisibleLogicalRange())}_g(t){this.Kv.p(t.width,t.height)}};function IJ(n){if(n===void 0||n.type==="custom")return;let t=n;t.minMove!==void 0&&t.precision===void 0&&(t.precision=function(e){if(e>=1)return 0;let i=0;for(;i<8;i++){let r=Math.round(e);if(Math.abs(r-e)<1e-8)return i;e*=10}return i}(t.minMove))}function JR(n){return function(t){if(lm(t.handleScale)){let i=t.handleScale;t.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(t.handleScale!==void 0){let{axisPressedMouseMove:i,axisDoubleClickReset:r}=t.handleScale;lm(i)&&(t.handleScale.axisPressedMouseMove={time:i,price:i}),lm(r)&&(t.handleScale.axisDoubleClickReset={time:r,price:r})}let e=t.handleScroll;lm(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(n),n}var R2=class{constructor(t,e,i){this.ug=new Map,this.cg=new Map,this.dg=new zt,this.fg=new zt,this.pg=new zt,this.ku=new WeakMap,this.vg=new M2(e);let r=i===void 0?ds(QR()):fi(ds(QR()),JR(i));this.mg=e,this.bf=new D2(t,r,e),this.bf.Tv().i(o=>{this.dg.v()&&this.dg.p(this.wg(o()))},this),this.bf.Rv().i(o=>{this.fg.v()&&this.fg.p(this.wg(o()))},this),this.bf.ju().i(o=>{this.pg.v()&&this.pg.p(this.wg(o()))},this);let s=this.bf.Qt();this.gg=new O2(s,this.bf.Am(),this.mg)}remove(){this.bf.Tv().u(this),this.bf.Rv().u(this),this.bf.ju().u(this),this.gg.m(),this.bf.m(),this.ug.clear(),this.cg.clear(),this.dg.m(),this.fg.m(),this.pg.m(),this.vg.m()}resize(t,e,i){this.autoSizeActive()||this.bf.Vm(t,e,i)}addCustomSeries(t,e={},i=0){let r=(s=>({type:"Custom",isBuiltIn:!1,defaultOptions:re(re({},AJ),s.defaultOptions()),Mg:yJ,bg:s}))(Ca(t));return this.xg(r,e,i)}addSeries(t,e={},i=0){return this.xg(t,e,i)}removeSeries(t){let e=ii(this.ug.get(t)),i=this.vg.vc(e);this.bf.Qt().vc(e),this.Sg(i),this.ug.delete(t),this.cg.delete(e)}eg(t,e){this.Sg(this.vg.Mw(t,e))}hg(t,e,i){this.Sg(this.vg.Pw(t,e,i))}subscribeClick(t){this.dg.i(t)}unsubscribeClick(t){this.dg._(t)}subscribeCrosshairMove(t){this.pg.i(t)}unsubscribeCrosshairMove(t){this.pg._(t)}subscribeDblClick(t){this.fg.i(t)}unsubscribeDblClick(t){this.fg._(t)}priceScale(t,e=0){return new Nm(this.bf,t,e)}timeScale(){return this.gg}applyOptions(t){this.bf.hr(JR(t))}options(){return this.bf.N()}takeScreenshot(){return this.bf.Wm()}removePane(t){this.bf.Qt().Ku(t)}swapPanes(t,e){this.bf.Qt().Gu(t,e)}autoSizeActive(){return this.bf.qm()}chartElement(){return this.bf.Af()}panes(){return this.bf.Qt().$s().map(t=>this.Cg(t))}paneSize(t=0){let e=this.bf.Zm(t);return{height:e.height,width:e.width}}setCrosshairPosition(t,e,i){let r=this.ug.get(i);if(r===void 0)return;let s=this.bf.Qt().Hn(r);s!==null&&this.bf.Qt().oc(t,e,s)}clearCrosshairPosition(){this.bf.Qt()._c(!0)}horzBehaviour(){return this.mg}xg(t,e={},i=0){jn(t.Mg!==void 0),IJ(e.priceFormat),t.type==="Candlestick"&&function(l){l.borderColor!==void 0&&(l.borderUpColor=l.borderColor,l.borderDownColor=l.borderColor),l.wickColor!==void 0&&(l.wickUpColor=l.wickColor,l.wickDownColor=l.wickColor)}(e);let r=fi(ds(o5),ds(t.defaultOptions),e),s=t.Mg,o=new Pc(this.bf.Qt(),t.type,r,s,t.bg);this.bf.Qt().dc(o,i);let a=new N2(o,this,this,this,this.mg,l=>this.Cg(l));return this.ug.set(a,o),this.cg.set(o,a),a}Sg(t){let e=this.bf.Qt();e.uc(t.At.Y_,t.At.Vw,t.At.Iw),t.wo.forEach((i,r)=>r.ht(i.se,i.Dw)),e.At().R_(),e.J_()}yg(t){return ii(this.cg.get(t))}wg(t){let e=new Map;t.lw.forEach((r,s)=>{let o=s.Rr(),a=k2(o)(r);if(o!=="Custom")jn(cJ(a));else{let l=s.pa();jn(!l||l(a)===!1)}e.set(this.yg(s),a)});let i=t.aw!==void 0&&this.cg.has(t.aw)?this.yg(t.aw):void 0;return{time:t.ew,logical:t.Re,point:t.rw,paneIndex:t.hw,hoveredSeries:i,hoveredObjectId:t.ow,seriesData:e,sourceEvent:t._w}}Cg(t){let e=this.ku.get(t);return e||(e=new P2(this.bf,i=>this.yg(i),t,this),this.ku.set(t,e)),e}};function kJ(n){if(Mh(n)){let t=document.getElementById(n);return jn(t!==null,`Cannot find element in DOM with id=${n}`),t}return n}function PJ(n,t,e){let i=kJ(n),r=new R2(i,t,e);return t.setOptions(r.options()),r}function ht(n,t){return PJ(n,new Im,Im.Wc(t))}var Rm=class extends Dh{constructor(t,e){super(t,e,!0)}qw(t,e,i){e.j_(this.zw,Ch(this.Lw)),t.Dl(this.zw,i,Ch(this.Lw))}Pg(t,e){return{wt:t,gt:e,_t:NaN,ut:NaN}}Uw(){let t=this.Jn.Rh();this.zw=this.Jn.Ks().Hr().map(e=>{let i=e.Ft[3];return this.kg(e.Re,i,t)})}};function NJ(n,t,e,i,r,s,o){if(t.length===0||i.from>=t.length||i.to<=0)return;let{context:a,horizontalPixelRatio:l,verticalPixelRatio:c}=n,u=t[i.from],d=s(n,u),h=u;if(i.to-i.from<2){let p=r/2;a.beginPath();let g={_t:u._t-p,ut:u.ut},A={_t:u._t+p,ut:u.ut};a.moveTo(g._t*l,g.ut*c),a.lineTo(A._t*l,A.ut*c),o(n,d,g,A)}else{let p=(A,y)=>{o(n,d,h,y),a.beginPath(),d=A,h=y},g=h;a.beginPath(),a.moveTo(u._t*l,u.ut*c);for(let A=i.from+1;A<i.to;++A){g=t[A];let y=s(n,g);switch(e){case 0:a.lineTo(g._t*l,g.ut*c);break;case 1:a.lineTo(g._t*l,t[A-1].ut*c),y!==d&&(p(y,g),a.lineTo(g._t*l,t[A-1].ut*c)),a.lineTo(g._t*l,g.ut*c);break;case 2:{let[b,x]=OJ(t,A-1,A);a.bezierCurveTo(b._t*l,b.ut*c,x._t*l,x.ut*c,g._t*l,g.ut*c);break}}e!==1&&y!==d&&(p(y,g),a.moveTo(g._t*l,g.ut*c))}(h!==g||h===g&&e===1)&&o(n,d,h,g)}}var e5=6;function Ib(n,t){return{_t:n._t-t._t,ut:n.ut-t.ut}}function t5(n,t){return{_t:n._t/t,ut:n.ut/t}}function OJ(n,t,e){let i=Math.max(0,t-1),r=Math.min(n.length-1,e+1);var s,o;return[(s=n[t],o=t5(Ib(n[e],n[i]),e5),{_t:s._t+o._t,ut:s.ut+o.ut}),Ib(n[e],t5(Ib(n[r],n[t]),e5))]}function RJ(n,t){let e=n.context;e.strokeStyle=t,e.stroke()}var F2=class extends Nr{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et(t){if(this.rt===null)return;let{ot:e,lt:i,Tg:r,Rg:s,ct:o,Kt:a,Dg:l}=this.rt;if(i===null)return;let c=t.context;c.lineCap="butt",c.lineWidth=o*t.verticalPixelRatio,Mc(c,a),c.lineJoin="round";let u=this.Vg.bind(this);s!==void 0&&NJ(t,e,s,i,r,u,RJ),l&&function(d,h,p,g,A){if(g.to-g.from<=0)return;let{horizontalPixelRatio:y,verticalPixelRatio:b,context:x}=d,P=null,T=Math.max(1,Math.floor(y))%2/2,k=p*b+T;for(let C=g.to-1;C>=g.from;--C){let M=h[C];if(M){let O=A(d,M);O!==P&&(x.beginPath(),P!==null&&x.fill(),x.fillStyle=O,P=O);let R=Math.round(M._t*y)+T,q=M.ut*b;x.moveTo(R,q),x.arc(R,q,k,0,2*Math.PI)}}x.fill()}(t,e,l,i,u)}},L2=class extends F2{Vg(t,e){return e.vt}},V2=class extends Rm{constructor(){super(...arguments),this.Ww=new L2}kg(t,e,i){return re(re({},this.Pg(t,e)),i.Dr(t))}Yw(){let t=this.Jn.N(),e={ot:this.zw,Kt:t.lineStyle,Rg:t.lineVisible?t.lineType:void 0,ct:t.lineWidth,Dg:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,lt:this.Lw,Tg:this.Qn.At().Q_()};this.Ww.ht(e)}},ft={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Mg:(n,t)=>new V2(n,t)};var B2=class extends Dh{constructor(t,e){super(t,e,!1)}qw(t,e,i){e.j_(this.zw,Ch(this.Lw)),t.Il(this.zw,i,Ch(this.Lw))}aM(t,e,i){return{wt:t,qh:e.Ft[0],Yh:e.Ft[1],jh:e.Ft[2],Zh:e.Ft[3],_t:NaN,Bl:NaN,Al:NaN,El:NaN,zl:NaN}}Uw(){let t=this.Jn.Rh();this.zw=this.Jn.Ks().Hr().map(e=>this.kg(e.Re,e,t))}};var q2=class extends Nr{constructor(){super(...arguments),this.Yt=null,this.sM=0}ht(t){this.Yt=t}et(t){if(this.Yt===null||this.Yt.Ks.length===0||this.Yt.lt===null)return;let{horizontalPixelRatio:e}=t;this.sM=function(s,o){if(s>=2.5&&s<=4)return Math.floor(3*o);let a=1-.2*Math.atan(Math.max(4,s)-4)/(.5*Math.PI),l=Math.floor(s*a*o),c=Math.floor(s*o),u=Math.min(l,c);return Math.max(Math.floor(o),u)}(this.Yt.Q_,e),this.sM>=2&&Math.floor(e)%2!=this.sM%2&&this.sM--;let i=this.Yt.Ks;this.Yt.lM&&this.oM(t,i,this.Yt.lt),this.Yt.Mi&&this.$p(t,i,this.Yt.lt);let r=this._M(e);(!this.Yt.Mi||this.sM>2*r)&&this.uM(t,i,this.Yt.lt)}oM(t,e,i){if(this.Yt===null)return;let{context:r,horizontalPixelRatio:s,verticalPixelRatio:o}=t,a="",l=Math.min(Math.floor(s),Math.floor(this.Yt.Q_*s));l=Math.max(Math.floor(s),Math.min(l,this.sM));let c=Math.floor(.5*l),u=null;for(let d=i.from;d<i.to;d++){let h=e[d];h.pr!==a&&(r.fillStyle=h.pr,a=h.pr);let p=Math.round(Math.min(h.Bl,h.zl)*o),g=Math.round(Math.max(h.Bl,h.zl)*o),A=Math.round(h.Al*o),y=Math.round(h.El*o),b=Math.round(s*h._t)-c,x=b+l-1;u!==null&&(b=Math.max(u+1,b),b=Math.min(b,x));let P=x-b+1;r.fillRect(b,A,P,p-A),r.fillRect(b,g+1,P,y-g),u=x}}_M(t){let e=Math.floor(1*t);this.sM<=2*e&&(e=Math.floor(.5*(this.sM-1)));let i=Math.max(Math.floor(t),e);return this.sM<=2*i?Math.max(Math.floor(t),Math.floor(1*t)):i}$p(t,e,i){if(this.Yt===null)return;let{context:r,horizontalPixelRatio:s,verticalPixelRatio:o}=t,a="",l=this._M(s),c=null;for(let u=i.from;u<i.to;u++){let d=e[u];d.dr!==a&&(r.fillStyle=d.dr,a=d.dr);let h=Math.round(d._t*s)-Math.floor(.5*this.sM),p=h+this.sM-1,g=Math.round(Math.min(d.Bl,d.zl)*o),A=Math.round(Math.max(d.Bl,d.zl)*o);if(c!==null&&(h=Math.max(c+1,h),h=Math.min(h,p)),this.Yt.Q_*s>2*l)LQ(r,h,g,p-h+1,A-g+1,l);else{let y=p-h+1;r.fillRect(h,g,y,A-g+1)}c=p}}uM(t,e,i){if(this.Yt===null)return;let{context:r,horizontalPixelRatio:s,verticalPixelRatio:o}=t,a="",l=this._M(s);for(let c=i.from;c<i.to;c++){let u=e[c],d=Math.round(Math.min(u.Bl,u.zl)*o),h=Math.round(Math.max(u.Bl,u.zl)*o),p=Math.round(u._t*s)-Math.floor(.5*this.sM),g=p+this.sM-1;if(u.cr!==a){let A=u.cr;r.fillStyle=A,a=A}this.Yt.Mi&&(p+=l,d+=l,g-=l,h-=l),d>h||r.fillRect(p,d,g-p+1,h-d+1)}}},j2=class extends B2{constructor(){super(...arguments),this.Ww=new q2}kg(t,e,i){return re(re({},this.aM(t,e,i)),i.Dr(t))}Yw(){let t=this.Jn.N();this.Ww.ht({Ks:this.zw,Q_:this.Qn.At().Q_(),lM:t.wickVisible,Mi:t.borderVisible,lt:this.Lw})}},kt={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Mg:(n,t)=>new j2(n,t)},W2=class extends Nr{constructor(){super(...arguments),this.Yt=null,this.cM=[]}ht(t){this.Yt=t,this.cM=[]}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(this.Yt===null||this.Yt.ot.length===0||this.Yt.lt===null)return;this.cM.length||this.dM(e);let r=Math.max(1,Math.floor(i)),s=Math.round(this.Yt.fM*i)-Math.floor(r/2),o=s+r;for(let a=this.Yt.lt.from;a<this.Yt.lt.to;a++){let l=this.Yt.ot[a],c=this.cM[a-this.Yt.lt.from],u=Math.round(l.ut*i),d,h;t.fillStyle=l.cr,u<=s?(d=u,h=o):(d=s,h=u-Math.floor(r/2)+r),t.fillRect(c.Uh,d,c.bi-c.Uh+1,h-d)}}dM(t){if(this.Yt===null||this.Yt.ot.length===0||this.Yt.lt===null)return void(this.cM=[]);let e=Math.ceil(this.Yt.Q_*t)<=1?0:Math.max(1,Math.floor(t)),i=Math.round(this.Yt.Q_*t)-e;this.cM=new Array(this.Yt.lt.to-this.Yt.lt.from);for(let s=this.Yt.lt.from;s<this.Yt.lt.to;s++){let o=this.Yt.ot[s],a=Math.round(o._t*t),l,c;if(i%2){let u=(i-1)/2;l=a-u,c=a+u}else{let u=i/2;l=a-u,c=a+u-1}this.cM[s-this.Yt.lt.from]={Uh:l,bi:c,pM:a,ne:o._t*t,wt:o.wt}}for(let s=this.Yt.lt.from+1;s<this.Yt.lt.to;s++){let o=this.cM[s-this.Yt.lt.from],a=this.cM[s-this.Yt.lt.from-1];o.wt===a.wt+1&&o.Uh-a.bi!==e+1&&(a.pM>a.ne?a.bi=o.Uh-e-1:o.Uh=a.bi+e+1)}let r=Math.ceil(this.Yt.Q_*t);for(let s=this.Yt.lt.from;s<this.Yt.lt.to;s++){let o=this.cM[s-this.Yt.lt.from];o.bi<o.Uh&&(o.bi=o.Uh);let a=o.bi-o.Uh+1;r=Math.min(a,r)}if(e>0&&r<4)for(let s=this.Yt.lt.from;s<this.Yt.lt.to;s++){let o=this.cM[s-this.Yt.lt.from];o.bi-o.Uh+1>r&&(o.pM>o.ne?o.bi-=1:o.Uh+=1)}}},U2=class extends Rm{constructor(){super(...arguments),this.Ww=new W2}kg(t,e,i){return re(re({},this.Pg(t,e)),i.Dr(t))}Yw(){let t={ot:this.zw,Q_:this.Qn.At().Q_(),lt:this.Lw,fM:this.Jn.Wt().Nt(this.Jn.N().base,le(this.Jn.zt()).Ft)};this.Ww.ht(t)}},A5={type:"Histogram",isBuiltIn:!0,defaultOptions:{color:"#26a69a",base:0},Mg:(n,t)=>new U2(n,t)};var z2=class{constructor(t,e){this.Jn=t,this.ah=e,this.mM()}detach(){this.Jn.detachPrimitive(this.ah)}getSeries(){return this.Jn}applyOptions(t){this.ah&&this.ah.hr&&this.ah.hr(t)}mM(){this.Jn.attachPrimitive(this.ah)}};function wh(n,t){return $2(Math.min(Math.max(n,12),30)*t)}function Rc(n,t){switch(n){case"arrowDown":case"arrowUp":return wh(t,1);case"circle":return wh(t,.8);case"square":return wh(t,.7)}}function y5(n){return function(t){let e=Math.ceil(t);return e%2!=0?e-1:e}(wh(n,1))}function v5(n){return Math.max(wh(n,.1),3)}function n5(n,t,e){return t?n:e?Math.ceil(n/2):0}function i5(n,t,e,i){let r=(Rc("arrowUp",i)-1)/2*e.WM,s=($2(i/2)-1)/2*e.WM;t.beginPath(),n?(t.moveTo(e._t-r,e.ut),t.lineTo(e._t,e.ut-r),t.lineTo(e._t+r,e.ut),t.lineTo(e._t+s,e.ut),t.lineTo(e._t+s,e.ut+r),t.lineTo(e._t-s,e.ut+r),t.lineTo(e._t-s,e.ut)):(t.moveTo(e._t-r,e.ut),t.lineTo(e._t,e.ut+r),t.lineTo(e._t+r,e.ut),t.lineTo(e._t+s,e.ut),t.lineTo(e._t+s,e.ut-r),t.lineTo(e._t-s,e.ut-r),t.lineTo(e._t-s,e.ut)),t.fill()}function r5(n,t,e,i,r,s){let o=(Rc("arrowUp",i)-1)/2,a=($2(i/2)-1)/2;return r>=t-a-2&&r<=t+a+2&&s>=(n?e:e-o)-2&&s<=(n?e+o:e)+2?!0:(()=>{if(r<t-o-3||r>t+o+3||s<(n?e-o-3:e)||s>(n?e:e+o+3))return!1;let l=Math.abs(r-t);return Math.abs(s-e)+3>=l/2})()}var H2=class{constructor(){this.Yt=null,this.On=new Ea,this.W=-1,this.F="",this.Mp=""}ht(t){this.Yt=t}Nn(t,e){this.W===t&&this.F===e||(this.W=t,this.F=e,this.Mp=xh(t,e),this.On.In())}jn(t,e){if(this.Yt===null||this.Yt.lt===null)return null;for(let i=this.Yt.lt.from;i<this.Yt.lt.to;i++){let r=this.Yt.ot[i];if(r&&LJ(r,t,e))return{zOrder:"normal",externalId:r.Zn??""}}return null}draw(t){t.useBitmapCoordinateSpace(e=>{this.et(e)})}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(this.Yt!==null&&this.Yt.lt!==null){t.textBaseline="middle",t.font=this.Mp;for(let r=this.Yt.lt.from;r<this.Yt.lt.to;r++){let s=this.Yt.ot[r];s.ri!==void 0&&(s.ri.Qi=this.On.Vi(t,s.ri.FM),s.ri.$t=this.W,s.ri._t=s._t-s.ri.Qi/2),FJ(s,t,e,i)}}}};function FJ(n,t,e,i){t.fillStyle=n.R,n.ri!==void 0&&function(r,s,o,a,l,c){r.save(),r.scale(l,c),r.fillText(s,o,a),r.restore()}(t,n.ri.FM,n.ri._t,n.ri.ut,e,i),function(r,s,o){if(r.zr!==0){switch(r.HM){case"arrowDown":return void i5(!1,s,o,r.zr);case"arrowUp":return void i5(!0,s,o,r.zr);case"circle":return void function(a,l,c){let u=(Rc("circle",c)-1)/2;a.beginPath(),a.arc(l._t,l.ut,u*l.WM,0,2*Math.PI,!1),a.fill()}(s,o,r.zr);case"square":return void function(a,l,c){let u=Rc("square",c),d=(u-1)*l.WM/2,h=l._t-d,p=l.ut-d;a.fillRect(h,p,u*l.WM,u*l.WM)}(s,o,r.zr)}r.HM}}(n,t,function(r,s,o){let a=Math.max(1,Math.floor(s))%2/2;return{_t:Math.round(r._t*s)+a,ut:r.ut*o,WM:s}}(n,e,i))}function LJ(n,t,e){return!(n.ri===void 0||!function(i,r,s,o,a,l){let c=o/2;return a>=i&&a<=i+s&&l>=r-c&&l<=r+c}(n.ri._t,n.ri.ut,n.ri.Qi,n.ri.$t,t,e))||function(i,r,s){if(i.zr===0)return!1;switch(i.HM){case"arrowDown":return r5(!0,i._t,i.ut,i.zr,r,s);case"arrowUp":return r5(!1,i._t,i.ut,i.zr,r,s);case"circle":return function(o,a,l,c,u){let d=2+Rc("circle",l)/2,h=o-c,p=a-u;return Math.sqrt(h*h+p*p)<=d}(i._t,i.ut,i.zr,r,s);case"square":return function(o,a,l,c,u){let d=Rc("square",l),h=(d-1)/2,p=o-h,g=a-h;return c>=p&&c<=p+d&&u>=g&&u<=g+d}(i._t,i.ut,i.zr,r,s)}}(n,t,e)}function s5(n){return n==="atPriceTop"||n==="atPriceBottom"||n==="atPriceMiddle"}function VJ(n,t,e,i,r,s,o,a){let l=function(g,A){if(s5(A.position)&&A.price!==void 0)return A.price;if("value"in(y=g)&&typeof y.value=="number")return g.value;var y;if(function(b){return"open"in b&&"high"in b&&"low"in b&&"close"in b}(g)){if(A.position==="inBar")return g.close;if(A.position==="aboveBar")return g.high;if(A.position==="belowBar")return g.low}}(e,t);if(l===void 0)return;let c=s5(t.position),u=a.timeScale(),d=xa(t.size)?Math.max(t.size,0):1,h=y5(u.options().barSpacing)*d,p=h/2;switch(n.zr=h,t.position){case"inBar":case"atPriceMiddle":return n.ut=le(o.priceToCoordinate(l)),void(n.ri!==void 0&&(n.ri.ut=n.ut+p+s+.6*r));case"aboveBar":case"atPriceTop":{let g=c?0:i.UM;return n.ut=le(o.priceToCoordinate(l))-p-g,n.ri!==void 0&&(n.ri.ut=n.ut-p-.6*r,i.UM+=1.2*r),void(c||(i.UM+=h+s))}case"belowBar":case"atPriceBottom":{let g=c?0:i.$M;return n.ut=le(o.priceToCoordinate(l))+p+g,n.ri!==void 0&&(n.ri.ut=n.ut+p+s+.6*r,i.$M+=1.2*r),void(c||(i.$M+=h+s))}}}var Y2=class{constructor(t,e){this.qM=[],this.St=!0,this.YM=!0,this.Gt=new H2,this.ge=t,this._p=e,this.Yt={ot:[],lt:null}}renderer(){if(!this.ge.options().visible)return null;this.St&&this.jM();let t=this._p.options().layout;return this.Gt.Nn(t.fontSize,t.fontFamily),this.Gt.ht(this.Yt),this.Gt}ZM(t){this.qM=t,this.Pt("data")}Pt(t){this.St=!0,t==="data"&&(this.YM=!0)}jM(){let t=this._p.timeScale(),e=this.qM;this.YM&&(this.Yt.ot=e.map(c=>({wt:c.time,_t:0,ut:0,zr:0,HM:c.shape,R:c.color,Zn:c.id,KM:c.KM,ri:void 0})),this.YM=!1);let i=this._p.options().layout;this.Yt.lt=null;let r=t.getVisibleLogicalRange();if(r===null)return;let s=new co(Math.floor(r.from),Math.ceil(r.to));if(this.ge.data()[0]===null||this.Yt.ot.length===0)return;let o=NaN,a=v5(t.options().barSpacing),l={UM:a,$M:a};this.Yt.lt=m5(this.Yt.ot,s,!0);for(let c=this.Yt.lt.from;c<this.Yt.lt.to;c++){let u=e[c];u.time!==o&&(l.UM=a,l.$M=a,o=u.time);let d=this.Yt.ot[c];d._t=le(t.logicalToCoordinate(u.time)),u.text!==void 0&&u.text.length>0&&(d.ri={FM:u.text,_t:0,ut:0,Qi:0,$t:0});let h=this.ge.dataByIndex(u.time,0);h!==null&&VJ(d,u,h,l,i.fontSize,a,this.ge,this._p)}this.St=!1}},G2=class{constructor(){this.sh=null,this.qM=[],this.XM=[],this.GM=null,this.ge=null,this._p=null,this.JM=!0,this.QM=null,this.tb=null,this.ib=null,this.sb=!0}attached(t){this.nb(),this._p=t.chart,this.ge=t.series,this.sh=new Y2(this.ge,le(this._p)),this.OM=t.requestUpdate,this.ge.subscribeDataChanged(e=>this.rg(e)),this.sb=!0,this.SM()}SM(){this.OM&&this.OM()}detached(){this.ge&&this.GM&&this.ge.unsubscribeDataChanged(this.GM),this._p=null,this.ge=null,this.sh=null,this.GM=null}ZM(t){this.sb=!0,this.qM=t,this.nb(),this.JM=!0,this.tb=null,this.SM()}eb(){return this.qM}paneViews(){return this.sh?[this.sh]:[]}updateAllViews(){this.rb()}hitTest(t,e){return this.sh?this.sh.renderer()?.jn(t,e)??null:null}autoscaleInfo(t,e){if(this.sh){let i=this.hb();if(i)return{priceRange:null,margins:i}}return null}hb(){let t=le(this._p).timeScale().options().barSpacing;if(this.JM||t!==this.ib){if(this.ib=t,this.qM.length>0){let e=v5(t),i=1.5*y5(t)+2*e,r=this.ab();this.QM={above:n5(i,r.aboveBar,r.inBar),below:n5(i,r.belowBar,r.inBar)}}else this.QM=null;this.JM=!1}return this.QM}ab(){return this.tb===null&&(this.tb=this.qM.reduce((t,e)=>(t[e.position]||(t[e.position]=!0),t),{inBar:!1,aboveBar:!1,belowBar:!1,atPriceTop:!1,atPriceBottom:!1,atPriceMiddle:!1})),this.tb}nb(){if(!this.sb||!this._p||!this.ge)return;let t=this._p.timeScale(),e=this.ge?.data();if(t.getVisibleLogicalRange()==null||!this.ge||e.length===0)return void(this.XM=[]);let i=t.timeToIndex(le(e[0].time),!0);this.XM=this.qM.map((r,s)=>{let o=t.timeToIndex(r.time,!0),a=o<i?1:-1,l=le(this.ge).dataByIndex(o,a),c={time:t.timeToIndex(le(l).time,!1),position:r.position,shape:r.shape,color:r.color,id:r.id,KM:s,text:r.text,size:r.size,price:r.price,ew:r.time};if(r.position==="atPriceTop"||r.position==="atPriceBottom"||r.position==="atPriceMiddle"){if(r.price===void 0)throw new Error(`Price is required for position ${r.position}`);return Ne(re({},c),{position:r.position,price:r.price})}return Ne(re({},c),{position:r.position,price:r.price})}),this.sb=!1}rb(t){this.sh&&(this.nb(),this.sh.ZM(this.XM),this.sh.Pt(t))}rg(t){this.sb=!0,this.SM()}},K2=class extends z2{constructor(t,e,i){super(t,e),i&&this.setMarkers(i)}setMarkers(t){this.ah.ZM(t)}markers(){return this.ah.eb()}};function Ta(n,t){let e=new K2(n,new G2);return t&&e.setMarkers(t),e}var K2e=Ne(re({},o5),{color:"#2196f3"});var J2=ka(Bm());var b5=(()=>{class n{http;mapService;fyersService;aliceblueService;zerodhaService;appService;charts={};candlestickSeries={};strike_interval;charts_instru;charts_expiry;charts_data={};fetch_delay=200;fetch_ce_interval;fetch_pe_interval;refresh_ce_interval;refresh_pe_interval;spot_chart_instru;spot_chart_chart;spot_candlestickSeries;spot_charts_data;spot_chart_instru2;spot_chart_chart2;spot_candlestickSeries2;spot_charts_data2;single_strike_ce;single_strike_pe;single_chart_ce;single_chart_pe;single_chart_ce_candlestickSeries;single_chart_ce_lineSeries;single_chart_pe_candlestickSeries;single_chart_pe_lineSeries;strangle_chart_chart;strangle_strike_ce;strangle_strike_pe;strangle_chart_candlestickSeries;stock_chart_data;stock_chart_chart;stock_lineSeries1;constructor(e,i,r,s,o,a){this.http=e,this.mapService=i,this.fyersService=r,this.aliceblueService=s,this.zerodhaService=o,this.appService=a}updateInstruExpiry(e=null,i=null){e&&(this.charts_instru=e),i&&(this.charts_expiry=i)}initSpotChart(e,i=!1){this.spot_chart_instru=e,this.spot_chart_chart&&this.spot_chart_chart.remove();let r=320,s=200;i&&(r=600,s=400);let o="spot-chart";this.spot_chart_chart=ht(o,{width:r,height:s,timeScale:{timeVisible:!0}}),this.spot_candlestickSeries=this.spot_chart_chart.addSeries(kt),this.fetchSpotChartData()}initSpotChart2(e,i=!1){this.spot_chart_instru2=e,this.spot_chart_chart2&&this.spot_chart_chart2.remove();let r=320,s=200;i&&(r=600,s=400);let o="spot-chart2";this.spot_chart_chart2=ht(o,{width:r,height:s,timeScale:{timeVisible:!0}}),this.spot_candlestickSeries2=this.spot_chart_chart2.addSeries(kt),this.fetchSpotChartData2()}fetchSpotChartData(){let e=this.appService.getLastWorkingDay(new Date),i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),r=new Date,s=""+r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+("0"+r.getDate()).slice(-2),o=this.mapService.getZerodhaInstruToken(this.spot_chart_instru);if(o){let l={responseType:"json",headers:new Fe({authorization:f.broker_auth})},c="https://kite.zerodha.com/oms/instruments/historical/"+o+"/minute?user_id="+f.zerodhaUserId+"&oi=1&from="+i+"&to="+s;this.http.get(c,l).subscribe(u=>{if(u.data.candles){let d=u.data.candles,h=[];d.length===0&&console.log("ZERO CANDLES FOR ",this.spot_chart_instru);for(let p=0;p<d.length;p++){let g=d[p],A=this.spot_charts_data;A||(A=[]);let y=g[0].replace("+0530","Z");A.push([y,g[1],g[2],g[3],g[4],g[5],g[6]]),this.spot_charts_data=A;let b={time:Date.parse(y)/1e3,open:g[1],high:g[2],low:g[3],close:g[4]};h.push(b)}this.spot_candlestickSeries.setData(h)}console.log("spot candles:",Object.keys(this.spot_chart_chart).length,this.spot_chart_chart)},u=>{console.log("zerodha spot fetch chart error",u)})}this.single_chart_ce&&this.fetchChartData(this.single_strike_ce,!1),this.single_chart_pe&&setTimeout(()=>{this.fetchChartData(this.single_strike_pe,!1)},300),setTimeout(()=>{this.updateSingleChart(this.single_strike_ce,"CE",!1),this.updateSingleChart(this.single_strike_pe,"PE",!1)},1500),this.fetchStrangleStrikesData(this.strangle_strike_ce,this.strangle_strike_pe,!1)}fetchSpotChartData2(){let e=this.appService.getLastWorkingDay(new Date),i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),r=new Date,s=""+r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+("0"+r.getDate()).slice(-2),o=this.mapService.getZerodhaInstruToken(this.spot_chart_instru2);if(o){let l={responseType:"json",headers:new Fe({authorization:f.broker_auth})},c="https://kite.zerodha.com/oms/instruments/historical/"+o+"/minute?user_id="+f.zerodhaUserId+"&oi=1&from="+i+"&to="+s;this.http.get(c,l).subscribe(u=>{if(u.data.candles){let d=u.data.candles,h=[];d.length===0&&console.log("ZERO CANDLES FOR ",this.spot_chart_instru2);for(let p=0;p<d.length;p++){let g=d[p],A=this.spot_charts_data2;A||(A=[]);let y=g[0].replace("+0530","Z");A.push([y,g[1],g[2],g[3],g[4],g[5],g[6]]),this.spot_charts_data2=A;let b={time:Date.parse(y)/1e3,open:g[1],high:g[2],low:g[3],close:g[4]};h.push(b)}this.spot_candlestickSeries2.setData(h)}console.log("spot candles:",Object.keys(this.spot_chart_chart2).length,this.spot_chart_chart2)},u=>{console.log("zerodha spot fetch chart error",u)})}}plotCurrentPrices(){let e=this.mapService.getScripLTP(null,null,this.spot_chart_instru,null),i=this.spot_charts_data,r=i[i.length-1],s={time:Date.parse(r[0])/1e3,open:r[1],high:r[2],low:r[3],close:e};this.spot_candlestickSeries.update(s);let o=this.mapService.getScripLTP(null,null,this.spot_chart_instru2,null),a=this.spot_charts_data2,l=a[a.length-1],c={time:Date.parse(l[0])/1e3,open:l[1],high:l[2],low:l[3],close:o};if(this.spot_candlestickSeries2.update(c),this.single_strike_ce){let u=this.mapService.getScripLTP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(this.single_strike_ce).scrip,this.mapService.parseScrip(this.single_strike_ce).type),d=this.charts_data[this.single_strike_ce],h=d[d.length-1],p={time:Date.parse(h[0])/1e3,open:h[1],high:h[2],low:h[3],close:u};if(this.single_chart_ce_candlestickSeries.update(p),f.showATPLine){let g=this.mapService.getScripATP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(this.single_strike_ce).scrip,this.mapService.parseScrip(this.single_strike_ce).type),A={time:Date.parse(h[0])/1e3,value:g};this.single_chart_ce_lineSeries.update(A)}else this.single_chart_ce_lineSeries.setData([])}if(this.single_strike_pe){let u=this.mapService.getScripLTP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(this.single_strike_pe).scrip,this.mapService.parseScrip(this.single_strike_pe).type),d=this.charts_data[this.single_strike_pe],h=d[d.length-1],p={time:Date.parse(h[0])/1e3,open:h[1],high:h[2],low:h[3],close:u};if(this.single_chart_pe_candlestickSeries.update(p),f.showATPLine){let g=this.mapService.getScripATP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(this.single_strike_pe).scrip,this.mapService.parseScrip(this.single_strike_pe).type),A={time:Date.parse(h[0])/1e3,value:g};this.single_chart_pe_lineSeries.update(A)}else this.single_chart_pe_lineSeries.setData([])}if(this.strangle_strike_ce&&this.strangle_strike_pe){let u=this.mapService.getScripLTP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(this.strangle_strike_ce).scrip,this.mapService.parseScrip(this.strangle_strike_ce).type),d=this.mapService.getScripLTP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(this.strangle_strike_pe).scrip,this.mapService.parseScrip(this.strangle_strike_pe).type),h=u+d,p=this.charts_data[this.strangle_strike_ce+"_"+this.strangle_strike_pe],g=p[p.length-1],A={time:Date.parse(g[0])/1e3,value:h};this.strangle_chart_candlestickSeries.update(A)}}resizeSingleCharts(e){e?(this.spot_chart_chart.resize(600,400),this.single_chart_ce&&this.single_chart_ce.resize(600,400),this.single_chart_pe&&this.single_chart_pe.resize(600,400)):(this.spot_chart_chart.resize(320,200),this.single_chart_ce&&this.single_chart_ce.resize(320,200),this.single_chart_pe&&this.single_chart_pe.resize(320,200))}updateSingleChart(e,i,r=!0,s=!1){if(e){let o=[],a=[],l=this.charts_data[e];if(!l)return;let c=this.mapService.getScripATP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(e).scrip,this.mapService.parseScrip(e).type);l.forEach(h=>{let p={time:Date.parse(h[0])/1e3,open:h[1],high:h[2],low:h[3],close:h[4]};o.push(p);let g={time:Date.parse(h[0])/1e3,value:c};a.push(g)});let u=320,d=200;if(s&&(u=600,d=400),i==="CE"){if(this.single_strike_ce=e,r){this.single_chart_ce&&this.single_chart_ce.remove();let h="chart-ce";this.single_chart_ce=ht(h,{width:u,height:d,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}}),this.single_chart_ce_candlestickSeries=this.single_chart_ce.addSeries(kt),this.single_chart_ce_lineSeries=this.single_chart_ce.addSeries(ft,{color:"#2962FF",lineWidth:2})}this.single_chart_ce_candlestickSeries.setData(o),f.showATPLine?this.single_chart_ce_lineSeries.setData(a):this.single_chart_ce_lineSeries.setData([])}else if(i==="PE"){if(this.single_strike_pe=e,r){this.single_chart_pe&&this.single_chart_pe.remove();let h="chart-pe";this.single_chart_pe=ht(h,{width:u,height:d,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}}),this.single_chart_pe_candlestickSeries=this.single_chart_pe.addSeries(kt),this.single_chart_pe_lineSeries=this.single_chart_pe.addSeries(ft,{color:"#2962FF",lineWidth:2})}this.single_chart_pe_candlestickSeries.setData(o),f.showATPLine?this.single_chart_pe_lineSeries.setData(a):this.single_chart_pe_lineSeries.setData([])}}}init_opt_charts(e,i,r,s,o,a,l){for(let c in this.charts)Object.prototype.hasOwnProperty.call(this.charts,c)&&this.charts[c].remove();this.charts={},this.fetch_ce_interval&&clearInterval(this.fetch_ce_interval),this.fetch_pe_interval&&clearInterval(this.fetch_pe_interval),this.refresh_ce_interval&&clearInterval(this.refresh_ce_interval),this.refresh_pe_interval&&clearInterval(this.refresh_pe_interval),this.charts_instru=e,this.strike_interval=a,this.charts_expiry=l,this.initForCallsPuts(i,r,a,"CE"),this.initForCallsPuts(s,o,a,"PE")}initForCallsPuts(e,i,r,s){let o=0;for(let u=i;u>=e;u-=r){let d="opt_chart_"+o+s;console.log("div_id",d);let h=ht(d,{width:320,height:200,timeScale:{timeVisible:!0}}),p=h.addSeries(kt);this.candlestickSeries[""+u+s]=p,this.charts[""+u+s]=h,o++}let a=0;for(let u=i;u>=e;u-=r)setTimeout(()=>{this.fetchChartData(u+s)},a*this.fetch_delay),a++;let l=this.fetch_ce_interval;s==="PE"&&(l=this.fetch_pe_interval),l=setInterval(()=>{let u=0;for(let d=i;d>=e;d-=r)setTimeout(()=>{this.fetchChartData(d+s)},u*this.fetch_delay),u++},6e4);let c=this.refresh_ce_interval;s==="PE"&&(c=this.refresh_pe_interval),c=setInterval(()=>{for(let u=i;u>=e;u-=r)this.plotOptChartsCurrentPrice(u+s)},1e3)}fetchChartData(e,i=!0){let r=this.mapService.getSubscriptionObject(e,this.charts_instru,this.charts_expiry),s=this.zerodhaService.findStrikeInMasters(r),o=this.appService.getLastWorkingDay(new Date),a=""+o.getFullYear()+"-"+("0"+(o.getMonth()+1)).slice(-2)+"-"+("0"+o.getDate()).slice(-2),l=new Date,c=""+l.getFullYear()+"-"+("0"+(l.getMonth()+1)).slice(-2)+"-"+("0"+l.getDate()).slice(-2);if(s&&s.token){let d={responseType:"json",headers:new Fe({authorization:f.broker_auth})},h="https://kite.zerodha.com/oms/instruments/historical/"+s.token+"/minute?user_id="+f.zerodhaUserId+"&oi=1&from="+a+"&to="+c;this.http.get(h,d).subscribe(p=>{if(p.data.candles){let g=p.data.candles;g.length===0&&console.log("ZERO CANDLES FOR ",e);let A=[];this.charts_data[e]=[];let y=[];for(let b=0;b<g.length;b++){let x=g[b],P=x[0].replace("+0530","Z");y.push([P,x[1],x[2],x[3],x[4],x[5],x[6]]);let T={time:Date.parse(P)/1e3,open:x[1],high:x[2],low:x[3],close:x[4]};A.push(T)}if(this.charts_data[e]=y,i){this.candlestickSeries[""+e].setData(A);let x=this.charts[""+e]}}console.log("candles:",Object.keys(this.charts_data).length,this.charts_data)},p=>{console.log("zerodha fetch chart error",p)})}}plotOptChartsCurrentPrice(e){let i=this.mapService.getScripLTP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(e).scrip,this.mapService.parseScrip(e).type),r=this.charts_data[e],s=r[r.length-1],o=this.candlestickSeries[""+e],a={time:Date.parse(s[0])/1e3,open:s[1],high:s[2],low:s[3],close:i};o.update(a)}fetchStrangleStrikesData(e,i,r=!0){e&&i&&(this.fetchChartData(e,!1),this.fetchChartData(i,!1),setTimeout(()=>{this.updateStrangleChart(e,i,r)},3e3))}updateStrangleChart(e,i,r=!0){if(e&&i){this.strangle_strike_ce=e,this.strangle_strike_pe=i;let s=[],o=this.charts_data[e];if(!o)return;let a=this.charts_data[i];if(!a)return;let l=this.getStrangleValues(o,a);if(this.charts_data[this.strangle_strike_ce+"_"+this.strangle_strike_pe]=l,l.forEach(c=>{let u={time:Date.parse(c[0])/1e3,value:c[1]};s.push(u)}),r){this.strangle_chart_chart&&this.strangle_chart_chart.remove();let c="strangle-chart";this.strangle_chart_chart=ht(c,{width:320,height:200,timeScale:{timeVisible:!0}}),this.strangle_chart_candlestickSeries=this.strangle_chart_chart.addSeries(ft)}this.strangle_chart_candlestickSeries.setData(s)}}initTV_charts_static(){let i=ht("tv_test",{width:400,height:200,timeScale:{timeVisible:!0}}).addSeries(kt),r="2018-06-25T09:15:00+0530";r=r.replace("+0530","Z"),i.setData([{time:Date.parse(r)/1e3,open:75.16,high:82.84,low:36.16,close:45.72},{time:Date.parse("2018-06-25T09:20:00.000Z")/1e3,open:45.12,high:53.9,low:45.12,close:48.09},{time:Date.parse("2018-06-25T09:25:00.000Z")/1e3,open:60.71,high:60.71,low:53.39,close:59.29},{time:Date.parse("2018-06-25T09:30:00.000Z")/1e3,open:68.26,high:68.26,low:59.04,close:60.5},{time:Date.parse("2018-06-25T09:35:00.000Z")/1e3,open:67.71,high:105.85,low:66.67,close:91.04},{time:Date.parse("2018-06-25T09:40:00.000Z")/1e3,open:91.04,high:121.4,low:82.7,close:111.4},{time:Date.parse("2018-06-25T09:45:00.000Z")/1e3,open:111.51,high:142.83,low:103.34,close:131.25},{time:Date.parse("2018-06-25T09:50:00.000Z")/1e3,open:131.33,high:151.17,low:77.68,close:96.43},{time:Date.parse("2018-06-25T09:55:00.000Z")/1e3,open:106.33,high:110.2,low:90.39,close:98.1},{time:Date.parse("2018-06-25T10:00:00.000Z")/1e3,open:109.87,high:114.69,low:85.66,close:111.26}])}initTV_charts_changing(){var i=ht("tv_test",{width:400,height:200}).addSeries(kt),r=[{time:"2018-10-19",open:54.62,high:55.5,low:54.52,close:54.9},{time:"2018-10-22",open:55.08,high:55.27,low:54.61,close:54.98},{time:"2018-10-23",open:56.09,high:57.47,low:56.09,close:57.21},{time:"2018-10-24",open:57,high:58.44,low:56.41,close:57.42},{time:"2018-10-25",open:57.46,high:57.63,low:56.17,close:56.43},{time:"2018-10-26",open:56.26,high:56.62,low:55.19,close:55.51},{time:"2018-10-29",open:55.81,high:57.15,low:55.72,close:56.48},{time:"2018-10-30",open:56.92,high:58.8,low:56.92,close:58.18},{time:"2018-10-31",open:58.32,high:58.32,low:56.76,close:57.09},{time:"2018-11-01",open:56.98,high:57.28,low:55.55,close:56.05},{time:"2018-11-02",open:56.34,high:57.08,low:55.92,close:56.63},{time:"2018-11-05",open:56.51,high:57.45,low:56.51,close:57.21},{time:"2018-11-06",open:57.02,high:57.35,low:56.65,close:57.21},{time:"2018-11-07",open:57.55,high:57.78,low:57.03,close:57.65},{time:"2018-11-08",open:57.7,high:58.44,low:57.66,close:58.27},{time:"2018-11-09",open:58.32,high:59.2,low:57.94,close:58.46},{time:"2018-11-12",open:58.84,high:59.4,low:58.54,close:58.72},{time:"2018-11-13",open:59.09,high:59.14,low:58.32,close:58.66},{time:"2018-11-14",open:59.13,high:59.32,low:58.41,close:58.94},{time:"2018-11-15",open:58.85,high:59.09,low:58.45,close:59.08},{time:"2018-11-16",open:59.06,high:60.39,low:58.91,close:60.21},{time:"2018-11-19",open:60.25,high:61.32,low:60.18,close:60.62},{time:"2018-11-20",open:61.03,high:61.58,low:59.17,close:59.46},{time:"2018-11-21",open:59.26,high:59.9,low:58.88,close:59.16},{time:"2018-11-23",open:58.86,high:59,low:58.29,close:58.64},{time:"2018-11-26",open:58.64,high:59.51,low:58.31,close:59.17},{time:"2018-11-27",open:59.21,high:60.7,low:59.18,close:60.65},{time:"2018-11-28",open:60.7,high:60.73,low:59.64,close:60.06},{time:"2018-11-29",open:59.42,high:59.79,low:59.26,close:59.45},{time:"2018-11-30",open:59.57,high:60.37,low:59.48,close:60.3},{time:"2018-12-03",open:59.5,high:59.75,low:57.69,close:58.16},{time:"2018-12-04",open:58.1,high:59.4,low:57.96,close:58.09},{time:"2018-12-06",open:58.18,high:58.64,low:57.16,close:58.08},{time:"2018-12-07",open:57.91,high:58.43,low:57.34,close:57.68},{time:"2018-12-10",open:57.8,high:58.37,low:56.87,close:58.27},{time:"2018-12-11",open:58.77,high:59.4,low:58.63,close:58.85},{time:"2018-12-12",open:57.79,high:58.19,low:57.23,close:57.25},{time:"2018-12-13",open:57,high:57.5,low:56.81,close:57.09},{time:"2018-12-14",open:56.95,high:57.5,low:56.75,close:57.08},{time:"2018-12-17",open:57.06,high:57.31,low:55.53,close:55.95},{time:"2018-12-18",open:55.94,high:56.69,low:55.31,close:55.65},{time:"2018-12-19",open:55.72,high:56.92,low:55.5,close:55.86},{time:"2018-12-20",open:55.92,high:56.01,low:54.26,close:55.07},{time:"2018-12-21",open:54.84,high:56.53,low:54.24,close:54.92},{time:"2018-12-24",open:54.68,high:55.04,low:52.94,close:53.05},{time:"2018-12-26",open:53.23,high:54.47,low:52.4,close:54.44},{time:"2018-12-27",open:54.31,high:55.17,low:53.35,close:55.15},{time:"2018-12-28",open:55.37,high:55.86,low:54.9,close:55.27},{time:"2018-12-31",open:55.53,high:56.23,low:55.07,close:56.22},{time:"2019-01-02",open:56.16,high:56.16,low:55.28,close:56.02},{time:"2019-01-03",open:56.3,high:56.99,low:56.06,close:56.22},{time:"2019-01-04",open:56.49,high:56.89,low:55.95,close:56.36},{time:"2019-01-07",open:56.76,high:57.26,low:56.55,close:56.72},{time:"2019-01-08",open:57.27,high:58.69,low:57.05,close:58.38},{time:"2019-01-09",open:57.68,high:57.72,low:56.85,close:57.05},{time:"2019-01-10",open:57.29,high:57.7,low:56.87,close:57.6},{time:"2019-01-11",open:57.84,high:58.26,low:57.42,close:58.02},{time:"2019-01-14",open:57.83,high:58.15,low:57.67,close:58.03},{time:"2019-01-15",open:57.74,high:58.29,low:57.58,close:58.1},{time:"2019-01-16",open:57.93,high:57.93,low:57,close:57.08},{time:"2019-01-17",open:57.16,high:57.4,low:56.21,close:56.83},{time:"2019-01-18",open:56.92,high:57.47,low:56.84,close:57.09},{time:"2019-01-22",open:57.23,high:57.39,low:56.4,close:56.99},{time:"2019-01-23",open:56.98,high:57.87,low:56.93,close:57.76},{time:"2019-01-24",open:57.61,high:57.65,low:56.5,close:57.07},{time:"2019-01-25",open:57.18,high:57.47,low:56.23,close:56.4},{time:"2019-01-28",open:56.12,high:56.22,low:54.8,close:55.07},{time:"2019-01-29",open:53.62,high:54.3,low:52.97,close:53.28},{time:"2019-01-30",open:53.1,high:54.02,low:52.28,close:54},{time:"2019-01-31",open:54.05,high:55.19,low:53.53,close:55.06},{time:"2019-02-01",open:55.21,high:55.3,low:54.47,close:54.55},{time:"2019-02-04",open:54.6,high:54.69,low:53.67,close:54.04},{time:"2019-02-05",open:54.1,high:54.34,low:53.61,close:54.14},{time:"2019-02-06",open:54.11,high:54.37,low:53.68,close:53.79},{time:"2019-02-07",open:53.61,high:53.73,low:53.02,close:53.57},{time:"2019-02-08",open:53.36,high:53.96,low:53.3,close:53.95},{time:"2019-02-11",open:54.13,high:54.37,low:53.86,close:54.05},{time:"2019-02-12",open:54.45,high:54.77,low:54.19,close:54.42},{time:"2019-02-13",open:54.35,high:54.77,low:54.28,close:54.48},{time:"2019-02-14",open:54.38,high:54.52,low:53.95,close:54.03},{time:"2019-02-15",open:54.48,high:55.19,low:54.32,close:55.16},{time:"2019-02-19",open:55.06,high:55.66,low:54.82,close:55.44},{time:"2019-02-20",open:55.37,high:55.91,low:55.24,close:55.76},{time:"2019-02-21",open:55.55,high:56.72,low:55.46,close:56.15},{time:"2019-02-22",open:56.43,high:57.13,low:56.4,close:56.92},{time:"2019-02-25",open:57,high:57.27,low:56.55,close:56.78},{time:"2019-02-26",open:56.82,high:57.09,low:56.46,close:56.64},{time:"2019-02-27",open:56.55,high:56.73,low:56.35,close:56.72},{time:"2019-02-28",open:56.74,high:57.61,low:56.72,close:56.92},{time:"2019-03-01",open:57.02,high:57.15,low:56.35,close:56.96},{time:"2019-03-04",open:57.15,high:57.34,low:55.66,close:56.24},{time:"2019-03-05",open:56.09,high:56.17,low:55.51,close:56.08},{time:"2019-03-06",open:56.19,high:56.42,low:55.45,close:55.68},{time:"2019-03-07",open:55.76,high:56.4,low:55.72,close:56.3},{time:"2019-03-08",open:56.36,high:56.68,low:56,close:56.53},{time:"2019-03-11",open:56.76,high:57.62,low:56.75,close:57.58},{time:"2019-03-12",open:57.63,high:58.11,low:57.36,close:57.43},{time:"2019-03-13",open:57.37,high:57.74,low:57.34,close:57.66},{time:"2019-03-14",open:57.71,high:58.09,low:57.51,close:57.95},{time:"2019-03-15",open:58.04,high:58.51,low:57.93,close:58.39},{time:"2019-03-18",open:58.27,high:58.32,low:57.56,close:58.07},{time:"2019-03-19",open:58.1,high:58.2,low:57.31,close:57.5},{time:"2019-03-20",open:57.51,high:58.05,low:57.11,close:57.67},{time:"2019-03-21",open:57.58,high:58.49,low:57.57,close:58.29},{time:"2019-03-22",open:58.16,high:60,low:58.13,close:59.76},{time:"2019-03-25",open:59.63,high:60.19,low:59.53,close:60.08},{time:"2019-03-26",open:60.3,high:60.69,low:60.17,close:60.63},{time:"2019-03-27",open:60.56,high:61.19,low:60.48,close:60.88},{time:"2019-03-28",open:60.88,high:60.89,low:58.44,close:59.08},{time:"2019-03-29",open:59.2,high:59.27,low:58.32,close:59.13},{time:"2019-04-01",open:59.39,high:59.41,low:58.79,close:59.09},{time:"2019-04-02",open:59.22,high:59.23,low:58.34,close:58.53},{time:"2019-04-03",open:58.78,high:59.07,low:58.41,close:58.87},{time:"2019-04-04",open:58.84,high:59.1,low:58.77,close:58.99},{time:"2019-04-05",open:59.02,high:59.09,low:58.82,close:59.09},{time:"2019-04-08",open:59.02,high:59.13,low:58.72,close:59.13},{time:"2019-04-09",open:58.37,high:58.56,low:58.04,close:58.4},{time:"2019-04-10",open:58.4,high:58.7,low:58.36,close:58.61},{time:"2019-04-11",open:58.65,high:58.73,low:58.2,close:58.56},{time:"2019-04-12",open:58.75,high:58.79,low:58.52,close:58.74},{time:"2019-04-15",open:58.91,high:58.95,low:58.59,close:58.71},{time:"2019-04-16",open:58.79,high:58.98,low:58.66,close:58.79},{time:"2019-04-17",open:58.4,high:58.46,low:57.64,close:57.78},{time:"2019-04-18",open:57.51,high:58.2,low:57.28,close:58.04},{time:"2019-04-22",open:58.14,high:58.49,low:57.89,close:58.37},{time:"2019-04-23",open:57.62,high:57.72,low:56.3,close:57.15},{time:"2019-04-24",open:57.34,high:57.57,low:56.73,close:57.08},{time:"2019-04-25",open:56.82,high:56.9,low:55.75,close:55.85},{time:"2019-04-26",open:56.06,high:56.81,low:55.83,close:56.58},{time:"2019-04-29",open:56.75,high:57.17,low:56.71,close:56.84},{time:"2019-04-30",open:56.99,high:57.45,low:56.76,close:57.19},{time:"2019-05-01",open:57.23,high:57.3,low:56.52,close:56.52},{time:"2019-05-02",open:56.81,high:58.23,low:56.68,close:56.99},{time:"2019-05-03",open:57.15,high:57.36,low:56.87,close:57.24},{time:"2019-05-06",open:56.83,high:57.09,low:56.74,close:56.91},{time:"2019-05-07",open:56.69,high:56.81,low:56.33,close:56.63},{time:"2019-05-08",open:56.66,high:56.7,low:56.25,close:56.38},{time:"2019-05-09",open:56.12,high:56.56,low:55.93,close:56.48},{time:"2019-05-10",open:56.49,high:57.04,low:56.26,close:56.91},{time:"2019-05-13",open:56.72,high:57.34,low:56.66,close:56.75},{time:"2019-05-14",open:56.76,high:57.19,low:56.5,close:56.55},{time:"2019-05-15",open:56.51,high:56.84,low:56.17,close:56.81},{time:"2019-05-16",open:57,high:57.8,low:56.82,close:57.38},{time:"2019-05-17",open:57.06,high:58.48,low:57.01,close:58.09},{time:"2019-05-20",open:59.15,high:60.54,low:58,close:59.01},{time:"2019-05-21",open:59.1,high:59.63,low:58.76,close:59.5},{time:"2019-05-22",open:59.09,high:59.37,low:58.96,close:59.25},{time:"2019-05-23",open:59,high:59.27,low:58.54,close:58.87},{time:"2019-05-24",open:59.07,high:59.36,low:58.67,close:59.32},{time:"2019-05-28",open:59.21,high:59.66,low:59.02,close:59.57}];i.setData(r);var s=r[r.length-1].close,o=r.length-1,a=o+105+Math.round(Math.random()+30),l=A(),c=o+1,u={day:29,month:5,year:2019},d=0,h={open:null,high:null,low:null,close:null,time:u};function p(b){h.open===null?(h.open=b,h.high=b,h.low=b,h.close=b):(h.close=b,h.high=Math.max(h.high,b),h.low=Math.min(h.low,b)),i.update(h)}function g(){i.setData(r),s=r[r.length-1].close,o=r.length-1,a=o+5+Math.round(Math.random()+30),l=A(),c=o+1,u={day:29,month:5,year:2019},d=0}function A(){return 10+Math.round(Math.random()*1e4)/100}function y(b){var x=new Date;return x.setUTCFullYear(b.year),x.setUTCMonth(b.month-1),x.setUTCDate(b.day+1),x.setUTCHours(0,0,0,0),{year:x.getUTCFullYear(),month:x.getUTCMonth()+1,day:x.getUTCDate()}}setInterval(function(){var b=l-s,x=a-o,P=b/x,T=s+(c-o)*P,k=.1-Math.random()*.2+1,C=T*k;if(p(C),++d===5){if(c++,u=y(u),h={open:null,high:null,low:null,close:null,time:u},d=0,c===5e3){g();return}c===a&&(s=C,o=c,a=o+5+Math.round(Math.random()+30),l=A())}},200)}processData_simulated(e,i,r,s,o=!1,a=null,l=null,c=!1,u=null){let d=Ue.stockChartData[e+"WK"+i+r];d||(d=Ue.stockChartData[e+i+r]);let h=[],p=-1;for(let k=0;k<d.length;k++){let C=d[k],M=C[0],O=new Date(M);if(a){let R=new Date(s);R.setHours(a,l),o?R&&O.getTime()>=R.getTime()&&(h.push(C),p===-1&&(p=k)):R&&O.getTime()>=R.getTime()&&O.getDate()===s.getDate()&&O.getMonth()===s.getMonth()&&O.getFullYear()===s.getFullYear()&&(h.push(C),p===-1&&(p=k))}else if(c){let R=new Date(s);R&&R.setDate(R.getDate()+1),R&&O<R&&(h.push(C),p===-1&&(p=k))}else s&&O.getDate()===s.getDate()&&O.getMonth()===s.getMonth()&&O.getFullYear()===s.getFullYear()&&(h.push(C),p===-1&&(p=k))}if(console.log("trimmedData:",h),u&&u===1)return h;let g=[],A=null,y=null,b=null,x=null,P=null,T=0;for(let k=0;k<h.length;k++){let C=h[k],M=C[0];new Date(M).getMinutes()%5===0?(A&&g.push([A,y,b,x,P,T]),A=C[0],y=C[1],b=C[2],x=C[3],P=null,T=0):(y===null&&(y=C[1]),(b===null||C[2]>b)&&(b=C[2]),(x===null||C[3]<x)&&(x=C[3]),(new Date(M).getMinutes()+1)%5===0&&(P=C[4]),k===h.length-1&&(P=C[4],g.push([A,y,b,x,P,T])),T+=C[5])}return console.log("processed_data:",g),g}initSpotChart_simulated(e,i,r=!1,s=null,o=null){this.spot_chart_instru=e,this.spot_chart_chart&&this.spot_chart_chart.remove();let a="spot-chart-simulate";this.spot_chart_chart=ht(a,{width:320,height:200,timeScale:{timeVisible:!0}}),this.spot_candlestickSeries=this.spot_chart_chart.addSeries(kt);let l=new Date().getTimezoneOffset()*6e4,c=this.processData_simulated(e,"","",i,r,s,o),u=[];for(let d=0;d<c.length;d++){let h=c[d],p=new Date(h[0]-l).toISOString(),g={time:Date.parse(p)/1e3,open:h[1],high:h[2],low:h[3],close:h[4]};u.push(g)}this.spot_candlestickSeries.setData(u),this.spot_chart_chart.timeScale().fitContent()}init_opt_charts_simulated(e,i,r,s,o,a,l){for(let c in this.charts)Object.prototype.hasOwnProperty.call(this.charts,c)&&this.charts[c].remove();this.charts={},this.charts_instru=e,this.strike_interval=a,this.charts_expiry=l,this.initForCallsPuts_simulated(i,r,a,"CE"),this.initForCallsPuts_simulated(s,o,a,"PE")}initForCallsPuts_simulated(e,i,r,s){let o=new Date().getTimezoneOffset()*6e4,a=0;for(let l=i;l>=e;l-=r){let c="opt_chart_"+a+s;console.log("div_id",c);let u=ht(c,{width:320,height:200,timeScale:{timeVisible:!0}}),d=this.processData_simulated(this.charts_instru,l,s,this.charts_expiry),h=[];for(let g=0;g<d.length;g++){let A=d[g],y=new Date(A[0]-o).toISOString(),b={time:Date.parse(y)/1e3,open:A[1],high:A[2],low:A[3],close:A[4]};h.push(b)}let p=u.addSeries(kt);p.setData(h),u.timeScale().fitContent(),this.candlestickSeries[""+l+s]=p,this.charts[""+l+s]=u,a++}}getStrangleValues(e,i){let r=[];for(let s=0;s<e.length;s++){let o=e[s],a=i[s],l;typeof o[4]<"u"?l=o[4]+a[4]:l=o[1]+a[1],r.push([o[0],l])}return r}createStockChart(){let e="stock-chart";this.stock_chart_chart&&this.stock_chart_chart.remove(),this.stock_chart_chart=ht(e,{width:1200,height:400,timeScale:{timeVisible:!0}});let i={},r=JSON.parse(localStorage.getItem("curr_positions"+f.stocksStrategyNum));r&&r.trades&&r.trades.forEach(l=>{let c=new Date(l.entryDateTime.split(" ")[0]),u=null;l.exitDateTime&&(u=new Date(l.exitDateTime.split(" ")[0]));let d=new Date;for(;c<=d;){let h=0;if(u&&c>=u)h+=l.qty*(l.exit-l.entry);else{let g=ae.candlesData[l.scrip],A=new Date(c);A.setHours(0,0,0,0);let y=null;for(;!y;){let x=this.zerodhaService.getDateInFormat(A);if(y=g[x],y)break;A.setDate(A.getDate()-1)}let b=y[3];h+=l.qty*b}let p=c.toISOString().split("T")[0];p in i||(i[p]=0),i[p]+=h,i[p]=Math.round((i[p]+1e-5)*100)/100,c.setDate(c.getDate()+1)}});let s=Object.entries(i).sort(([a],[l])=>new Date(a).getTime()-new Date(l).getTime()),o=new Date().getTimezoneOffset()*6e4;this.stock_chart_data=[];for(let[a,l]of s){let c=new Date(a),u=new Date(c.getTime()-o).toISOString(),d={time:Date.parse(u)/1e3,value:l};this.stock_chart_data.push(d)}this.stock_lineSeries1=this.stock_chart_chart.addSeries(ft,{color:"#2962FF",lineWidth:2}),this.stock_lineSeries1.setData(this.stock_chart_data),this.stock_chart_chart.timeScale().fitContent(),setInterval(()=>{this.updateStockChart()},1e4)}updateStockChart(){let e=0,i=JSON.parse(localStorage.getItem("curr_positions"+f.stocksStrategyNum));i&&i.trades&&i.trades.forEach(l=>{if(l.exit!==0)e+=l.qty*(l.exit-l.entry);else{let c=this.mapService.getScripLTP(null,null,l.scrip,null);c||(c=0),e+=l.qty*c}});let r=this.stock_chart_data,o={time:r[r.length-1].time,value:e};this.stock_lineSeries1.update(o)}initStrangleChart_simulated(e,i,r,s,o=!1,a=null,l=null){this.initSpotChart_simulated(e,i,o,a,l),this.strangle_chart_chart&&this.strangle_chart_chart.remove();let c="strangle-chart";this.strangle_chart_chart=ht(c,{width:320,height:200,timeScale:{timeVisible:!0}});let u=new Date().getTimezoneOffset()*6e4,d=this.processData_simulated(e,r,"",i,o,a,l),h=this.processData_simulated(e,s,"",i,o,a,l),p=this.getStrangleValues(d,h);console.log("arr1",d),console.log("arr2",h),console.log("arr",p);let g=[];for(let y=0;y<p.length;y++){let b=p[y],x=new Date(b[0]-u).toISOString(),P={time:Date.parse(x)/1e3,value:b[1]};g.push(P)}this.strangle_chart_chart.addSeries(ft,{}).setData(g),this.strangle_chart_chart.timeScale().fitContent()}initForCallsPuts_simulated_0(e,i,r,s){for(let l in this.charts)Object.prototype.hasOwnProperty.call(this.charts,l)&&this.charts[l].remove();this.charts={},f.st_simulate_ce=[],f.st_simulate_pe=[];let o=new Date(i);o.setDate(o.getDate()+1),o.setHours(9),o.setMinutes(30);let a=new Date().getTimezoneOffset()*6e4;for(let l=0;l<=6;l++){let c;for(;;){console.log("ST curr date",o,c),o.setDate(o.getDate()-1),o.setHours(9),o.setMinutes(30);let $=""+("0"+o.getDate()).slice(-2)+"-"+("0"+(o.getMonth()+1)).slice(-2)+"-"+o.getFullYear()+" "+("0"+o.getHours()).slice(-2)+":"+("0"+o.getMinutes()).slice(-2)+":00";if(this.loadSimulatedOCForTime(e,$,i),c=this.mapService.getScripLTP(null,null,e,null),c)break;console.log("ST curr date going back")}let u=50;e==="BANKNIFTY"?u=100:e==="FINNIFTY"?u=50:e==="MIDCPNIFTY"?u=25:e==="SENSEX"||e==="BANKEX"?u=100:e==="USDINR"&&(u=.25);let d=Math.round(c/u)*u;console.log("ST spotstrike",d);let h=d+Number(s),p=d-Number(s),g=this.processData_simulated(e,"","",o),A=[];for(let G=0;G<g.length;G++){let $=g[G],ee=new Date($[0]-a).toISOString(),ye={time:Date.parse(ee)/1e3,open:$[1],high:$[2],low:$[3],close:$[4]};A.push(ye)}let y="opt_chart_"+l+"_spot",b=ht(y,{width:320,height:240,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});b.addSeries(kt).setData(A),b.timeScale().fitContent(),this.charts["opt_chart_"+l+"_spot"]=b;let P=this.processData_simulated(e,h,"CE",o,!1,null,null,!0),T=[];for(let G=0;G<P.length;G++){let $=P[G],ee=new Date($[0]-a).toISOString(),ye={time:Date.parse(ee)/1e3,open:$[1],high:$[2],low:$[3],close:$[4]};T.push(ye)}let k=this.supertrend_calc(T),C="opt_chart_"+l+"_CE";console.log("div_id_ce",C);let M=ht(C,{width:320,height:240,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});M.addSeries(kt).setData(this.getCurrDateData(o,T)),(r==="10_2"||r==="both")&&M.addSeries(ft,{lineWidth:1}).setData(this.getCurrDateData(o,k[0])),(r==="7_3"||r==="both")&&M.addSeries(ft,{lineWidth:1}).setData(this.getCurrDateData(o,k[1])),M.timeScale().fitContent(),this.charts["opt_chart_"+l+"_CE"]=M,f.st_simulate_ce.push(h+"CE");let R=this.processData_simulated(e,p,"PE",o,!1,null,null,!0),q=[];for(let G=0;G<R.length;G++){let $=R[G],ee=new Date($[0]-a).toISOString(),ye={time:Date.parse(ee)/1e3,open:$[1],high:$[2],low:$[3],close:$[4]};q.push(ye)}let H=this.supertrend_calc(q),Z="opt_chart_"+l+"_PE";console.log("div_id",Z);let ne=ht(Z,{width:320,height:240,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});ne.addSeries(kt).setData(this.getCurrDateData(o,q)),(r==="10_2"||r==="both")&&ne.addSeries(ft,{lineWidth:1}).setData(this.getCurrDateData(o,H[0])),(r==="7_3"||r==="both")&&ne.addSeries(ft,{lineWidth:1}).setData(this.getCurrDateData(o,H[1])),ne.timeScale().fitContent(),this.charts["opt_chart_"+l+"_PE"]=ne,f.st_simulate_pe.push(p+"PE")}}getCurrDateData(e,i){let r=[];return i.forEach(s=>{let o=new Date(s.time*1e3);o.getDate()===e.getDate()&&o.getMonth()===e.getMonth()&&o.getFullYear()===e.getFullYear()&&r.push(s)}),r}supertrend_calc(e){let i=new J2.SuperTrend(10,2,"WEMA"),r=new J2.SuperTrend(7,3,"WEMA"),s=[],o=[];return e.forEach(a=>{let l=i.nextValue(a.high,a.low,a.close),c,u="green";l&&(c=l.superTrend,l.direction===1&&(u="red"));let d={time:a.time,value:c,color:u};s.push(d);let h=r.nextValue(a.high,a.low,a.close),p,g="green";h&&(p=h.superTrend,h.direction===1&&(g="red"));let A={time:a.time,value:p,color:g};o.push(A)}),[s,o]}loadSimulatedOCForTime(e,i,r){let s=i;console.log("ST loadSimulatedOCForTime",s);for(let[o,a]of Object.entries(Ue.simulateData))if(o===e||o.startsWith(e)&&(o.endsWith("CE")||o.endsWith("PE")))if(o===e){let l=e;e==="NIFTY"&&(l="NIFTY50"),e==="USDINR"&&(l="USDINR"),this.mapService.setLtp(l,a[s])}else{let l=o;l=l.replace(e,""),l=l.replace("WK","");let c={instru:e,expiry:r,strike:this.mapService.parseScrip(l).scrip,optionType:this.mapService.parseScrip(l).type},u=this.mapService.getMapKey(c),d=a[s];this.mapService.setLtp(u,d)}console.log("ST ltpMap",this.mapService.ltpMap)}initForCallsPuts_simulated_1(e,i,r,s,o){for(let h in this.charts)Object.prototype.hasOwnProperty.call(this.charts,h)&&this.charts[h].remove();this.charts={},f.st_simulate_charts=[],f.st_simulate_charts_values=[],f.st_simulate_charts_print=[],f.st_simulate_charts_print_strangle=[],f.st_simulate_exits=[];let a=5;s==="1min"&&(a=1);let l=new Date(i);l.setDate(l.getDate()+1),l.setHours(9),l.setMinutes(30);let c=new Date().getTimezoneOffset()*6e4;for(let h=0;h<=6;h++){let p=0;for(;;){l.setDate(l.getDate()-1),l.setHours(9),l.setMinutes(30),console.log("ST curr date",l);let b=""+("0"+l.getDate()).slice(-2)+"-"+("0"+(l.getMonth()+1)).slice(-2)+"-"+l.getFullYear()+" "+("0"+l.getHours()).slice(-2)+":"+("0"+l.getMinutes()).slice(-2)+":00";if(this.loadSimulatedOCForTime(e,b,i),this.mapService.getScripLTP(null,null,e,null))break;console.log("ST curr date going back")}if(h===0||h===1)continue;let g=500,A=50;if(e==="BANKNIFTY"?(A=100,g=6e3):e==="FINNIFTY"?A=50:e==="MIDCPNIFTY"?A=25:e==="SENSEX"||e==="BANKEX"?A=100:e==="USDINR"&&(A=.25),r){let y=this.processData_simulated(e,"","",l,!1,null,null,!1,a),b=[];for(let k=0;k<y.length;k++){let C=y[k],M=new Date(C[0]-c).toISOString(),O={time:Date.parse(M)/1e3,open:C[1],high:C[2],low:C[3],close:C[4]};b.push(O)}let x="opt_chart_"+h+"_spot",P=ht(x,{width:320,height:160,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});P.addSeries(kt).setData(b),P.timeScale().fitContent(),this.charts["opt_chart_"+h+"_spot"]=P,f.st_simulate_charts["opt_chart_"+h+"_spot"]=e}for(;;){let b=""+("0"+l.getDate()).slice(-2)+"-"+("0"+(l.getMonth()+1)).slice(-2)+"-"+l.getFullYear()+" "+("0"+l.getHours()).slice(-2)+":"+("0"+l.getMinutes()).slice(-2)+":00";this.loadSimulatedOCForTime(e,b,i);let x=this.mapService.getScripLTP(null,null,e,null);x=Math.round(x/A)*A,console.log("curr time",l);let P=this.findPremiumStrike(e,i,x,"CE",A,40,g),T=this.isSTCondition(e,P,"CE",l,a);if(T[0]===!0){if(r){let M="opt_chart_"+h+"_"+p;console.log("div_id",M);let O=ht(M,{width:320,height:180,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});O.addSeries(kt).setData(this.getCurrDateData(l,T[1])),O.addSeries(ft,{lineWidth:1}).setData(this.getCurrDateData(l,T[2])),O.timeScale().fitContent(),this.charts["opt_chart_"+h+"_"+p]=O}f.st_simulate_charts["opt_chart_"+h+"_"+p]=P+"CE "+l.toLocaleString(),f.st_simulate_charts_values["opt_chart_"+h+"_"+p]=T[3],f.st_simulate_charts_print["opt_chart_"+h+"_"+p]=P+"CE,"+l.toLocaleString()+","+T[3],p++}let k=this.findPremiumStrike(e,i,x,"PE",A,40,g),C=this.isSTCondition(e,k,"PE",l,a);if(C[0]===!0){if(r){let M="opt_chart_"+h+"_"+p;console.log("div_id",M);let O=ht(M,{width:320,height:180,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});O.addSeries(kt).setData(this.getCurrDateData(l,C[1])),O.addSeries(ft,{lineWidth:1}).setData(this.getCurrDateData(l,C[2])),O.timeScale().fitContent(),this.charts["opt_chart_"+h+"_"+p]=O}f.st_simulate_charts["opt_chart_"+h+"_"+p]=k+"PE "+l.toLocaleString(),f.st_simulate_charts_values["opt_chart_"+h+"_"+p]=C[3],f.st_simulate_charts_print["opt_chart_"+h+"_"+p]=k+"PE,"+l.toLocaleString()+","+C[3],p++}if(l.setMinutes(l.getMinutes()+a),l.getHours()>=15&&l.getMinutes()>=5)break}this.processStrangle(e,i,A,g,l,h)}let u="";for(let h in f.st_simulate_charts_print)if(Object.prototype.hasOwnProperty.call(f.st_simulate_charts_print,h)){let p=f.st_simulate_charts_print[h];u+=p+`\r
`}for(let h in f.st_simulate_charts_print_strangle)if(Object.prototype.hasOwnProperty.call(f.st_simulate_charts_print_strangle,h)){let p=f.st_simulate_charts_print_strangle[h];u+=p+`\r
`}let d=0;f.st_simulate_exits.forEach(h=>{d+=h}),console.log(`done loading\r
`,u,d)}isSTCondition(e,i,r,s,o){let a=new Date().getTimezoneOffset()*6e4,l=this.processData_simulated(e,i,r,s,!1,null,null,!0,o),c=[];for(let x=0;x<l.length;x++){let P=l[x],T=new Date(P[0]-a).toISOString(),k={time:Date.parse(T)/1e3,open:P[1],high:P[2],low:P[3],close:P[4]};c.push(k)}let u=this.supertrend_calc(c),d=new Date(s.getTime()-a).toISOString(),h=Date.parse(d)/1e3,p=u[0].find(x=>x.time===h),g=new Date(s);g.setMinutes(g.getMinutes()-o);let A=new Date(g.getTime()-a).toISOString(),y=Date.parse(A)/1e3,b=u[0].find(x=>x.time===y);if(o===5&&s.getHours()===9&&s.getMinutes()===30&&b.color==="green"&&p.color==="green"){console.log("ST found continuation at open",b,p);let x=this.findSTExit(u[0],c,s,o);return[!0,c,u[0],x]}if(b&&p&&b.color==="red"&&p.color==="green"){console.log("ST found",b,p);let x=this.findSTExit(u[0],c,s,o);return[!0,c,u[0],x]}else return[!1]}findSTExit(e,i,r,s){let o=new Date().getTimezoneOffset()*6e4,a=8,l=-8,c=null,u=null,d=null,h=null,p=null,g=null,A=null,y=null,b=new Date(r),x=new Date(b.getTime()-o).toISOString(),P=Date.parse(x)/1e3;u=i.find(R=>R.time===P).close,A=e.find(R=>R.time===P).value;let C=new Date(r),M=!0;for(;;){let R=new Date(C.getTime()-o).toISOString(),q=Date.parse(R)/1e3,H=i.find(ne=>ne.time===q);!M&&c===null&&(H.high-u>=a?c=a:H.low-u<=l&&(c=l)),M===!0?(h=999,p=u):H&&H.low<h&&(h=H.low,p=d),M===!0?d=0:H&&H.high>d&&(d=H.high);let Z=e.find(ne=>ne.time===q);if(Z&&Z.color==="red"){g=H.close;break}if(Z&&(y=Z.value),C.setMinutes(C.getMinutes()+s),C.getHours()>=15&&C.getMinutes()>=20){g=H.close;break}M=!1}c===null&&(c=g-u),f.st_simulate_exits.push(c);let O="No";return d-u>=a&&(O="Yes"),Math.round(u*10)/10+","+Math.round(d*10)/10+","+Math.round(h*10)/10+","+Math.round(g*10)/10+","+Math.round(A*10)/10+","+Math.round(y*10)/10}findPremiumStrike(e,i,r,s,o,a,l){let c,u,d=99999999;if(s==="CE")for(let h=r;h<=r+l;h+=o){let p=this.mapService.getScripLTP(e,new Date(i),h,"CE"),g=Math.abs(p-a);g<d&&(d=g,c=h,u=p)}else if(s==="PE")for(let h=r;h>=r-l;h-=o){let p=this.mapService.getScripLTP(e,new Date(i),h,"PE"),g=Math.abs(p-a);g<d&&(d=g,c=h,u=p)}return console.log("selecting for ST",c,s,u),c}processStrangle(e,i,r,s,o,a){o.setHours(9),o.setMinutes(20),console.log("strangle entry curr date",o);let l=""+("0"+o.getDate()).slice(-2)+"-"+("0"+(o.getMonth()+1)).slice(-2)+"-"+o.getFullYear(),c=l+" "+("0"+o.getHours()).slice(-2)+":"+("0"+o.getMinutes()).slice(-2)+":00";this.loadSimulatedOCForTime(e,c,i);let u=this.mapService.getScripLTP(null,null,e,null);u=Math.round(u/r)*r;let d=this.findPremiumStrike(e,i,u,"CE",r,25,s),h=this.findPremiumStrike(e,i,u,"PE",r,25,s),p=this.mapService.getScripLTP(e,new Date(i),d,"CE"),g=this.mapService.getScripLTP(e,new Date(i),h,"PE"),A=p+g;o.setHours(15),o.setMinutes(20),console.log("strangle exit curr date",o),l=""+("0"+o.getDate()).slice(-2)+"-"+("0"+(o.getMonth()+1)).slice(-2)+"-"+o.getFullYear(),c=l+" "+("0"+o.getHours()).slice(-2)+":"+("0"+o.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(e,c,i);let y=this.mapService.getScripLTP(e,new Date(i),d,"CE"),b=this.mapService.getScripLTP(e,new Date(i),h,"PE"),x=y+b;console.log("strangle",p,g,A,y,b,x),f.st_simulate_charts_print_strangle["opt_chart_"+a+"_strangle"]="strangle,"+o.toLocaleString()+","+Math.round(A*10)/10+","+Math.round(x*10)/10}static \u0275fac=function(i){return new(i||n)(oe(It),oe(Ue),oe(Js),oe(to),oe(Mn),oe(ni))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var eS=ka(Bm());var S5=(()=>{class n{http;mapService;fyersService;aliceblueService;zerodhaService;appService;charts={};candlestickSeries={};backtestResult=[];constructor(e,i,r,s,o,a){this.http=e,this.mapService=i,this.fyersService=r,this.aliceblueService=s,this.zerodhaService=o,this.appService=a}processData_simulated(e,i,r,s,o=!1,a=null,l=null,c=!1,u=null){let d=Ue.stockChartData[e+"WK"+i+r];d||(d=Ue.stockChartData[e+i+r]);let h=[],p=-1;for(let k=0;k<d.length;k++){let C=d[k],M=C[0],O=new Date(M);if(a){let R=new Date(s);R.setHours(a,l),o?R&&O.getTime()>=R.getTime()&&(h.push(C),p===-1&&(p=k)):R&&O.getTime()>=R.getTime()&&O.getDate()===s.getDate()&&O.getMonth()===s.getMonth()&&O.getFullYear()===s.getFullYear()&&(h.push(C),p===-1&&(p=k))}else if(c){let R=new Date(s);R&&R.setDate(R.getDate()+1),R&&O<R&&(h.push(C),p===-1&&(p=k))}else s&&O.getDate()===s.getDate()&&O.getMonth()===s.getMonth()&&O.getFullYear()===s.getFullYear()&&(h.push(C),p===-1&&(p=k))}if(console.log("trimmedData:",h),u&&u===1)return h;let g=[],A=null,y=null,b=null,x=null,P=null,T=0;for(let k=0;k<h.length;k++){let C=h[k],M=C[0];new Date(M).getMinutes()%5===0?(A&&g.push([A,y,b,x,P,T]),A=C[0],y=C[1],b=C[2],x=C[3],P=null,T=0):(y===null&&(y=C[1]),(b===null||C[2]>b)&&(b=C[2]),(x===null||C[3]<x)&&(x=C[3]),(new Date(M).getMinutes()+1)%5===0&&(P=C[4]),k===h.length-1&&(P=C[4],g.push([A,y,b,x,P,T])),T+=C[5])}return console.log("processed_data:",g),g}getCurrDateData(e,i){let r=[];return i.forEach(s=>{let o=new Date(s.time*1e3);o.getDate()===e.getDate()&&o.getMonth()===e.getMonth()&&o.getFullYear()===e.getFullYear()&&r.push(s)}),r}supertrend_calc(e){let i=new eS.SuperTrend(10,2,"WEMA"),r=new eS.SuperTrend(7,3,"WEMA"),s=[],o=[];return e.forEach(a=>{let l=i.nextValue(a.high,a.low,a.close),c,u="green";l&&(c=l.superTrend,l.direction===1&&(u="red"));let d={time:a.time,value:c,color:u};s.push(d);let h=r.nextValue(a.high,a.low,a.close),p,g="green";h&&(p=h.superTrend,h.direction===1&&(g="red"));let A={time:a.time,value:p,color:g};o.push(A)}),[s,o]}loadSimulatedOCForTime(e,i,r){let s=i;for(let[o,a]of Object.entries(Ue.simulateData))if(o===e||o.startsWith(e)&&(o.endsWith("CE")||o.endsWith("PE")))if(o===e){let l=e;e==="NIFTY"&&(l="NIFTY50"),e==="USDINR"&&(l="USDINR"),this.mapService.setLtp(l,a[s])}else{let l=o;l=l.replace(e,""),l=l.replace("WK","");let c={instru:e,expiry:r,strike:this.mapService.parseScrip(l).scrip,optionType:this.mapService.parseScrip(l).type},u=this.mapService.getMapKey(c),d=a[s];this.mapService.setLtp(u,d)}}initForCallsPuts_simulated_1(e,i,r,s,o){for(let h in this.charts)Object.prototype.hasOwnProperty.call(this.charts,h)&&this.charts[h].remove();this.charts={},f.st_simulate_charts=[],f.st_simulate_charts_values=[],f.st_simulate_charts_print=[],f.st_simulate_charts_print_strangle=[],f.st_simulate_exits=[];let a=5;s==="1min"&&(a=1);let l=new Date(i);l.setDate(l.getDate()+1),l.setHours(9),l.setMinutes(30);let c=new Date().getTimezoneOffset()*6e4;for(let h=0;h<=6;h++){let p=0;for(;;){l.setDate(l.getDate()-1),l.setHours(9),l.setMinutes(30),console.log("ST curr date",l);let b=""+("0"+l.getDate()).slice(-2)+"-"+("0"+(l.getMonth()+1)).slice(-2)+"-"+l.getFullYear()+" "+("0"+l.getHours()).slice(-2)+":"+("0"+l.getMinutes()).slice(-2)+":00";if(this.loadSimulatedOCForTime(e,b,i),this.mapService.getScripLTP(null,null,e,null))break;console.log("ST curr date going back")}if(h===0||h===1)continue;let g=1e3,A=50;if(e==="BANKNIFTY"?(A=100,g=6e3):e==="FINNIFTY"?A=50:e==="MIDCPNIFTY"?A=25:e==="SENSEX"||e==="BANKEX"?A=100:e==="USDINR"&&(A=.25),r){let y=this.processData_simulated(e,"","",l,!1,null,null,!1,a),b=[];for(let k=0;k<y.length;k++){let C=y[k],M=new Date(C[0]-c).toISOString(),O={time:Date.parse(M)/1e3,open:C[1],high:C[2],low:C[3],close:C[4]};b.push(O)}let x="opt_chart_"+h+"_spot",P=ht(x,{width:320,height:160,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});P.addSeries(kt).setData(b),P.timeScale().fitContent(),this.charts["opt_chart_"+h+"_spot"]=P,f.st_simulate_charts["opt_chart_"+h+"_spot"]=e}for(;;){let b=""+("0"+l.getDate()).slice(-2)+"-"+("0"+(l.getMonth()+1)).slice(-2)+"-"+l.getFullYear()+" "+("0"+l.getHours()).slice(-2)+":"+("0"+l.getMinutes()).slice(-2)+":00";this.loadSimulatedOCForTime(e,b,i);let x=this.mapService.getScripLTP(null,null,e,null);x=Math.round(x/A)*A,console.log("curr time",l);let P=this.findPremiumStrike(e,i,x,"CE",A,40,g),T=this.isSTCondition(e,P,"CE",l,a);if(T[0]===!0){if(r){let M="opt_chart_"+h+"_"+p;console.log("div_id",M);let O=ht(M,{width:320,height:180,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});O.addSeries(kt).setData(this.getCurrDateData(l,T[1])),O.addSeries(ft,{lineWidth:1}).setData(this.getCurrDateData(l,T[2])),O.timeScale().fitContent(),this.charts["opt_chart_"+h+"_"+p]=O}f.st_simulate_charts["opt_chart_"+h+"_"+p]=P+"CE "+l.toLocaleString(),f.st_simulate_charts_values["opt_chart_"+h+"_"+p]=T[3],f.st_simulate_charts_print["opt_chart_"+h+"_"+p]=P+"CE,"+l.toLocaleString()+","+T[3],p++}let k=this.findPremiumStrike(e,i,x,"PE",A,40,g),C=this.isSTCondition(e,k,"PE",l,a);if(C[0]===!0){if(r){let M="opt_chart_"+h+"_"+p;console.log("div_id",M);let O=ht(M,{width:320,height:180,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});O.addSeries(kt).setData(this.getCurrDateData(l,C[1])),O.addSeries(ft,{lineWidth:1}).setData(this.getCurrDateData(l,C[2])),O.timeScale().fitContent(),this.charts["opt_chart_"+h+"_"+p]=O}f.st_simulate_charts["opt_chart_"+h+"_"+p]=k+"PE "+l.toLocaleString(),f.st_simulate_charts_values["opt_chart_"+h+"_"+p]=C[3],f.st_simulate_charts_print["opt_chart_"+h+"_"+p]=k+"PE,"+l.toLocaleString()+","+C[3],p++}if(l.setMinutes(l.getMinutes()+a),l.getHours()>=15&&l.getMinutes()>=5)break}}let u="";for(let h in f.st_simulate_charts_print)if(Object.prototype.hasOwnProperty.call(f.st_simulate_charts_print,h)){let p=f.st_simulate_charts_print[h];u+=p+`\r
`}for(let h in f.st_simulate_charts_print_strangle)if(Object.prototype.hasOwnProperty.call(f.st_simulate_charts_print_strangle,h)){let p=f.st_simulate_charts_print_strangle[h];u+=p+`\r
`}let d=0;f.st_simulate_exits.forEach(h=>{d+=h}),console.log(`done loading\r
`,u,d)}isSTCondition(e,i,r,s,o){let a=new Date().getTimezoneOffset()*6e4,l=this.processData_simulated(e,i,r,s,!1,null,null,!0,o),c=[];for(let x=0;x<l.length;x++){let P=l[x],T=new Date(P[0]-a).toISOString(),k={time:Date.parse(T)/1e3,open:P[1],high:P[2],low:P[3],close:P[4]};c.push(k)}let u=this.supertrend_calc(c),d=new Date(s.getTime()-a).toISOString(),h=Date.parse(d)/1e3,p=u[0].find(x=>x.time===h),g=new Date(s);g.setMinutes(g.getMinutes()-o);let A=new Date(g.getTime()-a).toISOString(),y=Date.parse(A)/1e3,b=u[0].find(x=>x.time===y);if(o===5&&s.getHours()===9&&s.getMinutes()===30&&b.color==="green"&&p.color==="green"){console.log("ST found continuation at open",b,p);let x=this.findSTExit(u[0],c,s,o);return[!0,c,u[0],x]}if(b&&p&&b.color==="red"&&p.color==="green"){console.log("ST found",b,p);let x=this.findSTExit(u[0],c,s,o);return[!0,c,u[0],x]}else return[!1]}findSTExit(e,i,r,s){let o=new Date().getTimezoneOffset()*6e4,a=8,l=-8,c=null,u=null,d=null,h=null,p=null,g=null,A=null,y=null,b=new Date(r),x=new Date(b.getTime()-o).toISOString(),P=Date.parse(x)/1e3;u=i.find(R=>R.time===P).close,A=e.find(R=>R.time===P).value;let C=new Date(r),M=!0;for(;;){let R=new Date(C.getTime()-o).toISOString(),q=Date.parse(R)/1e3,H=i.find(ne=>ne.time===q);!M&&c===null&&(H.high-u>=a?c=a:H.low-u<=l&&(c=l)),M===!0?(h=999,p=u):H&&H.low<h&&(h=H.low,p=d),M===!0?d=0:H&&H.high>d&&(d=H.high);let Z=e.find(ne=>ne.time===q);if(Z&&Z.color==="red"){g=H.close;break}if(Z&&(y=Z.value),C.setMinutes(C.getMinutes()+s),C.getHours()>=15&&C.getMinutes()>=20){g=H.close;break}M=!1}c===null&&(c=g-u),f.st_simulate_exits.push(c);let O="No";return d-u>=a&&(O="Yes"),Math.round(u*10)/10+","+Math.round(d*10)/10+","+Math.round(h*10)/10+","+Math.round(g*10)/10+","+Math.round(A*10)/10+","+Math.round(y*10)/10}findPremiumStrike(e,i,r,s,o,a,l){let c,u,d=99999999;if(s==="CE")for(let h=r;h<=r+l;h+=o){let p=this.mapService.getScripLTP(e,new Date(i),h,"CE"),g=Math.abs(p-a);g<d&&(d=g,c=h,u=p)}else if(s==="PE")for(let h=r;h>=r-l;h-=o){let p=this.mapService.getScripLTP(e,new Date(i),h,"PE"),g=Math.abs(p-a);g<d&&(d=g,c=h,u=p)}return console.log("selecting strike",c,s,u),c}expiryStrangles(e,i){let r=150,s=100,o=50;e==="BANKNIFTY"?(o=100,r=400,s=300):e==="FINNIFTY"?o=50:e==="MIDCPNIFTY"?o=25:e==="SENSEX"||e==="BANKEX"?o=100:e==="USDINR"&&(o=.25),this.fullDayStrangle(e,i,i,o,r,9,20),this.fullDayStrangle(e,i,i,o,r,11,0),this.fullDayStrangle(e,i,i,o,s,13,30)}fullDayStrangle(e,i,r,s,o,a,l,c=null,u=null){let d=new Date(r);d.setHours(a),d.setMinutes(l);let h=""+("0"+d.getDate()).slice(-2)+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+d.getFullYear(),p=h+" "+("0"+d.getHours()).slice(-2)+":"+("0"+d.getMinutes()).slice(-2)+":00";this.loadSimulatedOCForTime(e,p,i);let g=this.mapService.getScripLTP(null,null,e,null);g=Math.round(g/s)*s;let A=g+o;c&&(A=c);let y=g-o;u&&(y=u);let b=this.mapService.getScripLTP(e,new Date(i),A,"CE"),x=this.mapService.getScripLTP(e,new Date(i),y,"PE"),P=b+x,T=-1,k=999,C=-1,M=999,O=-1;for(;!(d.getHours()>=15&&d.getMinutes()>20);){d.setMinutes(d.getMinutes()+1),h=""+("0"+d.getDate()).slice(-2)+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+d.getFullYear(),p=h+" "+("0"+d.getHours()).slice(-2)+":"+("0"+d.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(e,p,i);let Z=this.mapService.getScripLTP(e,new Date(i),A,"CE"),ne=this.mapService.getScripLTP(e,new Date(i),y,"PE");Z>T&&(T=Z),ne>C&&(C=ne),Z<k&&(k=Z),ne<M&&(M=ne),Z+ne>O&&(O=Z+ne)}d.setHours(15),d.setMinutes(20),h=""+("0"+d.getDate()).slice(-2)+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+d.getFullYear(),p=h+" "+("0"+d.getHours()).slice(-2)+":"+("0"+d.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(e,p,i);let R=this.mapService.getScripLTP(e,new Date(i),A,"CE"),q=this.mapService.getScripLTP(e,new Date(i),y,"PE"),H=R+q;console.log("strangle:",e+","+i+","+a+" "+l+","+b+","+x+","+Math.round(P*10)/10+","+R+","+q+","+Math.round(H*10)/10+","+Math.round(O*10)/10+","+T+","+k+","+C+","+M)}perDayDriver(e,i,r){let s=2e3,o=50;e==="BANKNIFTY"?(o=100,s=6e3):e==="FINNIFTY"?o=50:e==="MIDCPNIFTY"?o=25:e==="SENSEX"||e==="BANKEX"?o=100:e==="USDINR"&&(o=.25);let a=new Date(i);a.setDate(a.getDate()+1);let l=new Date().getTimezoneOffset()*6e4;for(let u=0;u<=6;u++){let d=0;for(;;){a.setDate(a.getDate()-1),a.setHours(9),a.setMinutes(30),console.log("perDayDriver curr date",a);let p=""+("0"+a.getDate()).slice(-2)+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+a.getFullYear()+" "+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)+":00";if(this.loadSimulatedOCForTime(e,p,i),this.mapService.getScripLTP(null,null,e,null))break;if(d=d+1,d==5){console.log("perDayDriver exiting");return}console.log("perDayDriver curr date going back")}if(r==="strangle_SL_reentry"){let h=this.strangle_SL_reentry(e,i,a,25,10,10,u,10,"",10,5,!1,!1),p=this.strangle_SL_reentry(e,i,a,25,10,10,u,10,"",10,5,!1,!0),g=h.ce_strike,A=h.pe_strike,y=h.live_pnl,b=p.live_pnl,x=h.ce_markers.concat(p.ce_markers),P=h.pe_markers.concat(p.pe_markers),T=h.strangle_markers.concat(p.strangle_markers),k=this.strangle_SL_reentry(e,i,a,25,9,45,u,10,"",10,5,!1,!1),C=this.strangle_SL_reentry(e,i,a,25,9,45,u,10,"",10,5,!1,!0),M=k.strangle_markers.concat(C.strangle_markers);u!==5&&u!==6&&(this.strangle_SL_reentry_charts(e,a,1,u,g,A,y,h.ce_markers,h.pe_markers,[],b),this.plotPnlChart(u,k.live_pnl,C.live_pnl,[],"_3"))}if(r==="long_fly"&&u===5){let h=this.long_fly(e,i,a,u,50),p=this.long_fly(e,i,a,u,100)}}let c="";for(let u=0;u<this.backtestResult.length;u++)c+=this.backtestResult[u]+`\r
`;console.log(`done loading strangle_SL_reentry \r
`,c)}strangle_SL_reentry(e,i,r,s,o,a,l,c,u="",d=null,h=null,p=!1,g=!1){let A=[],y=[],b=[],x=[],P,T,k=!1,C,M,O=!1,R=0,q=0,H=!1,Z=!1,ne=8,ce=1e3,G=50;e==="BANKNIFTY"?(G=100,ce=6e3):e==="FINNIFTY"?G=50:e==="MIDCPNIFTY"?G=25:e==="SENSEX"||e==="BANKEX"?G=100:e==="USDINR"&&(G=.25);let $=new Date(r);$.setHours(o),$.setMinutes(a);let ee=""+("0"+$.getDate()).slice(-2)+"-"+("0"+($.getMonth()+1)).slice(-2)+"-"+$.getFullYear(),ye=ee+" "+("0"+$.getHours()).slice(-2)+":"+("0"+$.getMinutes()).slice(-2)+":00";this.loadSimulatedOCForTime(e,ye,i);let de=this.mapService.getScripLTP(null,null,e,null);de=Math.round(de/G)*G;let ge=this.findPremiumStrike(e,i,de,"CE",G,s,ce),ie=this.findPremiumStrike(e,i,de,"PE",G,s,ce),ue=this.mapService.getScripLTP(e,new Date(i),ge,"CE"),me=this.mapService.getScripLTP(e,new Date(i),ie,"PE");f.st_simulate_charts["opt_chart_"+l+"_spot"]=e,f.st_simulate_charts["opt_chart_"+l+"_0"]=ge+"CE ",f.st_simulate_charts["opt_chart_"+l+"_1"]=ie+"PE ",f.st_simulate_charts_values["opt_chart_"+l+"_0"]=ue,f.st_simulate_charts_values["opt_chart_"+l+"_1"]=me;let we=ue+me;o===9?f.st_simulate_charts_values["opt_chart_"+l+"_2"]=Math.round(we*10)/10:f.st_simulate_charts_values["opt_chart_"+l+"_3"]=Math.round(we*10)/10;let Be=null,Ce=null,qe=null,He=null;if(p){let ke=1e3;for(;!Be;){let ze=this.mapService.getScripLTP(e,new Date(i),ge+ke,"CE");if(ze){Be=ge+ke,qe=ze;break}else ke+=G}let xe=1500;for(;!Ce;){let ze=this.mapService.getScripLTP(e,new Date(i),ie-xe,"PE");if(ze){Ce=ie-xe,He=ze;break}else xe-=G}y.push([new Date($),"H"+u+" "+qe]),b.push([new Date($),"H"+u+" "+He]),x.push([new Date($),"H"+u+" "+Math.round((qe+He)*10)/10]),console.log("strangle_SL_reentry hedges entry",Be,qe,Ce,He)}let Ae=0,at=!0,Me=!0;for(;!($.getHours()>=15&&$.getMinutes()>=20);){$.setMinutes($.getMinutes()+1),ee=""+("0"+$.getDate()).slice(-2)+"-"+("0"+($.getMonth()+1)).slice(-2)+"-"+$.getFullYear(),ye=ee+" "+("0"+$.getHours()).slice(-2)+":"+("0"+$.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(e,ye,i);let ke=this.mapService.getScripLTP(e,new Date(i),ge,"CE"),xe=this.mapService.getScripLTP(e,new Date(i),ie,"PE"),ze=Ae;if(at&&(ze+=ue-ke),Me&&(ze+=me-xe),k){let Pe=this.mapService.getScripLTP(e,new Date(i),P,"CE");ze+=T-Pe}if(O){let Pe=this.mapService.getScripLTP(e,new Date(i),C,"PE");ze+=M-Pe}if(p){let Pe=this.mapService.getScripLTP(e,new Date(i),Be,"CE");ze+=Pe-qe;let $t=this.mapService.getScripLTP(e,new Date(i),Ce,"PE");ze+=$t-He}if(A.push([new Date($),ze]),g&&at&&Me&&Z===!1&&ke&&xe&&ke>=ue+ne&&(Z=!0,q+=me-xe,Ae+=me-xe,ie=ie+G,me=this.mapService.getScripLTP(e,new Date(i),ie,"PE"),console.log("Roll In PE",ke,ie,me),x.push([new Date($),"RIP"+u+" "+me])),at&&ke>=ue+c+ +R){if(Ae+=ue-ke,at=!1,console.log("strangle_SL_reentry CE SL hit",ke,Ae),y.push([new Date($),"SL"+u+" "+ke]),x.push([new Date($),"CE SL"+u+" "+ke]),d){let Pe=this.mapService.getScripLTP(null,null,e,null);Pe=Math.round(Pe/G)*G,P=this.findPremiumStrike(e,i,Pe,"CE",G,d,ce),T=this.mapService.getScripLTP(e,new Date(i),P,"CE"),k=!0,console.log("strangle_SL_reentry rollout_ce_strike",P,T),y.push([new Date($),"RO"+u+" "+T]),x.push([new Date($),"RO"+u+" "+T])}}else if(!at&&ke<=ue&&(ue=ke,at=!0,console.log("strangle_SL_reentry CE Reentry",ke),y.push([new Date($),"RE"+u+" "+ke]),x.push([new Date($),"CE RE"+u+" "+ke]),d&&k)){let Pe=this.mapService.getScripLTP(e,new Date(i),P,"CE");Ae+=T-Pe,k=!1,console.log("strangle_SL_reentry rollout_ce_strike orig reentry",P,Pe),y.push([new Date($),"ROE"+u+" "+Pe]),x.push([new Date($),"ROE"+u+" "+Pe])}if(g&&Me&&at&&H===!1&&xe&&ke&&xe>=me+ne&&(H=!0,R+=ue-ke,Ae+=ue-ke,ge=ge-G,ue=this.mapService.getScripLTP(e,new Date(i),ge,"CE"),console.log("Roll In CE",xe,ge,ue),x.push([new Date($),"RIC"+u+" "+ue])),Me&&xe>=me+c+q){if(Ae+=me-xe,Me=!1,console.log("strangle_SL_reentry PE SL hit",xe,Ae),b.push([new Date($),"SL"+u+" "+xe]),x.push([new Date($),"PE SL"+u+" "+xe]),d){let Pe=this.mapService.getScripLTP(null,null,e,null);Pe=Math.round(Pe/G)*G,C=this.findPremiumStrike(e,i,Pe,"PE",G,d,ce),M=this.mapService.getScripLTP(e,new Date(i),C,"PE"),O=!0,console.log("strangle_SL_reentry rollout_pe_strike",C,M),b.push([new Date($),"RO"+u+" "+M]),x.push([new Date($),"RO"+u+" "+M])}}else if(!Me&&xe<=me&&(me=xe,Me=!0,console.log("strangle_SL_reentry PE Reentry",xe),b.push([new Date($),"RE"+u+" "+xe]),x.push([new Date($),"PE RE"+u+" "+xe]),d&&O)){let Pe=this.mapService.getScripLTP(e,new Date(i),C,"PE");Ae+=M-Pe,O=!1,console.log("strangle_SL_reentry rollout_pe_strike orig reentry",C,Pe),b.push([new Date($),"ROE"+u+" "+Pe]),x.push([new Date($),"ROE"+u+" "+Pe])}if(d){let Pe=this.mapService.getScripLTP(e,new Date(i),P,"CE");k&&Pe>=T+h&&(Ae+=T-Pe,k=!1,console.log("strangle_SL_reentry rollout_ce_strike SL hit",Pe,Ae),y.push([new Date($),"ROE"+u+" "+Pe]),x.push([new Date($),"ROE"+u+" "+Pe]));let $t=this.mapService.getScripLTP(e,new Date(i),C,"PE");O&&$t>=M+h&&(Ae+=M-$t,O=!1,console.log("strangle_SL_reentry rollout_pe_strike SL hit",$t,Ae),b.push([new Date($),"ROE"+u+" "+$t]),x.push([new Date($),"ROE"+u+" "+$t]))}}$.setHours(15),$.setMinutes(20),ee=""+("0"+$.getDate()).slice(-2)+"-"+("0"+($.getMonth()+1)).slice(-2)+"-"+$.getFullYear(),ye=ee+" "+("0"+$.getHours()).slice(-2)+":"+("0"+$.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(e,ye,i);let je=this.mapService.getScripLTP(e,new Date(i),ge,"CE"),et=this.mapService.getScripLTP(e,new Date(i),ie,"PE");if(at&&(Ae+=ue-je,console.log("strangle_SL_reentry CE Exit",je,Ae)),Me&&(Ae+=me-et,console.log("strangle_SL_reentry PE Exit",et,Ae)),k){let ke=this.mapService.getScripLTP(e,new Date(i),P,"CE");Ae+=T-ke,console.log("strangle_SL_reentry rollout_ce_strike Exit",ke,Ae)}if(O){let ke=this.mapService.getScripLTP(e,new Date(i),C,"PE");Ae+=M-ke,console.log("strangle_SL_reentry rollout_pe_strike Exit",ke,Ae)}if(p){let ke=this.mapService.getScripLTP(e,new Date(i),Be,"CE");Ae+=ke-qe;let xe=this.mapService.getScripLTP(e,new Date(i),Ce,"PE");Ae+=xe-He,console.log("strangle_SL_reentry hedges exit",Be,ke,Ce,xe)}Ae+=R+q;let De=e+","+i+","+$+","+l+","+o+" "+a+","+c+","+ue+","+me+","+Math.round(we*10)/10+","+Math.round(Ae*10)/10+","+d;return this.backtestResult.push(De),console.log("strangle_SL_reentry:",e+","+i+","+$+","+l+","+o+" "+a+","+c+","+ue+","+me+","+Math.round(we*10)/10+","+Ae),l!==5&&l!==6&&console.log("live pnl compare",A[A.length-1][1],Ae),{ce_strike:ge,pe_strike:ie,live_pnl:A,ce_markers:y,pe_markers:b,strangle_markers:x}}strangle_SL_reentry_charts(e,i,r,s,o,a,l,c,u,d,h,p=null){let g=new Date().getTimezoneOffset()*6e4,A=this.processData_simulated(e,"","",i,!1,null,null,!1,r),y=[];for(let ie=0;ie<A.length;ie++){let ue=A[ie],me=new Date(ue[0]-g).toISOString(),we={time:Date.parse(me)/1e3,open:ue[1],high:ue[2],low:ue[3],close:ue[4]};y.push(we)}let b="opt_chart_"+s+"_spot",x=ht(b,{width:320,height:200,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});x.addSeries(kt).setData(y),x.timeScale().fitContent(),this.charts["opt_chart_"+s+"_spot"]=x;let T=this.processData_simulated(e,o,"CE",i,!1,null,null,!0,r),k=[];for(let ie=0;ie<T.length;ie++){let ue=T[ie],me=new Date(ue[0]-g).toISOString(),we={time:Date.parse(me)/1e3,open:ue[1],high:ue[2],low:ue[3],close:ue[4]};k.push(we)}let C="opt_chart_"+s+"_0",M=ht(C,{width:320,height:200,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}}),O=M.addSeries(kt);O.setData(this.getCurrDateData(i,k));let R=[];for(let ie=0;ie<c.length;ie++){let ue=c[ie],me=new Date(ue[0]-g).toISOString(),we={time:Date.parse(me)/1e3,position:"belowBar",color:"#000000",shape:"arrowUp",text:ue[1]};R.push(we)}Ta(O,R),M.timeScale().fitContent(),this.charts["opt_chart_"+s+"_0"]=M;let q=this.processData_simulated(e,a,"PE",i,!1,null,null,!0,r),H=[];for(let ie=0;ie<q.length;ie++){let ue=q[ie],me=new Date(ue[0]-g).toISOString(),we={time:Date.parse(me)/1e3,open:ue[1],high:ue[2],low:ue[3],close:ue[4]};H.push(we)}let Z="opt_chart_"+s+"_1",ne=ht(Z,{width:320,height:200,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}}),ce=ne.addSeries(kt);ce.setData(this.getCurrDateData(i,H));let G=[];for(let ie=0;ie<u.length;ie++){let ue=u[ie],me=new Date(ue[0]-g).toISOString(),we={time:Date.parse(me)/1e3,position:"belowBar",color:"#000000",shape:"arrowUp",text:ue[1]};G.push(we)}Ta(ce,G),ne.timeScale().fitContent(),this.charts["opt_chart_"+s+"_1"]=ne,p||(p="_2");let $="opt_chart_"+s+p,ee=ht($,{width:320,height:200,timeScale:{timeVisible:!0}}),ye=[];for(let ie=0;ie<l.length;ie++){let ue=l[ie],me=new Date(ue[0]-g).toISOString(),we={time:Date.parse(me)/1e3,value:ue[1]};ye.push(we)}let de=ee.addSeries(ft,{lineWidth:1});if(de.setData(ye),h){let ie=[];for(let me=0;me<h.length;me++){let we=h[me],Be=new Date(we[0]-g).toISOString(),Ce={time:Date.parse(Be)/1e3,value:we[1]};ie.push(Ce)}ee.addSeries(ft,{lineWidth:1,color:"#FF0000",lineStyle:bh.Dashed}).setData(ie)}let ge=[];for(let ie=0;ie<d.length;ie++){let ue=d[ie],me=new Date(ue[0]-g).toISOString(),we={time:Date.parse(me)/1e3,position:"belowBar",color:"#000000",shape:"arrowUp",text:ue[1]};ge.push(we)}Ta(de,ge),ee.timeScale().fitContent()}plotPnlChart(e,i,r,s,o){let a=new Date().getTimezoneOffset()*6e4;o||(o="_3");let l="opt_chart_"+e+o,c=ht(l,{width:320,height:200,timeScale:{timeVisible:!0}}),u=[];for(let p=0;p<i.length;p++){let g=i[p],A=new Date(g[0]-a).toISOString(),y={time:Date.parse(A)/1e3,value:g[1]};u.push(y)}let d=c.addSeries(ft,{lineWidth:1});if(d.setData(u),r){let p=[];for(let A=0;A<r.length;A++){let y=r[A],b=new Date(y[0]-a).toISOString(),x={time:Date.parse(b)/1e3,value:y[1]};p.push(x)}c.addSeries(ft,{lineWidth:1,color:"#FF0000",lineStyle:bh.Dashed}).setData(p)}let h=[];for(let p=0;p<s.length;p++){let g=s[p],A=new Date(g[0]-a).toISOString(),y={time:Date.parse(A)/1e3,position:"belowBar",color:"#000000",shape:"arrowUp",text:g[1]};h.push(y)}Ta(d,h),c.timeScale().fitContent()}long_fly(e,i,r,s,o){let a=[],l=50;e==="BANKNIFTY"?l=100:e==="FINNIFTY"?l=50:e==="MIDCPNIFTY"?l=25:e==="SENSEX"||e==="BANKEX"?l=100:e==="USDINR"&&(l=.25);let c=new Date(r);c.setHours(15),c.setMinutes(20);let u=""+("0"+c.getDate()).slice(-2)+"-"+("0"+(c.getMonth()+1)).slice(-2)+"-"+c.getFullYear(),d=u+" "+("0"+c.getHours()).slice(-2)+":"+("0"+c.getMinutes()).slice(-2)+":00";this.loadSimulatedOCForTime(e,d,i);let h=this.mapService.getScripLTP(null,null,e,null);h=Math.round(h/l)*l;let p=h,g=h,A=this.mapService.getScripLTP(e,new Date(i),p,"CE"),y=this.mapService.getScripLTP(e,new Date(i),g,"PE");if(f.st_simulate_charts["opt_chart_"+s+"_spot"]=e,f.st_simulate_charts["opt_chart_"+s+"_0"]="50",f.st_simulate_charts["opt_chart_"+s+"_0"]="100",!A||!y)return console.log("CE or PE premium is None"),null;let b=p+o,x=g-o,P=this.mapService.getScripLTP(e,new Date(i),b,"CE"),T=this.mapService.getScripLTP(e,new Date(i),x,"PE");if(!P||!T)return console.log("Hedge CE or PE premium is None"),null;let k=A+y;c=new Date(i),c.setHours(15),c.setMinutes(20),u=""+("0"+c.getDate()).slice(-2)+"-"+("0"+(c.getMonth()+1)).slice(-2)+"-"+c.getFullYear(),d=u+" "+("0"+c.getHours()).slice(-2)+":"+("0"+c.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(e,d,i);let C=this.mapService.getScripLTP(e,new Date(i),p,"CE"),M=this.mapService.getScripLTP(e,new Date(i),g,"PE"),O=C+M,R=0;R+=C-A,R+=M-y;let q=this.mapService.getScripLTP(e,new Date(i),b,"CE"),H=this.mapService.getScripLTP(e,new Date(i),x,"PE");return R+=P-q,R+=T-H,R=Math.round(R*10)/10,console.log("Long fly",i,R),a}static \u0275fac=function(i){return new(i||n)(oe(It),oe(Ue),oe(Js),oe(to),oe(Mn),oe(ni))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Cn=(n,t)=>({"text-danger":n,"text-success":t}),tS=()=>[],qm=(n,t)=>({red:n,blue:t}),jJ=(n,t,e)=>({positionExited:n,positionSL:t,positionReentry:e}),WJ=(n,t)=>({positionExited:n,hidePositionRow:t}),UJ=n=>({red:n}),zJ=n=>({"sl-order-placed":n}),HJ=(n,t)=>({ocStrikeStrategyCE:n,ocStrikeSLL:t}),nS=(n,t)=>({"table-warning":n,"oc-strike":t}),YJ=(n,t)=>({ocStrikeStrategyPE:n,ocStrikeSLL:t}),GJ=()=>[0,1,2,3,4],KJ=()=>[5,6],C5=(n,t)=>({"chart-border-green":n,"chart-border-red":t});function $J(n,t){if(n&1){let e=fe();m(0,"button",188),j("click",function(){E(e);let r=F(3);return D(r.findInstruToTrade())}),w(1,"Find Instru"),_()}}function XJ(n,t){if(n&1){let e=fe();m(0,"button",188),j("click",function(){E(e);let r=F(3);return D(r.startAlgo())}),w(1,"Start"),_()}}function ZJ(n,t){if(n&1){let e=fe();m(0,"button",188),j("click",function(){E(e);let r=F(3);return D(r.stopAlgo())}),w(1,"Stop"),_()}}function QJ(n,t){if(n&1&&(m(0,"option",189),w(1),_()),n&2){let e=t.$implicit;V("value",e),v(),J(" ",e," ")}}function JJ(n,t){if(n&1){let e=fe();m(0,"div",21)(1,"div",22)(2,"div",75)(3,"input",184),U("ngModelChange",function(r){E(e);let s=F(2);return z(s.algoSimulated,r)||(s.algoSimulated=r),D(r)}),_(),m(4,"label",185),w(5,"Simulated"),_()(),te(6,$J,2,0,"button",23)(7,XJ,2,0,"button",23)(8,ZJ,2,0,"button",23),m(9,"select",72),U("ngModelChange",function(r){E(e);let s=F(2);return z(s.instruToTrade,r)||(s.instruToTrade=r),D(r)}),te(10,QJ,2,2,"option",25),_(),m(11,"input",186),U("ngModelChange",function(r){E(e);let s=F(2);return z(s.expiryDateToTrade,r)||(s.expiryDateToTrade=r),D(r)}),_(),m(12,"button",187),j("click",function(){E(e);let r=F(2);return D(r.recreateAlgoPos())}),w(13,"Refresh"),_()()()}if(n&2){let e=F(2);v(3),W("ngModel",e.algoSimulated),v(3),V("ngIf",!e.instruToTrade),v(),V("ngIf",!e.enableAlgo&&e.instruToTrade),v(),V("ngIf",e.enableAlgo&&e.instruToTrade),v(),W("ngModel",e.instruToTrade),v(),V("ngForOf",e.supportedInstru),v(),W("ngModel",e.expiryDateToTrade)}}function eee(n,t){if(n&1){let e=fe();m(0,"tr")(1,"td",190)(2,"input",191),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.qty,r)||(s.qty=r),D(r)}),j("ngModelChange",function(r){let s=E(e).$implicit,o=F(3);return D(o.posQtyUpdated(r,s))}),_()(),m(3,"td",190),w(4),_(),m(5,"td",190),w(6),_(),m(7,"td",190),w(8),_(),m(9,"td",190)(10,"div",192)(11,"div",193)(12,"input",194),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.sl,r)||(s.sl=r),D(r)}),_(),m(13,"span",195),w(14),_()(),m(15,"input",196),j("keyup",function(r){let s=E(e).$implicit,o=F(3);return D(o.rollAlgoStrikeKeyUp(r,s,"sl"))}),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.sl_strike,r)||(s.sl_strike=r),D(r)}),_(),m(16,"button",144),j("click",function(){let r=E(e).$implicit,s=F(3);return D(s.executeOrder(r,"currentstrike"))}),w(17,"Roll"),_()()(),m(18,"td",190)(19,"div",192)(20,"div",193)(21,"input",194),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.rollin,r)||(s.rollin=r),D(r)}),_(),m(22,"span",195),w(23),_()(),m(24,"input",196),j("keyup",function(r){let s=E(e).$implicit,o=F(3);return D(o.rollAlgoStrikeKeyUp(r,s,"rollin"))}),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.rollin_strike,r)||(s.rollin_strike=r),D(r)}),_(),m(25,"button",144),j("click",function(){let r=E(e).$implicit,s=F(3);return D(s.executeOrder(r,"currentstrike"))}),w(26,"Roll"),_()()(),m(27,"td",190)(28,"input",197),j("ngModelChange",function(r){let s=E(e).$implicit,o=F(3);return D(o.posQtyUpdated(r,s))}),_()(),m(29,"td",190),w(30),_()()}if(n&2){let e=t.$implicit,i=F(3);v(2),V("step",i.stepValue),W("ngModel",e.qty),V("ngClass",Re(13,qm,e.qty<0,e.qty>0)),v(2),J(" ",e.entry," "),v(2),J(" ",e.scrip," "),v(2),J(" ",i.getAlgoPosLTP(e.scrip)," "),v(4),W("ngModel",e.sl),v(2),Q(i.getSLCount(e)),v(),W("ngModel",e.sl_strike),v(6),W("ngModel",e.rollin),v(2),Q(i.getRollInCount(e)),v(),W("ngModel",e.rollin_strike),v(6),J(" ",i.getAlgoOrderStatus(e)," ")}}function tee(n,t){if(n&1){let e=fe();m(0,"div")(1,"div",34)(2,"textarea",35),U("ngModelChange",function(r){E(e);let s=F(2);return z(s.algoLog,r)||(s.algoLog=r),D(r)}),_()(),m(3,"table",36)(4,"thead",37)(5,"tr")(6,"th",38),w(7,"Qty"),_(),m(8,"th",38),w(9,"Entry"),_(),m(10,"th",38),w(11,"Strike"),_(),m(12,"th",38),w(13,"LTP"),_(),m(14,"th",38),w(15,"SL"),_(),m(16,"th",38),w(17,"RollIn"),_(),m(18,"th",38),w(19,"Order Id"),_(),m(20,"th",38),w(21,"Order Status"),_()()(),m(22,"tbody"),te(23,eee,31,16,"tr",165),_()(),Ze(24,"hr"),_()}if(n&2){let e=F(2);v(2),W("ngModel",e.algoLog),v(21),V("ngForOf",e.algo_pos)}}function nee(n,t){if(n&1){let e=fe();m(0,"div",181)(1,"div",75)(2,"input",182),U("ngModelChange",function(r){E(e);let s=F();return z(s.show_algo,r)||(s.show_algo=r),D(r)}),_(),m(3,"label",183),w(4,"Algo"),_()(),te(5,JJ,14,7,"div",92)(6,tee,25,2,"div",68),_()}if(n&2){let e=F();v(2),W("ngModel",e.show_algo),v(3),V("ngIf",e.show_algo),v(),V("ngIf",e.show_algo)}}function iee(n,t){if(n&1){let e=fe();m(0,"button",188),j("click",function(){E(e);let r=F();return D(r.findInstruToTradeSS())}),w(1,"Find Instru"),_()}}function ree(n,t){if(n&1){let e=fe();m(0,"button",188),j("click",function(){E(e);let r=F();return D(r.startAlgoSS())}),w(1,"Start"),_()}}function see(n,t){if(n&1){let e=fe();m(0,"button",188),j("click",function(){E(e);let r=F();return D(r.stopAlgoSS())}),w(1,"Stop"),_()}}function oee(n,t){if(n&1&&(m(0,"option",189),w(1),_()),n&2){let e=t.$implicit;V("value",e),v(),J(" ",e," ")}}function aee(n,t){if(n&1&&(m(0,"span",42),w(1),_()),n&2){let e=F().$implicit,i=F();V("ngClass",Re(2,Cn,e.pnl<0,e.pnl>0)),v(),J(" ",i.getPnL(e)," ")}}function lee(n,t){if(n&1&&(m(0,"tr",42)(1,"td",190),w(2),_(),m(3,"td",190),w(4),_(),m(5,"td",190),w(6),_(),m(7,"td",190),w(8),_(),m(9,"td",190),w(10),_(),m(11,"td",190),w(12),_(),m(13,"td",190),te(14,aee,2,5,"span",198),_()()),n&2){let e=t.$implicit,i=F();V("ngClass",sn(8,jJ,e.exit!==0,e.exit===0&&e.triggerPrice!==0&&e.qty>0,e.exit===0&&e.triggerPrice!==0&&e.qty<0)),v(2),J(" ",e.scrip," "),v(2),J(" ",e.qty," "),v(2),J(" ",e.entry," "),v(2),J(" ",i.getAlgoSSPosLTP(e.scrip)," "),v(2),J(" ",e.triggerPrice," "),v(2),J(" ",e.exit," "),v(2),V("ngIf",!(e.exit===0&&e.triggerPrice!==0))}}function cee(n,t){if(n&1){let e=fe();m(0,"div")(1,"div",46)(2,"input",199),U("ngModelChange",function(r){E(e);let s=F();return z(s.use_filter_expiry,r)||(s.use_filter_expiry=r),D(r)}),_(),m(3,"label",200),w(4,"Filter Expiry"),_(),m(5,"input",201),U("ngModelChange",function(r){E(e);let s=F();return z(s.filter_expiry,r)||(s.filter_expiry=r),D(r)}),_()(),m(6,"div",46)(7,"input",202),U("ngModelChange",function(r){E(e);let s=F();return z(s.hide_payoff,r)||(s.hide_payoff=r),D(r)}),_(),m(8,"label",203),w(9,"Hide Payoff"),_()(),m(10,"div",46)(11,"input",204),U("ngModelChange",function(r){E(e);let s=F();return z(s.use_hypo_future,r)||(s.use_hypo_future=r),D(r)}),_(),m(12,"label",205),w(13,"Use Hypothetical Future"),_(),m(14,"input",206),U("ngModelChange",function(r){E(e);let s=F();return z(s.hypo_future_strike,r)||(s.hypo_future_strike=r),D(r)}),_()(),m(15,"div",46)(16,"input",207),U("ngModelChange",function(r){E(e);let s=F();return z(s.hide_roll3,r)||(s.hide_roll3=r),D(r)}),_(),m(17,"label",208),w(18,"Hide Roll 3"),_()(),m(19,"div",46)(20,"input",209),U("ngModelChange",function(r){E(e);let s=F();return z(s.ce_side_overlay,r)||(s.ce_side_overlay=r),D(r)}),_(),m(21,"label",210),w(22,"CE side"),_()(),m(23,"div",46)(24,"input",211),U("ngModelChange",function(r){E(e);let s=F();return z(s.pe_side_overlay,r)||(s.pe_side_overlay=r),D(r)}),_(),m(25,"label",212),w(26,"PE side"),_()(),m(27,"div",46)(28,"input",213),U("ngModelChange",function(r){E(e);let s=F();return z(s.straddle_shiftCE_overlay,r)||(s.straddle_shiftCE_overlay=r),D(r)}),_(),m(29,"label",214),w(30,"Straddle CE shift"),_()(),m(31,"div",46)(32,"input",215),U("ngModelChange",function(r){E(e);let s=F();return z(s.straddle_shiftPE_overlay,r)||(s.straddle_shiftPE_overlay=r),D(r)}),_(),m(33,"label",216),w(34,"Straddle PE shift"),_()(),m(35,"input",217),U("ngModelChange",function(r){E(e);let s=F();return z(s.straddle_shiftQty_overlay,r)||(s.straddle_shiftQty_overlay=r),D(r)}),_(),m(36,"div",46)(37,"input",218),U("ngModelChange",function(r){E(e);let s=F();return z(s.payoff_overlay,r)||(s.payoff_overlay=r),D(r)}),j("change",function(r){E(e);let s=F();return D(s.payoffCheckboxChange(r))}),_(),m(38,"label",219),w(39,"Payoff Overlay"),_(),m(40,"input",220),U("ngModelChange",function(r){E(e);let s=F();return z(s.overlay_strike,r)||(s.overlay_strike=r),D(r)}),_()()()}if(n&2){let e=F();v(2),W("ngModel",e.use_filter_expiry),v(3),W("ngModel",e.filter_expiry),v(2),W("ngModel",e.hide_payoff),v(4),W("ngModel",e.use_hypo_future),v(3),W("ngModel",e.hypo_future_strike),v(2),W("ngModel",e.hide_roll3),v(4),W("ngModel",e.ce_side_overlay),v(4),W("ngModel",e.pe_side_overlay),v(4),W("ngModel",e.straddle_shiftCE_overlay),v(4),W("ngModel",e.straddle_shiftPE_overlay),v(3),W("ngModel",e.straddle_shiftQty_overlay),v(2),W("ngModel",e.payoff_overlay),v(3),W("ngModel",e.overlay_strike)}}function uee(n,t){if(n&1&&(m(0,"option",189),w(1),_()),n&2){let e=t.$implicit;V("value",e),v(),J(" ",e," ")}}function dee(n,t){if(n&1&&(m(0,"option"),w(1),_()),n&2){let e=t.$implicit;v(),J(" ",e," ")}}function hee(n,t){if(n&1&&(m(0,"option"),w(1),_()),n&2){let e=t.$implicit;v(),J(" ",e," ")}}function pee(n,t){if(n&1){let e=fe();m(0,"div",11)(1,"select",221),U("ngModelChange",function(r){E(e);let s=F();return z(s.simulate_instru,r)||(s.simulate_instru=r),D(r)}),j("change",function(r){E(e);let s=F();return D(s.onSimulateInstruChange(r))}),te(2,uee,2,2,"option",25),_(),m(3,"input",222),U("ngModelChange",function(r){E(e);let s=F();return z(s.simulateStartDate,r)||(s.simulateStartDate=r),D(r)}),_(),m(4,"select",223),U("ngModelChange",function(r){E(e);let s=F();return z(s.simulate_expiries_arr_value,r)||(s.simulate_expiries_arr_value=r),D(r)}),j("change",function(r){E(e);let s=F();return D(s.onSimulateExpiryChange(r))}),te(5,dee,2,1,"option",165),_(),m(6,"input",224),U("ngModelChange",function(r){E(e);let s=F();return z(s.simulateExpiryDate,r)||(s.simulateExpiryDate=r),D(r)}),_(),m(7,"select",223),U("ngModelChange",function(r){E(e);let s=F();return z(s.simulate_expiries_arr_value2,r)||(s.simulate_expiries_arr_value2=r),D(r)}),j("change",function(r){E(e);let s=F();return D(s.onSimulateExpiryChange2(r))}),te(8,hee,2,1,"option",165),_(),m(9,"input",224),U("ngModelChange",function(r){E(e);let s=F();return z(s.simulateExpiryDate2,r)||(s.simulateExpiryDate2=r),D(r)}),_(),m(10,"div")(11,"button",178),j("click",function(){E(e);let r=$n(40);return D(r.click())}),w(12,"Import"),_(),m(13,"button",178),j("click",function(){E(e);let r=$n(42);return D(r.click())}),w(14,"Import2"),_(),m(15,"button",225),j("click",function(){E(e);let r=F();return D(r.loadSimulatedNextMins(-1440))}),w(16,"-1440"),_(),m(17,"button",225),j("click",function(){E(e);let r=F();return D(r.loadSimulatedNextMins(1440))}),w(18,"+1440"),_(),m(19,"button",225),j("click",function(){E(e);let r=F();return D(r.loadSimulatedNextMins(-120))}),w(20,"-120"),_(),m(21,"button",225),j("click",function(){E(e);let r=F();return D(r.loadSimulatedNextMins(120))}),w(22,"+120"),_(),m(23,"button",225),j("click",function(){E(e);let r=F();return D(r.loadSimulatedNextMins(-15))}),w(24,"-15"),_(),m(25,"button",225),j("click",function(){E(e);let r=F();return D(r.loadSimulatedNextMins(15))}),w(26,"+15"),_(),m(27,"button",225),j("click",function(){E(e);let r=F();return D(r.loadSimulatedNextMins(-5))}),w(28,"-5"),_(),m(29,"button",225),j("click",function(){E(e);let r=F();return D(r.loadSimulatedNextMins(5))}),w(30,"+5"),_(),m(31,"button",225),j("click",function(){E(e);let r=F();return D(r.loadSimulatedNextMins(-1))}),w(32,"-1"),_(),m(33,"button",225),j("click",function(){E(e);let r=F();return D(r.loadSimulatedNextMins(1))}),w(34,"+1"),_(),m(35,"div",226)(36,"input",227),U("ngModelChange",function(r){E(e);let s=F();return z(s.show_simulate_charts,r)||(s.show_simulate_charts=r),D(r)}),_(),m(37,"label",228),w(38,"Show simulate charts"),_()(),m(39,"input",229,1),j("change",function(r){E(e);let s=F();return D(s.uploadExpiryFile(r))}),_(),m(41,"input",229,2),j("change",function(r){E(e);let s=F();return D(s.uploadExpiryFile2(r))}),_(),m(43,"div"),w(44),_()()()}if(n&2){let e=F();v(),W("ngModel",e.simulate_instru),v(),V("ngForOf",e.supportedInstru),v(),W("ngModel",e.simulateStartDate),v(),W("ngModel",e.simulate_expiries_arr_value),v(),V("ngForOf",e.simulate_expiries_arr),v(),W("ngModel",e.simulateExpiryDate),v(),W("ngModel",e.simulate_expiries_arr_value2),v(),V("ngForOf",e.simulate_expiries_arr2),v(),W("ngModel",e.simulateExpiryDate2),v(27),W("ngModel",e.show_simulate_charts),v(8),J("Date Time: ",e.simulateCurrDateTimeString,"")}}function fee(n,t){n&1&&(m(0,"span",230),w(1," Positions/Quantities match with actual positions "),_())}function gee(n,t){n&1&&(m(0,"span",14),w(1," Positions/Quantities do NOT match with actual positions "),_())}function mee(n,t){if(n&1&&(m(0,"option",189),w(1),_()),n&2){let e=t.$implicit;V("value",e),v(),J(" ",e," ")}}function _ee(n,t){if(n&1){let e=fe();m(0,"div",75)(1,"input",231),U("ngModelChange",function(r){E(e);let s=F();return z(s.auto_execute_rollin,r)||(s.auto_execute_rollin=r),D(r)}),_(),m(2,"label",232),w(3,"Auto rollin"),_()()}if(n&2){let e=F();v(),W("ngModel",e.auto_execute_rollin)}}function Aee(n,t){if(n&1){let e=fe();m(0,"div",75)(1,"input",233),U("ngModelChange",function(r){E(e);let s=F();return z(s.auto_execute_rollout,r)||(s.auto_execute_rollout=r),D(r)}),_(),m(2,"label",234),w(3,"Auto rollout"),_()()}if(n&2){let e=F();v(),W("ngModel",e.auto_execute_rollout)}}function yee(n,t){if(n&1){let e=fe();m(0,"div",21),w(1," Secs: "),m(2,"input",235),U("ngModelChange",function(r){E(e);let s=F();return z(s.automate_roll_secs,r)||(s.automate_roll_secs=r),D(r)}),_()()}if(n&2){let e=F();v(2),W("ngModel",e.automate_roll_secs)}}function vee(n,t){if(n&1){let e=fe();m(0,"div",21),w(1," Slabs: "),m(2,"input",236),U("ngModelChange",function(r){E(e);let s=F();return z(s.automate_slabs,r)||(s.automate_slabs=r),D(r)}),_()()}if(n&2){let e=F();v(2),W("ngModel",e.automate_slabs)}}function wee(n,t){if(n&1){let e=fe();m(0,"div",21),w(1," Slab Qty: "),m(2,"input",237),U("ngModelChange",function(r){E(e);let s=F();return z(s.automate_slab_qty,r)||(s.automate_slab_qty=r),D(r)}),_()()}if(n&2){let e=F();v(2),W("ngModel",e.automate_slab_qty)}}function bee(n,t){if(n&1){let e=fe();m(0,"div",21),w(1," First SL%: "),m(2,"input",238),U("ngModelChange",function(r){E(e);let s=F();return z(s.automate_sl1,r)||(s.automate_sl1=r),D(r)}),_()()}if(n&2){let e=F();v(2),W("ngModel",e.automate_sl1)}}function See(n,t){if(n&1){let e=fe();m(0,"div",21),w(1," SL% increase: "),m(2,"input",239),U("ngModelChange",function(r){E(e);let s=F();return z(s.automate_sl_increase,r)||(s.automate_sl_increase=r),D(r)}),_()()}if(n&2){let e=F();v(2),W("ngModel",e.automate_sl_increase)}}function Cee(n,t){if(n&1){let e=fe();m(0,"div",240),w(1," Min. distance till: "),m(2,"div",241)(3,"input",242),U("ngModelChange",function(r){E(e);let s=F();return z(s.automate_time_1,r)||(s.automate_time_1=r),D(r)}),_(),m(4,"input",243),U("ngModelChange",function(r){E(e);let s=F();return z(s.automate_dist_1,r)||(s.automate_dist_1=r),D(r)}),_()(),m(5,"div",241)(6,"input",244),U("ngModelChange",function(r){E(e);let s=F();return z(s.automate_time_1,r)||(s.automate_time_1=r),D(r)}),_(),m(7,"input",245),U("ngModelChange",function(r){E(e);let s=F();return z(s.automate_dist_1,r)||(s.automate_dist_1=r),D(r)}),_()(),m(8,"div",241)(9,"input",246),U("ngModelChange",function(r){E(e);let s=F();return z(s.automate_time_1,r)||(s.automate_time_1=r),D(r)}),_(),m(10,"input",247),U("ngModelChange",function(r){E(e);let s=F();return z(s.automate_dist_1,r)||(s.automate_dist_1=r),D(r)}),_()(),m(11,"div",241)(12,"input",248),U("ngModelChange",function(r){E(e);let s=F();return z(s.automate_time_1,r)||(s.automate_time_1=r),D(r)}),_(),m(13,"input",249),U("ngModelChange",function(r){E(e);let s=F();return z(s.automate_dist_1,r)||(s.automate_dist_1=r),D(r)}),_()()()}if(n&2){let e=F();v(3),W("ngModel",e.automate_time_1),v(),W("ngModel",e.automate_dist_1),v(2),W("ngModel",e.automate_time_1),v(),W("ngModel",e.automate_dist_1),v(2),W("ngModel",e.automate_time_1),v(),W("ngModel",e.automate_dist_1),v(2),W("ngModel",e.automate_time_1),v(),W("ngModel",e.automate_dist_1)}}function xee(n,t){if(n&1&&(m(0,"div"),w(1),Ze(2,"br"),_()),n&2){let e=t.$implicit;v(),J(" ",e,"")}}function Eee(n,t){if(n&1&&te(0,xee,3,1,"div",165),n&2){let e=F();V("ngForOf",e.positionPopContent)}}function Dee(n,t){if(n&1){let e=fe();m(0,"td")(1,"div",251)(2,"input",269),U("ngModelChange",function(r){E(e);let s=F().$implicit;return z(s.selected,r)||(s.selected=r),D(r)}),_(),m(3,"input",270),U("ngModelChange",function(r){E(e);let s=F().$implicit;return z(s.selectedActual,r)||(s.selectedActual=r),D(r)}),_()()()}if(n&2){let e=F().$implicit;v(2),W("ngModel",e.selected),V("disabled",e.exit!==0),v(),W("ngModel",e.selectedActual),V("disabled",e.exit!==0)}}function Mee(n,t){if(n&1){let e=fe();m(0,"button",144),j("click",function(){E(e);let r=F().$implicit,s=F();return D(s.executeOrder(r,"currentstrike"))}),w(1,"B"),_()}}function Tee(n,t){if(n&1){let e=fe();m(0,"button",271),j("click",function(){E(e);let r=F().$implicit,s=F();return D(s.executeOrder(r,"currentstrike"))}),w(1,"S"),_()}}function Iee(n,t){if(n&1){let e=fe();m(0,"div")(1,"div",75)(2,"input",272),U("ngModelChange",function(r){E(e);let s=F().$implicit;return z(s.rollstrike,r)||(s.rollstrike=r),D(r)}),_(),m(3,"label",273),w(4),m(5,"div"),w(6),_()()(),m(7,"div",75)(8,"input",272),U("ngModelChange",function(r){E(e);let s=F().$implicit;return z(s.rollstrike,r)||(s.rollstrike=r),D(r)}),_(),m(9,"label",273),w(10),m(11,"div"),w(12),_()()(),m(13,"div",75)(14,"input",272),U("ngModelChange",function(r){E(e);let s=F().$implicit;return z(s.rollstrike,r)||(s.rollstrike=r),D(r)}),_(),m(15,"label",273),w(16),m(17,"div"),w(18),_()()()()}if(n&2){let e=F().$implicit,i=F();v(2),Fn("name","inlineRadioOptions-",e.scrip,""),Fn("id","inlineRadio1-",e.scrip,""),Gt("value",i.getPosRollStrike(e,2)),W("ngModel",e.rollstrike),v(),Fn("for","inlineRadio1-",e.scrip,""),v(),J("",i.getPosRollStrike(e,2)," "),v(2),Q(i.getPosRollStrikeLTP(e,2)),v(2),Fn("name","inlineRadioOptions-",e.scrip,""),Fn("id","inlineRadio2-",e.scrip,""),Gt("value",i.getPosRollStrike(e,1)),W("ngModel",e.rollstrike),v(),Fn("for","inlineRadio2-",e.scrip,""),v(),J("",i.getPosRollStrike(e,1)," "),v(2),Q(i.getPosRollStrikeLTP(e,1)),v(2),Fn("name","inlineRadioOptions-",e.scrip,""),Fn("id","inlineRadio3-",e.scrip,""),Gt("value",i.getPosRollStrike(e,-1)),W("ngModel",e.rollstrike),v(),Fn("for","inlineRadio3-",e.scrip,""),v(),J("",i.getPosRollStrike(e,-1)," "),v(2),Q(i.getPosRollStrikeLTP(e,-1))}}function kee(n,t){if(n&1){let e=fe();m(0,"button",144),j("click",function(){E(e);let r=F(2).$implicit,s=F();return D(s.executeOrder(r,"newstrike"))}),w(1,"B"),_()}}function Pee(n,t){if(n&1){let e=fe();m(0,"button",271),j("click",function(){E(e);let r=F(2).$implicit,s=F();return D(s.executeOrder(r,"newstrike"))}),w(1,"S"),_()}}function Nee(n,t){if(n&1){let e=fe();m(0,"td",190)(1,"div",192)(2,"input",274),U("ngModelChange",function(r){E(e);let s=F().$implicit;return z(s.rollstrike_new,r)||(s.rollstrike_new=r),D(r)}),j("keyup",function(r){E(e);let s=F().$implicit,o=F();return D(o.rollStrikeKeyUp(r,s))}),_(),m(3,"div",261),w(4),_(),te(5,kee,2,0,"button",262)(6,Pee,2,0,"button",263),_()()}if(n&2){let e=F().$implicit,i=F();v(2),W("ngModel",e.rollstrike_new),V("ngClass",Zt(5,UJ,i.isRollStrikeITM(e))),v(2),Q(i.getLTP(e.expiry,e.rollstrike_new)),v(),V("ngIf",e.qty>0),v(),V("ngIf",e.qty<0)}}function Oee(n,t){if(n&1){let e=fe();m(0,"td",257)(1,"input",275),U("ngModelChange",function(r){E(e);let s=F().$implicit;return z(s.expiry,r)||(s.expiry=r),D(r)}),_()()}if(n&2){let e=F().$implicit;v(),W("ngModel",e.expiry)}}function Ree(n,t){if(n&1){let e=fe();m(0,"td",276)(1,"input",277),U("ngModelChange",function(r){E(e);let s=F().$implicit;return z(s.exit,r)||(s.exit=r),D(r)}),_()()}if(n&2){let e=F().$implicit;v(),W("ngModel",e.exit)}}function Fee(n,t){if(n&1){let e=fe();m(0,"td",278)(1,"button",279),j("click",function(){E(e);let r=F().$implicit,s=F();return D(s.rollPosition(r))}),w(2,"Roll"),_()()}}function Lee(n,t){if(n&1){let e=fe();m(0,"td")(1,"button",279),j("click",function(){E(e);let r=F().$implicit,s=F();return D(s.splitPosition(r))}),w(2,"+"),_()()}}function Vee(n,t){if(n&1){let e=fe();m(0,"td")(1,"button",279),j("click",function(){E(e);let r=F().$implicit,s=F();return D(s.deletePosition(r))}),w(2,"X"),_()()}}function Bee(n,t){if(n&1){let e=fe();m(0,"td",280)(1,"div",192)(2,"input",281),U("ngModelChange",function(r){E(e);let s=F().$implicit;return z(s.entryDateTime,r)||(s.entryDateTime=r),D(r)}),_(),m(3,"input",282),U("ngModelChange",function(r){E(e);let s=F().$implicit;return z(s.exitDateTime,r)||(s.exitDateTime=r),D(r)}),_()()()}if(n&2){let e=F().$implicit;v(2),W("ngModel",e.entryDateTime),v(),W("ngModel",e.exitDateTime)}}function qee(n,t){if(n&1){let e=fe();m(0,"td",280)(1,"input",283),U("ngModelChange",function(r){E(e);let s=F().$implicit;return z(s.alertPrice,r)||(s.alertPrice=r),D(r)}),_(),m(2,"span",284),w(3),_()()}if(n&2){let e=F().$implicit;v(),W("ngModel",e.alertPrice),v(2),Q(e.alertStatus)}}function jee(n,t){if(n&1){let e=fe();m(0,"td",280)(1,"div")(2,"input",285),U("ngModelChange",function(r){E(e);let s=F().$implicit;return z(s.alertPrice,r)||(s.alertPrice=r),D(r)}),_(),m(3,"span",286),w(4),_(),m(5,"input",285),U("ngModelChange",function(r){E(e);let s=F().$implicit;return z(s.alertPrice,r)||(s.alertPrice=r),D(r)}),_(),m(6,"span",286),w(7),_(),m(8,"input",285),U("ngModelChange",function(r){E(e);let s=F().$implicit;return z(s.alertPrice,r)||(s.alertPrice=r),D(r)}),_(),m(9,"span",286),w(10),_(),m(11,"input",285),U("ngModelChange",function(r){E(e);let s=F().$implicit;return z(s.alertPrice,r)||(s.alertPrice=r),D(r)}),_(),m(12,"span",286),w(13),_()(),m(14,"div")(15,"input",285),U("ngModelChange",function(r){E(e);let s=F().$implicit;return z(s.alertPrice,r)||(s.alertPrice=r),D(r)}),_(),m(16,"span",286),w(17),_(),m(18,"input",285),U("ngModelChange",function(r){E(e);let s=F().$implicit;return z(s.alertPrice,r)||(s.alertPrice=r),D(r)}),_(),m(19,"span",286),w(20),_(),m(21,"input",285),U("ngModelChange",function(r){E(e);let s=F().$implicit;return z(s.alertPrice,r)||(s.alertPrice=r),D(r)}),_(),m(22,"span",286),w(23),_(),m(24,"input",285),U("ngModelChange",function(r){E(e);let s=F().$implicit;return z(s.alertPrice,r)||(s.alertPrice=r),D(r)}),_(),m(25,"span",286),w(26),_()()()}if(n&2){let e=F().$implicit;v(2),W("ngModel",e.alertPrice),v(2),Q(e.alertStatus),v(),W("ngModel",e.alertPrice),v(2),Q(e.alertStatus),v(),W("ngModel",e.alertPrice),v(2),Q(e.alertStatus),v(),W("ngModel",e.alertPrice),v(2),Q(e.alertStatus),v(2),W("ngModel",e.alertPrice),v(2),Q(e.alertStatus),v(),W("ngModel",e.alertPrice),v(2),Q(e.alertStatus),v(),W("ngModel",e.alertPrice),v(2),Q(e.alertStatus),v(),W("ngModel",e.alertPrice),v(2),Q(e.alertStatus)}}function Wee(n,t){if(n&1){let e=fe();m(0,"tr",42)(1,"td",250)(2,"div",251)(3,"input",252),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.addToOrders,r)||(s.addToOrders=r),D(r)}),_()()(),te(4,Dee,4,4,"td",68),m(5,"td",253)(6,"div",192)(7,"input",254),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.qty,r)||(s.qty=r),D(r)}),j("ngModelChange",function(r){let s=E(e).$implicit,o=F();return D(o.posQtyUpdated(r,s))}),_(),m(8,"input",255),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.roll_qty,r)||(s.roll_qty=r),D(r)}),_()()(),m(9,"td",256)(10,"span",42),w(11),_()(),m(12,"td",257)(13,"input",258),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.entry,r)||(s.entry=r),D(r)}),_(),m(14,"span",259),j("click",function(){let r=E(e).$implicit,s=F();return D(s.updateStrikePopover(r))}),w(15,"\u24D8"),_()(),m(16,"td",190)(17,"div",192)(18,"input",260),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.scrip,r)||(s.scrip=r),D(r)}),_(),m(19,"div",261),w(20),_(),te(21,Mee,2,0,"button",262)(22,Tee,2,0,"button",263),_(),te(23,Iee,19,30,"div",68),_(),te(24,Nee,7,7,"td",264)(25,Oee,2,1,"td",265)(26,Ree,2,1,"td",266)(27,Fee,3,0,"td",267)(28,Lee,3,0,"td",68)(29,Vee,3,0,"td",68)(30,Bee,4,2,"td",268)(31,qee,4,2,"td",268)(32,jee,27,16,"td",268),_()}if(n&2){let e=t.$implicit,i=F(),r=$n(253);V("ngClass",Re(27,WJ,e.exit!==0,i.hide_closed&&e.exit!==0)),v(3),W("ngModel",e.addToOrders),v(),V("ngIf",i.payoff_overlay),v(3),V("step",i.stepValue),W("ngModel",e.qty),V("ngClass",Re(30,qm,e.qty<0,e.qty>0)),v(),V("step",i.stepValue),W("ngModel",e.roll_qty),V("ngClass",Re(33,qm,e.roll_qty<0,e.roll_qty>0)),v(2),V("ngClass",Re(36,Cn,e.pnl<0,e.pnl>0)),v(),J(" ",i.getPnL(e)," "),v(2),W("ngModel",e.entry),v(),V("ngbPopover",r),v(4),W("ngModel",e.scrip),v(2),Q(i.getLTP(e.expiry,e.scrip)),v(),V("ngIf",e.qty<0),v(),V("ngIf",e.qty>0),v(),V("ngIf",e.exit===0&&!i.hide_roll3),v(),V("ngIf",!i.hide_roll),v(),V("ngIf",!i.hide_extra),v(),V("ngIf",!i.hide_extra),v(),V("ngIf",!i.hide_roll),v(),V("ngIf",!i.hide_extra),v(),V("ngIf",!i.hide_extra),v(),V("ngIf",i.currLoadNum===i.stocksStrategyNum),v(),V("ngIf",!i.auto_execute),v(),V("ngIf",i.auto_execute)}}function Uee(n,t){if(n&1){let e=fe();m(0,"button",144),j("click",function(){E(e);let r=F(2).$implicit,s=F(2);return D(s.executeOrderSLL(r))}),w(1,"SL-L buy"),_()}}function zee(n,t){if(n&1){let e=fe();m(0,"button",271),j("click",function(){E(e);let r=F(2).$implicit,s=F(2);return D(s.executeOrderSLL(r))}),w(1,"SL-L sell"),_()}}function Hee(n,t){if(n&1&&(m(0,"div",192),te(1,Uee,2,0,"button",262)(2,zee,2,0,"button",263),_()),n&2){let e=F().$implicit;v(),V("ngIf",e.qty>0),v(),V("ngIf",e.qty<0)}}function Yee(n,t){if(n&1){let e=fe();m(0,"button",279),j("click",function(){E(e);let r=F().$implicit,s=F(2);return D(s.executeOrderSLL(r))}),w(1,"Modify"),_()}}function Gee(n,t){if(n&1){let e=fe();m(0,"button",279),j("click",function(){E(e);let r=F().$implicit,s=F(2);return D(s.cancelSLLOrder(r))}),w(1,"Cancel"),_()}}function Kee(n,t){if(n&1){let e=fe();m(0,"button",279),j("click",function(){E(e);let r=F().$implicit,s=F(2);return D(s.deleteSLLOrder(r))}),w(1,"X"),_()}}function $ee(n,t){if(n&1){let e=fe();m(0,"tr",42)(1,"td",250)(2,"div",192)(3,"input",289),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.qty,r)||(s.qty=r),D(r)}),_()()(),m(4,"td",190)(5,"div",192)(6,"input",290),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.scrip,r)||(s.scrip=r),D(r)}),_(),m(7,"div",261),w(8),_()()(),m(9,"td",250)(10,"input",291),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.price,r)||(s.price=r),D(r)}),_()(),m(11,"td",250)(12,"input",292),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.trigger_price,r)||(s.trigger_price=r),D(r)}),_()(),m(13,"td",250),te(14,Hee,3,2,"div",293),_(),m(15,"td",294),te(16,Yee,2,0,"button",295),_(),m(17,"td",294),te(18,Gee,2,0,"button",295),_(),m(19,"td",294),te(20,Kee,2,0,"button",295),_()()}if(n&2){let e=t.$implicit,i=F(2);V("ngClass",Zt(12,zJ,e.order_id!==null)),v(3),V("step",i.stepValue),W("ngModel",e.qty),V("ngClass",Re(14,qm,e.qty<0,e.qty>0)),v(3),W("ngModel",e.scrip),v(2),Q(i.getLTP(e.expiry,e.scrip)),v(2),W("ngModel",e.price),v(2),W("ngModel",e.trigger_price),v(2),V("ngIf",e.order_id===null),v(2),V("ngIf",e.order_id),v(2),V("ngIf",e.order_id),v(2),V("ngIf",e.order_id===null)}}function Xee(n,t){if(n&1&&(m(0,"table",36)(1,"thead",37)(2,"tr")(3,"th",287),w(4,"Qty"),_(),m(5,"th",288),w(6,"Scrip"),_(),m(7,"th",287),w(8,"Exec. Price"),_(),m(9,"th",287),w(10,"Trigger"),_(),Ze(11,"th",287)(12,"th",287)(13,"th",287)(14,"th",287),_()(),m(15,"tbody"),te(16,$ee,21,17,"tr",39),_()()),n&2){let e=F();v(16),V("ngForOf",e.sl_trades)}}function Zee(n,t){if(n&1){let e=fe();m(0,"div",296)(1,"div",96)(2,"div",297),Ze(3,"canvas",298),_(),m(4,"div",299)(5,"div",300)(6,"div",301),w(7),_(),m(8,"div",301),w(9),_(),m(10,"input",302),U("ngModelChange",function(r){E(e);let s=F();return z(s.strategyAlertPrice,r)||(s.strategyAlertPrice=r),D(r)}),_(),m(11,"span",14),w(12),_()(),m(13,"div",40),w(14," Total PnL: "),m(15,"div",41)(16,"span",42),w(17),_(),m(18,"span",303),w(19),_()()(),m(20,"div",96)(21,"div",304)(22,"button",178),j("click",function(){E(e);let r=F();return D(r.addPosition())}),w(23,"Add"),_(),m(24,"button",178),j("click",function(){E(e);let r=F();return D(r.calculatePayoff())}),w(25,"Preview"),_(),m(26,"div",305)(27,"button",178),j("click",function(){E(e);let r=$n(30);return D(r.click())}),w(28,"Import"),_(),m(29,"input",306,3),j("change",function(r){E(e);let s=F();return D(s.importCSV(r,1))}),_(),m(31,"button",178),j("click",function(){E(e);let r=F();return D(r.fetchLastOI())}),w(32,"Fetch OI"),_()(),m(33,"a",307),w(34,"View Fly Payoff"),_(),m(35,"button",144),j("click",function(){E(e);let r=F();return D(r.findDS_BuyExit())}),w(36,"DS Buy Exit"),_(),m(37,"span"),w(38),_(),m(39,"div",34)(40,"button",178),j("click",function(){E(e);let r=F();return D(r.savePositions(1))}),w(41,"Save 1"),_(),m(42,"button",178),j("click",function(){E(e);let r=F();return D(r.savePositions(2))}),w(43,"Save 2"),_(),m(44,"button",178),j("click",function(){E(e);let r=F();return D(r.savePositions(3))}),w(45,"Save 3"),_(),m(46,"button",178),j("click",function(){E(e);let r=F();return D(r.savePositions(4))}),w(47,"Save 4"),_(),m(48,"button",178),j("click",function(){E(e);let r=F();return D(r.savePositions(5))}),w(49,"Save 5"),_(),m(50,"button",178),j("click",function(){E(e);let r=F();return D(r.savePositions(6))}),w(51,"Save 6"),_(),m(52,"button",178),j("click",function(){E(e);let r=F();return D(r.savePositions(7))}),w(53,"Save 7"),_(),m(54,"button",178),j("click",function(){E(e);let r=F();return D(r.savePositions(8))}),w(55,"Save 8"),_()(),m(56,"div",34)(57,"button",178),j("click",function(){E(e);let r=F();return D(r.reloadPayoffData(1))}),w(58,"Load 1"),_(),m(59,"button",178),j("click",function(){E(e);let r=F();return D(r.reloadPayoffData(2))}),w(60,"Load 2"),_(),m(61,"button",178),j("click",function(){E(e);let r=F();return D(r.reloadPayoffData(3))}),w(62,"Load 3"),_(),m(63,"button",178),j("click",function(){E(e);let r=F();return D(r.reloadPayoffData(4))}),w(64,"Load 4"),_(),m(65,"button",178),j("click",function(){E(e);let r=F();return D(r.reloadPayoffData(5))}),w(66,"Load 5"),_(),m(67,"button",178),j("click",function(){E(e);let r=F();return D(r.reloadPayoffData(6))}),w(68,"Load 6"),_(),m(69,"button",178),j("click",function(){E(e);let r=F();return D(r.reloadPayoffData(7))}),w(70,"Load 7"),_(),m(71,"button",178),j("click",function(){E(e);let r=F();return D(r.reloadPayoffData(8))}),w(72,"Load 8"),_()(),m(73,"div",34)(74,"button",178),j("click",function(){E(e);let r=F();return D(r.exportToCSV(1))}),w(75,"Export 1"),_(),m(76,"button",178),j("click",function(){E(e);let r=F();return D(r.exportToCSV(2))}),w(77,"Export 2"),_(),m(78,"button",178),j("click",function(){E(e);let r=F();return D(r.exportToCSV(3))}),w(79,"Export 3"),_(),m(80,"button",178),j("click",function(){E(e);let r=F();return D(r.exportToCSV(4))}),w(81,"Export 4"),_(),m(82,"button",178),j("click",function(){E(e);let r=F();return D(r.exportToCSV(5))}),w(83,"Export 5"),_(),m(84,"button",178),j("click",function(){E(e);let r=F();return D(r.exportToCSV(6))}),w(85,"Export 6"),_(),m(86,"button",178),j("click",function(){E(e);let r=F();return D(r.exportToCSV(7))}),w(87,"Export 7"),_(),m(88,"button",178),j("click",function(){E(e);let r=F();return D(r.exportToCSV(8))}),w(89,"Export 8"),_()(),m(90,"div",240),w(91),_(),m(92,"div",240),w(93),m(94,"button",144),j("click",function(){E(e);let r=F();return D(r.getFunds())}),w(95,"Fetch"),_()(),m(96,"div",240),w(97),_(),m(98,"div",240),w(99),_()()()()()()}if(n&2){let e=F();v(3),V("data",e.lineChartData)("options",e.lineChartOptions)("type",e.lineChartType),v(4),J("Sold: ",e.getSoldPremium()[0],""),v(2),J("Current: ",e.getSoldPremium()[1],""),v(),W("ngModel",e.strategyAlertPrice),v(2),Q(e.strategyAlertText),v(4),V("ngClass",Re(16,Cn,e.strategyPnl<0,e.strategyPnl>0)),v(),J(" ",e.getStrategyPnL()," "),v(2),J(" (",e.getStrategyPnLAfterCharges(),") "),v(19),Q(e.ds_buy_exit),v(53),J("Margin: ",e.margin,""),v(2),ci("Available Margin: ",e.avail_margin," / Used Margin: ",e.used_margin," "),v(4),J("ROI: ",e.getROI()," %"),v(2),J("Breakevens: ",e.breakevens,"")}}function Qee(n,t){if(n&1&&(m(0,"option",189),w(1),_()),n&2){let e=t.$implicit;V("value",e),v(),J(" ",e," ")}}function Jee(n,t){if(n&1&&(m(0,"option",189),w(1),_()),n&2){let e=t.$implicit;V("value",e),v(),J(" ",e," ")}}function ete(n,t){if(n&1){let e=fe();m(0,"div",46)(1,"input",308),U("ngModelChange",function(r){E(e);let s=F();return z(s.strangle_chart_simulate_tillend,r)||(s.strangle_chart_simulate_tillend=r),D(r)}),_(),m(2,"label",309),w(3,"Till end"),_()()}if(n&2){let e=F();v(),W("ngModel",e.strangle_chart_simulate_tillend)}}function tte(n,t){if(n&1&&(m(0,"span"),w(1),_()),n&2){let e=F();v(),ci("",e.simulateCurrDateTimeString," - Expiry: ",e.simulateExpiryDate,"")}}function nte(n,t){if(n&1&&(m(0,"div",310)(1,"div",108),w(2),_()()),n&2){let e=F();v(2),Q(e.charts_instru)}}function ite(n,t){n&1&&(m(0,"th",315),w(1,"Call LTP"),_())}function rte(n,t){n&1&&(m(0,"th",315),w(1,"Put LTP"),_())}function ste(n,t){if(n&1&&(m(0,"div",331),w(1),_()),n&2){let e=F().$implicit;v(),ci(" ",e.qtyCE," (",e.costCE,") ")}}function ote(n,t){if(n&1&&(m(0,"div",331),w(1),_()),n&2){let e=F().$implicit;v(),J(" ",e.sllCE," ")}}function ate(n,t){if(n&1){let e=fe();m(0,"td",332)(1,"span",323),j("click",function(){E(e);let r=F(),s=r.$implicit,o=r.index,a=F(2);return D(a.addToStrategyBuilder(s.strike,"CE",a.getCELtpForSecondExpiry(o)))}),w(2),_()()}if(n&2){let e=F().index,i=F(2);v(2),Q(i.getCELtpForSecondExpiry(e))}}function lte(n,t){if(n&1&&(m(0,"div",333),w(1),_()),n&2){let e=F(3);v(),J(" ",e.getSpotValue()," ")}}function cte(n,t){n&1&&(m(0,"div",334),w(1," N "),_())}function ute(n,t){if(n&1){let e=fe();m(0,"td",332)(1,"span",323),j("click",function(){E(e);let r=F(),s=r.$implicit,o=r.index,a=F(2);return D(a.addToStrategyBuilder(s.strike,"PE",a.getPELtpForSecondExpiry(o)))}),w(2),_()()}if(n&2){let e=F().index,i=F(2);v(2),Q(i.getPELtpForSecondExpiry(e))}}function dte(n,t){if(n&1&&(m(0,"div",331),w(1),_()),n&2){let e=F().$implicit;v(),ci(" ",e.qtyPE," (",e.costPE,") ")}}function hte(n,t){if(n&1&&(m(0,"div",331),w(1),_()),n&2){let e=F().$implicit;v(),J(" ",e.sllPE," ")}}function pte(n,t){if(n&1){let e=fe();m(0,"tr")(1,"td",320)(2,"span",321),j("click",function(){let r=E(e).$implicit,s=F(2);return D(s.update_chart_strike(r.strike+"CE","CE",!0))}),w(3,"\u21AF"),_(),m(4,"span",322),j("click",function(){let r=E(e).$implicit,s=F(2);return D(s.addSLLOrder(r.strike,"CE",r.ltpCE))}),w(5,"\u2022"),_(),m(6,"span",323),j("click",function(){let r=E(e).$implicit,s=F(2);return D(s.addToStrategyBuilder(r.strike,"CE",r.ltpCE))}),w(7),_(),te(8,ste,2,2,"div",324)(9,ote,2,1,"div",324),_(),te(10,ate,3,1,"td",325),m(11,"td",326),w(12),te(13,lte,2,1,"div",327)(14,cte,2,0,"div",328),_(),te(15,ute,3,1,"td",325),m(16,"td",320)(17,"span",323),j("click",function(){let r=E(e).$implicit,s=F(2);return D(s.addToStrategyBuilder(r.strike,"PE",r.ltpPE))}),w(18),_(),m(19,"span",329),j("click",function(){let r=E(e).$implicit,s=F(2);return D(s.update_chart_strike(r.strike+"PE","PE",!0))}),w(20,"\u21AF"),_(),m(21,"span",330),j("click",function(){let r=E(e).$implicit,s=F(2);return D(s.addSLLOrder(r.strike,"PE",r.ltpPE))}),w(22,"\u2022"),_(),te(23,dte,2,2,"div",324)(24,hte,2,1,"div",324),_()()}if(n&2){let e=t.$implicit,i=F(2);v(),V("ngClass",Re(14,HJ,e.inCurrStrategyCE,e.sllCE)),v(6),Q(e.ltpCE),v(),V("ngIf",e.inCurrStrategyCE),v(),V("ngIf",e.sllCE),v(),V("ngIf",i.simulate_strategy||i.expiryDate2),v(),V("ngClass",Re(17,nS,e.isSpot,!e.isSpot)),v(),J(" ",e.strike," "),v(),V("ngIf",e.isSpot),v(),V("ngIf",e.showNudge),v(),V("ngIf",i.simulate_strategy||i.expiryDate2),v(),V("ngClass",Re(20,YJ,e.inCurrStrategyPE,e.sllPE)),v(2),Q(e.ltpPE),v(5),V("ngIf",e.inCurrStrategyPE),v(),V("ngIf",e.sllPE)}}function fte(n,t){if(n&1&&(m(0,"div",333),w(1),_()),n&2){let e=F(4);v(),J(" ",e.getSpotValue()," ")}}function gte(n,t){if(n&1){let e=fe();m(0,"tr")(1,"td",332)(2,"span",323),j("click",function(){let r=E(e).$implicit,s=F(3);return D(s.addToStrategyBuilder(r.strike,"CE",r.ltpCE))}),w(3),_()(),m(4,"td",326),w(5),te(6,fte,2,1,"div",327),_(),m(7,"td",332)(8,"span",323),j("click",function(){let r=E(e).$implicit,s=F(3);return D(s.addToStrategyBuilder(r.strike,"PE",r.ltpPE))}),w(9),_()()()}if(n&2){let e=t.$implicit;v(3),Q(e.ltpCE),v(),V("ngClass",Re(5,nS,e.isSpot,!e.isSpot)),v(),J(" ",e.strike," "),v(),V("ngIf",e.isSpot),v(3),Q(e.ltpPE)}}function mte(n,t){if(n&1&&(m(0,"table",153)(1,"thead",37)(2,"tr")(3,"th",315),w(4,"Call LTP"),_(),m(5,"th",159),w(6,"Strike"),_(),m(7,"th",315),w(8,"Put LTP"),_()()(),m(9,"tbody"),te(10,gte,10,8,"tr",165),_()()),n&2){let e=F(2);v(10),V("ngForOf",e.oc_strikes2)}}function _te(n,t){if(n&1){let e=fe();m(0,"tr")(1,"td",335),j("click",function(){let r=E(e).$implicit,s=F(2);return D(s.addDSToStrategyBuilder(r))}),w(2),_(),m(3,"td",332)(4,"span",336),w(5),_()(),m(6,"td",332)(7,"span",337),w(8),_()()()}if(n&2){let e=t.$implicit;v(2),J(" ",e.scrip," "),v(3),Q(e.maxProfit),v(3),Q(e.maxLoss)}}function Ate(n,t){if(n&1){let e=fe();m(0,"tr")(1,"td",335),j("click",function(){let r=E(e).$implicit,s=F(2);return D(s.addBflyToStrategyBuilder(r))}),w(2),_(),m(3,"td",332)(4,"span",336),w(5),_()(),m(6,"td",332)(7,"span",337),w(8),_()()()}if(n&2){let e=t.$implicit;v(2),J(" ",e.scrip," "),v(3),Q(e.maxProfit),v(3),Q(e.maxLoss)}}function yte(n,t){if(n&1){let e=fe();m(0,"div")(1,"div",311)(2,"input",312),U("ngModelChange",function(r){E(e);let s=F();return z(s.inlineOC_higherRange,r)||(s.inlineOC_higherRange=r),D(r)}),_(),m(3,"input",313),U("ngModelChange",function(r){E(e);let s=F();return z(s.inlineOC_lowerRange,r)||(s.inlineOC_lowerRange=r),D(r)}),_(),m(4,"button",152),j("click",function(){E(e);let r=F();return D(r.inlineOCRangeUpdate())}),w(5,"\u2713"),_(),m(6,"input",314),U("ngModelChange",function(r){E(e);let s=F();return z(s.inlineOC_qty,r)||(s.inlineOC_qty=r),D(r)}),_(),m(7,"button",152),j("click",function(){E(e);let r=F();return D(r.inlineOCFix())}),w(8,"\u2713"),_()(),m(9,"table",153)(10,"thead",37)(11,"tr")(12,"th",315),w(13,"Call LTP"),_(),te(14,ite,2,0,"th",316),m(15,"th",159),w(16,"Strike"),_(),te(17,rte,2,0,"th",316),m(18,"th",315),w(19,"Put LTP"),_()()(),m(20,"tbody"),te(21,pte,25,23,"tr",165),_()(),te(22,mte,11,1,"table",317),m(23,"div",311)(24,"input",314),U("ngModelChange",function(r){E(e);let s=F();return z(s.dsMonitorQty,r)||(s.dsMonitorQty=r),D(r)}),_(),w(25," Debit Spread: "),_(),m(26,"table",153)(27,"thead",37)(28,"tr")(29,"th",159),w(30,"Buy Strike"),_(),m(31,"th",315),w(32,"Profit"),_(),m(33,"th",315),w(34,"Loss"),_()()(),m(35,"tbody"),te(36,_te,9,3,"tr",165),_()(),m(37,"div",311)(38,"input",318),U("ngModelChange",function(r){E(e);let s=F();return z(s.bflyMonitorQty,r)||(s.bflyMonitorQty=r),D(r)}),_(),w(39," Butterfly Max P&L: "),_(),m(40,"table",319)(41,"thead",37)(42,"tr")(43,"th",159),w(44,"Sell Strike"),_(),m(45,"th",315),w(46,"Profit"),_(),m(47,"th",315),w(48,"Loss"),_()()(),m(49,"tbody"),te(50,Ate,9,3,"tr",165),_()()()}if(n&2){let e=F();v(2),W("ngModel",e.inlineOC_higherRange),v(),W("ngModel",e.inlineOC_lowerRange),v(3),W("ngModel",e.inlineOC_qty),v(8),V("ngIf",e.simulate_strategy||e.expiryDate2),v(3),V("ngIf",e.simulate_strategy||e.expiryDate2),v(4),V("ngForOf",e.oc_strikes),v(),V("ngIf",e.simulate_strategy),v(2),W("ngModel",e.dsMonitorQty),v(12),V("ngForOf",e.ds_monitor),v(2),W("ngModel",e.bflyMonitorQty),v(12),V("ngForOf",e.bfly_monitor)}}function vte(n,t){n&1&&(m(0,"div"),Ze(1,"iframe",338),_())}function wte(n,t){n&1&&(m(0,"div")(1,"b"),w(2,"Update 27 Nov:"),_(),w(3," Maintain T+0 Monitor extra buying options and buy and exit whenever required. Shift straddle if spot breaching breakeven. Move other side hedge whenever required. End result for the Fly is the straddle one strike near to a side's hedge on the Expiry day. Exit the Fly if getting 3% on deployed capital in the week and move to next week. During the day, maintain your T+0 slope. Do that using extra buying and maintaining appropriate distance of hedge from straddle. If spot is nearing breakeven, make sure that side hedge distance is less than straddle combined premium. At end of the day, if required, then adjust straddle and hedges to achieve the payoff structure and T0 you want. T0 gives your pnl of the day irrespective of whether you are shifting your straddle or not. So maintaining T0 slope is important. If you are shifting straddle constantly, you might capture extra theta decay during the day, but will not be much as compared to original straddle. You will anyways be shifting the straddle at end of day. Not required to shift straddle constantly. Shift straddle has to be shifted when breakeven is breached, because loss rate increases after that at end of day. Also review payoff structure at end of day. Add another lower quantity closer hedged fly if required. "),Ze(4,"br"),m(5,"b"),w(6,"Straddle Adjustments:"),_(),w(7," Move straddle legs as per the trend. Not early (to avoid random moves) and Not Late (ITM loss and lower premium) Moving frequently leads to getting lower premium over time. "),Ze(8,"br"),m(9,"b"),w(10,"Hedge Adjustments:"),_(),w(11," Hedges should not be too far and not too close. Too far increases overnight risk. Too close results in late profit realization. Manage intraday moves with extra buy. Maintaining T0 is important. Move untested side hedge inside if cheap. Add extra small quantity of buy to manage T0 line according to trend. Monitor option chart for this. Look for EMA confirmation, S/R breach for adjustment of straddle and buys. Max loss on a side should be 100 points. In terms of Rs., do 100 * num. lots. Hedge should eventually be at the distance less than straddle premium. "),Ze(12,"br"),m(13,"b"),w(14,"Loss less:"),_(),w(15," A side becomes loss less if NET CREDIT is GREATER than HEDGE DISTANCE on that side. Normally you would have atleast 400 credit in straddle and pay upto 200 on hedges. So net credit is 200. So straddle around 200 points away from hedge can make that side loss less. "),Ze(16,"br"),m(17,"b"),w(18,"Strangle:"),_(),w(19," Sell naked far OTM CE or strangle. Exit the naked option if SL hit. Keep moving untested side naked sell inside. "),Ze(20,"br"),m(21,"b"),w(22,"NEW FLY:"),_(),w(23," If BNF near of crossing breakeven, make CLOSE-HEDGED fly with lower qty at that point. Exit this new fly if BNF moving out of its breakevens. "),_())}function bte(n,t){if(n&1&&(m(0,"div",348)(1,"div",349)(2,"div",350),w(3),_()(),m(4,"div",349)(5,"div",350),w(6),_(),m(7,"div",351),w(8),_()(),m(9,"div",349)(10,"div",350),w(11),_(),m(12,"div",351),w(13),_()(),m(14,"div",349)(15,"div",350),w(16),_(),m(17,"div",351),w(18),_()(),m(19,"div",349)(20,"div",350),w(21),_(),m(22,"div",351),w(23),_()(),m(24,"div",349)(25,"div",350),w(26),_(),m(27,"div",351),w(28),_()(),m(29,"div",349)(30,"div",350),w(31),_(),m(32,"div",351),w(33),_()(),m(34,"div",349)(35,"div",350),w(36),_(),m(37,"div",351),w(38),_()(),m(39,"div",349)(40,"div",350),w(41),_(),m(42,"div",351),w(43),_()()()),n&2){let e=t.$implicit,i=F(2);v(),Gt("id","opt_chart_"+e+"_spot"),v(2),Q(i.getChartLabel("opt_chart_"+e+"_spot")),v(),Gt("id","opt_chart_"+e+"_0"),v(2),Q(i.getChartLabel("opt_chart_"+e+"_0")),v(2),Q(i.getChartValues("opt_chart_"+e+"_0")),v(),Gt("id","opt_chart_"+e+"_1"),v(2),Q(i.getChartLabel("opt_chart_"+e+"_1")),v(2),Q(i.getChartValues("opt_chart_"+e+"_1")),v(),Gt("id","opt_chart_"+e+"_2"),v(2),Q(i.getChartLabel("opt_chart_"+e+"_2")),v(2),Q(i.getChartValues("opt_chart_"+e+"_2")),v(),Gt("id","opt_chart_"+e+"_3"),v(2),Q(i.getChartLabel("opt_chart_"+e+"_3")),v(2),Q(i.getChartValues("opt_chart_"+e+"_3")),v(),Gt("id","opt_chart_"+e+"_4"),v(2),Q(i.getChartLabel("opt_chart_"+e+"_4")),v(2),Q(i.getChartValues("opt_chart_"+e+"_4")),v(),Gt("id","opt_chart_"+e+"_5"),v(2),Q(i.getChartLabel("opt_chart_"+e+"_5")),v(2),Q(i.getChartValues("opt_chart_"+e+"_5")),v(),Gt("id","opt_chart_"+e+"_6"),v(2),Q(i.getChartLabel("opt_chart_"+e+"_5")),v(2),Q(i.getChartValues("opt_chart_"+e+"_5")),v(),Gt("id","opt_chart_"+e+"_7"),v(2),Q(i.getChartLabel("opt_chart_"+e+"_5")),v(2),Q(i.getChartValues("opt_chart_"+e+"_5"))}}function Ste(n,t){if(n&1){let e=fe();m(0,"div",339)(1,"div",21)(2,"span",340),w(3),_(),m(4,"div",341)(5,"input",342),U("ngModelChange",function(r){E(e);let s=F();return z(s.st_chart_radio,r)||(s.st_chart_radio=r),D(r)}),_(),m(6,"label",343),w(7,"5 min"),_()(),m(8,"div",341)(9,"input",344),U("ngModelChange",function(r){E(e);let s=F();return z(s.st_chart_radio,r)||(s.st_chart_radio=r),D(r)}),_(),m(10,"label",345),w(11,"1 min"),_()(),m(12,"button",346),j("click",function(){E(e);let r=F();return D(r.initSTCharts1())}),w(13,"ST 10 2"),_(),m(14,"button",74),j("click",function(){E(e);let r=F();return D(r.backtestExpiryStrangles())}),w(15,"Expiry Strangles"),_(),m(16,"button",74),j("click",function(){E(e);let r=F();return D(r.backtestStrangleSL_Reentry())}),w(17,"Strangle SL Reentry"),_(),m(18,"button",74),j("click",function(){E(e);let r=F();return D(r.backtestLongFly())}),w(19,"Long Fly"),_()(),m(20,"div",136),te(21,bte,44,26,"div",347),_()()}if(n&2){let e=F();v(3),J("Expiry: ",e.simulateExpiryDate,""),v(2),W("ngModel",e.st_chart_radio),v(4),W("ngModel",e.st_chart_radio),v(12),V("ngForOf",ml(4,GJ))}}function Cte(n,t){if(n&1&&(m(0,"div",348),Ze(1,"div",359)(2,"div",359)(3,"div",359),_()),n&2){let e=t.index;v(),Gt("id","opt_chart_"+e+"_spot"),v(),Gt("id","opt_chart_"+e+"_CE"),v(),Gt("id","opt_chart_"+e+"_PE")}}function xte(n,t){if(n&1&&(m(0,"div",348),Ze(1,"div",359)(2,"div",359)(3,"div",359),_()),n&2){let e=t.$implicit;v(),Gt("id","opt_chart_"+e+"_spot"),v(),Gt("id","opt_chart_"+e+"_CE"),v(),Gt("id","opt_chart_"+e+"_PE")}}function Ete(n,t){if(n&1){let e=fe();m(0,"div",339)(1,"div",21)(2,"span",340),w(3),_(),m(4,"div",341)(5,"input",352),U("ngModelChange",function(r){E(e);let s=F();return z(s.st_chart_radio,r)||(s.st_chart_radio=r),D(r)}),_(),m(6,"label",353),w(7,"10 2"),_()(),m(8,"div",341)(9,"input",354),U("ngModelChange",function(r){E(e);let s=F();return z(s.st_chart_radio,r)||(s.st_chart_radio=r),D(r)}),_(),m(10,"label",355),w(11,"7 3"),_()(),m(12,"div",341)(13,"input",356),U("ngModelChange",function(r){E(e);let s=F();return z(s.st_chart_radio,r)||(s.st_chart_radio=r),D(r)}),_(),m(14,"label",357),w(15,"Both"),_()(),m(16,"input",358),U("ngModelChange",function(r){E(e);let s=F();return z(s.st_chart_strike,r)||(s.st_chart_strike=r),D(r)}),_(),m(17,"button",74),j("click",function(){E(e);let r=F();return D(r.initSTCharts())}),w(18,"Init"),_()(),m(19,"div",136),te(20,Cte,4,3,"div",347),_(),m(21,"span",340),w(22),_(),m(23,"div",136),te(24,xte,4,3,"div",347),_()()}if(n&2){let e=F();v(3),J("Expiry: ",e.simulateExpiryDate,""),v(2),W("ngModel",e.st_chart_radio),v(4),W("ngModel",e.st_chart_radio),v(4),W("ngModel",e.st_chart_radio),v(3),W("ngModel",e.st_chart_strike),v(4),V("ngForOf",ml(8,tS).constructor(5)),v(2),J("Expiry: ",e.simulateExpiryDate,""),v(2),V("ngForOf",ml(9,KJ))}}function Dte(n,t){if(n&1&&(m(0,"option",189),w(1),_()),n&2){let e=t.$implicit;V("value",e),v(),J(" ",e," ")}}function Mte(n,t){if(n&1&&(m(0,"span"),w(1),_()),n&2){let e=F();v(),ci("",e.simulateCurrDateTimeString," - Expiry: ",e.simulateExpiryDate,"")}}function Tte(n,t){if(n&1&&(m(0,"div",310)(1,"div",108),w(2),_()()),n&2){let e=F();v(2),Q(e.charts_instru)}}function Ite(n,t){if(n&1){let e=fe();m(0,"div",360),j("click",function(){let r=E(e).index,s=F();return D(s.update_chart_strike(s.chart_strikes_ce[r],"CE"))}),m(1,"div",361)(2,"div",108),w(3),_(),m(4,"div",109),w(5),_()()()}if(n&2){let e=t.index,i=F();v(),Gt("id","opt_chart_"+e+"CE"),V("ngClass",Re(4,C5,i.isChartStrikeInCurrStrategy(i.chart_strikes_ce[e])>0,i.isChartStrikeInCurrStrategy(i.chart_strikes_ce[e])<0)),v(2),Q(i.chart_strikes_ce[e]),v(2),Q(i.isChartStrikeInCurrStrategy(i.chart_strikes_ce[e]))}}function kte(n,t){if(n&1){let e=fe();m(0,"div",360),j("click",function(){let r=E(e).index,s=F();return D(s.update_chart_strike(s.chart_strikes_pe[r],"PE"))}),m(1,"div",361)(2,"div",108),w(3),_(),m(4,"div",109),w(5),_()()()}if(n&2){let e=t.index,i=F();v(),Gt("id","opt_chart_"+e+"PE"),V("ngClass",Re(4,C5,i.isChartStrikeInCurrStrategy(i.chart_strikes_pe[e])>0,i.isChartStrikeInCurrStrategy(i.chart_strikes_pe[e])<0)),v(2),Q(i.chart_strikes_pe[e]),v(2),Q(i.isChartStrikeInCurrStrategy(i.chart_strikes_pe[e]))}}function Pte(n,t){if(n&1&&(m(0,"option",189),w(1),_()),n&2){let e=t.$implicit;V("value",e),v(),J(" ",e," ")}}function Nte(n,t){if(n&1){let e=fe();m(0,"div",362)(1,"div",363)(2,"input",364),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.selected,r)||(s.selected=r),D(r)}),_()(),m(3,"select",365),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.instru,r)||(s.instru=r),D(r)}),te(4,Pte,2,2,"option",25),_(),m(5,"input",366),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.scrip1,r)||(s.scrip1=r),D(r)}),_(),m(6,"input",367),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.scrip2,r)||(s.scrip2=r),D(r)}),_(),m(7,"input",368),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.expiry,r)||(s.expiry=r),D(r)}),_(),m(8,"select",365),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.compare,r)||(s.compare=r),D(r)}),m(9,"option",369),w(10,">"),_(),m(11,"option",370),w(12,"<"),_()(),m(13,"input",371),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.price,r)||(s.price=r),D(r)}),_(),m(14,"span"),w(15),_(),m(16,"span",284),w(17),_()()}if(n&2){let e=t.$implicit,i=F();v(2),W("ngModel",e.selected),v(),W("ngModel",e.instru),v(),V("ngForOf",i.supportedInstru),v(),W("ngModel",e.scrip1),v(),W("ngModel",e.scrip2),v(),W("ngModel",e.expiry),v(),W("ngModel",e.compare),v(5),W("ngModel",e.price),v(2),Q(i.getAlertLtp(e)),v(2),Q(e.status)}}function Ote(n,t){if(n&1&&(m(0,"option",189),w(1),_()),n&2){let e=t.$implicit;V("value",e),v(),J(" ",e," ")}}function Rte(n,t){if(n&1&&(m(0,"div",333),w(1),_()),n&2){let e=F(2);v(),J(" ",e.getSpotValue()," ")}}function Fte(n,t){if(n&1){let e=fe();m(0,"tr")(1,"td",332)(2,"span",323),j("click",function(){let r=E(e).$implicit,s=F();return D(s.addToStrategyBuilder(r.strike,"CE",r.ltpCE))}),w(3),_()(),m(4,"td",332)(5,"span",323),j("click",function(){let r=E(e),s=r.$implicit,o=r.index,a=F();return D(a.addToStrategyBuilder(s.strike,"CE",a.getLtpForMultiExpiry2(o)[0]))}),w(6),_()(),m(7,"td",332)(8,"span",323),j("click",function(){let r=E(e),s=r.$implicit,o=r.index,a=F();return D(a.addToStrategyBuilder(s.strike,"CE",a.getLtpForMultiExpiry3(o)[0]))}),w(9),_()(),m(10,"td",332)(11,"span",323),j("click",function(){let r=E(e),s=r.$implicit,o=r.index,a=F();return D(a.addToStrategyBuilder(s.strike,"CE",a.getLtpForMultiExpiry4(o)[0]))}),w(12),_()(),m(13,"td",332)(14,"span",323),j("click",function(){let r=E(e),s=r.$implicit,o=r.index,a=F();return D(a.addToStrategyBuilder(s.strike,"CE",a.getLtpForMultiExpiry5(o)[0]))}),w(15),_()(),m(16,"td",326),w(17),te(18,Rte,2,1,"div",327),_(),m(19,"td",332)(20,"span",323),j("click",function(){let r=E(e),s=r.$implicit,o=r.index,a=F();return D(a.addToStrategyBuilder(s.strike,"PE",a.getLtpForMultiExpiry5(o)[1]))}),w(21),_()(),m(22,"td",332)(23,"span",323),j("click",function(){let r=E(e),s=r.$implicit,o=r.index,a=F();return D(a.addToStrategyBuilder(s.strike,"PE",a.getLtpForMultiExpiry4(o)[1]))}),w(24),_()(),m(25,"td",332)(26,"span",323),j("click",function(){let r=E(e),s=r.$implicit,o=r.index,a=F();return D(a.addToStrategyBuilder(s.strike,"PE",a.getLtpForMultiExpiry3(o)[1]))}),w(27),_()(),m(28,"td",332)(29,"span",323),j("click",function(){let r=E(e),s=r.$implicit,o=r.index,a=F();return D(a.addToStrategyBuilder(s.strike,"PE",a.getLtpForMultiExpiry2(o)[1]))}),w(30),_()(),m(31,"td",332)(32,"span",323),j("click",function(){let r=E(e).$implicit,s=F();return D(s.addToStrategyBuilder(r.strike,"PE",r.ltpPE))}),w(33),_()()()}if(n&2){let e=t.$implicit,i=t.index,r=F();v(3),Q(e.ltpCE),v(3),Q(r.getLtpForMultiExpiry2(i)[0]),v(3),Q(r.getLtpForMultiExpiry3(i)[0]),v(3),Q(r.getLtpForMultiExpiry4(i)[0]),v(3),Q(r.getLtpForMultiExpiry5(i)[0]),v(),V("ngClass",Re(13,nS,e.isSpot,!e.isSpot)),v(),J(" ",e.strike," "),v(),V("ngIf",e.isSpot),v(3),Q(r.getLtpForMultiExpiry5(i)[1]),v(3),Q(r.getLtpForMultiExpiry4(i)[1]),v(3),Q(r.getLtpForMultiExpiry3(i)[1]),v(3),Q(r.getLtpForMultiExpiry2(i)[1]),v(3),Q(e.ltpPE)}}function Lte(n,t){if(n&1&&(m(0,"tr")(1,"td"),w(2),_(),m(3,"td"),w(4),_(),m(5,"td"),w(6),_(),m(7,"td"),w(8),_(),m(9,"td"),w(10),_(),m(11,"td"),w(12),_(),m(13,"td"),w(14),_(),m(15,"td"),w(16),_()()),n&2){let e,i=t.$implicit,r=F();v(2),Q(i.instru),v(2),Q(i.expiry_date),v(2),Q(i.qty),v(2),Q(i.scrip),v(2),Q(r.getKnifeOrderStatus(i)[0]),v(2),Q(r.getKnifeOrderStatus(i)[1]),v(2),Q(r.getLTP(i.expiry_date,i.scrip,i.instru)),v(2),Q((e=r.getOHLC(i.expiry_date,i.scrip,i.instru))==null?null:e.low)}}function Vte(n,t){if(n&1&&(m(0,"tr")(1,"td"),w(2),_(),m(3,"td"),w(4),_(),m(5,"td"),w(6),_(),m(7,"td"),w(8),_()()),n&2){let e=t.$implicit;v(2),J(" ",e.instru," "),v(2),J(" ",e.scrip," "),v(2),J(" ",e.qty," "),v(2),J(" ",e.price," ")}}function Bte(n,t){if(n&1){let e=fe();m(0,"div")(1,"textarea",372),U("ngModelChange",function(r){E(e);let s=F();return z(s.ordersTextarea,r)||(s.ordersTextarea=r),D(r)}),j("ngModelChange",function(r){E(e);let s=F();return D(s.ordersTextareaUpdated(r))}),_(),m(2,"table",36)(3,"tbody"),te(4,Vte,9,4,"tr",165),_()(),m(5,"div",373)(6,"input",374),U("ngModelChange",function(r){E(e);let s=F();return z(s.orders_broker,r)||(s.orders_broker=r),D(r)}),_(),m(7,"label",375),w(8,"Upstox"),_()(),m(9,"div",373)(10,"input",376),U("ngModelChange",function(r){E(e);let s=F();return z(s.orders_broker,r)||(s.orders_broker=r),D(r)}),_(),m(11,"label",377),w(12,"Zerodha"),_()(),m(13,"button",378),j("click",function(){E(e);let r=F();return D(r.addOrdersToStrategy())}),w(14,"Add"),_(),Ze(15,"hr"),_()}if(n&2){let e=F();v(),W("ngModel",e.ordersTextarea),v(3),V("ngForOf",e.orders_parsed),v(2),W("ngModel",e.orders_broker),v(4),W("ngModel",e.orders_broker)}}function qte(n,t){if(n&1&&(m(0,"option",189),w(1),_()),n&2){let e=t.$implicit;V("value",e),v(),J(" ",e," ")}}function jte(n,t){n&1&&(m(0,"span",387),w(1,"N"),_())}function Wte(n,t){n&1&&(m(0,"span",387),w(1,"N"),_())}function Ute(n,t){if(n&1){let e=fe();m(0,"tr")(1,"td")(2,"select",379),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.instru,r)||(s.instru=r),D(r)}),te(3,qte,2,2,"option",25),_()(),m(4,"td")(5,"input",380),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.expiry_date,r)||(s.expiry_date=r),D(r)}),_()(),m(6,"td")(7,"input",381),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.curr_qty,r)||(s.curr_qty=r),D(r)}),_()(),m(8,"td")(9,"input",382),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.curr_scrip,r)||(s.curr_scrip=r),D(r)}),_(),m(10,"span",383),w(11),_(),te(12,jte,2,0,"span",384),_(),m(13,"td")(14,"div",385),w(15),_()(),m(16,"td")(17,"input",386),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.new_scrip,r)||(s.new_scrip=r),D(r)}),_(),m(18,"span",383),w(19),_(),te(20,Wte,2,0,"span",384),_(),m(21,"td")(22,"div",385),w(23),_()(),m(24,"td")(25,"button",225),j("click",function(){let r=E(e).index,s=F();return D(s.movePlaceOrder(r,-1))}),w(26,"\u2191"),_(),m(27,"button",279),j("click",function(){let r=E(e).index,s=F();return D(s.movePlaceOrder(r,1))}),w(28,"\u2193"),_()(),m(29,"td")(30,"button",178),j("click",function(){let r=E(e).$implicit,s=F();return D(s.place_roll_orders(r,!0))}),w(31,"Place"),_()()()}if(n&2){let e=t.$implicit,i=F();v(2),W("ngModel",e.instru),v(),V("ngForOf",i.supportedInstru),v(2),W("ngModel",e.expiry_date),v(2),V("ngClass",Re(17,Cn,e.curr_qty<0,e.curr_qty>0)),W("ngModel",e.curr_qty),v(2),V("ngClass",Re(20,Cn,e.curr_scrip.includes("PE"),e.curr_scrip.includes("CE"))),W("ngModel",e.curr_scrip),v(),V("ngClass",Re(23,Cn,-e.curr_qty<0,-e.curr_qty>0)),v(),Q(-e.curr_qty),v(),V("ngIf",i.showOILimit(e.instru,e.curr_scrip)),v(3),Q(i.getOrderLtp(e,!1)),v(2),V("ngClass",Re(26,Cn,e.new_scrip.includes("PE"),e.new_scrip.includes("CE"))),W("ngModel",e.new_scrip),v(),V("ngClass",Re(29,Cn,e.curr_qty<0,e.curr_qty>0)),v(),Q(e.curr_qty),v(),V("ngIf",i.showOILimit(e.instru,e.new_scrip)),v(3),Q(i.getOrderLtp(e,!0))}}function zte(n,t){if(n&1&&(m(0,"option",189),w(1),_()),n&2){let e=t.$implicit;V("value",e),v(),J(" ",e," ")}}function Hte(n,t){if(n&1&&(m(0,"option",189),w(1),_()),n&2){let e=t.$implicit;V("value",e),v(),J(" ",e," ")}}function Yte(n,t){if(n&1&&(m(0,"option",189),w(1),_()),n&2){let e=t.$implicit;V("value",e),v(),J(" ",e," ")}}function Gte(n,t){if(n&1){let e=fe();m(0,"div",388)(1,"div",5)(2,"h2",6)(3,"button",389),w(4," Straddle Charts "),_()(),m(5,"div",390)(6,"div",17)(7,"div",18)(8,"select",72),U("ngModelChange",function(r){E(e);let s=F();return z(s.straddle1instru,r)||(s.straddle1instru=r),D(r)}),te(9,zte,2,2,"option",25),_(),m(10,"input",391),U("ngModelChange",function(r){E(e);let s=F();return z(s.straddle1expiryDate,r)||(s.straddle1expiryDate=r),D(r)}),_(),m(11,"input",392),U("ngModelChange",function(r){E(e);let s=F();return z(s.straddle1scrip,r)||(s.straddle1scrip=r),D(r)}),_(),m(12,"select",72),U("ngModelChange",function(r){E(e);let s=F();return z(s.straddle2instru,r)||(s.straddle2instru=r),D(r)}),te(13,Hte,2,2,"option",25),_(),m(14,"input",391),U("ngModelChange",function(r){E(e);let s=F();return z(s.straddle2expiryDate,r)||(s.straddle2expiryDate=r),D(r)}),_(),m(15,"input",392),U("ngModelChange",function(r){E(e);let s=F();return z(s.straddle2scrip,r)||(s.straddle2scrip=r),D(r)}),_(),m(16,"select",72),U("ngModelChange",function(r){E(e);let s=F();return z(s.straddle3instru,r)||(s.straddle3instru=r),D(r)}),te(17,Yte,2,2,"option",25),_(),m(18,"input",391),U("ngModelChange",function(r){E(e);let s=F();return z(s.straddle3expiryDate,r)||(s.straddle3expiryDate=r),D(r)}),_(),m(19,"input",392),U("ngModelChange",function(r){E(e);let s=F();return z(s.straddle3scrip,r)||(s.straddle3scrip=r),D(r)}),_()(),Ze(20,"div",296),_()()()()}if(n&2){let e=F();v(8),W("ngModel",e.straddle1instru),v(),V("ngForOf",e.supportedInstru),v(),W("ngModel",e.straddle1expiryDate),v(),W("ngModel",e.straddle1scrip),v(),W("ngModel",e.straddle2instru),v(),V("ngForOf",e.supportedInstru),v(),W("ngModel",e.straddle2expiryDate),v(),W("ngModel",e.straddle2scrip),v(),W("ngModel",e.straddle3instru),v(),V("ngForOf",e.supportedInstru),v(),W("ngModel",e.straddle3expiryDate),v(),W("ngModel",e.straddle3scrip)}}function Kte(n,t){n&1&&(m(0,"div",393)(1,"div",5)(2,"h2",6)(3,"button",394),w(4," Charts "),_()(),m(5,"div",395)(6,"div",17),Ze(7,"iframe",396)(8,"iframe",397),_()()()())}br.register(...rg,AN);var x5=(()=>{class n{appService;zerodhaService;mapService;websocketService;angelWS;chartService;chartingService;backtestService;supportedInstru=f.supportedInstru;s1Trades=null;s2Trades=null;s3Trades=null;s4Trades=null;s5Trades=null;s6Trades=null;s7Trades=null;s8Trades=null;prev_positions=[];currLoadNum=null;payOffData=null;curr_positions_trades=null;sl_trades=[];expiryDate=null;expiryDate2=null;margin=null;avail_margin;used_margin;breakevens=null;cePremium=0;pePremium=0;ceWeight=0;peWeight=0;ceLots=0;peLots=0;urlToFetch="";spot=null;rest_res=null;labels=[];pnl=[];zeroline=[];instru="NIFTY";stepValue=15;strikeStepValue=100;loadOIDistance=500;mean=0;variance=1;positionPopContent=[];showInlineOC=!0;showExtraOptions=!1;simulate_instru="BANKNIFTY";simulate_strategy=!1;simulateExpiryDate="2023-02-16";simulateStartDate="2023-02-16";simulateExpiryDate2="2023-02-16";simulateStartDate2="2023-02-16";simulateCurrDateObj=new Date;simulateTimeAdv;simulateTimeMins=5;simulateCurrHour=9;simulateCurrMins=15;simulateCurrDateTimeString="";show_t0=!1;payoff_overlay=!1;straddle_shiftCE_overlay=!1;straddle_shiftPE_overlay=!1;straddle_shiftQty_overlay;hide_closed=!0;hide_roll=!1;hide_roll3=!0;hide_extra=!1;hide_payoff=!1;hide_clipboard=!0;add_strangle_chart=!1;strangle_chart_simulate_tillend=!1;strangle_chart_ce;strangle_chart_pe;multi_t0=!1;multiT0Input="1,2";show_simulate_charts=!1;use_hypo_future=!1;hypo_future_strike=74.5;use_filter_expiry=!1;filter_expiry="";payoff_range=1e3;alerts=[];ordersTextarea="";orders_parsed=[];orders_broker="zerodha";ce_side_overlay=!1;pe_side_overlay=!1;num_overlays=1;overlay_strike;charts_expiry;currExpiry="";currBnfExpiry="";currFinniftyExpiry="";currMidcapExpiry="";currSensexExpiry="";currBankexExpiry="";currUSDINRExpiry="";selectedPnL=0;selectedMaxProfit=0;selectedMaxLoss=0;matchPositions=!1;oc_strikes;oc_strikes2;multi_oc_strikes1;multi_oc_strikes2;multi_oc_strikes3;multi_oc_strikes4;multi_oc_strikes5;multiOC_instru="NIFTY";expiryDate_multi1="2025-01-30";expiryDate_multi2="2025-02-06";expiryDate_multi3="2025-02-27";expiryDate_multi4="2025-03-27";expiryDate_multi5="2025-12-24";multiOC_higherRange;multiOC_lowerRange;bfly_monitor;bflyMonitorQty;ds_monitor;dsMonitorQty;oc_instru="NIFTY";strategyAlertPrice;strategyAlertText="";inlineOC_higherRange;inlineOC_lowerRange;inlineOC_qty=-1800;inlineOC_qty_fixed=!1;currentSold=0;strategyPnl=0;strategyPnl1=0;strategyAlertPrice1;strategyAlertText1="";strategyName1="";strategyPnl2=0;strategyAlertPrice2;strategyAlertText2="";strategyName2="";strategyPnl3=0;strategyAlertPrice3;strategyAlertText3="";strategyName3="";strategyPnl4=0;strategyAlertPrice4;strategyAlertText4="";strategyName4="";strategyPnl5=0;strategyAlertPrice5;strategyAlertText5="";strategyName5="";strategyPnl6=0;strategyAlertPrice6;strategyAlertText6="";strategyName6="";strategyPnl7=0;strategyAlertPrice7;strategyAlertText7="";strategyName7="";strategyPnl8=0;strategyAlertPrice8;strategyAlertText8="";strategyName8="";use_cf=!1;use_cf_strategies=[];use_tag=!0;use_tag_strategies=[];tagSearch=f.defaultTag;tagSearch_strategies=[];use_include_guid=!0;use_include_guid_strategies=[];use_exclude_guid=!0;use_exclude_guid_strategies=[];use_curr_expiry=!1;expand_single_charts=!0;show_news=!0;saveMTM1=!1;playAlertSound=!0;place_orders=[{instru:"BANKNIFTY",expiry_date:"2023-01-05",curr_qty:-200,curr_scrip:"",new_scrip:"37200CE"},{instru:"BANKNIFTY",expiry_date:"2023-01-05",curr_qty:-200,curr_scrip:"",new_scrip:""},{instru:"BANKNIFTY",expiry_date:"2023-01-05",curr_qty:-200,curr_scrip:"",new_scrip:""},{instru:"BANKNIFTY",expiry_date:"2023-01-05",curr_qty:-200,curr_scrip:"",new_scrip:""}];broker_auth="enctoken JSZVXPxDxfYE1BwATYBtropRu0k5DrWsRVWZREuEMB2OCz91S6Gsjd1FxNdHJ92Bi/rg6AQQbp6cahr2z1ADkJyo2rQdlZ/uAjItl/1W0bza7TTuye7BOg==";auto_execute=!1;auto_execute_rollin=!0;auto_execute_rollout=!0;automate_roll_secs=5;automate_slabs=4;automate_slab_qty=-1800;automate_sl1=30;automate_sl_increase=5;automate_time_1="12:00";automate_dist_1=500;automate_time_2="13:30";automate_dist_2=500;automate_time_3="14:30";automate_dist_3=500;automate_time_4="15:31";automate_dist_4=500;knife_orders=[{instru:"NIFTY",scrip:"20000CE",expiry_date:"2023-12-28",qty:100,status:"",order_price:null,ltp:null,low:null},{instru:"NIFTY",scrip:"19000CE",expiry_date:"2023-12-28",qty:100,status:"",order_price:null,ltp:null,low:null},{instru:"NIFTY",scrip:"18000CE",expiry_date:"2023-12-28",qty:50,status:"",order_price:null,ltp:null,low:null}];knife_perc=5;auto_adjust_knife=!1;ds_buy_exit;num_charts=20;call_start_strike;call_end_strike;put_start_strike;put_end_strike;charts_multiple=100;charts_instru="BANKNIFTY";chart_strikes_ce=[];chart_strikes_pe=[];spot_chart_instru="NIFTY";spot_chart_instru2="SENSEX";spot_fetch_interval;chart_prices_interval;chart_ce;chart_pe;showATPLine=!0;st_chart_radio="5min";st_chart_strike=0;chart_strikes_ce_0;chart_strikes_pe_0;simulate_expiries_arr_value;simulate_expiries_arr;simulate_expiries_arr_value2;simulate_expiries_arr2;includeGUIDs="";excludeGUIDs="";show_algo=!1;show_algoSS=!0;algoSimulated=!1;algoLog="";enableAlgo=!1;instruToTrade="";expiryDateToTrade=null;entryInterval=null;algoInterval=null;algoSSSLPerc=40;algoTimeToEnter="10:10";algoSSQty=-30;algoSSMaxSLTimes=2;algoSSTriggerDifference=1;algoSSIncludeGUIDs="";algoSSExcludeGUIDs="";algoSS_positions=null;algoSS_sl_orders=null;algoSS_positions_UI=[];algoSS_qtyStep=15;algo_pos=[];algo_mtm=[];mfRealTime=!1;stocksStrategyNum=f.stocksStrategyNum;lineChartLabels=[];lineChartType="line";lineChartData={labels:[],datasets:[]};lineChartOptions={};straddle1instru="USDINR";straddle1expiryDate=null;straddle1scrip=null;straddle2instru="USDINR";straddle2expiryDate=null;straddle2scrip=null;straddle3instru="USDINR";straddle3expiryDate=null;straddle3scrip=null;intradayWatch=[{scrip:"FUT",instru:"USDINR",expiry:"2020-11-13"},{scrip:"74CE",instru:"USDINR",expiry:"2020-11-13"},{scrip:"74PE",instru:"USDINR",expiry:"2020-11-13"},{scrip:"74.5CE",instru:"USDINR",expiry:"2020-11-13"},{scrip:"74.5PE",instru:"USDINR",expiry:"2020-11-13"}];chart;constructor(e,i,r,s,o,a,l,c){this.appService=e,this.zerodhaService=i,this.mapService=r,this.websocketService=s,this.angelWS=o,this.chartService=a,this.chartingService=l,this.backtestService=c,this.appService.payOffEvent$.subscribe(u=>{console.log("payOffEvent subcribe: ",u);let d=[];u instanceof Array?d=u:d.push(u),d.forEach(h=>{let p;if(h.scrip)p=h.scrip;else{let A=this.mapService.parseSymbol(h.symbol);p=A.strike+A.type}let g;h.price?g=h.price:g=h.ltp,console.log("Adding scrip to strategy: "+p),this.addPosition(h.qty,p,g,h.expiry)})}),this.appService.placeOrdersEvent$.subscribe(u=>{console.log("placeOrdersEvent subcribe: ",u),this.place_orders=[],u.forEach(d=>{this.place_orders.push({instru:d.instru,expiry_date:this.currExpiry,curr_qty:null,curr_scrip:"",new_scrip:d.strike})})}),this.appService.chartEvent$.subscribe(u=>{console.log("chartEvent subcribe: ",u);let d=this.mapService.parseSymbol(u.symbol),h=d.strike+d.type;console.log("Adding scrip to chart: "+h),this.addScripToChart(h,u.type),this.appService.stockChartEvent$.next({symbol:u.symbol,type:u.type,currdate:this.simulateCurrDateObj})}),f.websocketEvent$.subscribe(u=>{console.log("chart websocketEvent: ",u),u==="connected"&&(this.doStrategiesSubscriptions(),setTimeout(()=>{this.curr_positions_trades||this.reloadPayoffData(1),this.loadOptionChain(),this.loadSpotChart(),this.chartingService.createStockChart()},2e3),setTimeout(()=>{this.refreshOILimits()},4e3))}),f.miscEvent$.subscribe(u=>{console.log("chart component miscEvent: ",u),u==="ordersReceived"&&this.enableAlgo&&this.refreshAlgoSSPositions()})}test1(){this.chartingService.initSpotChart_simulated(this.simulate_instru,this.simulateCurrDateObj)}addBflyToStrategyBuilder(e){let i="CE";e.scrip.includes("PE")&&(i="PE");let r=this.mapService.getScripLTP(this.oc_instru,this.expiryDate,e.strike-this.strikeStepValue,i);this.addToStrategyBuilder(e.strike-this.strikeStepValue,i,r,-this.bflyMonitorQty/2),r=this.mapService.getScripLTP(this.oc_instru,this.expiryDate,e.strike,i),this.addToStrategyBuilder(e.strike,i,r,this.bflyMonitorQty),r=this.mapService.getScripLTP(this.oc_instru,this.expiryDate,e.strike+this.strikeStepValue,i),this.addToStrategyBuilder(e.strike+this.strikeStepValue,i,r,-this.bflyMonitorQty/2)}addDSToStrategyBuilder(e){let i="CE";e.scrip.includes("PE")&&(i="PE");let r=this.mapService.getScripLTP(this.oc_instru,this.expiryDate,e.strike,i);this.addToStrategyBuilder(e.strike,i,r,-this.dsMonitorQty),i==="CE"?(r=this.mapService.getScripLTP(this.oc_instru,this.expiryDate,e.strike+this.strikeStepValue,i),this.addToStrategyBuilder(e.strike+this.strikeStepValue,i,r,this.dsMonitorQty)):(r=this.mapService.getScripLTP(this.oc_instru,this.expiryDate,e.strike-this.strikeStepValue,i),this.addToStrategyBuilder(e.strike-this.strikeStepValue,i,r,this.dsMonitorQty))}addToStrategyBuilder(e,i,r,s=null){this.add_strangle_chart?(i==="CE"&&(this.strangle_chart_ce=e+i),i==="PE"&&(this.strangle_chart_pe=e+i)):(s||(s=this.inlineOC_qty),this.appService.payOffEvent$.next({scrip:e+i,ltp:r,qty:s}))}addSLLOrder(e,i,r){let s=new Date(this.expiryDate),o=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],a=("0"+s.getDate()).slice(-2),l=s.getMonth(),c=o[l],u=s.getFullYear(),d=a+c+u;this.sl_trades.push({qty:-this.inlineOC_qty,scrip:e+i,expiry:d,price:r,trigger_price:r,order_id:null})}movePlaceOrder(e,i){let r=e+i,s=this.place_orders.splice(e,1)[0];this.place_orders.splice(r,0,s)}getLTP(e,i,r=null){return r||(r=this.instru),this.mapService.getScripLTP(r,e,this.mapService.parseScrip(i).scrip,this.mapService.parseScrip(i).type)}getOHLC(e,i,r=null){return r||(r=this.instru),this.mapService.getScripOHLC(r,e,this.mapService.parseScrip(i).scrip,this.mapService.parseScrip(i).type)}reset_place_orders(){this.place_orders=[{instru:"BANKNIFTY",expiry_date:this.currExpiry,curr_qty:-300,curr_scrip:"",new_scrip:"37200CE"},{instru:"BANKNIFTY",expiry_date:this.currExpiry,curr_qty:-300,curr_scrip:"",new_scrip:""},{instru:"BANKNIFTY",expiry_date:this.currExpiry,curr_qty:-300,curr_scrip:"",new_scrip:""},{instru:"BANKNIFTY",expiry_date:this.currExpiry,curr_qty:-300,curr_scrip:"",new_scrip:""}]}add_empty_place_order(){this.place_orders.push({instru:"BANKNIFTY",expiry_date:this.currExpiry,curr_qty:null,curr_scrip:"",new_scrip:""})}addPlaceOrdersFromOC(){}addPlaceOrders(){this.place_orders=[],this.curr_positions_trades.forEach(e=>{e.addToOrders&&(this.place_orders.push({instru:this.instru,expiry_date:this.currExpiry,curr_qty:e.qty,curr_scrip:e.scrip,new_scrip:""}),e.addToOrders=!1)})}updateStrikePopover(e){this.positionPopContent=[],f.orders.forEach(i=>{i.scrip===e.scrip&&i.status==="COMPLETE"&&this.positionPopContent.push(""+i.qty+" "+i.tradedPrice)})}executeOrder(e,i){if(i==="currentstrike"){console.log(e,e.scrip);let r={instru:this.instru,expiry_date:e.expiry,curr_qty:e.roll_qty,curr_scrip:e.scrip,new_scrip:null};this.place_roll_orders(r,!0)}else if(i==="newstrike"){console.log(e,e.rollstrike_new);let r={instru:this.instru,expiry_date:e.expiry,curr_qty:-e.roll_qty,curr_scrip:e.rollstrike_new,new_scrip:null};this.place_roll_orders(r,!0)}}executeOrderSLL(e){console.log("SLL",e,e.scrip);let i={instru:this.instru,expiry_date:e.expiry,curr_qty:-e.qty,curr_scrip:e.scrip,new_scrip:null};this.place_roll_orders(i,!0,!0,e.price,e.order_id,"NRML",this.tagSearch,e.trigger_price)}cancelSLLOrder(e){this.zerodhaService.cancel_order(e.order_id).subscribe(i=>{console.log("cancelSLLOrder res: ",i),i.data&&(f.requestStatusEvent$.next({status:"info",message:"Order Cancelled"}),f.miscEvent$.next("refreshAll"))},i=>{console.log("cancelSLLOrder error",i);let r="";i.error&&i.error.message?r=i.error.message:r=i.message,f.requestStatusEvent$.next({status:"danger",message:"Order could not be cancelled: "+r})})}sortSLLPositions(){this.sl_trades.sort((e,i)=>{let r=e.scrip.slice(0,-2),s=i.scrip.slice(0,-2);return r===s&&e.scrip.includes("CE")&&i.scrip.includes("PE")?-1:r===s&&e.scrip.includes("PE")&&i.scrip.includes("CE")?1:this.compareForSorting(e.scrip,i.scrip)})}updateOCValuesForSLL(){this.oc_strikes&&this.oc_strikes.length>0&&this.oc_strikes.forEach(e=>{e.sllCE=this.isStrikeInSLL(e.strike+"CE"),e.sllPE=this.isStrikeInSLL(e.strike+"PE")})}isStrikeInSLL(e){let i="";if(this.sl_trades.length>0)for(let r=0;r<this.sl_trades.length;r++){let s=this.sl_trades[r];s.scrip===e&&(i+=s.price+",")}return i=i.replace(/,\s*$/,""),i===""&&(i=null),i}exitPositions(){confirm("Exit selected ?")&&this.curr_positions_trades.forEach(e=>{if(e.addToOrders){e.addToOrders=!1;let i=-e.qty,r=e.scrip,s={instru:this.instru,expiry:e.expiry,strike:this.mapService.parseScrip(r).scrip,optionType:this.mapService.parseScrip(r).type},o=this.mapService.getMapKey(s);console.log("placing exit order for ",o,i),this.zerodhaService.place_order(o,i,f.broker_auth).subscribe(a=>{console.log("exitPositions response",a),f.requestStatusEvent$.next({status:"secondary",message:"Placed "+r+" "+i})},a=>{console.log("exitPositions error",a);let l="Error (mostly timeout)";a.error&&a.error.message?l=a.error.message:l=a.message,f.requestStatusEvent$.next({status:"danger",message:r+" "+i+" "+l}),this.appService.playAudio("error")})}})}refreshOILimits(){this.nudgeOrder("NIFTY",this.mapService.getScripLTP(null,null,"NIFTY50",null)),this.nudgeOrder("BANKNIFTY",this.mapService.getScripLTP(null,null,"BANKNIFTY",null))}getOILimits(){return"OI Limits: NIFTY: "+f.nfCEOILimit+" "+f.nfPEOILimit+" , BANKNIFTY: "+f.bnfCEOILimit+" "+f.bnfPEOILimit}showOILimit(e,i){let r=i,s="";if(r.includes("CE")&&(s="CE"),r.includes("PE")&&(s="PE"),r=Number(r.slice(0,-2)),e==="NIFTY"&&f.nfCEOILimit&&f.nfPEOILimit){if(s==="CE")return r>f.nfCEOILimit;if(s==="PE")return r<f.nfPEOILimit}if(e==="BANKNIFTY"&&f.bnfCEOILimit&&f.bnfPEOILimit){if(s==="CE")return r>f.bnfCEOILimit;if(s==="PE")return r<f.bnfPEOILimit}return!1}nudgeOrder(e,i){let s=Math.round(i/100)*100+1e3+"CE",o={instru:e,expiry:this.currExpiry,strike:this.mapService.parseScrip(s).scrip,optionType:this.mapService.parseScrip(s).type},a=this.mapService.getMapKey(o);console.log("nudge order for ",a),this.zerodhaService.nudge_order(a,f.broker_auth).subscribe(l=>{if(console.log("nudgeOrder response",l,l.data[0][0]),l.data[0]&&l.data[0][0]&&l.data[0][0].message){let u=l.data[0][0].message.slice(-14);u=u.slice(0,-1);let d=u.split("-");e==="NIFTY"&&(f.nfPEOILimit=Number(d[0].trim()),f.nfCEOILimit=Number(d[1].trim())),e==="BANKNIFTY"&&(f.bnfPEOILimit=Number(d[0].trim()),f.bnfCEOILimit=Number(d[1].trim()))}else f.nfPEOILimit=null,f.nfCEOILimit=null,f.bnfPEOILimit=null,f.bnfCEOILimit=null},l=>{console.log("nudgeOrder error",l);let c="Error (mostly timeout)";l.error&&l.error.message?c=l.error.message:c=l.message})}getBflyMonitorQty(){let e=-1e3;return this.oc_instru==="NIFTY"?e=-1200:this.oc_instru==="BANKNIFTY"?e=-450:this.oc_instru==="FINNIFTY"?e=-1040:this.oc_instru==="MIDCPNIFTY"?e=-1950:this.oc_instru==="SENSEX"||this.oc_instru==="BANKEX"?e=-400:this.oc_instru==="USDINR"&&(e=-1e3),e}getDSMonitorQty(){let e=-1e3;return this.oc_instru==="NIFTY"?e=-500:this.oc_instru==="BANKNIFTY"?e=-210:this.oc_instru==="FINNIFTY"?e=-520:this.oc_instru==="MIDCPNIFTY"?e=-1050:this.oc_instru==="SENSEX"||this.oc_instru==="BANKEX"?e=-150:this.oc_instru==="USDINR"&&(e=-1e3),e}getSpotValue(){let e="";return this.oc_instru==="NIFTY"?e="NIFTY50":this.oc_instru==="BANKNIFTY"?e="BANKNIFTY":this.oc_instru==="FINNIFTY"?e="FINNIFTY":this.oc_instru==="MIDCPNIFTY"?e="MIDCPNIFTY":this.oc_instru==="SENSEX"?e="SENSEX":this.oc_instru==="BANKEX"?e="BANKEX":this.oc_instru==="USDINR"&&(e="USDINR"),this.mapService.getScripLTP(null,null,e,null)}loadMultiOptionChain(){this.multiOC_instru?(this.oc_instru=this.multiOC_instru,this.chartService.processMultiOCRequest(this.multiOC_instru,this.expiryDate_multi1,this.expiryDate_multi2,this.expiryDate_multi3,this.expiryDate_multi4,this.expiryDate_multi5)):console.log("No data to load")}multiOCRangeUpdate(){let e=null,i=null;this.multiOC_higherRange&&this.multiOC_higherRange!=""&&(e=this.multiOC_higherRange),this.multiOC_lowerRange&&this.multiOC_lowerRange!=""&&(i=this.multiOC_lowerRange),this.chartService.updateMultiOCRange(!0,this.oc_instru,e,i,this.expiryDate_multi1,this.expiryDate_multi2,this.expiryDate_multi3,this.expiryDate_multi4,this.expiryDate_multi5)}inlineOCRangeUpdate(){let e=null,i=null;this.inlineOC_higherRange&&this.inlineOC_higherRange!=""&&(e=this.inlineOC_higherRange),this.inlineOC_lowerRange&&this.inlineOC_lowerRange!=""&&(i=this.inlineOC_lowerRange),this.chartService.updateOCRange(!0,e,i),(this.simulate_strategy||this.expiryDate2)&&this.chartService.updateOCRange2()}inlineOCResendSub(){this.chartService.updateOCRange(!0)}rollStrikeKeyUp(e,i){console.log(e),e.key==="ArrowUp"?this.changeRollStrike(this.strikeStepValue,i):e.key==="ArrowDown"&&this.changeRollStrike(-this.strikeStepValue,i)}changeRollStrike(e,i){let r=i.rollstrike_new,s="";r.includes("CE")&&(s="CE"),r.includes("PE")&&(s="PE"),r=Number(r.slice(0,-2));let o=r+e+s;i.rollstrike_new=o}isRollStrikeITM(e){let i=e.rollstrike_new,r=Number(i.slice(0,-2)),s=Number(e.scrip.slice(0,-2));return!!(i.includes("CE")&&r<=s||i.includes("PE")&&r>=s)}checkAlerts(){this.curr_positions_trades&&this.curr_positions_trades.forEach(e=>{e.alertPrice&&this.getLTP(e.expiry,e.scrip)>e.alertPrice?(this.playAlertSound&&this.appService.playAudio("success"),e.alertStatus="Alert"):e.alertStatus=""}),this.strategyAlertPrice&&this.strategyAlertPrice!=""&&this.currentSold>=Number(this.strategyAlertPrice)?(this.strategyAlertText="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText="",this.strategyAlertPrice1&&this.strategyAlertPrice1!=""&&this.getStrategyPnL(1)<=Number(this.strategyAlertPrice1)?(this.strategyAlertText1="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText1="",this.strategyAlertPrice2&&this.strategyAlertPrice2!=""&&this.getStrategyPnL(2)<=Number(this.strategyAlertPrice2)?(this.strategyAlertText2="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText2="",this.strategyAlertPrice3&&this.strategyAlertPrice3!=""&&this.getStrategyPnL(3)<=Number(this.strategyAlertPrice3)?(this.strategyAlertText3="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText3="",this.strategyAlertPrice4&&this.strategyAlertPrice4!=""&&this.getStrategyPnL(4)<=Number(this.strategyAlertPrice4)?(this.strategyAlertText4="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText4="",this.strategyAlertPrice5&&this.strategyAlertPrice5!=""&&this.getStrategyPnL(5)<=Number(this.strategyAlertPrice5)?(this.strategyAlertText5="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText5="",this.strategyAlertPrice6&&this.strategyAlertPrice6!=""&&this.getStrategyPnL(6)<=Number(this.strategyAlertPrice6)?(this.strategyAlertText6="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText6="",this.strategyAlertPrice7&&this.strategyAlertPrice7!=""&&this.getStrategyPnL(7)<=Number(this.strategyAlertPrice7)?(this.strategyAlertText7="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText7="",this.strategyAlertPrice8&&this.strategyAlertPrice8!=""&&this.getStrategyPnL(8)<=Number(this.strategyAlertPrice8)?(this.strategyAlertText8="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText8=""}update_chart_strike(e,i,r=!1){i==="CE"?this.chart_ce=e:i==="PE"&&(this.chart_pe=e),console.log("update_chart_strike",this.chart_ce,this.chart_pe),r?(this.chartingService.updateInstruExpiry(this.instru,this.expiryDate),this.chartingService.fetchChartData(e,!1),setTimeout(()=>{console.log("loading chart",e,i),this.chartingService.updateSingleChart(e,i,!0,this.expand_single_charts)},1e3)):this.chartingService.updateSingleChart(e,i,!0,this.expand_single_charts)}update_strangle_chart(){this.simulate_strategy?this.chartingService.initStrangleChart_simulated(this.simulate_instru,this.simulateCurrDateObj,this.strangle_chart_ce,this.strangle_chart_pe,this.strangle_chart_simulate_tillend,this.simulateCurrDateObj.getHours(),this.simulateCurrDateObj.getMinutes()):this.chartingService.fetchStrangleStrikesData(this.strangle_chart_ce,this.strangle_chart_pe,!0)}loadSpotChart(){this.spot_fetch_interval&&clearInterval(this.spot_fetch_interval),this.chart_prices_interval&&clearInterval(this.chart_prices_interval),this.chartingService.initSpotChart(this.spot_chart_instru,this.expand_single_charts),this.chartingService.initSpotChart2(this.spot_chart_instru2,this.expand_single_charts),this.spot_fetch_interval=setInterval(()=>{this.chartingService.fetchSpotChartData(),this.chartingService.fetchSpotChartData2()},6e4),this.chart_prices_interval=setInterval(()=>{this.chartingService.plotCurrentPrices()},1e3)}update_charts_inputs(){let e;this.charts_instru==="NIFTY"?(this.charts_multiple=50,e=450,f.isSimulatedStrategy&&(e=300)):this.charts_instru==="BANKNIFTY"?(this.charts_multiple=100,e=1400,f.isSimulatedStrategy&&(e=900)):this.charts_instru==="FINNIFTY"?(this.charts_multiple=50,e=450,f.isSimulatedStrategy&&(e=300)):this.charts_instru==="MIDCPNIFTY"?(this.charts_multiple=25,e=450,f.isSimulatedStrategy&&(e=300)):this.charts_instru==="SENSEX"?(this.charts_multiple=100,e=1400,f.isSimulatedStrategy&&(e=900)):this.charts_instru==="BANKEX"?(this.charts_multiple=100,e=1400,f.isSimulatedStrategy&&(e=900)):this.charts_instru==="USDINR"&&(this.charts_multiple=.25,e=1,f.isSimulatedStrategy&&(e=.5));let i=this.mapService.getScripLTP(null,null,this.charts_instru,null),r=Math.round(i/this.charts_multiple)*this.charts_multiple;this.call_start_strike=r,this.call_end_strike=r+e,this.put_start_strike=r-e,this.put_end_strike=r}initSTCharts(){this.chartingService.initForCallsPuts_simulated_0(this.simulate_instru,this.simulateExpiryDate,this.st_chart_radio,this.st_chart_strike)}initSTCharts1(){this.chartingService.initForCallsPuts_simulated_1(this.simulate_instru,this.simulateExpiryDate,!0,this.st_chart_radio,this.st_chart_strike)}backtestExpiryStrangles(){this.backtestService.expiryStrangles(this.simulate_instru,this.simulateExpiryDate)}backtestStrangleSL_Reentry(){this.backtestService.perDayDriver(this.simulate_instru,this.simulateExpiryDate,"strangle_SL_reentry")}backtestLongFly(){this.backtestService.perDayDriver(this.simulate_instru,this.simulateExpiryDate,"long_fly")}getChartLabel(e){return e in f.st_simulate_charts?f.st_simulate_charts[e]:"None"}getChartValues(e){return e in f.st_simulate_charts_values?f.st_simulate_charts_values[e]:"None"}initCharts(){if(f.isSimulatedStrategy){this.chart_strikes_ce=[],this.chart_strikes_pe=[];for(let e=this.call_end_strike;e>=this.call_start_strike;e-=this.charts_multiple)this.chart_strikes_ce.push(e+"CE");for(let e=this.put_end_strike;e>=this.put_start_strike;e-=this.charts_multiple)this.chart_strikes_pe.push(e+"PE");this.chartingService.initSpotChart_simulated(this.charts_instru,this.simulateCurrDateObj),this.chartingService.init_opt_charts_simulated(this.charts_instru,this.call_start_strike,this.call_end_strike,this.put_start_strike,this.put_end_strike,this.charts_multiple,this.simulateCurrDateObj)}else{let e=this.charts_expiry;this.chart_strikes_ce=[],this.chart_strikes_pe=[];let i=[];for(let r=this.call_end_strike;r>=this.call_start_strike;r-=this.charts_multiple){let s=this.mapService.getSubscriptionObject(r+"CE",this.charts_instru,e);i.push(s),this.chart_strikes_ce.push(r+"CE")}for(let r=this.put_end_strike;r>=this.put_start_strike;r-=this.charts_multiple){let s=this.mapService.getSubscriptionObject(r+"PE",this.charts_instru,e);i.push(s),this.chart_strikes_pe.push(r+"PE")}console.log("options charts feed",i),this.appService.sendSubscriptions(i),this.chartingService.init_opt_charts(this.charts_instru,this.call_start_strike,this.call_end_strike,this.put_start_strike,this.put_end_strike,this.charts_multiple,e)}}onSpotChartInstruChange(e){this.chartingService.initSpotChart(this.spot_chart_instru,this.expand_single_charts)}onSpotChartInstruChange2(e){this.chartingService.initSpotChart2(this.spot_chart_instru2,this.expand_single_charts)}onChartInstruChange(e){this.update_charts_inputs()}onSimulateInstruChange(e){this.simulate_expiries_arr=[],this.simulate_instru==="NIFTY"&&(f.niftyExpiries.forEach(i=>{let r=""+i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2);this.simulate_expiries_arr.push(r)}),this.simulate_expiries_arr.reverse()),this.simulate_instru==="BANKNIFTY"&&(f.bnfExpiries.forEach(i=>{let r=""+i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2);this.simulate_expiries_arr.push(r)}),this.simulate_expiries_arr.reverse()),this.simulate_instru==="FINNIFTY"&&(f.finniftyExpiries.forEach(i=>{let r=""+i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2);this.simulate_expiries_arr.push(r)}),this.simulate_expiries_arr.reverse()),this.simulate_instru==="MIDCPNIFTY"&&(f.midcapExpiries.forEach(i=>{let r=""+i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2);this.simulate_expiries_arr.push(r)}),this.simulate_expiries_arr.reverse()),this.simulate_instru==="SENSEX"&&(f.sensexExpiries.forEach(i=>{let r=""+i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2);this.simulate_expiries_arr.push(r)}),this.simulate_expiries_arr.reverse()),this.simulate_instru==="BANKEX"&&(f.bankexExpiries.forEach(i=>{let r=""+i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2);this.simulate_expiries_arr.push(r)}),this.simulate_expiries_arr.reverse()),this.simulate_expiries_arr2=[...this.simulate_expiries_arr]}onSimulateExpiryChange(e){this.simulateExpiryDate=this.simulate_expiries_arr_value,this.simulateStartDate=this.simulate_expiries_arr_value}onSimulateExpiryChange2(e){this.simulateExpiryDate2=this.simulate_expiries_arr_value2,this.simulateStartDate2=this.simulate_expiries_arr_value2}isChartStrikeInCurrStrategy(e){return this.chartService.isChartStrikeInCurrStrategy(e)}expandSingleChartsChange(e){this.chartingService.resizeSingleCharts(this.expand_single_charts)}showATPLineChange(e){console.log("showATPLineChange",this.showATPLine),f.showATPLine=this.showATPLine}ngOnInit(){this.loadAlgoSSParams(),this.currExpiry=this.mapService.findCurrExpiryForDisplay(f.niftyExpiries),this.currBnfExpiry=this.mapService.findCurrExpiryForDisplay(f.bnfExpiries),this.currFinniftyExpiry=this.mapService.findCurrExpiryForDisplay(f.finniftyExpiries),this.currMidcapExpiry=this.mapService.findCurrExpiryForDisplay(f.midcapExpiries),this.currSensexExpiry=this.mapService.findCurrExpiryForDisplay(f.sensexExpiries),this.currBankexExpiry=this.mapService.findCurrExpiryForDisplay(f.bankexExpiries),this.currUSDINRExpiry=this.mapService.findCurrExpiryForDisplay(f.usdinrExpiries),this.charts_expiry=this.currExpiry,this.reset_place_orders(),this.onSimulateInstruChange(null);for(let c=1;c<=f.numStrategies;c++)this.use_tag_strategies[c]=!0,this.use_include_guid_strategies[c]=!0,this.use_exclude_guid_strategies[c]=!0,this.tagSearch_strategies[c]=f.defaultTag;this.alerts=[];for(let c=0;c<f.numAlerts;c+=1)this.alerts.push({selected:!1,scrip1:"40000CE",scrip2:"",instru:"BANKNIFTY",expiry:this.currExpiry,compare:">",price:20,status:""});let e=setInterval(()=>{this.alerts&&this.alerts.forEach(c=>{if(c.status="",c.selected){let u=null;if(c.scrip1){if(u=this.mapService.getScripLTP(c.instru,c.expiry,this.mapService.parseScrip(c.scrip1).scrip,this.mapService.parseScrip(c.scrip1).type),c.scrip2){let h=this.mapService.getScripLTP(c.instru,c.expiry,this.mapService.parseScrip(c.scrip2).scrip,this.mapService.parseScrip(c.scrip2).type);u+=h}}else u=this.mapService.getScripLTP(null,null,c.instru,null);c.compare===">"&&(u>c.price?(c.status="Alert",this.playAlertSound&&this.appService.playAudio("success")):c.status=""),c.compare==="<"&&(u<c.price?(c.status="Alert",this.playAlertSound&&this.appService.playAudio("success")):c.status="")}}),this.checkAlerts(),this.getStrategyPnL(),this.getStrategyPnL(1),this.getStrategyPnL(2),this.getStrategyPnL(3),this.getStrategyPnL(4),this.getStrategyPnL(5),this.getStrategyPnL(6),this.getStrategyPnL(7),this.getStrategyPnL(8)},1e3),i=setInterval(()=>{this.hide_payoff||this.updateChartData(this.payOffData),this.getCEPEWeightage(),this.updateMFRealTime()},5e3),r=setInterval(()=>{this.hide_payoff||this.getPayoff()},6e4),s=setInterval(()=>{this.chartService.updateSpotStrike(),this.oc_strikes=this.chartService.updateOCValues(),this.simulate_strategy&&this.simulateExpiryDate2&&(this.oc_strikes2=this.chartService.updateOCValues2()),this.expiryDate2&&(this.oc_strikes2=this.chartService.updateOCValues2()),this.multi_oc_strikes1=this.chartService.updateMultiOCValues1(this.expiryDate_multi1),this.multi_oc_strikes1=this.chartService.updateMultiOCValues2(this.expiryDate_multi2),this.multi_oc_strikes1=this.chartService.updateMultiOCValues3(this.expiryDate_multi3),this.multi_oc_strikes1=this.chartService.updateMultiOCValues4(this.expiryDate_multi4),this.multi_oc_strikes1=this.chartService.updateMultiOCValues5(this.expiryDate_multi5),this.simulate_strategy&&this.simulateExpiryDate2&&(this.oc_strikes2=this.chartService.updateOCValues2()),this.expiryDate2&&(this.oc_strikes2=this.chartService.updateOCValues2()),this.expiryDate_multi1&&(this.multi_oc_strikes1=this.chartService.updateMultiOCValues1(this.expiryDate_multi1),this.multi_oc_strikes2=this.chartService.updateMultiOCValues2(this.expiryDate_multi2),this.multi_oc_strikes3=this.chartService.updateMultiOCValues3(this.expiryDate_multi3),this.multi_oc_strikes4=this.chartService.updateMultiOCValues4(this.expiryDate_multi4),this.multi_oc_strikes5=this.chartService.updateMultiOCValues5(this.expiryDate_multi5))},1e3),o=setInterval(()=>{this.bfly_monitor=this.chartService.updateBflyMonitorStrikes(this.bflyMonitorQty),this.ds_monitor=this.chartService.updateDSMonitorStrikes(this.dsMonitorQty)},1e4),a=setInterval(()=>{this.auto_adjust_knife&&(f.miscEvent$.next("refreshAll"),setTimeout(()=>{this.adjustKnifeOrders()},4e3))},12e4);for(let c=1;c<=f.numStrategies;c++){let u=JSON.parse(localStorage.getItem("curr_positions"+c));u&&u.trades&&(c===1&&(this.s1Trades=u),c===2&&(this.s2Trades=u),c===3&&(this.s3Trades=u),c===4&&(this.s4Trades=u),c===5&&(this.s5Trades=u),c===6&&(this.s6Trades=u),c===7&&(this.s7Trades=u),c===8&&(this.s8Trades=u,f.stockPositions=u))}let l=setInterval(()=>{this.isMarketClosed()?clearInterval(l):this.saveMTM1&&this.saveMTMToLocal()},3e4)}ngAfterViewInit(){setTimeout(()=>{})}updateMFRealTime(){let e=this.mapService.getLtp("NIFTY50");f.mfInvested.forEach(i=>{if(i[0]!=="NIFTYBEES")if(this.mfRealTime){let r=e*Number(i[1]);r=Math.round((r+1e-5)*1e4)/1e4,this.mapService.setLtp(String(i[0]),r)}else this.mapService.setLtp(String(i[0]),Number(i[2]))})}ordersTextareaUpdated(e){this.orders_broker==="upstox"?this.parseUpstoxOrders():this.orders_broker==="zerodha"&&this.parseZerodhaOrders()}posQtyUpdated(e,i){i.roll_qty=this.appService.getQtyUptoFreezeLimit(this.instru,i.qty,this.inlineOC_qty)}parseZ1(){this.orders_parsed=[];let e=this.ordersTextarea.split(`
`);console.log(e);for(let i=0;i<e.length;i++){let r=e[i];r=r.replace(`
`,"	");let s=r.split("	");console.log(s);let o=new kd;if(o.instru="BANKNIFTY",o.scrip=s[1].slice(-7),o.qty=Number(s[3]),o.entry=Number(s[4].replace(",",""))/o.qty,o.exit=Number(s[5].replace(",",""))/o.qty,o.strategy=this.currLoadNum,o.qty!==0&&this.orders_parsed.push(o),s[10]!==""){let a=new kd;a.instru="BANKNIFTY",a.scrip=s[1].slice(-7),a.qty=Number(s[9]),a.entry=Number(s[11].replace(",",""))/a.qty,a.exit=0,s[10]=="sell"&&(a.qty=-a.qty),a.strategy=this.currLoadNum,this.orders_parsed.push(a)}}console.log(this.orders_parsed)}parseZerodhaOrders(){this.orders_parsed=[];let e=this.ordersTextarea.split(`COMPLETE
`);if(console.log(e),e)for(let i=0;i<e.length;i++){let r=e[i];r=r.replace(`
`,"	");let s=r.split("	"),o=new Pd;o.instru=s[2].split(" ")[0],isNaN(parseInt(s[2].split(" ")[4]))?o.scrip=s[2].split(" ")[2]+s[2].split(" ")[3]:o.scrip=s[2].split(" ")[4]+s[2].split(" ")[5],o.qty=Number(s[4].split(" ")[0]),s[1]==="SELL"&&(o.qty=-o.qty),o.price=Number(s[5].replace(",","")),o.strategy=this.currLoadNum,this.orders_parsed.push(o)}console.log(this.orders_parsed)}parseUpstoxOrders(){this.orders_parsed=[];let e=this.ordersTextarea.split(`
	
`);if(e)for(let i=0;i<e.length;i++){let s=e[i].split(`
`);console.log(s);let o=new Pd;o.instru=s[0].split(" ")[0],o.expiry=s[1].split(" ")[1],o.scrip=s[0].split(" ")[1];let a={instru:o.instru,expiry:o.expiry,strike:this.mapService.parseScrip(o.scrip).scrip,optionType:this.mapService.parseScrip(o.scrip).type};o.symbol=this.mapService.getMapKey(a);let l=s[3].split("	");o.qty=Number(l[3].split("/")[0]),l[2]==="Sell"&&(o.qty=-o.qty),o.price=Number(l[7]),o.strategy=this.currLoadNum,this.orders_parsed.push(o)}console.log(this.orders_parsed)}addOrdersToStrategy(){for(let e=0;e<this.orders_parsed.length;e++)this.addPosition(this.orders_parsed[e].qty,this.orders_parsed[e].scrip,this.orders_parsed[e].price)}exportToCSV(e){let i="Strategy_"+e+"_"+this.getDateInFormat()+".csv";console.log("exporting: ",i);let r=JSON.parse(localStorage.getItem("curr_positions"+e));if(r&&r.trades){let s=r.instru,o=r.expiry,a=r.trades;console.log("exporting:",s,o,a);let l="";if(l+=s+","+o+`\r
`,a.forEach(h=>{let p="";p+=h.qty+","+h.scrip+","+h.expiry+","+h.entry+","+h.exit+","+h.entryDateTime+","+h.exitDateTime,l+=p+`\r
`}),this.enableAlgo){l+=`END OF DATA\r
`;let h=new Date,p=""+h.getFullYear()+"-"+("0"+(h.getMonth()+1)).slice(-2)+"-"+("0"+h.getDate()).slice(-2);JSON.parse(localStorage.getItem("algo_mtm_"+p)).forEach(A=>{let y="";y+=A[0]+","+A[1],l+=y+`\r
`}),l+=`END OF MTM\r
`,l+=this.algoLog+`\r
`}else if(e===1){l+=`END OF DATA\r
`;let h=new Date,p=""+h.getFullYear()+"-"+("0"+(h.getMonth()+1)).slice(-2)+"-"+("0"+h.getDate()).slice(-2),g=JSON.parse(localStorage.getItem("mtm_1_"+p));g&&(g.forEach(A=>{let y="";y+=A[0]+","+A[1],l+=y+`\r
`}),l+=`END OF MTM\r
`,l+=this.algoLog+`\r
`)}let c=new Blob([l],{type:"application/x-msdownload"}),u=URL.createObjectURL(c),d=document.createElement("a");d.href=u,d.target="_blank",document.body.appendChild(d),d.download=i,d.click(),d.parentNode.removeChild(d)}}getDateInFormat(){let e=new Date,i=e.getDate(),r=e.getMonth()+1,s=e.getFullYear(),o=e.getHours(),a=e.getMinutes(),l=e.getSeconds();return""+(i<=9?"0"+i:i)+(r<=9?"0"+r:r)+s+"_"+(o<=9?"0"+o:o)+(a<=9?"0"+a:a)+(l<=9?"0"+l:l)}fetchLastOI(){let e=this.mapService.getScripLTP(null,null,this.instru,null),i=Math.round(e/this.strikeStepValue)*this.strikeStepValue,r=this.appService.getLastWorkingDay(new Date),s=""+r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+("0"+r.getDate()).slice(-2)+"T15:29:00+0530",o=0;for(let a=i-this.loadOIDistance;a<=i+this.loadOIDistance;a+=this.strikeStepValue)setTimeout(()=>{let l=this.chartService.fetchChartData(a+"CE",this.instru,this.expiryDate).subscribe(u=>{if(u.data.candles){let d=u.data.candles;d.length===0&&console.log("ZERO CANDLES FOR ",a+"CE"),this.updateLastDayOI(a+"CE",d,s)}},u=>{console.log("zerodha fetch chart error",u)}),c=this.chartService.fetchChartData(a+"PE",this.instru,this.expiryDate).subscribe(u=>{if(u.data.candles){let d=u.data.candles;d.length===0&&console.log("ZERO CANDLES FOR ",a+"PE"),this.updateLastDayOI(a+"PE",d,s)}},u=>{console.log("zerodha fetch chart error",u)})},o*1e3),o++}updateLastDayOI(e,i,r){if(i){let s=i.find(o=>o[0]===r);if(s){let o=s[6];this.mapService.setLastDayOI(this.instru,this.expiryDate,this.mapService.parseScrip(e).scrip,this.mapService.parseScrip(e).type,o)}}}uploadExpiryFile(e){let i=e.target.files[0],r=new FileReader;r.readAsText(i),r.onload=s=>{let o=String(r.result);this.loadExpiryFile(o)}}loadExpiryFile(e){let r=e.split(/\r|\n|\r/).filter(function(c){return c!==""}),s=r[0].split(",");for(let c=1;c<r.length;c++){let u=r[c].split(","),d=u[0];d=d.replace("NIFTY FIN SERVICE","FINNIFTY"),d=d.replace("NIFTY MIDCAP SELECT (MIDCPNIFTY)","MIDCPNIFTY"),d=d.replace("BSE INDEX BANKEX","BANKEX"),d=d.replace("WK","");let h={};h=Ue.simulateData[d],h||(h={}),h[u[1]]=Number(u[5]),Ue.simulateData[d]=h;let p=[];p=Ue.stockChartData[d],p||(p=[]);let g=u[1].split(" "),A=g[0].split("-"),y=g[1].split(":"),b=new Date(Number(A[2]),Number(A[1])-1,Number(A[0]),Number(y[0]),Number(y[1]),0).getTime();p.push([b,Number(u[2]),Number(u[3]),Number(u[4]),Number(u[5]),Number(u[6])]),Ue.stockChartData[d]=p}console.log("simulateData",Ue.simulateData),console.log("stockChartData",Ue.stockChartData),Ue.simulateData&&(f.isSimulatedStrategy=!0),this.simulateCurrDateObj=new Date(this.simulateStartDate),this.simulateCurrDateObj.setHours(this.simulateCurrHour),this.simulateCurrDateObj.setMinutes(this.simulateCurrMins),f.simulateCurrDateObj=this.simulateCurrDateObj;let o=""+("0"+this.simulateCurrDateObj.getDate()).slice(-2)+"-"+("0"+(this.simulateCurrDateObj.getMonth()+1)).slice(-2)+"-"+this.simulateCurrDateObj.getFullYear();this.simulateCurrDateTimeString=o+" "+("0"+this.simulateCurrDateObj.getHours()).slice(-2)+":"+("0"+this.simulateCurrDateObj.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(this.simulate_instru,this.simulateCurrDateTimeString,this.simulateExpiryDate);let a=null,l=null;if(this.simulate_instru==="NIFTY"){let c=this.mapService.getScripLTP(null,null,"NIFTY50",null),u=Math.round(c/50)*50;a=u+1500,l=u-1500}this.loadOptionChain(this.simulate_instru,this.simulateExpiryDate,a,l)}loadSimulatedNextMins(e=null){if((this.simulateTimeAdv==="add"||e&&e>0)&&(console.log("adding next",e),e?this.simulateCurrDateObj.setMinutes(this.simulateCurrDateObj.getMinutes()+e):this.simulateCurrDateObj.setMinutes(this.simulateCurrDateObj.getMinutes()+Number(this.simulateTimeMins)),this.simulateCurrDateObj.getHours()===15&&this.simulateCurrDateObj.getMinutes()>30||this.simulateCurrDateObj.getHours()>15)){let r=new Date(this.simulateCurrDateObj);r.setHours(15),r.setMinutes(30);let s=this.simulateCurrDateObj.getTime()-r.getTime(),o=new Date(this.simulateCurrDateObj);o.setDate(o.getDate()+1),o.setHours(9),o.setMinutes(15),o.setMilliseconds(o.getMilliseconds()+s),this.simulateCurrDateObj=new Date(o)}if((this.simulateTimeAdv==="subtract"||e&&e<0)&&(console.log("subtract next",e),e?(console.log("mins",this.simulateCurrDateObj.getMinutes()),this.simulateCurrDateObj.setMinutes(this.simulateCurrDateObj.getMinutes()+e),console.log("mins2",this.simulateCurrDateObj.getMinutes())):this.simulateCurrDateObj.setMinutes(this.simulateCurrDateObj.getMinutes()-Number(this.simulateTimeMins)),this.simulateCurrDateObj.getHours()===9&&this.simulateCurrDateObj.getMinutes()<15||this.simulateCurrDateObj.getHours()<9)){let r=new Date(this.simulateCurrDateObj);r.setHours(9),r.setMinutes(15);let s=r.getTime()-this.simulateCurrDateObj.getTime(),o=new Date(this.simulateCurrDateObj);o.setDate(o.getDate()-1),o.setHours(15),o.setMinutes(30),o.setMilliseconds(o.getMilliseconds()-s),this.simulateCurrDateObj=new Date(o)}f.simulateCurrDateObj=this.simulateCurrDateObj;let i=""+("0"+this.simulateCurrDateObj.getDate()).slice(-2)+"-"+("0"+(this.simulateCurrDateObj.getMonth()+1)).slice(-2)+"-"+this.simulateCurrDateObj.getFullYear();this.simulateCurrDateTimeString=i+" "+("0"+this.simulateCurrDateObj.getHours()).slice(-2)+":"+("0"+this.simulateCurrDateObj.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(this.simulate_instru,this.simulateCurrDateTimeString,this.simulateExpiryDate)}loadSimulatedOCForTime(e,i,r){let s=i;console.log("loadSimulatedOCForTime",s);for(let[o,a]of Object.entries(Ue.simulateData))if(o===e||o.startsWith(e)&&(o.endsWith("CE")||o.endsWith("PE")))if(o===e){let l=e;e==="NIFTY"&&(l="NIFTY50"),e==="USDINR"&&(l="USDINR"),this.mapService.setLtp(l,a[s])}else{let l=o;l=l.replace(e,""),l=l.replace("WK","");let c={instru:e,expiry:r,strike:this.mapService.parseScrip(l).scrip,optionType:this.mapService.parseScrip(l).type},u=this.mapService.getMapKey(c),d=a[s];this.mapService.setLtp(u,d);let h={instru:e,expiry:this.simulateExpiryDate2,strike:this.mapService.parseScrip(l).scrip,optionType:this.mapService.parseScrip(l).type},p=this.mapService.getMapKey(h);if(Ue.simulateData2[o]){let g=Ue.simulateData2[o][s];this.mapService.setLtp(p,g)}}this.addScripToChart(this.simulate_instru,null),this.getPayoff(),console.log("ltpMap",this.mapService.ltpMap)}getLtpForMultiExpiry2(e){return this.multi_oc_strikes2&&this.multi_oc_strikes2[e]?[this.multi_oc_strikes2[e].ltpCE,this.multi_oc_strikes2[e].ltpPE]:null}getLtpForMultiExpiry3(e){return this.multi_oc_strikes3&&this.multi_oc_strikes3[e]?[this.multi_oc_strikes3[e].ltpCE,this.multi_oc_strikes3[e].ltpPE]:null}getLtpForMultiExpiry4(e){return this.multi_oc_strikes4&&this.multi_oc_strikes4[e]?[this.multi_oc_strikes4[e].ltpCE,this.multi_oc_strikes4[e].ltpPE]:null}getLtpForMultiExpiry5(e){return this.multi_oc_strikes5&&this.multi_oc_strikes5[e]?[this.multi_oc_strikes5[e].ltpCE,this.multi_oc_strikes5[e].ltpPE]:null}getCELtpForSecondExpiry(e){return this.oc_strikes2&&this.oc_strikes2[e]?this.oc_strikes2[e].ltpCE:0}getPELtpForSecondExpiry(e){return this.oc_strikes2&&this.oc_strikes2[e]?this.oc_strikes2[e].ltpPE:0}uploadExpiryFile2(e){let i=e.target.files[0],r=new FileReader;r.readAsText(i),r.onload=s=>{let o=String(r.result);this.loadExpiryFile2(o)}}loadExpiryFile2(e){let r=e.split(/\r|\n|\r/).filter(function(o){return o!==""}),s=r[0].split(",");for(let o=1;o<r.length;o++){let a=r[o].split(","),l=a[0];l=l.replace("NIFTY FIN SERVICE","FINNIFTY"),l=l.replace("NIFTY MIDCAP SELECT (MIDCPNIFTY)","MIDCPNIFTY"),l=l.replace("BSE INDEX BANKEX","BANKEX"),l=l.replace("WK","");let c={};c=Ue.simulateData2[l],c||(c={}),c[a[1]]=Number(a[5]),Ue.simulateData2[l]=c;let u=[];u=Ue.stockChartData2[l],u||(u=[]);let d=a[1].split(" "),h=d[0].split("-"),p=d[1].split(":"),g=new Date(Number(h[2]),Number(h[1])-1,Number(h[0]),Number(p[0]),Number(p[1]),0).getTime();u.push([g,Number(a[2]),Number(a[3]),Number(a[4]),Number(a[5]),Number(a[6])]),Ue.stockChartData2[l]=u}console.log("simulateData2",Ue.simulateData2),console.log("stockChartData2",Ue.stockChartData2),this.loadSimulatedOCForTime(this.simulate_instru,this.simulateCurrDateTimeString,this.simulateExpiryDate),this.chartService.processOCRequest2(this.simulateExpiryDate2)}importCSV(e,i){let r=e.target.files[0],s=new FileReader;s.readAsText(r),s.onload=o=>{let a=String(s.result);console.log("csv:",a),this.loadPayoffData(i,!0,a)}}loadImportedPositions(e){let r=e.split(/\r|\n|\r/).filter(function(u){return u!==""});console.log("allTextLines: ",r);let s=r[0].split(","),o=s[0],a=s[1],l=[];for(let u=1;u<r.length;u++){if(r[u].includes("END OF DATA")){console.log('"END OF DATA" found');break}let d=r[u].split(",");l.push({qty:Number(d[0]),scrip:d[1],expiry:d[2],entry:Number(d[3]),exit:Number(d[4]),entryDateTime:d[5]&&d[5]!=="undefined"?d[5]:"",exitDateTime:d[6]&&d[6]!=="undefined"?d[6]:""})}let c={instru:"",expiry:"",trades:{}};return c.instru=o,c.expiry=a,c.trades=l,c}loadOptionChain(e=null,i=null,r=null,s=null){e&&i?(this.chartService.optionChainEvent$.next([e,i]),this.oc_instru=e,this.setInlineOCQty(this.oc_instru),this.chartService.processOCRequest(e,i,r,s,this.expiryDate2),this.bflyMonitorQty=this.getBflyMonitorQty(),this.dsMonitorQty=this.getDSMonitorQty()):this.instru&&this.expiryDate?(this.chartService.optionChainEvent$.next([this.instru,this.expiryDate]),this.oc_instru=this.instru,this.setInlineOCQty(this.oc_instru),this.chartService.processOCRequest(this.instru,this.expiryDate,r,s,this.expiryDate2),this.bflyMonitorQty=this.getBflyMonitorQty(),this.dsMonitorQty=this.getDSMonitorQty()):console.log("No data to load")}inlineOCFix(){this.inlineOC_qty_fixed=!0}setInlineOCQty(e){this.inlineOC_qty_fixed||(e==="NIFTY"?this.inlineOC_qty=-f.freezeLimit.NIFTY:e==="BANKNIFTY"?this.inlineOC_qty=-f.freezeLimit.BANKNIFTY:e==="FINNIFTY"?this.inlineOC_qty=-f.freezeLimit.FINNIFTY:e==="MIDCPNIFTY"?this.inlineOC_qty=-f.freezeLimit.MIDCPNIFTY:e==="SENSEX"?this.inlineOC_qty=-f.freezeLimit.SENSEX:e==="BANKEX"?this.inlineOC_qty=-f.freezeLimit.BANKEX:this.inlineOC_qty=-f.freezeLimit.NIFTY)}doSingleStrategySubscription(e){this.instru&&this.expiryDate&&this.curr_positions_trades?this.subscribeStrategiesPositionsFeed(this.instru,this.expiryDate,this.curr_positions_trades):console.log("Nothing to subscribe")}doStrategiesSubscriptions(){for(let e=1;e<=f.numStrategies;e++){let i=JSON.parse(localStorage.getItem("curr_positions"+e));if(i&&i.trades){e===1&&(this.s1Trades=i),e===2&&(this.s2Trades=i),e===3&&(this.s3Trades=i),e===4&&(this.s4Trades=i),e===5&&(this.s5Trades=i),e===6&&(this.s6Trades=i),e===7&&(this.s7Trades=i),e===8&&(this.s8Trades=i,f.stockPositions=i);let r=i.instru,s=i.expiry,o=i.trades;this.subscribeStrategiesPositionsFeed(r,s,o)}}this.subscribeOrders(),this.subscribeAlerts(),this.subscribeKnife()}subscribeOrders(){let e=[];this.place_orders&&this.place_orders.forEach(i=>{if(i.curr_scrip){let r=this.mapService.getSubscriptionObject(i.curr_scrip,i.instru,i.expiry_date);e.push(r)}if(i.new_scrip){let r=this.mapService.getSubscriptionObject(i.new_scrip,i.instru,i.expiry_date);e.push(r)}}),console.log("orders feed",e),this.appService.sendSubscriptions(e)}subscribeAlerts(){let e=[];this.alerts&&this.alerts.forEach(i=>{if(i.selected){if(i.scrip1){let r=this.mapService.getSubscriptionObject(i.scrip1,i.instru,i.expiry);e.push(r)}if(i.scrip2){let r=this.mapService.getSubscriptionObject(i.scrip2,i.instru,i.expiry);e.push(r)}}}),console.log("alerts feed",e),this.appService.sendSubscriptions(e)}subscribeKnife(){let e=[];this.knife_orders&&this.knife_orders.forEach(i=>{if(i.scrip){let r=this.mapService.getSubscriptionObject(i.scrip,i.instru,i.expiry_date);e.push(r)}}),console.log("knife feed",e),this.appService.sendSubscriptions(e)}subscribeStrategiesPositionsFeed(e,i,r){let s=[];r.forEach(o=>{let a=this.mapService.getSubscriptionObject(o.scrip,e,o.expiry);if(s.push(a),o.rollstrike_new){let l=this.mapService.getSubscriptionObject(o.rollstrike_new,e,o.expiry);s.push(l)}if(o.exit===0&&this.mapService.isOption(o.scrip)){let l=o.scrip,c="";l.includes("CE")&&(c="CE"),l.includes("PE")&&(c="PE"),l=Number(l.slice(0,-2));let u=l+200+c;s.push(this.mapService.getSubscriptionObject(u,e,o.expiry)),u=l+100+c,s.push(this.mapService.getSubscriptionObject(u,e,o.expiry)),u=l-100+c,s.push(this.mapService.getSubscriptionObject(u,e,o.expiry))}}),s.push(this.mapService.getSubscriptionObject(this.hypo_future_strike+"CE",e,i)),s.push(this.mapService.getSubscriptionObject(this.hypo_future_strike+"PE",e,i)),console.log("strategies positions feed",s),this.appService.sendSubscriptions(s)}subscribeIntradayWatchFeed(e,i,r){let s=[],o=r,a="";o.includes("CE")&&(a="CE"),o.includes("PE")&&(a="PE"),console.log("subscribeIntradayWatchFeed symbol: "+o),o=o.slice(0,-2);let l=new Date(i).toDateString(),c=new Cr;c.expiry=l,c.instru=e,c.strike=Number(o),c.type=a,s.push(c),console.log("intraday watch feed",s),this.appService.sendSubscriptions(s)}loadPayoffData(e,i=!1,r=null){let s=null;i?s=this.loadImportedPositions(r):s=JSON.parse(localStorage.getItem("curr_positions"+e)),this.currLoadNum=e,console.log("curr_positions: ",s),this.curr_positions_trades=null,s&&s.trades&&(this.instru=s.instru,this.expiryDate=s.expiry,this.curr_positions_trades=s.trades,this.curr_positions_trades.forEach(o=>{o.addToOrders=!1,o.selected=!0,o.selectedActual=!0,o.roll_qty=this.appService.getQtyUptoFreezeLimit(this.instru,o.qty,this.inlineOC_qty),o.rollstrike=null,o.rollstrike_new=o.scrip,o.alertPrice=null,o.alertStatus=""}),this.instru==="NIFTY"?(this.stepValue=f.qtyStep.NIFTY,this.strikeStepValue=f.strike_diff.NIFTY,this.loadOIDistance=500):this.instru==="BANKNIFTY"?(this.stepValue=f.qtyStep.BANKNIFTY,this.strikeStepValue=f.strike_diff.BANKNIFTY,this.loadOIDistance=1e3):this.instru==="FINNIFTY"?(this.stepValue=f.qtyStep.FINNIFTY,this.strikeStepValue=f.strike_diff.FINNIFTY,this.loadOIDistance=500):this.instru==="MIDCPNIFTY"?(this.stepValue=f.qtyStep.MIDCPNIFTY,this.strikeStepValue=f.strike_diff.MIDCPNIFTY,this.loadOIDistance=300):this.instru==="SENSEX"?(this.stepValue=f.qtyStep.SENSEX,this.strikeStepValue=f.strike_diff.SENSEX,this.loadOIDistance=1e3):this.instru==="BANKEX"?(this.stepValue=f.qtyStep.BANKEX,this.strikeStepValue=f.strike_diff.BANKEX,this.loadOIDistance=1e3):(this.stepValue=1e3,this.strikeStepValue=.25,this.loadOIDistance=2),this.sortPositions()),f.curr_positions_trades=this.curr_positions_trades,this.constructUrlToFetch(),this.getCEPEWeightage()}sortPositions(){this.curr_positions_trades.sort((e,i)=>{if(e.exit!==0&&i.exit!==0)return this.compareForSorting(e.scrip,i.scrip);if(e.exit!==0&&i.exit===0)return-1;if(e.exit===0&&i.exit!==0)return 1;let r=e.scrip.slice(0,-2),s=i.scrip.slice(0,-2);if(r===s&&e.scrip.includes("CE")&&i.scrip.includes("PE"))return-1;if(r===s&&e.scrip.includes("PE")&&i.scrip.includes("CE"))return 1;if(r===s&&(e.scrip.includes("CE")&&i.scrip.includes("CE")||e.scrip.includes("PE")&&i.scrip.includes("PE"))){let o=new Date(e.expiry),a=new Date(i.expiry);return o<a?-1:1}return this.compareForSorting(e.scrip,i.scrip)})}compareForSorting(e,i){if(e.includes("CE")&&i.includes("PE"))return-1;if(e.includes("PE")&&i.includes("CE"))return 1;let r=e.slice(0,-2),s=i.slice(0,-2);return r>s?-1:1}constructUrlToFetch(){}addPosition1(e=null,i=null,r=null,s=null){this.curr_positions_trades===null&&(this.curr_positions_trades=[]);let o=new Date(this.expiryDate),a=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],l=("0"+o.getDate()).slice(-2),c=o.getMonth(),u=a[c],d=o.getFullYear(),h=l+u+d;this.curr_positions_trades.push({qty:e,scrip:i,expiry:h,entry:r,exit:s,addToOrders:!1,selected:!0,selectedActual:!1,rollstrike:null,rollstrike_new:i,roll_qty:this.appService.getQtyUptoFreezeLimit(this.instru,e,this.inlineOC_qty),alertPrice:null,alertStatus:""})}addPosition(e=null,i=null,r=null,s=null){this.curr_positions_trades===null&&(this.curr_positions_trades=[]);let o=new Date(this.expiryDate);s&&(o=new Date(s));let a=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],l=("0"+o.getDate()).slice(-2),c=o.getMonth(),u=a[c],d=o.getFullYear(),h=l+u+d;this.curr_positions_trades.push({qty:e,scrip:i,expiry:h,entry:r,exit:0,addToOrders:!1,selected:!0,selectedActual:!1,rollstrike:null,rollstrike_new:i,roll_qty:this.appService.getQtyUptoFreezeLimit(this.instru,e,this.inlineOC_qty),alertPrice:null,alertStatus:""})}addPositionCustom(e,i=null,r=null,s=null){let o=new Date(this.expiryDate),a=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],l=("0"+o.getDate()).slice(-2),c=o.getMonth(),u=a[c],d=o.getFullYear(),h=l+u+d;e.push({qty:i,scrip:r,expiry:h,entry:s,exit:0,addToOrders:!1,selected:!0,selectedActual:!1,rollstrike:null,rollstrike_new:r,roll_qty:this.appService.getQtyUptoFreezeLimit(this.instru,i,this.inlineOC_qty),alertPrice:null,alertStatus:""})}splitPosition(e){this.curr_positions_trades.push({qty:0,scrip:e.scrip,expiry:e.expiry,entry:e.entry,exit:e.exit,addToOrders:!1,selected:!0,selectedActual:!1,rollstrike:null,rollstrike_new:e.scrip,roll_qty:this.appService.getQtyUptoFreezeLimit(this.instru,0,this.inlineOC_qty),alertPrice:null,alertStatus:"",entryDateTime:e.entryDateTime,exitDateTime:e.exitDateTime})}deleteIfNotExpiry(){this.curr_positions_trades=this.curr_positions_trades.filter(e=>!!e.expiry.includes(this.filter_expiry))}deletePosition(e){let i=-100;for(let r=0;r<this.curr_positions_trades.length;r++){let s=this.curr_positions_trades[r];if(s.qty===e.qty&&s.scrip===e.scrip&&s.expiry===e.expiry&&s.entry===e.entry&&s.exit===e.exit){i=r;break}}i!==-100&&this.curr_positions_trades.splice(i,1)}deleteSLLOrder(e){let i=-100;for(let r=0;r<this.sl_trades.length;r++){let s=this.sl_trades[r];if(s.qty===e.qty&&s.scrip===e.scrip&&s.expiry===e.expiry&&s.price===e.price&&s.trigger_price===e.trigger_price){i=r;break}}i!==-100&&this.sl_trades.splice(i,1)}calculatePayoff(){this.getPayoff(),this.getMargin()}reloadPayoffData(e){this.currLoadNum&&(this.prev_positions[this.currLoadNum]=this.curr_positions_trades),this.loadPayoffData(e),this.getPayoff(),this.getMargin(),this.crossCheckPositions(),this.copyProperties(this.prev_positions[e]),this.use_cf_strategies[this.currLoadNum]?this.use_cf=this.use_cf_strategies[this.currLoadNum]:this.use_cf=!1,this.tagSearch_strategies[this.currLoadNum]?this.tagSearch=this.tagSearch_strategies[this.currLoadNum]:this.tagSearch="",this.use_tag_strategies[this.currLoadNum]?this.use_tag=this.use_tag_strategies[this.currLoadNum]:this.use_tag=!1,this.use_include_guid_strategies[this.currLoadNum]?this.use_include_guid=this.use_include_guid_strategies[this.currLoadNum]:this.use_include_guid=!1,this.use_exclude_guid_strategies[this.currLoadNum]?this.use_exclude_guid=this.use_exclude_guid_strategies[this.currLoadNum]:this.use_exclude_guid=!1,this.use_filter_expiry&&this.deleteIfNotExpiry()}getFunds(){this.appService.getFunds().subscribe(e=>{console.log("getFunds res: ",e),e.data&&e.data.equity&&(this.avail_margin=Math.round(e.data.equity.net).toLocaleString("en-IN"),this.used_margin=Math.round(e.data.equity.utilised.debits).toLocaleString("en-IN"))},e=>{console.log("getFunds error",e)})}crossCheckPositions(){if(this.curr_positions_trades){let e=[];for(let r=0;r<this.curr_positions_trades.length;r++){let s=this.curr_positions_trades[r];if(s.exit==0){let o={scrip:s.scrip,qty:s.qty};e.push(o)}}let i=[];for(let r=0;r<f.fetchedPositions.length;r++){let s=f.fetchedPositions[r];if(s.instru===this.instru&&s.netQty!==0){let o={instru:s.instru,expiry:s.expiry,strike:this.mapService.parseScrip(s.scrip).scrip,optionType:this.mapService.parseScrip(s.scrip).type},a=this.mapService.getMapKey(o),l=this.isCoveredCallPosition(a,s.netQty);if(l!==null){if(l!==0){let c={scrip:s.scrip,qty:l};i.push(c)}}else{let c={scrip:s.scrip,qty:s.netQty};i.push(c)}}}this.matchPositions=JSON.stringify(e)===JSON.stringify(i)}}isCoveredCallPosition(e,i){if(this.s5Trades)for(let r=0;r<this.s5Trades.trades.length;r++){let s=this.s5Trades.trades[r];if(s.exit===0){let o={instru:"NIFTY",expiry:s.expiry,strike:this.mapService.parseScrip(s.scrip).scrip,optionType:this.mapService.parseScrip(s.scrip).type},a=this.mapService.getMapKey(o);if(e===a){let l=0;return i<Number(s.qty)?l=i-Number(s.qty):l=Number(s.qty)-i,l}}}return null}deepEqual(e,i){let r=Object.keys,s=typeof e;return e&&i&&s==="object"&&s===typeof i?r(e).length===r(i).length&&r(e).every(a=>this.deepEqual(e[a],i[a])):e===i}mergePositions(){if(this.currLoadNum===f.stocksStrategyNum)return;let e=new Map,i=new Map;for(let r=0;r<this.curr_positions_trades.length;r++){let s=this.curr_positions_trades[r],o=s.scrip+" "+s.expiry,a=e.get(o),l=i.get(o);if(s.exit!==0)a||(a=[]),a.push(s),e.set(o,a);else if(!l)i.set(o,s);else if(l.qty==-s.qty)l.exit=s.entry,a||(a=[]),a.push(l),e.set(o,a),i.delete(o);else if(l.qty>0&&s.qty>0||l.qty<0&&s.qty<0)l.entry=(l.entry*l.qty+s.entry*s.qty)/(l.qty+s.qty),l.entry=Math.round((l.entry+1e-5)*1e4)/1e4,l.qty+=s.qty,i.set(o,l);else if(Math.abs(l.qty)>Math.abs(s.qty))l.qty=l.qty+s.qty,i.set(o,l),s.qty=-s.qty,s.exit=s.entry,s.entry=l.entry,a||(a=[]),a.push(s),e.set(o,a);else{let c=l.qty,u=l.entry;l.qty=l.qty+s.qty,l.entry=s.entry,i.set(o,l),s.qty=c,s.exit=s.entry,s.entry=u,a||(a=[]),a.push(s),e.set(o,a)}}console.log("exitedMap:",e),console.log("mergeMap:",i),this.curr_positions_trades=[];for(let[r,s]of e)s.forEach(o=>{this.curr_positions_trades.push({qty:o.qty,scrip:o.scrip,expiry:o.expiry,entry:o.entry,exit:o.exit,addToOrders:o.addToOrders,selected:o.selected,selectedActual:o.selectedActual,rollstrike:o.rollstrike,rollstrike_new:o.rollstrike_new,roll_qty:o.roll_qty,alertPrice:o.alertPrice,alertStatus:"",entryDateTime:o.entryDateTime,exitDateTime:o.exitDateTime})});for(let[r,s]of i)this.curr_positions_trades.push({qty:s.qty,scrip:s.scrip,expiry:s.expiry,entry:s.entry,exit:s.exit,addToOrders:s.addToOrders,selected:s.selected,selectedActual:s.selectedActual,rollstrike:s.rollstrike,rollstrike_new:s.rollstrike_new,roll_qty:s.roll_qty,alertPrice:s.alertPrice,alertStatus:"",entryDateTime:s.entryDateTime,exitDateTime:s.exitDateTime})}savePositions(e,i=!0){e!==f.stocksStrategyNum&&this.mergePositions(),console.log("curr_positions_trades",this.curr_positions_trades);let r=this.curr_positions_trades.map(s=>Object.assign({},s));if(console.log("c_positions",r),!i||confirm("Sure save "+e+"?")){let s={instru:"",expiry:"",trades:{}};s.instru=this.instru,s.expiry=this.expiryDate,r.forEach(o=>{delete o.addToOrders,delete o.selected,delete o.selectedActual,delete o.roll_qty,delete o.rollstrike,delete o.rollstrike_new,delete o.pnl,delete o.alertPrice,delete o.alertStatus}),s.trades=r,console.log("Saving positions: ",s),console.log("Saving positions json: ",JSON.stringify(s)),localStorage.setItem("curr_positions"+e,JSON.stringify(s)),this.reloadPayoffData(e),s&&s.trades&&(e===1&&(this.s1Trades=s),e===2&&(this.s2Trades=s),e===3&&(this.s3Trades=s),e===4&&(this.s4Trades=s),e===5&&(this.s5Trades=s),e===6&&(this.s6Trades=s),e===7&&(this.s7Trades=s),e===8&&(this.s8Trades=s,f.stockPositions=s))}}getCEPEWeightage(){}findDS_BuyExit(){let e,i;if(this.curr_positions_trades&&(this.curr_positions_trades.forEach(r=>{r.exit===0&&r.addToOrders&&(r.qty<0&&(i=r),r.qty>0&&(e=r))}),e&&i&&Math.abs(e.qty)===Math.abs(i.qty))){let r=(i.entry-.5*e.entry)/.5;this.ds_buy_exit=e.entry-r}return this.ds_buy_exit=Math.round((this.ds_buy_exit+1e-5)*100)/100,console.log("findDS_BuyExit :",this.ds_buy_exit),this.ds_buy_exit}unselectStraddlePositions(){let e=[],i,r;return this.curr_positions_trades&&(this.curr_positions_trades.forEach(s=>{if(s.exit===0){let o=s.scrip.slice(0,-2);e.includes(o)?(i=o,r=Math.abs(s.qty)):e.push(o)}}),console.log("straddle strike:",i),i&&this.curr_positions_trades.forEach(s=>{s.exit===0&&s.scrip.slice(0,-2)===i&&(s.selected=!1)}),console.log("selected:",this.curr_positions_trades)),[Number(i),Number(r)]}findStraddleHedge(e,i,r){let s;return this.curr_positions_trades&&this.curr_positions_trades.forEach(o=>{o.exit===0&&o.addToOrders&&o.scrip.includes(r)&&o.qty===i&&(s=o.scrip.slice(0,-2))}),console.log("findStraddleHedge strike:",s),Number(s)}whatIsStraddleHedge(e,i,r){let s;return this.curr_positions_trades&&this.curr_positions_trades.forEach(o=>{o.exit===0&&o.selected&&o.scrip.includes(r)&&o.qty===i&&(s=o.scrip.slice(0,-2))}),console.log("hedge strike:",s),Number(s)}payoffCheckboxChange(e){if(e.currentTarget.checked){if(this.overlay_strike){let i=this.overlay_strike,r=this.unselectStraddlePositions(),s=this.mapService.getScripLTP(this.instru,this.expiryDate,i,"CE");this.addPosition(-r[1],i+"CE",s);let o=this.mapService.getScripLTP(this.instru,this.expiryDate,i,"PE");this.addPosition(-r[1],i+"PE",o),this.calculatePayoff()}}else this.reloadPayoffData(this.currLoadNum)}getPayoff(){if(this.currLoadNum===f.stocksStrategyNum)return;let e={chart:[]},i=0;if(this.instru==="USDINR")if(this.use_hypo_future){let y=this.mapService.getScripLTP(this.instru,this.expiryDate,this.hypo_future_strike,"CE"),b=this.mapService.getScripLTP(this.instru,this.expiryDate,this.hypo_future_strike,"PE");i=y-b+this.hypo_future_strike,i=Math.round((i+1e-5)*100)/100}else i=this.mapService.getScripLTP(null,null,this.instru,null),i=Math.round((i+1e-5)*100)/100;else i=this.mapService.getScripLTP(null,null,this.instru,null),i=Math.round(i);console.log("ltp is: ",i);let r=1e3,s=1,o=50;this.instru==="BANKNIFTY"&&(r=3e3,o=100),this.instru==="USDINR"&&(r=2,s=.01,o=.25),this.payoff_range&&this.instru!=="USDINR"&&(r=this.payoff_range);let a=i-r,l=i+r,c=[],u=0,d=[],h=[],p=[],g=[],A=[];if(this.curr_positions_trades){if(this.ce_side_overlay||this.pe_side_overlay){let y=this.unselectStraddlePositions();this.curr_positions_trades.forEach(Z=>{p.push(Z),g.push(Z),A.push(Z)});let b="CE";this.pe_side_overlay&&(b="PE",o=-100);let x=this.whatIsStraddleHedge(y[0],y[1],b),P=x-o,T=this.mapService.getScripLTP(this.instru,this.expiryDate,P,"CE");this.addPositionCustom(p,-y[1],P+"CE",T);let k=this.mapService.getScripLTP(this.instru,this.expiryDate,P,"PE");this.addPositionCustom(p,-y[1],P+"PE",k),console.log("overlayPos1:",p);let C=x-2*o,M=this.mapService.getScripLTP(this.instru,this.expiryDate,C,"CE");this.addPositionCustom(g,-y[1],C+"CE",M);let O=this.mapService.getScripLTP(this.instru,this.expiryDate,C,"PE");this.addPositionCustom(g,-y[1],C+"PE",O),console.log("overlayPos2:",g);let R=x-3*o,q=this.mapService.getScripLTP(this.instru,this.expiryDate,R,"CE");this.addPositionCustom(A,-y[1],R+"CE",q);let H=this.mapService.getScripLTP(this.instru,this.expiryDate,P,"PE");this.addPositionCustom(A,-y[1],R+"PE",H),console.log("overlayPos3:",A)}if(this.straddle_shiftCE_overlay||this.straddle_shiftPE_overlay){let y=this.unselectStraddlePositions();this.curr_positions_trades.forEach(H=>{h.push(H)});let b="CE",x="PE",P=100;this.instru==="BANKNIFTY"&&(P=200),this.straddle_shiftPE_overlay&&(b="PE",x="CE",P=-P);let T=y[1];this.straddle_shiftQty_overlay&&(T=this.straddle_shiftQty_overlay);let k=y[0]+P/2,C=this.mapService.getScripLTP(this.instru,this.expiryDate,k,"CE");this.addPositionCustom(h,-T,k+"CE",C);let M=this.mapService.getScripLTP(this.instru,this.expiryDate,k,"PE");this.addPositionCustom(h,-T,k+"PE",M);let O=this.mapService.getScripLTP(this.instru,this.expiryDate,y[0],"CE");this.addPositionCustom(h,T,y[0]+"CE",O);let R=this.mapService.getScripLTP(this.instru,this.expiryDate,y[0],"PE");this.addPositionCustom(h,T,y[0]+"PE",R);let q=this.findStraddleHedge(y[0],T,x);if(q){let H=q+P,Z=this.mapService.getScripLTP(this.instru,this.expiryDate,q,x);this.addPositionCustom(h,-T,q+x,Z);let ne=this.mapService.getScripLTP(this.instru,this.expiryDate,H,x);this.addPositionCustom(h,T,H+x,ne)}console.log("shiftedPos:",h)}this.curr_positions_trades.forEach(y=>{if(y.exit&&y.exit>0){let b=this.getPnL(y);u+=b}this.payoff_overlay&&y.selectedActual===!0&&d.push(y)});for(let y=a;y<=l;y+=s){let b=0,x=0,P=0,T=0,k=0,C=0,M=0,O=0,R=[];y=Math.round((y+1e-5)*100)/100,this.payoff_overlay?(R=this.calculatePnLAtPoint(this.curr_positions_trades,y,i,!0),k+=R[0],k+=u,k=Math.round((k+1e-5)*100)/100,C+=R[1],C+=u,C=Math.round((C+1e-5)*100)/100,R=this.calculatePnLAtPoint(d,y,i,!1)):this.straddle_shiftCE_overlay||this.straddle_shiftPE_overlay?(R=this.calculatePnLAtPoint(h,y,i,!1),k+=R[0],k+=u,k=Math.round((k+1e-5)*100)/100,C+=R[1],C+=u,C=Math.round((C+1e-5)*100)/100,R=this.calculatePnLAtPoint(this.curr_positions_trades,y,i,!1)):this.ce_side_overlay||this.pe_side_overlay?(R=this.calculatePnLAtPoint(p,y,i,!0),k+=R[0],k+=u,k=Math.round((k+1e-5)*100)/100,R=this.calculatePnLAtPoint(g,y,i,!0),M+=R[0],M+=u,M=Math.round((M+1e-5)*100)/100,R=this.calculatePnLAtPoint(A,y,i,!0),O+=R[0],O+=u,O=Math.round((O+1e-5)*100)/100,R=this.calculatePnLAtPoint(this.curr_positions_trades,y,i,!1)):R=this.calculatePnLAtPoint(this.curr_positions_trades,y,i,!1),b+=R[0],b+=u,b=Math.round((b+1e-5)*100)/100,x+=R[1],x+=u,x=Math.round((x+1e-5)*100)/100,P+=R[2],P+=u,P=Math.round((P+1e-5)*100)/100,T+=R[3],T+=u,T=Math.round((T+1e-5)*100)/100,c.push(b),e.chart.push({Final:b,StockPrice:y,Today:x,T1:P,T2:T,Overlay:k,OverlayT0:C,Overlay2:M,Overlay3:O})}console.log("myPayoff:",e),this.payOffData=e,this.updateChartData(e),this.breakevens="";for(let y=1;y<e.chart.length;y++){let b=e.chart[y],x=e.chart[y-1];(b.Final>0&&x.Final<=0||b.Final<0&&x.Final>=0)&&(this.breakevens=this.breakevens+x.StockPrice+" ")}}}calculatePnLAtPoint(e,i,r,s){let o=0,a=0,l=0,c=0;return e.forEach(u=>{if(u.exit===null||u.exit===0){let d=null,h=null;u.scrip.includes("CE")&&u.qty<0&&(d=Ut.CEsell,h=Ut.CE),u.scrip.includes("PE")&&u.qty<0&&(d=Ut.PEsell,h=Ut.PE),u.scrip.includes("CE")&&u.qty>0&&(d=Ut.CEbuy,h=Ut.CE),u.scrip.includes("PE")&&u.qty>0&&(d=Ut.PEbuy,h=Ut.PE);let p=u.scrip.slice(0,-2),g=u.expiry,A=new Date(g),y=new Date(this.expiryDate);if(A.getFullYear()===y.getFullYear()&&A.getMonth()===y.getMonth()&&A.getDate()===y.getDate())s&&!u.selected?o+=this.getPnL(u):o+=this.calculatePnLAtPointForStrike(i,p,u.qty,u.entry,d);else{let b=new Date;this.simulate_strategy&&(b=this.simulateCurrDateObj);let x=this.appService.calcHolidays(b,y),P=Math.round((y.getTime()-b.getTime())/(1e3*3600*24))-x,T=this.mapService.getScripLTP(this.instru,g,this.mapService.parseScrip(u.scrip).scrip,this.mapService.parseScrip(u.scrip).type),k=this.calculateIV(r,p,f.INTEREST_RATE,g,h,T),C=this.calculateT0AtPointForStrike(i,p,f.INTEREST_RATE,g,k,h,P,u);C=C-u.entry,C=C*u.qty,o+=C}if(s&&!u.selected)a+=this.getPnL(u);else{let b=this.mapService.getScripLTP(this.instru,g,this.mapService.parseScrip(u.scrip).scrip,this.mapService.parseScrip(u.scrip).type),x=this.calculateIV(r,p,f.INTEREST_RATE,g,h,b),P=this.calculateT0AtPointForStrike(i,p,f.INTEREST_RATE,g,x,h,0,u);if(P=P-u.entry,P=P*u.qty,a+=P,this.multi_t0){let T=this.multiT0Input.split(",");if(T&&T.length>1){if(T[0]){let k=this.calculateT0AtPointForStrike(i,p,f.INTEREST_RATE,g,x,h,Number(T[0]),u);k=k-u.entry,k=k*u.qty,l+=k}if(T[1]){let k=this.calculateT0AtPointForStrike(i,p,f.INTEREST_RATE,g,x,h,Number(T[1]),u);k=k-u.entry,k=k*u.qty,c+=k}}}}}}),[o,a,l,c]}calculateIV(e,i,r,s,o,a,l){let c=80,u=0,d=0;for(;c-u>1e-4;)this.calculateT0AtPointForStrike(e,i,r,s,(c+u)/2,o,l)>a?c=(c+u)/2:u=(c+u)/2;return d=(c+u)/2,d}calculateT0AtPointForStrike(e,i,r,s,o,a,l,c){let u=0;if(c&&(f.mfInvested.find(y=>y[0]===c.scrip)||!this.mapService.isOption(c.scrip)))return this.calculatePnLAtPointforNonOption(e,c);let d=new Date(s);this.instru==="USDINR"?d.setHours(12,30,0):d.setHours(15,30,0);let h=new Date;this.simulate_strategy&&(h=this.simulateCurrDateObj);let p=0;if(l){let y=new Date(h);y.setDate(y.getDate()+l),y.setHours(9,15,0),p=Math.floor((y.getTime()-h.getTime())/1e3)}let g=this.appService.calcHolidays(h,d)*86400,A=Math.floor((d.getTime()-h.getTime())/1e3)-g-p;if(A>0){let x=A/60/60/24/365,P=o/100;r=r/100;let T=(Math.log(e/i)+(r+Math.pow(P,2)/2)*x)/(P*Math.sqrt(x)),k=T-P*Math.sqrt(x),C=i*Math.exp(-1*r*x);a===Ut.CE&&(u=e*this.getCDF(T)-C*this.getCDF(k)),a===Ut.PE&&(u=C*this.getCDF(-1*k)-e*this.getCDF(-1*T))}return u}getCDF(e){let i=Math.sqrt(this.variance);return .5*this.erfc(-(e-this.mean)/(i*Math.sqrt(2)))}erfc(e){let i=Math.abs(e),r=1/(1+i/2),s=r*Math.exp(-i*i-1.26551223+r*(1.00002368+r*(.37409196+r*(.09678418+r*(-.18628806+r*(.27886807+r*(-1.13520398+r*(1.48851587+r*(-.82215223+r*.17087277)))))))));return e>=0?s:2-s}calculatePnLAtPointforNonOption(e,i){let r=f.mfInvested.find(o=>o[0]===i.scrip);return e*Number(r[1])}calculatePnLAtPointForStrike(e,i,r,s,o){let a=0;return o===Ut.CEsell&&(e>i?a=(i-e+s)*Math.abs(r):a=s*Math.abs(r)),o===Ut.PEsell&&(e<i?a=(-i+e+s)*Math.abs(r):a=s*Math.abs(r)),o===Ut.CEbuy&&(e>i?a=(-i+e-s)*Math.abs(r):a=s*-Math.abs(r)),o===Ut.PEbuy&&(e<i?a=(i-e-s)*Math.abs(r):a=s*-Math.abs(r)),a!==0&&(a=Math.round((a+1e-5)*100)/100),a}getMargin(){if(this.curr_positions_trades){let e=new Date(this.expiryDate),i=f.monthsMapping[e.getMonth()+1];console.log("getMargin: ",this.curr_positions_trades),this.appService.getZerodhaMargin(this.instru,this.curr_positions_trades,this.instru,f.broker_auth).subscribe(r=>{console.log("getMargin res: ",r),r.data&&r.data.final&&(this.margin=Math.round(r.data.final.total).toLocaleString("en-IN"))},r=>{console.log("getMargin error",r)})}return null}getROI(){if(this.avail_margin&&this.used_margin){let e=parseFloat(this.avail_margin.replace(/,/g,""))+parseFloat(this.used_margin.replace(/,/g,"")),i=this.strategyPnl/e*100;return i=Math.round((i+1e-5)*100)/100,i}return null}getPnL(e,i,r){let s=null,o=null;return e.exit!==null&&e.exit!==0?o=e.exit:(i||(i=this.instru),r||(r=e.expiry),o=this.mapService.getScripLTP(i,r,this.mapService.parseScrip(e.scrip).scrip,this.mapService.parseScrip(e.scrip).type)),e.qty>0?s=(o-e.entry)*e.qty:e.qty<0&&(s=(e.entry-o)*-e.qty),s=Math.round((s+1e-5)*100)/100,e.pnl=s,s}getStrategyDelta(){let e=0,i=this.curr_positions_trades;i&&i.forEach(s=>{if(s.exit===null||s.exit===0){if(this.payoff_overlay&&!s.selected)return;let o="",a=s.scrip;a.includes("CE")&&(o="CE"),a.includes("PE")&&(o="PE");let l=a.slice(0,-2),c=this.mapService.getScripLTP(this.instru,s.expiry,this.mapService.parseScrip(s.scrip).scrip,this.mapService.parseScrip(s.scrip).type);e+=this.appService.getDelta(this.instru,l,o,s.expiry,c,this.simulate_strategy,this.simulateCurrDateObj)*s.qty}}),e=Math.round((e+1e-5)*100)/100;let r=" ( 50: "+Math.round((-e/50+1e-5)*100)/100+" , 100: "+Math.round((-e/100+1e-5)*100)/100+" , 150: "+Math.round((-e/150+1e-5)*100)/100+" , 200: "+Math.round((-e/200+1e-5)*100)/100+" )";return e+r}getStrategyPnLAfterCharges(){let e=this.strategyPnl,i=0,r=this.curr_positions_trades;return r&&r.forEach(s=>{let o=0;s.exit!==null&&s.exit!==0?o=40:o=20;let a=Math.abs(s.qty)*s.entry+Math.abs(s.qty)*s.exit,l=0;s.qty<0?l=s.entry*Math.abs(s.qty):l=s.exit*Math.abs(s.qty);let c=625e-6*l,u=a*53e-5,d=.18*(o+u),h=5e-5*a,p=3e-5*a;i+=o+c+u+d+h+p}),Math.round(e-i)+", "+Math.round(i)}getSoldPremium(){let e=0,i=0,r=0,s=0,o=0,a=0,l=0,c=0,u=0,d=0,h=0,p=0,g=null;return g=this.curr_positions_trades,g&&(g.forEach(A=>{if(A.exit===0&&A.qty<0){if(A.scrip.includes("CE")){i+=-A.qty*A.entry,e+=-A.qty;let y=this.mapService.getScripLTP(this.instru,A.expiry,this.mapService.parseScrip(A.scrip).scrip,this.mapService.parseScrip(A.scrip).type);c+=-A.qty*y}if(A.scrip.includes("PE")){o+=-A.qty*A.entry,s+=-A.qty;let y=this.mapService.getScripLTP(this.instru,A.expiry,this.mapService.parseScrip(A.scrip).scrip,this.mapService.parseScrip(A.scrip).type);d+=-A.qty*y}}}),e&&i&&(r=i/e,u=c/e),s&&o&&(a=o/s,h=d/s),l=r+a,l=Math.round((l+1e-5)*100)/100,p=u+h,p=Math.round((p+1e-5)*100)/100,this.currentSold=p),[l,p]}getStrategyPnL(e=null){let i=0,r=0,s=null,o=null,a=null;return e===null&&(s=this.curr_positions_trades),e===1&&this.s1Trades&&(s=this.s1Trades.trades,o=this.s1Trades.instru,a=this.s1Trades.expiry),e===2&&this.s2Trades&&(s=this.s2Trades.trades,o=this.s2Trades.instru,a=this.s2Trades.expiry),e===3&&this.s3Trades&&(s=this.s3Trades.trades,o=this.s3Trades.instru,a=this.s3Trades.expiry),e===4&&this.s4Trades&&(s=this.s4Trades.trades,o=this.s4Trades.instru,a=this.s4Trades.expiry),e===5&&this.s5Trades&&(s=this.s5Trades.trades,o=this.s5Trades.instru,a=this.s5Trades.expiry),e===6&&this.s6Trades&&(s=this.s6Trades.trades,o=this.s6Trades.instru,a=this.s6Trades.expiry),e===7&&this.s7Trades&&(s=this.s7Trades.trades,o=this.s7Trades.instru,a=this.s7Trades.expiry),e===8&&this.s8Trades&&(s=this.s8Trades.trades,o=this.s8Trades.instru,a=this.s8Trades.expiry),s&&s.forEach(l=>{if(e){let c=this.getPnL(l,o,l.expiry);i+=c}else{let c=this.getPnL(l);i+=c}}),i=Math.round((i+1e-5)*100)/100,e===null&&(this.strategyPnl=i),e===1&&this.s1Trades&&(this.strategyPnl1=i),e===2&&this.s2Trades&&(this.strategyPnl2=i),e===3&&this.s3Trades&&(this.strategyPnl3=i),e===4&&this.s4Trades&&(this.strategyPnl4=i),e===5&&this.s5Trades&&(this.strategyPnl5=i),e===6&&this.s6Trades&&(this.strategyPnl6=i),e===7&&this.s7Trades&&(this.strategyPnl7=i),e===8&&this.s8Trades&&(this.strategyPnl8=i),this.chartService.strategyPnLEvent$.next([i,r]),i}getSelectedPnL(){let e=this.curr_positions_trades,i=0,r=[];this.selectedPnL=0,this.selectedMaxProfit=0,this.selectedMaxLoss=0;let s=1e6;if(e){if(e.forEach(o=>{if(o.addToOrders){let l=o.scrip.slice(0,-2);r.push(l)}}),r.sort((o,a)=>a-o),r.length===2||r.length===3){e.forEach(a=>{if(a.addToOrders){let l=this.getPnL(a);i+=l;let c=a.entry*a.qty;this.selectedMaxLoss+=c,Math.abs(a.qty)<s&&(s=Math.abs(a.qty))}});let o=-1;for(let a=0;a<r.length-1;a++){let l=r[a]-r[a+1];l>o&&(o=l)}this.selectedMaxProfit=o*s-this.selectedMaxLoss,this.selectedPnL=Math.round((i+1e-5)*100)/100,this.selectedMaxProfit=Math.round((this.selectedMaxProfit+1e-5)*100)/100,this.selectedMaxLoss=Math.round((this.selectedMaxLoss+1e-5)*100)/100}if(r.length===4){e.forEach(a=>{if(a.addToOrders){let l=this.getPnL(a);i+=l;let c=a.entry*a.qty;this.selectedMaxProfit+=c,Math.abs(a.qty)<s&&(s=Math.abs(a.qty))}});let o=-1;for(let a=0;a<r.length-1;a++){let l=r[a]-r[a+1];l>o&&(o=l)}this.selectedPnL=Math.round((i+1e-5)*100)/100,this.selectedMaxProfit=Math.abs(Math.round((this.selectedMaxProfit+1e-5)*100)/100),this.selectedMaxLoss=o*s-this.selectedMaxProfit,this.selectedMaxLoss=Math.round((this.selectedMaxLoss+1e-5)*100)/100}}}getAlertLtp(e){if(e.selected)if(e.scrip1){let r=this.mapService.getScripLTP(e.instru,e.expiry,this.mapService.parseScrip(e.scrip1).scrip,this.mapService.parseScrip(e.scrip1).type);if(e.scrip2){let s=this.mapService.getScripLTP(e.instru,e.expiry,this.mapService.parseScrip(e.scrip1).scrip,this.mapService.parseScrip(e.scrip1).type);r+=s}return r}else return this.mapService.getScripLTP(null,null,e.instru,null);return null}addScripToChart(e,i){for(let[r,s]of Object.entries(Ue.simulateData))if(r===e||r.startsWith(this.simulate_instru)&&r.endsWith(e)){let o={chart:[]},a=this.simulateCurrDateTimeString.split(" ")[0];for(let[l,c]of Object.entries(s))l.startsWith(a)&&o.chart.push({label:l,close:c});console.log("value",a,o,s),this.updateFinChartData(o,i)}}updateFinChartData(e,i){}updateChartData(e){if(e&&e.chart&&Array.isArray(e.chart)){let i=[],r=[],s=[],o=[],a=[],l=[],c=[],u=[],d=[],h=[],p=[],g=[];e.chart.forEach(T=>{if(i.push(T.StockPrice),r.push(T.Final),h.push(0),T.StockPrice%this.strikeStepValue===0){let k=this.mapService.getScripOI(this.instru,this.expiryDate,T.StockPrice,"PE"),C=this.mapService.getScripOI(this.instru,this.expiryDate,T.StockPrice,"CE"),M=this.mapService.getScripLastDayOI(this.instru,this.expiryDate,T.StockPrice,"CE"),O=this.mapService.getScripLastDayOI(this.instru,this.expiryDate,T.StockPrice,"PE");p.push(k-O),g.push(C-M)}else p.push(0),g.push(0);this.multi_t0&&(u.push(T.T1),d.push(T.T2)),(this.payoff_overlay||this.straddle_shiftCE_overlay||this.straddle_shiftPE_overlay)&&(s.push(T.Overlay),o.push(T.OverlayT0)),(this.ce_side_overlay||this.pe_side_overlay)&&(s.push(T.Overlay),a.push(T.Overlay2),l.push(T.Overlay3)),this.show_t0&&c.push(T.Today)}),this.lineChartLabels=i,this.lineChartData={labels:i,datasets:[{data:r,label:"PnL",borderColor:"#35A4EB",fill:"origin",borderWidth:2,pointRadius:0},{data:c,label:"T+0",fill:!1,borderColor:"black",borderWidth:1,pointRadius:0},{data:u,label:"T+1",fill:!1,borderColor:"#205f87",borderWidth:1,pointRadius:0},{data:d,label:"T+2",fill:!1,borderColor:"#6fb9e8",borderWidth:1,pointRadius:0},{data:s,label:"Overlay",fill:!1,borderColor:"#35A4EB",borderWidth:2,pointRadius:0,borderDash:[10,5]},{data:o,label:"OverlayT0",fill:!1,borderColor:"black",borderWidth:1,pointRadius:0,borderDash:[10,5]},{data:a,label:"Overlay2",fill:!1,borderColor:"#35A4EB",borderWidth:2,pointRadius:0,borderDash:[10,5]},{data:l,label:"Overlay3",fill:!1,borderColor:"#35A4EB",borderWidth:2,pointRadius:0,borderDash:[10,5]},{data:p,label:"PE OI",type:"bar",yAxisID:"y1",barThickness:5,backgroundColor:"#F0A48C"},{data:g,label:"CE OI",type:"bar",yAxisID:"y1",barThickness:5,backgroundColor:"#8DD681"}]};let A=0;if(this.instru==="USDINR")if(this.use_hypo_future){let T=this.mapService.getScripLTP(this.instru,this.expiryDate,this.hypo_future_strike,"CE"),k=this.mapService.getScripLTP(this.instru,this.expiryDate,this.hypo_future_strike,"PE");A=T-k+this.hypo_future_strike,A=Math.round((A+1e-5)*100)/100}else A=this.mapService.getScripLTP(null,null,this.instru,null),A=Math.round((A+1e-5)*100)/100;else A=this.mapService.getScripLTP(null,null,this.instru,null),A=Math.round(A);let y=1/0,b=-1/0;this.lineChartData.datasets.forEach(T=>{T.data&&T.data.forEach(k=>{typeof k=="number"&&(y=Math.min(y,k),b=Math.max(b,k))})});let x=i[0],P=i[i.length-1];this.lineChartOptions={responsive:!0,animation:!1,scales:{x:{type:"linear",min:x,max:P,offset:!1,ticks:{stepSize:1,autoSkip:!1,maxTicksLimit:20}},y:{position:"left"},y1:{position:"right",grid:{display:!1},ticks:{callback:T=>Math.abs(T)>=1e5?T/1e5+"L":Math.abs(T)>=1e3?T/1e3+"K":T}}},plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1},annotation:{annotations:[{drawTime:"afterDatasetsDraw",type:"line",scaleID:"x",value:A,borderColor:"orange",borderWidth:1,label:{yAdjust:-40,display:!0,color:"orange",content:A.toString()}}]}}}}}doAnnotationsContainSymbol(e,i){for(let r=0;r<e.length;r++)if(i===e[r].value)return!0;return!1}updateIntradayChartData(){let e=[],i=[],r=[],s=this.chartService.getIntradayData("74CE","USDINR","2020-11-13"),o=this.chartService.getIntradayData("74PE","USDINR","2020-11-13"),a=this.chartService.getIntradayData("FUT","USDINR","2020-11-13");s&&s.forEach(l=>{let c=l.time;o.forEach(u=>{if(c===u.time){let d=l.price+u.price;d=Math.round((d+1e-5)*100)/100,e.push(c),i.push(d);return}}),a&&a.forEach(u=>{if(c===u.time){r.push(u.price);return}})})}rollPosition(e){console.log(e,e.rollstrike_new);let i={instru:this.instru,expiry_date:e.expiry,curr_qty:e.roll_qty,curr_scrip:e.scrip,new_scrip:e.rollstrike_new};this.place_roll_orders(i,!0)}getPosRollStrike(e,i){let r=50;this.instru==="BANKNIFTY"&&(r=100),this.instru==="USDINR"&&(r=.25);let s="";e.scrip.includes("CE")&&(s="CE"),e.scrip.includes("PE")&&(s="PE");let o=Number(e.scrip.slice(0,-2));return o=o+i*r,o+s}getPosRollStrikeLTP(e,i){let r=50;this.instru==="BANKNIFTY"&&(r=100),this.instru==="USDINR"&&(r=.25);let s="";e.scrip.includes("CE")&&(s="CE"),e.scrip.includes("PE")&&(s="PE");let o=Number(e.scrip.slice(0,-2));return o=o+i*r,this.mapService.getScripLTP(e.instru,e.expiry,o,s)}getOrderLtp(e,i=!1){let r=e.curr_scrip;return i&&(r=e.new_scrip),r?this.mapService.getScripLTP(e.instru,e.expiry_date,this.mapService.parseScrip(r).scrip,this.mapService.parseScrip(r).type):null}adjustKnifeOrders(){this.knife_orders.forEach(e=>{let i=this.getKnifeOrderStatus(e),r=i[0],s=i[1],o=i[2];if(r==="OPEN"){let a=this.getLTP(e.expiry_date,e.scrip,e.instru),l=Math.round(s+s*(f.knife_threshold_adjust1/100)),c=Math.round(s+s*(f.knife_threshold_adjust2/100));if(a&&(a<l||a>c)){console.log("Adjusting knife order",e.scrip),f.requestStatusEvent$.next({status:"info",message:"Adjusting knife order "+e.scrip}),this.appService.playAudio("success");let u=Math.round(a-a*(f.knife_threshold/100)),d={instru:e.instru,expiry_date:e.expiry_date,curr_qty:-e.qty,curr_scrip:e.scrip,new_scrip:null};u?(this.place_roll_orders(d,!0,!1,u,o,"MIS"),setTimeout(()=>{f.miscEvent$.next("refreshAll")},4e3)):f.requestStatusEvent$.next({status:"danger",message:"Limit price could not be calculated for "+e.scrip})}}})}getKnifeOrderStatus(e){let i={instru:e.instru,expiry:e.expiry_date,strike:this.mapService.parseScrip(e.scrip).scrip,optionType:this.mapService.parseScrip(e.scrip).type},r=this.mapService.getMapKey(i),s="",o=null,a=null,l=null;return f.orders.forEach(c=>{r===c.tradingsymbol&&(o===null||c.time>o)&&(s=c.status,o=c.time,a=c.tradedPrice,l=c.id)}),[s,a,l]}place_knife_orders(){this.knife_orders.forEach(e=>{this.place_knife_order(e)}),setTimeout(()=>{f.miscEvent$.next("refreshAll")},4e3)}place_knife_order(e){let i={instru:e.instru,expiry_date:e.expiry_date,curr_qty:-e.qty,curr_scrip:e.scrip,new_scrip:null},r=this.getLTP(e.expiry_date,e.scrip,e.instru),s=Math.round(r-r*(f.knife_threshold/100));s?this.place_roll_orders(i,!0,!1,s,null,"MIS"):f.requestStatusEvent$.next({status:"danger",message:"Limit price could not be calculated for "+e.scrip})}place_all_orders(){confirm("Place All ?")&&this.place_orders.forEach(e=>{this.place_roll_orders(e,!0,!1)})}place_roll_orders(e,i,r=!0,s=null,o=null,a="NRML",l=this.tagSearch,c=0,u=null){let d=!1;if(i&&r?d=confirm("Sure? "+e.curr_qty+" "+e.curr_scrip+" "+e.new_scrip):d=!0,d)if(i&&!e.curr_scrip)this.place_roll_orders(e,!1);else{let h=e.curr_qty,p=e.curr_scrip;if(i?h=-h:p=e.new_scrip,console.log("place order",h,p),h!=""&&h!=null&&p){let g={instru:e.instru,expiry:e.expiry_date,strike:this.mapService.parseScrip(p).scrip,optionType:this.mapService.parseScrip(p).type},A=this.mapService.getMapKey(g);console.log("placing ",i?"first order ":"second order ",A),this.zerodhaService.place_order(A,h,f.broker_auth,s,o,a,l,c).subscribe(y=>{console.log("place_roll_orders response",y),f.requestStatusEvent$.next({status:"secondary",message:"Placed "+p+" "+h}),i&&e.new_scrip?setTimeout(()=>{this.place_roll_orders(e,!1)},1e3):u&&(console.log("Algo - Order Id:",y.data.order_id),u=y.data.order_id)},y=>{console.log("place_roll_orders error",y);let b="Error (mostly timeout)";y.error&&y.error.message?b=y.error.message:b=y.message,f.requestStatusEvent$.next({status:"danger",message:p+" "+h+" "+b}),this.appService.playAudio("error")})}else console.log("Not valid data to place order")}}saveAsCF(){let e=this.curr_positions_trades.map(r=>Object.assign({},r));console.log("c_positions",e);let i={instru:"",expiry:"",trades:{}};i.instru=this.instru,i.expiry=this.expiryDate,e.forEach(r=>{delete r.addToOrders,delete r.selected,delete r.selectedActual,delete r.roll_qty,delete r.rollstrike,delete r.rollstrike_new,delete r.pnl,delete r.alertPrice,delete r.alertStatus}),i.trades=e,console.log("Saving positions CF: ",i),console.log("Saving positions json CF: ",JSON.stringify(i)),localStorage.setItem("cf_curr_positions"+this.currLoadNum,JSON.stringify(i))}removeCF(){localStorage.removeItem("cf_curr_positions"+this.currLoadNum)}use_cf_change(e){this.use_cf_strategies[this.currLoadNum]=this.use_cf}tagSearch_change(e){this.tagSearch_strategies[this.currLoadNum]=this.tagSearch}use_tag_change(e){this.use_tag_strategies[this.currLoadNum]=this.use_tag}use_include_guid_change(e){this.use_include_guid_strategies[this.currLoadNum]=this.use_include_guid}use_exclude_guid_change(e){this.use_exclude_guid_strategies[this.currLoadNum]=this.use_exclude_guid}refreshPositions(){console.log("refreshing positions");let e=this.curr_positions_trades;this.curr_positions_trades=[],this.sl_trades=[];let i=this.tagSearch;this.use_tag||(i="");let r=this.includeGUIDs;this.use_include_guid||(r="");let s=this.excludeGUIDs;if(this.use_exclude_guid||(s=""),f.orders.forEach(o=>{if(console.log("tag search",o.tags,i),o.instru===this.instru&&(o.tags.includes(i)&&!s.includes(o.guid)||r.includes(o.guid))&&o.status==="COMPLETE"){let a=new Date(o.expiry),l=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],c=("0"+a.getDate()).slice(-2),u=a.getMonth(),d=l[u],h=a.getFullYear(),p=c+d+h,g=""+a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2);(this.use_curr_expiry&&g===this.expiryDate||!this.use_curr_expiry)&&this.curr_positions_trades.push({qty:o.qty,scrip:o.scrip,expiry:p,entry:o.tradedPrice,exit:0,addToOrders:!1,selected:!0,selectedActual:!1,rollstrike:null,rollstrike_new:o.scrip,roll_qty:this.appService.getQtyUptoFreezeLimit(this.instru,o.qty,this.inlineOC_qty),alertPrice:null,alertStatus:""})}if(o.instru===this.instru&&o.status==="TRIGGER PENDING"&&o.triggerPrice!==0){let a=new Date(o.expiry),l=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],c=("0"+a.getDate()).slice(-2),u=a.getMonth(),d=l[u],h=a.getFullYear(),p=c+d+h;this.sl_trades.push({qty:o.qty,scrip:o.scrip,expiry:p,price:o.tradedPrice,trigger_price:o.triggerPrice,order_id:o.id})}}),console.log("this.curr_positions_trades before adding CF",this.curr_positions_trades),this.use_cf){let o=JSON.parse(localStorage.getItem("cf_curr_positions"+this.currLoadNum));o&&o.trades&&o.trades.forEach(a=>{this.curr_positions_trades.push({qty:a.qty,scrip:a.scrip,expiry:a.expiry,entry:a.entry,exit:a.exit,addToOrders:!1,selected:!0,selectedActual:!1,rollstrike:null,rollstrike_new:a.scrip,roll_qty:this.appService.getQtyUptoFreezeLimit(this.instru,a.qty,this.inlineOC_qty),alertPrice:null,alertStatus:""})}),console.log("this.curr_positions_trades after adding CF",this.curr_positions_trades)}this.mergePositions(),this.sortPositions(),console.log("this.curr_positions_trades after merge",this.curr_positions_trades),console.log("prev_positions",e),this.getPayoff(),this.getMargin(),this.crossCheckPositions(),this.copyProperties(e),this.sortSLLPositions(),this.updateOCValuesForSLL()}copyProperties(e){console.log("prev pos",e),this.curr_positions_trades&&this.curr_positions_trades.forEach(i=>{if(i.exit===0){let r=this.findInPrevious(e,i.scrip);if(console.log("chart component found",r),r&&(r.rollstrike_new&&(i.rollstrike_new=r.rollstrike_new),r.alertPrice&&(i.alertPrice=r.alertPrice),i.qty===r.qty?i.roll_qty=r.roll_qty:i.roll_qty=this.appService.getQtyUptoFreezeLimit(this.instru,i.qty,this.inlineOC_qty)),!this.show_algo&&!i.alertPrice)for(let s=0;s<f.orders.length;s++){let o=f.orders[s];if(o.scrip===i.scrip&&o.status==="COMPLETE"&&o.qty<0){i.alertPrice=o.tradedPrice+o.tradedPrice*.3;break}}}})}findInPrevious(e,i){let r=null;if(e)return e.forEach(s=>{if(s.exit===0&&s.scrip===i){r=s;return}}),r}saveMTMToLocal(){let e=new Date,i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),r=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+e.toTimeString().split(" ")[0],s=this.getStrategyPnL(1),o=JSON.parse(localStorage.getItem("mtm_1_"+i));console.log("mtm 1",this.algo_mtm),o||(o=[]),o.push([r,s]),localStorage.setItem("mtm_1_"+i,JSON.stringify(o))}startAlgo(){if(f.enableAlgo=!0,this.enableAlgo=!0,this.loadAlgoPosFromLocal(),f.expiryDateToTrade){this.loadAlgoStrategySlot(),this.recreateAlgoPos(),setTimeout(()=>{this.entryScheduler(),this.algoScheduler()},2e3);let e=setInterval(()=>{this.isMarketClosed()?clearInterval(e):this.saveAlgoMTM()},3e4)}else f.instruToTrade="",this.addToAlgoLog("No instrument found to trade today")}stopAlgo(){f.enableAlgo=!1,this.enableAlgo=!1}loadAlgoPosFromLocal(){let e=new Date,i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),r=JSON.parse(localStorage.getItem("algo_log_"+i));r&&(this.addToAlgoLog("Loading algoLog from localStorage"),this.algoLog=r,console.log("algo log",this.algoLog,r));let s=JSON.parse(localStorage.getItem("algo_slabEntered_"+i));s&&(this.addToAlgoLog("Loading slabEntered from localStorage"),f.slabEntered=s,console.log("algo slabEntered",f.slabEntered,s));let o=JSON.parse(localStorage.getItem("algo_slabOrderId_"+i));o&&(this.addToAlgoLog("Loading slabOrderId from localStorage"),f.slabOrderId=o,console.log("algo slabOrderId",f.slabOrderId,o));let a=JSON.parse(localStorage.getItem("algo_slabStrikes_"+i));a&&(this.addToAlgoLog("Loading slabStrikes from localStorage"),f.slabStrikes=a,console.log("algo slabStrikes",f.slabStrikes,a));let l=JSON.parse(localStorage.getItem("algo_slabCurrEntryPrice_"+i));l&&(this.addToAlgoLog("Loading slabCurrEntryPrice from localStorage"),f.slabCurrEntryPrice=l,console.log("algo slabCurrEntryPrice",f.slabCurrEntryPrice,l))}saveAlgoPosToLocal(){let e=new Date,i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2);localStorage.setItem("algo_log_"+i,JSON.stringify(this.algoLog)),localStorage.setItem("algo_slabEntered_"+i,JSON.stringify(f.slabEntered)),localStorage.setItem("algo_slabOrderId_"+i,JSON.stringify(f.slabOrderId)),localStorage.setItem("algo_slabStrikes_"+i,JSON.stringify(f.slabStrikes)),localStorage.setItem("algo_slabCurrEntryPrice_"+i,JSON.stringify(f.slabCurrEntryPrice))}addToAlgoLog(e){this.algoLog+=new Date().toLocaleTimeString()+" - "+e+`\r
`,console.log("ALGO "+new Date().toLocaleTimeString()+" - "+e)}rollAlgoStrikeKeyUp(e,i,r){console.log(e),e.key==="ArrowUp"?(r==="sl"&&(i.sl_strike=this.changeAlgoStrike(this.strikeStepValue,i.sl_strike,i.scrip,r)),r==="rollin"&&(i.rollin_strike=this.changeAlgoStrike(this.strikeStepValue,i.rollin_strike,i.scrip,r))):e.key==="ArrowDown"&&(r==="sl"&&(i.sl_strike=this.changeAlgoStrike(-this.strikeStepValue,i.sl_strike,i.scrip,r)),r==="rollin"&&(i.rollin_strike=this.changeAlgoStrike(-this.strikeStepValue,i.rollin_strike,i.scrip,r)))}changeAlgoStrike(e,i,r,s){let o=i,a="";o.includes("CE")&&(a="CE"),o.includes("PE")&&(a="PE"),o=Number(o.slice(0,-2));let l=Number(r.slice(0,-2)),c=o+e;return a==="CE"&&(s==="sl"&&c<l&&(c=l),s==="rollin"&&c>l&&(c=l)),a==="PE"&&(s==="sl"&&c>l&&(c=l),s==="rollin"&&c<l&&(c=l)),c+a}isMarketClosed(){let e=new Date,i=new Date;return i.setHours(15),i.setMinutes(30),i.setSeconds(0,0),e.getTime()>=i.getTime()}isSystemOkay(){return!!(this.enableAlgo&&this.zerodhaService.isSocketConnected())}findInstruToTrade(){if(f.instruToTrade="BANKNIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.bnfExpiries),f.expiryDateToTrade||(f.instruToTrade="FINNIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.finniftyExpiries)),f.expiryDateToTrade||(f.instruToTrade="SENSEX",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.sensexExpiries)),f.expiryDateToTrade||(f.instruToTrade="NIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.niftyExpiries)),f.expiryDateToTrade||(f.instruToTrade="MIDCPNIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.midcapExpiries)),f.expiryDateToTrade||(f.instruToTrade="BANKEX",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.bankexExpiries)),f.expiryDateToTrade){let e=""+f.expiryDateToTrade.getFullYear()+"-"+("0"+(f.expiryDateToTrade.getMonth()+1)).slice(-2)+"-"+("0"+f.expiryDateToTrade.getDate()).slice(-2);f.expiryDateToTrade=e}else f.instruToTrade="",this.addToAlgoLog("No instrument found to trade today");this.instruToTrade=f.instruToTrade,this.expiryDateToTrade=f.expiryDateToTrade}loadAlgoStrategySlot(){this.instru=f.instruToTrade,this.expiryDate=f.expiryDateToTrade,this.reloadPayoffData(f.algoStrategyNum),this.loadOptionChain()}entryScheduler(){console.log("ALGO "+new Date().toLocaleTimeString()+" - entryInterval starting now"),this.entryInterval=setInterval(()=>{if(this.isMarketClosed()){this.addToAlgoLog("Market closed. Stopping entryInterval"),clearInterval(this.entryInterval);return}if(!this.isSystemOkay()){console.log("ALGO "+new Date().toLocaleTimeString()+" - entryInterval - System not okay. Skipping...");return}let e=new Date,i=f.slabEntryTime[f.instruToTrade];for(let[o,a]of Object.entries(i)){let c=String(a).split(":"),u=Number(c[0]),d=Number(c[1]),h=new Date;if(h.setHours(u),h.setMinutes(d),h.setSeconds(0,0),e.getTime()>=h.getTime()&&f.slabEntered[f.instruToTrade][o]==!1){let p=f.strike_diff[f.instruToTrade],g=this.mapService.getScripLTP(null,null,f.instruToTrade,null);g=Math.round(g/p)*p;let A=f.slabEntryDist[f.instruToTrade][o],y=g+A,b=y+"CE",x=g-A,P=x+"PE",T=this.getLTP(f.expiryDateToTrade,b,f.instruToTrade),k=this.getLTP(f.expiryDateToTrade,P,f.instruToTrade);T&&k?this.algoSimulated?(this.addToAlgoLog("Enter - Slab "+o+" - "+b+" - "+f.slabQty[f.instruToTrade][o]+" - "+T+" - marked for time "+u+":"+d),this.addToAlgoLog("Enter - Slab "+o+" - "+P+" - "+f.slabQty[f.instruToTrade][o]+" - "+k+" - marked for time "+u+":"+d),f.slabStrikes[f.instruToTrade][o].CE=y,f.slabStrikes[f.instruToTrade][o].PE=x,f.slabEntered[f.instruToTrade][o]=!0,f.slabCurrEntryPrice[f.instruToTrade][o].CE=T,f.slabCurrEntryPrice[f.instruToTrade][o].PE=k,this.addPosition(f.slabQty[f.instruToTrade][o],b,T,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][o],P,k,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1)):(this.executeAlgoOrder(o,b,null,"CE"),this.executeAlgoOrder(o,P,null,"PE"),this.addToAlgoLog("Enter - Slab "+o+" - "+b+" - "+f.slabQty[f.instruToTrade][o]+" - marked for time "+u+":"+d),this.addToAlgoLog("Enter - Slab "+o+" - "+P+" - "+f.slabQty[f.instruToTrade][o]+" - marked for time "+u+":"+d)):console.log("ALGO "+new Date().toLocaleTimeString()+" - LTPs not found for entering algo",b,T,P,k)}}let r=!0,s=f.slabEntered[f.instruToTrade];for(let[o,a]of Object.entries(s))a==!1&&(r=!1);if(r){this.addToAlgoLog("All Slabs entered. Stopping entryInterval"),clearInterval(this.entryInterval);return}},1e3)}isMinDist(e){e=Number(e);let i=f.strike_diff[f.instruToTrade],r=this.mapService.getScripLTP(null,null,f.instruToTrade,null);r=Math.round(r/i)*i;let s=new Date,o=f.minDistTillTime[f.instruToTrade],a=0;for(let[l,c]of Object.entries(o)){let d=String(l).split(":"),h=Number(d[0]),p=Number(d[1]),g=new Date;if(g.setHours(h),g.setMinutes(p),g.setSeconds(0,0),s.getTime()<=g.getTime()){a=Number(c);break}}return Math.abs(r-e)>=a}sortAlgoPositions(){this.algo_pos.sort((e,i)=>{let r=e.scrip.slice(0,-2),s=i.scrip.slice(0,-2);return r===s&&e.scrip.includes("CE")&&i.scrip.includes("PE")?-1:r===s&&e.scrip.includes("PE")&&i.scrip.includes("CE")?1:this.compareForSorting(e.scrip,i.scrip)})}getAlgoPosLTP(e){return this.getLTP(f.expiryDateToTrade,e,f.instruToTrade)}recreateAlgoPos(){let e=this.algo_pos.map(r=>Object.assign({},r));console.log("algo copy",e,this.algo_pos),this.algo_pos=[];let i=f.slabStrikes[f.instruToTrade];for(let[r,s]of Object.entries(i)){let o=f.slabSL[f.instruToTrade][r],a=f.slabRollIn[f.instruToTrade][r],l=f.slabQty[f.instruToTrade][r],c="",u="";if(!this.algoSimulated){let p=!1,g=e.find(b=>b.slab==Number(r)&&b.type=="CE");if(g&&g.orderId!==f.slabOrderId[f.instruToTrade][r].CE&&g.scrip==s.CE+"CE"&&(p=!0,f.slabOrderId[f.instruToTrade][r].CE=g.orderId),(p||s.CE==""||!f.slabCurrEntryPrice[f.instruToTrade][r].CE)&&f.slabOrderId[f.instruToTrade][r].CE){let b=f.orders.find(x=>x.id===f.slabOrderId[f.instruToTrade][r].CE);b&&(f.slabStrikes[f.instruToTrade][r].CE=this.mapService.parseScrip(b.scrip).scrip,c=b.status,b.status==="COMPLETE"&&(f.slabCurrEntryPrice[f.instruToTrade][r].CE=b.tradedPrice))}let A=!1,y=e.find(b=>b.slab==Number(r)&&b.type=="PE");if(y&&y.orderId!==f.slabOrderId[f.instruToTrade][r].PE&&y.scrip==s.PE+"PE"&&(A=!0,f.slabOrderId[f.instruToTrade][r].PE=y.orderId),(A||s.PE==""||!f.slabCurrEntryPrice[f.instruToTrade][r].PE)&&f.slabOrderId[f.instruToTrade][r].PE){let b=f.orders.find(x=>x.id===f.slabOrderId[f.instruToTrade][r].PE);b&&(f.slabStrikes[f.instruToTrade][r].PE=this.mapService.parseScrip(b.scrip).scrip,u=b.status,b.status==="COMPLETE"&&(f.slabCurrEntryPrice[f.instruToTrade][r].PE=b.tradedPrice))}}let d=s.CE;if(d!==""){let p=f.slabCurrEntryPrice[f.instruToTrade][r].CE;p=Math.round((p+.001)*100)/100;let g=null,A=null,y=null,b=null,x=e.find(T=>T.slab==Number(r)&&T.type=="CE");x&&x.scrip==s.CE+"CE"?(g=x.sl,A=x.rollin,y=x.sl_strike.slice(0,-2),b=x.rollin_strike.slice(0,-2)):p&&(g=p+p*o,g=Math.round((g+.001)*100)/100,A=p-p*a,A=Math.round((A+.001)*100)/100,y=Number(d)+Number(f.strike_diff[f.instruToTrade]*f.rolloutStrikeMultiple),b=Number(d)-Number(f.strike_diff[f.instruToTrade]));let P=this.createAlgoPos(r,"CE",l,p,d+"CE",g,y+"CE",A,b+"CE",f.slabOrderId[f.instruToTrade][r].CE,c);this.algo_pos.push(P)}let h=s.PE;if(h!==""){let p=f.slabCurrEntryPrice[f.instruToTrade][r].PE;p=Math.round((p+.001)*100)/100;let g=null,A=null,y=null,b=null,x=e.find(T=>T.slab==Number(r)&&T.type=="PE");x&&x.scrip==s.PE+"PE"?(g=x.sl,A=x.rollin,y=x.sl_strike.slice(0,-2),b=x.rollin_strike.slice(0,-2)):p&&(g=p+p*o,g=Math.round((g+.001)*100)/100,A=p-p*a,A=Math.round((A+.001)*100)/100,y=Number(h)-Number(f.strike_diff[f.instruToTrade]*f.rolloutStrikeMultiple),b=Number(h)+Number(f.strike_diff[f.instruToTrade]));let P=this.createAlgoPos(r,"PE",l,p,h+"PE",g,y+"PE",A,b+"PE",f.slabOrderId[f.instruToTrade][r].PE,u);this.algo_pos.push(P)}}this.sortAlgoPositions(),this.saveAlgoPosToLocal()}createAlgoPos(e,i,r,s,o,a,l,c,u,d,h){let p=new Ag;return p.slab=e,p.type=i,p.qty=r,p.entry=s,p.scrip=o,p.sl=a,p.sl_strike=l,p.rollin=c,p.rollin_strike=u,p.orderId=d,p.orderStatus=h,p}saveAlgoMTM(){let e=new Date,i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),r=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+e.toTimeString().split(" ")[0],s=this.getStrategyPnL(f.algoStrategyNum),o=JSON.parse(localStorage.getItem("algo_mtm_"+i));console.log("algo mtm",this.algo_mtm),o||(o=[]),o.push([r,s]),localStorage.setItem("algo_mtm_"+i,JSON.stringify(o))}executeAlgoOrder(e,i,r,s){console.log("executeAlgoOrder",e,i,r,s);let o={instru:f.instruToTrade,expiry_date:f.expiryDateToTrade,curr_qty:f.slabQty[f.instruToTrade][e],curr_scrip:i,new_scrip:r};this.place_roll_orders(o,!0,!1,null,null,"NRML",this.tagSearch,0,f.slabOrderId[f.instruToTrade][e][s])}getSLCount(e){let i=f.slabSLCounter[f.instruToTrade][e.slab][e.type];return i===0?"":i}getRollInCount(e){let i=f.slabRollInCounter[f.instruToTrade][e.slab][e.type];return i===0?"":i}getAlgoOrderId(e){let i=f.orders.find(r=>r.id===f.slabOrderId[f.instruToTrade][e.slab][e.type]);return i?i.id:""}getAlgoOrderStatus(e){let i=f.orders.find(r=>r.id===f.slabOrderId[f.instruToTrade][e.slab][e.type]);return i?i.id:""}algoScheduler(){console.log("ALGO "+new Date().toLocaleTimeString()+" - algoInterval starting now"),this.algoInterval=setInterval(()=>{if(this.isMarketClosed()){this.addToAlgoLog("Market closed. Stopping algoInterval"),clearInterval(this.algoInterval);return}if(!this.isSystemOkay()){console.log("ALGO "+new Date().toLocaleTimeString()+" - algoInterval - System not okay. Skipping...");return}let e=f.slabEntered[f.instruToTrade];for(let[i,r]of Object.entries(e))if(r==!0){let s=this.algo_pos.find(a=>a.slab==Number(i)&&a.type=="CE");if(s){let a=s.scrip.slice(0,-2),l=s.entry;if(a&&l){let c=this.getLTP(f.expiryDateToTrade,a+"CE",f.instruToTrade),u=s.sl,d=s.rollin;if(c>=u){let h=f.slabSLCounter[f.instruToTrade][i].CE;if(h>=f.secsToWaitForSL){f.slabSLCounter[f.instruToTrade][i].CE=0;let p=s.sl_strike.slice(0,-2),g=p+"CE";if(this.algoSimulated){let A=this.getLTP(f.expiryDateToTrade,g,f.instruToTrade);f.slabStrikes[f.instruToTrade][i].CE=p,f.slabCurrEntryPrice[f.instruToTrade][i].CE=A,this.addPosition(-f.slabQty[f.instruToTrade][i],a+"CE",c,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][i],g,A,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"CE - "+f.slabQty[f.instruToTrade][i]+" - "+c),this.addToAlgoLog("Rollout - Slab "+i+" - "+g+" - "+f.slabQty[f.instruToTrade][i]+" - "+A)}else f.slabStrikes[f.instruToTrade][i].CE="",f.slabCurrEntryPrice[f.instruToTrade][i].CE=null,this.executeAlgoOrder(i,a+"CE",g,"CE"),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"CE - "+f.slabQty[f.instruToTrade][i]),this.addToAlgoLog("Rollout - Slab "+i+" - "+g+" - "+f.slabQty[f.instruToTrade][i])}else f.slabSLCounter[f.instruToTrade][i].CE=h+1}else f.slabSLCounter[f.instruToTrade][i].CE=0;if(c<=d||c<1){let h=f.slabRollInCounter[f.instruToTrade][i].CE;if(h>=f.secsToWaitForSL){f.slabRollInCounter[f.instruToTrade][i].CE=0;let p=s.rollin_strike.slice(0,-2);if(this.isMinDist(p)){let g=p+"CE";if(this.algoSimulated){let A=this.getLTP(f.expiryDateToTrade,g,f.instruToTrade);f.slabStrikes[f.instruToTrade][i].CE=p,f.slabCurrEntryPrice[f.instruToTrade][i].CE=A,this.addPosition(-f.slabQty[f.instruToTrade][i],a+"CE",c,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][i],g,A,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"CE - "+f.slabQty[f.instruToTrade][i]+" - "+c),this.addToAlgoLog("Rollin - Slab "+i+" - "+g+" - "+f.slabQty[f.instruToTrade][i]+" - "+A)}else f.slabStrikes[f.instruToTrade][i].CE="",f.slabCurrEntryPrice[f.instruToTrade][i].CE=null,this.executeAlgoOrder(i,a+"CE",g,"CE"),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"CE - "+f.slabQty[f.instruToTrade][i]),this.addToAlgoLog("Rollin - Slab "+i+" - "+g+" - "+f.slabQty[f.instruToTrade][i])}else console.log("ALGO "+new Date().toLocaleTimeString()+" -  Cannot Roll In CE due to min. distance",i)}else f.slabRollInCounter[f.instruToTrade][i].CE=h+1}else f.slabRollInCounter[f.instruToTrade][i].CE=0}}let o=this.algo_pos.find(a=>a.slab==Number(i)&&a.type=="PE");if(o){let a=o.scrip.slice(0,-2),l=o.entry;if(a&&l){let c=this.getLTP(f.expiryDateToTrade,a+"PE",f.instruToTrade),u=o.sl,d=o.rollin;if(c>=u){let h=f.slabSLCounter[f.instruToTrade][i].PE;if(h>=f.secsToWaitForSL){f.slabSLCounter[f.instruToTrade][i].PE=0;let p=o.sl_strike.slice(0,-2),g=p+"PE";if(this.algoSimulated){let A=this.getLTP(f.expiryDateToTrade,g,f.instruToTrade);f.slabStrikes[f.instruToTrade][i].PE=p,f.slabCurrEntryPrice[f.instruToTrade][i].PE=A,this.addPosition(-f.slabQty[f.instruToTrade][i],a+"PE",c,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][i],g,A,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"PE - "+f.slabQty[f.instruToTrade][i]+" - "+c),this.addToAlgoLog("Rollout - Slab "+i+" - "+g+" - "+f.slabQty[f.instruToTrade][i]+" - "+A)}else f.slabStrikes[f.instruToTrade][i].PE="",f.slabCurrEntryPrice[f.instruToTrade][i].PE=null,this.executeAlgoOrder(i,a+"PE",g,"PE"),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"PE - "+f.slabQty[f.instruToTrade][i]),this.addToAlgoLog("Rollout - Slab "+i+" - "+g+" - "+f.slabQty[f.instruToTrade][i])}else f.slabSLCounter[f.instruToTrade][i].PE=h+1}else f.slabSLCounter[f.instruToTrade][i].PE=0;if(c<=d||c<1){let h=f.slabRollInCounter[f.instruToTrade][i].PE;if(h>=f.secsToWaitForSL){f.slabRollInCounter[f.instruToTrade][i].PE=0;let p=o.rollin_strike.slice(0,-2);if(this.isMinDist(p)){let g=p+"PE";if(this.algoSimulated){let A=this.getLTP(f.expiryDateToTrade,g,f.instruToTrade);f.slabStrikes[f.instruToTrade][i].PE=p,f.slabCurrEntryPrice[f.instruToTrade][i].PE=A,this.addPosition(-f.slabQty[f.instruToTrade][i],a+"PE",c,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][i],g,A,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"PE - "+f.slabQty[f.instruToTrade][i]+" - "+c),this.addToAlgoLog("Rollin - Slab "+i+" - "+g+" - "+f.slabQty[f.instruToTrade][i]+" - "+A)}else f.slabStrikes[f.instruToTrade][i].PE="",f.slabCurrEntryPrice[f.instruToTrade][i].PE=null,this.executeAlgoOrder(i,a+"PE",g,"PE"),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"PE - "+f.slabQty[f.instruToTrade][i]),this.addToAlgoLog("Rollin - Slab "+i+" - "+g+" - "+f.slabQty[f.instruToTrade][i])}else console.log("ALGO "+new Date().toLocaleTimeString()+" -  Cannot Roll In PE due to min. distance",i)}else f.slabRollInCounter[f.instruToTrade][i].PE=h+1}else f.slabRollInCounter[f.instruToTrade][i].PE=0}}}},1e3)}algoSchedule2(){console.log("ALGO "+new Date().toLocaleTimeString()+" - algoInterval starting now"),this.algoInterval=setInterval(()=>{if(this.isMarketClosed()){this.addToAlgoLog("Market closed. Stopping algoInterval"),clearInterval(this.algoInterval);return}if(!this.isSystemOkay()){console.log("ALGO "+new Date().toLocaleTimeString()+" - algoInterval - System not okay. Skipping...");return}let e=f.slabEntered[f.instruToTrade];for(let[i,r]of Object.entries(e))if(r==!0){let s=f.slabSL[f.instruToTrade][i],o=f.slabRollIn[f.instruToTrade][i],a=f.slabStrikes[f.instruToTrade][i].CE,l=f.slabCurrEntryPrice[f.instruToTrade][i].CE;if(a&&l){let d=this.getLTP(f.expiryDateToTrade,a+"CE",f.instruToTrade),h=l+l*s,p=l-l*o;if(d>=h){let g=f.slabSLCounter[f.instruToTrade][i].CE;if(console.log("ALGO "+new Date().toLocaleTimeString()+" -  Counter-SL CE: ",i,d,h,g),g>=f.secsToWaitForSL){f.slabSLCounter[f.instruToTrade][i].CE=0;let A=a+f.strike_diff[f.instruToTrade]*f.rolloutStrikeMultiple,y=A+"CE";if(this.algoSimulated){let b=this.getLTP(f.expiryDateToTrade,y,f.instruToTrade);f.slabStrikes[f.instruToTrade][i].CE=A,f.slabCurrEntryPrice[f.instruToTrade][i].CE=b,this.addPosition(-f.slabQty[f.instruToTrade][i],a+"CE",d,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][i],y,b,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"CE - "+f.slabQty[f.instruToTrade][i]+" - "+d),this.addToAlgoLog("Rollout - Slab "+i+" - "+y+" - "+f.slabQty[f.instruToTrade][i]+" - "+b)}else f.slabStrikes[f.instruToTrade][i].CE="",f.slabCurrEntryPrice[f.instruToTrade][i].CE=null,this.executeAlgoOrder(i,a+"CE",y,"CE"),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"CE - "+f.slabQty[f.instruToTrade][i]),this.addToAlgoLog("Rollout - Slab "+i+" - "+y+" - "+f.slabQty[f.instruToTrade][i])}else f.slabSLCounter[f.instruToTrade][i].CE=g+1}else f.slabSLCounter[f.instruToTrade][i].CE=0;if(d<=p||d<1){let g=f.slabRollInCounter[f.instruToTrade][i].CE;if(console.log("ALGO "+new Date().toLocaleTimeString()+" -  Counter-RI CE: ",i,d,p,g),g>=f.secsToWaitForSL){f.slabRollInCounter[f.instruToTrade][i].CE=0;let A=a-f.strike_diff[f.instruToTrade];if(this.isMinDist(A)){let y=A+"CE";if(this.algoSimulated){let b=this.getLTP(f.expiryDateToTrade,y,f.instruToTrade);f.slabStrikes[f.instruToTrade][i].CE=A,f.slabCurrEntryPrice[f.instruToTrade][i].CE=b,this.addPosition(-f.slabQty[f.instruToTrade][i],a+"CE",d,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][i],y,b,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"CE - "+f.slabQty[f.instruToTrade][i]+" - "+d),this.addToAlgoLog("Rollin - Slab "+i+" - "+y+" - "+f.slabQty[f.instruToTrade][i]+" - "+b)}else f.slabStrikes[f.instruToTrade][i].CE="",f.slabCurrEntryPrice[f.instruToTrade][i].CE=null,this.executeAlgoOrder(i,a+"CE",y,"CE"),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"CE - "+f.slabQty[f.instruToTrade][i]),this.addToAlgoLog("Rollin - Slab "+i+" - "+y+" - "+f.slabQty[f.instruToTrade][i])}else console.log("ALGO "+new Date().toLocaleTimeString()+" -  Cannot Roll In CE due to min. distance",i)}else f.slabRollInCounter[f.instruToTrade][i].CE=g+1}else f.slabRollInCounter[f.instruToTrade][i].CE=0}let c=f.slabStrikes[f.instruToTrade][i].PE,u=f.slabCurrEntryPrice[f.instruToTrade][i].PE;if(c&&u){let d=this.getLTP(f.expiryDateToTrade,c+"PE",f.instruToTrade),h=u+u*s,p=u-u*o;if(d>=h){let g=f.slabSLCounter[f.instruToTrade][i].PE;if(console.log("ALGO "+new Date().toLocaleTimeString()+" -  Counter-SL PE: ",i,d,h,g),g>=f.secsToWaitForSL){f.slabSLCounter[f.instruToTrade][i].PE=0;let A=c-f.strike_diff[f.instruToTrade]*f.rolloutStrikeMultiple,y=A+"PE";if(this.algoSimulated){let b=this.getLTP(f.expiryDateToTrade,y,f.instruToTrade);f.slabStrikes[f.instruToTrade][i].PE=A,f.slabCurrEntryPrice[f.instruToTrade][i].PE=b,this.addPosition(-f.slabQty[f.instruToTrade][i],c+"PE",d,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][i],y,b,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+i+" - "+c+"PE - "+f.slabQty[f.instruToTrade][i]+" - "+d),this.addToAlgoLog("Rollout - Slab "+i+" - "+y+" - "+f.slabQty[f.instruToTrade][i]+" - "+b)}else f.slabStrikes[f.instruToTrade][i].PE="",f.slabCurrEntryPrice[f.instruToTrade][i].PE=null,this.executeAlgoOrder(i,c+"PE",y,"PE"),this.addToAlgoLog("Exit - Slab "+i+" - "+c+"PE - "+f.slabQty[f.instruToTrade][i]),this.addToAlgoLog("Rollout - Slab "+i+" - "+y+" - "+f.slabQty[f.instruToTrade][i])}else f.slabSLCounter[f.instruToTrade][i].PE=g+1}else f.slabSLCounter[f.instruToTrade][i].PE=0;if(d<=p||d<1){let g=f.slabRollInCounter[f.instruToTrade][i].PE;if(console.log("ALGO "+new Date().toLocaleTimeString()+" -  Counter-RI PE: ",i,d,p,g),g>=f.secsToWaitForSL){f.slabRollInCounter[f.instruToTrade][i].PE=0;let A=c+f.strike_diff[f.instruToTrade];if(this.isMinDist(A)){let y=A+"PE";if(this.algoSimulated){let b=this.getLTP(f.expiryDateToTrade,y,f.instruToTrade);f.slabStrikes[f.instruToTrade][i].PE=A,f.slabCurrEntryPrice[f.instruToTrade][i].PE=b,this.addPosition(-f.slabQty[f.instruToTrade][i],c+"PE",d,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][i],y,b,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+i+" - "+c+"PE - "+f.slabQty[f.instruToTrade][i]+" - "+d),this.addToAlgoLog("Rollin - Slab "+i+" - "+y+" - "+f.slabQty[f.instruToTrade][i]+" - "+b)}else f.slabStrikes[f.instruToTrade][i].PE="",f.slabCurrEntryPrice[f.instruToTrade][i].PE=null,this.executeAlgoOrder(i,c+"PE",y,"PE"),this.addToAlgoLog("Exit - Slab "+i+" - "+c+"PE - "+f.slabQty[f.instruToTrade][i]),this.addToAlgoLog("Rollin - Slab "+i+" - "+y+" - "+f.slabQty[f.instruToTrade][i])}else console.log("ALGO "+new Date().toLocaleTimeString()+" -  Cannot Roll In PE due to min. distance",i)}else f.slabRollInCounter[f.instruToTrade][i].PE=g+1}else f.slabRollInCounter[f.instruToTrade][i].PE=0}}},1e3)}startAlgoSS(){if(this.addToAlgoSSLog("Starting"),f.enableAlgo=!0,this.enableAlgo=!0,f.expiryDateToTrade){this.loadOptionChain(f.instruToTrade,f.expiryDateToTrade);let e=setInterval(()=>{this.isMarketClosed()||!this.enableAlgo?(this.addToAlgoSSLog("Stopping"),this.stopAlgoSS(),clearInterval(e)):f.miscEvent$.next("refreshAll")},1e4),i=setInterval(()=>{this.isMarketClosed()?clearInterval(i):this.saveAlgoMTMSS()},3e4)}else f.instruToTrade=""}stopAlgoSS(){this.addToAlgoSSLog("Stop triggered"),f.enableAlgo=!1,this.enableAlgo=!1}findInstruToTradeSS(){if(f.instruToTrade="BANKNIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.bnfExpiries),f.expiryDateToTrade||(f.instruToTrade="FINNIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.finniftyExpiries)),f.expiryDateToTrade||(f.instruToTrade="SENSEX",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.sensexExpiries)),f.expiryDateToTrade||(f.instruToTrade="NIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.niftyExpiries)),f.expiryDateToTrade||(f.instruToTrade="MIDCPNIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.midcapExpiries)),f.expiryDateToTrade||(f.instruToTrade="BANKEX",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.bankexExpiries)),f.expiryDateToTrade){let e=""+f.expiryDateToTrade.getFullYear()+"-"+("0"+(f.expiryDateToTrade.getMonth()+1)).slice(-2)+"-"+("0"+f.expiryDateToTrade.getDate()).slice(-2);f.expiryDateToTrade=e}else f.instruToTrade="";this.instruToTrade=f.instruToTrade,this.expiryDateToTrade=f.expiryDateToTrade,this.algoSS_qtyStep=f.qtyStep[this.instruToTrade]}saveAlgoMTMSS(){let e=new Date,i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),r=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+e.toTimeString().split(" ")[0],s=this.getStrategyPnL(f.algoStrategyNum),o=JSON.parse(localStorage.getItem("algo_mtm_"+i));console.log("algo mtm",this.algo_mtm),o||(o=[]),o.push([r,s]),localStorage.setItem("algo_mtm_"+i,JSON.stringify(o))}refreshAlgoSSPositions(){this.addToAlgoSSLog("-------------------- Refreshing positions --------------------");let e=f.algoTag,i=this.algoSSIncludeGUIDs,r=this.algoSSExcludeGUIDs;this.algoSS_positions=[],this.algoSS_sl_orders=[],this.algoSS_positions_UI=[],f.orders.forEach(s=>{if(s.instru===f.instruToTrade&&(s.tags.includes(e)&&!r.includes(s.guid)||i.includes(s.guid))&&(s.status==="COMPLETE"||s.status==="TRIGGER PENDING")){let o=new Date(s.expiry),a=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],l=("0"+o.getDate()).slice(-2),c=o.getMonth(),u=a[c],d=o.getFullYear(),h=l+u+d;s.status==="COMPLETE"&&this.algoSS_positions.push({qty:s.qty,scrip:s.scrip,expiry:h,entry:s.tradedPrice,triggerPrice:s.triggerPrice,exit:0}),s.status==="TRIGGER PENDING"&&this.algoSS_sl_orders.push({qty:s.qty,scrip:s.scrip,expiry:h,entry:s.tradedPrice,triggerPrice:s.triggerPrice,exit:0})}}),console.log("this.algoSS_sl_orders",this.algoSS_sl_orders),console.log("this.algoSS_positions before merge",this.algoSS_positions),this.mergeAlgoSSPositions(),console.log("this.algoSS_positions_trades after merge",this.algoSS_positions),this.algoSS_positions.forEach(s=>{this.algoSS_positions_UI.push({qty:s.qty,scrip:s.scrip,expiry:s.expiry,entry:s.entry,triggerPrice:s.triggerPrice,exit:s.exit})}),this.algoSS_sl_orders.forEach(s=>{this.algoSS_positions_UI.push({qty:s.qty,scrip:s.scrip,expiry:s.expiry,entry:s.entry,triggerPrice:s.triggerPrice,exit:s.exit})}),this.sortPositionsAlgoSS(),this.analyzeOrdersAlgoSS()}mergeAlgoSSPositions(){let e=new Map,i=new Map;for(let r=0;r<this.algoSS_positions.length;r++){let s=this.algoSS_positions[r],o=s.scrip+" "+s.expiry,a=e.get(o),l=i.get(o);if(s.exit!==0)a||(a=[]),a.push(s),e.set(o,a);else if(!l)i.set(o,s);else if(l.qty==-s.qty)l.exit=s.entry,a||(a=[]),a.push(l),e.set(o,a),i.delete(o);else if(l.qty>0&&s.qty>0||l.qty<0&&s.qty<0)l.entry=(l.entry*l.qty+s.entry*s.qty)/(l.qty+s.qty),l.entry=Math.round((l.entry+1e-5)*1e4)/1e4,l.qty+=s.qty,i.set(o,l);else if(Math.abs(l.qty)>Math.abs(s.qty))l.qty=l.qty+s.qty,i.set(o,l),s.qty=-s.qty,s.exit=s.entry,s.entry=l.entry,a||(a=[]),a.push(s),e.set(o,a);else{let c=l.qty,u=l.entry;l.qty=l.qty+s.qty,l.entry=s.entry,i.set(o,l),s.qty=c,s.exit=s.entry,s.entry=u,a||(a=[]),a.push(s),e.set(o,a)}}console.log("exitedMap algoSS:",e),console.log("mergeMap algoSS:",i),this.algoSS_positions=[];for(let[r,s]of e)s.forEach(o=>{this.algoSS_positions.push({qty:o.qty,scrip:o.scrip,expiry:o.expiry,entry:o.entry,triggerPrice:o.triggerPrice,exit:o.exit})});for(let[r,s]of i)this.algoSS_positions.push({qty:s.qty,scrip:s.scrip,expiry:s.expiry,entry:s.entry,triggerPrice:s.triggerPrice,exit:s.exit})}sortPositionsAlgoSS(){this.algoSS_positions_UI.sort((e,i)=>{if(e.exit!==0&&i.exit!==0)return this.compareForSorting(e.scrip,i.scrip);if(e.exit!==0&&i.exit===0)return-1;if(e.exit===0&&i.exit!==0)return 1;let r=e.scrip.slice(0,-2),s=i.scrip.slice(0,-2);if(r===s&&e.scrip.includes("CE")&&i.scrip.includes("PE"))return-1;if(r===s&&e.scrip.includes("PE")&&i.scrip.includes("CE"))return 1;if(r===s&&(e.scrip.includes("CE")&&i.scrip.includes("CE")||e.scrip.includes("PE")&&i.scrip.includes("PE"))){let o=new Date(e.expiry),a=new Date(i.expiry);return o<a?-1:1}return this.compareForSorting(e.scrip,i.scrip)})}analyzeOrdersAlgoSS(){f.algoSS_CE=null,f.algoSS_CE=new Nd,f.algoSS_PE=null,f.algoSS_PE=new Nd,this.algoSS_positions.forEach(e=>{f.algoSSStrike||(f.algoSSStrike=Number(e.scrip.slice(0,-2))),e.exit===0&&(e.scrip.includes("CE")&&(f.algoSS_CE.pos_open===!0?f.algoSS_CE.multiple_pos_open=!0:f.algoSS_CE.pos_open=!0,f.algoSS_CE.entry||(f.algoSS_CE.entry=Number(e.entry))),e.scrip.includes("PE")&&(f.algoSS_PE.pos_open===!0?f.algoSS_PE.multiple_pos_open=!0:f.algoSS_PE.pos_open=!0,f.algoSS_PE.entry||(f.algoSS_PE.entry=Number(e.entry)))),e.exit!==0&&(e.scrip.includes("CE")&&(f.algoSS_CE.sl_times+=1),e.scrip.includes("PE")&&(f.algoSS_PE.sl_times+=1),e.scrip.includes("CE")&&!f.algoSS_CE.entry&&(e.qty<0?f.algoSS_CE.entry=Number(e.entry):f.algoSS_CE.entry=Number(e.exit)),e.scrip.includes("PE")&&!f.algoSS_PE.entry&&(e.qty<0?f.algoSS_PE.entry=Number(e.entry):f.algoSS_PE.entry=Number(e.exit)))}),this.algoSS_sl_orders.forEach(e=>{f.algoSSStrike||(f.algoSSStrike=Number(e.scrip.slice(0,-2))),e.scrip.includes("CE")&&(e.qty>0&&(f.algoSS_CE.sl_open===!0?f.algoSS_CE.multiple_sl_open=!0:f.algoSS_CE.sl_open=!0),e.qty<0&&(f.algoSS_CE.reentry_open===!0?f.algoSS_CE.reentry_multiple_open=!0:f.algoSS_CE.reentry_open=!0)),e.scrip.includes("PE")&&(e.qty>0&&(f.algoSS_PE.sl_open===!0?f.algoSS_PE.multiple_sl_open=!0:f.algoSS_PE.sl_open=!0),e.qty<0&&(f.algoSS_PE.reentry_open===!0?f.algoSS_PE.reentry_multiple_open=!0:f.algoSS_PE.reentry_open=!0))}),this.doAlgoSS(f.algoSS_CE,"CE"),this.doAlgoSS(f.algoSS_PE,"PE")}doAlgoSS(e,i){console.log("AlgoSS obj - ",e,i);let r=i+" - ";if(r+="Entry: "+e.entry+",",r+=" Pos Open: "+e.pos_open+",",r+=" Re Open: "+e.reentry_open+",",r+=" SL Open: "+e.sl_open+",",r+=" SL Times: "+e.sl_times+",",r+=" Mul Pos Open: "+e.multiple_pos_open+",",r+=" Mul Re Open: "+e.reentry_multiple_open+",",r+=" Mul SL Open: "+e.multiple_sl_open,this.addToAlgoSSLog(r),!e.pos_open&&!e.reentry_open)if(e.sl_times===0){this.addToAlgoSSLog("First time entry");let s=this.algoTimeToEnter.split(":"),o=Number(s[0]),a=Number(s[1]),l=new Date;if(l.getHours()===o&&l.getMinutes()>=a||l.getHours()>o){if(!f.algoSSStrike){let c=null;this.oc_instru==="NIFTY"?c=50:this.oc_instru==="BANKNIFTY"?c=100:this.oc_instru==="FINNIFTY"?c=50:this.oc_instru==="MIDCPNIFTY"?c=25:(this.oc_instru==="SENSEX"||this.oc_instru==="BANKEX")&&(c=100);let u=this.mapService.getScripLTP(null,null,f.instruToTrade,null),d=Math.round(u/c)*c;f.algoSSStrike=d}this.placeAlgoSSOrder(f.algoSSStrike+i,this.algoSSQty)}else this.addToAlgoSSLog("Time not reached")}else if(e.sl_times<this.algoSSMaxSLTimes){this.addToAlgoSSLog("Reentry");let s=Math.ceil(e.entry);this.placeAlgoSSOrder(f.algoSSStrike+i,this.algoSSQty,s-this.algoSSTriggerDifference,s)}else this.addToAlgoSSLog("No action to take - max SLs reached for "+i);else if(e.pos_open&&!e.sl_open){this.addToAlgoSSLog("Set SLL");let s=Math.ceil(e.entry),o=Math.ceil(s+s*this.algoSSSLPerc/100);this.placeAlgoSSOrder(f.algoSSStrike+i,Math.abs(this.algoSSQty),o+this.algoSSTriggerDifference,o)}else this.addToAlgoSSLog("No action to take")}placeAlgoSSOrder(e,i,r=null,s=0){if(console.log("place order",i,e),i!=""&&i!=null&&e){let o={instru:f.instruToTrade,expiry:f.expiryDateToTrade,strike:this.mapService.parseScrip(e).scrip,optionType:this.mapService.parseScrip(e).type},a=this.mapService.getMapKey(o);this.zerodhaService.place_order(a,i,f.broker_auth,r,null,"NRML",f.algoTag,s).subscribe(l=>{console.log("placeAlgoSSOrder response",l),f.requestStatusEvent$.next({status:"secondary",message:"Placed "+e+" "+i})},l=>{console.log("placeAlgoSSOrder error",l);let c="Error (mostly timeout)";l.error&&l.error.message?c=l.error.message:c=l.message,f.requestStatusEvent$.next({status:"danger",message:e+" "+i+" "+c}),this.appService.playAudio("error")})}else console.log("Not valid data to place order")}getAlgoSSPosLTP(e){return this.getLTP(f.expiryDateToTrade,e,f.instruToTrade)}getAlgoSSTotalPnl(){let e=0;return this.algoSS_positions&&this.algoSS_positions.length>0&&this.algoSS_positions.forEach(i=>{if(!(i.exit===0&&i.triggerPrice!==0)){let r=this.getPnL(i,f.instruToTrade,f.expiryDateToTrade);e+=r}}),e=Math.round((e+1e-5)*100)/100,e}saveAlgoSSParams(e){let i=new Date,r=""+i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2);this.algoSSQty>=0&&(this.algoSSQty=-this.algoSSQty);let s={algoTimeToEnter:this.algoTimeToEnter,algoSSQty:this.algoSSQty,algoSSSLPerc:this.algoSSSLPerc,algoSSMaxSLTimes:this.algoSSMaxSLTimes,algoSSTriggerDifference:this.algoSSTriggerDifference,algoSSIncludeGUIDs:this.algoSSIncludeGUIDs,algoSSExcludeGUIDs:this.algoSSExcludeGUIDs};localStorage.setItem("AlgoSSParams_"+r,JSON.stringify(s))}loadAlgoSSParams(){let e=new Date,i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),r=JSON.parse(localStorage.getItem("AlgoSSParams_"+i));r&&(this.algoTimeToEnter=r.algoTimeToEnter,this.algoSSQty=r.algoSSQty,this.algoSSSLPerc=r.algoSSSLPerc,this.algoSSMaxSLTimes=r.algoSSMaxSLTimes,this.algoSSTriggerDifference=r.algoSSTriggerDifference,this.algoSSIncludeGUIDs=r.algoSSIncludeGUIDs,this.algoSSExcludeGUIDs=r.algoSSExcludeGUIDs)}addToAlgoSSLog(e){this.algoLog+=new Date().toLocaleTimeString()+" - "+e+`\r
`,console.log("ALGO SS - "+new Date().toLocaleTimeString()+" - "+e)}static \u0275fac=function(i){return new(i||n)(ve(ni),ve(Mn),ve(Ue),ve(eo),ve(Ir),ve(am),ve(b5),ve(S5))};static \u0275cmp=qi({type:n,selectors:[["app-chart"]],viewQuery:function(i,r){if(i&1&&Ly(Hv,7),i&2){let s;Vy(s=By())&&(r.chart=s.first)}},decls:481,vars:184,consts:[["popContent",""],["fileImportInputExpiry",""],["fileImportInputExpiry2",""],["fileImportInput1",""],["id","accordionPayoff",1,"accordion","mb-2"],[1,"accordion-item"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#payOffSection","aria-expanded","true","aria-controls","payOffSection",1,"accordion-button","fw-bold"],["id","payOffSection","aria-labelledby","headingOne","data-bs-parent","#accordionPayoff",1,"accordion-collapse","collapse","show","p-2"],[1,"chart-all-strategies-pnl","text-center"],[1,"d-inline-block"],[1,"mb-2"],[1,"fw-bold",3,"ngClass"],["placeholder","< Alert Price","type","number",1,"ms-4","me-2","form-control","form-control-sm","strategy_alert_field",3,"ngModelChange","ngModel"],[1,"text-danger"],[1,"d-inline-block","ps-4","pe-4"],[2,"display","flex","justify-content","space-between"],[1,"chart-flex-container"],[1,"chart-positions"],["id","algo-container-old",4,"ngIf"],["id","algo-container"],[1,"d-inline"],[1,"algo_params","d-inline"],["type","button","class","btn btn-outline-primary btn-sm me-2",3,"click",4,"ngIf"],[1,"strategy_instru","form-select","form-select-sm","me-2",2,"width","125px",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Expiry YYYY-MM-DD","id","",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","100px",3,"ngModelChange","ngModel"],["placeholder","Time","id","",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","60px",3,"change","ngModelChange","ngModel"],["placeholder","Qty","title","Quantity (ENTER NEGATIVE ONLY)","id","","type","number",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","80px",3,"change","ngModelChange","step","ngModel"],["placeholder","SL %","title","SL %","id","","type","number",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","70px",3,"change","ngModelChange","ngModel"],["placeholder","Max SL Times","title","Max SL Times","id","","type","number",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","40px",3,"change","ngModelChange","ngModel"],["placeholder","Trigger-Limit Difference","title","Trigger-Limit Difference","id","","type","number",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","40px",3,"change","ngModelChange","ngModel"],["placeholder","Include GUIDs","id","",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","300px",3,"change","ngModelChange","ngModel"],["placeholder","Exclude GUIDs","id","",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","300px",3,"change","ngModelChange","ngModel"],[1,"mt-2"],["readonly","",2,"width","100%","height","300px",3,"ngModelChange","ngModel"],[1,"table","table-sm","table-bordered","shadow","text-center"],[1,"table-light"],["scope","col",1,"width80"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"mt-2","mb-2","fw-bold"],[2,"display","inline-block","width","200px"],[3,"ngClass"],[1,"form-check","form-check-inline","use-hypo-future-class",2,"padding-left","0"],["for","use-range",1,"form-check-label"],["id","use-range","type","number","placeholder","Payoff Range",1,"ms-2","form-control","form-control-sm",2,"width","100px","display","inline-block",3,"ngModelChange","ngModel"],[1,"form-check","form-check-inline","use-hypo-future-class"],["type","checkbox","value","","id","hide-closed",1,"form-check-input",3,"ngModelChange","ngModel"],["for","hide-closed",1,"form-check-label"],["type","checkbox","value","","id","show_t0",1,"form-check-input",3,"ngModelChange","ngModel"],["for","show_t0",1,"form-check-label"],["type","checkbox","value","","id","hide-roll",1,"form-check-input",3,"ngModelChange","ngModel"],["for","hide-roll",1,"form-check-label"],["type","checkbox","value","","id","hide-extra",1,"form-check-input",3,"ngModelChange","ngModel"],["for","hide-extra",1,"form-check-label"],["type","checkbox","value","","id","show-multit0",1,"mt-2","form-check-input",3,"ngModelChange","ngModel"],["for","show-multit0",1,"form-check-label"],["type","text",1,"form-control","form-control-sm","d-inline-block","ms-2",2,"width","50px",3,"ngModelChange","ngModel"],["type","checkbox","value","","id","simulate_strategy",1,"form-check-input",3,"ngModelChange","ngModel"],["for","simulate_strategy",1,"form-check-label"],["type","checkbox","value","","id","showInlineOC",1,"form-check-input",3,"ngModelChange","ngModel"],["for","showInlineOC",1,"form-check-label"],["type","checkbox","value","","id","playAlertSound",1,"form-check-input",3,"ngModelChange","ngModel"],["for","playAlertSound",1,"form-check-label"],["type","checkbox","value","","id","showExtraOptions",1,"form-check-input",3,"ngModelChange","ngModel"],["for","showExtraOptions",1,"form-check-label"],["type","checkbox","value","","id","mfRealTime",1,"form-check-input",3,"ngModelChange","ngModel"],["for","mfRealTime",1,"form-check-label"],[4,"ngIf"],["class","mb-2",4,"ngIf"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"strategy_instru","form-select","form-select-sm","me-2",3,"ngModelChange","ngModel"],["placeholder","YYYY-MM-DD",1,"mb-1","me-3","form-control","form-control-sm","expiryDate-inputs",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-secondary","btn-sm","mb-1","me-2",3,"click"],[1,"form-check","form-check-inline"],["type","checkbox","value","","id","use_cf",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","use_cf",1,"form-check-label"],["type","checkbox","value","","id","saveMTM1",1,"form-check-input",3,"ngModelChange","ngModel"],["for","saveMTM1",1,"form-check-label"],["type","checkbox","value","","id","use_tag",1,"form-check-input","me-1","mt-2",3,"ngModelChange","change","ngModel"],["placeholder","Tag","id","tagSearch",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","200px",3,"ngModelChange","change","ngModel"],["type","checkbox","value","","id","use_include_guid",1,"form-check-input","me-1","mt-2",3,"ngModelChange","change","ngModel"],["type","text","id","includeGUIDs","placeholder","Include GUIDs",1,"form-control","form-control-sm","d-inline-block","me-2",2,"width","400px",3,"ngModelChange","ngModel"],["type","checkbox","value","","id","use_exclude_guid",1,"form-check-input","me-1","mt-2",3,"ngModelChange","change","ngModel"],["type","text","id","excludeGUIDs","placeholder","Exclude GUIDs",1,"form-control","form-control-sm","d-inline-block",2,"width","400px",3,"ngModelChange","ngModel"],[1,"form-check","form-check-inline","ms-1"],["type","checkbox","value","","id","use_curr_expiry",1,"form-check-input",3,"ngModelChange","ngModel"],["for","use_curr_expiry",1,"form-check-label"],["type","checkbox","value","","id","auto_execute",1,"form-check-input",3,"ngModelChange","ngModel"],["for","auto_execute",1,"form-check-label"],["class","form-check form-check-inline",4,"ngIf"],["class","d-inline",4,"ngIf"],["class","mt-1",4,"ngIf"],["class","table table-sm table-bordered shadow text-center",4,"ngIf"],["class","chart-chart",4,"ngIf"],[2,"display","flex"],[1,"form-check","form-check-inline","use-hypo-future-class","me-2"],["type","checkbox","value","","id","expand_single_charts",1,"form-check-input",3,"change","ngModelChange","ngModel"],["for","expand_single_charts",1,"form-check-label"],[1,"form-select","form-select-sm","d-inline-block","mb-2","me-2",2,"width","120px",3,"ngModelChange","change","ngModel"],["type","checkbox","value","","id","showATPLine",1,"form-check-input",3,"change","ngModelChange","ngModel"],["for","showATPLine",1,"form-check-label"],[2,"display","flex","flex-wrap","wrap"],["id","spot-chart",1,"opt_chart","me-4"],["id","spot-chart2",1,"opt_chart","me-4"],[1,"d-flex"],["id","chart-ce",1,"opt_chart","me-4"],[1,"chart-legend"],[1,"chart-legend-qty"],["id","chart-pe",1,"opt_chart","me-4"],["id","stock-chart",1,"opt_chart"],[1,"ms-2"],["type","checkbox","value","","id","add_strangle_chart",1,"form-check-input",3,"ngModelChange","ngModel"],["for","add_strangle_chart",1,"form-check-label"],["placeholder","Scrip 1",1,"me-3","form-control","form-control-sm",2,"display","inline-block","width","80px",3,"ngModelChange","ngModel"],["placeholder","Scrip 2",1,"me-3","form-control","form-control-sm",2,"display","inline-block","width","80px",3,"ngModelChange","ngModel"],["class","form-check form-check-inline use-hypo-future-class",4,"ngIf"],["type","button",1,"btn","btn-light","btn-sm","me-2",3,"click"],["class","opt_chart me-4","id","spot-chart-simulate",4,"ngIf"],["id","strangle-chart",1,"opt_chart"],["type","checkbox","value","","id","show_news",1,"form-check-input",3,"ngModelChange","ngModel"],["for","show_news",1,"form-check-label"],["href","https://www.google.com/search?sca_esv=556714279&rlz=1C5CHFA_enIN1013IN1013&sxsrf=AB5stBj127G0qRSDvJgWwiqXPwupGLEmJQ:1692010519401&q=moneycontrol+top+10&tbm=nws&source=univ&tbo=u&sa=X&ved=2ahUKEwjD_duv_tuAAxW9SGwGHWA5BBgQt8YBKAF6BAgNEAY&biw=1728&bih=930&dpr=2","target","_blank","rel","noopener noreferrer",1,"me-2"],["href","https://www.google.com/search?q=bq+prime+all+you+need+to+know&sca_esv=558740822&rlz=1C5CHFA_enIN1013IN1013&biw=1728&bih=930&tbm=nws&sxsrf=AB5stBiwZOAWiIkwVU-a2ny8zymQqmhjEQ%3A1692620043930&ei=C1XjZKi3OIuV-AaN0qyIBg&ved=0ahUKEwjo6NSD3e2AAxWLCt4KHQ0pC2EQ4dUDCA0&uact=5&oq=bq+prime+all+you+need+to+know&gs_lp=Egxnd3Mtd2l6LW5ld3MiHWJxIHByaW1lIGFsbCB5b3UgbmVlZCB0byBrbm93MgUQABiABDIIEAAYigUYhgMyCBAAGIoFGIYDMggQABiKBRiGA0jAC1COCViOCXAAeACQAQCYAXmgAe0BqgEDMC4yuAEDyAEA-AEBwgIHEAAYgAQYCogGAQ&sclient=gws-wiz-news","target","_blank","rel","noopener noreferrer",1,"me-2"],["href","https://www.cnbctv18.com/live-tv/","target","_blank","rel","noopener noreferrer",1,"me-2"],["class","opt-charts-parent-0",4,"ngIf"],[1,"opt-charts-parent"],[1,"form-select","form-select-sm","me-2","charts-inputs",3,"ngModelChange","change","ngModel"],["placeholder","Expiry",1,"charts-inputs","mb-1","me-3","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Call Lower",1,"charts-inputs","mb-1","me-3","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Call Higher",1,"charts-inputs","mb-1","me-3","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Put Lower",1,"charts-inputs","mb-1","me-3","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Put Higher",1,"charts-inputs","mb-1","me-3","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Multiple",1,"charts-inputs","mb-1","me-3","form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"charts-heading",2,"color","green"],[1,"opt_chart_wrapper_parent"],["class","opt_chart_wrapper",3,"click",4,"ngFor","ngForOf"],[2,"margin","0"],[1,"charts-heading",2,"color","red"],["id","accordionAlerts",1,"accordion","mb-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#alertsSection","aria-expanded","false","aria-controls","alertsSection",1,"accordion-button","collapsed","fw-bold"],["id","alertsSection","aria-labelledby","headingOne","data-bs-parent","#accordionAlerts",1,"accordion-collapse","collapse","p-2"],["class","alerts-flex-container",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-link",3,"click"],["id","accordionMultiOC",1,"accordion","mb-2"],["id","headingMultiOC",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#multiOCSection","aria-expanded","false","aria-controls","multiOCSection",1,"accordion-button","collapsed","fw-bold"],["id","multiOCSection","aria-labelledby","headingMultiOC","data-bs-parent","#accordionMultiOC",1,"accordion-collapse","collapse","p-2"],[1,"expiryDate-inputs","form-select","form-select-sm","me-2",3,"ngModelChange","ngModel"],["placeholder","Higher",1,"mb-1","me-2","form-control","form-control-sm","ocInputs",2,"width","80px !important",3,"ngModelChange","ngModel"],["placeholder","Lower",1,"mb-1","me-2","form-control","form-control-sm","ocInputs",2,"width","80px !important",3,"ngModelChange","ngModel"],["type","button",1,"mb-1","me-2","btn","btn-light","btn-sm",3,"click"],[1,"table","table-sm","table-bordered","shadow","mb-2","text-center"],["scope","col",1,"oc-col-c1"],["scope","col",1,"oc-col-c2"],["scope","col",1,"oc-col-c3"],["scope","col",1,"oc-col-c4"],["scope","col",1,"oc-col-c5"],["scope","col",1,"text-center"],["scope","col",1,"oc-col-p5"],["scope","col",1,"oc-col-p4"],["scope","col",1,"oc-col-p3"],["scope","col",1,"oc-col-p2"],["scope","col",1,"oc-col-p1"],[4,"ngFor","ngForOf"],["id","accordionKnife",1,"accordion","mb-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#knifeSection","aria-expanded","false","aria-controls","knifeSection",1,"accordion-button","collapsed","fw-bold"],["id","knifeSection","aria-labelledby","headingOne","data-bs-parent","#accordionKnife",1,"accordion-collapse","collapse","p-2"],["type","button",1,"btn","btn-secondary","btn-sm","me-4",3,"click"],["type","checkbox","value","","id","auto_adjust_knife",1,"form-check-input",3,"ngModelChange","ngModel"],["for","auto_adjust_knife",1,"form-check-label"],[1,"table","table-sm","table-bordered","shadow","text-center",2,"max-width","1000px"],["scope","col"],["id","accordionOrders",1,"accordion","mb-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#ordersSection","aria-expanded","false","aria-controls","ordersSection",1,"accordion-button","collapsed","fw-bold"],["id","ordersSection","aria-labelledby","headingOne","data-bs-parent","#accordionOrders",1,"accordion-collapse","collapse","p-2"],[1,"place_multi_orders"],["type","button",1,"btn","btn-secondary","btn-sm","me-1",3,"click"],["class","accordion mb-2","id","accordionStraddle",4,"ngIf"],["class","accordion","id","accordionCharts",4,"ngIf"],["id","algo-container-old"],["type","checkbox","value","","id","show_algo",1,"form-check-input",3,"ngModelChange","ngModel"],["for","show_algo",1,"form-check-label"],["type","checkbox","value","","id","algoSimulated","disabled","",1,"form-check-input",3,"ngModelChange","ngModel"],["for","algoSimulated",1,"form-check-label"],["placeholder","Expiry YYYY-MM-DD","id","payOffExpiry",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-secondary","btn-sm","me-2",3,"click"],["type","button",1,"btn","btn-outline-primary","btn-sm","me-2",3,"click"],[3,"value"],[1,"nostretch"],["type","number","placeholder","Qty",1,"form-control","form-control-sm","me-1","width80",3,"ngModelChange","step","ngModel","ngClass"],[2,"display","flex","align-items","center"],[2,"display","inline-block","width","100px"],["placeholder","Scrip 11500CE","type","number",1,"form-control","form-control-sm","me-2","width60","d-inline",3,"ngModelChange","ngModel"],[2,"color","red"],["placeholder","Scrip 11500CE",1,"form-control","form-control-sm","me-2","width80",3,"keyup","ngModelChange","ngModel"],["placeholder","",1,"form-control","form-control-sm","me-1","width160",3,"ngModelChange"],[3,"ngClass",4,"ngIf"],["type","checkbox","value","","id","use-filter-expiry",1,"form-check-input",3,"ngModelChange","ngModel"],["for","use-filter-expiry",1,"form-check-label"],["placeholder","Expiry",1,"ms-2","form-control","form-control-sm",2,"width","80px","display","inline-block",3,"ngModelChange","ngModel"],["type","checkbox","value","","id","hide-payoff",1,"form-check-input",3,"ngModelChange","ngModel"],["for","hide-payoff",1,"form-check-label"],["type","checkbox","value","","id","use-hypo-future",1,"form-check-input",3,"ngModelChange","ngModel"],["for","use-hypo-future",1,"form-check-label"],["type","number","placeholder","Closest Strike",1,"ms-2","form-control","form-control-sm",2,"width","80px","display","inline-block",3,"ngModelChange","ngModel"],["type","checkbox","value","","id","hide-roll3",1,"form-check-input",3,"ngModelChange","ngModel"],["for","hide-roll3",1,"form-check-label"],["type","checkbox","value","","id","ce_side_overlay",1,"form-check-input",3,"ngModelChange","ngModel"],["for","ce_side_overlay",1,"form-check-label"],["type","checkbox","value","","id","pe_side_overlay",1,"form-check-input",3,"ngModelChange","ngModel"],["for","pe_side_overlay",1,"form-check-label"],["type","checkbox","value","","id","straddle_shiftCE_overlay",1,"form-check-input",3,"ngModelChange","ngModel"],["for","straddle_shiftCE_overlay",1,"form-check-label"],["type","checkbox","value","","id","straddle_shiftPE_overlay",1,"form-check-input",3,"ngModelChange","ngModel"],["for","straddle_shiftPE_overlay",1,"form-check-label"],["type","number","placeholder","Straddle Qty",1,"me-3","form-control","form-control-sm",2,"width","100px","display","inline-block",3,"ngModelChange","ngModel"],["type","checkbox","value","","id","payoff_overlay",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","payoff_overlay",1,"form-check-label"],["type","number","placeholder","Overlay strike",1,"ms-2","form-control","form-control-sm",2,"width","100px","display","inline-block",3,"ngModelChange","ngModel"],[1,"strategy_instru","form-select","form-select-sm","me-2",3,"ngModelChange","change","ngModel"],["placeholder","Start YYYY-MM-DD",1,"simulateDate","mb-1","me-3","form-control","form-control-sm",2,"width","120px !important",3,"ngModelChange","ngModel"],[1,"strategy_instru","form-select","form-select-sm","me-2",2,"width","120px !important",3,"ngModelChange","change","ngModel"],["placeholder","Expiry YYYY-MM-DD",1,"simulateDate","mb-1","me-3","form-control","form-control-sm",2,"width","120px !important",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-light","btn-sm","me-1",3,"click"],[1,"form-check-inline","use-hypo-future-class"],["type","checkbox","value","","id","show_simulate_charts",1,"form-check-input",3,"ngModelChange","ngModel"],["for","show_simulate_charts",1,"form-check-label"],["type","file","name","File Upload Expiry","accept",".csv",2,"display","none",3,"change"],[1,"text-success"],["type","checkbox","value","","id","auto_execute_rollin",1,"form-check-input",3,"ngModelChange","ngModel"],["for","auto_execute_rollin",1,"form-check-label"],["type","checkbox","value","","id","auto_execute_rollout",1,"form-check-input",3,"ngModelChange","ngModel"],["for","auto_execute_rollout",1,"form-check-label"],["placeholder","Seconds","id","automate_roll_secs",1,"d-inline","width32","me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Slabs","id","automate_slabs",1,"d-inline","width32","me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Qty per slab","id","automate_slab_qty",1,"d-inline","width60","me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","First SL%","id","automate_sl1",1,"d-inline","width48","me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","SL% increase","id","automate_sl_increase",1,"d-inline","width32","me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"mt-1"],[1,"d-inline","me-2"],["placeholder","Time 1","id","automate_time_1",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Distance 1","id","automate_dist_1",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Time 2","id","automate_time_2",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Distance 2","id","automate_dist_2",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Time 3","id","automate_time_3",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Distance 3","id","automate_dist_3",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Time 4","id","automate_time_4",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Distance 4","id","automate_dist_4",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"width32"],[1,"form-check-inline","posCheckbox"],["type","checkbox","value","",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],[1,"width160"],["type","number","placeholder","Qty",1,"form-control","form-control-sm","me-1",3,"ngModelChange","step","ngModel","ngClass"],["type","number","placeholder","Roll Qty",1,"form-control","form-control-sm",3,"ngModelChange","step","ngModel","ngClass"],[1,"fw-bold","width48",2,"padding-top","8px"],[1,"width110"],["type","number","placeholder","Entry",1,"form-control","form-control-sm",2,"max-width","80px !important","display","inline",3,"ngModelChange","ngModel"],["placement","bottom",1,"cursor-pointer","ms-1",3,"click","ngbPopover"],["placeholder","Scrip 11500CE",1,"form-control","form-control-sm","me-2","width80",3,"ngModelChange","ngModel"],[2,"display","inline-block","width","60px"],["type","button","class","btn btn-link",3,"click",4,"ngIf"],["type","button","class","btn btn-link red",3,"click",4,"ngIf"],["class","nostretch",4,"ngIf"],["class","width110",4,"ngIf"],["class","width80",4,"ngIf"],["style","text-align: left;",4,"ngIf"],["class","",4,"ngIf"],["type","checkbox","value","",1,"form-check-input","me-1",3,"ngModelChange","ngModel","disabled"],["type","checkbox","value","",1,"form-check-input",3,"ngModelChange","ngModel","disabled"],["type","button",1,"btn","btn-link","red",3,"click"],["type","radio",1,"form-check-input",3,"ngModelChange","name","id","value","ngModel"],[1,"form-check-label",3,"for"],["placeholder","Scrip 11500CE",1,"form-control","form-control-sm","me-2","width80",3,"ngModelChange","keyup","ngModel","ngClass"],["placeholder","Expiry 01OCT2020",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"width80"],["type","number","placeholder","Exit",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[2,"text-align","left"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],[1,""],["placeholder","Entry Date",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Exit Date",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["type","number","placeholder","> Alert",1,"form-control","form-control-sm","d-inline-block","width80",3,"ngModelChange","ngModel"],[1,"text-danger","ms-2"],["type","","placeholder","> Alert",1,"d-inline-block","width48","height16","me-1",3,"ngModelChange","ngModel"],[1,"text-danger","me-1"],["scope","col",1,"width32"],["scope","col",1,"nostretch"],["type","number","placeholder","Qty",1,"form-control","form-control-sm",3,"ngModelChange","step","ngModel","ngClass"],["placeholder","11500CE",1,"form-control","form-control-sm","me-2","width80",3,"ngModelChange","ngModel"],["type","number","placeholder","Price",1,"form-control","form-control-sm","me-1",2,"max-width","80px !important",3,"ngModelChange","ngModel"],["type","number","placeholder","Trigger Price",1,"form-control","form-control-sm",2,"max-width","80px !important",3,"ngModelChange","ngModel"],["style","display: flex; align-items: center;",4,"ngIf"],[1,"width32",2,"text-align","left"],["type","button","class","btn btn-light btn-sm",3,"click",4,"ngIf"],[1,"chart-chart"],[2,"min-width","600px","max-width","600px","margin-right","20px"],["baseChart","",3,"data","options","type"],[2,"min-width","450px"],[1,"mt-1","mb-2"],[1,"me-4","strategy_alert_field"],["placeholder","> Alert Price","type","number",1,"me-2","form-control","form-control-sm","strategy_alert_field",3,"ngModelChange","ngModel"],[2,"font-weight","normal"],[2,"margin-right","20px"],[1,"me-3",2,"display","inline-block"],["type","file","name","File Upload 1","accept",".csv",2,"display","none",3,"change"],["href","assets/flyrr.png","target","_blank","rel","noopener noreferrer"],["type","checkbox","value","","id","strangle_chart_simulate_tillend",1,"form-check-input",3,"ngModelChange","ngModel"],["for","strangle_chart_simulate_tillend",1,"form-check-label"],["id","spot-chart-simulate",1,"opt_chart","me-4"],[2,"width","268px"],["placeholder","Higher",1,"mb-1","me-2","form-control","form-control-sm","ocInputs",2,"width","54px !important",3,"ngModelChange","ngModel"],["placeholder","Lower",1,"mb-1","me-2","form-control","form-control-sm","ocInputs",2,"width","54px !important",3,"ngModelChange","ngModel"],["placeholder","Qty","type","number",1,"mb-1","form-control","form-control-sm","ocInputs",3,"ngModelChange","ngModel"],["scope","col",1,"oc-col"],["class","oc-col","scope","col",4,"ngIf"],["class","table table-sm table-bordered shadow mb-2 text-center",4,"ngIf"],["placeholder","Sell Qty","type","number",1,"mb-1","form-control","form-control-sm","ocInputs",3,"ngModelChange","ngModel"],[1,"table","table-sm","table-bordered","shadow","mb-0","text-center"],[2,"position","relative",3,"ngClass"],[1,"cursor-pointer",2,"position","absolute","left","4px","font-size","14px","transform","rotateX(180deg) rotate(-20deg)",3,"click"],[1,"cursor-pointer",2,"position","absolute","right","4px","top","-5px","font-size","24px",3,"click"],[1,"cursor-pointer","text-primary","fw-bold",3,"click"],["class","ocStrategyStrikeQty fw-bold",4,"ngIf"],["style","position: relative;",4,"ngIf"],[1,"fw-bold","text-center",3,"ngClass"],["class","ocStrategyStrikeQty oc-strike-spot",4,"ngIf"],["style","color: orange;",4,"ngIf"],[1,"cursor-pointer",2,"position","absolute","right","4px","font-size","14px","transform","rotateX(180deg) rotate(-20deg)",3,"click"],[1,"cursor-pointer",2,"position","absolute","left","4px","top","-5px","font-size","24px",3,"click"],[1,"ocStrategyStrikeQty","fw-bold"],[2,"position","relative"],[1,"ocStrategyStrikeQty","oc-strike-spot"],[2,"color","orange"],[1,"cursor-pointer","text-center","oc-strike",3,"click"],[1,"text-success","fw-bold"],[1,"text-danger","fw-bold"],["height","800","width","100%","src",sf`https://pulse.zerodha.com/`],[1,"opt-charts-parent-0"],[1,"me-4"],[1,"form-check-inline","mt-0"],["type","radio","value","5min","id","5min",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","5min",1,"form-check-label"],["type","radio","value","1min","id","1min",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","1min",1,"form-check-label"],["type","button","title","Charts of ST 10 2 for 40 premiums whenever ST breach. Also prints ST entry exit and strangle 25 fullday entry exit in console",1,"btn","btn-secondary","btn-sm","mb-1","me-2",3,"click"],["class","opt_chart_wrapper-0",4,"ngFor","ngForOf"],[1,"opt_chart_wrapper-0"],[1,"opt_chart-0",3,"id"],[1,"chart-legend-0"],[1,"chart-legend-values"],["type","radio","value","10_2","id","st102",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","st102",1,"form-check-label"],["type","radio","value","7_3","id","st73",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","st73",1,"form-check-label"],["type","radio","value","both","id","stBoth",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","stBoth",1,"form-check-label"],["placeholder","0",1,"form-control","form-control-sm","me-2","mb-2","width80","d-inline",3,"ngModelChange","ngModel"],[1,"opt_chart-0",2,"width","320px","height","240px","background-color","grey",3,"id"],[1,"opt_chart_wrapper",3,"click"],[1,"opt_chart",3,"id","ngClass"],[1,"alerts-flex-container"],[1,"form-check-inline"],["type","checkbox","value","",1,"form-check-input",3,"ngModelChange","ngModel"],[1,"alert_field","form-select","form-select-sm","me-2",3,"ngModelChange","ngModel"],["placeholder","Scrip1",1,"me-2","mb-1","form-control","form-control-sm","alert_field",3,"ngModelChange","ngModel"],["placeholder","Scrip2",1,"me-2","mb-1","form-control","form-control-sm","alert_field",3,"ngModelChange","ngModel"],["placeholder","Expiry YYYY-MM-DD",1,"me-2","mb-1","form-control","form-control-sm","alert_field",3,"ngModelChange","ngModel"],["value",">"],["value","<"],["placeholder","Price","type","number",1,"me-2","mb-1","form-control","form-control-sm","alert_field",3,"ngModelChange","ngModel"],["rows","5",2,"width","100%",3,"ngModelChange","ngModel"],[1,"confirmation-check","form-check-inline","mt-0"],["type","radio","value","upstox","id","upstox_orders",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","upstox_orders",1,"form-check-label"],["type","radio","value","zerodha","id","zerodha_orders",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","zerodha_orders",1,"form-check-label"],["type","button",1,"btn","btn-secondary","btn-sm",2,"margin-top","-7px",3,"click"],[1,"form-select","form-select-sm","me-2",2,"width","120px","display","inline-block",3,"ngModelChange","ngModel"],["id","place_expiry_date","placeholder","place_expiry_date",1,"form-control","me-2",2,"width","120px","display","inline-block",3,"ngModelChange","ngModel"],["id","place_qty","placeholder","qty",1,"form-control","fw-bold","me-2",2,"width","120px","display","inline-block",3,"ngModelChange","ngClass","ngModel"],["id","curr_pos","placeholder","curr_pos",1,"form-control","fw-bold","me-1",2,"width","120px","display","inline-block",3,"ngModelChange","ngClass","ngModel"],[2,"text-align","left","font-size","10px",3,"ngClass"],["style","color: orange; font-weight: bold; margin-left: 4px;",4,"ngIf"],[1,"me-2",2,"display","inline-block"],["id","new_pos","placeholder","new_pos",1,"form-control","fw-bold","me-1",2,"width","120px","display","inline-block",3,"ngModelChange","ngClass","ngModel"],[2,"color","orange","font-weight","bold","margin-left","4px"],["id","accordionStraddle",1,"accordion","mb-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#straddleSection","aria-expanded","true","aria-controls","straddleSection",1,"accordion-button","collapsed","fw-bold"],["id","straddleSection","aria-labelledby","headingOne","data-bs-parent","#accordionStraddle",1,"accordion-collapse","collapse","p-2"],["placeholder","Expiry YYYY-MM-DD","id","payOffExpiry",1,"me-2","mb-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Scrip","id","payOffExpiry",1,"mb-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["id","accordionCharts",1,"accordion"],["type","button","data-toggle","collapse","data-target","#chartsSection","aria-expanded","true","aria-controls","chartsSection",1,"accordion-button","collapsed","fw-bold"],["id","chartsSection","aria-labelledby","headingOne","data-parent","#accordionCharts",1,"accordion-collapse","collapse","p-2"],["height","600","width","760","src",sf`https://ssltvc.forexprostools.com/?pair_ID=8985&height=600&width=760&interval=300&plotStyle=candles&domain_ID=56&lang_ID=56&timezone_ID=20`],["height","600","width","760","src",sf`https://ssltvc.forexprostools.com/?pair_ID=160&height=600&width=760&interval=300&plotStyle=candles&domain_ID=56&lang_ID=56&timezone_ID=20`]],template:function(i,r){if(i&1){let s=fe();m(0,"div",4)(1,"div",5)(2,"h2",6)(3,"button",7),w(4," Strategy Payoff "),_()(),m(5,"div",8)(6,"div",9)(7,"div",10)(8,"div",10)(9,"div",11),w(10," Strategy 1: "),m(11,"span",12),w(12),_()(),m(13,"div",11)(14,"input",13),U("ngModelChange",function(a){return E(s),z(r.strategyAlertPrice1,a)||(r.strategyAlertPrice1=a),D(a)}),_(),m(15,"span",14),w(16),_()()(),m(17,"div",15),w(18,"|"),_()(),m(19,"div",10)(20,"div",10)(21,"div",11),w(22," Strategy 2: "),m(23,"span",12),w(24),_()(),m(25,"div",11)(26,"input",13),U("ngModelChange",function(a){return E(s),z(r.strategyAlertPrice2,a)||(r.strategyAlertPrice2=a),D(a)}),_(),m(27,"span",14),w(28),_()()(),m(29,"div",15),w(30,"|"),_()(),m(31,"div",10)(32,"div",10)(33,"div",11),w(34," Strategy 3: "),m(35,"span",12),w(36),_()(),m(37,"div",11)(38,"input",13),U("ngModelChange",function(a){return E(s),z(r.strategyAlertPrice3,a)||(r.strategyAlertPrice3=a),D(a)}),_(),m(39,"span",14),w(40),_()()(),m(41,"div",15),w(42,"|"),_()(),m(43,"div",10)(44,"div",10)(45,"div",11),w(46," Strategy 4: "),m(47,"span",12),w(48),_()(),m(49,"div",11)(50,"input",13),U("ngModelChange",function(a){return E(s),z(r.strategyAlertPrice4,a)||(r.strategyAlertPrice4=a),D(a)}),_(),m(51,"span",14),w(52),_()()(),m(53,"div",15),w(54,"|"),_()(),m(55,"div",10)(56,"div",10)(57,"div",11),w(58," Strategy 5: "),m(59,"span",12),w(60),_()(),m(61,"div",11)(62,"input",13),U("ngModelChange",function(a){return E(s),z(r.strategyAlertPrice5,a)||(r.strategyAlertPrice5=a),D(a)}),_(),m(63,"span",14),w(64),_()()(),m(65,"div",15),w(66,"|"),_()(),m(67,"div",10)(68,"div",10)(69,"div",11),w(70," Strategy 6: "),m(71,"span",12),w(72),_()(),m(73,"div",11)(74,"input",13),U("ngModelChange",function(a){return E(s),z(r.strategyAlertPrice6,a)||(r.strategyAlertPrice6=a),D(a)}),_(),m(75,"span",14),w(76),_()()(),m(77,"div",15),w(78,"|"),_()(),m(79,"div",10)(80,"div",10)(81,"div",11),w(82," Strategy 7: "),m(83,"span",12),w(84),_()(),m(85,"div",11)(86,"input",13),U("ngModelChange",function(a){return E(s),z(r.strategyAlertPrice7,a)||(r.strategyAlertPrice7=a),D(a)}),_(),m(87,"span",14),w(88),_()()(),m(89,"div",15),w(90,"|"),_()(),m(91,"div",10)(92,"div",10)(93,"div",11),w(94," Strategy 8: "),m(95,"span",12),w(96),_()(),m(97,"div",11)(98,"input",13),U("ngModelChange",function(a){return E(s),z(r.strategyAlertPrice8,a)||(r.strategyAlertPrice8=a),D(a)}),_(),m(99,"span",14),w(100),_()()()()(),Ze(101,"hr"),m(102,"div",16)(103,"div",17)(104,"div",18)(105,"div"),te(106,nee,7,3,"div",19),m(107,"div",20)(108,"div",21)(109,"div",22),te(110,iee,2,0,"button",23)(111,ree,2,0,"button",23)(112,see,2,0,"button",23),m(113,"select",24),U("ngModelChange",function(a){return E(s),z(r.instruToTrade,a)||(r.instruToTrade=a),D(a)}),te(114,oee,2,2,"option",25),_(),m(115,"input",26),U("ngModelChange",function(a){return E(s),z(r.expiryDateToTrade,a)||(r.expiryDateToTrade=a),D(a)}),_(),m(116,"input",27),j("change",function(a){return E(s),D(r.saveAlgoSSParams(a))}),U("ngModelChange",function(a){return E(s),z(r.algoTimeToEnter,a)||(r.algoTimeToEnter=a),D(a)}),_(),m(117,"input",28),j("change",function(a){return E(s),D(r.saveAlgoSSParams(a))}),U("ngModelChange",function(a){return E(s),z(r.algoSSQty,a)||(r.algoSSQty=a),D(a)}),_(),m(118,"input",29),j("change",function(a){return E(s),D(r.saveAlgoSSParams(a))}),U("ngModelChange",function(a){return E(s),z(r.algoSSSLPerc,a)||(r.algoSSSLPerc=a),D(a)}),_(),m(119,"input",30),j("change",function(a){return E(s),D(r.saveAlgoSSParams(a))}),U("ngModelChange",function(a){return E(s),z(r.algoSSMaxSLTimes,a)||(r.algoSSMaxSLTimes=a),D(a)}),_(),m(120,"input",31),j("change",function(a){return E(s),D(r.saveAlgoSSParams(a))}),U("ngModelChange",function(a){return E(s),z(r.algoSSTriggerDifference,a)||(r.algoSSTriggerDifference=a),D(a)}),_(),m(121,"input",32),j("change",function(a){return E(s),D(r.saveAlgoSSParams(a))}),U("ngModelChange",function(a){return E(s),z(r.algoSSIncludeGUIDs,a)||(r.algoSSIncludeGUIDs=a),D(a)}),_(),m(122,"input",33),j("change",function(a){return E(s),D(r.saveAlgoSSParams(a))}),U("ngModelChange",function(a){return E(s),z(r.algoSSExcludeGUIDs,a)||(r.algoSSExcludeGUIDs=a),D(a)}),_(),m(123,"div",34)(124,"textarea",35),U("ngModelChange",function(a){return E(s),z(r.algoLog,a)||(r.algoLog=a),D(a)}),_()()()(),m(125,"div",34)(126,"table",36)(127,"thead",37)(128,"tr")(129,"th",38),w(130,"Strike"),_(),m(131,"th",38),w(132,"Qty"),_(),m(133,"th",38),w(134,"Price"),_(),m(135,"th",38),w(136,"LTP"),_(),m(137,"th",38),w(138,"Trigger"),_(),m(139,"th",38),w(140,"Exit"),_(),m(141,"th",38),w(142,"PnL"),_()()(),m(143,"tbody"),te(144,lee,15,12,"tr",39),_()(),m(145,"div",40),w(146," Total PnL: "),m(147,"div",41)(148,"span",42),w(149),_()()(),Ze(150,"hr"),_()(),m(151,"div",43)(152,"label",44),w(153,"Range"),_(),m(154,"input",45),U("ngModelChange",function(a){return E(s),z(r.payoff_range,a)||(r.payoff_range=a),D(a)}),_()(),m(155,"div",46)(156,"input",47),U("ngModelChange",function(a){return E(s),z(r.hide_closed,a)||(r.hide_closed=a),D(a)}),_(),m(157,"label",48),w(158,"Hide Closed"),_()(),m(159,"div",46)(160,"input",49),U("ngModelChange",function(a){return E(s),z(r.show_t0,a)||(r.show_t0=a),D(a)}),_(),m(161,"label",50),w(162,"Show T+0"),_()(),m(163,"div",46)(164,"input",51),U("ngModelChange",function(a){return E(s),z(r.hide_roll,a)||(r.hide_roll=a),D(a)}),_(),m(165,"label",52),w(166,"Hide Roll"),_()(),m(167,"div",46)(168,"input",53),U("ngModelChange",function(a){return E(s),z(r.hide_extra,a)||(r.hide_extra=a),D(a)}),_(),m(169,"label",54),w(170,"Hide Extra"),_()(),m(171,"div",46)(172,"input",55),U("ngModelChange",function(a){return E(s),z(r.multi_t0,a)||(r.multi_t0=a),D(a)}),_(),m(173,"label",56),w(174,"Multi T+0"),_(),m(175,"input",57),U("ngModelChange",function(a){return E(s),z(r.multiT0Input,a)||(r.multiT0Input=a),D(a)}),_()(),m(176,"div",46)(177,"input",58),U("ngModelChange",function(a){return E(s),z(r.simulate_strategy,a)||(r.simulate_strategy=a),D(a)}),_(),m(178,"label",59),w(179,"Simulate Strategy"),_()(),m(180,"div",46)(181,"input",60),U("ngModelChange",function(a){return E(s),z(r.showInlineOC,a)||(r.showInlineOC=a),D(a)}),_(),m(182,"label",61),w(183,"Option Chain"),_()(),m(184,"div",46)(185,"input",62),U("ngModelChange",function(a){return E(s),z(r.playAlertSound,a)||(r.playAlertSound=a),D(a)}),_(),m(186,"label",63),w(187,"Play Alert"),_()(),m(188,"div",46)(189,"input",64),U("ngModelChange",function(a){return E(s),z(r.showExtraOptions,a)||(r.showExtraOptions=a),D(a)}),_(),m(190,"label",65),w(191,"Extra Options"),_()(),m(192,"div",46)(193,"input",66),U("ngModelChange",function(a){return E(s),z(r.mfRealTime,a)||(r.mfRealTime=a),D(a)}),_(),m(194,"label",67),w(195,"MF realtime"),_()(),te(196,cee,41,13,"div",68)(197,pee,45,11,"div",69),m(198,"div",11),w(199),te(200,fee,2,0,"span",70)(201,gee,2,0,"span",71),_(),m(202,"select",72),U("ngModelChange",function(a){return E(s),z(r.instru,a)||(r.instru=a),D(a)}),te(203,mee,2,2,"option",25),_(),m(204,"input",73),U("ngModelChange",function(a){return E(s),z(r.expiryDate,a)||(r.expiryDate=a),D(a)}),_(),m(205,"input",73),U("ngModelChange",function(a){return E(s),z(r.expiryDate2,a)||(r.expiryDate2=a),D(a)}),_(),m(206,"button",74),j("click",function(){return E(s),D(r.doSingleStrategySubscription())}),w(207,"Refresh LTPs"),_(),m(208,"button",74),j("click",function(){return E(s),D(r.loadOptionChain())}),w(209,"Load OC"),_(),m(210,"button",74),j("click",function(){return E(s),D(r.addPlaceOrders())}),w(211,"+ Place Orders"),_(),m(212,"button",74),j("click",function(){return E(s),D(r.exitPositions())}),w(213,"Exit"),_(),m(214,"button",74),j("click",function(){return E(s),D(r.saveAsCF())}),w(215,"Save CF"),_(),m(216,"button",74),j("click",function(){return E(s),D(r.removeCF())}),w(217,"Remove CF"),_(),m(218,"div",75)(219,"input",76),U("ngModelChange",function(a){return E(s),z(r.use_cf,a)||(r.use_cf=a),D(a)}),j("change",function(a){return E(s),D(r.use_cf_change(a))}),_(),m(220,"label",77),w(221,"Use CF"),_()(),m(222,"div",75)(223,"input",78),U("ngModelChange",function(a){return E(s),z(r.saveMTM1,a)||(r.saveMTM1=a),D(a)}),_(),m(224,"label",79),w(225,"MTM 1"),_()(),m(226,"div")(227,"button",74),j("click",function(){return E(s),D(r.refreshPositions())}),w(228,"Refresh"),_(),m(229,"input",80),U("ngModelChange",function(a){return E(s),z(r.use_tag,a)||(r.use_tag=a),D(a)}),j("change",function(a){return E(s),D(r.use_tag_change(a))}),_(),m(230,"input",81),U("ngModelChange",function(a){return E(s),z(r.tagSearch,a)||(r.tagSearch=a),D(a)}),j("change",function(a){return E(s),D(r.tagSearch_change(a))}),_(),m(231,"input",82),U("ngModelChange",function(a){return E(s),z(r.use_include_guid,a)||(r.use_include_guid=a),D(a)}),j("change",function(a){return E(s),D(r.use_include_guid_change(a))}),_(),m(232,"input",83),U("ngModelChange",function(a){return E(s),z(r.includeGUIDs,a)||(r.includeGUIDs=a),D(a)}),_(),m(233,"input",84),U("ngModelChange",function(a){return E(s),z(r.use_exclude_guid,a)||(r.use_exclude_guid=a),D(a)}),j("change",function(a){return E(s),D(r.use_exclude_guid_change(a))}),_(),m(234,"input",85),U("ngModelChange",function(a){return E(s),z(r.excludeGUIDs,a)||(r.excludeGUIDs=a),D(a)}),_(),m(235,"div",86)(236,"input",87),U("ngModelChange",function(a){return E(s),z(r.use_curr_expiry,a)||(r.use_curr_expiry=a),D(a)}),_(),m(237,"label",88),w(238,"Curr Expiry"),_()()(),m(239,"div",34)(240,"div",75)(241,"input",89),U("ngModelChange",function(a){return E(s),z(r.auto_execute,a)||(r.auto_execute=a),D(a)}),_(),m(242,"label",90),w(243,"Auto execute"),_()(),te(244,_ee,4,1,"div",91)(245,Aee,4,1,"div",91)(246,yee,3,1,"div",92)(247,vee,3,1,"div",92)(248,wee,3,1,"div",92)(249,bee,3,1,"div",92)(250,See,3,1,"div",92),_(),te(251,Cee,14,8,"div",93)(252,Eee,1,1,"ng-template",null,0,Af),m(254,"table",36)(255,"tbody"),te(256,Wee,33,39,"tr",39),_()(),te(257,Xee,17,1,"table",94),_()(),te(258,Zee,100,19,"div",95),m(259,"div",96)(260,"div")(261,"div")(262,"div",97)(263,"input",98),j("change",function(a){return E(s),D(r.expandSingleChartsChange(a))}),U("ngModelChange",function(a){return E(s),z(r.expand_single_charts,a)||(r.expand_single_charts=a),D(a)}),_(),m(264,"label",99),w(265,"Expand"),_()(),m(266,"select",100),U("ngModelChange",function(a){return E(s),z(r.spot_chart_instru,a)||(r.spot_chart_instru=a),D(a)}),j("change",function(a){return E(s),D(r.onSpotChartInstruChange(a))}),te(267,Qee,2,2,"option",25),_(),m(268,"select",100),U("ngModelChange",function(a){return E(s),z(r.spot_chart_instru2,a)||(r.spot_chart_instru2=a),D(a)}),j("change",function(a){return E(s),D(r.onSpotChartInstruChange2(a))}),te(269,Jee,2,2,"option",25),_(),m(270,"div",97)(271,"input",101),j("change",function(a){return E(s),D(r.showATPLineChange(a))}),U("ngModelChange",function(a){return E(s),z(r.showATPLine,a)||(r.showATPLine=a),D(a)}),_(),m(272,"label",102),w(273,"Show ATP"),_()()(),m(274,"div",103),Ze(275,"div",104)(276,"div",105),m(277,"div",106)(278,"div",107)(279,"div",108),w(280),_(),m(281,"div",109),w(282),_()(),m(283,"div",110)(284,"div",108),w(285),_(),m(286,"div",109),w(287),_()()()(),Ze(288,"div",111),_(),m(289,"div",112)(290,"div")(291,"div",46)(292,"input",113),U("ngModelChange",function(a){return E(s),z(r.add_strangle_chart,a)||(r.add_strangle_chart=a),D(a)}),_(),m(293,"label",114),w(294,"Add to strangle"),_()(),m(295,"input",115),U("ngModelChange",function(a){return E(s),z(r.strangle_chart_ce,a)||(r.strangle_chart_ce=a),D(a)}),_(),m(296,"input",116),U("ngModelChange",function(a){return E(s),z(r.strangle_chart_pe,a)||(r.strangle_chart_pe=a),D(a)}),_(),te(297,ete,4,1,"div",117),m(298,"button",118),j("click",function(){return E(s),D(r.update_strangle_chart())}),w(299,"\u2713"),_(),te(300,tte,2,2,"span",68),_(),m(301,"div",106),te(302,nte,3,1,"div",119),Ze(303,"div",120),_()()()(),te(304,yte,51,11,"div",68),_(),Ze(305,"hr"),m(306,"div")(307,"div")(308,"div",46)(309,"input",121),U("ngModelChange",function(a){return E(s),z(r.show_news,a)||(r.show_news=a),D(a)}),_(),m(310,"label",122),w(311,"Show News"),_()(),m(312,"a",123),w(313,"mc"),_(),m(314,"a",124),w(315,"bqprime"),_(),m(316,"a",125),w(317,"live-tv"),_()(),te(318,vte,2,0,"div",68),_(),te(319,wte,24,0,"div",68),_()()(),te(320,Ste,22,5,"div",126)(321,Ete,25,10,"div",126),m(322,"div",127)(323,"select",128),U("ngModelChange",function(a){return E(s),z(r.charts_instru,a)||(r.charts_instru=a),D(a)}),j("change",function(a){return E(s),D(r.onChartInstruChange(a))}),te(324,Dte,2,2,"option",25),_(),m(325,"input",129),U("ngModelChange",function(a){return E(s),z(r.charts_expiry,a)||(r.charts_expiry=a),D(a)}),_(),m(326,"input",130),U("ngModelChange",function(a){return E(s),z(r.call_start_strike,a)||(r.call_start_strike=a),D(a)}),_(),m(327,"input",131),U("ngModelChange",function(a){return E(s),z(r.call_end_strike,a)||(r.call_end_strike=a),D(a)}),_(),m(328,"input",132),U("ngModelChange",function(a){return E(s),z(r.put_start_strike,a)||(r.put_start_strike=a),D(a)}),_(),m(329,"input",133),U("ngModelChange",function(a){return E(s),z(r.put_end_strike,a)||(r.put_end_strike=a),D(a)}),_(),m(330,"input",134),U("ngModelChange",function(a){return E(s),z(r.charts_multiple,a)||(r.charts_multiple=a),D(a)}),_(),m(331,"button",74),j("click",function(){return E(s),D(r.initCharts())}),w(332,"Init Charts"),_(),m(333,"button",74),j("click",function(){return E(s),D(r.onChartInstruChange(null))}),w(334,"Update Range"),_(),te(335,Mte,2,2,"span",68),m(336,"div",135),w(337,"CALLS"),_(),m(338,"div",136),te(339,Tte,3,1,"div",119)(340,Ite,6,7,"div",137),_(),Ze(341,"hr",138),m(342,"div",139),w(343,"PUTS"),_(),m(344,"div",136),te(345,kte,6,7,"div",137),_()(),m(346,"div",140)(347,"div",5)(348,"h2",6)(349,"button",141),w(350," Alerts "),_()(),m(351,"div",142),te(352,Nte,18,10,"div",143),m(353,"button",144),j("click",function(){return E(s),D(r.subscribeAlerts())}),w(354,"Refresh LTPs"),_()()()(),m(355,"div",145)(356,"div",5)(357,"h2",146)(358,"button",147),w(359," Multi OC "),_()(),m(360,"div",148)(361,"div")(362,"select",149),U("ngModelChange",function(a){return E(s),z(r.multiOC_instru,a)||(r.multiOC_instru=a),D(a)}),te(363,Ote,2,2,"option",25),_(),m(364,"input",150),U("ngModelChange",function(a){return E(s),z(r.multiOC_higherRange,a)||(r.multiOC_higherRange=a),D(a)}),_(),m(365,"input",151),U("ngModelChange",function(a){return E(s),z(r.multiOC_lowerRange,a)||(r.multiOC_lowerRange=a),D(a)}),_(),m(366,"input",73),U("ngModelChange",function(a){return E(s),z(r.expiryDate_multi1,a)||(r.expiryDate_multi1=a),D(a)}),_(),m(367,"input",73),U("ngModelChange",function(a){return E(s),z(r.expiryDate_multi2,a)||(r.expiryDate_multi2=a),D(a)}),_(),m(368,"input",73),U("ngModelChange",function(a){return E(s),z(r.expiryDate_multi3,a)||(r.expiryDate_multi3=a),D(a)}),_(),m(369,"input",73),U("ngModelChange",function(a){return E(s),z(r.expiryDate_multi4,a)||(r.expiryDate_multi4=a),D(a)}),_(),m(370,"input",73),U("ngModelChange",function(a){return E(s),z(r.expiryDate_multi5,a)||(r.expiryDate_multi5=a),D(a)}),_(),m(371,"button",74),j("click",function(){return E(s),D(r.loadMultiOptionChain())}),w(372,"Load OC"),_(),m(373,"button",152),j("click",function(){return E(s),D(r.multiOCRangeUpdate())}),w(374,"\u2713"),_()(),m(375,"table",153)(376,"thead",37)(377,"tr")(378,"th",154),w(379),_(),m(380,"th",155),w(381),_(),m(382,"th",156),w(383),_(),m(384,"th",157),w(385),_(),m(386,"th",158),w(387),_(),m(388,"th",159),w(389,"Strike"),_(),m(390,"th",160),w(391),_(),m(392,"th",161),w(393),_(),m(394,"th",162),w(395),_(),m(396,"th",163),w(397),_(),m(398,"th",164),w(399),_()()(),m(400,"tbody"),te(401,Fte,34,16,"tr",165),_()()()()(),m(402,"div",166)(403,"div",5)(404,"h2",6)(405,"button",167),w(406," Knife Orders "),_()(),m(407,"div",168)(408,"div")(409,"div")(410,"button",169),j("click",function(){return E(s),D(r.place_knife_orders())}),w(411,"Place All"),_(),m(412,"div",46)(413,"input",170),U("ngModelChange",function(a){return E(s),z(r.auto_adjust_knife,a)||(r.auto_adjust_knife=a),D(a)}),_(),m(414,"label",171),w(415,"Auto adjust"),_()()(),m(416,"table",172)(417,"thead",37)(418,"tr")(419,"th",173),w(420,"Instru"),_(),m(421,"th",173),w(422,"Expiry"),_(),m(423,"th",173),w(424,"Qty"),_(),m(425,"th",173),w(426,"Scrip"),_(),m(427,"th",173),w(428,"Status"),_(),m(429,"th",173),w(430,"Price"),_(),m(431,"th",173),w(432,"LTP"),_(),m(433,"th",173),w(434,"Low"),_()()(),m(435,"tbody"),te(436,Lte,17,8,"tr",165),_()()()()()(),m(437,"div",174)(438,"div",5)(439,"h2",6)(440,"button",175),w(441," Place Orders "),_()(),m(442,"div",176),te(443,Bte,16,4,"div",68),m(444,"div",177)(445,"div")(446,"button",178),j("click",function(){return E(s),D(r.place_all_orders())}),w(447,"Place All"),_(),m(448,"button",178),j("click",function(){return E(s),D(r.reset_place_orders())}),w(449,"Reset"),_(),m(450,"button",178),j("click",function(){return E(s),D(r.add_empty_place_order())}),w(451,"Add"),_(),m(452,"button",144),j("click",function(){return E(s),D(r.subscribeOrders())}),w(453,"Refresh LTPs"),_(),m(454,"button",144),j("click",function(){return E(s),D(r.refreshOILimits())}),w(455,"Refresh OI Limits"),_()(),m(456,"div"),w(457),_(),m(458,"table",172)(459,"thead",37)(460,"tr")(461,"th",173),w(462,"Instru"),_(),m(463,"th",173),w(464,"Expiry"),_(),m(465,"th",173),w(466,"Curr Qty"),_(),m(467,"th",173),w(468,"Curr Scrip"),_(),m(469,"th",173),w(470,"Curr LTP"),_(),m(471,"th",173),w(472,"New Scrip"),_(),m(473,"th",173),w(474,"New LTP"),_(),Ze(475,"th",173)(476,"th",173),_()(),m(477,"tbody"),te(478,Ute,32,32,"tr",165),_()()()()()(),te(479,Gte,21,12,"div",179)(480,Kte,9,0,"div",180)}i&2&&(v(11),V("ngClass",Re(155,Cn,r.strategyPnl1<0,r.strategyPnl1>0)),v(),J("",r.strategyPnl1," "),v(2),W("ngModel",r.strategyAlertPrice1),v(2),Q(r.strategyAlertText1),v(7),V("ngClass",Re(158,Cn,r.strategyPnl2<0,r.strategyPnl2>0)),v(),J("",r.strategyPnl2," "),v(2),W("ngModel",r.strategyAlertPrice2),v(2),Q(r.strategyAlertText2),v(7),V("ngClass",Re(161,Cn,r.strategyPnl3<0,r.strategyPnl3>0)),v(),J("",r.strategyPnl3," "),v(2),W("ngModel",r.strategyAlertPrice3),v(2),Q(r.strategyAlertText3),v(7),V("ngClass",Re(164,Cn,r.strategyPnl4<0,r.strategyPnl4>0)),v(),J("",r.strategyPnl4," "),v(2),W("ngModel",r.strategyAlertPrice4),v(2),Q(r.strategyAlertText4),v(7),V("ngClass",Re(167,Cn,r.strategyPnl5<0,r.strategyPnl5>0)),v(),J("",r.strategyPnl5," "),v(2),W("ngModel",r.strategyAlertPrice5),v(2),Q(r.strategyAlertText5),v(7),V("ngClass",Re(170,Cn,r.strategyPnl6<0,r.strategyPnl6>0)),v(),J("",r.strategyPnl6," "),v(2),W("ngModel",r.strategyAlertPrice6),v(2),Q(r.strategyAlertText6),v(7),V("ngClass",Re(173,Cn,r.strategyPnl7<0,r.strategyPnl7>0)),v(),J("",r.strategyPnl7," "),v(2),W("ngModel",r.strategyAlertPrice7),v(2),Q(r.strategyAlertText7),v(7),V("ngClass",Re(176,Cn,r.strategyPnl8<0,r.strategyPnl8>0)),v(),J("",r.strategyPnl8," "),v(2),W("ngModel",r.strategyAlertPrice8),v(2),Q(r.strategyAlertText8),v(6),V("ngIf",!1),v(4),V("ngIf",!r.instruToTrade),v(),V("ngIf",!r.enableAlgo&&r.instruToTrade),v(),V("ngIf",r.enableAlgo&&r.instruToTrade),v(),W("ngModel",r.instruToTrade),v(),V("ngForOf",r.supportedInstru),v(),W("ngModel",r.expiryDateToTrade),v(),W("ngModel",r.algoTimeToEnter),v(),V("step",r.algoSS_qtyStep),W("ngModel",r.algoSSQty),v(),W("ngModel",r.algoSSSLPerc),v(),W("ngModel",r.algoSSMaxSLTimes),v(),W("ngModel",r.algoSSTriggerDifference),v(),W("ngModel",r.algoSSIncludeGUIDs),v(),W("ngModel",r.algoSSExcludeGUIDs),v(2),W("ngModel",r.algoLog),v(20),V("ngForOf",r.algoSS_positions_UI),v(4),V("ngClass",Re(179,Cn,r.getAlgoSSTotalPnl()<0,r.getAlgoSSTotalPnl()>0)),v(),J(" ",r.getAlgoSSTotalPnl()," "),v(5),W("ngModel",r.payoff_range),v(2),W("ngModel",r.hide_closed),v(4),W("ngModel",r.show_t0),v(4),W("ngModel",r.hide_roll),v(4),W("ngModel",r.hide_extra),v(4),W("ngModel",r.multi_t0),v(3),W("ngModel",r.multiT0Input),v(2),W("ngModel",r.simulate_strategy),v(4),W("ngModel",r.showInlineOC),v(4),W("ngModel",r.playAlertSound),v(4),W("ngModel",r.showExtraOptions),v(4),W("ngModel",r.mfRealTime),v(3),V("ngIf",r.showExtraOptions),v(),V("ngIf",r.simulate_strategy===!0),v(2),J(" Loaded Strategy ",r.currLoadNum," "),v(),V("ngIf",r.matchPositions),v(),V("ngIf",!r.matchPositions),v(),W("ngModel",r.instru),v(),V("ngForOf",r.supportedInstru),v(),W("ngModel",r.expiryDate),v(),W("ngModel",r.expiryDate2),v(14),W("ngModel",r.use_cf),v(4),W("ngModel",r.saveMTM1),v(6),W("ngModel",r.use_tag),v(),W("ngModel",r.tagSearch),v(),W("ngModel",r.use_include_guid),v(),W("ngModel",r.includeGUIDs),v(),W("ngModel",r.use_exclude_guid),v(),W("ngModel",r.excludeGUIDs),v(2),W("ngModel",r.use_curr_expiry),v(5),W("ngModel",r.auto_execute),v(3),V("ngIf",r.auto_execute),v(),V("ngIf",r.auto_execute),v(),V("ngIf",r.auto_execute),v(),V("ngIf",r.auto_execute),v(),V("ngIf",r.auto_execute),v(),V("ngIf",r.auto_execute),v(),V("ngIf",r.auto_execute),v(),V("ngIf",r.auto_execute),v(5),V("ngForOf",r.curr_positions_trades),v(),V("ngIf",r.sl_trades.length>0),v(),V("ngIf",!r.hide_payoff),v(5),W("ngModel",r.expand_single_charts),v(3),W("ngModel",r.spot_chart_instru),v(),V("ngForOf",r.supportedInstru),v(),W("ngModel",r.spot_chart_instru2),v(),V("ngForOf",r.supportedInstru),v(2),W("ngModel",r.showATPLine),v(9),Q(r.chart_ce),v(2),Q(r.isChartStrikeInCurrStrategy(r.chart_ce)),v(3),Q(r.chart_pe),v(2),Q(r.isChartStrikeInCurrStrategy(r.chart_pe)),v(5),W("ngModel",r.add_strangle_chart),v(3),W("ngModel",r.strangle_chart_ce),v(),W("ngModel",r.strangle_chart_pe),v(),V("ngIf",r.simulate_strategy),v(3),V("ngIf",r.simulate_strategy),v(2),V("ngIf",r.simulate_strategy),v(2),V("ngIf",r.showInlineOC),v(5),W("ngModel",r.show_news),v(9),V("ngIf",r.show_news),v(),V("ngIf",!1),v(),V("ngIf",r.simulate_strategy),v(),V("ngIf",!1),v(2),W("ngModel",r.charts_instru),v(),V("ngForOf",r.supportedInstru),v(),W("ngModel",r.charts_expiry),v(),W("ngModel",r.call_start_strike),v(),W("ngModel",r.call_end_strike),v(),W("ngModel",r.put_start_strike),v(),W("ngModel",r.put_end_strike),v(),W("ngModel",r.charts_multiple),v(5),V("ngIf",r.simulate_strategy),v(4),V("ngIf",r.simulate_strategy),v(),V("ngForOf",ml(182,tS).constructor(r.num_charts)),v(5),V("ngForOf",ml(183,tS).constructor(r.num_charts)),v(7),V("ngForOf",r.alerts),v(10),W("ngModel",r.multiOC_instru),v(),V("ngForOf",r.supportedInstru),v(),W("ngModel",r.multiOC_higherRange),v(),W("ngModel",r.multiOC_lowerRange),v(),W("ngModel",r.expiryDate_multi1),v(),W("ngModel",r.expiryDate_multi2),v(),W("ngModel",r.expiryDate_multi3),v(),W("ngModel",r.expiryDate_multi4),v(),W("ngModel",r.expiryDate_multi5),v(9),J("",r.expiryDate_multi1," CE"),v(2),J("",r.expiryDate_multi2," CE"),v(2),J("",r.expiryDate_multi3," CE"),v(2),J("",r.expiryDate_multi4," CE"),v(2),J("",r.expiryDate_multi5," CE"),v(4),J("",r.expiryDate_multi5," PE"),v(2),J("",r.expiryDate_multi4," PE"),v(2),J("",r.expiryDate_multi3," PE"),v(2),J("",r.expiryDate_multi2," PE"),v(2),J("",r.expiryDate_multi1," PE"),v(2),V("ngForOf",r.multi_oc_strikes1),v(12),W("ngModel",r.auto_adjust_knife),v(23),V("ngForOf",r.knife_orders),v(7),V("ngIf",!r.hide_clipboard),v(14),J(" ",r.getOILimits()," "),v(21),V("ngForOf",r.place_orders),v(),V("ngIf",!1),v(),V("ngIf",!1))},dependencies:[Hv,WN,jN,rc,Eg,Dg,Hs,ea,Qo,ic,Bd,nc,Jo,Ds,To,Es,Io],styles:[`[_nghost-%COMP%], input[_ngcontent-%COMP%], .input-group-text[_ngcontent-%COMP%], select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-size:12px!important}.use-hypo-future-class[_ngcontent-%COMP%]{margin-bottom:15px}.chart-flex-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:column}.posCheckbox[_ngcontent-%COMP%]{margin:8px auto!important;padding-left:8px}.simulateDate[_ngcontent-%COMP%]{width:20%;display:inline-block}.simulateTimeAdv[_ngcontent-%COMP%], .simulateTimeMins[_ngcontent-%COMP%]{width:10%;display:inline-block}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.ocInputs[_ngcontent-%COMP%]{display:inline-block;width:70px}.ocStrategyStrikeQty[_ngcontent-%COMP%]{font-size:.6rem;color:#000}.oc-strike[_ngcontent-%COMP%]{background-color:#e9ecef;width:60px}.sl-order-placed[_ngcontent-%COMP%]{background-color:#e1f4ff}.oc-strike-spot[_ngcontent-%COMP%]{width:60px;margin:0 auto}.oc-col-actions[_ngcontent-%COMP%]{width:19rem}.oc-col[_ngcontent-%COMP%]{width:5rem}.algo-pos-col[_ngcontent-%COMP%]{width:32px!important}.ocStrikeStrategyCE[_ngcontent-%COMP%]{background-color:#ccffc9!important}.ocStrikeStrategyPE[_ngcontent-%COMP%]{background-color:#ffdede!important}.ocStrikeSLL[_ngcontent-%COMP%]{background-color:#e1f4ff!important}.width16[_ngcontent-%COMP%]{width:16px!important}.width32[_ngcontent-%COMP%]{width:32px!important}.width48[_ngcontent-%COMP%]{width:48px!important}.width60[_ngcontent-%COMP%]{width:60px!important}.width80[_ngcontent-%COMP%]{width:80px!important}.width110[_ngcontent-%COMP%]{width:110px!important}.width160[_ngcontent-%COMP%]{width:160px!important}.height16[_ngcontent-%COMP%]{height:16px!important}.nostretch[_ngcontent-%COMP%]{white-space:nowrap;width:1%}.charts-heading[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:24px;font-weight:700;margin:4px}.opt_chart[_ngcontent-%COMP%]{position:relative}.opt_chart-0[_ngcontent-%COMP%]{margin-bottom:4px;position:relative}.chart-border-green[_ngcontent-%COMP%]{border:2px solid green}.chart-border-red[_ngcontent-%COMP%]{border:2px solid red}.opt_chart_wrapper_parent[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.opt_chart_wrapper[_ngcontent-%COMP%]{display:flex;margin-right:12px;margin-bottom:12px}.opt_chart_wrapper-0[_ngcontent-%COMP%]{display:flex;margin-right:4px;margin-bottom:4px;flex-direction:column}.expiryDate-inputs[_ngcontent-%COMP%], .charts-inputs[_ngcontent-%COMP%]{width:10%;display:inline-block}.chart-legend[_ngcontent-%COMP%]{position:absolute;left:4px;top:2px;z-index:2;font-size:18px;line-height:28px;font-weight:300;color:#000}.chart-legend-qty[_ngcontent-%COMP%]{position:absolute;left:92px;top:2px;z-index:2;font-size:18px;line-height:28px;font-weight:300;color:#000}.chart-legend-0[_ngcontent-%COMP%]{position:absolute;left:4px;top:2px;z-index:2;font-size:14px;line-height:16px;font-weight:300;color:#000}.chart-legend-values[_ngcontent-%COMP%]{position:absolute;left:4px;top:18px;z-index:2;font-size:14px;line-height:16px;font-weight:300;color:#000}.strategy_alert_field[_ngcontent-%COMP%]{width:100px;display:inline-block}.alert_field[_ngcontent-%COMP%]{width:10%;display:inline-block}.chart-positions[_ngcontent-%COMP%]{min-width:400px;display:flex;padding-right:8px}.chart-finchart[_ngcontent-%COMP%]{min-width:700px}#payOffExpiry[_ngcontent-%COMP%]{width:20%;display:inline-block}.positionExited[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#949fb133}.positionSL[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#e1f4ff}.positionReentry[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#ffd5d5}.hidePositionRow[_ngcontent-%COMP%]{display:none}.strategy_instru[_ngcontent-%COMP%]{width:20%;display:inline-block}.positions-roll-sugg[_ngcontent-%COMP%]{text-align:left!important}.green[_ngcontent-%COMP%]{color:green}.red[_ngcontent-%COMP%]{color:tomato}.blue[_ngcontent-%COMP%]{color:#00f}
/*# sourceMappingURL=chart.component-GUYWQ76T.css.map */`]})}return n})();var Qi=ka(Bm());var I5=ka(E5());function $te(n){if(n.length===0)return 0;var t=n[0],e=0,i;if(typeof t!="number")return Number.NaN;for(var r=1;r<n.length;r++){if(typeof n[r]!="number")return Number.NaN;i=t+n[r],Math.abs(t)>=Math.abs(n[r])?e+=t-i+n[r]:e+=n[r]-i+t,t=i}return t+e}function uo(n){if(n.length===0)throw new Error("mean requires at least one data point");return $te(n)/n.length}function Xte(n,t){var e=uo(n),i=0,r,s;if(t===2)for(s=0;s<n.length;s++)r=n[s]-e,i+=r*r;else for(s=0;s<n.length;s++)i+=Math.pow(n[s]-e,t);return i}function sS(n){if(n.length===0)throw new Error("variance requires at least one data point");return Xte(n,2)/n.length}function oS(n,t){if(n.length!==t.length)throw new Error("sampleCovariance requires samples with equal lengths");if(n.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var e=uo(n),i=uo(t),r=0,s=0;s<n.length;s++)r+=(n[s]-e)*(t[s]-i);var o=n.length-1;return r/o}var D5=function(){this.totalCount=0,this.data={}};D5.prototype.train=function(t,e){this.data[e]||(this.data[e]={});for(var i in t){var r=t[i];this.data[e][i]===void 0&&(this.data[e][i]={}),this.data[e][i][r]===void 0&&(this.data[e][i][r]=0),this.data[e][i][r]++}this.totalCount++};D5.prototype.score=function(t){var e={},i;for(var r in t){var s=t[r];for(i in this.data)e[i]={},this.data[i][r]?e[i][r+"_"+s]=(this.data[i][r][s]||0)/this.totalCount:e[i][r+"_"+s]=0}var o={};for(i in e){o[i]=0;for(var a in e[i])o[i]+=e[i][a]}return o};var M5=function(){this.weights=[],this.bias=0};M5.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var e=0,i=0;i<this.weights.length;i++)e+=this.weights[i]*t[i];return e+=this.bias,e>0?1:0};M5.prototype.train=function(t,e){if(e!==0&&e!==1)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var i=this.predict(t);if(typeof i=="number"&&i!==e){for(var r=e-i,s=0;s<this.weights.length;s++)this.weights[s]+=r*t[s];this.bias+=r}return this};var _Se=607/128,ASe=Math.log(Math.sqrt(2*Math.PI));var ySe=Math.sqrt(2*Math.PI);var Zte=Math.sqrt(2*Math.PI);function Qte(n){for(var t=n,e=n,i=1;i<15;i++)e*=n*n/(2*i+1),t+=e;return Math.round((.5+t/Zte*Math.exp(-n*n/2))*1e4)/1e4}var Jte=[];for(jm=0;jm<=3.09;jm+=.01)Jte.push(Qte(jm));var jm;var T5=(()=>{class n{http;delay=300;constructor(e){this.http=e}getRawCsvData(e){let i=`https://www.niftyindices.com/IndexConstituent/${e}`;return this.http.get(i,{responseType:"text"}).pipe(We(r=>{let s=r.split(`
`);return s[s.length-1].trim()===""&&s.pop(),{csvData:s.join(`
`),niftyIndicesSymbol:e}}),tr(r=>(console.error("Error fetching CSV:",r),Ie({csvData:"",niftyIndicesSymbol:e}))))}loadIndicesData(){let e=[];for(let r=0;r<ae.all_rows.length;r++){let s=ae.all_rows[r];s.isIndex&&e.push(s)}let i=0;for(let r=0;r<e.length;r++){let s=e[r];i++,setTimeout(()=>{console.log("item",i,s);let o=!1;r===e.length-1&&(o=!0,console.log("last item",e.length-1)),this.fetchChartData(s,o)},i*this.delay)}}loadStocksData(e){let i=[];for(let o=0;o<ae.all_rows.length;o++){let a=ae.all_rows[o];a.index===e.index&&i.push(a)}let r=ae.all_rows.find(o=>o.tradingsymbol==="NIFTY 50");i.push(r);let s=0;for(let o=0;o<i.length;o++){let a=i[o];(a.index===e.index||a.tradingsymbol==="NIFTY 50")&&(s++,setTimeout(()=>{console.log("item",s,a);let l=!1;o===i.length-1&&(l=!0,console.log("last item",i.length-1)),this.fetchChartData(a,l)},s*this.delay))}}loadStocksDataFromJson(e){let i=e.target.files[0],r=new FileReader;r.onload=s=>{try{let o=JSON.parse(s.target.result);ae.candlesData=o,console.log("All stocks fetched",ae.candlesData),this.calculations()}catch(o){console.error("Error parsing JSON:",o)}},r.readAsText(i)}fetchChartData(e,i){let r=this.findStockInMasters(e);if(r||(e.tradingsymbol=e.tradingsymbol+"-BE",r=this.findStockInMasters(e)),r?console.log("fetchChartData element:",r.tradingSymbol,r.token,r.exchange):console.log('Stock not found after appending "-BE"',e.tradingsymbol,ae.stocksList),r&&r.token){let s=new Date,o=new Date;o.setDate(o.getDate()-ae.chartDayToFetch);let a=""+o.getFullYear()+"-"+("0"+(o.getMonth()+1)).slice(-2)+"-"+("0"+o.getDate()).slice(-2),l=""+s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2),u={responseType:"json",headers:new Fe({authorization:f.broker_auth})},d="https://kite.zerodha.com/oms/instruments/historical/"+r.token+"/day?user_id="+f.zerodhaUserId+"&oi=1&from="+a+"&to="+l;this.http.get(d,u).subscribe(h=>{if(f.requestStatusEvent$.next({status:"success",message:"FETCHED "+r.tradingSymbol}),console.log("fetchChartData data:",r.tradingSymbol,h),h.data.candles){let p=h.data.candles;p.length===0&&console.log("ZERO CANDLES FOR ",r.tradingSymbol);for(let g=0;g<p.length;g++){let A=p[g],y=ae.candlesData[r.tradingSymbol];y||(y={});let b=this.getDateInFormat(A[0]);y[b]=[A[1],A[2],A[3],A[4],A[5],A[6]],ae.candlesData[r.tradingSymbol]=y}}console.log("candles:",Object.keys(ae.candlesData).length,ae.candlesData),i===!0&&(console.log("All stocks fetched",ae.candlesData),this.calculations())})}else i===!0&&(console.log("All stocks fetched (else case)",ae.candlesData),this.calculations())}findStockInMasters(e){let i=null;return f.mastersContract.forEach(r=>{if(e.tradingsymbol===r.tradingSymbol&&r.exchange==="NSE"){i=r;return}}),i}convertDateToFormat(e){let i=e;return new Date(i).toLocaleDateString("en-GB").replace(/\//g,"-")}getDateInFormat(e=null){e||(e=new Date);let i=new Date(e),r=i.getDate(),s=i.getMonth()+1,o=i.getFullYear(),a=i.getHours(),l=i.getMinutes(),c=i.getSeconds();return""+(r<=9?"0"+r:r)+"-"+(s<=9?"0"+s:s)+"-"+o+" "+(a<=9?"0"+a:a)+":"+(l<=9?"0"+l:l)+":"+(c<=9?"0"+c:c)}calculations(){for(let e=0;e<ae.all_rows.length;e++){let i=ae.all_rows[e],r=ae.candlesData[i.tradingsymbol];if(r){let s=this.getReturns(i,r,0);i.ltp=s,i.return1=this.getReturns(i,r,1),i.return2=this.getReturns(i,r,5),i.return3=this.getReturns(i,r,21),i.return4=this.getReturns(i,r,63),i.return5=this.getReturns(i,r,126),i.return6=this.getReturns(i,r,252),i.dist4=this.getDist(i,r,252),i.isDist4Within1Month=this.checkIsDist4Within1Month(i),i.DMA200=this.getMovingAverage(r,200)}else i.ltp=0,i.return1=-100,i.return2=-100,i.return3=-100,i.return4=-100,i.return5=-100,i.return6=-100,i.dist4=-100,i.isDist4Within1Month=!1,i.DMA200=999999999999}this.sortByReturns("return1"),this.sortByReturns("return2"),this.sortByReturns("return3"),this.sortByReturns("return4"),this.sortByReturns("return6"),this.sortByReturns("dist4"),this.sortByReturns("return5")}checkIsDist4Within1Month(e){let i=ae.candlesData[e.tradingsymbol],r=[],s=Object.keys(i).sort((l,c)=>this.parseDate(l).getTime()-this.parseDate(c).getTime());for(let l of s)r.push(i[l][3]);let o=Math.max(...r);return r.slice(-20).includes(o)}getMovingAverageFromDate(e,i,r){let s=0;for(let o=0;o<i;o++){let a=new Date(r);a.setDate(a.getDate()-o),a.setHours(0,0,0,0);let l=this.getDateInFormat(a),c=e[l];c&&(s+=c[3])}return s===0?0:Math.floor(s/i)}getMovingAverage(e,i){if(e.length<i)return 9999999999;let r=0;for(let s=0;s<i;s++)Object.values(e)[Object.keys(e).length-1-s]!==void 0&&(r+=Object.values(e)[Object.keys(e).length-1-s][3]);return Math.floor(r/i)}getHighInPeriod(e,i,r){let s=0;for(let o=i;o>=0;o--){let a=new Date(r);a.setDate(a.getDate()-o),a.setHours(0,0,0,0);let l=this.getDateInFormat(a),c=e[l];if(c){let u=c[1];u>s&&(s=u)}}return s}getDist(e,i,r){let s=0;for(let a=r;a>=0;a--){let l=this.getDataOfDate(e,i,a);if(l){let c=l[1];c>s&&(s=c)}}let o=(e.ltp-s)*100/s;return Math.round((o+1e-5)*100)/100}getReturnsApproach2(e,i,r){let s=null,o=null,a=0;for(;!s&&!(a>10);){let c=new Date(r);c.setDate(c.getDate()-i+a),c.setHours(0,0,0,0),o=this.getDateInFormat(c),s=e[o],a++}let l=null;if(s){let c=this.getDateInFormat(r);l=(e[c][3]-s[3])*100/s[3]}return l}getReturns(e,i,r,s=0){let o=Object.values(i)[Object.keys(i).length-1-s][3];if(r===0)return o;if(Object.keys(i).length-1-s<0||Object.keys(i).length-1-s-r<0)return 0;if(o){if(Object.values(i)[Object.keys(i).length-1-s-r]===void 0)return 0;let a=Object.values(i)[Object.keys(i).length-1-s-r][3],l=(o-a)*100/a;return l=Math.round((l+1e-5)*100)/100,l}return 0}getRSReturns(e,i,r,s=0){if(r===0)return 0;let o=0,a=Object.values(i)[Object.keys(i).length-1-s];if(a&&(o=a[3]),o){let l=Object.values(i)[Object.keys(i).length-1-s-r];if(l){let c=l[3],u=o/c;return u=Math.round((u+1e-5)*100)/100,u}else return 0}else return 0}getDataOfDate(e,i,r){return Object.values(i)[Object.keys(i).length-1-r]}sortByReturns(e="return5",i=null){let r=[],s=[];for(let o=0;o<ae.all_rows.length;o++){let a=ae.all_rows[o];a.isIndex&&s.push(a)}s=this.sortStocks(s,e),console.log("sort",s);for(let o=0;o<s.length;o++){let a=s[o],l=ae.all_rows.filter(c=>c.index===a.tradingsymbol&&!c.isIndex);for(let c=0;c<l.length;c++){let u=l[c];i?this.isMatchingFilterCriteria(u,i)?u.isMatchingFilter=!0:u.isMatchingFilter=!1:u.isMatchingFilter=!0}l=this.sortStocks(l,e),r.push(a);for(let c=0;c<l.length;c++){let u=l[c];u[`${e}_rank`]=c+1,r.push(u)}}ae.all_rows=r,ae.stocksEvent$.next("refresh")}isMatchingFilterCriteria(e,i){for(let r in i)if(i[r].selected&&(r==="DMA200"&&e.DMA200>e.ltp||r!=="DMA200"&&e[r]<=i[r].value))return!1;return!0}sortStocks(e,i){return e.sort((r,s)=>s.isMatchingFilter!==r.isMatchingFilter?s.isMatchingFilter?1:-1:s[i]-r[i])}loadWatchlistFromLS(){ae.watchlist=JSON.parse(localStorage.getItem("stocks_watchlist")),ae.watchlist===null&&(ae.watchlist=[]),console.log("loading watchlist from LS:",ae.watchlist)}backtest1(e="NIFTY 500",i=1,r=5){let o=new Date().getDate()+(6-new Date().getDay()-1)-7,a=new Date;a.setDate(o),o=a.getDate()+(6-a.getDay()-1)-7,a.setDate(o),a.setHours(0,0,0,0),console.log("Last to Last Week: ",a);let l=ae.all_rows.find(p=>p.tradingsymbol===e),c=ae.all_rows.filter(p=>p.index===l.tradingsymbol&&!p.isIndex),u=new Date(a),d=0,h=[];for(let p=0;p<156;p++){let g=c.map(b=>Object.assign({},b));for(let b=0;b<g.length;b++){let x=g[b],P=ae.candlesData[x.tradingsymbol];if(!P)continue;let T=null,k=null,C=0;for(;!T;){let G=new Date(u);G.setDate(G.getDate()-C),k=this.getDateInFormat(G),T=P[k],C++}let M=u.getDay(),O=u.getDate()-M+(M==0?-6:1),R=new Date(u);R.setDate(O);let q=null,H=null;for(C=0;!q;){let G=new Date(R);G.setDate(G.getDate()+C),H=this.getDateInFormat(G),q=P[H],C++}let Z=q[0],ce=(T[3]-Z)*100/Z;ce=Math.round((ce+1e-5)*100)/100,x.return2=ce}g.sort((b,x)=>x.return2-b.return2),console.log("stocksInIndexCopy",p,u,g);let A=0;for(let b=i-1;b<r;b++){let x=g[b],P=ae.candlesData[x.tradingsymbol],T=null,k=null,C=0;for(;!T;){let G=new Date(u);G.setDate(G.getDate()-C),k=this.getDateInFormat(G),T=P[k],C++}let M=new Date(u),O=7-M.getDay()+5,R=new Date(M.setDate(M.getDate()+O)),q=null,H=null;for(C=0;!q;){let G=new Date(R);G.setDate(G.getDate()-C),H=this.getDateInFormat(G),q=P[H],C++}let Z=T[3],ce=(q[3]-Z)*100/Z;ce=Math.round((ce+1e-5)*100)/100,console.log("Curr Week Returns:",x.tradingsymbol,ce,k,H),A+=ce}d+=A,h.push(A),console.log("cum_returns",u,A);let y=u.getDate()+(6-u.getDay()-1)-7;u.setDate(y)}console.log("all_returns",d),this.exportBacktest(h)}exportBacktest(e){let i="stocks_backtest.csv";console.log("exporting: ",i);let r="";for(let l=0;l<e.length;l++){let c=e[l];r+=c+`\r
`}let s=new Blob([r],{type:"application/x-msdownload"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.target="_blank",document.body.appendChild(a),a.download=i,a.click(),a.parentNode.removeChild(a)}backtestMomentum1(e="NIFTY 500",i=20,r="3MReturns"){let s=1e6,o=s/i,a=[],l=ae.all_rows.find(p=>p.tradingsymbol===e),c=ae.all_rows.filter(p=>p.index===l.tradingsymbol&&!p.isIndex),u=0,d=[],h;for(let p=416;p>0;p--){let g=c.map(k=>Object.assign({},k)),A=[];for(let k=0;k<g.length;k++){let C=g[k],M=ae.candlesData[C.tradingsymbol];if(!M)continue;let O=null,R=null,q=null,H=0;for(;!O&&!(H>10);)R=this.getLastToLastWeekDay(p,2),R.setDate(R.getDate()+H),R.setHours(0,0,0,0),q=this.getDateInFormat(R),O=M[q],H++;if(!O)continue;h=R;let Z=this.getReturnsApproach2(M,30,R),ne=this.getReturnsApproach2(M,90,R),ce=this.getReturnsApproach2(M,180,R),G=this.getReturnsApproach2(M,365,R),$=this.getHighInPeriod(M,365,R),ee=0;$!==0&&(ee=(O[3]-$)*100/$);let ye=this.getMovingAverageFromDate(M,200,R);ne&&ne>0&&ce&&ce>0&&G&&G>0&&ee!==0&&Math.abs(ee)<25&&ye!==0&&O[3]>ye&&A.push({tradingsymbol:C.tradingsymbol,oneYearReturn:G,sixMonthsReturn:ce,threeMonthsReturn:ne,oneMonthReturn:Z,dataAtCurrDate:O,currDate_obj:R})}let y=this.flattenToArray(A);console.log("flattenData",y.length,y);let b=this.flattenIndividual({tradingsymbol:"NIFTY MIDCAP 150",currDate_obj:h});if(console.log("benchmark",b.length,b),r==="3MReturns"?A=this.getTopStocksWith3MReturns(A,i,p):r==="6MReturns"?A=this.getTopStocksWith6MReturns(A,i,p):r==="1YReturns"?A=this.getTopStocksWith1YReturns(A,i,p):r==="1MReturns"?A=this.getTopStocksWith1MReturn(A,i,p):r==="Alpha"?(A=this.getTopStocksWithAlphas(y,b,i),console.log("alpha selectedStocks",A)):r==="JensenAlpha"?(A=this.getTopStocksWithJensenAlphas(y,b,i),console.log("jensenalpha selectedStocks",A)):r==="NormalizedMomentum"&&(A=this.getTopStocksWithNormalizedMomentum(y,i)),r!=="3MReturns"&&r!=="6MReturns"&&r!=="1YReturns"&&r!=="1MReturns"){let k=[];for(let C=0;C<A.length;C++){let M=A[C];k.push({tradingsymbol:M.stock,dataAtCurrDate:M.dataAtCurrDate})}A=k}console.log("selectedStocks",A,this.getLastToLastWeekDay(p,2));let x=0,P=0,T=null;for(let k=0;k<A.length;k++){let C=A[k].tradingsymbol,M=ae.candlesData[C],O=A[k].dataAtCurrDate,R=null,q=null,H=null,Z=0;for(;!R&&!(Z>10);)q=this.getLastWeekDay(p,2),q.setDate(q.getDate()+Z),q.setHours(0,0,0,0),H=this.getDateInFormat(q),T=H,R=M[H],Z++;let ne=0,ce=null,G=null;if(R){ce=O[3],G=R[3],ne=(G-ce)*100/ce,ne=Math.round((ne+1e-5)*100)/100;let $=0,ee=s/A.length;$=ee+ne/100*ee,P+=$,x+=ne,console.log("Curr Week Returns:",C,ne,$,ee,this.getLastToLastWeekDay(p,2),ce,G)}}P!==0&&(s=P),u+=x,d.push(s),console.log("cum_returns",this.getLastToLastWeekDay(p,2),s,x)}console.log("all_returns",u),this.exportBacktest(d)}backtestMomentum2(e="NIFTY 500",i=20,r="3MReturns"){let s=1e6,o=0,a={},l=s/i,c=[],u=ae.all_rows.find(A=>A.tradingsymbol===e),d=ae.all_rows.filter(A=>A.index===u.tradingsymbol&&!A.isIndex),h=0,p=[],g;for(let A=416;A>0;A--){let y=d.map(M=>Object.assign({},M)),b=[];for(let M=0;M<y.length;M++){let O=y[M],R=ae.candlesData[O.tradingsymbol];if(!R)continue;let q=null,H=null,Z=null,ne=0;for(;!q&&!(ne>10);)H=this.getLastToLastWeekDay(A,2),H.setDate(H.getDate()+ne),H.setHours(0,0,0,0),Z=this.getDateInFormat(H),q=R[Z],ne++;if(!q)continue;g=H;let ce=this.getReturnsApproach2(R,30,H),G=this.getReturnsApproach2(R,90,H),$=this.getReturnsApproach2(R,180,H),ee=this.getReturnsApproach2(R,365,H),ye=this.getHighInPeriod(R,365,H),de=0;ye!==0&&(de=(q[3]-ye)*100/ye);let ge=this.getMovingAverageFromDate(R,200,H);de!==0&&Math.abs(de)<=25&&ge!==0&&q[3]>=ge&&b.push({tradingsymbol:O.tradingsymbol,oneYearReturn:ee,sixMonthsReturn:$,threeMonthsReturn:G,oneMonthReturn:ce,dataAtCurrDate:q,currDate_obj:H})}let x=this.flattenToArray(b);console.log("flattenData",x.length,x);let P=this.flattenIndividual({tradingsymbol:"NIFTY MIDCAP 150",currDate_obj:g});if(console.log("benchmark",P.length,P),r==="3MReturns"?b=this.getTopStocksWith3MReturns(b,i,A):r==="6MReturns"?b=this.getTopStocksWith6MReturns(b,i,A,"filter"):r==="1YReturns"?b=this.getTopStocksWith1YReturns(b,i,A):r==="1MReturns"?b=this.getTopStocksWith1MReturn(b,i,A):r==="Alpha"?(b=this.getTopStocksWithAlphas(x,P,i),console.log("alpha selectedStocks",b)):r==="JensenAlpha"?(b=this.getTopStocksWithJensenAlphas(x,P,i),console.log("jensenalpha selectedStocks",b)):r==="NormalizedMomentum"?b=this.getTopStocksWithNormalizedMomentum(x,i):r==="WeightedMomentum"&&(b=this.getTopStocksWithWeightedReturns(b,i,A)),r!=="3MReturns"&&r!=="6MReturns"&&r!=="1YReturns"&&r!=="1MReturns"&&r!=="WeightedMomentum"){let M=[];for(let O=0;O<b.length;O++){let R=b[O];M.push({tradingsymbol:R.stock,dataAtCurrDate:R.dataAtCurrDate})}b=M}console.log("selectedStocks",b,this.getLastToLastWeekDay(A,2));let T=0,k=0,C=null;for(let M=0;M<b.length;M++){let O=b[M].tradingsymbol,R=ae.candlesData[O],q=b[M].dataAtCurrDate,H=null,Z=null,ne=null,ce=0;for(;!H&&!(ce>10);)Z=this.getLastWeekDay(A,2),Z.setDate(Z.getDate()+ce),Z.setHours(0,0,0,0),ne=this.getDateInFormat(Z),C=ne,H=R[ne],ce++;let G=0,$=null,ee=null;if(H){$=q[3],ee=H[3],G=(ee-$)*100/$,G=Math.round((G+1e-5)*100)/100;let ye=0,de=s/i;ye=de+G/100*de,k+=ye,o=0,b.length<i&&(o=(i-b.length)*de),k+=o,T+=G,a.hasOwnProperty(O)||(a[O]={return:0,count:0}),a[O].return+=G,a[O].count+=1,console.log("Curr Week Returns:",O,G,ye,de,this.getLastToLastWeekDay(A,2),$,ee)}}k!==0&&(s=k),h+=T,p.push(s),console.log("cum_returns",this.getLastToLastWeekDay(A,2),s,T)}console.log("all_returns",h),console.log("stockDetails",a),this.exportBacktest(p)}backtestIndexAboveMA(e){let i=e.split(`
`),r=i[0].split(","),s=[],o=0,a=0,l=0,c=0;for(let u=1;u<i.length-1;u++){let d=i[u].split(",");if(d.length<r.length)continue;let h=this.convertDateToFormat(d[0]),p=parseFloat(d[4].replace(/"/g,"")),g=parseFloat(d[5].replace(/"/g,"")),A="HOLD",y=0;if(u===1&&p>g&&(A="BUY",o=1,a=p),u>1){o===1&&(y=p-a,l=c+y);let b=i[u-1].split(","),x=parseFloat(b[4].replace(/"/g,"")),P=parseFloat(b[5].replace(/"/g,""));p>g&&x<=P&&o===0?(A="BUY",o=1,a=p):p<g&&x>=P&&o===1&&(A="SELL",o=0,c=l)}s.push({Date:h,Close:p,MA:g,Signal:A,DailyPnL:y.toFixed(2),CumulativePnL:l.toFixed(2)})}this.exportCSV(s)}parseDate(e){let[i,r,s,o,a,l]=e.split(/[- :]/);return new Date(s,r-1,i,o,a,l)}flattenToArray(e){let i=[];for(let r=0;r<e.length;r++){let s=e[r],o=ae.candlesData[s.tradingsymbol],a=new Date(s.currDate_obj),l=new Date(s.currDate_obj);l.setFullYear(a.getFullYear()-1);let c=[],u=Object.keys(o).sort((d,h)=>this.parseDate(d).getTime()-this.parseDate(h).getTime());for(let d of u){let h=this.parseDate(d);h>=l&&h<=a&&c.push(o[d][3])}i.push({stock:s.tradingsymbol,dailyPrices:c,dataAtCurrDate:s.dataAtCurrDate,currDate_obj:s.currDate_obj})}return i}flattenIndividual(e){let i=[],r=ae.candlesData[e.tradingsymbol],s=new Date(e.currDate_obj),o=new Date(e.currDate_obj);o.setFullYear(s.getFullYear()-1);let a=[],l=Object.keys(r).sort((c,u)=>this.parseDate(c).getTime()-this.parseDate(u).getTime());for(let c of l){let u=this.parseDate(c);u>=o&&u<=s&&a.push(r[c][3])}return a}calculateDailyReturns(e){return e.slice(1).map((i,r)=>(i-e[r])/e[r])}getTopStocksWithWeightedReturns(e,i,r){return e.sort((s,o)=>.4*o.oneYearReturn+.3*o.sixMonthsReturn+.3*o.threeMonthsReturn-(.4*s.oneYearReturn+.3*s.sixMonthsReturn+.3*s.threeMonthsReturn)),console.log("selectedStocks sorted by weighted returns",e,this.getLastToLastWeekDay(r,2)),e.slice(0,i)}getTopStocksWith3MReturns(e,i,r){return e.sort((s,o)=>o.threeMonthsReturn-s.threeMonthsReturn),console.log("selectedStocks sorted",e,this.getLastToLastWeekDay(r,2)),e.slice(0,i)}getTopStocksWith6MReturns(e,i,r,s="sort"){return e.sort((o,a)=>a.sixMonthsReturn-o.sixMonthsReturn),console.log("selectedStocks sorted",e,this.getLastToLastWeekDay(r,2)),s==="filter"?e.slice(0,i):e}getTopStocksWith1YReturns(e,i,r){return e.sort((s,o)=>o.oneYearReturn-s.oneYearReturn),console.log("selectedStocks sorted",e,this.getLastToLastWeekDay(r,2)),e.slice(0,i)}getTopStocksWith1MReturn(e,i,r){return e.sort((s,o)=>o.oneMonthReturn-s.oneMonthReturn),console.log("selectedStocks sorted",e,this.getLastToLastWeekDay(r,2)),e.slice(0,i)}getTopStocksWithAlphas(e,i,r){let s=this.calculateDailyReturns(i);return e.map(a=>{let l=this.calculateDailyReturns(a.dailyPrices),c=Math.min(l.length,s.length);if(c<50)return console.warn(`Skipping stock ${a.stock} due to insufficient data length.`),null;let u=l.slice(0,c),d=s.slice(0,c),h=uo(u),p=uo(d),g=oS(u,d),A=sS(d);if(A===0)return console.warn(`Benchmark variance is zero, cannot calculate alpha for stock ${a.stock}.`),null;let y=g/A,b=h-y*p;return Ne(re({},a),{dailyReturns:u,alpha:b})}).filter(a=>a!==null).sort((a,l)=>l.alpha-a.alpha).slice(0,r)}getTopStocksWithJensenAlphas(e,i,r){let s=this.calculateDailyReturns(i);return e.map(a=>{let l=this.calculateDailyReturns(a.dailyPrices),c=Math.min(l.length,s.length);if(c<50)return console.warn(`Skipping stock ${a.stock} due to insufficient data length.`),null;let u=l.slice(0,c),d=s.slice(0,c),h=uo(u),p=uo(d),g=oS(u,d),A=sS(d);if(A===0)return console.warn(`Benchmark variance is zero, cannot calculate Jensen's alpha for stock ${a.stock}.`),null;let y=g/A,b=h-(ae.riskFreeRate+y*(p-ae.riskFreeRate));return Ne(re({},a),{dailyReturns:u,jensenAlpha:b})}).filter(a=>a!==null).sort((a,l)=>l.jensenAlpha-a.jensenAlpha).slice(0,r)}getTopStocksWithNormalizedMomentum(e,i){e.forEach(d=>{d.Daily_Returns=this.calculateDailyReturns(d.dailyPrices)}),e.forEach(d=>{let h=d.dailyPrices.length,p=d.dailyPrices[h-1],g=h>252?d.dailyPrices[h-252-1]:d.dailyPrices[0],A=h>126?d.dailyPrices[h-126-1]:d.dailyPrices[0],y=h>63?d.dailyPrices[h-63-1]:d.dailyPrices[0];d["12M_Return"]=p/g-1,d["6M_Return"]=p/A-1,d["3M_Return"]=p/y-1}),e.forEach(d=>{let h=this.standardDeviation(d.Daily_Returns);d.Volatility=h*Math.sqrt(252)}),e.forEach(d=>{d.MR12=d["12M_Return"]/d.Volatility,d.MR6=d["6M_Return"]/d.Volatility,d.MR3=d["3M_Return"]/d.Volatility});let r=this.mean(e.map(d=>d.MR12)),s=this.standardDeviation(e.map(d=>d.MR12)),o=this.mean(e.map(d=>d.MR6)),a=this.standardDeviation(e.map(d=>d.MR6)),l=this.mean(e.map(d=>d.MR3)),c=this.standardDeviation(e.map(d=>d.MR3));e.forEach(d=>{d.Z_MR12=(d.MR12-r)/s,d.Z_MR6=(d.MR6-o)/a,d.Z_MR3=(d.MR3-l)/c}),e.forEach(d=>{d.Weighted_Z=.2*d.Z_MR12+.3*d.Z_MR6+.5*d.Z_MR3}),e.forEach(d=>{d.Normalized_Momentum_Score=d.Weighted_Z>=0?1+d.Weighted_Z:Math.pow(1-d.Weighted_Z,-1)});let u=e.sort((d,h)=>h.Normalized_Momentum_Score-d.Normalized_Momentum_Score).slice(0,i);return console.log("Top Stocks:",u),u}mean(e){return e.reduce((i,r)=>i+r,0)/e.length}standardDeviation(e){let i=this.mean(e);return Math.sqrt(e.reduce((r,s)=>r+Math.pow(s-i,2),0)/e.length)}convertToCSV(e){if(e.length===0)return"";let i=Object.keys(e[0]).join(","),r=e.map(s=>Object.values(s).join(","));return[i,...r].join(`
`)}exportCSV(e){let i=this.convertToCSV(e),r=new Blob([i],{type:"text/csv"}),s=window.URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.download="output.csv",document.body.appendChild(o),o.click(),document.body.removeChild(o)}findDifferenceInArrays(e,i){let r=[];for(let s=0;s<e.length;s++){let o=e[s],a=!1;for(let l=0;l<i.length;l++)if(o.tradingsymbol===i[l].tradingsymbol){a=!0;break}a||r.push(o)}return r}getLastWeekDay(e,i){let r=new Date,s=r.getDay(),o=new Date(r);return o.setDate(r.getDate()-(s+7-i)%7-7*(e+1)),o}getLastToLastWeekDay(e,i){let r=this.getLastWeekDay(e,i),s=new Date(r);return s.setDate(r.getDate()-7),s}static \u0275fac=function(i){return new(i||n)(oe(It))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var nne=n=>({"d-none":n}),In=(n,t)=>({green:n,red:t}),ine=(n,t,e,i,r)=>({"notmatchingfilter-row":n,indexRow:t,niftyRow:e,"watchlist-row":i,"d-none":r}),rne=n=>({stockHolding:n}),Fc=(n,t,e)=>({green:n,red:t,"bold-higher":e});function sne(n,t){n&1&&(m(0,"div",42),w(1,"1M"),_())}function one(n,t){n&1&&(m(0,"div",43),w(1,"M150M50"),_())}function ane(n,t){n&1&&(m(0,"div",43),w(1,"N500M50"),_())}function lne(n,t){n&1&&(m(0,"div",43),w(1,"A50"),_())}function cne(n,t){n&1&&(m(0,"div",44),w(1,"N50"),_())}function une(n,t){n&1&&(m(0,"div",44),w(1,"N100"),_())}function dne(n,t){n&1&&(m(0,"div",44),w(1,"M150"),_())}function hne(n,t){if(n&1){let e=fe();m(0,"input",48),U("ngModelChange",function(r){E(e);let s=F().$implicit,o=F();return z(o.filterCriteria[s].value,r)||(o.filterCriteria[s].value=r),D(r)}),j("input",function(){E(e);let r=F(2);return D(r.filterData())}),_()}if(n&2){let e=F().$implicit,i=F();W("ngModel",i.filterCriteria[e].value),V("disabled",!i.filterCriteria[e].selected)}}function pne(n,t){if(n&1){let e=fe();m(0,"div",45)(1,"label")(2,"input",46),U("ngModelChange",function(r){let s=E(e).$implicit,o=F();return z(o.filterCriteria[s].selected,r)||(o.filterCriteria[s].selected=r),D(r)}),j("change",function(){E(e);let r=F();return D(r.filterData())}),_(),w(3),_(),te(4,hne,1,2,"input",47),_()}if(n&2){let e=t.$implicit,i=F();v(2),W("ngModel",i.filterCriteria[e].selected),v(),J(" ",i.filterKeysLabels[e]," "),v(),V("ngIf",e!=="DMA200")}}function fne(n,t){if(n&1){let e=fe();m(0,"span",64),j("click",function(){E(e);let r=F().$implicit,s=F();return D(s.expandCollapseIndex(r))}),w(1,"\u2261"),_()}}function gne(n,t){if(n&1){let e=fe();m(0,"span",65),j("click",function(){E(e);let r=F().$implicit,s=F();return D(s.loadStocksData(r))}),w(1,"\u21BB"),_()}}function mne(n,t){if(n&1){let e=fe();m(0,"span",66),j("click",function(){E(e);let r=F().$implicit,s=F();return D(s.plotRSCharts(r))}),w(1,"RS"),_()}}function _ne(n,t){if(n&1){let e=fe();m(0,"span",67),j("click",function(){E(e);let r=F().$implicit,s=F();return D(s.addToWatchlist(r))}),w(1,"W"),_()}}function Ane(n,t){if(n&1){let e=fe();m(0,"span",68),j("click",function(){E(e);let r=F().$implicit,s=F();return D(s.removeFromWatchlist(r))}),w(1,"X"),_()}}function yne(n,t){n&1&&(m(0,"span",69),w(1,"\u2714"),_())}function vne(n,t){if(n&1&&(m(0,"span",8),w(1),_()),n&2){let e=F().$implicit;v(),J("(",e.return1_rank,")")}}function wne(n,t){if(n&1&&(m(0,"span",8),w(1),_()),n&2){let e=F().$implicit;v(),J("(",e.return2_rank,")")}}function bne(n,t){if(n&1&&(m(0,"span",8),w(1),_()),n&2){let e=F().$implicit;v(),J("(",e.return3_rank,")")}}function Sne(n,t){if(n&1&&(m(0,"span",8),w(1),_()),n&2){let e=F().$implicit;v(),J("(",e.return4_rank,")")}}function Cne(n,t){if(n&1&&(m(0,"span",8),w(1),_()),n&2){let e=F().$implicit;v(),J("(",e.return5_rank,")")}}function xne(n,t){if(n&1&&(m(0,"span",8),w(1),_()),n&2){let e=F().$implicit;v(),J("(",e.return6_rank,")")}}function Ene(n,t){if(n&1&&(m(0,"span",8),w(1),_()),n&2){let e=F().$implicit;v(),J("(",e.dist4_rank,")")}}function Dne(n,t){n&1&&(m(0,"div",42),w(1,"1M"),_())}function Mne(n,t){n&1&&(m(0,"div",43),w(1,"M150M50"),_())}function Tne(n,t){n&1&&(m(0,"div",43),w(1,"N500M50"),_())}function Ine(n,t){n&1&&(m(0,"div",43),w(1,"A50"),_())}function kne(n,t){n&1&&(m(0,"div",44),w(1,"N50"),_())}function Pne(n,t){n&1&&(m(0,"div",44),w(1,"N100"),_())}function Nne(n,t){n&1&&(m(0,"div",44),w(1,"M150"),_())}function One(n,t){if(n&1&&(m(0,"div"),te(1,Mne,2,0,"div",11)(2,Tne,2,0,"div",11)(3,Ine,2,0,"div",11)(4,kne,2,0,"div",12)(5,Pne,2,0,"div",12)(6,Nne,2,0,"div",12),_()),n&2){let e=F().$implicit,i=F();v(),V("ngIf",i.isStockInIndex("NIFTYM150MOMNTM50",e.tradingsymbol)&&e.index!=="NIFTYM150MOMNTM50"),v(),V("ngIf",i.isStockInIndex("MOMENTUM50",e.tradingsymbol)&&e.index!=="MOMENTUM50"),v(),V("ngIf",i.isStockInIndex("NIFTY ALPHA 50",e.tradingsymbol)&&e.index!=="NIFTY ALPHA 50"),v(),V("ngIf",i.isStockInIndex("NIFTY 50",e.tradingsymbol)),v(),V("ngIf",i.isStockInIndex("NIFTY 100",e.tradingsymbol)),v(),V("ngIf",i.isStockInIndex("NIFTY MIDCAP 150",e.tradingsymbol))}}function Rne(n,t){if(n&1){let e=fe();gf(0),m(1,"tr",49)(2,"td",50),te(3,fne,2,0,"span",51)(4,gne,2,0,"span",52)(5,mne,2,0,"span",53)(6,_ne,2,0,"span",54)(7,Ane,2,0,"span",55),m(8,"span",56),j("click",function(){let r=E(e).$implicit,s=F();return D(s.openPopup(r))}),w(9,"\u2197"),_()(),m(10,"td",49)(11,"a",57),w(12),_(),te(13,yne,2,0,"span",58),_(),m(14,"td"),w(15),_(),m(16,"td",49),w(17),_(),m(18,"td",49)(19,"div",59)(20,"span",60),w(21),_(),te(22,vne,2,1,"span",61),_()(),m(23,"td",49)(24,"div",59)(25,"span",60),w(26),_(),te(27,wne,2,1,"span",61),_()(),m(28,"td",49)(29,"div",59)(30,"span",60),w(31),_(),te(32,bne,2,1,"span",61),_()(),m(33,"td",49)(34,"div",59)(35,"span",60),w(36),_(),te(37,Sne,2,1,"span",61),_()(),m(38,"td",49)(39,"div",59)(40,"span",60),w(41),_(),te(42,Cne,2,1,"span",61),_()(),m(43,"td",49)(44,"div",59)(45,"span",60),w(46),_(),te(47,xne,2,1,"span",61),_()(),m(48,"td",49)(49,"div",59)(50,"span",60),w(51),_(),te(52,Ene,2,1,"span",61)(53,Dne,2,0,"div",9),_()(),m(54,"td",62),te(55,One,7,6,"div",63),_()(),mf()}if(n&2){let e=t.$implicit,i=F();v(),V("ngClass",nD(36,ine,!e.isMatchingFilter,e.isIndex,e.isIndex&&e.tradingsymbol==="NIFTY 50",e.watchlist,i.isRowHidden(e)||i.isRowHiddenFilter(e))),v(2),V("ngIf",e.isIndex===!0),v(),V("ngIf",e.isIndex===!0),v(),V("ngIf",e.isIndex===!0),v(),V("ngIf",e.isIndex===!1&&e.watchlist===!1),v(),V("ngIf",e.watchlist),v(3),V("ngClass",Zt(42,rne,i.isStockHolding(e))),v(),V("href","https://www.google.com/search?q="+e.tradingsymbol+"&tbm=nws",tE),v(),J(" ",e.tradingsymbol," "),v(),V("ngIf",i.isStockInHoldings(e)),v(2),Q(e.ltp),v(),V("ngClass",Re(44,In,e.ltp>e.DMA200,e.ltp<e.DMA200)),v(),Q(e.DMA200),v(),V("ngClass",sn(47,Fc,e.return1>0,e.return1<0,e.return1>2||e.return1<-2)),v(3),Q(e.return1),v(),V("ngIf",!e.isIndex),v(),V("ngClass",sn(51,Fc,e.return2>0,e.return2<0,e.return2>5||e.return2<-5)),v(3),Q(e.return2),v(),V("ngIf",!e.isIndex),v(),V("ngClass",sn(55,Fc,e.return3>0,e.return3<0,e.return3>7||e.return3<-7)),v(3),Q(e.return3),v(),V("ngIf",!e.isIndex),v(),V("ngClass",sn(59,Fc,e.return4>0,e.return4<0,e.return4>10||e.return4<-10)),v(3),Q(e.return4),v(),V("ngIf",!e.isIndex),v(),V("ngClass",sn(63,Fc,e.return5>0,e.return5<0,e.return5>10||e.return5<-10)),v(3),Q(e.return5),v(),V("ngIf",!e.isIndex),v(),V("ngClass",sn(67,Fc,e.return6>0,e.return6<0,e.return6>10||e.return6<-10)),v(3),Q(e.return6),v(),V("ngIf",!e.isIndex),v(),V("ngClass",Re(71,In,e.dist4>=-15,e.dist4<-15)),v(3),Q(e.dist4),v(),V("ngIf",!e.isIndex),v(),V("ngIf",!e.isIndex&&e.isDist4Within1Month),v(2),V("ngIf",!e.isIndex)}}var k5=(()=>{class n{appService;zerodhaService;mapService;websocketService;angelWS;stocksService;handleKeyDown(e){if(e.key==="Escape")this.closePopup();else if(e.key==="ArrowUp"){if(this.showPopup){e.preventDefault();let i=ae.all_rows.findIndex(r=>r.tradingsymbol===this.popupChart2.tradingsymbol);if(i>0){let r=ae.all_rows[i-1];console.log("Previous object:",r),this.openPopup(r)}else console.log("No previous item found or target is at the start.")}}else if(e.key==="ArrowDown"&&this.showPopup){e.preventDefault();let i=ae.all_rows.findIndex(r=>r.tradingsymbol===this.popupChart2.tradingsymbol);if(i>=0&&i<ae.all_rows.length-1){let r=ae.all_rows[i+1];console.log("Next object:",r),this.openPopup(r)}else console.log("No next item found or target is at the end.")}}all_rows=[];watchlist_rows=[];showPopup=!1;popupChart2=null;charts={};hideNonWatchlist=!1;showST=!1;stPeriod=10;stVol=2;showEMA1=!1;emaPeriod1=21;showEMA2=!1;emaPeriod2=55;showSMA=!0;smaPeriod=200;lastColumnSort="return5";enableFilter=!1;enableFilter3M=!1;filter3M=0;enableFilter6M=!1;filter6M=0;enableFilter1Y=!1;filter1Y=0;enableFilter52WHD=!1;filter52WHD=27;enableFilterDMA=!1;selectedFilters=[];filterKeys=["return4","return5","return6","dist4","DMA200"];filterKeysLabels={return4:"3M%",return5:"6M%",return6:"1Y%",dist4:"52WHD%",DMA200:"200DMA"};filterCriteria={return4:{selected:!1,value:0},return5:{selected:!1,value:0},return6:{selected:!1,value:0},dist4:{selected:!1,value:-27},DMA200:{selected:!1}};constructor(e,i,r,s,o,a){this.appService=e,this.zerodhaService=i,this.mapService=r,this.websocketService=s,this.angelWS=o,this.stocksService=a,ae.stocksEvent$.subscribe(l=>{console.log("stocksEvent subcribe: ",l),l==="refresh"&&(this.all_rows=ae.all_rows)})}ngOnInit(){}fetchAllStocksInIndices(){if(!ae.fetchFromWebsite){this.initialProcessing();return}let e=[];ae.stocksList.forEach(i=>{let r=this.stocksService.getRawCsvData(i.niftyIndicesSymbol);e.push(r)}),Kc(e).subscribe({next:i=>{i.forEach(r=>{if(console.log("Response Data:",r),r&&r.csvData){let s=I5.parse(r.csvData,{header:!0}).data;console.log("Parsed Data:",s);let o=s.map(l=>l.Symbol),a=ae.stocksList.find(l=>l.niftyIndicesSymbol===r.niftyIndicesSymbol);a&&(a.stocks=[...o])}else console.error("No 'csvData' found in response:",r)}),f.requestStatusEvent$.next({status:"success",message:"Fetched all stocks in indices. Please verify."}),this.initialProcessing()},error:i=>{console.error("Error during API call:",i)}})}initialProcessing(){console.log("initialProcessing"),this.all_rows=[],this.watchlist_rows=[];for(let e=0;e<ae.stocksList.length;e++){let i=ae.stocksList[e],r=new gh;r.tradingsymbol=i.tradingsymbol,r.watchlist=!1,r.isIndex=!0,r.index=r.tradingsymbol,r.isVisible=!0,this.all_rows.push(r);for(let s=0;s<i.stocks.length;s++){let o=i.stocks[s],a=new gh;a.tradingsymbol=o,a.watchlist=!1,a.isIndex=!1,a.index=i.tradingsymbol,a.isVisible=!1,this.all_rows.push(a)}}ae.all_rows=this.all_rows,this.loadWatchlistFromLS();for(let e=0;e<ae.watchlist.length;e++){let i=ae.watchlist[e],r=ae.all_rows.filter(s=>s.tradingsymbol===i);for(let s=0;s<r.length;s++){let o=r[s];o.watchlist=!0,console.log("Entry from watchlist:",o)}}}ngAfterViewInit(){setTimeout(()=>{})}isStockInIndex(e,i){return ae.stocksList.find(r=>r.tradingsymbol===e)?.stocks.includes(i)||!1}isStockInHoldings(e){return e.isIndex?!1:!!(f.stockPositions&&f.stockPositions.trades&&f.stockPositions.trades.filter(r=>r.scrip===e.tradingsymbol).length>0)}isRowHidden(e){return e.isIndex?!1:this.hideNonWatchlist?this.isStockInHoldings(e)?!1:!e.watchlist:!e.isVisible}isRowHiddenFilter(e){if(e.isIndex)return!1;let i=!1;return this.enableFilter&&(this.enableFilter3M&&e.return4<this.filter3M&&(i=!0),i===!1&&this.enableFilter6M&&e.return5<this.filter6M&&(i=!0),i===!1&&this.enableFilter1Y&&e.return6<this.filter1Y&&(i=!0),i===!1&&this.enableFilter52WHD&&e.dist4<-this.filter52WHD&&(i=!0),i===!1&&this.enableFilterDMA&&e.ltp<e.DMA200)?!0:i}openPopup(e){this.showPopup=!0,this.popupChart2=e,this.plotPopupChart(e)}getChartInfo(e){let i;return e===1&&(i=ae.all_rows.find(s=>s.tradingsymbol==="NIFTY 50")),e===2&&(i=this.popupChart2),i?[i.return1,i.return2,i.return3,i.return4,i.return5,i.return6,i.dist4,i.return1_rank,i.return2_rank,i.return3_rank,i.return4_rank,i.return5_rank,i.return6_rank,i.dist4_rank,i.isDist4Within1Month]:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}plotPopupChart(e){let i=new Date().getTimezoneOffset()*6e4,r=[],s=[],o=[],a=[],l=[],c=[],u=[],d=[],h=[],p=[],g=[],A=[],y=[],b=new Qi.SuperTrend(this.stPeriod,this.stVol,"WEMA"),x=new Qi.SuperTrend(this.stPeriod,this.stVol,"WEMA"),P=new Qi.EMA(this.emaPeriod1),T=new Qi.EMA(this.emaPeriod2),k=new Qi.EMA(this.emaPeriod1),C=new Qi.EMA(this.emaPeriod2),M=new Qi.SMA(this.smaPeriod),O=new Qi.SMA(this.smaPeriod),R=ae.candlesData[e.tradingsymbol],q=ae.candlesData[e.index],H=ae.candlesData["NIFTY 50"];for(let Me=ae.chartDaysToPlot;Me>=0;Me--){let je=null,et=null,De=null,ke=null,xe=null,ze=null;if(R){je=this.stocksService.getDataOfDate(e,R,Me),et=this.stocksService.getDataOfDate(e,q,Me),De=this.stocksService.getDataOfDate(e,H,Me);let Pe=Object.keys(R)[Object.keys(R).length-1-Me],$t=null;if(Pe)$t=Pe.split(" ");else continue;let Ft=$t[0].split("-"),B=new Date(parseInt(Ft[2]),parseInt(Ft[1])-1,parseInt(Ft[0]),0,0,0,0).getTime(),S=new Date(B-i).toISOString(),I={time:Date.parse(S)/1e3,open:De[0],high:De[1],low:De[2],close:De[3]};r.push(I);let N=b.nextValue(De[1],De[2],De[3]),L,Y="green";N&&(L=N.superTrend,N.direction===1&&(Y="red"));let X={time:Date.parse(S)/1e3,value:L,color:Y};s.push(X);let pe=P.nextValue(De[3]),_e={time:Date.parse(S)/1e3,value:pe,color:"brown"};o.push(_e);let Oe=T.nextValue(De[3]),be={time:Date.parse(S)/1e3,value:Oe,color:"blue"};a.push(be);let Ke=M.nextValue(De[3]),Te={time:Date.parse(S)/1e3,value:Ke,color:"red"};h.push(Te);let nn={time:Date.parse(S)/1e3,open:je[0],high:je[1],low:je[2],close:je[3]};l.push(nn);let Dt="#26a69a";parseInt(je[3])<parseInt(je[0])&&(Dt="#ef5350");let Or={time:Date.parse(S)/1e3,value:je[4],color:Dt};y.push(Or);let Ji=x.nextValue(je[1],je[2],je[3]),Lc,Vc="green";Ji&&(Lc=Ji.superTrend,Ji.direction===1&&(Vc="red"));let kh={time:Date.parse(S)/1e3,value:Lc,color:Vc};c.push(kh);let Ia=k.nextValue(je[3]),Bc={time:Date.parse(S)/1e3,value:Ia,color:"brown"};u.push(Bc);let F5=C.nextValue(je[3]),L5={time:Date.parse(S)/1e3,value:F5,color:"blue"};d.push(L5);let V5=O.nextValue(je[3]),B5={time:Date.parse(S)/1e3,value:V5,color:"red"};p.push(B5),ke=this.stocksService.getRSReturns(e,R,55,Me),xe=this.stocksService.getRSReturns(e,q,55,Me),ze=this.stocksService.getRSReturns(e,H,55,Me);let aS=ke/xe-1,lS="green";aS<0&&(lS="red");let cS=ke/ze-1,uS="green";cS<0&&(uS="red");let q5={time:Date.parse(S)/1e3,value:aS,color:lS};g.push(q5);let j5={time:Date.parse(S)/1e3,value:cS,color:uS};A.push(j5)}}console.log(e.tradingsymbol,r,l);let Z="chart-popup-1",ne=this.charts[Z];ne&&ne.remove();let ce=Z;console.log("chartId1",ce);let G=ht(ce,{width:1200,height:320,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});G.addSeries(kt).setData(r),this.showST&&G.addSeries(ft,{lineWidth:1}).setData(s),this.showEMA1&&G.addSeries(ft,{lineWidth:1}).setData(o),this.showEMA2&&G.addSeries(ft,{lineWidth:1}).setData(a),this.showSMA&&G.addSeries(ft,{lineWidth:1}).setData(h),G.timeScale().fitContent(),this.charts[Z]=G;let ee="chart-popup-2",ye=this.charts[ee];ye&&ye.remove();let de=ee;console.log("chartId2",de);let ge=ht(de,{width:1200,height:320,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}}),ie=ge.addSeries(kt);ie.setData(l),this.showST&&ge.addSeries(ft,{lineWidth:1}).setData(c),this.showEMA1&&ge.addSeries(ft,{lineWidth:1}).setData(u),this.showEMA2&&ge.addSeries(ft,{lineWidth:1}).setData(d),this.showSMA&&ge.addSeries(ft,{lineWidth:1}).setData(p);let ue=ge.addSeries(A5,{color:"#26a69a",priceFormat:{type:"volume"},priceScaleId:""});ue.priceScale().applyOptions({scaleMargins:{top:.7,bottom:0}}),ue.setData(y);let me=[],we=[];f.stockPositions&&f.stockPositions.trades&&(we=f.stockPositions.trades.filter(Me=>Me.scrip===e.tradingsymbol)),we.forEach(Me=>{let je=new Date(Me.entryDateTime).getTime(),et=new Date(je-i).toISOString();if(me.push({time:Date.parse(et)/1e3,position:"belowBar",color:"green",shape:"arrowUp",text:`Buy @ ${Me.entry}`}),Me.exit!==0){let De=new Date(Me.exitDateTime).getTime(),ke=new Date(De-i).toISOString();me.push({time:Date.parse(ke)/1e3,position:"aboveBar",color:"red",shape:"arrowDown",text:`Sell @ ${Me.exit}`})}}),console.log("markers",me),Ta(ie,me),ge.timeScale().fitContent(),this.charts[ee]=ge;let Be="chart-popup-3",Ce=this.charts[Be];Ce&&Ce.remove();let qe=Be;console.log("chartId3",qe);let He=ht(qe,{width:1200,height:150,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});He.addSeries(ft,{lineWidth:2}).setData(g),He.addSeries(ft,{lineWidth:1}).setData(A),He.timeScale().fitContent(),this.charts[Be]=He}closePopup(){this.showPopup=!1}loadStocksData(e){this.stocksService.loadStocksData(e)}plotRSCharts(e){for(let i=0;i<ae.all_rows.length;i++){let r=ae.all_rows[i];r.index===e.index&&this.plotRSChart(r)}}plotRSChart(e){let i=new Date().getTimezoneOffset()*6e4,r=[],s=[];for(let h=756;h>=0;h--){let p=null,g=null,A=null,y=ae.candlesData[e.tradingsymbol],b=ae.candlesData[e.index],x=ae.candlesData["NIFTY 50"];if(y){p=this.stocksService.getRSReturns(e,y,55,h),g=this.stocksService.getRSReturns(e,b,55,h),A=this.stocksService.getRSReturns(e,x,55,h);let P=p/g-1,T="green";P<0&&(T="red");let k=p/A-1,C="green";k<0&&(C="red");let M=Object.keys(y)[Object.keys(y).length-1-h],O=null;if(M)O=M.split(" ");else continue;let R=O[0].split("-"),q=new Date(parseInt(R[2]),parseInt(R[1])-1,parseInt(R[0]),0,0,0,0).getTime(),H=new Date(q-i).toISOString(),Z={time:Date.parse(H)/1e3,value:P,color:T};r.push(Z);let ne={time:Date.parse(H)/1e3,value:k,color:C};s.push(ne)}}console.log(e.tradingsymbol,r);let o="chart-"+e.tradingsymbol,a=this.charts[o];a&&a.remove();let l=o;console.log("chartId",l);let c=ht(l,{width:280,height:100,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});c.addSeries(ft,{lineWidth:2}).setData(r),c.addSeries(ft,{lineWidth:1}).setData(s),c.timeScale().fitContent(),this.charts[o]=c}getChartLabel(e){return e==="chart-popup-1"?"NIFTY 50":e==="chart-popup-2"&&this.popupChart2?this.popupChart2.tradingsymbol:null}addToWatchlist(e){if(!ae.watchlist.includes(e.tradingsymbol)){ae.watchlist.push(e.tradingsymbol),this.saveWatchlistToLS();let i=ae.all_rows.filter(r=>r.tradingsymbol===e.tradingsymbol);for(let r=0;r<i.length;r++){let s=i[r];s.watchlist=!0}}}countWatchlist(){let e=0,i=ae.all_rows.filter(r=>r.index==="NIFTY 500"&&!r.isIndex);for(let r=0;r<i.length;r++)i[r].watchlist&&e++;return e}removeFromWatchlist(e){let i=ae.watchlist.indexOf(e.tradingsymbol);i>-1&&ae.watchlist.splice(i,1),this.saveWatchlistToLS();let r=ae.all_rows.filter(s=>s.tradingsymbol===e.tradingsymbol);for(let s=0;s<r.length;s++){let o=r[s];o.watchlist=!1}}saveWatchlistToLS(){localStorage.setItem("stocks_watchlist",JSON.stringify(ae.watchlist))}loadWatchlistFromLS(){ae.watchlist=JSON.parse(localStorage.getItem("stocks_watchlist")),ae.watchlist===null&&(ae.watchlist=[])}exportWatchlist(){let e="watchlist.csv";console.log("exporting: ",e);let i="";ae.watchlist.forEach(a=>{i+=a+`\r
`});let r=new Blob([i],{type:"application/x-msdownload"}),s=URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.target="_blank",document.body.appendChild(o),o.download=e,o.click(),o.parentNode.removeChild(o)}importStocksData(e){this.stocksService.loadStocksDataFromJson(e)}importWatchlist(e){let i=e.target.files[0],r=new FileReader;r.readAsText(i),r.onload=s=>{let l=String(r.result).split(/\r|\n|\r/).filter(function(c){return c!==""});ae.watchlist=[];for(let c=0;c<l.length;c++){let d=l[c].split(",")[0];ae.watchlist.push(d)}this.saveWatchlistToLS();for(let c=0;c<ae.watchlist.length;c++){let u=ae.watchlist[c],d=ae.all_rows.filter(h=>h.tradingsymbol===u);for(let h=0;h<d.length;h++){let p=d[h];p.watchlist=!0,console.log("Entry from watchlist:",p)}}}}fetchAllIndices(){this.stocksService.loadIndicesData()}filterData(){this.sortTableColumn(this.lastColumnSort)}sortTableColumn(e){console.log("sortTableColumn this.selectedFilters",this.filterCriteria);let i=this.lastColumnSort;e&&(i=e,this.lastColumnSort=e),this.stocksService.sortByReturns(i,this.filterCriteria)}isStockHolding(e){}expandCollapseIndex(e){for(let i=0;i<this.all_rows.length;i++){let r=this.all_rows[i];!r.isIndex&&r.index===e.tradingsymbol&&(r.isVisible=!r.isVisible)}}backtest1(){this.stocksService.backtestMomentum2("NIFTY 500",20,"6MReturns")}backtestIndexMA(e){let i=e.target.files[0],r=new FileReader;r.onload=()=>{let s=r.result;this.stocksService.backtestIndexAboveMA(s)},r.readAsText(i)}static \u0275fac=function(i){return new(i||n)(ve(ni),ve(Mn),ve(Ue),ve(eo),ve(Ir),ve(T5))};static \u0275cmp=qi({type:n,selectors:[["app-stocks"]],hostBindings:function(i,r){i&1&&j("keydown",function(o){return r.handleKeyDown(o)},!1,nE)},decls:151,vars:102,consts:[["fileImportInputExpiry",""],["fileImportInputStocks",""],["backtestIndexMA_",""],[1,"custom-popup",3,"ngClass"],[1,"custom-popup-close",3,"click"],[1,"table","table-sm","table-bordered","mb-0",2,"table-layout","fixed"],[1,"chart-popup-table"],[1,"chart-popup-table",3,"ngClass"],[1,"rank"],["class","stockChip stockChipGreen","style","margin-left: 5px;",4,"ngIf"],[1,"mt-2","mb-2"],["class","stockChip stockChipRed",4,"ngIf"],["class","stockChip",4,"ngIf"],["id","chart-popup-1",1,"chart-stock"],[1,"chart-legend"],["id","chart-popup-2",1,"chart-stock"],["id","chart-popup-3",1,"chart-stock"],["type","button",1,"btn","btn-link",3,"click"],["type","file","name","File Upload Expiry","accept",".csv",2,"display","none",3,"change"],["type","file","name","File Upload Stocks","accept",".json",2,"display","none",3,"change"],["type","file","name","backtestIndexMA","accept",".csv",2,"display","none",3,"change"],[1,"form-check","form-check-inline","use-hypo-future-class","ms-4"],["type","checkbox","value","","id","show-st",1,"mt-2","form-check-input",3,"ngModelChange","ngModel"],["for","show-st",1,"form-check-label"],["type","text",1,"form-control","form-control-sm","d-inline-block","ms-2",2,"width","50px",3,"ngModelChange","ngModel"],[1,"form-check","form-check-inline","use-hypo-future-class","ms-2"],["type","checkbox","value","","id","hide-nonwatch",1,"form-check-input",3,"ngModelChange","ngModel"],["for","hide-nonwatch",1,"form-check-label"],["type","checkbox","value","","id","show-ema1",1,"mt-2","form-check-input",3,"ngModelChange","ngModel"],["for","show-ema1",1,"form-check-label"],["type","checkbox","value","","id","show-ema2",1,"mt-2","form-check-input",3,"ngModelChange","ngModel"],["for","show-ema2",1,"form-check-label"],["type","checkbox","value","","id","show-sma",1,"mt-2","form-check-input",3,"ngModelChange","ngModel"],["for","show-ema",1,"form-check-label"],[2,"display","flex","gap","20px","margin","10px 0 20px 0","align-items","center"],["style","display: flex; gap: 5px; align-items: center;",4,"ngFor","ngForOf"],[1,"table","table-sm","table-bordered","shadow","mb-0","text-center"],[1,"table-light"],["scope","col",1,"s-col"],["scope","col",1,"s-col","cursor-pointer",3,"click"],["scope","col","title","52 Week High Dist %",1,"s-col","cursor-pointer",3,"click"],[4,"ngFor","ngForOf"],[1,"stockChip","stockChipGreen",2,"margin-left","5px"],[1,"stockChip","stockChipRed"],[1,"stockChip"],[2,"display","flex","gap","5px","align-items","center"],["type","checkbox",3,"ngModelChange","change","ngModel"],["type","number",3,"ngModel","disabled","ngModelChange","input",4,"ngIf"],["type","number",3,"ngModelChange","input","ngModel","disabled"],[3,"ngClass"],[2,"width","40px"],["class","cursor-pointer me-3","title","Show/Hide Stocks in this Index",3,"click",4,"ngIf"],["class","cursor-pointer me-3","title","Fetch Data of Stocks in this Index",3,"click",4,"ngIf"],["class","cursor-pointer me-3","title","Plot RS Charts of Stocks in this Index",3,"click",4,"ngIf"],["class","cursor-pointer me-3","title","Add to Watchlist",3,"click",4,"ngIf"],["class","cursor-pointer me-3","title","Remove from Watchlist",3,"click",4,"ngIf"],["title","Open Popup",1,"cursor-pointer",3,"click"],["target","_blank","rel","noopener noreferrer",3,"href"],["style","margin-left: 5px;",4,"ngIf"],[2,"display","flex","align-items","center"],[1,"returns-value"],["class","rank",4,"ngIf"],[1,"text-start"],[4,"ngIf"],["title","Show/Hide Stocks in this Index",1,"cursor-pointer","me-3",3,"click"],["title","Fetch Data of Stocks in this Index",1,"cursor-pointer","me-3",3,"click"],["title","Plot RS Charts of Stocks in this Index",1,"cursor-pointer","me-3",3,"click"],["title","Add to Watchlist",1,"cursor-pointer","me-3",3,"click"],["title","Remove from Watchlist",1,"cursor-pointer","me-3",3,"click"],[2,"margin-left","5px"]],template:function(i,r){if(i&1){let s=fe();m(0,"div",3)(1,"span",4),j("click",function(){return E(s),D(r.closePopup())}),w(2,"\u2715"),_(),m(3,"div")(4,"table",5)(5,"tbody")(6,"tr")(7,"td",6),w(8,"NIFTY 50"),_(),m(9,"td",7),w(10),_(),m(11,"td",7),w(12),_(),m(13,"td",7),w(14),_(),m(15,"td",7),w(16),_(),m(17,"td",7),w(18),_(),m(19,"td",7),w(20),_(),m(21,"td",7),w(22),_()()()(),m(23,"table",5)(24,"tbody")(25,"tr")(26,"td",6),w(27,"Stock"),_(),m(28,"td",7),w(29),m(30,"span",8),w(31),_()(),m(32,"td",7),w(33),m(34,"span",8),w(35),_()(),m(36,"td",7),w(37),m(38,"span",8),w(39),_()(),m(40,"td",7),w(41),m(42,"span",8),w(43),_()(),m(44,"td",7),w(45),m(46,"span",8),w(47),_()(),m(48,"td",7),w(49),m(50,"span",8),w(51),_()(),m(52,"td",7),w(53),m(54,"span",8),w(55),_(),te(56,sne,2,0,"div",9),_()()()(),m(57,"div",10),te(58,one,2,0,"div",11)(59,ane,2,0,"div",11)(60,lne,2,0,"div",11)(61,cne,2,0,"div",12)(62,une,2,0,"div",12)(63,dne,2,0,"div",12),_()(),m(64,"div",13)(65,"div",14),w(66),_()(),m(67,"div",15)(68,"div",14),w(69),_()(),Ze(70,"div",16),_(),m(71,"div")(72,"div")(73,"span"),w(74,"RS - Dark Line: Index, Light Line: Nifty 50"),_(),m(75,"button",17),j("click",function(){return E(s),D(r.fetchAllStocksInIndices())}),w(76,"Fetch Stocks List"),_(),m(77,"button",17),j("click",function(){return E(s),D(r.fetchAllIndices())}),w(78,"Fetch Indices Values"),_(),m(79,"button",17),j("click",function(){return E(s),D(r.exportWatchlist())}),w(80,"Export Watchlist"),_(),m(81,"button",17),j("click",function(){E(s);let a=$n(84);return D(a.click())}),w(82,"Import Watchlist"),_(),m(83,"input",18,0),j("change",function(a){return E(s),D(r.importWatchlist(a))}),_(),m(85,"button",17),j("click",function(){E(s);let a=$n(88);return D(a.click())}),w(86,"Import Stocks Data"),_(),m(87,"input",19,1),j("change",function(a){return E(s),D(r.importStocksData(a))}),_(),m(89,"button",17),j("click",function(){return E(s),D(r.backtest1())}),w(90,"Backtest1"),_(),m(91,"button",17),j("click",function(){E(s);let a=$n(94);return D(a.click())}),w(92,"backtestIndexMA"),_(),m(93,"input",20,2),j("change",function(a){return E(s),D(r.backtestIndexMA(a))}),_(),m(95,"div",21)(96,"input",22),U("ngModelChange",function(a){return E(s),z(r.showST,a)||(r.showST=a),D(a)}),_(),m(97,"label",23),w(98,"ST"),_(),m(99,"input",24),U("ngModelChange",function(a){return E(s),z(r.stPeriod,a)||(r.stPeriod=a),D(a)}),_(),m(100,"input",24),U("ngModelChange",function(a){return E(s),z(r.stVol,a)||(r.stVol=a),D(a)}),_()(),m(101,"div",25)(102,"input",26),U("ngModelChange",function(a){return E(s),z(r.hideNonWatchlist,a)||(r.hideNonWatchlist=a),D(a)}),_(),m(103,"label",27),w(104,"Hide Non-Watchlist"),_()(),m(105,"div",25)(106,"input",28),U("ngModelChange",function(a){return E(s),z(r.showEMA1,a)||(r.showEMA1=a),D(a)}),_(),m(107,"label",29),w(108,"EMA 1"),_(),m(109,"input",24),U("ngModelChange",function(a){return E(s),z(r.emaPeriod1,a)||(r.emaPeriod1=a),D(a)}),_()(),m(110,"div",25)(111,"input",30),U("ngModelChange",function(a){return E(s),z(r.showEMA2,a)||(r.showEMA2=a),D(a)}),_(),m(112,"label",31),w(113,"EMA 2"),_(),m(114,"input",24),U("ngModelChange",function(a){return E(s),z(r.emaPeriod2,a)||(r.emaPeriod2=a),D(a)}),_()(),m(115,"div",25)(116,"input",32),U("ngModelChange",function(a){return E(s),z(r.showSMA,a)||(r.showSMA=a),D(a)}),_(),m(117,"label",33),w(118,"SMA"),_(),m(119,"input",24),U("ngModelChange",function(a){return E(s),z(r.smaPeriod,a)||(r.smaPeriod=a),D(a)}),_()()(),m(120,"div",34),te(121,pne,5,3,"div",35),m(122,"span"),w(123),_()(),m(124,"table",36)(125,"thead",37)(126,"tr"),Ze(127,"th",38),m(128,"th",38),w(129,"Name"),_(),m(130,"th",38),w(131,"LTP"),_(),m(132,"th",38),w(133,"200DMA"),_(),m(134,"th",39),j("click",function(){return E(s),D(r.sortTableColumn("return1"))}),w(135,"1D%"),_(),m(136,"th",39),j("click",function(){return E(s),D(r.sortTableColumn("return2"))}),w(137,"5D%"),_(),m(138,"th",39),j("click",function(){return E(s),D(r.sortTableColumn("return3"))}),w(139,"1M%"),_(),m(140,"th",39),j("click",function(){return E(s),D(r.sortTableColumn("return4"))}),w(141,"3M%"),_(),m(142,"th",39),j("click",function(){return E(s),D(r.sortTableColumn("return5"))}),w(143,"6M%"),_(),m(144,"th",39),j("click",function(){return E(s),D(r.sortTableColumn("return6"))}),w(145,"1Y%"),_(),m(146,"th",40),j("click",function(){return E(s),D(r.sortTableColumn("dist4"))}),w(147,"52WHD%"),_(),Ze(148,"th",38),_()(),m(149,"tbody"),te(150,Rne,56,74,"ng-container",41),_()()()}i&2&&(V("ngClass",Zt(58,nne,r.showPopup===!1)),v(9),V("ngClass",Re(60,In,r.getChartInfo(1)[0]>0,r.getChartInfo(1)[0]<0)),v(),J("1D%: ",r.getChartInfo(1)[0],""),v(),V("ngClass",Re(63,In,r.getChartInfo(1)[1]>0,r.getChartInfo(1)[1]<0)),v(),J("5D%: ",r.getChartInfo(1)[1],""),v(),V("ngClass",Re(66,In,r.getChartInfo(1)[2]>0,r.getChartInfo(1)[2]<0)),v(),J("1M%: ",r.getChartInfo(1)[2],""),v(),V("ngClass",Re(69,In,r.getChartInfo(1)[3]>0,r.getChartInfo(1)[3]<0)),v(),J("3M%: ",r.getChartInfo(1)[3],""),v(),V("ngClass",Re(72,In,r.getChartInfo(1)[4]>0,r.getChartInfo(1)[4]<0)),v(),J("6M%: ",r.getChartInfo(1)[4],""),v(),V("ngClass",Re(75,In,r.getChartInfo(1)[5]>0,r.getChartInfo(1)[5]<0)),v(),J("1Y%: ",r.getChartInfo(1)[5],""),v(),V("ngClass",Re(78,In,r.getChartInfo(1)[6]>=-15,r.getChartInfo(1)[6]<-15)),v(),J("52WHD%: ",r.getChartInfo(1)[6],""),v(6),V("ngClass",Re(81,In,r.getChartInfo(2)[0]>0,r.getChartInfo(2)[0]<0)),v(),J("1D%: ",r.getChartInfo(2)[0],""),v(2),J("(",r.getChartInfo(2)[7],")"),v(),V("ngClass",Re(84,In,r.getChartInfo(2)[1]>0,r.getChartInfo(2)[1]<0)),v(),J("5D%: ",r.getChartInfo(2)[1],""),v(2),J("(",r.getChartInfo(2)[8],")"),v(),V("ngClass",Re(87,In,r.getChartInfo(2)[2]>0,r.getChartInfo(2)[2]<0)),v(),J("1M%: ",r.getChartInfo(2)[2],""),v(2),J("(",r.getChartInfo(2)[9],")"),v(),V("ngClass",Re(90,In,r.getChartInfo(2)[3]>0,r.getChartInfo(2)[3]<0)),v(),J("3M%: ",r.getChartInfo(2)[3],""),v(2),J("(",r.getChartInfo(2)[10],")"),v(),V("ngClass",Re(93,In,r.getChartInfo(2)[4]>0,r.getChartInfo(2)[4]<0)),v(),J("6M%: ",r.getChartInfo(2)[4],""),v(2),J("(",r.getChartInfo(2)[11],")"),v(),V("ngClass",Re(96,In,r.getChartInfo(2)[5]>0,r.getChartInfo(2)[5]<0)),v(),J("1Y%: ",r.getChartInfo(2)[5],""),v(2),J("(",r.getChartInfo(2)[12],")"),v(),V("ngClass",Re(99,In,r.getChartInfo(2)[6]>=-27,r.getChartInfo(2)[6]<-27)),v(),J("52WHD%: ",r.getChartInfo(2)[6],""),v(2),J("(",r.getChartInfo(2)[13],")"),v(),V("ngIf",r.getChartInfo(2)[14]),v(2),V("ngIf",r.isStockInIndex("NIFTYM150MOMNTM50",r.popupChart2==null?null:r.popupChart2.tradingsymbol)),v(),V("ngIf",r.isStockInIndex("MOMENTUM50",r.popupChart2==null?null:r.popupChart2.tradingsymbol)),v(),V("ngIf",r.isStockInIndex("NIFTY ALPHA 50",r.popupChart2==null?null:r.popupChart2.tradingsymbol)),v(),V("ngIf",r.isStockInIndex("NIFTY 50",r.popupChart2==null?null:r.popupChart2.tradingsymbol)),v(),V("ngIf",r.isStockInIndex("NIFTY 100",r.popupChart2==null?null:r.popupChart2.tradingsymbol)),v(),V("ngIf",r.isStockInIndex("NIFTY MIDCAP 150",r.popupChart2==null?null:r.popupChart2.tradingsymbol)),v(3),Q(r.getChartLabel("chart-popup-1")),v(3),Q(r.getChartLabel("chart-popup-2")),v(27),W("ngModel",r.showST),v(3),W("ngModel",r.stPeriod),v(),W("ngModel",r.stVol),v(2),W("ngModel",r.hideNonWatchlist),v(4),W("ngModel",r.showEMA1),v(3),W("ngModel",r.emaPeriod1),v(2),W("ngModel",r.showEMA2),v(3),W("ngModel",r.emaPeriod2),v(2),W("ngModel",r.showSMA),v(3),W("ngModel",r.smaPeriod),v(2),V("ngForOf",r.filterKeys),v(2),J("Watchlist: ",r.countWatchlist(),""),v(27),V("ngForOf",r.all_rows))},dependencies:[rc,Hs,ea,Qo,nc,Jo,Ds,To,Es,Io],styles:[`[_nghost-%COMP%], input[_ngcontent-%COMP%], .input-group-text[_ngcontent-%COMP%], select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-size:12px!important}.indexRow[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#d8f5ff;font-weight:700}.niftyRow[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#c3e4ef}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.custom-popup[_ngcontent-%COMP%]{position:fixed;top:0;width:1240px;height:100%;right:0;background:#fff;padding:20px;box-shadow:#0000003d 0 3px 8px;overflow:scroll;z-index:1021}.custom-popup-close[_ngcontent-%COMP%]{cursor:pointer;font-size:18px;position:absolute;right:5px;top:0}.green[_ngcontent-%COMP%]{color:green}.red[_ngcontent-%COMP%]{color:tomato}.chart-stock[_ngcontent-%COMP%]{position:relative}.chart-legend[_ngcontent-%COMP%]{position:absolute;left:4px;top:2px;z-index:2;font-size:18px;line-height:28px;font-weight:300;color:#000}.chart-popup-table[_ngcontent-%COMP%]{width:120px;white-space:nowrap}.watchlist-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#e1ebfe!important}.notmatchingfilter-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#d3d3d3}.stockChip[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:4px;display:inline-block;margin-right:4px;padding:0 4px}.stockChipRed[_ngcontent-%COMP%]{background:tomato;color:#fff}.stockChipGreen[_ngcontent-%COMP%]{background:#28a745;color:#fff}.rank[_ngcontent-%COMP%]{color:#000;font-size:10px;margin-left:5px}.returns-value[_ngcontent-%COMP%]{width:50px;text-align:right;display:inline-block}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1020;background:#fff}
/*# sourceMappingURL=stocks.component-WGUBZZVB.css.map */`]})}return n})();var P5=(()=>{class n{http;holdingsMap={"ADANIPORTS.NS":{holding:!1,average:null},"ASIANPAINT.NS":{holding:!0,average:3098.95}};backtestMap={};shortlistedStocks=[];append="";auth="";marketwatch="";from_date="";to_date="";expiry_date="";instruments=[];delay=300;data={};niftyReturn={};constructor(e){this.http=e}getZerodhaInstruments(e,i,r,s,o,a=!1){this.append=e,this.auth=i,this.from_date=r,this.to_date=s,this.expiry_date=o;let l={responseType:"text"};this.http.get("https://api.kite.trade/instruments",l).subscribe(u=>{console.log("zerodha instruments",u);let h=u.split(/\r|\n|\r/).filter(function(p){return p!==""});this.instruments=[];for(let p=1;p<h.length;p++){let g=h[p].split(","),A=g[2],y=g[3].replaceAll('"',""),b=g[5];a?(y==="NIFTY"&&b===this.expiry_date||y==="NIFTY 50")&&this.instruments.push(h[p]):((y==="NIFTY"||y==="BANKNIFTY"||y==="FINNIFTY"||y==="MIDCPNIFTY"||y==="SENSEX"||y==="BANKEX")&&b===this.expiry_date||y==="NIFTY 50"||y==="NIFTY BANK"||y==="NIFTY FIN SERVICE"||y==="NIFTY MIDCAP SELECT (MIDCPNIFTY)"||A==="SENSEX"||y==="BSE INDEX BANKEX")&&this.instruments.push(h[p])}console.log("Instruments to fetch: ",this.instruments.length);for(let p=0;p<this.instruments.length;p++)setTimeout(()=>{let g=this.instruments[p];console.log("item",p,g);let A=!1;p===this.instruments.length-1&&(A=!0,console.log("last item",this.instruments.length-1)),this.getItem(g,A)},p*this.delay)},u=>{console.log("zerodha instruments error",u)})}fetchCandles(e,i,r,s,o,a){this.append=e,this.auth=i,this.marketwatch=r,this.from_date=s,this.to_date=o,this.expiry_date=a;for(let l=0;l<this.instruments.length;l++)setTimeout(()=>{let c=this.instruments[l];console.log("item",l,c),this.getItem(c,!1)},l*this.delay)}getItem(e,i){let s={responseType:"json",headers:new Fe({authorization:this.auth})},o=e.split(","),a=o[0],l=o[1],c=o[2],u=o[3].replaceAll('"',""),d=o[4],h=o[5],p=o[6],g=o[9],A=u+this.append+p+g;u==="NIFTY 50"&&(A="NIFTY"),u==="NIFTY BANK"&&(A="BANKNIFTY"),u==="NIFTY FIN SERVICE"&&(A="NIFTY FIN SERVICE"),u==="NIFTY MIDCAP SELECT (MIDCPNIFTY)"&&(A="NIFTY MIDCAP SELECT (MIDCPNIFTY)"),c==="SENSEX"&&(A="SENSEX"),u==="BSE INDEX BANKEX"&&(A="BSE INDEX BANKEX");let y="https://kite.zerodha.com/oms/instruments/historical/"+a+"/minute?user_id="+f.zerodhaUserId+"&oi=1&from="+this.from_date+"&to="+this.to_date;this.http.get(y,s).subscribe(b=>{if(console.log("scrip data:",A,b),b.data.candles){let x=b.data.candles;x.length===0&&console.log("ZERO CANDLES FOR ",A);for(let P=0;P<x.length;P++){let T=x[P],k=this.data[A];k||(k={});let C=this.getDateInFormat(T[0]);k[C]=[T[1],T[2],T[3],T[4],T[5],T[6]],this.data[A]=k}}console.log("candles:",Object.keys(this.data).length,this.data),i===!0&&this.exportToCSV()})}getDataFromThirdParty(e,i,r,s,o,a,l,c){this.append=i,this.from_date=r,this.to_date=s,this.expiry_date=o,this.delay=15e3;let u=50;e==="CNXBAN"&&(u=100);let d=0;for(let h=c;h<=l;h+=u)setTimeout(()=>{console.log("item",h),this.getDataItemFromThirdParty(e,h+"CE",h,"",o,a),setTimeout(()=>{this.getDataItemFromThirdParty(e,h+"PE","",h,o,a)},5e3),setTimeout(()=>{this.getDataItemFromThirdParty(e,"","","",o,a)},1e4)},d*this.delay),d++}getDataItemFromThirdParty(e,i,r,s,o,a){let l={headers:new Fe({"Content-type":"application/json; charset=UTF-8"}),responseType:"json"},c="https://icici-historial.up.railway.app/ohlc",u=JSON.stringify({ce_strike:""+r,pe_strike:""+s,index_symbol:e,expiry:o,startdate:a}),d=e+this.append+i;i===""&&(d=e),this.http.post(c,u,l).subscribe(h=>{console.log("getDataFromThirdParty response",h);let p=h.combined;(!p||p.date.length===0)&&console.log("ZERO CANDLES FOR ",d);for(let g=0;g<p.date.length;g++){let A=p.date[g],y=p.open[g],b=p.high[g],x=p.low[g],P=p.close[g],T=this.data[d];T||(T={});let k=this.getDateInFormat(A);T[k]=[y,b,x,P,0,0],this.data[d]=T}console.log("candles:",Object.keys(this.data).length,this.data)},h=>{console.log("getDataFromThirdParty error",h)})}exportToCSV(){let e="Monthly";this.append==="WK"&&(e="Weekly");let i=this.expiry_date+" "+e+".csv";if(console.log("exporting: ",i),this.data){let r=0,s="";s+=`Ticker,Date/Time,Open,High,Low,Close,Volume,Open Interest\r
`;for(let c in this.data){for(let u in this.data[c]){let d="",h=this.data[c][u];d+=c+","+u+","+h[0]+","+h[1]+","+h[2]+","+h[3]+","+h[4]+","+h[5],s+=d+`\r
`,r++}if(r>2e6){let u=new Blob([s],{type:"application/x-msdownload"}),d=URL.createObjectURL(u),h=document.createElement("a");h.href=d,h.target="_blank",document.body.appendChild(h),h.download=i,h.click(),h.parentNode.removeChild(h),s="",r=0}}let o=new Blob([s],{type:"application/x-msdownload"}),a=URL.createObjectURL(o),l=document.createElement("a");l.href=a,l.target="_blank",document.body.appendChild(l),l.download=i,l.click(),l.parentNode.removeChild(l)}localStorage.setItem("export_"+this.expiry_date,JSON.stringify("true")),f.isHistoricalRunning=!1}getDateInFormat(e=null){e||(e=new Date);let i=new Date(e),r=i.getDate(),s=i.getMonth()+1,o=i.getFullYear(),a=i.getHours(),l=i.getMinutes(),c=i.getSeconds();return""+(r<=9?"0"+r:r)+"-"+(s<=9?"0"+s:s)+"-"+o+" "+(a<=9?"0"+a:a)+":"+(l<=9?"0"+l:l)+":"+(c<=9?"0"+c:c)}loadHoldings(){let e=0,i=[],r=0,s=0;for(let o in f.holdings)if(f.holdings.hasOwnProperty(o)){let a=null,l="",c="",u=null;if(f.holdings[o].avgp){a=(f.holdings[o].ltp-f.holdings[o].avgp)*100/f.holdings[o].avgp,a=Math.round((a+1e-5)*100)/100;let A=f.holdings[o].avgp,y=f.holdings[o].ltp;o==="NIFTY 50"&&(A=A/92.4,y=y/92.4),o==="NIFTY BANK"&&(A=A/100,y=y/100),u=A*f.holdings[o].qty,r+=u,s+=y*f.holdings[o].qty,u=Math.round(u)}let d=-999,h=null;for(let A=0;A<f.holdings[o].support.length;A++){let y=f.holdings[o].support[A],b=(f.holdings[o].ltp-y)*100/y;b<0&&b>d&&(d=b,h=y),console.log(o,f.holdings[o].ltp,y,b)}h!==null&&(d=Math.round((d+1e-5)*100)/100,l=d+" ("+h+")");let p=999,g=null;for(let A=0;A<f.holdings[o].resistance.length;A++){let y=f.holdings[o].resistance[A],b=(f.holdings[o].ltp-y)*100/y;b>0&&b<p&&(p=b,g=y)}g!==null&&(p=Math.round((p+1e-5)*100)/100,c=p+" ("+g+")"),i.push({scrip:o,volume:f.holdings[o].volume,ltp:f.holdings[o].ltp,oned:f.holdings[o].oned,onew:f.holdings[o].onew,onem:f.holdings[o].onem,threem:f.holdings[o].threem,fiftytwow:f.holdings[o].fiftytwow,avgp:a,support:l,resistance:c,buyvalue:u})}return e=(s-r)*100/r,e=Math.round((e+1e-5)*100)/100,r=Math.round(r),s=Math.round(s),{portfolio_return:e,holdings:i,total_inv:r,current_val:s}}fetchStocksData(){let e={responseType:"json"};this.http.get("https://www.nseindia.com/api/equity-stockIndices?index=NIFTY%2050",e).subscribe(r=>{console.log("now stocks data: ",r),r.data.forEach(o=>{if(f.holdings.hasOwnProperty(o.symbol)){f.holdings[o.symbol].ltp=Math.round((o.lastPrice+1e-5)*100)/100,f.holdings[o.symbol].volume=Math.round((o.totalTradedVolume+1e-5)*100)/100,f.holdings[o.symbol].oned=Math.round((o.pChange+1e-5)*100)/100,f.holdings[o.symbol].onem=Math.round((o.perChange30d+1e-5)*100)/100;let a=(o.lastPrice-o.yearHigh)*100/o.yearHigh;f.holdings[o.symbol].fiftytwow=Math.round((a+1e-5)*100)/100}})}),setTimeout(()=>{this.fetchIndicesData()},2e3),setTimeout(()=>{this.fetchHistoricalData()},4e3)}fetchIndicesData(){let e={responseType:"json"};this.http.get("https://www.nseindia.com/api/allIndices",e).subscribe(r=>{console.log("indices data: ",r),r.data.forEach(o=>{if(f.holdings.hasOwnProperty(o.index)){f.holdings[o.index].ltp=Math.round((o.last+1e-5)*100)/100,f.holdings[o.index].oned=Math.round((o.percentChange+1e-5)*100)/100,f.holdings[o.index].onem=Math.round((o.perChange30d+1e-5)*100)/100;let a=(o.last-o.yearHigh)*100/o.yearHigh;f.holdings[o.index].fiftytwow=Math.round((a+1e-5)*100)/100}})})}fetchHistoricalData(){let e={responseType:"json"},i=new Date,r=new Date;r.setDate(r.getDate()-150);let s="https://query1.finance.yahoo.com/v8/finance/chart/";for(let o in f.holdings)if(f.holdings.hasOwnProperty(o)){let a=o+".NS";a==="NIFTY 50.NS"&&(a="%5ENSEI"),a==="NIFTY BANK.NS"&&(a="%5ENSEBANK");let l=s+a+"?formatted=true&lang=en-US&region=US&includeAdjustedClose=true&interval=1d&range=1y";this.http.get(l,e).subscribe(c=>{if(c){let d=c.chart.result[0].indicators.adjclose[0].adjclose;if(d instanceof Array){let h=f.holdings[o].ltp;if(!h){h=c.chart.result[0].meta.regularMarketPrice,f.holdings[o].ltp=h;let A=c.chart.result[0].meta.regularMarketTime,y=1,b=c.chart.result[0].timestamp;new Date(A*1e3).getDate()===new Date(b[b.length-1]*1e3).getDate()&&(y=2);let x=d[d.length-y];x=(h-x)*100/x,x=Math.round((x+1e-5)*100)/100,f.holdings[o].oned=x;let P=d[d.length-30];P=(h-P)*100/P,P=Math.round((P+1e-5)*100)/100,f.holdings[o].onem=P;let T=c.chart.result[0].indicators.quote[0].high;var u=Math.max.apply(null,T);let k=(h-u)*100/u;f.holdings[o].fiftytwow=Math.round((k+1e-5)*100)/100}let p=d[d.length-7];p=(h-p)*100/p,p=Math.round((p+1e-5)*100)/100;let g=d[d.length-90];g=(h-g)*100/g,g=Math.round((g+1e-5)*100)/100,console.log(o,p,g),f.holdings[o].onew=p,f.holdings[o].threem=g}}})}}exportBacktest(){console.log(this.backtestMap);let e="Backtest "+this.getDateInFormat()+".csv";if(console.log("exporting: ",e),this.backtestMap){let i="";i+=`ExitDate,Portfolio,Nifty,S1,S2,S3,S4,S5,S6,S7,S8,S9,S10\r
`;for(let a in this.backtestMap){this.shortlistedStocks=[];for(let p in this.backtestMap[a])if(this.backtestMap[a][p].fiftytwow>-10){let g=Object.assign({},this.backtestMap[a][p]);g.scrip=p,this.shortlistedStocks.push(g)}this.shortlistedStocks.sort((p,g)=>p.onem>g.onem?-1:1),console.log("shortlistedStocks:",this.shortlistedStocks);let l=this.shortlistedStocks.slice(0,10);console.log("finalStocks:",l);let c=0,u="";for(let p=0;p<l.length;p++){let g=(l[p].last-l[p].entry)*100/l[p].entry;g=Math.round((g+1e-5)*100)/100,c+=g,u+=","+g}let d=c/l.length;d=Math.round((d+1e-5)*100)/100,console.log(d,this.niftyReturn[a]);let h=""+a+","+d+","+this.niftyReturn[a]+u+`\r
`;console.log(h),i+=h}let r=new Blob([i],{type:"application/x-msdownload"}),s=URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.target="_blank",document.body.appendChild(o),o.download=e,o.click(),o.parentNode.removeChild(o)}}backtestStocks(){this.backtest52W1M()}backtest52W1M(){let e={responseType:"json"},i="https://query1.finance.yahoo.com/v8/finance/chart/",r=12,s=new Date;for(let o=13;o<=24;o++){let a=new Date;a.setDate(s.getDate()-30*o);let l=new Date;l.setDate(s.getDate()-30*o-365);for(let c in f.holdings)if(f.holdings.hasOwnProperty(c)){let u=c+".NS";u==="NIFTY 50.NS"&&(u="%5ENSEI"),u==="NIFTY BANK.NS"&&(u="%5ENSEBANK");let d=i+u+"?formatted=true&lang=en-US&region=US&includeAdjustedClose=true&interval=1d&period1=";d+=Math.floor(l.getTime()/1e3)+"&period2="+Math.floor(a.getTime()/1e3),this.http.get(d,e).subscribe(h=>{if(h){let g=h.chart.result[0].indicators.adjclose[0].adjclose;if(g instanceof Array){let A={};if(A.last=g[g.length-1],A.entry=g[g.length-22],c==="NIFTY 50"){let P=(A.last-A.entry)*100/A.entry;P=Math.round((P+1e-5)*100)/100,this.niftyReturn[a.toLocaleDateString()]=P}let y=g[g.length-43];y=(A.entry-y)*100/y,y=Math.round((y+1e-5)*100)/100,A.onem=y;let b=h.chart.result[0].indicators.quote[0].high;b=b.slice(0,-21);var p=Math.max.apply(null,b);let x=(A.entry-p)*100/p;A.fiftytwow=Math.round((x+1e-5)*100)/100,this.backtestMap[a.toLocaleDateString()]||(this.backtestMap[a.toLocaleDateString()]={}),this.backtestMap[a.toLocaleDateString()][c]=A}}})}}}static \u0275fac=function(i){return new(i||n)(oe(It))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var N5=(()=>{class n{http;mapService;zerodhaService;appService;initSchedule=null;chartFetchSchedule=null;constructor(e,i,r,s){this.http=e,this.mapService=i,this.zerodhaService=r,this.appService=s}initScheduler(){this.initSchedule=setInterval(()=>{console.log("initScheduler",new Date().getSeconds());let e=new Date;if(e.getHours()==10&&e.getMinutes()==10&&e.getSeconds()==0){clearInterval(this.initSchedule);let i="BANKNIFTY",r=500,s=50;i==="BANKNIFTY"?(s=100,r=2e3):i==="FINNIFTY"?s=50:i==="MIDCPNIFTY"?s=25:i==="SENSEX"||i==="BANKEX"?s=100:i==="USDINR"&&(s=.25);let o=this.mapService.getScripLTP(null,null,"BANKNIFTY",null);o=Math.round(o/s)*s;let a=this.findPremiumStrike("BANKNIFTY","2023-06-01",o,"CE",s,25,r),l=this.findPremiumStrike("BANKNIFTY","2023-06-01",o,"PE",s,25,r);f.isIStrangleInit=!0,setTimeout(()=>{this.scheduler()},2e3)}},1e3)}initNow(){f.isIStrangleInit||(f.isIStrangleInit=!0,clearInterval(this.initSchedule),setTimeout(()=>{this.scheduler()},2e3))}scheduler(){this.chartFetchSchedule=setInterval(()=>{if(f.isIStrangleEnabled&&f.isIStrangleInit&&(console.log("scheduler",new Date().getSeconds()),new Date().getSeconds()==0)){let i=this.mapService.getSubscriptionObject("44900CE","BANKNIFTY","2023-06-01"),r=this.zerodhaService.findStrikeInMasters(i);console.log("scheduler element",r),r&&r.token&&this.getZerodhaChartData(r.token,"44900CE")}},1e3)}getZerodhaChartData(e,i){let r=this.appService.getLastWorkingDay(new Date),s=""+r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+("0"+r.getDate()).slice(-2),o=new Date,a=""+o.getFullYear()+"-"+("0"+(o.getMonth()+1)).slice(-2)+"-"+("0"+o.getDate()).slice(-2),c={responseType:"json",headers:new Fe({authorization:f.broker_auth})},u="https://kite.zerodha.com/oms/instruments/historical/"+e+"/minute?user_id="+f.zerodhaUserId+"&oi=1&from="+s+"&to="+a;this.http.get(u,c).subscribe(d=>{if(d.data.candles){let h=d.data.candles,p=[],g=[];for(let A=0;A<h.length;A++){let y=h[A],b=y[0].replace("+0530","Z");g.push([b,y[1],y[2],y[3],y[4],y[5],y[6]]);let x={time:new Date(Date.parse(b)),open:y[1],high:y[2],low:y[3],close:y[4]};p.push(x)}console.log("getZerodhaChartData current data",i,p[p.length-1])}},d=>{console.log("getZerodhaChartData fetch chart error",d)})}findPremiumStrike(e,i,r,s,o,a,l){let c,u,d=99999999;if(s==="CE")for(let h=r;h<=r+l;h+=o){let p=this.mapService.getScripLTP(e,new Date(i),h,"CE"),g=Math.abs(p-a);g<d&&(d=g,c=h,u=p)}else if(s==="PE")for(let h=r;h>=r-l;h-=o){let p=this.mapService.getScripLTP(e,new Date(i),h,"PE"),g=Math.abs(p-a);g<d&&(d=g,c=h,u=p)}return console.log("findPremiumStrike",c,s,u),c}static \u0275fac=function(i){return new(i||n)(oe(It),oe(Ue),oe(Mn),oe(ni))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Vne=n=>({hidePositionRow:n}),O5=(n,t)=>({red:n,blue:t}),Bne=n=>({green:n}),qne=(n,t)=>({"text-danger":n,"text-success":t}),Th=n=>({ocStrikeStrategyCE:n}),jne=(n,t)=>({"table-warning":n,"oc-strike":t}),Ih=n=>({ocStrikeStrategyPE:n}),Wne=n=>({stockHolding:n}),ho=(n,t,e)=>({green:n,red:t,"bold-higher":e});function Une(n,t){if(n&1){let e=fe();m(0,"p")(1,"ngb-alert",127),j("closed",function(){let r=E(e).$implicit,s=F();return D(s.close(r))}),w(2),_()()}if(n&2){let e=t.$implicit;v(),V("type",e.type),v(),Q(e.message)}}function zne(n,t){n&1&&(m(0,"span"),w(1,"https://api.kite.trade/instruments"),_())}function Hne(n,t){n&1&&(m(0,"span"),w(1,"https://v2api.aliceblueonline.com/restpy/contract_master?exch=NFO"),_())}function Yne(n,t){if(n&1){let e=fe();m(0,"button",10),j("click",function(){E(e);let r=F();return D(r.login())}),w(1,"Login"),_()}}function Gne(n,t){n&1&&(m(0,"span"),w(1,"Websocket is connected"),_())}function Kne(n,t){n&1&&(m(0,"span"),w(1,"Websocket is not connected"),_())}function $ne(n,t){if(n&1){let e=fe();m(0,"button",10),j("click",function(){E(e);let r=F();return D(r.closeWebsocket())}),w(1,"Close & reopen"),_()}}function Xne(n,t){if(n&1&&(m(0,"tr",129)(1,"td"),w(2),_(),m(3,"td"),w(4),_(),m(5,"td",129),w(6),_(),m(7,"td"),w(8),_(),m(9,"td"),w(10),_()()),n&2){let e=t.$implicit,i=F(2);V("ngClass",Zt(7,Vne,i.hide_exited_positions&&e.netQty===0)),v(2),Q(e.instru),v(2),Q(e.scrip),v(),V("ngClass",Re(9,O5,e.netQty<0,e.netQty>0)),v(),Q(e.netQty),v(2),Q(e.buyAvg),v(2),Q(e.sellAvg)}}function Zne(n,t){if(n&1&&(m(0,"tbody"),te(1,Xne,11,12,"tr",128),_()),n&2){let e=F();v(),V("ngForOf",e.positions)}}function Qne(n,t){if(n&1&&(m(0,"span"),w(1),_()),n&2){let e=F().$implicit;v(),J("(",e.triggerPrice,")")}}function Jne(n,t){if(n&1){let e=fe();m(0,"tr")(1,"td")(2,"div",130)(3,"input",131),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.addToOrders,r)||(s.addToOrders=r),D(r)}),_()()(),m(4,"td"),w(5),_(),m(6,"td"),w(7),_(),m(8,"td"),w(9),_(),m(10,"td"),w(11),_(),m(12,"td",129),w(13),_(),m(14,"td"),w(15),te(16,Qne,2,1,"span",18),_(),m(17,"td",129),w(18),_(),m(19,"td"),w(20),_(),m(21,"td"),w(22),_(),m(23,"td"),w(24),_(),m(25,"td"),w(26),_()()}if(n&2){let e=t.$implicit;v(3),W("ngModel",e.addToOrders),v(2),Q(e.time),v(2),Q(e.expiry),v(2),Q(e.instru),v(2),Q(e.scrip),v(),V("ngClass",Re(15,O5,e.qty<0,e.qty>0)),v(),Q(e.qty),v(2),J("",e.tradedPrice," "),v(),V("ngIf",e.triggerPrice!=0),v(),V("ngClass",Zt(18,Bne,e.status=="COMPLETE")),v(),Q(e.status),v(2),Q(e.tags),v(2),Q(e.guid),v(2),Q(e.id),v(2),Q(e.message)}}function eie(n,t){if(n&1&&(m(0,"tbody"),te(1,Jne,27,20,"tr",4),_()),n&2){let e=F();v(),V("ngForOf",e.orders.slice(0,e.orders_rows))}}function tie(n,t){if(n&1&&(m(0,"span",138),w(1),_()),n&2){let e=t.$implicit;v(),qy(" ",e.strikeCE,"CE ",e.ltpCE," , ",e.strikePE,"PE ",e.ltpPE," ")}}function nie(n,t){if(n&1&&(m(0,"span",138),w(1),_()),n&2){let e=t.$implicit;v(),yu(" ",e.action,": ",e.strike," ",e.ltp," ")}}function iie(n,t){if(n&1){let e=fe();m(0,"div",132)(1,"span",133),w(2," Strategy PnL: "),m(3,"span",134),w(4),_()(),te(5,tie,2,4,"span",135)(6,nie,2,3,"span",135),m(7,"span",136),w(8),_(),m(9,"span"),w(10," Combined SL: "),m(11,"input",137),U("ngModelChange",function(r){E(e);let s=F();return z(s.combined_SL,r)||(s.combined_SL=r),D(r)}),_()()()}if(n&2){let e=F();v(3),V("ngClass",Re(7,qne,e.getStrategyPnL()<0,e.getStrategyPnL()>0)),v(),ci(" ",e.getStrategyPnL()," , ",e.strategyPointsProfit,""),v(),V("ngForOf",e.suggestions),v(),V("ngForOf",e.adjust_sugg),v(2),J("Current Premium: ",e.combined_premium,""),v(3),W("ngModel",e.combined_SL)}}function rie(n,t){n&1&&(m(0,"th",97),w(1,"Greeks"),_())}function sie(n,t){n&1&&(m(0,"th",97),w(1,"Greeks"),_())}function oie(n,t){if(n&1&&(m(0,"td",129)(1,"span",151),w(2),_(),m(3,"span",151),w(4),_(),m(5,"span",151),w(6),_(),m(7,"span",151),w(8),_()()),n&2){let e=F().$implicit;V("ngClass",Zt(5,Th,e.inCurrStrategyCE)),v(2),J(" D: ",e.deltaCE," "),v(2),J(" G: ",e.gammaCE," "),v(2),J(" V: ",e.vegaCE," "),v(2),J(" T: ",e.thetaCE," ")}}function aie(n,t){if(n&1&&(m(0,"div",152),w(1),_()),n&2){let e=F().$implicit;v(),ci(" ",e.qtyCE," (",e.costCE,") ")}}function lie(n,t){if(n&1&&(m(0,"div",153),w(1),_()),n&2){let e=F(2);v(),J(" ",e.getSpotValue()," ")}}function cie(n,t){n&1&&(m(0,"div",154),w(1," N "),_())}function uie(n,t){if(n&1&&(m(0,"div",152),w(1),_()),n&2){let e=F().$implicit;v(),ci(" ",e.qtyPE," (",e.costPE,") ")}}function die(n,t){if(n&1&&(m(0,"td",129)(1,"span",151),w(2),_(),m(3,"span",151),w(4),_(),m(5,"span",151),w(6),_(),m(7,"span",151),w(8),_()()),n&2){let e=F().$implicit;V("ngClass",Zt(5,Ih,e.inCurrStrategyPE)),v(2),J(" D: ",e.deltaPE," "),v(2),J(" G: ",e.gammaPE," "),v(2),J(" V: ",e.vegaPE," "),v(2),J(" T: ",e.thetaPE," ")}}function hie(n,t){if(n&1){let e=fe();m(0,"tr")(1,"td",129)(2,"div",139)(3,"div",140)(4,"input",141),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.addCEToOrders,r)||(s.addCEToOrders=r),D(r)}),_()(),m(5,"input",142),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.qtyInputCE,r)||(s.qtyInputCE=r),D(r)}),_(),m(6,"button",143),j("click",function(){let r=E(e).$implicit,s=F();return D(s.addToStrategyBuilder(r,"CE"))}),w(7,"SB"),_(),m(8,"button",85),j("click",function(){let r=E(e).$implicit,s=F();return D(s.addToChart(r,"CE"))}),w(9,"C"),_()()(),m(10,"td",144),w(11),_(),m(12,"td",129),w(13),_(),te(14,oie,9,7,"td",145),m(15,"td",146),w(16),te(17,aie,2,2,"div",147),_(),m(18,"td",148),w(19),te(20,lie,2,1,"div",149)(21,cie,2,0,"div",150),_(),m(22,"td",146),w(23),te(24,uie,2,2,"div",147),_(),te(25,die,9,7,"td",145),m(26,"td",129),w(27),_(),m(28,"td",144),w(29),_(),m(30,"td",129)(31,"div",139)(32,"div",140)(33,"input",141),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.addPEToOrders,r)||(s.addPEToOrders=r),D(r)}),_()(),m(34,"input",142),U("ngModelChange",function(r){let s=E(e).$implicit;return z(s.qtyInputPE,r)||(s.qtyInputPE=r),D(r)}),_(),m(35,"button",143),j("click",function(){let r=E(e).$implicit,s=F();return D(s.addToStrategyBuilder(r,"PE"))}),w(36,"SB"),_(),m(37,"button",85),j("click",function(){let r=E(e).$implicit,s=F();return D(s.addToChart(r,"PE"))}),w(38,"C"),_()()()()}if(n&2){let e=t.$implicit,i=F();v(),V("ngClass",Zt(30,Th,e.inCurrStrategyCE)),v(3),W("ngModel",e.addCEToOrders),v(),Fn("id","oc-qty-CE-",e.symbol,""),W("ngModel",e.qtyInputCE),v(5),V("ngClass",Zt(32,Th,e.inCurrStrategyCE)),v(),Q(e.inlineStrategyPnLCE),v(),V("ngClass",Zt(34,Th,e.inCurrStrategyCE)),v(),Q(e.volumeCE),v(),V("ngIf",i.show_greeks),v(),V("ngClass",Zt(36,Th,e.inCurrStrategyCE)),v(),J(" ",e.ltpCE," "),v(),V("ngIf",e.inCurrStrategyCE),v(),V("ngClass",Re(38,jne,e.isSpot,!e.isSpot)),v(),J(" ",e.strike," "),v(),V("ngIf",e.isSpot),v(),V("ngIf",e.showNudge),v(),V("ngClass",Zt(41,Ih,e.inCurrStrategyPE)),v(),J(" ",e.ltpPE," "),v(),V("ngIf",e.inCurrStrategyPE),v(),V("ngIf",i.show_greeks),v(),V("ngClass",Zt(43,Ih,e.inCurrStrategyPE)),v(),Q(e.volumePE),v(),V("ngClass",Zt(45,Ih,e.inCurrStrategyPE)),v(),Q(e.inlineStrategyPnLPE),v(),V("ngClass",Zt(47,Ih,e.inCurrStrategyPE)),v(3),W("ngModel",e.addPEToOrders),v(),Fn("id","oc-qty-PE-",e.symbol,""),W("ngModel",e.qtyInputPE)}}function pie(n,t){if(n&1&&(m(0,"tr")(1,"td",129),w(2),_(),m(3,"td"),w(4),_(),m(5,"td",129),w(6),_(),m(7,"td",129),w(8),_(),m(9,"td",129),w(10),_(),m(11,"td",129),w(12),_(),m(13,"td",129),w(14),_(),m(15,"td",129),w(16),_(),m(17,"td",129),w(18),_(),m(19,"td",129),w(20),_(),m(21,"td"),w(22),_()()),n&2){let e=t.$implicit,i=F();v(),V("ngClass",Zt(20,Wne,i.isStockHolding(e.scrip))),v(),Q(e.scrip),v(2),Q(e.ltp),v(),V("ngClass",sn(22,ho,e.oned>0,e.oned<0,e.oned>2||e.oned<-2)),v(),Q(e.oned),v(),V("ngClass",sn(26,ho,e.onew>0,e.onew<0,e.onew>5||e.onew<-5)),v(),Q(e.onew),v(),V("ngClass",sn(30,ho,e.onem>0,e.onem<0,e.onem>7||e.onem<-7)),v(),Q(e.onem),v(),V("ngClass",sn(34,ho,e.threem>0,e.threem<0,e.threem>10||e.threem<-10)),v(),Q(e.threem),v(),V("ngClass",sn(38,ho,e.fiftytwow>0,e.fiftytwow<0,e.fiftytwow>10||e.fiftytwow<-10)),v(),Q(e.fiftytwow),v(),V("ngClass",sn(42,ho,e.avgp>0,e.avgp<0,e.avgp>5||e.avgp<-5)),v(),Q(e.avgp),v(),V("ngClass",sn(46,ho,e.support>0,e.support<0,e.support>5||e.support<-5)),v(),Q(e.support),v(),V("ngClass",sn(50,ho,e.resistance>0,e.resistance<0,e.resistance>5||e.resistance<-5)),v(),Q(e.resistance),v(2),Q(e.buyvalue)}}var R5=(()=>{class n{route;appService;mapService;websocketService;chartService;angelService;angelWS;holdingsService;zerodhaService;zerodhaWebsocketService;algoService;title="trades-ng19";access_token=null;user_id=null;auth_code=null;lastRequestStatus=null;positions=[];orders=[];log_ws_feed=!1;hide_positions=!1;hide_exited_positions=!0;hide_orders=!1;disable_order_buttons=!0;lastPositionsUpdateTime="";lastOrdersUpdateTime="";positionsPnL=0;stranglePositions=[];debitSpreadPositions=[];newexpiry="NIFTY20618";newstrike=1e4;newoption="CE";newqty=50;newblock=0;newlimit=0;newstop=0;newProductType="INTRADAY";newOrderType=2;nifty_oc_check=!0;usdinr_oc_check=!1;oc_instru="NIFTY";oc_year=2021;oc_month=6;oc_date=3;show_greeks=!1;checked_instrument="USDINR";oc_range_higher=16e3;oc_range_lower=14e3;oc_range_multiple=50;oc_strikes=[];oc_product_type="MARGIN";ws_vendor="zerodha";auth_acc="1";auth_acc_1="";auth_acc_2="";totalBalance;availableBalance;utilizedBalance;mean=0;variance=1;ws_access_token="yriZAzfnEWhCaAWh3JUuSqqL2ZtjX3dWv317ooTmhh78YCsdK3mkgz1dMdrKvyv7rRrU5WRvUnVf3gsoFiUQbATK32G6drt3CVbiqMVExLn0Hi51JdMIryRHPp2nHrso";ocSpotStrike;strategyPnL=0;strategyPointsProfit=0;suggestions=[];adjust_sugg=[];portfolio_return=0;holdings=[];total_inv=0;current_val=0;combined_SL=0;combined_premium=0;maxProfit=0;maxLoss=0;profitLossRatio=0;qty_default=200;qty_strategy_pts=400;diff_strategy_pts=200;strategy_pts=!1;alerts=[];fetchNSEOC_secs=null;latest_ten=!0;orders_rows=9;orders_update=!1;completeOrders=f.completeOrders;baby_name="";baby_surname="bhadane";babyNameNumber=0;historical_instru="NIFTY";historical_append="WK";historical_date="2023-03-29";historical_upper=18500;historical_lower=16e3;zerodha_auth="enctoken Sr2gbgdlEM7yRuGdXWtOu9YrTyyuMHHqBJ+F4N1UXSDmSpEH8UrrAkE9Ii7DCbAb3CkRMtRVhbcnC9Qv+rY7LcLVgyz2lGZg4VqnFFnl19PrXXPH7qxXuA==";zerodha_marketwatch='{"status":"success","data":[{"id":108696388,"name":"1","items":[{"id":673211353,"weight":1,"tradingsymbol":"INDIA VIX","instrument_token":264969,"segment":"INDICES","exchange":"NSE","expiry":""},{"id":816421144,"weight":2,"tradingsymbol":"NIFTY 50","instrument_token":256265,"segment":"INDICES","exchange":"NSE","expiry":""},{"id":903805357,"weight":6,"tradingsymbol":"NIFTYBEES","instrument_token":2707457,"segment":"NSE","exchange":"NSE","expiry":""},{"id":915508605,"weight":7,"tradingsymbol":"ICICINIFTY","instrument_token":7565569,"segment":"NSE","exchange":"NSE","expiry":""},{"id":915630019,"weight":8,"tradingsymbol":"KOTAKBKETF","instrument_token":1497857,"segment":"NSE","exchange":"NSE","expiry":""},{"id":915630692,"weight":9,"tradingsymbol":"KOTAKNIFTY","instrument_token":4634113,"segment":"NSE","exchange":"NSE","expiry":""},{"id":916079116,"weight":10,"tradingsymbol":"SETFNIF50","instrument_token":2605057,"segment":"NSE","exchange":"NSE","expiry":""},{"id":2963445776,"weight":11,"tradingsymbol":"LIQUIDBEES","instrument_token":2817537,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3185499175,"weight":12,"tradingsymbol":"BANKBEES","instrument_token":2928385,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3325591374,"weight":13,"tradingsymbol":"NIFTY BANK","instrument_token":260105,"segment":"INDICES","exchange":"NSE","expiry":""}]},{"id":108696392,"name":"Watchlist 2","items":[{"id":2542203093,"weight":19,"tradingsymbol":"INDIA VIX","instrument_token":264969,"segment":"INDICES","exchange":"NSE","expiry":""},{"id":3380116369,"weight":20,"tradingsymbol":"BANKNIFTY2211340400CE","instrument_token":11244546,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"},{"id":3384256979,"weight":21,"tradingsymbol":"BANKNIFTY2211340500CE","instrument_token":11245570,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"},{"id":3384259326,"weight":22,"tradingsymbol":"BANKNIFTY2211340600CE","instrument_token":11246082,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"},{"id":3384262349,"weight":23,"tradingsymbol":"BANKNIFTY2211340700CE","instrument_token":11246594,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"},{"id":3384265324,"weight":24,"tradingsymbol":"BANKNIFTY2211340800CE","instrument_token":11247106,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"},{"id":3384267715,"weight":25,"tradingsymbol":"BANKNIFTY2211340900CE","instrument_token":11249922,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"},{"id":3384270013,"weight":26,"tradingsymbol":"BANKNIFTY2211341000CE","instrument_token":11250434,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"}]},{"id":108696391,"name":"3","items":[]},{"id":108696390,"name":"4","items":[{"id":3350520016,"weight":3,"tradingsymbol":"USDINR22107FUT","instrument_token":1838339,"segment":"CDS-FUT","exchange":"CDS","expiry":"2022-01-07"},{"id":3352324563,"weight":4,"tradingsymbol":"USDINR2210774.75CE","instrument_token":2084099,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3352325735,"weight":5,"tradingsymbol":"USDINR22JAN74.75CE","instrument_token":2331907,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-27"},{"id":3357694089,"weight":6,"tradingsymbol":"USDINR2210774PE","instrument_token":2082819,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3352326484,"weight":6,"tradingsymbol":"USDINR2211474.75CE","instrument_token":2277379,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-14"},{"id":3352327889,"weight":7,"tradingsymbol":"USDINR22JAN74.5CE","instrument_token":2331395,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-27"},{"id":3352328068,"weight":8,"tradingsymbol":"USDINR2210774.5CE","instrument_token":2083587,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3352328218,"weight":9,"tradingsymbol":"USDINR2211474.5CE","instrument_token":2274563,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-14"},{"id":3352330098,"weight":10,"tradingsymbol":"USDINR22JAN74.25PE","instrument_token":2331139,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-27"},{"id":3352330606,"weight":11,"tradingsymbol":"USDINR2210774.25PE","instrument_token":2083331,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3352330853,"weight":12,"tradingsymbol":"USDINR2211474.25PE","instrument_token":2228483,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-14"},{"id":3352331692,"weight":13,"tradingsymbol":"USDINR22JAN74.5PE","instrument_token":2331651,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-27"},{"id":3352331872,"weight":14,"tradingsymbol":"USDINR2210774.5PE","instrument_token":2083843,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3352332088,"weight":15,"tradingsymbol":"USDINR2211474.5PE","instrument_token":2275843,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-14"}]},{"id":108696389,"name":"5","items":[{"id":3348892336,"weight":0,"tradingsymbol":"USDINR2210775.5CE","instrument_token":2085635,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348944443,"weight":1,"tradingsymbol":"USDINR2210775CE","instrument_token":2084611,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348963455,"weight":2,"tradingsymbol":"USDINR2210776.5CE","instrument_token":2087683,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348963507,"weight":3,"tradingsymbol":"USDINR2210776.25CE","instrument_token":2087171,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348963586,"weight":4,"tradingsymbol":"USDINR2210776CE","instrument_token":2086659,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348963744,"weight":5,"tradingsymbol":"USDINR2210775.75CE","instrument_token":2086147,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348963890,"weight":6,"tradingsymbol":"USDINR2210775.25CE","instrument_token":2085123,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964092,"weight":7,"tradingsymbol":"USDINR2210774.25CE","instrument_token":2083075,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964200,"weight":8,"tradingsymbol":"USDINR2210774.75CE","instrument_token":2084099,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964250,"weight":9,"tradingsymbol":"USDINR2210774.5CE","instrument_token":2083587,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964298,"weight":10,"tradingsymbol":"USDINR2210774CE","instrument_token":2082563,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964379,"weight":11,"tradingsymbol":"USDINR2210773.75CE","instrument_token":2082051,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964434,"weight":12,"tradingsymbol":"USDINR2210773.5CE","instrument_token":2081539,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964547,"weight":13,"tradingsymbol":"USDINR2210773.25CE","instrument_token":2081027,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964591,"weight":14,"tradingsymbol":"USDINR2210773CE","instrument_token":2080515,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964657,"weight":15,"tradingsymbol":"USDINR2210772.75CE","instrument_token":2080003,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964687,"weight":16,"tradingsymbol":"USDINR2210772.5CE","instrument_token":2079491,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964729,"weight":17,"tradingsymbol":"USDINR2210772.25CE","instrument_token":2078979,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348967699,"weight":18,"tradingsymbol":"USDINR2210776.25PE","instrument_token":2087427,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348965608,"weight":18,"tradingsymbol":"USDINR2210776PE","instrument_token":2086915,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964780,"weight":18,"tradingsymbol":"USDINR2210772CE","instrument_token":2078467,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348965675,"weight":19,"tradingsymbol":"USDINR2210775.75PE","instrument_token":2086403,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348967763,"weight":19,"tradingsymbol":"USDINR2210776.5PE","instrument_token":2087939,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348965724,"weight":20,"tradingsymbol":"USDINR2210775.5PE","instrument_token":2085891,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348965816,"weight":21,"tradingsymbol":"USDINR2210775.25PE","instrument_token":2085379,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348965993,"weight":22,"tradingsymbol":"USDINR2210775PE","instrument_token":2084867,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966094,"weight":23,"tradingsymbol":"USDINR2210774.75PE","instrument_token":2084355,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966143,"weight":24,"tradingsymbol":"USDINR2210774.5PE","instrument_token":2083843,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966207,"weight":25,"tradingsymbol":"USDINR2210774.25PE","instrument_token":2083331,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966278,"weight":26,"tradingsymbol":"USDINR2210774PE","instrument_token":2082819,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966366,"weight":27,"tradingsymbol":"USDINR2210773.75PE","instrument_token":2082307,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966427,"weight":28,"tradingsymbol":"USDINR2210773.5PE","instrument_token":2081795,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966465,"weight":29,"tradingsymbol":"USDINR2210773.25PE","instrument_token":2081283,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966553,"weight":30,"tradingsymbol":"USDINR2210773PE","instrument_token":2080771,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966621,"weight":31,"tradingsymbol":"USDINR2210772.75PE","instrument_token":2080259,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966683,"weight":32,"tradingsymbol":"USDINR2210772.5PE","instrument_token":2079747,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966740,"weight":33,"tradingsymbol":"USDINR2210772.25PE","instrument_token":2079235,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966840,"weight":34,"tradingsymbol":"USDINR2210772PE","instrument_token":2078723,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3349002726,"weight":35,"tradingsymbol":"USDINR22107FUT","instrument_token":1838339,"segment":"CDS-FUT","exchange":"CDS","expiry":"2022-01-07"}]},{"id":1432148480,"name":"MW 6","items":[{"id":3153225189,"weight":4,"tradingsymbol":"INDIA VIX","instrument_token":264969,"segment":"INDICES","exchange":"NSE","expiry":""}]},{"id":1439682075,"name":"MW 7","items":[{"id":3160458234,"weight":1,"tradingsymbol":"INDIA VIX","instrument_token":264969,"segment":"INDICES","exchange":"NSE","expiry":""},{"id":3186435109,"weight":2,"tradingsymbol":"NIFTYBEES","instrument_token":2707457,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186401941,"weight":3,"tradingsymbol":"CIPLA","instrument_token":177665,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186406251,"weight":4,"tradingsymbol":"DIVISLAB","instrument_token":2800641,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186408123,"weight":5,"tradingsymbol":"TCS","instrument_token":2953217,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186408254,"weight":6,"tradingsymbol":"INFY","instrument_token":408065,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186414542,"weight":7,"tradingsymbol":"TECHM","instrument_token":3465729,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186425692,"weight":8,"tradingsymbol":"RELIANCE","instrument_token":738561,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186409602,"weight":9,"tradingsymbol":"ASIANPAINT","instrument_token":60417,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186428516,"weight":10,"tradingsymbol":"BHARTIARTL","instrument_token":2714625,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186410885,"weight":11,"tradingsymbol":"POWERGRID","instrument_token":3834113,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186411996,"weight":12,"tradingsymbol":"NESTLEIND","instrument_token":4598529,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186427537,"weight":13,"tradingsymbol":"KOTAKBANK","instrument_token":492033,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186565769,"weight":14,"tradingsymbol":"BAJAJFINSV","instrument_token":4268801,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3261642640,"weight":15,"tradingsymbol":"SBILIFE","instrument_token":5582849,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3261648555,"weight":16,"tradingsymbol":"LT","instrument_token":2939649,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3261672641,"weight":17,"tradingsymbol":"GRASIM","instrument_token":315393,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3261674006,"weight":18,"tradingsymbol":"TITAN","instrument_token":897537,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3261755095,"weight":19,"tradingsymbol":"BANKBEES","instrument_token":2928385,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3262029921,"weight":20,"tradingsymbol":"VBL","instrument_token":4843777,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3262031465,"weight":21,"tradingsymbol":"RADICO","instrument_token":2813441,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3380025273,"weight":22,"tradingsymbol":"PIDILITIND","instrument_token":681985,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3380026008,"weight":23,"tradingsymbol":"SUNPHARMA","instrument_token":857857,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3380027033,"weight":24,"tradingsymbol":"DMART","instrument_token":5097729,"segment":"NSE","exchange":"NSE","expiry":""}]}]}';zerodha_from_date="2021-12-08";zerodha_to_date="2022-01-07";zerodha_expiry_date="Jan-07-2021";longTermExpiryExport="2023-12-28";greeksMonitoringIntervalInitial;greeksMonitoringInterval;nextGreeksTime=new Date;greeksData=new Map;initialGreeksData=new Map;ordersSubscription;positionsSubscription;constructor(e,i,r,s,o,a,l,c,u,d,h){this.route=e,this.appService=i,this.mapService=r,this.websocketService=s,this.chartService=o,this.angelService=a,this.angelWS=l,this.holdingsService=c,this.zerodhaService=u,this.zerodhaWebsocketService=d,this.algoService=h,this.route.queryParams.subscribe(p=>{console.log("params",p),p&&p.access_token&&(this.access_token=p.access_token),p&&p.user_id&&(this.user_id=p.user_id)}),f.requestStatusEvent$.subscribe(p=>{console.log("app requestStatusEvent: ",p),this.lastRequestStatus=p;let g=p.status,A=p.message,y={type:g,message:A};this.alerts.unshift(y),setTimeout(()=>{this.alerts.splice(this.alerts.indexOf(y),1)},5e3)}),f.websocketEvent$.subscribe(p=>{console.log("app websocketEvent: ",p),p==="connected"&&(this.refreshAll(),this.subscribeUSDINR())}),f.miscEvent$.subscribe(p=>{console.log("app miscEvent: ",p),p==="refreshAll"&&this.refreshAll()})}log_ws_feed_change(){f.logWSFeed=this.log_ws_feed}subscribeUSDINR(){let e=[],i=this.mapService.findCurrExpiryForDisplay(f.usdinrExpiries),r=this.mapService.getExpiry(i,"USDINR");e.push(this.mapService.getSubscriptionObjectForFuture("USDINR"+r+"FUT","CDS")),console.log("subscribeUSDINR feed",e),this.appService.sendSubscriptions(e)}close(e){this.alerts.splice(this.alerts.indexOf(e),1)}changeLatestTen(e){e.target.checked?this.orders_rows=10:this.orders_rows=1e3}getBeesRatio(){let e=this.getInstruLTP("NIFTY50"),i=this.getInstruLTP("NIFTYBEES"),r=e/i;return Math.round((r+1e-5)*100)/100}getInstruLTP(e){return this.mapService.getScripLTP(null,null,e,null)}auth_change(e){f.broker_auth=e,console.log("auth change",e),localStorage.setItem("broker_auth",JSON.stringify(e))}auth_change_num(e,i){console.log("auth_change_num",e,i),localStorage.setItem("broker_auth_"+i,JSON.stringify(e)),i==this.auth_acc&&(f.broker_auth=e)}auth_radio_change(e){console.log("auth_radio_change",e),this.auth_acc=="1"?f.broker_auth=this.auth_acc_1:this.auth_acc=="2"&&(f.broker_auth=this.auth_acc_2),console.log("AppConstants.broker_auth",f.broker_auth)}calcBabyName(e){console.log(e,this.baby_name,this.baby_surname);let i=0;for(let r of this.baby_name)f.babyNamesLetters[r.toUpperCase()]&&(i+=f.babyNamesLetters[r.toUpperCase()]),console.log(i,r,f.babyNamesLetters[r.toUpperCase()]);for(let r of this.baby_surname)f.babyNamesLetters[r.toUpperCase()]&&(i+=f.babyNamesLetters[r.toUpperCase()]),console.log(i,r,f.babyNamesLetters[r.toUpperCase()]);for(this.babyNameNumber=0;i;)this.babyNameNumber+=i%10,i=Math.floor(i/10);if(this.babyNameNumber>=10){let r=this.babyNameNumber;for(this.babyNameNumber=0;r;)this.babyNameNumber+=r%10,r=Math.floor(r/10)}}test1(){this.refreshAll(),this.refreshAll()}ngOnInit(){this.auth_acc_1=JSON.parse(localStorage.getItem("broker_auth_1")),this.auth_acc_2=JSON.parse(localStorage.getItem("broker_auth_2")),this.auth_acc=="1"?f.broker_auth=this.auth_acc_1:this.auth_acc=="2"&&(f.broker_auth=this.auth_acc_2),this.zerodha_auth=f.broker_auth,this.calcBabyName(null),this.mapService.setLtp("NIFTY50",18e3),this.mapService.setLtp("BANKNIFTY",4e4),this.mapService.setLtp("FINNIFTY",18500),this.mapService.setLtp("MIDCPNIFTY",8e3),this.mapService.setLtp("SENSEX",65e3),this.mapService.setLtp("BANKEX",5e4),window.location.href.includes("localhost")&&(f.isProduction=!1),console.log(window.location.href,f.isProduction),this.zerodha_expiry_date=this.mapService.findCurrExpiryForDisplay(f.niftyExpiries),this.zerodha_to_date=this.mapService.findCurrExpiryForDisplay(f.niftyExpiries);let e=new Date(this.mapService.findCurrExpiryForDisplay(f.niftyExpiries));e.setDate(e.getDate()-10),this.zerodha_from_date=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2);let i=setInterval(()=>{this.updateSpotStrike(),this.updateOCValues()},5e3),r=setInterval(()=>{},2e3);this.chartService.strategyPnLEvent$.subscribe(a=>{this.strategyPnL=a[0],this.strategyPointsProfit=a[1]}),this.chartService.optionChainEvent$.subscribe(a=>{console.log("received oc:",a);let l=a[0],c=a[1];this.processOCRequest(l,c)});let s=setInterval(()=>{this.orders_update&&this.getOrders()},1e4),o=setInterval(()=>{if(!f.isHistoricalRunning){let a=new Date;if(a.getHours()===15&&a.getMinutes()>=31||a.getHours()>=16){let l=""+a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2);if(JSON.parse(localStorage.getItem("export_"+l))!=="true"){f.isHistoricalRunning=!0;let u="WK",d=20;(this.mapService.isMonthlyExpiry(l,"NIFTY")||this.mapService.isMonthlyExpiry(l,"FINNIFTY")||this.mapService.isMonthlyExpiry(l,"MIDCPNIFTY")||this.mapService.isMonthlyExpiry(l,"SENSEX")||this.mapService.isMonthlyExpiry(l,"BANKEX")||this.mapService.isMonthlyExpiry(l,"USDINR"))&&(u="",d=60);let h=new Date(a);h.setDate(a.getDate()-d);let p=""+h.getFullYear()+"-"+("0"+(h.getMonth()+1)).slice(-2)+"-"+("0"+h.getDate()).slice(-2);console.log("Starting to fetch expiry data"),this.holdingsService.getZerodhaInstruments(u,f.broker_auth,p,l,l)}}}},1e4)}exportLongTermOptions(){let e=new Date(this.longTermExpiryExport),i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),r="",s=550,o=0;for(let a=0;a<s;a+=50)setTimeout(()=>{console.log("Starting to fetch expiry data");let l=new Date(e);l.setDate(e.getDate()-a);let c=""+l.getFullYear()+"-"+("0"+(l.getMonth()+1)).slice(-2)+"-"+("0"+l.getDate()).slice(-2),u=new Date(e);u.setDate(e.getDate()-a-50);let d=""+u.getFullYear()+"-"+("0"+(u.getMonth()+1)).slice(-2)+"-"+("0"+u.getDate()).slice(-2);this.holdingsService.getZerodhaInstruments(r,f.broker_auth,d,c,i,!0)},o*12e4),o++}ngAfterViewInit(){setTimeout(()=>{})}fetchHistorical(){this.holdingsService.getZerodhaInstruments(this.historical_append,this.zerodha_auth,this.zerodha_from_date,this.zerodha_to_date,this.zerodha_expiry_date)}fetchHistoricalThirdParty(){this.holdingsService.getDataFromThirdParty(this.historical_instru,this.historical_append,this.zerodha_from_date,this.zerodha_to_date,this.zerodha_expiry_date,this.historical_date,this.historical_upper,this.historical_lower)}exportHistorical(){this.holdingsService.exportToCSV()}processOCRequest(e,i){this.oc_instru=e;let r=new Date(i);if(this.oc_year=r.getFullYear(),this.oc_month=r.getMonth()+1,this.oc_date=r.getDate(),this.oc_instru==="NIFTY"){this.oc_range_multiple=50;let s=this.mapService.getScripLTP(null,null,"NIFTY50",null),o=Math.round(s/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=o+500,this.oc_range_lower=o-500}else if(this.oc_instru==="BANKNIFTY"){this.oc_range_multiple=100;let s=this.mapService.getScripLTP(null,null,"BANKNIFTY",null),o=Math.round(s/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=o+1500,this.oc_range_lower=o-1500}else if(this.oc_instru==="FINNIFTY"){this.oc_range_multiple=50;let s=this.mapService.getScripLTP(null,null,"FINNIFTY",null),o=Math.round(s/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=o+500,this.oc_range_lower=o-500}else if(this.oc_instru==="MIDCPNIFTY"){this.oc_range_multiple=25;let s=this.mapService.getScripLTP(null,null,"MIDCPNIFTY",null),o=Math.round(s/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=o+500,this.oc_range_lower=o-500}else if(this.oc_instru==="SENSEX"){this.oc_range_multiple=100;let s=this.mapService.getScripLTP(null,null,"SENSEX",null),o=Math.round(s/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=o+1500,this.oc_range_lower=o-1500}else if(this.oc_instru==="BANKEX"){this.oc_range_multiple=100;let s=this.mapService.getScripLTP(null,null,"BANKEX",null),o=Math.round(s/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=o+1500,this.oc_range_lower=o-1500}else if(this.oc_instru==="USDINR"){this.oc_range_multiple=.25;let s=this.mapService.getScripLTP(null,null,"USDINR",null),o=Math.round(s/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=o+2,this.oc_range_lower=o-2}this.updateOCRange()}getStrategyPnL(){return this.strategyPnL}getGreeks(e,i){let r=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e,i),s=new Date(this.oc_year,this.oc_month-1,this.oc_date);return this.appService.getGreeks(this.oc_instru,e,i,s,r,f.isSimulatedStrategy,f.simulateCurrDateObj)}checkNifty(){this.nifty_oc_check?(this.usdinr_oc_check=!1,this.checked_instrument="NIFTY"):(this.usdinr_oc_check=!0,this.checked_instrument="USDINR")}checkUSDINR(){this.usdinr_oc_check?(this.nifty_oc_check=!1,this.checked_instrument="USDINR"):(this.nifty_oc_check=!0,this.checked_instrument="NIFTY")}login(){this.auth()}auth(){this.appService.auth().subscribe(e=>{console.log("app auth",e),e&&(f.requestStatusEvent$.next(e),e.authorization_code&&(this.auth_code=e.authorization_code,this.generateAccessToken()))},e=>{console.log("app auth error",e),f.requestStatusEvent$.next(e.error.message+", "+e.message)})}generateAccessToken(){if(this.auth_code){let e=this.appService.getTokenUrl(this.auth_code,f.fyersAppId);console.log("tokenUrl",e);let i=window.open(e)}}getFunds(){console.log("app getting Funds"),this.appService.getFunds(this.access_token).subscribe(e=>{console.log("app getFunds",e),e&&(this.totalBalance=e.fund_limit[8].equityAmount.toLocaleString(),this.availableBalance=e.fund_limit[9].equityAmount.toLocaleString(),this.utilizedBalance=e.fund_limit[6].equityAmount.toLocaleString())},e=>{console.log("app getPositions error",e),f.requestStatusEvent$.next(e.error.message+", "+e.message)})}includePosPnLInSum1(e){e.includeInSum1=!e.includeInSum1}includePosPnLInSum2(e){e.includeInSum2=!e.includeInSum2}includePosPnLInSum3(e){e.includeInSum3=!e.includeInSum3}includePosPnLInSum4(e){e.includeInSum4=!e.includeInSum4}getPositionsPnLSum(e){let i=0;return this.positions&&(this.positions.forEach(r=>{e===1&&r.includeInSum1&&(i+=r.pnl),e===2&&r.includeInSum2&&(i+=r.pnl),e===3&&r.includeInSum3&&(i+=r.pnl),e===4&&r.includeInSum4&&(i+=r.pnl)}),i=Math.round((i+1e-5)*100)/100,this.positionsPnL=i),i}getMastersStatus(){return f.mastersContract.size?"Masters Contract is available":"Masters Contract not available yet"}uploadExpiryFile(e){}import_establishWSVendor(e){f.SocketMode=this.ws_vendor;let i=e.target.files[0],r=new FileReader;r.readAsText(i),r.onload=s=>{console.log("imported master",r.result),this.appService.uploadedMastersContract(r.result)}}establishWSVendor(){f.SocketMode=this.ws_vendor,this.appService.getMastersContract(this.ws_access_token)}closeWebsocket(){this.appService.closeWebsocket()}reopenWebsocket(){this.appService.reopenWebsocket()}getZerodhaInstruments(){this.appService.getZerodhaInstruments()}uploadNames(e){let i=[],r=e.target.files[0].name,s=e.target.files[0],o=new FileReader;o.readAsText(s),o.onload=a=>{let u=String(o.result).split(/\r|\n|\r/).filter(function(A){return A!==""});for(let A=0;A<u.length;A++)this.baby_name=u[A],this.baby_surname="bhadane",this.calcBabyName(null),i.push([u[A],this.babyNameNumber]);console.log("arr",i);let d="";for(let A=0;A<i.length;A++){let y="";y+=i[A][0]+",Bhadane,"+i[A][1],d+=y+`\r
`}let h=new Blob([d],{type:"application/x-msdownload"}),p=URL.createObjectURL(h),g=document.createElement("a");g.href=p,g.target="_blank",document.body.appendChild(g),g.download="only_boys.csv",g.click(),g.parentNode.removeChild(g)}}uploadNSEOC(e){let i=e.target.files[0].name,r="NIFTY";i.includes("BANKNIFTY")&&(r="BANKNIFTY"),i.includes("FINNIFTY")&&(r="FINNIFTY");let o=i.replace(".csv","").slice("-11");console.log("nse oc file",i,o,r);let a=e.target.files[0],l=new FileReader;l.readAsText(a),l.onload=c=>{let u=String(l.result);this.parseNSEOC(u,r,o)}}parseNSEOC(e,i,r){let o=e.split(/\r|\n|\r/).filter(function(a){return a!==""});for(let a=2;a<o.length;a++){let l=o[a].match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g),c=Number(l[4].replaceAll('"',"").replace(",","").replace("-","0")),u=Number(l[16].replaceAll('"',"").replace(",","").replace("-","0")),d=Number(l[10].replaceAll('"',"").replace(",","").replace("-","0"));this.appService.parseAndSetMaps(i,r,d,"CE",c),this.appService.parseAndSetMaps(i,r,d,"PE",u)}}getNSE_OC(e){this.appService.getNSE_OC(e)}isSocketConnected(){return this.appService.isSocketConnected()}getPositions(){console.log("app getting Positions"),f.RestMode==="zerodha"?(this.positionsSubscription&&this.positionsSubscription.unsubscribe(),this.positionsSubscription=this.zerodhaService.getPositions().subscribe(e=>{console.log("zerodha getPositions response",e),this.mapPositions(e),this.positionsSubscription.unsubscribe()},e=>{console.log("zerodha getPositions error",e),f.requestStatusEvent$.next({status:"danger",message:"Positions Fetch Failed"})})):this.appService.getPositions(this.access_token).subscribe(e=>{console.log("app getPositions",e),e&&(this.lastPositionsUpdateTime=new Date().toLocaleTimeString(),f.requestStatusEvent$.next(e),this.mapPositions(e))},e=>{console.log("app getPositions error",e),f.requestStatusEvent$.next(e.error.message+", "+e.message)})}mapPositions(e){this.positions=[],f.RestMode==="zerodha"&&(e.data.net.forEach(r=>{let s=new Id;s.id=r.id;let o=r.tradingsymbol,a=this.mapService.parseSymbol(o);s.instru=a.instru,s.scrip=a.strike+a.type;let l=this.zerodhaService.findInMastersByToken(r.instrument_token);l&&l.expiry&&(s.expiry=l.expiry),s.netQty=r.quantity,s.buyAvg=r.buy_price,s.sellAvg=r.sell_price,s.pnl=r.pnl,this.positions.push(s)}),this.sortPositions(),console.log("positions",this.positions)),f.RestMode==="fyers"&&e.netPositions instanceof Array&&e.netPositions.forEach(i=>{let r=new Id;r.id=i.id,r.scrip=i.symbol,r.netQty=i.netQty,r.buyAvg=i.buyAvg,r.sellAvg=i.sellAvg,r.type=i.productType,r.realizedProfit=i.realizedProfit,r.pnl=i.pl,this.positions.push(r)}),f.fetchedPositions=this.positions}sortPositions(){this.positions.sort((e,i)=>{if(e.instru!==i.instru)return e.instru.localeCompare(i.instru);let r=e.scrip.slice(0,-2),s=i.scrip.slice(0,-2);if(r===s&&e.scrip.includes("CE")&&i.scrip.includes("PE"))return-1;if(r===s&&e.scrip.includes("PE")&&i.scrip.includes("CE"))return 1;if(r===s&&(e.scrip.includes("CE")&&i.scrip.includes("CE")||e.scrip.includes("PE")&&i.scrip.includes("PE"))){let o=new Date(e.expiry),a=new Date(i.expiry);return o<a?-1:1}return this.compareForSorting(e.scrip,i.scrip)})}compareForSorting(e,i){if(e.includes("CE")&&i.includes("PE"))return-1;if(e.includes("PE")&&i.includes("CE"))return 1;let r=e.slice(0,-2),s=i.slice(0,-2);return r>s?-1:1}getOrders(){console.log("app getting Orders"),f.RestMode==="zerodha"?(this.ordersSubscription&&this.ordersSubscription.unsubscribe(),this.ordersSubscription=this.zerodhaService.getOrders().subscribe(e=>{console.log("zerodha getOrders response",e),this.mapOrders(e),this.ordersSubscription.unsubscribe(),f.miscEvent$.next("ordersReceived")},e=>{console.log("zerodha getOrder error",e),f.requestStatusEvent$.next({status:"danger",message:"Orders Fetch Failed"})})):this.appService.getOrders(this.access_token).subscribe(e=>{console.log("app getOrders",e),e&&(this.lastOrdersUpdateTime=new Date().toLocaleTimeString(),f.requestStatusEvent$.next(e),this.mapOrders(e))},e=>{console.log("app getOrders error",e),f.requestStatusEvent$.next(e.error.message+", "+e.message)})}sortOrders(){this.orders.sort((e,i)=>e.time>i.time?-1:e.time<i.time?1:0)}mapOrders(e){this.orders=[];let i=!1,r=f.completeOrders;f.completeOrders=0,f.RestMode==="zerodha"&&(e.data.forEach(o=>{let a=new yg;a.addToOrders=!1,a.guid=o.guid,a.id=o.order_id,a.time=o.order_timestamp.split(" ")[1];let l=o.tradingsymbol,c=this.mapService.parseSymbol(l);a.instru=c.instru,a.scrip=c.strike+c.type;let u=this.zerodhaService.findInMastersByToken(o.instrument_token);u&&u.expiry&&(a.expiry=u.expiry),a.qty=o.quantity,o.transaction_type==="SELL"&&(a.qty=-a.qty),a.triggerPrice=o.trigger_price,a.status=o.status,a.status==="COMPLETE"&&(f.completeOrders+=1),a.status.includes("PENDING")&&a.status!=="TRIGGER PENDING"&&(i=!0),a.status.includes("TRIGGER PENDING")?a.tradedPrice=o.price:a.tradedPrice=o.average_price,a.message=o.status_message,a.tradingsymbol=o.tradingsymbol,o.tags?(a.tags="",o.tags.forEach(d=>{a.tags+=d+","}),a.tags=a.tags.replace(/,\s*$/,"")):a.tags="",this.orders.push(a)}),this.sortOrders(),f.orders=this.orders),this.completeOrders=f.completeOrders,r+f.placedOrders>this.completeOrders||(f.placedOrders=0),i&&(f.requestStatusEvent$.next({status:"warning",message:"Order Pending. Refetching..."}),setTimeout(()=>{f.enableAlgo||this.refreshAll()},2e3)),f.RestMode==="fyers"&&e.orderBook instanceof Array&&e.orderBook.forEach(s=>{let o=new _g;o.id=s.id,o.scrip=s.symbol,o.qty=s.qty,o.status=s.status,o.message=s.message,o.type=s.type,o.limit=s.limitPrice,o.stop=s.stopPrice,o.tradedPrice=s.tradedPrice,o.side=s.side,o.orderDateTime=s.orderDateTime,this.orders.push(o)})}getCMP(){return 0}getOrderStatus(e){return e===1?"Cancelled":e===2?"Filled":e===3?"Unknown":e===4?"Transit":e===5?"Rejected":e===6?"Pending":"Not Found"}getOrderType(e){return e===1?"Limit":e===2?"Market":e===3?"SL-M":e===4?"SL":"Not Found"}newOrder(e){let i="NSE:"+this.newexpiry+this.newstrike+this.newoption;this.appService.placeOrder(this.access_token,i,this.newqty,this.newOrderType,e,this.newProductType,this.newlimit,this.newstop).subscribe(r=>{console.log("app newOrder",r),this.refreshAll(),r&&f.requestStatusEvent$.next(r)},r=>{console.log("app newOrder error",r),f.requestStatusEvent$.next(r.error.message+", "+r.message),this.refreshAll()})}resetNewOrder(){this.newexpiry="NIFTY20618",this.newstrike=1e4,this.newoption="CE",this.newqty=50,this.newblock=0,this.newOrderType=2,this.newProductType="INTRADAY",this.newlimit=0,this.newstop=0}exitSelected(){this.positions&&confirm("Exit Selected?")&&this.positions.forEach(e=>{(e.includeInSum1||e.includeInSum2||e.includeInSum3||e.includeInSum4)&&this.exitPosition(e,!0)})}exitPosition(e,i=!1){let r=Number(document.getElementById("pos-qty-"+e.id).value);r||(r=Math.abs(e.netQty));let s=0;e.netQty>0?s=-1:e.netQty<0&&(s=1);let o=2;console.log("placing order: ",e.scrip,r,o,s,e.type,0);let a=i;i===!1&&(a=confirm("Exit "+r+" Qty with "+(s===-1?"Sell order":"Buy order")+" Sure?")),a&&this.appService.placeOrder(this.access_token,e.scrip,r,o,s,e.type,0,0).subscribe(l=>{console.log("app exitPosition",l),this.refreshAll(),l&&(f.requestStatusEvent$.next(l),this.appService.playAudio("success"))},l=>{console.log("app exitPosition error",l),f.requestStatusEvent$.next(l.error.message+", "+l.message),this.refreshAll(),this.appService.playAudio("error")})}refreshAll(){this.getPositions(),this.getOrders()}addToStrategyBuilder(e,i){this.appService.payOffEvent$.next({symbol:e.symbol+i,ltp:this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,i),qty:this.qty_default})}addToChart(e,i){this.appService.chartEvent$.next({symbol:e.symbol+i,type:i})}getQtyOfStrikeInStrategy(e){let i=f.curr_positions_trades;if(i){for(let r=0;r<i.length;r++){let s=i[r],o=new Date(this.oc_year,this.oc_month-1,this.oc_date),a=new Date(s.expiry);if(o.getDate()===a.getDate()&&s.scrip===e&&s.exit===0)return s.qty}return null}}getCostOfStrikeInStrategy(e){let i=f.curr_positions_trades;if(i){for(let r=0;r<i.length;r++){let s=i[r],o=new Date(this.oc_year,this.oc_month-1,this.oc_date),a=new Date(s.expiry);if(o.getDate()===a.getDate()&&s.scrip===e&&s.exit===0)return s.entry}return null}}isStrikeInCurrStrategy(e){let i=f.curr_positions_trades;if(i){for(let r=0;r<i.length;r++){let s=i[r],o=new Date(this.oc_year,this.oc_month-1,this.oc_date),a=new Date(s.expiry);if(s.exit===0&&o.getDate()===a.getDate()&&s.scrip===e)return!0}return!1}return!1}ocOrder(e,i,r){let s="NSE:"+r.symbol+i,o=r.strike,a=this.oc_product_type,l;console.log("ocOrder qty: oc-qty-"+i+"-"+r.symbol);let c=Number(document.getElementById("oc-qty-"+i+"-"+r.symbol).value);l=document.getElementById("oc-limit-"+i+"-"+r.symbol).value;let u=2;l?u=1:l=0,console.log("placing order: ",s,c,u===2?"Market":"Limit",e,a,l),this.appService.placeOrder(this.access_token,s,c,u,e,a,l,0).subscribe(d=>{console.log("app ocOrder",d),this.refreshAll(),d&&(f.requestStatusEvent$.next(s+" "+c+" "+(u===2?"Market":"Limit")+" "+d),this.appService.playAudio("success"))},d=>{console.log("app ocOrder error",d),f.requestStatusEvent$.next(d.error.message+", "+d.message),this.refreshAll(),this.appService.playAudio("error")})}isAnyOpenPosition(){let e=f.curr_positions_trades;if(e){for(let i=0;i<e.length;i++)if(e[i].exit===0)return!0}return!1}autoSuggest(){this.findInitialPositions(),this.checkAdjustments()}findInitialPositions(){if(this.suggestions=[],!this.isAnyOpenPosition())for(let e=this.oc_range_lower;e<=this.oc_range_higher;e+=this.oc_range_multiple){let i=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e,"CE");if(i>=16&&i<=28){let r=this.getGreeks(e,"CE").delta;if(r>0&&Math.abs(r)<1)for(let s=this.oc_range_lower;s<=this.oc_range_higher;s+=this.oc_range_multiple){let o=this.getGreeks(s,"PE").delta;if(Math.abs(r+o)<=.025){let a=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),s,"PE");a&&this.suggestions.push({strikeCE:e,deltaCE:r,ltpCE:i,strikePE:s,deltaPE:o,ltpPE:a})}}}}}checkAdjustments(){let e=f.curr_positions_trades,i=0,r=0,s=0,o=0,a=0,l=0;if(this.adjust_sugg=[],this.combined_premium=0,e){for(let c=0;c<e.length;c++){let u=e[c],d=new Date(this.oc_year,this.oc_month-1,this.oc_date),h=new Date(u.expiry);if(u.exit===0&&u.qty<0){let p="";u.scrip.includes("CE")&&(p="CE"),u.scrip.includes("PE")&&(p="PE");let g=u.scrip.slice(0,-2),A=this.getGreeks(g,p).delta*u.qty,y=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),g,p)*u.qty;p==="CE"?(r+=y,i+=A,s+=u.qty):p==="PE"&&(a+=y,o+=A,l+=u.qty)}}r!==0&&a!==0&&(r=r/s,a=a/l,this.combined_premium=r+a,this.combined_premium=Math.round((this.combined_premium+1e-5)*100)/100,this.combined_SL&&this.combined_premium>=this.combined_SL&&this.appService.playAudio("warn")),i!==0&&o!==0&&r&&a&&(i=i/s,o=o/l,Math.abs(i+o)>.04&&(this.roll("CE",o),this.roll("PE",i)))}}roll(e,i){for(let r=this.oc_range_lower;r<=this.oc_range_higher;r+=this.oc_range_multiple){let s=this.oc_instru+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),this.oc_instru)+r,o=this.getGreeks(r,e).delta;if(Math.abs(i+o)<=.025){let a=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),r,e);a&&this.adjust_sugg.push({action:"Adjust "+e,strike:r+e,ltp:a})}}}sortTableColumn(e){console.log("sort"),this.holdings.sort((i,r)=>i.scrip==="NIFTYBEES"?-1:r.scrip==="NIFTYBEES"?1:i[e]>r[e]?-1:i[e]<r[e]?1:0)}fetchStocks(){this.holdingsService.fetchStocksData()}loadHoldings(){let e=this.holdingsService.loadHoldings();this.portfolio_return=e.portfolio_return,this.holdings=e.holdings,this.total_inv=e.total_inv,this.current_val=e.current_val,console.log("stocks:",this.holdings)}backtestStocks(){this.holdingsService.backtestStocks()}exportBacktest(){this.holdingsService.exportBacktest()}isStockHolding(e){return!!f.holdings[e].avgp}updateOCRange(){this.oc_strikes=[];for(let e=this.oc_range_lower;e<=this.oc_range_higher;e+=this.oc_range_multiple)this.oc_strikes.push({symbol:this.oc_instru+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),this.oc_instru)+e,strike:e,inCurrStrategyCE:!1,inCurrStrategyPE:!1,addCEToOrders:!1,addPEToOrders:!1,qtyInputCE:200,qtyInputPE:200,volumeCE:0,volumePE:0,deltaCE:0,gammaCE:0,vegaCE:0,thetaCE:0,deltaPE:0,gammaPE:0,vegaPE:0,thetaPE:0,ltpCE:0,ltpPE:0,qtyCE:0,qtyPE:0,costCE:0,costPE:0,inlineStrategyPnLCE:"",inlineStrategyPnLPE:"",isSpot:!1,showNudge:!1});if(!f.isSimulatedStrategy){let e=[];this.oc_strikes.forEach(i=>{e.push(this.mapService.getSubscriptionObject(i.strike+"CE",this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date).toDateString())),e.push(this.mapService.getSubscriptionObject(i.strike+"PE",this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date).toDateString()))}),console.log("updateOCRange Subscriptions: "+e),this.appService.sendSubscriptions(e)}}updateOCValues(){this.oc_strikes&&this.oc_strikes.length>0&&this.oc_strikes.forEach(e=>{if(e.inCurrStrategyCE=this.isStrikeInCurrStrategy(e.strike+"CE"),e.inCurrStrategyPE=this.isStrikeInCurrStrategy(e.strike+"PE"),e.volumeCE=this.getVolume(e.symbol+"CE"),e.volumePE=this.getVolume(e.symbol+"PE"),e.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"CE"),e.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"PE"),e.qtyCE=this.getQtyOfStrikeInStrategy(e.strike+"CE"),e.qtyPE=this.getQtyOfStrikeInStrategy(e.strike+"PE"),e.costCE=this.getCostOfStrikeInStrategy(e.strike+"CE"),e.costPE=this.getCostOfStrikeInStrategy(e.strike+"PE"),e.isSpot=this.isSpotStrike(e.strike),e.showNudge=this.showOILimit(this.oc_instru,e.strike),this.show_greeks){let i=this.getGreeks(e.strike,"CE");e.deltaCE=i.delta,e.gammaCE=i.gamma,e.vegaCE=i.vega,e.thetaCE=i.theta;let r=this.getGreeks(e.strike,"PE");e.deltaPE=r.delta,e.gammaPE=r.gamma,e.vegaPE=r.vega,e.thetaPE=r.theta}})}showOILimit(e,i){return!!(e==="NIFTY"&&f.nfCEOILimit&&f.nfPEOILimit&&(i>f.nfCEOILimit||i<f.nfPEOILimit)||e==="BANKNIFTY"&&f.bnfCEOILimit&&f.bnfPEOILimit&&(i>f.bnfCEOILimit||i<f.bnfPEOILimit))}refreshInlineStategyPnL(){this.oc_strikes&&this.oc_strikes.length>0&&this.oc_strikes.forEach(e=>{e.inCurrStrategyCE=this.isStrikeInCurrStrategy(e.strike+"CE"),e.inCurrStrategyPE=this.isStrikeInCurrStrategy(e.strike+"PE"),e.volumeCE=this.getVolume(e.symbol+"CE"),e.volumePE=this.getVolume(e.symbol+"PE"),e.deltaCE=this.getGreeks(e.strike,"CE").delta,e.deltaPE=this.getGreeks(e.strike,"PE").delta,e.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"CE"),e.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"PE"),e.qtyCE=this.getQtyOfStrikeInStrategy(e.strike+"CE"),e.qtyPE=this.getQtyOfStrikeInStrategy(e.strike+"PE"),e.costCE=this.getCostOfStrikeInStrategy(e.strike+"CE"),e.costPE=this.getCostOfStrikeInStrategy(e.strike+"PE"),e.isSpot=this.isSpotStrike(e.strike);let i=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"CE"),r=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"PE"),s=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike+this.diff_strategy_pts,"CE"),o=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike-this.diff_strategy_pts,"PE"),a=this.oc_instru+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),this.oc_instru)+(e.strike-this.diff_strategy_pts)+"CE",l=this.oc_instru+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),this.oc_instru)+(e.strike+this.diff_strategy_pts)+"PE",c=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike-this.diff_strategy_pts,"CE"),u=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike+this.diff_strategy_pts,"PE"),d=i*this.qty_strategy_pts+s*-this.qty_strategy_pts,h=r*this.qty_strategy_pts+o*-this.qty_strategy_pts,p=Math.round(d),g=Math.round(h),A=Math.round(this.diff_strategy_pts*this.qty_strategy_pts-p),y=Math.round(this.diff_strategy_pts*this.qty_strategy_pts-g),b=i*-this.qty_strategy_pts+s*this.qty_strategy_pts/2+c*this.qty_strategy_pts/2,x=r*-this.qty_strategy_pts+o*this.qty_strategy_pts/2+u*this.qty_strategy_pts/2,P=Math.round(b),T=Math.round(x),k=Math.round(this.diff_strategy_pts*this.qty_strategy_pts/2-P),C=Math.round(this.diff_strategy_pts*this.qty_strategy_pts/2-T);e.inlineStrategyPnLCE="DS: "+A+" , "+p+`
Bfly: `+k+" , "+P,e.inlineStrategyPnLPE="DS: "+y+" , "+g+`
Bfly: `+C+" , "+T})}clearOC(){this.oc_strikes=[]}getSpotValue(){let e="";return this.oc_instru==="NIFTY"?e="NIFTY50":this.oc_instru==="BANKNIFTY"?e="BANKNIFTY":this.oc_instru==="FINNIFTY"?e="FINNIFTY":this.oc_instru==="MIDCPNIFTY"?e="MIDCPNIFTY":this.oc_instru==="SENSEX"?e="SENSEX":this.oc_instru==="BANKEX"?e="BANKEX":this.oc_instru==="USDINR"&&(e="USDINR"),this.mapService.getScripLTP(null,null,e,null)}updateSpotStrike(){let e="";this.oc_instru==="NIFTY"?e="NIFTY50":this.oc_instru==="BANKNIFTY"?e="BANKNIFTY":this.oc_instru==="FINNIFTY"?e="FINNIFTY":this.oc_instru==="MIDCPNIFTY"?e="MIDCPNIFTY":this.oc_instru==="SENSEX"?e="SENSEX":this.oc_instru==="BANKEX"?e="BANKEX":this.oc_instru==="USDINR"&&(e="USDINR");let i=this.mapService.getScripLTP(null,null,e,null),r=Math.round(i/this.oc_range_multiple)*this.oc_range_multiple;this.ocSpotStrike=r}isSpotStrike(e){return e===this.ocSpotStrike}getPosPnL(e){if(e.cmp){let i=null,r=0;if(e.realizedProfit&&(r=e.realizedProfit),e.netQty===0)return e.pnl;if(e.netQty>0){let s=(e.cmp-e.buyAvg)*e.netQty;i=r+s}else if(e.netQty<0){let s=(e.sellAvg-e.cmp)*-e.netQty;i=r+s}return e.scrip.includes("USDINR")&&(i*=1e3),e.pnl=Math.round((i+1e-5)*100)/100,e.pnl}else return e.pnl}getAtp(e){return this.mapService.getAtp(e)}getVolume(e){let i=this.mapService.getVolume(e);return i&&i.toLocaleString()}getOI(e){this.mapService.getOI(e)}getChgOI(e){this.mapService.getChgOI(e)}connectWS(){f.SocketMode=this.ws_vendor,this.appService.connectWebsocket(this.ws_access_token)}addOrdersToStrategy(){let e=[];this.orders.forEach(i=>{i.addToOrders&&e.push({scrip:i.scrip,price:i.tradedPrice,qty:i.qty,expiry:i.expiry})}),this.appService.payOffEvent$.next(e)}addPlaceOrders(){let e=[];this.oc_strikes.forEach(i=>{i.addCEToOrders&&(e.push({instru:this.oc_instru,strike:i.strike+"CE"}),i.addCEToOrders=!1),i.addPEToOrders&&(e.push({instru:this.oc_instru,strike:i.strike+"PE"}),i.addPEToOrders=!1)}),this.appService.placeOrdersEvent$.next(e)}calcMaxProfitLoss(){let e=[];this.maxProfit=0,this.maxLoss=0;let i=1e6;if(this.oc_strikes.forEach(r=>{r.addCEToOrders&&e.push(r.strike),r.addPEToOrders&&e.push(r.strike)}),e.sort((r,s)=>s-r),e.length===2||e.length===3){this.oc_strikes.forEach(s=>{if(s.addCEToOrders){let o=s.ltpCE*s.qtyInputCE;this.maxLoss+=o,Math.abs(s.qtyInputCE)<i&&(i=Math.abs(s.qtyInputCE))}if(s.addPEToOrders){let o=s.ltpPE*s.qtyInputPE;this.maxLoss+=o,Math.abs(s.qtyInputPE)<i&&(i=Math.abs(s.qtyInputPE))}});let r=-1;for(let s=0;s<e.length-1;s++){let o=e[s]-e[s+1];o>r&&(r=o)}this.maxProfit=r*i-this.maxLoss,this.profitLossRatio=this.maxProfit/this.maxLoss,this.profitLossRatio=Math.round((this.profitLossRatio+1e-5)*100)/100}if(e.length===4){this.oc_strikes.forEach(s=>{if(s.addCEToOrders){let o=s.ltpCE*s.qtyInputCE;this.maxProfit+=o,Math.abs(s.qtyInputCE)<i&&(i=Math.abs(s.qtyInputCE))}if(s.addPEToOrders){let o=s.ltpPE*s.qtyInputPE;this.maxProfit+=o,Math.abs(s.qtyInputPE)<i&&(i=Math.abs(s.qtyInputPE))}});let r=-1;for(let s=0;s<e.length-1;s++){let o=e[s]-e[s+1];o>r&&(r=o)}console.log("strikes, maxdiff, qty",e,r,i),this.maxProfit=Math.abs(this.maxProfit),this.maxLoss=r*i-this.maxProfit,this.profitLossRatio=this.maxProfit/this.maxLoss,this.profitLossRatio=Math.round((this.profitLossRatio+1e-5)*100)/100}}startMonitoringGreeks(){let e=new Date;e.setHours(19,37,0),this.greeksMonitoringIntervalInitial=setInterval(()=>{let i=new Date;console.log("Finding greeks start time ",e,i),i>=e&&(console.log("Found start time ",e),clearInterval(this.greeksMonitoringIntervalInitial),this.nextGreeksTime=i,this.nextGreeksTime.setMinutes(i.getMinutes()+1,0),this.setInitialGreeksData(),this.recordGreeks())},1e3)}setInitialGreeksData(){let e="NIFTY",i=50,r=this.mapService.getScripLTP(null,null,"NIFTY50",null),s=Math.round(r/i)*i,o=e+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),e)+s,a=this.getGreeks(s,"CE");this.initialGreeksData.set("CE",a);let l=this.getGreeks(s,"PE");this.initialGreeksData.set("PE",l),console.log("Initial greeks for ",s,this.initialGreeksData)}recordGreeks(){console.log("Recording greeks"),this.greeksMonitoringIntervalInitial=setInterval(()=>{new Date>=this.nextGreeksTime&&(console.log("Found next time ",this.nextGreeksTime),this.nextGreeksTime.setMinutes(this.nextGreeksTime.getMinutes()+1,0),this.getGreeksSum())},1e3)}getGreeksSum(){let e=new Date,i=[e.getHours(),e.getMinutes()].join(":"),r="NIFTY",s=50,o=this.mapService.getScripLTP(null,null,"NIFTY50",null),a=Math.round(o/s)*s,l=a+500,c=a-500,u=0,d=0,h=0,p=0,g=0,A=0;for(let b=l;b>=a;b-=s){let x=r+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),r)+b,P=this.getGreeks(b,"CE"),T=this.initialGreeksData.get("CE").vega-P.vega;u+=T;let k=this.initialGreeksData.get("CE").delta-P.delta;h+=k;let C=this.initialGreeksData.get("CE").theta-P.theta;g+=C}for(let b=c;b<=a;b+=s){let x=r+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),r)+b,P=this.getGreeks(b,"PE"),T=this.initialGreeksData.get("PE").vega-P.vega;d+=T;let k=this.initialGreeksData.get("PE").delta-P.delta;p+=k;let C=this.initialGreeksData.get("PE").theta-P.theta;A+=C}let y={CE:{delta:h,gamma:0,vega:u,theta:g},PE:{delta:p,gamma:0,vega:d,theta:A}};this.greeksData.set(i,y),console.log("greeksData",this.greeksData)}static \u0275fac=function(i){return new(i||n)(ve(mr),ve(ni),ve(Ue),ve(eo),ve(am),ve(sm),ve(Ir),ve(P5),ve(Mn),ve(om),ve(N5))};static \u0275cmp=qi({type:n,selectors:[["app-root"]],decls:385,vars:66,consts:[["fileImportInputNSEOC",""],["fileImportInputExpiry",""],[1,"main-content"],[1,"alertMessage"],[4,"ngFor","ngForOf"],[1,"d-flex","mb-4","align-items-center"],["placeholder","Baby First Name",1,"form-control","form-control-sm","me-2",3,"ngModelChange","keyup","ngModel"],["placeholder","Surname",1,"form-control","form-control-sm","me-2",3,"ngModelChange","keyup","ngModel"],[1,"top-content","d-flex"],[1,"me-auto"],["type","button",1,"btn","btn-link",3,"click"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],["type","file","name","File Upload NSE OC",2,"display","none",3,"change"],[1,"confirmation-check","form-check-inline","mt-0"],["type","radio","name","ws_vendor","value","zerodha","id","zerodha_ws",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","zerodha_ws",1,"form-check-label"],["type","radio","name","ws_vendor","value","aliceblue","id","aliceblue_ws",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","aliceblue_ws",1,"form-check-label"],[4,"ngIf"],["type","file","name","File Upload Master Contract",2,"display","none",3,"change"],["type","button","class","btn btn-link",3,"click",4,"ngIf"],[1,"confirmation-check","form-check","mt-2"],["type","radio","name","auth_radio","value","1","id","auth_select_1",1,"form-check-input","me-1",3,"ngModelChange","change","ngModel"],["placeholder","Authorization 1",1,"form-control","me-2",2,"max-width","1000px","display","inline-block",3,"ngModelChange","ngModel"],["type","radio","name","auth_radio","value","2","id","auth_select_2",1,"form-check-input","me-1",3,"ngModelChange","change","ngModel"],["placeholder","Authorization 2",1,"form-control","me-2",2,"max-width","1000px","display","inline-block",3,"ngModelChange","ngModel"],[1,"d-flex"],[1,""],[1,"table","table-sm","table-bordered","mb-0",2,"width","200px"],[2,"width","50%"],[1,"ms-1"],[1,"form-check-inline","mt-4"],["type","checkbox","value","","name","log_ws_feed","id","log_ws_feed",1,"form-check-input","me-2",3,"ngModelChange","change","ngModel"],["for","log_ws_feed",1,"form-check-label","me-1"],["placeholder","Expiry YYYY-MM-DD",1,"d-inline","form-control","form-control-sm",2,"width","100px",3,"ngModelChange","ngModel"],[1,"d-inline","ms-3"],["id","accordionStocks",1,"accordion","mt-4"],[1,"accordion-item"],["id","headingStocks",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseStock","aria-expanded","false","aria-controls","collapseStock",1,"accordion-button","fw-bold","collapsed"],["id","collapseStock","aria-labelledby","headingStocks","data-bs-parent","#accordionStocks",1,"accordion-collapse","collapse"],[1,"accordion-body"],[2,"margin-top","0.5rem"],["type","button",1,"btn","btn-secondary","btn-sm","refresh-btn",3,"click"],[1,"flex-container"],[1,"positions_div"],[1,"table-title"],[1,"fw-bold"],[1,"ms-auto","float-end"],[1,"form-check-inline"],["for","hide-positions",1,"form-check-label","me-1"],["type","checkbox","value","","name","hide-positions","id","hide-positions",1,"form-check-input","me-2",3,"ngModelChange","ngModel"],["for","hide-exited-positions",1,"form-check-label","me-1"],["type","checkbox","value","","name","hide-exited-ositions","id","hide-exited-positions",1,"form-check-input","me-2",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-secondary","btn-sm","refresh-btn","me-1",3,"click"],["type","button",1,"btn","btn-secondary","btn-sm","refresh-btn",3,"click","disabled"],[1,"table","table-sm","table-bordered","shadow","text-center"],[1,"table-light"],["scope","col"],[1,"orderbook_div"],["for","hide-orders",1,"form-check-label","me-1"],["type","checkbox","value","","id","hide-orders",1,"form-check-input",3,"ngModelChange","ngModel"],["for","orders-update",1,"form-check-label","me-1"],["type","checkbox","value","","id","orders-updates",1,"form-check-input",3,"ngModelChange","ngModel"],["for","latest-ten",1,"form-check-label","me-1"],["type","checkbox","value","","id","latest-ten",1,"form-check-input",3,"change","ngModelChange","ngModel"],["class","algo-suggestions-main shadow-sm p-3 mb-5 bg-white",4,"ngIf"],[2,"width","50% !important"],[1,"option-chain"],[1,"new-input","form-select","form-select-sm",3,"ngModelChange","ngModel"],["value","NIFTY"],["value","BANKNIFTY"],["value","FINNIFTY"],["value","MIDCPNIFTY"],["value","SENSEX"],["value","USDINR"],["id","strategy-qty","type","number","placeholder","Qty Default",1,"ms-2","form-control","form-control-sm",2,"display","inline","width","70px",3,"ngModelChange","ngModel"],[2,"display","inline-block","margin-left","20px","margin-right","10px"],[1,"input-group","input-group-sm","new-input-prepend-expiry"],[1,"input-group-prepend"],[1,"input-group-text"],["type","number",1,"form-control",3,"ngModelChange","ngModel"],[1,"input-group","input-group-sm","new-input-prepend-oc"],["type","number","min","0","step","50",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","50","step","50",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],["type","button",1,"btn","btn-secondary","btn-sm","ms-1",3,"click"],[1,"confirmation-check","form-check-inline","ms-2"],["type","checkbox","value","","id","show_greeks",1,"form-check-input",3,"ngModelChange","ngModel"],["for","show_greeks",1,"form-check-label","ms-1"],["id","strategypoints-qty","type","number","placeholder","Qty Points",1,"me-1","form-control","form-control-sm",2,"display","inline","width","70px",3,"ngModelChange","ngModel"],["id","strategypoints-diff","type","number","placeholder","Diff Points",1,"me-1","form-control","form-control-sm",2,"display","inline","width","70px",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-secondary","btn-sm","ms-1","me-1",3,"click"],[1,"table","table-sm","table-bordered","shadow","mb-0","text-center"],[1,"text-center"],["colspan","4","scope","col"],["scope","col",1,"oc-col-actions"],["scope","col",1,"oc-col"],["class","oc-col","scope","col",4,"ngIf"],["scope","col",1,"text-center"],["id","accordionHistorical",1,"accordion","mb-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#historicalSection","aria-expanded","false","aria-controls","historicalSection",1,"accordion-button","collapsed","fw-bold"],["id","historicalSection","aria-labelledby","headingStocks","data-bs-parent","#accordionHistorical",1,"accordion-collapse","collapse","p-2"],[1,"historical_input","mb-2"],["for","historical_append",1,"historical_label"],["name","historical_append","placeholder","historical_append",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","zerodha_auth",1,"historical_label"],["name","zerodha_auth","placeholder","zerodha_auth",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","zerodha_from_date",1,"historical_label"],["name","zerodha_from_date","placeholder","zerodha_from_date",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","zerodha_to_date",1,"historical_label"],["name","zerodha_to_date","placeholder","zerodha_to_date",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","zerodha_expiry_date",1,"historical_label"],["name","zerodha_expiry_date","placeholder","zerodha_expiry_date",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["value","CNXBAN"],["value","NIFFIN"],["for","historical_date",1,"historical_label"],["name","historical_date","placeholder","historical_date",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","historical_upper",1,"historical_label"],["name","historical_upper","type","number","placeholder","historical_upper",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","historical_lower",1,"historical_label"],["name","historical_lower","type","number","placeholder","historical_lower",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["id","accordionHoldings",1,"accordion","mb-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#holdingsSection","aria-expanded","true","aria-controls","holdingsSection",1,"accordion-button","collapsed","fw-bold"],["id","holdingsSection","aria-labelledby","headingStocks","data-bs-parent","#accordionHoldings",1,"accordion-collapse","collapse","p-2"],["scope","col",1,"oc-col",3,"click"],[3,"closed","type"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"form-check-inline","posCheckbox"],["type","checkbox","value","",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],[1,"algo-suggestions-main","shadow-sm","p-3","mb-5","bg-white"],[1,"me-2"],[1,"fw-bold",3,"ngClass"],["class","suggest-positions",4,"ngFor","ngForOf"],[1,"ms-4","me-3"],["type","number","placeholder","Combined SL",1,"ms-2","form-control","form-control-sm",2,"width","70px","display","inline",3,"ngModelChange","ngModel"],[1,"suggest-positions"],[1,"positions-row-actions"],[1,"form-check-inline","posCheckbox","me-1"],["type","checkbox","value","",1,"form-check-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Qty",1,"pos-input","form-control","form-control-sm",3,"ngModelChange","ngModel","id"],["type","button",1,"btn","btn-secondary","btn-sm","me-1",3,"click"],[2,"white-space","pre-line","width","124px",3,"ngClass"],[3,"ngClass",4,"ngIf"],[1,"text-primary","fw-bold",3,"ngClass"],["class","ocStrategyStrikeQty",4,"ngIf"],[1,"fw-bold","text-center",3,"ngClass"],["class","ocStrategyStrikeQty oc-strike-spot",4,"ngIf"],["style","color: orange;",4,"ngIf"],[1,"greeksOC"],[1,"ocStrategyStrikeQty"],[1,"ocStrategyStrikeQty","oc-strike-spot"],[2,"color","orange"]],template:function(i,r){if(i&1){let s=fe();m(0,"div",2)(1,"div",3),te(2,Une,3,2,"p",4),_(),m(3,"div",5)(4,"input",6),U("ngModelChange",function(a){return E(s),z(r.baby_name,a)||(r.baby_name=a),D(a)}),j("keyup",function(a){return E(s),D(r.calcBabyName(a))}),_(),m(5,"input",7),U("ngModelChange",function(a){return E(s),z(r.baby_surname,a)||(r.baby_surname=a),D(a)}),j("keyup",function(a){return E(s),D(r.calcBabyName(a))}),_(),m(6,"span"),w(7),_()(),m(8,"div"),w(9,"Disclaimer: The application is only for my personal use and not for any commercial purposes."),_(),m(10,"div",8)(11,"div",9)(12,"div")(13,"span"),w(14,"Fetch NSE OC:"),_(),m(15,"button",10),j("click",function(){return E(s),D(r.getNSE_OC("NIFTY50"))}),w(16,"NIFTY"),_(),m(17,"button",10),j("click",function(){return E(s),D(r.getNSE_OC("BANKNIFTY"))}),w(18,"BANKNIFTY"),_(),m(19,"button",10),j("click",function(){return E(s),D(r.getNSE_OC("FINNIFTY"))}),w(20,"FINNIFTY"),_(),m(21,"button",11),j("click",function(){E(s);let a=$n(24);return D(a.click())}),w(22,"\u2191"),_(),m(23,"input",12,0),j("change",function(a){return E(s),D(r.uploadNSEOC(a))}),_()(),m(25,"div",13)(26,"input",14),U("ngModelChange",function(a){return E(s),z(r.ws_vendor,a)||(r.ws_vendor=a),D(a)}),_(),m(27,"label",15),w(28,"Zerodha"),_()(),m(29,"div",13)(30,"input",16),U("ngModelChange",function(a){return E(s),z(r.ws_vendor,a)||(r.ws_vendor=a),D(a)}),_(),m(31,"label",17),w(32,"Aliceblue"),_()(),m(33,"button",10),j("click",function(){return E(s),D(r.establishWSVendor())}),w(34,"Fetch & Connect"),_(),m(35,"button",10),j("click",function(){E(s);let a=$n(40);return D(a.click())}),w(36,"Import & Connect"),_(),te(37,zne,2,0,"span",18)(38,Hne,2,0,"span",18),m(39,"input",19,1),j("change",function(a){return E(s),D(r.import_establishWSVendor(a))}),_(),m(41,"div")(42,"span"),w(43),_(),te(44,Yne,2,0,"button",20),_(),m(45,"div"),te(46,Gne,2,0,"span",18)(47,Kne,2,0,"span",18)(48,$ne,2,0,"button",20),m(49,"button",10),j("click",function(){return E(s),D(r.reopenWebsocket())}),w(50,"Connect"),_()(),m(51,"div",21)(52,"input",22),U("ngModelChange",function(a){return E(s),z(r.auth_acc,a)||(r.auth_acc=a),D(a)}),j("change",function(a){return E(s),D(r.auth_radio_change(a))}),_(),m(53,"input",23),j("ngModelChange",function(a){return E(s),D(r.auth_change_num(a,"1"))}),U("ngModelChange",function(a){return E(s),z(r.auth_acc_1,a)||(r.auth_acc_1=a),D(a)}),_()(),m(54,"div",21)(55,"input",24),U("ngModelChange",function(a){return E(s),z(r.auth_acc,a)||(r.auth_acc=a),D(a)}),j("change",function(a){return E(s),D(r.auth_radio_change(a))}),_(),m(56,"input",25),j("ngModelChange",function(a){return E(s),D(r.auth_change_num(a,"2"))}),U("ngModelChange",function(a){return E(s),z(r.auth_acc_2,a)||(r.auth_acc_2=a),D(a)}),_()()(),m(57,"div")(58,"div",26)(59,"div",27)(60,"table",28)(61,"tbody")(62,"tr")(63,"td",29),w(64,"Nifty"),_(),m(65,"td"),w(66),_()()()()(),m(67,"div",30)(68,"table",28)(69,"tbody")(70,"tr")(71,"td",29),w(72,"BNF"),_(),m(73,"td"),w(74),_()()()()(),m(75,"div",30)(76,"table",28)(77,"tbody")(78,"tr")(79,"td",29),w(80,"Finnifty"),_(),m(81,"td"),w(82),_()()()()()(),m(83,"div",31)(84,"input",32),U("ngModelChange",function(a){return E(s),z(r.log_ws_feed,a)||(r.log_ws_feed=a),D(a)}),j("change",function(){return E(s),D(r.log_ws_feed_change())}),_(),m(85,"label",33),w(86,"Log WS Feed"),_()(),m(87,"button",10),j("click",function(){return E(s),D(r.exportLongTermOptions())}),w(88,"Export Long Term Nifty"),_(),m(89,"input",34),U("ngModelChange",function(a){return E(s),z(r.longTermExpiryExport,a)||(r.longTermExpiryExport=a),D(a)}),_(),m(90,"div",35),w(91),_()()(),m(92,"div",36)(93,"div",37)(94,"h2",38)(95,"button",39),w(96," Stocks "),_()(),m(97,"div",40)(98,"div",41),Ze(99,"app-stocks"),_()()()(),Ze(100,"hr",42),m(101,"button",43),j("click",function(){return E(s),D(r.refreshAll())}),w(102,"Refresh All"),_(),m(103,"span"),w(104),_(),m(105,"div",44)(106,"div",45)(107,"div",46)(108,"span",47),w(109,"Positions"),_(),m(110,"div",48)(111,"div",49)(112,"label",50),w(113,"Hide"),_(),m(114,"input",51),U("ngModelChange",function(a){return E(s),z(r.hide_positions,a)||(r.hide_positions=a),D(a)}),_()(),m(115,"div",49)(116,"label",52),w(117,"Hide Exited"),_(),m(118,"input",53),U("ngModelChange",function(a){return E(s),z(r.hide_exited_positions,a)||(r.hide_exited_positions=a),D(a)}),_()(),m(119,"button",54),j("click",function(){return E(s),D(r.getPositions())}),w(120,"Refresh"),_(),m(121,"button",55),j("click",function(){return E(s),D(r.exitSelected())}),w(122,"Exit selected"),_()()(),m(123,"table",56)(124,"thead",57)(125,"tr")(126,"th",58),w(127,"Instru"),_(),m(128,"th",58),w(129,"Scrip"),_(),m(130,"th",58),w(131,"NetQty"),_(),m(132,"th",58),w(133,"BuyAvg"),_(),m(134,"th",58),w(135,"SellAvg"),_()()(),te(136,Zne,2,1,"tbody",18),_()(),m(137,"div",59)(138,"div",46)(139,"div",26)(140,"span",47),w(141,"Orders"),_(),m(142,"span"),w(143),_(),m(144,"div",48)(145,"div",49)(146,"label",60),w(147,"Hide"),_(),m(148,"input",61),U("ngModelChange",function(a){return E(s),z(r.hide_orders,a)||(r.hide_orders=a),D(a)}),_()(),m(149,"div",49)(150,"label",62),w(151,"Auto-Update"),_(),m(152,"input",63),U("ngModelChange",function(a){return E(s),z(r.orders_update,a)||(r.orders_update=a),D(a)}),_()(),m(153,"div",49)(154,"label",64),w(155,"Latest 10"),_(),m(156,"input",65),j("change",function(a){return E(s),D(r.changeLatestTen(a))}),U("ngModelChange",function(a){return E(s),z(r.latest_ten,a)||(r.latest_ten=a),D(a)}),_()(),m(157,"button",54),j("click",function(){return E(s),D(r.getOrders())}),w(158,"Refresh"),_(),m(159,"button",43),j("click",function(){return E(s),D(r.addOrdersToStrategy())}),w(160,"Add to Strategy"),_()()()(),m(161,"table",56)(162,"thead",57)(163,"tr"),Ze(164,"th"),m(165,"th",58),w(166,"Time"),_(),m(167,"th",58),w(168,"Expiry"),_(),m(169,"th",58),w(170,"Instru"),_(),m(171,"th",58),w(172,"Scrip"),_(),m(173,"th",58),w(174,"Qty"),_(),m(175,"th",58),w(176,"Price"),_(),m(177,"th",58),w(178,"Status"),_(),m(179,"th",58),w(180,"Tags"),_(),m(181,"th",58),w(182,"GUID"),_(),m(183,"th",58),w(184,"OrderId"),_(),m(185,"th",58),w(186,"Message"),_()()(),te(187,eie,2,1,"tbody",18),_()()(),te(188,iie,12,10,"div",66),Ze(189,"app-chart",67)(190,"hr"),m(191,"div",68)(192,"select",69),U("ngModelChange",function(a){return E(s),z(r.oc_instru,a)||(r.oc_instru=a),D(a)}),m(193,"option",70),w(194,"NIFTY"),_(),m(195,"option",71),w(196,"BANKNIFTY"),_(),m(197,"option",72),w(198,"FINNIFTY"),_(),m(199,"option",73),w(200,"MIDCPNIFTY"),_(),m(201,"option",74),w(202,"SENSEX"),_(),m(203,"option",75),w(204,"USDINR"),_()(),m(205,"input",76),U("ngModelChange",function(a){return E(s),z(r.qty_default,a)||(r.qty_default=a),D(a)}),_(),m(206,"div",77),w(207,"Expiry: "),_(),m(208,"div",78)(209,"div",79)(210,"div",80),w(211,"Year"),_()(),m(212,"input",81),U("ngModelChange",function(a){return E(s),z(r.oc_year,a)||(r.oc_year=a),D(a)}),_()(),m(213,"div",78)(214,"div",79)(215,"div",80),w(216,"Month"),_()(),m(217,"input",81),U("ngModelChange",function(a){return E(s),z(r.oc_month,a)||(r.oc_month=a),D(a)}),_()(),m(218,"div",78)(219,"div",79)(220,"div",80),w(221,"Date"),_()(),m(222,"input",81),U("ngModelChange",function(a){return E(s),z(r.oc_date,a)||(r.oc_date=a),D(a)}),_()(),m(223,"div",77),w(224,"Strike range: "),_(),m(225,"div",82)(226,"div",79)(227,"div",80),w(228,"Higher"),_()(),m(229,"input",83),U("ngModelChange",function(a){return E(s),z(r.oc_range_higher,a)||(r.oc_range_higher=a),D(a)}),_()(),m(230,"div",82)(231,"div",79)(232,"div",80),w(233,"Lower"),_()(),m(234,"input",83),U("ngModelChange",function(a){return E(s),z(r.oc_range_lower,a)||(r.oc_range_lower=a),D(a)}),_()(),m(235,"div",82)(236,"div",79)(237,"div",80),w(238,"Multiple"),_()(),m(239,"input",84),U("ngModelChange",function(a){return E(s),z(r.oc_range_multiple,a)||(r.oc_range_multiple=a),D(a)}),_()(),m(240,"button",85),j("click",function(){return E(s),D(r.updateOCRange())}),w(241,"Update"),_(),m(242,"button",86),j("click",function(){return E(s),D(r.clearOC())}),w(243,"Clear"),_(),m(244,"button",86),j("click",function(){return E(s),D(r.addPlaceOrders())}),w(245,"Add - Place Orders"),_(),m(246,"div",87)(247,"input",88),U("ngModelChange",function(a){return E(s),z(r.show_greeks,a)||(r.show_greeks=a),D(a)}),_(),m(248,"label",89),w(249,"Greeks"),_()(),m(250,"div")(251,"input",90),U("ngModelChange",function(a){return E(s),z(r.qty_strategy_pts,a)||(r.qty_strategy_pts=a),D(a)}),_(),m(252,"input",91),U("ngModelChange",function(a){return E(s),z(r.diff_strategy_pts,a)||(r.diff_strategy_pts=a),D(a)}),_(),m(253,"button",85),j("click",function(){return E(s),D(r.refreshInlineStategyPnL())}),w(254,"P&L"),_(),m(255,"button",92),j("click",function(){return E(s),D(r.calcMaxProfitLoss())}),w(256,"Sel. P&L"),_(),m(257,"span"),w(258),_()(),m(259,"table",93)(260,"thead",57)(261,"tr",94)(262,"th",95),w(263,"Calls"),_(),Ze(264,"th",58),m(265,"th",95),w(266,"Puts"),_()(),m(267,"tr"),Ze(268,"th",96)(269,"th",97),m(270,"th",97),w(271,"Volume"),_(),te(272,rie,2,0,"th",98),m(273,"th",97),w(274,"LTP"),_(),m(275,"th",99),w(276,"Strike"),_(),m(277,"th",97),w(278,"LTP"),_(),te(279,sie,2,0,"th",98),m(280,"th",97),w(281,"Volume"),_(),Ze(282,"th",97)(283,"th",96),_()(),m(284,"tbody"),te(285,hie,39,49,"tr",4),_()()(),Ze(286,"hr"),m(287,"div",100)(288,"div",37)(289,"h2",38)(290,"button",101),w(291," Historical "),_()(),m(292,"div",102),w(293," For Weekly expiry, enter WK in append field. By default, Nifty/BNF expiries dates will be shown. For Finnifty, update the date fields. "),m(294,"div",103)(295,"label",104),w(296,"Append"),_(),m(297,"input",105),U("ngModelChange",function(a){return E(s),z(r.historical_append,a)||(r.historical_append=a),D(a)}),_()(),m(298,"div",103)(299,"label",106),w(300,"Authorization"),_(),m(301,"input",107),U("ngModelChange",function(a){return E(s),z(r.zerodha_auth,a)||(r.zerodha_auth=a),D(a)}),_()(),m(302,"div",103)(303,"label",108),w(304,"From Date"),_(),m(305,"input",109),U("ngModelChange",function(a){return E(s),z(r.zerodha_from_date,a)||(r.zerodha_from_date=a),D(a)}),_()(),m(306,"div",103)(307,"label",110),w(308,"To Date"),_(),m(309,"input",111),U("ngModelChange",function(a){return E(s),z(r.zerodha_to_date,a)||(r.zerodha_to_date=a),D(a)}),_()(),m(310,"div",103)(311,"label",112),w(312,"Expiry Date"),_(),m(313,"input",113),U("ngModelChange",function(a){return E(s),z(r.zerodha_expiry_date,a)||(r.zerodha_expiry_date=a),D(a)}),_()(),m(314,"div"),w(315,'Third Party: Update Append, Expiry date, instru, Date, upper range and lower range. See the range of instru for the period you want. In one call, 2.5 days data is received. See the day upto which data is received in response payload. Then update "Date" to this date.'),_(),m(316,"select",114),U("ngModelChange",function(a){return E(s),z(r.historical_instru,a)||(r.historical_instru=a),D(a)}),m(317,"option",70),w(318,"NIFTY"),_(),m(319,"option",115),w(320,"BANKNIFTY"),_(),m(321,"option",116),w(322,"FINNIFTY"),_()(),m(323,"div",103)(324,"label",117),w(325,"Date"),_(),m(326,"input",118),U("ngModelChange",function(a){return E(s),z(r.historical_date,a)||(r.historical_date=a),D(a)}),_()(),m(327,"div",103)(328,"label",119),w(329,"Upper Range"),_(),m(330,"input",120),U("ngModelChange",function(a){return E(s),z(r.historical_upper,a)||(r.historical_upper=a),D(a)}),_()(),m(331,"div",103)(332,"label",121),w(333,"Lower Range"),_(),m(334,"input",122),U("ngModelChange",function(a){return E(s),z(r.historical_lower,a)||(r.historical_lower=a),D(a)}),_()(),m(335,"button",10),j("click",function(){return E(s),D(r.fetchHistorical())}),w(336,"Fetch Historical"),_(),m(337,"button",10),j("click",function(){return E(s),D(r.fetchHistoricalThirdParty())}),w(338,"Fetch Historical Third Party"),_(),m(339,"button",10),j("click",function(){return E(s),D(r.exportHistorical())}),w(340,"Export"),_()()()(),m(341,"div",123)(342,"div",37)(343,"h2",38)(344,"button",124),w(345," Stocks - old "),_()(),m(346,"div",125)(347,"div"),w(348),_(),m(349,"table",93)(350,"thead",57)(351,"tr")(352,"th",97),w(353,"Scrip"),_(),m(354,"th",97),w(355,"LTP"),_(),m(356,"th",126),j("click",function(){return E(s),D(r.sortTableColumn("oned"))}),w(357,"1D%"),_(),m(358,"th",126),j("click",function(){return E(s),D(r.sortTableColumn("onew"))}),w(359,"1W%"),_(),m(360,"th",126),j("click",function(){return E(s),D(r.sortTableColumn("onem"))}),w(361,"1M%"),_(),m(362,"th",126),j("click",function(){return E(s),D(r.sortTableColumn("threem"))}),w(363,"3M%"),_(),m(364,"th",126),j("click",function(){return E(s),D(r.sortTableColumn("fiftytwow"))}),w(365,"52W H%"),_(),m(366,"th",126),j("click",function(){return E(s),D(r.sortTableColumn("avgp"))}),w(367,"Avg%"),_(),m(368,"th",126),j("click",function(){return E(s),D(r.sortTableColumn("support"))}),w(369,"Support"),_(),m(370,"th",126),j("click",function(){return E(s),D(r.sortTableColumn("resistance"))}),w(371,"Resistance"),_(),m(372,"th",126),j("click",function(){return E(s),D(r.sortTableColumn("buyvalue"))}),w(373,"BuyValue"),_()()(),m(374,"tbody"),te(375,pie,23,54,"tr",4),_()(),m(376,"button",10),j("click",function(){return E(s),D(r.fetchStocks())}),w(377,"Fetch Stocks data"),_(),m(378,"button",10),j("click",function(){return E(s),D(r.loadHoldings())}),w(379,"Load"),_(),m(380,"button",10),j("click",function(){return E(s),D(r.backtestStocks())}),w(381,"Backtest"),_(),m(382,"button",10),j("click",function(){return E(s),D(r.exportBacktest())}),w(383,"Export Backtest"),_()()()()(),Ze(384,"router-outlet")}i&2&&(v(2),V("ngForOf",r.alerts),v(2),W("ngModel",r.baby_name),v(),W("ngModel",r.baby_surname),v(2),Q(r.babyNameNumber),v(19),W("ngModel",r.ws_vendor),v(4),W("ngModel",r.ws_vendor),v(7),V("ngIf",r.ws_vendor==="zerodha"),v(),V("ngIf",r.ws_vendor==="aliceblue"),v(5),Q(r.getMastersStatus()),v(),V("ngIf",!r.access_token),v(2),V("ngIf",r.isSocketConnected()),v(),V("ngIf",!r.isSocketConnected()),v(),V("ngIf",r.isSocketConnected()),v(4),W("ngModel",r.auth_acc),v(),W("ngModel",r.auth_acc_1),v(2),W("ngModel",r.auth_acc),v(),W("ngModel",r.auth_acc_2),v(10),Q(r.getInstruLTP("NIFTY50")),v(8),Q(r.getInstruLTP("BANKNIFTY")),v(8),Q(r.getInstruLTP("FINNIFTY")),v(2),W("ngModel",r.log_ws_feed),v(5),W("ngModel",r.longTermExpiryExport),v(2),ci("Bees ratio: ",r.getBeesRatio()," : ",r.getInstruLTP("NIFTYBEES"),""),v(13),ci("Positions last update: ",r.lastPositionsUpdateTime," | Orders last update: ",r.lastOrdersUpdateTime,""),v(10),W("ngModel",r.hide_positions),v(4),W("ngModel",r.hide_exited_positions),v(3),V("disabled",r.disable_order_buttons),v(15),V("ngIf",!r.hide_positions),v(7),J("\xA0 (",r.completeOrders,")"),v(5),W("ngModel",r.hide_orders),v(4),W("ngModel",r.orders_update),v(4),W("ngModel",r.latest_ten),v(31),V("ngIf",!r.hide_orders),v(),V("ngIf",!1),v(4),W("ngModel",r.oc_instru),v(13),W("ngModel",r.qty_default),v(7),W("ngModel",r.oc_year),v(5),W("ngModel",r.oc_month),v(5),W("ngModel",r.oc_date),v(7),W("ngModel",r.oc_range_higher),v(5),W("ngModel",r.oc_range_lower),v(5),W("ngModel",r.oc_range_multiple),v(8),W("ngModel",r.show_greeks),v(4),W("ngModel",r.qty_strategy_pts),v(),W("ngModel",r.diff_strategy_pts),v(6),yu("Profit: ",r.maxProfit,", Loss: ",r.maxLoss,", Ratio: ",r.profitLossRatio,""),v(14),V("ngIf",r.show_greeks),v(7),V("ngIf",r.show_greeks),v(6),V("ngForOf",r.oc_strikes),v(12),W("ngModel",r.historical_append),v(4),W("ngModel",r.zerodha_auth),v(4),W("ngModel",r.zerodha_from_date),v(4),W("ngModel",r.zerodha_to_date),v(4),W("ngModel",r.zerodha_expiry_date),v(3),W("ngModel",r.historical_instru),v(10),W("ngModel",r.historical_date),v(4),W("ngModel",r.historical_upper),v(4),W("ngModel",r.historical_lower),v(14),yu("Portfolio return: ",r.portfolio_return,"% Total inv.: ",r.total_inv," Current val.: ",r.current_val,""),v(27),V("ngForOf",r.holdings))},dependencies:[Yu,qN,BN,x5,k5,rc,Eg,Dg,Hs,ea,Qo,ic,Bd,nc,Qv,Jo,Ds,To,Es,Io],styles:[`[_nghost-%COMP%], input[_ngcontent-%COMP%], .input-group-text[_ngcontent-%COMP%], select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-size:12px!important}button[_ngcontent-%COMP%]{margin-top:-4px}.greeksOC[_ngcontent-%COMP%]{display:block}.alertMessage[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0;z-index:999}.stockHolding[_ngcontent-%COMP%]{color:#00f}.green[_ngcontent-%COMP%]{color:green}.red[_ngcontent-%COMP%]{color:tomato}.blue[_ngcontent-%COMP%]{color:#00f}.bold-higher[_ngcontent-%COMP%]{font-weight:700;font-size:12px!important}.historical_label[_ngcontent-%COMP%]{margin-bottom:0!important}.algo-suggestions-main[_ngcontent-%COMP%]{position:sticky;top:0;z-index:999}.suggest-positions[_ngcontent-%COMP%]{border:1px solid #b5b5b5;padding:5px;border-radius:5px;margin-right:15px;font-weight:700}table[_ngcontent-%COMP%]{background-color:#fff;border:2px solid #dee2e6}.ocStrategyStrikeQty[_ngcontent-%COMP%]{font-size:.6rem;color:#000}.oc-strike[_ngcontent-%COMP%]{background-color:#e9ecef;width:60px}.oc-strike-spot[_ngcontent-%COMP%]{width:60px;margin:0 auto}.oc-col-actions[_ngcontent-%COMP%]{width:19rem}.oc-col[_ngcontent-%COMP%]{width:5rem}.lastRequestStatus[_ngcontent-%COMP%]{margin-top:10px}.main-content[_ngcontent-%COMP%]{padding:10px;background-color:#f8f9fa}.flex-container[_ngcontent-%COMP%]{margin-top:10px;display:flex}.positions_div[_ngcontent-%COMP%]{flex:1;margin-right:20px}.orderbook_div[_ngcontent-%COMP%]{flex:2}.pos-input[_ngcontent-%COMP%]{width:60px;display:inline-block;margin-right:5px}.refresh-btn[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:5px}.table-title[_ngcontent-%COMP%]{margin-bottom:5px}.new-input[_ngcontent-%COMP%]{margin-top:5px;margin-right:5px;width:120px;display:inline-block}.new-input-prepend[_ngcontent-%COMP%]{margin-top:5px;margin-right:5px;width:150px;display:inline-flex}.new-input-prepend-expiry[_ngcontent-%COMP%]{margin-top:5px;margin-right:5px;width:120px;display:inline-flex}.new-input-prepend-oc[_ngcontent-%COMP%]{margin-top:5px;margin-right:5px;width:130px;display:inline-flex}.new-input-btn[_ngcontent-%COMP%]{margin-right:5px;margin-top:5px}.confirmation-check[_ngcontent-%COMP%]{margin-top:15px}.new-order-div[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;border-radius:5px;background-color:#fff}.ocStrikeStrategyCE[_ngcontent-%COMP%]{background-color:#ccffc9!important}.ocStrikeStrategyPE[_ngcontent-%COMP%]{background-color:#ffdede!important}.hidePositionRow[_ngcontent-%COMP%]{display:none}
/*# sourceMappingURL=app.component-O67XIV4R.css.map */`]})}return n})();r1(R5,oP).catch(n=>console.error(n));
//# sourceMappingURL=main-WT6QY542.js.map
