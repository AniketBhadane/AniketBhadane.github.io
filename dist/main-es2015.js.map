{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./node_modules/moment/locale sync ^\\.\\/.*$","./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/app.service.ts","./src/app/chart/chart.component.ts","./src/app/chart/chart.component.html","./src/app/chart/chart.module.ts","./src/app/chart/chart.service.ts","./src/app/common/aliceblue-parser.service.ts","./src/app/common/aliceblue.service.ts","./src/app/common/angel.service.ts","./src/app/common/angelwebsocket.service.ts","./src/app/common/application.constant.ts","./src/app/common/fyers.service.ts","./src/app/common/map.service.ts","./src/app/common/models.ts","./src/app/common/websocket.service.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,wE;;;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","var map = {\n\t\"./af\": \"./node_modules/moment/locale/af.js\",\n\t\"./af.js\": \"./node_modules/moment/locale/af.js\",\n\t\"./ar\": \"./node_modules/moment/locale/ar.js\",\n\t\"./ar-dz\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-dz.js\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-kw\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-kw.js\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-ly\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ly.js\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ma\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-ma.js\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-sa\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-sa.js\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-tn\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar-tn.js\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar.js\": \"./node_modules/moment/locale/ar.js\",\n\t\"./az\": \"./node_modules/moment/locale/az.js\",\n\t\"./az.js\": \"./node_modules/moment/locale/az.js\",\n\t\"./be\": \"./node_modules/moment/locale/be.js\",\n\t\"./be.js\": \"./node_modules/moment/locale/be.js\",\n\t\"./bg\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bg.js\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bm\": \"./node_modules/moment/locale/bm.js\",\n\t\"./bm.js\": \"./node_modules/moment/locale/bm.js\",\n\t\"./bn\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bn-bd\": \"./node_modules/moment/locale/bn-bd.js\",\n\t\"./bn-bd.js\": \"./node_modules/moment/locale/bn-bd.js\",\n\t\"./bn.js\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bo\": \"./node_modules/moment/locale/bo.js\",\n\t\"./bo.js\": \"./node_modules/moment/locale/bo.js\",\n\t\"./br\": \"./node_modules/moment/locale/br.js\",\n\t\"./br.js\": \"./node_modules/moment/locale/br.js\",\n\t\"./bs\": \"./node_modules/moment/locale/bs.js\",\n\t\"./bs.js\": \"./node_modules/moment/locale/bs.js\",\n\t\"./ca\": \"./node_modules/moment/locale/ca.js\",\n\t\"./ca.js\": \"./node_modules/moment/locale/ca.js\",\n\t\"./cs\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cs.js\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cv\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cv.js\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cy\": \"./node_modules/moment/locale/cy.js\",\n\t\"./cy.js\": \"./node_modules/moment/locale/cy.js\",\n\t\"./da\": \"./node_modules/moment/locale/da.js\",\n\t\"./da.js\": \"./node_modules/moment/locale/da.js\",\n\t\"./de\": \"./node_modules/moment/locale/de.js\",\n\t\"./de-at\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-at.js\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-ch\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de-ch.js\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de.js\": \"./node_modules/moment/locale/de.js\",\n\t\"./dv\": \"./node_modules/moment/locale/dv.js\",\n\t\"./dv.js\": \"./node_modules/moment/locale/dv.js\",\n\t\"./el\": \"./node_modules/moment/locale/el.js\",\n\t\"./el.js\": \"./node_modules/moment/locale/el.js\",\n\t\"./en-au\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-au.js\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-ca\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-ca.js\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-gb\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-gb.js\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-ie\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-ie.js\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-il\": \"./node_modules/moment/locale/en-il.js\",\n\t\"./en-il.js\": \"./node_modules/moment/locale/en-il.js\",\n\t\"./en-in\": \"./node_modules/moment/locale/en-in.js\",\n\t\"./en-in.js\": \"./node_modules/moment/locale/en-in.js\",\n\t\"./en-nz\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./en-nz.js\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./en-sg\": \"./node_modules/moment/locale/en-sg.js\",\n\t\"./en-sg.js\": \"./node_modules/moment/locale/en-sg.js\",\n\t\"./eo\": \"./node_modules/moment/locale/eo.js\",\n\t\"./eo.js\": \"./node_modules/moment/locale/eo.js\",\n\t\"./es\": \"./node_modules/moment/locale/es.js\",\n\t\"./es-do\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-do.js\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-mx\": \"./node_modules/moment/locale/es-mx.js\",\n\t\"./es-mx.js\": \"./node_modules/moment/locale/es-mx.js\",\n\t\"./es-us\": \"./node_modules/moment/locale/es-us.js\",\n\t\"./es-us.js\": \"./node_modules/moment/locale/es-us.js\",\n\t\"./es.js\": \"./node_modules/moment/locale/es.js\",\n\t\"./et\": \"./node_modules/moment/locale/et.js\",\n\t\"./et.js\": \"./node_modules/moment/locale/et.js\",\n\t\"./eu\": \"./node_modules/moment/locale/eu.js\",\n\t\"./eu.js\": \"./node_modules/moment/locale/eu.js\",\n\t\"./fa\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fa.js\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fi\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fi.js\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fil\": \"./node_modules/moment/locale/fil.js\",\n\t\"./fil.js\": \"./node_modules/moment/locale/fil.js\",\n\t\"./fo\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fo.js\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fr\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fr-ca\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ca.js\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ch\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr-ch.js\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr.js\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fy\": \"./node_modules/moment/locale/fy.js\",\n\t\"./fy.js\": \"./node_modules/moment/locale/fy.js\",\n\t\"./ga\": \"./node_modules/moment/locale/ga.js\",\n\t\"./ga.js\": \"./node_modules/moment/locale/ga.js\",\n\t\"./gd\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gd.js\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gl\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gl.js\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gom-deva\": \"./node_modules/moment/locale/gom-deva.js\",\n\t\"./gom-deva.js\": \"./node_modules/moment/locale/gom-deva.js\",\n\t\"./gom-latn\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gom-latn.js\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gu\": \"./node_modules/moment/locale/gu.js\",\n\t\"./gu.js\": \"./node_modules/moment/locale/gu.js\",\n\t\"./he\": \"./node_modules/moment/locale/he.js\",\n\t\"./he.js\": \"./node_modules/moment/locale/he.js\",\n\t\"./hi\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hi.js\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hr\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hr.js\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hu\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hu.js\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hy-am\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./hy-am.js\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./id\": \"./node_modules/moment/locale/id.js\",\n\t\"./id.js\": \"./node_modules/moment/locale/id.js\",\n\t\"./is\": \"./node_modules/moment/locale/is.js\",\n\t\"./is.js\": \"./node_modules/moment/locale/is.js\",\n\t\"./it\": \"./node_modules/moment/locale/it.js\",\n\t\"./it-ch\": \"./node_modules/moment/locale/it-ch.js\",\n\t\"./it-ch.js\": \"./node_modules/moment/locale/it-ch.js\",\n\t\"./it.js\": \"./node_modules/moment/locale/it.js\",\n\t\"./ja\": \"./node_modules/moment/locale/ja.js\",\n\t\"./ja.js\": \"./node_modules/moment/locale/ja.js\",\n\t\"./jv\": \"./node_modules/moment/locale/jv.js\",\n\t\"./jv.js\": \"./node_modules/moment/locale/jv.js\",\n\t\"./ka\": \"./node_modules/moment/locale/ka.js\",\n\t\"./ka.js\": \"./node_modules/moment/locale/ka.js\",\n\t\"./kk\": \"./node_modules/moment/locale/kk.js\",\n\t\"./kk.js\": \"./node_modules/moment/locale/kk.js\",\n\t\"./km\": \"./node_modules/moment/locale/km.js\",\n\t\"./km.js\": \"./node_modules/moment/locale/km.js\",\n\t\"./kn\": \"./node_modules/moment/locale/kn.js\",\n\t\"./kn.js\": \"./node_modules/moment/locale/kn.js\",\n\t\"./ko\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ko.js\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ku\": \"./node_modules/moment/locale/ku.js\",\n\t\"./ku.js\": \"./node_modules/moment/locale/ku.js\",\n\t\"./ky\": \"./node_modules/moment/locale/ky.js\",\n\t\"./ky.js\": \"./node_modules/moment/locale/ky.js\",\n\t\"./lb\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lb.js\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lo\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lo.js\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lt\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lt.js\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lv\": \"./node_modules/moment/locale/lv.js\",\n\t\"./lv.js\": \"./node_modules/moment/locale/lv.js\",\n\t\"./me\": \"./node_modules/moment/locale/me.js\",\n\t\"./me.js\": \"./node_modules/moment/locale/me.js\",\n\t\"./mi\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mi.js\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mk\": \"./node_modules/moment/locale/mk.js\",\n\t\"./mk.js\": \"./node_modules/moment/locale/mk.js\",\n\t\"./ml\": \"./node_modules/moment/locale/ml.js\",\n\t\"./ml.js\": \"./node_modules/moment/locale/ml.js\",\n\t\"./mn\": \"./node_modules/moment/locale/mn.js\",\n\t\"./mn.js\": \"./node_modules/moment/locale/mn.js\",\n\t\"./mr\": \"./node_modules/moment/locale/mr.js\",\n\t\"./mr.js\": \"./node_modules/moment/locale/mr.js\",\n\t\"./ms\": \"./node_modules/moment/locale/ms.js\",\n\t\"./ms-my\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms-my.js\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms.js\": \"./node_modules/moment/locale/ms.js\",\n\t\"./mt\": \"./node_modules/moment/locale/mt.js\",\n\t\"./mt.js\": \"./node_modules/moment/locale/mt.js\",\n\t\"./my\": \"./node_modules/moment/locale/my.js\",\n\t\"./my.js\": \"./node_modules/moment/locale/my.js\",\n\t\"./nb\": \"./node_modules/moment/locale/nb.js\",\n\t\"./nb.js\": \"./node_modules/moment/locale/nb.js\",\n\t\"./ne\": \"./node_modules/moment/locale/ne.js\",\n\t\"./ne.js\": \"./node_modules/moment/locale/ne.js\",\n\t\"./nl\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nl-be\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl-be.js\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl.js\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nn\": \"./node_modules/moment/locale/nn.js\",\n\t\"./nn.js\": \"./node_modules/moment/locale/nn.js\",\n\t\"./oc-lnc\": \"./node_modules/moment/locale/oc-lnc.js\",\n\t\"./oc-lnc.js\": \"./node_modules/moment/locale/oc-lnc.js\",\n\t\"./pa-in\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pa-in.js\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pl\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pl.js\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pt\": \"./node_modules/moment/locale/pt.js\",\n\t\"./pt-br\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt-br.js\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt.js\": \"./node_modules/moment/locale/pt.js\",\n\t\"./ro\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ro.js\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ru\": \"./node_modules/moment/locale/ru.js\",\n\t\"./ru.js\": \"./node_modules/moment/locale/ru.js\",\n\t\"./sd\": \"./node_modules/moment/locale/sd.js\",\n\t\"./sd.js\": \"./node_modules/moment/locale/sd.js\",\n\t\"./se\": \"./node_modules/moment/locale/se.js\",\n\t\"./se.js\": \"./node_modules/moment/locale/se.js\",\n\t\"./si\": \"./node_modules/moment/locale/si.js\",\n\t\"./si.js\": \"./node_modules/moment/locale/si.js\",\n\t\"./sk\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sk.js\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sl\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sl.js\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sq\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sq.js\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sr\": \"./node_modules/moment/locale/sr.js\",\n\t\"./sr-cyrl\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr-cyrl.js\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr.js\": \"./node_modules/moment/locale/sr.js\",\n\t\"./ss\": \"./node_modules/moment/locale/ss.js\",\n\t\"./ss.js\": \"./node_modules/moment/locale/ss.js\",\n\t\"./sv\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sv.js\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sw\": \"./node_modules/moment/locale/sw.js\",\n\t\"./sw.js\": \"./node_modules/moment/locale/sw.js\",\n\t\"./ta\": \"./node_modules/moment/locale/ta.js\",\n\t\"./ta.js\": \"./node_modules/moment/locale/ta.js\",\n\t\"./te\": \"./node_modules/moment/locale/te.js\",\n\t\"./te.js\": \"./node_modules/moment/locale/te.js\",\n\t\"./tet\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tet.js\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tg\": \"./node_modules/moment/locale/tg.js\",\n\t\"./tg.js\": \"./node_modules/moment/locale/tg.js\",\n\t\"./th\": \"./node_modules/moment/locale/th.js\",\n\t\"./th.js\": \"./node_modules/moment/locale/th.js\",\n\t\"./tk\": \"./node_modules/moment/locale/tk.js\",\n\t\"./tk.js\": \"./node_modules/moment/locale/tk.js\",\n\t\"./tl-ph\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tl-ph.js\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tlh\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tlh.js\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tr\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tr.js\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tzl\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzl.js\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzm\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./tzm-latn\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm-latn.js\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm.js\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./ug-cn\": \"./node_modules/moment/locale/ug-cn.js\",\n\t\"./ug-cn.js\": \"./node_modules/moment/locale/ug-cn.js\",\n\t\"./uk\": \"./node_modules/moment/locale/uk.js\",\n\t\"./uk.js\": \"./node_modules/moment/locale/uk.js\",\n\t\"./ur\": \"./node_modules/moment/locale/ur.js\",\n\t\"./ur.js\": \"./node_modules/moment/locale/ur.js\",\n\t\"./uz\": \"./node_modules/moment/locale/uz.js\",\n\t\"./uz-latn\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz-latn.js\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz.js\": \"./node_modules/moment/locale/uz.js\",\n\t\"./vi\": \"./node_modules/moment/locale/vi.js\",\n\t\"./vi.js\": \"./node_modules/moment/locale/vi.js\",\n\t\"./x-pseudo\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./x-pseudo.js\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./yo\": \"./node_modules/moment/locale/yo.js\",\n\t\"./yo.js\": \"./node_modules/moment/locale/yo.js\",\n\t\"./zh-cn\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-cn.js\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-hk\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-hk.js\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-mo\": \"./node_modules/moment/locale/zh-mo.js\",\n\t\"./zh-mo.js\": \"./node_modules/moment/locale/zh-mo.js\",\n\t\"./zh-tw\": \"./node_modules/moment/locale/zh-tw.js\",\n\t\"./zh-tw.js\": \"./node_modules/moment/locale/zh-tw.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/moment/locale sync recursive ^\\\\.\\\\/.*$\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\n\nconst routes: Routes = [];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { AfterViewInit, ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { AppService } from './app.service';\nimport { AppConstants } from './common/application.constant';\nimport { Position, Order, Instrument, PositionTypeForPayOff } from './common/models';\nimport { MapService } from './common/map.service';\nimport { WebsocketService } from './common/websocket.service';\nimport { ChartService } from './chart/chart.service';\nimport { AngelService } from './common/angel.service';\nimport { AngelWebsocketService } from './common/angelwebsocket.service';\n\n/*\nabMastersContract map is maintained for each \"code\"\nto send subscription over websocket, code for the symbol is required, that is found from masters. symbol is searched in masters based on expiry, instrument, strike, type.\ndata from websocket is received for this code whose information is then fetched from masters\n\nreceived from fyers:\nNSE:NIFTY209115555CE\nNSE:NIFTY20SEP5555CE\nNSE:NIFTY20N015555CE\n\nsymbol:\nUSDINR 19 JUN20 77.0 CE\nNIFTY 13 AUG20 9000.0 PE\nNIFTY JUN FUT\nNIFTY JUN 9000 PE\n\nMaps:\nNIFTY2061810000CE NIFTY20JUN10000CE NIFTY20N1810000CE\n\nFuture Position will not get realtime data. Will have to update findStrikeInMasters when sending subscription. And also update updateMaps.\nFor usdinr future, update its month in constants\n*/\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n})\nexport class AppComponent implements OnInit, AfterViewInit  {\n  title = 'Trades';\n  access_token = null;\n  user_id = null;\n  auth_code = null;\n  lastRequestStatus = null;\n  positions: Position[] = [];\n  orders: Order[] = [];\n  hide_positions = true;\n  hide_orders = true;\n  disable_order_buttons = true;\n  lastPositionsUpdateTime: any = '';\n  lastOrdersUpdateTime: any = '';\n  positionsPnL = 0;\n  stranglePositions = [];\n  debitSpreadPositions = [];\n  newexpiry = 'NIFTY20618';\n  newstrike = 10000;\n  newoption = 'CE';\n  newqty = 50;\n  newblock = 0;\n  newlimit = 0;\n  newstop = 0;\n  newProductType = 'INTRADAY';\n  newOrderType = 2;\n  nifty_oc_check = true;\n  usdinr_oc_check = false;\n  oc_instru = 'NIFTY';\n  oc_year = 2021;\n  oc_month = 6;\n  oc_date = 3;\n  is_monthly_expiry = false;\n  checked_instrument = 'USDINR';\n  oc_range_higher = 16000; // 24200\n  oc_range_lower = 14000; // 21000\n  oc_range_multiple = 50;\n  oc_strikes = [];\n  oc_product_type = 'MARGIN';\n  ws_vendor = 'aliceblue';\n  totalBalance;\n  availableBalance;\n  utilizedBalance;\n  mean = 0;\n  variance = 1;\n  ws_access_token = 'A8E8eGyqMug7VOXnvx2dPjf9pWbf8KKgfn9RQy9EVyA.KqVXmuGCRCQ2wEf95iFEtVjQxs0_LoL9FyZ86bPJlFg';\n  ocSpotStrike;\n  strategyPnL = 0;\n  strategyPointsProfit = 0;\n  suggestions = [];\n  adjust_sugg = [];\n  combined_SL = 0;\n  combined_premium = 0;\n  qty_default = 175;\n  /* monthsMapping = {\n    'JAN' : '1',\n    'FEB' : '2',\n    'MAR' : '3',\n    'APR' : '4',\n    'MAY' : '5',\n    'JUN' : '6',\n    'JUL' : '7',\n    'AUG' : '8',\n    'SEP' : '9',\n    'OCT' : '10',\n    'NOV' : '11',\n    'DEC' : '12'\n  }; */\n\n  constructor(\n    private route: ActivatedRoute,\n    private appService: AppService,\n    private mapService: MapService,\n    private websocketService: WebsocketService,\n    private chartService: ChartService,\n    private angelService: AngelService,\n    private angelWS: AngelWebsocketService\n    /* private cdr: ChangeDetectorRef */) {\n    this.route.queryParams.subscribe(params => {\n      console.log('params', params);\n      if (params && params.access_token) {\n        this.access_token = params.access_token;\n        // console.log('access_token', this.access_token);\n        \n       /*  this.getFunds();\n        this.getPositions();\n        this.getOrders(); */\n\n        // this.getPayoff();\n        \n        // this.appService.getMastersContract();\n\n        // this.angelLogin();\n      }\n      if (params && params.user_id) {\n        this.user_id = params.user_id;\n      }\n    });\n\n    this.appService.requestStatusEvent$.subscribe(res => {\n      console.log('app requestStatusEvent: ', res);\n      this.lastRequestStatus = res;\n    });\n\n    this.websocketService.websocketEvent$.subscribe(res => {\n      console.log('app websocketEvent: ', res);\n      if (res === 'connected') {\n        this.subscribePositionsFeed();\n      }\n    });\n\n  }\n\n  ngOnInit() {\n\n    // Setting dummy values for indices for Payoff to work even if websocket is not working\n    this.mapService.setLtp('NIFTY50', 18000);\n    this.mapService.setLtp('BANKNIFTY', 40000);\n\n    if (window.location.href.includes('localhost')) {\n      AppConstants.isProduction = false;\n    }\n    console.log(window.location.href, AppConstants.isProduction);\n\n    let refresh_interval = setInterval(() => {\n      this.updateSpotStrike();\n    }, 5000);\n\n    let autoSuggest_interval = setInterval(() => {\n      // this.autoSuggest();\n    }, 2000);\n    this.chartService.strategyPnLEvent$.subscribe(res => {\n      // console.log('received:', res);\n      this.strategyPnL = res[0];\n      this.strategyPointsProfit = res[1];\n    });\n\n    this.chartService.optionChainEvent$.subscribe(res => {\n      console.log('received oc:', res);\n      let instru = res[0];\n      let expiryDate = res[1];\n      this.processOCRequest(instru, expiryDate);\n    });\n  }\n\n  ngAfterViewInit() {\n    setTimeout(() => {\n      \n    });\n    /* this.cdr.detectChanges(); */\n\n  }\n\n  simulateOptionChain() {\n\n  }\n\n  processOCRequest(instru, expiryDate) {\n\n    this.oc_instru = instru;\n\n    let expiry = new Date(expiryDate);\n    this.oc_year = expiry.getFullYear();\n    this.oc_month = expiry.getMonth() + 1;\n    this.oc_date = expiry.getDate();\n\n    if (this.oc_instru === 'NIFTY') {\n      this.oc_range_multiple = 50;\n      let spot = this.getLtp('NIFTY50');\n      let spotStrike = (Math.round(spot / this.oc_range_multiple) * this.oc_range_multiple);\n      this.oc_range_higher = spotStrike + 400;\n      this.oc_range_lower = spotStrike - 400;\n    } else if (this.oc_instru === 'BANKNIFTY') {\n      this.oc_range_multiple = 100;\n      let spot = this.getLtp('BANKNIFTY');\n      let spotStrike = (Math.round(spot / this.oc_range_multiple) * this.oc_range_multiple);\n      this.oc_range_higher = spotStrike + 1200;\n      this.oc_range_lower = spotStrike - 1200;\n    } else if (this.oc_instru === 'USDINR') {\n      this.oc_range_multiple = 0.25;\n      let spot = this.getLtp('USDINR_FUT');\n      let spotStrike = (Math.round(spot / this.oc_range_multiple) * this.oc_range_multiple);\n      this.oc_range_higher = spotStrike + 2;\n      this.oc_range_lower = spotStrike - 2;\n    }\n\n    this.updateOCRange();\n  }\n\n  getStrategyPnL() {\n    return this.strategyPnL;\n  }\n\n  getIV(symbol, strike, type) {\n    let date_expiry = new Date(this.oc_year, this.oc_month - 1, this.oc_date);\n    if (this.oc_instru === 'USDINR') {\n      date_expiry.setHours(12, 30, 0);\n    } else {\n      date_expiry.setHours(15, 30, 0);\n    }\n\n    let underlying = 'NIFTY50';\n    if (this.oc_instru === 'BANKNIFTY') {\n      underlying = 'BANKNIFTY';\n    } else if (this.oc_instru === 'USDINR') {\n      underlying = 'USDINR_FUT';\n    }\n    let spot = this.getLtp(underlying);\n\n    let mkt_price = this.getLtp(symbol + type);\n\n    let typet0 = null;\n    if (type === 'CE') {\n      typet0 = PositionTypeForPayOff.CE;\n    }\n    if (type === 'PE') {\n      typet0 = PositionTypeForPayOff.PE;\n    }\n\n    let iv = this.appService.calculateIV(this.oc_instru, spot, strike, AppConstants.INTEREST_RATE, date_expiry, typet0, mkt_price);\n\n    return iv;\n  }\n\n  getDelta(symbol, strike, type) {\n\n    let ltp = this.getLtp(symbol + type);\n    let expiry = new Date(this.oc_year, this.oc_month - 1, this.oc_date);\n    let delta = this.appService.getDelta(this.oc_instru, strike, type, expiry, ltp);\n    return delta;\n  }\n\n  getUSDINRMonth() {\n    return AppConstants.USDINR_FUT_MONTH;\n  }\n\n  checkNifty() {\n    if (this.nifty_oc_check) {\n      this.usdinr_oc_check = false;\n      this.checked_instrument = 'NIFTY';\n    } else {\n      this.usdinr_oc_check = true;\n      this.checked_instrument = 'USDINR';\n    }\n  }\n\n  checkUSDINR() {\n    if (this.usdinr_oc_check) {\n      this.nifty_oc_check = false;\n      this.checked_instrument = 'USDINR';\n    } else {\n      this.nifty_oc_check = true;\n      this.checked_instrument = 'NIFTY';\n    }\n  }\n\n  login() {\n    this.auth();\n  }\n\n  auth() {\n    this.appService.auth().subscribe((res: any) => {\n      console.log('app auth', res);\n      if (res) {\n        this.appService.requestStatusEvent$.next(res);\n        if (res.authorization_code) {\n          this.auth_code = res.authorization_code;\n          this.generateAccessToken();\n        }\n      }\n    },\n    error => {\n      console.log('app auth error', error);\n      this.appService.requestStatusEvent$.next(error.error.message +  ', ' + error.message);\n    });\n  }\n\n  generateAccessToken() {\n    if (this.auth_code) {\n      let tokenUrl = this.appService.getTokenUrl(this.auth_code, AppConstants.fyersAppId);\n      console.log('tokenUrl', tokenUrl);\n      // window.location.href = tokenUrl;\n      let wnd = window.open(tokenUrl/* , '_self' */);\n    }\n  }\n\n  getFunds() {\n    console.log('app getting Funds');\n    this.appService.getFunds(this.access_token).subscribe((res: any) => {\n      console.log('app getFunds', res);\n      if (res) {\n        this.totalBalance = res.fund_limit[8].equityAmount.toLocaleString();\n        this.availableBalance = res.fund_limit[9].equityAmount.toLocaleString();\n        this.utilizedBalance = res.fund_limit[6].equityAmount.toLocaleString();\n      }\n    },\n    error => {\n      console.log('app getPositions error', error);\n      this.appService.requestStatusEvent$.next(error.error.message +  ', ' + error.message);\n    });\n  }\n\n  getPositions() {\n    console.log('app getting Positions');\n    this.appService.getPositions(this.access_token).subscribe((res: any) => {\n      console.log('app getPositions', res);\n      if (res) {\n        this.lastPositionsUpdateTime = new Date().toLocaleTimeString();\n        this.appService.requestStatusEvent$.next(res);\n        this.mapPositions(res);\n      }\n    },\n    error => {\n      console.log('app getPositions error', error);\n      this.appService.requestStatusEvent$.next(error.error.message +  ', ' + error.message);\n    });\n  }\n\n  includePosPnLInSum1(pos: Position) {\n    pos.includeInSum1 = !pos.includeInSum1;\n  }\n  includePosPnLInSum2(pos: Position) {\n    pos.includeInSum2 = !pos.includeInSum2;\n  }\n  includePosPnLInSum3(pos: Position) {\n    pos.includeInSum3 = !pos.includeInSum3;\n  }\n  includePosPnLInSum4(pos: Position) {\n    pos.includeInSum4 = !pos.includeInSum4;\n  }\n\n  getPositionsPnLSum(num: number) {\n    let sum = 0;\n    if (this.positions) {\n      this.positions.forEach(pos => {\n        if (num === 1 && pos.includeInSum1) {\n          sum += pos.pnl;\n        }\n        if (num === 2 && pos.includeInSum2) {\n          sum += pos.pnl;\n        }\n        if (num === 3 && pos.includeInSum3) {\n          sum += pos.pnl;\n        }\n        if (num === 4 && pos.includeInSum4) {\n          sum += pos.pnl;\n        }\n      });\n      sum = Math.round((sum + 0.00001) * 100) / 100; // round to 2 decimal places\n      this.positionsPnL = sum;\n    }\n    return sum;\n  }\n\n  mapPositions(res) {\n    this.positions = [];\n    if (AppConstants.RestMode === 'fyers') {\n      if (res.netPositions instanceof Array) {\n        res.netPositions.forEach(pos => {\n          let p = new Position();\n          p.id = pos.id;\n          p.scrip = pos.symbol;\n          p.netQty = pos.netQty;\n          p.buyAvg = pos.buyAvg;\n          p.sellAvg = pos.sellAvg;\n          p.type = pos.productType;\n          p.realizedProfit = pos.realizedProfit;\n          p.pnl = pos.pl;\n          this.positions.push(p);\n        });\n        this.subscribePositionsFeed();\n      }\n    }\n  }\n\n  subscribePositionsFeed() {\n    let sub = [];\n    this.positions.forEach(pos => {\n      let symbol = pos.scrip;\n      symbol = symbol.replace('NSE:', '');\n      let instru = '';\n      if (symbol.startsWith('NIFTY')) {\n        instru = 'NIFTY';\n        symbol = symbol.replace('NIFTY', '');\n      }\n      if (symbol.startsWith('BANKNIFTY')) {\n        instru = 'BANKNIFTY';\n        symbol = symbol.replace('BANKNIFTY', '');\n      }\n      if (symbol.startsWith('USDINR')) {\n        instru = 'USDINR';\n        symbol = symbol.replace('USDINR', '');\n      }\n      let type = '';\n      if (symbol.includes('CE')) {\n        type = 'CE';\n      }\n      if (symbol.includes('PE')) {\n        type = 'PE';\n      }\n      console.log('subscribePositionsFeed symbol: ' + symbol);\n      symbol = symbol.slice(0, -2); // remove CE PE at end\n      let strike = symbol.substring(5);\n      let expiry = symbol.substring(0, 5); // 20N08 20JUN 20911\n      // 20O0812000CE 2091012000CE\n      let expiryDate = '';\n      if (isNaN(expiry as any)) { // 20N08 20JUN\n\n        if (isNaN(parseInt(expiry[4]))) { // 20JUN // checking whether last character is number or not - 20N08 20JUN\n          if (instru === 'NIFTY' || instru === 'BANKNIFTY') {\n            expiryDate = AppConstants.monthlyExpiryDates[expiry].toDateString();\n          }\n          if (instru === 'USDINR') {\n            expiryDate = AppConstants.monthlyExpiryDatesUSDINR[expiry].toDateString();\n          }\n        } else { // 20N08\n          let year = Number(expiry.substring(0, 2)) + 2000;\n          let month = null;\n          if (expiry[2] === 'O') {\n            month = 9;\n          } else if (expiry[2] === 'N') {\n            month = 10;\n          } else if (expiry[2] === 'D') {\n            month = 11;\n          }\n          let date = Number(expiry.substring(3, 5));\n          console.log('subscribePositionsFeed oct nov dec: ', year, month, date);\n          expiryDate = new Date(year, month, date).toDateString();\n        }\n        // console.log('expiryDate', expiryDate);\n      } else { // 20618\n        let year = Number(expiry.substring(0, 2)) + 2000;\n        let month = Number(expiry.substring(2, 3)) - 1;\n        let date = Number(expiry.substring(3, 5));\n        console.log('subscribePositionsFeed: ', year, month, date);\n        expiryDate = new Date(year, month, date).toDateString();\n      }\n\n      let e1 = new Instrument();\n      e1.expiry = expiryDate;\n      e1.instru = instru;\n      e1.strike = Number(strike);\n      e1.type = type;\n      sub.push(e1);\n      /*\n      let e2 = new Instrument();\n      e2.expiry = expiryDate;\n      e2.instru = instru;\n      e2.strike = Number(strike);\n      e2.type = 'PE';\n      sub.push(e2); */\n    });\n    console.log('positions feed', sub);\n    this.appService.sendSubscriptions(sub);\n\n\n    /* let symbol = pos.scrip;\n    symbol = symbol.replace('NSE:', '');\n    let instru = '';\n    if (symbol.includes('NIFTY')) {\n      instru = 'NIFTY';\n      symbol = symbol.replace('NIFTY', '');\n    }\n    if (symbol.includes('USDINR')) {\n      instru = 'USDINR';\n      symbol = symbol.replace('USDINR', '');\n    }\n    let type = '';\n    if (symbol.includes('CE')) {\n      type = 'CE';\n    }\n    if (symbol.includes('PE')) {\n      type = 'PE';\n    }\n    symbol = symbol.slice(0, -2);\n    let strike = symbol.substring(5);\n    let expiry = symbol.substring(0, 5); */\n    // let alice_symbol = instru + expiry + symbol + type;\n  }\n\n  getMastersStatus() {\n    if (AppConstants.abMastersContract.size) {\n      return 'Masters Contract is available';\n    }\n    return 'Masters Contract not available yet';\n  }\n\n  establishWSVendor() {\n    AppConstants.SocketMode = this.ws_vendor;\n    this.appService.getMastersContract(this.ws_access_token);\n  }\n\n  isSocketConnected() {\n    return this.appService.isSocketConnected();\n  }\n\n  getOrders() {\n    console.log('app getting Orders');\n    this.appService.getOrders(this.access_token).subscribe((res: any) => {\n      console.log('app getOrders', res);\n      if (res) {\n        this.lastOrdersUpdateTime = new Date().toLocaleTimeString();\n        this.appService.requestStatusEvent$.next(res);\n        this.mapOrders(res);\n      }\n    },\n    error => {\n      console.log('app getOrders error', error);\n      this.appService.requestStatusEvent$.next(error.error.message +  ', ' + error.message);\n    });\n  }\n\n  mapOrders(res) {\n    this.orders = [];\n    if (AppConstants.RestMode === 'fyers') {\n      if (res.orderBook instanceof Array) {\n        res.orderBook.forEach(order => {\n          let o = new Order();\n          o.id = order.id;\n          o.scrip = order.symbol;\n          o.qty = order.qty;\n          o.status = order.status;\n          o.message = order.message;\n          o.type = order.type;\n          o.limit = order.limitPrice;\n          o.stop = order.stopPrice;\n          o.tradedPrice = order.tradedPrice;\n          o.side = order.side;\n          o.orderDateTime = order.orderDateTime;\n          this.orders.push(o);\n        });\n      }\n    }\n  }\n\n  getCMP() {\n    return 0.0;\n  }\n\n  getOrderStatus(status: number) {\n    if (status === 1) {\n      return 'Cancelled';\n    } else if (status === 2) {\n      return 'Filled';\n    } else if (status === 3) {\n      return 'Unknown';\n    } else if (status === 4) {\n      return 'Transit';\n    } else if (status === 5) {\n      return 'Rejected';\n    } else if (status === 6) {\n      return 'Pending';\n    }\n  }\n\n  getOrderType(type: number) {\n    if (type === 1) {\n      return 'Limit';\n    } else if (type === 2) {\n      return 'Market';\n    } else if (type === 3) {\n      return 'SL-M';\n    } else if (type === 4) {\n      return 'SL';\n    }\n  }\n\n  newOrder(side: number) {\n    let symbol = 'NSE:' + this.newexpiry + this.newstrike + this.newoption;\n    this.appService.placeOrder(this.access_token, symbol, this.newqty, this.newOrderType, side,\n                                this.newProductType, this.newlimit, this.newstop)\n      .subscribe((res: any) => {\n        console.log('app newOrder', res);\n        this.refreshAll();\n        if (res) {\n          this.appService.requestStatusEvent$.next(res);\n        }\n      },\n      error => {\n        console.log('app newOrder error', error);\n        this.appService.requestStatusEvent$.next(error.error.message +  ', ' + error.message);\n        this.refreshAll();\n      });\n  }\n\n  resetNewOrder() {\n    this.newexpiry = 'NIFTY20618';\n    this.newstrike = 10000;\n    this.newoption = 'CE';\n    this.newqty = 50;\n    this.newblock = 0;\n    this.newOrderType = 2;\n    this.newProductType = 'INTRADAY';\n    this.newlimit = 0;\n    this.newstop = 0;\n  }\n\n  exitSelected() {\n    if (this.positions) {\n      if (confirm('Exit Selected?')) {\n        this.positions.forEach(pos => {\n          if (pos.includeInSum1 || pos.includeInSum2 || pos.includeInSum3 || pos.includeInSum4) {\n            this.exitPosition(pos, true);\n          }\n        });\n      }\n    }\n  }\n\n  exitPosition(pos: Position, isExitSelected = false) {\n    let qty = Number(((document.getElementById('pos-qty-' + pos.id)) as HTMLInputElement).value);\n    /* let limit = ((document.getElementById('pos-limit-' + pos.id)) as HTMLInputElement).value; */\n\n    if (!qty) {\n      qty = Math.abs(pos.netQty);\n    }\n\n    let buysell = 0;\n    if (pos.netQty > 0) {\n      buysell = -1;\n    } else if (pos.netQty < 0) {\n      buysell = 1;\n    }\n\n    let orderType = 2; // MARKET\n    console.log('placing order: ', pos.scrip, qty, orderType, buysell, pos.type, 0);\n    let user_confirm = isExitSelected;\n\n    if (isExitSelected === false) {\n      user_confirm = confirm('Exit ' + qty + ' Qty with ' + (buysell === -1 ? 'Sell order' : 'Buy order') + ' Sure?');\n    }\n\n    if (user_confirm) {\n      this.appService.placeOrder(this.access_token, pos.scrip, qty, orderType, buysell,\n                                  pos.type, 0, 0)\n        .subscribe((res: any) => {\n          console.log('app exitPosition', res);\n          this.refreshAll();\n          if (res) {\n            this.appService.requestStatusEvent$.next(res);\n            this.appService.playAudio('success');\n          }\n        },\n        error => {\n          console.log('app exitPosition error', error);\n          this.appService.requestStatusEvent$.next(error.error.message +  ', ' + error.message);\n          this.refreshAll();\n          this.appService.playAudio('error');\n        });\n    }\n  }\n\n  refreshAll() {\n    this.getFunds();\n    this.getPositions();\n    this.getOrders();\n  }\n\n  addToStrategyBuilder(oc, type) {\n    this.appService.payOffEvent$.next( { symbol: oc.symbol + type, ltp: this.getLtp(oc.symbol + type), qty: this.qty_default } );\n  }\n\n  getQtyOfStrikeInStrategy(strike) { // 73.5CE\n    let curr_positions_trades = AppConstants.curr_positions_trades;\n    if (curr_positions_trades) {\n      for (let i = 0; i < curr_positions_trades.length; i++) {\n        let element = curr_positions_trades[i];\n        /* {\n          qty: 50,\n          scrip: '11150CE',\n          expiry: '01OCT2020',\n          entry: 50,\n          exit: 0,\n        }, */\n        let ocDate = new Date(this.oc_year, this.oc_month - 1, this.oc_date);\n        let strikeExpiry = new Date(element.expiry);\n        if (ocDate.getDate() === strikeExpiry.getDate() && element.scrip === strike && element.exit === 0) {\n          return element.qty;\n        }\n      }\n      return null;\n    }\n  }\n\n  getCostOfStrikeInStrategy(strike) { // 73.5CE\n    let curr_positions_trades = AppConstants.curr_positions_trades;\n    if (curr_positions_trades) {\n      for (let i = 0; i < curr_positions_trades.length; i++) {\n        let element = curr_positions_trades[i];\n        /* {\n          qty: 50,\n          scrip: '11150CE',\n          expiry: '01OCT2020',\n          entry: 50,\n          exit: 0,\n        }, */\n        let ocDate = new Date(this.oc_year, this.oc_month - 1, this.oc_date);\n        let strikeExpiry = new Date(element.expiry);\n        if (ocDate.getDate() === strikeExpiry.getDate() && element.scrip === strike && element.exit === 0) {\n          return element.entry;\n        }\n      }\n      return null;\n    }\n  }\n\n  isStrikeInCurrStrategy(strike) { // 73.5CE\n    let curr_positions_trades = AppConstants.curr_positions_trades;\n    if (curr_positions_trades) {\n      for (let i = 0; i < curr_positions_trades.length; i++) {\n        let element = curr_positions_trades[i];\n        /* {\n          qty: 50,\n          scrip: '11150CE',\n          expiry: '01OCT2020',\n          entry: 50,\n          exit: 0,\n        }, */\n\n        let ocDate = new Date(this.oc_year, this.oc_month - 1, this.oc_date);\n        let strikeExpiry = new Date(element.expiry);\n        if (element.exit === 0 && ocDate.getDate() === strikeExpiry.getDate() && element.scrip === strike) {\n          return true;\n        }\n      }\n      return false;\n    }\n  }\n\n  ocOrder(buysell: number, optionType: string, oc) {\n    let symbol = 'NSE:' + oc.symbol + optionType;\n    let strike = oc.strike;\n    let productType = this.oc_product_type;\n\n    let limit: any;\n    console.log('ocOrder qty: ' + 'oc-qty-' + optionType + '-' + oc.symbol);\n    let qty = Number((document.getElementById('oc-qty-' + optionType + '-' + oc.symbol) as HTMLInputElement).value);\n    limit = (document.getElementById('oc-limit-' + optionType + '-' + oc.symbol) as HTMLInputElement).value;\n    /* let block = (document.getElementById('oc-block-' + optionType + '-' + oc.symbol) as HTMLInputElement).value; */\n\n    let orderType = 2; // MARKET\n    if (limit) {\n      orderType = 1; // LIMIT\n    } else {\n      limit = 0;\n    }\n    console.log('placing order: ', symbol, qty, (orderType === 2 ? 'Market' : 'Limit'), buysell, productType, limit);\n    if (true /* confirm(qty + ' Qty, ' + limit + ' Limit, ' + (orderType === 2 ? 'Market' : 'Limit') + ' order ' + 'Sure?') */) {\n      this.appService.placeOrder(this.access_token, symbol, qty, orderType, buysell,\n                                  productType, limit, 0)\n        .subscribe((res: any) => {\n          console.log('app ocOrder', res);\n          this.refreshAll();\n          if (res) {\n            this.appService.requestStatusEvent$.next(symbol + ' ' + qty + ' ' + (orderType === 2 ? 'Market' : 'Limit') + ' ' + res); \n            // Order submitted successfully. Your Order Ref. No.220091778602\n            this.appService.playAudio('success');\n          }\n        },\n        error => {\n          console.log('app ocOrder error', error);\n          this.appService.requestStatusEvent$.next(error.error.message +  ', ' + error.message);\n          this.refreshAll();\n          this.appService.playAudio('error');\n        });\n    }\n  }\n\n  isAnyOpenPosition() {\n    let curr_positions_trades = AppConstants.curr_positions_trades;\n    if (curr_positions_trades) {\n      for (let i = 0; i < curr_positions_trades.length; i++) {\n        let element = curr_positions_trades[i];\n        /* {\n          qty: 50,\n          scrip: '11150CE',\n          expiry: '01OCT2020',\n          entry: 50,\n          exit: 0,\n        }, */\n\n        if (element.exit === 0) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  autoSuggest() {\n    this.findInitialPositions();\n    this.checkAdjustments();\n  }\n\n  findInitialPositions() {\n    this.suggestions = [];\n    if (!this.isAnyOpenPosition()) {\n      for (let index = this.oc_range_lower; index <= this.oc_range_higher; index += this.oc_range_multiple) {\n        //this.oc_strikes.push({symbol: this.oc_instru + this.getExpiry() + index, strike: index, ltp: 0, delta: 0 }); // symbol: NIFTY2061810000 NIFTY20JUN10000\n        let symbol = this.oc_instru + this.getExpiry() + index;\n        let ltp = this.getLtp(symbol + 'CE');\n        if (ltp >= 16 && ltp <= 28) {\n          let delta = this.getDelta(symbol, index, 'CE');\n          if (delta > 0 && Math.abs(delta) < 1) { // on 0DTE, delta is not calculated correctly\n  \n            //console.log(index, ltp, delta);\n            for (let index1 = this.oc_range_lower; index1 <= this.oc_range_higher; index1 += this.oc_range_multiple) {\n              let symbol1 = this.oc_instru + this.getExpiry() + index1;\n              let delta1 = this.getDelta(symbol1, index1, 'PE');\n  \n              if (Math.abs(delta + delta1) <= 0.025) {\n                let ltp1 = this.getLtp(symbol1 + 'PE');\n                if (ltp1) {\n                  this.suggestions.push({ strikeCE: index, deltaCE: delta, ltpCE: ltp, strikePE: index1, deltaPE: delta1, ltpPE: ltp1 });\n                }\n              }\n            }\n          }\n        }\n      }\n      // console.log(this.suggestions);\n    }\n  }\n\n  checkAdjustments() {\n    let curr_positions_trades = AppConstants.curr_positions_trades;\n    let ceDelta = 0;\n    let cePremium = 0;\n    let ceQty = 0;\n    let peDelta = 0;\n    let pePremium = 0;\n    let peQty = 0;\n    this.adjust_sugg = [];\n    this.combined_premium = 0;\n    if (curr_positions_trades) {\n      for (let i = 0; i < curr_positions_trades.length; i++) {\n        let element = curr_positions_trades[i];\n        /* {\n          qty: 50,\n          scrip: '11150CE',\n          expiry: '01OCT2020',\n          entry: 50,\n          exit: 0,\n        }, */\n\n        let ocDate = new Date(this.oc_year, this.oc_month - 1, this.oc_date);\n        let strikeExpiry = new Date(element.expiry);\n        if (element.exit === 0 && element.qty < 0) { // calculating delta and premiums of only sold positions\n          \n          let type = '';\n          if (element.scrip.includes('CE')) {\n            type = 'CE';\n          }\n          if (element.scrip.includes('PE')) {\n            type = 'PE';\n          }\n          let index = element.scrip.slice(0, -2);\n\n          let symbol = this.oc_instru + this.getExpiry() + index;\n          let delta = this.getDelta(symbol, index, type) * element.qty;\n          let ltp = this.getLtp(symbol + type) * element.qty;\n\n          if (type === 'CE') {\n            cePremium += ltp;\n            ceDelta += delta;\n            ceQty += element.qty;\n          } else if (type === 'PE') {\n            pePremium += ltp;\n            peDelta += delta;\n            peQty += element.qty;\n          }\n        }\n      }\n      if (cePremium !== 0 && pePremium !== 0) {\n        cePremium = cePremium / ceQty;\n        pePremium = pePremium / peQty;\n        this.combined_premium = cePremium + pePremium;\n        this.combined_premium = (Math.round((this.combined_premium + 0.00001) * 100) / 100);\n        if (this.combined_SL && this.combined_premium >= this.combined_SL) {\n          this.appService.playAudio('warn');\n        }\n      }\n      if (ceDelta !== 0 && peDelta !== 0 && cePremium && pePremium) {\n        ceDelta = ceDelta / ceQty;\n        peDelta = peDelta / peQty;\n        if (Math.abs(ceDelta + peDelta) > 0.04) {\n          // console.log('mismatch');\n          \n          this.roll('CE', peDelta);\n          this.roll('PE', ceDelta);\n\n        }\n        // console.log(ceDelta, peDelta, cePremium, pePremium);\n      }\n    }\n  }\n\n  roll(type, delta) { // type = 'PE'\n    for (let index1 = this.oc_range_lower; index1 <= this.oc_range_higher; index1 += this.oc_range_multiple) {\n      let symbol1 = this.oc_instru + this.getExpiry() + index1;\n      let delta1 = this.getDelta(symbol1, index1, type);\n\n      if (Math.abs(delta + delta1) <= 0.025) {\n        let ltp1 = this.getLtp(symbol1 + type);\n        if (ltp1) {\n          this.adjust_sugg.push({ action: 'Adjust ' + type, strike: index1 + type, ltp: ltp1 });\n        }\n      }\n    }\n  }\n\n  updateOCRange() {\n\n    this.is_monthly_expiry = false;\n    let enteredDate = new Date(this.oc_year, this.oc_month - 1, this.oc_date);\n\n    let tempmonthlyExpiryDates = AppConstants.monthlyExpiryDates;\n    if (this.oc_instru === 'USDINR') {\n      tempmonthlyExpiryDates = AppConstants.monthlyExpiryDatesUSDINR;\n    }\n    for (let key in tempmonthlyExpiryDates) {\n      if (tempmonthlyExpiryDates.hasOwnProperty(key)) {\n          // console.log(key + \" -> \" + this.tempmonthlyExpiryDates[key] + ' ' + enteredDate);\n          if (enteredDate.getTime() === tempmonthlyExpiryDates[key].getTime()) {\n            console.log('monthly expiry matched');\n            this.is_monthly_expiry = true;\n            break;\n          }\n      }\n    }\n\n    this.oc_strikes = [];\n    for (let index = this.oc_range_lower; index <= this.oc_range_higher; index += this.oc_range_multiple) {\n      this.oc_strikes.push({symbol: this.oc_instru + this.getExpiry() + index, strike: index, ltp: 0, delta: 0 }); // symbol: NIFTY2061810000 NIFTY20JUN10000\n    }\n\n    if (!AppConstants.isSimulatedStrategy) {\n      let sub = [];\n      this.oc_strikes.forEach(oc => {\n        let e1 = new Instrument();\n        e1.expiry = new Date(this.oc_year, this.oc_month - 1, this.oc_date).toDateString();\n        e1.instru = this.oc_instru;\n        e1.strike = Number(oc.strike);\n        e1.type = 'CE';\n        sub.push(e1);\n        let e2 = new Instrument();\n        e2.expiry = new Date(this.oc_year, this.oc_month - 1, this.oc_date).toDateString();\n        e2.instru = this.oc_instru;\n        e2.strike = Number(oc.strike);\n        e2.type = 'PE';\n        sub.push(e2);\n      });\n      console.log('updateOCRange Subscriptions: ' + sub);\n      this.appService.sendSubscriptions(sub);\n    }\n    \n  }\n\n  clearOC() {\n    this.oc_strikes = [];\n  }\n\n  getSpotValue() {\n    let underlying = '';\n    if (this.oc_instru === 'NIFTY') {\n      underlying = 'NIFTY50';\n    } else if (this.oc_instru === 'BANKNIFTY') {\n      underlying = 'BANKNIFTY';\n    } else if (this.oc_instru === 'USDINR') {\n      underlying = 'USDINR_FUT';\n    }\n    let e = this.getLtp(underlying);\n    return e;\n  }\n\n  updateSpotStrike() {\n    let underlying = '';\n    if (this.oc_instru === 'NIFTY') {\n      underlying = 'NIFTY50';\n    } else if (this.oc_instru === 'BANKNIFTY') {\n      underlying = 'BANKNIFTY';\n    } else if (this.oc_instru === 'USDINR') {\n      underlying = 'USDINR_FUT';\n    }\n    let e = this.getLtp(underlying);\n\n    let spotStrike = (Math.round(e / this.oc_range_multiple) * this.oc_range_multiple);\n\n    /* let symbol = this.oc_instru + this.getExpiry() + spotStrike;\n\n    let ce_premium = this.getLtp(symbol + 'CE');\n    let pe_premium = this.getLtp(symbol + 'PE');\n    let targetStrike = ce_premium - pe_premium + spotStrike;\n    targetStrike = (Math.round(targetStrike / this.oc_range_multiple) * this.oc_range_multiple); */\n\n    // targetStrike:72.75 74.25 0.0975 0.15 74.25\n    // console.log('oc targetStrike:' + symbol + ' ' + targetStrike + ' ' + ce_premium + ' ' + pe_premium + ' ' + spotStrike);\n\n    this.ocSpotStrike = spotStrike; // targetStrike;\n  }\n\n  isSpotStrike(strike) {\n    /* let underlying = '';\n    if (this.oc_instru === 'NIFTY') {\n      underlying = 'NIFTY50';\n    } else if (this.oc_instru === 'BANKNIFTY') {\n      underlying = 'BANKNIFTY';\n    } else if (this.oc_instru === 'USDINR') {\n      underlying = 'USDINR_FUT';\n    }\n    let e = this.getLtp(underlying);\n    if ((Math.round(e / this.oc_range_multiple) * this.oc_range_multiple) === strike) {\n      return true;\n    }\n    return false; */\n\n    if (strike === this.ocSpotStrike) {\n      return true;\n    } \n    return false;\n  }\n\n  getPosLTP(position: Position) {\n    let symbol = position.scrip;\n    symbol = symbol.replace('NSE:', '');\n    /* let instru = '';\n    if (symbol.includes('NIFTY')) {\n      instru = 'NIFTY';\n      symbol = symbol.replace('NIFTY', '');\n    }\n    if (symbol.includes('USDINR')) {\n      instru = 'USDINR';\n      symbol = symbol.replace('USDINR', '');\n    }\n    let type = '';\n    if (symbol.includes('CE')) {\n      type = 'CE';\n    }\n    if (symbol.includes('PE')) {\n      type = 'PE';\n    }\n    symbol = symbol.slice(0, -2);\n    // if positions contains another expiry?\n    symbol = symbol.substring(5); // remove the expiry string\n    let alice_symbol = instru + symbol + type; */\n    position.cmp = this.getLtp(symbol);\n    return position.cmp;\n  }\n\n  getPosPnL(position: Position) {\n    // return position.realizedProfit;\n    if (position.cmp) {\n      let pnl = null;\n      let realizedProfit = 0;\n      if (position.realizedProfit) {\n        realizedProfit = position.realizedProfit;\n      }\n      if (position.netQty === 0) {\n        return position.pnl;\n      }\n      if (position.netQty > 0) {\n        let p = (position.cmp - position.buyAvg) * position.netQty;\n        pnl = realizedProfit + p;\n      } else if (position.netQty < 0) {\n        let p = (position.sellAvg - position.cmp) * -position.netQty;\n        pnl = realizedProfit + p;\n      }\n      if (position.scrip.includes('USDINR')) {\n        pnl *= 1000;\n      }\n      position.pnl = (Math.round((pnl + 0.00001) * 100) / 100);\n      return position.pnl;\n    } else {\n      return position.pnl;\n    }\n  }\n\n  // strike in map is NIFTY2061810000CE or NIFTY20JUN10000CE\n\n  getExpiry() {\n    if (this.is_monthly_expiry) {\n      return '' + (this.oc_year - 2000) + AppConstants.monthsMapping[this.oc_month];\n    }\n\n    let expiryMonth = null;\n    if (this.oc_month === 10) {\n      expiryMonth = 'O';\n    } else if (this.oc_month === 11) {\n      expiryMonth = 'N';\n    } else if (this.oc_month === 12) {\n      expiryMonth = 'D';\n    } else {\n      expiryMonth = this.oc_month;\n    }\n\n    return '' + (this.oc_year - 2000) + expiryMonth + ('0' + this.oc_date).slice(-2);//this.oc_date;\n  }\n\n  getLtp(strike: string, oc_strike = null) {\n    // console.log('strike', strike);\n\n    if (strike === 'USDINR_FUT') {\n      let expiryDate: Date = AppConstants.monthlyExpiryDatesUSDINR[AppConstants.year + AppConstants.USDINR_FUT_MONTH];\n      let expiryMonth = null;\n      if (expiryDate.getMonth() + 1 === 10) {\n        expiryMonth = 'O';\n      } else if (expiryDate.getMonth() + 1 === 11) {\n        expiryMonth = 'N';\n      } else if (expiryDate.getMonth() + 1 === 12) {\n        expiryMonth = 'D';\n      } else {\n        expiryMonth = expiryDate.getMonth() + 1;\n      }\n      let expiry = '' + (expiryDate.getFullYear() - 2000) + (expiryMonth) + ('0' + expiryDate.getDate()).slice(-2);\n      strike = 'USDINR' + expiry + AppConstants.USDINR_FUT_MONTH + 'FUT';\n      // console.log('getLtp strike: ' + strike);\n    }\n\n    let ltp = this.mapService.getLtp(strike);\n    if (oc_strike) {\n      oc_strike.ltp = ltp; \n    }\n\n    return ltp;\n  }\n\n  getAtp(strike: string) {\n    return this.mapService.getAtp(strike);\n  }\n\n  getVolume(strike: string) {\n    let volume = this.mapService.getVolume(strike);\n    if (volume) {\n      return volume.toLocaleString();\n    }\n    return volume;\n  }\n\n  getOI(strike: string) {\n    this.mapService.getOI(strike);\n  }\n\n  getChgOI(strike: string) {\n    this.mapService.getChgOI(strike);\n  }\n\n  connectWS() {\n    AppConstants.SocketMode = this.ws_vendor;\n    this.appService.connectWebsocket(this.ws_access_token);\n  }\n\n  includeInStrangleFn(symbol) {\n    if (this.stranglePositions.includes(symbol)) {\n      this.stranglePositions = this.stranglePositions.filter(e => e !== symbol);\n    } else {\n      this.stranglePositions.push(symbol);\n    }\n  }\n\n  includeInDebitSpreadFn(symbol) {\n    if (this.debitSpreadPositions.includes(symbol)) {\n      this.debitSpreadPositions = this.debitSpreadPositions.filter(e => e !== symbol);\n    } else {\n      this.debitSpreadPositions.push(symbol);\n    }\n  }\n\n  getProfitForStrangle() {\n    let pnl = 0.0;\n    let lotsize = 0;\n    if (this.oc_instru === 'NIFTY') {\n      lotsize = 50;\n    } else if (this.oc_instru === 'BANKNIFTY') {\n      lotsize = 25;\n    } else if (this.oc_instru === 'USDINR') {\n      lotsize = 1000;\n    }\n\n    let credit = 0;\n\n    this.stranglePositions.forEach(symbol => {\n      let ltp = this.getLtp(symbol);\n      credit += ltp;\n      // console.log(symbol + ', ltp: ' + ltp);\n      pnl += (ltp * lotsize);\n    });\n    credit = Math.round((credit + 0.00001) * 100) / 100; // round to 2 decimal places\n    return credit + ' , ' + pnl;\n  }\n\n  getPnLForDebitSpread() {\n    let profit = 0.0;\n    let loss = 0.0;\n    let lotsize = 0;\n    let spread = 0;\n    if (this.oc_instru === 'NIFTY') {\n      lotsize = 50;\n      spread = 50;\n    } else if (this.oc_instru === 'BANKNIFTY') {\n      lotsize = 25;\n      spread = 100;\n    } else if (this.oc_instru === 'USDINR') {\n      lotsize = 1000;\n      spread = 0.25;\n    }\n    let pos = []\n    this.debitSpreadPositions.forEach(symbol => {\n      let ltp = this.getLtp(symbol);\n      // console.log(symbol + ', ltp: ' + ltp);\n      pos.push(ltp);\n    });\n    if (pos.length === 2) {\n      let s1 = pos[0];\n      let s2 = pos[1];\n      let debit = Math.abs(s1 - s2);\n      loss = debit * lotsize;\n      profit = (spread - debit) * lotsize;\n      /*\n      Net Debit = Premium Paid for lower strike  Premium Received for higher strike\n      Bull Call Spread Max loss = Net Debit of the Strategy\n      Bull Call Spread Max Profit = Spread  Net Debit\n      */\n    }\n\n    return [profit, loss];\n  }\n\n\n}\n","<div class=\"main-content\">\n\n    <!-- <iframe height=\"480\" width=\"1050\" src=\"https://in.investing.com/indices/s-p-cnx-nifty-chart\"></iframe> -->\n    <!-- <iframe height=\"480\" width=\"1050\" src=\"https://in.investing.com/indices/s-p-cnx-nifty-chart\"></iframe> -->\n    <!-- <button (click)=\"playAudio('success')\">play</button>\n    <button (click)=\"playAudio('error')\">error</button> -->\n    <div class=\"top-content d-flex\">\n        <div class=\"mr-auto\">\n\n            <div class=\"confirmation-check form-check-inline mt-0\">\n                <input class=\"form-check-input\" [(ngModel)]=\"ws_vendor\" type=\"radio\" value=\"aliceblue\" id=\"aliceblue_ws\">\n                <label class=\"form-check-label\" for=\"aliceblue_ws\">Aliceblue</label>\n            </div>\n            <!-- <div class=\"confirmation-check form-check-inline mt-0\">\n                <input class=\"form-check-input\" [(ngModel)]=\"ws_vendor\" type=\"radio\" value=\"angel\" id=\"angel_ws\">\n                <label class=\"form-check-label\" for=\"angel_ws\">Angel</label>\n            </div> -->\n\n            <!-- <button type=\"button\" class=\"btn btn-secondary btn-sm refresh-btn\" (click)=\"refreshWebsocketVendor()\">Refresh WS Vendor</button> -->\n\n            <button type=\"button\" class=\"btn btn-link\" (click)=\"establishWSVendor()\">Connect WS</button>\n\n            <div>\n                <span>{{ getMastersStatus() }}</span>\n                <button *ngIf=\"!access_token\" type=\"button\" class=\"btn btn-link\" (click)=\"login()\">Login</button>\n            </div>\n\n            <div>\n                <span *ngIf=\"isSocketConnected()\">Websocket is connected</span>\n                <span *ngIf=\"!isSocketConnected()\">Websocket is not connected</span>\n                <!-- <button *ngIf=\"!isSocketConnected()\" type=\"button\" class=\"btn btn-link mt-0\" (click)=\"connectWS()\">Connect WS</button> -->\n            </div>\n            <!-- <div class=\"lastRequestStatus\">Last Request Status: {{ lastRequestStatus }}</div> -->\n        </div>\n\n        <div class=\"mr-4 mt-2\">\n            Funds: Total: {{ totalBalance }}, Available: {{ availableBalance }}, Utilized: {{ utilizedBalance }}\n        </div>\n        <div class=\"\">\n            <table class=\"table table-sm table-bordered mb-0\" style=\"width: 200px;\">\n                <tbody>\n                    <tr>\n                        <td style=\"width: 50%\">Nifty</td>\n                        <td>{{ getLtp('NIFTY50') }}</td>\n                    </tr>\n            </table>\n        </div>\n\n        <div class=\"ml-1\">\n            <table class=\"table table-sm table-bordered mb-0\" style=\"width: 200px;\">\n                <tbody>\n                    <tr>\n                        <td style=\"width: 50%\">BNF</td>\n                        <td>{{ getLtp('BANKNIFTY') }}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        <div class=\"ml-1\">\n            <table class=\"table table-sm table-bordered mb-0\" style=\"width: 220px;\">\n                <tbody>\n                    <tr>\n                        <td style=\"width: 50%\">USDINR {{ getUSDINRMonth() }} FUT</td>\n                        <td>{{ getLtp('USDINR_FUT') }}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        <!-- <div class=\"ml-1\">\n            <table class=\"table table-sm table-bordered mb-0\" style=\"width: 200px;\">\n                <tbody>\n                    <tr>\n                        <td>USDINR Spot</td>\n                        <td>{{ getLtp('USDINR') }}</td>\n                    </tr>\n                    <tr>\n                        <td>USDINR {{ getUSDINRMonth() }} FUT</td>\n                        <td>{{ getLtp('USDINR_FUT') }}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div> -->\n    </div>\n\n    <!-- Nifty Jun Fut: {{ getLtp('NIFTYJUNFUT') }}\n    BNF Jun Fut: {{ getLtp('BANKNIFTYJUNFUT') }} -->\n    \n    <hr style=\"margin-top: 0.5rem;\" />\n\n    <button type=\"button\" class=\"btn btn-secondary btn-sm refresh-btn\" (click)=\"refreshAll()\">Refresh All</button>\n    <span>Positions last update: {{ lastPositionsUpdateTime }} | Orders last update: {{ lastOrdersUpdateTime }}</span>\n\n    <div class=\"flex-container\">\n        <div class=\"positions_div\">\n            <div class=\"table-title\">\n                <span class=\"font-weight-bold\">Positions</span>\n                <span class=\"pl-4 pr-4\">|</span>\n                <span class=\"positions-sum font-weight-bold\">\n                    P&L1: \n                    <span [ngClass]=\"{\n                        'text-danger': getPositionsPnLSum(1) < 0,\n                        'text-success': getPositionsPnLSum(1) > 0\n                      }\">\n                      {{ getPositionsPnLSum(1) }}\n                    </span>\n                </span>\n                <span class=\"pl-2 pr-2\">|</span>\n                <span class=\"positions-sum font-weight-bold\">\n                    P&L2: \n                    <span [ngClass]=\"{\n                        'text-danger': getPositionsPnLSum(2) < 0,\n                        'text-success': getPositionsPnLSum(2) > 0\n                      }\">\n                      {{ getPositionsPnLSum(2) }}\n                    </span>\n                </span>\n                <span class=\"pl-2 pr-2\">|</span>\n                <span class=\"positions-sum font-weight-bold\">\n                    P&L3: \n                    <span [ngClass]=\"{\n                        'text-danger': getPositionsPnLSum(3) < 0,\n                        'text-success': getPositionsPnLSum(3) > 0\n                      }\">\n                      {{ getPositionsPnLSum(3) }}\n                    </span>\n                </span>\n                <span class=\"pl-2 pr-2\">|</span>\n                <span class=\"positions-sum font-weight-bold\">\n                    P&L4: \n                    <span [ngClass]=\"{\n                        'text-danger': getPositionsPnLSum(4) < 0,\n                        'text-success': getPositionsPnLSum(4) > 0\n                      }\">\n                      {{ getPositionsPnLSum(4) }}\n                    </span>\n                </span>\n                <div class=\"ml-auto float-right\">\n                    <div class=\"form-check-inline\">\n                        <label class=\"form-check-label mr-1\" for=\"hide-positions\">Hide</label>\n                        <input class=\"form-check-input mr-2\" [(ngModel)]=\"hide_positions\" type=\"checkbox\" value=\"\" id=\"hide-positions\">                        \n                    </div>\n                    <button [disabled]=\"disable_order_buttons\" type=\"button\" class=\"btn btn-secondary btn-sm refresh-btn\" (click)=\"exitSelected()\">Exit selected</button>\n                </div>\n                \n            </div>\n            <table class=\"table table-sm table-bordered shadow text-center\"><!-- table-responsive -->\n                <thead class=\"thead-light\">\n                    <tr>\n                        <!-- <th scope=\"col\">#</th> -->\n                        <th></th>\n                        <th scope=\"col\">Symbol</th>\n                        <th scope=\"col\">Type</th>\n                        <th scope=\"col\">NetQty</th>\n                        <th scope=\"col\">BuyAvg</th>\n                        <th scope=\"col\">SellAvg</th>\n                        <th scope=\"col\">CMP</th>\n                        <th scope=\"col\">PnL</th>\n                        <th scope=\"col\"></th>\n                    </tr>\n                </thead>\n                <tbody *ngIf=\"!hide_positions\">\n                    <tr *ngFor=\"let pos of positions; index as i\">\n                        <!-- <th scope=\"row\">{{ i + 1 }}</th> -->\n                        <td>\n                            <div class=\"form-check-inline posCheckbox\">\n                                <input class=\"form-check-input\" (change)=\"includePosPnLInSum1(pos)\" type=\"checkbox\" value=\"\">\n                            </div>\n                            <div class=\"form-check-inline posCheckbox\">\n                                <input class=\"form-check-input\" (change)=\"includePosPnLInSum2(pos)\" type=\"checkbox\" value=\"\">\n                            </div>\n                            <div class=\"form-check-inline posCheckbox\">\n                                <input class=\"form-check-input\" (change)=\"includePosPnLInSum3(pos)\" type=\"checkbox\" value=\"\">\n                            </div>\n                            <div class=\"form-check-inline posCheckbox\">\n                                <input class=\"form-check-input\" (change)=\"includePosPnLInSum4(pos)\" type=\"checkbox\" value=\"\">\n                            </div>\n                        </td>\n                        <td class=\"font-weight-bold\">{{ pos.scrip }}</td>\n                        <td>{{ pos.type}}</td>\n                        <td>{{ pos.netQty}}</td>\n                        <td>{{ pos.buyAvg}}</td>\n                        <td>{{ pos.sellAvg}}</td>\n                        <td>{{ getPosLTP(pos) }}</td>\n                        <td class=\"font-weight-bold\" [ngClass]=\"{\n                            'text-danger': pos.pnl < 0,\n                            'text-success': pos.pnl > 0\n                          }\">{{ getPosPnL(pos) }}</td>\n                        <td>\n                            <div class=\"positions-row-actions\">\n                                <input type=\"number\" placeholder=\"Qty\" id=\"pos-qty-{{pos.id}}\" class=\"pos-input form-control form-control-sm\"/>\n                                <!-- <input type=\"number\" placeholder=\"Limit\" id=\"pos-limit-{{pos.id}}\" class=\"pos-input form-control form-control-sm\"/> -->\n                                <!-- <input type=\"number\" placeholder=\"Block\" id=\"pos-block-{{pos.id}}\" class=\"pos-input form-control form-control-sm\"/> -->\n                                <button [disabled]=\"disable_order_buttons\" type=\"button\" class=\"btn btn-secondary btn-sm\" (click)=\"exitPosition(pos)\">Exit</button>\n                            </div>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n\n            <!-- <div class=\"new-order-div shadow\">\n                <div class=\"font-weight-bold\">New Order</div>\n                <div>\n                    <div class=\"input-group input-group-sm new-input-prepend\">\n                        <div class=\"input-group-prepend\">\n                          <div class=\"input-group-text\">Expiry</div>\n                        </div>\n                        <input [(ngModel)]=\"newexpiry\" \n                            (ngModelChange)=\"newexpiry = $event.toUpperCase()\"\n                            type=\"text\" class=\"form-control\"/>\n                    </div>\n                    <div class=\"input-group input-group-sm new-input-prepend\">\n                        <div class=\"input-group-prepend\">\n                          <div class=\"input-group-text\">Strike</div>\n                        </div>\n                        <input [(ngModel)]=\"newstrike\" \n                            (ngModelChange)=\"newstrike = $event.toUpperCase()\"\n                            type=\"number\" class=\"form-control\" min=\"0\" step=\"50\"/>\n                    </div>\n                    <select class=\"new-input form-control form-control-sm\" [(ngModel)]=\"newoption\">\n                        <option value=\"CE\">CE</option>\n                        <option value=\"PE\">PE</option>\n                    </select>\n                    <select class=\"new-input form-control form-control-sm\" [(ngModel)]=\"newProductType\">\n                        <option value=\"INTRADAY\">INTRADAY</option>\n                        <option value=\"MARGIN\">MARGIN</option>\n                    </select>\n                    <select class=\"new-input form-control form-control-sm\" [(ngModel)]=\"newOrderType\">\n                        <option value=2>MARKET</option>\n                        <option value=1>LIMIT</option>\n                        <option value=3>SL-M</option>\n                        <option value=4>SL-L</option>\n                    </select>\n                </div>\n                <div>\n                    <div class=\"input-group input-group-sm new-input-prepend\">\n                        <div class=\"input-group-prepend\">\n                          <div class=\"input-group-text\">Qty</div>\n                        </div>\n                        <input [(ngModel)]=\"newqty\" type=\"number\" class=\"form-control\" min=\"0\" step=\"50\" />\n                    </div>\n                    <div class=\"input-group input-group-sm new-input-prepend\">\n                        <div class=\"input-group-prepend\">\n                          <div class=\"input-group-text\">Block</div>\n                        </div>\n                        <input [(ngModel)]=\"newblock\" type=\"number\" class=\"form-control\"/>\n                    </div>\n                    <div class=\"input-group input-group-sm new-input-prepend\">\n                        <div class=\"input-group-prepend\">\n                          <div class=\"input-group-text\">Limit</div>\n                        </div>\n                        <input [(ngModel)]=\"newlimit\" type=\"number\" class=\"form-control\"/>\n                    </div>\n                    <div class=\"input-group input-group-sm new-input-prepend\">\n                        <div class=\"input-group-prepend\">\n                          <div class=\"input-group-text\">Stop</div>\n                        </div>\n                        <input [(ngModel)]=\"newstop\" type=\"number\" class=\"form-control\"/>\n                    </div>\n                </div>\n                <div>\n                    CMP: {{ getCMP() }}\n                </div>\n                <button type=\"button\" class=\"btn btn-primary btn-sm new-input-btn\" (click)=\"newOrder(1)\">Buy</button>\n                <button type=\"button\" class=\"btn btn-danger btn-sm new-input-btn\" (click)=\"newOrder(-1)\">Sell</button>\n                <button type=\"button\" class=\"btn btn-secondary btn-sm new-input-btn\" (click)=\"resetNewOrder()\">Reset</button>\n                <div class=\"confirmation-check form-check\">\n                    <input class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"conf-check\">\n                    <label class=\"form-check-label\" for=\"conf-check\">\n                        Show confirmation dialog before sending order\n                    </label>\n                </div>\n            </div> -->\n        </div>\n\n        <div class=\"orderbook_div\">\n            <div class=\"table-title\">\n                <div class=\"d-flex\">\n                    <span class=\"font-weight-bold\">Orders</span>\n                    <div class=\"form-check-inline ml-auto\">\n                        <label class=\"form-check-label mr-1\" for=\"hide-orders\">Hide</label>\n                        <input class=\"form-check-input\" [(ngModel)]=\"hide_orders\" type=\"checkbox\" value=\"\" id=\"hide-orders\">                        \n                    </div>\n                </div>                \n            </div>\n            <table class=\"table table-sm table-bordered shadow text-center\">\n                <thead class=\"thead-light\">\n                    <tr>\n                        <th scope=\"col\">Symbol</th>\n                        <th scope=\"col\">Status</th>\n                        <th scope=\"col\">B/S</th>\n                        <th scope=\"col\">Qty</th>\n                        <th scope=\"col\">Type</th>\n                        <th scope=\"col\">Limit</th>\n                        <th scope=\"col\">Stop</th>\n                        <th scope=\"col\">Price</th>\n                        <th scope=\"col\">Time</th>\n                        <th scope=\"col\">Message</th>\n                    </tr>\n                </thead>\n                <tbody *ngIf=\"!hide_orders\">\n                    <tr *ngFor=\"let ord of orders; index as i\">\n                        <td>{{ ord.scrip }}</td>\n                        <td>{{ getOrderStatus(ord.status) }}</td>\n                        <td>{{ ord.side === 1 ? 'B':'S' }}</td>\n                        <td>{{ ord.qty }}</td>\n                        <td>{{ getOrderType(ord.type) }}</td>\n                        <td>{{ ord.limit }}</td>\n                        <td>{{ ord.stop }}</td>\n                        <td>{{ ord.tradedPrice }}</td>\n                        <td>{{ ord.orderDateTime }}</td>\n                        <td>{{ ord.message }}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n\n    <hr/>\n\n    <div class=\"form-check text-center\" style=\"font-size: 18px;\">\n        <input class=\"form-check-input\" [(ngModel)]=\"disable_order_buttons\" type=\"checkbox\" value=\"\" id=\"disable-order-buttons\"> \n        <label class=\"form-check-label\" for=\"disable-order-buttons\">Disable order buttons</label>                      \n    </div>\n    \n    <hr/>\n\n    <div class=\"algo-suggestions-main shadow-sm p-3 mb-5 bg-white\" *ngIf=\"false\">\n        <span class=\"mr-2\">\n            Strategy PnL: <span class=\"font-weight-bold\" [ngClass]=\"{ 'text-danger': getStrategyPnL() < 0, 'text-success': getStrategyPnL() > 0 }\"> {{ getStrategyPnL() }} , {{ strategyPointsProfit }}</span>\n        </span>\n        <!-- <span class=\"suggest-positions\">\n            14750CE 25 , 14400PE 28\n        </span> -->\n        <span class=\"suggest-positions\" *ngFor=\"let sug of suggestions; index as i\">\n            {{ sug.strikeCE }}CE {{ sug.ltpCE }} , {{ sug.strikePE }}PE {{ sug.ltpPE }}\n        </span>\n\n        <span class=\"suggest-positions\" *ngFor=\"let sug of adjust_sugg; index as i\">\n            {{ sug.action }}: {{ sug.strike }} {{ sug.ltp }}\n        </span>\n\n        <span class=\"ml-4 mr-3\">Current Premium: {{ combined_premium }}</span> \n\n        <span>\n            Combined SL:\n            <input style=\"width: 70px; display: inline;\" type=\"number\" placeholder=\"Combined SL\" [(ngModel)]=\"combined_SL\" class=\"ml-2 form-control form-control-sm\"/>\n        </span>\n\n    </div>\n\n    <app-chart></app-chart>\n\n    <hr/>\n\n    <div class=\"option-chain\">\n        <!-- <div class=\"confirmation-check form-check-inline\">\n            <input class=\"form-check-input\" [(ngModel)]=\"nifty_oc_check\" (change)=\"checkNifty()\" type=\"checkbox\" value=\"\" id=\"nifty-oc-check\">\n            <label class=\"form-check-label\" for=\"nifty-oc-check\">Nifty</label>\n        </div>\n        <div class=\"confirmation-check form-check-inline\">\n            <input class=\"form-check-input\" [(ngModel)]=\"usdinr_oc_check\" (change)=\"checkUSDINR()\" type=\"checkbox\" value=\"\" id=\"usdinr-oc-check\">\n            <label class=\"form-check-label\" for=\"usdinr-oc-check\">USDINR</label>\n        </div> -->\n        <select class=\"new-input form-control form-control-sm\" [(ngModel)]=\"oc_instru\">\n            <option value='NIFTY'>NIFTY</option>\n            <option value='BANKNIFTY'>BANKNIFTY</option>\n            <option value='USDINR'>USDINR</option>\n        </select>\n        <input id=\"strategy-qty\" style=\"display: inline; width: 70px;\" type=\"number\" placeholder=\"Qty Default\" [(ngModel)]=\"qty_default\" class=\"ml-2 form-control form-control-sm\"/>\n\n        <div style=\"display: inline-block; margin-left: 20px; margin-right: 10px;\">Expiry: </div>\n        <div class=\"input-group input-group-sm new-input-prepend-expiry\">\n            <div class=\"input-group-prepend\">\n              <div class=\"input-group-text\">Year</div>\n            </div>\n            <input [(ngModel)]=\"oc_year\" type=\"number\" class=\"form-control\"/>\n        </div>\n        <div class=\"input-group input-group-sm new-input-prepend-expiry\">\n            <div class=\"input-group-prepend\">\n              <div class=\"input-group-text\">Month</div>\n            </div>\n            <input [(ngModel)]=\"oc_month\" type=\"number\" class=\"form-control\"/>\n        </div>\n        <div class=\"input-group input-group-sm new-input-prepend-expiry\">\n            <div class=\"input-group-prepend\">\n              <div class=\"input-group-text\">Date</div>\n            </div>\n            <input [(ngModel)]=\"oc_date\" type=\"number\" class=\"form-control\"/>\n        </div>\n        <div class=\"confirmation-check form-check-inline\">\n            <input class=\"form-check-input\" [(ngModel)]=\"is_monthly_expiry\" type=\"checkbox\" value=\"\" id=\"is-monthly-expiry\" [disabled]=\"true\">\n            <label class=\"form-check-label\" for=\"is-monthly-expiry\">Is Monthly</label>\n        </div>\n        <div style=\"display: inline-block; margin-left: 20px; margin-right: 10px; margin-bottom: 20px;\">Strike range: </div>\n        <div class=\"input-group input-group-sm new-input-prepend-oc\">\n            <div class=\"input-group-prepend\">\n              <div class=\"input-group-text\">Higher</div>\n            </div>\n            <input [(ngModel)]=\"oc_range_higher\" type=\"number\" class=\"form-control\" min=\"0\" step=\"50\"/>\n        </div>\n        <div class=\"input-group input-group-sm new-input-prepend-oc\">\n            <div class=\"input-group-prepend\">\n              <div class=\"input-group-text\">Lower</div>\n            </div>\n            <input [(ngModel)]=\"oc_range_lower\" type=\"number\" class=\"form-control\" min=\"0\" step=\"50\"/>\n        </div>\n        <div class=\"input-group input-group-sm new-input-prepend-oc\">\n            <div class=\"input-group-prepend\">\n              <div class=\"input-group-text\">Multiple</div>\n            </div>\n            <input [(ngModel)]=\"oc_range_multiple\" type=\"number\" class=\"form-control\" min=\"50\" step=\"50\" />\n        </div>\n        <button type=\"button\" class=\"btn btn-secondary btn-sm\" (click)=\"updateOCRange()\">Update</button>\n        <button type=\"button\" class=\"btn btn-secondary btn-sm ml-1\" (click)=\"clearOC()\">Clear</button>\n\n        <table class=\"table table-sm table-bordered shadow mb-0 text-center\">\n            <thead class=\"thead-light\">\n                <tr class=\"text-center\">\n                    <th colspan=\"4\" scope=\"col\">Calls</th>\n                    <th scope=\"col\"></th>\n                    <th colspan=\"4\" scope=\"col\">Puts</th>\n                </tr>\n                <tr>\n                    <th class=\"oc-col-actions\" scope=\"col\"></th>\n                    <!-- <th class=\"oc-col\" scope=\"col\">Chg OI</th>\n                    <th class=\"oc-col\" scope=\"col\">OI</th> -->\n                    <th class=\"oc-col\" scope=\"col\">Volume</th>\n                    <!-- <th class=\"oc-col\" scope=\"col\">ATP</th> -->\n                    <th class=\"oc-col\" scope=\"col\">Delta</th>\n                    <th class=\"oc-col\" scope=\"col\">LTP</th>\n                    <th class=\"text-center\" scope=\"col\">Strike</th>\n                    <th class=\"oc-col\" scope=\"col\">LTP</th>\n                    <th class=\"oc-col\" scope=\"col\">Delta</th>\n                    <!-- <th class=\"oc-col\" scope=\"col\">ATP</th> -->\n                    <th class=\"oc-col\" scope=\"col\">Volume</th>\n                    <!-- <th class=\"oc-col\" scope=\"col\">OI</th>\n                    <th class=\"oc-col\" scope=\"col\">Chg OI</th> -->\n                    <th class=\"oc-col-actions\" scope=\"col\"></th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr *ngFor=\"let oc of oc_strikes; index as i\">\n                    <td [ngClass]=\"{ 'ocStrikeStrategyCE': isStrikeInCurrStrategy(oc.strike + 'CE') }\">\n                        <div class=\"positions-row-actions\">\n                            <div class=\"form-check-inline posCheckbox\">\n                                <input class=\"form-check-input\" (change)=\"includeInStrangleFn(oc.symbol + 'CE')\" type=\"checkbox\" value=\"\">\n                            </div>\n                            <div class=\"form-check-inline posCheckbox\">\n                                <input class=\"form-check-input\" (change)=\"includeInDebitSpreadFn(oc.symbol + 'CE')\" type=\"checkbox\" value=\"\">\n                            </div>\n                            <!-- <input type=\"number\" placeholder=\"Qty\" id=\"oc-qty-CE-{{oc.symbol}}\" class=\"pos-input form-control form-control-sm\"/>\n                            <input type=\"number\" placeholder=\"Limit\" id=\"oc-limit-CE-{{oc.symbol}}\" class=\"pos-input form-control form-control-sm\"/> -->\n                            <!-- <input type=\"number\" placeholder=\"Block\" id=\"oc-block-CE-{{oc.symbol}}\" class=\"pos-input form-control form-control-sm\"/> -->\n                            <!-- <button [disabled]=\"disable_order_buttons\" type=\"button\" class=\"btn btn-primary btn-sm mr-1\" (click)=\"ocOrder(1, 'CE', oc)\">Buy</button>\n                            <button [disabled]=\"disable_order_buttons\" type=\"button\" class=\"btn btn-danger btn-sm mr-1\" (click)=\"ocOrder(-1, 'CE', oc)\">Sell</button> -->\n                            <button type=\"button\" class=\"btn btn-secondary btn-sm\" (click)=\"addToStrategyBuilder(oc, 'CE')\">SB</button>\n                            <!-- <button type=\"button\" class=\"btn btn-default\">\n                                <span class=\"glyphicon glyphicon-align-left\" aria-hidden=\"true\"></span>\n                            </button> -->\n                        </div>\n                    </td>\n                    <!-- <td>{{ getChgOI(oc.symbol + 'CE') }}</td>\n                    <td>{{ getOI(oc.symbol + 'CE') }}</td> -->\n                    <td [ngClass]=\"{ 'ocStrikeStrategyCE': isStrikeInCurrStrategy(oc.strike + 'CE') }\">{{ getVolume(oc.symbol + 'CE') }}</td>\n                    <!-- <td [ngClass]=\"{ 'ocStrikeStrategyCE': isStrikeInCurrStrategy(oc.strike + 'CE') }\">{{ getAtp(oc.symbol + 'CE') }}</td> -->\n                    <td [ngClass]=\"{ 'ocStrikeStrategyCE': isStrikeInCurrStrategy(oc.strike + 'CE') }\">{{ getDelta(oc.symbol, oc.strike, 'CE') }}</td>\n                    <td [ngClass]=\"{ 'ocStrikeStrategyCE': isStrikeInCurrStrategy(oc.strike + 'CE') }\" class=\"text-info font-weight-bold\">\n                        {{ getLtp(oc.symbol + 'CE') }}\n                        <div class=\"ocStrategyStrikeQty\" *ngIf=\"isStrikeInCurrStrategy(oc.strike + 'CE')\">\n                            {{ getQtyOfStrikeInStrategy(oc.strike + 'CE') }} ({{ getCostOfStrikeInStrategy(oc.strike + 'CE') }})\n                        </div>\n                    </td>\n                    <td [ngClass]=\"{ 'table-warning': isSpotStrike(oc.strike), 'oc-strike': !isSpotStrike(oc.strike) }\"class=\"font-weight-bold text-center\">\n                        {{ oc.strike }}\n                        <div class=\"ocStrategyStrikeQty oc-strike-spot\" *ngIf=\"isSpotStrike(oc.strike)\">\n                            {{ getSpotValue() }}\n                        </div>\n                    </td>\n                    <td [ngClass]=\"{ 'ocStrikeStrategyPE': isStrikeInCurrStrategy(oc.strike + 'PE') }\" class=\"text-info font-weight-bold\">\n                        {{ getLtp(oc.symbol + 'PE') }}\n                        <div class=\"ocStrategyStrikeQty\" *ngIf=\"isStrikeInCurrStrategy(oc.strike + 'PE')\">\n                            {{ getQtyOfStrikeInStrategy(oc.strike + 'PE') }} ({{ getCostOfStrikeInStrategy(oc.strike + 'PE') }})\n                        </div>\n                    </td>\n                    <td [ngClass]=\"{ 'ocStrikeStrategyPE': isStrikeInCurrStrategy(oc.strike + 'PE') }\">{{ getDelta(oc.symbol, oc.strike, 'PE') }}</td>\n                    <!-- <td [ngClass]=\"{ 'ocStrikeStrategyPE': isStrikeInCurrStrategy(oc.strike + 'PE') }\">{{ getAtp(oc.symbol + 'PE') }}</td> -->\n                    <td [ngClass]=\"{ 'ocStrikeStrategyPE': isStrikeInCurrStrategy(oc.strike + 'PE') }\">{{ getVolume(oc.symbol + 'PE') }}</td>\n                    <!-- <td>{{ getOI(oc.symbol + 'PE') }}</td>\n                    <td>{{ getChgOI(oc.symbol + 'PE') }}</td> -->\n                    <td [ngClass]=\"{ 'ocStrikeStrategyPE': isStrikeInCurrStrategy(oc.strike + 'PE') }\">\n                        <div class=\"positions-row-actions\">\n                            <div class=\"form-check-inline posCheckbox\">\n                                <input class=\"form-check-input\" (change)=\"includeInStrangleFn(oc.symbol + 'PE')\" type=\"checkbox\" value=\"\">\n                            </div>\n                            <div class=\"form-check-inline posCheckbox\">\n                                <input class=\"form-check-input\" (change)=\"includeInDebitSpreadFn(oc.symbol + 'PE')\" type=\"checkbox\" value=\"\">\n                            </div>\n                            <!-- <input type=\"number\" placeholder=\"Qty\" id=\"oc-qty-PE-{{oc.symbol}}\" class=\"pos-input form-control form-control-sm\"/>\n                            <input type=\"number\" placeholder=\"Limit\" id=\"oc-limit-PE-{{oc.symbol}}\" class=\"pos-input form-control form-control-sm\"/> -->\n                            <!-- <input type=\"number\" placeholder=\"Block\" id=\"oc-block-PE-{{oc.symbol}}\" class=\"pos-input form-control form-control-sm\"/> -->\n                            <!-- <button [disabled]=\"disable_order_buttons\" type=\"button\" class=\"btn btn-primary btn-sm mr-1\" (click)=\"ocOrder(1, 'PE', oc)\">Buy</button>\n                            <button [disabled]=\"disable_order_buttons\" type=\"button\" class=\"btn btn-danger btn-sm mr-1\" (click)=\"ocOrder(-1, 'PE', oc)\">Sell</button> -->\n                            <button type=\"button\" class=\"btn btn-secondary btn-sm\" (click)=\"addToStrategyBuilder(oc, 'PE')\">SB</button>\n                        </div>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n\n        <div class=\"confirmation-check form-check-inline\">\n            <input class=\"form-check-input\" [(ngModel)]=\"oc_product_type\" type=\"radio\" value=\"INTRADAY\" id=\"oc-order-type-intraday\">\n            <label class=\"form-check-label\" for=\"oc-order-type-intraday\">Intraday</label>\n        </div>\n        <div class=\"confirmation-check form-check-inline\">\n            <input class=\"form-check-input\" [(ngModel)]=\"oc_product_type\" type=\"radio\" value=\"MARGIN\" id=\"oc-order-type-margin\">\n            <label class=\"form-check-label\" for=\"oc-order-type-margin\">Margin</label>\n        </div>\n\n        <div>\n            <span>Strangle max profit per lot: {{ getProfitForStrangle() }}</span>\n        </div>\n\n        <div>\n            <span>Debit spread per lot Profit: {{ getPnLForDebitSpread()[0] }}, Loss: {{ getPnLForDebitSpread()[1] }}</span>\n        </div>\n    </div>\n</div>\n\n<router-outlet></router-outlet>","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { AppService } from './app.service';\nimport { FyersService } from './common/fyers.service';\nimport { HttpClientModule } from '@angular/common/http';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { ChartComponent } from './chart/chart.component';\nimport { ChartsModule } from 'ng2-charts';\nimport { ChartModule } from './chart/chart.module';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n  ],\n  imports: [\n    CommonModule,\n    BrowserModule,\n    AppRoutingModule,\n    HttpClientModule,\n    FormsModule,\n    ReactiveFormsModule,\n    ChartModule\n  ],\n  /* exports: [\n    ChartsModule\n  ], */\n  providers: [AppService, FyersService],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { FyersService } from './common/fyers.service';\nimport { AppConstants } from './common/application.constant';\nimport { AliceblueService } from './common/aliceblue.service';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { AngelService } from './common/angel.service';\nimport { AngelWebsocketService } from './common/angelwebsocket.service';\nimport { WebsocketService } from './common/websocket.service';\nimport { PositionTypeForPayOff } from './common/models';\nimport { MapService } from './common/map.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AppService {\n\n  public requestStatusEvent$: Subject<any> = new Subject();\n  public payOffEvent$: Subject<any> = new Subject();\n  mean = 0;\n  variance = 1;\n\n  constructor(\n    private http: HttpClient,\n    private fyersService: FyersService,\n    private aliceblueService: AliceblueService,\n    private angelService: AngelService,\n    private angelWS: AngelWebsocketService,\n    private websocketService: WebsocketService,\n    private mapService: MapService\n  ) { }\n\n  getMastersContract(access_token?) {\n    if (AppConstants.SocketMode === 'aliceblue') {\n      this.aliceblueService.getMastersContract(access_token);\n    } else if (AppConstants.SocketMode === 'angel') {\n      return this.angelService.getMastersContract();\n    }\n  }\n\n  getDelta(instru, strike, type, expiry, ltp) {\n\n    //let expiry_date = new Date(this.oc_year, this.oc_month - 1, this.oc_date).toDateString();\n    // let date_expiry = new Date(this.oc_year, this.oc_month - 1, this.oc_date);\n    let date_expiry = new Date(expiry);\n    if (instru === 'USDINR') {\n      date_expiry.setHours(12, 30, 0);\n    } else {\n      date_expiry.setHours(15, 30, 0);\n    }\n\n    let date_now = new Date();\n    // date_now.setDate(date_now.getDate() + 0);\n\n    let seconds = Math.floor((date_expiry.getTime() - date_now.getTime()) / 1000);\n    let\tminutes = Math.floor(seconds / 60);\n    let\thours = Math.floor(minutes / 60);\n    let\tdelta_t = (Math.floor(hours / 24)) / 365.0; // time\n\n    let underlying = 'NIFTY50';\n    if (instru === 'BANKNIFTY') {\n      underlying = 'BANKNIFTY';\n    } else if (instru === 'USDINR') {\n      underlying = 'USDINR_FUT';\n    }\n    let spot = this.getLtp(underlying);\n\n    // let mkt_price = this.getLtp(symbol + type);\n    let mkt_price = ltp;\n\n    let typet0 = null;\n    if (type === 'CE') {\n      typet0 = PositionTypeForPayOff.CE;\n    }\n    if (type === 'PE') {\n      typet0 = PositionTypeForPayOff.PE;\n    }\n\n    let iv = this.calculateIV(instru, spot, strike, AppConstants.INTEREST_RATE, date_expiry, typet0, mkt_price);\n    let volt = iv / 100;\n    let int_rate = AppConstants.INTEREST_RATE / 100;\n\n    // console.log(spot, date_expiry, mkt_price, iv);\n\n    let d1 = (Math.log(spot / strike) + (int_rate + (Math.pow(volt, 2) / 2)) * delta_t) / (volt * Math.sqrt(delta_t));\n    let delta = 0;\n    if (type === 'CE') {\n      delta = this.getCDF(d1);\n    } else if (type === 'PE') {\n      delta = this.getCDF(d1) - 1;\n    }\n    delta = Math.round((delta + 0.00001) * 100) / 100;\n    return delta;\n  }\n\n  getLtp(strike: string, oc_strike = null) {\n    // console.log('strike', strike);\n\n    if (strike === 'USDINR_FUT') {\n      let expiryDate: Date = AppConstants.monthlyExpiryDatesUSDINR[AppConstants.year + AppConstants.USDINR_FUT_MONTH];\n      let expiryMonth = null;\n      if (expiryDate.getMonth() + 1 === 10) {\n        expiryMonth = 'O';\n      } else if (expiryDate.getMonth() + 1 === 11) {\n        expiryMonth = 'N';\n      } else if (expiryDate.getMonth() + 1 === 12) {\n        expiryMonth = 'D';\n      } else {\n        expiryMonth = expiryDate.getMonth() + 1;\n      }\n      let expiry = '' + (expiryDate.getFullYear() - 2000) + (expiryMonth) + ('0' + expiryDate.getDate()).slice(-2);\n      strike = 'USDINR' + expiry + AppConstants.USDINR_FUT_MONTH + 'FUT';\n      // console.log('getLtp strike: ' + strike);\n    }\n\n    let ltp = this.mapService.getLtp(strike);\n    if (oc_strike) {\n      oc_strike.ltp = ltp; \n    }\n\n    return ltp;\n  }\n\n  calculateIV(instru, spot, strike, int_rate, expiry_date, type, mkt_price) {\n    let high = 80;\n    let low = 0;\n    let iv = 0;\n\n    let date_expiry = new Date(expiry_date);\n    let date_now = new Date();\n    let seconds = Math.floor((date_expiry.getTime() - date_now.getTime()) / 1000);\n    let\tminutes = Math.floor(seconds / 60);\n    let\thours = Math.floor(minutes / 60);\n    let\tdelta_t = (Math.floor(hours / 24)) / 365.0;\n\n    if (hours < 24) {\n      return 0;\n    }\n\n    while ((high - low) > 0.0001) {\n      if (this.calculateT0AtPoint(instru, spot, strike, int_rate, expiry_date, (high + low) / 2, type) > mkt_price) {\n        high = (high + low) / 2;\n      } else {\n        low = (high + low) / 2;\n      }\n    }\n    iv = (high + low) / 2;\n    return iv;\n  }\n\n  calculateT0AtPoint(instru, spot, strike, int_rate, expiry_date, volatility, type, add_days?) {\n    let t0 = 0;\n    let date_expiry = new Date(expiry_date);\n    if (instru === 'USDINR') {\n      date_expiry.setHours(12, 30, 0);\n    } else {\n      date_expiry.setHours(15, 30, 0);\n    }\n\n    if (!add_days) {\n      add_days = 0;\n    }\n\n    let date_now = new Date();\n    date_now.setDate(date_now.getDate() + add_days);\n\n    let seconds = Math.floor((date_expiry.getTime() - date_now.getTime()) / 1000);\n    let\tminutes = Math.floor(seconds / 60);\n    let\thours = Math.floor(minutes / 60);\n    let\tdelta_t = (Math.floor(hours / 24)) / 365.0; // time\n\n    if (hours < 12) {\n      return 0;\n    }\n    else {\n      let volt = volatility / 100;\n      int_rate = int_rate / 100;\n\n      let d1 = (Math.log(spot / strike) + (int_rate + (Math.pow(volt, 2) / 2)) * delta_t) / (volt * Math.sqrt(delta_t));\n      // let d2 = (Math.log(spot / strike) + (int_rate - (Math.pow(volt, 2) / 2)) * delta_t) / (volt * Math.sqrt(delta_t));\n      let d2 = d1 - (volt * Math.sqrt(delta_t));\n\n      let fv_strike = (strike) * Math.exp(-1 * int_rate * delta_t);\n\n      if (type === PositionTypeForPayOff.CE) {\n        t0 = spot * this.getCDF(d1) - fv_strike * this.getCDF(d2);\n      }\n\n      if (type === PositionTypeForPayOff.PE) {\n        t0 = fv_strike * this.getCDF(-1 * d2) - spot * this.getCDF(-1 * d1);\n      }\n    }\n    return t0;\n  }\n\n  getCDF(x) {\n    let standardDeviation = Math.sqrt(this.variance);\n    return 0.5 * this.erfc(-(x - this.mean) / (standardDeviation * Math.sqrt(2)));\n  }\n\n  // Complementary error function\n  // From Numerical Recipes in C 2e p221\n  erfc(x) {\n    let z = Math.abs(x);\n    let t = 1 / (1 + z / 2);\n    let r = t * Math.exp(-z * z - 1.26551223 + t * (1.00002368 +\n            t * (0.37409196 + t * (0.09678418 + t * (-0.18628806 +\n            t * (0.27886807 + t * (-1.13520398 + t * (1.48851587 +\n            t * (-0.82215223 + t * 0.17087277)))))))));\n    return x >= 0 ? r : 2 - r;\n  }\n\n  playAudio(type){\n    let relativePath = '';\n    if (AppConstants.isProduction === false) {\n      relativePath = '../';\n    }\n    let audio = new Audio();\n    if (type === 'success') {\n      audio.src = relativePath + \"assets/audio/beep-25-success.mp3\";\n    } else if (type === 'error') {\n      audio.src = relativePath + \"assets/audio/beep-02.mp3\";\n    } else if (type === 'warn') {\n      audio.src = relativePath + \"assets/audio/beep-05.mp3\";\n    }\n    audio.load();\n    audio.play();\n  }\n\n  get(urlToFetch) {\n    let httpOptions = {};\n\n    let url = urlToFetch;\n    return this.http.get(url, httpOptions);\n  }\n\n  getZerodhaMargin(instru: any, month, curr_positions_trades, exchange?) {\n    let formData: any = new FormData();\n    formData.append('action', 'calculate');\n    /*\n    formData.append('exchange[]', 'CDS');\n    formData.append('product[]', 'OPT');\n    formData.append('scrip[]', 'USDINR20OCT');\n    formData.append('option_type[]', 'CE');\n    formData.append('strike_price[]', '73.5');\n    formData.append('qty[]', '30');\n    formData.append('trade[]', 'sell'); */\n\n    // console.log('getMargin curr_positions_trades: ', curr_positions_trades);\n\n    for (let i = 0; i < curr_positions_trades.length; i++) {\n      let element = curr_positions_trades[i];\n      /* {\n        qty: 50,\n        scrip: '11150CE',\n        expiry: '01OCT2020',\n        entry: 50,\n        exit: 0,\n      }, */\n      // -375x10950PEx01OCT2020x19.2x0x0&\n      // console.log('getMargin inside loop: ', element);\n\n      if (element.exit !== null && element.exit === 0) {\n        let pos_strike = element.scrip.slice(0, -2); // remove CE PE at end\n        let type = '';\n        if (element.scrip.includes('CE')) {\n          type = 'CE';\n        }\n        if (element.scrip.includes('PE')) {\n          type = 'PE';\n        }\n        let trade = 'sell';\n        if (element.qty > 0) {\n          trade = 'buy';\n        }\n\n        let exch = 'CDS';\n        if (exchange.includes('NIFTY')) {\n          exch = 'NFO';\n        }\n\n        let qtyMultiple = 1000;\n        if (exchange === 'NIFTY') {\n          qtyMultiple = 1;\n        } else if (exchange === 'BANKNIFTY') {\n          qtyMultiple = 1;\n        }\n\n        let scrip = instru + AppConstants.year + month;\n\n        formData.append('exchange[]', exch);\n        formData.append('product[]', 'OPT');\n        formData.append('scrip[]', scrip);\n        formData.append('option_type[]', type);\n        formData.append('strike_price[]', pos_strike);\n        formData.append('qty[]', Math.abs(element.qty) / qtyMultiple);\n        formData.append('trade[]', trade);\n      }\n\n    }\n\n    /* for (let pair of formData.entries()) {\n      console.log('getMargin pair: ', pair[0], pair[1]);\n    } */\n    // console.log('getMargin formdata: ', formData);\n\n    return this.http.post('https://zerodha.com/margin-calculator/SPAN', formData);/* .subscribe(\n      (response) => console.log('ZERODHA MARGIN: ', response),\n      (error) => console.log('ZERODHA MARGIN ERROR: ', error)\n    ); */\n  }\n\n  sendSubscriptions(strikes) {\n    if (AppConstants.SocketMode === 'aliceblue') {\n      this.aliceblueService.sendSubscriptions(strikes);\n    } else if (AppConstants.SocketMode === 'angel') {\n      this.angelService.sendSubscriptions(strikes);\n    }\n  }\n\n  connectWebsocket(access_token?) {\n    if (AppConstants.SocketMode === 'aliceblue') {\n      this.aliceblueService.connectWebsocket(access_token);\n    } else if (AppConstants.SocketMode === 'angel') {\n      this.angelService.angelLogin();\n    }\n  }\n\n  isSocketConnected() {\n    if (AppConstants.SocketMode === 'aliceblue') {\n      return this.websocketService.isSocketConnected();\n    } else if (AppConstants.SocketMode === 'angel') {\n      return this.angelWS.isSocketConnected();\n    }\n  }\n\n  auth() {\n    if (AppConstants.RestMode === 'fyers') {\n      return this.fyersService.auth();\n    }\n  }\n\n  getTokenUrl(auth_code, appId) {\n    if (AppConstants.RestMode === 'fyers') {\n      return this.fyersService.getTokenUrl(auth_code, appId);\n    }\n  }\n\n  getFunds(access_token) {\n    if (AppConstants.RestMode === 'fyers') {\n      return this.fyersService.getFunds(access_token);\n    }\n  }\n\n  getPositions(access_token) {\n    if (AppConstants.RestMode === 'fyers') {\n      return this.fyersService.getPositions(access_token);\n    }\n  }\n\n  getOrders(access_token) {\n    if (AppConstants.RestMode === 'fyers') {\n      return this.fyersService.getOrders(access_token);\n    }\n  }\n\n  placeOrder(access_token, symbol: string, qty: number, orderType: number, side: number,\n    productType: string, limitPrice: number, stopPrice: number) {\n    if (AppConstants.RestMode === 'fyers') {\n      let order = {\n        'symbol': symbol,\n        'qty': qty,\n        'type': orderType,\n        'side': side,\n        'productType': productType,\n        'limitPrice': limitPrice,\n        'stopPrice': stopPrice,\n        'disclosedQty': 0,\n        'validity': 'DAY',\n        'offlineOrder': 'False',\n        'stopLoss': 0,\n        'takeProfit': 0\n      };\n      console.log('Order: ' + order);\n      return this.fyersService.place_order(access_token, order);\n    }\n  }\n}\n","import { Component, Input, OnInit, SimpleChanges, ViewChild } from '@angular/core';\nimport { ChartDataSets, ChartOptions } from 'chart.js';\nimport { BaseChartDirective, Color, Label } from 'ng2-charts';\nimport { AppService } from '../app.service';\nimport * as pluginAnnotations from 'chartjs-plugin-annotation';\nimport { MapService } from '../common/map.service';\nimport { prependOnceListener } from 'process';\nimport { AppConstants } from '../common/application.constant';\nimport { Instrument, PositionTypeForPayOff } from '../common/models';\nimport { WebsocketService } from '../common/websocket.service';\nimport { ChartService } from './chart.service';\nimport { THIS_EXPR } from '@angular/compiler/src/output/output_ast';\nimport { AngelWebsocketService } from '../common/angelwebsocket.service';\n\n@Component({\n  selector: 'app-chart',\n  templateUrl: './chart.component.html',\n  styleUrls: ['./chart.component.scss']\n})\nexport class ChartComponent implements OnInit {\n\n  s1Trades = null;\n  s2Trades = null;\n  s3Trades = null;\n  s4Trades = null;\n  s5Trades = null;\n  currLoadNum = null;\n  payOffData = null;\n  curr_positions_trades = null;\n  expiryDate = null;\n  margin = null;\n  breakevens = null;\n  cePremium = 0;\n  pePremium = 0;\n  ceWeight = 0;\n  peWeight = 0;\n  ceLots = 0;\n  peLots = 0;\n  urlToFetch = ''; // 'https://opstra.definedge.com/api/free/strategybuilder/payoff/NIFTY$-375x11600CEx01OCT2020x10.27x5.1x0&-375x10600PEx01OCT2020x11.8x0x0&+150x10700PEx01OCT2020x52.05x0x0&-150x10650PEx01OCT2020x37.3x0x0&+225x10550PEx01OCT2020x31.87x13.4x0&-225x11200CEx01OCT2020x22.65x36.55x0&-150x11250CEx01OCT2020x17.65x30.75x0&+150x10550PEx01OCT2020x31.87x28.2x0&+150x10550PEx01OCT2020x32.7x13.4x0&-375x11350CEx01OCT2020x11.4x0x0$2020-10-01$0$0$0';\n  spot = null;\n  rest_res = null;\n  labels = [];\n  pnl = [];\n  zeroline = [];\n  instru = 'NIFTY';\n  stepValue = 25;\n  mean = 0;\n  variance = 1;\n  simulate_instru = 'BANKNIFTY';\n  simulate_strategy = false;\n  simulateExpiryDate = '2021-11-25';\n  simulateStartDate = '2021-11-22';\n  simulateCurrDateObj = new Date();\n  simulateTimeAdv = 'add';\n  simulateTimeMins = 5;\n  simulateCurrHour = 9;\n  simulateCurrMins = 15;\n  simulateCurrDateTimeString = '';\n  payoff_overlay = false;\n  hide_payoff = false;\n  use_hypo_future = false;\n  hypo_future_strike = 74.5;\n  payoff_range = 1000;\n  alerts = [];\n  public lineChartData: ChartDataSets[] = [\n    /* { data: [-65, -59, 80, 81, 56, -55, -40], label: 'Series A' },\n    { data: [0, 0, 0, 0, 0, 0, 0], label: 'Zero line' }, */\n    /* { data: [-65, -59, 80, 81, 56, -55, -40], label: 'PnL' },\n    { data: [0, 0, 0, 0, 0, 0, 0], label: 'Zero line' }, */\n  ];\n  public lineChartLabels: Label[] = [/* 'January', 'February', 'March', 'April', 'May', 'June', 'July' */];\n  /* public lineChartOptions: (ChartOptions & { annotation: any }) = {\n    responsive: true,\n  }; */\n  public lineChartOptions = {\n    /* responsive: true,\n    scales: {\n      xAxes: [{}],\n    },\n    animation: {\n      duration: 0\n    },\n    annotation: {\n      annotations: [\n        {\n          drawTime: 'afterDatasetsDraw',\n          type: 'line',\n          mode: 'vertical',\n          scaleID: 'x-axis-0',\n          value: this.spot,\n          borderColor: 'orange',\n          borderWidth: 1,\n          label: {\n            enabled: false,\n            fontColor: 'orange',\n            content: 'Nifty'\n          }\n        },\n      ],\n    } */\n  };\n  public lineChartColors: Color[] = [\n    /* {\n      borderColor: 'black',\n      backgroundColor: 'rgba(255,0,0,0.3)',\n    }, */\n    {\n      borderColor: '#35A4EB',\n      borderWidth: 2,\n      pointRadius: 0\n    },\n    {\n      borderColor: 'black',\n      borderWidth: 1,\n      pointRadius: 0\n    },\n    {\n      borderColor: '#35A4EB',\n      borderWidth: 2,\n      pointRadius: 0,\n      borderDash: [10, 5]\n    },\n    {\n      borderColor: 'black',\n      borderWidth: 1,\n      pointRadius: 0,\n      borderDash: [10, 5]\n    },\n  ];\n  public lineChartLegend = false; // true\n  public lineChartType = 'line';\n  public lineChartPlugins = [pluginAnnotations];\n\n  straddle1instru = 'USDINR';\n  straddle1expiryDate = null;\n  straddle1scrip = null;\n  straddle2instru = 'USDINR';\n  straddle2expiryDate = null;\n  straddle2scrip = null;\n  straddle3instru = 'USDINR';\n  straddle3expiryDate = null;\n  straddle3scrip = null;\n  public i1ChartData: ChartDataSets[] = [];\n  public i1ChartLabels: Label[] = [];\n  public i1ChartOptions = {\n    responsive: true,\n    scales: {\n      xAxes: [{}],\n      yAxes: [\n        {\n          id: 'y-axis-0',\n          position: 'left',\n          /* ticks: {\n            max: 1,\n          } */\n        },\n        {\n          id: 'y-axis-1',\n          position: 'right',\n          /* gridLines: {\n            color: 'rgba(255,0,0,0.3)',\n          },\n          ticks: {\n            fontColor: 'red',\n          } */\n          /* ticks: {\n            min: 71,\n            max: 77,\n          } */\n        }\n      ]\n    },\n    tooltips: {\n      mode: 'index',\n      intersect: false,\n    },\n    animation: {\n      duration: 0\n    },\n    elements: {\n      line: {\n        fill: false\n      }\n    }\n  };\n  public i1ChartColors: Color[] = [ { borderColor: '#35A4EB', borderWidth: 2, pointRadius: 0 }, { borderColor: 'black', borderWidth: 1, pointRadius: 0 }, ];\n  public i1ChartLegend = false; // true\n  public i1ChartType = 'line';\n  public i1ChartPlugins = [pluginAnnotations];\n\n  intradayWatch = [\n    { scrip: 'FUT', instru: 'USDINR', expiry: AppConstants.USDINR_FUT_MONTH, },\n    { scrip: '74CE', instru: 'USDINR', expiry: '2020-11-13', },\n    { scrip: '74PE', instru: 'USDINR', expiry: '2020-11-13', },\n    { scrip: '74.5CE', instru: 'USDINR', expiry: '2020-11-13', },\n    { scrip: '74.5PE', instru: 'USDINR', expiry: '2020-11-13', },\n    /* { scrip: '73.25CE', instru: 'USDINR', expiry: '2020-10-23', },\n    { scrip: '73.25PE', instru: 'USDINR', expiry: '2020-10-23', },\n    { scrip: '73.5CE', instru: 'USDINR', expiry: '2020-10-23', },\n    { scrip: '73.5PE', instru: 'USDINR', expiry: '2020-10-23', }, */\n  ];\n\n  @ViewChild(BaseChartDirective, { static: true }) chart: BaseChartDirective;\n\n  constructor(\n    private appService: AppService,\n    private mapService: MapService,\n    private websocketService: WebsocketService,\n    private angelWS: AngelWebsocketService,\n    private chartService: ChartService,\n  ) {\n    this.appService.payOffEvent$.subscribe(res => {\n      console.log('payOffEvent subcribe: ', res);\n      // this.rest_res = res;\n\n      let scrip = this.parseSymbol(res.symbol);\n      console.log('Adding scrip to strategy: ' + scrip);\n      /* let qty = -450;\n      if (this.instru === 'BANKNIFTY') {\n        qty = 25;\n      }\n      if (this.instru === 'USDINR') {\n        qty = 1000;\n      } */\n      this.addPosition(res.qty, scrip, res.ltp); // TODO: check instru for lot size\n    });\n\n    this.websocketService.websocketEvent$.subscribe(res => {\n      console.log('chart websocketEvent: ', res);\n      if (res === 'connected') {\n        this.doStrategiesSubscriptions();\n      }\n    });\n\n    this.angelWS.websocketEvent$.subscribe(res => {\n      console.log('chart websocketEvent: ', res);\n      if (res === 'connected') {\n        this.doStrategiesSubscriptions();\n      }\n    });\n\n    /* window.addEventListener('storage', () => {\n      // When local storage changes, dump the list to\n      // the console.\n      console.log('*** changed1');\n      console.log(JSON.parse(window.localStorage.getItem('addScripToStrategy')));\n    });\n\n    window.onstorage = function(e) {\n      console.log('received storage event', JSON.parse(e.newValue));\n      //if (e.key === 'userportal_s') {\n      //  let token = e.newValue;\n      //  that.chatService.setAccessToken(token);\n      //  localStorage.removeItem('userportal_s');\n      //}\n    }; */\n  }\n\n  parseSymbol(symbol) {\n    symbol = symbol.replace('NSE:', '');\n    let instru = '';\n    if (symbol.startsWith('NIFTY')) {\n      instru = 'NIFTY';\n      symbol = symbol.replace('NIFTY', '');\n    }\n    if (symbol.startsWith('BANKNIFTY')) {\n      instru = 'BANKNIFTY';\n      symbol = symbol.replace('BANKNIFTY', '');\n    }\n    if (symbol.startsWith('USDINR')) {\n      instru = 'USDINR';\n      symbol = symbol.replace('USDINR', '');\n    }\n    let type = '';\n    if (symbol.includes('CE')) {\n      type = 'CE';\n    }\n    if (symbol.includes('PE')) {\n      type = 'PE';\n    }\n    symbol = symbol.slice(0, -2); // remove CE PE at end\n\n    let strike = symbol.substring(5);\n    let expiry = symbol.substring(0, 5); // 20N08 20JUN 20911\n\n    return strike + type;\n  }\n\n  ngOnInit(): void {\n\n    /* let positions = {\n      instru: 'NIFTY',\n      expiry: '2020-10-01',\n      trades:\n      [\n        {\n          qty: -375,\n          scrip: '10950PE',\n          expiry: '01OCT2020',\n          entry: 19.2,\n          exit: 0,\n        },\n        {\n          qty: 150,\n          scrip: '11050PE',\n          expiry: '01OCT2020',\n          entry: 32.7,\n          exit: 0,\n        },\n        {\n          qty: -375,\n          scrip: '11450CE',\n          expiry: '01OCT2020',\n          entry: 10,\n          exit: 0,\n        },\n        {\n          qty: 225,\n          scrip: '11500CE',\n          expiry: '01OCT2020',\n          entry: 6.35,\n          exit: 0,\n        },\n        {\n          qty: -75,\n          scrip: '11200CE',\n          expiry: '01OCT2020',\n          entry: 95.95,\n          exit: 0,\n        },\n        {\n          qty: -75,\n          scrip: '11200PE',\n          expiry: '01OCT2020',\n          entry: 66.2,\n          exit: 0,\n        },\n        {\n          qty: 75,\n          scrip: '11250CE',\n          expiry: '01OCT2020',\n          entry: 67.25,\n          exit: 0,\n        },\n        {\n          qty: 75,\n          scrip: '11150PE',\n          expiry: '01OCT2020',\n          entry: 50,\n          exit: 0,\n        },\n      ]\n    };\n    localStorage.setItem(\n      'curr_positions1',\n      JSON.stringify(positions)\n    ); */\n\n    // localStorage.removeItem('curr_positions1');\n\n    // this.loadPayoffData();\n    // this.getPayoff();\n    // this.getMargin();\n\n    // this.doStrategiesSubscriptions();\n\n    /***** LOCAL STORAGE RETRIEVE SAVE ************************************* */\n    //this.chartService.loadIntradayData(this.intradayWatch);\n    //this.chartService.initFetchIntraday(this.intradayWatch);\n    //this.chartService.saveIntradayData();\n\n    /****************************************** */\n\n    this.alerts = [];\n    for (let index = 0; index < AppConstants.numAlerts; index += 1) {\n      this.alerts.push({selected: false, scrip1: '40000CE', scrip2: '', instru: 'BANKNIFTY', expiry: '2021-12-31', compare: '>', price: 20, status: '' });\n    }\n\n    let alert_interval = setInterval(() => {\n      if (this.alerts) {\n        this.alerts.forEach((alert)=> {\n          alert.status = '';\n          if (alert.selected) {\n\n            let ltp = null;\n            if (alert.scrip1) {\n\n              let ltp1 = this.getLTP_strike({ scrip : alert.scrip1 }, alert.instru, alert.expiry);\n              ltp = ltp1;\n              if (alert.scrip2) {\n                let ltp2 = this.getLTP_strike({ scrip : alert.scrip2 }, alert.instru, alert.expiry);\n                ltp += ltp2;\n              }\n            \n            } else { // index\n              ltp = this.mapService.getLtp(alert.instru);\n            }\n\n            if (alert.compare === '>') {\n              if (ltp > alert.price) {\n                alert.status = 'Alert';\n                this.appService.playAudio('success');\n              } else {\n                alert.status = '';\n              }\n            }\n            if (alert.compare === '<') {\n              if (ltp < alert.price) {\n                alert.status = 'Alert';\n                this.appService.playAudio('success');\n              } else {\n                alert.status = '';\n              }\n            }\n          }\n\n        });\n      }\n    }, 1000);\n\n    let refresh_interval = setInterval(() => {\n      if (!this.hide_payoff) {\n        this.updateChartData(this.payOffData);\n      }\n      this.getCEPEWeightage();\n    }, 5000);\n\n    let refresh_intervalP = setInterval(() => {\n      if (!this.hide_payoff) {\n        this.getPayoff();\n      }\n    }, 60000);\n\n    let refresh_intervalI = setInterval(() => {\n      //this.updateIntradayChartData();\n    }, 2000);\n\n    for (let num = 1; num <= 5; num++) {\n      let curr_positions = JSON.parse(localStorage.getItem('curr_positions' + num));\n\n      if (curr_positions && curr_positions.trades) {\n        if (num === 1) {\n          this.s1Trades = curr_positions;\n        }\n        if (num === 2) {\n          this.s2Trades = curr_positions;\n        }\n        if (num === 3) {\n          this.s3Trades = curr_positions;\n        }\n        if (num === 4) {\n          this.s4Trades = curr_positions;\n        }\n        if (num === 5) {\n          this.s5Trades = curr_positions;\n        }\n      }\n    }\n  }\n\n  exportToCSV(num): void {\n    let export_file_name = 'Strategy_' + num + '_' + this.getDateInFormat() + '.csv';\n    console.log('exporting: ', export_file_name);\n    let curr_positions = JSON.parse(localStorage.getItem('curr_positions' + num));\n    if (curr_positions && curr_positions.trades) {\n      let instru = curr_positions.instru;\n      let expiryDate = curr_positions.expiry;\n      let curr_positions_trades = curr_positions.trades;\n      console.log('exporting:', instru, expiryDate, curr_positions_trades);\n\n      let str = '';\n      str += instru + ',' + expiryDate + '\\r\\n';\n      curr_positions_trades.forEach(pos => {\n        let row = '';\n        row += pos.qty + ',' + pos.scrip + ',' + pos.expiry + ',' + pos.entry + ',' + pos.exit;\n        str += row + '\\r\\n';\n      });\n\n      const downloadFile = new Blob([str], {\n        type: 'application/x-msdownload',\n      });\n  \n      if (window.navigator && window.navigator.msSaveOrOpenBlob) {\n        // for IE\n        window.navigator.msSaveOrOpenBlob(downloadFile, export_file_name);\n      } else {\n        const fileURL = URL.createObjectURL(downloadFile);\n        const link = document.createElement('a');\n        link.href = fileURL;\n        link.target = '_blank';\n        document.body.appendChild(link);\n        link.download = export_file_name;\n        link.click();\n        link.parentNode.removeChild(link);\n      }\n    }\n  }\n\n  getDateInFormat() {\n    let date = new Date();\n    let d = date.getDate();\n    let m = date.getMonth() + 1; //Month from 0 to 11\n    let y = date.getFullYear();\n    let h = date.getHours();\n    let mins = date.getMinutes();\n    let s = date.getSeconds();\n    let format = '' + (d <= 9 ? '0' + d : d) + (m <= 9 ? '0' + m : m) + y + '_' + (h <= 9 ? '0' + h : h) + (mins <= 9 ? '0' + mins : mins) + (s <= 9 ? '0' + s : s);\n    return format;\n  }\n\n  uploadExpiryFile(fileInput) {\n    let fileReaded = fileInput.target.files[0];\n\n    let reader: FileReader = new FileReader();\n    reader.readAsText(fileReaded);\n\n    reader.onload = e => {\n      let csv: string = String(reader.result);\n      // console.log('csv:', csv);\n      this.loadExpiryFile(csv);\n    };\n  }\n\n  loadExpiryFile(importData) {\n    let allTextLines_all_data = importData.split(/\\r|\\n|\\r/);\n\n    let allTextLines = allTextLines_all_data.filter(function(elem) {\n      return elem !== '';\n    });\n\n    // console.log('allTextLines: ', allTextLines);\n\n    let firstLine = allTextLines[0].split(','); // ignore first line header\n    \n    MapService.simulateData = {};\n    for (let index = 1; index < allTextLines.length; index++) {\n\n      // Ticker\tDate/Time\tOpen\tHigh\tLow\tClose\tVolume\tOpen Interest\n      // BANKNIFTY, 30/07/21 9:15, 34698.8, 34698.8, 34445.4, 34607.7, 0, 0\n\n      let split = allTextLines[index].split(',');\n\n      let timeDict = {};\n      timeDict = MapService.simulateData[split[0]]; // split[0] is the instrument name\n      if (!timeDict) {\n        timeDict = {}\n      }\n\n      timeDict[split[1]] = Number(split[5]) // closing price\n      MapService.simulateData[split[0]] = timeDict\n\n    }\n\n    console.log('simulateData', MapService.simulateData);\n\n    if (MapService.simulateData) {\n      AppConstants.isSimulatedStrategy = true;\n    }\n\n    this.simulateCurrDateObj = new Date(this.simulateStartDate);\n    this.simulateCurrDateObj.setHours(this.simulateCurrHour);\n    this.simulateCurrDateObj.setMinutes(this.simulateCurrMins);\n\n    let curr_date_string = '' + ('0' + this.simulateCurrDateObj.getDate()).slice(-2) + '-' + ('0' + (this.simulateCurrDateObj.getMonth() + 1)).slice(-2) + '-' + this.simulateCurrDateObj.getFullYear();\n    this.simulateCurrDateTimeString = curr_date_string + ' ' + ('0' + this.simulateCurrDateObj.getHours()).slice(-2) + ':' + ('0' + this.simulateCurrDateObj.getMinutes()).slice(-2) + ':00'; // '21-10-2021 09:15:00'\n\n    this.loadSimulatedOCForTime(this.simulate_instru, this.simulateCurrDateTimeString, this.simulateExpiryDate);\n\n    this.loadOptionChain(this.simulate_instru, this.simulateExpiryDate);\n  }\n\n  loadSimulatedNextMins() {\n\n    if (this.simulateTimeAdv === 'add') {\n      this.simulateCurrDateObj.setMinutes(this.simulateCurrDateObj.getMinutes() + Number(this.simulateTimeMins));\n\n      if ((this.simulateCurrDateObj.getHours() === 15 && this.simulateCurrDateObj.getMinutes() > 30) || this.simulateCurrDateObj.getHours() > 15) {\n        let eod = new Date(this.simulateCurrDateObj);\n        eod.setHours(15);\n        eod.setMinutes(30);\n\n        let diff = this.simulateCurrDateObj.getTime() - eod.getTime(); // difference in milliseconds\n\n        let newday = new Date(this.simulateCurrDateObj);\n        newday.setDate(newday.getDate() + 1);\n        newday.setHours(9);\n        newday.setMinutes(15);\n        newday.setMilliseconds(newday.getMilliseconds() + diff);\n\n        this.simulateCurrDateObj = new Date(newday);\n\n        //console.log(eod, diff, newday);\n      }\n    }\n\n    if (this.simulateTimeAdv === 'subtract') {\n\n      this.simulateCurrDateObj.setMinutes(this.simulateCurrDateObj.getMinutes() - Number(this.simulateTimeMins));\n    \n      if ((this.simulateCurrDateObj.getHours() === 9 && this.simulateCurrDateObj.getMinutes() < 15) || this.simulateCurrDateObj.getHours() < 9) {\n        let sod = new Date(this.simulateCurrDateObj);\n        sod.setHours(9);\n        sod.setMinutes(15);\n\n        let diff = sod.getTime() - this.simulateCurrDateObj.getTime(); // difference in milliseconds\n\n        let newday = new Date(this.simulateCurrDateObj);\n        newday.setDate(newday.getDate() - 1);\n        newday.setHours(15);\n        newday.setMinutes(30);\n        newday.setMilliseconds(newday.getMilliseconds() - diff);\n\n        this.simulateCurrDateObj = new Date(newday);\n\n        //console.log(sod, diff, newday);\n      }\n    }\n\n    let curr_date_string = '' + ('0' + this.simulateCurrDateObj.getDate()).slice(-2) + '-' + ('0' + (this.simulateCurrDateObj.getMonth() + 1)).slice(-2) + '-' + this.simulateCurrDateObj.getFullYear();\n    this.simulateCurrDateTimeString = curr_date_string + ' ' + ('0' + this.simulateCurrDateObj.getHours()).slice(-2) + ':' + ('0' + this.simulateCurrDateObj.getMinutes()).slice(-2) + ':00'; // '21-10-2021 09:15:00'\n\n    this.loadSimulatedOCForTime(this.simulate_instru, this.simulateCurrDateTimeString, this.simulateExpiryDate);\n  }\n\n  loadSimulatedOCForTime(instru, dateTimeString, expiry_date) {\n\n    let curr_date_time = dateTimeString;\n\n    console.log('loadSimulatedOCForTime', curr_date_time);\n\n    for (let [key, value] of Object.entries(MapService.simulateData)) {\n      // console.log(`${key}: ${value}`);\n\n      if (key === instru || (key.startsWith(instru) && (key.endsWith('CE') || key.endsWith('PE')))) {\n\n        if (key === instru) {\n          let symbol = instru;\n          if (instru === 'NIFTY') {\n            symbol = 'NIFTY50';\n          }\n          this.mapService.setLtp(symbol, value[curr_date_time]);\n        } else {\n          let scrip = key;\n          scrip = scrip.replace(instru, '');\n          scrip = scrip.replace('WK', '');\n    \n          let symbol = this.getMapKeyString(instru, expiry_date, scrip);\n    \n          let ltp = value[curr_date_time];\n    \n          this.mapService.setLtp(symbol, ltp);\n        }\n      }\n    }\n\n    this.getPayoff();\n    \n    console.log('ltpMap', this.mapService.ltpMap);\n  }\n\n  getMapKeyString(instru, expiry_date, scrip) {\n    let is_monthly_expiry = false;\n    let expiryDate = new Date(expiry_date);\n    expiryDate.setHours(0, 0, 0, 0);\n\n    let tempmonthlyExpiryDates = AppConstants.monthlyExpiryDates;\n    if (instru === 'USDINR') {\n      tempmonthlyExpiryDates = AppConstants.monthlyExpiryDatesUSDINR;\n    }\n    for (let key in tempmonthlyExpiryDates) {\n      if (tempmonthlyExpiryDates.hasOwnProperty(key)) {\n          // console.log(key + \" -> \" + tempmonthlyExpiryDates[key] + ' ' + expiryDate);\n          if (expiryDate.getTime() === tempmonthlyExpiryDates[key].getTime()) {\n            // console.log('monthly expiry matched');\n            is_monthly_expiry = true;\n            break;\n          }\n      }\n    }\n\n    let expiry = null;\n    if (is_monthly_expiry) {\n      expiry = '' + (expiryDate.getFullYear() - 2000) + AppConstants.monthsMapping[expiryDate.getMonth() + 1];\n    } else {\n      let expiryMonth = null;\n      if (expiryDate.getMonth() + 1 === 10) {\n        expiryMonth = 'O';\n      } else if (expiryDate.getMonth() + 1 === 11) {\n        expiryMonth = 'N';\n      } else if (expiryDate.getMonth() + 1 === 12) {\n        expiryMonth = 'D';\n      } else {\n        expiryMonth = expiryDate.getMonth() + 1;\n      }\n      expiry = '' + (expiryDate.getFullYear() - 2000) + (expiryMonth) + ('0' + expiryDate.getDate()).slice(-2);\n    }\n\n    let str = instru + expiry + scrip;\n\n    return str;\n  }\n\n\n  importCSV(fileInput, num) {\n    let fileReaded = fileInput.target.files[0];\n\n    let reader: FileReader = new FileReader();\n    reader.readAsText(fileReaded);\n\n    reader.onload = e => {\n      let csv: string = String(reader.result);\n      console.log('csv:', csv);\n      this.loadPayoffData(num, true, csv);\n    };\n  }\n\n  loadImportedPositions(importData) {\n    let allTextLines_all_data = importData.split(/\\r|\\n|\\r/);\n\n    let allTextLines = allTextLines_all_data.filter(function(elem) {\n      return elem !== '';\n    });\n\n    console.log('allTextLines: ', allTextLines);\n\n    let firstLine = allTextLines[0].split(',');\n    let instru = firstLine[0];\n    let expiryDate = firstLine[1];\n    let trades = [];\n    for (let index = 1; index < allTextLines.length; index++) {\n      let line = allTextLines[index].split(',');\n      trades.push({ qty: Number(line[0]), scrip: line[1], expiry: line[2], entry: Number(line[3]), exit: Number(line[4]) });\n    }\n\n    let curr_positions = { instru: '', expiry: '', trades: {} };\n    curr_positions.instru = instru;\n    curr_positions.expiry = expiryDate;\n    curr_positions.trades = trades;\n\n    return curr_positions;\n  }\n\n  loadOptionChain(instru = null, expiryDate = null) {\n    if (instru && expiryDate) {\n      this.chartService.optionChainEvent$.next([instru, expiryDate]);\n    } else if (this.instru && this.expiryDate) {\n      this.chartService.optionChainEvent$.next([this.instru, this.expiryDate]);\n    } else {\n      console.log('No data to load');\n    }\n  }\n\n  doSingleStrategySubscription(alert?) {\n    if (this.instru && this.expiryDate && this.curr_positions_trades) {\n      this.subscribeStrategiesPositionsFeed(this.instru, this.expiryDate, this.curr_positions_trades);\n    } else {\n      console.log('Nothing to subscribe');\n    }\n  }\n\n  doStrategiesSubscriptions() {\n    for (let num = 1; num <= 5; num++) {\n      let curr_positions = JSON.parse(localStorage.getItem('curr_positions' + num));\n\n      if (curr_positions && curr_positions.trades) {\n        if (num === 1) {\n          this.s1Trades = curr_positions;\n        }\n        if (num === 2) {\n          this.s2Trades = curr_positions;\n        }\n        if (num === 3) {\n          this.s3Trades = curr_positions;\n        }\n        if (num === 4) {\n          this.s4Trades = curr_positions;\n        }\n        if (num === 5) {\n          this.s5Trades = curr_positions;\n        }\n        let instru = curr_positions.instru;\n        let expiryDate = curr_positions.expiry;\n        let trades = curr_positions.trades;\n        this.subscribeStrategiesPositionsFeed(instru, expiryDate, trades);\n      }\n    }\n\n    this.subscribeAlerts();\n\n    /* this.intradayWatch.forEach(element => {\n      if (element.scrip !== 'FUT' && element.scrip !== 'SPOT') {\n        this.subscribeIntradayWatchFeed(element.instru, element.expiry, element.scrip);\n      }\n    }); */\n  }\n\n  subscribeAlerts() {\n    let sub = [];\n    if (this.alerts) {\n      this.alerts.forEach((pos) => {\n        if (pos.selected) {\n\n          if (pos.scrip1) {\n            let e1 = this.getSubscriptionObject(pos.scrip1, pos.instru, pos.expiry);\n            sub.push(e1);\n          }\n          \n          if (pos.scrip2) {\n            let e2 = this.getSubscriptionObject(pos.scrip2, pos.instru, pos.expiry);\n            sub.push(e2);\n          }\n        }\n      });\n    }\n    console.log('alerts feed', sub);\n    this.appService.sendSubscriptions(sub);\n  }\n\n  getSubscriptionObject(scrip, instru, expiry) {\n    let symbol = scrip;\n    let type = '';\n    if (symbol.includes('CE')) {\n      type = 'CE';\n    }\n    if (symbol.includes('PE')) {\n      type = 'PE';\n    }\n    console.log('getSubscriptionObject symbol: ' + symbol);\n    symbol = symbol.slice(0, -2); // remove CE PE at end\n\n    let expiryDate = new Date(expiry).toDateString(); // expiry_date\n\n    let e1 = new Instrument();\n    e1.expiry = expiryDate;\n    e1.instru = instru;\n    e1.strike = Number(symbol);\n    e1.type = type;\n\n    return e1;\n  }\n\n  subscribeStrategiesPositionsFeed(instru, expiry_date, trades) {\n    let sub = [];\n\n    trades.forEach(pos => {\n      let e1 = this.getSubscriptionObject(pos.scrip, instru, pos.expiry);\n      sub.push(e1);\n    });\n\n    let expiryDate = new Date(expiry_date).toDateString();\n\n    let e1 = new Instrument();\n    e1.expiry = expiryDate;\n    e1.instru = instru;\n    e1.strike = Number(this.hypo_future_strike);\n    e1.type = 'CE';\n    sub.push(e1);\n\n    let e2 = new Instrument();\n    e2.expiry = expiryDate;\n    e2.instru = instru;\n    e2.strike = Number(this.hypo_future_strike);\n    e2.type = 'PE';\n    sub.push(e2);\n\n    /* let ltp = 14000; // TODO: HOW TO DECIDE LTP OF INSTRUMENT AT TIME OF INITIAL SUBSCRIPTIONS !?\n    let range = 1000;\n    let range_multiple = 50;\n    let increment = 50;\n    if (this.instru === 'BANKNIFTY') {\n      ltp = 32000;\n      range = 3000;\n      range_multiple = 100;\n      increment = 100;\n    }\n    if (this.instru === 'USDINR') {\n      ltp = this.hypo_future_strike;\n      range = 2;\n      range_multiple = 0.25;\n      increment = 0.25;\n    }\n\n    let round_ltp = (Math.round(ltp / range_multiple) * range_multiple);\n    let lower_range = round_ltp - range; // TODO: range depends on instru\n    let upper_range = round_ltp + range;\n\n    for (let point = lower_range; point <= upper_range; point += increment) {\n\n      let expiryDate = new Date(expiry_date).toDateString();\n\n      let e1 = new Instrument();\n      e1.expiry = expiryDate;\n      e1.instru = instru;\n      e1.strike = Number(point);\n      e1.type = 'CE';\n      sub.push(e1);\n\n      let e2 = new Instrument();\n      e2.expiry = expiryDate;\n      e2.instru = instru;\n      e2.strike = Number(point);\n      e2.type = 'PE';\n      sub.push(e2);\n    } */\n\n    console.log('strategies positions feed', sub);\n    this.appService.sendSubscriptions(sub);\n  }\n\n  subscribeIntradayWatchFeed(instru, expiry_date, scrip) {\n    let sub = [];\n\n    let symbol = scrip;\n    let type = '';\n    if (symbol.includes('CE')) {\n      type = 'CE';\n    }\n    if (symbol.includes('PE')) {\n      type = 'PE';\n    }\n    console.log('subscribeIntradayWatchFeed symbol: ' + symbol);\n    symbol = symbol.slice(0, -2); // remove CE PE at end\n\n    let expiryDate = new Date(expiry_date).toDateString();\n\n    let e1 = new Instrument();\n    e1.expiry = expiryDate;\n    e1.instru = instru;\n    e1.strike = Number(symbol);\n    e1.type = type;\n    sub.push(e1);\n\n    console.log('intraday watch feed', sub);\n    this.appService.sendSubscriptions(sub);\n  }\n\n\n  loadPayoffData(num, isImported = false, importData = null) {\n    let curr_positions = null;\n    if (!isImported) {\n      curr_positions = JSON.parse(localStorage.getItem('curr_positions' + num));\n    } else {\n      curr_positions = this.loadImportedPositions(importData);\n    }\n    this.currLoadNum = num;\n    console.log('curr_positions: ', curr_positions);\n\n    this.curr_positions_trades = null;\n    if (curr_positions && curr_positions.trades) {\n      this.instru = curr_positions.instru;\n      this.expiryDate = curr_positions.expiry;\n      this.curr_positions_trades = curr_positions.trades;\n\n      this.curr_positions_trades.forEach(e => {\n        e.selected = true;\n        e.selectedActual = true;\n      })\n\n      if (this.instru === 'NIFTY') {\n        this.stepValue = 50;\n      } else if (this.instru === 'BANKNIFTY') {\n        this.stepValue = 25;\n      } else {\n        this.stepValue = 1000;\n      }\n\n      this.curr_positions_trades.sort((a, b) => {\n\n        // -1 means a should come before b\n        // 1 means a should come after b\n\n        /* \n        exit and exit\n        exit and no exit\n        no exit and exit\n        same strike no exit and no exit\n        no exit and no exit\n        */\n\n        // console.log(a.exit, b.exit);\n\n        if (a.exit !== 0 && b.exit !== 0) {\n          //return b.scrip.localeCompare(a.scrip);\n          return this.compareForSorting(a.scrip, b.scrip);\n        }\n        if (a.exit !== 0 && b.exit === 0) {\n          return -1;\n        }\n        if (a.exit === 0 && b.exit !== 0) {\n          return 1;\n        }\n        let a_symbol = a.scrip.slice(0, -2);\n        let b_symbol = b.scrip.slice(0, -2);\n        if (a_symbol === b_symbol && a.scrip.includes('CE') && b.scrip.includes('PE')) { // same strike CE PE, CE should occur first\n          return -1;\n        }\n        if (a_symbol === b_symbol && a.scrip.includes('PE') && b.scrip.includes('CE')) { // same strike CE PE, CE should occur first\n          return 1;\n        }\n        //return b.scrip.localeCompare(a.scrip); // negative if a is before b\n        return this.compareForSorting(a.scrip, b.scrip);\n\n      });\n    }\n    AppConstants.curr_positions_trades = this.curr_positions_trades;\n    this.constructUrlToFetch();\n    this.getCEPEWeightage();\n  }\n\n  compareForSorting(ascrip, bscrip) {\n    \n    // All CE strikes to be before PE\n    if (ascrip.includes('CE') && bscrip.includes('PE')) { // CE should occur first\n      return -1;\n    }\n    if (ascrip.includes('PE') && bscrip.includes('CE')) { // CE should occur first\n      return 1;\n    }\n\n    // same type of options\n    let a_symbol = ascrip.slice(0, -2);\n    let b_symbol = bscrip.slice(0, -2);\n    if (a_symbol > b_symbol) {\n      return -1;\n    }\n    return 1;\n    \n  }\n\n  constructUrlToFetch() {\n    if (this.curr_positions_trades) {\n      let url = 'https://opstra.definedge.com/api/free/strategybuilder/payoff/NIFTY$';\n      this.curr_positions_trades.forEach(element => {\n        /* {\n          qty: 75,\n          scrip: '11150CE',\n          expiry: '01OCT2020',\n          entry: 50,\n          exit: 0,\n        }, */\n        // -375x10950PEx01OCT2020x19.2x0x0&\n        let pos = '' + (element.qty <= 0 ? element.qty : '+' + element.qty) + 'x' + element.scrip + 'x' + element.expiry + 'x' + element.entry + 'x' + element.exit + 'x0&';\n        url += pos;\n      });\n      url = url.replace(/&\\s*$/, ''); // remove last &\n      url += '$' + this.expiryDate;\n      url += '$0$0$0';\n      // $2020-10-01$0$0$0\n      console.log('urlToFetch: ' + url);\n      this.urlToFetch = url;\n    }\n  }\n\n  addPosition(qty = null, scrip = null, entry = null) {\n    if (this.curr_positions_trades === null) {\n      this.curr_positions_trades = [];\n    }\n    let d = new Date(this.expiryDate);\n    let monthNames = [ 'JAN', 'FEB', 'MAR', 'APR',\n                      'MAY', 'JUN', 'JUL', 'AUG',\n                      'SEP', 'OCT', 'NOV', 'DEC' ];\n    let day = ('0' + d.getDate()).slice(-2);\n    let monthIndex = d.getMonth();\n    let monthName = monthNames[monthIndex];\n    let year = d.getFullYear();\n    let dateString = day + monthName + year;\n    // console.log('***: ', day + monthName + year);\n    this.curr_positions_trades.push({ qty: qty, scrip: scrip, expiry: dateString, entry: entry, exit: 0, selected: true, selectedActual: false });\n  }\n\n  splitPosition(pos) {\n    this.curr_positions_trades.push({ qty: 0, scrip: pos.scrip, expiry: pos.expiry, entry: pos.entry, exit: pos.exit, selected: true, selectedActual: false });\n  }\n\n  deletePosition(pos) {\n\n    let found_index = -100;\n    for (let index = 0; index < this.curr_positions_trades.length; index++) {\n      let element = this.curr_positions_trades[index];\n      if (element.qty === pos.qty && element.scrip === pos.scrip && element.expiry === pos.expiry && element.entry === pos.entry &&\n          element.exit === pos.exit) {\n        found_index = index;\n        break;\n      }\n    }\n    if (found_index !== -100) {\n      this.curr_positions_trades.splice(found_index, 1);\n    }\n  }\n\n  calculatePayoff() {\n    this.constructUrlToFetch();\n    this.getPayoff();\n    this.getMargin();\n  }\n\n  reloadPayoffData(num) {\n    this.loadPayoffData(num);\n    this.getPayoff();\n    this.getMargin();\n  }\n\n  savePositions(num) {\n\n    // To combine positions of same scrip\n    // other way is iterating through the array and use Map with scrip as key and rest of params as value\n    const combinedItems = (arr = []) => {\n      const res = arr.reduce((acc, obj) => {\n        \n        console.log(obj);\n        \n        if (obj.exit !== 0) {\n          acc.push(obj);\n          return acc;\n        }\n        \n        //this.curr_positions_trades.push({ qty: qty, scrip: scrip, expiry: dateString, entry: entry, exit: 0 });\n\n        let found = false;\n\n        for (let i = 0; i < acc.length; i++) {\n          if (acc[i].exit === 0 && acc[i].scrip === obj.scrip && acc[i].expiry === obj.expiry) {\n            found = true;\n            acc[i].entry = ((acc[i].entry * acc[i].qty) + (obj.entry * obj.qty)) / (acc[i].qty + obj.qty);\n            acc[i].entry = (Math.round((acc[i].entry + 0.00001) * 10000) / 10000); // round to four decimals\n            acc[i].qty += obj.qty;\n          }\n        }\n        if (found === false) {\n          acc.push(obj);\n        }\n        return acc;\n      }, []);\n      return res;\n    }\n    this.curr_positions_trades = combinedItems(this.curr_positions_trades);\n    //console.log(ne);\n    console.log(this.curr_positions_trades);\n\n    if (confirm('Sure save ' + num + '?')) {\n      let curr_positions = { instru: '', expiry: '', trades: {} };\n\n      curr_positions.instru = this.instru;\n      curr_positions.expiry = this.expiryDate;\n\n      this.curr_positions_trades.forEach(element => {\n        delete element.selected;\n        delete element.selectedActual;\n        delete element.pnl;\n      });\n\n      curr_positions.trades = this.curr_positions_trades;\n\n      console.log('Saving positions: ', curr_positions);\n      console.log('Saving positions json: ', JSON.stringify(curr_positions));\n      localStorage.setItem(\n        'curr_positions' + num,\n        JSON.stringify(curr_positions)\n      );\n      this.reloadPayoffData(num);\n      // this.doStrategiesSubscriptions();\n\n      for (let num = 1; num <= 5; num++) {\n        let curr_positions = JSON.parse(localStorage.getItem('curr_positions' + num));\n  \n        if (curr_positions && curr_positions.trades) {\n          if (num === 1) {\n            this.s1Trades = curr_positions;\n          }\n          if (num === 2) {\n            this.s2Trades = curr_positions;\n          }\n          if (num === 3) {\n            this.s3Trades = curr_positions;\n          }\n          if (num === 4) {\n            this.s4Trades = curr_positions;\n          }\n          if (num === 5) {\n            this.s5Trades = curr_positions;\n          }\n        }\n      }\n    }\n  }\n\n  getCEPEWeightage() {\n    this.cePremium = 0;\n    this.pePremium = 0;\n    this.ceWeight = 0;\n    this.peWeight = 0;\n    this.ceLots = 0;\n    this.peLots = 0;\n    if (this.curr_positions_trades) {\n      this.curr_positions_trades.forEach(element => {\n\n        if (element.exit === null || element.exit === 0) {\n          if (element.scrip.includes('CE') && element.qty < 0) {\n            let mkt_price = this.getLTP_strike({ scrip : element.scrip }, this.instru, element.expiry);\n            let currPremium = element.qty * mkt_price;\n            this.cePremium += currPremium;\n            this.ceLots += element.qty / 1000;\n          }\n          if (element.scrip.includes('PE') && element.qty < 0) {\n            let mkt_price = this.getLTP_strike({ scrip : element.scrip }, this.instru, element.expiry);\n            let currPremium = element.qty * mkt_price;\n            this.pePremium += currPremium;\n            this.peLots += element.qty / 1000;\n          }\n        }\n\n        let totalCEPE = this.cePremium + this.pePremium;\n        this.ceWeight = (this.cePremium / totalCEPE) * 100;\n        this.peWeight = (this.pePremium / totalCEPE) * 100;\n\n        this.cePremium = Math.round(this.cePremium);\n        this.pePremium = Math.round(this.pePremium);\n        this.ceWeight = Math.round(this.ceWeight);\n        this.peWeight = Math.round(this.peWeight);\n      });\n    }\n  }\n\n  getPayoff() {\n\n    let myPayoff = { chart: [] };\n    let ltp = 0;\n    if (this.instru === 'USDINR') {\n      if (this.use_hypo_future) {\n        let ce_premium = this.getLTP_strike({ scrip : this.hypo_future_strike + 'CE' }, this.instru, this.expiryDate);\n        let pe_premium = this.getLTP_strike({ scrip : this.hypo_future_strike + 'PE' }, this.instru, this.expiryDate);\n        ltp = ce_premium - pe_premium + this.hypo_future_strike; // Find future price from Put Call Parity\n        ltp = (Math.round((ltp + 0.00001) * 100) / 100);\n        // console.log('hypo fut:' + ltp);\n      } else {\n        ltp = parseFloat(this.getInstruLTP());\n        ltp = (Math.round((ltp + 0.00001) * 100) / 100); // TODO: ltp rounding for usdinr to two decimal\n      }\n    } else {\n      ltp = parseInt(this.getInstruLTP());\n    }\n    console.log('ltp is: ', ltp);\n    let range = 1000;\n    let increment = 1;\n    if (this.instru === 'BANKNIFTY') {\n      range = 3000;\n    }\n    if (this.instru === 'USDINR') {\n      range = 2;\n      increment = 0.01;\n    }\n\n    if (this.payoff_range) {\n      range = this.payoff_range;\n    }\n    \n    let lower_range = ltp - range;\n    let upper_range = ltp + range;\n    let pnlForBreakeven = [];\n\n    let pnlExitedPos = 0;\n\n    let actualPos = [];\n\n    if (this.curr_positions_trades) {\n\n      this.curr_positions_trades.forEach(element => {\n        if (element.exit && element.exit > 0) {\n          let pospnl = this.getPnL(element);\n          pnlExitedPos += pospnl;\n        }\n\n        if (this.payoff_overlay && element.selectedActual === true) {\n          actualPos.push(element);\n        }\n      });\n\n      for (let point = lower_range; point <= upper_range; point += increment) {\n        let pnl = 0;\n        let t0 = 0;\n        let overlayPnL = 0;\n        let overlayT0 = 0;\n        let arr = [];\n\n        point = (Math.round((point + 0.00001) * 100) / 100); // for USDINR two decimal places\n\n        if (this.payoff_overlay) {\n          arr = this.calculatePnLAtPoint(this.curr_positions_trades, point, ltp, true);\n          overlayPnL += arr[0];\n          overlayPnL += pnlExitedPos;\n          overlayPnL = (Math.round((overlayPnL + 0.00001) * 100) / 100);\n\n          overlayT0 += arr[1];\n          overlayT0 += pnlExitedPos;\n          overlayT0 = (Math.round((overlayT0 + 0.00001) * 100) / 100);\n\n          arr = this.calculatePnLAtPoint(actualPos, point, ltp, false);\n\n        } else {\n          arr = this.calculatePnLAtPoint(this.curr_positions_trades, point, ltp, false);\n        }\n\n        pnl += arr[0];\n        pnl += pnlExitedPos;\n        pnl = (Math.round((pnl + 0.00001) * 100) / 100);\n\n        t0 += arr[1];\n        t0 += pnlExitedPos;\n        t0 = (Math.round((t0 + 0.00001) * 100) / 100);\n\n        pnlForBreakeven.push(pnl);\n        myPayoff.chart.push({ Final: pnl, StockPrice: point, Today: t0, Overlay: overlayPnL, OverlayT0: overlayT0 });\n      }\n\n      console.log('myPayoff:', myPayoff);\n\n      this.payOffData = myPayoff;\n      this.updateChartData(myPayoff);\n\n      this.breakevens = '';\n      for (let i = 1; i < myPayoff.chart.length; i++) {\n        let element = myPayoff.chart[i];\n        let prev_element = myPayoff.chart[i - 1];\n        if ((element.Final > 0 && prev_element.Final <= 0) || (element.Final < 0 && prev_element.Final >= 0)) {\n          this.breakevens = this.breakevens + prev_element.StockPrice + ' ';\n        }\n      }\n    }\n\n    /* this.appService.get(this.urlToFetch).subscribe(res => {\n      console.log('getPayoff: ', res);\n\n      // this.payOffData = res;\n\n      if ((res as any).breakevens !== null) {\n        this.breakevens = (res as any).breakevens;\n      }\n\n      // this.updateChartData(res);\n\n      // this.appService.payOffEvent$.next(res);\n    },\n    error => {\n      console.log('getPayoff error', error);\n    }); */\n  }\n\n  calculatePnLAtPoint(positions, point, ltp, overlay) {\n    let pnl = 0;\n    let t0 = 0;\n    positions.forEach(element => {\n      /*  {\n        qty: 75,\n        scrip: '11150CE',\n        expiry: '01OCT2020',\n        entry: 50,\n        exit: 0,\n      }, */\n\n      if (element.exit === null || element.exit === 0) {\n        let type = null;\n        let typet0 = null;\n        if (element.scrip.includes('CE') && element.qty < 0) {\n          type = PositionTypeForPayOff.CEsell;\n          typet0 = PositionTypeForPayOff.CE;\n        }\n        if (element.scrip.includes('PE') && element.qty < 0) {\n          type = PositionTypeForPayOff.PEsell;\n          typet0 = PositionTypeForPayOff.PE;\n        }\n        if (element.scrip.includes('CE') && element.qty > 0) {\n          type = PositionTypeForPayOff.CEbuy;\n          typet0 = PositionTypeForPayOff.CE;\n        }\n        if (element.scrip.includes('PE') && element.qty > 0) {\n          type = PositionTypeForPayOff.PEbuy;\n          typet0 = PositionTypeForPayOff.PE;\n        }\n        let pos_strike = element.scrip.slice(0, -2); // remove CE PE at end\n\n        let expiry = element.expiry; // this.expiryDate;\n\n        let d1 = new Date(expiry); // position expiry\n        let d2 = new Date(this.expiryDate);\n        if (d1.getFullYear() === d2.getFullYear() && d1.getMonth() === d2.getMonth() && d1.getDate() === d2.getDate()) {\n          if (overlay && !element.selected) {\n            pnl += this.getPnL(element);\n          } else {\n            pnl += this.calculatePnLAtPointForStrike(point, pos_strike, element.qty, element.entry, type);\n          }\n        } else {\n          let mkt_price = this.getLTP_strike({ scrip : element.scrip }, this.instru, expiry);\n          let iv = this.calculateIV(ltp, pos_strike, AppConstants.INTEREST_RATE, expiry, typet0, mkt_price);\n          // console.log('*** ', pos_strike, typet0, expiry, iv);\n\n          let d3 = new Date();\n          let add_days = Math.round((d2.getTime() - d3.getTime()) / (1000 * 3600 * 24));\n\n          console.log('add_days: ', add_days);\n          let t0_ = this.calculateT0AtPointForStrike(point, pos_strike, AppConstants.INTEREST_RATE, expiry, iv, typet0, add_days);\n          t0_ = t0_ - element.entry;\n          t0_ = t0_ * element.qty;\n          pnl += t0_;\n        }\n\n        // T+0 calculation:\n\n        if (overlay && !element.selected) {\n          t0 += this.getPnL(element);\n        } else {\n          let mkt_price = this.getLTP_strike({ scrip : element.scrip }, this.instru, expiry);\n          let iv = this.calculateIV(ltp, pos_strike, AppConstants.INTEREST_RATE, expiry, typet0, mkt_price);\n          let t0_ = this.calculateT0AtPointForStrike(point, pos_strike, AppConstants.INTEREST_RATE, expiry, iv, typet0);\n          // console.log('*** ', pos_strike, typet0, expiry, mkt_price, iv, t0_);\n          t0_ = t0_ - element.entry;\n          t0_ = t0_ * element.qty;\n          t0 += t0_;\n        }\n        \n      }\n    });\n\n    //console.log('t0', t0);\n    return [pnl, t0];\n  }\n\n  calculateIV(spot, strike, int_rate, expiry_date, type, mkt_price) {\n    let high = 80;\n    let low = 0;\n    let iv = 0;\n\n    let date_expiry = new Date(expiry_date);\n\n    let date_now = new Date();\n    if (this.simulate_strategy) {\n      date_now = this.simulateCurrDateObj;\n    }\n    \n    let seconds = Math.floor((date_expiry.getTime() - date_now.getTime()) / 1000);\n    let\tminutes = Math.floor(seconds / 60);\n    let\thours = Math.floor(minutes / 60);\n    let\tdelta_t = (Math.floor(hours / 24)) / 365.0;\n\n    /* if (hours < 24) {\n      return 0;\n    } */\n\n    while ((high - low) > 0.0001) {\n      if (this.calculateT0AtPointForStrike(spot, strike, int_rate, expiry_date, (high + low) / 2, type) > mkt_price) {\n        high = (high + low) / 2;\n      } else {\n        low = (high + low) / 2;\n      }\n    }\n    iv = (high + low) / 2;\n    return iv;\n  }\n\n  calculateT0AtPointForStrike(spot, strike, int_rate, expiry_date, volatility, type, add_days?) {\n    let t0 = 0;\n    let date_expiry = new Date(expiry_date);\n    if (this.instru === 'USDINR') {\n      date_expiry.setHours(12, 30, 0);\n    } else {\n      date_expiry.setHours(15, 30, 0);\n    }\n\n    if (!add_days) {\n      add_days = 0;\n    }\n\n    let date_now = new Date();\n    if (this.simulate_strategy) {\n      date_now = this.simulateCurrDateObj;\n    }\n\n    date_now.setDate(date_now.getDate() + add_days);\n\n    let seconds = Math.floor((date_expiry.getTime() - date_now.getTime()) / 1000);\n    let\tminutes = Math.floor(seconds / 60);\n    let\thours = Math.floor(minutes / 60);\n    let\tdelta_t = (Math.floor(hours / 24)) / 365.0; // time\n\n    /* if (hours < 12) {\n      return 0;\n    }\n    else { */\n      let volt = volatility / 100;\n      int_rate = int_rate / 100;\n\n      let d1 = (Math.log(spot / strike) + (int_rate + (Math.pow(volt, 2) / 2)) * delta_t) / (volt * Math.sqrt(delta_t));\n      // let d2 = (Math.log(spot / strike) + (int_rate - (Math.pow(volt, 2) / 2)) * delta_t) / (volt * Math.sqrt(delta_t));\n      let d2 = d1 - (volt * Math.sqrt(delta_t));\n\n      let fv_strike = (strike) * Math.exp(-1 * int_rate * delta_t);\n\n      if (type === PositionTypeForPayOff.CE) {\n        t0 = spot * this.getCDF(d1) - fv_strike * this.getCDF(d2);\n      }\n\n      if (type === PositionTypeForPayOff.PE) {\n        t0 = fv_strike * this.getCDF(-1 * d2) - spot * this.getCDF(-1 * d1);\n      }\n    /* } */\n    return t0;\n  }\n\n  getCDF(x) {\n    let standardDeviation = Math.sqrt(this.variance);\n    return 0.5 * this.erfc(-(x - this.mean) / (standardDeviation * Math.sqrt(2)));\n  }\n\n  // Complementary error function\n  // From Numerical Recipes in C 2e p221\n  erfc(x) {\n    let z = Math.abs(x);\n    let t = 1 / (1 + z / 2);\n    let r = t * Math.exp(-z * z - 1.26551223 + t * (1.00002368 +\n            t * (0.37409196 + t * (0.09678418 + t * (-0.18628806 +\n            t * (0.27886807 + t * (-1.13520398 + t * (1.48851587 +\n            t * (-0.82215223 + t * 0.17087277)))))))));\n    return x >= 0 ? r : 2 - r;\n  }\n\n  calculatePnLAtPointForStrike(point, pos_strike, qty, entry, type) {\n    let pnl = 0;\n    if (type === PositionTypeForPayOff.CEsell) {\n      if (point > pos_strike) {\n        pnl = (pos_strike - point + entry) * Math.abs(qty);\n      } else {\n        pnl = entry * Math.abs(qty);\n      }\n    }\n    if (type === PositionTypeForPayOff.PEsell) {\n      if (point < pos_strike) {\n        pnl = (-pos_strike + point + entry) * Math.abs(qty);\n      } else {\n        pnl = entry * Math.abs(qty);\n      }\n    }\n    if (type === PositionTypeForPayOff.CEbuy) {\n      if (point > pos_strike) {\n        pnl = (-pos_strike + point - entry) * Math.abs(qty);\n      } else {\n        pnl = entry * -Math.abs(qty);\n      }\n    }\n    if (type === PositionTypeForPayOff.PEbuy) {\n      if (point < pos_strike) {\n        pnl = (pos_strike - point - entry) * Math.abs(qty);\n      } else {\n        pnl = entry * -Math.abs(qty);\n      }\n    }\n\n    // pnl = pnl * lotsize;\n\n    if (pnl !== 0) {\n      pnl = (Math.round((pnl + 0.00001) * 100) / 100);\n    }\n    return pnl;\n  }\n\n  getMargin() {\n    /* let url = this.urlToFetch.replace('payoff', 'margin');\n    this.appService.get(url).subscribe(res => {\n      console.log('getMargin: ', res);\n      this.margin = (res as any).margin.toLocaleString();\n    },\n    error => {\n      console.log('getMargin error', error);\n    }); */\n\n    let d = new Date(this.expiryDate);\n    // let month = d.toLocaleString('default', { month: 'short' }).toUpperCase();\n    let month = AppConstants.monthsMapping[d.getMonth() + 1];\n\n    console.log('getMargin: ', this.curr_positions_trades);\n    this.appService.getZerodhaMargin(this.instru, month, this.curr_positions_trades, this.instru).subscribe((res: any) => {\n      console.log('getMargin: ', res);\n      if (res.total) {\n        this.margin = Math.round(res.total.total).toLocaleString();\n      }\n    },\n    error => {\n      console.log('getMargin error', error);\n    });\n  }\n\n  getROI() {\n    // console.log('roi: ', this.getStrategyPnL(), parseFloat(this.margin.replace(/,/g, '')));\n    if (this.margin) {\n      let roi = (this.getStrategyPnL() / parseFloat(this.margin.replace(/,/g, ''))) * 100;\n      roi = (Math.round((roi + 0.00001) * 100) / 100);\n      return roi;\n    }\n  }\n\n  getPnL(pos, instru?, expiry_date?) { // TODO: read instru\n    let pnl = null;\n    let exit = null;\n    if (pos.exit !== null && pos.exit !== 0) {\n      exit = pos.exit;\n    } else {\n      exit = this.getLTP_strike(pos, instru, expiry_date);\n    }\n\n    if (pos.qty > 0) {\n      let p = (exit - pos.entry) * pos.qty;\n      pnl = p;\n    } else if (pos.qty < 0) {\n      let p = (pos.entry - exit) * -pos.qty;\n      pnl = p;\n    }\n    /* if (position.scrip.includes('USDINR')) {\n      pnl *= 1000;\n    } */\n    pnl = (Math.round((pnl + 0.00001) * 100) / 100);\n    pos.pnl = pnl;\n    return pnl;\n  }\n\n  getStrategyDelta() {\n    let delta = 0;\n    let trades = this.curr_positions_trades;\n    if (trades) {\n      trades.forEach(pos => {\n        if (pos.exit === null || pos.exit === 0) {\n\n          if (this.payoff_overlay && !pos.selected) {\n            return;\n          }\n\n          let type = '';\n          let s = pos.scrip;\n          if (s.includes('CE')) {\n            type = 'CE';\n          }\n          if (s.includes('PE')) {\n            type = 'PE';\n          }\n          let strike = s.slice(0, -2); // remove CE PE at end\n          let ltp = this.getLTP_strike(pos);\n\n          delta += (this.appService.getDelta(this.instru, strike, type, pos.expiry, ltp) * pos.qty);\n        }\n      });\n    }\n\n    delta = Math.round((delta + 0.00001) * 100) / 100;\n\n    let suggest_string = ' ( 50: ' + (Math.round(((-delta/50) + 0.00001) * 100) / 100) + \n                          ' , 100: ' + (Math.round(((-delta/100) + 0.00001) * 100) / 100) + \n                          ' , 150: ' + (Math.round(((-delta/150) + 0.00001) * 100) / 100) + \n                          ' , 200: ' + (Math.round(((-delta/200) + 0.00001) * 100) / 100) + ' )'; \n    return delta + suggest_string;\n  }\n\n  getStrategyPnLAfterCharges() {\n    let pnl = this.getStrategyPnL();\n\n    let charges = 0;\n    let trades = this.curr_positions_trades;\n    if (trades) {\n      trades.forEach(pos => {\n        if (pos.exit !== null && pos.exit !== 0) {\n          charges += 70;\n        } else {\n          charges += 35;\n        }\n      });\n    }\n\n    return (pnl - charges);\n  }\n\n  getStrategyPnL(num = null) {\n    let pnl = 0;\n    let pointsProfit = 0;\n    let trades = null;\n    let instru = null;\n    let expiry = null;\n    if (num === null) {\n      trades = this.curr_positions_trades;\n    }\n    if (num === 1 && this.s1Trades) {\n      trades = this.s1Trades.trades;\n      instru = this.s1Trades.instru;\n      expiry = this.s1Trades.expiry;\n    }\n    if (num === 2 && this.s2Trades) {\n      trades = this.s2Trades.trades;\n      instru = this.s2Trades.instru;\n      expiry = this.s2Trades.expiry;\n    }\n    if (num === 3 && this.s3Trades) {\n      trades = this.s3Trades.trades;\n      instru = this.s3Trades.instru;\n      expiry = this.s3Trades.expiry;\n    }\n    if (num === 4 && this.s4Trades) {\n      trades = this.s4Trades.trades;\n      instru = this.s4Trades.instru;\n      expiry = this.s4Trades.expiry;\n    }\n    if (num === 5 && this.s5Trades) {\n      trades = this.s5Trades.trades;\n      instru = this.s5Trades.instru;\n      expiry = this.s5Trades.expiry;\n    }\n    if (trades) {\n      trades.forEach(pos => {\n        if (num) {\n          let posPnl = this.getPnL(pos, instru, pos.expiry);\n          pnl += posPnl;\n          pointsProfit += posPnl / Math.abs(pos.qty);\n          // console.log('points:', pointsProfit);\n        } else {\n          let posPnl = this.getPnL(pos); // pos.pnl;\n          pnl += posPnl;\n          pointsProfit += posPnl / Math.abs(pos.qty);\n        }\n      });\n    }\n    pnl = (Math.round((pnl + 0.00001) * 100) / 100);\n    pointsProfit = (Math.round((pointsProfit + 0.00001) * 100) / 100);\n    // console.log('pointsProfit:', pointsProfit);\n\n    this.chartService.strategyPnLEvent$.next([pnl, pointsProfit]);\n    return pnl;\n  }\n\n  getAlertLtp(alert) {\n    if (alert.selected) {\n      if (alert.scrip1) {\n        let ltp1 =  this.getLTP_strike({ scrip : alert.scrip1 }, alert.instru, alert.expiry);\n        let ltp = ltp1;\n        if (alert.scrip2) {\n          let ltp2 =  this.getLTP_strike({ scrip : alert.scrip2 }, alert.instru, alert.expiry);\n          ltp += ltp2;\n        }\n        return ltp;\n      } else { // index\n        return this.mapService.getLtp(alert.instru);\n      }\n    }\n  }\n\n/*   getLTP(scrip, instru?, expiry_date?) { // scrip: 18000CE\n    return this.getLTP_strike({ scrip : scrip }, instru, expiry_date);\n  } */\n\n  getLTP_strike(pos, instru?, expiry_date?) { // TODO: read instru\n\n    if (!instru) {\n      instru = this.instru;\n    }\n    if (!expiry_date) {\n      expiry_date = pos.expiry; // this.expiryDate;\n    }\n\n    let is_monthly_expiry = false;\n    let expiryDate = new Date(expiry_date);\n    expiryDate.setHours(0, 0, 0, 0);\n\n    let tempmonthlyExpiryDates = AppConstants.monthlyExpiryDates;\n    if (instru === 'USDINR') {\n      tempmonthlyExpiryDates = AppConstants.monthlyExpiryDatesUSDINR;\n    }\n    for (let key in tempmonthlyExpiryDates) {\n      if (tempmonthlyExpiryDates.hasOwnProperty(key)) {\n          // console.log(key + \" -> \" + tempmonthlyExpiryDates[key] + ' ' + expiryDate);\n          if (expiryDate.getTime() === tempmonthlyExpiryDates[key].getTime()) {\n            // console.log('monthly expiry matched');\n            is_monthly_expiry = true;\n            break;\n          }\n      }\n    }\n\n    let expiry = null;\n    if (is_monthly_expiry) {\n      expiry = '' + (expiryDate.getFullYear() - 2000) + AppConstants.monthsMapping[expiryDate.getMonth() + 1];\n    } else {\n      let expiryMonth = null;\n      if (expiryDate.getMonth() + 1 === 10) {\n        expiryMonth = 'O';\n      } else if (expiryDate.getMonth() + 1 === 11) {\n        expiryMonth = 'N';\n      } else if (expiryDate.getMonth() + 1 === 12) {\n        expiryMonth = 'D';\n      } else {\n        expiryMonth = expiryDate.getMonth() + 1;\n      }\n      expiry = '' + (expiryDate.getFullYear() - 2000) + (expiryMonth) + ('0' + expiryDate.getDate()).slice(-2);\n    }\n\n    let str = instru + expiry + pos.scrip;\n    // console.log('str: ' + str);\n    return this.mapService.getLtp(str);\n  }\n\n  getInstruLTP(instru?) { // TODO: read instru\n\n    if (!instru) {\n      instru = this.instru;\n    }\n\n    let scrip = 'NIFTY50';\n    if (instru === 'BANKNIFTY') {\n      scrip = 'BANKNIFTY';\n    }\n    if (instru === 'USDINR') {\n      let expiryDate: Date = AppConstants.monthlyExpiryDatesUSDINR[AppConstants.year + AppConstants.USDINR_FUT_MONTH];\n      let expiryMonth = null;\n      if (expiryDate.getMonth() + 1 === 10) {\n        expiryMonth = 'O';\n      } else if (expiryDate.getMonth() + 1 === 11) {\n        expiryMonth = 'N';\n      } else if (expiryDate.getMonth() + 1 === 12) {\n        expiryMonth = 'D';\n      } else {\n        expiryMonth = expiryDate.getMonth() + 1;\n      }\n      let expiry = '' + (expiryDate.getFullYear() - 2000) + (expiryMonth) + ('0' + expiryDate.getDate()).slice(-2);\n      // scrip = 'USDINR' + expiry + AppConstants.USDINR_FUT_MONTH + AppConstants.year + 'FUT';\n      scrip = 'USDINR' + expiry + AppConstants.USDINR_FUT_MONTH + 'FUT';\n\n      // console.log('getLtp strike: ' + scrip);\n    }\n\n    this.spot = this.mapService.getLtp(scrip);\n\n    return this.spot;\n  }\n\n  updateChartData(res) {\n    if (res) {\n      this.labels = [];\n      this.pnl = [];\n      let overlay = [];\n      let overlayT0 = [];\n      let t0 = [];\n      this.zeroline = [];\n      let count = 0;\n      if (res.chart && Array.isArray(res.chart)) {\n        res.chart.forEach(element => {\n          // Change: -8.1, Final: -102518, StockPrice: 10318, Today: -115484.48, bes: 0\n          count++;\n          if (count < 100) {\n            /* this.labels.push(element.StockPrice);\n            this.pnl.push(element.Final);\n            this.zeroline.push(0); */\n          }\n          this.labels.push(element.StockPrice);\n          this.pnl.push(element.Final);\n          t0.push(element.Today);\n          this.zeroline.push(0);\n\n          if (this.payoff_overlay) {\n            overlay.push(element.Overlay);\n            overlayT0.push(element.OverlayT0);\n          }\n\n          /* overlay.push(10000); */\n        });\n      }\n      // console.log('payOffEvent labels: ', this.labels);\n      // console.log('payOffEvent pnl: ', this.pnl);\n      this.lineChartLabels = this.labels;\n      this.lineChartData = [\n        { data: this.pnl, label: 'PnL' },\n        { data: t0, label: 'T+0', fill: false, },\n        { data: overlay, label: 'Overlay', fill: false, },\n        { data: overlayT0, label: 'OverlayT0', fill: false, },\n        /* { data: this.zeroline, label: 'Zero line' }, */\n      ];\n\n      let ltp = 0;\n      if (this.instru === 'USDINR') {\n\n        if (this.use_hypo_future) {\n          let ce_premium = this.getLTP_strike({ scrip : this.hypo_future_strike + 'CE' }, this.instru, this.expiryDate);\n          let pe_premium = this.getLTP_strike({ scrip : this.hypo_future_strike + 'PE' }, this.instru, this.expiryDate);\n          ltp = ce_premium - pe_premium + this.hypo_future_strike; // Find future price from Put Call Parity\n          ltp = (Math.round((ltp + 0.00001) * 100) / 100);\n          console.log('hypo fut:' + ltp);\n        } else {\n          ltp = parseFloat(this.getInstruLTP());\n          ltp = (Math.round((ltp + 0.00001) * 100) / 100); // TODO: ltp rounding for usdinr to two decimal\n        }\n      } else {\n        ltp = parseInt(this.getInstruLTP());\n      }\n\n      this.lineChartOptions = {\n        responsive: true,\n        scales: {\n          xAxes: [{}],\n        },\n        tooltips: {\n          mode: 'index',\n          intersect: false,\n        },\n        animation: {\n          duration: 0\n        },\n        annotation: {\n          events: ['click'],\n          annotations: this.getChartAnnotations(ltp),\n        }\n      };\n    }\n  }\n\n  getChartAnnotations(ltp) {\n    let annotations = [];\n\n    /* let range = 1000;\n    let range_multiple = 50;\n    let increment = 50;\n    if (this.instru === 'BANKNIFTY') {\n      range = 3000;\n      range_multiple = 100;\n      increment = 100;\n    }\n    if (this.instru === 'USDINR') {\n      range = 2;\n      range_multiple = 0.25;\n      increment = 0.25;\n    }\n\n    let round_ltp = (Math.round(ltp / range_multiple) * range_multiple);\n    let lower_range = round_ltp - range; // TODO: range depends on instru\n    let upper_range = round_ltp + range; */\n\n    /* for (let point = lower_range; point <= upper_range; point += increment) {\n      let symbol = point;\n      let ce_premium = this.getLTP_strike({ scrip : symbol + 'CE' }, this.instru, this.expiryDate);\n      let pe_premium = this.getLTP_strike({ scrip : symbol + 'PE' }, this.instru, this.expiryDate);\n\n      annotations.push({\n        drawTime: 'afterDatasetsDraw',\n        type: 'line',\n        mode: 'vertical',\n        scaleID: 'x-axis-0',\n        value: symbol,\n        borderColor: 'white',\n        borderWidth: 0,\n        label: {\n          yAdjust: 180,\n          enabled: true,\n          fontColor: 'white',\n          content: ce_premium\n        },\n        onClick: function(this, e) {\n          let scrip = point + 'CE';\n          console.log('Adding scrip from payoff to strategy: ' + scrip);\n          let qty = 75;\n          if (this.instru === 'BANKNIFTY') {\n            qty = 25;\n          }\n          if (this.instru === 'USDINR') {\n            qty = 1000;\n          }\n          console.log(e);\n          localStorage.setItem('addScripToStrategy', JSON.stringify({qty: qty, scrip: scrip, premium: ce_premium}));\n        }\n      });\n      annotations.push({\n        drawTime: 'afterDatasetsDraw',\n        type: 'line',\n        mode: 'vertical',\n        scaleID: 'x-axis-0',\n        value: symbol,\n        borderColor: 'white',\n        borderWidth: 0,\n        label: {\n          yAdjust: 200,\n          enabled: true,\n          fontColor: 'white',\n          content: pe_premium\n        },\n        onClick: function(e) {\n          let scrip = point + 'PE';\n          console.log('Adding scrip from payoff to strategy: ' + scrip);\n          let qty = 75;\n          if (this.instru === 'BANKNIFTY') {\n            qty = 25;\n          }\n          if (this.instru === 'USDINR') {\n            qty = 1000;\n          }\n          this.addPosition(qty, scrip, pe_premium); // TODO: check instru for lot size\n        }\n      });\n    } */\n/* \n    this.curr_positions_trades.forEach(element => { */\n      /* {\n        qty: 75,\n        scrip: '11150CE',\n        expiry: '01OCT2020',\n        entry: 50,\n        exit: 0,\n      }, */\n      // -375x10950PEx01OCT2020x19.2x0x0&\n/*       if (element.exit === 0) {\n        let symbol = element.scrip.slice(0, -2);\n        symbol = parseFloat(symbol);\n        symbol = (Math.round((symbol + 0.00001) * 100) / 100); // ltp rounding for usdinr to two decimal\n\n        let labelcolor = 'white'; //'lightgreen';\n        let linecolor = 'darkgrey' //'limegreen';\n        let yAdjustBase = 0;\n\n        if (element.scrip.includes('PE')) {\n          //labelcolor = 'salmon';\n          //linecolor = 'salmon';\n          yAdjustBase = 60;\n        } */\n\n        /* if (this.doAnnotationsContainSymbol(annotations, symbol)) {\n          //yAdjustBase = 80;\n          //linecolor = 'darkturquoise';\n        } */\n\n        /* if (element.qty >= 0) {\n          labelcolor = 'white';\n        } */\n        //let pos = '' + (element.qty <= 0 ? element.qty : '+' + element.qty) + 'x' + element.scrip + 'x' + element.expiry + 'x' + element.entry + 'x' + element.exit + 'x0&';\n        /* annotations.push({\n          drawTime: 'afterDatasetsDraw',\n          type: 'line',\n          mode: 'vertical',\n          scaleID: 'x-axis-0',\n          value: symbol,\n          borderColor: linecolor,\n          borderWidth: 1,\n          label: {\n            yAdjust: 0,\n            enabled: true,\n            fontColor: labelcolor,\n            content: symbol\n          }\n        });\n\n        annotations.push({\n          drawTime: 'afterDatasetsDraw',\n          type: 'line',\n          mode: 'vertical',\n          scaleID: 'x-axis-0',\n          value: symbol,\n          borderColor: linecolor,\n          borderWidth: 1,\n          label: {\n            yAdjust: yAdjustBase + 40,\n            enabled: true,\n            fontColor: labelcolor,\n            content: element.qty / 1000\n          }\n        });\n\n        let pnlcolor = 'lightgreen';\n        if (element.pnl < 0) {\n          pnlcolor = 'salmon';\n        } \n        annotations.push({\n          drawTime: 'afterDatasetsDraw',\n          type: 'line',\n          mode: 'vertical',\n          scaleID: 'x-axis-0',\n          value: symbol,\n          borderColor: linecolor,\n          borderWidth: 1,\n          label: {\n            yAdjust: yAdjustBase + 60,\n            enabled: true,\n            fontColor: pnlcolor,\n            content: element.pnl\n          }\n        });\n      }\n    }); */\n\n    annotations.push({\n      drawTime: 'afterDatasetsDraw',\n      type: 'line',\n      mode: 'vertical',\n      scaleID: 'x-axis-0',\n      value: ltp,\n      borderColor: 'orange',\n      borderWidth: 1,\n      label: {\n        yAdjust: -40,\n        enabled: true,\n        fontColor: 'orange',\n        content: ltp\n      }\n    });\n    \n    // console.log(annotations);\n    return annotations;\n  }\n\n  doAnnotationsContainSymbol(annotations, symbol) {\n    for(let i = 0; i < annotations.length; i++) {\n      if (symbol === annotations[i].value) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  updateIntradayChartData() {\n    let labels = [];\n    let prices = [];\n    let spot = [];\n    let ce_intraday = this.chartService.getIntradayData('74CE', 'USDINR', '2020-11-13');\n    let pe_intraday = this.chartService.getIntradayData('74PE', 'USDINR', '2020-11-13');\n    let spot_intraday = this.chartService.getIntradayData('FUT', 'USDINR', AppConstants.USDINR_FUT_MONTH);\n    if (ce_intraday) {\n      ce_intraday.forEach(ce_elem => {\n        let ce_time = ce_elem.time;\n        pe_intraday.forEach(pe_elem => {\n          if (ce_time === pe_elem.time) {\n            let p = ce_elem.price + pe_elem.price;\n            p = Math.round((p + 0.00001) * 100) / 100; // round to 2 decimal places\n            labels.push(ce_time);\n            prices.push(p);\n            return;\n          }\n        });\n        if (spot_intraday) {\n          spot_intraday.forEach(elem => {\n            if (ce_time === elem.time) {\n              spot.push(elem.price);\n              return;\n            }\n          });\n        }        \n      });\n    }\n    \n    // console.log('updateIntradayChartData: ', labels, prices);\n    this.i1ChartLabels = labels;\n    this.i1ChartData = [\n      { data: prices, label: 'Price' },\n      { data: spot, label: 'Underlying', yAxisID: 'y-axis-1' },\n    ];\n  }\n}\n","<!-- {{ getLTP() }} --> \n\n<div class=\"accordion mb-2\" id=\"accordionAlerts\">\n    <div class=\"card\">\n        \n        <button class=\"btn btn-light font-weight-bold\" type=\"button\" data-toggle=\"collapse\" data-target=\"#alertsSection\" aria-expanded=\"false\" aria-controls=\"alertsSection\">\n            Alerts\n        </button>\n\n        <div id=\"alertsSection\" class=\"collapse show p-2\" aria-labelledby=\"headingOne\" data-parent=\"#accordionAlerts\">\n            <div class=\"alerts-flex-container\" *ngFor=\"let alert of alerts; index as i\">\n\n                <div class=\"form-check-inline\">\n                    <input class=\"form-check-input\" [(ngModel)]=\"alert.selected\" type=\"checkbox\" value=\"\" />\n                </div>\n                <select class=\"alert_field form-control form-control-sm mr-2\" [(ngModel)]=\"alert.instru\">\n                    <option value='NIFTY50'>NIFTY</option>\n                    <option value='BANKNIFTY'>BANKNIFTY</option>\n                    <option value='USDINR'>USDINR</option>\n                </select>\n                <input placeholder=\"Scrip1\" [(ngModel)]=\"alert.scrip1\" class=\"mr-2 mb-1 form-control form-control-sm alert_field\"/>\n                <input placeholder=\"Scrip2\" [(ngModel)]=\"alert.scrip2\" class=\"mr-2 mb-1 form-control form-control-sm alert_field\"/>\n                <input placeholder=\"Expiry YYYY-MM-DD\" [(ngModel)]=\"alert.expiry\" class=\"mr-2 mb-1 form-control form-control-sm alert_field\" />\n                <select class=\"alert_field form-control form-control-sm mr-2\" [(ngModel)]=\"alert.compare\">\n                    <option value='>'>></option>\n                    <option value='<'><</option>\n                </select>\n                <input placeholder=\"Price\" type=\"number\" [(ngModel)]=\"alert.price\" class=\"mr-2 mb-1 form-control form-control-sm alert_field\"/>\n                <span>{{ getAlertLtp(alert) }}</span>\n                <span class=\"text-danger ml-2\">{{ alert.status }}</span>\n                    \n            </div>\n\n            <button type=\"button\" class=\"btn btn-link\" (click)=\"subscribeAlerts()\">Refresh LTPs</button>\n        </div>\n\n    </div>\n</div>\n\n<div class=\"accordion mb-2\" id=\"accordionPayoff\">\n    <div class=\"card\">\n        \n        <button class=\"btn btn-light font-weight-bold\" type=\"button\" data-toggle=\"collapse\" data-target=\"#payOffSection\" aria-expanded=\"true\" aria-controls=\"payOffSection\">\n            Strategy Payoff\n        </button>\n\n        <div id=\"payOffSection\" class=\"collapse show p-2\" aria-labelledby=\"headingOne\" data-parent=\"#accordionPayoff\">\n\n            <div class=\"chart-all-strategies-pnl text-center\">\n                <span>Strategy 1: <span [ngClass]=\"{\n                    'text-danger': getStrategyPnL(1) < 0,\n                    'text-success': getStrategyPnL(1) > 0\n                  }\" class=\"font-weight-bold\">{{ getStrategyPnL(1) }}</span></span>\n                <span class=\"pl-4 pr-4\">|</span>\n                <span>Strategy 2: <span [ngClass]=\"{\n                    'text-danger': getStrategyPnL(2) < 0,\n                    'text-success': getStrategyPnL(2) > 0\n                  }\" class=\"font-weight-bold\">{{ getStrategyPnL(2) }}</span></span>\n                <span class=\"pl-4 pr-4\">|</span>\n                <span>Strategy 3: <span [ngClass]=\"{\n                    'text-danger': getStrategyPnL(3) < 0,\n                    'text-success': getStrategyPnL(3) > 0\n                  }\" class=\"font-weight-bold\">{{ getStrategyPnL(3) }}</span></span>\n                <span class=\"pl-4 pr-4\">|</span>\n                <span>Strategy 4: <span [ngClass]=\"{\n                    'text-danger': getStrategyPnL(4) < 0,\n                    'text-success': getStrategyPnL(4) > 0\n                  }\" class=\"font-weight-bold\">{{ getStrategyPnL(4) }}</span></span>\n                <span class=\"pl-4 pr-4\">|</span>\n                <span>Strategy 5: <span [ngClass]=\"{\n                    'text-danger': getStrategyPnL(5) < 0,\n                    'text-success': getStrategyPnL(5) > 0\n                  }\" class=\"font-weight-bold\">{{ getStrategyPnL(5) }}</span></span>\n            </div>\n            <hr/>\n            <div class=\"chart-flex-container\">\n\n                <div class=\"chart-chart\" *ngIf=\"!hide_payoff\">\n                    <canvas baseChart width=\"2\" height=\"1\"\n                        [datasets]=\"lineChartData\"\n                        [labels]=\"lineChartLabels\"\n                        [options]=\"lineChartOptions\"\n                        [colors]=\"lineChartColors\"\n                        [legend]=\"lineChartLegend\"\n                        [chartType]=\"lineChartType\"\n                        [plugins]=\"lineChartPlugins\">\n                    </canvas>\n                </div>\n\n                <div class=\"chart-positions\">\n\n                    <div class=\"form-check-inline use-hypo-future-class\">\n                        <label class=\"form-check-label\" for=\"use-range\">Range</label>\n                        <input id=\"use-range\" style=\"width: 100px;\" type=\"number\" placeholder=\"Payoff Range\" [(ngModel)]=\"payoff_range\" class=\"ml-2 form-control form-control-sm\"/>\n                    </div>\n\n                    <div class=\"form-check-inline use-hypo-future-class\">\n                        <input class=\"form-check-input\" [(ngModel)]=\"use_hypo_future\" type=\"checkbox\" value=\"\" id=\"use-hypo-future\">\n                        <label class=\"form-check-label\" for=\"use-hypo-future\">Use Hypothetical Future</label>\n                        <input style=\"width: 100px;\" type=\"number\" placeholder=\"Closest Strike\" [(ngModel)]=\"hypo_future_strike\" class=\"ml-2 form-control form-control-sm\"/>\n                    </div>\n\n                    <div class=\"form-check-inline use-hypo-future-class\">\n                        <input class=\"form-check-input\" [(ngModel)]=\"hide_payoff\" type=\"checkbox\" value=\"\" id=\"hide-payoff\">\n                        <label class=\"form-check-label\" for=\"hide-payoff\">Hide Payoff</label>\n                    </div>\n\n                    <div class=\"form-check-inline use-hypo-future-class\">\n                        <input class=\"form-check-input\" [(ngModel)]=\"payoff_overlay\" type=\"checkbox\" value=\"\" id=\"payoff_overlay\">\n                        <label class=\"form-check-label\" for=\"payoff_overlay\">Payoff Overlay</label>\n                    </div>\n\n                    <div class=\"form-check-inline use-hypo-future-class\">\n                        <input class=\"form-check-input\" [(ngModel)]=\"simulate_strategy\" type=\"checkbox\" value=\"\" id=\"simulate_strategy\">\n                        <label class=\"form-check-label\" for=\"simulate_strategy\">Simulate Strategy</label>\n                    </div>\n\n                    <div class=\"mb-2\" *ngIf=\"simulate_strategy === true\">\n                        <select class=\"strategy_instru form-control form-control-sm mr-2\" [(ngModel)]=\"simulate_instru\">\n                            <option value='NIFTY'>NIFTY</option>\n                            <option value='BANKNIFTY'>BANKNIFTY</option>\n                            <option value='USDINR'>USDINR</option>\n                        </select>\n                        <input placeholder=\"Expiry YYYY-MM-DD\" [(ngModel)]=\"simulateExpiryDate\" class=\"simulateDate mb-1 mr-3 form-control form-control-sm\"/>\n                        <input placeholder=\"Start YYYY-MM-DD\" [(ngModel)]=\"simulateStartDate\" class=\"simulateDate mb-1 mr-3 form-control form-control-sm\"/>\n                        <select class=\"simulateTimeAdv form-control form-control-sm mr-2\" [(ngModel)]=\"simulateTimeAdv\">\n                            <option value='add'>+</option>\n                            <option value='subtract'>-</option>\n                        </select>\n                        <input placeholder=\"mins\" id=\"simulateTimeMins\" [(ngModel)]=\"simulateTimeMins\" class=\"simulateTimeMins mb-1 mr-3 form-control form-control-sm\"/>\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"loadSimulatedNextMins()\">Step</button>\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"fileImportInputExpiry.click()\">Import</button>\n                        <input #fileImportInputExpiry style=\"display:none\" type=\"file\" name=\"File Upload Expiry\" (change)=\"uploadExpiryFile($event)\" accept=\".csv\" />\n                        <div>Date Time: {{ simulateCurrDateTimeString }}</div>\n                    </div>\n\n                    <div class=\"mb-2\">Loaded Strategy {{ currLoadNum }}</div>\n                    <select class=\"strategy_instru form-control form-control-sm mr-2\" [(ngModel)]=\"instru\">\n                        <option value='NIFTY'>NIFTY</option>\n                        <option value='BANKNIFTY'>BANKNIFTY</option>\n                        <option value='USDINR'>USDINR</option>\n                    </select>\n                    <input placeholder=\"Expiry YYYY-MM-DD\" id=\"payOffExpiry\" [(ngModel)]=\"expiryDate\" class=\"mb-1 mr-3 form-control form-control-sm\"/>\n                    <button type=\"button\" class=\"btn btn-secondary btn-sm mb-1 mr-2\" (click)=\"doSingleStrategySubscription()\">Refresh LTPs</button>\n                    <button type=\"button\" class=\"btn btn-secondary btn-sm mb-1\" (click)=\"loadOptionChain()\">Load Option Chain</button>\n\n                    <table class=\"table table-sm table-bordered shadow text-center\"><!-- table-responsive -->\n                        <!-- <thead class=\"thead-light\">\n                            <tr>\n                                <th></th>\n                                <th scope=\"col\">Symbol</th>\n                                <th scope=\"col\">Type</th>\n                                <th scope=\"col\">NetQty</th>\n                                <th scope=\"col\">BuyAvg</th>\n                                <th scope=\"col\">SellAvg</th>\n                                <th scope=\"col\">CMP</th>\n                                <th scope=\"col\">PnL</th>\n                                <th scope=\"col\"></th>\n                            </tr>\n                        </thead> -->\n                        <tbody>\n                            <tr *ngFor=\"let pos of curr_positions_trades; index as i\" [ngClass]=\"{ 'positionExited': pos.exit !== 0 }\">  \n                                <td *ngIf=\"payoff_overlay\">\n                                    <div class=\"form-check-inline posCheckbox\">\n                                        <input class=\"form-check-input\" [(ngModel)]=\"pos.selected\" type=\"checkbox\" value=\"\" [disabled]=\"pos.exit !== 0\">\n                                        <input class=\"form-check-input\" [(ngModel)]=\"pos.selectedActual\" type=\"checkbox\" value=\"\" [disabled]=\"pos.exit !== 0\">\n                                    </div>\n                                </td>\n                                <!-- <td>\n                                    <input type=\"checkbox\" [(ngModel)]=\"pos.selected\" class=\"form-control form-control-sm \" />\n                                </td>  -->              \n                                <td>\n                                    <input type=\"number\" placeholder=\"Qty\" [step]=\"stepValue\" [(ngModel)]=\"pos.qty\" class=\"form-control form-control-sm\"/>\n                                </td>\n                                <td>\n                                    <input placeholder=\"Scrip 11500CE\" [(ngModel)]=\"pos.scrip\" class=\"form-control form-control-sm\"/>                        \n                                </td>\n                                <td>\n                                    <input placeholder=\"Expiry 01OCT2020\" [(ngModel)]=\"pos.expiry\" class=\"form-control form-control-sm\"/>                        \n                                </td>\n                                <td>\n                                    <input type=\"number\" placeholder=\"Entry\" [(ngModel)]=\"pos.entry\" class=\"form-control form-control-sm\"/>\n                                </td>\n                                <td>\n                                    <input type=\"number\" placeholder=\"Exit\" [(ngModel)]=\"pos.exit\" class=\"form-control form-control-sm\"/>                        \n                                </td>\n                                <td>\n                                    {{ getLTP_strike(pos) }}\n                                </td>\n                                <td class=\"font-weight-bold\">\n                                    <span [ngClass]=\"{\n                                        'text-danger': pos.pnl < 0,\n                                        'text-success': pos.pnl > 0\n                                      }\">\n                                      {{ getPnL(pos) }}\n                                    </span>\n                                </td>       \n                                <td>\n                                    <button type=\"button\" class=\"btn btn-light btn-sm\" (click)=\"splitPosition(pos)\">+</button>\n                                </td>\n                                <td>\n                                    <button type=\"button\" class=\"btn btn-light btn-sm\" (click)=\"deletePosition(pos)\">X</button>                        \n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n            \n                    <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"addPosition()\">Add</button>\n                    <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"calculatePayoff()\">Preview</button>\n                    <div class=\"mt-2\">\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"savePositions(1)\">Save 1</button>\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"savePositions(2)\">Save 2</button>\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"savePositions(3)\">Save 3</button>\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"savePositions(4)\">Save 4</button>\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"savePositions(5)\">Save 5</button>\n                    </div>\n                    <div class=\"mt-2\">\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"reloadPayoffData(1)\">Load 1</button>\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"reloadPayoffData(2)\">Load 2</button>\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"reloadPayoffData(3)\">Load 3</button>\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"reloadPayoffData(4)\">Load 4</button>\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"reloadPayoffData(5)\">Load 5</button>\n                    </div>\n                    <div class=\"mt-2\">\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"exportToCSV(1)\">Export 1</button>\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"exportToCSV(2)\">Export 2</button>\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"exportToCSV(3)\">Export 3</button>\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"exportToCSV(4)\">Export 4</button>\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"exportToCSV(5)\">Export 5</button>\n                    </div>\n                    <div class=\"mt-2\">\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"fileImportInput1.click()\">Import</button>\n                        <input\n                        #fileImportInput1\n                        style=\"display:none\"\n                        type=\"file\"\n                        name=\"File Upload 1\"\n                        (change)=\"importCSV($event, 1)\"\n                        accept=\".csv\"\n                      />                        \n                        <!-- <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"fileImportInput1.click()\">Import 2</button>\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"fileImportInput1.click()\">Import 3</button>\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"fileImportInput1.click()\">Import 4</button>\n                        <button type=\"button\" class=\"btn btn-secondary btn-sm mr-1\" (click)=\"fileImportInput1.click()\">Import 5</button> -->\n                    </div>\n\n                    <div class=\"mt-2 font-weight-bold\">\n                        Total PnL:\n                        <span [ngClass]=\"{\n                            'text-danger': getStrategyPnL() < 0,\n                            'text-success': getStrategyPnL() > 0\n                          }\">\n                          {{ getStrategyPnL() }}\n                        </span>\n                        <span style=\"font-weight: normal;\">\n                            ({{ getStrategyPnLAfterCharges() }})\n                        </span>\n                    </div>\n                    <div class=\"mt-1\">Delta: {{ getStrategyDelta() }}</div>\n                    <div class=\"mt-1\">Margin: {{ margin }}</div>\n                    <div class=\"mt-1\">ROI: {{ getROI() }} %</div>\n                    <div class=\"mt-1\">Breakevens: {{ breakevens }}</div>\n                    <div class=\"mt-1\">CE: {{ cePremium }} ( {{ ceWeight }}% ) , {{ ceLots }}</div>\n                    <div class=\"mt-1\">PE: {{ pePremium }} ( {{ peWeight }}% ) , {{ peLots }}</div>\n                </div>\n                \n            </div>\n            <!-- <div>Place SLs and entries based on SPOT POSITION. Watch Payoff, Breakevens, Loss at Rs 1.5. Maintain 1:1 RR. Don't enter entire position on same day, divide in days</div>\n            <div>Better to exit a position and re-enter another strike above/below. Place SL based on SPOT, and re-enter another strike on SL hit.</div>\n -->\n            <div>\n                <b>Update 27 Nov:</b>\n                During the day, maintain your T+0 slope. Do that using extra buying and maintaining appropriate distance of hedge from straddle.\n                If spot is nearing breakeven, make sure that side hedge distance is less than straddle combined premium.\n                At end of the day, if required, then adjust straddle and hedges to achieve the payoff structure and T0 you want.\n                T0 gives your pnl of the day irrespective of whether you are shifting your straddle or not. \n                So maintaining T0 slope is important.\n                If you are shifting straddle, you might capture extra theta decay during the day, but will not be much as compared to original straddle.\n                You will anyways be shifting the straddle at end of day. Not required to shift straddle during the day.\n                Shift straddle at end of day to achieve the payoff structure and T0 you want at end of day for next day.\n                <br/>\n\n                <b>Straddle Adjustments:</b>\n                Move straddle legs as per the trend. \n                Not early (to avoid random moves) and Not Late (ITM loss and lower premium)\n                Moving frequently leads to getting lower premium over time.\n                <br/>\n                <b>Hedge Adjustments:</b>\n                Hedges should not be too far and not too close.\n                Too far increases overnight risk. Too close results in late profit realization.\n                Manage intraday moves with extra buy.\n                Maintaining T0 is important.\n                Move untested side hedge inside if cheap.\n\n                Add extra small quantity of buy to manage T0 line according to trend.\n                Monitor option chart for this.\n\n                Look for EMA confirmation, S/R breach for adjustment of straddle and buys.\n                Max loss on a side should be 100 points. In terms of Rs., do 100 * num. lots.\n                Hedge should eventually be at the distance less than straddle premium.\n                <br/>\n                <b>Loss less:</b>\n                A side becomes loss less if NET CREDIT is GREATER than HEDGE DISTANCE on that side.\n                Normally you would have atleast 400 credit in straddle and pay upto 200 on hedges. So net credit is 200. \n                So straddle around 200 points away from hedge can make that side loss less. \n                <br/>\n                <b>Strangle:</b>\n                Sell naked far OTM CE or strangle. Exit the naked option if SL hit. Keep moving untested side naked sell inside.\n                <br/>\n                <b>NEW FLY:</b>\n                If BNF near of crossing breakeven, make CLOSE-HEDGED fly with lower qty at that point. Exit this new fly if BNF moving out of its breakevens.\n                \n            </div>\n        </div>\n    </div>\n</div>\n\n<div class=\"accordion mb-2\" id=\"accordionStraddle\" *ngIf=\"false\">\n    <div class=\"card\">\n        <button class=\"btn btn-light font-weight-bold\" type=\"button\" data-toggle=\"collapse\" data-target=\"#straddleSection\" aria-expanded=\"true\" aria-controls=\"straddleSection\">\n            Straddle Charts\n        </button>\n        <div id=\"straddleSection\" class=\"collapse show p-2\" aria-labelledby=\"headingOne\" data-parent=\"#accordionStraddle\">\n            <div class=\"chart-flex-container\">\n                <div class=\"chart-positions\">\n                    <select class=\"strategy_instru form-control form-control-sm mr-2\" [(ngModel)]=\"straddle1instru\">\n                        <option value='NIFTY'>NIFTY</option>\n                        <option value='BANKNIFTY'>BANKNIFTY</option>\n                        <option value='USDINR'>USDINR</option>\n                    </select>\n                    <input placeholder=\"Expiry YYYY-MM-DD\" id=\"payOffExpiry\" [(ngModel)]=\"straddle1expiryDate\" class=\"mr-2 mb-1 form-control form-control-sm\"/>\n                    <input placeholder=\"Scrip\" id=\"payOffExpiry\" [(ngModel)]=\"straddle1scrip\" class=\"mb-1 form-control form-control-sm\"/>\n                    \n                    <select class=\"strategy_instru form-control form-control-sm mr-2\" [(ngModel)]=\"straddle2instru\">\n                        <option value='NIFTY'>NIFTY</option>\n                        <option value='BANKNIFTY'>BANKNIFTY</option>\n                        <option value='USDINR'>USDINR</option>\n                    </select>\n                    <input placeholder=\"Expiry YYYY-MM-DD\" id=\"payOffExpiry\" [(ngModel)]=\"straddle2expiryDate\" class=\"mr-2 mb-1 form-control form-control-sm\"/>\n                    <input placeholder=\"Scrip\" id=\"payOffExpiry\" [(ngModel)]=\"straddle2scrip\" class=\"mb-1 form-control form-control-sm\"/>\n                \n                    <select class=\"strategy_instru form-control form-control-sm mr-2\" [(ngModel)]=\"straddle3instru\">\n                        <option value='NIFTY'>NIFTY</option>\n                        <option value='BANKNIFTY'>BANKNIFTY</option>\n                        <option value='USDINR'>USDINR</option>\n                    </select>\n                    <input placeholder=\"Expiry YYYY-MM-DD\" id=\"payOffExpiry\" [(ngModel)]=\"straddle3expiryDate\" class=\"mr-2 mb-1 form-control form-control-sm\"/>\n                    <input placeholder=\"Scrip\" id=\"payOffExpiry\" [(ngModel)]=\"straddle3scrip\" class=\"mb-1 form-control form-control-sm\"/>\n                \n                </div>\n                <div class=\"chart-chart\">\n                    <canvas baseChart width=\"2\" height=\"1\"\n                        [datasets]=\"i1ChartData\"\n                        [labels]=\"i1ChartLabels\"\n                        [options]=\"i1ChartOptions\"\n                        [colors]=\"i1ChartColors\"\n                        [legend]=\"i1ChartLegend\"\n                        [chartType]=\"i1ChartType\"\n                        [plugins]=\"i1ChartPlugins\">\n                    </canvas>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class=\"accordion\" id=\"accordionCharts\" *ngIf=\"false\">\n    <div class=\"card\">\n        \n        <button class=\"btn btn-light font-weight-bold\" type=\"button\" data-toggle=\"collapse\" data-target=\"#chartsSection\" aria-expanded=\"true\" aria-controls=\"chartsSection\">\n            Charts\n        </button>\n\n        <div id=\"chartsSection\" class=\"collapse show p-2\" aria-labelledby=\"headingOne\" data-parent=\"#accordionCharts\">\n\n            <div class=\"chart-flex-container\">\n                <iframe height=\"600\" width=\"760\" src=\"https://ssltvc.forexprostools.com/?pair_ID=8985&height=600&width=760&interval=300&plotStyle=candles&domain_ID=56&lang_ID=56&timezone_ID=20\"></iframe>\n\n                <iframe height=\"600\" width=\"760\" src=\"https://ssltvc.forexprostools.com/?pair_ID=160&height=600&width=760&interval=300&plotStyle=candles&domain_ID=56&lang_ID=56&timezone_ID=20\"></iframe>\n                \n\n            </div>\n\n        </div>\n    </div>\n</div>\n\n","import { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { ChartsModule } from 'ng2-charts';\nimport { AppRoutingModule } from '../app-routing.module';\nimport { ChartComponent } from './chart.component';\nimport { ChartService } from './chart.service';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    BrowserModule,\n    AppRoutingModule,\n    HttpClientModule,\n    FormsModule,\n    ReactiveFormsModule,\n    ChartsModule\n  ],\n  exports: [ChartComponent],\n  declarations: [ChartComponent],\n  providers: [ChartService]\n})\nexport class ChartModule { }\n","import { Injectable } from '@angular/core';\nimport { interval, Subject } from 'rxjs';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { FyersService } from '../common/fyers.service';\nimport { AliceblueService } from '../common/aliceblue.service';\nimport { AppConstants } from '../common/application.constant';\nimport { MapService } from '../common/map.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ChartService {\n\n  public requestStatusEvent$: Subject<any> = new Subject();\n  public optionChainEvent$: Subject<any> = new Subject();\n  public strategyPnLEvent$: Subject<any> = new Subject();\n  intradayData = new Map<any, any>();\n\n  constructor(\n    private http: HttpClient,\n    private mapService: MapService,\n    private fyersService: FyersService,\n    private aliceblueService: AliceblueService\n  ) { }\n\n  getIntradayData(scrip, instru, expiry) {\n    return this.intradayData.get(instru + ' ' + expiry + ' ' + scrip);\n  }\n\n  loadIntradayData(intradayWatch) {\n    console.log('Loading intraday data');\n    intradayWatch.forEach(element => {\n      let prices = JSON.parse(localStorage.getItem(element.instru + ' ' + element.expiry + ' ' + element.scrip));\n      this.intradayData.set(element.instru + ' ' + element.expiry + ' ' + element.scrip, prices);\n    });\n    console.log('Loaded intraday data: ', this.intradayData);\n  }\n\n  initFetchIntraday(intradayWatch) {\n\n    interval(500).subscribe((sec) => {\n      // console.log('Fetching intraday data');\n      let cutOffTime = new Date();\n      cutOffTime.setHours(17, 5, 0, 0);\n      let openTime = new Date();\n      openTime.setHours(8, 55, 0, 0);\n\n      let currTime = new Date().getTime();\n      if (currTime > cutOffTime.getTime()) {\n        return;\n      }\n      if (currTime < openTime.getTime()) {\n        return;\n      }\n      if (new Date().getDay() === 6 || new Date().getDay() === 0) {\n        return;\n      }\n\n      intradayWatch.forEach(element => {\n\n        let scrip = element.scrip;\n        let instru = element.instru;\n        let expiry = element.expiry;\n        let ltp = null;\n        if (scrip === 'FUT' || scrip === 'SPOT') {\n          ltp = this.getInstruLTP(instru);\n        } else {\n          ltp = this.getLTP_strike(scrip, instru, expiry);\n        }\n\n        if (ltp) {\n          let arr = this.intradayData.get(instru + ' ' + expiry + ' ' + scrip);\n          if (!arr) {\n            arr = [];\n          }\n\n          let d = new Date();\n          // \"2020-10-15 8:24\"\n          let dformat = [d.getFullYear(), d.getMonth() + 1, d.getDate()].join('-')\n                        + ' ' +\n                        [d.getHours(), d.getMinutes()].join(':');\n          // let prev_ltp = arr[dformat];\n\n          let found = null;\n          for (let i = 0; i < arr.length; i++) {\n            if (arr[i].time && arr[i].time === dformat) {\n              found = i;\n              break;\n            }\n          }\n          if (found !== null) {\n            arr[found] = { time: dformat, price: ltp };\n          } else {\n            arr.push({ time: dformat, price: ltp });\n          }\n\n          // arr[dformat] = ltp;\n          this.intradayData.set(instru + ' ' + expiry + ' ' + scrip, arr);\n          // console.log('intradayData: ', this.intradayData);\n        }\n      });\n    });\n  }\n\n  getLTP_strike(scrip, instru, expiry_date) {\n\n    let is_monthly_expiry = false;\n    let expiryDate = new Date(expiry_date);\n    expiryDate.setHours(0, 0, 0, 0);\n\n    let tempmonthlyExpiryDates = AppConstants.monthlyExpiryDates;\n    if (instru === 'USDINR') {\n      tempmonthlyExpiryDates = AppConstants.monthlyExpiryDatesUSDINR;\n    }\n    for (let key in tempmonthlyExpiryDates) {\n      if (tempmonthlyExpiryDates.hasOwnProperty(key)) {\n          // console.log(key + \" -> \" + tempmonthlyExpiryDates[key] + ' ' + expiryDate);\n          if (expiryDate.getTime() === tempmonthlyExpiryDates[key].getTime()) {\n            // console.log('monthly expiry matched');\n            is_monthly_expiry = true;\n            break;\n          }\n      }\n    }\n\n    let expiry = null;\n    if (is_monthly_expiry) {\n      expiry = '' + (expiryDate.getFullYear() - 2000) + AppConstants.monthsMapping[expiryDate.getMonth() + 1];\n    } else {\n      let expiryMonth = null;\n      if (expiryDate.getMonth() + 1 === 10) {\n        expiryMonth = 'O';\n      } else if (expiryDate.getMonth() + 1 === 11) {\n        expiryMonth = 'N';\n      } else if (expiryDate.getMonth() + 1 === 12) {\n        expiryMonth = 'D';\n      } else {\n        expiryMonth = expiryDate.getMonth() + 1;\n      }\n      expiry = '' + (expiryDate.getFullYear() - 2000) + (expiryMonth) + ('0' + expiryDate.getDate()).slice(-2);\n    }\n\n    let str = instru + expiry + scrip;\n    // console.log('str: ' + str);\n    return this.mapService.getLtp(str);\n  }\n\n  getInstruLTP(instru) {\n\n    let scrip = 'NIFTY50';\n    if (instru === 'BANKNIFTY') {\n      scrip = 'BANKNIFTY';\n    }\n    if (instru === 'USDINR') {\n      let expiryDate: Date = AppConstants.monthlyExpiryDatesUSDINR[AppConstants.year + AppConstants.USDINR_FUT_MONTH];\n      let expiryMonth = null;\n      if (expiryDate.getMonth() + 1 === 10) {\n        expiryMonth = 'O';\n      } else if (expiryDate.getMonth() + 1 === 11) {\n        expiryMonth = 'N';\n      } else if (expiryDate.getMonth() + 1 === 12) {\n        expiryMonth = 'D';\n      } else {\n        expiryMonth = expiryDate.getMonth() + 1;\n      }\n      let expiry = '' + (expiryDate.getFullYear() - 2000) + (expiryMonth) + ('0' + expiryDate.getDate()).slice(-2);\n      scrip = 'USDINR' + expiry + AppConstants.USDINR_FUT_MONTH + 'FUT';\n      // console.log('getLtp strike: ' + scrip);\n    }\n\n    let spot = this.mapService.getLtp(scrip);\n\n    return spot;\n  }\n\n  saveIntradayData() {\n    // console.log('Saving intraday data: ');\n    interval(1000).subscribe((sec) => {\n\n      for (let [key, value] of this.intradayData) {\n\n        let val = value;\n        // console.log('Saving intraday data: ', val);\n        // console.log('Saving intraday data json: ', JSON.stringify(val));\n        localStorage.setItem(\n          key,\n          JSON.stringify(val)\n        );\n      }\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AppConstants } from './application.constant';\nimport { AppService } from '../app.service';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { AliceBlueWsFrameMode, AliceblueInstrument, AliceBlueLiveFeedType, Instrument, AliceMarketData } from './models';\nimport { WebsocketService } from './websocket.service';\nimport { MapService } from './map.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AliceblueParserService {\n\n  constructor(\n    private http: HttpClient,\n    private mapService: MapService\n  ) { }\n\n  handleSocketMessage(binaryData) {\n    // console.log('AliceblueService message', binaryData);\n    this.parseSocketMessage(binaryData);\n  }\n\n  parseSocketMessage(binaryData) {\n    const dataByteArry = new Uint8Array(binaryData);\n    if (dataByteArry instanceof Uint8Array) {\n      let mode = dataByteArry[0];\n      // let payload = dataByteArry.subarray(1);\n      // console.log('mode', mode);\n      if (mode === AliceBlueWsFrameMode.MARKETDATA) {\n        this.parseMarketData(dataByteArry);\n      } else if (mode === AliceBlueWsFrameMode.COMPACT_MARKETDATA) {\n\n      } else if (mode === AliceBlueWsFrameMode.SNAPQUOTE) {\n\n      } else if (mode === AliceBlueWsFrameMode.FULL_SNAPQUOTE) {\n\n      } else if (mode === AliceBlueWsFrameMode.DPR) {\n\n      } else if (mode === AliceBlueWsFrameMode.OI) {\n        console.log('***** RECEIVED OI');\n      } else if (mode === AliceBlueWsFrameMode.MARKET_STATUS) {\n\n      } else if (mode === AliceBlueWsFrameMode.EXCHANGE_MESSAGES) {\n\n      }\n    } else {\n      console.error('Error while converting binary data to byte array');\n    }\n  }\n\n  parseMarketData(payload: Uint8Array) {\n    // console.log(payload.byteLength);\n    /* for (let i = 0; i < payload.byteLength; i++) {\n      // do something with each byte in the array\n    } */\n    let p = new AliceMarketData();\n    p.exchange_code = payload[1];\n\n    let multiplier = 100;\n    if (p.exchange_code === 3) {\n      multiplier = 10000000;\n    }\n\n    // console.log(p.exchange_code);\n    // console.log(enc.decode(payload.subarray(0, 2)));\n    // console.log(this.byteArrayToNumber(payload.subarray(6, 10), 24));\n    p.token = this.byteArrayToNumber(payload.subarray(2, 6), 24);\n    p.ltp = this.byteArrayToNumber(payload.subarray(6, 10), 24) / multiplier;\n    p.ltt_unix = this.byteArrayToNumber(payload.subarray(10, 14), 24);\n    p.last_traded_qty = this.byteArrayToNumber(payload.subarray(14, 18), 24);\n    p.volume = this.byteArrayToNumber(payload.subarray(18, 22), 24);\n    p.best_bid = this.byteArrayToNumber(payload.subarray(22, 26), 24) / multiplier;\n    p.best_bid_qty = this.byteArrayToNumber(payload.subarray(26, 30), 24);\n    p.best_ask = this.byteArrayToNumber(payload.subarray(30, 34), 24) / multiplier;\n    p.best_ask_qty = this.byteArrayToNumber(payload.subarray(34, 38), 24);\n    p.total_buy_qty = this.byteArrayToNumber(payload.subarray(38, 46), 56);\n    p.total_sell_qty = this.byteArrayToNumber(payload.subarray(46, 54), 56);\n    p.atp = this.byteArrayToNumber(payload.subarray(54, 58), 24) / multiplier;\n    p.exchange_timestamp = this.byteArrayToNumber(payload.subarray(58, 62), 24);\n    p.open = this.byteArrayToNumber(payload.subarray(62, 66), 24) / multiplier;\n    p.high = this.byteArrayToNumber(payload.subarray(66, 70), 24) / multiplier;\n    p.low = this.byteArrayToNumber(payload.subarray(70, 74), 24) / multiplier;\n    p.close = this.byteArrayToNumber(payload.subarray(74, 78), 24) / multiplier;\n    p.year_high = this.byteArrayToNumber(payload.subarray(78, 82), 24) / multiplier;\n    p.year_low = this.byteArrayToNumber(payload.subarray(82, 86), 24) / multiplier;\n    // console.log('parseMarketData:', p);\n    // console.log('parseMarketData:', new Date(p.ltt_unix * 1000), new Date(p.ltt_unix * 1000).getHours(), new Date(p.ltt_unix * 1000).getMinutes(), new Date(p.ltt_unix * 1000).getSeconds());\n    /* if (seconds === 0) {\n      update current min\n    } else {\n      update current min+1\n    } */\n    this.updateMaps(p);\n  }\n\n  private convertPayloadToString(payload: Uint8Array): string {\n    let payloadstr = String.fromCharCode.apply(null, payload);\n    return payloadstr;\n  }\n\n  byteArrayToNumber(bufferedArray: Uint8Array, shiftMax: number): number {\n    let accum = 0;\n    let shiftBy = 0;\n    let startIndex = 0;\n\n    for (shiftBy = shiftMax; shiftBy >= 0; shiftBy -= 8) {\n      accum |= (bufferedArray[startIndex] & 0xff) << shiftBy;\n      startIndex++;\n      // console.log(accum, shiftBy, startIndex);\n    }\n\n    return accum;\n  }\n\n  updateMaps(p: AliceMarketData) {\n    let instru_masters = AppConstants.abMastersContract.get(p.token);\n\n    if (instru_masters) {\n      // console.log('instru_masters.symbol', instru_masters.symbol);\n      let split = instru_masters.symbol.split(' ');\n      let instru = split[0];\n      let strike = isNaN(split[split.length - 2] as any) ? split[split.length - 2] : Number(split[split.length - 2]);\n      let type = split[split.length - 1];\n\n      let expiry = '';\n      if (split.length === 4) {// NIFTY JUN 9000 PE\n        expiry = AppConstants.year + split[1]; // TODO: make year 21 when 2021 year starts\n        // console.log(expiry);\n      } else { // USDINR 19 JUN20 77.0 CE, NIFTY JUN FUT, NIFTY 13 AUG20 9000.0 PE\n        let expiryDate = new Date(instru_masters.expiry);\n        // console.log((expiryDate.getFullYear() - 2000), (expiryDate.getMonth() + 1), expiryDate.getDate());\n        let expiryMonth = null;\n        if (expiryDate.getMonth() + 1 === 10) {\n          expiryMonth = 'O';\n        } else if (expiryDate.getMonth() + 1 === 11) {\n          expiryMonth = 'N';\n        } else if (expiryDate.getMonth() + 1 === 12) {\n          expiryMonth = 'D';\n        } else {\n          expiryMonth = expiryDate.getMonth() + 1;\n        }\n        expiry = '' + (expiryDate.getFullYear() - 2000) + (expiryMonth) + ('0' + expiryDate.getDate()).slice(-2); // expiryDate.getDate();\n      }\n\n      let symbol = instru + expiry + strike + type; // NIFTY2061810000CE NIFTY20JUN10000CE NIFTY20N1810000CE\n\n      // console.log('updateMaps strike is', symbol);\n      this.mapService.setLtp(symbol, p.ltp);\n      this.mapService.setAtp(symbol, p.atp);\n      this.mapService.setVolume(symbol, p.volume);\n      // this.mapService.setOI(instru_masters.symbol, p.oi);\n      // this.mapService.setChgOI(instru_masterss.symbol, p.chgoi);\n    } else { // symbol is in nse masters or cds masters, not nfo masters\n      let symbol = '';\n      if (p.token === 26000) {\n        symbol = 'NIFTY50';\n      } else if (p.token === 26009) {\n        symbol = 'BANKNIFTY';\n      } else if (p.token === 1) {\n        symbol = 'USDINR';\n      } else {\n        console.error(p.token, 'not found in masters');\n      }\n      this.mapService.setLtp(symbol, p.ltp);\n      this.mapService.setAtp(symbol, p.atp);\n      this.mapService.setVolume(symbol, p.volume);\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AppConstants } from './application.constant';\nimport { AppService } from '../app.service';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { AliceBlueWsFrameMode, AliceblueInstrument, AliceBlueLiveFeedType, Instrument } from './models';\nimport { WebsocketService } from './websocket.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AliceblueService {\n\n  baseUrl = 'https://ant.aliceblueonline.com';\n  // abMastersContract: AliceblueInstrument[] = [];\n\n  constructor(\n    private http: HttpClient,\n    private webSocketService: WebsocketService\n  ) { }\n\n  getMastersContract(access_token?) {\n    let httpOptions = {\n      responseType: 'json' as 'json'\n    };\n\n    let url = this.baseUrl + '/api/v2/contracts.json?exchanges=NFO';\n    this.http.get(url, httpOptions).subscribe((res: any) => {\n      console.log('AliceblueService getMastersContract', res);\n      if (res) {\n        AppConstants.abMastersContract.clear();\n        for (let o in res) {\n          if (res[o] instanceof Array) {\n            res[o].forEach(i => {\n              let p = new AliceblueInstrument();\n              p.symbol = i.symbol; // USDINR 19 JUN20 77.0 CE, NIFTY JUN FUT, NIFTY JUN 9000 PE, NIFTY 13 AUG20 9000.0 PE\n              p.lotSize = Number(i.lotSize);\n              p.expiry = new Date(i.expiry * 1000).toDateString();\n              p.exchange_code = i.exchange_code;\n              p.exchange = i.exchange;\n              p.company = i.company;\n              p.code = Number(i.code);\n              // let split = i.symbol.split(' ');\n              // let key = split[0] + split[split.length - 2] + split[split.length - 1]; // NIFTY10000CE\n              /* if (i.code === 95734 || i.code === '95734') {\n                console.log('**** FOUND', i.code);\n              } */\n              if (p.code === 95734) {\n                // console.log('**** FOUND', i.code);\n              }\n              AppConstants.abMastersContract.set(p.code, p);\n            });\n          }\n        }\n\n        this.connectWebsocket(access_token);\n\n      }\n      console.log('AliceblueService getMastersContract abMastersContract', AppConstants.abMastersContract);\n    },\n    error => {\n      console.log('AliceblueService getMastersContract error', error);\n    });\n  }\n\n  connectWebsocket(access_token) {\n    this.webSocketService.connect(access_token);\n  }\n\n  sendSubscriptions(instruments: Instrument[]) {\n    /* for _instrument in instrument:\n                if not isinstance(_instrument, Instrument):\n                    raise TypeError(\"Required parameter instrument not of type Instrument\")\n                exchange = self.__exchange_codes[_instrument.exchange] \n                arr.append([exchange, int(_instrument.token)])\n                self.__subscribers[_instrument] = live_feed_type\n    arr.append([exchange, int(_instrument.token)])\n    data = json.dumps({'a' : 'subscribe', 'v' : arr, 'm' : AliceBlueLiveFeedType.MARKET_DATA}) */\n\n    let arr = [];\n    instruments.forEach(instrument => {\n      let instru = this.findStrikeInMasters(instrument);\n      if (instru) {\n        arr.push([instru.exchange_code, instru.code]);\n      }\n    });\n    let message = JSON.stringify({'a' : 'subscribe', 'v' : arr, 'm' : AliceBlueLiveFeedType.MARKET_DATA});\n\n    console.log('sendSubscriptions: ' + message);\n    this.webSocketService.sendMessage(message);\n  }\n\n  findStrikeInMasters(instrument: Instrument): AliceblueInstrument {\n/*\n    symbol in masters:\n    USDINR 19 JUN20 77.0 CE\n    NIFTY 13 AUG20 9000.0 PE\n    NIFTY JUN FUT\n    NIFTY JUN 9000 PE\n */\n    let return_instru = null;\n    AppConstants.abMastersContract.forEach(element => {\n    // for (let i = 0; i < this.abMastersContract.length; i++) {\n      // let element = this.abMastersContract[i];\n      let split = element.symbol.split(' ');\n      let instru = split[0];\n      let strike = split[split.length - 2];\n      let type = split[split.length - 1];\n      // console.log(instru, strike, type, element.expiry, instrument.instru, instrument.strike, instrument.type, instrument.expiry);\n      if (instrument.expiry === element.expiry &&\n           instrument.instru === instru &&\n           instrument.strike === Number(strike) &&\n           instrument.type === type) {\n        return_instru = element;\n        return;\n      }\n    });\n    return return_instru;\n\n    /*\n    for contract in master_contract:\n            if symbol == master_contract[contract].symbol.split(' ')[0]:\n                matches.append(master_contract[contract])\n    matches = []\n    for i in res:\n        if(i.expiry == expiry_date):\n            matches.append(i)\n    for i in matches:\n        if(is_fut == True):\n            if('FUT' in i.symbol):\n                return i\n        else:\n            sp = i.symbol.split(' ')\n            if((sp[-1] == 'CE') or (sp[-1] == 'PE')):\n                if(float(sp[-2]) == float(strike)):\n                    if(is_CE == True):\n                        if(sp[-1] == 'CE'):\n                            return i\n                    else:\n                        if(sp[-1] == 'PE'):\n                            return i */\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AppConstants } from './application.constant';\nimport { AppService } from '../app.service';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { from } from 'rxjs';\nimport * as xml2js from 'xml2js';\nimport { AliceblueInstrument, AliceBlueLiveFeedType, Instrument } from './models';\nimport { AngelWebsocketService } from './angelwebsocket.service';\n// const fyers = require('fyers-api');\n// import * as fyers from 'fyers-api';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AngelService {\n\n  baseUrl = 'https://apiconnect.angelbroking.com';\n\n  constructor(\n    private http: HttpClient,\n    private angelWS: AngelWebsocketService\n  ) { }\n\n  getAngelHeaders() {\n    \n  }\n\n  angelLogin() {\n\n    this.auth().subscribe((res: any) => {\n      console.log('angel auth', res);\n      if (res && res.data) {\n        AppConstants.angelFeedToken = res.data.feedToken;\n        AppConstants.angelJWTToken = res.data.jwtToken;\n        AppConstants.angelRefreshToken = res.data.refreshToken;\n\n        this.angelWS.connect();\n      }\n    },\n    error => {\n      console.log('angel auth error', error);\n    });\n  }\n\n  getMastersContract() {\n    let httpOptions = {\n      responseType: 'json' as 'json'\n    };\n\n    let url = 'https://margincalculator.angelbroking.com/OpenAPI_File/files/OpenAPIScripMaster.json';\n    this.http.get(url, httpOptions).subscribe((res: any) => {\n      console.log('AngelService getMastersContract', res);\n      if (res) {\n        AppConstants.abMastersContract.clear();\n        res.forEach(i => {\n\n          // {\"token\":\"37616\",\"symbol\":\"BANKNIFTY28OCT2139100CE\",\"name\":\"BANKNIFTY\",\"expiry\":\"28OCT2021\",\"strike\":\"3910000.000000\",\"lotsize\":\"25\",\"instrumenttype\":\"OPTIDX\",\"exch_seg\":\"NFO\",\"tick_size\":\"5.000000\"},\n\n          let p = new AliceblueInstrument();\n\n          let multiplier = 100;\n          if (i.exch_seg === 'CDS') {\n            multiplier = 10000000;\n          }\n\n          p.instru = i.name;\n          p.strike = Number(i.strike) / multiplier;\n          if (i.symbol.endsWith('CE')) {\n            p.optionType = 'CE';\n          }\n          if (i.symbol.endsWith('PE')) {\n            p.optionType = 'PE';\n          }\n          if (i.symbol.endsWith('FUT')) {\n            p.optionType = 'FUT';\n          } \n\n          p.symbol = i.symbol; // BANKNIFTY28OCT2139100CE NIFTY28OCT21FUT USDINR21O1475.25CE\n          p.lotSize = Number(i.lotsize);\n          p.expiry = new Date(i.expiry).toDateString();\n          // p.exchange_code = i.exchange_code;\n          p.exchange = i.exch_seg;\n          // p.company = i.company;\n          p.code = Number(i.token);\n          // let split = i.symbol.split(' ');\n          // let key = split[0] + split[split.length - 2] + split[split.length - 1]; // NIFTY10000CE\n          /* if (i.code === 95734 || i.code === '95734') {\n            console.log('**** FOUND', i.code);\n          } */\n          if (p.code === 95734) {\n            // console.log('**** FOUND', i.code);\n          }\n          AppConstants.abMastersContract.set(p.code, p);\n\n        });\n\n        this.angelLogin();\n      }\n      console.log('AngelService getMastersContract abMastersContract', AppConstants.abMastersContract);\n    },\n    error => {\n      console.log('AngelService getMastersContract error', error);\n    });\n  }\n\n  sendSubscriptions(instruments: Instrument[]) {\n    /* for _instrument in instrument:\n                if not isinstance(_instrument, Instrument):\n                    raise TypeError(\"Required parameter instrument not of type Instrument\")\n                exchange = self.__exchange_codes[_instrument.exchange] \n                arr.append([exchange, int(_instrument.token)])\n                self.__subscribers[_instrument] = live_feed_type\n    arr.append([exchange, int(_instrument.token)])\n    data = json.dumps({'a' : 'subscribe', 'v' : arr, 'm' : AliceBlueLiveFeedType.MARKET_DATA}) */\n\n    let arr = [];\n    instruments.forEach(instrument => {\n      let instru = this.findStrikeInMasters(instrument);\n      \n    });\n    // let message = JSON.stringify({'a' : 'subscribe', 'v' : arr, 'm' : AliceBlueLiveFeedType.MARKET_DATA});\n\n    let strwatchlistscrips = 'nse_fo|43315&nse_fo|38692'\n    let subs = '{\"task\":\"mw\",\"channel\":\"' + strwatchlistscrips + '\",\"token\":\"' + AppConstants.angelFeedToken + '\",\"user\": \"' + AppConstants.angelUserId + '\",\"acctid\":\"' + AppConstants.angelUserId + '\"}';\n      \n    \n    console.log('angel sendSubscriptions: ' + subs);\n    this.angelWS.sendMessage(subs);\n  }\n\n  findStrikeInMasters(instrument: Instrument): AliceblueInstrument {\n/*\n    symbol in masters:\n    BANKNIFTY28OCT2139100CE \n    NIFTY28OCT21FUT \n    USDINR21O1475.25CE\n */\n    let return_instru = null;\n    AppConstants.abMastersContract.forEach(element => {\n\n      // console.log(instru, strike, type, element.expiry, instrument.instru, instrument.strike, instrument.type, instrument.expiry);\n      if (instrument.expiry === element.expiry &&\n           instrument.instru === element.instru &&\n           instrument.strike === element.strike &&\n           instrument.type === element.optionType) {\n        return_instru = element;\n        return;\n      }\n    });\n    return return_instru;\n  }\n\n\n  auth() {\n    /* let reqBody = { 'app_id': AppConstants.fyersAppId, 'secret_key':  AppConstants.fyersSecretId };\n    return fyers.auth(reqBody); */\n\n    let httpOptions = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'X-UserType': 'USER',\n        'X-SourceID': 'WEB',\n        'X-ClientLocalIP': '192.168.0.2',\n        'X-ClientPublicIP': '101.190.74.150',\n        'X-MACAddress': '37:ab:f8:95:27:ff',\n        'X-PrivateKey': AppConstants.angelAPIKey,        \n      }),\n      responseType: 'json' as 'json'\n    };\n\n    let url = this.baseUrl + '/rest/auth/angelbroking/user/v1/loginByPassword';\n\n    let body = {'clientcode':AppConstants.angelUserId,'password':AppConstants.angelPassword};\n\n    return this.http.post(url, body, httpOptions);\n\n    /* {\n      \"status\": true,\n      \"message\": \"SUCCESS\",\n      \"errorcode\": \"\",\n      \"data\": {\n          \"jwtToken\": \"eyJhbGciOiJIUzUxMiJ9.eyJ1c2VybmFtZSI6IkExNjUzMDciLCJyb2xlcyI6MCwidXNlcnR5cGUiOiJVU0VSIiwiaWF0IjoxNjA4NTY0MDU4LCJleHAiOjE2MDg1NzMwNTh9.VTx5ZmHagVRoPiS982j1LnIyNvpK7QIknwctRgO_QBlntYSAuWCuhEPzjC-rKJjqul2imxOvPLYZ6JVIuqVcPw\",\n          \"refreshToken\": \"eyJhbGciOiJIUzUxMiJ9.eyJ0b2tlbiI6IlJFRlJFU0gtVE9LRU4iLCJpYXQiOjE2MDg1NjQwNTh9.JWbUh1b1XcqLQUJzWr270DrFSsIjrZe4X4d6iDdgpjmy6p_AYt38qJukRuuNekztfvrwyOPVw3j8ni5H8xvOBQ\",\n          \"feedToken\": \"1168502830\"\n      }\n    } */\n  }\n\n  getFunds(access_token) {\n\n    let httpOptions = {\n      headers: new HttpHeaders({\n        Authorization: 'Bearer ' + access_token,\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'X-UserType': 'USER',\n        'X-SourceID': 'WEB',\n        'X-ClientLocalIP': '192.168.0.2',\n        'X-ClientPublicIP': '101.190.74.150',\n        'X-MACAddress': '37:ab:f8:95:27:ff',\n        'X-PrivateKey': AppConstants.angelAPIKey,        \n      }),\n      responseType: 'json' as 'json'\n    };\n\n    let url = this.baseUrl + '/rest/secure/angelbroking/user/v1/getRMS';\n    return this.http.get(url, httpOptions);\n\n    /* {\n      \"status\": true,\n      \"message\": \"SUCCESS\",\n      \"errorcode\": \"\",\n      \"data\": {\n          \"net\": \"80152.68437499999709\",\n          \"availablecash\": \"80152.68437499999709\",\n          \"availableintradaypayin\": \"100000\",\n          \"availablelimitmargin\": \"0\",\n          \"collateral\": \"0\",\n          \"m2munrealized\": \"0\",\n          \"m2mrealized\": \"0\",\n          \"utiliseddebits\": \"19847.315624999999272\",\n          \"utilisedspan\": \"0\",\n          \"utilisedoptionpremium\": \"0\",\n          \"utilisedholdingsales\": \"0\",\n          \"utilisedexposure\": \"0\",\n          \"utilisedturnover\": \"0\",\n          \"utilisedpayout\": \"0\"\n      }\n    } */\n  }\n\n  getPositions(access_token) {\n\n    /* return from(\n      [this.convertToJson(AppConstants.dummyResPos.replace('\\ufeff', ''))]\n    ); */\n\n    /* return from(\n      [JSON.parse(AppConstants.dummyResPos)]\n    ); */\n\n    let httpOptions = {\n      headers: new HttpHeaders({\n        Authorization: 'Bearer ' + access_token,\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'X-UserType': 'USER',\n        'X-SourceID': 'WEB',\n        'X-ClientLocalIP': '192.168.0.2',\n        'X-ClientPublicIP': '101.190.74.150',\n        'X-MACAddress': '37:ab:f8:95:27:ff',\n        'X-PrivateKey': AppConstants.angelAPIKey,        \n      }),\n      responseType: 'json' as 'json'\n    };\n\n    let url = this.baseUrl + '/rest/secure/angelbroking/order/v1/getPosition';\n    return this.http.get(url, httpOptions);\n\n    /* {\n      \"status\": true,\n      \"message\": \"SUCCESS\",\n      \"errorcode\": \"\",\n      \"data\": [\n          {\n              \"symboltoken\": \"44068\",\n              \"symbolname\": \"NIFTY\",\n              \"instrumenttype\": \"OPTIDX\",\n              \"priceden\": \"1\",\n              \"pricenum\": \"1\",\n              \"genden\": \"1\",\n              \"gennum\": \"1\",\n              \"precision\": \"2\",\n              \"multiplier\": \"-1\",\n              \"boardlotsize\": \"1\",\n              \"exchange\": \"NFO\",\n              \"producttype\": \"INTRADAY\",\n              \"tradingsymbol\": \"NIFTY24DEC2015000CE\",\n              \"symbolgroup\": \"XX\",\n              \"strikeprice\": \"1500000\",\n              \"optiontype\": \"CE\",\n              \"expirydate\": \"24DEC2020\",\n              \"lotsize\": \"75\",\n              \"cfbuyqty\": \"0\",\n              \"cfsellqty\": \"0\",\n              \"cfbuyamount\": \"0\",\n              \"cfsellamount\": \"0\",\n              \"buyavgprice\": \"0\",\n              \"sellavgprice\": \"165\",\n              \"avgnetprice\": \"165\",\n              \"netvalue\": \"12375\",\n              \"netqty\": \"-75\",\n              \"totalbuyvalue\": \"0\",\n              \"totalsellvalue\": \"12375\",\n              \"cfbuyavgprice\": \"0\",\n              \"cfsellavgprice\": \"0\",\n              \"totalbuyavgprice\": \"0\",\n              \"totalsellavgprice\": \"165\",\n              \"netprice\": \"165\",\n              \"buyqty\": \"0\",\n              \"sellqty\": \"75\",\n              \"buyamount\": \"0\",\n              \"sellamount\": \"12375\"\n          }\n      ]\n    } */\n  }\n\n  getOrders(access_token) {\n\n    /* return from(\n      [JSON.parse(AppConstants.dummyResOrd)]\n    ); */\n\n    let httpOptions = {\n      headers: new HttpHeaders({\n        Authorization: 'Bearer ' + access_token,\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'X-UserType': 'USER',\n        'X-SourceID': 'WEB',\n        'X-ClientLocalIP': '192.168.0.2',\n        'X-ClientPublicIP': '101.190.74.150',\n        'X-MACAddress': '37:ab:f8:95:27:ff',\n        'X-PrivateKey': AppConstants.angelAPIKey,        \n      }),\n      responseType: 'json' as 'json'\n    };\n\n    let url = this.baseUrl + '/rest/secure/angelbroking/order/v1/getOrderBook';\n    return this.http.get(url, httpOptions);\n  }\n\n  place_order(access_token, body) {\n\n    let httpOptions = {\n      headers: new HttpHeaders({\n        Authorization: access_token,\n        'Content-Type': 'application/json'\n      }),\n      responseType: 'json' as 'json'\n    };\n\n    let url = this.baseUrl + 'orders';\n\n    return this.http.post(url, body, httpOptions);\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { AppConstants } from './application.constant';\nimport { AliceBlueLiveFeedType, Instrument } from './models';\nimport { AliceblueParserService } from './aliceblue-parser.service';\nimport { Subject } from 'rxjs';\nimport { resourceUsage } from 'process';\n//import * as smartapi from 'smartapi-javascript';\nimport * as pako from 'pako';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AngelWebsocketService {\n\n  public websocketEvent$: Subject<any> = new Subject();\n  heartbeatInterval;\n  websocket: WebSocket;\n  socket_endpoint = 'wss://omnefeeds.angelbroking.com/NestHtml5Mobile/socket/stream?';\n  url2 = \"wss://wsfeeds.angelbroking.com/NestHtml5Mobile/socket/stream\";\n\n\n  constructor(\n    private aliceblueParserService: AliceblueParserService\n  ) { }\n\n   isSocketConnected() {\n    if (this.websocket && this.websocket.OPEN === 1) {\n      return true;\n    }\n    return false;\n  }\n\n  connect(): void {\n\n    this.websocket = new WebSocket(\n      this.socket_endpoint\n    );\n    this.websocket.binaryType = 'arraybuffer';\n    this.websocket.onopen = () => {\n      this.handleOnOpen(event);\n    };\n    this.websocket.onmessage = messageEvent => {\n      this.handleOnMessage(messageEvent);\n    };\n    this.websocket.onerror = event => {\n      this.handleOnError(event);\n    };\n    this.websocket.onclose = event => {\n      this.handleOnClose(event);\n    };\n  }\n\n  handleOnOpen(event: Event): void {\n    console.log('Opened Web Socket connection');\n    /* if (AppConstants.SocketMode === 'aliceblue') {\n      this.sendHeartbeat();\n      this.sendInitialSubscription();\n      this.websocketEvent$.next('connected');\n    } */\n\n    let _req = '{\"task\":\"cn\",\"channel\":\"\",\"token\":\"' + AppConstants.angelFeedToken + '\",\"user\": \"' + AppConstants.angelUserId + '\",\"acctid\":\"' + AppConstants.angelUserId + '\"}';\n    this.sendMessage(_req);\n\n    this.sendHeartbeat();\n  }\n\n  sendHeartbeat() {\n    this.heartbeatInterval = setInterval(() => {\n      // console.log('sending heartbeat');\n      let message = '{\"task\":\"hb\",\"channel\":\"\",\"token\":\"' + AppConstants.angelFeedToken + '\",\"user\": \"' + AppConstants.angelUserId + '\",\"acctid\":\"' + AppConstants.angelUserId + '\"}';\n      this.sendMessage(message);\n    }, 59000);\n  }\n\n  sendInitialSubscription() {\n    console.log('sending initial subscription');\n    let usdinr_fut_code = AppConstants.USDINRFUTCodes[AppConstants.USDINR_FUT_MONTH];\n    let message = JSON.stringify({\n      'a' : 'subscribe',\n      'v' : [[1, 26000], [1, 26009], [3, 1], [3, usdinr_fut_code]/* , [2, 95734], [2, 95733] */],\n      'm' : AliceBlueLiveFeedType.MARKET_DATA});\n\n    // 26000 26009 for nf and bnf spot\n    // 1 is usdinr spot\n\n    console.log('usdinr_fut_code', usdinr_fut_code);\n\n    this.sendMessage(message);\n  }\n\n  handleOnMessage(messageEvent: MessageEvent) {\n    console.log('handleOnMessage', messageEvent, messageEvent.data);\n    // console.log('handleOnMessage parse', JSON.parse(messageEvent.data));\n    /* if (AppConstants.SocketMode === 'aliceblue') {\n      this.aliceblueParserService.handleSocketMessage(messageEvent.data);\n    } */\n\n    let strData = atob(messageEvent.data);\n\n    // Convert binary string to character-number array\n    var charData = strData.split('').map(function (x) { return x.charCodeAt(0); });\n\n    // Turn number array into byte-array\n    var binData = new Uint8Array(charData);\n\n    // Pako magic\n    var result = this._atos(pako.inflate(binData));\n\n    console.log('parsed', result);\n\n    let json = JSON.parse(result)[0];\n    if (json && json.msg === 'connected') {\n      console.log('ANGEL WS CONNECTED');\n\n      // USDINR: cde_fo|1\n      // NIFTY50: cde_fo|2 - not working\n      /* let strwatchlistscrips = 'nse_fo|43315&nse_fo|38692'\n      //let strwatchlistscrips = 'cde_fo|2'\n      let subs = '{\"task\":\"mw\",\"channel\":\"' + strwatchlistscrips + '\",\"token\":\"' + AppConstants.angelFeedToken + '\",\"user\": \"' + AppConstants.angelUserId + '\",\"acctid\":\"' + AppConstants.angelUserId + '\"}';\n      this.sendMessage(subs); */\n\n      this.websocketEvent$.next('connected');\n\n      /* strwatchlistscrips = 'nse_fo|38692'\n      subs = '{\"task\":\"mw\",\"channel\":\"' + strwatchlistscrips + '\",\"token\":\"' + AppConstants.angelFeedToken + '\",\"user\": \"' + AppConstants.angelUserId + '\",\"acctid\":\"' + AppConstants.angelUserId + '\"}';\n      this.sendMessage(subs); */\n\n      // [{\"tvalue\":\"12\\/10\\/2021 13:19:20\",\"name\":\"tm\"},{\"to\":\"3484040944.50\",\"lo\":\"38.65\",\"e\":\"nse_fo\",\"sp\":\"54.15\",\"c\":\"78.30\",\"ltp\":\"54.00\",\"ltq\":\"50\",\"tk\":\"43315\",\"bs\":\"450\",\"ltt\":\"12\\/10\\/2021 13:19:19\",\"tsq\":\"1385600\",\"v\":\"61349550\",\"bp\":\"54.00\",\"cng\":\"-24.30\",\"bq\":\"150\",\"ap\":\"56.79\",\"nc\":\"-31.0345\",\"name\":\"sf\",\"tbq\":\"749350\"}]\n    \n      // [{\"e\":\"nse_fo\",\"name\":\"sf\",\"ltp\":\"54.00\",\"ltq\":\"50\",\"tk\":\"43315\",\"ltt\":\"NA\"}]\n\n      // [{\"to\":\"23800815.00\",\"lo\":\"01.75\",\"e\":\"nse_fo\",\"sp\":\"02.00\",\"c\":\"02.60\",\"ltp\":\"01.95\",\"ltq\":\"50\",\"tk\":\"38692\",\"bs\":\"21500\",\"ltt\":\"12\\/10\\/2021 13:19:13\",\"tsq\":\"361500\",\"v\":\"9958500\",\"bp\":\"01.95\",\"cng\":\"-00.65\",\"bq\":\"108350\",\"ap\":\"02.39\",\"nc\":\"-25.00\",\"name\":\"sf\",\"tbq\":\"1945850\"},{\"to\":\"3484075018.50\",\"lo\":\"38.65\",\"e\":\"nse_fo\",\"sp\":\"54.05\",\"c\":\"78.30\",\"ltp\":\"53.95\",\"ltq\":\"100\",\"tk\":\"43315\",\"bs\":\"1800\",\"ltt\":\"12\\/10\\/2021 13:19:20\",\"tsq\":\"1390250\",\"v\":\"61350150\",\"bp\":\"53.90\",\"cng\":\"-24.35\",\"bq\":\"700\",\"ap\":\"56.79\",\"nc\":\"-31.0983\",\"name\":\"sf\",\"tbq\":\"747150\"}]\n    \n    }\n  }\n\n\n  _atos(array) {\n    var newarray = [];\n    try {\n         for (var i = 0; i < array.length; i++) {\n              newarray.push(String.fromCharCode(array[i]));\n         }\n    } catch (e) { }\n\n    return newarray.join('');\n  }\n\n  handleOnError(event: Event): void {\n    console.log('Error in WS connection', event);\n  }\n\n  handleOnClose(event: CloseEvent): void {\n    console.log('Closed WS connection', event);\n    clearInterval(this.heartbeatInterval);\n    this.websocket = null;\n    setTimeout(() => {\n      if (this.websocket && this.websocket.OPEN === 1) {\n        // ws connected\n      } else {\n        console.log('Reconnecting websocket');\n        this.connect();\n      }\n      \n    }, 2000);\n  }\n\n  sendMessage(message): any {\n    if (this.websocket && this.websocket.OPEN === 1) {\n      console.log('Sending message over websocket: ' + message);\n      this.websocket.send(message);\n    } else {\n      console.log(\n        'Cannot send the message. Socket is not yet opened or it has been closed - ',\n        message\n      );\n    }\n  }\n}\n","import { AliceblueInstrument } from './models';\r\n\r\nexport class AppConstants {\r\n  static SocketMode = 'aliceblue'; // angel\r\n  static RestMode = 'fyers';\r\n  static fyersAppId = 'FUU5Z8ICUH';\r\n  static fyersSecretId = 'IYF3LPXJ0X';\r\n  static angelUserId = 'A165307';\r\n  static angelPassword = 'scjFNB5iYLI';\r\n  static angelAPIKey = 'I5nI74Nm';\r\n  static angelFeedToken = '';\r\n  static angelJWTToken = '';\r\n  static angelRefreshToken = '';\r\n  static year = '21'; // TODO: make year 21 when 2021 year starts\r\n  static INTEREST_RATE = 6; // https://in.investing.com/rates-bonds/india-10-year-bond-yield-historical-data\r\n  static curr_positions_trades = [];\r\n  static isSimulatedStrategy = false;\r\n  static isProduction = true;\r\n  static numAlerts = 4;\r\n  \r\n  /* static USDINRFUTCodes = {\r\n    'SEP': 1985,\r\n    'OCT': 2698,\r\n    'NOV': 3050,\r\n    'DEC': 1487,\r\n  }; */\r\n  static USDINRFUTCodes = {\r\n    'JAN': 1814,\r\n    'FEB': 1277,\r\n    'MAR': 10288,\r\n    'APR': 1168,\r\n    'MAY': 1255,\r\n    'JUN': 1612,\r\n    'JUL': 2771,\r\n    'AUG': 7395,\r\n    'SEP': 1354,\r\n    'OCT': 1629,\r\n    'NOV': 3244,\r\n    'DEC': 1421,\r\n  };\r\n\r\n  static USDINR_FUT_MONTH = new Date().toLocaleString('default', { month: 'short' }).toUpperCase().substring(0,3); // 'JUL';\r\n\r\n  static abMastersContract = new Map<number, AliceblueInstrument>();\r\n\r\n  static monthsMapping = {\r\n    1 : 'JAN',\r\n    2 : 'FEB',\r\n    3 : 'MAR',\r\n    4 : 'APR',\r\n    5 : 'MAY',\r\n    6 : 'JUN',\r\n    7 : 'JUL',\r\n    8 : 'AUG',\r\n    9 : 'SEP',\r\n    10 : 'OCT',\r\n    11 : 'NOV',\r\n    12 : 'DEC'\r\n  };\r\n\r\n/*   static monthlyExpiryDates = {\r\n    '20JUN': new Date(2020, 5, 25),\r\n    '20JUL': new Date(2020, 6, 30),\r\n    '20AUG': new Date(2020, 7, 27),\r\n    '20SEP': new Date(2020, 8, 24),\r\n    '20OCT': new Date(2020, 9, 29),\r\n    '20NOV': new Date(2020, 10, 26),\r\n    '20DEC': new Date(2020, 11, 31),\r\n  };\r\n\r\n  static monthlyExpiryDatesUSDINR = {\r\n    '20JUN': new Date(2020, 5, 26),\r\n    '20JUL': new Date(2020, 6, 29),\r\n    '20AUG': new Date(2020, 7, 27),\r\n    '20SEP': new Date(2020, 8, 28),\r\n    '20OCT': new Date(2020, 9, 27),\r\n    '20NOV': new Date(2020, 10, 25),\r\n    '20DEC': new Date(2020, 11, 29),\r\n  }; */\r\n\r\n  static monthlyExpiryDates = {\r\n    '21JAN': new Date(2021, 0, 27),\r\n    '21FEB': new Date(2021, 1, 24),\r\n    '21MAR': new Date(2021, 2, 26),\r\n    '21APR': new Date(2021, 3, 29),\r\n    '21MAY': new Date(2021, 4, 27),\r\n    '21JUN': new Date(2021, 5, 24),\r\n    '21JUL': new Date(2021, 6, 29),\r\n    '21AUG': new Date(2021, 7, 26),\r\n    '21SEP': new Date(2021, 8, 30),\r\n    '21OCT': new Date(2021, 9, 28),\r\n    '21NOV': new Date(2021, 10, 25),\r\n    '21DEC': new Date(2021, 11, 30),\r\n  };\r\n\r\n  static monthlyExpiryDatesUSDINR = {\r\n    '21JAN': new Date(2021, 0, 27),\r\n    '21FEB': new Date(2021, 1, 24),\r\n    '21MAR': new Date(2021, 2, 26),\r\n    '21APR': new Date(2021, 3, 28),\r\n    '21MAY': new Date(2021, 4, 27),\r\n    '21JUN': new Date(2021, 5, 25),\r\n    '21JUL': new Date(2021, 6, 28),\r\n    '21AUG': new Date(2021, 7, 27),\r\n    '21SEP': new Date(2021, 8, 28),\r\n    '21OCT': new Date(2021, 9, 27),\r\n    '21NOV': new Date(2021, 10, 26),\r\n    '21DEC': new Date(2021, 11, 17),\r\n  };\r\n\r\n  static dummyResPos = '{\"s\":\"ok\",\"netPositions\":[{\"crossCurrency\":\"N\",\"qty\":16,\"realized_profit\":0,\"id\":\"NSE:JPASSOCIAT-EQ-CNC\",\"unrealized_profit\":0.32,\"buyQty\":16,\"sellAvg\":0,\"sellQty\":0,\"buyAvg\":4.78,\"symbol\":\"NSE:JPASSOCIAT-EQ\",\"fyToken\":\"101000000011460\",\"slNo\":0,\"avgPrice\":4.78,\"segment\":\"E\",\"dummy\":\" \",\"rbiRefRate\":1,\"side\":1,\"netQty\":16,\"pl\":0.32,\"productType\":\"CNC\",\"netAvg\":4.78,\"qtyMulti_com\":1},{\"crossCurrency\":\"N\",\"qty\":16,\"realized_profit\":0,\"id\":\"NSE:JPASSOCIAT-EQ-CNC\",\"unrealized_profit\":0.32,\"buyQty\":16,\"sellAvg\":0,\"sellQty\":0,\"buyAvg\":4.78,\"symbol\":\"NSE:JPASSOCIAT-EQ\",\"fyToken\":\"101000000011460\",\"slNo\":0,\"avgPrice\":4.78,\"segment\":\"E\",\"dummy\":\" \",\"rbiRefRate\":1,\"side\":1,\"netQty\":16,\"pl\":0.32,\"productType\":\"CNC\",\"netAvg\":4.78,\"qtyMulti_com\":1}],\"message\":\"\"}';\r\n  static dummyResOrd = '{\"s\":\"ok\",\"message\":\"\",\"orderBook\":[{\"status\":5,\"symbol\":\"NSE:TCSEQ\",\"qty\":1,\"orderNumStatus\":\"119050790482:5\",\"dqQtyRem\":5,\"orderDateTime\":\"07-May-2019 15:18:04\",\"orderValidity\":\"IOC\",\"fyToken\":\"101000000011536\",\"slNo\":1,\"message\":\"RMS:119050790482:Not allowed to trade in NSE EQ\",\"segment\":\"E\",\"id\":\"119050790482\",\"stopPrice\":0,\"exchOrdId\":0,\"remainingQuantity\":1,\"filledQty\":0,\"limitPrice\":2155,\"offlineOrder\":\"false\",\"instrument\":\"EQUITY\",\"productType\":\"CNC\",\"type\":1,\"side\":1,\"discloseQty\":5,\"tradedPrice\":0}]}';\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { AppConstants } from './application.constant';\nimport { AppService } from '../app.service';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { from } from 'rxjs';\nimport * as xml2js from 'xml2js';\n// const fyers = require('fyers-api');\n// import * as fyers from 'fyers-api';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FyersService {\n\n  baseUrl = 'https://api.fyers.in/api/v1/';\n  dataUrl = 'https://data.fyers.in/data-api/v1/';\n  testUrl = 'https://jsonplaceholder.typicode.com/posts';\n\n  constructor(\n    private http: HttpClient\n  ) { }\n\n  auth() {\n    /* let reqBody = { 'app_id': AppConstants.fyersAppId, 'secret_key':  AppConstants.fyersSecretId };\n    return fyers.auth(reqBody); */\n\n    let httpOptions = {\n      headers: new HttpHeaders({\n        /* Authorization: auth, */\n        'Content-Type': 'application/json'\n      }),\n      responseType: 'json' as 'json'\n    };\n\n    let url = this.baseUrl + 'auth';\n    let body = { 'app_id': AppConstants.fyersAppId, 'secret_key':  AppConstants.fyersSecretId };\n\n    return this.http.post(url, body, httpOptions);\n  }\n\n  getTokenUrl(auth_code, appId) {\n    /* return fyers.generateToken(); */\n    return this.baseUrl + 'genrateToken' + '?authorization_code=' + auth_code + '&appId=' + appId;\n  }\n\n  getFunds(access_token) {\n\n    let httpOptions = {\n      headers: new HttpHeaders({\n        Authorization: access_token,\n        'Content-Type': 'application/json'\n      }),\n      responseType: 'json' as 'json'\n    };\n\n    let url = this.baseUrl + 'funds';\n    return this.http.get(url, httpOptions);\n  }\n\n  getPositions(access_token) {\n\n    /* return from(\n      [this.convertToJson(AppConstants.dummyResPos.replace('\\ufeff', ''))]\n    ); */\n\n    /* return from(\n      [JSON.parse(AppConstants.dummyResPos)]\n    ); */\n\n    let httpOptions = {\n      headers: new HttpHeaders({\n        Authorization: access_token,\n        'Content-Type': 'application/json'\n      }),\n      responseType: 'json' as 'json'\n    };\n\n    let url = this.baseUrl + 'positions';\n    return this.http.get(url, httpOptions);\n  }\n\n  getOrders(access_token) {\n\n    /* return from(\n      [JSON.parse(AppConstants.dummyResOrd)]\n    ); */\n\n    let httpOptions = {\n      headers: new HttpHeaders({\n        Authorization: access_token,\n        'Content-Type': 'application/json'\n      }),\n      responseType: 'json' as 'json'\n    };\n\n    let url = this.baseUrl + 'orders';\n    return this.http.get(url, httpOptions);\n  }\n\n  place_order(access_token, body) {\n\n    let httpOptions = {\n      headers: new HttpHeaders({\n        Authorization: access_token,\n        'Content-Type': 'application/json'\n      }),\n      responseType: 'json' as 'json'\n    };\n\n    let url = this.baseUrl + 'orders';\n\n    return this.http.post(url, body, httpOptions);\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { IntradayData } from './models';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MapService {\n\n  ltpMap = new Map<string, number>();\n  atpMap = new Map<string, number>();\n  volumeMap = new Map<string, number>();\n  oiMap = new Map<string, number>();\n  chgoiMap = new Map<string, number>();\n\n  intradayData: IntradayData[] = new Array<IntradayData>();\n\n  static simulateData = {};\n\n  constructor(\n  ) { }\n\n  getLtp(strike: string) {\n    return this.ltpMap.get(strike);\n  }\n\n  setLtp(strike: string, val: number) {\n    this.ltpMap.set(strike, val);\n  }\n\n  getAtp(strike: string) {\n    return this.atpMap.get(strike);\n  }\n\n  setAtp(strike: string, val: number) {\n    this.atpMap.set(strike, val);\n  }\n\n  getVolume(strike: string) {\n    return this.volumeMap.get(strike);\n  }\n\n  setVolume(strike: string, val: number) {\n    this.volumeMap.set(strike, val);\n  }\n\n  getOI(strike: string) {\n    return this.oiMap.get(strike);\n  }\n\n  setOI(strike: string, val: number) {\n    this.oiMap.set(strike, val);\n  }\n\n  getChgOI(strike: string) {\n    return this.chgoiMap.get(strike);\n  }\n\n  setChgOI(strike: string, val: number) {\n    this.chgoiMap.set(strike, val);\n  }\n\n  getIntradayData(period: number) {\n    return this.intradayData.slice(Math.max(this.intradayData.length - period, 0))\n  }\n\n  setIntradayData() {\n\n  }\n\n/* \n  getLtp(strike: string) {\n    if (AppConstants.isSimulatedStrategy) {\n\n    } else {\n      return this.ltpMap.get(strike);\n    }\n  }\n\n  setLtp(strike: string, val: number) {\n    if (AppConstants.isSimulatedStrategy) {\n\n    } else {\n      this.ltpMap.set(strike, val);\n    }\n  }\n\n  getAtp(strike: string) {\n    if (AppConstants.isSimulatedStrategy) {\n\n    } else {\n      return this.atpMap.get(strike);\n    }\n  }\n\n  setAtp(strike: string, val: number) {\n    if (AppConstants.isSimulatedStrategy) {\n\n    } else {\n      this.atpMap.set(strike, val);\n    }\n  }\n\n  getVolume(strike: string) {\n    if (AppConstants.isSimulatedStrategy) {\n\n    } else {\n      return this.volumeMap.get(strike);\n    }\n  }\n\n  setVolume(strike: string, val: number) {\n    if (AppConstants.isSimulatedStrategy) {\n\n    } else {\n      this.volumeMap.set(strike, val);\n    }\n  }\n\n  getOI(strike: string) {\n    if (AppConstants.isSimulatedStrategy) {\n\n    } else {\n      return this.oiMap.get(strike);\n    }\n  }\n\n  setOI(strike: string, val: number) {\n    if (AppConstants.isSimulatedStrategy) {\n\n    } else {\n      this.oiMap.set(strike, val);\n    }\n  }\n\n  getChgOI(strike: string) {\n    if (AppConstants.isSimulatedStrategy) {\n\n    } else {\n      return this.chgoiMap.get(strike);\n    }\n  }\n\n  setChgOI(strike: string, val: number) {\n    if (AppConstants.isSimulatedStrategy) {\n\n    } else {\n      this.chgoiMap.set(strike, val);\n    }\n  } */\n}\n","\r\nexport class IntradayData {\r\n  time: string;\r\n  price: number;\r\n  trueRange: number;\r\n  atr: number;\r\n  ema: number;\r\n}\r\n\r\nexport class Position {\r\n  id: string;\r\n  scrip: string;\r\n  cmp: number;\r\n  netQty: number;\r\n  buyAvg: number;\r\n  sellAvg: number;\r\n  type: string;\r\n  realizedProfit: number;\r\n  pnl: number;\r\n  includeInSum1: boolean = false;\r\n  includeInSum2: boolean = false;\r\n  includeInSum3: boolean = false;\r\n  includeInSum4: boolean = false;\r\n}\r\n\r\nexport class Order {\r\n  id: string;\r\n  scrip: string;\r\n  qty: number;\r\n  status: string;\r\n  message: string;\r\n  type: string;\r\n  limit: string;\r\n  stop: string;\r\n  tradedPrice: string;\r\n  side: string;\r\n  orderDateTime: string;\r\n}\r\n\r\nexport class PlaceOrder {\r\n  symbol: string;\r\n  qty: number;\r\n  type: number;\r\n  side: number;\r\n  productType: string;\r\n  limitPrice: number;\r\n  stopPrice: number;\r\n  disclosedQty: number;\r\n  validity: string;\r\n  offlineOrder: string;\r\n  stopLoss: number;\r\n  takeProfit: number;\r\n}\r\n\r\nexport class AliceblueInstrument {\r\n  symbol: string;\r\n  lotSize: number;\r\n  expiry: string;\r\n  exchange_code: number;\r\n  exchange: string;\r\n  company: string;\r\n  code: number;\r\n\r\n  // For Angel masters\r\n  instru: string;\r\n  strike: number;\r\n  optionType: string;\r\n}\r\n\r\nexport class Instrument {\r\n  expiry: string;\r\n  instru: string;\r\n  strike: number;\r\n  type: string;\r\n}\r\n\r\nexport class AliceMarketData {\r\n  exchange_code: number;\r\n  token: number;\r\n  ltp: number;\r\n  ltt_unix: number;\r\n  last_traded_qty: number;\r\n  volume: number;\r\n  best_bid: number;\r\n  best_bid_qty: number;\r\n  best_ask: number;\r\n  best_ask_qty: number;\r\n  total_buy_qty: number;\r\n  total_sell_qty: number;\r\n  atp: number;\r\n  exchange_timestamp: number;\r\n  open: number;\r\n  high: number;\r\n  low: number;\r\n  close: number;\r\n  year_high: number;\r\n  year_low: number;\r\n}\r\n\r\nexport enum AliceBlueLiveFeedType {\r\n  MARKET_DATA = 'marketdata',\r\n  COMPACT = 'compact_marketdata',\r\n  SNAPQUOTE = 'snapquote',\r\n  FULL_SNAPQUOTE = 'full_snapquote'\r\n}\r\n\r\nexport enum AliceBlueWsFrameMode {\r\n  MARKETDATA = 1,\r\n  COMPACT_MARKETDATA = 2,\r\n  SNAPQUOTE = 3,\r\n  FULL_SNAPQUOTE = 4,\r\n  SPREADDATA = 5,\r\n  SPREAD_SNAPQUOTE = 6,\r\n  DPR = 7,\r\n  OI = 8,\r\n  MARKET_STATUS = 9,\r\n  EXCHANGE_MESSAGES = 10\r\n}\r\n\r\nexport enum PositionTypeForPayOff {\r\n  CEsell = 'cesell',\r\n  PEsell = 'pesell',\r\n  CEbuy = 'cebuy',\r\n  PEbuy = 'pebuy',\r\n  CE = 'ce',\r\n  PE = 'pe'\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { AppConstants } from './application.constant';\nimport { AliceBlueLiveFeedType, Instrument } from './models';\nimport { AliceblueParserService } from './aliceblue-parser.service';\nimport { Subject } from 'rxjs';\n//import * as smartapi from 'smartapi-javascript';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WebsocketService {\n\n  public websocketEvent$: Subject<any> = new Subject();\n  heartbeatInterval;\n  websocket: WebSocket;\n  access_token;\n  baseUrl = 'https://ant.aliceblueonline.com';\n  socket_endpoint = 'wss://ant.aliceblueonline.com/hydrasocket/v2/websocket?access_token=';\n\n  constructor(\n    private aliceblueParserService: AliceblueParserService\n  ) { }\n\n  isSocketConnected() {\n    if (this.websocket && this.websocket.OPEN === 1) {\n      return true;\n    }\n    return false;\n  }\n\n  connect(access_token: string): void {\n\n    this.access_token = access_token;\n    this.websocket = new WebSocket(\n      this.socket_endpoint + access_token\n    );\n    this.websocket.binaryType = 'arraybuffer';\n    this.websocket.onopen = () => {\n      this.handleOnOpen(event);\n    };\n    this.websocket.onmessage = messageEvent => {\n      this.handleOnMessage(messageEvent);\n    };\n    this.websocket.onerror = event => {\n      this.handleOnError(event);\n    };\n    this.websocket.onclose = event => {\n      this.handleOnClose(event);\n    };\n  }\n\n  handleOnOpen(event: Event): void {\n    console.log('Opened Web Socket connection');\n    if (AppConstants.SocketMode === 'aliceblue') {\n      this.sendHeartbeat();\n      this.sendInitialSubscription();\n      this.websocketEvent$.next('connected');\n    }\n  }\n\n  sendHeartbeat() {\n    this.heartbeatInterval = setInterval(() => {\n      // console.log('sending heartbeat');\n      let message = JSON.stringify({\"a\": \"h\", \"v\": [], \"m\": \"\"});\n      this.sendMessage(message);\n    }, 5000);\n  }\n\n  sendInitialSubscription() {\n    console.log('sending initial subscription');\n    let usdinr_fut_code = AppConstants.USDINRFUTCodes[AppConstants.USDINR_FUT_MONTH];\n    let message = JSON.stringify({\n      'a' : 'subscribe',\n      'v' : [[1, 26000], [1, 26009], [3, 1], [3, usdinr_fut_code]/* , [2, 95734], [2, 95733] */],\n      'm' : AliceBlueLiveFeedType.MARKET_DATA});\n\n    // 26000 26009 for nf and bnf spot\n    // 1 is usdinr spot\n\n    console.log('usdinr_fut_code', usdinr_fut_code);\n\n    this.sendMessage(message);\n  }\n\n  handleOnMessage(messageEvent: MessageEvent) {\n    // console.log('handleOnMessage', messageEvent);\n    if (AppConstants.SocketMode === 'aliceblue') {\n      this.aliceblueParserService.handleSocketMessage(messageEvent.data);\n    }\n  }\n\n  handleOnError(event: Event): void {\n    console.log('Error in WS connection', event);\n  }\n\n  handleOnClose(event: CloseEvent): void {\n    console.log('Closed WS connection', event);\n    clearInterval(this.heartbeatInterval);\n    this.websocket = null;\n    setTimeout(() => {\n      console.log('Reconnecting websocket');\n      this.connect(this.access_token);\n    }, 2000);\n  }\n\n  sendMessage(message): any {\n    if (this.websocket && this.websocket.OPEN === 1) {\n      // console.log('Sending message over websocket: ' + message);\n      this.websocket.send(message);\n    } else {\n      console.log(\n        'Cannot send the message. Socket is not yet opened or it has been closed - ',\n        message\n      );\n    }\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":"webpack:///"}