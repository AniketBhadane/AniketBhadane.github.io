var S3=Object.create;var n_=Object.defineProperty,C3=Object.defineProperties,x3=Object.getOwnPropertyDescriptor,D3=Object.getOwnPropertyDescriptors,E3=Object.getOwnPropertyNames,Vh=Object.getOwnPropertySymbols,M3=Object.getPrototypeOf,i_=Object.prototype.hasOwnProperty,MS=Object.prototype.propertyIsEnumerable;var ES=(n,t,e)=>t in n?n_(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,ne=(n,t)=>{for(var e in t||={})i_.call(t,e)&&ES(n,e,t[e]);if(Vh)for(var e of Vh(t))MS.call(t,e)&&ES(n,e,t[e]);return n},Ie=(n,t)=>C3(n,D3(t));var r_=(n,t)=>{var e={};for(var i in n)i_.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&Vh)for(var i of Vh(n))t.indexOf(i)<0&&MS.call(n,i)&&(e[i]=n[i]);return e};var s_=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var T3=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of E3(t))!i_.call(n,r)&&r!==e&&n_(n,r,{get:()=>t[r],enumerable:!(i=x3(t,r))||i.enumerable});return n};var Ra=(n,t,e)=>(e=n!=null?S3(M3(n)):{},T3(t||!n||!n.__esModule?n_(e,"default",{value:n,enumerable:!0}):e,n));var F2=s_((exports,module)=>{(function(){"use strict";var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&typeof module=="object"&&module.exports,AMD=typeof define=="function"&&define.amd,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(n){return typeof n=="object"&&n.buffer&&n.buffer.constructor===ArrayBuffer});var createOutputMethod=function(n,t){return function(e){return new Sha256(t,!0).update(e)[n]()}},createMethod=function(n){var t=createOutputMethod("hex",n);NODE_JS&&(t=nodeWrap(t,n)),t.create=function(){return new Sha256(n)},t.update=function(r){return t.create().update(r)};for(var e=0;e<OUTPUT_TYPES.length;++e){var i=OUTPUT_TYPES[e];t[i]=createOutputMethod(i,n)}return t},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(n){if(typeof n=="string")return crypto.createHash(algorithm).update(n,"utf8").digest("hex");if(n==null)throw new Error(ERROR);return n.constructor===ArrayBuffer&&(n=new Uint8Array(n)),Array.isArray(n)||ArrayBuffer.isView(n)||n.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(n)).digest("hex"):method(n)};return nodeMethod},createHmacOutputMethod=function(n,t){return function(e,i){return new HmacSha256(e,t,!0).update(i)[n]()}},createHmacMethod=function(n){var t=createHmacOutputMethod("hex",n);t.create=function(r){return new HmacSha256(r,n)},t.update=function(r,s){return t.create(r).update(s)};for(var e=0;e<OUTPUT_TYPES.length;++e){var i=OUTPUT_TYPES[e];t[i]=createHmacOutputMethod(i,n)}return t};function Sha256(n,t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=n}Sha256.prototype.update=function(n){if(!this.finalized){var t,e=typeof n;if(e!=="string"){if(e==="object"){if(n===null)throw new Error(ERROR);if(ARRAY_BUFFER&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!Array.isArray(n)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(n)))throw new Error(ERROR)}else throw new Error(ERROR);t=!0}for(var i,r=0,s,o=n.length,a=this.blocks;r<o;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),t)for(s=this.start;r<o&&s<64;++r)a[s>>2]|=n[r]<<SHIFT[s++&3];else for(s=this.start;r<o&&s<64;++r)i=n.charCodeAt(r),i<128?a[s>>2]|=i<<SHIFT[s++&3]:i<2048?(a[s>>2]|=(192|i>>6)<<SHIFT[s++&3],a[s>>2]|=(128|i&63)<<SHIFT[s++&3]):i<55296||i>=57344?(a[s>>2]|=(224|i>>12)<<SHIFT[s++&3],a[s>>2]|=(128|i>>6&63)<<SHIFT[s++&3],a[s>>2]|=(128|i&63)<<SHIFT[s++&3]):(i=65536+((i&1023)<<10|n.charCodeAt(++r)&1023),a[s>>2]|=(240|i>>18)<<SHIFT[s++&3],a[s>>2]|=(128|i>>12&63)<<SHIFT[s++&3],a[s>>2]|=(128|i>>6&63)<<SHIFT[s++&3],a[s>>2]|=(128|i&63)<<SHIFT[s++&3]);this.lastByteIndex=s,this.bytes+=s-this.start,s>=64?(this.block=a[16],this.start=s-64,this.hash(),this.hashed=!0):this.start=s}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,t=this.lastByteIndex;n[16]=this.block,n[t>>2]|=EXTRA[t&3],this.block=n[16],t>=56&&(this.hashed||this.hash(),n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.hBytes<<3|this.bytes>>>29,n[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var n=this.h0,t=this.h1,e=this.h2,i=this.h3,r=this.h4,s=this.h5,o=this.h6,a=this.h7,l=this.blocks,c,u,d,h,p,_,A,v,b,x,N;for(c=16;c<64;++c)p=l[c-15],u=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,p=l[c-2],d=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,l[c]=l[c-16]+u+l[c-7]+d<<0;for(N=t&e,c=0;c<64;c+=4)this.first?(this.is224?(v=300032,p=l[0]-1413257819,a=p-150054599<<0,i=p+24177077<<0):(v=704751109,p=l[0]-210244248,a=p-1521486534<<0,i=p+143694565<<0),this.first=!1):(u=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),d=(r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7),v=n&t,h=v^n&e^N,A=r&s^~r&o,p=a+d+A+K[c]+l[c],_=u+h,a=i+p<<0,i=p+_<<0),u=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),d=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),b=i&n,h=b^i&t^v,A=a&r^~a&s,p=o+d+A+K[c+1]+l[c+1],_=u+h,o=e+p<<0,e=p+_<<0,u=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),d=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),x=e&i,h=x^e&n^b,A=o&a^~o&r,p=s+d+A+K[c+2]+l[c+2],_=u+h,s=t+p<<0,t=p+_<<0,u=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),d=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),N=t&e,h=N^t&i^x,A=s&o^~s&a,p=r+d+A+K[c+3]+l[c+3],_=u+h,r=n+p<<0,n=p+_<<0;this.h0=this.h0+n<<0,this.h1=this.h1+t<<0,this.h2=this.h2+e<<0,this.h3=this.h3+i<<0,this.h4=this.h4+r<<0,this.h5=this.h5+s<<0,this.h6=this.h6+o<<0,this.h7=this.h7+a<<0},Sha256.prototype.hex=function(){this.finalize();var n=this.h0,t=this.h1,e=this.h2,i=this.h3,r=this.h4,s=this.h5,o=this.h6,a=this.h7,l=HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[i&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15];return this.is224||(l+=HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]),l},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var n=this.h0,t=this.h1,e=this.h2,i=this.h3,r=this.h4,s=this.h5,o=this.h6,a=this.h7,l=[n>>24&255,n>>16&255,n>>8&255,n&255,t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24&255,i>>16&255,i>>8&255,i&255,r>>24&255,r>>16&255,r>>8&255,r&255,s>>24&255,s>>16&255,s>>8&255,s&255,o>>24&255,o>>16&255,o>>8&255,o&255];return this.is224||l.push(a>>24&255,a>>16&255,a>>8&255,a&255),l},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(this.is224?28:32),t=new DataView(n);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),n};function HmacSha256(n,t,e){var i,r=typeof n;if(r==="string"){var s=[],o=n.length,a=0,l;for(i=0;i<o;++i)l=n.charCodeAt(i),l<128?s[a++]=l:l<2048?(s[a++]=192|l>>6,s[a++]=128|l&63):l<55296||l>=57344?(s[a++]=224|l>>12,s[a++]=128|l>>6&63,s[a++]=128|l&63):(l=65536+((l&1023)<<10|n.charCodeAt(++i)&1023),s[a++]=240|l>>18,s[a++]=128|l>>12&63,s[a++]=128|l>>6&63,s[a++]=128|l&63);n=s}else if(r==="object"){if(n===null)throw new Error(ERROR);if(ARRAY_BUFFER&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!Array.isArray(n)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(n)))throw new Error(ERROR)}else throw new Error(ERROR);n.length>64&&(n=new Sha256(t,!0).update(n).array());var c=[],u=[];for(i=0;i<64;++i){var d=n[i]||0;c[i]=92^d,u[i]=54^d}Sha256.call(this,t,e),this.update(u),this.oKeyPad=c,this.inner=!0,this.sharedMemory=e}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var n=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(n),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&define(function(){return exports}))})()});var Zm=s_((Qm,ZR)=>{(function(n,t){typeof Qm=="object"&&typeof ZR<"u"?t(Qm):typeof define=="function"&&define.amd?define(["exports"],t):t((n=typeof globalThis<"u"?globalThis:n||self).indicators={})})(Qm,function(n){"use strict";var t=function(B,S){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,P){I.__proto__=P}||function(I,P){for(var V in P)Object.prototype.hasOwnProperty.call(P,V)&&(I[V]=P[V])})(B,S)},e=function(){return(e=Object.assign||function(B){for(var S,I=arguments,P=1,V=arguments.length;P<V;P++)for(var Y in S=I[P])Object.prototype.hasOwnProperty.call(S,Y)&&(B[Y]=S[Y]);return B}).apply(this,arguments)};function i(){for(var B=arguments,S=0,I=0,P=arguments.length;I<P;I++)S+=B[I].length;var V=Array(S),Y=0;for(I=0;I<P;I++)for(var $=arguments[I],fe=0,_e=$.length;fe<_e;fe++,Y++)V[Y]=$[fe];return V}var r=function(){function B(S,I,P,V,Y,$){$===void 0&&($=null),this.forked=!1,this.forkedAt=0,this.lastForkY=null,this.step=V,this.index=Y,this.length=0,this.startPoint=$?{y:S?$.h:$.l,x:$.x}:{y:S||I,x:P},this.init(S,I,P),this.thisPoint=this.startPoint}return B.prototype.init=function(S,I,P){this.type||(this.type=S?"h":"l"),this.candlePoint={y:this.type=="h"?S:I,x:P},this.thisPoint&&(this.prevPoint=this.thisPoint,this.nextPoint&&(this.thisPoint=this.nextPoint),this.nextPoint={y:this.k*(this.candlePoint.x+this.step)+this.b,x:this.candlePoint.x+this.step})},B.prototype.update=function(S,I,P){var V=null;if(this.length++,this.init(S,I,P),this.k&&!isNaN(this.k)||(this.k=(this.candlePoint.y-this.startPoint.y)/(this.candlePoint.x-this.startPoint.x),this.b=this.candlePoint.y-this.k*this.candlePoint.x,this.prevPoint=this.startPoint,this.thisPoint=this.candlePoint,this.nextPoint={y:this.k*(this.candlePoint.x+this.step)+this.b,x:this.candlePoint.x+this.step},V={condition:this.type=="h"?"lt":"gt",value:this.nextPoint.y,action:"fork",lineIndex:this.index}),this.type=="h"&&this.thisPoint.y<=this.candlePoint.y||this.type=="l"&&this.thisPoint.y>=this.candlePoint.y){this.k=(this.candlePoint.y-this.startPoint.y)/(this.candlePoint.x-this.startPoint.x),this.b=this.candlePoint.y-this.k*this.candlePoint.x,this.thisPoint=this.candlePoint,this.length=0,this.nextPoint={y:this.k*(this.candlePoint.x+this.step)+this.b,x:this.candlePoint.x+this.step};var Y=this.rollback?this.rollback.length:0,$=this.candlePoint.y-this.prevPoint.y;(this.type=="h"?$>0:$<0)?(this.rollback={k:$,b:this.candlePoint.y-$*this.candlePoint.x,length:Y+1,lastForkTime:this.forkedAt||(this.rollback?this.rollback.lastForkTime:0),lastForkValue:this.forkedValue||(this.rollback?this.rollback.lastForkValue:0)},this.forked=!1,this.forkedAt=null,this.forkedValue=null):(this.forkedAt=this.candlePoint.x,this.forkedValue=this.candlePoint.y,this.forked=!0,this.rollback=null),V={condition:this.type=="h"?"lt":"gt",value:this.nextPoint.y,action:"fork",lineIndex:this.index}}else this.rollback=null;return V},B.prototype.updateStep=function(S){this.step=S},B}(),s=function(){function B(S){this.lineIndex=0,this.forkDiffH=null,this.forkDiffL=null,this.step=S,this.list=[[],[]],this.id={}}return B.prototype.add=function(S,I,P,V,Y){V===void 0&&(V=null),Y===void 0&&(Y=null);var $,fe,_e,Re=null;if(Y==null?($=this.lineIndex,this.lineIndex++,S!=null?this.list[0].push($):this.list[1].push($)):($=Y,Re=this.id[$].lastForkY||(S!=null?V.h:V.l)),this.id[$]=new r(S,I,P,this.step,$,V),Re&&(this.id[$].lastForkY=Re),$>1||Y!=null&&this.id[Y]!=null){fe=Y??this.list[this.id[$].type=="h"?0:1][this.list[this.id[$].type=="h"?0:1].indexOf($)-1],_e=Y??this.list[this.id[$].type=="h"?0:1][this.list[this.id[$].type=="h"?0:1].indexOf($)-2];var be=this.id[fe].lastForkY;_e&&!be&&(be=this.id[_e].lastForkY);var Xe=S!=null?V.h:V.l;be&&(S?this.forkDiffH=be>=Xe?-fe-1:fe+1:this.forkDiffL=be>=Xe?-fe-1:fe+1),this.id[fe].lastForkY=Xe}return $},B.prototype.update=function(S,I,P,V){return this.id[S].update(I,P,V)},B.prototype.delete=function(S){this.id[S]&&(this.id[S].type=="h"?this.list[0].splice(this.list[0].indexOf(S),1):this.list[1].splice(this.list[1].indexOf(S),1),delete this.id[S])},B}(),o=function(){function B(S,I){this.kdiff=[],this.env=I,this.lines=S,this.in={state:null,lineIndex:null,line:null},this.is={state:null,lineIndex:null,line:null,start:null,size:0},this.was={state:null,lineIndex:null,line:null,size:null},this.width=0,this.speed=0,this.at=0}return B.prototype.update=function(S,I){var P=this;if(S.length>1?this.hlMaxDuration=S.map(function(Te){return P.lines.id[Te]}).filter(function(Te){return!P.is.line||(Te.forkedAt?Te.forkedAt>P.is.line.startPoint.x:!!Te.rollback&&Te.rollback.lastForkTime>P.is.line.startPoint.x)}).reduce(function(Te,rn){return Te.length>rn.length?Te:rn},this.lines.id[S[0]]):this.hlMaxDuration=this.lines.id[S[0]],I.length>1?this.llMaxDuration=I.map(function(Te){return P.lines.id[Te]}).filter(function(Te){return!P.is.line||(Te.forkedAt?Te.forkedAt>P.is.line.startPoint.x:!!Te.rollback&&Te.rollback.lastForkTime>P.is.line.startPoint.x)}).reduce(function(Te,rn){return Te.length>rn.length?Te:rn},this.lines.id[I[0]]):this.llMaxDuration=this.lines.id[I[0]],this.is.state==null&&this.was.state==null&&(this.is.line=this.llMaxDuration&&this.llMaxDuration.length>this.env.minLength&&this.hlMaxDuration.length<this.env.minLength?this.llMaxDuration:this.hlMaxDuration&&this.hlMaxDuration.length>this.env.minLength&&this.llMaxDuration.length<this.env.minLength?this.hlMaxDuration:null,this.is.line&&(this.is.lineIndex=this.is.line.index,this.is.state=this.is.line.type=="h"?"fall":"rise",this.is.start=this.is.line.candlePoint)),this.is.state){this.is.size=Math.max(this.is.size,Math.abs(this.is.start.y-this.is.line.candlePoint.y));var V,Y=this.lines.id[this.is.lineIndex]||this.lines.id[this.is.line.type=="h"?0:1],$=null,fe=null,_e=this.lines.list[Y.type=="h"?1:0].filter(function(Te){return P.lines.id[Te].forked&&P.lines.id[Te].thisPoint.x-P.lines.id[Te].forkedAt>12});_e.length>1?_e[1]:_e.length>0&&_e[0];var Re=_e.filter(function(Te){return P.lines.id[Te].forkedAt>P.is.start.x});if(Y&&this.lines.list[Y.type=="h"?0:1].forEach(function(Te,rn){var Mt=P.lines.id[Te];if(Te>=Y.index&&Mt.rollback!=null){V=P.lines.list[Y.type=="h"?0:1][rn-1];var Vr=P.env.deltaModel==1&&rn>1&&V&&P.lines.id[V]?rn>1&&V&&P.lines.id[V].lastForkY:P.lines.id[Te>0?Te-1:0];fe=Vr?P.lines.id[Te>1?V:Y.type=="h"?0:1].lastForkY-Mt.candlePoint.y:Mt.rollback?Mt.rollback.lastForkValue-Mt.candlePoint.y:0,Mt.rollback.lastForkValue>0&&Mt.thisPoint.x-Mt.rollback.lastForkTime>P.env.minRightLeg&&(P.is.state=="fall"?P.llMaxDuration.length>1:P.hlMaxDuration.length>1)&&((Y.type=="h"?fe<0:fe>0)||Mt.rollback.length>P.env.rollbackLength||2*P.is.size/3>Math.abs(P.is.start.y-P.is.line.candlePoint.y)&&P.is.size>P.is.line.candlePoint.y*P.env.minIsSizeOnRollback&&Re.length>1||(Y.type=="h"?Mt.candlePoint.y>P.is.start.y&&P.lines.list[0].length==1:Mt.candlePoint.y<P.is.start.y&&P.lines.list[1].length==1))&&(Mt.candlePoint.x-Mt.rollback.lastForkTime>P.env.forkDurationMin&&Mt.candlePoint.x-Mt.rollback.lastForkTime<P.env.forkDurationMax||(Y.type=="h"?Mt.candlePoint.y>Mt.startPoint.y:Mt.candlePoint.y<Mt.startPoint.y)||(Y.type=="h"?Mt.candlePoint.y>P.is.start.y&&P.lines.list[0].length==1:Mt.candlePoint.y<P.is.start.y&&P.lines.list[1].length==1))&&($=Te+1)}}),$){this.in.size=(this.was.size||0)+this.is.size;var be=this.lines.id[0].candlePoint.y-this.is.start.y,Xe=this.is.state=="rise"?be>=0:be<0;this.was.size&&(this.in.state=this.was.size>this.is.size?this.was.state:this.is.state),this.was=e({},this.is),this.was.success=Xe,this.is.line=this.is.state=="fall"?this.llMaxDuration:this.hlMaxDuration,this.is.state=this.is.line.type=="h"?"fall":"rise",this.is.lineIndex=this.is.line.index,this.is.start=this.lines.id[0].candlePoint,this.is.size=0}}},B}(),a=function(){function B(S){this.hLineDirectives=[],this.lLineDirectives=[],this.step=1,this.i=0,this.localCounter=0,this.prevPoint=null,this.env=Object.assign({step:1,minLength:5,minRightLeg:3,maxForks:500,minLog:0,maxLog:0,rollbackLength:3,deltaModel:1,minIsSizeOnRollback:.05},S),this.env.minLength=Math.round(this.env.minLength/this.env.step)||1,this.env.minRightLeg=Math.round(this.env.minRightLeg/this.env.step)||1,this.env.rollbackLength=Math.round(this.env.rollbackLength/this.env.step)||1,this.env.forkDurationMin=Math.round(this.env.forkDurationMin/this.env.step)||1,this.env.forkDurationMax=Math.round(this.env.forkDurationMax/this.env.step)||1,this.lines=new s(this.step),this.trend=new o(this.lines,this.env)}return B.prototype.log=function(S){for(var I=arguments,P=[],V=1;V<arguments.length;V++)P[V-1]=I[V];this.consoleWindow=this.env.minLog<this.localCounter&&this.localCounter<this.env.maxLog,this.consoleWindow&&console.log.apply(console,i([S],P))},B.prototype.nextValue=function(S,I,P,V){var Y,$=this;this.localCounter++,this.lLineDirectives.length>0&&this.lLineDirectives.forEach(function(_e,Re){var be=$.lines.id[_e.lineIndex];_e.condition=="gt"&&V>_e.value&&_e.action=="fork"&&be&&(_e.lineIndex!=null&&be!=null&&be.k<0?$.lines.add(null,V,$.i-1,$.prevPoint,_e.lineIndex):(be.forked=!0,be.forkedAt=be.thisPoint.x,be.forkedValue=be.thisPoint.y,$.lines.add(null,V,$.i-1,$.prevPoint)))}),this.hLineDirectives.length>0&&this.hLineDirectives.forEach(function(_e,Re){var be=$.lines.id[_e.lineIndex];_e.condition=="lt"&&P<_e.value&&_e.action=="fork"&&be&&(be.k>0?$.lines.add(P,null,$.i-1,$.prevPoint,_e.lineIndex):(be.forked=!0,be.forkedAt=be.thisPoint.x,be.forkedValue=be.thisPoint.y,$.lines.add(P,null,$.i-1,$.prevPoint)))}),this.hLineDirectives.length=0,this.lLineDirectives.length=0,this.lines.list[0].length<1?(this.lines.add(P,null,this.i),this.lines.add(null,V,this.i)):this.lines.list.forEach(function(_e){return _e.forEach(function(Re){var be=$.lines.id[Re];if(be&&be.type){Y=null,be&&be.startPoint.x<$.i&&(Y=$.lines.update(Re,P,V,$.i));var Xe=be.type;Y&&(Xe=="h"?$.hLineDirectives.push(Y):$.lLineDirectives.push(Y))}})});var fe=[];return this.lines.list.forEach(function(_e){_e&&(fe=[],_e.forEach(function(Re,be){var Xe=$.lines.id[_e[be]],Te=$.lines.id[_e[be-1]];(be>0&&Xe&&Te&&Xe.type=="h"&&Xe.thisPoint&&Te.thisPoint.y<=Xe.thisPoint.y||be>$.env.maxForks||be>0&&Xe&&Te&&Xe.type=="l"&&Xe.thisPoint&&Te.thisPoint.y>=Xe.thisPoint.y||be>$.env.maxForks)&&fe.push(Re)}),fe.forEach(function(Re){return $.lines.delete(Re)}))}),this.prevPoint={x:this.i,h:P,l:V},this.trend.update(this.lines.list[0],this.lines.list[1]),this.i++,this.lines},B}(),l=Object.freeze({__proto__:null,Indicator:a}),c=function(){function B(S){this.length=S,this.filled=!1,this.pointer=0,this.buffer=new Array(S),this.maxIndex=S-1}return B.prototype.push=function(S){var I=this.buffer[this.pointer];return this.buffer[this.pointer]=S,this.iteratorNext(),I},B.prototype.pushback=function(S){this.iteratorPrev();var I=this.buffer[this.pointer];return this.buffer[this.pointer]=S,I},B.prototype.peek=function(){return this.buffer[this.pointer]},B.prototype.forEach=function(S){for(var I=this.pointer,P=0;P!==this.length;)S(this.buffer[I],P),I=(this.length+I+1)%this.length,P++},B.prototype.forEachRight=function(S){for(var I=(this.length+this.pointer-1)%this.length,P=this.length-1;P!==this.length;)S(this.buffer[I],P),I=(this.length+I-1)%this.length,P--},B.prototype.fill=function(S){this.buffer.fill(S),this.filled=!0},B.prototype.toArray=function(){return this.buffer},B.prototype.iteratorNext=function(){this.pointer++,this.pointer>this.maxIndex&&(this.pointer=0,this.filled=!0)},B.prototype.iteratorPrev=function(){this.pointer--,this.pointer<0&&(this.pointer=this.maxIndex)},B}(),u=function(B){function S(I,P){I===void 0&&(I=100);var V=B.call(this,I)||this;return V.period=I,V.mode=P,V.comparator=P==="max"?V.maxComporator:V.mminComporator,V}return function(I,P){function V(){this.constructor=I}t(I,P),I.prototype=P===null?Object.create(P):(V.prototype=P.prototype,new V)}(S,B),S.prototype.nextValue=function(I){return this.push(I),this.getExtremum()},S.prototype.momentValue=function(I){var P=this.push(I),V=this.getExtremum();return this.pushback(P),V},S.prototype.maxComporator=function(I,P){return I>P},S.prototype.mminComporator=function(I,P){return I<P},S.prototype.getExtremum=function(I){var P=(this.length+this.pointer-2)%this.length,V=this.mode==="max"?-1/0:1/0;if(!this.filled)return 0;for(;P!==this.pointer;){var Y=this.buffer[(this.length+P-1)%this.length],$=this.buffer[(this.length+P+1)%this.length],fe=this.buffer[P];if(this.comparator(fe,V)&&this.comparator(fe,Y)&&this.comparator(fe,$)){if(V=fe,this.prevIx===P)return null;if(this.prevIx=P,I)return V}P=(this.length+P-1)%this.length}return isFinite(V)?V:(this.prevIx=null,null)},S}(c),d=function(){function B(S){this.period=S,this.sum=0,this.circular=new c(S)}return B.prototype.nextValue=function(S){var I=this;if(this.circular.push(S),this.sum+=S,this.circular.filled)return this.nextValue=function(P){return I.sum=I.sum-I.circular.push(P)+P,I.sum/I.period},this.momentValue=function(P){return(I.sum-I.circular.peek()+P)/I.period},this.sum/this.period},B.prototype.momentValue=function(S){},B}(),h=function(){function B(S){this.period=S,this.smooth=1/this.period,this.sma=new d(this.period)}return B.prototype.nextValue=function(S){return this.wema?this.wema=(S-this.wema)*this.smooth+this.wema:this.wema=this.sma.nextValue(S)},B.prototype.momentValue=function(S){return this.wema?(S-this.wema)*this.smooth+this.wema:this.sma.momentValue(S)},B}(),p=function(){function B(S){this.period=S,this.smooth=2/(this.period+1),this.sma=new d(this.period)}return B.prototype.nextValue=function(S){var I=this,P=this.sma.nextValue(S);return P&&(this.ema=P,this.nextValue=function(V){return I.ema=(V-I.ema)*I.smooth+I.ema},this.momentValue=function(V){return(V-I.ema)*I.smooth+I.ema}),P},B.prototype.momentValue=function(S){},B}(),_=function(){function B(S,I){this.indicator=S,this.samples=I,this._indicators=[]}return B.prototype.create=function(){for(var S,I=arguments,P=[],V=0;V<arguments.length;V++)P[V]=I[V];for(var Y=0;Y<this.samples;Y++)this._indicators.push(new((S=this.indicator).bind.apply(S,i([void 0],P))))},B.prototype.nextValue=function(S){for(var I=0;I<this.samples;I++)if((S=this._indicators[I].nextValue(S))===void 0)return S;return S},B.prototype.momentValue=function(S){for(var I=0;I<this.samples;I++)if((S=this._indicators[I].momentValue(S))==null)return S;return S},B}(),A=function(){function B(S,I,P,V,Y){S===void 0&&(S=.85),V===void 0&&(V=1),Y===void 0&&(Y=1),this.redunant=S,this.multiplier=V,this.offset=Y,this.prevValue=0,this.lastUpperValue=0,this.lastLowerValue=0,this.samplerUp=new _(I,P),this.samplerLow=new _(I,P)}return B.prototype.create=function(){for(var S,I,P=arguments,V=[],Y=0;Y<arguments.length;Y++)V[Y]=P[Y];(S=this.samplerUp).create.apply(S,V),(I=this.samplerLow).create.apply(I,V)},B.prototype.nextValue=function(S){this.lastUpperValue=S>0?Math.max(S,this.prevValue):Math.max(0,this.lastUpperValue)*this.redunant,this.lastLowerValue=S<=0?Math.min(S,this.prevValue):Math.min(0,this.lastLowerValue)*this.redunant;var I=(S<=0?S:this.lastLowerValue)*this.multiplier,P=(S>=0?S:this.lastUpperValue)*this.multiplier;return[this.samplerUp.nextValue(P)+this.offset,this.samplerLow.nextValue(I)-this.offset]},B}(),v=function(){function B(S,I,P,V){P===void 0&&(P=.85),V===void 0&&(V="WEMA"),this.period=S,this.samples=I,this.redunant=P,this.type=V,this.upper=0,this.lower=0,this.lastUpperValue=0,this.lastLowerValue=0,this.sample1Up=this.createSample(),this.sample2Up=this.createSample(),this.sample3Up=this.createSample(),this.sample1Low=this.createSample(),this.sample2Low=this.createSample(),this.sample3Low=this.createSample()}return B.prototype.nextValue=function(S){return S>0?(this.upper=this.getUp(S),this.lastLowerValue*=this.redunant,this.lower=this.getDown(this.lastLowerValue),this.lastUpperValue=S):S<0&&(this.lower=this.getDown(S),this.lastUpperValue*=this.redunant,this.upper=this.getUp(this.lastUpperValue),this.lastLowerValue=S),{upper:this.upper,lower:this.lower}},B.prototype.getUp=function(S){var I=this.sample1Up.nextValue(S),P=null;return this.samples===1?I:(I&&(P=this.sample2Up.nextValue(I)),this.samples===2?P:P?this.sample3Up.nextValue(P):null)},B.prototype.getDown=function(S){var I=this.sample1Low.nextValue(S),P=null;return this.samples===1?I:(I&&(P=this.sample2Low.nextValue(I)),this.samples===2?P:P?this.sample3Low.nextValue(P):null)},B.prototype.createSample=function(){switch(this.type){case"EMA":return new p(this.period);case"WEMA":return new h(this.period);case"SMA":return new d(this.period)}},B}(),b=function(){function B(S){this.period=S,this.SMAx=new d(this.period),this.SMAy=new d(this.period),this.pricesX=new c(this.period),this.pricesY=new c(this.period)}return B.prototype.nextValue=function(S,I){this.pricesX.push(S),this.pricesY.push(I),this.SMAxValue=this.SMAx.nextValue(S),this.SMAyValue=this.SMAy.nextValue(I);for(var P=0,V=0,Y=0,$=0;$<this.period;$++){var fe=this.pricesX.toArray()[$],_e=this.pricesY.toArray()[$];P+=(fe-this.SMAxValue)*(_e-this.SMAyValue),V+=Math.pow(fe-this.SMAxValue,2),Y+=Math.pow(_e-this.SMAyValue,2)}return P/Math.sqrt(V*Y)},B}(),x=function(){function B(S){this.period=S,this.denominator=S*(S+1)/2,this.buffer=new c(S),this.values=[]}return B.prototype.nextValue=function(S){var I=this;if(this.buffer.push(S),this.buffer.filled){var P=0;return this.buffer.forEach(function(V,Y){P+=V*(Y+1)/I.denominator}),P}},B.prototype.momentValue=function(S){var I=this,P=this.buffer.push(S);if(this.buffer.filled){var V=0;return this.buffer.forEach(function(Y,$){V+=Y*($+1)/I.denominator}),this.buffer.pushback(P),V}this.buffer.pushback(P)},B}(),N=function(){function B(S){S===void 0&&(S=.2),this.alpha=S,this.filled=!1}return B.prototype.nextValue=function(S){var I=this.alpha*S+(1-this.alpha)*(this.prevValue||1);if(this.filled=this.filled||this.prevValue!==void 0,this.prevValue=I,this.filled)return I},B.prototype.momentValue=function(S){if(this.filled)return this.alpha*S+(1-this.alpha)*(this.prevValue||1)},B}(),T=function(){function B(S){this.period=S,this.sum=0,this.avg=0,this.filled=!1,this.fill=0}return B.prototype.nextValue=function(S){var I=this;return this.filled?(this.nextValue=function(P){return I.avg=(I.avg*(I.period-1)+P)/I.period},this.nextValue(S)):(this.sum+=S,this.fill++,this.fill===this.period?(this.filled=!0,this.avg=this.sum/this.period,this.avg):void 0)},B.prototype.momentValue=function(S){if(this.filled)return(this.avg*(this.period-1)+S)/this.period},B}(),k=function(){function B(S){S===void 0&&(S=14),this.period=S,this.alpha=1/S,this.sma=new d(this.period)}return B.prototype.nextValue=function(S){var I=this;return this.prevValue?(this.prevValue=this.alpha*S+(1-this.alpha)*this.prevValue,this.nextValue=function(P){return I.prevValue=I.alpha*P+(1-I.alpha)*I.prevValue,I.prevValue}):this.prevValue=this.sma.nextValue(S),this.prevValue},B.prototype.momentValue=function(S){if(this.prevValue)return this.alpha*S+(1-this.alpha)*this.prevValue},B}(),C=function(){function B(S,I){S===void 0&&(S=5),I===void 0&&(I=34),this.smaSlow=new d(I),this.smaFast=new d(S)}return B.prototype.nextValue=function(S,I){var P=this;if(this.smaSlowValue=this.smaSlow.nextValue((S+I)/2),this.smaFastValue=this.smaFast.nextValue((S+I)/2),this.smaSlowValue!==void 0&&this.smaFastValue!==void 0)return this.nextValue=function(V,Y){return P.smaSlowValue=P.smaSlow.nextValue((V+Y)/2),P.smaFastValue=P.smaFast.nextValue((V+Y)/2),P.smaFastValue-P.smaSlowValue},this.momentValue=function(V,Y){return P.smaFast.momentValue((V+Y)/2)-P.smaSlow.momentValue((V+Y)/2)},this.smaFastValue-this.smaSlowValue},B.prototype.momentValue=function(S,I){},B}(),M=function(){function B(){this.sma=new d(5),this.ao=new C}return B.prototype.nextValue=function(S,I){var P=this;if(this.aoValue=this.ao.nextValue(S,I),this.aoValue!==void 0&&(this.smaValue=this.sma.nextValue(this.aoValue),this.smaValue!==void 0))return this.nextValue=function(V,Y){return P.aoValue=P.ao.nextValue(V,Y),P.smaValue=P.sma.nextValue(P.aoValue),P.aoValue-P.smaValue},this.momentValue=function(V,Y){return P.ao.momentValue(V,Y)-P.sma.momentValue(P.aoValue)},this.aoValue-this.smaValue},B.prototype.momentValue=function(S,I){},B}(),O=function(){function B(S){S===void 0&&(S=14),this.positiveMoneyFlowSum=0,this.negativeMoneyFlowSum=0,this.pevTypicalPrice=0,this.posCircular=new c(S),this.negCircular=new c(S)}return B.prototype.nextValue=function(S,I,P,V){var Y=(S+I+P)/3,$=Y*V;if(this.pevTypicalPrice){var fe=Y>this.pevTypicalPrice?$:0,_e=Y<this.pevTypicalPrice?$:0;this.pevTypicalPrice=Y,this.negativeMoneyFlowSum+=_e,this.positiveMoneyFlowSum+=fe;var Re=this.posCircular.push(fe),be=this.negCircular.push(_e);if(this.posCircular.filled)return this.negativeMoneyFlowSum-=be||0,this.positiveMoneyFlowSum-=Re||0,100-100/(1+this.positiveMoneyFlowSum/this.negativeMoneyFlowSum)}else this.pevTypicalPrice=Y},B.prototype.momentValue=function(S,I,P,V){var Y=(S+I+P)/3,$=Y*V;if(this.pevTypicalPrice){var fe=Y>this.pevTypicalPrice?$:0,_e=Y<this.pevTypicalPrice?$:0;if(this.posCircular.filled){var Re=this.posCircular.peek(),be=this.negCircular.peek(),Xe=this.negativeMoneyFlowSum+_e-be;return 100-100/(1+(this.positiveMoneyFlowSum+fe-Re)/Xe)}}},B}(),F=function(B,S){return(B-S)/S*100},j=function(){function B(S){this.period=S,this.value=0,this.changes=new c(S)}return B.prototype.nextValue=function(S){if(this.prevPrice){var I=F(S,this.prevPrice);return this.calculate(I),this.prevPrice=S,this.value}this.prevPrice=S},B.prototype.calculate=function(S){return this.value+=S,this.value-=this.changes.push(S),this.value},B}();function H(B){return B.consolidate=0,B.power=0,B.streak=0,B.diff=0,B.startPrice=0,B.prevPeak=0,B}var Q=function(){function B(){this.up={consolidate:0,power:0,streak:0,startPrice:0,diff:0,prevPeak:0},this.down={consolidate:0,power:0,streak:0,startPrice:0,diff:0,prevPeak:0}}return B.prototype.nextValue=function(S,I,P,V){if(S<I||this.up.streak&&this.up.prevPeak<V){this.up.startPrice||(this.up.startPrice=S),this.down.streak&&H(this.down);var Y=I-S;this.up.streak++,this.up.prevPeak=V,this.up.diff>Y?this.up.consolidate++:this.up.consolidate=0,this.up.diff=Y,this.up.power=F(I,this.up.startPrice)}return(S>I||this.down.streak&&this.down.prevPeak>P)&&(this.down.startPrice||(this.down.startPrice=S),this.up.streak&&H(this.up),Y=S-I,this.down.streak++,this.down.prevPeak=P,this.down.diff>Y?this.down.consolidate++:this.down.consolidate=0,this.down.diff=Y,this.down.power=F(I,this.down.startPrice)),S===I&&(this.up.streak++,this.down.streak++,this.up.diff=this.down.diff=0),this.up.streak>this.down.streak?e({},this.up):e({},this.down)},B}(),ie=function(){function B(S){this.max=-1/0,this.highest=new c(S)}return B.prototype.filled=function(){return this.highest.filled},B.prototype.nextValue=function(S){return this.max<S&&(this.max=S),this.highest.push(S)===this.max&&S!==this.max&&(this.max=function(I){for(var P=-1/0,V=I.length-1;V>=0;V--){var Y=I[V];P<Y&&(P=Y)}return P}(this.highest.toArray())),this.max},B.prototype.momentValue=function(S){return this.max>S?this.max:S},B}(),ue=function(){function B(S){this.min=1/0,this.lowest=new c(S)}return B.prototype.filled=function(){return this.lowest.filled},B.prototype.nextValue=function(S){return this.min>S&&(this.min=S),this.lowest.push(S)===this.min&&S!==this.min&&(this.min=function(I){for(var P=1/0,V=I.length-1;V>=0;V--){var Y=I[V];P>Y&&(P=Y)}return P}(this.lowest.toArray())),this.min},B.prototype.momentValue=function(S){return this.min<S?this.min:S},B}(),G=function(){function B(S,I){S===void 0&&(S=14),I===void 0&&(I=3),this.period=S,this.smaPeriod=I,this.sma=new d(this.smaPeriod),this.max=new ie(S),this.min=new ue(S)}return B.prototype.nextValue=function(S,I,P){var V=this.max.nextValue(S),Y=this.min.nextValue(I);if(this.max.filled()){var $=(P-Y)/(V-Y)*100;return{k:$,d:this.sma.nextValue($)}}},B.prototype.momentValue=function(S,I,P){if(this.max.filled()){var V=this.max.momentValue(S),Y=this.min.momentValue(I),$=(P-Y)/(V-Y)*100;return{k:$,d:this.sma.momentValue($)}}},B}(),X=function(){function B(S){this.avgGain=new T(S),this.avgLoss=new T(S)}return B.prototype.nextValue=function(S){var I=S-this.prev;if(this.prev){var P=I>0?I:0,V=I<0?I:0,Y=this.avgGain.nextValue(P),$=this.avgLoss.nextValue(V);return this.prev=S,{upAvg:Y,downAvg:$}}this.prev=S},B.prototype.momentValue=function(S){var I=S-this.prev,P=I>0?I:0,V=I<0?I:0;return{upAvg:this.avgGain.momentValue(P),downAvg:this.avgLoss.momentValue(V)}},B}(),te=function(){function B(S){S===void 0&&(S=14),this.period=S,this.change=new X(this.period)}return B.prototype.nextValue=function(S){var I=this.change.nextValue(S)||{},P=I.downAvg,V=I.upAvg;if(V!==void 0&&P!==void 0)return 100-100/(1+V/-P)},B.prototype.momentValue=function(S){var I=this.change.momentValue(S)||{},P=I.downAvg,V=I.upAvg;if(V!==void 0&&P!==void 0)return 100-100/(1+V/-P)},B}(),ve=function(){function B(S,I,P,V){S===void 0&&(S=14),I===void 0&&(I=3),P===void 0&&(P=3),V===void 0&&(V=14),this.rsi=new te(S),this.sma1=new d(I),this.sma2=new d(P),this.max=new ie(V),this.min=new ue(V)}return B.prototype.nextValue=function(S){var I=this.rsi.nextValue(S);if(I!==void 0){var P=this.max.nextValue(I),V=this.min.nextValue(I);if(this.max.filled()){var Y=(I-V)/(P-V)*100,$=this.sma1.nextValue(Y);if($!==void 0)return{k:$,d:this.sma2.nextValue($),stochRsi:Y}}}},B.prototype.momentValue=function(S){if(this.max.filled()){var I=this.rsi.momentValue(S),P=this.max.momentValue(I),V=this.min.momentValue(I),Y=(I-V)/(P-V)*100,$=this.sma1.momentValue(Y);return{k:$,d:this.sma2.momentValue($),stochRsi:Y}}},B}(),he=function(){function B(S){this.period=S,this.values=new c(S)}return B.prototype.nextValue=function(S,I){if(I)return this.nextValue=this.pureNextValue,this.momentValue=this.pureMomentValue,this.pureNextValue(S,I);this.values.push(S)},B.prototype.momentValue=function(S,I){},B.prototype.pureNextValue=function(S,I){var P=this;return this.values.push(S),this.values.toArray().reduce(function(V,Y){return V+P.positiveDelta(I,Y)},0)/this.period},B.prototype.pureMomentValue=function(S,I){var P=this,V=this.values.push(S),Y=this.values.toArray().reduce(function($,fe){return $+P.positiveDelta(I,fe)},0);return this.values.pushback(V),Y/this.period},B.prototype.positiveDelta=function(S,I){return S>I?S-I:I-S},B}(),ge=function(){function B(S){S===void 0&&(S=20),this.md=new he(S),this.sma=new d(S)}return B.prototype.nextValue=function(S,I,P){var V=(S+I+P)/3,Y=this.sma.nextValue(V),$=this.md.nextValue(V,Y);return $&&(V-Y)/(.015*$)},B.prototype.momentValue=function(S,I,P){var V=(S+I+P)/3,Y=this.sma.momentValue(V),$=this.md.momentValue(V,Y);return $&&(V-Y)/(.015*$)},B}(),re=function(){function B(S){this.period=S,this.arr=[],this.filled=!1,this.devider=0,this.lastSum=0,this.devider=function(I){for(var P=0,V=I.length;V>0;)P+=I[--V];return P}(Array.from(Array(this.period).keys()).map(function(I){return I+1}))}return B.prototype.nextValue=function(S){if(this.filled=this.filled||this.arr.length===this.period,this.arr.push(S),this.filled)return this.arr.shift(),this.arr.reduce(function(I,P,V){return I+P*(V+1)},0)/this.devider},B.prototype.momentValue=function(S){if(this.filled){var I=this.arr.slice(1);return I.push(S),I.reduce(function(P,V,Y){return P+V*(Y+1)},0)/this.devider}},B}();function de(B,S,I){if(I){var P=B-S,V=B>I?B-I:I-B,Y=S>I?S-I:I-S;return P>=V&&P>=Y?P:V>=P&&V>=Y?V:Y}}var me=function(){function B(S,I){switch(S===void 0&&(S=14),I===void 0&&(I="WEMA"),I){case"SMA":this.avg=new d(S);break;case"EMA":this.avg=new p(S);break;case"SMMA":this.avg=new T(S);break;case"WEMA":this.avg=new h(S);break;case"LWMA":this.avg=new re(S);break;case"EWMA":this.avg=new N(.2);break;case"RMA":this.avg=new k(S)}this.prevClose=0}return B.prototype.nextValue=function(S,I,P){var V=de(S,I,this.prevClose);if(this.prevClose=P,V!==void 0)return this.avg.nextValue(V)},B.prototype.momentValue=function(S,I){var P=de(S,I,this.prevClose);if(P!==void 0)return this.avg.momentValue(P)},B}(),we=function(){function B(S){S===void 0&&(S=5),this.values=new c(S)}return B.prototype.nextValue=function(S){var I=this.values.push(S);if(I)return(S-I)/I*100},B.prototype.momentValue=function(S){var I=this.values.peek();if(I)return(S-I)/I*100},B}(),qe=function(){function B(S){S===void 0&&(S=20),this.maxProvider=new ie(S),this.minProvider=new ue(S)}return B.prototype.nextValue=function(S,I){var P=this.maxProvider.nextValue(S),V=this.minProvider.nextValue(I);return{upper:P,middle:(P+V)/2,lower:V}},B.prototype.momentValue=function(S,I){var P=this.maxProvider.momentValue(S),V=this.minProvider.momentValue(I);return{upper:P,middle:(P+V)/2,lower:V}},B}(),Ce=function(){function B(S){this.period=S,this.fill=0,this.values=new c(S)}return B.prototype.nextValue=function(S){var I=this;if(this.values.push(S),this.fill++,this.fill===this.period)return this.nextValue=function(P){var V=I.calc(P);return I.values.push(P),V},this.momentValue=this.calc,this.calc(S)},B.prototype.momentValue=function(S){},B.prototype.calc=function(S){var I=0;return this.values.toArray().forEach(function(P){P<=S&&I++}),I/this.period*100},B}(),je=function(){function B(S,I,P){S===void 0&&(S=3),I===void 0&&(I=2),P===void 0&&(P=100),this.period=S,this.rsi=new te(this.period),this.updownRsi=new te(I),this.roc=new we(1),this.percentRank=new Ce(P),this.updownPeriod=0,this.prevClose=0}return B.prototype.nextValue=function(S){var I=this.rsi.nextValue(S),P=this.percentRank.nextValue(this.roc.nextValue(S));if(this.updownPeriod=this.getUpdownPeriod(S),this.prevClose=S,this.updownValue=this.updownRsi.nextValue(this.updownPeriod),this.updownValue)return(I+this.updownValue+P)/3},B.prototype.momentValue=function(S){var I=this.rsi.momentValue(S),P=this.percentRank.momentValue(this.roc.momentValue(S)),V=this.getUpdownPeriod(S),Y=this.updownRsi.momentValue(V);if(Y!==void 0)return(I+Y+P)/3},B.prototype.getUpdownPeriod=function(S){var I=this.updownPeriod;return S>this.prevClose?(this.updownPeriod<0&&(I=0),I++):S<this.prevClose?(this.updownPeriod>0&&(I=0),I--):I=0,I},B}(),Ge=function(){function B(S){this.period=S,this.values=new c(S)}return B.prototype.nextValue=function(S,I){return this.values.push(S),Math.sqrt(this.values.toArray().reduce(function(P,V){return P+Math.pow(V-I,2)},0)/this.period)},B.prototype.momentValue=function(S,I){var P=this.values.push(S),V=Math.sqrt(this.values.toArray().reduce(function(Y,$){return Y+Math.pow($-I,2)},0)/this.period);return this.values.pushback(P),V},B}(),Ae=function(){function B(S,I){S===void 0&&(S=20),I===void 0&&(I=2),this.period=S,this.stdDev=I,this.fill=0,this.sma=new d(S),this.sd=new Ge(S)}return B.prototype.nextValue=function(S){var I=this,P=this.sma.nextValue(S),V=this.sd.nextValue(S,P);if(this.fill++,this.fill===this.period){var Y=P-this.stdDev*V,$=P+this.stdDev*V;return this.nextValue=function(fe){var _e=I.sma.nextValue(fe),Re=I.sd.nextValue(fe,_e);return{lower:_e-I.stdDev*Re,middle:_e,upper:_e+I.stdDev*Re}},{lower:Y,middle:P,upper:$}}},B.prototype.momentValue=function(S){var I=this.sma.momentValue(S),P=this.sd.momentValue(S,I);return{lower:I-this.stdDev*P,middle:I,upper:I+this.stdDev*P}},B}(),at=function(){function B(S,I,P){S===void 0&&(S=12),I===void 0&&(I=26),P===void 0&&(P=9),this.periodEmaFast=S,this.periodEmaSlow=I,this.periodSignal=P,this.emaFastIndicator=new p(S),this.emaSlowIndicator=new p(I),this.emaSignalIndicator=new p(P)}return B.prototype.nextValue=function(S){var I=this.emaFastIndicator.nextValue(S),P=this.emaSlowIndicator.nextValue(S),V=I-P,Y=V&&this.emaSignalIndicator.nextValue(V)||void 0,$=V-Y||void 0;if(!isNaN(V))return{macd:V,emaFast:I,emaSlow:P,signal:Y,histogram:$}},B.prototype.momentValue=function(S){var I=this.emaFastIndicator.momentValue(S),P=this.emaSlowIndicator.momentValue(S),V=I-P,Y=V&&this.emaSignalIndicator.momentValue(V);return{macd:V,emaFast:I,emaSlow:P,signal:Y,histogram:V-Y}},B}(),Me=function(){function B(){this.prevOpen=0,this.prevClose=0}return B.prototype.nextValue=function(S,I,P,V){var Y=this.calculate(S,I,P,V);return this.prevClose=Y.c,this.prevOpen=Y.o,Y},B.prototype.momentValue=function(S,I,P,V){return this.calculate(S,I,P,V)},B.prototype.calculate=function(S,I,P,V){return V=(S+I+P+V)/4,this.prevOpen&&(S=(this.prevOpen+this.prevClose)/2),{o:S,h:I=Math.max(I,S,V),l:P=Math.min(P,S,V),c:V}},B}(),We=function(){function B(S){switch(S===void 0&&(S="classic"),this.mode=S,this.mode){case"classic":this.calculator=this.classic;break;case"camarilla":this.calculator=this.camarilla;break;case"woodie":this.calculator=this.woodie;break;case"fibonacci":this.calculator=this.fibonacci}}return B.prototype.nextValue=function(S,I,P){return this.calculator(S,I,P)},B.prototype.classic=function(S,I,P){var V=(S+I+P)/3;return{r3:S+2*(V-I),r2:V+(S-I),r1:2*V-I,pp:V,s1:2*V-S,s2:V-(S-I),s3:I-2*(S-V)}},B.prototype.woodie=function(S,I,P){var V=(S+I+2*P)/4;return{r2:V+S-I,r1:2*V-I,pp:V,s1:2*V-S,s2:V-S+I}},B.prototype.camarilla=function(S,I,P){var V=1.1*(S-I),Y=S/I*P,$=P+V/2,fe=Y+1.168*(Y-$);return{r6:fe,r5:Y,r4:$,r3:P+V/4,r2:P+V/6,r1:P+V/12,pp:(S+I+P)/3,s1:P-V/12,s2:P-V/6,s3:P-V/4,s4:P-V/2,s5:P-(Y-P),s6:P-(fe-P)}},B.prototype.fibonacci=function(S,I,P){var V=S-I,Y=(S+I+P)/3;return{r3:Y+V,r2:Y+.618*V,r1:Y+.382*V,pp:Y,s1:Y-.382*V,s2:Y-.618*V,s3:Y-V}},B}(),it=function(){function B(S,I,P){S===void 0&&(S=.02),I===void 0&&(I=.02),P===void 0&&(P=.2),this.start=S,this.acceleration=I,this.max=P,this.result=0,this.isBullTrend=!0}return B.prototype.nextValue=function(S,I,P){if(!this.result)return this.result=P,this.low1=I,this.high1=S,this.low2=I,this.high2=S,this.highest=S,this.lowest=I,this.accelerationFactor=this.start,I;if(this.isBullTrend?this.psar=this.result+this.accelerationFactor*(this.highest-this.result):this.psar=this.result+this.accelerationFactor*(this.lowest-this.result),this.isBullTrend)if(I<this.psar)this.isBullTrend=!1,this.psar=this.highest,this.lowest=I,this.accelerationFactor=this.start;else{if(S>this.highest){this.highest=S;var V=this.accelerationFactor+this.acceleration;this.accelerationFactor=V>this.max?this.max:V}this.low1<this.psar&&(this.psar=this.low1),this.low2<this.psar&&(this.psar=this.low2)}else S>this.psar?(this.isBullTrend=!0,this.psar=this.lowest,this.highest=S,this.accelerationFactor=this.start):(I<this.lowest&&(this.lowest=I,V=this.accelerationFactor+this.acceleration,this.accelerationFactor=V>this.max?this.max:V),this.high1>this.psar&&(this.psar=this.high1),this.high2>this.psar&&(this.psar=this.high2));return this.low2=this.low1,this.low1=I,this.high2=this.high1,this.high1=S,this.result=this.psar,this.result},B.prototype.momentValue=function(S,I){if(!this.result)return I;var P,V=this.isBullTrend,Y=this.result,$=this.low1,fe=this.high1,_e=this.low2,Re=this.high2,be=this.highest,Xe=this.lowest,Te=this.accelerationFactor;return P=V?Y+Te*(be-Y):Y+Te*(Xe-Y),V?I<P?P=be:($<P&&(P=$),_e<P&&(P=_e)):S>P?P=Xe:(fe>P&&(P=fe),Re>P&&(P=Re)),P},B}(),Ee=function(){function B(S){this.period=S,this.prevValue=0,this.sumCount=1}return B.prototype.nextValue=function(S){var I=this;return this.sumCount<this.period?(this.prevValue+=S,void this.sumCount++):this.sumCount===this.period?(this.prevValue+=S,this.sumCount++,this.nextValue=function(P){return I.prevValue=I.prevValue-I.prevValue/I.period+P},this.prevValue):void 0},B.prototype.momentValue=function(S){if(!(this.sumCount<this.period))return this.prevValue-this.prevValue/this.period+S},B}(),Ne=function(){function B(S){S===void 0&&(S=14),this.period=S,this.wma1=new Ee(S),this.wma2=new Ee(S),this.wma3=new Ee(S),this.wema=new h(S)}return B.prototype.nextValue=function(S,I,P){if(!this.prevClose)return this.prevHigh=S,this.prevLow=I,void(this.prevClose=P);var V=0,Y=0,$=S-this.prevHigh,fe=this.prevLow-I;$>fe&&$>0&&(V=$),fe>$&&fe>0&&(Y=fe),(V>Y||Y<0)&&(Y=0);var _e=this.wma1.nextValue(de(S,I,this.prevClose)),Re=this.wma2.nextValue(V),be=this.wma3.nextValue(Y);if(this.prevHigh=S,this.prevLow=I,this.prevClose=P,Re!==void 0&&be!==void 0){var Xe=100*Re/_e,Te=100*be/_e,rn=Xe>Te?Xe-Te:Te-Xe;return{adx:this.wema.nextValue(rn/(Xe+Te)*100),pdi:Xe,mdi:Te}}},B.prototype.momentValue=function(S,I,P){if(this.prevClose){var V=0,Y=0,$=S-this.prevHigh,fe=this.prevLow-I;$>fe&&$>0&&(V=$),fe>$&&fe>0&&(Y=fe),(V>Y||Y<0)&&(Y=0);var _e=this.wma1.momentValue(de(S,I,this.prevClose)),Re=this.wma2.momentValue(V),be=this.wma3.momentValue(Y);if(Re!==void 0&&be!==void 0){var Xe=100*Re/_e,Te=100*be/_e,rn=Xe>Te?Xe-Te:Te-Xe;return{adx:this.wema.momentValue(rn/(Xe+Te)*100),pdi:Xe,mdi:Te}}}},B}(),xe=function(){function B(S,I,P){S===void 0&&(S=10),I===void 0&&(I=3),P===void 0&&(P="WEMA"),this.multiplier=I,this.atr=new me(S,P)}return B.prototype.nextValue=function(S,I,P){var V=this.atr.nextValue(S,I,P);if(V){var Y=(S+I)/2,$=Y+this.multiplier*V,fe=Y-this.multiplier*V;this.prevLower&&(fe=fe>this.prevLower||this.prevClose<this.prevLower?fe:this.prevLower,$=$<this.prevUpper||this.prevClose>this.prevUpper?$:this.prevUpper);var _e=$,Re=(_e=this.prevSuper===this.prevUpper?P>$?fe:$:P<fe?$:fe)===$?1:-1;return this.prevUpper=$,this.prevLower=fe,this.prevSuper=_e,this.prevClose=P,{upper:$,lower:fe,superTrend:_e,direction:Re}}},B.prototype.momentValue=function(S,I,P){var V=this.atr.momentValue(S,I),Y=(S+I)/2,$=Y+this.multiplier*V,fe=Y-this.multiplier*V;this.prevLower&&(fe=fe>this.prevLower||this.prevClose<this.prevLower?fe:this.prevLower,$=$<this.prevSuper||this.prevClose>this.prevUpper?$:this.prevUpper);var _e=$;return{upper:$,lower:fe,superTrend:_e=this.prevSuper===this.prevUpper?P>$?fe:$:P<fe?$:fe,direction:_e===$?1:-1}},B}(),He=function(B){return(B.o+B.h+B.l+B.c)/4},Oe=function(){function B(S,I){S===void 0&&(S=4),I===void 0&&(I=He),this.sum=0,this.sessionPricesLookup=new Set,this.sessionVolumes={},this.prevCandle=null,this.source=I,this.precision=S,this.valueToRoundWith=Math.pow(10,this.precision)}return B.prototype.getSession=function(S,I){var P=this;I===void 0&&(I=15);var V=this.source(S),Y=1/0,$=V;this.sessionPricesLookup.forEach(function(Oa){var zc=P.diffPercent(Oa,V);zc>I?(P.sessionPricesLookup.delete(Oa),delete P.sessionVolumes[Oa]):zc<Y&&(Y=zc,$=Oa)});var fe=Array.from(this.sessionPricesLookup).sort(),_e=fe.indexOf($),Re=new Map;if(_e===-1)return Re;for(var be=Math.round(fe.length/4),Xe=0,Te=0;Te<4;Te++){for(var rn=Te*be,Mt=rn+be,Vr=0,tr=0,jc=rn;jc<Mt;jc++){var Wc=fe[rn],Lh=this.sessionVolumes[Wc];Vr<Lh&&(Vr=Lh,tr=Wc)}this.diffPercent(Xe,tr)<1&&(Vr=Re.get(Xe)+Vr,tr=this.roundPrice((tr+Xe)/2),Re.delete(Xe)),Re.set(tr,Vr),Xe=tr}return Re},B.prototype.getSessionAvg=function(){return this.sum/this.sessionPricesLookup.size},B.prototype.getRawSession=function(){return this.sessionVolumes},B.prototype.nextValue=function(S){var I,P=this.roundPrice(this.source(S)),V=((I=this.prevCandle)===null||I===void 0?void 0:I.time)===S.time?S.v-this.prevCandle.v:S.v;this.addToSession(P,V),this.sum+=V,this.lastPrice=P,this.prevCandle=S},B.prototype.roundPrice=function(S){return Math.round((S+Number.EPSILON)*this.valueToRoundWith)/this.valueToRoundWith},B.prototype.addToSession=function(S,I){this.sessionPricesLookup.has(S)?this.sessionVolumes[S]+=I:(this.sessionPricesLookup.add(S),this.sessionVolumes[S]=I)},B.prototype.diffPercent=function(S,I){return S<I?100*(I-S)/S:100*(S-I)/I},B}(),Jt=function(){function B(S,I){S===void 0&&(S=3),I===void 0&&(I=10),this.accDistribution=0,this.emaFast=new p(S),this.emaSlow=new p(I)}return B.prototype.nextValue=function(S,I,P,V){return this.accDistribution+=P===S&&P===I||S===I?0:(2*P-I-S)/(S-I)*V,this.emaFast.nextValue(this.accDistribution)-this.emaSlow.nextValue(this.accDistribution)},B.prototype.momentValue=function(S,I,P,V){var Y=this.accDistribution+(P===S&&P===I||S===I?0:(2*P-I-S)/(S-I)*V);return this.emaFast.momentValue(Y)-this.emaSlow.momentValue(Y)},B}(),Ft=function(){function B(S,I,P){I===void 0&&(I=4),P===void 0&&(P=30),this.sumNoise=0,this.circular=new c(S),this.nfastend=2/(I+1),this.nslowend=2/(P+1),this.prevPrice=0,this.prevAMA=0}return B.prototype.nextValue=function(S){var I,P=this.prevPrice,V=Math.abs(S-P),Y=(I=this.circular.push(V))!==null&&I!==void 0?I:0;if(this.sumNoise+=V-(this.circular.filled?Y:0),!this.circular.filled)return this.prevAMA=S,void(this.prevPrice=S);var $=Math.abs(S-P),fe=this.sumNoise,_e=fe!==0?$/fe:0,Re=Math.pow(_e*(this.nfastend-this.nslowend)+this.nslowend,2),be=this.prevAMA+Re*(S-this.prevAMA);return this.prevAMA=be,this.prevPrice=S,be},B.prototype.momentValue=function(){return this.prevAMA},B}();n.AC=M,n.ADX=Ne,n.AMA=Ft,n.AO=C,n.ATR=me,n.BollingerBands=Ae,n.CCI=ge,n.ChaikinOscillator=Jt,n.CircularBuffer=c,n.Correlation=b,n.DC=qe,n.EMA=p,n.EWMA=N,n.Extremums=u,n.HeikenAshi=Me,n.LWMA=re,n.Level=v,n.MACD=at,n.MFI=O,n.Move=j,n.PSAR=it,n.Pivot=We,n.RMA=k,n.ROC=we,n.RSI=te,n.SMA=d,n.SMMA=T,n.Sampler=_,n.StandardDeviation=Ge,n.Stochastic=G,n.StochasticRSI=ve,n.SuperTrend=xe,n.TrendLines=l,n.UniLevel=A,n.VolumeProfile=Oe,n.WEMA=h,n.WMA=x,n.WWS=Ee,n.Wave=Q,n.cRSI=je,Object.defineProperty(n,"__esModule",{value:!0})})});var r3=s_((AS,yS)=>{((n,t)=>{typeof define=="function"&&define.amd?define([],t):typeof yS=="object"&&typeof AS<"u"?yS.exports=t():n.Papa=t()})(AS,function n(){var t=typeof self<"u"?self:typeof window<"u"?window:t!==void 0?t:{},e,i=!t.document&&!!t.postMessage,r=t.IS_PAPA_WORKER||!1,s={},o=0,a={};function l(C){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(M){var O=N(M);O.chunkSize=parseInt(O.chunkSize),M.step||M.chunk||(O.chunkSize=null),this._handle=new p(O),(this._handle.streamer=this)._config=O}.call(this,C),this.parseChunk=function(M,O){var F=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<F){let H=this._config.newline;H||(j=this._config.quoteChar||'"',H=this._handle.guessLineEndings(M,j)),M=[...M.split(H).slice(F)].join(H)}this.isFirstChunk&&k(this._config.beforeFirstChunk)&&(j=this._config.beforeFirstChunk(M))!==void 0&&(M=j),this.isFirstChunk=!1,this._halted=!1;var F=this._partialLine+M,j=(this._partialLine="",this._handle.parse(F,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(M=j.meta.cursor,F=(this._finished||(this._partialLine=F.substring(M-this._baseIndex),this._baseIndex=M),j&&j.data&&(this._rowCount+=j.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),r)t.postMessage({results:j,workerId:a.WORKER_ID,finished:F});else if(k(this._config.chunk)&&!O){if(this._config.chunk(j,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=j=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(j.data),this._completeResults.errors=this._completeResults.errors.concat(j.errors),this._completeResults.meta=j.meta),this._completed||!F||!k(this._config.complete)||j&&j.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),F||j&&j.meta.paused||this._nextChunk(),j}this._halted=!0},this._sendError=function(M){k(this._config.error)?this._config.error(M):r&&this._config.error&&t.postMessage({workerId:a.WORKER_ID,error:M,finished:!1})}}function c(C){var M;(C=C||{}).chunkSize||(C.chunkSize=a.RemoteChunkSize),l.call(this,C),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(O){this._input=O,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(M=new XMLHttpRequest,this._config.withCredentials&&(M.withCredentials=this._config.withCredentials),i||(M.onload=T(this._chunkLoaded,this),M.onerror=T(this._chunkError,this)),M.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var O,F=this._config.downloadRequestHeaders;for(O in F)M.setRequestHeader(O,F[O])}var j;this._config.chunkSize&&(j=this._start+this._config.chunkSize-1,M.setRequestHeader("Range","bytes="+this._start+"-"+j));try{M.send(this._config.downloadRequestBody)}catch(H){this._chunkError(H.message)}i&&M.status===0&&this._chunkError()}},this._chunkLoaded=function(){M.readyState===4&&(M.status<200||400<=M.status?this._chunkError():(this._start+=this._config.chunkSize||M.responseText.length,this._finished=!this._config.chunkSize||this._start>=(O=>(O=O.getResponseHeader("Content-Range"))!==null?parseInt(O.substring(O.lastIndexOf("/")+1)):-1)(M),this.parseChunk(M.responseText)))},this._chunkError=function(O){O=M.statusText||O,this._sendError(new Error(O))}}function u(C){(C=C||{}).chunkSize||(C.chunkSize=a.LocalChunkSize),l.call(this,C);var M,O,F=typeof FileReader<"u";this.stream=function(j){this._input=j,O=j.slice||j.webkitSlice||j.mozSlice,F?((M=new FileReader).onload=T(this._chunkLoaded,this),M.onerror=T(this._chunkError,this)):M=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var j=this._input,H=(this._config.chunkSize&&(H=Math.min(this._start+this._config.chunkSize,this._input.size),j=O.call(j,this._start,H)),M.readAsText(j,this._config.encoding));F||this._chunkLoaded({target:{result:H}})},this._chunkLoaded=function(j){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(j.target.result)},this._chunkError=function(){this._sendError(M.error)}}function d(C){var M;l.call(this,C=C||{}),this.stream=function(O){return M=O,this._nextChunk()},this._nextChunk=function(){var O,F;if(!this._finished)return O=this._config.chunkSize,M=O?(F=M.substring(0,O),M.substring(O)):(F=M,""),this._finished=!M,this.parseChunk(F)}}function h(C){l.call(this,C=C||{});var M=[],O=!0,F=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(j){this._input=j,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){F&&M.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),M.length?this.parseChunk(M.shift()):O=!0},this._streamData=T(function(j){try{M.push(typeof j=="string"?j:j.toString(this._config.encoding)),O&&(O=!1,this._checkIsFinished(),this.parseChunk(M.shift()))}catch(H){this._streamError(H)}},this),this._streamError=T(function(j){this._streamCleanUp(),this._sendError(j)},this),this._streamEnd=T(function(){this._streamCleanUp(),F=!0,this._streamData("")},this),this._streamCleanUp=T(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function p(C){var M,O,F,j,H=Math.pow(2,53),Q=-H,ie=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ue=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,G=this,X=0,te=0,ve=!1,he=!1,ge=[],re={data:[],errors:[],meta:{}};function de(Ce){return C.skipEmptyLines==="greedy"?Ce.join("").trim()==="":Ce.length===1&&Ce[0].length===0}function me(){if(re&&F&&(qe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),F=!1),C.skipEmptyLines&&(re.data=re.data.filter(function(at){return!de(at)})),we()){let at=function(Me,We){k(C.transformHeader)&&(Me=C.transformHeader(Me,We)),ge.push(Me)};var Ae=at;if(re)if(Array.isArray(re.data[0])){for(var Ce=0;we()&&Ce<re.data.length;Ce++)re.data[Ce].forEach(at);re.data.splice(0,1)}else re.data.forEach(at)}function je(at,Me){for(var We=C.header?{}:[],it=0;it<at.length;it++){var Ee=it,Ne=at[it],Ne=((xe,He)=>(Oe=>(C.dynamicTypingFunction&&C.dynamicTyping[Oe]===void 0&&(C.dynamicTyping[Oe]=C.dynamicTypingFunction(Oe)),(C.dynamicTyping[Oe]||C.dynamicTyping)===!0))(xe)?He==="true"||He==="TRUE"||He!=="false"&&He!=="FALSE"&&((Oe=>{if(ie.test(Oe)&&(Oe=parseFloat(Oe),Q<Oe&&Oe<H))return 1})(He)?parseFloat(He):ue.test(He)?new Date(He):He===""?null:He):He)(Ee=C.header?it>=ge.length?"__parsed_extra":ge[it]:Ee,Ne=C.transform?C.transform(Ne,Ee):Ne);Ee==="__parsed_extra"?(We[Ee]=We[Ee]||[],We[Ee].push(Ne)):We[Ee]=Ne}return C.header&&(it>ge.length?qe("FieldMismatch","TooManyFields","Too many fields: expected "+ge.length+" fields but parsed "+it,te+Me):it<ge.length&&qe("FieldMismatch","TooFewFields","Too few fields: expected "+ge.length+" fields but parsed "+it,te+Me)),We}var Ge;re&&(C.header||C.dynamicTyping||C.transform)&&(Ge=1,!re.data.length||Array.isArray(re.data[0])?(re.data=re.data.map(je),Ge=re.data.length):re.data=je(re.data,0),C.header&&re.meta&&(re.meta.fields=ge),te+=Ge)}function we(){return C.header&&ge.length===0}function qe(Ce,je,Ge,Ae){Ce={type:Ce,code:je,message:Ge},Ae!==void 0&&(Ce.row=Ae),re.errors.push(Ce)}k(C.step)&&(j=C.step,C.step=function(Ce){re=Ce,we()?me():(me(),re.data.length!==0&&(X+=Ce.data.length,C.preview&&X>C.preview?O.abort():(re.data=re.data[0],j(re,G))))}),this.parse=function(Ce,je,Ge){var Ae=C.quoteChar||'"',Ae=(C.newline||(C.newline=this.guessLineEndings(Ce,Ae)),F=!1,C.delimiter?k(C.delimiter)&&(C.delimiter=C.delimiter(Ce),re.meta.delimiter=C.delimiter):((Ae=((at,Me,We,it,Ee)=>{var Ne,xe,He,Oe;Ee=Ee||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var Jt=0;Jt<Ee.length;Jt++){for(var Ft,B=Ee[Jt],S=0,I=0,P=0,V=(He=void 0,new A({comments:it,delimiter:B,newline:Me,preview:10}).parse(at)),Y=0;Y<V.data.length;Y++)We&&de(V.data[Y])?P++:(Ft=V.data[Y].length,I+=Ft,He===void 0?He=Ft:0<Ft&&(S+=Math.abs(Ft-He),He=Ft));0<V.data.length&&(I/=V.data.length-P),(xe===void 0||S<=xe)&&(Oe===void 0||Oe<I)&&1.99<I&&(xe=S,Ne=B,Oe=I)}return{successful:!!(C.delimiter=Ne),bestDelimiter:Ne}})(Ce,C.newline,C.skipEmptyLines,C.comments,C.delimitersToGuess)).successful?C.delimiter=Ae.bestDelimiter:(F=!0,C.delimiter=a.DefaultDelimiter),re.meta.delimiter=C.delimiter),N(C));return C.preview&&C.header&&Ae.preview++,M=Ce,O=new A(Ae),re=O.parse(M,je,Ge),me(),ve?{meta:{paused:!0}}:re||{meta:{paused:!1}}},this.paused=function(){return ve},this.pause=function(){ve=!0,O.abort(),M=k(C.chunk)?"":M.substring(O.getCharIndex())},this.resume=function(){G.streamer._halted?(ve=!1,G.streamer.parseChunk(M,!0)):setTimeout(G.resume,3)},this.aborted=function(){return he},this.abort=function(){he=!0,O.abort(),re.meta.aborted=!0,k(C.complete)&&C.complete(re),M=""},this.guessLineEndings=function(at,Ae){at=at.substring(0,1048576);var Ae=new RegExp(_(Ae)+"([^]*?)"+_(Ae),"gm"),Ge=(at=at.replace(Ae,"")).split("\r"),Ae=at.split(`
`),at=1<Ae.length&&Ae[0].length<Ge[0].length;if(Ge.length===1||at)return`
`;for(var Me=0,We=0;We<Ge.length;We++)Ge[We][0]===`
`&&Me++;return Me>=Ge.length/2?`\r
`:"\r"}}function _(C){return C.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function A(C){var M=(C=C||{}).delimiter,O=C.newline,F=C.comments,j=C.step,H=C.preview,Q=C.fastMode,ie=null,ue=!1,G=C.quoteChar==null?'"':C.quoteChar,X=G;if(C.escapeChar!==void 0&&(X=C.escapeChar),(typeof M!="string"||-1<a.BAD_DELIMITERS.indexOf(M))&&(M=","),F===M)throw new Error("Comment character same as delimiter");F===!0?F="#":(typeof F!="string"||-1<a.BAD_DELIMITERS.indexOf(F))&&(F=!1),O!==`
`&&O!=="\r"&&O!==`\r
`&&(O=`
`);var te=0,ve=!1;this.parse=function(he,ge,re){if(typeof he!="string")throw new Error("Input must be a string");var de=he.length,me=M.length,we=O.length,qe=F.length,Ce=k(j),je=[],Ge=[],Ae=[],at=te=0;if(!he)return S();if(Q||Q!==!1&&he.indexOf(G)===-1){for(var Me=he.split(O),We=0;We<Me.length;We++){if(Ae=Me[We],te+=Ae.length,We!==Me.length-1)te+=O.length;else if(re)return S();if(!F||Ae.substring(0,qe)!==F){if(Ce){if(je=[],Oe(Ae.split(M)),I(),ve)return S()}else Oe(Ae.split(M));if(H&&H<=We)return je=je.slice(0,H),S(!0)}}return S()}for(var it=he.indexOf(M,te),Ee=he.indexOf(O,te),Ne=new RegExp(_(X)+_(G),"g"),xe=he.indexOf(G,te);;)if(he[te]===G)for(xe=te,te++;;){if((xe=he.indexOf(G,xe+1))===-1)return re||Ge.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:je.length,index:te}),Ft();if(xe===de-1)return Ft(he.substring(te,xe).replace(Ne,G));if(G===X&&he[xe+1]===X)xe++;else if(G===X||xe===0||he[xe-1]!==X){it!==-1&&it<xe+1&&(it=he.indexOf(M,xe+1));var He=Jt((Ee=Ee!==-1&&Ee<xe+1?he.indexOf(O,xe+1):Ee)===-1?it:Math.min(it,Ee));if(he.substr(xe+1+He,me)===M){Ae.push(he.substring(te,xe).replace(Ne,G)),he[te=xe+1+He+me]!==G&&(xe=he.indexOf(G,te)),it=he.indexOf(M,te),Ee=he.indexOf(O,te);break}if(He=Jt(Ee),he.substring(xe+1+He,xe+1+He+we)===O){if(Ae.push(he.substring(te,xe).replace(Ne,G)),B(xe+1+He+we),it=he.indexOf(M,te),xe=he.indexOf(G,te),Ce&&(I(),ve))return S();if(H&&je.length>=H)return S(!0);break}Ge.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:je.length,index:te}),xe++}}else if(F&&Ae.length===0&&he.substring(te,te+qe)===F){if(Ee===-1)return S();te=Ee+we,Ee=he.indexOf(O,te),it=he.indexOf(M,te)}else if(it!==-1&&(it<Ee||Ee===-1))Ae.push(he.substring(te,it)),te=it+me,it=he.indexOf(M,te);else{if(Ee===-1)break;if(Ae.push(he.substring(te,Ee)),B(Ee+we),Ce&&(I(),ve))return S();if(H&&je.length>=H)return S(!0)}return Ft();function Oe(P){je.push(P),at=te}function Jt(P){var V=0;return V=P!==-1&&(P=he.substring(xe+1,P))&&P.trim()===""?P.length:V}function Ft(P){return re||(P===void 0&&(P=he.substring(te)),Ae.push(P),te=de,Oe(Ae),Ce&&I()),S()}function B(P){te=P,Oe(Ae),Ae=[],Ee=he.indexOf(O,te)}function S(P){if(C.header&&!ge&&je.length&&!ue){var V=je[0],Y=Object.create(null),$=new Set(V);let fe=!1;for(let _e=0;_e<V.length;_e++){let Re=V[_e];if(Y[Re=k(C.transformHeader)?C.transformHeader(Re,_e):Re]){let be,Xe=Y[Re];for(;be=Re+"_"+Xe,Xe++,$.has(be););$.add(be),V[_e]=be,Y[Re]++,fe=!0,(ie=ie===null?{}:ie)[be]=Re}else Y[Re]=1,V[_e]=Re;$.add(Re)}fe&&console.warn("Duplicate headers found and renamed."),ue=!0}return{data:je,errors:Ge,meta:{delimiter:M,linebreak:O,aborted:ve,truncated:!!P,cursor:at+(ge||0),renamedHeaders:ie}}}function I(){j(S()),je=[],Ge=[]}},this.abort=function(){ve=!0},this.getCharIndex=function(){return te}}function v(C){var M=C.data,O=s[M.workerId],F=!1;if(M.error)O.userError(M.error,M.file);else if(M.results&&M.results.data){var j={abort:function(){F=!0,b(M.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:x,resume:x};if(k(O.userStep)){for(var H=0;H<M.results.data.length&&(O.userStep({data:M.results.data[H],errors:M.results.errors,meta:M.results.meta},j),!F);H++);delete M.results}else k(O.userChunk)&&(O.userChunk(M.results,j,M.file),delete M.results)}M.finished&&!F&&b(M.workerId,M.results)}function b(C,M){var O=s[C];k(O.userComplete)&&O.userComplete(M),O.terminate(),delete s[C]}function x(){throw new Error("Not implemented.")}function N(C){if(typeof C!="object"||C===null)return C;var M,O=Array.isArray(C)?[]:{};for(M in C)O[M]=N(C[M]);return O}function T(C,M){return function(){C.apply(M,arguments)}}function k(C){return typeof C=="function"}return a.parse=function(C,M){var O=(M=M||{}).dynamicTyping||!1;if(k(O)&&(M.dynamicTypingFunction=O,O={}),M.dynamicTyping=O,M.transform=!!k(M.transform)&&M.transform,!M.worker||!a.WORKERS_SUPPORTED)return O=null,a.NODE_STREAM_INPUT,typeof C=="string"?(C=(F=>F.charCodeAt(0)!==65279?F:F.slice(1))(C),O=new(M.download?c:d)(M)):C.readable===!0&&k(C.read)&&k(C.on)?O=new h(M):(t.File&&C instanceof File||C instanceof Object)&&(O=new u(M)),O.stream(C);(O=(()=>{var F;return!!a.WORKERS_SUPPORTED&&(F=(()=>{var j=t.URL||t.webkitURL||null,H=n.toString();return a.BLOB_URL||(a.BLOB_URL=j.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",H,")();"],{type:"text/javascript"})))})(),(F=new t.Worker(F)).onmessage=v,F.id=o++,s[F.id]=F)})()).userStep=M.step,O.userChunk=M.chunk,O.userComplete=M.complete,O.userError=M.error,M.step=k(M.step),M.chunk=k(M.chunk),M.complete=k(M.complete),M.error=k(M.error),delete M.worker,O.postMessage({input:C,config:M,workerId:O.id})},a.unparse=function(C,M){var O=!1,F=!0,j=",",H=`\r
`,Q='"',ie=Q+Q,ue=!1,G=null,X=!1,te=((()=>{if(typeof M=="object"){if(typeof M.delimiter!="string"||a.BAD_DELIMITERS.filter(function(ge){return M.delimiter.indexOf(ge)!==-1}).length||(j=M.delimiter),typeof M.quotes!="boolean"&&typeof M.quotes!="function"&&!Array.isArray(M.quotes)||(O=M.quotes),typeof M.skipEmptyLines!="boolean"&&typeof M.skipEmptyLines!="string"||(ue=M.skipEmptyLines),typeof M.newline=="string"&&(H=M.newline),typeof M.quoteChar=="string"&&(Q=M.quoteChar),typeof M.header=="boolean"&&(F=M.header),Array.isArray(M.columns)){if(M.columns.length===0)throw new Error("Option columns is empty");G=M.columns}M.escapeChar!==void 0&&(ie=M.escapeChar+Q),M.escapeFormulae instanceof RegExp?X=M.escapeFormulae:typeof M.escapeFormulae=="boolean"&&M.escapeFormulae&&(X=/^[=+\-@\t\r].*$/)}})(),new RegExp(_(Q),"g"));if(typeof C=="string"&&(C=JSON.parse(C)),Array.isArray(C)){if(!C.length||Array.isArray(C[0]))return ve(null,C,ue);if(typeof C[0]=="object")return ve(G||Object.keys(C[0]),C,ue)}else if(typeof C=="object")return typeof C.data=="string"&&(C.data=JSON.parse(C.data)),Array.isArray(C.data)&&(C.fields||(C.fields=C.meta&&C.meta.fields||G),C.fields||(C.fields=Array.isArray(C.data[0])?C.fields:typeof C.data[0]=="object"?Object.keys(C.data[0]):[]),Array.isArray(C.data[0])||typeof C.data[0]=="object"||(C.data=[C.data])),ve(C.fields||[],C.data||[],ue);throw new Error("Unable to serialize unrecognized input");function ve(ge,re,de){var me="",we=(typeof ge=="string"&&(ge=JSON.parse(ge)),typeof re=="string"&&(re=JSON.parse(re)),Array.isArray(ge)&&0<ge.length),qe=!Array.isArray(re[0]);if(we&&F){for(var Ce=0;Ce<ge.length;Ce++)0<Ce&&(me+=j),me+=he(ge[Ce],Ce);0<re.length&&(me+=H)}for(var je=0;je<re.length;je++){var Ge=(we?ge:re[je]).length,Ae=!1,at=we?Object.keys(re[je]).length===0:re[je].length===0;if(de&&!we&&(Ae=de==="greedy"?re[je].join("").trim()==="":re[je].length===1&&re[je][0].length===0),de==="greedy"&&we){for(var Me=[],We=0;We<Ge;We++){var it=qe?ge[We]:We;Me.push(re[je][it])}Ae=Me.join("").trim()===""}if(!Ae){for(var Ee=0;Ee<Ge;Ee++){0<Ee&&!at&&(me+=j);var Ne=we&&qe?ge[Ee]:Ee;me+=he(re[je][Ne],Ee)}je<re.length-1&&(!de||0<Ge&&!at)&&(me+=H)}}return me}function he(ge,re){var de,me;return ge==null?"":ge.constructor===Date?JSON.stringify(ge).slice(1,25):(me=!1,X&&typeof ge=="string"&&X.test(ge)&&(ge="'"+ge,me=!0),de=ge.toString().replace(te,ie),(me=me||O===!0||typeof O=="function"&&O(ge,re)||Array.isArray(O)&&O[re]||((we,qe)=>{for(var Ce=0;Ce<qe.length;Ce++)if(-1<we.indexOf(qe[Ce]))return!0;return!1})(de,a.BAD_DELIMITERS)||-1<de.indexOf(j)||de.charAt(0)===" "||de.charAt(de.length-1)===" ")?Q+de+Q:de)}},a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!i&&!!t.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=A,a.ParserHandle=p,a.NetworkStreamer=c,a.FileStreamer=u,a.StringStreamer=d,a.ReadableStreamStreamer=h,t.jQuery&&((e=t.jQuery).fn.parse=function(C){var M=C.config||{},O=[];return this.each(function(H){if(!(e(this).prop("tagName").toUpperCase()==="INPUT"&&e(this).attr("type").toLowerCase()==="file"&&t.FileReader)||!this.files||this.files.length===0)return!0;for(var Q=0;Q<this.files.length;Q++)O.push({file:this.files[Q],inputElem:this,instanceConfig:e.extend({},M)})}),F(),this;function F(){if(O.length===0)k(C.complete)&&C.complete();else{var H,Q,ie,ue,G=O[0];if(k(C.before)){var X=C.before(G.file,G.inputElem);if(typeof X=="object"){if(X.action==="abort")return H="AbortError",Q=G.file,ie=G.inputElem,ue=X.reason,void(k(C.error)&&C.error({name:H},Q,ie,ue));if(X.action==="skip")return void j();typeof X.config=="object"&&(G.instanceConfig=e.extend(G.instanceConfig,X.config))}else if(X==="skip")return void j()}var te=G.instanceConfig.complete;G.instanceConfig.complete=function(ve){k(te)&&te(ve,G.file,G.inputElem),j()},a.parse(G.file,G.instanceConfig)}}function j(){O.splice(0,1),F()}}),r&&(t.onmessage=function(C){C=C.data,a.WORKER_ID===void 0&&C&&(a.WORKER_ID=C.workerId),typeof C.input=="string"?t.postMessage({workerId:a.WORKER_ID,results:a.parse(C.input,C.config),finished:!0}):(t.File&&C.input instanceof File||C.input instanceof Object)&&(C=a.parse(C.input,C.config))&&t.postMessage({workerId:a.WORKER_ID,results:C,finished:!0})}),(c.prototype=Object.create(l.prototype)).constructor=c,(u.prototype=Object.create(l.prototype)).constructor=u,(d.prototype=Object.create(d.prototype)).constructor=d,(h.prototype=Object.create(l.prototype)).constructor=h,a})});function c_(n,t){return Object.is(n,t)}var sn=null,Bh=!1,u_=1,Ai=Symbol("SIGNAL");function lt(n){let t=sn;return sn=n,t}function d_(){return sn}var Hc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Yc(n){if(Bh)throw new Error("");if(sn===null)return;sn.consumerOnSignalRead(n);let t=sn.nextProducerIndex++;if(zh(sn),t<sn.producerNode.length&&sn.producerNode[t]!==n&&Uc(sn)){let e=sn.producerNode[t];Wh(e,sn.producerIndexOfThis[t])}sn.producerNode[t]!==n&&(sn.producerNode[t]=n,sn.producerIndexOfThis[t]=Uc(sn)?IS(n,sn,t):0),sn.producerLastReadVersion[t]=n.version}function TS(){u_++}function h_(n){if(!(Uc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===u_)){if(!n.producerMustRecompute(n)&&!m_(n)){l_(n);return}n.producerRecomputeValue(n),l_(n)}}function p_(n){if(n.liveConsumerNode===void 0)return;let t=Bh;Bh=!0;try{for(let e of n.liveConsumerNode)e.dirty||I3(e)}finally{Bh=t}}function f_(){return sn?.consumerAllowSignalWrites!==!1}function I3(n){n.dirty=!0,p_(n),n.consumerMarkedDirty?.(n)}function l_(n){n.dirty=!1,n.lastCleanEpoch=u_}function jh(n){return n&&(n.nextProducerIndex=0),lt(n)}function g_(n,t){if(lt(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Uc(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)Wh(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function m_(n){zh(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],i=n.producerLastReadVersion[t];if(i!==e.version||(h_(e),i!==e.version))return!0}return!1}function __(n){if(zh(n),Uc(n))for(let t=0;t<n.producerNode.length;t++)Wh(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function IS(n,t,e){if(kS(n),n.liveConsumerNode.length===0&&NS(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=IS(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function Wh(n,t){if(kS(n),n.liveConsumerNode.length===1&&NS(n))for(let i=0;i<n.producerNode.length;i++)Wh(n.producerNode[i],n.producerIndexOfThis[i]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[t],r=n.liveConsumerNode[t];zh(r),r.producerIndexOfThis[i]=t}}function Uc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function zh(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function kS(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function NS(n){return n.producerNode!==void 0}function A_(n,t){let e=Object.create(k3);e.computation=n,t!==void 0&&(e.equal=t);let i=()=>{if(h_(e),Yc(e),e.value===qh)throw e.error;return e.value};return i[Ai]=e,i}var o_=Symbol("UNSET"),a_=Symbol("COMPUTING"),qh=Symbol("ERRORED"),k3=Ie(ne({},Hc),{value:o_,dirty:!0,error:null,equal:c_,kind:"computed",producerMustRecompute(n){return n.value===o_||n.value===a_},producerRecomputeValue(n){if(n.value===a_)throw new Error("Detected cycle in computations.");let t=n.value;n.value=a_;let e=jh(n),i,r=!1;try{i=n.computation(),lt(null),r=t!==o_&&t!==qh&&i!==qh&&n.equal(t,i)}catch(s){i=qh,n.error=s}finally{g_(n,e)}if(r){n.value=t;return}n.value=i,n.version++}});function N3(){throw new Error}var PS=N3;function OS(n){PS(n)}function y_(n){PS=n}var P3=null;function v_(n,t){let e=Object.create(Uh);e.value=n,t!==void 0&&(e.equal=t);let i=()=>(Yc(e),e.value);return i[Ai]=e,i}function Gc(n,t){f_()||OS(n),n.equal(n.value,t)||(n.value=t,O3(n))}function w_(n,t){f_()||OS(n),Gc(n,t(n.value))}var Uh=Ie(ne({},Hc),{equal:c_,value:void 0,kind:"signal"});function O3(n){n.version++,TS(),p_(n),P3?.()}function b_(n){let t=lt(null);try{return n()}finally{lt(t)}}var S_;function Kc(){return S_}function Br(n){let t=S_;return S_=n,t}var Hh=Symbol("NotFound");function Ve(n){return typeof n=="function"}function Fa(n){let e=n(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Yh=Fa(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function yo(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var Yt=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let s of e)s.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(Ve(i))try{i()}catch(s){t=s instanceof Yh?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{RS(s)}catch(o){t=t??[],o instanceof Yh?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Yh(t)}}add(t){var e;if(t&&t!==this)if(this.closed)RS(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&yo(e,t)}remove(t){let{_finalizers:e}=this;e&&yo(e,t),t instanceof n&&t._removeParent(this)}};Yt.EMPTY=(()=>{let n=new Yt;return n.closed=!0,n})();var C_=Yt.EMPTY;function Gh(n){return n instanceof Yt||n&&"closed"in n&&Ve(n.remove)&&Ve(n.add)&&Ve(n.unsubscribe)}function RS(n){Ve(n)?n():n.unsubscribe()}var Pi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var La={setTimeout(n,t,...e){let{delegate:i}=La;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=La;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Kh(n){La.setTimeout(()=>{let{onUnhandledError:t}=Pi;if(t)t(n);else throw n})}function qr(){}var FS=x_("C",void 0,void 0);function LS(n){return x_("E",void 0,n)}function VS(n){return x_("N",n,void 0)}function x_(n,t,e){return{kind:n,value:t,error:e}}var vo=null;function Va(n){if(Pi.useDeprecatedSynchronousErrorHandling){let t=!vo;if(t&&(vo={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:i}=vo;if(vo=null,e)throw i}}else n()}function BS(n){Pi.useDeprecatedSynchronousErrorHandling&&vo&&(vo.errorThrown=!0,vo.error=n)}var wo=class extends Yt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Gh(t)&&t.add(this)):this.destination=q3}static create(t,e,i){return new Ba(t,e,i)}next(t){this.isStopped?E_(VS(t),this):this._next(t)}error(t){this.isStopped?E_(LS(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?E_(FS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},V3=Function.prototype.bind;function D_(n,t){return V3.call(n,t)}var M_=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){Jh(i)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){Jh(i)}else Jh(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Jh(e)}}},Ba=class extends wo{constructor(t,e,i){super();let r;if(Ve(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let s;this&&Pi.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&D_(t.next,s),error:t.error&&D_(t.error,s),complete:t.complete&&D_(t.complete,s)}):r=t}this.destination=new M_(r)}};function Jh(n){Pi.useDeprecatedSynchronousErrorHandling?BS(n):Kh(n)}function B3(n){throw n}function E_(n,t){let{onStoppedNotification:e}=Pi;e&&La.setTimeout(()=>e(n,t))}var q3={closed:!0,next:qr,error:B3,complete:qr};var qa=typeof Symbol=="function"&&Symbol.observable||"@@observable";function _n(n){return n}function T_(...n){return I_(n)}function I_(n){return n.length===0?_n:n.length===1?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}var tt=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){let s=W3(e)?e:new Ba(e,i,r);return Va(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=qS(i),new i((r,s)=>{let o=new Ba({next:a=>{try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[qa](){return this}pipe(...e){return I_(e)(this)}toPromise(e){return e=qS(e),new e((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=t=>new n(t),n})();function qS(n){var t;return(t=n??Pi.Promise)!==null&&t!==void 0?t:Promise}function j3(n){return n&&Ve(n.next)&&Ve(n.error)&&Ve(n.complete)}function W3(n){return n&&n instanceof wo||j3(n)&&Gh(n)}function k_(n){return Ve(n?.lift)}function rt(n){return t=>{if(k_(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ke(n,t,e,i,r){return new N_(n,t,e,i,r)}var N_=class extends wo{constructor(t,e,i,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function ja(){return rt((n,t)=>{let e=null;n._refCount++;let i=Ke(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}var Wa=class extends tt{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,k_(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Yt;let e=this.getSubject();t.add(this.source.subscribe(Ke(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Yt.EMPTY)}return t}refCount(){return ja()(this)}};var jS=Fa(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ct=(()=>{class n extends tt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new Xh(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new jS}next(e){Va(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){Va(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){Va(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:s}=this;return i||r?C_:(this.currentObservers=null,s.push(e),new Yt(()=>{this.currentObservers=null,yo(s,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:s}=this;i?e.error(r):s&&e.complete()}asObservable(){let e=new tt;return e.source=this,e}}return n.create=(t,e)=>new Xh(t,e),n})(),Xh=class extends ct{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,t)}error(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&i!==void 0?i:C_}};var Qt=class extends ct{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var P_={now(){return(P_.delegate||Date).now()},delegate:void 0};var $h=class extends Yt{constructor(t,e){super()}schedule(t,e=0){return this}};var Jc={setInterval(n,t,...e){let{delegate:i}=Jc;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=Jc;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var Qh=class extends $h{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,e)),this.pending=!0,this.delay=e,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,i=0){return Jc.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return e;e!=null&&Jc.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,e);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,r;try{this.work(t)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,yo(i,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var za=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}};za.now=P_.now;var Zh=class extends za{constructor(t,e=za.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}};var Xc=new Zh(Qh),WS=Xc;var Dn=new tt(n=>n.complete());function ep(n){return n&&Ve(n.schedule)}function zS(n){return n[n.length-1]}function Ua(n){return Ve(zS(n))?n.pop():void 0}function vs(n){return ep(zS(n))?n.pop():void 0}function HS(n,t,e,i){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,t||[])).next())})}function US(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function bo(n){return this instanceof bo?(this.v=n,this):new bo(n)}function YS(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(p){return function(_){return Promise.resolve(_).then(p,d)}}function a(p,_){i[p]&&(r[p]=function(A){return new Promise(function(v,b){s.push([p,A,v,b])>1||l(p,A)})},_&&(r[p]=_(r[p])))}function l(p,_){try{c(i[p](_))}catch(A){h(s[0][3],A)}}function c(p){p.value instanceof bo?Promise.resolve(p.value.v).then(u,d):h(s[0][2],p)}function u(p){l("next",p)}function d(p){l("throw",p)}function h(p,_){p(_),s.shift(),s.length&&l(s[0][0],s[0][1])}}function GS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof US=="function"?US(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(s){e[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),r(a,l,o.done,o.value)})}}function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}var Ha=n=>n&&typeof n.length=="number"&&typeof n!="function";function tp(n){return Ve(n?.then)}function np(n){return Ve(n[qa])}function ip(n){return Symbol.asyncIterator&&Ve(n?.[Symbol.asyncIterator])}function rp(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function z3(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var sp=z3();function op(n){return Ve(n?.[sp])}function ap(n){return YS(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:i,done:r}=yield bo(e.read());if(r)return yield bo(void 0);yield yield bo(i)}}finally{e.releaseLock()}})}function lp(n){return Ve(n?.getReader)}function wt(n){if(n instanceof tt)return n;if(n!=null){if(np(n))return U3(n);if(Ha(n))return H3(n);if(tp(n))return Y3(n);if(ip(n))return KS(n);if(op(n))return G3(n);if(lp(n))return K3(n)}throw rp(n)}function U3(n){return new tt(t=>{let e=n[qa]();if(Ve(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function H3(n){return new tt(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function Y3(n){return new tt(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Kh)})}function G3(n){return new tt(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function KS(n){return new tt(t=>{J3(n,t).catch(e=>t.error(e))})}function K3(n){return KS(ap(n))}function J3(n,t){var e,i,r,s;return HS(this,void 0,void 0,function*(){try{for(e=GS(n);i=yield e.next(),!i.done;){let o=i.value;if(t.next(o),t.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})}function Wn(n,t,e,i=0,r=!1){let s=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function cp(n,t=0){return rt((e,i)=>{e.subscribe(Ke(i,r=>Wn(i,n,()=>i.next(r),t),()=>Wn(i,n,()=>i.complete(),t),r=>Wn(i,n,()=>i.error(r),t)))})}function up(n,t=0){return rt((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function JS(n,t){return wt(n).pipe(up(t),cp(t))}function XS(n,t){return wt(n).pipe(up(t),cp(t))}function $S(n,t){return new tt(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}function QS(n,t){return new tt(e=>{let i;return Wn(e,t,()=>{i=n[sp](),Wn(e,t,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){e.error(o);return}s?e.complete():e.next(r)},0,!0)}),()=>Ve(i?.return)&&i.return()})}function dp(n,t){if(!n)throw new Error("Iterable cannot be null");return new tt(e=>{Wn(e,t,()=>{let i=n[Symbol.asyncIterator]();Wn(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function ZS(n,t){return dp(ap(n),t)}function eC(n,t){if(n!=null){if(np(n))return JS(n,t);if(Ha(n))return $S(n,t);if(tp(n))return XS(n,t);if(ip(n))return dp(n,t);if(op(n))return QS(n,t);if(lp(n))return ZS(n,t)}throw rp(n)}function Lt(n,t){return t?eC(n,t):wt(n)}function ke(...n){let t=vs(n);return Lt(n,t)}function Ya(n,t){let e=Ve(n)?n:()=>n,i=r=>r.error(e());return new tt(t?r=>t.schedule(i,0,r):i)}function O_(n){return!!n&&(n instanceof tt||Ve(n.lift)&&Ve(n.subscribe))}var jr=Fa(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function tC(n){return n instanceof Date&&!isNaN(n)}function ze(n,t){return rt((e,i)=>{let r=0;e.subscribe(Ke(i,s=>{i.next(n.call(t,s,r++))}))})}var{isArray:X3}=Array;function $3(n,t){return X3(t)?n(...t):n(t)}function Ga(n){return ze(t=>$3(n,t))}var{isArray:Q3}=Array,{getPrototypeOf:Z3,prototype:eF,keys:tF}=Object;function hp(n){if(n.length===1){let t=n[0];if(Q3(t))return{args:t,keys:null};if(nF(t)){let e=tF(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function nF(n){return n&&typeof n=="object"&&Z3(n)===eF}function pp(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function $c(...n){let t=vs(n),e=Ua(n),{args:i,keys:r}=hp(n);if(i.length===0)return Lt([],t);let s=new tt(iF(i,t,r?o=>pp(r,o):_n));return e?s.pipe(Ga(e)):s}function iF(n,t,e=_n){return i=>{nC(t,()=>{let{length:r}=n,s=new Array(r),o=r,a=r;for(let l=0;l<r;l++)nC(t,()=>{let c=Lt(n[l],t),u=!1;c.subscribe(Ke(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(e(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function nC(n,t,e){n?Wn(e,n,t):t()}function iC(n,t,e,i,r,s,o,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&t.complete()},p=A=>c<i?_(A):l.push(A),_=A=>{s&&t.next(A),c++;let v=!1;wt(e(A,u++)).subscribe(Ke(t,b=>{r?.(b),s?p(b):t.next(b)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<i;){let b=l.shift();o?Wn(t,o,()=>_(b)):_(b)}h()}catch(b){t.error(b)}}))};return n.subscribe(Ke(t,p,()=>{d=!0,h()})),()=>{a?.()}}function Nt(n,t,e=1/0){return Ve(t)?Nt((i,r)=>ze((s,o)=>t(i,s,r,o))(wt(n(i,r))),e):(typeof t=="number"&&(e=t),rt((i,r)=>iC(i,r,n,e)))}function rC(n=1/0){return Nt(_n,n)}function sC(){return rC(1)}function nr(...n){return sC()(Lt(n,vs(n)))}function fp(n){return new tt(t=>{wt(n()).subscribe(t)})}function Qc(...n){let t=Ua(n),{args:e,keys:i}=hp(n),r=new tt(s=>{let{length:o}=e;if(!o){s.complete();return}let a=new Array(o),l=o,c=o;for(let u=0;u<o;u++){let d=!1;wt(e[u]).subscribe(Ke(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(i?pp(i,a):a),s.complete())}))}});return t?r.pipe(Ga(t)):r}var rF=["addListener","removeListener"],sF=["addEventListener","removeEventListener"],oF=["on","off"];function ws(n,t,e,i){if(Ve(e)&&(i=e,e=void 0),i)return ws(n,t,e).pipe(Ga(i));let[r,s]=cF(n)?sF.map(o=>a=>n[o](t,a,e)):aF(n)?rF.map(oC(n,t)):lF(n)?oF.map(oC(n,t)):[];if(!r&&Ha(n))return Nt(o=>ws(o,t,e))(wt(n));if(!r)throw new TypeError("Invalid event target");return new tt(o=>{let a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function oC(n,t){return e=>i=>n[e](t,i)}function aF(n){return Ve(n.addListener)&&Ve(n.removeListener)}function lF(n){return Ve(n.on)&&Ve(n.off)}function cF(n){return Ve(n.addEventListener)&&Ve(n.removeEventListener)}function So(n=0,t,e=WS){let i=-1;return t!=null&&(ep(t)?e=t:i=t),new tt(r=>{let s=tC(n)?+n-e.now():n;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function gp(n=0,t=Xc){return n<0&&(n=0),So(n,n,t)}var{isArray:uF}=Array;function aC(n){return n.length===1&&uF(n[0])?n[0]:n}function An(n,t){return rt((e,i)=>{let r=0;e.subscribe(Ke(i,s=>n.call(t,s,r++)&&i.next(s)))})}function mp(...n){return n=aC(n),n.length===1?wt(n[0]):new tt(dF(n))}function dF(n){return t=>{let e=[];for(let i=0;e&&!t.closed&&i<n.length;i++)e.push(wt(n[i]).subscribe(Ke(t,r=>{if(e){for(let s=0;s<e.length;s++)s!==i&&e[s].unsubscribe();e=null}t.next(r)})))}}function ir(n){return rt((t,e)=>{let i=null,r=!1,s;i=t.subscribe(Ke(e,void 0,void 0,o=>{s=wt(n(o,ir(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function lC(n,t,e,i,r){return(s,o)=>{let a=e,l=t,c=0;s.subscribe(Ke(o,u=>{let d=c++;l=a?n(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function bs(n,t){return Ve(t)?Nt(n,t,1):Nt(n,1)}function Ss(n){return rt((t,e)=>{let i=!1;t.subscribe(Ke(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function oi(n){return n<=0?()=>Dn:rt((t,e)=>{let i=0;t.subscribe(Ke(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function cC(){return rt((n,t)=>{n.subscribe(Ke(t,qr))})}function uC(n){return ze(()=>n)}function R_(n,t){return t?e=>nr(t.pipe(oi(1),cC()),e.pipe(R_(n))):Nt((e,i)=>wt(n(e,i)).pipe(oi(1),uC(e)))}function F_(n,t=Xc){let e=So(n,t);return R_(()=>e)}function _p(n,t=_n){return n=n??hF,rt((e,i)=>{let r,s=!0;e.subscribe(Ke(i,o=>{let a=t(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function hF(n,t){return n===t}function Ap(n=pF){return rt((t,e)=>{let i=!1;t.subscribe(Ke(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function pF(){return new jr}function L_(...n){return t=>nr(t,ke(...n))}function Cs(n){return rt((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function Wr(n,t){let e=arguments.length>=2;return i=>i.pipe(n?An((r,s)=>n(r,s,i)):_n,oi(1),e?Ss(t):Ap(()=>new jr))}function Ka(n){return n<=0?()=>Dn:rt((t,e)=>{let i=[];t.subscribe(Ke(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function V_(n,t){let e=arguments.length>=2;return i=>i.pipe(n?An((r,s)=>n(r,s,i)):_n,Ka(1),e?Ss(t):Ap(()=>new jr))}function B_(n,t){return rt(lC(n,t,arguments.length>=2,!0))}function yp(...n){let t=vs(n);return rt((e,i)=>{(t?nr(n,e,t):nr(n,e)).subscribe(i)})}function zn(n,t){return rt((e,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();e.subscribe(Ke(i,l=>{r?.unsubscribe();let c=0,u=s++;wt(n(l,u)).subscribe(r=Ke(i,d=>i.next(t?t(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function rr(n){return rt((t,e)=>{wt(n).subscribe(Ke(e,()=>e.complete(),qr)),!e.closed&&t.subscribe(e)})}function Zt(n,t,e){let i=Ve(n)||t||e?{next:n,error:t,complete:e}:n;return i?rt((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(Ke(s,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),s.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),s.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),s.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):_n}function q_(...n){let t=Ua(n);return rt((e,i)=>{let r=n.length,s=new Array(r),o=n.map(()=>!1),a=!1;for(let l=0;l<r;l++)wt(n[l]).subscribe(Ke(i,c=>{s[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(_n))&&(o=null))},qr));e.subscribe(Ke(i,l=>{if(a){let c=[l,...s];i.next(t?t(...c):c)}}))})}var tx="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",De=class extends Error{code;constructor(t,e){super(gF(t,e)),this.code=t}};function fF(n){return`NG0${Math.abs(n)}`}function gF(n,t){return`${fF(n)}${t?": "+t:""}`}var nx=Symbol("InputSignalNode#UNSET"),mF=Ie(ne({},Uh),{transformFn:void 0,applyValueToInputSignal(n,t){Gc(n,t)}});function ix(n,t){let e=Object.create(mF);e.value=n,e.transformFn=t?.transform;function i(){if(Yc(e),e.value===nx){let r=null;throw new De(-950,r)}return e.value}return i[Ai]=e,i}function pu(n){return{toString:n}.toString()}var vp="__parameters__";function _F(n){return function(...e){if(n){let i=n(...e);for(let r in i)this[r]=i[r]}}}function rx(n,t,e){return pu(()=>{let i=_F(t);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(l,c,u){let d=l.hasOwnProperty(vp)?l[vp]:Object.defineProperty(l,vp,{value:[]})[vp];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var iu=globalThis;function Dt(n){for(let t in n)if(n[t]===Dt)return t;throw Error("Could not find renamed property on target object.")}function AF(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function Yn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Yn).join(", ")}]`;if(n==null)return""+n;let t=n.overriddenName||n.name;if(t)return`${t}`;let e=n.toString();if(e==null)return""+e;let i=e.indexOf(`
`);return i>=0?e.slice(0,i):e}function eA(n,t){return n?t?`${n} ${t}`:n:t||""}var yF=Dt({__forward_ref__:Dt});function bi(n){return n.__forward_ref__=bi,n.toString=function(){return Yn(this())},n}function Pn(n){return sx(n)?n():n}function sx(n){return typeof n=="function"&&n.hasOwnProperty(yF)&&n.__forward_ref__===bi}function ce(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Li(n){return{providers:n.providers||[],imports:n.imports||[]}}function nf(n){return dC(n,ax)||dC(n,lx)}function ox(n){return nf(n)!==null}function dC(n,t){return n.hasOwnProperty(t)?n[t]:null}function vF(n){let t=n&&(n[ax]||n[lx]);return t||null}function hC(n){return n&&(n.hasOwnProperty(pC)||n.hasOwnProperty(wF))?n[pC]:null}var ax=Dt({\u0275prov:Dt}),pC=Dt({\u0275inj:Dt}),lx=Dt({ngInjectableDef:Dt}),wF=Dt({ngInjectorDef:Dt}),Se=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=ce({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function cx(n){return n&&!!n.\u0275providers}var bF=Dt({\u0275cmp:Dt}),SF=Dt({\u0275dir:Dt}),CF=Dt({\u0275pipe:Dt}),xF=Dt({\u0275mod:Dt}),kp=Dt({\u0275fac:Dt}),nu=Dt({__NG_ELEMENT_ID__:Dt}),fC=Dt({__NG_ENV_ID__:Dt});function Un(n){return typeof n=="string"?n:n==null?"":String(n)}function DF(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Un(n)}function ux(n,t){throw new De(-200,n)}function ZA(n,t){throw new De(-201,!1)}var nt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(nt||{}),tA;function dx(){return tA}function yi(n){let t=tA;return tA=n,t}function hx(n,t,e){let i=nf(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&nt.Optional)return null;if(t!==void 0)return t;ZA(n,"Injector")}var EF={},Co=EF,nA="__NG_DI_FLAG__",Np=class{injector;constructor(t){this.injector=t}retrieve(t,e){let i=e;return this.injector.get(t,i.optional?Hh:Co,i)}},Pp="ngTempTokenPath",MF="ngTokenPath",TF=/\n/gm,IF="\u0275",gC="__source";function kF(n,t=nt.Default){if(Kc()===void 0)throw new De(-203,!1);if(Kc()===null)return hx(n,void 0,t);{let e=Kc(),i;return e instanceof Np?i=e.injector:i=e,i.get(n,t&nt.Optional?null:void 0,t)}}function ae(n,t=nt.Default){return(dx()||kF)(Pn(n),t)}function oe(n,t=nt.Default){return ae(n,rf(t))}function rf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function iA(n){let t=[];for(let e=0;e<n.length;e++){let i=Pn(n[e]);if(Array.isArray(i)){if(i.length===0)throw new De(900,!1);let r,s=nt.Default;for(let o=0;o<i.length;o++){let a=i[o],l=NF(a);typeof l=="number"?l===-1?r=a.token:s|=l:r=a}t.push(ae(r,s))}else t.push(ae(i))}return t}function px(n,t){return n[nA]=t,n.prototype[nA]=t,n}function NF(n){return n[nA]}function PF(n,t,e,i){let r=n[Pp];throw t[gC]&&r.unshift(t[gC]),n.message=OF(`
`+n.message,r,e,i),n[MF]=r,n[Pp]=null,n}function OF(n,t,e,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==IF?n.slice(2):n;let r=Yn(t);if(Array.isArray(t))r=t.map(Yn).join(" -> ");else if(typeof t=="object"){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Yn(a)))}r=`{${s.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(TF,`
  `)}`}var RF=px(rx("Optional"),8);var FF=px(rx("SkipSelf"),4);function tl(n,t){let e=n.hasOwnProperty(kp);return e?n[kp]:null}function LF(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=t[i];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}function VF(n){return n.flat(Number.POSITIVE_INFINITY)}function ey(n,t){n.forEach(e=>Array.isArray(e)?ey(e,t):t(e))}function fx(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function Op(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function BF(n,t){let e=[];for(let i=0;i<n;i++)e.push(t);return e}function qF(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(r===1)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;){let s=r-2;n[r]=n[s],r--}n[t]=e,n[t+1]=i}}function ty(n,t,e){let i=fu(n,t);return i>=0?n[i|1]=e:(i=~i,qF(n,i,t,e)),i}function j_(n,t){let e=fu(n,t);if(e>=0)return n[e|1]}function fu(n,t){return jF(n,t,1)}function jF(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){let s=i+(r-i>>1),o=n[s<<e];if(t===o)return s<<e;o>t?r=s:i=s+1}return~(r<<e)}var Do={},Hn=[],ru=new Se(""),gx=new Se("",-1),mx=new Se(""),Rp=class{get(t,e=Co){if(e===Co){let i=new Error(`NullInjectorError: No provider for ${Yn(t)}!`);throw i.name="NullInjectorError",i}return e}};function _x(n,t){let e=n[xF]||null;if(!e&&t===!0)throw new Error(`Type ${Yn(n)} does not have '\u0275mod' property.`);return e}function nl(n){return n[bF]||null}function WF(n){return n[SF]||null}function zF(n){return n[CF]||null}function gu(n){return{\u0275providers:n}}function UF(...n){return{\u0275providers:Ax(!0,n),\u0275fromNgModule:!0}}function Ax(n,...t){let e=[],i=new Set,r,s=o=>{e.push(o)};return ey(t,o=>{let a=o;rA(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&yx(r,s),e}function yx(n,t){for(let e=0;e<n.length;e++){let{ngModule:i,providers:r}=n[e];ny(r,s=>{t(s,i)})}}function rA(n,t,e,i){if(n=Pn(n),!n)return!1;let r=null,s=hC(n),o=!s&&nl(n);if(!s&&!o){let l=n.ngModule;if(s=hC(l),s)r=l;else return!1}else{if(o&&!o.standalone)return!1;r=n}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)rA(c,t,e,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let c;try{ey(s.imports,u=>{rA(u,t,e,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&yx(c,t)}if(!a){let c=tl(r)||(()=>new r);t({provide:r,useFactory:c,deps:Hn},r),t({provide:mx,useValue:r,multi:!0},r),t({provide:ru,useValue:()=>ae(r),multi:!0},r)}let l=s.providers;if(l!=null&&!a){let c=n;ny(l,u=>{t(u,c)})}}else return!1;return r!==n&&n.providers!==void 0}function ny(n,t){for(let e of n)cx(e)&&(e=e.\u0275providers),Array.isArray(e)?ny(e,t):t(e)}var HF=Dt({provide:String,useValue:Dt});function vx(n){return n!==null&&typeof n=="object"&&HF in n}function YF(n){return!!(n&&n.useExisting)}function GF(n){return!!(n&&n.useFactory)}function il(n){return typeof n=="function"}function KF(n){return!!n.useClass}var sf=new Se(""),xp={},mC={},W_;function iy(){return W_===void 0&&(W_=new Rp),W_}var On=class{},su=class extends On{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,oA(t,o=>this.processProvider(o)),this.records.set(gx,Ja(void 0,this)),r.has("environment")&&this.records.set(On,Ja(void 0,this));let s=this.records.get(sf);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(mx,Hn,nt.Self))}retrieve(t,e){let i=e;return this.get(t,i.optional?Hh:Co,i)}destroy(){eu(this),this._destroyed=!0;let t=lt(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),lt(t)}}onDestroy(t){return eu(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){eu(this);let e=Br(this),i=yi(void 0),r;try{return t()}finally{Br(e),yi(i)}}get(t,e=Co,i=nt.Default){if(eu(this),t.hasOwnProperty(fC))return t[fC](this);i=rf(i);let r,s=Br(this),o=yi(void 0);try{if(!(i&nt.SkipSelf)){let l=this.records.get(t);if(l===void 0){let c=ZF(t)&&nf(t);c&&this.injectableDefInScope(c)?l=Ja(sA(t),xp):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l,i)}let a=i&nt.Self?iy():this.parent;return e=i&nt.Optional&&e===Co?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[Pp]=a[Pp]||[]).unshift(Yn(t)),s)throw a;return PF(a,t,"R3InjectorError",this.source)}else throw a}finally{yi(o),Br(s)}}resolveInjectorInitializers(){let t=lt(null),e=Br(this),i=yi(void 0),r;try{let s=this.get(ru,Hn,nt.Self);for(let o of s)o()}finally{Br(e),yi(i),lt(t)}}toString(){let t=[],e=this.records;for(let i of e.keys())t.push(Yn(i));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Pn(t);let e=il(t)?t:Pn(t&&t.provide),i=XF(t);if(!il(t)&&t.multi===!0){let r=this.records.get(e);r||(r=Ja(void 0,xp,!0),r.factory=()=>iA(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e,i){let r=lt(null);try{return e.value===mC?ux(Yn(t)):e.value===xp&&(e.value=mC,e.value=e.factory(void 0,i)),typeof e.value=="object"&&e.value&&QF(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{lt(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=Pn(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function sA(n){let t=nf(n),e=t!==null?t.factory:tl(n);if(e!==null)return e;if(n instanceof Se)throw new De(204,!1);if(n instanceof Function)return JF(n);throw new De(204,!1)}function JF(n){if(n.length>0)throw new De(204,!1);let e=vF(n);return e!==null?()=>e.factory(n):()=>new n}function XF(n){if(vx(n))return Ja(void 0,n.useValue);{let t=wx(n);return Ja(t,xp)}}function wx(n,t,e){let i;if(il(n)){let r=Pn(n);return tl(r)||sA(r)}else if(vx(n))i=()=>Pn(n.useValue);else if(GF(n))i=()=>n.useFactory(...iA(n.deps||[]));else if(YF(n))i=(r,s)=>ae(Pn(n.useExisting),s!==void 0&&s&nt.Optional?nt.Optional:void 0);else{let r=Pn(n&&(n.useClass||n.provide));if($F(n))i=()=>new r(...iA(n.deps));else return tl(r)||sA(r)}return i}function eu(n){if(n.destroyed)throw new De(205,!1)}function Ja(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function $F(n){return!!n.deps}function QF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function ZF(n){return typeof n=="function"||typeof n=="object"&&n instanceof Se}function oA(n,t){for(let e of n)Array.isArray(e)?oA(e,t):e&&cx(e)?oA(e.\u0275providers,t):t(e)}function li(n,t){let e;n instanceof su?(eu(n),e=n):e=new Np(n);let i,r=Br(e),s=yi(void 0);try{return t()}finally{Br(r),yi(s)}}function bx(){return dx()!==void 0||Kc()!=null}function Sx(n){if(!bx())throw new De(-203,!1)}function e4(n){return typeof n=="function"}var Gr=0,st=1,$e=2,En=3,Fi=4,Kn=5,ou=6,Fp=7,Rn=8,rl=9,zr=10,Vt=11,au=12,_C=13,hl=14,wi=15,Eo=16,Xa=17,Ur=18,of=19,Cx=20,xs=21,z_=22,Lp=23,vi=24,Za=25,Fn=26,xx=1;var Mo=7,Vp=8,sl=9,Gn=10;function Ds(n){return Array.isArray(n)&&typeof n[xx]=="object"}function Kr(n){return Array.isArray(n)&&n[xx]===!0}function ry(n){return(n.flags&4)!==0}function pl(n){return n.componentOffset>-1}function af(n){return(n.flags&1)===1}function or(n){return!!n.template}function Bp(n){return(n[$e]&512)!==0}function fl(n){return(n[$e]&256)===256}var aA=class{previousValue;currentValue;firstChange;constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function Dx(n,t,e,i){t!==null?t.applyValueToInputSignal(t,i):n[e]=i}var Vi=(()=>{let n=()=>Ex;return n.ngInherit=!0,n})();function Ex(n){return n.type.prototype.ngOnChanges&&(n.setInput=n4),t4}function t4(){let n=Tx(this),t=n?.current;if(t){let e=n.previous;if(e===Do)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function n4(n,t,e,i,r){let s=this.declaredInputs[i],o=Tx(n)||i4(n,{previous:Do,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new aA(c&&c.currentValue,e,l===Do),Dx(n,t,r,e)}var Mx="__ngSimpleChanges__";function Tx(n){return n[Mx]||null}function i4(n,t){return n[Mx]=t}var AC=null;var St=function(n,t=null,e){AC?.(n,t,e)},Ix="svg",r4="math";function ar(n){for(;Array.isArray(n);)n=n[Gr];return n}function kx(n,t){return ar(t[n])}function hr(n,t){return ar(t[n.index])}function sy(n,t){return n.data[t]}function s4(n,t){return n[t]}function lr(n,t){let e=t[n];return Ds(e)?e:e[Gr]}function o4(n){return(n[$e]&4)===4}function oy(n){return(n[$e]&128)===128}function a4(n){return Kr(n[En])}function ol(n,t){return t==null?null:n[t]}function Nx(n){n[Xa]=0}function Px(n){n[$e]&1024||(n[$e]|=1024,oy(n)&&mu(n))}function l4(n,t){for(;n>0;)t=t[hl],n--;return t}function lf(n){return!!(n[$e]&9216||n[vi]?.dirty)}function lA(n){n[zr].changeDetectionScheduler?.notify(8),n[$e]&64&&(n[$e]|=1024),lf(n)&&mu(n)}function mu(n){n[zr].changeDetectionScheduler?.notify(0);let t=To(n);for(;t!==null&&!(t[$e]&8192||(t[$e]|=8192,!oy(t)));)t=To(t)}function Ox(n,t){if(fl(n))throw new De(911,!1);n[xs]===null&&(n[xs]=[]),n[xs].push(t)}function c4(n,t){if(n[xs]===null)return;let e=n[xs].indexOf(t);e!==-1&&n[xs].splice(e,1)}function To(n){let t=n[En];return Kr(t)?t[En]:t}function ay(n){return n[Fp]??=[]}function ly(n){return n.cleanup??=[]}function u4(n,t,e,i){let r=ay(t);r.push(e),n.firstCreatePass&&ly(n).push(i,r.length-1)}var Ze={lFrame:jx(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var cA=!1;function d4(){return Ze.lFrame.elementDepthCount}function h4(){Ze.lFrame.elementDepthCount++}function p4(){Ze.lFrame.elementDepthCount--}function cy(){return Ze.bindingsEnabled}function Rx(){return Ze.skipHydrationRootTNode!==null}function f4(n){return Ze.skipHydrationRootTNode===n}function g4(){Ze.skipHydrationRootTNode=null}function Qe(){return Ze.lFrame.lView}function Xt(){return Ze.lFrame.tView}function D(n){return Ze.lFrame.contextLView=n,n[Rn]}function E(n){return Ze.lFrame.contextLView=null,n}function Jn(){let n=Fx();for(;n!==null&&n.type===64;)n=n.parent;return n}function Fx(){return Ze.lFrame.currentTNode}function m4(){let n=Ze.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function Po(n,t){let e=Ze.lFrame;e.currentTNode=n,e.isParent=t}function uy(){return Ze.lFrame.isParent}function dy(){Ze.lFrame.isParent=!1}function _4(){return Ze.lFrame.contextLView}function Lx(){return cA}function yC(n){let t=cA;return cA=n,t}function _u(){let n=Ze.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function hy(){return Ze.lFrame.bindingIndex}function A4(n){return Ze.lFrame.bindingIndex=n}function gl(){return Ze.lFrame.bindingIndex++}function Au(n){let t=Ze.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function y4(){return Ze.lFrame.inI18n}function v4(n,t){let e=Ze.lFrame;e.bindingIndex=e.bindingRootIndex=n,uA(t)}function w4(){return Ze.lFrame.currentDirectiveIndex}function uA(n){Ze.lFrame.currentDirectiveIndex=n}function b4(n){let t=Ze.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function Vx(){return Ze.lFrame.currentQueryIndex}function py(n){Ze.lFrame.currentQueryIndex=n}function S4(n){let t=n[st];return t.type===2?t.declTNode:t.type===1?n[Kn]:null}function Bx(n,t,e){if(e&nt.SkipSelf){let r=t,s=n;for(;r=r.parent,r===null&&!(e&nt.Host);)if(r=S4(s),r===null||(s=s[hl],r.type&10))break;if(r===null)return!1;t=r,n=s}let i=Ze.lFrame=qx();return i.currentTNode=t,i.lView=n,!0}function fy(n){let t=qx(),e=n[st];Ze.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function qx(){let n=Ze.lFrame,t=n===null?null:n.child;return t===null?jx(n):t}function jx(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function Wx(){let n=Ze.lFrame;return Ze.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var zx=Wx;function gy(){let n=Wx();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function C4(n){return(Ze.lFrame.contextLView=l4(n,Ze.lFrame.contextLView))[Rn]}function pr(){return Ze.lFrame.selectedIndex}function Io(n){Ze.lFrame.selectedIndex=n}function yu(){let n=Ze.lFrame;return sy(n.tView,n.selectedIndex)}function cf(){Ze.lFrame.currentNamespace=Ix}function uf(){x4()}function x4(){Ze.lFrame.currentNamespace=null}function D4(){return Ze.lFrame.currentNamespace}var Ux=!0;function df(){return Ux}function hf(n){Ux=n}function E4(n,t,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(i){let o=Ex(t);(e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o)}r&&(e.preOrderHooks??=[]).push(0-n,r),s&&((e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s))}function my(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){let s=n.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-e,o),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),c&&((n.viewHooks??=[]).push(e,c),(n.viewCheckHooks??=[]).push(e,c)),u!=null&&(n.destroyHooks??=[]).push(e,u)}}function Dp(n,t,e){Hx(n,t,3,e)}function Ep(n,t,e,i){(n[$e]&3)===e&&Hx(n,t,e,i)}function U_(n,t){let e=n[$e];(e&3)===t&&(e&=16383,e+=1,n[$e]=e)}function Hx(n,t,e,i){let r=i!==void 0?n[Xa]&65535:0,s=i??-1,o=t.length-1,a=0;for(let l=r;l<o;l++)if(typeof t[l+1]=="number"){if(a=t[l],i!=null&&a>=i)break}else t[l]<0&&(n[Xa]+=65536),(a<s||s==-1)&&(M4(n,e,t,l),n[Xa]=(n[Xa]&4294901760)+l+2),l++}function vC(n,t){St(4,n,t);let e=lt(null);try{t.call(n)}finally{lt(e),St(5,n,t)}}function M4(n,t,e,i){let r=e[i]<0,s=e[i+1],o=r?-e[i]:e[i],a=n[o];r?n[$e]>>14<n[Xa]>>16&&(n[$e]&3)===t&&(n[$e]+=16384,vC(a,s)):vC(a,s)}var el=-1,ko=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,i){this.factory=t,this.canSeeViewProviders=e,this.injectImpl=i}};function T4(n){return(n.flags&8)!==0}function I4(n){return(n.flags&16)!==0}function k4(n,t,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let s=e[i++],o=e[i++],a=e[i++];n.setAttribute(t,o,a,s)}else{let s=r,o=e[++i];P4(s)?n.setProperty(t,s,o):n.setAttribute(t,s,o),i++}}return i}function N4(n){return n===3||n===4||n===6}function P4(n){return n.charCodeAt(0)===64}function al(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?wC(n,e,r,null,t[++i]):wC(n,e,r,null,null))}}return n}function wC(n,t,e,i,r){let s=0,o=n.length;if(t===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===t){o=-1;break}else if(a>t){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===e){r!==null&&(n[s+1]=r);return}s++,r!==null&&s++}o!==-1&&(n.splice(o,0,t),s=o+1),n.splice(s++,0,e),r!==null&&n.splice(s++,0,r)}function Yx(n){return n!==el}function qp(n){return n&32767}function O4(n){return n>>16}function jp(n,t){let e=O4(n),i=t;for(;e>0;)i=i[hl],e--;return i}var dA=!0;function bC(n){let t=dA;return dA=n,t}var R4=256,Gx=R4-1,Kx=5,F4=0,sr={};function L4(n,t,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(nu)&&(i=e[nu]),i==null&&(i=e[nu]=F4++);let r=i&Gx,s=1<<r;t.data[n+(r>>Kx)]|=s}function Wp(n,t){let e=Jx(n,t);if(e!==-1)return e;let i=t[st];i.firstCreatePass&&(n.injectorIndex=t.length,H_(i.data,n),H_(t,null),H_(i.blueprint,null));let r=_y(n,t),s=n.injectorIndex;if(Yx(r)){let o=qp(r),a=jp(r,t),l=a[st].data;for(let c=0;c<8;c++)t[s+c]=a[o+c]|l[o+c]}return t[s+8]=r,s}function H_(n,t){n.push(0,0,0,0,0,0,0,0,t)}function Jx(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function _y(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;r!==null;){if(i=eD(r),i===null)return el;if(e++,r=r[hl],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return el}function hA(n,t,e){L4(n,t,e)}function Xx(n,t,e){if(e&nt.Optional||n!==void 0)return n;ZA(t,"NodeInjector")}function $x(n,t,e,i){if(e&nt.Optional&&i===void 0&&(i=null),(e&(nt.Self|nt.Host))===0){let r=n[rl],s=yi(void 0);try{return r?r.get(t,i,e&nt.Optional):hx(t,i,e&nt.Optional)}finally{yi(s)}}return Xx(i,t,e)}function Qx(n,t,e,i=nt.Default,r){if(n!==null){if(t[$e]&2048&&!(i&nt.Self)){let o=j4(n,t,e,i,sr);if(o!==sr)return o}let s=Zx(n,t,e,i,sr);if(s!==sr)return s}return $x(t,e,i,r)}function Zx(n,t,e,i,r){let s=B4(e);if(typeof s=="function"){if(!Bx(t,n,i))return i&nt.Host?Xx(r,e,i):$x(t,e,i,r);try{let o;if(o=s(i),o==null&&!(i&nt.Optional))ZA(e);else return o}finally{zx()}}else if(typeof s=="number"){let o=null,a=Jx(n,t),l=el,c=i&nt.Host?t[wi][Kn]:null;for((a===-1||i&nt.SkipSelf)&&(l=a===-1?_y(n,t):t[a+8],l===el||!CC(i,!1)?a=-1:(o=t[st],a=qp(l),t=jp(l,t)));a!==-1;){let u=t[st];if(SC(s,a,u.data)){let d=V4(a,t,e,o,i,c);if(d!==sr)return d}l=t[a+8],l!==el&&CC(i,t[st].data[a+8]===c)&&SC(s,a,t)?(o=u,a=qp(l),t=jp(l,t)):a=-1}}return r}function V4(n,t,e,i,r,s){let o=t[st],a=o.data[n+8],l=i==null?pl(a)&&dA:i!=o&&(a.type&3)!==0,c=r&nt.Host&&s===a,u=Mp(a,o,e,l,c);return u!==null?lu(t,o,u,a,r):sr}function Mp(n,t,e,i,r){let s=n.providerIndexes,o=t.data,a=s&1048575,l=n.directiveStart,c=n.directiveEnd,u=s>>20,d=i?a:a+u,h=r?a+u:c;for(let p=d;p<h;p++){let _=o[p];if(p<l&&e===_||p>=l&&_.type===e)return p}if(r){let p=o[l];if(p&&or(p)&&p.type===e)return l}return null}function lu(n,t,e,i,r){let s=n[e],o=t.data;if(s instanceof ko){let a=s;a.resolving&&ux(DF(o[e]));let l=bC(a.canSeeViewProviders);a.resolving=!0;let c,u=a.injectImpl?yi(a.injectImpl):null,d=Bx(n,i,nt.Default);try{s=n[e]=a.factory(void 0,r,o,n,i),t.firstCreatePass&&e>=i.directiveStart&&E4(e,o[e],t)}finally{u!==null&&yi(u),bC(l),a.resolving=!1,zx()}}return s}function B4(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(nu)?n[nu]:void 0;return typeof t=="number"?t>=0?t&Gx:q4:t}function SC(n,t,e){let i=1<<n;return!!(e[t+(n>>Kx)]&i)}function CC(n,t){return!(n&nt.Self)&&!(n&nt.Host&&t)}var xo=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return Qx(this._tNode,this._lView,t,rf(i),e)}};function q4(){return new xo(Jn(),Qe())}function Bi(n){return pu(()=>{let t=n.prototype.constructor,e=t[kp]||pA(t),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let s=r[kp]||pA(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function pA(n){return sx(n)?()=>{let t=pA(Pn(n));return t&&t()}:tl(n)}function j4(n,t,e,i,r){let s=n,o=t;for(;s!==null&&o!==null&&o[$e]&2048&&!Bp(o);){let a=Zx(s,o,e,i|nt.Self,sr);if(a!==sr)return a;let l=s.parent;if(!l){let c=o[Cx];if(c){let u=c.get(e,sr,i);if(u!==sr)return u}l=eD(o),o=o[hl]}s=l}return r}function eD(n){let t=n[st],e=t.type;return e===2?t.declTNode:e===1?n[Kn]:null}function xC(n,t=null,e=null,i){let r=tD(n,t,e,i);return r.resolveInjectorInitializers(),r}function tD(n,t=null,e=null,i,r=new Set){let s=[e||Hn,UF(n)];return i=i||(typeof n=="object"?void 0:Yn(n)),new su(s,t||iy(),i||null,r)}var Ln=class n{static THROW_IF_NOT_FOUND=Co;static NULL=new Rp;static create(t,e){if(Array.isArray(t))return xC({name:""},e,t,"");{let i=t.name??"";return xC({name:i},t.parent,t.providers,i)}}static \u0275prov=ce({token:n,providedIn:"any",factory:()=>ae(gx)});static __NG_ELEMENT_ID__=-1};var W4=new Se("");W4.__NG_ELEMENT_ID__=n=>{let t=Jn();if(t===null)throw new De(204,!1);if(t.type&2)return t.value;if(n&nt.Optional)return null;throw new De(204,!1)};var nD=!1,Oo=(()=>{class n{static __NG_ELEMENT_ID__=z4;static __NG_ENV_ID__=e=>e}return n})(),fA=class extends Oo{_lView;constructor(t){super(),this._lView=t}onDestroy(t){let e=this._lView;return fl(e)?(t(),()=>{}):(Ox(e,t),()=>c4(e,t))}};function z4(){return new fA(Qe())}var ll=class{},Ay=new Se("",{providedIn:"root",factory:()=>!1});var iD=new Se(""),rD=new Se(""),Es=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Qt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new n})}return n})();var gA=class extends ct{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,bx()&&(this.destroyRef=oe(Oo,{optional:!0})??void 0,this.pendingTasks=oe(Es,{optional:!0})??void 0)}emit(t){let e=lt(null);try{super.next(t)}finally{lt(e)}}subscribe(t,e,i){let r=t,s=e||(()=>null),o=i;if(t&&typeof t=="object"){let l=t;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:r,error:s,complete:o});return t instanceof Yt&&t.add(a),a}wrapInTimeout(t){return e=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{t(e)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},Pt=gA;function zp(...n){}function sD(n){let t,e;function i(){n=zp;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),i()})),()=>i()}function DC(n){return queueMicrotask(()=>n()),()=>{n=zp}}var yy="isAngularZone",Up=yy+"_ID",U4=0,Tt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Pt(!1);onMicrotaskEmpty=new Pt(!1);onStable=new Pt(!1);onError=new Pt(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=nD}=t;if(typeof Zone>"u")throw new De(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&i,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,o.scheduleInRootZone=s,G4(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(yy)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new De(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new De(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,H4,zp,zp);try{return s.runTask(o,e,i)}finally{s.cancelTask(o)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}},H4={};function vy(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Y4(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){sD(()=>{n.callbackScheduled=!1,mA(n),n.isCheckStableRunning=!0,vy(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),mA(n)}function G4(n){let t=()=>{Y4(n)},e=U4++;n._inner=n._inner.fork({name:"angular",properties:{[yy]:!0,[Up]:e,[Up+e]:!0},onInvokeTask:(i,r,s,o,a,l)=>{if(K4(l))return i.invokeTask(s,o,a,l);try{return EC(n),i.invokeTask(s,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),MC(n)}},onInvoke:(i,r,s,o,a,l,c)=>{try{return EC(n),i.invoke(s,o,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!J4(l)&&t(),MC(n)}},onHasTask:(i,r,s,o)=>{i.hasTask(s,o),r===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,mA(n),vy(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,r,s,o)=>(i.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function mA(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function EC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function MC(n){n._nesting--,vy(n)}var _A=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Pt;onMicrotaskEmpty=new Pt;onStable=new Pt;onError=new Pt;run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}};function K4(n){return oD(n,"__ignore_ng_zone__")}function J4(n){return oD(n,"__scheduler_tick__")}function oD(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var cr=class{_console=console;handleError(t){this._console.error("ERROR",t)}},X4=new Se("",{providedIn:"root",factory:()=>{let n=oe(Tt),t=oe(cr);return e=>n.runOutsideAngular(()=>t.handleError(e))}});function TC(n,t){return ix(n,t)}function $4(n){return ix(nx,n)}var aD=(TC.required=$4,TC);function Q4(){return ml(Jn(),Qe())}function ml(n,t){return new yn(hr(n,t))}var yn=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=Q4}return n})();function Z4(n){return n instanceof yn?n.nativeElement:n}function eL(n){return typeof n=="function"&&n[Ai]!==void 0}function pf(n,t){let e=v_(n,t?.equal),i=e[Ai];return e.set=r=>Gc(i,r),e.update=r=>w_(i,r),e.asReadonly=tL.bind(e),e}function tL(){let n=this[Ai];if(n.readonlyFn===void 0){let t=()=>this();t[Ai]=n,n.readonlyFn=t}return n.readonlyFn}function lD(n){return eL(n)&&typeof n.set=="function"}function nL(){return this._results[Symbol.iterator]()}var AA=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ct}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let i=VF(t);(this._changesDetected=!LF(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=nL};function cD(n){return(n.flags&128)===128}var uD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(uD||{}),dD=new Map,iL=0;function rL(){return iL++}function sL(n){dD.set(n[of],n)}function yA(n){dD.delete(n[of])}var IC="__ngContext__";function _l(n,t){Ds(t)?(n[IC]=t[of],sL(t)):n[IC]=t}function hD(n){return fD(n[au])}function pD(n){return fD(n[Fi])}function fD(n){for(;n!==null&&!Kr(n);)n=n[Fi];return n}var vA;function gD(n){vA=n}function mD(){if(vA!==void 0)return vA;if(typeof document<"u")return document;throw new De(210,!1)}var wy=new Se("",{providedIn:"root",factory:()=>oL}),oL="ng",by=new Se(""),Al=new Se("",{providedIn:"platform",factory:()=>"unknown"});var Sy=new Se("",{providedIn:"root",factory:()=>mD().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var aL="h",lL="b";var _D=!1,cL=new Se("",{providedIn:"root",factory:()=>_D});var Cy=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Cy||{}),yl=new Se(""),kC=new Set;function vl(n){kC.has(n)||(kC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var AD=(()=>{class n{view;node;constructor(e,i){this.view=e,this.node=i}static __NG_ELEMENT_ID__=uL}return n})();function uL(){return new AD(Qe(),Jn())}var $a=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}($a||{}),yD=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new n})}return n})(),dL=[$a.EarlyRead,$a.Write,$a.MixedReadWrite,$a.Read],hL=(()=>{class n{ngZone=oe(Tt);scheduler=oe(ll);errorHandler=oe(cr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){oe(yl,{optional:!0})}execute(){let e=this.sequences.size>0;e&&St(16),this.executing=!0;for(let i of dL)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=r.hooks[i];return s(r.pipelinedValue)},r.snapshot))}catch(s){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&St(17)}register(e){let{view:i}=e;i!==void 0?((i[Za]??=[]).push(e),mu(i),i[$e]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,i){return i?i.run(Cy.AFTER_NEXT_RENDER,e):e()}static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new n})}return n})(),wA=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,e,i,r,s,o=null){this.impl=t,this.hooks=e,this.view=i,this.once=r,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[Za];t&&(this.view[Za]=t.filter(e=>e!==this))}};function xy(n,t){!t?.injector&&Sx(xy);let e=t?.injector??oe(Ln);return vl("NgAfterRender"),vD(n,e,t,!1)}function ff(n,t){!t?.injector&&Sx(ff);let e=t?.injector??oe(Ln);return vl("NgAfterNextRender"),vD(n,e,t,!0)}function pL(n,t){if(n instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[t]=n,e}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function vD(n,t,e,i){let r=t.get(yD);r.impl??=t.get(hL);let s=t.get(yl,null,{optional:!0}),o=e?.phase??$a.MixedReadWrite,a=e?.manualCleanup!==!0?t.get(Oo):null,l=t.get(AD,null,{optional:!0}),c=new wA(r.impl,pL(n,o),l?.view,i,a,s?.snapshot(null));return r.impl.register(c),c}var fL=(n,t,e,i)=>{};function gL(n,t,e,i){fL(n,t,e,i)}var mL=()=>null;function wD(n,t,e=!1){return mL(n,t,e)}function bD(n,t){let e=n.contentQueries;if(e!==null){let i=lt(null);try{for(let r=0;r<e.length;r+=2){let s=e[r],o=e[r+1];if(o!==-1){let a=n.data[o];py(s),a.contentQueries(2,t[o],o)}}}finally{lt(i)}}}function bA(n,t,e){py(0);let i=lt(null);try{t(n,e)}finally{lt(i)}}function Dy(n,t,e){if(ry(t)){let i=lt(null);try{let r=t.directiveStart,s=t.directiveEnd;for(let o=r;o<s;o++){let a=n.data[o];if(a.contentQueries){let l=e[o];a.contentQueries(1,l,o)}}}finally{lt(i)}}}var ur=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ur||{}),wp;function SD(){if(wp===void 0&&(wp=null,iu.trustedTypes))try{wp=iu.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return wp}function gf(n){return SD()?.createHTML(n)||n}function _L(n){return SD()?.createScriptURL(n)||n}var bp;function AL(){if(bp===void 0&&(bp=null,iu.trustedTypes))try{bp=iu.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return bp}function NC(n){return AL()?.createHTML(n)||n}var Hp=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${tx})`}};function mf(n){return n instanceof Hp?n.changingThisBreaksApplicationSecurity:n}function CD(n,t){let e=yL(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${tx})`)}return e===t}function yL(n){return n instanceof Hp&&n.getTypeName()||null}function vL(n){let t=new CA(n);return wL()?new SA(t):t}var SA=class{inertDocumentHelper;constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let e=new window.DOMParser().parseFromString(gf(t),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(t):(e.firstChild?.remove(),e)}catch{return null}}},CA=class{defaultDoc;inertDocument;constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let e=this.inertDocument.createElement("template");return e.innerHTML=gf(t),e}};function wL(){try{return!!new window.DOMParser().parseFromString(gf(""),"text/html")}catch{return!1}}var bL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function xD(n){return n=String(n),n.match(bL)?n:"unsafe:"+n}function Jr(n){let t={};for(let e of n.split(","))t[e]=!0;return t}function vu(...n){let t={};for(let e of n)for(let i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}var DD=Jr("area,br,col,hr,img,wbr"),ED=Jr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),MD=Jr("rp,rt"),SL=vu(MD,ED),CL=vu(ED,Jr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xL=vu(MD,Jr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),PC=vu(DD,CL,xL,SL),TD=Jr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),DL=Jr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),EL=Jr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),ML=vu(TD,DL,EL),TL=Jr("script,style,template"),xA=class{sanitizedSomething=!1;buf=[];sanitizeChildren(t){let e=t.firstChild,i=!0,r=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild){r.push(e),e=NL(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let s=kL(e);if(s){e=s;break}e=r.pop()}}return this.buf.join("")}startElement(t){let e=OC(t).toLowerCase();if(!PC.hasOwnProperty(e))return this.sanitizedSomething=!0,!TL.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let i=t.attributes;for(let r=0;r<i.length;r++){let s=i.item(r),o=s.name,a=o.toLowerCase();if(!ML.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;TD[a]&&(l=xD(l)),this.buf.push(" ",o,'="',RC(l),'"')}return this.buf.push(">"),!0}endElement(t){let e=OC(t).toLowerCase();PC.hasOwnProperty(e)&&!DD.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(RC(t))}};function IL(n,t){return(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function kL(n){let t=n.nextSibling;if(t&&n!==t.previousSibling)throw ID(t);return t}function NL(n){let t=n.firstChild;if(t&&IL(n,t))throw ID(t);return t}function OC(n){let t=n.nodeName;return typeof t=="string"?t:"FORM"}function ID(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var PL=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,OL=/([^\#-~ |!])/g;function RC(n){return n.replace(/&/g,"&amp;").replace(PL,function(t){let e=t.charCodeAt(0),i=t.charCodeAt(1);return"&#"+((e-55296)*1024+(i-56320)+65536)+";"}).replace(OL,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Sp;function RL(n,t){let e=null;try{Sp=Sp||vL(n);let i=t?String(t):"";e=Sp.getInertBodyElement(i);let r=5,s=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=e.innerHTML,e=Sp.getInertBodyElement(i)}while(i!==s);let a=new xA().sanitizeChildren(FC(e)||e);return gf(a)}finally{if(e){let i=FC(e)||e;for(;i.firstChild;)i.firstChild.remove()}}}function FC(n){return"content"in n&&FL(n)?n.content:null}function FL(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Ey=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Ey||{});function kD(n){let t=ND();return t?NC(t.sanitize(Ey.HTML,n)||""):CD(n,"HTML")?NC(mf(n)):RL(mD(),Un(n))}function wl(n){let t=ND();return t?t.sanitize(Ey.URL,n)||"":CD(n,"URL")?mf(n):xD(Un(n))}function _f(n){return _L(n[0])}function ND(){let n=Qe();return n&&n[zr].sanitizer}var LL=/^>|^->|<!--|-->|--!>|<!-$/g,VL=/(<|>)/g,BL="\u200B$1\u200B";function qL(n){return n.replace(LL,t=>t.replace(VL,BL))}function PD(n){return n.ownerDocument.defaultView}function OD(n){return n instanceof Function?n():n}function jL(n,t,e){let i=n.length;for(;;){let r=n.indexOf(t,e);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=t.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}e=r+1}}var RD="ng-template";function WL(n,t,e,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&jL(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if(My(n))return!1;if(r=t.indexOf(1,r),r>-1){let s;for(;++r<t.length&&typeof(s=t[r])=="string";)if(s.toLowerCase()===e)return!0}return!1}function My(n){return n.type===4&&n.value!==RD}function zL(n,t,e){let i=n.type===4&&!e?RD:n.value;return t===i}function UL(n,t,e){let i=4,r=n.attrs,s=r!==null?GL(r):0,o=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!o&&!Oi(i)&&!Oi(l))return!1;if(o&&Oi(l))continue;o=!1,i=l|i&1;continue}if(!o)if(i&4){if(i=2|i&1,l!==""&&!zL(n,l,e)||l===""&&t.length===1){if(Oi(i))return!1;o=!0}}else if(i&8){if(r===null||!WL(n,r,l,e)){if(Oi(i))return!1;o=!0}}else{let c=t[++a],u=HL(l,r,My(n),e);if(u===-1){if(Oi(i))return!1;o=!0;continue}if(c!==""){let d;if(u>s?d="":d=r[u+1].toLowerCase(),i&2&&c!==d){if(Oi(i))return!1;o=!0}}}}return Oi(i)||o}function Oi(n){return(n&1)===0}function HL(n,t,e,i){if(t===null)return-1;let r=0;if(i||!e){let s=!1;for(;r<t.length;){let o=t[r];if(o===n)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=t[++r];for(;typeof a=="string";)a=t[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return KL(t,n)}function FD(n,t,e=!1){for(let i=0;i<t.length;i++)if(UL(n,t[i],e))return!0;return!1}function YL(n){let t=n.attrs;if(t!=null){let e=t.indexOf(5);if((e&1)===0)return t[e+1]}return null}function GL(n){for(let t=0;t<n.length;t++){let e=n[t];if(N4(e))return t}return n.length}function KL(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let i=n[e];if(typeof i=="number")return-1;if(i===t)return e;e++}return-1}function JL(n,t){e:for(let e=0;e<t.length;e++){let i=t[e];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function LC(n,t){return n?":not("+t.trim()+")":t}function XL(n){let t=n[0],e=1,i=2,r="",s=!1;for(;e<n.length;){let o=n[e];if(typeof o=="string")if(i&2){let a=n[++e];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!Oi(o)&&(t+=LC(s,r),r=""),i=o,s=s||!Oi(i);e++}return r!==""&&(t+=LC(s,r)),t}function $L(n){return n.map(XL).join(",")}function QL(n){let t=[],e=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&t.push(s,n[++i]):r===8&&e.push(s);else{if(!Oi(r))break;r=s}i++}return e.length&&t.push(1,...e),t}var cn={};function ZL(n,t){return n.createText(t)}function eV(n,t,e){n.setValue(t,e)}function tV(n,t){return n.createComment(qL(t))}function LD(n,t,e){return n.createElement(t,e)}function Yp(n,t,e,i,r){n.insertBefore(t,e,i,r)}function VD(n,t,e){n.appendChild(t,e)}function VC(n,t,e,i,r){i!==null?Yp(n,t,e,i,r):VD(n,t,e)}function nV(n,t,e){n.removeChild(null,t,e)}function iV(n,t,e){n.setAttribute(t,"style",e)}function rV(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function BD(n,t,e){let{mergedAttrs:i,classes:r,styles:s}=e;i!==null&&k4(n,t,i),r!==null&&rV(n,t,r),s!==null&&iV(n,t,s)}function Ty(n,t,e,i,r,s,o,a,l,c,u){let d=Fn+i,h=d+r,p=sV(d,h),_=typeof c=="function"?c():c;return p[st]={type:n,blueprint:p,template:e,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:_,incompleteFirstPass:!1,ssrId:u}}function sV(n,t){let e=[];for(let i=0;i<t;i++)e.push(i<n?null:cn);return e}function oV(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=Ty(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function Iy(n,t,e,i,r,s,o,a,l,c,u){let d=t.blueprint.slice();return d[Gr]=r,d[$e]=i|4|128|8|64|1024,(c!==null||n&&n[$e]&2048)&&(d[$e]|=2048),Nx(d),d[En]=d[hl]=n,d[Rn]=e,d[zr]=o||n&&n[zr],d[Vt]=a||n&&n[Vt],d[rl]=l||n&&n[rl]||null,d[Kn]=s,d[of]=rL(),d[ou]=u,d[Cx]=c,d[wi]=t.type==2?n[wi]:d,d}function aV(n,t,e){let i=hr(t,n),r=oV(e),s=n[zr].rendererFactory,o=ky(n,Iy(n,r,null,qD(e),i,t,null,s.createRenderer(i,e),null,null,null));return n[t.index]=o}function qD(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function jD(n,t,e,i){if(e===0)return-1;let r=t.length;for(let s=0;s<e;s++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function ky(n,t){return n[au]?n[_C][Fi]=t:n[au]=t,n[_C]=t,t}function y(n=1){WD(Xt(),Qe(),pr()+n,!1)}function WD(n,t,e,i){if(!i)if((t[$e]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Dp(t,s,e)}else{let s=n.preOrderHooks;s!==null&&Ep(t,s,0,e)}Io(e)}var Af=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Af||{});function DA(n,t,e,i){let r=lt(null);try{let[s,o,a]=n.inputs[e],l=null;(o&Af.SignalBased)!==0&&(l=t[s][Ai]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):a!==null&&(i=a.call(t,i)),n.setInput!==null?n.setInput(t,l,i,e,s):Dx(t,l,s,i)}finally{lt(r)}}function zD(n,t,e,i,r){let s=pr(),o=i&2;try{Io(-1),o&&t.length>Fn&&WD(n,t,Fn,!1),St(o?2:0,r),e(i,r)}finally{Io(s),St(o?3:1,r)}}function yf(n,t,e){pV(n,t,e),(e.flags&64)===64&&fV(n,t,e)}function Ny(n,t,e=hr){let i=t.localNames;if(i!==null){let r=t.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?e(t,n):n[o];n[r++]=a}}}function lV(n,t,e,i){let s=i.get(cL,_D)||e===ur.ShadowDom,o=n.selectRootElement(t,s);return cV(o),o}function cV(n){uV(n)}var uV=()=>null;function dV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function vf(n,t,e,i,r,s,o,a){if(!a&&Oy(t,n,e,i,r)){pl(t)&&hV(e,t.index);return}if(t.type&3){let l=hr(t,e);i=dV(i),r=o!=null?o(r,t.value||"",i):r,s.setProperty(l,i,r)}else t.type&12}function hV(n,t){let e=lr(t,n);e[$e]&16||(e[$e]|=64)}function pV(n,t,e){let i=e.directiveStart,r=e.directiveEnd;pl(e)&&aV(t,e,n.data[i+e.componentOffset]),n.firstCreatePass||Wp(e,t);let s=e.initialInputs;for(let o=i;o<r;o++){let a=n.data[o],l=lu(t,n,o,e);if(_l(l,t),s!==null&&AV(t,o-i,l,a,e,s),or(a)){let c=lr(e.index,t);c[Rn]=lu(t,n,o,e)}}}function fV(n,t,e){let i=e.directiveStart,r=e.directiveEnd,s=e.index,o=w4();try{Io(s);for(let a=i;a<r;a++){let l=n.data[a],c=t[a];uA(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&gV(l,c)}}finally{Io(-1),uA(o)}}function gV(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function Py(n,t){let e=n.directiveRegistry,i=null;if(e)for(let r=0;r<e.length;r++){let s=e[r];FD(t,s.selectors,!1)&&(i??=[],or(s)?i.unshift(s):i.push(s))}return i}function mV(n,t,e,i,r,s){let o=hr(n,t);_V(t[Vt],o,s,n.value,e,i,r)}function _V(n,t,e,i,r,s,o){if(s==null)n.removeAttribute(t,r,e);else{let a=o==null?Un(s):o(s,i||"",r);n.setAttribute(t,r,a,e)}}function AV(n,t,e,i,r,s){let o=s[t];if(o!==null)for(let a=0;a<o.length;a+=2){let l=o[a],c=o[a+1];DA(i,e,l,c)}}function yV(n,t){let e=n[rl],i=e?e.get(cr,null):null;i&&i.handleError(t)}function Oy(n,t,e,i,r){let s=n.inputs?.[i],o=n.hostDirectiveInputs?.[i],a=!1;if(o)for(let l=0;l<o.length;l+=2){let c=o[l],u=o[l+1],d=t.data[c];DA(d,e[c],u,r),a=!0}if(s)for(let l of s){let c=e[l],u=t.data[l];DA(u,c,i,r),a=!0}return a}function vV(n,t){let e=lr(t,n),i=e[st];wV(i,e);let r=e[Gr];r!==null&&e[ou]===null&&(e[ou]=wD(r,e[rl])),St(18),Ry(i,e,e[Rn]),St(19,e[Rn])}function wV(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function Ry(n,t,e){fy(t);try{let i=n.viewQuery;i!==null&&bA(1,i,e);let r=n.template;r!==null&&zD(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[Ur]?.finishViewCreation(n),n.staticContentQueries&&bD(n,t),n.staticViewQueries&&bA(2,n.viewQuery,e);let s=n.components;s!==null&&bV(t,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[$e]&=-5,gy()}}function bV(n,t){for(let e=0;e<t.length;e++)vV(n,t[e])}function Fy(n,t,e,i){let r=lt(null);try{let s=t.tView,a=n[$e]&4096?4096:16,l=Iy(n,s,e,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=n[t.index];l[Eo]=c;let u=n[Ur];return u!==null&&(l[Ur]=u.createEmbeddedView(s)),Ry(s,l,e),l}finally{lt(r)}}function Gp(n,t){return!t||t.firstChild===null||cD(n)}var SV;function Ly(n,t){return SV(n,t)}var Hr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Hr||{});function Vy(n){return(n.flags&32)===32}function Qa(n,t,e,i,r){if(i!=null){let s,o=!1;Kr(i)?s=i:Ds(i)&&(o=!0,i=i[Gr]);let a=ar(i);n===0&&e!==null?r==null?VD(t,e,a):Yp(t,e,a,r||null,!0):n===1&&e!==null?Yp(t,e,a,r||null,!0):n===2?nV(t,a,o):n===3&&t.destroyNode(a),s!=null&&PV(t,n,s,e,r)}}function CV(n,t){UD(n,t),t[Gr]=null,t[Kn]=null}function xV(n,t,e,i,r,s){i[Gr]=r,i[Kn]=t,bf(n,i,e,1,r,s)}function UD(n,t){t[zr].changeDetectionScheduler?.notify(9),bf(n,t,t[Vt],2,null,null)}function DV(n){let t=n[au];if(!t)return Y_(n[st],n);for(;t;){let e=null;if(Ds(t))e=t[au];else{let i=t[Gn];i&&(e=i)}if(!e){for(;t&&!t[Fi]&&t!==n;)Ds(t)&&Y_(t[st],t),t=t[En];t===null&&(t=n),Ds(t)&&Y_(t[st],t),e=t&&t[Fi]}t=e}}function By(n,t){let e=n[sl],i=e.indexOf(t);e.splice(i,1)}function qy(n,t){if(fl(t))return;let e=t[Vt];e.destroyNode&&bf(n,t,e,3,null,null),DV(t)}function Y_(n,t){if(fl(t))return;let e=lt(null);try{t[$e]&=-129,t[$e]|=256,t[vi]&&__(t[vi]),MV(n,t),EV(n,t),t[st].type===1&&t[Vt].destroy();let i=t[Eo];if(i!==null&&Kr(t[En])){i!==t[En]&&By(i,t);let r=t[Ur];r!==null&&r.detachView(n)}yA(t)}finally{lt(e)}}function EV(n,t){let e=n.cleanup,i=t[Fp];if(e!==null)for(let o=0;o<e.length-1;o+=2)if(typeof e[o]=="string"){let a=e[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else{let a=i[e[o+1]];e[o].call(a)}i!==null&&(t[Fp]=null);let r=t[xs];if(r!==null){t[xs]=null;for(let o=0;o<r.length;o++){let a=r[o];a()}}let s=t[Lp];if(s!==null){t[Lp]=null;for(let o of s)o.destroy()}}function MV(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=t[e[i]];if(!(r instanceof ko)){let s=e[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],l=s[o+1];St(4,a,l);try{l.call(a)}finally{St(5,a,l)}}else{St(4,r,s);try{s.call(r)}finally{St(5,r,s)}}}}}function HD(n,t,e){return TV(n,t.parent,e)}function TV(n,t,e){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return e[Gr];if(pl(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===ur.None||r===ur.Emulated)return null}return hr(i,e)}function YD(n,t,e){return kV(n,t,e)}function IV(n,t,e){return n.type&40?hr(n,e):null}var kV=IV,BC;function wf(n,t,e,i){let r=HD(n,i,t),s=t[Vt],o=i.parent||t[Kn],a=YD(o,i,t);if(r!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)VC(s,r,e[l],a,!1);else VC(s,r,e,a,!1);BC!==void 0&&BC(s,i,t,e,r)}function tu(n,t){if(t!==null){let e=t.type;if(e&3)return hr(t,n);if(e&4)return EA(-1,n[t.index]);if(e&8){let i=t.child;if(i!==null)return tu(n,i);{let r=n[t.index];return Kr(r)?EA(-1,r):ar(r)}}else{if(e&128)return tu(n,t.next);if(e&32)return Ly(t,n)()||ar(n[t.index]);{let i=GD(n,t);if(i!==null){if(Array.isArray(i))return i[0];let r=To(n[wi]);return tu(r,i)}else return tu(n,t.next)}}}return null}function GD(n,t){if(t!==null){let i=n[wi][Kn],r=t.projection;return i.projection[r]}return null}function EA(n,t){let e=Gn+n+1;if(e<t.length){let i=t[e],r=i[st].firstChild;if(r!==null)return tu(i,r)}return t[Mo]}function jy(n,t,e,i,r,s,o){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=i[e.index],l=e.type;if(o&&t===0&&(a&&_l(ar(a),i),e.flags|=2),!Vy(e))if(l&8)jy(n,t,e.child,i,r,s,!1),Qa(t,n,r,a,s);else if(l&32){let c=Ly(e,i),u;for(;u=c();)Qa(t,n,r,u,s);Qa(t,n,r,a,s)}else l&16?KD(n,t,i,e,r,s):Qa(t,n,r,a,s);e=o?e.projectionNext:e.next}}function bf(n,t,e,i,r,s){jy(e,i,n.firstChild,t,r,s,!1)}function NV(n,t,e){let i=t[Vt],r=HD(n,e,t),s=e.parent||t[Kn],o=YD(s,e,t);KD(i,0,t,e,r,o)}function KD(n,t,e,i,r,s){let o=e[wi],l=o[Kn].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Qa(t,n,r,u,s)}else{let c=l,u=o[En];cD(i)&&(c.flags|=128),jy(n,t,c,u,r,s,!0)}}function PV(n,t,e,i,r){let s=e[Mo],o=ar(e);s!==o&&Qa(t,n,i,s,r);for(let a=Gn;a<e.length;a++){let l=e[a];bf(l[st],l,n,t,i,s)}}function OV(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let s=i.indexOf("-")===-1?void 0:Hr.DashCase;r==null?n.removeStyle(e,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Hr.Important),n.setStyle(e,i,r,s))}}function Kp(n,t,e,i,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let s=t[e.index];s!==null&&i.push(ar(s)),Kr(s)&&RV(s,i);let o=e.type;if(o&8)Kp(n,t,e.child,i);else if(o&32){let a=Ly(e,t),l;for(;l=a();)i.push(l)}else if(o&16){let a=GD(t,e);if(Array.isArray(a))i.push(...a);else{let l=To(t[wi]);Kp(l[st],l,a,i,!0)}}e=r?e.projectionNext:e.next}return i}function RV(n,t){for(let e=Gn;e<n.length;e++){let i=n[e],r=i[st].firstChild;r!==null&&Kp(i[st],i,r,t)}n[Mo]!==n[Gr]&&t.push(n[Mo])}function JD(n){if(n[Za]!==null){for(let t of n[Za])t.impl.addSequence(t);n[Za].length=0}}var XD=[];function FV(n){return n[vi]??LV(n)}function LV(n){let t=XD.pop()??Object.create(BV);return t.lView=n,t}function VV(n){n.lView[vi]!==n&&(n.lView=null,XD.push(n))}var BV=Ie(ne({},Hc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{mu(n.lView)},consumerOnSignalRead(){this.lView[vi]=this}});function qV(n){let t=n[vi]??Object.create(jV);return t.lView=n,t}var jV=Ie(ne({},Hc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=To(n.lView);for(;t&&!$D(t[st]);)t=To(t);t&&Px(t)},consumerOnSignalRead(){this.lView[vi]=this}});function $D(n){return n.type!==2}function QD(n){if(n[Lp]===null)return;let t=!0;for(;t;){let e=!1;for(let i of n[Lp])i.dirty&&(e=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));t=e&&!!(n[$e]&8192)}}var WV=100;function ZD(n,t=!0,e=0){let r=n[zr].rendererFactory,s=!1;s||r.begin?.();try{zV(n,e)}catch(o){throw t&&yV(n,o),o}finally{s||r.end?.()}}function zV(n,t){let e=Lx();try{yC(!0),MA(n,t);let i=0;for(;lf(n);){if(i===WV)throw new De(103,!1);i++,MA(n,1)}}finally{yC(e)}}function UV(n,t,e,i){if(fl(t))return;let r=t[$e],s=!1,o=!1;fy(t);let a=!0,l=null,c=null;s||($D(n)?(c=FV(t),l=jh(c)):d_()===null?(a=!1,c=qV(t),l=jh(c)):t[vi]&&(__(t[vi]),t[vi]=null));try{Nx(t),A4(n.bindingStartIndex),e!==null&&zD(n,t,e,2,i);let u=(r&3)===3;if(!s)if(u){let p=n.preOrderCheckHooks;p!==null&&Dp(t,p,null)}else{let p=n.preOrderHooks;p!==null&&Ep(t,p,0,null),U_(t,0)}if(o||HV(t),QD(t),eE(t,0),n.contentQueries!==null&&bD(n,t),!s)if(u){let p=n.contentCheckHooks;p!==null&&Dp(t,p)}else{let p=n.contentHooks;p!==null&&Ep(t,p,1),U_(t,1)}GV(n,t);let d=n.components;d!==null&&nE(t,d,0);let h=n.viewQuery;if(h!==null&&bA(2,h,i),!s)if(u){let p=n.viewCheckHooks;p!==null&&Dp(t,p)}else{let p=n.viewHooks;p!==null&&Ep(t,p,2),U_(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[z_]){for(let p of t[z_])p();t[z_]=null}s||(JD(t),t[$e]&=-73)}catch(u){throw s||mu(t),u}finally{c!==null&&(g_(c,l),a&&VV(c)),gy()}}function eE(n,t){for(let e=hD(n);e!==null;e=pD(e))for(let i=Gn;i<e.length;i++){let r=e[i];tE(r,t)}}function HV(n){for(let t=hD(n);t!==null;t=pD(t)){if(!(t[$e]&2))continue;let e=t[sl];for(let i=0;i<e.length;i++){let r=e[i];Px(r)}}}function YV(n,t,e){St(18);let i=lr(t,n);tE(i,e),St(19,i[Rn])}function tE(n,t){oy(n)&&MA(n,t)}function MA(n,t){let i=n[st],r=n[$e],s=n[vi],o=!!(t===0&&r&16);if(o||=!!(r&64&&t===0),o||=!!(r&1024),o||=!!(s?.dirty&&m_(s)),o||=!1,s&&(s.dirty=!1),n[$e]&=-9217,o)UV(i,n,i.template,n[Rn]);else if(r&8192){QD(n),eE(n,1);let a=i.components;a!==null&&nE(n,a,1),JD(n)}}function nE(n,t,e){for(let i=0;i<t.length;i++)YV(n,t[i],e)}function GV(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)Io(~r);else{let s=r,o=e[++i],a=e[++i];v4(o,s);let l=t[s];St(24,l),a(2,l),St(25,l)}}}finally{Io(-1)}}function Wy(n,t){let e=Lx()?64:1088;for(n[zr].changeDetectionScheduler?.notify(t);n;){n[$e]|=e;let i=To(n);if(Bp(n)&&!i)return n;n=i}return null}function iE(n,t,e,i){return[n,!0,0,t,null,i,null,e,null,null]}function KV(n,t){let e=Gn+t;if(e<n.length)return n[e]}function zy(n,t,e,i=!0){let r=t[st];if(XV(r,t,n,e),i){let o=EA(e,n),a=t[Vt],l=a.parentNode(n[Mo]);l!==null&&xV(r,n[Kn],a,t,l,o)}let s=t[ou];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function JV(n,t){let e=Jp(n,t);return e!==void 0&&qy(e[st],e),e}function Jp(n,t){if(n.length<=Gn)return;let e=Gn+t,i=n[e];if(i){let r=i[Eo];r!==null&&r!==n&&By(r,i),t>0&&(n[e-1][Fi]=i[Fi]);let s=Op(n,Gn+t);CV(i[st],i);let o=s[Ur];o!==null&&o.detachView(s[st]),i[En]=null,i[Fi]=null,i[$e]&=-129}return i}function XV(n,t,e,i){let r=Gn+i,s=e.length;i>0&&(e[r-1][Fi]=t),i<s-Gn?(t[Fi]=e[r],fx(e,Gn+i,t)):(e.push(t),t[Fi]=null),t[En]=e;let o=t[Eo];o!==null&&e!==o&&rE(o,t);let a=t[Ur];a!==null&&a.insertView(n),lA(t),t[$e]|=128}function rE(n,t){let e=n[sl],i=t[En];if(Ds(i))n[$e]|=2;else{let r=i[En][wi];t[wi]!==r&&(n[$e]|=2)}e===null?n[sl]=[t]:e.push(t)}var cu=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,e=t[st];return Kp(e,t,e.firstChild,[])}constructor(t,e,i=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=i}get context(){return this._lView[Rn]}set context(t){this._lView[Rn]=t}get destroyed(){return fl(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[En];if(Kr(t)){let e=t[Vp],i=e?e.indexOf(this):-1;i>-1&&(Jp(t,i),Op(e,i))}this._attachedToViewContainer=!1}qy(this._lView[st],this._lView)}onDestroy(t){Ox(this._lView,t)}markForCheck(){Wy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[$e]&=-129}reattach(){lA(this._lView),this._lView[$e]|=128}detectChanges(){this._lView[$e]|=1024,ZD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Bp(this._lView),e=this._lView[Eo];e!==null&&!t&&By(e,this._lView),UD(this._lView[st],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new De(902,!1);this._appRef=t;let e=Bp(this._lView),i=this._lView[Eo];i!==null&&!e&&rE(i,this._lView),lA(this._lView)}};var dr=(()=>{class n{static __NG_ELEMENT_ID__=ZV}return n})(),$V=dr,QV=class extends $V{_declarationLView;_declarationTContainer;elementRef;constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,i){let r=Fy(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:i});return new cu(r)}};function ZV(){return Sf(Jn(),Qe())}function Sf(n,t){return n.type&4?new QV(t,n,ml(n,t)):null}function wu(n,t,e,i,r){let s=n.data[t];if(s===null)s=e6(n,t,e,i,r),y4()&&(s.flags|=32);else if(s.type&64){s.type=e,s.value=i,s.attrs=r;let o=m4();s.injectorIndex=o===null?-1:o.injectorIndex}return Po(s,!0),s}function e6(n,t,e,i,r){let s=Fx(),o=uy(),a=o?s:s&&s.parent,l=n.data[t]=n6(n,a,e,t,i,r);return t6(n,l,s,o),l}function t6(n,t,e,i){n.firstChild===null&&(n.firstChild=t),e!==null&&(i?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function n6(n,t,e,i,r,s){let o=t?t.injectorIndex:-1,a=0;return Rx()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var uhe=new RegExp(`^(\\d+)*(${lL}|${aL})*(.*)`);var i6=()=>null;function Xp(n,t){return i6(n,t)}var r6=class{},sE=class{},TA=class{resolveComponentFactory(t){throw Error(`No component factory found for ${Yn(t)}.`)}},Cf=class{static NULL=new TA},cl=class{},Ms=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>s6()}return n})();function s6(){let n=Qe(),t=Jn(),e=lr(t.index,n);return(Ds(e)?e:n)[Vt]}var o6=(()=>{class n{static \u0275prov=ce({token:n,providedIn:"root",factory:()=>null})}return n})();var G_={},IA=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=rf(i);let r=this.injector.get(t,G_,i);return r!==G_||e===G_?r:this.parentInjector.get(t,e,i)}};function kA(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,s=0;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];if(typeof a=="number")s=a;else if(s==1)r=eA(r,a);else if(s==2){let l=a,c=t[++o];i=eA(i,l+": "+c+";")}}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}function ye(n,t=nt.Default){let e=Qe();if(e===null)return ae(n,t);let i=Jn();return Qx(i,e,Pn(n),t)}function Uy(n,t,e,i,r){let s=i===null?null:{"":-1},o=r(n,e);if(o!==null){let a,l=null,c=null,u=l6(o);u===null?a=o:[a,l,c]=u,d6(n,t,e,a,s,l,c)}s!==null&&i!==null&&a6(e,i,s)}function a6(n,t,e){let i=n.localNames=[];for(let r=0;r<t.length;r+=2){let s=e[t[r+1]];if(s==null)throw new De(-301,!1);i.push(t[r],s)}}function l6(n){let t=null,e=!1;for(let o=0;o<n.length;o++){let a=n[o];if(o===0&&or(a)&&(t=a),a.findHostDirectiveDefs!==null){e=!0;break}}if(!e)return null;let i=null,r=null,s=null;for(let o of n)o.findHostDirectiveDefs!==null&&(i??=[],r??=new Map,s??=new Map,c6(o,i,s,r)),o===t&&(i??=[],i.push(o));return i!==null?(i.push(...t===null?n:n.slice(1)),[i,r,s]):null}function c6(n,t,e,i){let r=t.length;n.findHostDirectiveDefs(n,t,i),e.set(n,[r,t.length-1])}function u6(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function d6(n,t,e,i,r,s,o){let a=i.length,l=!1;for(let h=0;h<a;h++){let p=i[h];!l&&or(p)&&(l=!0,u6(n,e,h)),hA(Wp(e,t),n,p.type)}_6(e,n.data.length,a);for(let h=0;h<a;h++){let p=i[h];p.providersResolver&&p.providersResolver(p)}let c=!1,u=!1,d=jD(n,t,a,null);a>0&&(e.directiveToIndex=new Map);for(let h=0;h<a;h++){let p=i[h];if(e.mergedAttrs=al(e.mergedAttrs,p.hostAttrs),p6(n,e,t,d,p),m6(d,p,r),o!==null&&o.has(p)){let[A,v]=o.get(p);e.directiveToIndex.set(p.type,[d,A+e.directiveStart,v+e.directiveStart])}else(s===null||!s.has(p))&&e.directiveToIndex.set(p.type,d);p.contentQueries!==null&&(e.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(e.flags|=64);let _=p.type.prototype;!c&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),c=!0),!u&&(_.ngOnChanges||_.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),u=!0),d++}h6(n,e,s)}function h6(n,t,e){for(let i=t.directiveStart;i<t.directiveEnd;i++){let r=n.data[i];if(e===null||!e.has(r))qC(0,t,r,i),qC(1,t,r,i),WC(t,i,!1);else{let s=e.get(r);jC(0,t,s,i),jC(1,t,s,i),WC(t,i,!0)}}}function qC(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let s in r)if(r.hasOwnProperty(s)){let o;n===0?o=t.inputs??={}:o=t.outputs??={},o[s]??=[],o[s].push(i),oE(t,s)}}function jC(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let s in r)if(r.hasOwnProperty(s)){let o=r[s],a;n===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[o]??=[],a[o].push(i,s),oE(t,o)}}function oE(n,t){t==="class"?n.flags|=8:t==="style"&&(n.flags|=16)}function WC(n,t,e){let{attrs:i,inputs:r,hostDirectiveInputs:s}=n;if(i===null||!e&&r===null||e&&s===null||My(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<i.length;){let l=i[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!e&&r.hasOwnProperty(l)){let c=r[l];for(let u of c)if(u===t){o??=[],o.push(l,i[a+1]);break}}else if(e&&s.hasOwnProperty(l)){let c=s[l];for(let u=0;u<c.length;u+=2)if(c[u]===t){o??=[],o.push(c[u+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function p6(n,t,e,i,r){n.data[i]=r;let s=r.factory||(r.factory=tl(r.type,!0)),o=new ko(s,or(r),ye);n.blueprint[i]=o,e[i]=o,f6(n,t,i,jD(n,e,r.hostVars,cn),r)}function f6(n,t,e,i,r){let s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~t.index;g6(o)!=a&&o.push(a),o.push(e,i,s)}}function g6(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function m6(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;or(t)&&(e[""]=n)}}function _6(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function aE(n,t,e,i,r,s,o,a){let l=t.consts,c=ol(l,o),u=wu(t,n,2,i,c);return s&&Uy(t,e,u,ol(l,a),r),u.mergedAttrs=al(u.mergedAttrs,u.attrs),u.attrs!==null&&kA(u,u.attrs,!1),u.mergedAttrs!==null&&kA(u,u.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,u),u}function lE(n,t){my(n,t),ry(t)&&n.queries.elementEnd(t)}var $p=class extends Cf{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=nl(t);return new uu(e,this.ngModule)}};function A6(n){return Object.keys(n).map(t=>{let[e,i,r]=n[t],s={propName:e,templateName:t,isSignal:(i&Af.SignalBased)!==0};return r&&(s.transform=r),s})}function y6(n){return Object.keys(n).map(t=>({propName:n[t],templateName:t}))}function v6(n,t,e){let i=t instanceof On?t:t?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new IA(e,i):e}function w6(n){let t=n.get(cl,null);if(t===null)throw new De(407,!1);let e=n.get(o6,null),i=n.get(ll,null);return{rendererFactory:t,sanitizer:e,changeDetectionScheduler:i}}function b6(n,t){let e=(n.selectors[0][0]||"div").toLowerCase();return LD(t,e,e==="svg"?Ix:e==="math"?r4:null)}var uu=class extends sE{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=A6(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=y6(this.componentDef.outputs),this.cachedOutputs}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=$L(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,i,r){St(22);let s=lt(null);try{let o=this.componentDef,a=i?["ng-version","19.2.14"]:QL(this.componentDef.selectors[0]),l=Ty(0,null,null,1,0,null,null,null,null,[a],null),c=v6(o,r||this.ngModule,t),u=w6(c),d=u.rendererFactory.createRenderer(null,o),h=i?lV(d,i,o.encapsulation,c):b6(o,d),p=Iy(null,l,null,512|qD(o),null,null,u,d,c,null,wD(h,c,!0));p[Fn]=h,fy(p);let _=null;try{let A=aE(Fn,l,p,"#host",()=>[this.componentDef],!0,0);h&&(BD(d,h,A),_l(h,p)),yf(l,p,A),Dy(l,A,p),lE(l,A),e!==void 0&&S6(A,this.ngContentSelectors,e),_=lr(A.index,p),p[Rn]=_[Rn],Ry(l,p,null)}catch(A){throw _!==null&&yA(_),yA(p),A}finally{St(23),gy()}return new NA(this.componentType,p)}finally{lt(s)}}},NA=class extends r6{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e){super(),this._rootLView=e,this._tNode=sy(e[st],Fn),this.location=ml(this._tNode,e),this.instance=lr(this._tNode.index,e)[Rn],this.hostView=this.changeDetectorRef=new cu(e,void 0,!1),this.componentType=t}setInput(t,e){let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let r=this._rootLView,s=Oy(i,r[st],r,t,e);this.previousInputValues.set(t,e);let o=lr(i.index,r);Wy(o,1)}get injector(){return new xo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function S6(n,t,e){let i=n.projection=[];for(let r=0;r<t.length;r++){let s=e[r];i.push(s!=null&&s.length?Array.from(s):null)}}var qi=(()=>{class n{static __NG_ELEMENT_ID__=C6}return n})();function C6(){let n=Jn();return uE(n,Qe())}var x6=qi,cE=class extends x6{_lContainer;_hostTNode;_hostLView;constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return ml(this._hostTNode,this._hostLView)}get injector(){return new xo(this._hostTNode,this._hostLView)}get parentInjector(){let t=_y(this._hostTNode,this._hostLView);if(Yx(t)){let e=jp(t,this._hostLView),i=qp(t),r=e[st].data[i+8];return new xo(r,e)}else return new xo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=zC(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Gn}createEmbeddedView(t,e,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=Xp(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},s,o);return this.insertImpl(a,r,Gp(this._hostTNode,o)),a}createComponent(t,e,i,r,s){let o=t&&!e4(t),a;if(o)a=e;else{let _=e||{};a=_.index,i=_.injector,r=_.projectableNodes,s=_.environmentInjector||_.ngModuleRef}let l=o?t:new uu(nl(t)),c=i||this.parentInjector;if(!s&&l.ngModule==null){let A=(o?c:this.parentInjector).get(On,null);A&&(s=A)}let u=nl(l.componentType??{}),d=Xp(this._lContainer,u?.id??null),h=d?.firstChild??null,p=l.create(c,r,h,s);return this.insertImpl(p.hostView,a,Gp(this._hostTNode,d)),p}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,i){let r=t._lView;if(a4(r)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=r[En],c=new cE(l,l[Kn],l[En]);c.detach(c.indexOf(t))}}let s=this._adjustIndex(e),o=this._lContainer;return zy(o,r,s,i),t.attachToViewContainerRef(),fx(K_(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=zC(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),i=Jp(this._lContainer,e);i&&(Op(K_(this._lContainer),e),qy(i[st],i))}detach(t){let e=this._adjustIndex(t,-1),i=Jp(this._lContainer,e);return i&&Op(K_(this._lContainer),e)!=null?new cu(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function zC(n){return n[Vp]}function K_(n){return n[Vp]||(n[Vp]=[])}function uE(n,t){let e,i=t[n.index];return Kr(i)?e=i:(e=iE(i,t,null,n),t[n.index]=e,ky(t,e)),E6(e,t,n,i),new cE(e,n,t)}function D6(n,t){let e=n[Vt],i=e.createComment(""),r=hr(t,n),s=e.parentNode(r);return Yp(e,s,i,e.nextSibling(r),!1),i}var E6=I6,M6=()=>!1;function T6(n,t,e){return M6(n,t,e)}function I6(n,t,e,i){if(n[Mo])return;let r;e.type&8?r=ar(i):r=D6(t,e),n[Mo]=r}var PA=class n{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},OA=class n{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let i=t.contentQueries!==null?t.contentQueries[0]:e.length,r=[];for(let s=0;s<i;s++){let o=e.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)Hy(t,e).matches!==null&&this.queries[e].setDirty()}},RA=class{flags;read;predicate;constructor(t,e,i=null){this.flags=e,this.read=i,typeof t=="string"?this.predicate=V6(t):this.predicate=t}},FA=class n{queries;constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){let r=e!==null?e.length:0,s=this.getByIndex(i).embeddedTView(t,r);s&&(s.indexInDeclarationView=i,e!==null?e.push(s):e=[s])}return e!==null?new n(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},LA=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,e=-1){this.metadata=t,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==e;)i=i.parent;return e===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(t,e,k6(e,s)),this.matchTNodeWithReadOption(t,e,Mp(e,t,s,!1,!1))}else i===dr?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Mp(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===yn||r===qi||r===dr&&e.type&4)this.addMatch(e.index,-2);else{let s=Mp(e,t,r,!1,!1);s!==null&&this.addMatch(e.index,s)}else this.addMatch(e.index,i)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function k6(n,t){let e=n.localNames;if(e!==null){for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1]}return null}function N6(n,t){return n.type&11?ml(n,t):n.type&4?Sf(n,t):null}function P6(n,t,e,i){return e===-1?N6(t,n):e===-2?O6(n,t,i):lu(n,n[st],e,t)}function O6(n,t,e){if(e===yn)return ml(t,n);if(e===dr)return Sf(t,n);if(e===qi)return uE(t,n)}function dE(n,t,e,i){let r=t[Ur].queries[i];if(r.matches===null){let s=n.data,o=e.matches,a=[];for(let l=0;o!==null&&l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let u=s[c];a.push(P6(t,u,o[l+1],e.metadata.read))}}r.matches=a}return r.matches}function VA(n,t,e,i){let r=n.queries.getByIndex(e),s=r.matches;if(s!==null){let o=dE(n,t,r,e);for(let a=0;a<s.length;a+=2){let l=s[a];if(l>0)i.push(o[a/2]);else{let c=s[a+1],u=t[-l];for(let d=Gn;d<u.length;d++){let h=u[d];h[Eo]===h[En]&&VA(h[st],h,c,i)}if(u[sl]!==null){let d=u[sl];for(let h=0;h<d.length;h++){let p=d[h];VA(p[st],p,c,i)}}}}}return i}function R6(n,t){return n[Ur].queries[t].queryList}function F6(n,t,e){let i=new AA((e&4)===4);return u4(n,t,i,i.destroy),(t[Ur]??=new OA).queries.push(new PA(i))-1}function L6(n,t,e){let i=Xt();return i.firstCreatePass&&(B6(i,new RA(n,t,e),-1),(t&2)===2&&(i.staticViewQueries=!0)),F6(i,Qe(),t)}function V6(n){return n.split(",").map(t=>t.trim())}function B6(n,t,e){n.queries===null&&(n.queries=new FA),n.queries.track(new LA(t,e))}function Hy(n,t){return n.queries.getByIndex(t)}function q6(n,t){let e=n[st],i=Hy(e,t);return i.crossesNgTemplate?VA(e,n,t,[]):dE(e,n,i,t)}var ul=class{},Yy=class{};var BA=class extends ul{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new $p(this);constructor(t,e,i,r=!0){super(),this.ngModuleType=t,this._parent=e;let s=_x(t);this._bootstrapComponents=OD(s.bootstrap),this._r3Injector=tD(t,e,[{provide:ul,useValue:this},{provide:Cf,useValue:this.componentFactoryResolver},...i],Yn(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},qA=class extends Yy{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new BA(this.moduleType,t,[])}};var Qp=class extends ul{injector;componentFactoryResolver=new $p(this);instance=null;constructor(t){super();let e=new su([...t.providers,{provide:ul,useValue:this},{provide:Cf,useValue:this.componentFactoryResolver}],t.parent||iy(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function xf(n,t,e=null){return new Qp({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var j6=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=Ax(!1,e.type),r=i.length>0?xf([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ce({token:n,providedIn:"environment",factory:()=>new n(ae(On))})}return n})();function ci(n){return pu(()=>{let t=hE(n),e=Ie(ne({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===uD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?r=>r.get(j6).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ur.Emulated,styles:n.styles||Hn,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&vl("NgStandalone"),pE(e);let i=n.dependencies;return e.directiveDefs=UC(i,!1),e.pipeDefs=UC(i,!0),e.id=Y6(e),e})}function W6(n){return nl(n)||WF(n)}function z6(n){return n!==null}function ji(n){return pu(()=>({type:n.type,bootstrap:n.bootstrap||Hn,declarations:n.declarations||Hn,imports:n.imports||Hn,exports:n.exports||Hn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function U6(n,t){if(n==null)return Do;let e={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s,o,a,l;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s,l=r[3]||null):(s=r,o=r,a=Af.None,l=null),e[s]=[i,a,l],t[s]=o}return e}function H6(n){if(n==null)return Do;let t={};for(let e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function It(n){return pu(()=>{let t=hE(n);return pE(t),t})}function hE(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputConfig:n.inputs||Do,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Hn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:U6(n.inputs,t),outputs:H6(n.outputs),debugInfo:null}}function pE(n){n.features?.forEach(t=>t(n))}function UC(n,t){if(!n)return null;let e=t?zF:W6;return()=>(typeof n=="function"?n():n).map(i=>e(i)).filter(z6)}function Y6(n){let t=0,e=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of i.join("|"))t=Math.imul(31,t)+s.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function G6(n){return Object.getPrototypeOf(n.prototype).constructor}function ui(n){let t=G6(n.type),e=!0,i=[n];for(;t;){let r;if(or(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new De(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);let o=n;o.inputs=J_(n.inputs),o.declaredInputs=J_(n.declaredInputs),o.outputs=J_(n.outputs);let a=r.hostBindings;a&&Q6(n,a);let l=r.viewQuery,c=r.contentQueries;if(l&&X6(n,l),c&&$6(n,c),K6(n,r),AF(n.outputs,r.outputs),or(r)&&r.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===ui&&(e=!1)}}t=Object.getPrototypeOf(t)}J6(i)}function K6(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let i=t.inputs[e];i!==void 0&&(n.inputs[e]=i,n.declaredInputs[e]=t.declaredInputs[e])}}function J6(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=al(r.hostAttrs,e=al(e,r.hostAttrs))}}function J_(n){return n===Do?{}:n===Hn?[]:n}function X6(n,t){let e=n.viewQuery;e?n.viewQuery=(i,r)=>{t(i,r),e(i,r)}:n.viewQuery=t}function $6(n,t){let e=n.contentQueries;e?n.contentQueries=(i,r,s)=>{t(i,r,s),e(i,r,s)}:n.contentQueries=t}function Q6(n,t){let e=n.hostBindings;e?n.hostBindings=(i,r)=>{t(i,r),e(i,r)}:n.hostBindings=t}function fE(n){return e8(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function Z6(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),i;for(;!(i=e.next()).done;)t(i.value)}}function e8(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function bu(n,t,e){return n[t]=e}function gE(n,t){return n[t]}function ai(n,t,e){let i=n[t];return Object.is(i,e)?!1:(n[t]=e,!0)}function du(n,t,e,i){let r=ai(n,t,e);return ai(n,t+1,i)||r}function mE(n,t,e,i,r){let s=du(n,t,e,i);return ai(n,t+2,r)||s}function _E(n,t,e,i,r,s){let o=du(n,t,e,i);return du(n,t+2,r,s)||o}function t8(n,t,e,i,r,s,o,a,l){let c=t.consts,u=wu(t,n,4,o||null,a||null);cy()&&Uy(t,e,u,ol(c,l),Py),u.mergedAttrs=al(u.mergedAttrs,u.attrs),my(t,u);let d=u.tView=Ty(2,u,i,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return t.queries!==null&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}function AE(n,t,e,i,r,s,o,a,l,c){let u=e+Fn,d=t.firstCreatePass?t8(u,t,n,i,r,s,o,a,l):t.data[u];Po(d,!1);let h=n8(t,n,d,e);df()&&wf(t,n,h,d),_l(h,n);let p=iE(h,n,h,d);return n[u]=p,ky(n,p),T6(p,d,n),af(d)&&yf(t,n,d),l!=null&&Ny(n,d,c),d}function ee(n,t,e,i,r,s,o,a){let l=Qe(),c=Xt(),u=ol(c.consts,s);return AE(l,c,n,t,e,i,r,u,o,a),ee}var n8=i8;function i8(n,t,e,i){return hf(!0),t[Vt].createComment("")}var yE=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var vE=new Se("");var r8=(()=>{class n{static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new jA})}return n})(),jA=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}remove(t){let e=t.zone,i=this.queues.get(e);i.has(t)&&(i.delete(t),this.queuedEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let i=this.queues.get(e);i.has(t)||(this.queuedEffectCount++,i.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,e]of this.queues)t===null?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(let e of t)t.delete(e),this.queuedEffectCount--,e.run()}};function Ro(n){return!!n&&typeof n.then=="function"}function wE(n){return!!n&&typeof n.subscribe=="function"}var s8=new Se("");var bE=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i});appInits=oe(s8,{optional:!0})??[];injector=oe(Ln);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let s=li(this.injector,r);if(Ro(s))e.push(s);else if(wE(s)){let o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});e.push(o)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Gy=new Se("");function o8(){y_(()=>{throw new De(600,!1)})}function a8(n){return n.isBoundToModule}var l8=10;var Yr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=oe(X4);afterRenderManager=oe(yD);zonelessEnabled=oe(Ay);rootEffectScheduler=oe(r8);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new ct;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=oe(Es).hasPendingTasks.pipe(ze(e=>!e));constructor(){oe(yl,{optional:!0})}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{e.unsubscribe()})}_injector=oe(On);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,i){return this.bootstrapImpl(e,i)}bootstrapImpl(e,i,r=Ln.NULL){St(10);let s=e instanceof sE;if(!this._injector.get(bE).done){let p="";throw new De(405,p)}let a;s?a=e:a=this._injector.get(Cf).resolveComponentFactory(e),this.componentTypes.push(a.componentType);let l=a8(a)?void 0:this._injector.get(ul),c=i||a.selector,u=a.create(r,[],c,l),d=u.location.nativeElement,h=u.injector.get(vE,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Tp(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),St(11,u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){St(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Cy.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new De(101,!1);let e=lt(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,lt(e),this.afterTick.next(),St(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(cl,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<l8;)St(14),this.synchronizeOnce(),St(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let e=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:r}of this.allViews)c8(i,r,e,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>lf(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;Tp(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Gy,[]).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Tp(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new De(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Tp(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function c8(n,t,e,i){if(!e&&!lf(n))return;ZD(n,t,e&&!i?0:1)}function Df(n,t,e,i){let r=Qe(),s=gl();if(ai(r,s,t)){let o=Xt(),a=yu();mV(a,r,n,t,e,i)}return Df}function SE(n,t,e,i){return ai(n,gl(),e)?t+Un(e)+i:cn}function u8(n,t,e,i,r,s){let o=hy(),a=du(n,o,e,r);return Au(2),a?t+Un(e)+i+Un(r)+s:cn}function d8(n,t,e,i,r,s,o,a){let l=hy(),c=mE(n,l,e,r,o);return Au(3),c?t+Un(e)+i+Un(r)+s+Un(o)+a:cn}function h8(n,t,e,i,r,s,o,a,l,c){let u=hy(),d=_E(n,u,e,r,o,l);return Au(4),d?t+Un(e)+i+Un(r)+s+Un(o)+a+Un(l)+c:cn}function Cp(n,t){return n<<17|t<<2}function No(n){return n>>17&32767}function p8(n){return(n&2)==2}function f8(n,t){return n&131071|t<<17}function WA(n){return n|2}function dl(n){return(n&131068)>>2}function X_(n,t){return n&-131069|t<<2}function g8(n){return(n&1)===1}function zA(n){return n|1}function m8(n,t,e,i,r,s){let o=s?t.classBindings:t.styleBindings,a=No(o),l=dl(o);n[i]=e;let c=!1,u;if(Array.isArray(e)){let d=e;u=d[1],(u===null||fu(d,u)>0)&&(c=!0)}else u=e;if(r)if(l!==0){let h=No(n[a+1]);n[i+1]=Cp(h,a),h!==0&&(n[h+1]=X_(n[h+1],i)),n[a+1]=f8(n[a+1],i)}else n[i+1]=Cp(a,0),a!==0&&(n[a+1]=X_(n[a+1],i)),a=i;else n[i+1]=Cp(l,0),a===0?a=i:n[l+1]=X_(n[l+1],i),l=i;c&&(n[i+1]=WA(n[i+1])),HC(n,u,i,!0),HC(n,u,i,!1),_8(t,u,n,i,s),o=Cp(a,l),s?t.classBindings=o:t.styleBindings=o}function _8(n,t,e,i,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof t=="string"&&fu(s,t)>=0&&(e[i+1]=zA(e[i+1]))}function HC(n,t,e,i){let r=n[e+1],s=t===null,o=i?No(r):dl(r),a=!1;for(;o!==0&&(a===!1||s);){let l=n[o],c=n[o+1];A8(l,t)&&(a=!0,n[o+1]=i?zA(c):WA(c)),o=i?No(c):dl(c)}a&&(n[e+1]=i?WA(r):zA(r))}function A8(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?fu(n,t)>=0:!1}var Ri={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function y8(n){return n.substring(Ri.key,Ri.keyEnd)}function v8(n){return w8(n),CE(n,xE(n,0,Ri.textEnd))}function CE(n,t){let e=Ri.textEnd;return e===t?-1:(t=Ri.keyEnd=b8(n,Ri.key=t,e),xE(n,t,e))}function w8(n){Ri.key=0,Ri.keyEnd=0,Ri.value=0,Ri.valueEnd=0,Ri.textEnd=n.length}function xE(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function b8(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function L(n,t,e){let i=Qe(),r=gl();if(ai(i,r,t)){let s=Xt(),o=yu();vf(s,o,i,n,t,i[Vt],e,!1)}return L}function UA(n,t,e,i,r){Oy(t,n,e,r?"class":"style",i)}function Wi(n,t){return C8(n,t,null,!0),Wi}function Ky(n){x8(k8,S8,n,!0)}function S8(n,t){for(let e=v8(t);e>=0;e=CE(t,e))ty(n,y8(t),!0)}function C8(n,t,e,i){let r=Qe(),s=Xt(),o=Au(2);if(s.firstUpdatePass&&EE(s,n,o,i),t!==cn&&ai(r,o,t)){let a=s.data[pr()];ME(s,a,r,r[Vt],n,r[o+1]=P8(t,e),i,o)}}function x8(n,t,e,i){let r=Xt(),s=Au(2);r.firstUpdatePass&&EE(r,null,s,i);let o=Qe();if(e!==cn&&ai(o,s,e)){let a=r.data[pr()];if(TE(a,i)&&!DE(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(e=eA(l,e||"")),UA(r,a,o,e,i)}else N8(r,a,o,o[Vt],o[s+1],o[s+1]=I8(n,t,e),i,s)}}function DE(n,t){return t>=n.expandoStartIndex}function EE(n,t,e,i){let r=n.data;if(r[e+1]===null){let s=r[pr()],o=DE(n,e);TE(s,i)&&t===null&&!o&&(t=!1),t=D8(r,s,t,i),m8(r,s,t,e,o,i)}}function D8(n,t,e,i){let r=b4(n),s=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(e=$_(null,n,t,e,i),e=hu(e,t.attrs,i),s=null);else{let o=t.directiveStylingLast;if(o===-1||n[o]!==r)if(e=$_(r,n,t,e,i),s===null){let l=E8(n,t,i);l!==void 0&&Array.isArray(l)&&(l=$_(null,n,t,l[1],i),l=hu(l,t.attrs,i),M8(n,t,i,l))}else s=T8(n,t,i)}return s!==void 0&&(i?t.residualClasses=s:t.residualStyles=s),e}function E8(n,t,e){let i=e?t.classBindings:t.styleBindings;if(dl(i)!==0)return n[No(i)]}function M8(n,t,e,i){let r=e?t.classBindings:t.styleBindings;n[No(r)]=i}function T8(n,t,e){let i,r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++){let o=n[s].hostAttrs;i=hu(i,o,e)}return hu(i,t.attrs,e)}function $_(n,t,e,i,r){let s=null,o=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<o&&(s=t[a],i=hu(i,s.hostAttrs,r),s!==n);)a++;return n!==null&&(e.directiveStylingLast=a),i}function hu(n,t,e){let i=e?1:2,r=-1;if(t!==null)for(let s=0;s<t.length;s++){let o=t[s];typeof o=="number"?r=o:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),ty(n,o,e?!0:t[++s]))}return n===void 0?null:n}function I8(n,t,e){if(e==null||e==="")return Hn;let i=[],r=mf(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else typeof r=="string"&&t(i,r);return i}function k8(n,t,e){let i=String(t);i!==""&&!i.includes(" ")&&ty(n,i,e)}function N8(n,t,e,i,r,s,o,a){r===cn&&(r=Hn);let l=0,c=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let h=l<r.length?r[l+1]:void 0,p=c<s.length?s[c+1]:void 0,_=null,A;u===d?(l+=2,c+=2,h!==p&&(_=d,A=p)):d===null||u!==null&&u<d?(l+=2,_=u):(c+=2,_=d,A=p),_!==null&&ME(n,t,e,i,_,A,o,a),u=l<r.length?r[l]:null,d=c<s.length?s[c]:null}}function ME(n,t,e,i,r,s,o,a){if(!(t.type&3))return;let l=n.data,c=l[a+1],u=g8(c)?YC(l,t,e,r,dl(c),o):void 0;if(!Zp(u)){Zp(s)||p8(c)&&(s=YC(l,null,e,r,a,o));let d=kx(pr(),e);OV(i,o,d,r,s)}}function YC(n,t,e,i,r,s){let o=t===null,a;for(;r>0;){let l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=e[r+1];h===cn&&(h=d?Hn:void 0);let p=d?j_(h,i):u===i?h:void 0;if(c&&!Zp(p)&&(p=j_(l,i)),Zp(p)&&(a=p,o))return a;let _=n[r+1];r=o?No(_):dl(_)}if(t!==null){let l=s?t.residualClasses:t.residualStyles;l!=null&&(a=j_(l,i))}return a}function Zp(n){return n!==void 0}function P8(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=Yn(mf(n)))),n}function TE(n,t){return(n.flags&(t?8:16))!==0}function Jy(n,t){vl("NgControlFlow");let e=Qe(),i=gl(),r=e[i]!==cn?e[i]:-1,s=r!==-1?GC(e,Fn+r):void 0,o=0;if(ai(e,i,n)){let a=lt(null);try{if(s!==void 0&&JV(s,o),n!==-1){let l=Fn+n,c=GC(e,l),u=O8(e[st],l),d=Xp(c,u.tView.ssrId),h=Fy(e,u,t,{dehydratedView:d});zy(c,h,o,Gp(u,d))}}finally{lt(a)}}else if(s!==void 0){let a=KV(s,o);a!==void 0&&(a[Rn]=t)}}function GC(n,t){return n[t]}function O8(n,t){return sy(n,t)}function g(n,t,e,i){let r=Qe(),s=Xt(),o=Fn+n,a=r[Vt],l=s.firstCreatePass?aE(o,s,r,t,Py,cy(),e,i):s.data[o],c=R8(s,r,l,a,t,n);r[o]=c;let u=af(l);return Po(l,!0),BD(a,c,l),!Vy(l)&&df()&&wf(s,r,c,l),(d4()===0||u)&&_l(c,r),h4(),u&&(yf(s,r,l),Dy(s,l,r)),i!==null&&Ny(r,l),g}function m(){let n=Jn();uy()?dy():(n=n.parent,Po(n,!1));let t=n;f4(t)&&g4(),p4();let e=Xt();return e.firstCreatePass&&lE(e,t),t.classesWithoutHost!=null&&T4(t)&&UA(e,t,Qe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&I4(t)&&UA(e,t,Qe(),t.stylesWithoutHost,!1),m}function Be(n,t,e,i){return g(n,t,e,i),m(),Be}var R8=(n,t,e,i,r,s)=>(hf(!0),LD(i,r,D4()));function F8(n,t,e,i,r){let s=t.consts,o=ol(s,i),a=wu(t,n,8,"ng-container",o);o!==null&&kA(a,o,!0);let l=ol(s,r);return cy()&&Uy(t,e,a,l,Py),a.mergedAttrs=al(a.mergedAttrs,a.attrs),t.queries!==null&&t.queries.elementStart(t,a),a}function Ef(n,t,e){let i=Qe(),r=Xt(),s=n+Fn,o=r.firstCreatePass?F8(s,r,i,t,e):r.data[s];Po(o,!0);let a=L8(r,i,o,n);return i[s]=a,df()&&wf(r,i,a,o),_l(a,i),af(o)&&(yf(r,i,o),Dy(r,o,i)),e!=null&&Ny(i,o),Ef}function Mf(){let n=Jn(),t=Xt();return uy()?dy():(n=n.parent,Po(n,!1)),t.firstCreatePass&&(my(t,n),ry(n)&&t.queries.elementEnd(n)),Mf}var L8=(n,t,e,i)=>(hf(!0),tV(t[Vt],""));function pe(){return Qe()}function Xy(n,t,e){let i=Qe(),r=gl();if(ai(i,r,t)){let s=Xt(),o=yu();vf(s,o,i,n,t,i[Vt],e,!0)}return Xy}var ef="en-US";var V8=ef;function B8(n){typeof n=="string"&&(V8=n.toLowerCase().replace(/_/g,"-"))}function KC(n,t,e){return function i(r){if(r===Function)return e;let s=pl(n)?lr(n.index,t):t;Wy(s,5);let o=t[Rn],a=JC(t,o,e,r),l=i.__ngNextListenerFn__;for(;l;)a=JC(t,o,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function JC(n,t,e,i){let r=lt(null);try{return St(6,t,e),e(i)!==!1}catch(s){return q8(n,s),!1}finally{St(7,t,e),lt(r)}}function q8(n,t){let e=n[rl],i=e?e.get(cr,null):null;i&&i.handleError(t)}function XC(n,t,e,i,r,s){let o=t[e],a=t[st],c=a.data[e].outputs[i],u=o[c],d=a.firstCreatePass?ly(a):null,h=ay(t),p=u.subscribe(s),_=h.length;h.push(s,p),d&&d.push(r,n.index,_,-(_+1))}function q(n,t,e,i){let r=Qe(),s=Xt(),o=Jn();return IE(s,r,r[Vt],o,n,t,i),q}function j8(n,t,e,i){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===e&&r[s+1]===i){let a=t[Fp],l=r[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function IE(n,t,e,i,r,s,o){let a=af(i),c=n.firstCreatePass?ly(n):null,u=ay(t),d=!0;if(i.type&3||o){let h=hr(i,t),p=o?o(h):h,_=u.length,A=o?b=>o(ar(b[i.index])):i.index,v=null;if(!o&&a&&(v=j8(n,t,r,i.index)),v!==null){let b=v.__ngLastListenerFn__||v;b.__ngNextListenerFn__=s,v.__ngLastListenerFn__=s,d=!1}else{s=KC(i,t,s),gL(t,p,r,s);let b=e.listen(p,r,s);u.push(s,b),c&&c.push(r,A,_,_+1)}}else s=KC(i,t,s);if(d){let h=i.outputs?.[r],p=i.hostDirectiveOutputs?.[r];if(p&&p.length)for(let _=0;_<p.length;_+=2){let A=p[_],v=p[_+1];XC(i,t,A,v,r,s)}if(h&&h.length)for(let _ of h)XC(i,t,_,r,r,s)}}function R(n=1){return C4(n)}function W8(n,t){let e=null,i=YL(n);for(let r=0;r<t.length;r++){let s=t[r];if(s==="*"){e=r;continue}if(i===null?FD(n,s,!0):JL(i,s))return r}return e}function $y(n){let t=Qe()[wi][Kn];if(!t.projection){let e=n?n.length:1,i=t.projection=BF(e,null),r=i.slice(),s=t.child;for(;s!==null;){if(s.type!==128){let o=n?W8(s,n):0;o!==null&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s)}s=s.next}}}function Qy(n,t=0,e,i,r,s){let o=Qe(),a=Xt(),l=i?n+1:null;l!==null&&AE(o,a,l,i,r,s,null,e);let c=wu(a,Fn+n,16,null,e||null);c.projection===null&&(c.projection=t),dy();let d=!o[ou]||Rx();o[wi][Kn].projection[c.projection]===null&&l!==null?z8(o,a,l):d&&!Vy(c)&&NV(a,o,c)}function z8(n,t,e){let i=Fn+e,r=t.data[i],s=n[i],o=Xp(s,r.tView.ssrId),a=Fy(n,r,void 0,{dehydratedView:o});zy(s,a,0,Gp(r,o))}function Gt(n,t,e){return Vn(n,"",t,"",e),Gt}function Vn(n,t,e,i,r){let s=Qe(),o=SE(s,t,e,i);if(o!==cn){let a=Xt(),l=yu();vf(a,l,s,n,o,s[Vt],r,!1)}return Vn}function Zy(n,t,e){L6(n,t,e)}function e1(n){let t=Qe(),e=Xt(),i=Vx();py(i+1);let r=Hy(e,i);if(n.dirty&&o4(t)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let s=q6(t,i);n.reset(s,Z4),n.notifyOnChanges()}return!0}return!1}function t1(){return R6(Qe(),Vx())}function Xn(n){let t=_4();return s4(t,Fn+n)}function w(n,t=""){let e=Qe(),i=Xt(),r=n+Fn,s=i.firstCreatePass?wu(i,r,1,t,null):i.data[r],o=U8(i,e,s,t,n);e[r]=o,df()&&wf(i,e,o,s),Po(s,!1)}var U8=(n,t,e,i,r)=>(hf(!0),ZL(t[Vt],i));function J(n){return Z("",n,""),J}function Z(n,t,e){let i=Qe(),r=SE(i,n,t,e);return r!==cn&&Tf(i,pr(),r),Z}function $n(n,t,e,i,r){let s=Qe(),o=u8(s,n,t,e,i,r);return o!==cn&&Tf(s,pr(),o),$n}function Su(n,t,e,i,r,s,o){let a=Qe(),l=d8(a,n,t,e,i,r,s,o);return l!==cn&&Tf(a,pr(),l),Su}function n1(n,t,e,i,r,s,o,a,l){let c=Qe(),u=h8(c,n,t,e,i,r,s,o,a,l);return u!==cn&&Tf(c,pr(),u),n1}function Tf(n,t,e){let i=kx(t,n);eV(n[Vt],i,e)}function W(n,t,e){lD(t)&&(t=t());let i=Qe(),r=gl();if(ai(i,r,t)){let s=Xt(),o=yu();vf(s,o,i,n,t,i[Vt],e,!1)}return W}function U(n,t){let e=lD(n);return e&&n.set(t),e}function z(n,t){let e=Qe(),i=Xt(),r=Jn();return IE(i,e,e[Vt],r,n,t),z}function H8(n,t,e){let i=Xt();if(i.firstCreatePass){let r=or(n);HA(e,i.data,i.blueprint,r,!0),HA(t,i.data,i.blueprint,r,!1)}}function HA(n,t,e,i,r){if(n=Pn(n),Array.isArray(n))for(let s=0;s<n.length;s++)HA(n[s],t,e,i,r);else{let s=Xt(),o=Qe(),a=Jn(),l=il(n)?n:Pn(n.provide),c=wx(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(il(n)||!n.multi){let p=new ko(c,r,ye),_=Z_(l,t,r?u:u+h,d);_===-1?(hA(Wp(a,o),s,l),Q_(s,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(p),o.push(p)):(e[_]=p,o[_]=p)}else{let p=Z_(l,t,u+h,d),_=Z_(l,t,u,u+h),A=p>=0&&e[p],v=_>=0&&e[_];if(r&&!v||!r&&!A){hA(Wp(a,o),s,l);let b=K8(r?G8:Y8,e.length,r,i,c);!r&&v&&(e[_].providerFactory=b),Q_(s,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(b),o.push(b)}else{let b=kE(e[r?_:p],c,!r&&i);Q_(s,n,p>-1?p:_,b)}!r&&i&&v&&e[_].componentProviders++}}}function Q_(n,t,e,i){let r=il(t),s=KF(t);if(r||s){let l=(s?Pn(t.useClass):t).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){let u=c.indexOf(e);u===-1?c.push(e,[i,l]):c[u+1].push(i,l)}else c.push(e,l)}}}function kE(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function Z_(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function Y8(n,t,e,i,r){return YA(this.multi,[])}function G8(n,t,e,i,r){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=lu(i,i[st],this.providerFactory.index,r);o=l.slice(0,a),YA(s,o);for(let c=a;c<l.length;c++)o.push(l[c])}else o=[],YA(s,o);return o}function YA(n,t){for(let e=0;e<n.length;e++){let i=n[e];t.push(i())}return t}function K8(n,t,e,i,r){let s=new ko(n,e,ye);return s.multi=[],s.index=t,s.componentProviders=0,kE(s,r,i&&!e),s}function fr(n,t=[]){return e=>{e.providersResolver=(i,r)=>H8(i,r?r(n):n,t)}}function bl(n,t,e){let i=_u()+n,r=Qe();return r[i]===cn?bu(r,i,e?t.call(e):t()):gE(r,i)}function $t(n,t,e,i){return J8(Qe(),_u(),n,t,e,i)}function Pe(n,t,e,i,r){return X8(Qe(),_u(),n,t,e,i,r)}function Mn(n,t,e,i,r,s){return $8(Qe(),_u(),n,t,e,i,r,s)}function NE(n,t,e,i,r,s,o,a){let l=_u()+n,c=Qe(),u=_E(c,l,e,i,r,s);return ai(c,l+4,o)||u?bu(c,l+5,a?t.call(a,e,i,r,s,o):t(e,i,r,s,o)):gE(c,l+5)}function i1(n,t){let e=n[t];return e===cn?void 0:e}function J8(n,t,e,i,r,s){let o=t+e;return ai(n,o,r)?bu(n,o+1,s?i.call(s,r):i(r)):i1(n,o+1)}function X8(n,t,e,i,r,s,o){let a=t+e;return du(n,a,r,s)?bu(n,a+2,o?i.call(o,r,s):i(r,s)):i1(n,a+2)}function $8(n,t,e,i,r,s,o,a){let l=t+e;return mE(n,l,r,s,o)?bu(n,l+3,a?i.call(a,r,s,o):i(r,s,o)):i1(n,l+3)}function If(n,t){return Sf(n,t)}var GA=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},PE=(()=>{class n{compileModuleSync(e){return new qA(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=_x(e),s=OD(r.declarations).reduce((o,a)=>{let l=nl(a);return l&&o.push(new uu(l)),o},[]);return new GA(i,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Q8=(()=>{class n{zone=oe(Tt);changeDetectionScheduler=oe(ll);applicationRef=oe(Yr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Z8=new Se("",{factory:()=>!1});function OE({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new Tt(Ie(ne({},FE()),{scheduleInRootZone:e})),[{provide:Tt,useFactory:n},{provide:ru,multi:!0,useFactory:()=>{let i=oe(Q8,{optional:!0});return()=>i.initialize()}},{provide:ru,multi:!0,useFactory:()=>{let i=oe(e9);return()=>{i.initialize()}}},t===!0?{provide:iD,useValue:!0}:[],{provide:rD,useValue:e??nD}]}function RE(n){let t=n?.ignoreChangesOutsideZone,e=n?.scheduleInRootZone,i=OE({ngZoneFactory:()=>{let r=FE(n);return r.scheduleInRootZone=e,r.shouldCoalesceEventChangeDetection&&vl("NgZone_CoalesceEvent"),new Tt(r)},ignoreChangesOutsideZone:t,scheduleInRootZone:e});return gu([{provide:Z8,useValue:!0},{provide:Ay,useValue:!1},i])}function FE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var e9=(()=>{class n{subscription=new Yt;initialized=!1;zone=oe(Tt);pendingTasks=oe(Es);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Tt.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Tt.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var t9=(()=>{class n{appRef=oe(Yr);taskService=oe(Es);ngZone=oe(Tt);zonelessEnabled=oe(Ay);tracing=oe(yl,{optional:!0});disableScheduling=oe(iD,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Yt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Up):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(oe(rD,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof _A||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let i=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?DC:sD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Up+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(e),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,DC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function n9(){return typeof $localize<"u"&&$localize.locale||ef}var kf=new Se("",{providedIn:"root",factory:()=>oe(kf,nt.Optional|nt.SkipSelf)||n9()});var KA=new Se(""),i9=new Se("");function Zc(n){return!n.moduleRef}function r9(n){let t=Zc(n)?n.r3Injector:n.moduleRef.injector,e=t.get(Tt);return e.run(()=>{Zc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=t.get(cr,null),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:s=>{i.handleError(s)}})}),Zc(n)){let s=()=>t.destroy(),o=n.platformInjector.get(KA);o.add(s),t.onDestroy(()=>{r.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(KA);o.add(s),n.moduleRef.onDestroy(()=>{Tp(n.allPlatformModules,n.moduleRef),r.unsubscribe(),o.delete(s)})}return o9(i,e,()=>{let s=t.get(bE);return s.runInitializers(),s.donePromise.then(()=>{let o=t.get(kf,ef);if(B8(o||ef),!t.get(i9,!0))return Zc(n)?t.get(Yr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Zc(n)){let l=t.get(Yr);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return s9(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function s9(n,t){let e=n.injector.get(Yr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>e.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new De(-403,!1);t.push(n)}function o9(n,t,e){try{let i=e();return Ro(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}var Ip=null;function a9(n=[],t){return Ln.create({name:t,providers:[{provide:sf,useValue:"platform"},{provide:KA,useValue:new Set([()=>Ip=null])},...n]})}function l9(n=[]){if(Ip)return Ip;let t=a9(n);return Ip=t,o8(),c9(t),t}function c9(n){let t=n.get(by,null);li(n,()=>{t?.forEach(e=>e())})}var Ts=(()=>{class n{static __NG_ELEMENT_ID__=u9}return n})();function u9(n){return d9(Jn(),Qe(),(n&16)===16)}function d9(n,t,e){if(pl(n)&&!e){let i=lr(n.index,t);return new cu(i,i)}else if(n.type&175){let i=t[wi];return new cu(i,t)}return null}var JA=class{constructor(){}supports(t){return fE(t)}create(t){return new XA(t)}},h9=(n,t)=>t,XA=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||h9}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,s=null;for(;e||i;){let o=!i||e&&e.currentIndex<$C(i,r,s)?e:i,a=$C(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(e=e._next,o.previousIndex==null)r++;else{s||(s=[]);let c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){let p=h<s.length?s[h]:s[h]=0,_=p+h;u<=_&&_<c&&(s[h]=p+1)}let d=o.previousIndex;s[d]=u-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!fE(t))throw new De(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,i=!1,r,s,o;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),e===null||!Object.is(e.trackById,o)?(e=this._mismatch(e,s,o,a),i=!0):(i&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)),e=e._next}else r=0,Z6(t,a=>{o=this._trackByFn(r,a),e===null||!Object.is(e.trackById,o)?(e=this._mismatch(e,a,o,r),i=!0):(i&&(e=this._verifyReinsertion(e,a,o,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let s;return t===null?s=this._itTail:(s=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new $A(e,i),s,r)),t}_verifyReinsertion(t,e,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,s=t._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){let r=e===null?this._itHead:e._next;return t._next=r,t._prev=e,r===null?this._itTail=t:r._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new tf),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,i=t._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new tf),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},$A=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},QA=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let e=t._prevDup,i=t._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},tf=class{map=new Map;put(t){let e=t.trackById,i=this.map.get(e);i||(i=new QA,this.map.set(e,i)),i.add(t)}get(t,e){let i=t,r=this.map.get(i);return r?r.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function $C(n,t,e){let i=n.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}function QC(){return new r1([new JA])}var r1=(()=>{class n{factories;static \u0275prov=ce({token:n,providedIn:"root",factory:QC});constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||QC()),deps:[[n,new FF,new RF]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new De(901,!1)}}return n})();function LE(n){St(8);try{let{rootComponent:t,appProviders:e,platformProviders:i}=n,r=l9(i),s=[OE({}),{provide:ll,useExisting:t9},...e||[]],o=new Qp({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1});return r9({r3Injector:o.injector,platformInjector:r,rootComponent:t})}catch(t){return Promise.reject(t)}finally{St(9)}}function s1(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Is(n){return b_(n)}function Nf(n,t){return A_(n,t?.equal)}var ZC=class{[Ai];constructor(t){this[Ai]=t}destroy(){this[Ai].destroy()}};var Kt=new Se("");var qE=null;function Si(){return qE}function o1(n){qE??=n}var Cu=class{},a1=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>oe(jE),providedIn:"platform"})}return n})();var jE=(()=>{class n extends a1{_location;_history;_doc=oe(Kt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Si().getBaseHref(this._doc)}onPopState(e){let i=Si().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=Si().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function WE(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function VE(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function ks(n){return n&&n[0]!=="?"?`?${n}`:n}var Pf=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>oe(UE),providedIn:"root"})}return n})(),zE=new Se(""),UE=(()=>{class n extends Pf{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??oe(Kt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return WE(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+ks(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){let o=this.prepareExternalUrl(r+ks(s));this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,s){let o=this.prepareExternalUrl(r+ks(s));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)(ae(a1),ae(zE,8))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Sl=(()=>{class n{_subject=new ct;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=g9(VE(BE(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+ks(i))}normalize(e){return n.stripTrailingSlash(f9(this._basePath,BE(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ks(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ks(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=ks;static joinWithSlash=WE;static stripTrailingSlash=VE;static \u0275fac=function(i){return new(i||n)(ae(Pf))};static \u0275prov=ce({token:n,factory:()=>p9(),providedIn:"root"})}return n})();function p9(){return new Sl(ae(Pf))}function f9(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function BE(n){return n.replace(/\/index.html$/,"")}function g9(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var l1=/\s+/,HE=[],Fo=(()=>{class n{_ngEl;_renderer;initialClasses=HE;rawClass;stateMap=new Map;constructor(e,i){this._ngEl=e,this._renderer=i}set klass(e){this.initialClasses=e!=null?e.trim().split(l1):HE}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(l1):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(l1).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(ye(yn),ye(Ms))};static \u0275dir=It({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Of=class{$implicit;ngForOf;index;count;constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},gr=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((r,s,o)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new Of(r.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)i.remove(s===null?void 0:s);else if(s!==null){let a=i.get(s);i.move(a,o),YE(a,r)}});for(let r=0,s=i.length;r<s;r++){let a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let s=i.get(r.currentIndex);YE(s,r)})}static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(ye(qi),ye(dr),ye(r1))};static \u0275dir=It({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function YE(n,t){n.context.$implicit=t.item}var Xr=(()=>{class n{_viewContainer;_context=new Rf;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,i){this._viewContainer=e,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){GE(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){GE(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(ye(qi),ye(dr))};static \u0275dir=It({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Rf=class{$implicit=null;ngIf=null};function GE(n,t){if(n&&!n.createEmbeddedView)throw new De(2020,!1)}var c1=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(e){this._viewContainerRef=e}ngOnChanges(e){if(this._shouldRecreateView(e)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(e,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static \u0275fac=function(i){return new(i||n)(ye(qi))};static \u0275dir=It({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[Vi]})}return n})();var mr=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ji({type:n});static \u0275inj=Li({})}return n})();function xu(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[r,s]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}var u1="browser",KE="server";function Ff(n){return n===KE}var Lo=class{};var qf=new Se(""),f1=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r,s){return this._findPluginFor(i).addEventListener(e,i,r,s)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(s=>s.supports(e)),!i)throw new De(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||n)(ae(qf),ae(Tt))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),Du=class{_doc;constructor(t){this._doc=t}manager},Vf="ng-app-id";function JE(n){for(let t of n)t.remove()}function XE(n,t){let e=t.createElement("style");return e.textContent=n,e}function y9(n,t,e,i){let r=n.head?.querySelectorAll(`style[${Vf}="${t}"],link[${Vf}="${t}"]`);if(r)for(let s of r)s.removeAttribute(Vf),s instanceof HTMLLinkElement?i.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&e.set(s.textContent,{usage:0,elements:[s]})}function h1(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var g1=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,i,r,s={}){this.doc=e,this.appId=i,this.nonce=r,this.isServer=Ff(s),y9(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let r of e)this.addUsage(r,this.inline,XE);i?.forEach(r=>this.addUsage(r,this.external,h1))}removeStyles(e,i){for(let r of e)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,i,r){let s=i.get(e);s?s.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,r(e,this.doc)))})}removeUsage(e,i){let r=i.get(e);r&&(r.usage--,r.usage<=0&&(JE(r.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])JE(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(e,XE(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(e,h1(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(Vf,this.appId),e.appendChild(i)}static \u0275fac=function(i){return new(i||n)(ae(Kt),ae(wy),ae(Sy,8),ae(Al))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),d1={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},m1=/%COMP%/g;var QE="%COMP%",v9=`_nghost-${QE}`,w9=`_ngcontent-${QE}`,b9=!0,S9=new Se("",{providedIn:"root",factory:()=>b9});function C9(n){return w9.replace(m1,n)}function x9(n){return v9.replace(m1,n)}function ZE(n,t){return t.map(e=>e.replace(m1,n))}var _1=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,r,s,o,a,l,c=null,u=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=Ff(a),this.defaultRenderer=new Eu(e,o,l,this.platformIsServer,this.tracingService)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ur.ShadowDom&&(i=Ie(ne({},i),{encapsulation:ur.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof Bf?r.applyToHost(e):r instanceof Mu&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(i.encapsulation){case ur.Emulated:s=new Bf(l,c,i,this.appId,u,o,a,d,h);break;case ur.ShadowDom:return new p1(l,c,e,i,o,a,this.nonce,d,h);default:s=new Mu(l,c,i,u,o,a,d,h);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(i){return new(i||n)(ae(f1),ae(g1),ae(wy),ae(S9),ae(Kt),ae(Al),ae(Tt),ae(Sy),ae(yl,8))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),Eu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,i,r,s){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.tracingService=s}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(d1[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){($E(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&($E(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new De(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let s=d1[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=d1[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(Hr.DashCase|Hr.Important)?t.style.setProperty(e,i,r&Hr.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&Hr.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i,r){if(typeof t=="string"&&(t=Si().getGlobalEventTarget(this.doc,t),!t))throw new De(5102,!1);let s=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(t,e,s)),this.eventManager.addEventListener(t,e,s,r)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function $E(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var p1=class extends Eu{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,i,r,s,o,a,l,c){super(t,s,o,l,c),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=ZE(r.id,u);for(let h of u){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}let d=r.getExternalStyles?.();if(d)for(let h of d){let p=h1(h,s);a&&p.setAttribute("nonce",a),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Mu=class extends Eu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,i,r,s,o,a,l,c){super(t,s,o,a,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r;let u=i.styles;this.styles=c?ZE(c,u):u,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Bf=class extends Mu{contentAttr;hostAttr;constructor(t,e,i,r,s,o,a,l,c){let u=r+"-"+i.id;super(t,e,i,s,o,a,l,c,u),this.contentAttr=C9(u),this.hostAttr=x9(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}};var jf=class n extends Cu{supportsDOMEvents=!0;static makeCurrent(){o1(new n)}onAndCancel(t,e,i,r){return t.addEventListener(e,i,r),()=>{t.removeEventListener(e,i,r)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=D9();return e==null?null:E9(e)}resetBaseElement(){Tu=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return xu(document.cookie,t)}},Tu=null;function D9(){return Tu=Tu||document.head.querySelector("base"),Tu?Tu.getAttribute("href"):null}function E9(n){return new URL(n,document.baseURI).pathname}var M9=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),tM=(()=>{class n extends Du{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r,s){return e.addEventListener(i,r,s),()=>this.removeEventListener(e,i,r,s)}removeEventListener(e,i,r,s){return e.removeEventListener(i,r,s)}static \u0275fac=function(i){return new(i||n)(ae(Kt))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),eM=["alt","control","meta","shift"],T9={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},I9={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},nM=(()=>{class n extends Du{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r,s){let o=n.parseEventName(i),a=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Si().onAndCancel(e,o.domEventName,a,s))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),eM.forEach(c=>{let u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(e,i){let r=T9[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),eM.forEach(o=>{if(o!==r){let a=I9[o];a(e)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||n)(ae(Kt))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})();function A1(n,t){return LE(ne({rootComponent:n},k9(t)))}function k9(n){return{appProviders:[...F9,...n?.providers??[]],platformProviders:R9}}function N9(){jf.makeCurrent()}function P9(){return new cr}function O9(){return gD(document),document}var R9=[{provide:Al,useValue:u1},{provide:by,useValue:N9,multi:!0},{provide:Kt,useFactory:O9}];var F9=[{provide:sf,useValue:"root"},{provide:cr,useFactory:P9},{provide:qf,useClass:tM,multi:!0,deps:[Kt]},{provide:qf,useClass:nM,multi:!0,deps:[Kt]},_1,g1,f1,{provide:cl,useExisting:_1},{provide:Lo,useClass:M9},[]];var xl=class{},Iu=class{},Fe=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),s=e.slice(i+1).trim();this.addHeaderEntry(r,s)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.addHeaderEntry(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let s=t.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let o=this.headers.get(e);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}break}}addHeaderEntry(t,e){let i=t.toLowerCase();this.maybeSetNormalizedName(t,i),this.headers.has(i)?this.headers.get(i).push(e):this.headers.set(i,[e])}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(s=>s.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var zf=class{encodeKey(t){return iM(t)}encodeValue(t){return iM(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function L9(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,a]=s==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}var V9=/%(\d[a-f0-9])/gi,B9={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function iM(n){return encodeURIComponent(n).replace(V9,(t,e)=>B9[e]??t)}function Wf(n){return`${n}`}var Ci=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new zf,t.fromString){if(t.fromObject)throw new De(2805,!1);this.map=L9(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(Wf):[Wf(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(Wf(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(Wf(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Uf=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function q9(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function rM(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function sM(n){return typeof Blob<"u"&&n instanceof Blob}function oM(n){return typeof FormData<"u"&&n instanceof FormData}function j9(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var aM="Content-Type",lM="Accept",cM="X-Request-URL",uM="text/plain",dM="application/json",W9=`${dM}, ${uM}, */*`,Cl=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,e,i,r){this.url=e,this.method=t.toUpperCase();let s;if(q9(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Fe,this.context??=new Uf,!this.params)this.params=new Ci,this.urlWithParams=e;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||rM(this.body)||sM(this.body)||oM(this.body)||j9(this.body)?this.body:this.body instanceof Ci?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||oM(this.body)?null:sM(this.body)?this.body.type||null:rM(this.body)?null:typeof this.body=="string"?uM:this.body instanceof Ci?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?dM:null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=t.transferCache??this.transferCache,o=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,c=t.headers||this.headers,u=t.params||this.params,d=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((h,p)=>h.set(p,t.setHeaders[p]),c)),t.setParams&&(u=Object.keys(t.setParams).reduce((h,p)=>h.set(p,t.setParams[p]),u)),new n(e,i,o,{params:u,headers:c,context:d,reportProgress:l,responseType:r,withCredentials:a,transferCache:s})}},Vo=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Vo||{}),Dl=class{headers;status;statusText;url;ok;type;constructor(t,e=200,i="OK"){this.headers=t.headers||new Fe,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},Hf=class n extends Dl{constructor(t={}){super(t)}type=Vo.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},ku=class n extends Dl{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Vo.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Nu=class extends Dl{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},z9=200,U9=204;function y1(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Ct=(()=>{class n{handler;constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof Cl)s=e;else{let l;r.headers instanceof Fe?l=r.headers:l=new Fe(r.headers);let c;r.params&&(r.params instanceof Ci?c=r.params:c=new Ci({fromObject:r.params})),s=new Cl(e,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let o=ke(s).pipe(bs(l=>this.handler.handle(l)));if(e instanceof Cl||r.observe==="events")return o;let a=o.pipe(An(l=>l instanceof ku));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(ze(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new De(2806,!1);return l.body}));case"blob":return a.pipe(ze(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new De(2807,!1);return l.body}));case"text":return a.pipe(ze(l=>{if(l.body!==null&&typeof l.body!="string")throw new De(2808,!1);return l.body}));case"json":default:return a.pipe(ze(l=>l.body))}case"response":return a;default:throw new De(2809,!1)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new Ci().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,y1(r,i))}post(e,i,r={}){return this.request("POST",e,y1(r,i))}put(e,i,r={}){return this.request("PUT",e,y1(r,i))}static \u0275fac=function(i){return new(i||n)(ae(xl))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})();var H9=new Se("");function Y9(n,t){return t(n)}function G9(n,t,e){return(i,r)=>li(e,()=>t(i,s=>n(s,r)))}var hM=new Se(""),pM=new Se(""),fM=new Se("",{providedIn:"root",factory:()=>!0});var Yf=(()=>{class n extends xl{backend;injector;chain=null;pendingTasks=oe(Es);contributeToStability=oe(fM);constructor(e,i){super(),this.backend=e,this.injector=i}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(hM),...this.injector.get(pM,[])]));this.chain=i.reduceRight((r,s)=>G9(r,s,this.injector),Y9)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(Cs(()=>this.pendingTasks.remove(i)))}else return this.chain(e,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(ae(Iu),ae(On))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})();var K9=/^\)\]\}',?\n/,J9=RegExp(`^${cM}:`,"m");function X9(n){return"responseURL"in n&&n.responseURL?n.responseURL:J9.test(n.getAllResponseHeaders())?n.getResponseHeader(cM):null}var v1=(()=>{class n{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new De(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Lt(i.\u0275loadImpl()):ke(null)).pipe(zn(()=>new tt(s=>{let o=i.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((A,v)=>o.setRequestHeader(A,v.join(","))),e.headers.has(lM)||o.setRequestHeader(lM,W9),!e.headers.has(aM)){let A=e.detectContentTypeHeader();A!==null&&o.setRequestHeader(aM,A)}if(e.responseType){let A=e.responseType.toLowerCase();o.responseType=A!=="json"?A:"text"}let a=e.serializeBody(),l=null,c=()=>{if(l!==null)return l;let A=o.statusText||"OK",v=new Fe(o.getAllResponseHeaders()),b=X9(o)||e.url;return l=new Hf({headers:v,status:o.status,statusText:A,url:b}),l},u=()=>{let{headers:A,status:v,statusText:b,url:x}=c(),N=null;v!==U9&&(N=typeof o.response>"u"?o.responseText:o.response),v===0&&(v=N?z9:0);let T=v>=200&&v<300;if(e.responseType==="json"&&typeof N=="string"){let k=N;N=N.replace(K9,"");try{N=N!==""?JSON.parse(N):null}catch(C){N=k,T&&(T=!1,N={error:C,text:N})}}T?(s.next(new ku({body:N,headers:A,status:v,statusText:b,url:x||void 0})),s.complete()):s.error(new Nu({error:N,headers:A,status:v,statusText:b,url:x||void 0}))},d=A=>{let{url:v}=c(),b=new Nu({error:A,status:o.status||0,statusText:o.statusText||"Unknown Error",url:v||void 0});s.error(b)},h=!1,p=A=>{h||(s.next(c()),h=!0);let v={type:Vo.DownloadProgress,loaded:A.loaded};A.lengthComputable&&(v.total=A.total),e.responseType==="text"&&o.responseText&&(v.partialText=o.responseText),s.next(v)},_=A=>{let v={type:Vo.UploadProgress,loaded:A.loaded};A.lengthComputable&&(v.total=A.total),s.next(v)};return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),e.reportProgress&&(o.addEventListener("progress",p),a!==null&&o.upload&&o.upload.addEventListener("progress",_)),o.send(a),s.next({type:Vo.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",d),e.reportProgress&&(o.removeEventListener("progress",p),a!==null&&o.upload&&o.upload.removeEventListener("progress",_)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(i){return new(i||n)(ae(Lo))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),gM=new Se(""),$9="XSRF-TOKEN",Q9=new Se("",{providedIn:"root",factory:()=>$9}),Z9="X-XSRF-TOKEN",eB=new Se("",{providedIn:"root",factory:()=>Z9}),Pu=class{},tB=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,i){this.doc=e,this.cookieName=i}getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=xu(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(i){return new(i||n)(ae(Kt),ae(Q9))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})();function nB(n,t){let e=n.url.toLowerCase();if(!oe(gM)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let i=oe(Pu).getToken(),r=oe(eB);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}function w1(...n){let t=[Ct,v1,Yf,{provide:xl,useExisting:Yf},{provide:Iu,useFactory:()=>oe(H9,{optional:!0})??oe(v1)},{provide:hM,useValue:nB,multi:!0},{provide:gM,useValue:!0},{provide:Pu,useClass:tB}];for(let e of n)t.push(...e.\u0275providers);return gu(t)}var mM=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(i){return new(i||n)(ae(Kt))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var et="primary",Gu=Symbol("RouteTitle"),D1=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function jo(n){return new D1(n)}function CM(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function rB(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!_r(n[e],t[e]))return!1;return!0}function _r(n,t){let e=n?E1(n):void 0,i=t?E1(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!xM(n[r],t[r]))return!1;return!0}function E1(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function xM(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}else return n===t}function DM(n){return n.length>0?n[n.length-1]:null}function Ps(n){return O_(n)?n:Ro(n)?Lt(Promise.resolve(n)):ke(n)}var sB={exact:MM,subset:TM},EM={exact:oB,subset:aB,ignored:()=>!0};function _M(n,t,e){return sB[e.paths](n.root,t.root,e.matrixParams)&&EM[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function oB(n,t){return _r(n,t)}function MM(n,t,e){if(!Bo(n.segments,t.segments)||!Jf(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!MM(n.children[i],t.children[i],e))return!1;return!0}function aB(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>xM(n[e],t[e]))}function TM(n,t,e){return IM(n,t,t.segments,e)}function IM(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!Bo(r,e)||t.hasChildren()||!Jf(r,e,i))}else if(n.segments.length===e.length){if(!Bo(n.segments,e)||!Jf(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!TM(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!Bo(n.segments,r)||!Jf(n.segments,r,i)||!n.children[et]?!1:IM(n.children[et],t,s,i)}}function Jf(n,t,e){return t.every((i,r)=>EM[e](n[r].parameters,i.parameters))}var yr=class{root;queryParams;fragment;_queryParamMap;constructor(t=new mt([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=jo(this.queryParams),this._queryParamMap}toString(){return uB.serialize(this)}},mt=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xf(this)}},Ns=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=jo(this.parameters),this._parameterMap}toString(){return NM(this)}};function lB(n,t){return Bo(n,t)&&n.every((e,i)=>_r(e.parameters,t[i].parameters))}function Bo(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function cB(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===et&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==et&&(e=e.concat(t(r,i)))}),e}var Ku=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>new Wo,providedIn:"root"})}return n})(),Wo=class{parse(t){let e=new T1(t);return new yr(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Ou(t.root,!0)}`,i=pB(t.queryParams),r=typeof t.fragment=="string"?`#${dB(t.fragment)}`:"";return`${e}${i}${r}`}},uB=new Wo;function Xf(n){return n.segments.map(t=>NM(t)).join("/")}function Ou(n,t){if(!n.hasChildren())return Xf(n);if(t){let e=n.children[et]?Ou(n.children[et],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==et&&i.push(`${r}:${Ou(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=cB(n,(i,r)=>r===et?[Ou(n.children[et],!1)]:[`${r}:${Ou(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[et]!=null?`${Xf(n)}/${e[0]}`:`${Xf(n)}/(${e.join("//")})`}}function kM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Gf(n){return kM(n).replace(/%3B/gi,";")}function dB(n){return encodeURI(n)}function M1(n){return kM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $f(n){return decodeURIComponent(n)}function AM(n){return $f(n.replace(/\+/g,"%20"))}function NM(n){return`${M1(n.path)}${hB(n.parameters)}`}function hB(n){return Object.entries(n).map(([t,e])=>`;${M1(t)}=${M1(e)}`).join("")}function pB(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${Gf(e)}=${Gf(r)}`).join("&"):`${Gf(e)}=${Gf(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var fB=/^[^\/()?;#]+/;function b1(n){let t=n.match(fB);return t?t[0]:""}var gB=/^[^\/()?;=#]+/;function mB(n){let t=n.match(gB);return t?t[0]:""}var _B=/^[^=?&#]+/;function AB(n){let t=n.match(_B);return t?t[0]:""}var yB=/^[^&#]+/;function vB(n){let t=n.match(yB);return t?t[0]:""}var T1=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new mt([],{}):new mt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[et]=new mt(t,e)),i}parseSegment(){let t=b1(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new De(4009,!1);return this.capture(t),new Ns($f(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=mB(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=b1(this.remaining);r&&(i=r,this.capture(i))}t[$f(e)]=$f(i)}parseQueryParam(t){let e=AB(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let o=vB(this.remaining);o&&(i=o,this.capture(i))}let r=AM(e),s=AM(i);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=b1(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new De(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=et);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[et]:new mt([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new De(4011,!1)}};function PM(n){return n.segments.length>0?new mt([],{[et]:n}):n}function OM(n){let t={};for(let[i,r]of Object.entries(n.children)){let s=OM(r);if(i===et&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}let e=new mt(n.segments,t);return wB(e)}function wB(n){if(n.numberOfChildren===1&&n.children[et]){let t=n.children[et];return new mt(n.segments.concat(t.segments),t.children)}return n}function kl(n){return n instanceof yr}function RM(n,t,e=null,i=null){let r=FM(n);return LM(r,t,e,i)}function FM(n){let t;function e(s){let o={};for(let l of s.children){let c=e(l);o[l.outlet]=c}let a=new mt(s.url,o);return s===n&&(t=a),a}let i=e(n.root),r=PM(i);return t??r}function LM(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return S1(r,r,r,e,i);let s=bB(t);if(s.toRoot())return S1(r,r,new mt([],{}),e,i);let o=SB(s,r,n),a=o.processChildren?Fu(o.segmentGroup,o.index,s.commands):BM(o.segmentGroup,o.index,s.commands);return S1(r,o.segmentGroup,a,e,i)}function Zf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Vu(n){return typeof n=="object"&&n!=null&&n.outlets}function S1(n,t,e,i,r){let s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;n===t?o=e:o=VM(n,t,e);let a=PM(OM(o));return new yr(a,s,r)}function VM(n,t,e){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===t?i[r]=e:i[r]=VM(s,t,e)}),new mt(n.segments,i)}var e0=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Zf(i[0]))throw new De(4003,!1);let r=i.find(Vu);if(r&&r!==DM(i))throw new De(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function bB(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new e0(!0,0,n);let t=0,e=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new e0(e,t,i)}var Tl=class{segmentGroup;processChildren;index;constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function SB(n,t,e){if(n.isAbsolute)return new Tl(t,!0,0);if(!e)return new Tl(t,!1,NaN);if(e.parent===null)return new Tl(e,!0,0);let i=Zf(n.commands[0])?0:1,r=e.segments.length-1+i;return CB(e,r,n.numberOfDoubleDots)}function CB(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new De(4005,!1);r=i.segments.length}return new Tl(i,!1,r-s)}function xB(n){return Vu(n[0])?n[0].outlets:{[et]:n}}function BM(n,t,e){if(n??=new mt([],{}),n.segments.length===0&&n.hasChildren())return Fu(n,t,e);let i=DB(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new mt(n.segments.slice(0,i.pathIndex),{});return s.children[et]=new mt(n.segments.slice(i.pathIndex),n.children),Fu(s,0,r)}else return i.match&&r.length===0?new mt(n.segments,{}):i.match&&!n.hasChildren()?I1(n,t,e):i.match?Fu(n,0,r):I1(n,t,e)}function Fu(n,t,e){if(e.length===0)return new mt(n.segments,{});{let i=xB(e),r={};if(Object.keys(i).some(s=>s!==et)&&n.children[et]&&n.numberOfChildren===1&&n.children[et].segments.length===0){let s=Fu(n.children[et],t,e);return new mt(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=BM(n.children[s],t,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new mt(n.segments,r)}}function DB(n,t,e){let i=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;let o=n.segments[r],a=e[i];if(Vu(a))break;let l=`${a}`,c=i<e.length-1?e[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!vM(l,c,o))return s;i+=2}else{if(!vM(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function I1(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(Vu(s)){let l=EB(s.outlets);return new mt(i,l)}if(r===0&&Zf(e[0])){let l=n.segments[t];i.push(new Ns(l.path,yM(e[0]))),r++;continue}let o=Vu(s)?s.outlets[et]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&Zf(a)?(i.push(new Ns(o,yM(a))),r+=2):(i.push(new Ns(o,{})),r++)}return new mt(i,{})}function EB(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=I1(new mt([],{}),0,i))}),t}function yM(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function vM(n,t,e){return n==e.path&&_r(t,e.parameters)}var Qf="imperative",un=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(un||{}),pi=class{id;url;constructor(t,e){this.id=t,this.url=e}},zo=class extends pi{type=un.NavigationStart;navigationTrigger;restoredState;constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},$r=class extends pi{urlAfterRedirects;type=un.NavigationEnd;constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Qn||{}),Bu=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Bu||{}),Ar=class extends pi{reason;code;type=un.NavigationCancel;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Qr=class extends pi{reason;code;type=un.NavigationSkipped;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}},Nl=class extends pi{error;target;type=un.NavigationError;constructor(t,e,i,r){super(t,e),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},qu=class extends pi{urlAfterRedirects;state;type=un.RoutesRecognized;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},t0=class extends pi{urlAfterRedirects;state;type=un.GuardsCheckStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},n0=class extends pi{urlAfterRedirects;state;shouldActivate;type=un.GuardsCheckEnd;constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},i0=class extends pi{urlAfterRedirects;state;type=un.ResolveStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},r0=class extends pi{urlAfterRedirects;state;type=un.ResolveEnd;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},s0=class{route;type=un.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},o0=class{route;type=un.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},a0=class{snapshot;type=un.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},l0=class{snapshot;type=un.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},c0=class{snapshot;type=un.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},u0=class{snapshot;type=un.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ju=class{},Pl=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function MB(n,t){return n.providers&&!n._injector&&(n._injector=xf(n.providers,t,`Route: ${n.path}`)),n._injector??t}function zi(n){return n.outlet||et}function TB(n,t){let e=n.filter(i=>zi(i)===t);return e.push(...n.filter(i=>zi(i)!==t)),e}function Ju(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var d0=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ju(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Fl(this.rootInjector)}},Fl=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new d0(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||n)(ae(On))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),h0=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=k1(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=k1(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=N1(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return N1(t,this._root).map(e=>e.value)}};function k1(n,t){if(n===t.value)return t;for(let e of t.children){let i=k1(n,e);if(i)return i}return null}function N1(n,t){if(n===t.value)return[t];for(let e of t.children){let i=N1(n,e);if(i.length)return i.unshift(t),i}return[]}var hi=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Ml(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Wu=class extends h0{snapshot;constructor(t,e){super(t),this.snapshot=e,q1(this,t)}toString(){return this.snapshot.toString()}};function qM(n){let t=IB(n),e=new Qt([new Ns("",{})]),i=new Qt({}),r=new Qt({}),s=new Qt({}),o=new Qt(""),a=new vr(e,i,s,o,r,et,n,t.root);return a.snapshot=t.root,new Wu(new hi(a,[]),t)}function IB(n){let t={},e={},i={},r="",s=new qo([],t,i,r,e,et,n,null,{});return new zu("",new hi(s,[]))}var vr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,i,r,s,o,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ze(c=>c[Gu]))??ke(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ze(t=>jo(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ze(t=>jo(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function p0(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:ne(ne({},t.params),n.params),data:ne(ne({},t.data),n.data),resolve:ne(ne(ne(ne({},n.data),t.data),r?.data),n._resolvedData)}:i={params:ne({},n.params),data:ne({},n.data),resolve:ne(ne({},n.data),n._resolvedData??{})},r&&WM(r)&&(i.resolve[Gu]=r.title),i}var qo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Gu]}constructor(t,e,i,r,s,o,a,l,c){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=jo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=jo(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},zu=class extends h0{url;constructor(t,e){super(e),this.url=t,q1(this,e)}toString(){return jM(this._root)}};function q1(n,t){t.value._routerState=n,t.children.forEach(e=>q1(n,e))}function jM(n){let t=n.children.length>0?` { ${n.children.map(jM).join(", ")} } `:"";return`${n.value}${t}`}function C1(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,_r(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),_r(t.params,e.params)||n.paramsSubject.next(e.params),rB(t.url,e.url)||n.urlSubject.next(e.url),_r(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function P1(n,t){let e=_r(n.params,t.params)&&lB(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||P1(n.parent,t.parent))}function WM(n){return typeof n.title=="string"||n.title===null}var zM=new Se(""),Xu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=et;activateEvents=new Pt;deactivateEvents=new Pt;attachEvents=new Pt;detachEvents=new Pt;routerOutletData=aD(void 0);parentContexts=oe(Fl);location=oe(qi);changeDetector=oe(Ts);inputBinder=oe(_0,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new De(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new De(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new De(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new De(4013,!1);this._activatedRoute=e;let r=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new O1(e,a,r.injector,this.routerOutletData);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=It({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Vi]})}return n})(),O1=class{route;childContexts;parent;outletData;constructor(t,e,i,r){this.route=t,this.childContexts=e,this.parent=i,this.outletData=r}get(t,e){return t===vr?this.route:t===Fl?this.childContexts:t===zM?this.outletData:this.parent.get(t,e)}},_0=new Se("");var j1=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ci({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&Be(0,"router-outlet")},dependencies:[Xu],encapsulation:2})}return n})();function W1(n){let t=n.children&&n.children.map(W1),e=t?Ie(ne({},n),{children:t}):ne({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==et&&(e.component=j1),e}function kB(n,t,e){let i=Uu(n,t._root,e?e._root:void 0);return new Wu(i,t)}function Uu(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=NB(n,t,e);return new hi(i,r)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>Uu(n,a)),o}}let i=PB(t.value),r=t.children.map(s=>Uu(n,s));return new hi(i,r)}}function NB(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Uu(n,i,r);return Uu(n,i)})}function PB(n){return new vr(new Qt(n.url),new Qt(n.params),new Qt(n.queryParams),new Qt(n.fragment),new Qt(n.data),n.outlet,n.component,n)}var Ol=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},UM="ngNavigationCancelingError";function f0(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=kl(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=HM(!1,Qn.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function HM(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[UM]=!0,e.cancellationCode=t,e}function OB(n){return YM(n)&&kl(n.url)}function YM(n){return!!n&&n[UM]}var RB=(n,t,e,i)=>ze(r=>(new R1(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),R1=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),C1(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=Ml(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Ml(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Ml(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=Ml(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new u0(s.value.snapshot))}),t.children.length&&this.forwardEvent(new l0(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(C1(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),C1(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,i)}},g0=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Il=class{component;route;constructor(t,e){this.component=t,this.route=e}};function FB(n,t,e){let i=n._root,r=t?t._root:null;return Ru(i,r,e,[i.value])}function LB(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function Ll(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!ox(n)?n:t.get(n):i}function Ru(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ml(t);return n.children.forEach(o=>{VB(o,s[o.value.outlet],e,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Lu(a,e.getContext(o),r)),r}function VB(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=BB(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new g0(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ru(n,t,a?a.children:null,i,r):Ru(n,t,e,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Il(a.outlet.component,o))}else o&&Lu(t,a,r),r.canActivateChecks.push(new g0(i)),s.component?Ru(n,null,a?a.children:null,i,r):Ru(n,null,e,i,r);return r}function BB(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Bo(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Bo(n.url,t.url)||!_r(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!P1(n,t)||!_r(n.queryParams,t.queryParams);case"paramsChange":default:return!P1(n,t)}}function Lu(n,t,e){let i=Ml(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?t?Lu(o,t.children.getContext(s),e):Lu(o,null,e):Lu(o,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Il(t.outlet.component,r)):e.canDeactivateChecks.push(new Il(null,r)):e.canDeactivateChecks.push(new Il(null,r))}function $u(n){return typeof n=="function"}function qB(n){return typeof n=="boolean"}function jB(n){return n&&$u(n.canLoad)}function WB(n){return n&&$u(n.canActivate)}function zB(n){return n&&$u(n.canActivateChild)}function UB(n){return n&&$u(n.canDeactivate)}function HB(n){return n&&$u(n.canMatch)}function GM(n){return n instanceof jr||n?.name==="EmptyError"}var Kf=Symbol("INITIAL_VALUE");function Rl(){return zn(n=>$c(n.map(t=>t.pipe(oi(1),yp(Kf)))).pipe(ze(t=>{for(let e of t)if(e!==!0){if(e===Kf)return Kf;if(e===!1||YB(e))return e}return!0}),An(t=>t!==Kf),oi(1)))}function YB(n){return kl(n)||n instanceof Ol}function GB(n,t){return Nt(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?ke(Ie(ne({},e),{guardsResult:!0})):KB(o,i,r,n).pipe(Nt(a=>a&&qB(a)?JB(i,s,n,t):ke(a)),ze(a=>Ie(ne({},e),{guardsResult:a})))})}function KB(n,t,e,i){return Lt(n).pipe(Nt(r=>e7(r.component,r.route,e,t,i)),Wr(r=>r!==!0,!0))}function JB(n,t,e,i){return Lt(t).pipe(bs(r=>nr($B(r.route.parent,i),XB(r.route,i),ZB(n,r.path,e),QB(n,r.route,e))),Wr(r=>r!==!0,!0))}function XB(n,t){return n!==null&&t&&t(new c0(n)),ke(!0)}function $B(n,t){return n!==null&&t&&t(new a0(n)),ke(!0)}function QB(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return ke(!0);let r=i.map(s=>fp(()=>{let o=Ju(t)??e,a=Ll(s,o),l=WB(a)?a.canActivate(t,n):li(o,()=>a(t,n));return Ps(l).pipe(Wr())}));return ke(r).pipe(Rl())}function ZB(n,t,e){let i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>LB(o)).filter(o=>o!==null).map(o=>fp(()=>{let a=o.guards.map(l=>{let c=Ju(o.node)??e,u=Ll(l,c),d=zB(u)?u.canActivateChild(i,n):li(c,()=>u(i,n));return Ps(d).pipe(Wr())});return ke(a).pipe(Rl())}));return ke(s).pipe(Rl())}function e7(n,t,e,i,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return ke(!0);let o=s.map(a=>{let l=Ju(t)??r,c=Ll(a,l),u=UB(c)?c.canDeactivate(n,t,e,i):li(l,()=>c(n,t,e,i));return Ps(u).pipe(Wr())});return ke(o).pipe(Rl())}function t7(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return ke(!0);let s=r.map(o=>{let a=Ll(o,n),l=jB(a)?a.canLoad(t,e):li(n,()=>a(t,e));return Ps(l)});return ke(s).pipe(Rl(),KM(i))}function KM(n){return T_(Zt(t=>{if(typeof t!="boolean")throw f0(n,t)}),ze(t=>t===!0))}function n7(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return ke(!0);let s=r.map(o=>{let a=Ll(o,n),l=HB(a)?a.canMatch(t,e):li(n,()=>a(t,e));return Ps(l)});return ke(s).pipe(Rl(),KM(i))}var Hu=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Yu=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function El(n){return Ya(new Hu(n))}function i7(n){return Ya(new De(4e3,!1))}function r7(n){return Ya(HM(!1,Qn.GuardRejected))}var F1=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return ke(i);if(r.numberOfChildren>1||!r.children[et])return i7(`${t.redirectTo}`);r=r.children[et]}}applyRedirectCommands(t,e,i,r,s){if(typeof e!="string"){let a=e,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,params:p,data:_,title:A}=r,v=li(s,()=>a({params:p,data:_,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,title:A}));if(v instanceof yr)throw new Yu(v);e=v}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e[0]==="/")throw new Yu(o);return o}applyRedirectCreateUrlTree(t,e,i,r){let s=this.createSegmentGroup(t,e.root,i,r);return new yr(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);i[r]=e[a]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){let s=this.createSegments(t,e.segments,i,r),o={};return Object.entries(e.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(t,l,i,r)}),new mt(s,o)}createSegments(t,e,i,r){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new De(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},L1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function s7(n,t,e,i,r){let s=JM(n,t,e);return s.matched?(i=MB(t,i),n7(i,t,e,r).pipe(ze(o=>o===!0?s:ne({},L1)))):ke(s)}function JM(n,t,e){if(t.path==="**")return o7(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?ne({},L1):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||CM)(e,n,t);if(!r)return ne({},L1);let s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=r.consumed.length>0?ne(ne({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function o7(n){return{matched:!0,parameters:n.length>0?DM(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function wM(n,t,e,i){return e.length>0&&c7(n,e,i)?{segmentGroup:new mt(t,l7(i,new mt(e,n.children))),slicedSegments:[]}:e.length===0&&u7(n,e,i)?{segmentGroup:new mt(n.segments,a7(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new mt(n.segments,n.children),slicedSegments:e}}function a7(n,t,e,i){let r={};for(let s of e)if(A0(n,t,s)&&!i[zi(s)]){let o=new mt([],{});r[zi(s)]=o}return ne(ne({},i),r)}function l7(n,t){let e={};e[et]=t;for(let i of n)if(i.path===""&&zi(i)!==et){let r=new mt([],{});e[zi(i)]=r}return e}function c7(n,t,e){return e.some(i=>A0(n,t,i)&&zi(i)!==et)}function u7(n,t,e){return e.some(i=>A0(n,t,i))}function A0(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function d7(n,t,e){return t.length===0&&!n.children[e]}var V1=class{};function h7(n,t,e,i,r,s,o="emptyOnly"){return new B1(n,t,e,i,r,o,s).recognize()}var p7=31,B1=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,i,r,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new F1(this.urlSerializer,this.urlTree)}noMatchError(t){return new De(4002,`'${t.segmentGroup}'`)}recognize(){let t=wM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(ze(({children:e,rootSnapshot:i})=>{let r=new hi(i,e),s=new zu("",r),o=RM(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let e=new qo([],Object.freeze({}),Object.freeze(ne({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),et,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,et,e).pipe(ze(i=>({children:i,rootSnapshot:e})),ir(i=>{if(i instanceof Yu)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Hu?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,s):this.processSegment(t,e,i,i.segments,r,!0,s).pipe(ze(o=>o instanceof hi?[o]:[]))}processChildren(t,e,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return Lt(s).pipe(bs(o=>{let a=i.children[o],l=TB(e,o);return this.processSegmentGroup(t,l,a,o,r)}),B_((o,a)=>(o.push(...a),o)),Ss(null),V_(),Nt(o=>{if(o===null)return El(i);let a=XM(o);return f7(a),ke(a)}))}processSegment(t,e,i,r,s,o,a){return Lt(e).pipe(bs(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,i,r,s,o,a).pipe(ir(c=>{if(c instanceof Hu)return ke(null);throw c}))),Wr(l=>!!l),ir(l=>{if(GM(l))return d7(i,r,s)?ke(new V1):El(i);throw l}))}processSegmentAgainstRoute(t,e,i,r,s,o,a,l){return zi(i)!==o&&(o===et||!A0(r,s,i))?El(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,o,l):El(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=JM(e,r,s);if(!l)return El(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>p7&&(this.allowRedirects=!1));let p=new qo(s,c,Object.freeze(ne({},this.urlTree.queryParams)),this.urlTree.fragment,bM(r),zi(r),r.component??r._loadedComponent??null,r,SM(r)),_=p0(p,a,this.paramsInheritanceStrategy);p.params=Object.freeze(_.params),p.data=Object.freeze(_.data);let A=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,p,t);return this.applyRedirects.lineralizeSegments(r,A).pipe(Nt(v=>this.processSegment(t,i,e,v.concat(h),o,!1,a)))}matchSegmentAgainstRoute(t,e,i,r,s,o){let a=s7(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),a.pipe(zn(l=>l.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(zn(({routes:c})=>{let u=i._loadedInjector??t,{parameters:d,consumedSegments:h,remainingSegments:p}=l,_=new qo(h,d,Object.freeze(ne({},this.urlTree.queryParams)),this.urlTree.fragment,bM(i),zi(i),i.component??i._loadedComponent??null,i,SM(i)),A=p0(_,o,this.paramsInheritanceStrategy);_.params=Object.freeze(A.params),_.data=Object.freeze(A.data);let{segmentGroup:v,slicedSegments:b}=wM(e,h,p,c);if(b.length===0&&v.hasChildren())return this.processChildren(u,c,v,_).pipe(ze(N=>new hi(_,N)));if(c.length===0&&b.length===0)return ke(new hi(_,[]));let x=zi(i)===s;return this.processSegment(u,c,v,b,x?et:s,!0,_).pipe(ze(N=>new hi(_,N instanceof hi?[N]:[])))}))):El(e)))}getChildConfig(t,e,i){return e.children?ke({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?ke({routes:e._loadedRoutes,injector:e._loadedInjector}):t7(t,e,i,this.urlSerializer).pipe(Nt(r=>r?this.configLoader.loadChildren(t,e).pipe(Zt(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):r7(e))):ke({routes:[],injector:t})}};function f7(n){n.sort((t,e)=>t.value.outlet===et?-1:e.value.outlet===et?1:t.value.outlet.localeCompare(e.value.outlet))}function g7(n){let t=n.value.routeConfig;return t&&t.path===""}function XM(n){let t=[],e=new Set;for(let i of n){if(!g7(i)){t.push(i);continue}let r=t.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=XM(i.children);t.push(new hi(i.value,r))}return t.filter(i=>!e.has(i))}function bM(n){return n.data||{}}function SM(n){return n.resolve||{}}function m7(n,t,e,i,r,s){return Nt(o=>h7(n,t,e,i,o.extractedUrl,r,s).pipe(ze(({state:a,tree:l})=>Ie(ne({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function _7(n,t){return Nt(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return ke(e);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of $M(l))o.add(c);let a=0;return Lt(o).pipe(bs(l=>s.has(l)?A7(l,i,n,t):(l.data=p0(l,l.parent,n).resolve,ke(void 0))),Zt(()=>a++),Ka(1),Nt(l=>a===o.size?ke(e):Dn))})}function $M(n){let t=n.children.map(e=>$M(e)).flat();return[n,...t]}function A7(n,t,e,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!WM(r)&&(s[Gu]=r.title),y7(s,n,t,i).pipe(ze(o=>(n._resolvedData=o,n.data=p0(n,n.parent,e).resolve,null)))}function y7(n,t,e,i){let r=E1(n);if(r.length===0)return ke({});let s={};return Lt(r).pipe(Nt(o=>v7(n[o],t,e,i).pipe(Wr(),Zt(a=>{if(a instanceof Ol)throw f0(new Wo,a);s[o]=a}))),Ka(1),ze(()=>s),ir(o=>GM(o)?Dn:Ya(o)))}function v7(n,t,e,i){let r=Ju(t)??i,s=Ll(n,r),o=s.resolve?s.resolve(t,e):li(r,()=>s(t,e));return Ps(o)}function x1(n){return zn(t=>{let e=n(t);return e?Lt(e).pipe(ze(()=>t)):ke(t)})}var z1=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===et);return i}getResolvedTitleForRoute(e){return e.data[Gu]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>oe(QM),providedIn:"root"})}return n})(),QM=(()=>{class n extends z1{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(ae(mM))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qu=new Se("",{providedIn:"root",factory:()=>({})}),Zu=new Se(""),ZM=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=oe(PE);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ke(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=Ps(e.loadComponent()).pipe(ze(tT),Zt(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),Cs(()=>{this.componentLoaders.delete(e)})),r=new Wa(i,()=>new ct).pipe(ja());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ke({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=eT(i,this.compiler,e,this.onLoadEndListener).pipe(Cs(()=>{this.childrenLoaders.delete(i)})),o=new Wa(s,()=>new ct).pipe(ja());return this.childrenLoaders.set(i,o),o}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eT(n,t,e,i){return Ps(n.loadChildren()).pipe(ze(tT),Nt(r=>r instanceof Yy||Array.isArray(r)?ke(r):Lt(t.compileModuleAsync(r))),ze(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(e).injector,o=s.get(Zu,[],{optional:!0,self:!0}).flat()),{routes:o.map(W1),injector:s}}))}function w7(n){return n&&typeof n=="object"&&"default"in n}function tT(n){return w7(n)?n.default:n}var y0=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>oe(b7),providedIn:"root"})}return n})(),b7=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nT=new Se("");var iT=new Se(""),rT=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ct;transitionAbortSubject=new ct;configLoader=oe(ZM);environmentInjector=oe(On);destroyRef=oe(Oo);urlSerializer=oe(Ku);rootContexts=oe(Fl);location=oe(Sl);inputBindingEnabled=oe(_0,{optional:!0})!==null;titleStrategy=oe(z1);options=oe(Qu,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=oe(y0);createViewTransition=oe(nT,{optional:!0});navigationErrorHandler=oe(iT,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ke(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=r=>this.events.next(new s0(r)),i=r=>this.events.next(new o0(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(Ie(ne({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))}setupNavigations(e){return this.transitions=new Qt(null),this.transitions.pipe(An(i=>i!==null),zn(i=>{let r=!1,s=!1;return ke(i).pipe(zn(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Qn.SupersededByNewNavigation),Dn;this.currentTransition=i,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Ie(ne({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!a&&l!=="reload"){let c="";return this.events.next(new Qr(o.id,this.urlSerializer.serialize(o.rawUrl),c,Bu.IgnoredSameUrlNavigation)),o.resolve(!1),Dn}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ke(o).pipe(zn(c=>(this.events.next(new zo(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?Dn:Promise.resolve(c))),m7(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Zt(c=>{i.targetSnapshot=c.targetSnapshot,i.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=Ie(ne({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let u=new qu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:u,source:d,restoredState:h,extras:p}=o,_=new zo(c,this.urlSerializer.serialize(u),d,h);this.events.next(_);let A=qM(this.rootComponentType).snapshot;return this.currentTransition=i=Ie(ne({},o),{targetSnapshot:A,urlAfterRedirects:u,extras:Ie(ne({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,ke(i)}else{let c="";return this.events.next(new Qr(o.id,this.urlSerializer.serialize(o.extractedUrl),c,Bu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Dn}}),Zt(o=>{let a=new t0(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),ze(o=>(this.currentTransition=i=Ie(ne({},o),{guards:FB(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),GB(this.environmentInjector,o=>this.events.next(o)),Zt(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw f0(this.urlSerializer,o.guardsResult);let a=new n0(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),An(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Qn.GuardRejected),!1)),x1(o=>{if(o.guards.canActivateChecks.length!==0)return ke(o).pipe(Zt(a=>{let l=new i0(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),zn(a=>{let l=!1;return ke(a).pipe(_7(this.paramsInheritanceStrategy,this.environmentInjector),Zt({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",Qn.NoDataFromResolver)}}))}),Zt(a=>{let l=new r0(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),x1(o=>{let a=l=>{let c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(Zt(u=>{l.component=u}),ze(()=>{})));for(let u of l.children)c.push(...a(u));return c};return $c(a(o.targetSnapshot.root)).pipe(Ss(null),oi(1))}),x1(()=>this.afterPreactivation()),zn(()=>{let{currentSnapshot:o,targetSnapshot:a}=i,l=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return l?Lt(l).pipe(ze(()=>i)):ke(i)}),ze(o=>{let a=kB(e.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=Ie(ne({},o),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,i}),Zt(()=>{this.events.next(new ju)}),RB(this.rootContexts,e.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),oi(1),Zt({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new $r(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),rr(this.transitionAbortSubject.pipe(Zt(o=>{throw o}))),Cs(()=>{!r&&!s&&this.cancelNavigationTransition(i,"",Qn.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),ir(o=>{if(this.destroyed)return i.resolve(!1),Dn;if(s=!0,YM(o))this.events.next(new Ar(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),OB(o)?this.events.next(new Pl(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let a=new Nl(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let l=li(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof Ol){let{message:c,cancellationCode:u}=f0(this.urlSerializer,l);this.events.next(new Ar(i.id,this.urlSerializer.serialize(i.extractedUrl),c,u)),this.events.next(new Pl(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return Dn}))}))}cancelNavigationTransition(e,i,r){let s=new Ar(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function S7(n){return n!==Qf}var sT=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>oe(C7),providedIn:"root"})}return n})(),m0=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},C7=(()=>{class n extends m0{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Bi(n)))(r||n)}})();static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oT=(()=>{class n{urlSerializer=oe(Ku);options=oe(Qu,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=oe(Sl);urlHandlingStrategy=oe(y0);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new yr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:i,targetBrowserUrl:r}){let s=e!==void 0?this.urlHandlingStrategy.merge(e,i):i,o=r??s;return o instanceof yr?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:e,finalUrl:i,initialUrl:r}){i&&e?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=e):this.rawUrlTree=r}routerState=qM(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>oe(x7),providedIn:"root"})}return n})(),x7=(()=>{class n extends oT{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{e(i.url,i.state,"popstate")})})}handleRouterEvent(e,i){e instanceof zo?this.updateStateMemento():e instanceof Qr?this.commitTransition(i):e instanceof qu?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof ju?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Ar&&(e.code===Qn.GuardRejected||e.code===Qn.NoDataFromResolver)?this.restoreHistory(i):e instanceof Nl?this.restoreHistory(i,!0):e instanceof $r&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:i,id:r}){let{replaceUrl:s,state:o}=i;if(this.location.isCurrentPathEqualTo(e)||s){let a=this.browserPageId,l=ne(ne({},o),this.generateNgRouterState(r,a));this.location.replaceState(e,"",l)}else{let a=ne(ne({},o),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===e.finalUrl&&s===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Bi(n)))(r||n)}})();static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function U1(n,t){n.events.pipe(An(e=>e instanceof $r||e instanceof Ar||e instanceof Nl||e instanceof Qr),ze(e=>e instanceof $r||e instanceof Qr?0:(e instanceof Ar?e.code===Qn.Redirect||e.code===Qn.SupersededByNewNavigation:!1)?2:1),An(e=>e!==2),oi(1)).subscribe(()=>{t()})}var D7={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},E7={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},v0=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=oe(yE);stateManager=oe(oT);options=oe(Qu,{optional:!0})||{};pendingTasks=oe(Es);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=oe(rT);urlSerializer=oe(Ku);location=oe(Sl);urlHandlingStrategy=oe(y0);_events=new ct;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=oe(sT);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=oe(Zu,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!oe(_0,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Yt;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Ar&&i.code!==Qn.Redirect&&i.code!==Qn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof $r)this.navigated=!0;else if(i instanceof Pl){let o=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=ne({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||S7(r.source)},o);this.scheduleNavigation(a,Qf,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}T7(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Qf,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i,r)=>{this.navigateToSyncWithBrowser(e,r,i)})}navigateToSyncWithBrowser(e,i,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let l=ne({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(W1),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=ne(ne({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=r?r.snapshot:this.routerState.snapshot.root;d=FM(h)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),d=this.currentUrlTree.root}return LM(d,e,u,c??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=kl(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Qf,null,i)}navigate(e,i={skipLocationChange:!1}){return M7(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=ne({},D7):i===!1?r=ne({},E7):r=i,kl(e))return _M(this.currentUrlTree,e,r);let s=this.parseUrl(e);return _M(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(e,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,l=h});let u=this.pendingTasks.add();return U1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function M7(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new De(4008,!1)}function T7(n){return!(n instanceof ju)&&!(n instanceof Pl)}var k7=new Se("");function H1(n,...t){return gu([{provide:Zu,multi:!0,useValue:n},[],{provide:vr,useFactory:N7,deps:[v0]},{provide:Gy,multi:!0,useFactory:P7},t.map(e=>e.\u0275providers)])}function N7(n){return n.routerState.root}function P7(){let n=oe(Ln);return t=>{let e=n.get(Yr);if(t!==e.components[0])return;let i=n.get(v0),r=n.get(O7);n.get(R7)===1&&i.initialNavigation(),n.get(F7,null,nt.Optional)?.setUpPreloading(),n.get(k7,null,nt.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var O7=new Se("",{factory:()=>new ct}),R7=new Se("",{providedIn:"root",factory:()=>1});var F7=new Se("");var aT=[];function nd(n){return n+.5|0}var Os=(n,t,e)=>Math.max(Math.min(n,e),t);function ed(n){return Os(nd(n*2.55),0,255)}function Rs(n){return Os(nd(n*255),0,255)}function Zr(n){return Os(nd(n/2.55)/100,0,1)}function lT(n){return Os(nd(n*100),0,100)}var xi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},G1=[..."0123456789ABCDEF"],B7=n=>G1[n&15],q7=n=>G1[(n&240)>>4]+G1[n&15],w0=n=>(n&240)>>4===(n&15),j7=n=>w0(n.r)&&w0(n.g)&&w0(n.b)&&w0(n.a);function W7(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&xi[n[1]]*17,g:255&xi[n[2]]*17,b:255&xi[n[3]]*17,a:t===5?xi[n[4]]*17:255}:(t===7||t===9)&&(e={r:xi[n[1]]<<4|xi[n[2]],g:xi[n[3]]<<4|xi[n[4]],b:xi[n[5]]<<4|xi[n[6]],a:t===9?xi[n[7]]<<4|xi[n[8]]:255})),e}var z7=(n,t)=>n<255?t(n):"";function U7(n){var t=j7(n)?B7:q7;return n?"#"+t(n.r)+t(n.g)+t(n.b)+z7(n.a,t):void 0}var H7=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hT(n,t,e){let i=t*Math.min(e,1-e),r=(s,o=(s+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function Y7(n,t,e){let i=(r,s=(r+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function G7(n,t,e){let i=hT(n,1,.5),r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function K7(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function K1(n){let e=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(e,i,r),o=Math.min(e,i,r),a=(s+o)/2,l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=K7(e,i,r,u,s),l=l*60+.5),[l|0,c||0,a]}function J1(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(Rs)}function X1(n,t,e){return J1(hT,n,t,e)}function J7(n,t,e){return J1(G7,n,t,e)}function X7(n,t,e){return J1(Y7,n,t,e)}function pT(n){return(n%360+360)%360}function $7(n){let t=H7.exec(n),e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?ed(+t[5]):Rs(+t[5]));let r=pT(+t[2]),s=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=J7(r,s,o):t[1]==="hsv"?i=X7(r,s,o):i=X1(r,s,o),{r:i[0],g:i[1],b:i[2],a:e}}function Q7(n,t){var e=K1(n);e[0]=pT(e[0]+t),e=X1(e),n.r=e[0],n.g=e[1],n.b=e[2]}function Z7(n){if(!n)return;let t=K1(n),e=t[0],i=lT(t[1]),r=lT(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${Zr(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}var cT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},uT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function eq(){let n={},t=Object.keys(uT),e=Object.keys(cT),i,r,s,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],r=0;r<e.length;r++)s=e[r],a=a.replace(s,cT[s]);s=parseInt(uT[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var b0;function tq(n){b0||(b0=eq(),b0.transparent=[0,0,0,0]);let t=b0[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}var nq=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function iq(n){let t=nq.exec(n),e=255,i,r,s;if(t){if(t[7]!==i){let o=+t[7];e=t[8]?ed(o):Os(o*255,0,255)}return i=+t[1],r=+t[3],s=+t[5],i=255&(t[2]?ed(i):Os(i,0,255)),r=255&(t[4]?ed(r):Os(r,0,255)),s=255&(t[6]?ed(s):Os(s,0,255)),{r:i,g:r,b:s,a:e}}}function rq(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Zr(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var Y1=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Vl=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function sq(n,t,e){let i=Vl(Zr(n.r)),r=Vl(Zr(n.g)),s=Vl(Zr(n.b));return{r:Rs(Y1(i+e*(Vl(Zr(t.r))-i))),g:Rs(Y1(r+e*(Vl(Zr(t.g))-r))),b:Rs(Y1(s+e*(Vl(Zr(t.b))-s))),a:n.a+e*(t.a-n.a)}}function S0(n,t,e){if(n){let i=K1(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=X1(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function fT(n,t){return n&&Object.assign(t||{},n)}function dT(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Rs(n[3]))):(t=fT(n,{r:0,g:0,b:0,a:1}),t.a=Rs(t.a)),t}function oq(n){return n.charAt(0)==="r"?iq(n):$7(n)}var td=class n{constructor(t){if(t instanceof n)return t;let e=typeof t,i;e==="object"?i=dT(t):e==="string"&&(i=W7(t)||tq(t)||oq(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=fT(this._rgb);return t&&(t.a=Zr(t.a)),t}set rgb(t){this._rgb=dT(t)}rgbString(){return this._valid?rq(this._rgb):void 0}hexString(){return this._valid?U7(this._rgb):void 0}hslString(){return this._valid?Z7(this._rgb):void 0}mix(t,e){if(t){let i=this.rgb,r=t.rgb,s,o=e===s?.5:e,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=sq(this._rgb,t._rgb,e)),this}clone(){return new n(this.rgb)}alpha(t){return this._rgb.a=Rs(t),this}clearer(t){let e=this._rgb;return e.a*=1-t,this}greyscale(){let t=this._rgb,e=nd(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){let e=this._rgb;return e.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return S0(this._rgb,2,t),this}darken(t){return S0(this._rgb,2,-t),this}saturate(t){return S0(this._rgb,1,t),this}desaturate(t){return S0(this._rgb,1,-t),this}rotate(t){return Q7(this._rgb,t),this}};function Yi(){}var Z1=(()=>{let n=0;return()=>n++})();function ot(n){return n==null}function pt(n){if(Array.isArray&&Array.isArray(n))return!0;let t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Je(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Et(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Bn(n,t){return Et(n)?n:t}function Le(n,t){return typeof n>"u"?t:n}var ev=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,I0=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function ft(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function _t(n,t,e,i){let r,s,o;if(pt(n))if(s=n.length,i)for(r=s-1;r>=0;r--)t.call(e,n[r],r);else for(r=0;r<s;r++)t.call(e,n[r],r);else if(Je(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)t.call(e,n[o[r]],o[r])}function Wl(n,t){let e,i,r,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function rd(n){if(pt(n))return n.map(rd);if(Je(n)){let t=Object.create(null),e=Object.keys(n),i=e.length,r=0;for(;r<i;++r)t[e[r]]=rd(n[e[r]]);return t}return n}function CT(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function xT(n,t,e,i){if(!CT(n))return;let r=t[n],s=e[n];Je(r)&&Je(s)?Yo(r,s,i):t[n]=rd(s)}function Yo(n,t,e){let i=pt(t)?t:[t],r=i.length;if(!Je(n))return n;e=e||{};let s=e.merger||xT,o;for(let a=0;a<r;++a){if(o=i[a],!Je(o))continue;let l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],n,o,e)}return n}function Go(n,t){return Yo(n,t,{merger:DT})}function DT(n,t,e){if(!CT(n))return;let i=t[n],r=e[n];Je(i)&&Je(r)?Go(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=rd(r))}var gT={"":n=>n,x:n=>n.x,y:n=>n.y};function ET(n){let t=n.split("."),e=[],i="";for(let r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function aq(n){let t=ET(n);return e=>{for(let i of t){if(i==="")break;e=e&&e[i]}return e}}function br(n,t){return(gT[t]||(gT[t]=aq(t)))(n)}function od(n){return n.charAt(0).toUpperCase()+n.slice(1)}var wn=n=>typeof n<"u",vn=n=>typeof n=="function",k0=(n,t)=>{if(n.size!==t.size)return!1;for(let e of n)if(!t.has(e))return!1;return!0};function tv(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var Ye=Math.PI,yt=2*Ye,MT=yt+Ye,sd=Number.POSITIVE_INFINITY,ad=Ye/180,xt=Ye/2,Zn=Ye/4,Bl=Ye*2/3,wr=Math.log10,Di=Math.sign;function Ko(n,t,e){return Math.abs(n-t)<e}function N0(n){let t=Math.round(n);n=Ko(n,t,n/1e3)?t:n;let e=Math.pow(10,Math.floor(wr(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function nv(n){let t=[],e=Math.sqrt(n),i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}function lq(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Gi(n){return!lq(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function iv(n,t){let e=Math.round(n);return e-t<=n&&e+t>=n}function P0(n,t,e){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function jt(n){return n*(Ye/180)}function Jo(n){return n*(180/Ye)}function O0(n){if(!Et(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function Xo(n,t){let e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i),s=Math.atan2(i,e);return s<-.5*Ye&&(s+=yt),{angle:s,distance:r}}function ts(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function TT(n,t){return(n-t+MT)%yt-Ye}function dn(n){return(n%yt+yt)%yt}function $o(n,t,e,i){let r=dn(n),s=dn(t),o=dn(e),a=dn(s-r),l=dn(o-r),c=dn(r-s),u=dn(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function en(n,t,e){return Math.max(t,Math.min(e,n))}function rv(n){return en(n,-32768,32767)}function Ki(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function ld(n,t,e){e=e||(o=>n[o]<t);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,e(s)?r=s:i=s;return{lo:r,hi:i}}var Ui=(n,t,e,i)=>ld(n,e,i?r=>{let s=n[r][t];return s<e||s===e&&n[r+1][t]===e}:r=>n[r][t]<e),sv=(n,t,e)=>ld(n,e,i=>n[i][t]>=e);function ov(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}var IT=["push","pop","shift","splice","unshift"];function av(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),IT.forEach(e=>{let i="_onData"+od(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){let o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function R0(n,t){let e=n._chartjs;if(!e)return;let i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(IT.forEach(s=>{delete n[s]}),delete n._chartjs)}function F0(n){let t=new Set(n);return t.size===n.length?n:Array.from(t)}var L0=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function V0(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,L0.call(window,()=>{i=!1,n.apply(t,e)}))}}function lv(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}var cd=n=>n==="start"?"left":n==="end"?"right":"center",hn=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,cv=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function B0(n,t,e){let i=t.length,r=0,s=i;if(n._sorted){let{iScale:o,vScale:a,_parsed:l}=n,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:p,maxDefined:_}=o.getUserBounds();if(p){if(r=Math.min(Ui(l,u,d).lo,e?i:Ui(t,u,o.getPixelForValue(d)).lo),c){let A=l.slice(0,r+1).reverse().findIndex(v=>!ot(v[a.axis]));r-=Math.max(0,A)}r=en(r,0,i-1)}if(_){let A=Math.max(Ui(l,o.axis,h,!0).hi+1,e?0:Ui(t,u,o.getPixelForValue(h),!0).hi+1);if(c){let v=l.slice(A-1).findIndex(b=>!ot(b[a.axis]));A+=Math.max(0,v)}s=en(A,r,i)-r}else s=i-r}return{start:r,count:s}}function q0(n){let{xScale:t,yScale:e,_scaleRanges:i}=n,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=r,!0;let s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,r),s}var C0=n=>n===0||n===1,mT=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*yt/e)),_T=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*yt/e)+1,Uo={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*xt)+1,easeOutSine:n=>Math.sin(n*xt),easeInOutSine:n=>-.5*(Math.cos(Ye*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>C0(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>C0(n)?n:mT(n,.075,.3),easeOutElastic:n=>C0(n)?n:_T(n,.075,.3),easeInOutElastic(n){return C0(n)?n:n<.5?.5*mT(n*2,.1125,.45):.5+.5*_T(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Uo.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Uo.easeInBounce(n*2)*.5:Uo.easeOutBounce(n*2-1)*.5+.5};function j0(n){if(n&&typeof n=="object"){let t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function W0(n){return j0(n)?n:new td(n)}function M0(n){return j0(n)?n:new td(n).saturate(.5).darken(.1).hexString()}var cq=["x","y","borderWidth","radius","tension"],uq=["color","borderColor","backgroundColor"];function dq(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:uq},numbers:{type:"number",properties:cq}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function hq(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var AT=new Map;function pq(n,t){t=t||{};let e=n+JSON.stringify(t),i=AT.get(e);return i||(i=new Intl.NumberFormat(n,t),AT.set(e,i)),i}function Qo(n,t,e){return pq(t,e).format(n)}var kT={values(n){return pt(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";let i=this.chart.options.locale,r,s=n;if(e.length>1){let c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=fq(n,e)}let o=wr(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Qo(n,i,l)},logarithmic(n,t,e){if(n===0)return"0";let i=e[t].significand||n/Math.pow(10,Math.floor(wr(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?kT.numeric.call(this,n,t,e):""}};function fq(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var ud={formatters:kT};function gq(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ud.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}var Ls=Object.create(null),z0=Object.create(null);function id(n,t){if(!t)return n;let e=t.split(".");for(let i=0,r=e.length;i<r;++i){let s=e[i];n=n[s]||(n[s]=Object.create(null))}return n}function $1(n,t,e){return typeof t=="string"?Yo(id(n,t),e):Yo(id(n,""),t)}var Q1=class{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>M0(r.backgroundColor),this.hoverBorderColor=(i,r)=>M0(r.borderColor),this.hoverColor=(i,r)=>M0(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return $1(this,t,e)}get(t){return id(this,t)}describe(t,e){return $1(z0,t,e)}override(t,e){return $1(Ls,t,e)}route(t,e,i,r){let s=id(this,t),o=id(this,i),a="_"+e;Object.defineProperties(s,{[a]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){let l=this[a],c=o[r];return Je(l)?Object.assign({},c,l):Le(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}},bt=new Q1({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[dq,hq,gq]);function NT(n){return!n||ot(n.size)||ot(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function ql(n,t,e,i,r){let s=t[r];return s||(s=t[r]=n.measureText(r).width,e.push(r)),s>i&&(i=s),i}function uv(n,t,e,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let o=0,a=e.length,l,c,u,d,h;for(l=0;l<a;l++)if(d=e[l],d!=null&&!pt(d))o=ql(n,r,s,o,d);else if(pt(d))for(c=0,u=d.length;c<u;c++)h=d[c],h!=null&&!pt(h)&&(o=ql(n,r,s,o,h));n.restore();let p=s.length/2;if(p>e.length){for(l=0;l<p;l++)delete r[s[l]];s.splice(0,p)}return o}function ns(n,t,e){let i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function U0(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function dd(n,t,e,i){H0(n,t,e,i,null)}function H0(n,t,e,i,r){let s,o,a,l,c,u,d,h,p=t.pointStyle,_=t.rotation,A=t.radius,v=(_||0)*ad;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(v),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),n.restore();return}if(!(isNaN(A)||A<=0)){switch(n.beginPath(),p){default:r?n.ellipse(e,i,r/2,A,0,0,yt):n.arc(e,i,A,0,yt),n.closePath();break;case"triangle":u=r?r/2:A,n.moveTo(e+Math.sin(v)*u,i-Math.cos(v)*A),v+=Bl,n.lineTo(e+Math.sin(v)*u,i-Math.cos(v)*A),v+=Bl,n.lineTo(e+Math.sin(v)*u,i-Math.cos(v)*A),n.closePath();break;case"rectRounded":c=A*.516,l=A-c,o=Math.cos(v+Zn)*l,d=Math.cos(v+Zn)*(r?r/2-c:l),a=Math.sin(v+Zn)*l,h=Math.sin(v+Zn)*(r?r/2-c:l),n.arc(e-d,i-a,c,v-Ye,v-xt),n.arc(e+h,i-o,c,v-xt,v),n.arc(e+d,i+a,c,v,v+xt),n.arc(e-h,i+o,c,v+xt,v+Ye),n.closePath();break;case"rect":if(!_){l=Math.SQRT1_2*A,u=r?r/2:l,n.rect(e-u,i-l,2*u,2*l);break}v+=Zn;case"rectRot":d=Math.cos(v)*(r?r/2:A),o=Math.cos(v)*A,a=Math.sin(v)*A,h=Math.sin(v)*(r?r/2:A),n.moveTo(e-d,i-a),n.lineTo(e+h,i-o),n.lineTo(e+d,i+a),n.lineTo(e-h,i+o),n.closePath();break;case"crossRot":v+=Zn;case"cross":d=Math.cos(v)*(r?r/2:A),o=Math.cos(v)*A,a=Math.sin(v)*A,h=Math.sin(v)*(r?r/2:A),n.moveTo(e-d,i-a),n.lineTo(e+d,i+a),n.moveTo(e+h,i-o),n.lineTo(e-h,i+o);break;case"star":d=Math.cos(v)*(r?r/2:A),o=Math.cos(v)*A,a=Math.sin(v)*A,h=Math.sin(v)*(r?r/2:A),n.moveTo(e-d,i-a),n.lineTo(e+d,i+a),n.moveTo(e+h,i-o),n.lineTo(e-h,i+o),v+=Zn,d=Math.cos(v)*(r?r/2:A),o=Math.cos(v)*A,a=Math.sin(v)*A,h=Math.sin(v)*(r?r/2:A),n.moveTo(e-d,i-a),n.lineTo(e+d,i+a),n.moveTo(e+h,i-o),n.lineTo(e-h,i+o);break;case"line":o=r?r/2:Math.cos(v)*A,a=Math.sin(v)*A,n.moveTo(e-o,i-a),n.lineTo(e+o,i+a);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(v)*(r?r/2:A),i+Math.sin(v)*A);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function Hi(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Vs(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Bs(n){n.restore()}function dv(n,t,e,i,r){if(!t)return n.lineTo(e.x,e.y);if(r==="middle"){let s=(t.x+e.x)/2;n.lineTo(s,t.y),n.lineTo(s,e.y)}else r==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function hv(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function mq(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),ot(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function _q(n,t,e,i,r){if(r.strikethrough||r.underline){let s=n.measureText(i),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=e-s.actualBoundingBoxAscent,c=e+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function Aq(n,t){let e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function is(n,t,e,i,r,s={}){let o=pt(t)?t:[t],a=s.strokeWidth>0&&s.strokeColor!=="",l,c;for(n.save(),n.font=r.string,mq(n,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&Aq(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),ot(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,e,i,s.maxWidth)),n.fillText(c,e,i,s.maxWidth),_q(n,e,i,c,s),i+=Number(r.lineHeight);n.restore()}function rs(n,t){let{x:e,y:i,w:r,h:s,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,1.5*Ye,Ye,!0),n.lineTo(e,i+s-o.bottomLeft),n.arc(e+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Ye,xt,!0),n.lineTo(e+r-o.bottomRight,i+s),n.arc(e+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,xt,0,!0),n.lineTo(e+r,i+o.topRight),n.arc(e+r-o.topRight,i+o.topRight,o.topRight,0,-xt,!0),n.lineTo(e+o.topLeft,i)}var yq=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,vq=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function PT(n,t){let e=(""+n).match(yq);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}var wq=n=>+n||0;function hd(n,t){let e={},i=Je(t),r=i?Object.keys(t):t,s=Je(n)?i?o=>Le(n[o],n[t[o]]):o=>n[o]:()=>n;for(let o of r)e[o]=wq(s(o));return e}function Y0(n){return hd(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ji(n){return hd(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Wt(n){let t=Y0(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ot(n,t){n=n||{},t=t||bt.font;let e=Le(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Le(n.style,t.style);i&&!(""+i).match(vq)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let r={family:Le(n.family,t.family),lineHeight:PT(Le(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Le(n.weight,t.weight),string:""};return r.string=NT(r),r}function Zo(n,t,e,i){let r=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),r=!1),e!==void 0&&pt(a)&&(a=a[e%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function pv(n,t,e){let{min:i,max:r}=n,s=I0(t,(r-i)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Sr(n,t){return Object.assign(Object.create(n),t)}function pd(n,t=[""],e,i,r=()=>n[0]){let s=e||n;typeof i>"u"&&(i=FT("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>pd([a,...n],t,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return OT(a,l,()=>Tq(l,t,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return vT(a).includes(l)},ownKeys(a){return vT(a)},set(a,l,c){let u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function Fs(n,t,e,i){let r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:G0(n,i),setContext:s=>Fs(n,s,e,i),override:s=>Fs(n.override(s),t,e,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return OT(s,o,()=>Sq(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function G0(n,t={scriptable:!0,indexable:!0}){let{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:vn(e)?e:()=>e,isIndexable:vn(i)?i:()=>i}}var bq=(n,t)=>n?n+od(t):t,fv=(n,t)=>Je(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function OT(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];let i=e();return n[t]=i,i}function Sq(n,t,e){let{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n,a=i[t];return vn(a)&&o.isScriptable(t)&&(a=Cq(t,a,n,e)),pt(a)&&a.length&&(a=xq(t,a,n,o.isIndexable)),fv(t,a)&&(a=Fs(a,r,s&&s[t],o)),a}function Cq(n,t,e,i){let{_proxy:r,_context:s,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=t(s,o||i);return a.delete(n),fv(n,l)&&(l=gv(r._scopes,r,n,l)),l}function xq(n,t,e,i){let{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=e;if(typeof s.index<"u"&&i(n))return t[s.index%t.length];if(Je(t[0])){let l=t,c=r._scopes.filter(u=>u!==l);t=[];for(let u of l){let d=gv(c,r,n,u);t.push(Fs(d,s,o&&o[n],a))}}return t}function RT(n,t,e){return vn(n)?n(t,e):n}var Dq=(n,t)=>n===!0?t:typeof n=="string"?br(t,n):void 0;function Eq(n,t,e,i,r){for(let s of t){let o=Dq(e,s);if(o){n.add(o);let a=RT(o._fallback,e,r);if(typeof a<"u"&&a!==e&&a!==i)return a}else if(o===!1&&typeof i<"u"&&e!==i)return null}return!1}function gv(n,t,e,i){let r=t._rootScopes,s=RT(t._fallback,e,i),o=[...n,...r],a=new Set;a.add(i);let l=yT(a,o,e,s||e,i);return l===null||typeof s<"u"&&s!==e&&(l=yT(a,o,s,l,i),l===null)?!1:pd(Array.from(a),[""],r,s,()=>Mq(t,e,i))}function yT(n,t,e,i,r){for(;e;)e=Eq(n,t,e,i,r);return e}function Mq(n,t,e){let i=n._getTarget();t in i||(i[t]={});let r=i[t];return pt(r)&&Je(e)?e:r||{}}function Tq(n,t,e,i){let r;for(let s of t)if(r=FT(bq(s,n),e),typeof r<"u")return fv(n,r)?gv(e,i,n,r):r}function FT(n,t){for(let e of t){if(!e)continue;let i=e[n];if(typeof i<"u")return i}}function vT(n){let t=n._keys;return t||(t=n._keys=Iq(n._scopes)),t}function Iq(n){let t=new Set;for(let e of n)for(let i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function K0(n,t,e,i){let{iScale:r}=n,{key:s="r"}=this._parsing,o=new Array(i),a,l,c,u;for(a=0,l=i;a<l;++a)c=a+e,u=t[c],o[a]={r:r.parse(br(u,s),c)};return o}var kq=Number.EPSILON||1e-14,jl=(n,t)=>t<n.length&&!n[t].skip&&n[t],LT=n=>n==="x"?"y":"x";function VT(n,t,e,i){let r=n.skip?t:n,s=t,o=e.skip?t:e,a=ts(s,r),l=ts(o,s),c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;let d=i*c,h=i*u;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+h*(o.x-r.x),y:s.y+h*(o.y-r.y)}}}function Nq(n,t,e){let i=n.length,r,s,o,a,l,c=jl(n,0);for(let u=0;u<i-1;++u)if(l=c,c=jl(n,u+1),!(!l||!c)){if(Ko(t[u],0,kq)){e[u]=e[u+1]=0;continue}r=e[u]/t[u],s=e[u+1]/t[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),e[u]=r*o*t[u],e[u+1]=s*o*t[u])}}function Pq(n,t,e="x"){let i=LT(e),r=n.length,s,o,a,l=jl(n,0);for(let c=0;c<r;++c){if(o=a,a=l,l=jl(n,c+1),!a)continue;let u=a[e],d=a[i];o&&(s=(u-o[e])/3,a[`cp1${e}`]=u-s,a[`cp1${i}`]=d-s*t[c]),l&&(s=(l[e]-u)/3,a[`cp2${e}`]=u+s,a[`cp2${i}`]=d+s*t[c])}}function BT(n,t="x"){let e=LT(t),i=n.length,r=Array(i).fill(0),s=Array(i),o,a,l,c=jl(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=jl(n,o+1),!!l){if(c){let u=c[t]-l[t];r[o]=u!==0?(c[e]-l[e])/u:0}s[o]=a?c?Di(r[o-1])!==Di(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}Nq(n,r,s),Pq(n,s,t)}function x0(n,t,e){return Math.max(Math.min(n,e),t)}function Oq(n,t){let e,i,r,s,o,a=Hi(n[0],t);for(e=0,i=n.length;e<i;++e)o=s,s=a,a=e<i-1&&Hi(n[e+1],t),s&&(r=n[e],o&&(r.cp1x=x0(r.cp1x,t.left,t.right),r.cp1y=x0(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=x0(r.cp2x,t.left,t.right),r.cp2y=x0(r.cp2y,t.top,t.bottom)))}function mv(n,t,e,i,r){let s,o,a,l;if(t.spanGaps&&(n=n.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")BT(n,r);else{let c=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],l=VT(c,a,n[Math.min(s+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&Oq(n,e)}function fd(){return typeof window<"u"&&typeof document<"u"}function gd(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function T0(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}var J0=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function qT(n,t){return J0(n).getPropertyValue(t)}var Rq=["top","right","bottom","left"];function Ho(n,t,e){let i={};e=e?"-"+e:"";for(let r=0;r<4;r++){let s=Rq[r];i[s]=parseFloat(n[t+"-"+s+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var Fq=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function Lq(n,t){let e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:s}=i,o=!1,a,l;if(Fq(r,s,n.target))a=r,l=s;else{let c=t.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ss(n,t){if("native"in n)return n;let{canvas:e,currentDevicePixelRatio:i}=t,r=J0(e),s=r.boxSizing==="border-box",o=Ho(r,"padding"),a=Ho(r,"border","width"),{x:l,y:c,box:u}=Lq(n,e),d=o.left+(u&&a.left),h=o.top+(u&&a.top),{width:p,height:_}=t;return s&&(p-=o.width+a.width,_-=o.height+a.height),{x:Math.round((l-d)/p*e.width/i),y:Math.round((c-h)/_*e.height/i)}}function Vq(n,t,e){let i,r;if(t===void 0||e===void 0){let s=n&&gd(n);if(!s)t=n.clientWidth,e=n.clientHeight;else{let o=s.getBoundingClientRect(),a=J0(s),l=Ho(a,"border","width"),c=Ho(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,i=T0(a.maxWidth,s,"clientWidth"),r=T0(a.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:i||sd,maxHeight:r||sd}}var D0=n=>Math.round(n*10)/10;function _v(n,t,e,i){let r=J0(n),s=Ho(r,"margin"),o=T0(r.maxWidth,n,"clientWidth")||sd,a=T0(r.maxHeight,n,"clientHeight")||sd,l=Vq(n,t,e),{width:c,height:u}=l;if(r.boxSizing==="content-box"){let h=Ho(r,"border","width"),p=Ho(r,"padding");c-=p.width+h.width,u-=p.height+h.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=D0(Math.min(c,o,l.maxWidth)),u=D0(Math.min(u,a,l.maxHeight)),c&&!u&&(u=D0(c/2)),(t!==void 0||e!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=D0(Math.floor(u*i))),{width:c,height:u}}function X0(n,t,e){let i=t||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);let o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var Av=function(){let n=!1;try{let t={get passive(){return n=!0,!1}};fd()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function $0(n,t){let e=qT(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function es(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function yv(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function vv(n,t,e,i){let r={x:n.cp2x,y:n.cp2y},s={x:t.cp1x,y:t.cp1y},o=es(n,r,e),a=es(r,s,e),l=es(s,t,e),c=es(o,a,e),u=es(a,l,e);return es(c,u,e)}var Bq=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},qq=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function qs(n,t,e){return n?Bq(t,e):qq()}function Q0(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function Z0(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function jT(n){return n==="angle"?{between:$o,compare:TT,normalize:dn}:{between:Ki,compare:(t,e)=>t-e,normalize:t=>t}}function wT({start:n,end:t,count:e,loop:i,style:r}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:r}}function jq(n,t,e){let{property:i,start:r,end:s}=e,{between:o,normalize:a}=jT(i),l=t.length,{start:c,end:u,loop:d}=n,h,p;if(d){for(c+=l,u+=l,h=0,p=l;h<p&&o(a(t[c%l][i]),r,s);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:n.style}}function eg(n,t,e){if(!e)return[n];let{property:i,start:r,end:s}=e,o=t.length,{compare:a,between:l,normalize:c}=jT(i),{start:u,end:d,loop:h,style:p}=jq(n,t,e),_=[],A=!1,v=null,b,x,N,T=()=>l(r,N,b)&&a(r,N)!==0,k=()=>a(s,b)===0||l(s,N,b),C=()=>A||T(),M=()=>!A||k();for(let O=u,F=u;O<=d;++O)x=t[O%o],!x.skip&&(b=c(x[i]),b!==N&&(A=l(b,r,s),v===null&&C()&&(v=a(b,r)===0?O:F),v!==null&&M()&&(_.push(wT({start:v,end:O,loop:h,count:o,style:p})),v=null),F=O,N=b));return v!==null&&_.push(wT({start:v,end:d,loop:h,count:o,style:p})),_}function tg(n,t){let e=[],i=n.segments;for(let r=0;r<i.length;r++){let s=eg(i[r],n.points,t);s.length&&e.push(...s)}return e}function Wq(n,t,e,i){let r=0,s=t-1;if(e&&!i)for(;r<t&&!n[r].skip;)r++;for(;r<t&&n[r].skip;)r++;for(r%=t,e&&(s+=r);s>r&&n[s%t].skip;)s--;return s%=t,{start:r,end:s}}function zq(n,t,e,i){let r=n.length,s=[],o=t,a=n[t],l;for(l=t+1;l<=e;++l){let c=n[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:t%r,end:(l-1)%r,loop:i}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&s.push({start:t%r,end:o%r,loop:i}),s}function wv(n,t){let e=n.points,i=n.options.spanGaps,r=e.length;if(!r)return[];let s=!!n._loop,{start:o,end:a}=Wq(e,r,s,i);if(i===!0)return bT(n,[{start:o,end:a,loop:s}],e,t);let l=a<o?a+r:a,c=!!n._fullLoop&&o===0&&a===r-1;return bT(n,zq(e,o,l,c),e,t)}function bT(n,t,e,i){return!i||!i.setContext||!e?t:Uq(n,t,e,i)}function Uq(n,t,e,i){let r=n._chart.getContext(),s=ST(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=e.length,c=[],u=s,d=t[0].start,h=d;function p(_,A,v,b){let x=a?-1:1;if(_!==A){for(_+=l;e[_%l].skip;)_-=x;for(;e[A%l].skip;)A+=x;_%l!==A%l&&(c.push({start:_%l,end:A%l,loop:v,style:b}),u=b,d=A%l)}}for(let _ of t){d=a?d:_.start;let A=e[d%l],v;for(h=d+1;h<=_.end;h++){let b=e[h%l];v=ST(i.setContext(Sr(r,{type:"segment",p0:A,p1:b,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),Hq(v,u)&&p(d,h-1,_.loop,u),A=b,u=v}d<h-1&&p(d,h-1,_.loop,u)}return c}function ST(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Hq(n,t){if(!t)return!1;let e=[],i=function(r,s){return j0(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function E0(n,t,e){return n.options.clip?n[e]:t[e]}function Yq(n,t){let{xScale:e,yScale:i}=n;return e&&i?{left:E0(e,t,"left"),right:E0(e,t,"right"),top:E0(i,t,"top"),bottom:E0(i,t,"bottom")}:t}function ng(n,t){let e=t._clip;if(e.disabled)return!1;let i=Yq(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}var Pv=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){let s=e.listeners[r],o=e.duration;s.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=L0.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;let s=i.items,o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,t,"progress")),s.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){let e=this._charts,i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let i=e.items,r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}},os=new Pv,WT="transparent",Gq={boolean(n,t,e){return e>.5?t:n},color(n,t,e){let i=W0(n||WT),r=i.valid&&W0(t||WT);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}},Ov=class{constructor(t,e,i,r){let s=e[i];r=Zo([t.to,r,s,t.from]);let o=Zo([t.from,s,r]);this._active=!0,this._fn=t.fn||Gq[t.type||typeof o],this._easing=Uo[t.easing]||Uo.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);let r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=Zo([t.to,e,r,t.from]),this._from=Zo([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e=t-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to,l;if(this._active=s!==a&&(o||e<i),!this._active){this._target[r]=a,this._notify(!0);return}if(e<0){this._target[r]=s;return}l=e/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){let e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}},Hl=class{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Je(t))return;let e=Object.keys(bt.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{let s=t[r];if(!Je(s))return;let o={};for(let a of e)o[a]=s[a];(pt(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,e){let i=e.options,r=Jq(t,i);if(!r)return[];let s=this._createAnimations(r,i);return i.$shared&&Kq(t.options.$animations,i).then(()=>{t.options=i},()=>{}),s}_createAnimations(t,e){let i=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now(),l;for(l=o.length-1;l>=0;--l){let c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(t,e));continue}let u=e[c],d=s[c],h=i.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){t[c]=u;continue}s[c]=d=new Ov(h,t,c,u),r.push(d)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}let i=this._createAnimations(t,e);if(i.length)return os.add(this._chart,i),!0}};function Kq(n,t){let e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){let s=n[i[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function Jq(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function zT(n,t){let e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:i?s:r,end:i?r:s}}function Xq(n,t,e){if(e===!1)return!1;let i=zT(n,e),r=zT(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function $q(n){let t,e,i,r;return Je(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function WI(n,t){let e=[],i=n._getSortedDatasetMetas(t),r,s;for(r=0,s=i.length;r<s;++r)e.push(i[r].index);return e}function UT(n,t,e,i={}){let r=n.keys,s=i.mode==="single",o,a,l,c;if(t===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===e){if(u=!0,i.all)continue;break}c=n.values[l],Et(c)&&(s||t===0||Di(t)===Di(c))&&(t+=c)}return!u&&!i.all?0:t}function Qq(n,t){let{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length),l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:n[u]};return a}function bv(n,t){let e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function Zq(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function ej(n){let{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function tj(n,t,e){let i=n[t]||(n[t]={});return i[e]||(i[e]={})}function HT(n,t,e,i){for(let r of t.getMatchingVisibleMetas(i).reverse()){let s=n[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function YT(n,t){let{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=Zq(s,o,i),d=t.length,h;for(let p=0;p<d;++p){let _=t[p],{[l]:A,[c]:v}=_,b=_._stacks||(_._stacks={});h=b[c]=tj(r,u,A),h[a]=v,h._top=HT(h,o,!0,i.type),h._bottom=HT(h,o,!1,i.type);let x=h._visualValues||(h._visualValues={});x[a]=v}}function Sv(n,t){let e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function nj(n,t){return Sr(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function ij(n,t,e){return Sr(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function md(n,t){let e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(let r of t){let s=r._stacks;if(!s||s[i]===void 0||s[i][e]===void 0)return;delete s[i][e],s[i]._visualValues!==void 0&&s[i]._visualValues[e]!==void 0&&delete s[i]._visualValues[e]}}}var Cv=n=>n==="reset"||n==="none",GT=(n,t)=>t?n:Object.assign({},n),rj=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:WI(e,!0),values:null},Ws=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,i){this.chart=e,this._ctx=e.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=bv(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&md(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,i=this._cachedMeta,r=this.getDataset(),s=(h,p,_,A)=>h==="x"?p:h==="r"?A:_,o=i.xAxisID=Le(r.xAxisID,Sv(e,"x")),a=i.yAxisID=Le(r.yAxisID,Sv(e,"y")),l=i.rAxisID=Le(r.rAxisID,Sv(e,"r")),c=i.indexAxis,u=i.iAxisID=s(c,o,a,l),d=i.vAxisID=s(c,a,o,l);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(u),i.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let i=this._cachedMeta;return e===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&R0(this._data,this),e._stacked&&md(e)}_dataCheck(){let e=this.getDataset(),i=e.data||(e.data=[]),r=this._data;if(Je(i)){let s=this._cachedMeta;this._data=Qq(i,s)}else if(r!==i){if(r){R0(r,this);let s=this._cachedMeta;md(s),s._parsed=[]}i&&Object.isExtensible(i)&&av(i,this),this._syncList=[],this._data=i}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let i=this._cachedMeta,r=this.getDataset(),s=!1;this._dataCheck();let o=i._stacked;i._stacked=bv(i.vScale,i),i.stack!==r.stack&&(s=!0,md(i),i.stack=r.stack),this._resyncElements(e),(s||o!==i._stacked)&&(YT(this,i._parsed),i._stacked=bv(i.vScale,i))}configure(){let e=this.chart.config,i=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),i,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,i){let{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:a}=r,l=o.axis,c=e===0&&i===s.length?!0:r._sorted,u=e>0&&r._parsed[e-1],d,h,p;if(this._parsing===!1)r._parsed=s,r._sorted=!0,p=s;else{pt(s[e])?p=this.parseArrayData(r,s,e,i):Je(s[e])?p=this.parseObjectData(r,s,e,i):p=this.parsePrimitiveData(r,s,e,i);let _=()=>h[l]===null||u&&h[l]<u[l];for(d=0;d<i;++d)r._parsed[d+e]=h=p[d],c&&(_()&&(c=!1),u=h);r._sorted=c}a&&YT(this,p)}parsePrimitiveData(e,i,r,s){let{iScale:o,vScale:a}=e,l=o.axis,c=a.axis,u=o.getLabels(),d=o===a,h=new Array(s),p,_,A;for(p=0,_=s;p<_;++p)A=p+r,h[p]={[l]:d||o.parse(u[A],A),[c]:a.parse(i[A],A)};return h}parseArrayData(e,i,r,s){let{xScale:o,yScale:a}=e,l=new Array(s),c,u,d,h;for(c=0,u=s;c<u;++c)d=c+r,h=i[d],l[c]={x:o.parse(h[0],d),y:a.parse(h[1],d)};return l}parseObjectData(e,i,r,s){let{xScale:o,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(s),d,h,p,_;for(d=0,h=s;d<h;++d)p=d+r,_=i[p],u[d]={x:o.parse(br(_,l),p),y:a.parse(br(_,c),p)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,i,r){let s=this.chart,o=this._cachedMeta,a=i[e.axis],l={keys:WI(s,!0),values:i._stacks[e.axis]._visualValues};return UT(l,a,o.index,{mode:r})}updateRangeFromParsed(e,i,r,s){let o=r[i.axis],a=o===null?NaN:o,l=s&&r._stacks[i.axis];s&&l&&(s.values=l,a=UT(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,i){let r=this._cachedMeta,s=r._parsed,o=r._sorted&&e===r.iScale,a=s.length,l=this._getOtherScale(e),c=rj(i,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=ej(l),p,_;function A(){_=s[p];let v=_[l.axis];return!Et(_[e.axis])||d>v||h<v}for(p=0;p<a&&!(!A()&&(this.updateRangeFromParsed(u,e,_,c),o));++p);if(o){for(p=a-1;p>=0;--p)if(!A()){this.updateRangeFromParsed(u,e,_,c);break}}return u}getAllParsedValues(e){let i=this._cachedMeta._parsed,r=[],s,o,a;for(s=0,o=i.length;s<o;++s)a=i[s][e.axis],Et(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(e){let i=this._cachedMeta,r=i.iScale,s=i.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){let i=this._cachedMeta;this.update(e||"default"),i._clip=$q(Le(this.options.clip,Xq(i.xScale,i.yScale,this.getMaxOverflow())))}update(e){}draw(){let e=this._ctx,i=this.chart,r=this._cachedMeta,s=r.data||[],o=i.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop,d;for(r.dataset&&r.dataset.draw(e,o,l,c),d=l;d<l+c;++d){let h=s[d];h.hidden||(h.active&&u?a.push(h):h.draw(e,o))}for(d=0;d<a.length;++d)a[d].draw(e,o)}getStyle(e,i){let r=i?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,i,r){let s=this.getDataset(),o;if(e>=0&&e<this._cachedMeta.data.length){let a=this._cachedMeta.data[e];o=a.$context||(a.$context=ij(this.getContext(),e,a)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=nj(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,i){return this._resolveElementOptions(this.dataElementType.id,i,e)}_resolveElementOptions(e,i="default",r){let s=i==="active",o=this._cachedDataOpts,a=e+"-"+i,l=o[a],c=this.enableOptionSharing&&wn(r);if(l)return GT(l,c);let u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],p=u.getOptionScopes(this.getDataset(),d),_=Object.keys(bt.elements[e]),A=()=>this.getContext(r,s,i),v=u.resolveNamedOptions(p,_,A,h);return v.$shared&&(v.$shared=c,o[a]=Object.freeze(GT(v,c))),v}_resolveAnimations(e,i,r){let s=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,l=o[a];if(l)return l;let c;if(s.options.animation!==!1){let d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,i),p=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(p,this.getContext(e,r,i))}let u=new Hl(s,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,i){return!i||Cv(e)||this.chart._animationsDisabled}_getSharedOptions(e,i){let r=this.resolveDataElementOptions(e,i),s=this._sharedOptions,o=this.getSharedOptions(r),a=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,r),{sharedOptions:o,includeOptions:a}}updateElement(e,i,r,s){Cv(s)?Object.assign(e,r):this._resolveAnimations(i,s).update(e,r)}updateSharedOptions(e,i,r){e&&!Cv(i)&&this._resolveAnimations(void 0,i).update(e,r)}_setStyle(e,i,r,s){e.active=s;let o=this.getStyle(i,s);this._resolveAnimations(i,r,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,i,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,i,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let i=this._data,r=this._cachedMeta.data;for(let[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];let s=r.length,o=i.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,i,r=!0){let s=this._cachedMeta,o=s.data,a=e+i,l,c=u=>{for(u.length+=i,l=u.length-1;l>=a;l--)u[l]=u[l-i]};for(c(o),l=e;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(e,i),r&&this.updateElements(o,e,i,"reset")}updateElements(e,i,r,s){}_removeElements(e,i){let r=this._cachedMeta;if(this._parsing){let s=r._parsed.splice(e,i);r._stacked&&md(r,s)}r.data.splice(e,i)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[i,r,s]=e;this[i](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,i){i&&this._sync(["_removeElements",e,i]);let r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function sj(n,t){if(!n._cache.$bar){let e=n.getMatchingVisibleMetas(t),i=[];for(let r=0,s=e.length;r<s;r++)i=i.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=F0(i.sort((r,s)=>r-s))}return n._cache.$bar}function oj(n){let t=n.iScale,e=sj(t,n.type),i=t._length,r,s,o,a,l=()=>{o===32767||o===-32768||(wn(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=e.length;r<s;++r)o=t.getPixelForValue(e[r]),l();for(a=void 0,r=0,s=t.ticks.length;r<s;++r)o=t.getPixelForTick(r),l();return i}function aj(n,t,e,i){let r=e.barThickness,s,o;return ot(r)?(s=t.min*e.categoryPercentage,o=e.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:t.pixels[n]-s/2}}function lj(n,t,e,i){let r=t.pixels,s=r[n],o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null,l=e.categoryPercentage;o===null&&(o=s-(a===null?t.end-t.start:a-s)),a===null&&(a=s+s-o);let c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:e.barPercentage,start:c}}function cj(n,t,e,i){let r=e.parse(n[0],i),s=e.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s),l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function zI(n,t,e,i){return pt(n)?cj(n,t,e,i):t[e.axis]=e.parse(n,i),t}function KT(n,t,e,i){let r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,l=[],c,u,d,h;for(c=e,u=e+i;c<u;++c)h=t[c],d={},d[r.axis]=a||r.parse(o[c],c),l.push(zI(h,d,s,c));return l}function xv(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function uj(n,t,e){return n!==0?Di(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function dj(n){let t,e,i,r,s;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:i,reverse:t,top:r,bottom:s}}function hj(n,t,e,i){let r=t.borderSkipped,s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:l,top:c,bottom:u}=dj(n);r==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?r=c:(e._bottom||0)===i?r=u:(s[JT(u,o,a,l)]=!0,r=c)),s[JT(r,o,a,l)]=!0,n.borderSkipped=s}function JT(n,t,e,i){return i?(n=pj(n,t,e),n=XT(n,e,t)):n=XT(n,t,e),n}function pj(n,t,e){return n===t?e:n===e?t:n}function XT(n,t,e){return n==="start"?t:n==="end"?e:n}function fj(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}var gj=(()=>{class n extends Ws{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,i,r,s){return KT(e,i,r,s)}parseArrayData(e,i,r,s){return KT(e,i,r,s)}parseObjectData(e,i,r,s){let{iScale:o,vScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=o.axis==="x"?l:c,d=a.axis==="x"?l:c,h=[],p,_,A,v;for(p=r,_=r+s;p<_;++p)v=i[p],A={},A[o.axis]=o.parse(br(v,u),p),h.push(zI(br(v,d),A,a,p));return h}updateRangeFromParsed(e,i,r,s){super.updateRangeFromParsed(e,i,r,s);let o=r._custom;o&&i===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let i=this._cachedMeta,{iScale:r,vScale:s}=i,o=this.getParsed(e),a=o._custom,l=xv(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();let e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,e)}updateElements(e,i,r,s){let o=s==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:p}=this._getSharedOptions(i,s);for(let _=i;_<i+r;_++){let A=this.getParsed(_),v=o||ot(A[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(_),b=this._calculateBarIndexPixels(_,d),x=(A._stacks||{})[l.axis],N={horizontal:u,base:v.base,enableBorderRadius:!x||xv(A._custom)||a===x._top||a===x._bottom,x:u?v.head:b.center,y:u?b.center:v.head,height:u?b.size:Math.abs(v.size),width:u?Math.abs(v.size):b.size};p&&(N.options=h||this.resolveDataElementOptions(_,e[_].active?"active":s));let T=N.options||e[_].options;hj(N,T,x,a),fj(N,T,d.ratio),this.updateElement(e[_],_,N,s)}}_getStacks(e,i){let{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),o=r.options.stacked,a=[],l=this._cachedMeta.controller.getParsed(i),c=l&&l[r.axis],u=d=>{let h=d._parsed.find(_=>_[r.axis]===c),p=h&&h[d.vScale.axis];if(ot(p)||isNaN(p))return!0};for(let d of s)if(!(i!==void 0&&u(d))&&((o===!1||a.indexOf(d.stack)===-1||o===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let e=this.chart.scales,i=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===i).shift()}_getAxis(){let e={},i=this.getFirstScaleIdForIndexAxis();for(let r of this.chart.data.datasets)e[Le(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,i)]=!0;return Object.keys(e)}_getStackIndex(e,i,r){let s=this._getStacks(e,r),o=i!==void 0?s.indexOf(i):-1;return o===-1?s.length-1:o}_getRuler(){let e=this.options,i=this._cachedMeta,r=i.iScale,s=[],o,a;for(o=0,a=i.data.length;o<a;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));let l=e.barThickness;return{min:l||oj(i),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){let{_cachedMeta:{vScale:i,_stacked:r,index:s},options:{base:o,minBarLength:a}}=this,l=o||0,c=this.getParsed(e),u=c._custom,d=xv(u),h=c[i.axis],p=0,_=r?this.applyStack(i,c,r):h,A,v;_!==h&&(p=_-h,_=h),d&&(h=u.barStart,_=u.barEnd-u.barStart,h!==0&&Di(h)!==Di(u.barEnd)&&(p=0),p+=h);let b=!ot(o)&&!d?o:p,x=i.getPixelForValue(b);if(this.chart.getDataVisibility(e)?A=i.getPixelForValue(p+_):A=x,v=A-x,Math.abs(v)<a){v=uj(v,i,l)*a,h===l&&(x-=v/2);let N=i.getPixelForDecimal(0),T=i.getPixelForDecimal(1),k=Math.min(N,T),C=Math.max(N,T);x=Math.max(Math.min(x,C),k),A=x+v,r&&!d&&(c._stacks[i.axis]._visualValues[s]=i.getValueForPixel(A)-i.getValueForPixel(x))}if(x===i.getPixelForValue(l)){let N=Di(v)*i.getLineWidthForValue(l)/2;x+=N,v-=N}return{size:v,base:x,head:A,center:A+v/2}}_calculateBarIndexPixels(e,i){let r=i.scale,s=this.options,o=s.skipNull,a=Le(s.maxBarThickness,1/0),l,c,u=this._getAxisCount();if(i.grouped){let d=o?this._getStackCount(e):i.stackCount,h=s.barThickness==="flex"?lj(e,i,s,d*u):aj(e,i,s,d*u),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,_=this._getAxis().indexOf(Le(p,this.getFirstScaleIdForIndexAxis())),A=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+_;l=h.start+h.chunk*A+h.chunk/2,c=Math.min(a,h.chunk*h.ratio)}else l=r.getPixelForValue(this.getParsed(e)[r.axis],e),c=Math.min(a,i.min*i.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){let e=this._cachedMeta,i=e.vScale,r=e.data,s=r.length,o=0;for(;o<s;++o)this.getParsed(o)[i.axis]!==null&&!r[o].hidden&&r[o].draw(this._ctx)}}return n})(),mj=(()=>{class n extends Ws{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,i,r,s){let o=super.parsePrimitiveData(e,i,r,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+r).radius;return o}parseArrayData(e,i,r,s){let o=super.parseArrayData(e,i,r,s);for(let a=0;a<o.length;a++){let l=i[r+a];o[a]._custom=Le(l[2],this.resolveDataElementOptions(a+r).radius)}return o}parseObjectData(e,i,r,s){let o=super.parseObjectData(e,i,r,s);for(let a=0;a<o.length;a++){let l=i[r+a];o[a]._custom=Le(l&&l.r&&+l.r,this.resolveDataElementOptions(a+r).radius)}return o}getMaxOverflow(){let e=this._cachedMeta.data,i=0;for(let r=e.length-1;r>=0;--r)i=Math.max(i,e[r].size(this.resolveDataElementOptions(r))/2);return i>0&&i}getLabelAndValue(e){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(e),l=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y),u=a._custom;return{label:r[e]||"",value:"("+l+", "+c+(u?", "+u:"")+")"}}update(e){let i=this._cachedMeta.data;this.updateElements(i,0,i.length,e)}updateElements(e,i,r,s){let o=s==="reset",{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(i,s),d=a.axis,h=l.axis;for(let p=i;p<i+r;p++){let _=e[p],A=!o&&this.getParsed(p),v={},b=v[d]=o?a.getPixelForDecimal(.5):a.getPixelForValue(A[d]),x=v[h]=o?l.getBasePixel():l.getPixelForValue(A[h]);v.skip=isNaN(b)||isNaN(x),u&&(v.options=c||this.resolveDataElementOptions(p,_.active?"active":s),o&&(v.options.radius=0)),this.updateElement(_,p,v,s)}}resolveDataElementOptions(e,i){let r=this.getParsed(e),s=super.resolveDataElementOptions(e,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let o=s.radius;return i!=="active"&&(s.radius=0),s.radius+=Le(r&&r._custom,o),s}}return n})();function _j(n,t,e){let i=1,r=1,s=0,o=0;if(t<yt){let a=n,l=a+t,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),p=(N,T,k)=>$o(N,a,l,!0)?1:Math.max(T,T*e,k,k*e),_=(N,T,k)=>$o(N,a,l,!0)?-1:Math.min(T,T*e,k,k*e),A=p(0,c,d),v=p(xt,u,h),b=_(Ye,c,d),x=_(Ye+xt,u,h);i=(A-b)/2,r=(v-x)/2,s=-(A+b)/2,o=-(v+x)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}var Dd=(()=>{class n extends Ws{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let i=e.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:s}}=e.legend.options;return i.labels.map((o,a)=>{let c=e.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}}};constructor(e,i){super(e,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,i){let r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let o=c=>+r[c];if(Je(r[e])){let{key:c="value"}=this._parsing;o=u=>+br(r[u],c)}let a,l;for(a=e,l=e+i;a<l;++a)s._parsed[a]=o(a)}}_getRotation(){return jt(this.options.rotation-90)}_getCircumference(){return jt(this.options.circumference)}_getRotationExtents(){let e=yt,i=-yt;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){let s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),a=s._getCircumference();e=Math.min(e,o),i=Math.max(i,o+a)}return{rotation:e,circumference:i-e}}update(e){let i=this.chart,{chartArea:r}=i,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-a)/2,0),c=Math.min(ev(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:_,offsetX:A,offsetY:v}=_j(h,d,c),b=(r.width-a)/p,x=(r.height-a)/_,N=Math.max(Math.min(b,x)/2,0),T=I0(this.options.radius,N),k=Math.max(T*c,0),C=(T-k)/this._getVisibleDatasetWeightTotal();this.offsetX=A*T,this.offsetY=v*T,s.total=this.calculateTotal(),this.outerRadius=T-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*u,0),this.updateElements(o,0,o.length,e)}_circumference(e,i){let r=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/yt)}updateElements(e,i,r,s){let o=s==="reset",a=this.chart,l=a.chartArea,u=a.options.animation,d=(l.left+l.right)/2,h=(l.top+l.bottom)/2,p=o&&u.animateScale,_=p?0:this.innerRadius,A=p?0:this.outerRadius,{sharedOptions:v,includeOptions:b}=this._getSharedOptions(i,s),x=this._getRotation(),N;for(N=0;N<i;++N)x+=this._circumference(N,o);for(N=i;N<i+r;++N){let T=this._circumference(N,o),k=e[N],C={x:d+this.offsetX,y:h+this.offsetY,startAngle:x,endAngle:x+T,circumference:T,outerRadius:A,innerRadius:_};b&&(C.options=v||this.resolveDataElementOptions(N,k.active?"active":s)),x+=T,this.updateElement(k,N,C,s)}}calculateTotal(){let e=this._cachedMeta,i=e.data,r=0,s;for(s=0;s<i.length;s++){let o=e._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(e){let i=this._cachedMeta.total;return i>0&&!isNaN(e)?yt*(Math.abs(e)/i):0}getLabelAndValue(e){let i=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=Qo(i._parsed[e],r.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let i=0,r=this.chart,s,o,a,l,c;if(!e){for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),e=a.data,l=a.controller;break}}if(!e)return 0;for(s=0,o=e.length;s<o;++s)c=l.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(i=Math.max(i,c.borderWidth||0,c.hoverBorderWidth||0));return i}getMaxOffset(e){let i=0;for(let r=0,s=e.length;r<s;++r){let o=this.resolveDataElementOptions(r);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(e){let i=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(i+=this._getRingWeight(r));return i}_getRingWeight(e){return Math.max(Le(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})(),Aj=(()=>{class n extends Ws{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let i=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=i,a=this.chart._animationsDisabled,{start:l,count:c}=B0(i,s,a);this._drawStart=l,this._drawCount=c,q0(i)&&(l=0,c=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;let u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:u},e),this.updateElements(s,l,c,e)}updateElements(e,i,r,s){let o=s==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(i,s),p=a.axis,_=l.axis,{spanGaps:A,segment:v}=this.options,b=Gi(A)?A:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||o||s==="none",N=i+r,T=e.length,k=i>0&&this.getParsed(i-1);for(let C=0;C<T;++C){let M=e[C],O=x?M:{};if(C<i||C>=N){O.skip=!0;continue}let F=this.getParsed(C),j=ot(F[_]),H=O[p]=a.getPixelForValue(F[p],C),Q=O[_]=o||j?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,F,c):F[_],C);O.skip=isNaN(H)||isNaN(Q)||j,O.stop=C>0&&Math.abs(F[p]-k[p])>b,v&&(O.parsed=F,O.raw=u.data[C]),h&&(O.options=d||this.resolveDataElementOptions(C,M.active?"active":s)),x||this.updateElement(M,C,O,s),k=F}}getMaxOverflow(){let e=this._cachedMeta,i=e.dataset,r=i.options&&i.options.borderWidth||0,s=e.data||[];if(!s.length)return r;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,a)/2}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return n})(),UI=(()=>{class n extends Ws{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let i=e.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:s}}=e.legend.options;return i.labels.map((o,a)=>{let c=e.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,i){super(e,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){let i=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=Qo(i._parsed[e].r,r.options.locale);return{label:s[e]||"",value:o}}parseObjectData(e,i,r,s){return K0.bind(this)(e,i,r,s)}update(e){let i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,e)}getMinMax(){let e=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,s)=>{let o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){let e=this.chart,i=e.chartArea,r=e.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),a=Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0),l=(o-a)/e.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,i,r,s){let o=s==="reset",a=this.chart,c=a.options.animation,u=this._cachedMeta.rScale,d=u.xCenter,h=u.yCenter,p=u.getIndexAngle(0)-.5*Ye,_=p,A,v=360/this.countVisibleElements();for(A=0;A<i;++A)_+=this._computeAngle(A,s,v);for(A=i;A<i+r;A++){let b=e[A],x=_,N=_+this._computeAngle(A,s,v),T=a.getDataVisibility(A)?u.getDistanceFromCenterForValue(this.getParsed(A).r):0;_=N,o&&(c.animateScale&&(T=0),c.animateRotate&&(x=N=p));let k={x:d,y:h,innerRadius:0,outerRadius:T,startAngle:x,endAngle:N,options:this.resolveDataElementOptions(A,b.active?"active":s)};this.updateElement(b,A,k,s)}}countVisibleElements(){let e=this._cachedMeta,i=0;return e.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(e,i,r){return this.chart.getDataVisibility(e)?jt(this.resolveDataElementOptions(e,i).angle||r):0}}return n})(),yj=(()=>{class n extends Dd{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})(),vj=(()=>{class n extends Ws{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){let i=this._cachedMeta.vScale,r=this.getParsed(e);return{label:i.getLabels()[e],value:""+i.getLabelForValue(r[i.axis])}}parseObjectData(e,i,r,s){return K0.bind(this)(e,i,r,s)}update(e){let i=this._cachedMeta,r=i.dataset,s=i.data||[],o=i.iScale.getLabels();if(r.points=s,e!=="resize"){let a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);let l={_loop:!0,_fullLoop:o.length===s.length,options:a};this.updateElement(r,void 0,l,e)}this.updateElements(s,0,s.length,e)}updateElements(e,i,r,s){let o=this._cachedMeta.rScale,a=s==="reset";for(let l=i;l<i+r;l++){let c=e[l],u=this.resolveDataElementOptions(l,c.active?"active":s),d=o.getPointPositionForValue(l,this.getParsed(l).r),h=a?o.xCenter:d.x,p=a?o.yCenter:d.y,_={x:h,y:p,angle:d.angle,skip:isNaN(h)||isNaN(p),options:u};this.updateElement(c,l,_,s)}}}return n})(),wj=(()=>{class n extends Ws{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(e),l=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y);return{label:r[e]||"",value:"("+l+", "+c+")"}}update(e){let i=this._cachedMeta,{data:r=[]}=i,s=this.chart._animationsDisabled,{start:o,count:a}=B0(i,r,s);if(this._drawStart=o,this._drawCount=a,q0(i)&&(o=0,a=r.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:l,_dataset:c}=i;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=r;let u=this.resolveDatasetElementOptions(e);u.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:u},e)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(r,o,a,e)}addElements(){let{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,i,r,s){let o=s==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,d=this.resolveDataElementOptions(i,s),h=this.getSharedOptions(d),p=this.includeOptions(s,h),_=a.axis,A=l.axis,{spanGaps:v,segment:b}=this.options,x=Gi(v)?v:Number.POSITIVE_INFINITY,N=this.chart._animationsDisabled||o||s==="none",T=i>0&&this.getParsed(i-1);for(let k=i;k<i+r;++k){let C=e[k],M=this.getParsed(k),O=N?C:{},F=ot(M[A]),j=O[_]=a.getPixelForValue(M[_],k),H=O[A]=o||F?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,M,c):M[A],k);O.skip=isNaN(j)||isNaN(H)||F,O.stop=k>0&&Math.abs(M[_]-T[_])>x,b&&(O.parsed=M,O.raw=u.data[k]),p&&(O.options=h||this.resolveDataElementOptions(k,C.active?"active":s)),N||this.updateElement(C,k,O,s),T=M}this.updateSharedOptions(h,s,d)}getMaxOverflow(){let e=this._cachedMeta,i=e.data||[];if(!this.options.showLine){let l=0;for(let c=i.length-1;c>=0;--c)l=Math.max(l,i[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}let r=e.dataset,s=r.options&&r.options.borderWidth||0;if(!i.length)return s;let o=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,a)/2}}return n})(),bj=Object.freeze({__proto__:null,BarController:gj,BubbleController:mj,DoughnutController:Dd,LineController:Aj,PieController:yj,PolarAreaController:UI,RadarController:vj,ScatterController:wj});function ea(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Rv=class n{static override(t){Object.assign(n.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return ea()}parse(){return ea()}format(){return ea()}add(){return ea()}diff(){return ea()}startOf(){return ea()}endOf(){return ea()}},Sj={_date:Rv};function Cj(n,t,e,i){let{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&s.length){let c=a._reversePixels?sv:Ui;if(i){if(r._sharedOptions){let u=s[0],d=typeof u.getRange=="function"&&u.getRange(t);if(d){let h=c(s,t,e-d),p=c(s,t,e+d);return{lo:h.lo,hi:p.hi}}}}else{let u=c(s,t,e);if(l){let{vScale:d}=r._cachedMeta,{_parsed:h}=n,p=h.slice(0,u.lo+1).reverse().findIndex(A=>!ot(A[d.axis]));u.lo-=Math.max(0,p);let _=h.slice(u.hi).findIndex(A=>!ot(A[d.axis]));u.hi+=Math.max(0,_)}return u}}return{lo:0,hi:s.length-1}}function Ed(n,t,e,i,r){let s=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=s.length;a<l;++a){let{index:c,data:u}=s[a],{lo:d,hi:h}=Cj(s[a],t,o,r);for(let p=d;p<=h;++p){let _=u[p];_.skip||i(_,c,p)}}}function xj(n){let t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){let s=t?Math.abs(i.x-r.x):0,o=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Dv(n,t,e,i,r){let s=[];return!r&&!n.isPointInArea(t)||Ed(n,e,t,function(a,l,c){!r&&!Hi(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function Dj(n,t,e,i){let r=[];function s(o,a,l){let{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:d}=Xo(o,{x:t.x,y:t.y});$o(d,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return Ed(n,e,t,s),r}function Ej(n,t,e,i,r,s){let o=[],a=xj(e),l=Number.POSITIVE_INFINITY;function c(u,d,h){let p=u.inRange(t.x,t.y,r);if(i&&!p)return;let _=u.getCenterPoint(r);if(!(!!s||n.isPointInArea(_))&&!p)return;let v=a(t,_);v<l?(o=[{element:u,datasetIndex:d,index:h}],l=v):v===l&&o.push({element:u,datasetIndex:d,index:h})}return Ed(n,e,t,c),o}function Ev(n,t,e,i,r,s){return!s&&!n.isPointInArea(t)?[]:e==="r"&&!i?Dj(n,t,e,r):Ej(n,t,e,i,r,s)}function $T(n,t,e,i,r){let s=[],o=e==="x"?"inXRange":"inYRange",a=!1;return Ed(n,e,t,(l,c,u)=>{l[o]&&l[o](t[e],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,r))}),i&&!a?[]:s}var Mj={evaluateInteractionItems:Ed,modes:{index(n,t,e,i){let r=ss(t,n),s=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?Dv(n,r,s,i,o):Ev(n,r,s,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{let u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(n,t,e,i){let r=ss(t,n),s=e.axis||"xy",o=e.includeInvisible||!1,a=e.intersect?Dv(n,r,s,i,o):Ev(n,r,s,!1,i,o);if(a.length>0){let l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,t,e,i){let r=ss(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;return Dv(n,r,s,i,o)},nearest(n,t,e,i){let r=ss(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;return Ev(n,r,s,e.intersect,i,o)},x(n,t,e,i){let r=ss(t,n);return $T(n,r,"x",e.intersect,i)},y(n,t,e,i){let r=ss(t,n);return $T(n,r,"y",e.intersect,i)}}},HI=["left","top","right","bottom"];function _d(n,t){return n.filter(e=>e.pos===t)}function QT(n,t){return n.filter(e=>HI.indexOf(e.pos)===-1&&e.box.axis===t)}function Ad(n,t){return n.sort((e,i)=>{let r=t?i:e,s=t?e:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function Tj(n){let t=[],e,i,r,s,o,a;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:s,options:{stack:o,stackWeight:a=1}}=r,t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}function Ij(n){let t={};for(let e of n){let{stack:i,pos:r,stackWeight:s}=e;if(!i||!HI.includes(r))continue;let o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}function kj(n,t){let e=Ij(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t,s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];let{fullSize:l}=a.box,c=e[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&t.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&t.availableHeight)}return e}function Nj(n){let t=Tj(n),e=Ad(t.filter(c=>c.box.fullSize),!0),i=Ad(_d(t,"left"),!0),r=Ad(_d(t,"right")),s=Ad(_d(t,"top"),!0),o=Ad(_d(t,"bottom")),a=QT(t,"x"),l=QT(t,"y");return{fullSize:e,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:_d(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function ZT(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function YI(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function Pj(n,t,e,i){let{pos:r,box:s}=e,o=n.maxPadding;if(!Je(r)){e.size&&(n[r]-=e.size);let d=i[e.stack]||{size:0,count:1};d.size=Math.max(d.size,e.horizontal?s.height:s.width),e.size=d.size/d.count,n[r]+=e.size}s.getPadding&&YI(o,s.getPadding());let a=Math.max(0,t.outerWidth-ZT(o,n,"left","right")),l=Math.max(0,t.outerHeight-ZT(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:c,other:u}:{same:u,other:c}}function Oj(n){let t=n.maxPadding;function e(i){let r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function Rj(n,t){let e=t.maxPadding;function i(r){let s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],e[o])}),s}return i(n?["left","right"]:["top","bottom"])}function wd(n,t,e,i){let r=[],s,o,a,l,c,u;for(s=0,o=n.length,c=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||t.w,a.height||t.h,Rj(a.horizontal,t));let{same:d,other:h}=Pj(t,e,a,i);c|=d&&r.length,u=u||h,l.fullSize||r.push(a)}return c&&wd(r,t,e,i)||u}function ig(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function eI(n,t,e,i){let r=e.padding,{x:s,y:o}=t;for(let a of n){let l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){let d=t.w*u,h=c.size||l.height;wn(c.start)&&(o=c.start),l.fullSize?ig(l,r.left,o,e.outerWidth-r.right-r.left,h):ig(l,t.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{let d=t.h*u,h=c.size||l.width;wn(c.start)&&(s=c.start),l.fullSize?ig(l,s,r.top,h,e.outerHeight-r.bottom-r.top):ig(l,s,t.top+c.placed,h,d),c.start=s,c.placed+=d,s=l.right}}t.x=s,t.y=o}var Tn={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){let e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;let r=Wt(n.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(e-r.height,0),a=Nj(n.boxes),l=a.vertical,c=a.horizontal;_t(n.boxes,A=>{typeof A.beforeLayout=="function"&&A.beforeLayout()});let u=l.reduce((A,v)=>v.box.options&&v.box.options.display===!1?A:A+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},r);YI(h,Wt(i));let p=Object.assign({maxPadding:h,w:s,h:o,x:r.left,y:r.top},r),_=kj(l.concat(c),d);wd(a.fullSize,p,d,_),wd(l,p,d,_),wd(c,p,d,_)&&wd(l,p,d,_),Oj(p),eI(a.leftAndTop,p,d,_),p.x+=p.w,p.y+=p.h,eI(a.rightAndBottom,p,d,_),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},_t(a.chartArea,A=>{let v=A.box;Object.assign(v,n.chartArea),v.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}},dg=class{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}},Fv=class extends dg{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}},cg="$chartjs",Fj={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},tI=n=>n===null||n==="";function Lj(n,t){let e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[cg]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",tI(r)){let s=$0(n,"width");s!==void 0&&(n.width=s)}if(tI(i))if(n.style.height==="")n.height=n.width/(t||2);else{let s=$0(n,"height");s!==void 0&&(n.height=s)}return n}var GI=Av?{passive:!0}:!1;function Vj(n,t,e){n&&n.addEventListener(t,e,GI)}function Bj(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,GI)}function qj(n,t){let e=Fj[n.type]||n.type,{x:i,y:r}=ss(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function hg(n,t){for(let e of n)if(e===t||e.contains(t))return!0}function jj(n,t,e){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||hg(a.addedNodes,i),o=o&&!hg(a.removedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function Wj(n,t,e){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||hg(a.removedNodes,i),o=o&&!hg(a.addedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}var Sd=new Map,nI=0;function KI(){let n=window.devicePixelRatio;n!==nI&&(nI=n,Sd.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function zj(n,t){Sd.size||window.addEventListener("resize",KI),Sd.set(n,t)}function Uj(n){Sd.delete(n),Sd.size||window.removeEventListener("resize",KI)}function Hj(n,t,e){let i=n.canvas,r=i&&gd(i);if(!r)return;let s=V0((a,l)=>{let c=r.clientWidth;e(a,l),c<r.clientWidth&&e()},window),o=new ResizeObserver(a=>{let l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(r),zj(n,s),o}function Mv(n,t,e){e&&e.disconnect(),t==="resize"&&Uj(n)}function Yj(n,t,e){let i=n.canvas,r=V0(s=>{n.ctx!==null&&e(qj(s,n))},n);return Vj(i,t,r),r}var Lv=class extends dg{acquireContext(t,e){let i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(Lj(t,e),i):null}releaseContext(t){let e=t.canvas;if(!e[cg])return!1;let i=e[cg].initial;["height","width"].forEach(s=>{let o=i[s];ot(o)?e.removeAttribute(s):e.setAttribute(s,o)});let r=i.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[cg],!0}addEventListener(t,e,i){this.removeEventListener(t,e);let r=t.$proxies||(t.$proxies={}),o={attach:jj,detach:Wj,resize:Hj}[e]||Yj;r[e]=o(t,e,i)}removeEventListener(t,e){let i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:Mv,detach:Mv,resize:Mv}[e]||Bj)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return _v(t,e,i,r)}isAttached(t){let e=t&&gd(t);return!!(e&&e.isConnected)}};function Gj(n){return!fd()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Fv:Lv}var on=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){let{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Gi(this.x)&&Gi(this.y)}getProps(t,e){let i=this.$animations;if(!e||!i)return this;let r={};return t.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}};function Kj(n,t){let e=n.options.ticks,i=Jj(n),r=Math.min(e.maxTicksLimit||i,i),s=e.major.enabled?$j(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return Qj(t,c,s,o/r),c;let u=Xj(s,t,r);if(o>0){let d,h,p=o>1?Math.round((l-a)/(o-1)):null;for(rg(t,c,u,ot(p)?0:a-p,a),d=0,h=o-1;d<h;d++)rg(t,c,u,s[d],s[d+1]);return rg(t,c,u,l,ot(p)?t.length:l+p),c}return rg(t,c,u),c}function Jj(n){let t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function Xj(n,t,e){let i=Zj(n),r=t.length/e;if(!i)return Math.max(r,1);let s=nv(i);for(let o=0,a=s.length-1;o<a;o++){let l=s[o];if(l>r)return l}return Math.max(r,1)}function $j(n){let t=[],e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function Qj(n,t,e,i){let r=0,s=e[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(t.push(n[o]),r++,s=e[r*i])}function rg(n,t,e,i,r){let s=Le(i,0),o=Math.min(Le(r,n.length),n.length),a=0,l,c,u;for(e=Math.ceil(e),r&&(l=r-i,e=l/Math.floor(l/e)),u=s;u<0;)a++,u=Math.round(s+a*e);for(c=Math.max(s,0);c<o;c++)c===u&&(t.push(n[c]),a++,u=Math.round(s+a*e))}function Zj(n){let t=n.length,e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}var eW=n=>n==="left"?"right":n==="right"?"left":n,iI=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,rI=(n,t)=>Math.min(t||n,n);function sI(n,t){let e=[],i=n.length/t,r=n.length,s=0;for(;s<r;s+=i)e.push(n[Math.floor(s)]);return e}function tW(n,t,e){let i=n.ticks.length,r=Math.min(t,i-1),s=n._startPixel,o=n._endPixel,a=1e-6,l=n.getPixelForTick(r),c;if(!(e&&(i===1?c=Math.max(l-s,o-l):t===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(r-1))/2,l+=r<t?c:-c,l<s-a||l>o+a)))return l}function nW(n,t){_t(n,e=>{let i=e.gc,r=i.length/2,s;if(r>t){for(s=0;s<r;++s)delete e.data[i[s]];i.splice(0,r)}})}function yd(n){return n.drawTicks?n.tickLength:0}function oI(n,t){if(!n.display)return 0;let e=Ot(n.font,t),i=Wt(n.padding);return(pt(n.text)?n.text.length:1)*e.lineHeight+i.height}function iW(n,t){return Sr(n,{scale:t,type:"scale"})}function rW(n,t,e){return Sr(n,{tick:e,index:t,type:"tick"})}function sW(n,t,e){let i=cd(n);return(e&&t!=="right"||!e&&t==="right")&&(i=eW(i)),i}function oW(n,t,e,i){let{top:r,left:s,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l,d=0,h,p,_,A=o-r,v=a-s;if(n.isHorizontal()){if(p=hn(i,s,a),Je(e)){let b=Object.keys(e)[0],x=e[b];_=u[b].getPixelForValue(x)+A-t}else e==="center"?_=(c.bottom+c.top)/2+A-t:_=iI(n,e,t);h=a-s}else{if(Je(e)){let b=Object.keys(e)[0],x=e[b];p=u[b].getPixelForValue(x)-v+t}else e==="center"?p=(c.left+c.right)/2-v+t:p=iI(n,e,t);_=hn(i,o,r),d=e==="left"?-xt:xt}return{titleX:p,titleY:_,maxWidth:h,rotation:d}}var na=class n extends on{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=Bn(t,Number.POSITIVE_INFINITY),e=Bn(e,Number.NEGATIVE_INFINITY),i=Bn(i,Number.POSITIVE_INFINITY),r=Bn(r,Number.NEGATIVE_INFINITY),{min:Bn(t,i),max:Bn(e,r),minDefined:Et(t),maxDefined:Et(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:e,max:i};let a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),r||(e=Math.min(e,o.min)),s||(i=Math.max(i,o.max));return e=s&&e>i?i:e,i=r&&e>i?e:i,{min:Bn(e,Bn(i,e)),max:Bn(i,Bn(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ft(this.options.beforeUpdate,[this])}update(t,e,i){let{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=pv(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?sI(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Kj(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ft(this.options.afterUpdate,[this])}beforeSetDimensions(){ft(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ft(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ft(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ft(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e=this.options.ticks,i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i],s.label=ft(e.callback,[s.value,i,t],this)}afterTickToLabelConversion(){ft(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ft(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,e=t.ticks,i=rI(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,s=e.maxRotation,o=r,a,l,c;if(!this._isVisible()||!e.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}let u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,p=en(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/i:p/(i-1),d+6>a&&(a=p/(i-(t.offset?.5:1)),l=this.maxHeight-yd(t.grid)-e.padding-oI(t.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=Jo(Math.min(Math.asin(en((u.highest.height+6)/a,-1,1)),Math.asin(en(l/c,-1,1))-Math.asin(en(h/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){ft(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ft(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let l=oI(r,e.options.font);if(a?(t.width=this.maxWidth,t.height=yd(s)+l):(t.height=this.maxHeight,t.width=yd(s)+l),i.display&&this.ticks.length){let{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),p=i.padding*2,_=jt(this.labelRotation),A=Math.cos(_),v=Math.sin(_);if(a){let b=i.mirror?0:v*d.width+A*h.height;t.height=Math.min(this.maxHeight,t.height+b+p)}else{let b=i.mirror?0:A*d.width+v*h.height;t.width=Math.min(this.maxWidth,t.width+b+p)}this._calculatePadding(c,u,v,A)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){let{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),h=0,p=0;l?c?(h=r*t.width,p=i*e.height):(h=i*t.height,p=r*e.width):s==="start"?p=e.width:s==="end"?h=t.width:s!=="inner"&&(h=t.width/2,p=e.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=e.height/2,d=t.height/2;s==="start"?(u=0,d=t.height):s==="end"&&(u=e.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ft(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)ot(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,i=this.ticks;e<i.length&&(i=sI(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){let{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(e/rI(e,i)),c=0,u=0,d,h,p,_,A,v,b,x,N,T,k;for(d=0;d<e;d+=l){if(_=t[d].label,A=this._resolveTickFontOptions(d),r.font=v=A.string,b=s[v]=s[v]||{data:{},gc:[]},x=A.lineHeight,N=T=0,!ot(_)&&!pt(_))N=ql(r,b.data,b.gc,N,_),T=x;else if(pt(_))for(h=0,p=_.length;h<p;++h)k=_[h],!ot(k)&&!pt(k)&&(N=ql(r,b.data,b.gc,N,k),T+=x);o.push(N),a.push(T),c=Math.max(N,c),u=Math.max(T,u)}nW(s,e);let C=o.indexOf(c),M=a.indexOf(u),O=F=>({width:o[F]||0,height:a[F]||0});return{first:O(0),last:O(e-1),widest:O(C),highest:O(M),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return rv(this._alignToPixels?ns(this.chart,e,0):e)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){let e=this.ticks||[];if(t>=0&&t<e.length){let i=e[t];return i.$context||(i.$context=rW(this.getContext(),t,i))}return this.$context||(this.$context=iW(this.chart.getContext(),this))}_tickSize(){let t=this.options.ticks,e=jt(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=yd(s),p=[],_=a.setContext(this.getContext()),A=_.display?_.width:0,v=A/2,b=function(X){return ns(i,X,A)},x,N,T,k,C,M,O,F,j,H,Q,ie;if(o==="top")x=b(this.bottom),M=this.bottom-h,F=x-v,H=b(t.top)+v,ie=t.bottom;else if(o==="bottom")x=b(this.top),H=t.top,ie=b(t.bottom)-v,M=x+v,F=this.top+h;else if(o==="left")x=b(this.right),C=this.right-h,O=x-v,j=b(t.left)+v,Q=t.right;else if(o==="right")x=b(this.left),j=t.left,Q=b(t.right)-v,C=x+v,O=this.left+h;else if(e==="x"){if(o==="center")x=b((t.top+t.bottom)/2+.5);else if(Je(o)){let X=Object.keys(o)[0],te=o[X];x=b(this.chart.scales[X].getPixelForValue(te))}H=t.top,ie=t.bottom,M=x+v,F=M+h}else if(e==="y"){if(o==="center")x=b((t.left+t.right)/2);else if(Je(o)){let X=Object.keys(o)[0],te=o[X];x=b(this.chart.scales[X].getPixelForValue(te))}C=x-v,O=C-h,j=t.left,Q=t.right}let ue=Le(r.ticks.maxTicksLimit,d),G=Math.max(1,Math.ceil(d/ue));for(N=0;N<d;N+=G){let X=this.getContext(N),te=s.setContext(X),ve=a.setContext(X),he=te.lineWidth,ge=te.color,re=ve.dash||[],de=ve.dashOffset,me=te.tickWidth,we=te.tickColor,qe=te.tickBorderDash||[],Ce=te.tickBorderDashOffset;T=tW(this,N,l),T!==void 0&&(k=ns(i,T,he),c?C=O=j=Q=k:M=F=H=ie=k,p.push({tx1:C,ty1:M,tx2:O,ty2:F,x1:j,y1:H,x2:Q,y2:ie,width:he,color:ge,borderDash:re,borderDashOffset:de,tickWidth:me,tickColor:we,tickBorderDash:qe,tickBorderDashOffset:Ce}))}return this._ticksLength=d,this._borderValue=x,p}_computeLabelItems(t){let e=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,h=yd(i.grid),p=h+u,_=d?-u:p,A=-jt(this.labelRotation),v=[],b,x,N,T,k,C,M,O,F,j,H,Q,ie="middle";if(r==="top")C=this.bottom-_,M=this._getXAxisLabelAlignment();else if(r==="bottom")C=this.top+_,M=this._getXAxisLabelAlignment();else if(r==="left"){let G=this._getYAxisLabelAlignment(h);M=G.textAlign,k=G.x}else if(r==="right"){let G=this._getYAxisLabelAlignment(h);M=G.textAlign,k=G.x}else if(e==="x"){if(r==="center")C=(t.top+t.bottom)/2+p;else if(Je(r)){let G=Object.keys(r)[0],X=r[G];C=this.chart.scales[G].getPixelForValue(X)+p}M=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")k=(t.left+t.right)/2-p;else if(Je(r)){let G=Object.keys(r)[0],X=r[G];k=this.chart.scales[G].getPixelForValue(X)}M=this._getYAxisLabelAlignment(h).textAlign}e==="y"&&(l==="start"?ie="top":l==="end"&&(ie="bottom"));let ue=this._getLabelSizes();for(b=0,x=a.length;b<x;++b){N=a[b],T=N.label;let G=s.setContext(this.getContext(b));O=this.getPixelForTick(b)+s.labelOffset,F=this._resolveTickFontOptions(b),j=F.lineHeight,H=pt(T)?T.length:1;let X=H/2,te=G.color,ve=G.textStrokeColor,he=G.textStrokeWidth,ge=M;o?(k=O,M==="inner"&&(b===x-1?ge=this.options.reverse?"left":"right":b===0?ge=this.options.reverse?"right":"left":ge="center"),r==="top"?c==="near"||A!==0?Q=-H*j+j/2:c==="center"?Q=-ue.highest.height/2-X*j+j:Q=-ue.highest.height+j/2:c==="near"||A!==0?Q=j/2:c==="center"?Q=ue.highest.height/2-X*j:Q=ue.highest.height-H*j,d&&(Q*=-1),A!==0&&!G.showLabelBackdrop&&(k+=j/2*Math.sin(A))):(C=O,Q=(1-H)*j/2);let re;if(G.showLabelBackdrop){let de=Wt(G.backdropPadding),me=ue.heights[b],we=ue.widths[b],qe=Q-de.top,Ce=0-de.left;switch(ie){case"middle":qe-=me/2;break;case"bottom":qe-=me;break}switch(M){case"center":Ce-=we/2;break;case"right":Ce-=we;break;case"inner":b===x-1?Ce-=we:b>0&&(Ce-=we/2);break}re={left:Ce,top:qe,width:we+de.width,height:me+de.height,color:G.backdropColor}}v.push({label:T,font:F,textOffset:Q,options:{rotation:A,color:te,strokeColor:ve,strokeWidth:he,textAlign:ge,textBaseline:ie,translation:[k,C],backdrop:re}})}return v}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-jt(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){let{position:e,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=t+s,l=o.widest.width,c,u;return e==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):e==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:i,top:r,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,s,o),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){let e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),s,o,a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(e.display)for(s=0,o=r.length;s<o;++s){let l=r[s];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:e,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;let a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue,c,u,d,h;this.isHorizontal()?(c=ns(t,this.left,o)-o/2,u=ns(t,this.right,a)+a/2,d=h=l):(d=ns(t,this.top,o)-o/2,h=ns(t,this.bottom,a)+a/2,c=u=l),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(c,d),e.lineTo(u,h),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;let i=this.ctx,r=this._computeLabelArea();r&&Vs(i,r);let s=this.getLabelItems(t);for(let o of s){let a=o.options,l=o.font,c=o.label,u=o.textOffset;is(i,c,0,u,l,a)}r&&Bs(i)}drawTitle(){let{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;let s=Ot(i.font),o=Wt(i.padding),a=i.align,l=s.lineHeight/2;e==="bottom"||e==="center"||Je(e)?(l+=o.bottom,pt(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;let{titleX:c,titleY:u,maxWidth:d,rotation:h}=oW(this,l,e,a);is(t,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:h,textAlign:sW(a,e,r),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,i=Le(t.grid&&t.grid.z,-1),r=Le(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){let e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[],s,o;for(s=0,o=e.length;s<o;++s){let a=e[s];a[i]===this.id&&(!t||a.type===t)&&r.push(a)}return r}_resolveTickFontOptions(t){let e=this.options.ticks.setContext(this.getContext(t));return Ot(e.font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},Ul=class{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let e=Object.getPrototypeOf(t),i;cW(e)&&(i=this.register(e));let r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,aW(t,o,i),this.override&&bt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){let e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in bt[r]&&(delete bt[r][i],this.override&&delete Ls[i])}};function aW(n,t,e){let i=Yo(Object.create(null),[e?bt.get(e):{},bt.get(t),n.defaults]);bt.set(t,i),n.defaultRoutes&&lW(t,n.defaultRoutes),n.descriptors&&bt.describe(t,n.descriptors)}function lW(n,t){Object.keys(t).forEach(e=>{let i=e.split("."),r=i.pop(),s=[n].concat(i).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");bt.route(s,r,l,a)})}function cW(n){return"id"in n&&"defaults"in n}var Vv=class{constructor(){this.controllers=new Ul(Ws,"datasets",!0),this.elements=new Ul(on,"elements"),this.plugins=new Ul(Object,"plugins"),this.scales=new Ul(na,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{let s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):_t(r,o=>{let a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,i){let r=od(t);ft(i["before"+r],[],i),e[t](i),ft(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){let r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}},xr=new Vv,Bv=class{constructor(){this._init=[]}notify(t,e,i,r){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));let s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,e,i);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,r){r=r||{};for(let s of t){let o=s.plugin,a=o[i],l=[e,r,s.options];if(ft(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){ot(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let i=t&&t.config,r=Le(i.options&&i.options.plugins,{}),s=uW(i);return r===!1&&!e?[]:hW(t,s,r,e)}_notifyStateChanges(t){let e=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}};function uW(n){let t={},e=[],i=Object.keys(xr.plugins.items);for(let s=0;s<i.length;s++)e.push(xr.getPlugin(i[s]));let r=n.plugins||[];for(let s=0;s<r.length;s++){let o=r[s];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function dW(n,t){return!t&&n===!1?null:n===!0?{}:n}function hW(n,{plugins:t,localIds:e},i,r){let s=[],o=n.getContext();for(let a of t){let l=a.id,c=dW(i[l],r);c!==null&&s.push({plugin:a,options:pW(n.config,{plugin:a,local:e[l]},c,o)})}return s}function pW(n,{plugin:t,local:e},i,r){let s=n.pluginScopeKeys(t),o=n.getOptionScopes(i,s);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function qv(n,t){let e=bt.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function fW(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function gW(n,t){return n===t?"_index_":"_value_"}function aI(n){if(n==="x"||n==="y"||n==="r")return n}function mW(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function jv(n,...t){if(aI(n))return n;for(let e of t){let i=e.axis||mW(e.position)||n.length>1&&aI(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function lI(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function _W(n,t){if(t.data&&t.data.datasets){let e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return lI(n,"x",e[0])||lI(n,"y",e[0])}return{}}function AW(n,t){let e=Ls[n.type]||{scales:{}},i=t.scales||{},r=qv(n.type,t),s=Object.create(null);return Object.keys(i).forEach(o=>{let a=i[o];if(!Je(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let l=jv(o,a,_W(o,n),bt.scales[a.type]),c=gW(l,r),u=e.scales||{};s[o]=Go(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,l=o.indexAxis||qv(a,t),u=(Ls[a]||{}).scales||{};Object.keys(u).forEach(d=>{let h=fW(d,l),p=o[h+"AxisID"]||h;s[p]=s[p]||Object.create(null),Go(s[p],[{axis:h},i[p],u[d]])})}),Object.keys(s).forEach(o=>{let a=s[o];Go(a,[bt.scales[a.type],bt.scale])}),s}function JI(n){let t=n.options||(n.options={});t.plugins=Le(t.plugins,{}),t.scales=AW(n,t)}function XI(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function yW(n){return n=n||{},n.data=XI(n.data),JI(n),n}var cI=new Map,$I=new Set;function sg(n,t){let e=cI.get(n);return e||(e=t(),cI.set(n,e),$I.add(e)),e}var vd=(n,t,e)=>{let i=br(t,e);i!==void 0&&n.add(i)},Wv=class{constructor(t){this._config=yW(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=XI(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),JI(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return sg(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return sg(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return sg(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id,i=this.type;return sg(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let i=this._scopeCache,r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){let{options:r,type:s}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;let l=new Set;e.forEach(u=>{t&&(l.add(t),u.forEach(d=>vd(l,t,d))),u.forEach(d=>vd(l,r,d)),u.forEach(d=>vd(l,Ls[s]||{},d)),u.forEach(d=>vd(l,bt,d)),u.forEach(d=>vd(l,z0,d))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),$I.has(e)&&o.set(e,c),c}chartOptionScopes(){let{options:t,type:e}=this;return[t,Ls[e]||{},bt.datasets[e]||{},{type:e},bt,z0]}resolveNamedOptions(t,e,i,r=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=uI(this._resolverCache,t,r),l=o;if(wW(o,e)){s.$shared=!1,i=vn(i)?i():i;let c=this.createResolver(t,i,a);l=Fs(o,i,c)}for(let c of e)s[c]=l[c];return s}createResolver(t,e,i=[""],r){let{resolver:s}=uI(this._resolverCache,t,i);return Je(e)?Fs(s,e,void 0,r):s}};function uI(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));let r=e.join(),s=i.get(r);return s||(s={resolver:pd(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}var vW=n=>Je(n)&&Object.getOwnPropertyNames(n).some(t=>vn(n[t]));function wW(n,t){let{isScriptable:e,isIndexable:i}=G0(n);for(let r of t){let s=e(r),o=i(r),a=(o||s)&&n[r];if(s&&(vn(a)||vW(a))||o&&pt(a))return!0}return!1}var bW="4.5.0",SW=["top","bottom","left","right","chartArea"];function dI(n,t){return n==="top"||n==="bottom"||SW.indexOf(n)===-1&&t==="x"}function hI(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function pI(n){let t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),ft(e&&e.onComplete,[n],t)}function CW(n){let t=n.chart,e=t.options.animation;ft(e&&e.onProgress,[n],t)}function QI(n){return fd()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var ug={},fI=n=>{let t=QI(n);return Object.values(ug).filter(e=>e.canvas===t).pop()};function xW(n,t,e){let i=Object.keys(n);for(let r of i){let s=+r;if(s>=t){let o=n[r];delete n[r],(e>0||s>t)&&(n[s+e]=o)}}}function DW(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}var Dr=(()=>{class n{static defaults=bt;static instances=ug;static overrides=Ls;static registry=xr;static version=bW;static getChart=fI;static register(...e){xr.add(...e),gI()}static unregister(...e){xr.remove(...e),gI()}constructor(e,i){let r=this.config=new Wv(i),s=QI(e),o=fI(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||Gj(s)),this.platform.updateConfig(r);let l=this.platform.acquireContext(s,a.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=Z1(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Bv,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=lv(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],ug[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}os.listen(this,"complete",pI),os.listen(this,"progress",CW),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:i},width:r,height:s,_aspectRatio:o}=this;return ot(e)?i&&o?o:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return xr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():X0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return U0(this.canvas,this.ctx),this}stop(){return os.stop(this),this}resize(e,i){os.running(this)?this._resizeBeforeDraw={width:e,height:i}:this._resize(e,i)}_resize(e,i){let r=this.options,s=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,e,i,o),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,X0(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),ft(r.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};_t(i,(r,s)=>{r.id=s})}buildOrUpdateScales(){let e=this.options,i=e.scales,r=this.scales,s=Object.keys(r).reduce((a,l)=>(a[l]=!1,a),{}),o=[];i&&(o=o.concat(Object.keys(i).map(a=>{let l=i[a],c=jv(a,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),_t(o,a=>{let l=a.options,c=l.id,u=jv(c,l),d=Le(l.type,a.dtype);(l.position===void 0||dI(l.position,u)!==dI(a.dposition))&&(l.position=a.dposition),s[c]=!0;let h=null;if(c in r&&r[c].type===d)h=r[c];else{let p=xr.getScale(d);h=new p({id:c,type:d,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(l,e)}),_t(s,(a,l)=>{a||delete r[l]}),_t(r,a=>{Tn.configure(this,a,a.options),Tn.addBox(this,a)})}_updateMetasets(){let e=this._metasets,i=this.data.datasets.length,r=e.length;if(e.sort((s,o)=>s.index-o.index),r>i){for(let s=i;s<r;++s)this._destroyDatasetMeta(s);e.splice(i,r-i)}this._sortedMetasets=e.slice(0).sort(hI("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:i}}=this;e.length>i.length&&delete this._stacks,e.forEach((r,s)=>{i.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let e=[],i=this.data.datasets,r,s;for(this._removeUnreferencedMetasets(),r=0,s=i.length;r<s;r++){let o=i[r],a=this.getDatasetMeta(r),l=o.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=l,a.indexAxis=o.indexAxis||qv(l,this.options),a.order=o.order||0,a.index=r,a.label=""+o.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{let c=xr.getController(l),{datasetElementType:u,dataElementType:d}=bt.datasets[l];Object.assign(c,{dataElementType:xr.getElement(d),datasetElementType:u&&xr.getElement(u)}),a.controller=new c(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){_t(this.data.datasets,(e,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let i=this.config;i.update();let r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){let{controller:h}=this.getDatasetMeta(u),p=!s&&o.indexOf(h)===-1;h.buildOrUpdateElements(p),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||_t(o,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(hI("z","_idx"));let{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){_t(this.scales,e=>{Tn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options,i=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!k0(i,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this,i=this._getUniformDataChanges()||[];for(let{method:r,start:s,count:o}of i){let a=r==="_removeElements"?-o:o;xW(e,s,a)}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let i=this.data.datasets.length,r=o=>new Set(e.filter(a=>a[0]===o).map((a,l)=>l+","+a.splice(1).join(","))),s=r(0);for(let o=1;o<i;o++)if(!k0(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Tn.update(this,this.width,this.height,e);let i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],_t(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let i=0,r=this.data.datasets.length;i<r;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,vn(e)?e({datasetIndex:i}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,i){let r=this.getDatasetMeta(e),s={meta:r,index:e,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(os.has(this)?this.attached&&!os.running(this)&&os.start(this):(this.draw(),pI({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(this.chartArea);for(this._drawDatasets();e<i.length;++e)i[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let i=this._sortedMetasets,r=[],s,o;for(s=0,o=i.length;s<o;++s){let a=i[s];(!e||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let e=this.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i)this._drawDataset(e[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let i=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=ng(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Vs(i,s),e.controller.draw(),s&&Bs(i),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Hi(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,i,r,s){let o=Mj.modes[i];return typeof o=="function"?o(this,e,r,s):[]}getDatasetMeta(e){let i=this.data.datasets[e],r=this._metasets,s=r.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:e,_dataset:i,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Sr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let i=this.data.datasets[e];if(!i)return!1;let r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!i.hidden}setDatasetVisibility(e,i){let r=this.getDatasetMeta(e);r.hidden=!i}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,i,r){let s=r?"show":"hide",o=this.getDatasetMeta(e),a=o.controller._resolveAnimations(void 0,s);wn(i)?(o.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),a.update(o,{visible:r}),this.update(l=>l.datasetIndex===e?s:void 0))}hide(e,i){this._updateVisibility(e,i,!1)}show(e,i){this._updateVisibility(e,i,!0)}_destroyDatasetMeta(e){let i=this._metasets[e];i&&i.controller&&i.controller._destroy(),delete this._metasets[e]}_stop(){let e,i;for(this.stop(),os.remove(this),e=0,i=this.data.datasets.length;e<i;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:i}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),U0(e,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete ug[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,i=this.platform,r=(o,a)=>{i.addEventListener(this,o,a),e[o]=a},s=(o,a,l)=>{o.offsetX=a,o.offsetY=l,this._eventHandler(o)};_t(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,i=this.platform,r=(c,u)=>{i.addEventListener(this,c,u),e[c]=u},s=(c,u)=>{e[c]&&(i.removeEventListener(this,c,u),delete e[c])},o=(c,u)=>{this.canvas&&this.resize(c,u)},a,l=()=>{s("attach",l),this.attached=!0,this.resize(),r("resize",o),r("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",l)},i.isAttached(this.canvas)?l():a()}unbindEvents(){_t(this._listeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._listeners={},_t(this._responsiveListeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,i,r){let s=r?"set":"remove",o,a,l,c;for(i==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){a=e[l];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let i=this._active||[],r=e.map(({datasetIndex:o,index:a})=>{let l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[a],index:a}});!Wl(r,i)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(e,i,r){return this._plugins.notify(this,e,i,r)}isPluginEnabled(e){return this._plugins._cache.filter(i=>i.plugin.id===e).length===1}_updateHoverStyles(e,i,r){let s=this.options.hover,o=(c,u)=>c.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=o(i,e),l=r?e:o(e,i);a.length&&this.updateHoverStyle(a,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(e,i){let r={event:e,replay:i,cancelable:!0,inChartArea:this.isPointInArea(e)},s=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;let o=this._handleEvent(e,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(e,i,r){let{_active:s=[],options:o}=this,a=i,l=this._getActiveElements(e,s,r,a),c=tv(e),u=DW(e,this._lastEvent,r,c);r&&(this._lastEvent=null,ft(o.onHover,[e,l,this],this),c&&ft(o.onClick,[e,l,this],this));let d=!Wl(l,s);return(d||i)&&(this._active=l,this._updateHoverStyles(l,s,i)),this._lastEvent=u,d}_getActiveElements(e,i,r,s){if(e.type==="mouseout")return[];if(!r)return i;let o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,s)}}return n})();function gI(){return _t(Dr.instances,n=>n._plugins.invalidate())}function EW(n,t,e){let{startAngle:i,x:r,y:s,outerRadius:o,innerRadius:a,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,d=Math.min(c/o,dn(i-e));if(n.beginPath(),n.arc(r,s,o-c/2,i+d/2,e-d/2),a>0){let h=Math.min(c/a,dn(i-e));n.arc(r,s,a+c/2,e-h/2,i+h/2,!0)}else{let h=Math.min(c/2,o*dn(i-e));if(u==="round")n.arc(r,s,h,e-Ye/2,i+Ye/2,!0);else if(u==="bevel"){let p=2*h*h,_=-p*Math.cos(e+Ye/2)+r,A=-p*Math.sin(e+Ye/2)+s,v=p*Math.cos(i+Ye/2)+r,b=p*Math.sin(i+Ye/2)+s;n.lineTo(_,A),n.lineTo(v,b)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function MW(n,t,e){let{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=t,c=r/a;n.beginPath(),n.arc(s,o,a,i-c,e+c),l>r?(c=r/l,n.arc(s,o,l,e+c,i-c,!0)):n.arc(s,o,r,e+xt,i-xt),n.closePath(),n.clip()}function TW(n){return hd(n,["outerStart","outerEnd","innerStart","innerEnd"])}function IW(n,t,e,i){let r=TW(n.options.borderRadius),s=(e-t)/2,o=Math.min(s,i*t/2),a=l=>{let c=(e-Math.min(s,l))*i/2;return en(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:en(r.innerStart,0,o),innerEnd:en(r.innerEnd,0,o)}}function zl(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function pg(n,t,e,i,r,s){let{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+i+e-c,0),h=u>0?u+i+e+c:0,p=0,_=r-l;if(i){let G=u>0?u-i:0,X=d>0?d-i:0,te=(G+X)/2,ve=te!==0?_*te/(te+i):_;p=(_-ve)/2}let A=Math.max(.001,_*d-e/Ye)/d,v=(_-A)/2,b=l+v+p,x=r-v-p,{outerStart:N,outerEnd:T,innerStart:k,innerEnd:C}=IW(t,h,d,x-b),M=d-N,O=d-T,F=b+N/M,j=x-T/O,H=h+k,Q=h+C,ie=b+k/H,ue=x-C/Q;if(n.beginPath(),s){let G=(F+j)/2;if(n.arc(o,a,d,F,G),n.arc(o,a,d,G,j),T>0){let he=zl(O,j,o,a);n.arc(he.x,he.y,T,j,x+xt)}let X=zl(Q,x,o,a);if(n.lineTo(X.x,X.y),C>0){let he=zl(Q,ue,o,a);n.arc(he.x,he.y,C,x+xt,ue+Math.PI)}let te=(x-C/h+(b+k/h))/2;if(n.arc(o,a,h,x-C/h,te,!0),n.arc(o,a,h,te,b+k/h,!0),k>0){let he=zl(H,ie,o,a);n.arc(he.x,he.y,k,ie+Math.PI,b-xt)}let ve=zl(M,b,o,a);if(n.lineTo(ve.x,ve.y),N>0){let he=zl(M,F,o,a);n.arc(he.x,he.y,N,b-xt,F)}}else{n.moveTo(o,a);let G=Math.cos(F)*d+o,X=Math.sin(F)*d+a;n.lineTo(G,X);let te=Math.cos(j)*d+o,ve=Math.sin(j)*d+a;n.lineTo(te,ve)}n.closePath()}function kW(n,t,e,i,r){let{fullCircles:s,startAngle:o,circumference:a}=t,l=t.endAngle;if(s){pg(n,t,e,i,l,r);for(let c=0;c<s;++c)n.fill();isNaN(a)||(l=o+(a%yt||yt))}return pg(n,t,e,i,l,r),n.fill(),l}function NW(n,t,e,i,r){let{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h,borderRadius:p}=l,_=l.borderAlign==="inner";if(!c)return;n.setLineDash(d||[]),n.lineDashOffset=h,_?(n.lineWidth=c*2,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let A=t.endAngle;if(s){pg(n,t,e,i,A,r);for(let v=0;v<s;++v)n.stroke();isNaN(a)||(A=o+(a%yt||yt))}_&&MW(n,t,A),l.selfJoin&&A-o>=Ye&&p===0&&u!=="miter"&&EW(n,t,A),s||(pg(n,t,e,i,A,r),n.stroke())}var zv=class extends on{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){let r=this.getProps(["x","y"],i),{angle:s,distance:o}=Xo(r,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),h=(this.options.spacing+this.options.borderWidth)/2,p=Le(d,l-a),_=$o(s,a,l)&&a!==l,A=p>=yt||_,v=Ki(o,c+h,u+h);return A&&v}getCenterPoint(t){let{x:e,y:i,startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,u=(r+s)/2,d=(o+a+c+l)/2;return{x:e+Math.cos(u)*d,y:i+Math.sin(u)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:e,circumference:i}=this,r=(e.offset||0)/4,s=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=i>yt?Math.floor(i/yt):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*r,Math.sin(a)*r);let l=1-Math.sin(Math.min(Ye,i||0)),c=r*l;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,kW(t,this,c,s,o),NW(t,this,c,s,o),t.restore()}};function ZI(n,t,e=t){n.lineCap=Le(e.borderCapStyle,t.borderCapStyle),n.setLineDash(Le(e.borderDash,t.borderDash)),n.lineDashOffset=Le(e.borderDashOffset,t.borderDashOffset),n.lineJoin=Le(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=Le(e.borderWidth,t.borderWidth),n.strokeStyle=Le(e.borderColor,t.borderColor)}function PW(n,t,e){n.lineTo(e.x,e.y)}function OW(n){return n.stepped?dv:n.tension||n.cubicInterpolationMode==="monotone"?hv:PW}function ek(n,t,e={}){let i=n.length,{start:r=0,end:s=i-1}=e,{start:o,end:a}=t,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:t.loop,ilen:c<l&&!u?i+c-l:c-l}}function RW(n,t,e,i){let{points:r,options:s}=t,{count:o,start:a,loop:l,ilen:c}=ek(r,e,i),u=OW(s),{move:d=!0,reverse:h}=i||{},p,_,A;for(p=0;p<=c;++p)_=r[(a+(h?c-p:p))%o],!_.skip&&(d?(n.moveTo(_.x,_.y),d=!1):u(n,A,_,h,s.stepped),A=_);return l&&(_=r[(a+(h?c:0))%o],u(n,A,_,h,s.stepped)),!!l}function FW(n,t,e,i){let r=t.points,{count:s,start:o,ilen:a}=ek(r,e,i),{move:l=!0,reverse:c}=i||{},u=0,d=0,h,p,_,A,v,b,x=T=>(o+(c?a-T:T))%s,N=()=>{A!==v&&(n.lineTo(u,v),n.lineTo(u,A),n.lineTo(u,b))};for(l&&(p=r[x(0)],n.moveTo(p.x,p.y)),h=0;h<=a;++h){if(p=r[x(h)],p.skip)continue;let T=p.x,k=p.y,C=T|0;C===_?(k<A?A=k:k>v&&(v=k),u=(d*u+T)/++d):(N(),n.lineTo(T,k),_=C,d=0,A=v=k),b=k}N()}function Uv(n){let t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?FW:RW}function LW(n){return n.stepped?yv:n.tension||n.cubicInterpolationMode==="monotone"?vv:es}function VW(n,t,e,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,i)&&r.closePath()),ZI(n,t.options),n.stroke(r)}function BW(n,t,e,i){let{segments:r,options:s}=t,o=Uv(t);for(let a of r)ZI(n,s,a.style),n.beginPath(),o(n,t,a,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}var qW=typeof Path2D=="function";function jW(n,t,e,i){qW&&!t.options.segment?VW(n,t,e,i):BW(n,t,e,i)}var mg=(()=>{class n extends on{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,i){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let s=r.spanGaps?this._loop:this._fullLoop;mv(this._points,r,e,s,i),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=wv(this,this.options.segment))}first(){let e=this.segments,i=this.points;return e.length&&i[e[0].start]}last(){let e=this.segments,i=this.points,r=e.length;return r&&i[e[r-1].end]}interpolate(e,i){let r=this.options,s=e[i],o=this.points,a=tg(this,{property:i,start:s,end:s});if(!a.length)return;let l=[],c=LW(r),u,d;for(u=0,d=a.length;u<d;++u){let{start:h,end:p}=a[u],_=o[h],A=o[p];if(_===A){l.push(_);continue}let v=Math.abs((s-_[i])/(A[i]-_[i])),b=c(_,A,v,r.stepped);b[i]=e[i],l.push(b)}return l.length===1?l[0]:l}pathSegment(e,i,r){return Uv(this)(e,this,i,r)}path(e,i,r){let s=this.segments,o=Uv(this),a=this._loop;i=i||0,r=r||this.points.length-i;for(let l of s)a&=o(e,this,l,{start:i,end:i+r-1});return!!a}draw(e,i,r,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),jW(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function mI(n,t,e,i){let r=n.options,{[e]:s}=n.getProps([e],i);return Math.abs(t-s)<r.radius+r.hitRadius}var WW=(()=>{class n extends on{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,r){let s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(e-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,i){return mI(this,e,"x",i)}inYRange(e,i){return mI(this,e,"y",i)}getCenterPoint(e){let{x:i,y:r}=this.getProps(["x","y"],e);return{x:i,y:r}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);let r=i&&e.borderWidth||0;return(i+r)*2}draw(e,i){let r=this.options;this.skip||r.radius<.1||!Hi(this,i,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,dd(e,r,this.x,this.y))}getRange(){let e=this.options||{};return e.radius+e.hitRadius}}return n})();function tk(n,t){let{x:e,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],t),a,l,c,u,d;return n.horizontal?(d=o/2,a=Math.min(e,r),l=Math.max(e,r),c=i-d,u=i+d):(d=s/2,a=e-d,l=e+d,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function js(n,t,e,i){return n?0:en(t,e,i)}function zW(n,t,e){let i=n.options.borderWidth,r=n.borderSkipped,s=Y0(i);return{t:js(r.top,s.top,0,e),r:js(r.right,s.right,0,t),b:js(r.bottom,s.bottom,0,e),l:js(r.left,s.left,0,t)}}function UW(n,t,e){let{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=Ji(r),o=Math.min(t,e),a=n.borderSkipped,l=i||Je(r);return{topLeft:js(!l||a.top||a.left,s.topLeft,0,o),topRight:js(!l||a.top||a.right,s.topRight,0,o),bottomLeft:js(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:js(!l||a.bottom||a.right,s.bottomRight,0,o)}}function HW(n){let t=tk(n),e=t.right-t.left,i=t.bottom-t.top,r=zW(n,e/2,i/2),s=UW(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Tv(n,t,e,i){let r=t===null,s=e===null,a=n&&!(r&&s)&&tk(n,i);return a&&(r||Ki(t,a.left,a.right))&&(s||Ki(e,a.top,a.bottom))}function YW(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function GW(n,t){n.rect(t.x,t.y,t.w,t.h)}function Iv(n,t,e={}){let i=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0,s=(n.x+n.w!==e.x+e.w?t:0)-i,o=(n.y+n.h!==e.y+e.h?t:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+o,radius:n.radius}}var Hv=class extends on{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){let{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=HW(this),a=YW(o.radius)?rs:GW;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),a(t,Iv(o,e,s)),t.clip(),a(t,Iv(s,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,Iv(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return Tv(this,t,e,i)}inXRange(t,e){return Tv(this,t,null,e)}inYRange(t,e){return Tv(this,null,t,e)}getCenterPoint(t){let{x:e,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}},KW=Object.freeze({__proto__:null,ArcElement:zv,BarElement:Hv,LineElement:mg,PointElement:WW}),Yv=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],_I=Yv.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function nk(n){return Yv[n%Yv.length]}function ik(n){return _I[n%_I.length]}function JW(n,t){return n.borderColor=nk(t),n.backgroundColor=ik(t),++t}function XW(n,t){return n.backgroundColor=n.data.map(()=>nk(t++)),t}function $W(n,t){return n.backgroundColor=n.data.map(()=>ik(t++)),t}function QW(n){let t=0;return(e,i)=>{let r=n.getDatasetMeta(i).controller;r instanceof Dd?t=XW(e,t):r instanceof UI?t=$W(e,t):r&&(t=JW(e,t))}}function AI(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function ZW(n){return n&&(n.borderColor||n.backgroundColor)}function ez(){return bt.borderColor!=="rgba(0,0,0,0.1)"||bt.backgroundColor!=="rgba(0,0,0,0.1)"}var tz={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;let{data:{datasets:i},options:r}=n.config,{elements:s}=r,o=AI(i)||ZW(r)||s&&AI(s)||ez();if(!e.forceOverride&&o)return;let a=QW(n);i.forEach(a)}};function nz(n,t,e,i,r){let s=r.samples||i;if(s>=e)return n.slice(t,t+e);let o=[],a=(e-2)/(s-2),l=0,c=t+e-1,u=t,d,h,p,_,A;for(o[l++]=n[u],d=0;d<s-2;d++){let v=0,b=0,x,N=Math.floor((d+1)*a)+1+t,T=Math.min(Math.floor((d+2)*a)+1,e)+t,k=T-N;for(x=N;x<T;x++)v+=n[x].x,b+=n[x].y;v/=k,b/=k;let C=Math.floor(d*a)+1+t,M=Math.min(Math.floor((d+1)*a)+1,e)+t,{x:O,y:F}=n[u];for(p=_=-1,x=C;x<M;x++)_=.5*Math.abs((O-v)*(n[x].y-F)-(O-n[x].x)*(b-F)),_>p&&(p=_,h=n[x],A=x);o[l++]=h,u=A}return o[l++]=n[c],o}function iz(n,t,e,i){let r=0,s=0,o,a,l,c,u,d,h,p,_,A,v=[],b=t+e-1,x=n[t].x,T=n[b].x-x;for(o=t;o<t+e;++o){a=n[o],l=(a.x-x)/T*i,c=a.y;let k=l|0;if(k===u)c<_?(_=c,d=o):c>A&&(A=c,h=o),r=(s*r+a.x)/++s;else{let C=o-1;if(!ot(d)&&!ot(h)){let M=Math.min(d,h),O=Math.max(d,h);M!==p&&M!==C&&v.push(Ie(ne({},n[M]),{x:r})),O!==p&&O!==C&&v.push(Ie(ne({},n[O]),{x:r}))}o>0&&C!==p&&v.push(n[C]),v.push(a),u=k,s=0,_=A=c,d=h=p=o}}return v}function rk(n){if(n._decimated){let t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function yI(n){n.data.datasets.forEach(t=>{rk(t)})}function rz(n,t){let e=t.length,i=0,r,{iScale:s}=n,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=en(Ui(t,s.axis,o).lo,0,e-1)),c?r=en(Ui(t,s.axis,a).hi+1,i,e)-i:r=e-i,{start:i,count:r}}var sz={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){yI(n);return}let i=n.width;n.data.datasets.forEach((r,s)=>{let{_data:o,indexAxis:a}=r,l=n.getDatasetMeta(s),c=o||r.data;if(Zo([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let u=n.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:d,count:h}=rz(l,c),p=e.threshold||4*i;if(h<=p){rk(r);return}ot(o)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(A){this._data=A}}));let _;switch(e.algorithm){case"lttb":_=nz(c,d,h,i,e);break;case"min-max":_=iz(c,d,h,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=_})},destroy(n){yI(n)}};function oz(n,t,e){let i=n.segments,r=n.points,s=t.points,o=[];for(let a of i){let{start:l,end:c}=a;c=_g(l,c,r);let u=Gv(e,r[l],r[c],a.loop);if(!t.segments){o.push({source:a,target:u,start:r[l],end:r[c]});continue}let d=tg(t,u);for(let h of d){let p=Gv(e,s[h.start],s[h.end],h.loop),_=eg(a,r,p);for(let A of _)o.push({source:A,target:h,start:{[e]:vI(u,p,"start",Math.max)},end:{[e]:vI(u,p,"end",Math.min)}})}}return o}function Gv(n,t,e,i){if(i)return;let r=t[n],s=e[n];return n==="angle"&&(r=dn(r),s=dn(s)),{property:n,start:r,end:s}}function az(n,t){let{x:e=null,y:i=null}=n||{},r=t.points,s=[];return t.segments.forEach(({start:o,end:a})=>{a=_g(o,a,r);let l=r[o],c=r[a];i!==null?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):e!==null&&(s.push({x:e,y:l.y}),s.push({x:e,y:c.y}))}),s}function _g(n,t,e){for(;t>n;t--){let i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function vI(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function sk(n,t){let e=[],i=!1;return pt(n)?(i=!0,e=n):e=az(n,t),e.length?new mg({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function wI(n){return n&&n.fill!==!1}function lz(n,t,e){let r=n[t].fill,s=[t],o;if(!e)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Et(r))return r;if(o=n[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function cz(n,t,e){let i=pz(n);if(Je(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Et(r)&&Math.floor(r)===r?uz(i[0],t,r,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function uz(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function dz(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:Je(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function hz(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:Je(n)?i=n.value:i=t.getBaseValue(),i}function pz(n){let t=n.options,e=t.fill,i=Le(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function fz(n){let{scale:t,index:e,line:i}=n,r=[],s=i.segments,o=i.points,a=gz(t,e);a.push(sk({x:null,y:t.bottom},i));for(let l=0;l<s.length;l++){let c=s[l];for(let u=c.start;u<=c.end;u++)mz(r,o[u],a)}return new mg({points:r,options:{}})}function gz(n,t){let e=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){let s=i[r];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}function mz(n,t,e){let i=[];for(let r=0;r<e.length;r++){let s=e[r],{first:o,last:a,point:l}=_z(s,t,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(n.push(l),!a)break}}n.push(...i)}function _z(n,t,e){let i=n.interpolate(t,e);if(!i)return{};let r=i[e],s=n.segments,o=n.points,a=!1,l=!1;for(let c=0;c<s.length;c++){let u=s[c],d=o[u.start][e],h=o[u.end][e];if(Ki(r,d,h)){a=r===d,l=r===h;break}}return{first:a,last:l,point:i}}var fg=class{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){let{x:r,y:s,radius:o}=this;return e=e||{start:0,end:yt},t.arc(r,s,o,e.end,e.start,!0),!i.bounds}interpolate(t){let{x:e,y:i,radius:r}=this,s=t.angle;return{x:e+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}};function Az(n){let{chart:t,fill:e,line:i}=n;if(Et(e))return yz(t,e);if(e==="stack")return fz(n);if(e==="shape")return!0;let r=vz(n);return r instanceof fg?r:sk(r,i)}function yz(n,t){let e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function vz(n){return(n.scale||{}).getPointPositionForValue?bz(n):wz(n)}function wz(n){let{scale:t={},fill:e}=n,i=dz(e,t);if(Et(i)){let r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function bz(n){let{scale:t,fill:e}=n,i=t.options,r=t.getLabels().length,s=i.reverse?t.max:t.min,o=hz(e,t,s),a=[];if(i.grid.circular){let l=t.getPointPositionForValue(0,s);return new fg({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(t.getPointPositionForValue(l,o));return a}function kv(n,t,e){let i=Az(t),{chart:r,index:s,line:o,scale:a,axis:l}=t,c=o.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:p=d}=u||{},_=r.getDatasetMeta(s),A=ng(r,_);i&&o.points.length&&(Vs(n,e),Sz(n,{line:o,target:i,above:h,below:p,area:e,scale:a,axis:l,clip:A}),Bs(n))}function Sz(n,t){let{line:e,target:i,above:r,below:s,area:o,scale:a,clip:l}=t,c=e._loop?"angle":t.axis;n.save();let u=s;s!==r&&(c==="x"?(bI(n,i,o.top),Nv(n,{line:e,target:i,color:r,scale:a,property:c,clip:l}),n.restore(),n.save(),bI(n,i,o.bottom)):c==="y"&&(SI(n,i,o.left),Nv(n,{line:e,target:i,color:s,scale:a,property:c,clip:l}),n.restore(),n.save(),SI(n,i,o.right),u=r)),Nv(n,{line:e,target:i,color:u,scale:a,property:c,clip:l}),n.restore()}function bI(n,t,e){let{segments:i,points:r}=t,s=!0,o=!1;n.beginPath();for(let a of i){let{start:l,end:c}=a,u=r[l],d=r[_g(l,c,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,e),n.lineTo(u.x,u.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function SI(n,t,e){let{segments:i,points:r}=t,s=!0,o=!1;n.beginPath();for(let a of i){let{start:l,end:c}=a,u=r[l],d=r[_g(l,c,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(e,u.y),n.lineTo(u.x,u.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(e,d.y)}n.lineTo(e,t.first().y),n.closePath(),n.clip()}function Nv(n,t){let{line:e,target:i,property:r,color:s,scale:o,clip:a}=t,l=oz(e,i,r);for(let{source:c,target:u,start:d,end:h}of l){let{style:{backgroundColor:p=s}={}}=c,_=i!==!0;n.save(),n.fillStyle=p,Cz(n,o,a,_&&Gv(r,d,h)),n.beginPath();let A=!!e.pathSegment(n,c),v;if(_){A?n.closePath():CI(n,i,h,r);let b=!!i.pathSegment(n,u,{move:A,reverse:!0});v=A&&b,v||CI(n,i,d,r)}n.closePath(),n.fill(v?"evenodd":"nonzero"),n.restore()}}function Cz(n,t,e,i){let r=t.chart.chartArea,{property:s,start:o,end:a}=i||{};if(s==="x"||s==="y"){let l,c,u,d;s==="x"?(l=o,c=r.top,u=a,d=r.bottom):(l=r.left,c=o,u=r.right,d=a),n.beginPath(),e&&(l=Math.max(l,e.left),u=Math.min(u,e.right),c=Math.max(c,e.top),d=Math.min(d,e.bottom)),n.rect(l,c,u-l,d-c),n.clip()}}function CI(n,t,e,i){let r=t.interpolate(e,i);r&&n.lineTo(r.x,r.y)}var xz={id:"filler",afterDatasetsUpdate(n,t,e){let i=(n.data.datasets||[]).length,r=[],s,o,a,l;for(o=0;o<i;++o)s=n.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof mg&&(l={visible:n.isDatasetVisible(o),index:o,fill:cz(a,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=lz(r,o,e.propagate))},beforeDraw(n,t,e){let i=e.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=r.length-1;o>=0;--o){let a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&kv(n.ctx,a,s))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;let i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){let s=i[r].$filler;wI(s)&&kv(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,t,e){let i=t.meta.$filler;!wI(i)||e.drawTime!=="beforeDatasetDraw"||kv(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},xI=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},Dz=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index,gg=class extends on{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},e=ft(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}let i=t.labels,r=Ot(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=xI(i,s),c,u;e.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a,d=t;s.textAlign="left",s.textBaseline="middle";let h=-1,p=-u;return this.legendItems.forEach((_,A)=>{let v=i+e/2+s.measureText(_.text).width;(A===0||c[c.length-1]+v+2*a>o)&&(d+=u,c[c.length-(A>0?0:1)]=0,p+=u,h++),l[A]={left:0,top:p,row:h,width:v,height:r},c[c.length-1]+=v+a}),d}_fitCols(t,e,i,r){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t,d=a,h=0,p=0,_=0,A=0;return this.legendItems.forEach((v,b)=>{let{itemWidth:x,itemHeight:N}=Ez(i,e,s,v,r);b>0&&p+N+2*a>u&&(d+=h+a,c.push({width:h,height:p}),_+=h+a,A++,h=p=0),l[b]={left:_,top:p,col:A,width:x,height:N},h=Math.max(h,x),p+=N+a}),d+=h,c.push({width:h,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:s}}=this,o=qs(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=hn(i,this.left+r,this.right-this.lineWidths[a]);for(let c of e)a!==c.row&&(a=c.row,l=hn(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+t+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=hn(i,this.top+t+r,this.bottom-this.columnSizes[a].height);for(let c of e)c.col!==a&&(a=c.col,l=hn(i,this.top+t+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;Vs(t,this),this._draw(),Bs(t)}}_draw(){let{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:s,labels:o}=t,a=bt.color,l=qs(t.rtl,this.left,this.width),c=Ot(o.font),{padding:u}=o,d=c.size,h=d/2,p;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;let{boxWidth:_,boxHeight:A,itemHeight:v}=xI(o,d),b=function(C,M,O){if(isNaN(_)||_<=0||isNaN(A)||A<0)return;r.save();let F=Le(O.lineWidth,1);if(r.fillStyle=Le(O.fillStyle,a),r.lineCap=Le(O.lineCap,"butt"),r.lineDashOffset=Le(O.lineDashOffset,0),r.lineJoin=Le(O.lineJoin,"miter"),r.lineWidth=F,r.strokeStyle=Le(O.strokeStyle,a),r.setLineDash(Le(O.lineDash,[])),o.usePointStyle){let j={radius:A*Math.SQRT2/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:F},H=l.xPlus(C,_/2),Q=M+h;H0(r,j,H,Q,o.pointStyleWidth&&_)}else{let j=M+Math.max((d-A)/2,0),H=l.leftForLtr(C,_),Q=Ji(O.borderRadius);r.beginPath(),Object.values(Q).some(ie=>ie!==0)?rs(r,{x:H,y:j,w:_,h:A,radius:Q}):r.rect(H,j,_,A),r.fill(),F!==0&&r.stroke()}r.restore()},x=function(C,M,O){is(r,O.text,C,M+v/2,c,{strikethrough:O.hidden,textAlign:l.textAlign(O.textAlign)})},N=this.isHorizontal(),T=this._computeTitleHeight();N?p={x:hn(s,this.left+u,this.right-i[0]),y:this.top+u+T,line:0}:p={x:this.left+u,y:hn(s,this.top+T+u,this.bottom-e[0].height),line:0},Q0(this.ctx,t.textDirection);let k=v+u;this.legendItems.forEach((C,M)=>{r.strokeStyle=C.fontColor,r.fillStyle=C.fontColor;let O=r.measureText(C.text).width,F=l.textAlign(C.textAlign||(C.textAlign=o.textAlign)),j=_+h+O,H=p.x,Q=p.y;l.setWidth(this.width),N?M>0&&H+j+u>this.right&&(Q=p.y+=k,p.line++,H=p.x=hn(s,this.left+u,this.right-i[p.line])):M>0&&Q+k>this.bottom&&(H=p.x=H+e[p.line].width+u,p.line++,Q=p.y=hn(s,this.top+T+u,this.bottom-e[p.line].height));let ie=l.x(H);if(b(ie,Q,C),H=cv(F,H+_+h,N?H+j:this.right,t.rtl),x(l.x(H),Q,C),N)p.x+=j+u;else if(typeof C.text!="string"){let ue=c.lineHeight;p.y+=ok(C,ue)+u}else p.y+=k}),Z0(this.ctx,t.textDirection)}drawTitle(){let t=this.options,e=t.title,i=Ot(e.font),r=Wt(e.padding);if(!e.display)return;let s=qs(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=i.size/2,c=r.top+l,u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=hn(t.align,d,this.right-h);else{let _=this.columnSizes.reduce((A,v)=>Math.max(A,v.height),0);u=c+hn(t.align,this.top,this.bottom-_-t.labels.padding-this._computeTitleHeight())}let p=hn(a,d,d+h);o.textAlign=s.textAlign(cd(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,is(o,e.text,p,u,i)}_computeTitleHeight(){let t=this.options.title,e=Ot(t.font),i=Wt(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,s;if(Ki(t,this.left,this.right)&&Ki(e,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Ki(t,r.left,r.left+r.width)&&Ki(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){let e=this.options;if(!Iz(t.type,e))return;let i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let r=this._hoveredItem,s=Dz(r,i);r&&!s&&ft(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!s&&ft(e.onHover,[t,i,this],this)}else i&&ft(e.onClick,[t,i,this],this)}};function Ez(n,t,e,i,r){let s=Mz(i,n,t,e),o=Tz(r,i,t.lineHeight);return{itemWidth:s,itemHeight:o}}function Mz(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),t+e.size/2+i.measureText(r).width}function Tz(n,t,e){let i=n;return typeof t.text!="string"&&(i=ok(t,e)),i}function ok(n,t){let e=n.text?n.text.length:0;return t*e}function Iz(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var kz={id:"legend",_element:gg,start(n,t,e){let i=n.legend=new gg({ctx:n.ctx,options:e,chart:n});Tn.configure(n,i,e),Tn.addBox(n,i)},stop(n){Tn.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){let i=n.legend;Tn.configure(n,i,e),i.options=e},afterUpdate(n){let t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){let i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{let c=l.controller.getStyle(e?0:void 0),u=Wt(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},Cd=class extends on{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;let r=pt(i.text)?i.text.length:1;this._padding=Wt(i.padding);let s=r*Ot(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){let{top:e,left:i,bottom:r,right:s,options:o}=this,a=o.align,l=0,c,u,d;return this.isHorizontal()?(u=hn(a,i,s),d=e+t,c=s-i):(o.position==="left"?(u=i+t,d=hn(a,r,e),l=Ye*-.5):(u=s-t,d=hn(a,e,r),l=Ye*.5),c=r-e),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){let t=this.ctx,e=this.options;if(!e.display)return;let i=Ot(e.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);is(t,e.text,0,0,i,{color:e.color,maxWidth:l,rotation:c,textAlign:cd(e.align),textBaseline:"middle",translation:[o,a]})}};function Nz(n,t){let e=new Cd({ctx:n.ctx,options:t,chart:n});Tn.configure(n,e,t),Tn.addBox(n,e),n.titleBlock=e}var Pz={id:"title",_element:Cd,start(n,t,e){Nz(n,e)},stop(n){let t=n.titleBlock;Tn.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){let i=n.titleBlock;Tn.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},og=new WeakMap,Oz={id:"subtitle",start(n,t,e){let i=new Cd({ctx:n.ctx,options:e,chart:n});Tn.configure(n,i,e),Tn.addBox(n,i),og.set(n,i)},stop(n){Tn.removeBox(n,og.get(n)),og.delete(n)},beforeUpdate(n,t,e){let i=og.get(n);Tn.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},bd={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,s=0;for(t=0,e=n.length;t<e;++t){let a=n[t].element;if(a&&a.hasValue()){let l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){let l=n[s].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),u=ts(t,c);u<r&&(r=u,a=l)}}if(a){let l=a.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function Cr(n,t){return t&&(pt(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function as(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function Rz(n,t){let{element:e,datasetIndex:i,index:r}=t,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function DI(n,t){let e=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=t,l=Ot(t.bodyFont),c=Ot(t.titleFont),u=Ot(t.footerFont),d=s.length,h=r.length,p=i.length,_=Wt(t.padding),A=_.height,v=0,b=i.reduce((T,k)=>T+k.before.length+k.lines.length+k.after.length,0);if(b+=n.beforeBody.length+n.afterBody.length,d&&(A+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),b){let T=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;A+=p*T+(b-p)*l.lineHeight+(b-1)*t.bodySpacing}h&&(A+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let x=0,N=function(T){v=Math.max(v,e.measureText(T).width+x)};return e.save(),e.font=c.string,_t(n.title,N),e.font=l.string,_t(n.beforeBody.concat(n.afterBody),N),x=t.displayColors?o+2+t.boxPadding:0,_t(i,T=>{_t(T.before,N),_t(T.lines,N),_t(T.after,N)}),x=0,e.font=u.string,_t(n.footer,N),e.restore(),v+=_.width,{width:v,height:A}}function Fz(n,t){let{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function Lz(n,t,e,i){let{x:r,width:s}=i,o=e.caretSize+e.caretPadding;if(n==="left"&&r+s+o>t.width||n==="right"&&r-s-o<0)return!0}function Vz(n,t,e,i){let{x:r,width:s}=e,{width:o,chartArea:{left:a,right:l}}=n,c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),Lz(c,n,t,e)&&(c="center"),c}function EI(n,t,e){let i=e.yAlign||t.yAlign||Fz(n,e);return{xAlign:e.xAlign||t.xAlign||Vz(n,t,e,i),yAlign:i}}function Bz(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function qz(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function MI(n,t,e,i){let{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:l}=e,c=r+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=Ji(o),_=Bz(t,a),A=qz(t,l,c);return l==="center"?a==="left"?_+=c:a==="right"&&(_-=c):a==="left"?_-=Math.max(u,h)+r:a==="right"&&(_+=Math.max(d,p)+r),{x:en(_,0,i.width-t.width),y:en(A,0,i.height-t.height)}}function ag(n,t,e){let i=Wt(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function TI(n){return Cr([],as(n))}function jz(n,t,e){return Sr(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function II(n,t){let e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}var ak={beforeTitle:Yi,title(n){if(n.length>0){let t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Yi,beforeBody:Yi,beforeLabel:Yi,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");let e=n.formattedValue;return ot(e)||(t+=e),t},labelColor(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Yi,afterBody:Yi,beforeFooter:Yi,footer:Yi,afterFooter:Yi};function ei(n,t,e,i){let r=n[t].call(e,i);return typeof r>"u"?ak[t].call(e,i):r}var kI=(()=>{class n extends on{static positioners=bd;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let i=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&i.options.animation&&r.animations,o=new Hl(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=jz(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,i){let{callbacks:r}=i,s=ei(r,"beforeTitle",this,e),o=ei(r,"title",this,e),a=ei(r,"afterTitle",this,e),l=[];return l=Cr(l,as(s)),l=Cr(l,as(o)),l=Cr(l,as(a)),l}getBeforeBody(e,i){return TI(ei(i.callbacks,"beforeBody",this,e))}getBody(e,i){let{callbacks:r}=i,s=[];return _t(e,o=>{let a={before:[],lines:[],after:[]},l=II(r,o);Cr(a.before,as(ei(l,"beforeLabel",this,o))),Cr(a.lines,ei(l,"label",this,o)),Cr(a.after,as(ei(l,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(e,i){return TI(ei(i.callbacks,"afterBody",this,e))}getFooter(e,i){let{callbacks:r}=i,s=ei(r,"beforeFooter",this,e),o=ei(r,"footer",this,e),a=ei(r,"afterFooter",this,e),l=[];return l=Cr(l,as(s)),l=Cr(l,as(o)),l=Cr(l,as(a)),l}_createItems(e){let i=this._active,r=this.chart.data,s=[],o=[],a=[],l=[],c,u;for(c=0,u=i.length;c<u;++c)l.push(Rz(this.chart,i[c]));return e.filter&&(l=l.filter((d,h,p)=>e.filter(d,h,p,r))),e.itemSort&&(l=l.sort((d,h)=>e.itemSort(d,h,r))),_t(l,d=>{let h=II(e.callbacks,d);s.push(ei(h,"labelColor",this,d)),o.push(ei(h,"labelPointStyle",this,d)),a.push(ei(h,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(e,i){let r=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let l=bd[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);let c=this._size=DI(this,r),u=Object.assign({},l,c),d=EI(this.chart,r,u),h=MI(r,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(e,i,r,s){let o=this.getCaretPosition(e,r,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(e,i,r){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:l}=r,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:h}=Ji(l),{x:p,y:_}=e,{width:A,height:v}=i,b,x,N,T,k,C;return o==="center"?(k=_+v/2,s==="left"?(b=p,x=b-a,T=k+a,C=k-a):(b=p+A,x=b+a,T=k-a,C=k+a),N=b):(s==="left"?x=p+Math.max(c,d)+a:s==="right"?x=p+A-Math.max(u,h)-a:x=this.caretX,o==="top"?(T=_,k=T-a,b=x-a,N=x+a):(T=_+v,k=T+a,b=x+a,N=x-a),C=T),{x1:b,x2:x,x3:N,y1:T,y2:k,y3:C}}drawTitle(e,i,r){let s=this.title,o=s.length,a,l,c;if(o){let u=qs(r.rtl,this.x,this.width);for(e.x=ag(this,r.titleAlign,r),i.textAlign=u.textAlign(r.titleAlign),i.textBaseline="middle",a=Ot(r.titleFont),l=r.titleSpacing,i.fillStyle=r.titleColor,i.font=a.string,c=0;c<o;++c)i.fillText(s[c],u.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===o&&(e.y+=r.titleMarginBottom-l)}}_drawColorBox(e,i,r,s,o){let a=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:u}=o,d=Ot(o.bodyFont),h=ag(this,"left",o),p=s.x(h),_=c<d.lineHeight?(d.lineHeight-c)/2:0,A=i.y+_;if(o.usePointStyle){let v={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=s.leftForLtr(p,u)+u/2,x=A+c/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,dd(e,v,b,x),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,dd(e,v,b,x)}else{e.lineWidth=Je(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;let v=s.leftForLtr(p,u),b=s.leftForLtr(s.xPlus(p,1),u-2),x=Ji(a.borderRadius);Object.values(x).some(N=>N!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,rs(e,{x:v,y:A,w:u,h:c,radius:x}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),rs(e,{x:b,y:A+1,w:u-2,h:c-2,radius:x}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(v,A,u,c),e.strokeRect(v,A,u,c),e.fillStyle=a.backgroundColor,e.fillRect(b,A+1,u-2,c-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,i,r){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=r,h=Ot(r.bodyFont),p=h.lineHeight,_=0,A=qs(r.rtl,this.x,this.width),v=function(F){i.fillText(F,A.x(e.x+_),e.y+p/2),e.y+=p+o},b=A.textAlign(a),x,N,T,k,C,M,O;for(i.textAlign=a,i.textBaseline="middle",i.font=h.string,e.x=ag(this,b,r),i.fillStyle=r.bodyColor,_t(this.beforeBody,v),_=l&&b!=="right"?a==="center"?u/2+d:u+2+d:0,k=0,M=s.length;k<M;++k){for(x=s[k],N=this.labelTextColors[k],i.fillStyle=N,_t(x.before,v),T=x.lines,l&&T.length&&(this._drawColorBox(i,e,k,A,r),p=Math.max(h.lineHeight,c)),C=0,O=T.length;C<O;++C)v(T[C]),p=h.lineHeight;_t(x.after,v)}_=0,p=h.lineHeight,_t(this.afterBody,v),e.y-=o}drawFooter(e,i,r){let s=this.footer,o=s.length,a,l;if(o){let c=qs(r.rtl,this.x,this.width);for(e.x=ag(this,r.footerAlign,r),e.y+=r.footerMarginTop,i.textAlign=c.textAlign(r.footerAlign),i.textBaseline="middle",a=Ot(r.footerFont),i.fillStyle=r.footerColor,i.font=a.string,l=0;l<o;++l)i.fillText(s[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+r.footerSpacing}}drawBackground(e,i,r,s){let{xAlign:o,yAlign:a}=this,{x:l,y:c}=e,{width:u,height:d}=r,{topLeft:h,topRight:p,bottomLeft:_,bottomRight:A}=Ji(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(l+h,c),a==="top"&&this.drawCaret(e,i,r,s),i.lineTo(l+u-p,c),i.quadraticCurveTo(l+u,c,l+u,c+p),a==="center"&&o==="right"&&this.drawCaret(e,i,r,s),i.lineTo(l+u,c+d-A),i.quadraticCurveTo(l+u,c+d,l+u-A,c+d),a==="bottom"&&this.drawCaret(e,i,r,s),i.lineTo(l+_,c+d),i.quadraticCurveTo(l,c+d,l,c+d-_),a==="center"&&o==="left"&&this.drawCaret(e,i,r,s),i.lineTo(l,c+h),i.quadraticCurveTo(l,c,l+h,c),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(e){let i=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){let a=bd[e.position].call(this,this._active,this._eventPosition);if(!a)return;let l=this._size=DI(this,e),c=Object.assign({},a,this._size),u=EI(i,e,c),d=MI(e,c,u,i);(s._to!==d.x||o._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){let i=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(i);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let a=Wt(i.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&l&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,s,i),Q0(e,i.textDirection),o.y+=a.top,this.drawTitle(o,e,i),this.drawBody(o,e,i),this.drawFooter(o,e,i),Z0(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,i){let r=this._active,s=e.map(({datasetIndex:l,index:c})=>{let u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),o=!Wl(r,s),a=this._positionChanged(s,i);(o||a)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(e,o,i,r),l=this._positionChanged(a,e),c=i||!Wl(a,o)||l;return c&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,i))),c}_getActiveElements(e,i,r,s){let o=this.options;if(e.type==="mouseout")return[];if(!s)return i.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);let a=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&a.reverse(),a}_positionChanged(e,i){let{caretX:r,caretY:s,options:o}=this,a=bd[o.position].call(this,e,i);return a!==!1&&(r!==a.x||s!==a.y)}}return n})(),Wz={id:"tooltip",_element:kI,positioners:bd,afterInit(n,t,e){e&&(n.tooltip=new kI({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){let t=n.tooltip;if(t&&t._willRender()){let e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",Ie(ne({},e),{cancelable:!0}))===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){let e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ak},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},zz=Object.freeze({__proto__:null,Colors:tz,Decimation:sz,Filler:xz,Legend:kz,SubTitle:Oz,Title:Pz,Tooltip:Wz}),Uz=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function Hz(n,t,e,i){let r=n.indexOf(t);if(r===-1)return Uz(n,t,e,i);let s=n.lastIndexOf(t);return r!==s?e:r}var Yz=(n,t)=>n===null?null:en(Math.round(n),0,t);function NI(n){let t=this.getLabels();return n>=0&&n<t.length?t[n]:n}var Gz=(()=>{class n extends na{static id="category";static defaults={ticks:{callback:NI}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let i=this._addedLabels;if(i.length){let r=this.getLabels();for(let{index:s,label:o}of i)r[s]===o&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,i){if(ot(e))return null;let r=this.getLabels();return i=isFinite(i)&&r[i]===e?i:Hz(r,e,Le(i,e),this._addedLabels),Yz(i,r.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),i||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){let e=this.min,i=this.max,r=this.options.offset,s=[],o=this.getLabels();o=e===0&&i===o.length-1?o:o.slice(e,i+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=e;a<=i;a++)s.push({value:a});return s}getLabelForValue(e){return NI.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function Kz(n,t){let e=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=n,p=s||1,_=u-1,{min:A,max:v}=t,b=!ot(o),x=!ot(a),N=!ot(c),T=(v-A)/(d+1),k=N0((v-A)/_/p)*p,C,M,O,F;if(k<1e-14&&!b&&!x)return[{value:A},{value:v}];F=Math.ceil(v/k)-Math.floor(A/k),F>_&&(k=N0(F*k/_/p)*p),ot(l)||(C=Math.pow(10,l),k=Math.ceil(k*C)/C),r==="ticks"?(M=Math.floor(A/k)*k,O=Math.ceil(v/k)*k):(M=A,O=v),b&&x&&s&&iv((a-o)/s,k/1e3)?(F=Math.round(Math.min((a-o)/k,u)),k=(a-o)/F,M=o,O=a):N?(M=b?o:M,O=x?a:O,F=c-1,k=(O-M)/F):(F=(O-M)/k,Ko(F,Math.round(F),k/1e3)?F=Math.round(F):F=Math.ceil(F));let j=Math.max(O0(k),O0(M));C=Math.pow(10,ot(l)?j:l),M=Math.round(M*C)/C,O=Math.round(O*C)/C;let H=0;for(b&&(h&&M!==o?(e.push({value:o}),M<o&&H++,Ko(Math.round((M+H*k)*C)/C,o,PI(o,T,n))&&H++):M<o&&H++);H<F;++H){let Q=Math.round((M+H*k)*C)/C;if(x&&Q>a)break;e.push({value:Q})}return x&&h&&O!==a?e.length&&Ko(e[e.length-1].value,a,PI(a,T,n))?e[e.length-1].value=a:e.push({value:a}):(!x||O===a)&&e.push({value:O}),e}function PI(n,t,{horizontal:e,minRotation:i}){let r=jt(i),s=(e?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+n).length;return Math.min(t/s,o)}var Yl=class extends na{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ot(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this,o=l=>r=e?r:l,a=l=>s=i?s:l;if(t){let l=Di(r),c=Di(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),t||o(r-l)}this.min=r,this.max=s}getTickLimit(){let t=this.options.ticks,{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,e=t.ticks,i=this.getTickLimit();i=Math.max(2,i);let r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,o=Kz(r,s);return t.bounds==="ticks"&&P0(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let t=this.ticks,e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){let r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Qo(t,this.chart.options.locale,this.options.ticks.format)}},Kv=class extends Yl{static id="linear";static defaults={ticks:{callback:ud.formatters.numeric}};determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=Et(t)?t:0,this.max=Et(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,i=jt(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}},xd=n=>Math.floor(wr(n)),ta=(n,t)=>Math.pow(10,xd(n)+t);function OI(n){return n/Math.pow(10,xd(n))===1}function RI(n,t,e){let i=Math.pow(10,e),r=Math.floor(n/i);return Math.ceil(t/i)-r}function Jz(n,t){let e=t-n,i=xd(e);for(;RI(n,t,i)>10;)i++;for(;RI(n,t,i)<10;)i--;return Math.min(i,xd(n))}function Xz(n,{min:t,max:e}){t=Bn(n.min,t);let i=[],r=xd(t),s=Jz(t,e),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((t-l)*o)/o,u=Math.floor((t-l)/a/10)*a*10,d=Math.floor((c-u)/Math.pow(10,s)),h=Bn(n.min,Math.round((l+u+d*Math.pow(10,s))*o)/o);for(;h<e;)i.push({value:h,major:OI(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),h=Math.round((l+u+d*Math.pow(10,s))*o)/o;let p=Bn(n.max,h);return i.push({value:p,major:OI(p),significand:d}),i}var Jv=class extends na{static id="logarithmic";static defaults={ticks:{callback:ud.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let i=Yl.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return Et(i)&&i>0?i:null}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=Et(t)?Math.max(0,t):null,this.max=Et(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Et(this._userMin)&&(this.min=t===ta(this.min,0)?ta(this.min,-1):ta(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),i=this.min,r=this.max,s=a=>i=t?i:a,o=a=>r=e?r:a;i===r&&(i<=0?(s(1),o(10)):(s(ta(i,-1)),o(ta(r,1)))),i<=0&&s(ta(r,-1)),r<=0&&o(ta(i,1)),this.min=i,this.max=r}buildTicks(){let t=this.options,e={min:this._userMin,max:this._userMax},i=Xz(e,this);return t.bounds==="ticks"&&P0(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":Qo(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=wr(t),this._valueRange=wr(this.max)-wr(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(wr(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}};function Xv(n){let t=n.ticks;if(t.display&&n.display){let e=Wt(t.backdropPadding);return Le(t.font&&t.font.size,bt.font.size)+e.height}return 0}function $z(n,t,e){return e=pt(e)?e:[e],{w:uv(n,t.string,e),h:e.length*t.lineHeight}}function FI(n,t,e,i,r){return n===i||n===r?{start:t-e/2,end:t+e/2}:n<i||n>r?{start:t-e,end:t}:{start:t,end:t+e}}function Qz(n){let t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?Ye/s:0;for(let l=0;l<s;l++){let c=o.setContext(n.getPointLabelContext(l));r[l]=c.padding;let u=n.getPointPosition(l,n.drawingArea+r[l],a),d=Ot(c.font),h=$z(n.ctx,d,n._pointLabels[l]);i[l]=h;let p=dn(n.getIndexAngle(l)+a),_=Math.round(Jo(p)),A=FI(_,u.x,h.w,0,180),v=FI(_,u.y,h.h,90,270);Zz(e,t,p,A,v)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=nU(n,i,r)}function Zz(n,t,e,i,r){let s=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e)),a=0,l=0;i.start<t.l?(a=(t.l-i.start)/s,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/s,n.r=Math.max(n.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/o,n.t=Math.min(n.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/o,n.b=Math.max(n.b,t.b+l))}function eU(n,t,e){let i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=e,l=n.getPointPosition(t,i+r+o,s),c=Math.round(Jo(dn(l.angle+xt))),u=sU(l.y,a.h,c),d=iU(c),h=rU(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function tU(n,t){if(!t)return!0;let{left:e,top:i,right:r,bottom:s}=n;return!(Hi({x:e,y:i},t)||Hi({x:e,y:s},t)||Hi({x:r,y:i},t)||Hi({x:r,y:s},t))}function nU(n,t,e){let i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Xv(s)/2,additionalAngle:o?Ye/r:0},c;for(let u=0;u<r;u++){l.padding=e[u],l.size=t[u];let d=eU(n,u,l);i.push(d),a==="auto"&&(d.visible=tU(d,c),d.visible&&(c=d))}return i}function iU(n){return n===0||n===180?"center":n<180?"left":"right"}function rU(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function sU(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function oU(n,t,e){let{left:i,top:r,right:s,bottom:o}=e,{backdropColor:a}=t;if(!ot(a)){let l=Ji(t.borderRadius),c=Wt(t.backdropPadding);n.fillStyle=a;let u=i-c.left,d=r-c.top,h=s-i+c.width,p=o-r+c.height;Object.values(l).some(_=>_!==0)?(n.beginPath(),rs(n,{x:u,y:d,w:h,h:p,radius:l}),n.fill()):n.fillRect(u,d,h,p)}}function aU(n,t){let{ctx:e,options:{pointLabels:i}}=n;for(let r=t-1;r>=0;r--){let s=n._pointLabelItems[r];if(!s.visible)continue;let o=i.setContext(n.getPointLabelContext(r));oU(e,o,s);let a=Ot(o.font),{x:l,y:c,textAlign:u}=s;is(e,n._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function lk(n,t,e,i){let{ctx:r}=n;if(e)r.arc(n.xCenter,n.yCenter,t,0,yt);else{let s=n.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,t),r.lineTo(s.x,s.y)}}function lU(n,t,e,i,r){let s=n.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||e<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),lk(n,e,o,i),s.closePath(),s.stroke(),s.restore())}function cU(n,t,e){return Sr(n,{label:e,index:t,type:"pointLabel"})}var $v=class extends Yl{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ud.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=Wt(Xv(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=Et(t)&&!isNaN(t)?t:0,this.max=Et(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Xv(this.options))}generateTickLabels(t){Yl.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{let r=ft(this.options.pointLabels.callback,[e,i],this);return r||r===0?r:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){let t=this.options;t.display&&t.pointLabels.display?Qz(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){let e=yt/(this._pointLabels.length||1),i=this.options.startAngle||0;return dn(t*e+jt(i))}getDistanceFromCenterForValue(t){if(ot(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(ot(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){let i=e[t];return cU(this.getContext(),t,i)}}getPointPosition(t,e,i=0){let r=this.getIndexAngle(t)-xt+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:i,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:s}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let i=this.ctx;i.save(),i.beginPath(),lk(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){let t=this.ctx,e=this.options,{angleLines:i,grid:r,border:s}=e,o=this._pointLabels.length,a,l,c;if(e.pointLabels.display&&aU(this,o),r.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);let h=this.getContext(d),p=r.setContext(h),_=s.setContext(h);lU(this,p,l,o,_)}}),i.display){for(t.save(),a=o-1;a>=0;a--){let u=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(t.lineWidth=h,t.strokeStyle=d,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;let r=this.getIndexAngle(0),s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;let c=i.setContext(this.getContext(l)),u=Ot(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;let d=Wt(c.backdropPadding);t.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}is(t,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}},Ag={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ti=Object.keys(Ag);function LI(n,t){return n-t}function VI(n,t){if(ot(t))return null;let e=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts,o=t;return typeof i=="function"&&(o=i(o)),Et(o)||(o=typeof i=="string"?e.parse(o,i):e.parse(o)),o===null?null:(r&&(o=r==="week"&&(Gi(s)||s===!0)?e.startOf(o,"isoWeek",s):e.startOf(o,r)),+o)}function BI(n,t,e,i){let r=ti.length;for(let s=ti.indexOf(n);s<r-1;++s){let o=Ag[ti[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=i)return ti[s]}return ti[r-1]}function uU(n,t,e,i,r){for(let s=ti.length-1;s>=ti.indexOf(e);s--){let o=ti[s];if(Ag[o].common&&n._adapter.diff(r,i,o)>=t-1)return o}return ti[e?ti.indexOf(e):0]}function dU(n){for(let t=ti.indexOf(n)+1,e=ti.length;t<e;++t)if(Ag[ti[t]].common)return ti[t]}function qI(n,t,e){if(!e)n[t]=!0;else if(e.length){let{lo:i,hi:r}=ld(e,t),s=e[i]>=t?e[i]:e[r];n[s]=!0}}function hU(n,t,e,i){let r=n._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value,a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=e[a],l>=0&&(t[l].major=!0);return t}function jI(n,t,e){let i=[],r={},s=t.length,o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,i.push({value:a,major:!1});return s===0||!e?i:hU(n,i,r,e)}var Qv=(()=>{class n extends na{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,i={}){let r=e.time||(e.time={}),s=this._adapter=new Sj._date(e.adapters.date);s.init(i),Go(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=i.normalized}parse(e,i){return e===void 0?null:VI(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,i=this._adapter,r=e.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=Et(s)&&!isNaN(s)?s:+i.startOf(Date.now(),r),o=Et(o)&&!isNaN(o)?o:+i.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let e=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(i=e[0],r=e[e.length-1]),{min:i,max:r}}buildTicks(){let e=this.options,i=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,l=ov(s,o,a);return this._unit=i.unit||(r.autoSkip?BI(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):uU(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:dU(this._unit),this.initOffsets(s),e.reverse&&l.reverse(),jI(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let i=0,r=0,s,o;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?i=1-s:i=(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?r=o:r=(o-this.getDecimalForValue(e[e.length-2]))/2);let a=e.length<3?.5:.25;i=en(i,0,a),r=en(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){let e=this._adapter,i=this.min,r=this.max,s=this.options,o=s.time,a=o.unit||BI(o.minUnit,i,r,this._getLabelCapacity(i)),l=Le(s.ticks.stepSize,1),c=a==="week"?o.isoWeekday:!1,u=Gi(c)||c===!0,d={},h=i,p,_;if(u&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,u?"day":a),e.diff(r,i,a)>1e5*l)throw new Error(i+" and "+r+" are too far apart with stepSize of "+l+" "+a);let A=s.ticks.source==="data"&&this.getDataTimestamps();for(p=h,_=0;p<r;p=+e.add(p,l,a),_++)qI(d,p,A);return(p===r||s.bounds==="ticks"||_===1)&&qI(d,p,A),Object.keys(d).sort(LI).map(v=>+v)}getLabelForValue(e){let i=this._adapter,r=this.options.time;return r.tooltipFormat?i.format(e,r.tooltipFormat):i.format(e,r.displayFormats.datetime)}format(e,i){let s=this.options.time.displayFormats,o=this._unit,a=i||s[o];return this._adapter.format(e,a)}_tickFormatFunction(e,i,r,s){let o=this.options,a=o.ticks.callback;if(a)return ft(a,[e,i,r],this);let l=o.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],h=u&&l[u],p=r[i],_=u&&h&&p&&p.major;return this._adapter.format(e,s||(_?h:d))}generateTickLabels(e){let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i],s.label=this._tickFormatFunction(s.value,i,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let i=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(e){let i=this._offsets,r=this.getDecimalForPixel(e)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){let i=this.options.ticks,r=this.ctx.measureText(e).width,s=jt(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),a=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*o+l*a,h:r*a+l*o}}_getLabelCapacity(e){let i=this.options.time,r=i.displayFormats,s=r[i.unit]||r.millisecond,o=this._tickFormatFunction(e,0,jI(this,[e],this._majorUnit),s),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],i,r;if(e.length)return e;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,r=s.length;i<r;++i)e=e.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){let e=this._cache.labels||[],i,r;if(e.length)return e;let s=this.getLabels();for(i=0,r=s.length;i<r;++i)e.push(VI(this,s[i]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return F0(e.sort(LI))}}return n})();function lg(n,t,e){let i=0,r=n.length-1,s,o,a,l;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=Ui(n,"pos",t)),{pos:s,time:a}=n[i],{pos:o,time:l}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=Ui(n,"time",t)),{time:s,pos:a}=n[i],{time:o,pos:l}=n[r]);let c=o-s;return c?a+(l-a)*(t-s)/c:a}var Zv=class extends Qv{static id="timeseries";static defaults=Qv.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=lg(e,this.min),this._tableRange=lg(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let{min:e,max:i}=this,r=[],s=[],o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=i&&r.push(c);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){let t=this.min,e=this.max,i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(lg(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return lg(this._table,i*this._tableRange+this._minPos,!0)}},pU=Object.freeze({__proto__:null,CategoryScale:Gz,LinearScale:Kv,LogarithmicScale:Jv,RadialLinearScale:$v,TimeScale:Qv,TimeSeriesScale:Zv}),yg=[bj,KW,zz,pU];var fU=typeof global=="object"&&global&&global.Object===Object&&global,vg=fU;var gU=typeof self=="object"&&self&&self.Object===Object&&self,mU=vg||gU||Function("return this")(),Ei=mU;var _U=Ei.Symbol,Gl=_U;var ck=Object.prototype,AU=ck.hasOwnProperty,yU=ck.toString,Md=Gl?Gl.toStringTag:void 0;function vU(n){var t=AU.call(n,Md),e=n[Md];try{n[Md]=void 0;var i=!0}catch{}var r=yU.call(n);return i&&(t?n[Md]=e:delete n[Md]),r}var uk=vU;var wU=Object.prototype,bU=wU.toString;function SU(n){return bU.call(n)}var dk=SU;var CU="[object Null]",xU="[object Undefined]",hk=Gl?Gl.toStringTag:void 0;function DU(n){return n==null?n===void 0?xU:CU:hk&&hk in Object(n)?uk(n):dk(n)}var zs=DU;function EU(n){return n!=null&&typeof n=="object"}var Er=EU;var MU=Array.isArray,Td=MU;function TU(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var ni=TU;function IU(n){return n}var wg=IU;var kU="[object AsyncFunction]",NU="[object Function]",PU="[object GeneratorFunction]",OU="[object Proxy]";function RU(n){if(!ni(n))return!1;var t=zs(n);return t==NU||t==PU||t==kU||t==OU}var Kl=RU;var FU=Ei["__core-js_shared__"],bg=FU;var pk=function(){var n=/[^.]+$/.exec(bg&&bg.keys&&bg.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function LU(n){return!!pk&&pk in n}var fk=LU;var VU=Function.prototype,BU=VU.toString;function qU(n){if(n!=null){try{return BU.call(n)}catch{}try{return n+""}catch{}}return""}var gk=qU;var jU=/[\\^$.*+?()[\]{}|]/g,WU=/^\[object .+?Constructor\]$/,zU=Function.prototype,UU=Object.prototype,HU=zU.toString,YU=UU.hasOwnProperty,GU=RegExp("^"+HU.call(YU).replace(jU,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function KU(n){if(!ni(n)||fk(n))return!1;var t=Kl(n)?GU:WU;return t.test(gk(n))}var mk=KU;function JU(n,t){return n?.[t]}var _k=JU;function XU(n,t){var e=_k(n,t);return mk(e)?e:void 0}var Jl=XU;var Ak=Object.create,$U=function(){function n(){}return function(t){if(!ni(t))return{};if(Ak)return Ak(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}}(),yk=$U;function QU(n,t,e){switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}var vk=QU;function ZU(n,t){var e=-1,i=n.length;for(t||(t=Array(i));++e<i;)t[e]=n[e];return t}var wk=ZU;var eH=800,tH=16,nH=Date.now;function iH(n){var t=0,e=0;return function(){var i=nH(),r=tH-(i-e);if(e=i,r>0){if(++t>=eH)return arguments[0]}else t=0;return n.apply(void 0,arguments)}}var bk=iH;function rH(n){return function(){return n}}var Sk=rH;var sH=function(){try{var n=Jl(Object,"defineProperty");return n({},"",{}),n}catch{}}(),Xl=sH;var oH=Xl?function(n,t){return Xl(n,"toString",{configurable:!0,enumerable:!1,value:Sk(t),writable:!0})}:wg,Ck=oH;var aH=bk(Ck),xk=aH;var lH=9007199254740991,cH=/^(?:0|[1-9]\d*)$/;function uH(n,t){var e=typeof n;return t=t??lH,!!t&&(e=="number"||e!="symbol"&&cH.test(n))&&n>-1&&n%1==0&&n<t}var Sg=uH;function dH(n,t,e){t=="__proto__"&&Xl?Xl(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}var $l=dH;function hH(n,t){return n===t||n!==n&&t!==t}var Us=hH;var pH=Object.prototype,fH=pH.hasOwnProperty;function gH(n,t,e){var i=n[t];(!(fH.call(n,t)&&Us(i,e))||e===void 0&&!(t in n))&&$l(n,t,e)}var Dk=gH;function mH(n,t,e,i){var r=!e;e||(e={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=i?i(e[a],n[a],a,e,n):void 0;l===void 0&&(l=n[a]),r?$l(e,a,l):Dk(e,a,l)}return e}var Ek=mH;var Mk=Math.max;function _H(n,t,e){return t=Mk(t===void 0?n.length-1:t,0),function(){for(var i=arguments,r=-1,s=Mk(i.length-t,0),o=Array(s);++r<s;)o[r]=i[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=i[r];return a[t]=e(o),vk(n,this,a)}}var Tk=_H;function AH(n,t){return xk(Tk(n,t,wg),n+"")}var Ik=AH;var yH=9007199254740991;function vH(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=yH}var Cg=vH;function wH(n){return n!=null&&Cg(n.length)&&!Kl(n)}var Ql=wH;function bH(n,t,e){if(!ni(e))return!1;var i=typeof t;return(i=="number"?Ql(e)&&Sg(t,e.length):i=="string"&&t in e)?Us(e[t],n):!1}var kk=bH;function SH(n){return Ik(function(t,e){var i=-1,r=e.length,s=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(s=n.length>3&&typeof s=="function"?(r--,s):void 0,o&&kk(e[0],e[1],o)&&(s=r<3?void 0:s,r=1),t=Object(t);++i<r;){var a=e[i];a&&n(t,a,i,s)}return t})}var Nk=SH;var CH=Object.prototype;function xH(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||CH;return n===e}var xg=xH;function DH(n,t){for(var e=-1,i=Array(n);++e<n;)i[e]=t(e);return i}var Pk=DH;var EH="[object Arguments]";function MH(n){return Er(n)&&zs(n)==EH}var ew=MH;var Ok=Object.prototype,TH=Ok.hasOwnProperty,IH=Ok.propertyIsEnumerable,kH=ew(function(){return arguments}())?ew:function(n){return Er(n)&&TH.call(n,"callee")&&!IH.call(n,"callee")},Id=kH;function NH(){return!1}var Rk=NH;var Vk=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Fk=Vk&&typeof module=="object"&&module&&!module.nodeType&&module,PH=Fk&&Fk.exports===Vk,Lk=PH?Ei.Buffer:void 0,OH=Lk?Lk.isBuffer:void 0,RH=OH||Rk,Dg=RH;var FH="[object Arguments]",LH="[object Array]",VH="[object Boolean]",BH="[object Date]",qH="[object Error]",jH="[object Function]",WH="[object Map]",zH="[object Number]",UH="[object Object]",HH="[object RegExp]",YH="[object Set]",GH="[object String]",KH="[object WeakMap]",JH="[object ArrayBuffer]",XH="[object DataView]",$H="[object Float32Array]",QH="[object Float64Array]",ZH="[object Int8Array]",eY="[object Int16Array]",tY="[object Int32Array]",nY="[object Uint8Array]",iY="[object Uint8ClampedArray]",rY="[object Uint16Array]",sY="[object Uint32Array]",Rt={};Rt[$H]=Rt[QH]=Rt[ZH]=Rt[eY]=Rt[tY]=Rt[nY]=Rt[iY]=Rt[rY]=Rt[sY]=!0;Rt[FH]=Rt[LH]=Rt[JH]=Rt[VH]=Rt[XH]=Rt[BH]=Rt[qH]=Rt[jH]=Rt[WH]=Rt[zH]=Rt[UH]=Rt[HH]=Rt[YH]=Rt[GH]=Rt[KH]=!1;function oY(n){return Er(n)&&Cg(n.length)&&!!Rt[zs(n)]}var Bk=oY;function aY(n){return function(t){return n(t)}}var qk=aY;var jk=typeof exports=="object"&&exports&&!exports.nodeType&&exports,kd=jk&&typeof module=="object"&&module&&!module.nodeType&&module,lY=kd&&kd.exports===jk,tw=lY&&vg.process,cY=function(){try{var n=kd&&kd.require&&kd.require("util").types;return n||tw&&tw.binding&&tw.binding("util")}catch{}}(),nw=cY;var Wk=nw&&nw.isTypedArray,uY=Wk?qk(Wk):Bk,Eg=uY;var dY=Object.prototype,hY=dY.hasOwnProperty;function pY(n,t){var e=Td(n),i=!e&&Id(n),r=!e&&!i&&Dg(n),s=!e&&!i&&!r&&Eg(n),o=e||i||r||s,a=o?Pk(n.length,String):[],l=a.length;for(var c in n)(t||hY.call(n,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Sg(c,l)))&&a.push(c);return a}var zk=pY;function fY(n,t){return function(e){return n(t(e))}}var Uk=fY;function gY(n){var t=[];if(n!=null)for(var e in Object(n))t.push(e);return t}var Hk=gY;var mY=Object.prototype,_Y=mY.hasOwnProperty;function AY(n){if(!ni(n))return Hk(n);var t=xg(n),e=[];for(var i in n)i=="constructor"&&(t||!_Y.call(n,i))||e.push(i);return e}var Yk=AY;function yY(n){return Ql(n)?zk(n,!0):Yk(n)}var Mg=yY;var vY=Jl(Object,"create"),ls=vY;function wY(){this.__data__=ls?ls(null):{},this.size=0}var Gk=wY;function bY(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}var Kk=bY;var SY="__lodash_hash_undefined__",CY=Object.prototype,xY=CY.hasOwnProperty;function DY(n){var t=this.__data__;if(ls){var e=t[n];return e===SY?void 0:e}return xY.call(t,n)?t[n]:void 0}var Jk=DY;var EY=Object.prototype,MY=EY.hasOwnProperty;function TY(n){var t=this.__data__;return ls?t[n]!==void 0:MY.call(t,n)}var Xk=TY;var IY="__lodash_hash_undefined__";function kY(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=ls&&t===void 0?IY:t,this}var $k=kY;function Zl(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}Zl.prototype.clear=Gk;Zl.prototype.delete=Kk;Zl.prototype.get=Jk;Zl.prototype.has=Xk;Zl.prototype.set=$k;var iw=Zl;function NY(){this.__data__=[],this.size=0}var Qk=NY;function PY(n,t){for(var e=n.length;e--;)if(Us(n[e][0],t))return e;return-1}var Hs=PY;var OY=Array.prototype,RY=OY.splice;function FY(n){var t=this.__data__,e=Hs(t,n);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():RY.call(t,e,1),--this.size,!0}var Zk=FY;function LY(n){var t=this.__data__,e=Hs(t,n);return e<0?void 0:t[e][1]}var eN=LY;function VY(n){return Hs(this.__data__,n)>-1}var tN=VY;function BY(n,t){var e=this.__data__,i=Hs(e,n);return i<0?(++this.size,e.push([n,t])):e[i][1]=t,this}var nN=BY;function ec(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}ec.prototype.clear=Qk;ec.prototype.delete=Zk;ec.prototype.get=eN;ec.prototype.has=tN;ec.prototype.set=nN;var Ys=ec;var qY=Jl(Ei,"Map"),Tg=qY;function jY(){this.size=0,this.__data__={hash:new iw,map:new(Tg||Ys),string:new iw}}var iN=jY;function WY(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}var rN=WY;function zY(n,t){var e=n.__data__;return rN(t)?e[typeof t=="string"?"string":"hash"]:e.map}var Gs=zY;function UY(n){var t=Gs(this,n).delete(n);return this.size-=t?1:0,t}var sN=UY;function HY(n){return Gs(this,n).get(n)}var oN=HY;function YY(n){return Gs(this,n).has(n)}var aN=YY;function GY(n,t){var e=Gs(this,n),i=e.size;return e.set(n,t),this.size+=e.size==i?0:1,this}var lN=GY;function tc(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}tc.prototype.clear=iN;tc.prototype.delete=sN;tc.prototype.get=oN;tc.prototype.has=aN;tc.prototype.set=lN;var cN=tc;var KY=Uk(Object.getPrototypeOf,Object),Ig=KY;var JY="[object Object]",XY=Function.prototype,$Y=Object.prototype,uN=XY.toString,QY=$Y.hasOwnProperty,ZY=uN.call(Object);function eG(n){if(!Er(n)||zs(n)!=JY)return!1;var t=Ig(n);if(t===null)return!0;var e=QY.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&uN.call(e)==ZY}var dN=eG;function tG(){this.__data__=new Ys,this.size=0}var hN=tG;function nG(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}var pN=nG;function iG(n){return this.__data__.get(n)}var fN=iG;function rG(n){return this.__data__.has(n)}var gN=rG;var sG=200;function oG(n,t){var e=this.__data__;if(e instanceof Ys){var i=e.__data__;if(!Tg||i.length<sG-1)return i.push([n,t]),this.size=++e.size,this;e=this.__data__=new cN(i)}return e.set(n,t),this.size=e.size,this}var mN=oG;function nc(n){var t=this.__data__=new Ys(n);this.size=t.size}nc.prototype.clear=hN;nc.prototype.delete=pN;nc.prototype.get=fN;nc.prototype.has=gN;nc.prototype.set=mN;var _N=nc;var wN=typeof exports=="object"&&exports&&!exports.nodeType&&exports,AN=wN&&typeof module=="object"&&module&&!module.nodeType&&module,aG=AN&&AN.exports===wN,yN=aG?Ei.Buffer:void 0,vN=yN?yN.allocUnsafe:void 0;function lG(n,t){if(t)return n.slice();var e=n.length,i=vN?vN(e):new n.constructor(e);return n.copy(i),i}var bN=lG;var cG=Ei.Uint8Array,rw=cG;function uG(n){var t=new n.constructor(n.byteLength);return new rw(t).set(new rw(n)),t}var SN=uG;function dG(n,t){var e=t?SN(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}var CN=dG;function hG(n){return typeof n.constructor=="function"&&!xg(n)?yk(Ig(n)):{}}var xN=hG;function pG(n){return function(t,e,i){for(var r=-1,s=Object(t),o=i(t),a=o.length;a--;){var l=o[n?a:++r];if(e(s[l],l,s)===!1)break}return t}}var DN=pG;var fG=DN(),EN=fG;function gG(n,t,e){(e!==void 0&&!Us(n[t],e)||e===void 0&&!(t in n))&&$l(n,t,e)}var Nd=gG;function mG(n){return Er(n)&&Ql(n)}var MN=mG;function _G(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}var Pd=_G;function AG(n){return Ek(n,Mg(n))}var TN=AG;function yG(n,t,e,i,r,s,o){var a=Pd(n,e),l=Pd(t,e),c=o.get(l);if(c){Nd(n,e,c);return}var u=s?s(a,l,e+"",n,t,o):void 0,d=u===void 0;if(d){var h=Td(l),p=!h&&Dg(l),_=!h&&!p&&Eg(l);u=l,h||p||_?Td(a)?u=a:MN(a)?u=wk(a):p?(d=!1,u=bN(l,!0)):_?(d=!1,u=CN(l,!0)):u=[]:dN(l)||Id(l)?(u=a,Id(a)?u=TN(a):(!ni(a)||Kl(a))&&(u=xN(l))):d=!1}d&&(o.set(l,u),r(u,l,i,s,o),o.delete(l)),Nd(n,e,u)}var IN=yG;function kN(n,t,e,i,r){n!==t&&EN(t,function(s,o){if(r||(r=new _N),ni(s))IN(n,t,o,e,kN,i,r);else{var a=i?i(Pd(n,o),s,o+"",n,t,r):void 0;a===void 0&&(a=s),Nd(n,o,a)}},Mg)}var NN=kN;var vG=Nk(function(n,t,e){NN(n,t,e)}),kg=vG;var PN=new Se("Configuration for ngCharts");function ON(...n){return{registerables:[...yg,...n]}}function RN(...n){let t=kg({},...n);return{provide:PN,useValue:t}}var wG=(()=>{class n{constructor(){this.colorschemesOptions=new Qt(void 0)}setColorschemesOptions(e){this.pColorschemesOptions=e,this.colorschemesOptions.next(e)}getColorschemesOptions(){return this.pColorschemesOptions}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sw=(()=>{class n{constructor(e,i,r,s){this.zone=i,this.themeService=r,this.type="bar",this.plugins=[],this.chartClick=new Pt,this.chartHover=new Pt,this.subs=[],this.themeOverrides={},s?.registerables&&Dr.register(...s.registerables),s?.defaults&&bt.set(s.defaults),this.ctx=e.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(_p()).subscribe(o=>this.themeChanged(o)))}ngOnChanges(e){let i=["type"],r=Object.getOwnPropertyNames(e);if(r.some(s=>i.includes(s))||r.every(s=>e[s].isFirstChange()))this.render();else{let s=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,s.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,s.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,s.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(e=>e.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new Dr(this.ctx,this.getChartConfiguration()))}update(e){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(e))}hideDataset(e,i){this.chart&&(this.chart.getDatasetMeta(e).hidden=i,this.update())}isDatasetHidden(e){return this.chart?.getDatasetMeta(e)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(e){this.themeOverrides=e,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return kg({onHover:(e,i)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:e,active:i}))},onClick:(e,i)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:e,active:i}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}static{this.\u0275fac=function(i){return new(i||n)(ye(yn),ye(Tt),ye(wG),ye(PN,8))}}static{this.\u0275dir=It({type:n,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[Vi]})}}return n})();var FN={providers:[RE({eventCoalescing:!0}),H1(aT),RN(ON()),w1()]};var f=class{static logWSFeed=!1;static miscEvent$=new ct;static websocketEvent$=new ct;static requestStatusEvent$=new ct;static SocketMode="zerodha";static RestMode="zerodha";static zerodhaUserId="FW6041";static AliceblueUserId="AB033978";static AliceblueApiKey="49LHZEV09feJdK7c59mzI4vxZOpJ0McPVg6aYP0kKmnMq1Gbn3DQMBOAb8xE7b6EJCkOspKl1EBljBUEmVppzSTT39G7rd9gIy01cWqzZTocnuCHXpBSj14TiyP0SDF8";static AliceblueEncKey="";static AliceblueSessionId="";static fyersAppId="FUU5Z8ICUH";static fyersSecretId="IYF3LPXJ0X";static angelUserId="A165307";static angelPassword="scjFNB5iYLI";static angelAPIKey="I5nI74Nm";static angelFeedToken="";static angelJWTToken="";static angelRefreshToken="";static year="23";static INTEREST_RATE=6.89;static USDINR_FUT_TOKEN;static knife_threshold=5;static knife_threshold_adjust1=2;static knife_threshold_adjust2=7;static orders=[];static completeOrders=0;static placedOrders=0;static curr_positions_trades=[];static fetchedPositions=[];static isSimulatedStrategy=!1;static simulateCurrDateObj=null;static isProduction=!1;static numAlerts=4;static broker_auth="enctoken MNyfe/S7e6hVoUslcB8a4Ch/S+/EyS9DtavSmdQmevXzmPvOYv9neIMZkyI8L38HFIiNc2VPoNTrM3waBrvS0Hj4IPW+5LHN5B7J2p+s5gtdbW0/sueWOg==";static nfCEOILimit=null;static nfPEOILimit=null;static bnfCEOILimit=null;static bnfPEOILimit=null;static isHistoricalRunning=!1;static numStrategies=8;static stockPositions=null;static showATPLine=!1;static st_simulate_ce=[];static st_simulate_pe=[];static st_simulate_charts=[];static st_simulate_charts_values=[];static st_simulate_charts_print=[];static st_simulate_charts_print_strangle=[];static st_simulate_exits=[];static isIStrangleEnabled=!0;static isIStrangleInit=!1;static SL1=10;static SL2=12;static rollout_premium=10;static rollin_threshold=8;static stocksStrategyNum=8;static defaultTag="t:intraday2:228655";static supportedInstru=["NIFTY","BANKNIFTY","FINNIFTY","MIDCPNIFTY","SENSEX","BANKEX","USDINR"];static strike_diff={NIFTY:50,BANKNIFTY:100,FINNIFTY:50,MIDCPNIFTY:25,SENSEX:100,BANKEX:100};static freezeLimit={NIFTY:1800,BANKNIFTY:900,FINNIFTY:1800,MIDCPNIFTY:2800,SENSEX:1e3,BANKEX:900};static qtyStep={NIFTY:75,BANKNIFTY:15,FINNIFTY:25,MIDCPNIFTY:50,SENSEX:20,BANKEX:15};static enableAlgo=!1;static instruToTrade="";static expiryDateToTrade=null;static algoStrategyNum=1;static algoSSStrike=null;static algoTag="t:intraday-a:468568";static algoSS_CE;static algoSS_PE;static secsToWaitForSL=5;static numSlabs={MIDCPNIFTY:3,FINNIFTY:3,BANKNIFTY:3,NIFTY:3,SENSEX:3,BANKEX:3};static slabOrderId={MIDCPNIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},FINNIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},BANKNIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},NIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},SENSEX:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},BANKEX:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}}};static minDistTillTime={MIDCPNIFTY:{"12:00":150,"13:30":100,"14:30":100,"15:31":100,"23:59":100},FINNIFTY:{"12:00":150,"13:30":150,"14:30":100,"15:31":50,"23:59":50},BANKNIFTY:{"12:00":400,"13:30":300,"14:30":200,"15:31":200,"23:59":200},NIFTY:{"12:00":150,"13:30":150,"14:30":100,"15:31":50,"23:59":50},SENSEX:{"12:00":400,"13:30":300,"14:30":200,"15:31":200,"23:59":200},BANKEX:{"12:00":400,"13:30":300,"14:30":200,"15:31":200,"23:59":200}};static slabEntryTime={MIDCPNIFTY:{1:"9:46",2:"10:06",3:"10:36"},FINNIFTY:{1:"9:31",2:"9:46",3:"10:06"},BANKNIFTY:{1:"9:31",2:"9:46",3:"10:06"},NIFTY:{1:"9:31",2:"9:46",3:"10:06"},SENSEX:{1:"9:31",2:"9:46",3:"10:06"},BANKEX:{1:"9:31",2:"9:46",3:"10:06"}};static slabEntryDist={MIDCPNIFTY:{1:200,2:200,3:200},FINNIFTY:{1:200,2:150,3:200},BANKNIFTY:{1:500,2:400,3:500},NIFTY:{1:200,2:150,3:200},SENSEX:{1:500,2:400,3:500},BANKEX:{1:500,2:400,3:500}};static slabQty={MIDCPNIFTY:{1:-3e3,2:-3e3,3:-3e3},FINNIFTY:{1:-1320,2:-1320,3:-1320},BANKNIFTY:{1:-510,2:-675,3:-510},NIFTY:{1:-1500,2:-1500,3:-1500},SENSEX:{1:-430,2:-430,3:-430},BANKEX:{1:-450,2:-450,3:-450}};static slabEntered={MIDCPNIFTY:{1:!1,2:!1,3:!1},FINNIFTY:{1:!1,2:!1,3:!1},BANKNIFTY:{1:!1,2:!1,3:!1},NIFTY:{1:!1,2:!1,3:!1},SENSEX:{1:!1,2:!1,3:!1},BANKEX:{1:!1,2:!1,3:!1}};static slabStrikes={MIDCPNIFTY:{1:{CE:"",PE:""},2:{CE:"",PE:""},3:{CE:"",PE:""}},FINNIFTY:{1:{CE:"",PE:""},2:{CE:"",PE:""},3:{CE:"",PE:""}},BANKNIFTY:{1:{CE:"",PE:""},2:{CE:"",PE:""},3:{CE:"",PE:""}},NIFTY:{1:{CE:"",PE:""},2:{CE:"",PE:""},3:{CE:"",PE:""}},SENSEX:{1:{CE:"",PE:""},2:{CE:"",PE:""},3:{CE:"",PE:""}},BANKEX:{1:{CE:"",PE:""},2:{CE:"",PE:""},3:{CE:"",PE:""}}};static slabCurrEntryPrice={MIDCPNIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},FINNIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},BANKNIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},NIFTY:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},SENSEX:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}},BANKEX:{1:{CE:null,PE:null},2:{CE:null,PE:null},3:{CE:null,PE:null}}};static slabSL={MIDCPNIFTY:{1:.6,2:.7,3:.8},FINNIFTY:{1:.35,2:.4,3:.45},BANKNIFTY:{1:.35,2:.4,3:.45},NIFTY:{1:.35,2:.4,3:.45},SENSEX:{1:.35,2:.4,3:.45},BANKEX:{1:.35,2:.4,3:.45}};static slabSLCounter={MIDCPNIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},FINNIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},BANKNIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},NIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},SENSEX:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},BANKEX:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}}};static slabRollIn={MIDCPNIFTY:{1:.3,2:.35,3:.4},FINNIFTY:{1:.3,2:.35,3:.4},BANKNIFTY:{1:.3,2:.35,3:.4},NIFTY:{1:.3,2:.35,3:.4},SENSEX:{1:.3,2:.35,3:.4},BANKEX:{1:.3,2:.35,3:.4}};static slabRollInCounter={MIDCPNIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},FINNIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},BANKNIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},NIFTY:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},SENSEX:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}},BANKEX:{1:{CE:0,PE:0},2:{CE:0,PE:0},3:{CE:0,PE:0}}};static rolloutStrikeMultiple=1;static babyNamesLetters={A:1,B:2,C:3,D:4,E:5,F:8,G:3,H:5,I:1,J:1,K:2,L:3,M:4,N:5,O:7,P:8,Q:1,R:2,S:3,T:4,U:6,V:6,W:6,X:5,Y:1,Z:7};static mastersContract=new Map;static monthsMapping={1:"JAN",2:"FEB",3:"MAR",4:"APR",5:"MAY",6:"JUN",7:"JUL",8:"AUG",9:"SEP",10:"OCT",11:"NOV",12:"DEC"};static monthlyExpiryDates={"23JAN":new Date(2023,0,25),"23FEB":new Date(2023,1,23),"23MAR":new Date(2023,2,29),"23APR":new Date(2023,3,27),"23MAY":new Date(2023,4,25),"23JUN":new Date(2023,5,28),"23JUL":new Date(2023,6,27),"23AUG":new Date(2023,7,31),"23SEP":new Date(2023,8,28),"23OCT":new Date(2023,9,26),"23NOV":new Date(2023,10,30),"23DEC":new Date(2023,11,28),"24JAN":new Date(2024,0,25),"24FEB":new Date(2024,1,29),"24MAR":new Date(2024,2,28),"24APR":new Date(2024,3,25),"24MAY":new Date(2024,4,30),"24JUN":new Date(2024,5,27),"24JUL":new Date(2024,6,25),"24AUG":new Date(2024,7,29),"24SEP":new Date(2024,8,26),"24OCT":new Date(2024,9,31),"24NOV":new Date(2024,10,28),"24DEC":new Date(2024,11,26),"25JAN":new Date(2025,0,30),"25FEB":new Date(2025,1,27),"25MAR":new Date(2025,2,27),"25APR":new Date(2025,3,24),"25MAY":new Date(2025,4,29),"25JUN":new Date(2025,5,26),"25JUL":new Date(2025,6,31),"25AUG":new Date(2025,7,28),"25SEP":new Date(2025,8,30),"25OCT":new Date(2025,9,28),"25NOV":new Date(2025,10,25),"25DEC":new Date(2025,11,30)};static monthlyExpiryDatesBNF={"23JAN":new Date(2023,0,25),"23FEB":new Date(2023,1,23),"23MAR":new Date(2023,2,29),"23APR":new Date(2023,3,27),"23MAY":new Date(2023,4,25),"23JUN":new Date(2023,5,28),"23JUL":new Date(2023,6,27),"23AUG":new Date(2023,7,31),"23SEP":new Date(2023,8,28),"23OCT":new Date(2023,9,26),"23NOV":new Date(2023,10,30),"23DEC":new Date(2023,11,28),"24JAN":new Date(2024,0,25),"24FEB":new Date(2024,1,29),"24MAR":new Date(2024,2,27),"24APR":new Date(2024,3,24),"24MAY":new Date(2024,4,29),"24JUN":new Date(2024,5,26),"24JUL":new Date(2024,6,31),"24AUG":new Date(2024,7,28),"24SEP":new Date(2024,8,25),"24OCT":new Date(2024,9,30),"24NOV":new Date(2024,10,27),"24DEC":new Date(2024,11,24),"25JAN":new Date(2025,0,30),"25FEB":new Date(2025,1,27),"25MAR":new Date(2025,2,27),"25APR":new Date(2025,3,24),"25MAY":new Date(2025,4,29),"25JUN":new Date(2025,5,26),"25JUL":new Date(2025,6,31),"25AUG":new Date(2025,7,28),"25SEP":new Date(2025,8,30),"25OCT":new Date(2025,9,28),"25NOV":new Date(2025,10,25),"25DEC":new Date(2025,11,30)};static monthlyExpiryDatesFINNIFTY={"23JAN":new Date(2023,0,31),"23FEB":new Date(2023,1,28),"23MAR":new Date(2023,2,28),"23APR":new Date(2023,3,25),"23MAY":new Date(2023,4,30),"23JUN":new Date(2023,5,27),"23JUL":new Date(2023,6,25),"23AUG":new Date(2023,7,29),"23SEP":new Date(2023,8,26),"23OCT":new Date(2023,9,31),"23NOV":new Date(2023,10,28),"23DEC":new Date(2023,11,26),"24JAN":new Date(2024,0,30),"24FEB":new Date(2024,1,27),"24MAR":new Date(2024,2,26),"24APR":new Date(2024,3,30),"24MAY":new Date(2024,4,28),"24JUN":new Date(2024,5,25),"24JUL":new Date(2024,6,30),"24AUG":new Date(2024,7,27),"24SEP":new Date(2024,8,24),"24OCT":new Date(2024,9,29),"24NOV":new Date(2024,10,26),"24DEC":new Date(2024,11,31),"25JAN":new Date(2025,0,30),"25FEB":new Date(2025,1,27),"25MAR":new Date(2025,2,27),"25APR":new Date(2025,3,24),"25MAY":new Date(2025,4,29),"25JUN":new Date(2025,5,26),"25JUL":new Date(2025,6,31),"25AUG":new Date(2025,7,28),"25SEP":new Date(2025,8,30),"25OCT":new Date(2025,9,28),"25NOV":new Date(2025,10,25),"25DEC":new Date(2025,11,30)};static monthlyExpiryDatesMidcap={"23JAN":new Date(2023,0,31),"23FEB":new Date(2023,1,28),"23MAR":new Date(2023,2,28),"23APR":new Date(2023,3,25),"23MAY":new Date(2023,4,30),"23JUN":new Date(2023,5,27),"23JUL":new Date(2023,6,26),"23AUG":new Date(2023,7,28),"23SEP":new Date(2023,8,25),"23OCT":new Date(2023,9,30),"23NOV":new Date(2023,10,24),"23DEC":new Date(2023,11,22),"24JAN":new Date(2024,0,29),"24FEB":new Date(2024,1,26),"24MAR":new Date(2024,2,22),"24APR":new Date(2024,3,29),"24MAY":new Date(2024,4,27),"24JUN":new Date(2024,5,24),"24JUL":new Date(2024,6,29),"24AUG":new Date(2024,7,26),"24SEP":new Date(2024,8,30),"24OCT":new Date(2024,9,28),"24NOV":new Date(2024,10,25),"24DEC":new Date(2024,11,30),"25JAN":new Date(2025,0,30),"25FEB":new Date(2025,1,27),"25MAR":new Date(2025,2,27),"25APR":new Date(2025,3,24),"25MAY":new Date(2025,4,29),"25JUN":new Date(2025,5,26),"25JUL":new Date(2025,6,31),"25AUG":new Date(2025,7,28),"25SEP":new Date(2025,8,30),"25OCT":new Date(2025,9,28),"25NOV":new Date(2025,10,25),"25DEC":new Date(2025,11,30)};static monthlyExpiryDatesSensex={"23JAN":new Date(2023,0,25),"23FEB":new Date(2023,1,23),"23MAR":new Date(2023,2,29),"23APR":new Date(2023,3,27),"23MAY":new Date(2023,4,25),"23JUN":new Date(2023,5,28),"23JUL":new Date(2023,6,28),"23AUG":new Date(2023,7,25),"23SEP":new Date(2023,8,29),"23OCT":new Date(2023,9,27),"23NOV":new Date(2023,10,24),"23DEC":new Date(2023,11,29),"24JAN":new Date(2024,0,25),"24FEB":new Date(2024,1,23),"24MAR":new Date(2024,2,28),"24APR":new Date(2024,3,26),"24MAY":new Date(2024,4,31),"24JUN":new Date(2024,5,28),"24JUL":new Date(2024,6,26),"24AUG":new Date(2024,7,30),"24SEP":new Date(2024,8,27),"24OCT":new Date(2024,9,25),"24NOV":new Date(2024,10,29),"24DEC":new Date(2024,11,27),"25JAN":new Date(2025,0,28),"25FEB":new Date(2025,1,25),"25MAR":new Date(2025,2,25),"25APR":new Date(2025,3,29),"25MAY":new Date(2025,4,27),"25JUN":new Date(2025,5,24),"25JUL":new Date(2025,6,29),"25AUG":new Date(2025,7,26),"25SEP":new Date(2025,8,25),"25OCT":new Date(2025,9,30),"25NOV":new Date(2025,10,27),"25DEC":new Date(2025,11,24)};static monthlyExpiryDatesBankex={"23JAN":new Date(2023,0,31),"23FEB":new Date(2023,1,28),"23MAR":new Date(2023,2,28),"23APR":new Date(2023,3,25),"23MAY":new Date(2023,4,30),"23JUN":new Date(2023,5,27),"23JUL":new Date(2023,6,26),"23AUG":new Date(2023,7,28),"23SEP":new Date(2023,8,25),"23OCT":new Date(2023,9,30),"23NOV":new Date(2023,10,24),"23DEC":new Date(2023,11,22),"24JAN":new Date(2024,0,29),"24FEB":new Date(2024,1,26),"24MAR":new Date(2024,2,22),"24APR":new Date(2024,3,29),"24MAY":new Date(2024,4,27),"24JUN":new Date(2024,5,24),"24JUL":new Date(2024,6,29),"24AUG":new Date(2024,7,26),"24SEP":new Date(2024,8,30),"24OCT":new Date(2024,9,28),"24NOV":new Date(2024,10,25),"24DEC":new Date(2024,11,30),"25JAN":new Date(2025,0,28),"25FEB":new Date(2025,1,25),"25MAR":new Date(2025,2,25),"25APR":new Date(2025,3,29),"25MAY":new Date(2025,4,27),"25JUN":new Date(2025,5,24),"25JUL":new Date(2025,6,29),"25AUG":new Date(2025,7,26),"25SEP":new Date(2025,8,25),"25OCT":new Date(2025,9,30),"25NOV":new Date(2025,10,27),"25DEC":new Date(2025,11,24)};static monthlyExpiryDatesUSDINR={"23JAN":new Date(2023,0,27),"23FEB":new Date(2023,1,24),"23MAR":new Date(2023,2,28),"23APR":new Date(2023,3,26),"23MAY":new Date(2023,4,29),"23JUN":new Date(2023,5,27),"23JUL":new Date(2023,6,27),"23AUG":new Date(2023,7,25),"23SEP":new Date(2023,8,26),"23OCT":new Date(2023,9,27),"23NOV":new Date(2023,10,24),"23DEC":new Date(2023,11,28),"24JAN":new Date(2024,0,27),"24FEB":new Date(2024,1,24),"24MAR":new Date(2024,2,28),"24APR":new Date(2024,3,26),"24MAY":new Date(2024,4,29),"24JUN":new Date(2024,5,27),"24JUL":new Date(2024,6,27),"24AUG":new Date(2024,7,25),"24SEP":new Date(2024,8,26),"24OCT":new Date(2024,9,27),"24NOV":new Date(2024,10,24),"24DEC":new Date(2024,11,28),"25JAN":new Date(2024,0,27),"25FEB":new Date(2024,1,24),"25MAR":new Date(2024,2,28),"25APR":new Date(2024,3,26),"25MAY":new Date(2024,4,29),"25JUN":new Date(2024,5,27),"25JUL":new Date(2024,6,27),"25AUG":new Date(2024,7,25),"25SEP":new Date(2024,8,26),"25OCT":new Date(2024,9,27),"25NOV":new Date(2024,10,24),"25DEC":new Date(2024,11,28),"26JAN":new Date(2024,0,27),"26FEB":new Date(2024,1,24),"26MAR":new Date(2024,2,28),"26APR":new Date(2024,3,26),"26MAY":new Date(2024,4,29),"26JUN":new Date(2024,5,27),"26JUL":new Date(2024,6,27),"26AUG":new Date(2024,7,25),"26SEP":new Date(2024,8,26),"26OCT":new Date(2024,9,27),"26NOV":new Date(2024,10,24),"26DEC":new Date(2024,11,28),"27JAN":new Date(2024,0,27),"27FEB":new Date(2024,1,24),"27MAR":new Date(2024,2,28),"27APR":new Date(2024,3,26),"27MAY":new Date(2024,4,29),"27JUN":new Date(2024,5,27),"27JUL":new Date(2024,6,27),"27AUG":new Date(2024,7,25),"27SEP":new Date(2024,8,26),"27OCT":new Date(2024,9,27),"27NOV":new Date(2024,10,24),"27DEC":new Date(2024,11,28)};static holidays=[new Date(2023,0,26),new Date(2023,2,7),new Date(2023,2,30),new Date(2023,3,4),new Date(2023,3,7),new Date(2023,3,14),new Date(2023,4,1),new Date(2023,5,29),new Date(2023,7,15),new Date(2023,8,19),new Date(2023,9,2),new Date(2023,9,24),new Date(2023,10,14),new Date(2023,10,27),new Date(2023,11,25),new Date(2024,0,22),new Date(2024,0,26),new Date(2024,2,8),new Date(2024,2,25),new Date(2024,2,29),new Date(2024,3,11),new Date(2024,3,17),new Date(2024,4,1),new Date(2024,4,20),new Date(2024,5,17),new Date(2024,6,17),new Date(2024,7,15),new Date(2024,9,2),new Date(2024,10,1),new Date(2024,10,15),new Date(2024,10,20),new Date(2024,11,25),new Date(2025,1,26),new Date(2025,2,14),new Date(2025,2,31),new Date(2025,3,10),new Date(2025,3,14),new Date(2025,3,18),new Date(2025,4,1),new Date(2025,7,15),new Date(2025,7,27),new Date(2025,9,2),new Date(2025,9,21),new Date(2025,9,22),new Date(2025,10,5),new Date(2025,11,25)];static niftyExpiries=[new Date(2022,0,6),new Date(2022,0,13),new Date(2022,0,22),new Date(2022,0,27),new Date(2022,1,3),new Date(2022,1,10),new Date(2022,1,17),new Date(2022,1,24),new Date(2022,2,3),new Date(2022,2,10),new Date(2022,2,17),new Date(2022,2,24),new Date(2022,2,31),new Date(2022,3,7),new Date(2022,3,13),new Date(2022,3,21),new Date(2022,3,28),new Date(2022,4,5),new Date(2022,4,12),new Date(2022,4,19),new Date(2022,4,26),new Date(2022,5,2),new Date(2022,5,9),new Date(2022,5,16),new Date(2022,5,23),new Date(2022,5,30),new Date(2022,6,7),new Date(2022,6,14),new Date(2022,6,21),new Date(2022,6,28),new Date(2022,7,4),new Date(2022,7,11),new Date(2022,7,18),new Date(2022,7,25),new Date(2022,8,1),new Date(2022,8,8),new Date(2022,8,15),new Date(2022,8,22),new Date(2022,8,29),new Date(2022,9,6),new Date(2022,9,13),new Date(2022,9,20),new Date(2022,9,27),new Date(2022,10,3),new Date(2022,10,10),new Date(2022,10,17),new Date(2022,10,24),new Date(2022,11,1),new Date(2022,11,8),new Date(2022,11,15),new Date(2022,11,22),new Date(2022,11,29),new Date(2023,0,5),new Date(2023,0,12),new Date(2023,0,19),new Date(2023,0,25),new Date(2023,1,2),new Date(2023,1,9),new Date(2023,1,16),new Date(2023,1,23),new Date(2023,2,2),new Date(2023,2,9),new Date(2023,2,16),new Date(2023,2,23),new Date(2023,2,29),new Date(2023,3,6),new Date(2023,3,13),new Date(2023,3,20),new Date(2023,3,27),new Date(2023,4,4),new Date(2023,4,11),new Date(2023,4,18),new Date(2023,4,25),new Date(2023,5,1),new Date(2023,5,8),new Date(2023,5,15),new Date(2023,5,22),new Date(2023,5,28),new Date(2023,6,6),new Date(2023,6,13),new Date(2023,6,20),new Date(2023,6,27),new Date(2023,7,3),new Date(2023,7,10),new Date(2023,7,17),new Date(2023,7,24),new Date(2023,7,31),new Date(2023,8,7),new Date(2023,8,14),new Date(2023,8,21),new Date(2023,8,28),new Date(2023,9,5),new Date(2023,9,12),new Date(2023,9,19),new Date(2023,9,26),new Date(2023,10,2),new Date(2023,10,9),new Date(2023,10,16),new Date(2023,10,23),new Date(2023,10,30),new Date(2023,11,7),new Date(2023,11,14),new Date(2023,11,21),new Date(2023,11,28),new Date(2024,0,4),new Date(2024,0,11),new Date(2024,0,18),new Date(2024,0,25),new Date(2024,1,1),new Date(2024,1,8),new Date(2024,1,15),new Date(2024,1,22),new Date(2024,1,29),new Date(2024,2,7),new Date(2024,2,14),new Date(2024,2,21),new Date(2024,2,28),new Date(2024,3,4),new Date(2024,3,10),new Date(2024,3,18),new Date(2024,3,25),new Date(2024,4,2),new Date(2024,4,9),new Date(2024,4,16),new Date(2024,4,23),new Date(2024,4,30),new Date(2024,5,6),new Date(2024,5,13),new Date(2024,5,20),new Date(2024,5,27),new Date(2024,6,4),new Date(2024,6,11),new Date(2024,6,18),new Date(2024,6,25),new Date(2024,7,1),new Date(2024,7,8),new Date(2024,7,14),new Date(2024,7,22),new Date(2024,7,29),new Date(2024,8,5),new Date(2024,8,12),new Date(2024,8,19),new Date(2024,8,26),new Date(2024,9,3),new Date(2024,9,10),new Date(2024,9,17),new Date(2024,9,24),new Date(2024,9,31),new Date(2024,10,7),new Date(2024,10,14),new Date(2024,10,21),new Date(2024,10,28),new Date(2024,11,5),new Date(2024,11,12),new Date(2024,11,19),new Date(2024,11,26),new Date(2025,0,2),new Date(2025,0,9),new Date(2025,0,16),new Date(2025,0,23),new Date(2025,0,30),new Date(2025,1,6),new Date(2025,1,13),new Date(2025,1,20),new Date(2025,1,27),new Date(2025,2,6),new Date(2025,2,13),new Date(2025,2,20),new Date(2025,2,27),new Date(2025,3,3),new Date(2025,3,9),new Date(2025,3,17),new Date(2025,3,24),new Date(2025,3,30),new Date(2025,4,8),new Date(2025,4,15),new Date(2025,4,22),new Date(2025,4,29),new Date(2025,5,5),new Date(2025,5,12),new Date(2025,5,19),new Date(2025,5,26),new Date(2025,6,3),new Date(2025,6,10),new Date(2025,6,17),new Date(2025,6,24),new Date(2025,6,31),new Date(2025,7,7),new Date(2025,7,14),new Date(2025,7,21),new Date(2025,7,28),new Date(2025,8,2),new Date(2025,8,9),new Date(2025,8,16),new Date(2025,8,23),new Date(2025,8,30),new Date(2025,9,7),new Date(2025,9,14),new Date(2025,9,20),new Date(2025,9,28),new Date(2025,10,4),new Date(2025,10,11),new Date(2025,10,18),new Date(2025,10,25),new Date(2025,11,2),new Date(2025,11,9),new Date(2025,11,16),new Date(2025,11,23),new Date(2025,11,30)];static bnfExpiries=[new Date(2022,0,6),new Date(2022,0,13),new Date(2022,0,22),new Date(2022,0,27),new Date(2022,1,3),new Date(2022,1,10),new Date(2022,1,17),new Date(2022,1,24),new Date(2022,2,3),new Date(2022,2,10),new Date(2022,2,17),new Date(2022,2,24),new Date(2022,2,31),new Date(2022,3,7),new Date(2022,3,13),new Date(2022,3,21),new Date(2022,3,28),new Date(2022,4,5),new Date(2022,4,12),new Date(2022,4,19),new Date(2022,4,26),new Date(2022,5,2),new Date(2022,5,9),new Date(2022,5,16),new Date(2022,5,23),new Date(2022,5,30),new Date(2022,6,7),new Date(2022,6,14),new Date(2022,6,21),new Date(2022,6,28),new Date(2022,7,4),new Date(2022,7,11),new Date(2022,7,18),new Date(2022,7,25),new Date(2022,8,1),new Date(2022,8,8),new Date(2022,8,15),new Date(2022,8,22),new Date(2022,8,29),new Date(2022,9,6),new Date(2022,9,13),new Date(2022,9,20),new Date(2022,9,27),new Date(2022,10,3),new Date(2022,10,10),new Date(2022,10,17),new Date(2022,10,24),new Date(2022,11,1),new Date(2022,11,8),new Date(2022,11,15),new Date(2022,11,22),new Date(2022,11,29),new Date(2023,0,5),new Date(2023,0,12),new Date(2023,0,19),new Date(2023,0,25),new Date(2023,1,2),new Date(2023,1,9),new Date(2023,1,16),new Date(2023,1,23),new Date(2023,2,2),new Date(2023,2,9),new Date(2023,2,16),new Date(2023,2,23),new Date(2023,2,29),new Date(2023,3,6),new Date(2023,3,13),new Date(2023,3,20),new Date(2023,3,27),new Date(2023,4,4),new Date(2023,4,11),new Date(2023,4,18),new Date(2023,4,25),new Date(2023,5,1),new Date(2023,5,8),new Date(2023,5,15),new Date(2023,5,22),new Date(2023,5,28),new Date(2023,6,6),new Date(2023,6,13),new Date(2023,6,20),new Date(2023,6,27),new Date(2023,7,3),new Date(2023,7,10),new Date(2023,7,17),new Date(2023,7,24),new Date(2023,7,31),new Date(2023,8,6),new Date(2023,8,13),new Date(2023,8,20),new Date(2023,8,27),new Date(2023,9,4),new Date(2023,9,11),new Date(2023,9,18),new Date(2023,9,26),new Date(2023,10,1),new Date(2023,10,8),new Date(2023,10,15),new Date(2023,10,22),new Date(2023,10,30),new Date(2023,11,6),new Date(2023,11,13),new Date(2023,11,20),new Date(2023,11,28),new Date(2024,0,3),new Date(2024,0,10),new Date(2024,0,17),new Date(2024,0,25),new Date(2024,0,31),new Date(2024,1,7),new Date(2024,1,14),new Date(2024,1,21),new Date(2024,1,29),new Date(2024,2,6),new Date(2024,2,13),new Date(2024,2,20),new Date(2024,2,27),new Date(2024,3,3),new Date(2024,3,10),new Date(2024,3,16),new Date(2024,3,24),new Date(2024,3,30),new Date(2024,4,8),new Date(2024,4,15),new Date(2024,4,22),new Date(2024,4,29),new Date(2024,5,5),new Date(2024,5,12),new Date(2024,5,19),new Date(2024,5,26),new Date(2024,6,3),new Date(2024,6,10),new Date(2024,6,16),new Date(2024,6,24),new Date(2024,6,31),new Date(2024,7,7),new Date(2024,7,14),new Date(2024,7,21),new Date(2024,7,28),new Date(2024,8,4),new Date(2024,8,11),new Date(2024,8,18),new Date(2024,8,25),new Date(2024,9,1),new Date(2024,9,9),new Date(2024,9,16),new Date(2024,9,23),new Date(2024,9,30),new Date(2024,10,6),new Date(2024,10,13),new Date(2024,10,27),new Date(2024,11,24),new Date(2025,0,30),new Date(2025,1,27),new Date(2025,2,27),new Date(2025,3,24),new Date(2025,4,29),new Date(2025,5,26),new Date(2025,6,31),new Date(2025,7,28),new Date(2025,8,30),new Date(2025,9,28),new Date(2025,10,25),new Date(2025,11,30)];static finniftyExpiries=[new Date(2023,0,5),new Date(2023,0,12),new Date(2023,0,19),new Date(2023,0,25),new Date(2023,1,7),new Date(2023,1,14),new Date(2023,1,21),new Date(2023,1,28),new Date(2023,2,6),new Date(2023,2,14),new Date(2023,2,21),new Date(2023,2,28),new Date(2023,3,3),new Date(2023,3,11),new Date(2023,3,18),new Date(2023,3,25),new Date(2023,4,2),new Date(2023,4,9),new Date(2023,4,16),new Date(2023,4,23),new Date(2023,4,30),new Date(2023,5,6),new Date(2023,5,13),new Date(2023,5,20),new Date(2023,5,27),new Date(2023,6,6),new Date(2023,6,13),new Date(2023,6,20),new Date(2023,6,27),new Date(2023,7,1),new Date(2023,7,8),new Date(2023,7,14),new Date(2023,7,22),new Date(2023,7,29),new Date(2023,8,5),new Date(2023,8,12),new Date(2023,8,18),new Date(2023,8,26),new Date(2023,9,3),new Date(2023,9,10),new Date(2023,9,17),new Date(2023,9,23),new Date(2023,9,31),new Date(2023,10,7),new Date(2023,10,13),new Date(2023,10,21),new Date(2023,10,28),new Date(2023,11,5),new Date(2023,11,12),new Date(2023,11,19),new Date(2023,11,26),new Date(2024,0,2),new Date(2024,0,9),new Date(2024,0,16),new Date(2024,0,23),new Date(2024,0,30),new Date(2024,1,6),new Date(2024,1,13),new Date(2024,1,20),new Date(2024,1,27),new Date(2024,2,5),new Date(2024,2,12),new Date(2024,2,19),new Date(2024,2,26),new Date(2024,3,2),new Date(2024,3,9),new Date(2024,3,16),new Date(2024,3,23),new Date(2024,3,30),new Date(2024,4,7),new Date(2024,4,14),new Date(2024,4,21),new Date(2024,4,28),new Date(2024,5,4),new Date(2024,5,11),new Date(2024,5,18),new Date(2024,5,25),new Date(2024,6,2),new Date(2024,6,9),new Date(2024,6,16),new Date(2024,6,23),new Date(2024,6,30),new Date(2024,7,6),new Date(2024,7,13),new Date(2024,7,20),new Date(2024,7,27),new Date(2024,8,3),new Date(2024,8,10),new Date(2024,8,17),new Date(2024,8,24),new Date(2024,9,1),new Date(2024,9,8),new Date(2024,9,15),new Date(2024,9,22),new Date(2024,9,29),new Date(2024,10,5),new Date(2024,10,12),new Date(2024,10,19),new Date(2024,10,26),new Date(2024,11,31),new Date(2025,0,28),new Date(2025,1,27),new Date(2025,2,27),new Date(2025,3,24),new Date(2025,4,29),new Date(2025,5,26),new Date(2025,6,31),new Date(2025,7,28),new Date(2025,8,30),new Date(2025,9,28),new Date(2025,10,25),new Date(2025,11,30)];static midcapExpiries=[new Date(2023,6,12),new Date(2023,6,19),new Date(2023,6,26),new Date(2023,7,2),new Date(2023,7,9),new Date(2023,7,16),new Date(2023,7,21),new Date(2023,7,28),new Date(2023,8,4),new Date(2023,8,11),new Date(2023,8,18),new Date(2023,8,25),new Date(2023,8,29),new Date(2023,9,9),new Date(2023,9,16),new Date(2023,9,23),new Date(2023,9,30),new Date(2023,10,6),new Date(2023,10,13),new Date(2023,10,20),new Date(2023,10,24),new Date(2023,11,4),new Date(2023,11,11),new Date(2023,11,18),new Date(2023,11,22),new Date(2024,0,1),new Date(2024,0,8),new Date(2024,0,15),new Date(2024,0,20),new Date(2024,0,29),new Date(2024,1,5),new Date(2024,1,12),new Date(2024,1,19),new Date(2024,1,26),new Date(2024,2,11),new Date(2024,2,18),new Date(2024,2,22),new Date(2024,3,1),new Date(2024,3,8),new Date(2024,3,15),new Date(2024,3,22),new Date(2024,3,29),new Date(2024,4,6),new Date(2024,4,13),new Date(2024,4,17),new Date(2024,4,27),new Date(2024,5,3),new Date(2024,5,10),new Date(2024,5,14),new Date(2024,5,24),new Date(2024,6,1),new Date(2024,6,8),new Date(2024,6,15),new Date(2024,6,22),new Date(2024,6,29),new Date(2024,7,5),new Date(2024,7,12),new Date(2024,7,19),new Date(2024,7,26),new Date(2024,8,2),new Date(2024,8,9),new Date(2024,8,16),new Date(2024,8,23),new Date(2024,8,30),new Date(2024,9,7),new Date(2024,9,14),new Date(2024,9,21),new Date(2024,9,28),new Date(2024,10,4),new Date(2024,10,11),new Date(2024,10,18),new Date(2024,10,25),new Date(2024,11,30),new Date(2025,0,27),new Date(2025,1,27),new Date(2025,2,27),new Date(2025,3,24),new Date(2025,4,29),new Date(2025,5,26),new Date(2025,6,31),new Date(2025,7,28),new Date(2025,8,30),new Date(2025,9,28),new Date(2025,10,25),new Date(2025,11,30)];static sensexExpiries=[new Date(2023,6,14),new Date(2023,6,21),new Date(2023,6,28),new Date(2023,7,4),new Date(2023,7,11),new Date(2023,7,18),new Date(2023,7,25),new Date(2023,8,1),new Date(2023,8,8),new Date(2023,8,15),new Date(2023,8,22),new Date(2023,8,29),new Date(2023,9,6),new Date(2023,9,13),new Date(2023,9,20),new Date(2023,9,27),new Date(2023,10,3),new Date(2023,10,10),new Date(2023,10,17),new Date(2023,10,24),new Date(2023,11,1),new Date(2023,11,8),new Date(2023,11,15),new Date(2023,11,22),new Date(2023,11,29),new Date(2024,0,5),new Date(2024,0,12),new Date(2024,0,19),new Date(2024,0,25),new Date(2024,1,2),new Date(2024,1,9),new Date(2024,1,16),new Date(2024,1,23),new Date(2024,2,1),new Date(2024,2,7),new Date(2024,2,15),new Date(2024,2,22),new Date(2024,2,28),new Date(2024,3,5),new Date(2024,3,12),new Date(2024,3,19),new Date(2024,3,26),new Date(2024,4,3),new Date(2024,4,10),new Date(2024,4,17),new Date(2024,4,24),new Date(2024,4,31),new Date(2024,5,7),new Date(2024,5,14),new Date(2024,5,21),new Date(2024,5,28),new Date(2024,6,5),new Date(2024,6,12),new Date(2024,6,19),new Date(2024,6,26),new Date(2024,7,2),new Date(2024,7,9),new Date(2024,7,16),new Date(2024,7,23),new Date(2024,7,30),new Date(2024,8,6),new Date(2024,8,13),new Date(2024,8,20),new Date(2024,8,27),new Date(2024,9,4),new Date(2024,9,11),new Date(2024,9,18),new Date(2024,9,25),new Date(2024,10,8),new Date(2024,10,14),new Date(2024,10,22),new Date(2024,10,29),new Date(2024,11,6),new Date(2024,11,13),new Date(2024,11,20),new Date(2024,11,27),new Date(2025,0,3),new Date(2025,0,7),new Date(2025,0,14),new Date(2025,0,21),new Date(2025,0,28),new Date(2025,1,4),new Date(2025,1,11),new Date(2025,1,18),new Date(2025,1,25),new Date(2025,2,4),new Date(2025,2,11),new Date(2025,2,18),new Date(2025,2,25),new Date(2025,3,1),new Date(2025,3,8),new Date(2025,3,15),new Date(2025,3,22),new Date(2025,3,29),new Date(2025,4,6),new Date(2025,4,13),new Date(2025,4,20),new Date(2025,4,27),new Date(2025,5,3),new Date(2025,5,10),new Date(2025,5,17),new Date(2025,5,24),new Date(2025,6,1),new Date(2025,6,8),new Date(2025,6,15),new Date(2025,6,22),new Date(2025,6,29),new Date(2025,7,5),new Date(2025,7,12),new Date(2025,7,19),new Date(2025,7,26),new Date(2025,8,4),new Date(2025,8,11),new Date(2025,8,18),new Date(2025,8,25),new Date(2025,9,1),new Date(2025,9,9),new Date(2025,9,16),new Date(2025,9,23),new Date(2025,9,30),new Date(2025,10,6),new Date(2025,10,13),new Date(2025,10,20),new Date(2025,10,27),new Date(2025,11,4),new Date(2025,11,11),new Date(2025,11,18),new Date(2025,11,24)];static bankexExpiries=[new Date(2023,9,23),new Date(2023,9,30),new Date(2023,10,6),new Date(2023,10,13),new Date(2023,10,20),new Date(2023,10,24),new Date(2023,11,4),new Date(2023,11,11),new Date(2023,11,18),new Date(2023,11,22),new Date(2024,0,1),new Date(2024,0,8),new Date(2024,0,15),new Date(2024,0,20),new Date(2024,0,29),new Date(2024,1,5),new Date(2024,1,12),new Date(2024,1,19),new Date(2024,1,26),new Date(2024,2,11),new Date(2024,2,18),new Date(2024,2,22),new Date(2024,3,1),new Date(2024,3,8),new Date(2024,3,15),new Date(2024,3,22),new Date(2024,3,29),new Date(2024,4,6),new Date(2024,4,13),new Date(2024,4,17),new Date(2024,4,27),new Date(2024,5,3),new Date(2024,5,10),new Date(2024,5,14),new Date(2024,5,24),new Date(2024,6,1),new Date(2024,6,8),new Date(2024,6,15),new Date(2024,6,22),new Date(2024,6,29),new Date(2024,7,5),new Date(2024,7,12),new Date(2024,7,19),new Date(2024,7,26),new Date(2024,8,2),new Date(2024,8,9),new Date(2024,8,16),new Date(2024,8,23),new Date(2024,8,30),new Date(2024,9,7),new Date(2024,9,14),new Date(2024,9,21),new Date(2024,9,28),new Date(2024,10,4),new Date(2024,10,11),new Date(2024,10,18),new Date(2024,10,25),new Date(2024,11,30),new Date(2025,0,28),new Date(2025,1,25),new Date(2025,2,25),new Date(2025,3,29),new Date(2025,4,27),new Date(2025,5,24),new Date(2025,6,29),new Date(2025,7,26),new Date(2025,8,25),new Date(2025,9,30),new Date(2025,10,27),new Date(2025,11,24)];static usdinrExpiries=[new Date(2023,0,5),new Date(2023,0,12),new Date(2023,0,19),new Date(2023,0,25),new Date(2023,1,3),new Date(2023,1,10),new Date(2023,1,17),new Date(2023,1,24),new Date(2023,2,3),new Date(2023,2,10),new Date(2023,2,17),new Date(2023,2,24),new Date(2023,2,28),new Date(2023,2,31),new Date(2023,3,6),new Date(2023,3,13),new Date(2023,3,21),new Date(2023,3,28),new Date(2023,4,5),new Date(2023,4,12),new Date(2023,4,19),new Date(2023,4,26),new Date(2023,5,2),new Date(2023,5,9),new Date(2023,5,16),new Date(2023,5,23),new Date(2023,5,30),new Date(2023,6,7),new Date(2023,6,14),new Date(2023,6,21),new Date(2023,6,28),new Date(2023,7,4),new Date(2023,7,11),new Date(2023,7,18),new Date(2023,7,25),new Date(2023,8,1),new Date(2023,8,8),new Date(2023,8,15),new Date(2023,8,22),new Date(2023,8,29),new Date(2023,9,6),new Date(2023,9,13),new Date(2023,9,20),new Date(2023,9,27),new Date(2023,10,3),new Date(2023,10,10),new Date(2023,10,17),new Date(2023,10,24),new Date(2023,11,1),new Date(2023,11,8),new Date(2023,11,15),new Date(2023,11,22),new Date(2023,11,29)];static coveredCallPositions=[["NIFTY24FEB21800CE",-100],["NIFTY24FEB21700CE",-50],["NIFTY24FEB21450CE",-50],["NIFTY24FEB21400CE",-50]];static mfInvested=[["NIFTYBEES",.01119,0],["INF179K01WM1",.00964,0],["INF109K012M7",.01042,0],["INF247L01445",.01042,0],["INF179K01XQ0",.01042,0],["INF204K01E54",.01042,0],["INF179K01UT0",.01042,0],["INF879O01027",.01042,0]];static holdings={NIFTYBEES:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:182.78,qty:696,support:[180],resistance:[207]},BANKBEES:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:373.28,qty:171,support:[350],resistance:[410]},NETFIT:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:35.33,qty:1750,support:[35],resistance:[40]},ADANIPORTS:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[650],resistance:[900]},ASIANPAINT:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:3098.95,qty:3,support:[3e3,2860],resistance:[3600]},AXISBANK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[650],resistance:[770,850]},"BAJAJ-AUTO":{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[3300],resistance:[4e3,4300]},BAJAJFINSV:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:17013.7,qty:1,support:[15500],resistance:[19200]},BAJFINANCE:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[6500],resistance:[8e3]},BHARTIARTL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[650],resistance:[780]},BPCL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[360,250],resistance:[500,550]},BRITANNIA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[3400],resistance:[3800,4150]},CIPLA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[870],resistance:[1e3]},COALINDIA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[140],resistance:[200]},DIVISLAB:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[4350],resistance:[5400]},DRREDDY:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[4250],resistance:[5600]},EICHERMOT:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2350],resistance:[3e3]},GRASIM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:1733.95,qty:6,support:[1600],resistance:[1900]},HCLTECH:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1100],resistance:[1360]},HDFC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2500],resistance:[3e3]},HDFCBANK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1400],resistance:[1700]},HDFCLIFE:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[630],resistance:[760]},HEROMOTOCO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2300],resistance:[3600]},HINDALCO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[410],resistance:[550]},HINDUNILVR:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2230],resistance:[2800]},ICICIBANK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[710],resistance:[850]},INDUSINDBK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[810],resistance:[1230]},INFY:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1800,1670],resistance:[1950]},IOC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[110],resistance:[140,170]},ITC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[210,200],resistance:[260]},JSWSTEEL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[620],resistance:[770]},KOTAKBANK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1720],resistance:[2200]},LT:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1740],resistance:[2070]},"M&M":{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[800,730],resistance:[980]},MARUTI:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:8565.9,qty:1,support:[7e3],resistance:[8300,9900]},NESTLEIND:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:18927.05,qty:1,support:[18600],resistance:[20600]},NTPC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[120],resistance:[150]},ONGC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[130],resistance:[170]},POWERGRID:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:202.1,qty:45,support:[198],resistance:[215]},RELIANCE:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:2481,qty:4,support:[2350],resistance:[2750]},SBILIFE:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:1183.8,qty:8,support:[1100],resistance:[1290]},SBIN:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[450],resistance:[540]},SHREECEM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[25300],resistance:[31300]},SUNPHARMA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:829.8,qty:12,support:[730],resistance:[870]},TATACONSUM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[700],resistance:[880]},TATAMOTORS:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:513.9,qty:20,support:[440],resistance:[530]},TATASTEEL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1060],resistance:[1500]},TCS:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[3400],resistance:[4e3]},TECHM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1540],resistance:[1830]},TITAN:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:2330.5,qty:4,support:[2200],resistance:[2680]},ULTRACEMCO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[7e3],resistance:[8200]},UPL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[700],resistance:[850]},WIPRO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[600],resistance:[725]},RADICO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:1068.1,qty:9,support:[1e3],resistance:[1300]},VBL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:901.7,qty:11,support:[810],resistance:[1e3]},ACC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2100],resistance:[2600]},ADANIENT:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:1860.9,qty:6,support:[1750,1350],resistance:[1800,1900]},ADANIGREEN:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1500,875],resistance:[1500,1900]},ADANITRANS:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1650],resistance:[2040]},AMBUJACEM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[350],resistance:[440]},APOLLOHOSP:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[4e3],resistance:[5930]},AUROPHARMA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[620],resistance:[770,1060]},BAJAJHLDNG:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[5e3],resistance:[5650]},BANDHANBNK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[250],resistance:[430,630]},BANKBARODA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[70],resistance:[140]},BERGEPAINT:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[720],resistance:[870]},BIOCON:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[320],resistance:[480]},BOSCHLTD:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[13300,8e3],resistance:[19100,22400,27900]},CADILAHC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[410],resistance:[570,670]},CHOLAFIN:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:654.79,qty:31,support:[470],resistance:[670]},COLPAL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1400],resistance:[1750,1800]},DABUR:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[550],resistance:[650]},DLF:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[360],resistance:[450]},DMART:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:4704.85,qty:2,support:[4170],resistance:[5200]},GAIL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[125],resistance:[170,200]},GLAND:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[3350],resistance:[4050,4300]},GODREJCP:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[880],resistance:[1130]},HAVELLS:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1240],resistance:[1500]},HDFCAMC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2200],resistance:[3300]},HINDPETRO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[275],resistance:[350]},ICICIGI:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1330],resistance:[1650]},ICICIPRULI:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[530],resistance:[700]},IGL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[450,370],resistance:[600]},INDIGO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1800],resistance:[2350]},INDUSTOWER:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[235],resistance:[330]},JINDALSTEL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[350],resistance:[500]},JUBLFOOD:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[3400],resistance:[4575]},LTI:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[6300],resistance:[7550]},LUPIN:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[860],resistance:[1260]},MARICO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[490],resistance:[600]},"MCDOWELL-N":{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[860,820],resistance:[1e3]},MUTHOOTFIN:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[1410],resistance:[1700]},NAUKRI:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[5100],resistance:[7200]},NMDC:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[130],resistance:[200]},PEL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2400],resistance:[3e3]},PGHH:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[15400,14300],resistance:[16200]},PIDILITIND:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:2648.45,qty:4,support:[2500],resistance:[2750]},PIIND:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2730],resistance:[3500]},PNB:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[36],resistance:[48]},SAIL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[100],resistance:[145]},SBICARD:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[880],resistance:[1150]},SIEMENS:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2100],resistance:[2550]},TORNTPHARM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[2740],resistance:[3280]},VEDL:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[300],resistance:[370]},YESBANK:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:null,qty:null,support:[10],resistance:[20]},NYKAA:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:1690,qty:3,support:[],resistance:[]},ZOMATO:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:92.75,qty:50,support:[],resistance:[]},PAYTM:{ltp:null,volume:null,oned:null,onew:null,onem:null,threem:null,fiftytwow:null,avgp:779.91,qty:12,support:[],resistance:[]}};static audioSuccess="data:audio/mp3;base64,SUQzBAAAAAAJAVRQRTEAAAAbAAADU291bmRKYXkuY29tIFNvdW5kIEVmZmVjdHNURU5DAAAAFgAAAExBTUUgMy45OCAoTWF4IDAuOS4xKVRERU4AAAAUAAAAMjAxMS0wNS0yNFQxMDo1MDo0OFREVEcAAAAUAAAAMjAxMS0wNS0yNFQxMDo1MDo0OAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/++BkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABJbmZvAAAADwAAAAoAACzlABkZGRkZGRkZGTMzMzMzMzMzMzNMTExMTExMTExMZmZmZmZmZmZmZoCAgICAgICAgICZmZmZmZmZmZmZs7Ozs7Ozs7Ozs8zMzMzMzMzMzMzm5ubm5ubm5ubm/////////////wAAADpMQU1FMy45OCABzQAAAAAAAAAANP8kBgVNAAFAAAAs5eu8Xd8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/++BEAAAFZG+/7Q0gANLv92CjPABlai8XuZ2ABKxF4zczoAABJJsTUgyuNfEAABEL67gYtz//XIxWTvIxWK0eqIGFwxk0aOcy4BwAAYcRgHAGAMNyIw2j3/75+CADAIEmWogQIGMue5/PfUII0aMjFYrFaxAAMNtqIEEP4f3Oc/BG3RAKBQSMLigkQQhCGWghlznOkCMVo26QCgkY3+EIQhCc5+CBA4LgADCYXBMn2HhDznOc///NGjbpGjbnOc50u3v9Q///hBAcBAMf/4Ph+yYOT0wAABBnJk02IEEPijxgVisiQ1YyRM3v//Dfv8KxDDkJwLmmxgADgAAACgG4eB/hqBDCEKCJr0gP39/SlIDxXs8fwHjyJrHze+///7v1er48BD0PUbPH+NfGv///SlKaze+Ice973vuj9/v/w3794nC2E4OhwY0PZ3jx48ePHlNf3hv1eztRBAc4h6PUhOCEFwVFWBWPNZhv499ZhsavV7+9H7+P6PHmn6GKCJl+/ve9KPImob+PAQ9X7gPKZ3h/Hv6Upq7x48prN9vFer48AQwIAiIBQMBgMAgCAAAAGDuWHkO2LQFuFd13zlNNDVe+yt170avJ7y+1CZWuOWsIeSVyvrqS9bhWITyldx2dRaN9lTNDDTI7yALiGAARdyjMzJU4KOQwQaEZDwI+jvhAYhkwlnbJnVwa5LNOjPxDKLSJulD+87di5EM6LKpZp138rUuFSAyENUnb5vD9UECMutYT/4WngfkoBKSXyible4wrXzed7faWR44Z2MdS/moIRYy7K4xfuVKOn0LAdWmuf3OVqrwNzGvbt8pL/3bFpcgoHY1atFWqe0Ztu0Fy208wkXoaaLZ09NHVM3cltJr872V2vf5+HKfv6m7X/////9I3lXB+CwCojQu3hT95UndZx6HP/////+vzIqViaM78uLJ5fH6t+anZi43G3AEBAHRwOBwMAgEQAAAdsYs2FkGVhGCNfOSytImJrweykj8DPNLKwkZWCc1ubQUAqecT3Qw9TwGrgFETKgwMLmmWs2hpymSyZqJpUp/dKD4sQQkMjIQSiEDS59g6KRAFHILWoy5/VL1QK/oHhfSWfQwxxyoAgiesfh3WNztDT4dxdCc7SSjlsRBK0Y5+Hy+V33LsbtZ3aeIyqepr2VnU+8bLP/Duf00dt8z7X+tS3IIjFrOQWtyzGnpJ5k8ph6V5/UqPBObpLNvPlv/pKammE+4RFKaHbX1G50V6k688PEoGmiF+Gbdiq8LUI/nd78qWEZJA//Sc33WHafv/////7t2L8w7Cl6u2/vY3YfqSixyrMzH/////8fppiWPAKgcnWlGEssRS/Kcqr6zCEAdHQ1gkiYEgAHaLLBgDAD+59JY1+80eOdf/++JEDQAHwYvP/jKAAP6xei3EUAAYzgc//YoAA0fBJ7+fUAG/CzCTikz8slIqFwN8A0ZcDFjQO+LC4ADGI93HGKADEAgAK1DIQWyIdJNsMuCBRH5RHPCYADLOwyoywhMQ8mSTNTxuJzLZoRcLDAuACyIRQV8SiDewbR+dFgHeYFwnx0DIE0USKl1KBESSy/ZZ8UozoczNwcIKqlo4vRZTN6tS09AuFwZcQXGTNFJKLyJwiwtIARAgxRMn0CAV/OsuZpuG2EgaC5yDlcuEwThPpkNIsTwZfAwqETuTCJBisyguHGs/zBf///TN3qOG39NMuDmEQ/41CKdRc0Vd0SkHvkoUJXbs5dowgdams5SoUW4JsMp7uFkxSxrdZMCzDgdE6CgvoLjGXAEAiUQKA2NDZyDlwPQEABWoZCC2RApEkEnFICiEHJsc8GoAAyaCgYvEo0+ykgtPC0QOUIGAEIC6gO0AaOAWFg3ND7BezrzhOGxcNDcZwWQRYxJ01SI4BIUknWit1KNTIuHk00zMi5uGQlkyTRFieMRXQoTemhdNKqbpugXDRZAyJni+UjImjE8XiMAaQFIY0hm54pPdftNzRBAOUPGgoMZsrmh0+LjPlEixeCxsDFuwtLIggIJDuNSaAcIDazb9v///TepTt9ablwuGn/MxtpakvWitKZC5xypiorM2V3ACeNACnBUUuZtkcrZ1fb+FLBQG86lUFNnbVpRTMiDIGZEQHDQDAAGBGBxoCiwBgiN1GnGdEHJJPeZOZEWHKAiJA/oILNCzieaia6lJJdRWNnMlqFlAmhGdILZKs1MTpokYIsgyRkmMaFnQMENAK4ABBRlR2qUm2p/960SAg0HijspO39+kvYhwNtwRSRZpqykfb95iTosJERyQHFwGGQpY2dv9X9EujGgSEJIsjuopiPTVv+qnPI9f///86iHykkkUVFbNQcwAXFkGzzQGnOJifqGlyRJCUIYy3U2mGAuDpLhcLBNDNAWE4EgcJ9GXIsQdajqI1Q+YvF4+kkkXj5HEGGWBMVgavFwCgeDIw7momqtJ3rdRJGRXSLpZIkBhYQikyClVGfdZiiaGDILdFzY3GdDIoWQgYACohqaP7//cxGNBtUHAovIlFfV/pOko4MsAkCAoKRzWZVfNW9nRKJFRSo4RSICBOAcegxkTzt9tJ3+kQ4LbBo5CkSSfrH4WgvP/2uieoav//YtP+dREaDuLyQxMQU1FMy45OKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqokepqZU2YAXTAHe/Jg+LGiCas54neW6KZEGMc6//viRA4AByCCzvn7pHDv8Fm+cfTUHPYLPew+W0OTwWg898r4DQy+Wu9yPKGiRQVg0DPo/ERlcviD+Tj6Q5Zf+RyiWWOzEUaQMC5yCEihS3a8ssV5XflEs3f/WGeVje+V5aIxJXEYuxuX4IrrrgxnDXLMbfeRxOH43L7bgF7FFAMO2C7h6PXUhT0//WTYapAaLltEzRTdAwZaCDJl8vkwRQqGBMDGh3wWekMTr/02TTUggiSJfH4CBkDLEhDDiKaby+bmBotN1Juggs3J8ToEg5eOpvQQTEVJwvN/6CKZfd3p////zqYKBi2bmB4jWZeJIXABAI+87hS5ic27rJJxvLTdrL/O3GWluN+f4aoXrIgUigg4PARKxsNPTzEojEeYZBy72nxByJzsARRVQwAIzjBSMEAKJ19yhgisbPIrNezBMr4USG/7HwC4uFMv4+H7/cB5T3vq+cw504HwAsuFkj26kOrVrq9aaAYMDjzZM7TdSDLLjU03UYMojBzQ2QBp6QBSC0GTUYrT1l9zBCTIwS+LoBD0DILgYALyJfN01kXK5ACIHSfdAvm6i4aHS8FwYGdFDWI4nJmX0zwX4EMJFl+rWo0MVmKbutTf11IVsg5HW+YkoCIWN8nyYLSs8TV3CqwFEWApa7TAZ9sclqPM/7Xl7PJWUBelbkPu1Mv7LKaVSJ2XFmWRONHWszr7ONm2FK6nYDCGtP1Kb0ph7UFlzTM0FFcW9dtltOlgJUcR+nS2KlPL7oylzFYmZiXZOS4kpIS4HMaVGJm3Be18Kv+4T6cdoDqZTluuN5rrNf9////MFgIMOJVVe11Z9d7F9avYrEhzmX19OXUFKLCyxf81xuuL1pBiwo266rk2AcYHCh9TEusqYniaJ4ul1BJKk6y6xDhCwauIKepJUUSZJo2RR/VopHzC/osk//7frRMRzSqUisUTabzMyUVgKPlAnlC2w1UqBHnEbJyGUrzwOuIdrMikilkOhwYq5IKOFXQ0NNFlUxlMRvgYnY+UCW4ym2KrY1JzlGCAml5tDjMKdVKKOqWLRuVRbVYMYuqEro6oj8nouJooTMpkO1Z9G3Be6hPdbzVTIU9KsjYyg1RxJ1Qwlc/OZHNqtitiujQX0eusPk8dT7X/tbNa5rX/D7cFiVy5EJNWtawdvXjM2zW+HtH0bL3T1vKwDjA6MPrMUaiZPE0RImSdMDZJkknRLqJDRQJElomrUjIixdRRb/VWmk3/9X6KP+mjKRWKKYgpqKZlxycVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVBnh3iZitFbpaxoVExgInBLLJgUzk2KSwS2y4Iv/74kQOAAcgcM19MwAI3e4Zv6ZgASMCLUH4ygAEWUWofxNAADTXTikrm3Rm2MujEou/FBGodnYy0lh16ngWAaWUYRbm5mNm8z6RuK3+27cA4xKlqUkksxGdnKaHo5JZJF3CdTGxO81Zs08tkFJRW8o9DUppa043F0AQZzWpzc7eprmGM3dtUvcKWx21Wu2ZZAT4pIRWdq37NWRT1bC7Xm7NSlr1MI/F3dQ5looKi09OQ1Wpqs7qXzk7Fbd5+dVLkdbtDEnBKpRhjjd/Pktu63TX9du5du9tS5vrNFqzdwu4zNa5//////r/+j7ZBnhnmImZJt5JB6uMRgcA3EgJRDTl1CB0eDI5OyxWgKDKkprwyu6MvPB8pk+cppbUMw/FIm3sr3Kuw1NU8pRnEiqteatB+NeGXjpYAhqxNRiOubZpH9hu5jDUBwmYkWGN2ivO7Z3HZrTs08huXJXehl9U9yEc5KZPZx3nS0k7+GfcKGxlU/O729RtDn8ZTVpO8q91zCpf7S/lvKmdJs8flk9Tdvcyyj9FnUvWp+rZvYU0d5QOi0lflmz2zq/96O4U8ktY4WcP3hQUzWb3dWp6/luXYWv///v///+P1bPQJCzw8vVA0gBAYJw8PQaHgf2K0i3lC1YfCWeNRFxYPPD+TIuUEJZai4RcagGeDACiwMSkFqIWhUaDkgIBgwWH1OmpGjMmo6TBlAYhaBrwwDTAAQCACCDHgOcpJly6VCcOm5XPADbBOIsgDFEgTgAKbCUIaRFAXQ4UzdVaRcD8A/ALhxKBUFwgZsugrmYrUahNpMimbkosDcACVHGSaJcMB0EPDSf1Cevumyaah5IGWxxFUQEJEDPtQYVEXEJyS9QvwGCRPomqB5JiArNCo6BpQLSYWFg1ChACBMGBx9oEwYYPABFgAFA2UQlEIQNCXBFYJpGongifDtHzEuuozDLoors3Wm3//+RceOdspm//+aDt6zBNX8zDzkIsiNCNAEwAgKh8PC8LB0HUhNz00aCmqutXBSdG6AtgXGrpnAAhAbeEhQtZOUGUaAmBAwS0BrEFEI+SKkNHaVCNJw0SA0BkDEtgLaAkHCAcCEABxn5FUzU0Lh03PoADFQMipAYJAZYoASiAkoMByRmTxGDBTTUzTUNWC4BAMdhOBekDQlWU+dBoBHgvqdBOtICWULjhlgSIUKO4nwQAgMkCDmfqGSffdB01BoQvx1CUhkDQEyoG7bgsSBtuHBGXqF6H7HTEnWZTEVmhUdBBZ95AQxaGRg9kDc2QN2DCz4BokBBIMYiURxAYIEAFbDECKpPBAjBYcfMSKpJHAxGSh761t///lwtrVWaL7J//8axCv0P1LpCaqmiYu86zfgCdQAR4LgWMfA/CmIU0hUGqyCYi5mj/++JEDgAGYIFO/z6gAOpwSYvmVAAfRgU1zem7g6LAp72NKzkOt4LcnxZ45gggOajJoM6AyUKwbzCDiJF8ulVEgIfqKTXSskXj5SFbBboBQDAaxCocGOUS9lotdVJekdMkFOWBZwj4BovB4SYU9TGSi8cLijU6YM0uDGgQCIGChoGvHNJ11P//7MRgAoRAkHRWxHP39+Yl0urKI5oEA+HjHetf//YukyakyIVAIE4CAUNJJG/9vqdxaQGA0MQkfWM+HLGLf/XOqXej//9/rMScC7B3HwrNfsDAALlkcyQJpyrMQMnSY4Gk6G9F5MKBuRAvmZVJ0G9QAAITJBUTFZ6YjKldckmYvDLDuGeCwoAELAKEMD6YPBQpA2yEyOpEyRU86VbzZBzFBSTy8LKACDYtpVpJpdJTfSmI5oeiBjIDAYEAIuUgqvX1/9aJDQmGS+fUj9dqtbTEfIyoJj0EQVGPLqOpI4aoq91JmouEXKOETaBgACgYcRIGByAA0CiDHTR71pOYmt1OksuiMQaAUDIgEEbmZdRZysEQAEQCMsRJJ/Ut3m6RuakimbMf1Vf/TFzGlaNaI0AMDAYPeIMXi2RtUPVQSAFsCt7qNJvNxZcrxuz6N84b70DzyWOKptXpmuOA1jliIDoAY+EpqyevDdeNxuNw25DDF2MQdyKYVIg47K3OMNVTYo4wICUollJzPedPG43G5fYry/6ljOXy9/HIXSZoagPle9YU9PT09PT26fPDedPDb/qZkIkWhER577+sMMMMM8/7+eefcMMP32AxEXQGN/K6e3b7+H5/+GFJKJZGKeVusIVaXj6XLGHf/eef4YZ7/mHL1T5iAAADBdl34fp43bwqSiMP5DkspMM8+/+6ZvyJzKYThzDllSlm89j7/dFJjcknPKZ1dqH/WumtMwJgIYATxuLUWqyZqUQgCVRBfcuabZLopptdcmIsudxsjqOwzB2GWd5x0HEwfiGFMSOriUmsc6eV08baw1hhjEHchyksUkvib/AleeacXgaRe+kwsVOb7369PbqM4fixXl7+OQ00rHIp3e65X3nn3lzWrdenp4nDaX4hCmNTMXkdfPPP/13uee89/////yhCw9Jp15Tfzzz7//+X3KSMRiMRuJu+DUJEgdyph+sKlL9PT9//wqUmE5U5UlAUBkYy7b3T54VKSMRiWWOf+sMMKSdWEL7wVcpKlTCoo9P3sGYz9ayp59tv/+wvb6B4DI6Th6YgpqKZlxycVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVHvNzdtXqDlskDlkGzgNBHjBICwsKYcCoSxODI//viRA4ABhWA0XmPFnDrkFmuMy+kIpHvES2/GoN5uKX8zD8kw9esSCNb2iUHyYnRsrVveKUdmxJEkSSzWfhrBggGJwvaWgqFWoahqhZa4YXsJmngwXr18+UxpKr2tZ69evXta1rb/Os1JiABSxRrYtWta2tb/P////ywlxcva1rW3/8Wt/BevmI0kWGpLCrWV7a24NcRt1hPmJmfMTNGti7oFMEGd2jWwxMz6d69YYu7fMFWl9JapGWDFrrwmZtjW//3X////0DCsREbu0RDEAAgADAXkqAPiECxagJw7CMHQRII9RnwnmZyyytOSyVj2q1bGYdnarIXGcqLqApEpirph2GY1Gk7zYvOhcSBS9ezsRUL1DTRNFUvaRWotxclWcqGoanVcrk8SohSiVzM+gxXta11r/1q9VqGiugOqjRua//Fq1//////8J+aLM+fPnz59aFWuva3/zVvElFhRr2LBtbbarYtrVs+Zn0aFG3luZx6R2AxnOm8SJ5XK6GcqGnKywmJ9GttqG8LE4Pt5zmK1IdF9a1rWtfb/6h2mmr/85/9a1rXX/xb1r8+2FMW5RMz4/i5AAoyAEKDAoZKBP+vKYbJL3VjMSgZd8NPHD3Yfgx+Y09kMXY+7cBxyDpBIp+HobtO8lSXGf17YysFXgyEq6hx0lpA0kOJSlipPOtAsmhqYlS4J68QpYRBej+JshzMulKf0itYxuq6iug1TkREKpXKRUszLDZUapW5bCqCPiPjP3XvQfTT1BYyuXKezavUFNX1SYymC8JEzZAHK6CZyznuRmvhnbs4yqdllmecBhyaBOatL5BNy+URq1XzvQ9MyB/pXYcWW09qUM5ZY0I9ZZtOYUlNfilHKKGITzkv7hVp9x/GifRgO7MqtUlNIYY3+s5XLY/VpaWmxmI64tCtFORnxFFxXZk26eeytSCW36lvGd3er26s6DM7REzUKy72pg8IxABsJwkg0HMCh0VByBEKTsJiymXA0oRwuTgRQgVQiS4v+tLjiRlBUMQkcgZHKKTUSGDqRTVgiGX5mLsMs6h6V3qlNIXaeaec5kMbls/QxHVO5T9Q9K6sslNaaxfqIW4ch7liZfyNQYz4VSRIdtsUqqX6eZjv341K6e7LpfhauzsTI2R2YMhRRuptRNuL5tZKIVR3D8W9USPSW11Hl1i0bO4OrTSetXt7appsbh7FfEhQsQ5rQHrpihwaxaZv4L05Hsbfr27Mu9f//7z/6966bnEx6UxBTUUzLjk4VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVDcslu9glrJAghalwY2aIW04HMlUkfE+lIl2aEv/74kQOAAZ9ckhp+G5I74+IdmWP0hxhzROn5fgLpboh9Yy+eVYunzAy8YSgV6uVKeTGVsxS+M6edHq9UD5H391oIMw06ZDDtvsaidHYvtZf2I5Q25MtfWJwJCJRDtiDJXHodhukuT8O1M7uNJGI/O7szFHJaRXIVCGaft0qarP1Mu41pHn+scL+Gk0DpIyRGQPSkzOqs1TqZE2c4zk4eY6ou6lJpKckkqJOLyapgSrGBwyDlAFkS+maWSSrs7+tFEcRrddSlqW316VdFMRlMTE4iSGNMvZRUAcApAC7DJlLqjfreXVKKZ9I84VDlOXaehmY9Kqe3RS54HCkMuhqfmZa/M9MsidtuVqrOyrKXVYPnEOZyCmgGwVOle2y2dlMWLwRiVtE8sDWV0ghPmjp7Yrj6eLiSSWJniL7+G6csvjlWavF5Pj6ExB7Ic9c8RXzK2wH1Y8dkrBf7j7zd5LEKObEX51C9a23imbRWFqh1yP59Gq1w6/yUfxaaZozcz21EUycZhFgNYUTI/iZq9kjUTsJU6a3j59mJBZTmYYcS2IUm4tZKMdm1WwXekywtEy+lQ+SiAsp1Ur650ssKti3VuJKwYWaxbv9BJNuS71f6tkIcPwI2LCzLabRquLanFG2VXCubIp+rhnbmRLsKGFySqcPg7TlfPlOLaO4uRlGYjmVUN43btWTCMY9wlrUjtTNtKqNAHkIU8N2KlVcbJbThO4d5+os6T+Jo/DUn6sGChLkwrB1M6+qcKqdLwpTuOo+BHhcG9lRL1JP4iKV2XjctZ3M8i4rLeJuO9eMkKFrwtSOVp93xD141cqlhbNU+4zltxzXEObNrfMWsjk+hQhZgRTub79sf4+/j4zX1e1zrF9V9rZpb/W6/0tPBeNJgIeZa6Y4tgtgG/I5gq0ASyk3LHrIiBka/Hnb174disGt2cGTS6G7ccjVLubikFONWe+EROBKTVqVtJmGxQpbKJz7X2tO9Ak64zOc56XDAw2kBkk1lMp2uyJor8wZYbx00fY6yVu0BNOib/Sa973Tr+td3LeMqikDSmapKGXRGXSevDNjXIbbkZtDWl1TU/Gbli/BUMwLEpa4ssznI7ckWLediVx6qmkPcXVpodYUGsz3W4ubWla3HEf63qr2l3uNZi4yw1mkks+OYi4vzuTPxSvxvP1/bOoutyb+fTfxa2bbxZ7PFiyvHM0U2QWzHEgvaAxIJnHd4kTEFNRTMuOThVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQABrm9bRAJRYcFhTJZm9LYrTyq5upP8npflNRr/++JEDgCWwnTAU0x/QuAut+pnL14fCdbtrb8bg806nWmmP9iMztBR/Kb8NRa802LSek3FXCQiWqjolm3jjN1Xi7xYBjAAwO80xgqRTOCWQISm0aG5MMysvC3jgtqkM+z1s5QFfRu2Kty8K0N1pgplQ+bSLhMHZUrWmlzs1JJUCpX0BKXWj95apbtej6Z6LqsrYLYkLLktdU+mVrPM5dbScsmKyHFOrbTabZu9ktPda05qkiuFeVdMZvWm4ON1+629I2qxcZ1LrGa+m67lrnOsPrPoTMrBzNJwKbbM3M14UEAAR5ZGiAARGW9ZawViT5ymcyv0U19eMvbL4cvwJMW60zLs3xpWUS9Uq6WAw45TjvekcmM6axWCPcCA3mZSyFVqORssAMsMBcJhy1TFaryF/LYWOAK8m1Mq1CrE6vKU5jlbX7czop/dvdYgxWuZhL6xeuq1bxCQ2TGi3o2xHUGsPM6liWixFdM52kl1fG9IdesHxcyvn0be42d1+ZIcbVrvd2tJ5t3rq1t4nrZ9qE+YZKwn25I1ZtRYNcwfChQvLAi4808ktZ6fT7FL2vFzjTbpRIoWYQMCSMqc5ssrYom3IAAKBcu9jYIMIJwAAl2V0rtdWil1JDMVgxiTEmTSrdnXwzSQ9KKdlSjrX1qxKtDatqXNh2W4FtoDgNrrLUxUAqaIGGlZCITNAzTsCgx8aHQteDNmdRni2n0bHPJaLadgVx2lor3ysQSiV5OVlIj0i4uJ+wp24nTs/WBVZi1YkOa2FhG6DdJClH8BRH8izhSSNVWVauFqdlZjeIVBq4+tI2M/vo7DM+xea+oU72FXEIYRxXxGhPczbfQaQ8QI2XurPn8TVHz4WZVWfQY33mtay1bZrYtBi2i1tvb2FvOIT61Wtbw7SxrOrhnegpCcLSQyaU40WjU9+u0wLzaNBQClX8WQkk9z22IHvPsxKH2UurVpdzcALmdehfiLwy2YEAVLZVMuSlTGXQVTSuMCIAxYKgQcdZyhwQXMEDYco4nOYrqdA9G000OTF0vpc0RIpy2g9iMNRiCGDv6piyWK2YMdCBnhYjOMuj0jgFbnmRKH5E0bnUK2K1iEB4kpniUTpMU1oqsnLuNWMi01CYnsTr2oZOjaXrZgbPfd9yF36PX5ovFoSlbMXXr1WlzcCFHY6bo8cxQoTEW4L5+wzbYma0HD2WS0jk2OW/Fgyq5yfOTLlvVM00rLbbDFrGexruOlonhXgD4ZIQBjPUyWhzpMmIKaimZccnCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqoBDnqIAAXAwQAwUEXdpZx2lMmDOS5L+yy/2WxJ//viRA4IByZyNDuMf1DhbkaDaZjqHbmisaxpmIO4M9Yo/b8BrVFGs6vO1pVLqv3uuCsK/DDnGfZYZU0fiCEpQaB40WACUB0wmCzUUFOYQ0zEMAwvhAlam/0Sa0rqnh12UMTAgNMCgZHJ8V0nR+IrBdXW1hsST11pqOUrrPNLmjJ7l0NDpeZHy67rUZjRqOBc02erTltb1Wvms/lrMmKmWXtrzR9Z5KuaumMlWbrzLD5ie8ycrly7eu1Gu6A+OSaBY/JuLdOT1oyehJNzmL7u9z3e6tml6rFrLDEnbn8WEwvJ4LLYzAAcAnBwkkLVKIgAAz8gSxGMBt0adTXFMnTkVBD1ezGYrDLDZfFXary2gi2FNcjUNRZrTRUiZBKYJjDOpXHH6cJ1pVDK2BIGbK2fLCYoUguhrFXCo8aFrMsf6Hqd9lhn/hKUST1glLD77JQIoDX5nrVpjFY5XPetrQ+TAk4ZPuxetd1o+tXpy+7zJzE03Jy2Yu2OTE9WrbacuLnrWZXRsjkO32Zgy30+I69bi6Oh1C66mMYhKbaAsfqVunJiYxQ0aOqWKw7XbofJXstJWA8ndMkIyl12pR8yfWHtOi9jjLRITBmjEsYePZLNEly72JEAEqRjeRpzs3pTQSt2pPZWktaU0EujVl9YrNLqWyhqzJqcPl/WGF4mXlnVmvSg6oqaCl2S4Ja1xHGbCAgoIXQW6a3AdUMZw6MAlB1aQsDLato60MsKQBP++ipXFYCoLGFhm2jzrJpIbQW7tmJMOa9PNLjJODVSypXFYdm+aXLhKOxCVuycntDIJgIoAlEEDqlMJR2Ti6iuOJNcjEFeesnqYyPruy0uslElQSi0mVHLtmWD4uiU8yST2dJIirySTXDJOTUIlGPHKQrgdSIzmMcSzZKJIkk2B1olFq3wAkH2Xd8qrASHZeEwfAApe97GiQplFCUTa4qVUsUVPKJcqlPR6MTxVJ1sQpfElPpRbTp8EmTs0GZ99naAkiAvpiDEhWSmiYkBmYvxwpoZAdmDBBdMgCAwBEdDBMlWoayEGQpWqYgIzQviTZmQ5sXZBThHMCqQ9CT+YC3IVluWi+nC/EeK4bpLWQnSnQmRWqZVKZCkSaKpRSho++JWXFVKqYT6rcopWXMWFKytSifH84GktobEa0NeOy/IVBgIdHexV0W1UIc3uJ/NKtUzp81q2SNBoxPdIoyhgjFYtvm5DnJSqGZTGkxmk/cSfC5Ks5ScmS2uLFOnVTCjQkSYgpqKZlxycVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVACBKc2/9jaAIDFQkd1AF1tMUvXQ/dHS3qarel//74mQOD/iLaJXrODZgg4zzejzD4kAAAaQAAAAgAAA0gAAABEzLHVcp/XeTBLLAQ0QpEm45mBKDJXNAIWjGmQccYQYBKAqhVjMJIDLjxC114J7pCM0g+OOmvwvUAChdRCkVCX8RTRoHjAZplYDKjtirIKrLICR2OsGXarcmijKkopmrxizJWtOC3J4nrhyT2eSqhlkVjUzqy/zWW5PXDb8Pe3rBlAUbkdUXknky1MFrscZs11lTIV4tUdOMTb7Mxao0t34Ei8Ib5TVHpGVAgn4pWpos9SKPyCUvsKDQZSkUrXQ28CRuMReenbU6/TOVblDVZlZllsgZ26j5uq7z6iRBNBc1JIGAyC0af+Wf5REUJEiDyCakiJxSYBJL3/2Ikf63W1ZGttkvjOJZIecZxnGcSyyZpfEsl54saKzIaX4wTYNg7zkQtKIUaJvHqmU4o00jjpL8XUmRMirL4hYxebk0/mjRQu4uNk40oo+FokiIoGDjoZf////////2W//8mRq1lsssstlhkd/8mWWo5MoYKCBA0cjJlWWcoIHUmIKaimZccnCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqkxBTUUzLjk4qqqqqqqqqqqqqqqqqqqqqqqqqqpUQUcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABTb3VuZEpheS5jb20gU291bmQgRWZmZWN0cwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/w==";static audioError="data:audio/mp3;base64,SUQzAwAAAAAAJlRQRTEAAAAcAAAAU291bmRKYXkuY29tIFNvdW5kIEVmZmVjdHMA//uSwAAAAAABLBQAAAMIQ+rzN1AAAQCAgDBgECBGDDP/99NXazg4//5w38zMeAP/PMwIgM8Is3UBpEihZV2w9MDHxGAyMKv8LkhCBwMQjUDGYP/u8RoKEBvABiEEjJf/og2AA2MEiPsG5f/3wGAWNgfAeoAEHyJHv//wMBAYAIIDeF+AKBQFAWNgagao///8AIPjiJwAQAAFAQhBrgGgEBoBkIPj//3/28R4AUDx3EQBvgNjA8D7CxsLTyRJQToAcAyJf////////5oMoMweOjLjjY4TguNAUBAMOgYBACCBBAwaEsxCreXFUd5wkHUw/PwwQBoeAC2PBRQigEFg0HtIAasFUIDiocMGgUeAVlPaOGJAyKX4LlGXEoEHgPLVDh4RmOBYABmIrqYcSHypbJEBJulkJQFFiLBBYVGIwIj/9Km0syZj8wvooAlx3SALF910NVIQbTRpGOpKqKbetSVenegABpIhHYwAGDBIQQXclNixQvErTQ0Dk3pZK3RzowsEgCE0UEO4hBZgAMLER2MCAaXrOuXKRetinlUpYhhLq//7ksBlgCvqH2GZ3hAC6qrut7GgAi95iZg0hBC64dRUBoJYgrOqcGAqGFgmm3aTNrVbnXR5PM3q0GbQa0cycaXRsvQKAhp8VS4BoJa4tlb4UBHVVkSBABoXWenk5Yei1S07p/GsHbsRl0rMYrvjWorT6W6aifzvJM++EzPQBnTSGAP//////////+Wyx9J6U14byiWov///////////4zkXvSWvRS2IU0R0IEyMlkqSbCHIaHKRQb+jnVYLeOqaMF6RJjcq0aW0RBLPfyfLF88qtoqjTjgggdJ4Pbq31LAXIKqCoQRHWWxSXTcqtOnjdqsJMmZQAto/UaVjmWCP1KU6VSiWye7zl78e/arMiot46x+5z8dsI1vX1Pu8/P4bkPM/zy+9/Nyl7su/WvXZd2tg0V1rV3Gh7Wm8qDJ4nf5SZXL2UP/uzZW5zDu6P5D27auM15c5cs/HtmrP9013SdS9mp8ieDADgyVbbZHIaNGNryLGRBK1D/+5cL0CIFlGVR008ef/ybGBMaSNDgpuDRWPfN6+I/WnH3A4Uj1lt7ORjt3/+5LAHwAS7VmB7OYtkmKrMH2NTbK9DgEMRJSdJqOpAwLSACuaeleYH1oHQweitpenDyy84zRCT03nWoLG6jVXUevkLZZmyzSdYXaUynXlakyQq3TnGkxOrLBDZymfk9n0hb3TZRvI/K/KdtfR/VEGAJBoyXbVyQqPt2jUDZEDWrf/0Ew2pOKpngnepjW1+L5Zu/9zNuAkZgSX8oZzTxauTjSThAnlgP5JAvIGvUMgccQpTIlDRhgojHniUmYHCZvLUnI/IKKqQXMD0Y6NTWUNdFTWrPVrFpHtj0wnEaMwGLTWddRVoMN0qUaz8qTsjx3WnGna3SGG5nW8u2c6QCdz8uZbtp+r6v2A+lZLK22xAI+ifBhbQiWVk5/3IgqqBgR3fU7R4+1j9V7LbodlUZHRDfFi0R7dk3sx3k/JKAZNcalN65C+wz3c7FBGgtIkSkQNxZpJmQ7ygBi0zLPKO0jyk0Ay8VDp+ZVnlHWFykKgnL06WqpODFQTpOcN6UfAxaS2c4nSYao2JlUfUY2cfycpTjS9U5ZI6jMWk9Sc4ObQdapt//uSwE2AFIlZeaxmjZJxOC61jTW6lfo+nsr7a3batiC81ZJIikgxpA2XF7OtwK3c3+4AjQcGVyiVt4ROr+HzLHJQwHCblgjCnJDN++l+w9unq+biiyzRkIvAHKeFabBrcghZiDOE3RZwNk3TLcnmxEdralOtdYQa711tdY0JXrrPUVCEKU/O5bRjMOtGcy2tisXqM48pTlEWjI1NNarC8xys9Ls48WznM9MfNqt6vS96vR/V539fndpKoJwAArIle3aJOB+lJs+YhmSAJ+4d+7cTiDjRXKuQAIHb/krpakSlr8wAMMn4lIa1m1O5x/VXdkjAhFrVDP9rzk3QyA0yKOdnI/ZuSSTUlzo4okieTKKZWpFZsBcFJalu6Jou45iygtJ2PKSiGNLUF0ruLA2Wpj7sYLSczEggcWZKYoayoWrJOcWkSzH0xoJrIMZonB+Z3OhfEFIpHkB88sbU+1cx2XqbmG1qvQeu9bL0X6s9zkyAAciTHdawmw0VwKdNrMgkR9w7/I065EDmvReEkUufwXvsM/c2zAPLAk9Y3B2n4+SU6v/7ksBzgBaF2W/sZa3ClDttvYw1uKR3vGo52hl2cA/dtS4FpvZXtwjkN3rlHdC70TmYya8+gE6KDtQrbUNaKtdR6lNh0c/TrPVRHaM66ijaiK03nTyi/ORmLqjKo/KO6QpunWek+ZzgnsyZRrNt5Tq0J3ydU1trS+ynrnPMmvbPWnHvXVrnDwCJAAOyBUtlJJYpSICCWx1yS4a1wx+YjQOKEJLIMqRVYpBe18F/ffrK1GR0h/O/UA9mITp19UFZVM44jdbK69mEEfdtykbdR0Nm5Q+6NvsjrGaTqzag60Fg4U56bzrKMWHKR1POTh6yxNyDVRaWU4jj1Kp1Jzk4L1CdrNrsThvnai2Os4kRRjLMaJZHZMXTCWdNjicdu8lKtGzraRamvOty696E49pmeXpZ6nKt7VH6pw9VAAFAgqaTIAoKyJWwWDArpU0Qhw78xaX+hdUr1EdxonDP3xywe3CbsIzgeZf7kT8ARXsU+Y7GBM2QRPtSQ/DfKHKgFrJC9eObQsmYWqGRVTdRY40slWaqA6Gy2oTu6xCJLenU14up2nL/+5LAjQAWJdtp7OGtwq67bT2ctbij1CMxZacy2m5EHSnOvLJ2Zi2dCo/JScsKzGFR6Sc66IXxjuWx83j3q3nNo+VNQnXvIm9Oo/eTXtXUeoScetVn66iwmQACgAMonAASGfDyt6wSGmSrcDgdznxzNGsOIUW9FV6KdNZ7BPePPyZphwJ4A4r/WXqz+R/NWXiAa56lvXIv2Q9oexMBznojR1X44/05Q4ZBNLis/pVD6CRk+oP6q8oYeiNMZzUrZiiNcP7tRu/FQ43w6lY2Lg8Mc01V4N+rFY7pP6i+S91EQiw/UWx2b11AS+rl2O/m8EjiojP1FY38Vv6X3Y31N6HmfGaLw3Q1DLneZQ3fSpds4I0QAAUABk42AAAxkOJPiz2ZIaglfps/uSlCpCTfqZocR8ee/4Jv5v5+FOmQCzXkgPk1J/ezU1GEXxmKbgDl+T6fblDqGDSIs8o7kV2+ON2c4LPMpphM2n0wbpuvNKz9FQPZrPTacanHYL8/MWOG9o1C9SUZtLKTi4a08+spTkfROLVH5ytnEi5jOZfs6xhpys9N//uSwKUAFx3bY+1hbcLhO2x9rLW4WW8Y9bT0mup45HUepSY6z0erreZzp+ioakFPTnCyqP56fmLnVU8jAJcAAXADJuMAAgYAloIygQqjMIXP2rH7lK4yIND9yuqoLfW8fg2/lBuUkujoBtgv1LMrkH7g/7lluBzBwJKp+ZgbNou5Lecs0X7Uxf1A/Zy/8mzMoF1NMZXXUBSGy3m9R+bxLSOg0xnGqUGApLQmFRbeThITVR11Izri4b0Jx5QvQESyVR9RIzsijsWYMcPyUz7CiyTKNY7nW8Zp2tOYPPyOykJrJzKRULJS2mErPz83LHP0Zw9RjOmtCcnShQrIywAADgBlE0QABFWIt0cqqKtBvfIsMqGPuEHAG/sUJAknNZy7EaegejOnrIcwPEx+GI3DEKlMRyu3X2CS4VOS56a9SUSeW0LWAs1ev0dWR1oIt552DDEpm9HdW9ylhzBpuq2zTW3dc5EgfX3WNaSPfWh3KjMtJ9XfZzp+bVZPApt3W8Y2Gnf1Cxlj3NVMJWudX3ZuzSnLTUCsltxq2s3IXvU0KmW/ev/7ksCygBft22PtZa3DUbtsPay9uK2P3OqXj2Xq4xtA61BxvdHUKnP/OottZbZ9X2et6U3PuBXFtvXOWXF90WcUwu3EvAAoEV2ABNJRzgVALIhECM3k9XVWA4CWPcrYEKAahFZVjWc+w3PGUw8MFnQU/MNY3IP9u2sYeSdMSKUyq/dezj7c1PQOIF9YyerGOO1OVYpNmI/fE+ZPWfNLheucCbLb8O8ybNI+rxO98jvwdM5aXp4upXDwee5aeDjc0sDwZz2NfwfmbML70eyj73yz9h96ry5xbwt9l9ZpTS99SZ7jWTfLl86xG8ebGecWpLd92+L69onk343X5/bpx3ivm2vT+N0g7zG9NtVdT9MzRAAAwIIckgAADGUDpaXv4nuUvp+prUThkSBUlekeci5vZ/chdd9s5i2jIA4W8fe9be7F6fmIusg4kYpAfaSE7bHvUjhBksZzFHhAuLd8dSaYEblT0Zx7KCAVaZTh+ygozWenKj9JYhyjPTmWUozjpSncsqcqF+lOtKM7SFu6Vbzau4vudqPy9OtFqx3PzJ1PHjP/+5LArwAZhdtfjeXtwsE7bL2stbi56V1PHC6nnpXUfjuZT0ZXtGpC9Kce0iZ6ZTh+jIrAegAAYAMmpAACG4pmMkYhUFUY/On8cLk2+SeEsu1B0kMJyw/CFZPz8eqjoBsgv1O2pmRfJPudnib+T0s5QXdOBlnInuNxmxBn1nn7IaO5OzIjlqebSplJohPyxz0xlTzeJaR0GmdR+ywwm6k6bqLK4jyNPUXUjM6QkaM7Ub2cnidOdnXkadcij4swy2SM7SC5ui6zZY/1PGVOutOXHn4xpzN5ifpLGOio/NpWepy+eTPzsqPz8nFBS5m0j0pF3AA4CH+ABEEgX8VqpBWaJxpfcwrTKmih9Bc0VIho5dd/CRcg/8rDMw8TzwR8lnvenUcplknyUVjlmmkfwvm5HFT+a/JLF2NabFqgzrADCSnmlM9PpgtJTWeWXpUy0FglCko/LlRbPuJ6L82mLHEZyKpRpzB1FOjMxXm066y9OKGcuTCdeU7OgKLJVn5JTGdGicrNJcWo/F6t5tJzLSWLs49CTD6z0gH5+azpYtJYsU1o//uSwLcAF6HZY+1lrcL+u2wxrDW4TCVFs0mZGUfoudKUxjO4hgAAgAQr8ARJZHuYQLmB3CHfqezhWpUuQxE5eq60Sl+evdmGz0rTOUNQcFOISHZXjQ2Pej4MuqoGQzGJVbqvNm7PbsijQSTRZUXvZyH71yT1TLPY48zlbLnAIZA60uzh6aOHKGxz8/ls0UJoLZE0mE4bzsNK6UqY6bUmIoiprWfkamxiKDJzp9Y9JU5EE/UVuZpR2zM+cCqsZMooyk8/E7qdRosnstomk5nZEQUioT5BZ+bUSyelAtnpvOFtONZrQnJWqcjOfegAAcAIaoACNERNMpCRQEu0MPV62HZ1JEMCQXjNjAgZtnl9yR9jf3a6hgO5gTHVDIPgv5qxDYaVI7uVDLMIK+7P0JNffob1yb+Ae50eQOMc46zKYn55EEfKKeXqj0+oEuUU8u5bTUEAlRpOotmENJTmt2WUJ1hdG6bVH1F+dWTA4WadeT5xkxSdCdaTq3cRbnWUuSLT8SicdaMkXnol8482pHkj6Im7LeazAspqFxSkZq5wtoRdTv/7ksC/ABjZ22HNZa3C+ztsOay1uGtNjpQnZFLQ1AAoBECAA4RZhhy0YCIM0BHERr6g3iBpdd3bkyVNjMEd23OvVqNP5amoyMjHCGuqzAzdb0SjFqhnm4m4BAvz1DIKWnnal6CAdRFakVmoXTcgapdqCV9I7llYfQ1q8CGC9R8R9DaKsCNox0COmPEg0abMaq0/kC1DwnarsuH6i2yZCWkPmbIathxFLqPEEFNerfRTPNpjUbQ0mWEwbUryyI3BnME/IMDalvBO+LAcFKQR7dxXW3x2RW6aEPXG7ttu+Ui027qLhW7uC4PYaNx6ksvAcZFXGhIGS9jjcLuUq2+fmNl5BWUfDfZcILwvNGeCpTzeAABgAME4wAAGfCwl6GRTQ5jDuFLY+7NBwEuFYr4DoQ2pId+9V6o//52GZh0UDxztWi+F7qy9NocbmIDtXny2ynODNtbOdu12iuxbTYMrk/mJUnzrzOYH5qgB2NFZvUepLBKG0/NZW9COMWqjWTnOmk3jSJGisweR6LCPNqGeUSs7H4TufrPSup2FZjKdy5djgmL/+5LAwoAeSdtZjeXtwwQ7bD2stbjHajebOpoxKnn4/MtowbLNpjH9lH49jxxphOFk2WLFNbTSdLZ2NB9Z6ZMVI0MdQNwAMARMgAJ1LyMCBjBAdAWAXs4IKCAyxfhiVOKHArA4m/6Cc8AaaYpIhexkn1dkIYGcV5YnKGE6kOdeH2Hm2JSSmWRCHevF2gjbSDAQqWZzGQfP2OxeNgI5QV3d9118Q4YLtZtEo8zdw7hILkYmo3Yu128sMQdNUf3f7laNRbK0i7vqwtQ32mqIQNQRIeW+bC39b2M672+Yt1dRqwiEXuXw5uz68Sch3gx7uXTsSBqAZuYW8UyxzZcKGrHzHuzdSx725Q1hX8Oi4cPEoqFvutRu1uWYVDO+Id2/TUq7x8NiDkAgAAAuCAQ5J8xxkyjM7Xk+lM0wcwQdDZTJa1DZhmlepZwJYCrSK/S9lMtqPqlSZFgaLquy7r+zuVNamaVeIAGgNh2mprVWlwpm5Fwmaxq7GYzZxlM7VlK0S5IdKhVr1W31azccyvLi4RYMXLDFoniVCElheq1WsuoL232b//uSwK8AHBnbXY3l7cPTO2ohrD24pCVn+uXsXD45iFKrDCnWWsFWxdyF9ISqYL17FhbtCVyihuL58+1BVsXDEW4hTMwq17F8F69e2UqpxbdYSui2YjmOqNCYldFqwq2LqEcyir8xcPsvWFPKrMj59GsnmWLhiOZCrPnz2m4L169mYoD6NbDEzWyxHMqgLaX4uphGaZhvnQa44hbRhDtI0QMcg+ycIQtxcZxmEwp0/kSkkykEWnE+/iX//rGVzCplyvLtsY2CBbOzxaiJISKAxB5h5ZRZRZR8LSInFlHmHlFGnFlFmWgjUs7WzmnGlFlHxeyzs7PRxpxZRZlxG///zJxpRZR8XbOzs+bRpxZRcBlNNMNCE0wyNVVURMSqqqCaaYYgrT9IMSqiDwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7ksCKgBOhUsgHvM2IAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LA/4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uSwP+AAAABLAAAAAAAACWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7ksD/gAAAASwAAAAAAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LA/4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uSwP+AAAABLAAAAAAAACWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7ksD/gAAAASwAAAAAAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LA/4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAA//uSwP+AAAABLAAAAAAAACWAAAAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAAA==";static audioWarn="data:audio/mp3;base64,SUQzAwAAAAAAJlRQRTEAAAAcAAAAU291bmRKYXkuY29tIFNvdW5kIEVmZmVjdHMA//uSwAAAAAABLBQAAAMCQ2snK0AJADDABDGJBOCD1MB0aTAbQJXYDJJPCEVamAyIEAMUivQgHhAM2r/A1YMDcpwEkPvgdRYCY4DIBA3z/aAaEACUA2HAlcAy5//3gSFgYkCIRA2OB9w9j//CygLaAiABaOF2g2DxOf/7/E9icxWgBxcEgACggBAIFgAN3///+I1C4cQDEehicjgDiYX4AUCBZIG8f////g3eJiHxiCYWsg2HFWBkwIJBABjABgAOBC5swJ3/////////TLRNuRMwJwwbAGAQEBQKBAIAwIBQKBQAFfDqwhM7HUymRTUhAMKhQzSAEijHIRLag4ZCIDmPwoRG0wKESgFiADl4QeFNUxXoxdVdIkfTnLJEo50W5wAYgCtCGTQBTXHU0zEkFbEK3eX4mjAT5vMaM8uAhAmONgkAhvGn8fOHGtxheTWWassBooUCwGMCRgJDjSGcSFnDLIMdV9atHD0jHAwVFogK3iAQDQ8oiFihpYm/fvs0p/ohGnGcgKizGDHsR4MaHUvjJgBUgfd+4Ejcbnbtabr4V//7ksBmACwWH125zQADf0LswzTwAZa5MQuuiHAEYgqFIh5ENYALCSYc6qIwsRl8jsuXP0ED27GUolVHXn6k1LYrcjMMiQJroKJBwF4AABRqX+iEj6hSoqXOLNMKnJh/IxWjE729aqV43FKtmn+zNSqXVKZ3q+U1u9HYZ3MRK7XjsorST///////////l8Uq27NvOJxu1G///////////+WyjOI009dnq2rJlDBpjZpmZpSZygChBZZY5fvBL1jqQiI6GCSCxYLPIfRjtC8dRITpU6PLwixMl2kSWHC/SSXqzIQXVpaXI/o7GhSpPOSCdDgn6tzPaGkWSMyqJ+1qOM5wGFmbpIKpitivcMK1ieNjJmqvZ4sjc+pqu3jPGhNr3LzUjg507ysfUGDiyuzLBZZ5G6PmM9vK8mvRntp48zV/PPuHXF8VtCnq+rR/E1BhWo/jYj33Szynhv5t6f4xWLFxJan+qwfuWDqkWNiFesb////////0xq8S/fz6x////////32c53Pw2GAzmjAXNCESfK9CZFFCXKaM6DBW6JUsge3/+5LADAAXqeNqGZYAAv60bUMy8ABiaym7RAVGx0tPQ0xKAwboZqf3FSE+VhHKC4maW0Z8dI0xWVnzi9DVncKXH6FZ+JMvokPLnatc5N3HYmk7mIayjDr9bLKwITVYouZY6FJ14I4T+LFltf+03+zes0+DI8gj6B/fox3tx0Y7/t07Ss0zsvFl4uhcrrFdvfKZr/Uc/b7lqxdlp2cvtf9jvg78o9mTMzMzMzMzMzNKd9/ljgP/lhcNQgaNSIQkmU6FQAfKTMDSMCBhD/kRDvrWVtSLkjA26wS7HkkXKEaaigD/esC5QxeQpPP0kxoCEoF0tu1dFjQE7RcRYDSyZ3twdXbXG8Zhup41XqvisctYF5oUeLp9BxAgueHl8ySUvPG8KPG0+teSLI4e9HdY+dWiai3zBruj3Wcxc2gw93ix6PK+0T/wMYjz219Y3F1Cz8T28LGc3kiZj03LH+rzY3rVLw8/1pjG9yV+oI0qJv8ocBI4FhL/lqDAXEgAQQQQ4QgQgkw0nCZIwjQoccgKWCDrkkwrIVAH/eBYyfirIzDzEiUJ//uSwBQAGknbbTmXgAN2MzC3NYCQM5YgnirW4kioXSmZ4DGnrroNAuEg4D2ZLocw0bY0FOVVike0xCjxsYfblZWxEK2EkFbZ5AxHj+FGg1o+nanrnJFZ54ECm48fEsWuLwsyUiqOule96vpjUfd4n8HwbZx7fMV7O/YZ7vXPT1zj7zTVcZzvPtauaW3mucXtmJBVby7O8nfsDlDgOVa41X3z6aznOtYr5bZx7fP////////xPrznAIn/QFyjguaQDgKEQjLqbMQaDQaMaRUYMZYeaxQcpOiHL/Mm9MkGLtN0lNkOQgJuggWZSzTWiErF4Ah7LZeIWs0tXr7vjM5fcPXAahpAOg96SEtZNV5vLIaAxdeaAVfzDIhekdP+OOHMoDYG0iy/TNKV24bv3e91+946i70Nxe6s1t9LUolFFlSUX6//5/6kcPNMoo5KXltOXXu2rGdHKNY/+9f++f+UG5U73xSYfaK1oYfe3yy/9PlXv35RSf+PP/L/3/639aUve/EfeqKzr+O3LZS68jmZ2Ylk5Xu016XyOWdq52AAlWV78v/7ksACgBdBjX05h4JKxTLt4zDAAAl1669FBdRWINgepmMMDUwPmvgSm9tNXRXTETnZfGlfkwQB/q3EoM8lpUjzJYu2G+pCZCZMCNLeKQsoKusV0WFaZzyTSGTSsjJ//izYoELgqdOWTjJFeKzeLf+r9IHu3MaKVryAwOsPHnzX/Gfh0rU2tbQhosh8ZsdM7xgc4U1fv/OLfG38ykXocNSt2mJWq/wGefTPfD+P/9euv8f2/jVVTrLgq7P1ZiAxvZbv3+8x71hrB6MAAIEQtANs+ELRFrAeE3RNI0cpejVD6OcZdpwl5PDL3QRMIh7NhwEpLICKMDobsHTMUADw+cLJiTCyL3WbX4RXkhWbJlb6/3bvzC2os6q07fyzHZO/aXbM2uw24ws6dfzPz//Ml9Q7V5dkMTcfW5flOm29lazWrMsUj1532Wn+ximuTe6/tr1a12tZ2vz0DdNcf+ztdgtn3/pYc+mZt3CrAWHg0Lf5ckGHgyv/LtEZooUAPIJ6jKSM5U0owFW/bOVZn7pnCUpVtV6rpMR7S2rH4cFoT+rLwGz/+5LAEwAXZeNqGZYAAvjB7ZcysAF2KQVrS4HSlFQVvuFUdEbpPWXOWlRJicElpAfWG9PbrSF1JEfUQlcnkPr3nYGnoLPRNIbkrWnGHL1fnYWb6ttjXxPPQL3sh9juu/uOd1u3bPT+b1VtMdtlHrdeK+R06m5rte7cs9eZ+ey8WM0mtrY/bPvamdfrz9Optcyem1az8zMzMzMzMzMy3/bD0s4Q/y5MIBkFyIABIAAAuoiSZSwoaZDI0Eii5CFkoQ0fp0GtM/Y4vte46C0fR3mgIAeR2ICUdLxADoNyUWHTUdI2sJI2A20dZIScZHSSsYqlpNXOEhZpQlaxqm8mzZJeT1GnTdqCR6jqO4kshE5ahx8uNGQbU1FkOpU42VjXbaZ/ZnNlNaxzmtmHI01Gpk6+Tq9Pa+kKt7Lpsw51NbEOqezWNFnLKljepP8U+oOXNv2xuqZi7b/////7G9I1tq5//////OYkDnwAAAABCTBACBBDHwSgUylEFzANKgSFsqL8wKjQ9b/US5nfc5livc3JwS5znU/azSs1n4VyZbXCZ6yK//uSwByAF62XbzmXgANss233MYAA2ilNck8EhbBJCvjcW7FOvxmNlc/Dlri8lYW4MXuD/ECW9JLa1rdoM2o0GdqdM9FZD3et9xv/8RrZkr6xYE02HmO81quMYvb5znWbZxi3rqNrx6Xf4zLP8fOMY/98539+usbr7Xt4X8SCzwLMc9oLPnTPFBo4gAvT/oDQmOh0Q/8yAFECwAAoCAQEIoDAQEAgFAgP6iwcKB0gIMAKTUdtgMZNzS8LP4bcV4i2DI5ZIKKXOYyyBa83ANbEtOv17YJ/ktgKW6joGW6MEl28OY37cqzmqXB26sDtvOdqXMM7d2mzwq4dg+KXIekHcKmt9tX8t471TVnSeWeeh9ZP+Gufln/5bpf1Tf9WOPXIqZ95qRQ3DGHOV97w5zPfeZflvuPPyganaxD2muRzkOP5T71zH/x7+8Nf3vfx5+Xfx5jruvwikv+Qxfkpkdihl05QzXQgRAxxf+gNKeCqv9CjAqMB0AIQ3Wn2gaZmmjRB2gpELqN0VPhCHAEnk9Y2qkwRBlEEVZSYqybUZt168tFlhf/7ksAWgBsdmX05rJCDXbKvszeECYNv3coLlW4cSjDCoNZfu1GY1h2UlVM2iWTmaHu7MxScrd/eIkeqwvoIRFy3pXX7vWt/+sqBUKcb+rLWArUkoqZy+X9/HHeOojAS1WLyRc7KKTLGf1Z3du/rL/x1/wOvJiq/YYSHeuOvFYvYU+eXfyqVN8y3+9Zf+06oSzhiDjwGtFrUZe9emu289dx7he3vOxz98/8u/+P7//kbdGNw1Tt8ySUtwbnAsRb9zqoAAEACQaMLQpSxTxxTCY2Ro+MSEgQmNR5KRMda0TBdMFxIxQblVMxZbjzoaVKZmrTUHER1sS61WVezaVImBj2bLVu3L8y9jq25GX/cOHpuF5ZVa1pp0hvNdi0LcixGXEZZvLL9d+HpbflMahiIMogSXRiEfr9/vGdmoZl1eJUsbvRLCLw26kdhv94/+P/96ZlUuoJmW7oHUnJc7Eos0k5OV9f/83rfPxxlX3ZTcqTV3dDMVpfD8roXTkdFG4XGM6G9Oc3j+///y3rLn7uTdSvMV8K8oyqSusAAAAgICAMEBBD/+5LABIAWNVtvmYYAAsCwbaMywACBCA4PMoT8BQYwANgUK4dXs9KYTvpztDiMVZAy8WDuhk14nAuONBFWMjqTUMeANlooFV6PQ4WRoyf7Cv/gaddMuTobjnsUYPGmVtN7Fq6kC9xhZFLmVz/s813rXrsN5dtyFWea/ONdNt2s2drrGTdyb9f7v3bvaa5+/aZ57t3srbsv97zNKew4+w4+4FQmCsJJaZBYWPmgmKKlHAgj/LEiDZb/LhwXGAJQAAAECAAABoMmeKD0G8MhIAHqX4tZeVUk8yhgjOYJUxZ4R1CYtSIKoKBWB5Ohh00yO5o8oKquPRyOrnxPtyxQvomb4lR+Sm/cb9e+taatzunUNVyWmLIp1+vd+We6y3PWtde345HN9ZZ/7Xm31atzzU+519vkeUYp81tmVd6mLpuu3bV21d299yn0pO3pP5P1rX/teZ+Z92wFDoCPAafGHDgH/yo4KmBEj/LngeCYMkwAAIAAA0IQ58noIkTSiEZKxGVBgrcB5F+G8Z2tpmS9lMRiTiaPpqAsDgZohqfcGY7igEcS//uSwBoAGLofarmVgAMaw21XMrABOHQkIMzPDUCE8EocnCWWk8b0UTxmkZkAO1JhsOyUSebGqsoTA8nD6ZNtQmNabw9jDzFjVzik4x5Ncx5y2H97FEqo6/hqRTaiZtuLNh9krP3Gi92nLXLubKVqU6DWLRWqTe4Qqn9sk5vjlkOqjrIS+7NWQqtVozCroz/Jzz8df////+1/3fMzH/////2lbouGu0QABAAADKdLZBMpMwbEhEuEEP2UEQOWta6ifAzW2ksKUuEEO0hyGHcB0AsQJAD+HggATA8lRGBxgiCN7haO6gSh+Mj463DeqUlh3PNKSbJNJ8Eg61JRh8zVHcuw1SPuHY2XEw9VHqWWXsknGGyNp2fo3Oup6aN3JpCWwlRJ1rEzTYeOWbuppvduTmTh1twbWo2Jk7SR7Y0/oVTjlzb+rXumOqqfM/tpzkTtJPdKTd526Zw5m//////9kRdxM9f////+3rSuEajAAAgQQkkQgwQgMI0LGHIClAbDQCmTYbqmI/7W/IQB4CIxZTF8lCdyUiq1FDEeMS6UdDKfSv/7ksAaABhVW205l4ADna+u9zOCQCwLihOG5UafHLPpTHc4oYfyy/3Czhho2sUaAxLFmJUWpi0PdGFl1IzP4Sgf0VjfakC2bxp/Bi1w+cU43rLZBTUKL4GPuNTGLbg7rJXGXDdHl6PIeIEsfdoGMR590pC3qtcate2Y0CDHkgueKs9dM9UAcLEDYOQ+NAQiJhoJBQuGwdeC5X/nEvYM/ysGVh1YASCIIKYkTJaEIZDQiJoGnBAfz62wMIgsF0UBhhiKKNtGiZkBThYRPimoZIrK59BflKcSTTd0UXZTfjPKoAQBhQIBgI/hzHFTqvVcIkmJA8RS5W/MSSUNvI6uFbnvGtllUZa+sJGXbidd1H43llvLsfdJWlX70KOttcjEQwty+b/8f3j8WdtrEWpmWQ5NSmvE6e9YuWpik/Wvy7/7bWTvu8Mam37fz4ae2R36tihm4EotZ3P/H///1v4PeBsMWrM7diXw80yigyUt7WuQ/F6+dfGWSykwpLmcv+JjzIaEoXvS5n///1XrAkUq59qo596+HjQOAcTJihoDGJG6Clr/+5LAC4AZDX17OZeSAwg1baMy8AAJNuY61suenIl+u+VSo8xBisPeJIGaEpO0iicMaulwKsLpZEMJmSRAodCrqEcC2b57qQvjA9UCMg1hSxWw3k7GTqFPE4nHBsUGK1+dJVzLwcbYX8/FRhOMkZ44a1WvzWOmFyqW1pR2lA/YGBzhOKv7V81/rj5WHafXbxsRTDZWqpnj1Y3+37PHhseN5tbON/dnGdYW4CfVl15tcYLkqtR5Wdz0xv5obt5eG4ReInik8r1AAECoOACDAoQHYmouZ44DQdIaCh8vW/sLayrc4LlvgtFlKye60biFvyQPmw4Ee2PYy6J20zKg+oyVTZ/OpoSpnsnoKGahurxJW185Q22BaA53Y39o+8z4xBcZtuMa8KDTDyJiJiuq5tGfTNbZaAx71E948S96/F7Y9XtPWLvb6uYNMUjx96vjVInprG7Zri+tYtrcWfMKupZLYf7+cv4+b7+Ikemt63je81rf1xi2vSu/auYOBT/SGAcicv/lhpMeOQAAAEAAAykjQTNSE1Qw+hFlRZ34W+yKLiLd//uSwAyAF9XbarmWAAMNPG1XMsAAViSEaA7DtD8KGw7EhwD5aLwDyKhLTCITUOh6Ogv5+pYcOhJw4PT4dK2J6s89K5VhCRxHSGwkPNZM2otux8VjFq7iq/nDk6v91ncee+Bf9mazE79H6S5X9ZZ/126ytljnsgf5pnfpakuX++f9t3bR2hZ73bbSP4G5tWs9Sl9vM0pOv9Nfetu1/7X3f+jssU/Gr1tMzMzMzMzMzM0jmXIfAH/PpHnxGAAkAAAaDwWTM6EiOG5ShkWAmC+DXhImAlG1mMLVja1LB9HssBISzcMBFbAwYFcGxmUyKIPHqQGfE8eXOkkuMlVQRH1iZQSIE1XG0qJ+FTcrx8shdXw9ZG9c9a9a0/Y4i1fj3VepEt9lC6FCrrD1V8WLLb9Gsv9m9Zd9h22LWrMwL/lzcecmF+Zsxlq915/WI9pH9HrTa05Tr6w5N/+l3J747bX6dWmZ82t+Z+Y9lJmZmZmZmZmZmkfX38Y4v/wudAwQNAAAgAAjWkLNmQySlAeEiUDDXtEiG7iQDO0hmVsXU0WW+5sYEf/7ksASABiN42q5lgADTbMt9zDwAMJ1hYAMZF1MNy6FLkI8CTJJBmJdwblU/uyyiQyVcxRtoB+SGKG6NiA+scrKGENkJFY4gtdqO5jTLnr9jzapHM273OMVabtRda7FbHn3Yjr94f7u6tVss67rV6Yufm8P7V+aN32rnVfvLGfWj3s067tcvabMMv44/zHRY5SZ+0z/0pl72nrZ+Mzu1m0zMzMzMzMzMzS3ZHTW8F/9RguLhgBgARBApBIRiIMBoQiERG6glIADAij4FoKwsMgLKAVBiLwlpRbhursQY8ZylJRFMstuKE/JqwFcaC8f2rq0FOLC5CFqwda021rCxGHyqiDlGnlZVtZIuYL3Uj5vL+kIKfPyr+HfUTdXtMRsvX5yS6QxjeZ1GrHcvWFrcHHhNCgOdZoabDc68QKR93ifNfX1x7b9V3ZXp+BDUbBVnQzfrDzmJE1nOsW3601bOM4r8zqCHRUK+JMo4tVHDzvO7YgU3ePE9Y/Eyjos3/g+kLJOP/zouGAGTADz2Sn33Tn33y2iPwGVOJA8Gyz8H0xusgT/+5LADIAaCZmJOZeUgzay7rcw8AAQTCQwiMZBCos8n4j7DiiNCZpclkKsgBwniqDkDTMCNjb0ekCytA5xXAlZrHLCviDFG+qD0DVF5N9Fs5eGTHtm1kQQghcEmJboxyKxxVig/rr+yNZyWHWpDBQpQYYIE8dr9s7zX+y0qyWUXlKcOzreotbRjemzo7bX5tvP/rpRzNhzMsBUIXlIqZwcIjPaRC1HKn0//bf+fX/Fv3GdCFW2Jl87doRpsa1TdzlfucDD3bIrHNsYFXGAAKDQhVZ2FZiEpqFZtA0EAS/CYhiCg+taNJNzQkN+Xah5ONERW9t5HxwlgWFe7fWAKzWT5ppprbX22EAeDwUQNs4nA+1LC3BtYy0oXw0DjU7+Eo1XXG/uq7T6ghKRD6q9/aPH1mtc1rEb04zwFOwVhwIEZgVGa617Z8K6kP+reiGKRT7gRI9IkfFK+2dY1/+pdNimlhqVqoulzH1TFNUiUgPP7Wxa3t/879mtdQYC5fTtz1xgvmbEzxkgSUr6zwLv2QFWC3/50s4Np/0nEDuKLbGQMbRJ//uSwAQAGAYPahmVgAr+Qm1DMrABsQmuShU+Jdpr6OdLN0ihip2AMEKQTTwghmOgHJMHkGQTSKgSCDDEuPjaKBU4dYJ4gF1iUkiguOoyMR5QD2eNEiZadMRJqBwhliUU47GvTJ9GpJNXtNYTLDOTZF9oHHHOOYtz4SpM0pp42hOkz5y6N4Y2kkWxNUzfTDV0JPbZ2Ks0m0z/bJc63JOY49O7q5UexdakVHQfuKYzlM/Wx8Vt6mbtrnTH/////tR0GXubM/////+855rJEAHkbQzGDEXNCMMjaS2qXlGxBlS7XhSFY00xyzYE5wD0YkOAUPZWA6Hc0dAnopLz5JD0HqzMbxJZMPqFSJaHp6Y3IiDYmQibTBJ7JVJw7ZXJuXmjViXZ1FFx42c8tPPOFx+yQck3Pve18mtwlaB88obnoTpA5yfmKbVIOlm5qN0q9aVVrRYynp3SCz07mzzrupadiEqq5UuUn6Su5GdjKfNstr1oYv7NsW5re//////a2qRiGxDf/////etbFxKOEAAAAAQgAQCNQiFMxohHMZdAMXxdAv/7ksAKgBfKE20ZlYALB7Lt5zLwAGFhwMAkbGm5OeulL+FGRCk0EIfi0NWGAK2VAFhERCq9o3jqYZgYBEaOg3bRmeG5cqULhrOG5Wu4rRa5dA6bONVMsN3KFjmq3D5XVWPWapPegck3jz1NRZCWig2VkdE8qT6QoszRlNZURH1NK22UppK3U83iWn4QbVuiWtu3PnfNQebpPuF3bom7QqbZb39PWju7mZi7r/////1KuGxtq5/////9kVB8DnwAAADADCBDDCDEwSgQzFh4MAEiIZLGRoavyoQ8L/vq3Jtm5M0W3JmP1OkqaXjYnGGxkQrLqJqqJjUZgwDmik4Y5YNMwp8MMx1NDAhSo8CTF7SvpaUfYcmS86stmXdNRd5i4xeLBfn5FgpBYxvV9xv8ahT2zJXwYq8qIkJQQOrNarfNfvdMb1u28QdXtWFp4+mw+cPGZMZ+M5z/WmMb3rFvnVvmusXt77VmasFYrZNNI4RBFQAXp/1HRdwdK/5Q4EBhBQAAAUBApBsVNBJPOMMKtQMEEL1GWLmkVNcjcT2STwiJMzz/+5LAEIAafZt1mayAQ1yzbnc08AjszgOUGTDzl6WxJliNsxD+56tdB06LaBGs/FFcpd8pgqEDxk6TEQp8+2LG9VcvL3PKqRIRpet77jhqrz8stQc/eMRi2t77z9fvHnMuwc8bRIrVaw++f5c/LP9fvH/y/9wiEq7rwS97nymAMOZb/Letc/L9b5vLv7xZdIXAbFKZQ4jl6h1v+7/X4Zc/Lutf//l398/WX/j/zkGu1B1C6EpnYccudpXHl8z//9TRNJf+8ROFUABgoBAMGAsGAwGAwGAgYzHTFBAUGDnpyCCVUFL+f41YsRAlVHEtRELiUQEe5TsJXiRJFGJNQ6qGCDRTpvk0TTZCg0YglYqlCF4o7NyFrctMyRi6LZdxgp5zTjxlViozCt810S4vKuRhY3Bvb3Kr9y1WutYssIsninYDtUUBqmc8MsOW/tv+uM1cmY8FmAabfBUioiWpJIzs993/xXWP/aye1VCVqGtqiEpE/WIyPL0tqPHeet6bxv+tfrHxb/C+pntGVbjM6gw2Kd7Lo/hD/4mrX/zxgeLKAKCY//uSwAGAGF2Xe7mXkALxQm2XMrABUMZmMpcDhcMSjkOJkww0BjEl0IQh2bNHWvqinyz5f+VSpwn9EQJjEhJUzR1EojK6XBmK5cA4R0BYECYq6fF/f1Qwzi6JRRHhB1CrV1PdmioxnUjAlr4rX5r2GFSSGsqe7FHVa/qta5rXV3kfE8z1dqpkZ0+jGtn+a/1+c6rGjSQXuYDJ51ZqVkiWYHm/XHzvfx5Nw7zYixtWexXigeSKR1OyMjm2PFXa9rfFt4t7Y+N7lkziHT0j73NFa9P////WBAABIIai5mjnQAyoxijMLL1v65zgqVO+w+HmAspZox5xgO8pEELhAAnlAIqRUGdpD4P7ECosYNw7RtkdhQcVHQcKUXH3E1cwMC95ybTJ6KRtbLkdyMvLTdM/doGlootlp08qgfzZFdAsPshjXxDmONpmKecOqoRuNN9Tbz++72w6Yu5ababmyqy2pexjkDlsmpXOTUtbEXDj08fsXqFWbXOh7ofXvfD7r/////9sbYu5qJ/////9WapGhEwAEAAAAANSE1Qw2hKEznAoq//7ksAIABgyE2q5lYAK4sFtlzKwATd9kiWmF+KBExfj8Q8tlahuH8bECFF4B4ch5MNQGB0lYeA3iCScgdwgA8yTA8HT5LJ6ypSguHljBtQY4djVkzY1RlIux5NFyk0PpuOOOZ5EpRs8bLqnC55wupNfg4vveqi+3PnujZ1GyWkc83ukDnJuvcvqHw24StJJeFF2Qeu0GRL6urZTJZNU50bTsQlVUw82jyO5Hcrw9tsXZnO3/////+2Iiq4d1/////6t0rZNLGAAEAAAMhkoKH1Sg0znC4aPjlCwMFCQsJbKtdwpQoE3MhBQJZ8zHgHCRWNw7yDB0O4pLgT3G489mwhE15NEA80LjQdijljIkrGJsi8xJ7EFjVeGHz2Si5h0lPeoc0z7pRmOV1TrnInNClrYfz7FEqpr+as14elpLWyKtO6ZK9ubMsbxEXCLJk7Ln3aFS/un1DLmJqHy27d/VVB6Zg9bVKmm75umVvjr/////2xEX754/////9U5M0DYgAAAAEIAJBDETGQgeaTEGo4LNCQD7oQOWoC/q13IX29cIXP/+5LAEQAYAZ9tGZeAAz6r7jcxgAAmzvkZIDGeaPYTpebJzWQWNDXzHBVc8ZDpI7KlJ4isqrJITnGezbbnKj5w3HYLa+6xMMLjlujRW984XZ4FIct8ai6g6hYu9jN7nfT+LbPvXe80xisj7GYtcbibpA1i0TN6R92p7enzmFukHWYW8V1qWeJl/jcsf6jzY3TWvfO/mmPve7ZrXFvmtcbtnUThAYBC/+WCDIuj/KBoTDg0JgBCEQiahYYQyGRCGRCAQEGEA6XNNzAM4HVRNWhL2/lSEx2X8gpwWut60i9D9DRKpjxWYN9GI5DVWaTTRFh5TN0FfvnT25VbjK6YU4bKYVGMMe71utVszcExalguVY09fGxYzrU2eW6KPx6iuxyisZ17/Oa5jjrlbKdgidk0xVhNab7hr87WGtZbq95rHWUhv15bR15TR4zM9b7+H81veeeu46/W8f/K9Q005dmpBjQTl6gvTlbYIBEm4iKJHFSrhFDcyh5kr/pOJez/qOsWHVgCiiBiiWiiiik0AToYPqEuuChEUjRTLOBkyejJo0BC//uSwA+AGk19dzmXkgNSL243MPAAyhoYASBhqeC6BtnmXCFODYOo7gaARtcQYWRqhuqIL82Gk8z/YbbekBhOQ6jUMhlaywIRJf30iCgPeMhJrrx+KRwVbHitfmqwizAYXiVOOVFnOm4qrV/z8fFoSLXlVY6GSEp3mor9kUiFvqfFv9/5Q2Mr1WyQEUrYTIo1W/bYtYygYKKRWY3nG///mIvqZxyoFfRtcnK6GSSOrzYhv3OIxsbhW3gcSjTtgichbUuZ/pn//v1ABkEmkRi8SBsRiQQiwJwEWDYktGA2JjB92xCQ35WtH17rUVvbe3MEJBUJRD4LKAdqs7xxlIk2WZtAHBfE8EDBrgWCTjfYZ7q0z3AuhnJ9hY4yfOOFaDJGb0iuKJJIwz/Q+Mr1HndvrT5fO5heIlXP29jjZjy+tdZrFdqZUqmCtKqjhB8k9nFX4bNVg79cfKpdv1pogOmmDHWI+9P94j71f43u/xWvrV28QtUQ0MUeFOnLNifbZaWpE2wPJ3jI5wIjPQaCq21VMEsKlf9D8QK/yzRUYCoABIAAA//7ksACgBfp22q5lgACrqjtlzLAACBjaHNiE1SQPI6hdJr6FcteFxVUFzuAyxcrccI43ERUOwYDqXRITF8CRnchEqxLA+DC8OPyJKNFUktEuNYrpBAmUnrCQ/q8e0MHNqvxz72eehQm6Ron270ssWWhZdvmcy1bF/9W23cves0yBrqrafq32IL6877MCuaMU1zbtv7rV9ra0z30jixm30f/61230plN67/Tl87q1yz07t9r+QZ97drOZSZmZmZmZmZmZp864AxOX/yxIQLIgUABIAAAxjjEPMxkIXH0CYFaEjfxwi+LgKasqYhQtEaUqNTUnmhqHxOYkdzgKVhSLYlMFdaOjLY9dEYn0SdtSZvcYOR40/jaVRGlYudv0Ycqv2l3o6pryuZvC/lnJteGvxvd7tdid1jr59Jpv3hZ/3t1l34KR5BHzV3/ox3t3oxSZtSdpWaZ1maFWAseAwqJ1BEBpYcNAEUDgBFDwDDhMaSAv/PlHB8p/lZFZ9IAAIAAA0ICqeZj5a4NlKGCsZ/AgSDyYmTtupaj2579uyWRGPiwP5T/+5LAE4AYUeNquZYAAvovbecw8ABArUvCONikLliQVlpgzAwhLaF48iPRKvYrIx3odnKszhZs+xAfUdMqGDNnjCxxBaGnsoUd3FVW43JTv0bQ9yYfqmyFCrtJpeLFltykEE/a+srZ5nt12/rX5u6/RZX/Wd1czH7WrvWh7Lu9Zmch/K7HTG38peLHLb9Iqzbv96ZynXtPtfmPZ0zMzMzMzMzMzL83rejHJ/yp8mBggPAAEMINEEEIJMNlEIwAkUMC+pQIavyng9Kmjtsib5gSfD4ydmTq5MpUOCQe7DkUT9kV8p+3pOJoWJlOSOjHUzFO1MNEc6w0sivzlwml291JGuzsGWNq0xw/Em9aRtwZpocJwljMmocu/NrVpd99jOrx1ZGu8cq4zn/WvnMHUts4xb1071tzpd/JmHCzWudVzXOde2de196t81ziZrjOErmyXfvI0OR3VzUGRcwAxOeEMSlv+8DrCy/9YYBcXDADAAhCBYKCiYIJNIdAACSRoIm1EfzbKZLiFJyZgRgPE/tIBnDJDQmMQsxpSCKrzwunproQ//uSwBmAG62Zd5mcAkNbMu5XNPBIt12MwG6kfsSnC+hcTaZykYvttHsgSt3HdlOp7WUKdQy5dutT39fl38Y4zhreUCtPtQxKL1zfN6y/eMsg1+nkkr4SGllb7z96xQf+X/jr9RVwIDeWwzuI3XHvyiUW79eWbu4/vLv75+sofvZQqQVIakNaOSWxe5K88s+5UlT94/+Xfx5+u/8upHbmM4HdyvKn4opJSwmtYy3jubt85ct1Klu+5X/5JbU/+U1hFttpNmKCAoMEOTjFDnOzKlV/Q0akaIAQsvZJm+ojEp2IS0b52EVoSY2jpVNahMg/XAnR8Lpue0fAaZJ06I4hrOjEMviDCjDmgrkXE4jzXTAXuPnGfmKuzXJoxHYT9ZLezsSFmXqvxi1pEyX5U0Spxw2NPu6qNX49d5r/iMnzkfLy5Qm6rmU7OsQ3aszDrq3+cW+OlnScUj9vRLFVmSqEOEJOPIrxkiUYPmus/Htb/O+5PFGyQ1w2zMLS5XUESSJak19Qtx5ayxogOxV1X+s6WcZX/3InCgAAAAAgwFAoUAUEU//7ksAFgBeFl2+ZhgACxDLtlzLAAI9GAwi9AuU3RM4UKpEi1RoVv6yplTEm1YfAx4dC0OTgJgPNphCHYpDAKx4HJTxkJ5JhHgRANwGCG4mWul58rnah5ipgeWhdpWsDiOsan1nbW87Xq1l6p87Q5XPwncev7s53W2c+CGusZje0o/Rx/OrW29laztb8w5HscVqvZ3rKa53631a12tZrWdrmutHK5tNDROkswd32O6++zn0cfYcfAMJLSr/KGQ+4Fi3/YJDJxYIAoAABzALDGIQZxZnMmeC0J0U5nfZPEmQtZZIx9TBmhmcloVKymB1CgFdfCsiXxRYSiyJMJUOA/aWIdWm+ijaKzZxEvdX1gteB6F49uhrOVscsievNNdWx1OtpHFeFfbFjnVZ/7XxroWJq8uxv7vufz+dXs7dtabW/tZplbZj9OvW+R06nZ1ZrWvzXMt09ZnJ6P8vOVrt9vOMdO36aPlhdJURK/ygbFB4Mi//DAXeBCgAJkUJM5wGKmdCPLpitohRNI+M6hEuUVXQ+quxsSIUKRgIhOOFIDwdJFAP/+5LAFQAYEg9qGZWACxhDbVcysAEH4gw+scHoPA6UxsEGqbGiKpSkZjpcUDtSGw64dbjxSi1xcoO0qcalWTE3Lkhz1Tr7hdEqPyVG6yo77g0m3Q+TtwlahueUNz0JnbOH5N1nHOmuiGnahxtSZs2TZrXIup6q9IU97rprap0d1LfpyLIVZqsbLGzTE36DN92zObuWxbpb3/////7G7Guhrob/////7F8cGBHQAAQAQCeUmVNSIKhmU2IxA4l6BY2EBxDpryghQZhKdbWCtU+LhkKZgOsrCYemhuTzo8l5mOoMkDceACxKbVT0Sw6HlhSUloJjx2GBk0oScqcKzZFYqLoMx2SS0qt5165sdolH5YTjipPY4rPvVV/ZEWio2VkYRcdJ6yDSxxMqm3EPdqq3TzZ8QehsKUxc483dtPti7qnMprIj7k660WVZ1sJu2MTuGn6Z1ByPfM3bmzLP/////c61GuhGn//////sXq372n8AABBQDDCBBDDDB5pMQajg0sYRIEOQsd9MV/UaWUsjfGHFhkQHFfPJF2jTcQ1WQi4v//uSwBgAGVmXbTmXgAOMMu63NZAIWotoeSo6rdsyibo8Q9RQq5FqySFfCtmlYpzFaW84UfiWW8SaAwxLwpbq1bqwrc14dcfM1YUbcGaJK7cJYzJTFL7jYxisK9qyV8G75CMQkIYMKDWvDzmmq79vCrbPrrEZWd4rIcBWMdmRT6xu+MY+7f41reYuMWz9Qvmv9qJ+FZXyTscByhsDkdC5IAvM/5YOlRodK/5QOAkMDigARiIk0I1SGwyGhSIxAgi+RggRb4yws1yJpEvgesdf6bBhLIk+sOmkNgL3RRuZpEBwVNgapHIa3WECQOiZ1HIHo56bjWctOIwHIKVFUOMYfbt48rY+EAseS/SraRvL7NJe3Wy/eOCdShD/LIW3jnXz5hhzestZbf6Wq/YJAbCnVz32x+Wetfjzn5f+1+qaFy3dZ6uNKKGUeP/LDWs+91rL/3zX/+usCnXcX40+JsBa9DLlrs5rPf57/C9vedjn7x/9Zf+///+u8TTXPjjI4IkcDMEonogltTx//9UWkv+XakYKoAAwGAgCBAkGQEKhSKRTrP/7ksAHgBfx02O5poAKMzhfB7KAAcS+4EHGjKPtAxpxQEEAok0rLYoSFhKYzbc2C+CuD2M8GUFrJoW0kh94DOGEBzggwnpJGY9V8D0PCShcA4FScSJK6slCTOEkPMYMnEiSqBij+OMzE/JMsKA/VF4vKJIlv1mQ0EoQ0hykmVn1JJpLJFJMu6/yhKQ4DBFA8eJNNJ9jhiaoGJr/qzYzJcl0EzFjQwNzAwNz7LpS8XlJJaKS/rb/RWtZogkYGDP//8xGkuAsEQAK4ePR+6HKYiGZiJmApuGOYgNZkkUxKRRFrLOWuiMDoAEAKHqB0AsAsaHQCwLg+cVBqDWyQah6bTCwtRQsdf/yqr/7f8My7M2pIrcqq0xQtTMzaqbaqtcM3DNf//////w38Xyq3KqvDNUM18quq1Darars2oraqtcM3DN//////+zVszXKirYKbCOCgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LAJ4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uSwO4AAAABLAAAAAAAACWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7ksD/gAAAASwAAAAAAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LA/4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uSwP+AAAABLAAAAAAAACWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7ksD/gAAAASwAAAAAAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LA/4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uSwP+AAAABLAAAAAAAACWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAP/7ksD/gAAAASwAAAAAAAAlgAAAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAAA=";static dummyResPos='{"s":"ok","netPositions":[{"crossCurrency":"N","qty":16,"realized_profit":0,"id":"NSE:JPASSOCIAT-EQ-CNC","unrealized_profit":0.32,"buyQty":16,"sellAvg":0,"sellQty":0,"buyAvg":4.78,"symbol":"NSE:JPASSOCIAT-EQ","fyToken":"101000000011460","slNo":0,"avgPrice":4.78,"segment":"E","dummy":" ","rbiRefRate":1,"side":1,"netQty":16,"pl":0.32,"productType":"CNC","netAvg":4.78,"qtyMulti_com":1},{"crossCurrency":"N","qty":16,"realized_profit":0,"id":"NSE:JPASSOCIAT-EQ-CNC","unrealized_profit":0.32,"buyQty":16,"sellAvg":0,"sellQty":0,"buyAvg":4.78,"symbol":"NSE:JPASSOCIAT-EQ","fyToken":"101000000011460","slNo":0,"avgPrice":4.78,"segment":"E","dummy":" ","rbiRefRate":1,"side":1,"netQty":16,"pl":0.32,"productType":"CNC","netAvg":4.78,"qtyMulti_com":1}],"message":""}';static dummyResOrd='{"s":"ok","message":"","orderBook":[{"status":5,"symbol":"NSE:TCSEQ","qty":1,"orderNumStatus":"119050790482:5","dqQtyRem":5,"orderDateTime":"07-May-2019 15:18:04","orderValidity":"IOC","fyToken":"101000000011536","slNo":1,"message":"RMS:119050790482:Not allowed to trade in NSE EQ","segment":"E","id":"119050790482","stopPrice":0,"exchOrdId":0,"remainingQuantity":1,"filledQty":0,"limitPrice":2155,"offlineOrder":"false","instrument":"EQUITY","productType":"CNC","type":1,"side":1,"discloseQty":5,"tradedPrice":0}]}';static dummyResOrdJson1={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4,trigger_price:0,average_price:4,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5,trigger_price:0,average_price:5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson1_1={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4,trigger_price:0,average_price:4,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5,trigger_price:0,average_price:5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson2={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4,trigger_price:0,average_price:4,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5,trigger_price:0,average_price:5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson2_1={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:11,trigger_price:10,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:12,trigger_price:9,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson3={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:11,trigger_price:10,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:12,trigger_price:9,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4,trigger_price:0,average_price:4,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5,trigger_price:0,average_price:5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson4={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson5={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]};static dummyResOrdJson6={status:"success",data:[{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:11,trigger_price:10,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:12,trigger_price:9,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:11,trigger_price:10,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:12,trigger_price:9,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:11,trigger_price:10,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:12,trigger_price:9,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:11,trigger_price:10,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"TRIGGER PENDING",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:12,trigger_price:9,average_price:0,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4,trigger_price:0,average_price:4,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5,trigger_price:0,average_price:5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:6,trigger_price:5.9,average_price:6,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"SL",transaction_type:"BUY",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:7,trigger_price:6.6,average_price:6.8,filled_quantity:0,pending_quantity:900,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500CE",instrument_token:14961666,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:4.5,trigger_price:0,average_price:4.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"},{account_id:"FW6041",placed_by:"FW6041",order_id:"240819302391052",exchange_order_id:"1600000185549103",parent_order_id:null,status:"COMPLETE",status_message:null,status_message_raw:null,order_timestamp:"2024-08-19 15:05:04",exchange_update_timestamp:"2024-08-19 15:05:04",exchange_timestamp:"2024-08-19 15:05:04",variety:"regular",modified:!1,exchange:"NFO",tradingsymbol:"BANKNIFTY2482150500PE",instrument_token:14962178,order_type:"MARKET",transaction_type:"SELL",validity:"DAY",validity_ttl:0,product:"NRML",quantity:900,disclosed_quantity:0,price:5.5,trigger_price:0,average_price:5.5,filled_quantity:0,pending_quantity:0,cancelled_quantity:0,market_protection:0,meta:{},tag:"t:intraday-a:468568",tags:["t:intraday-a:468568"],guid:"01X0rJgsXhNEwyW"}]}};var Od=class{id;instru;scrip;expiry;cmp;netQty;buyAvg;sellAvg;type;realizedProfit;pnl;includeInSum1=!1;includeInSum2=!1;includeInSum3=!1;includeInSum4=!1},Rd=class{instru;expiry;scrip;symbol;qty;entry;exit;strategy},Fd=class{instru;expiry;scrip;symbol;qty;price;strategy},Ng=class{id;scrip;qty;status;message;type;limit;stop;tradedPrice;side;orderDateTime},Pg=class{slab;type;qty;entry;scrip;sl;sl_strike;rollin;rollin_strike;orderId;orderStatus},Ld=class{entry;pos_open=!1;multiple_pos_open=!1;sl_open=!1;multiple_sl_open=!1;reentry_open=!1;reentry_multiple_open=!1;sl_times=0},Og=class{addToOrders;guid;id;time;instru;scrip;expiry;qty;tradedPrice;triggerPrice;status;message;tradingsymbol;tags};var Ks=class{token;instru;expiry;strike;optionType;lotSize;exchange;tradingSymbol},Xi=class{expiry;instru;strike;type;tradingSymbol;exchange},Vd=class{exchange_code;token;ltp;ltt_unix;last_traded_qty;volume;best_bid;best_bid_qty;best_ask;best_ask_qty;total_buy_qty;total_sell_qty;atp;exchange_timestamp;open;high;low;close;year_high;year_low};var ow=function(n){return n.MARKET_DATA="marketdata",n.COMPACT="compact_marketdata",n.SNAPQUOTE="snapquote",n.FULL_SNAPQUOTE="full_snapquote",n}(ow||{}),Mr=function(n){return n[n.MARKETDATA=1]="MARKETDATA",n[n.COMPACT_MARKETDATA=2]="COMPACT_MARKETDATA",n[n.SNAPQUOTE=3]="SNAPQUOTE",n[n.FULL_SNAPQUOTE=4]="FULL_SNAPQUOTE",n[n.SPREADDATA=5]="SPREADDATA",n[n.SPREAD_SNAPQUOTE=6]="SPREAD_SNAPQUOTE",n[n.DPR=7]="DPR",n[n.OI=8]="OI",n[n.MARKET_STATUS=9]="MARKET_STATUS",n[n.EXCHANGE_MESSAGES=10]="EXCHANGE_MESSAGES",n}(Mr||{}),zt=function(n){return n.CEsell="cesell",n.PEsell="pesell",n.CEbuy="cebuy",n.PEbuy="pebuy",n.CE="ce",n.PE="pe",n}(zt||{});var Ue=(()=>{class n{ltpMap=new Map;atpMap=new Map;volumeMap=new Map;oiMap=new Map;lastDayOIMap=new Map;chgoiMap=new Map;ohlcMap=new Map;intradayData=new Array;static simulateData={};static simulateData2={};static stockChartData={};static stockChartData2={};constructor(){}updateMaps_zerodha(e){let i="";if(e.instrument_token===256265)i="NIFTY50";else if(e.instrument_token===260105)i="BANKNIFTY";else if(e.instrument_token===257801)i="FINNIFTY";else if(e.instrument_token===288009)i="MIDCPNIFTY";else if(e.instrument_token===265)i="SENSEX";else if(e.instrument_token===274441)i="BANKEX";else if(e.instrument_token===2707457)i="NIFTYBEES";else{let r=f.mastersContract.get(e.instrument_token);if(r.strike==0)i=r.tradingSymbol;else{let s=""+r.strike;r.tradingSymbol.includes("USDINR")&&r.tradingSymbol.includes("FUT")&&(s="USDINR"),r&&(i=this.getMapKey({instru:r.instru,expiry:r.expiry,strike:s,optionType:r.optionType}))}}f.logWSFeed&&console.log("updateMaps symbol is",i,e),e.instrument_token===3465729&&console.log("updateMaps_zerodha",e.instrument_token,e.last_price),this.setLtp(i,e.last_price),this.setAtp(i,e.average_traded_price),this.setVolume(i,e.volume_traded),this.setOI(i,e.oi),this.setOHLC(i,e.ohlc)}setLastDayOI(e,i,r,s,o){let a={instru:e,expiry:i,strike:r,optionType:s},l=this.getMapKey(a);this.lastDayOIMap.set(l,o)}getLastDayOI(e){return this.lastDayOIMap.get(e)}updateMaps_aliceblue(e){let i=f.mastersContract.get(e.token);if(i){let r=this.getMapKey({instru:i.instru,expiry:i.expiry,strike:i.strike,optionType:i.optionType});console.log("updateMaps symbol is",r),this.setLtp(r,e.ltp),this.setAtp(r,e.atp),this.setVolume(r,e.volume),this.setOHLC(r,{open:e.open,high:e.high,low:e.low,close:e.close})}else{let r="";e.token===26e3?r="NIFTY50":e.token===26009?r="BANKNIFTY":e.token===26037?r="FINNIFTY":e.token===1?r="USDINR":console.error(e.token,"not found in masters"),console.log("updateMaps symbol is",r),this.setLtp(r,e.ltp),this.setAtp(r,e.atp),this.setVolume(r,e.volume)}}getZerodhaInstruToken(e){if(e==="NIFTY50"||e==="NIFTY")return 256265;if(e==="BANKNIFTY")return 260105;if(e==="FINNIFTY")return 257801;if(e==="MIDCPNIFTY")return 288009;if(e==="SENSEX")return 265;if(e==="BANKEX")return 274441;if(e==="USDINR")return f.USDINR_FUT_TOKEN}getMapKey(e){let i=e.instru,r=e.expiry,s=e.strike,o=e.optionType,a="";if(s==="NIFTY50"||s==="NIFTY")a="NIFTY50";else if(s==="BANKNIFTY")a="BANKNIFTY";else if(s==="FINNIFTY")a="FINNIFTY";else if(s==="MIDCPNIFTY")a="MIDCPNIFTY";else if(s==="SENSEX")a="SENSEX";else if(s==="BANKEX")a="BANKEX";else if(f.mfInvested.find(l=>l[0]===s))a=s;else if(!this.isOption(s+o))a=s;else if(s==="USDINR")a="USDINR";else{let l=this.getExpiry(r,i);a=i+l+s+o}return a}isOption(e){if(e.endsWith("CE")||e.endsWith("PE")){let i=e.slice(0,-2);if(!isNaN(Number(i)))return!0}return!1}getExpiry(e,i){let r="",s=this.isMonthlyExpiry(e,i);return s?r=s:r=this.getExpiryString(new Date(e)),r}isMonthlyExpiry(e,i){let r=!1,s=null,o=new Date(e);o.setHours(0,0,0,0);let a=f.monthlyExpiryDates;i==="BANKNIFTY"?a=f.monthlyExpiryDatesBNF:i==="FINNIFTY"?a=f.monthlyExpiryDatesFINNIFTY:i==="MIDCPNIFTY"?a=f.monthlyExpiryDatesMidcap:i==="SENSEX"?a=f.monthlyExpiryDatesSensex:i==="BANKEX"?a=f.monthlyExpiryDatesBankex:i==="USDINR"&&(a=f.monthlyExpiryDatesUSDINR);for(let l in a)if(a.hasOwnProperty(l)&&o.getTime()===a[l].getTime()){r=!0,s=l;break}return s}getExpiryString(e){let i=null;return e.getMonth()+1===10?i="O":e.getMonth()+1===11?i="N":e.getMonth()+1===12?i="D":i=e.getMonth()+1,""+(e.getFullYear()-2e3)+i+("0"+e.getDate()).slice(-2)}findCurrExpiryForDisplay(e){let i=1e19,r=new Date;for(let o in e){let a=e[o],l=new Date;if(a.getFullYear()===l.getFullYear()&&a.getMonth()===l.getMonth()&&a.getDate()===l.getDate())i=0,r=a;else{let u=a.getTime()-new Date().getTime();u>=0&&u<i&&(i=u,r=a)}}return""+r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+("0"+r.getDate()).slice(-2)}findTodayExpiry(e){let i=new Date;for(let r in e){let s=e[r],o=new Date;if(s.getFullYear()===o.getFullYear()&&s.getMonth()===o.getMonth()&&s.getDate()===o.getDate())return s}return null}getSubscriptionObject(e,i,r){let s=e;if(!this.isOption(e)){let c=new Xi;return c.tradingSymbol=s,console.log("getSubscriptionObject stock: "+s,c),c}let o="";s.includes("CE")&&(o="CE"),s.includes("PE")&&(o="PE"),s=s.slice(0,-2);let a=new Date(r).toDateString(),l=new Xi;return l.expiry=a,l.instru=i,l.strike=Number(s),l.type=o,console.log("getSubscriptionObject symbol: "+s,l),l}getSubscriptionObjectForFuture(e,i){console.log("getSubscriptionObject tradingSymbol: "+e);let r=new Xi;return r.tradingSymbol=e,r.exchange=i,r}parseSymbol(e){e=e.replace("NSE:","");let i="";e.startsWith("NIFTY")&&(i="NIFTY",e=e.replace("NIFTY","")),e.startsWith("BANKNIFTY")&&(i="BANKNIFTY",e=e.replace("BANKNIFTY","")),e.startsWith("FINNIFTY")&&(i="FINNIFTY",e=e.replace("FINNIFTY","")),e.startsWith("MIDCPNIFTY")&&(i="MIDCPNIFTY",e=e.replace("MIDCPNIFTY","")),e.startsWith("SENSEX")&&(i="SENSEX",e=e.replace("SENSEX","")),e.startsWith("BANKEX")&&(i="BANKEX",e=e.replace("BANKEX","")),e.startsWith("USDINR")&&(i="USDINR",e=e.replace("USDINR",""));let r="";e.includes("CE")&&(r="CE"),e.includes("PE")&&(r="PE"),e=e.slice(0,-2);let s=e.substring(5),o=e.substring(0,5);return{instru:i,expiry:o,strike:s,type:r}}parseScrip(e){if(e){if(f.mfInvested.find(i=>i[0]===e)||!this.isOption(e))return{scrip:e,type:""};{let i="";return e.includes("CE")&&(i="CE"),e.includes("PE")&&(i="PE"),e=e.slice(0,-2),{scrip:e,type:i}}}return{scrip:"",type:""}}getScripLTP(e,i,r,s){let o={instru:e,expiry:i,strike:r,optionType:s},a=this.getMapKey(o);return this.getLtp(a)}getScripVolume(e,i,r,s){let o={instru:e,expiry:i,strike:r,optionType:s},a=this.getMapKey(o);return this.getVolume(a)}getScripATP(e,i,r,s){let o={instru:e,expiry:i,strike:r,optionType:s},a=this.getMapKey(o);return this.getAtp(a)}getScripOI(e,i,r,s){let o={instru:e,expiry:i,strike:r,optionType:s},a=this.getMapKey(o);return this.getOI(a)}getScripLastDayOI(e,i,r,s){let o={instru:e,expiry:i,strike:r,optionType:s},a=this.getMapKey(o);return this.getLastDayOI(a)}getScripOHLC(e,i,r,s){let o={instru:e,expiry:i,strike:r,optionType:s},a=this.getMapKey(o);return this.getOHLC(a)}getLtp(e){return this.ltpMap.get(e)}setLtp(e,i){this.ltpMap.set(e,i)}getAtp(e){return this.atpMap.get(e)}setAtp(e,i){this.atpMap.set(e,i)}getVolume(e){return this.volumeMap.get(e)}setVolume(e,i){this.volumeMap.set(e,i)}getOI(e){return this.oiMap.get(e)}setOI(e,i){this.oiMap.set(e,i)}getChgOI(e){return this.chgoiMap.get(e)}setChgOI(e,i){this.chgoiMap.set(e,i)}getOHLC(e){return this.ohlcMap.get(e)}setOHLC(e,i){this.ohlcMap.set(e,i)}getIntradayData(e){return this.intradayData.slice(Math.max(this.intradayData.length-e,0))}setIntradayData(){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var YN=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(ye(Ms),ye(yn))};static \u0275dir=It({type:n})}return n})(),ac=(()=>{class n extends YN{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Bi(n)))(r||n)}})();static \u0275dir=It({type:n,features:[ui]})}return n})(),ia=new Se(""),bG={provide:ia,useExisting:bi(()=>ra),multi:!0},ra=(()=>{class n extends ac{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Bi(n)))(r||n)}})();static \u0275dir=It({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&q("change",function(o){return r.onChange(o.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[fr([bG]),ui]})}return n})(),SG={provide:ia,useExisting:bi(()=>Tr),multi:!0};function CG(){let n=Si()?Si().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var xG=new Se(""),Tr=(()=>{class n extends YN{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!CG())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(ye(Ms),ye(yn),ye(xG,8))};static \u0275dir=It({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&q("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},standalone:!1,features:[fr([SG]),ui]})}return n})();var GN=new Se(""),DG=new Se("");function EG(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function LN(n){return null}function KN(n){return n!=null}function JN(n){return Ro(n)?Lt(n):n}function XN(n){let t={};return n.forEach(e=>{t=e!=null?ne(ne({},t),e):t}),Object.keys(t).length===0?null:t}function $N(n,t){return t.map(e=>e(n))}function MG(n){return!n.validate}function QN(n){return n.map(t=>MG(t)?t:e=>t.validate(e))}function TG(n){if(!n)return null;let t=n.filter(KN);return t.length==0?null:function(e){return XN($N(e,t))}}function ZN(n){return n!=null?TG(QN(n)):null}function IG(n){if(!n)return null;let t=n.filter(KN);return t.length==0?null:function(e){let i=$N(e,t).map(JN);return Qc(i).pipe(ze(XN))}}function eP(n){return n!=null?IG(QN(n)):null}function VN(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function kG(n){return n._rawValidators}function NG(n){return n._rawAsyncValidators}function aw(n){return n?Array.isArray(n)?n:[n]:[]}function Fg(n,t){return Array.isArray(n)?n.includes(t):n===t}function BN(n,t){let e=aw(t);return aw(n).forEach(r=>{Fg(e,r)||e.push(r)}),e}function qN(n,t){return aw(t).filter(e=>!Fg(n,e))}var Lg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=ZN(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=eP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},lw=class extends Lg{name;get formDirective(){return null}get path(){return null}},sc=class extends Lg{_parent=null;name=null;valueAccessor=null},cw=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},PG={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},B1e=Ie(ne({},PG),{"[class.ng-submitted]":"isSubmitted"}),Js=(()=>{class n extends cw{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(ye(sc,2))};static \u0275dir=It({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Wi("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[ui]})}return n})();var Bd="VALID",Rg="INVALID",ic="PENDING",qd="DISABLED",oc=class{},Vg=class extends oc{value;source;constructor(t,e){super(),this.value=t,this.source=e}},jd=class extends oc{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},Wd=class extends oc{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},rc=class extends oc{status;source;constructor(t,e){super(),this.status=t,this.source=e}};function OG(n){return(Bg(n)?n.validators:n)||null}function RG(n){return Array.isArray(n)?ZN(n):n||null}function FG(n,t){return(Bg(t)?t.asyncValidators:n)||null}function LG(n){return Array.isArray(n)?eP(n):n||null}function Bg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var uw=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Is(this.statusReactive)}set status(t){Is(()=>this.statusReactive.set(t))}_status=Nf(()=>this.statusReactive());statusReactive=pf(void 0);get valid(){return this.status===Bd}get invalid(){return this.status===Rg}get pending(){return this.status==ic}get disabled(){return this.status===qd}get enabled(){return this.status!==qd}errors;get pristine(){return Is(this.pristineReactive)}set pristine(t){Is(()=>this.pristineReactive.set(t))}_pristine=Nf(()=>this.pristineReactive());pristineReactive=pf(!0);get dirty(){return!this.pristine}get touched(){return Is(this.touchedReactive)}set touched(t){Is(()=>this.touchedReactive.set(t))}_touched=Nf(()=>this.touchedReactive());touchedReactive=pf(!1);get untouched(){return!this.touched}_events=new ct;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(BN(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(BN(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(qN(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(qN(t,this._rawAsyncValidators))}hasValidator(t){return Fg(this._rawValidators,t)}hasAsyncValidator(t){return Fg(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Ie(ne({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Wd(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new Wd(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Ie(ne({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new jd(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new jd(!0,i))}markAsPending(t={}){this.status=ic;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new rc(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Ie(ne({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=qd,this.errors=null,this._forEachChild(r=>{r.disable(Ie(ne({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Vg(this.value,i)),this._events.next(new rc(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ie(ne({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Bd,this._forEachChild(i=>{i.enable(Ie(ne({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Ie(ne({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bd||this.status===ic)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Vg(this.value,e)),this._events.next(new rc(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Ie(ne({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qd:Bd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=ic,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=JN(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new rc(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new Pt,this.statusChanges=new Pt}_calculateStatus(){return this._allControlsDisabled()?qd:this.errors?Rg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ic)?ic:this._anyControlsHaveStatus(Rg)?Rg:Bd}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new jd(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Wd(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Bg(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=RG(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=LG(this._rawAsyncValidators)}};var dw=new Se("",{providedIn:"root",factory:()=>qg}),qg="always";function VG(n,t){return[...t.path,n]}function BG(n,t,e=qg){jG(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),WG(n,t),UG(n,t),zG(n,t),qG(n,t)}function jN(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function qG(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function jG(n,t){let e=kG(n);t.validator!==null?n.setValidators(VN(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=NG(n);t.asyncValidator!==null?n.setAsyncValidators(VN(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();jN(t._rawValidators,r),jN(t._rawAsyncValidators,r)}function WG(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&tP(n,t)})}function zG(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&tP(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function tP(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function UG(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function HG(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function YG(n){return Object.getPrototypeOf(n.constructor)===ac}function GG(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(s=>{s.constructor===Tr?e=s:YG(s)?i=s:r=s}),r||i||e||null}function WN(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function zN(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var KG=class extends uw{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(OG(e),FG(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Bg(e)&&(e.nonNullable||e.initialValueIsDefault)&&(zN(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){WN(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){WN(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){zN(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var JG={provide:sc,useExisting:bi(()=>cs)},UN=Promise.resolve(),cs=(()=>{class n extends sc{_changeDetectorRef;callSetDisabledState;control=new KG;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Pt;constructor(e,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=GG(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),HG(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){BG(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){UN.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&s1(i);UN.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?VG(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(ye(lw,9),ye(GN,10),ye(DG,10),ye(ia,10),ye(Ts,8),ye(dw,8))};static \u0275dir=It({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[fr([JG]),ui,Vi]})}return n})();var XG={provide:ia,useExisting:bi(()=>sa),multi:!0},sa=(()=>{class n extends ac{writeValue(e){let i=e??"";this.setProperty("value",i)}registerOnChange(e){this.onChange=i=>{e(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Bi(n)))(r||n)}})();static \u0275dir=It({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&q("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[fr([XG]),ui]})}return n})(),$G={provide:ia,useExisting:bi(()=>zd),multi:!0};var QG=(()=>{class n{_accessors=[];add(e,i){this._accessors.push([e,i])}remove(e){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===e){this._accessors.splice(i,1);return}}select(e){this._accessors.forEach(i=>{this._isSameGroup(i,e)&&i[1]!==e&&i[1].fireUncheck(e.value)})}_isSameGroup(e,i){return e[0].control?e[0]._parent===i._control._parent&&e[1].name===i.name:!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zd=(()=>{class n extends ac{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=oe(dw,{optional:!0})??qg;constructor(e,i,r,s){super(e,i),this._registry=r,this._injector=s}ngOnInit(){this._control=this._injector.get(sc),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this.setProperty("checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}setDisabledState(e){(this.setDisabledStateFired||e||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",e),this.setDisabledStateFired=!0}fireUncheck(e){this.writeValue(e)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(i){return new(i||n)(ye(Ms),ye(yn),ye(QG),ye(Ln))};static \u0275dir=It({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,r){i&1&&q("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[fr([$G]),ui]})}return n})();var ZG={provide:ia,useExisting:bi(()=>lc),multi:!0};function nP(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function eK(n){return n.split(":")[0]}var lc=(()=>{class n extends ac{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i=this._getOptionId(e),r=nP(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=eK(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Bi(n)))(r||n)}})();static \u0275dir=It({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&q("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[fr([ZG]),ui]})}return n})(),jg=(()=>{class n{_element;_renderer;_select;id;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(nP(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(ye(yn),ye(Ms),ye(lc,9))};static \u0275dir=It({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),tK={provide:ia,useExisting:bi(()=>iP),multi:!0};function HN(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function nK(n){return n.split(":")[0]}var iP=(()=>{class n extends ac{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(s=>this._getOptionId(s));i=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],s=i.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let l=o[a],c=this._getOptionValue(l.value);r.push(c)}}else{let o=i.options;for(let a=0;a<o.length;a++){let l=o[a];if(l.selected){let c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=nK(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Bi(n)))(r||n)}})();static \u0275dir=It({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&q("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[fr([tK]),ui]})}return n})(),Wg=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(HN(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(HN(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(ye(yn),ye(Ms),ye(iP,9))};static \u0275dir=It({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function iK(n){return typeof n=="number"?n:parseFloat(n)}var rK=(()=>{class n{_validator=LN;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):LN,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=It({type:n,features:[Vi]})}return n})();var sK={provide:GN,useExisting:bi(()=>hw),multi:!0},hw=(()=>{class n extends rK{min;inputName="min";normalizeInput=e=>iK(e);createValidator=e=>EG(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Bi(n)))(r||n)}})();static \u0275dir=It({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Df("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[fr([sK]),ui]})}return n})();var oK=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ji({type:n});static \u0275inj=Li({})}return n})();var Xs=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:dw,useValue:e.callSetDisabledState??qg}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ji({type:n});static \u0275inj=Li({imports:[oK]})}return n})();var rP={modes:{point(n,t){return Ug(n,t,{intersect:!0})},nearest(n,t,e){return cK(n,t,e)},x(n,t,e){return Ug(n,t,{intersect:e.intersect,axis:"x"})},y(n,t,e){return Ug(n,t,{intersect:e.intersect,axis:"y"})}}};function ww(n,t,e){return(rP.modes[e.mode]||rP.modes.nearest)(n,t,e)}function aK(n,t,e){return e!=="x"&&e!=="y"?n.inRange(t.x,t.y,"x",!0)||n.inRange(t.x,t.y,"y",!0):n.inRange(t.x,t.y,e,!0)}function lK(n,t,e){return e==="x"?{x:n.x,y:t.y}:e==="y"?{x:t.x,y:n.y}:t}function Ug(n,t,e){return n.filter(i=>e.intersect?i.inRange(t.x,t.y):aK(i,t,e.axis))}function cK(n,t,e){let i=Number.POSITIVE_INFINITY;return Ug(n,t,e).reduce((r,s)=>{let o=s.getCenterPoint(),a=lK(t,o,e.axis),l=ts(t,a);return l<i?(r=[s],i=l):l===i&&r.push(s),r},[]).sort((r,s)=>r._index-s._index).slice(0,1)}function ua(n,t,e){let i=Math.cos(e),r=Math.sin(e),s=t.x,o=t.y;return{x:s+i*(n.x-s)-r*(n.y-o),y:o+r*(n.x-s)+i*(n.y-o)}}var uK=(n,t)=>t>n||n.length>t.length&&n.slice(0,t.length)===t,oa=.001,Yg=(n,t,e)=>Math.min(e,Math.max(t,n)),CP=(n,t)=>n.value>=n.start-t&&n.value<=n.end+t;function dK(n,t,e){for(let i of Object.keys(n))n[i]=Yg(n[i],t,e);return n}function hK(n,t,e,i){return!n||!t||e<=0?!1:Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)<=Math.pow(e+i,2)}function xP(n,{x:t,y:e,x2:i,y2:r},s,{borderWidth:o,hitTolerance:a}){let l=(o+a)/2,c=n.x>=t-l-oa&&n.x<=i+l+oa,u=n.y>=e-l-oa&&n.y<=r+l+oa;return s==="x"?c:(s==="y"||c)&&u}function DP(n,{rect:t,center:e},i,{rotation:r,borderWidth:s,hitTolerance:o}){let a=ua(n,e,jt(-r));return xP(a,t,i,{borderWidth:s,hitTolerance:o})}function da(n,t){let{centerX:e,centerY:i}=n.getProps(["centerX","centerY"],t);return{x:e,y:i}}function pK(n,t,e,i=!0){let r=e.split("."),s=0;for(let o of t.split(".")){let a=r[s++];if(parseInt(o,10)<parseInt(a,10))break;if(uK(a,o)){if(i)throw new Error(`${n} v${e} is not supported. v${t} or newer is required.`);return!1}}return!0}var EP=n=>typeof n=="string"&&n.endsWith("%"),MP=n=>parseFloat(n)/100,TP=n=>Yg(MP(n),0,1),Ud=(n,t)=>({x:n,y:t,x2:n,y2:t,width:0,height:0}),fK={box:n=>Ud(n.centerX,n.centerY),doughnutLabel:n=>Ud(n.centerX,n.centerY),ellipse:n=>({centerX:n.centerX,centerY:n.centerX,radius:0,width:0,height:0}),label:n=>Ud(n.centerX,n.centerY),line:n=>Ud(n.x,n.y),point:n=>({centerX:n.centerX,centerY:n.centerY,radius:0,width:0,height:0}),polygon:n=>Ud(n.centerX,n.centerY)};function bw(n,t){return t==="start"?0:t==="end"?n:EP(t)?TP(t)*n:n/2}function Zs(n,t,e=!0){return typeof t=="number"?t:EP(t)?(e?TP(t):MP(t))*n:n}function gK(n,t){let{x:e,width:i}=n,r=t.textAlign;return r==="center"?e+i/2:r==="end"||r==="right"?e+i:e}function IP(n,t,{borderWidth:e,position:i,xAdjust:r,yAdjust:s},o){let a=Je(o),l=t.width+(a?o.width:0)+e,c=t.height+(a?o.height:0)+e,u=Sw(i),d=sP(n.x,l,r,u.x),h=sP(n.y,c,s,u.y);return{x:d,y:h,x2:d+l,y2:h+c,width:l,height:c,centerX:d+l/2,centerY:h+c/2}}function Sw(n,t="center"){return Je(n)?{x:Le(n.x,t),y:Le(n.y,t)}:(n=Le(n,t),{x:n,y:n})}var kP=(n,t)=>n&&n.autoFit&&t<1;function NP(n,t){let e=n.font,i=pt(e)?e:[e];return kP(n,t)?i.map(function(r){let s=Ot(r);return s.size=Math.floor(r.size*t),s.lineHeight=r.lineHeight,Ot(s)}):i.map(r=>Ot(r))}function PP(n){return n&&(wn(n.xValue)||wn(n.yValue))}function sP(n,t,e=0,i){return n-bw(t,i)+e}function pc(n,t,e){let i=e.init;if(i){if(i===!0)return RP(t,e)}else return;return mK(n,t,e)}function OP(n,t,e){let i=!1;return t.forEach(r=>{vn(n[r])?(i=!0,e[r]=n[r]):wn(e[r])&&delete e[r]}),i}function RP(n,t){let e=t.type||"line";return fK[e](n)}function mK(n,t,e){let i=ft(e.init,[{chart:n,properties:t,options:e}]);if(i===!0)return RP(t,e);if(Je(i))return i}var pw=new Map,_K=n=>isNaN(n)||n<=0,AK=n=>n.reduce(function(t,e){return t+=e.string,t},"");function Gg(n){if(n&&typeof n=="object"){let t=n.toString();return t==="[object HTMLImageElement]"||t==="[object HTMLCanvasElement]"}}function Kg(n,{x:t,y:e},i){i&&(n.translate(t,e),n.rotate(jt(i)),n.translate(-t,-e))}function us(n,t){if(t&&t.borderWidth)return n.lineCap=t.borderCapStyle||"butt",n.setLineDash(t.borderDash),n.lineDashOffset=t.borderDashOffset,n.lineJoin=t.borderJoinStyle||"miter",n.lineWidth=t.borderWidth,n.strokeStyle=t.borderColor,!0}function fc(n,t){n.shadowColor=t.backgroundShadowColor,n.shadowBlur=t.shadowBlur,n.shadowOffsetX=t.shadowOffsetX,n.shadowOffsetY=t.shadowOffsetY}function Jg(n,t){let e=t.content;if(Gg(e))return{width:Zs(e.width,t.width),height:Zs(e.height,t.height)};let i=NP(t),r=t.textStrokeWidth,s=pt(e)?e:[e],o=s.join()+AK(i)+r+(n._measureText?"-spriting":"");return pw.has(o)||pw.set(o,bK(n,s,i,r)),pw.get(o)}function FP(n,t,e){let{x:i,y:r,width:s,height:o}=t;n.save(),fc(n,e);let a=us(n,e);n.fillStyle=e.backgroundColor,n.beginPath(),rs(n,{x:i,y:r,w:s,h:o,radius:dK(Ji(e.borderRadius),0,Math.min(s,o)/2)}),n.closePath(),n.fill(),a&&(n.shadowColor=e.borderShadowColor,n.stroke()),n.restore()}function LP(n,t,e,i){let r=e.content;if(Gg(r)){n.save(),n.globalAlpha=xK(e.opacity,r.style.opacity),n.drawImage(r,t.x,t.y,t.width,t.height),n.restore();return}let s=pt(r)?r:[r],o=NP(e,i),a=e.color,l=pt(a)?a:[a],c=gK(t,e),u=t.y+e.textStrokeWidth/2;n.save(),n.textBaseline="middle",n.textAlign=e.textAlign,yK(n,e)&&SK(n,{x:c,y:u},s,o),CK(n,{x:c,y:u},s,{fonts:o,colors:l}),n.restore()}function yK(n,t){if(t.textStrokeWidth>0)return n.lineJoin="round",n.miterLimit=2,n.lineWidth=t.textStrokeWidth,n.strokeStyle=t.textStrokeColor,!0}function vK(n,t,e,i){let{radius:r,options:s}=t,o=s.pointStyle,a=s.rotation,l=(a||0)*ad;if(Gg(o)){n.save(),n.translate(e,i),n.rotate(l),n.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),n.restore();return}_K(r)||wK(n,{x:e,y:i,radius:r,rotation:a,style:o,rad:l})}function wK(n,{x:t,y:e,radius:i,rotation:r,style:s,rad:o}){let a,l,c,u;switch(n.beginPath(),s){default:n.arc(t,e,i,0,yt),n.closePath();break;case"triangle":n.moveTo(t+Math.sin(o)*i,e-Math.cos(o)*i),o+=Bl,n.lineTo(t+Math.sin(o)*i,e-Math.cos(o)*i),o+=Bl,n.lineTo(t+Math.sin(o)*i,e-Math.cos(o)*i),n.closePath();break;case"rectRounded":u=i*.516,c=i-u,a=Math.cos(o+Zn)*c,l=Math.sin(o+Zn)*c,n.arc(t-a,e-l,u,o-Ye,o-xt),n.arc(t+l,e-a,u,o-xt,o),n.arc(t+a,e+l,u,o,o+xt),n.arc(t-l,e+a,u,o+xt,o+Ye),n.closePath();break;case"rect":if(!r){c=Math.SQRT1_2*i,n.rect(t-c,e-c,2*c,2*c);break}o+=Zn;case"rectRot":a=Math.cos(o)*i,l=Math.sin(o)*i,n.moveTo(t-a,e-l),n.lineTo(t+l,e-a),n.lineTo(t+a,e+l),n.lineTo(t-l,e+a),n.closePath();break;case"crossRot":o+=Zn;case"cross":a=Math.cos(o)*i,l=Math.sin(o)*i,n.moveTo(t-a,e-l),n.lineTo(t+a,e+l),n.moveTo(t+l,e-a),n.lineTo(t-l,e+a);break;case"star":a=Math.cos(o)*i,l=Math.sin(o)*i,n.moveTo(t-a,e-l),n.lineTo(t+a,e+l),n.moveTo(t+l,e-a),n.lineTo(t-l,e+a),o+=Zn,a=Math.cos(o)*i,l=Math.sin(o)*i,n.moveTo(t-a,e-l),n.lineTo(t+a,e+l),n.moveTo(t+l,e-a),n.lineTo(t-l,e+a);break;case"line":a=Math.cos(o)*i,l=Math.sin(o)*i,n.moveTo(t-a,e-l),n.lineTo(t+a,e+l);break;case"dash":n.moveTo(t,e),n.lineTo(t+Math.cos(o)*i,e+Math.sin(o)*i);break}n.fill()}function bK(n,t,e,i){n.save();let r=t.length,s=0,o=i;for(let a=0;a<r;a++){let l=e[Math.min(a,e.length-1)];n.font=l.string;let c=t[a];s=Math.max(s,n.measureText(c).width+i),o+=l.lineHeight}return n.restore(),{width:s,height:o}}function SK(n,{x:t,y:e},i,r){n.beginPath();let s=0;i.forEach(function(o,a){let l=r[Math.min(a,r.length-1)],c=l.lineHeight;n.font=l.string,n.strokeText(o,t,e+c/2+s),s+=c}),n.stroke()}function CK(n,{x:t,y:e},i,{fonts:r,colors:s}){let o=0;i.forEach(function(a,l){let c=s[Math.min(l,s.length-1)],u=r[Math.min(l,r.length-1)],d=u.lineHeight;n.beginPath(),n.font=u.string,n.fillStyle=c,n.fillText(a,t,e+d/2+o),o+=d,n.fill()})}function xK(n,t){let e=Gi(n)?n:t;return Gi(e)?Yg(e,0,1):1}var VP=["left","bottom","top","right"];function DK(n,t){let{pointX:e,pointY:i,options:r}=t,s=r.callout,o=s&&s.display&&kK(t,s);if(!o||PK(t,s,o))return;if(n.save(),n.beginPath(),!us(n,s))return n.restore();let{separatorStart:l,separatorEnd:c}=EK(t,o),{sideStart:u,sideEnd:d}=TK(t,o,l);(s.margin>0||r.borderWidth===0)&&(n.moveTo(l.x,l.y),n.lineTo(c.x,c.y)),n.moveTo(u.x,u.y),n.lineTo(d.x,d.y);let h=ua({x:e,y:i},t.getCenterPoint(),jt(-t.rotation));n.lineTo(h.x,h.y),n.stroke(),n.restore()}function EK(n,t){let{x:e,y:i,x2:r,y2:s}=n,o=MK(n,t),a,l;return t==="left"||t==="right"?(a={x:e+o,y:i},l={x:a.x,y:s}):(a={x:e,y:i+o},l={x:r,y:a.y}),{separatorStart:a,separatorEnd:l}}function MK(n,t){let{width:e,height:i,options:r}=n,s=r.callout.margin+r.borderWidth/2;return t==="right"?e+s:t==="bottom"?i+s:-s}function TK(n,t,e){let{y:i,width:r,height:s,options:o}=n,a=o.callout.start,l=IK(t,o.callout),c,u;return t==="left"||t==="right"?(c={x:e.x,y:i+Zs(s,a)},u={x:c.x+l,y:c.y}):(c={x:e.x+Zs(r,a),y:e.y},u={x:c.x,y:c.y+l}),{sideStart:c,sideEnd:u}}function IK(n,t){let e=t.side;return n==="left"||n==="top"?-e:e}function kK(n,t){let e=t.position;return VP.includes(e)?e:NK(n,t)}function NK(n,t){let{x:e,y:i,x2:r,y2:s,width:o,height:a,pointX:l,pointY:c,centerX:u,centerY:d,rotation:h}=n,p={x:u,y:d},_=t.start,A=Zs(o,_),v=Zs(a,_),b=[e,e+A,e+A,r],x=[i+v,s,i,s],N=[];for(let T=0;T<4;T++){let k=ua({x:b[T],y:x[T]},p,jt(h));N.push({position:VP[T],distance:ts(k,{x:l,y:c})})}return N.sort((T,k)=>T.distance-k.distance)[0].position}function PK(n,t,e){let{pointX:i,pointY:r}=n,s=t.margin,o=i,a=r;return e==="left"?o+=s:e==="right"?o-=s:e==="top"?a+=s:e==="bottom"&&(a-=s),n.inRange(o,a)}var oP={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function cc(n,t,e){return t=typeof t=="number"?t:n.parse(t),Et(t)?n.getPixelForValue(t):e}function aa(n,t,e){let i=t[e];if(i||e==="scaleID")return i;let r=e.charAt(0),s=Object.values(n).filter(o=>o.axis&&o.axis===r);return s.length?s[0].id:r}function BP(n,t){if(n){let e=n.options.reverse,i=cc(n,t.min,e?t.end:t.start),r=cc(n,t.max,e?t.start:t.end);return{start:i,end:r}}}function qP(n,t){let{chartArea:e,scales:i}=n,r=i[aa(i,t,"xScaleID")],s=i[aa(i,t,"yScaleID")],o=e.width/2,a=e.height/2;return r&&(o=cc(r,t.xValue,r.left+r.width/2)),s&&(a=cc(s,t.yValue,s.top+s.height/2)),{x:o,y:a}}function Cw(n,t){let e=n.scales,i=e[aa(e,t,"xScaleID")],r=e[aa(e,t,"yScaleID")];if(!i&&!r)return{};let{left:s,right:o}=i||n.chartArea,{top:a,bottom:l}=r||n.chartArea,c=aP(i,{min:t.xMin,max:t.xMax,start:s,end:o});s=c.start,o=c.end;let u=aP(r,{min:t.yMin,max:t.yMax,start:l,end:a});return a=u.start,l=u.end,{x:s,y:a,x2:o,y2:l,width:o-s,height:l-a,centerX:s+(o-s)/2,centerY:a+(l-a)/2}}function jP(n,t){if(!PP(t)){let e=Cw(n,t),i=t.radius;(!i||isNaN(i))&&(i=Math.min(e.width,e.height)/2,t.radius=i);let r=i*2,s=e.centerX+t.xAdjust,o=e.centerY+t.yAdjust;return{x:s-i,y:o-i,x2:s+i,y2:o+i,centerX:s,centerY:o,width:r,height:r,radius:i}}return RK(n,t)}function OK(n,t){let{scales:e,chartArea:i}=n,r=e[t.scaleID],s={x:i.left,y:i.top,x2:i.right,y2:i.bottom};return r?FK(r,s,t):LK(e,s,t),s}function WP(n,t){let e=Cw(n,t);return e.initProperties=pc(n,e,t),e.elements=[{type:"label",optionScope:"label",properties:qK(n,e,t),initProperties:e.initProperties}],e}function RK(n,t){let e=qP(n,t),i=t.radius*2;return{x:e.x-t.radius+t.xAdjust,y:e.y-t.radius+t.yAdjust,x2:e.x+t.radius+t.xAdjust,y2:e.y+t.radius+t.yAdjust,centerX:e.x+t.xAdjust,centerY:e.y+t.yAdjust,radius:t.radius,width:i,height:i}}function aP(n,t){let e=BP(n,t)||t;return{start:Math.min(e.start,e.end),end:Math.max(e.start,e.end)}}function FK(n,t,e){let i=cc(n,e.value,NaN),r=cc(n,e.endValue,i);n.isHorizontal()?(t.x=i,t.x2=r):(t.y=i,t.y2=r)}function LK(n,t,e){for(let i of Object.keys(oP)){let r=n[aa(n,e,i)];if(r){let{min:s,max:o,start:a,end:l,startProp:c,endProp:u}=oP[i],d=BP(r,{min:e[s],max:e[o],start:r[a],end:r[l]});t[c]=d.start,t[u]=d.end}}}function VK({properties:n,options:t},e,i,r){let{x:s,x2:o,width:a}=n;return zP({start:s,end:o,size:a,borderWidth:t.borderWidth},{position:i.x,padding:{start:r.left,end:r.right},adjust:t.label.xAdjust,size:e.width})}function BK({properties:n,options:t},e,i,r){let{y:s,y2:o,height:a}=n;return zP({start:s,end:o,size:a,borderWidth:t.borderWidth},{position:i.y,padding:{start:r.top,end:r.bottom},adjust:t.label.yAdjust,size:e.height})}function zP(n,t){let{start:e,end:i,borderWidth:r}=n,{position:s,padding:{start:o,end:a},adjust:l}=t,c=i-r-e-o-a-t.size;return e+r/2+l+bw(c,s)}function qK(n,t,e){let i=e.label;i.backgroundColor="transparent",i.callout.display=!1;let r=Sw(i.position),s=Wt(i.padding),o=Jg(n.ctx,i),a=VK({properties:t,options:e},o,r,s),l=BK({properties:t,options:e},o,r,s),c=o.width+s.width,u=o.height+s.height;return{x:a,y:l,x2:a+c,y2:l+u,width:c,height:u,centerX:a+c/2,centerY:l+u/2,rotation:i.rotation}}var fw=["enter","leave"],xw=fw.concat("click");function jK(n,t,e){t.listened=OP(e,xw,t.listeners),t.moveListened=!1,fw.forEach(i=>{vn(e[i])&&(t.moveListened=!0)}),(!t.listened||!t.moveListened)&&t.annotations.forEach(i=>{!t.listened&&vn(i.click)&&(t.listened=!0),t.moveListened||fw.forEach(r=>{vn(i[r])&&(t.listened=!0,t.moveListened=!0)})})}function WK(n,t,e){if(n.listened)switch(t.type){case"mousemove":case"mouseout":return zK(n,t,e);case"click":return UK(n,t,e)}}function zK(n,t,e){if(!n.moveListened)return;let i;t.type==="mousemove"?i=ww(n.visibleElements,t,e.interaction):i=[];let r=n.hovered;n.hovered=i;let s={state:n,event:t},o=lP(s,"leave",r,i);return lP(s,"enter",i,r)||o}function lP({state:n,event:t},e,i,r){let s;for(let o of i)r.indexOf(o)<0&&(s=UP(o.options[e]||n.listeners[e],o,t)||s);return s}function UK(n,t,e){let i=n.listeners,r=ww(n.visibleElements,t,e.interaction),s;for(let o of r)s=UP(o.options.click||i.click,o,t)||s;return s}function UP(n,t,e){return ft(n,[t.$context,e])===!0}var Hg=["afterDraw","beforeDraw"];function HK(n,t,e){let i=t.visibleElements;t.hooked=OP(e,Hg,t.hooks),t.hooked||i.forEach(r=>{t.hooked||Hg.forEach(s=>{vn(r.options[s])&&(t.hooked=!0)})})}function cP(n,t,e){if(n.hooked){let i=t.options[e]||n.hooks[e];return ft(i,[t.$context])}}function YK(n,t,e){let i=$K(n.scales,t,e),r=uP(t,i,"min","suggestedMin");r=uP(t,i,"max","suggestedMax")||r,r&&vn(t.handleTickRangeOptions)&&t.handleTickRangeOptions()}function GK(n,t){for(let e of n)JK(e,t)}function uP(n,t,e,i){if(Et(t[e])&&!KK(n.options,e,i)){let r=n[e]!==t[e];return n[e]=t[e],r}}function KK(n,t,e){return wn(n[t])||wn(n[e])}function JK(n,t){for(let e of["scaleID","xScaleID","yScaleID"]){let i=aa(t,n,e);i&&!t[i]&&XK(n,e)&&console.warn(`No scale found with id '${i}' for annotation '${n.id}'`)}}function XK(n,t){if(t==="scaleID")return!0;let e=t.charAt(0);for(let i of["Min","Max","Value"])if(wn(n[e+i]))return!0;return!1}function $K(n,t,e){let i=t.axis,r=t.id,s=i+"ScaleID",o={min:Le(t.min,Number.NEGATIVE_INFINITY),max:Le(t.max,Number.POSITIVE_INFINITY)};for(let a of e)a.scaleID===r?dP(a,t,["value","endValue"],o):aa(n,a,s)===r&&dP(a,t,[i+"Min",i+"Max",i+"Value"],o);return o}function dP(n,t,e,i){for(let r of e){let s=n[r];if(wn(s)){let o=t.parse(s);i.min=Math.min(i.min,o),i.max=Math.max(i.max,o)}}}var eo=class extends on{inRange(t,e,i,r){let{x:s,y:o}=ua({x:t,y:e},this.getCenterPoint(r),jt(-this.options.rotation));return xP({x:s,y:o},this.getProps(["x","y","x2","y2"],r),i,this.options)}getCenterPoint(t){return da(this,t)}draw(t){t.save(),Kg(t,this.getCenterPoint(),this.options.rotation),FP(t,this,this.options),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,e){return WP(t,e)}};eo.id="boxAnnotation";eo.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};eo.defaultRoutes={borderColor:"color",backgroundColor:"color"};eo.descriptors={label:{_fallback:!0}};var uc=class extends on{inRange(t,e,i,r){return DP({x:t,y:e},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},i,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(t){return da(this,t)}draw(t){let e=this.options;!e.display||!e.content||(iJ(t,this),t.save(),Kg(t,this.getCenterPoint(),this.rotation),LP(t,this,e,this._fitRatio),t.restore())}resolveElementProperties(t,e){let i=QK(t,e);if(!i)return{};let{controllerMeta:r,point:s,radius:o}=eJ(t,e,i),a=Jg(t.ctx,e),l=tJ(a,o);kP(e,l)&&(a={width:a.width*l,height:a.height*l});let{position:c,xAdjust:u,yAdjust:d}=e,h=IP(s,a,{borderWidth:0,position:c,xAdjust:u,yAdjust:d});return Ie(ne(ne({initProperties:pc(t,h,e)},h),r),{rotation:e.rotation,_fitRatio:l})}};uc.id="doughnutLabelAnnotation";uc.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};uc.defaultRoutes={};function QK(n,t){return n.getSortedVisibleDatasetMetas().reduce(function(e,i){let r=i.controller;return r instanceof Dd&&ZK(n,t,i.data)&&(!e||r.innerRadius<e.controller.innerRadius)&&r.options.circumference>=90?i:e},void 0)}function ZK(n,t,e){if(!t.autoHide)return!0;for(let i=0;i<e.length;i++)if(!e[i].hidden&&n.getDataVisibility(i))return!0}function eJ({chartArea:n},t,e){let{left:i,top:r,right:s,bottom:o}=n,{innerRadius:a,offsetX:l,offsetY:c}=e.controller,u=(i+s)/2+l,d=(r+o)/2+c,h={left:Math.max(u-a,i),right:Math.min(u+a,s),top:Math.max(d-a,r),bottom:Math.min(d+a,o)},p={x:(h.left+h.right)/2,y:(h.top+h.bottom)/2},_=t.spacing+t.borderWidth/2,A=a-_,v=p.y>d,b=v?r+_:o-_,x=nJ(b,u,d,A);return{controllerMeta:ne({_centerX:u,_centerY:d,_radius:A,_counterclockwise:v},x),point:p,radius:Math.min(a,Math.min(h.right-h.left,h.bottom-h.top)/2)}}function tJ({width:n,height:t},e){let i=Math.sqrt(Math.pow(n,2)+Math.pow(t,2));return e*2/i}function nJ(n,t,e,i){let r=Math.pow(e-n,2),s=Math.pow(i,2),o=t*-2,a=Math.pow(t,2)+r-s,l=Math.pow(o,2)-4*a;if(l<=0)return{_startAngle:0,_endAngle:yt};let c=(-o-Math.sqrt(l))/2,u=(-o+Math.sqrt(l))/2;return{_startAngle:Xo({x:t,y:e},{x:c,y:n}).angle,_endAngle:Xo({x:t,y:e},{x:u,y:n}).angle}}function iJ(n,t){let{_centerX:e,_centerY:i,_radius:r,_startAngle:s,_endAngle:o,_counterclockwise:a,options:l}=t;n.save();let c=us(n,l);n.fillStyle=l.backgroundColor,n.beginPath(),n.arc(e,i,r,s,o,a),n.closePath(),n.fill(),c&&n.stroke(),n.restore()}var la=class extends on{inRange(t,e,i,r){return DP({x:t,y:e},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},i,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(t){return da(this,t)}draw(t){let e=this.options,i=!wn(this._visible)||this._visible;!e.display||!e.content||!i||(t.save(),Kg(t,this.getCenterPoint(),this.rotation),DK(t,this),FP(t,this,e),LP(t,rJ(this),e),t.restore())}resolveElementProperties(t,e){let i;if(PP(e))i=qP(t,e);else{let{centerX:a,centerY:l}=Cw(t,e);i={x:a,y:l}}let r=Wt(e.padding),s=Jg(t.ctx,e),o=IP(i,s,e,r);return Ie(ne({initProperties:pc(t,o,e),pointX:i.x,pointY:i.y},o),{rotation:e.rotation})}};la.id="labelAnnotation";la.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};la.defaultRoutes={borderColor:"color"};function rJ({x:n,y:t,width:e,height:i,options:r}){let s=r.borderWidth/2,o=Wt(r.padding);return{x:n+o.left+s,y:t+o.top+s,width:e-o.left-o.right-r.borderWidth,height:i-o.top-o.bottom-r.borderWidth}}var Dw=(n,t,e)=>({x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}),gw=(n,t,e)=>Dw(t,e,Math.abs((n-t.y)/(e.y-t.y))).x,hP=(n,t,e)=>Dw(t,e,Math.abs((n-t.x)/(e.x-t.x))).y,Yd=n=>n*n,sJ=(n,t,{x:e,y:i,x2:r,y2:s},o)=>o==="y"?{start:Math.min(i,s),end:Math.max(i,s),value:t}:{start:Math.min(e,r),end:Math.max(e,r),value:n},pP=(n,t,e,i)=>(1-i)*(1-i)*n+2*(1-i)*i*t+i*i*e,mw=(n,t,e,i)=>({x:pP(n.x,t.x,e.x,i),y:pP(n.y,t.y,e.y,i)}),fP=(n,t,e,i)=>2*(1-i)*(t-n)+2*i*(e-t),gP=(n,t,e,i)=>-Math.atan2(fP(n.x,t.x,e.x,i),fP(n.y,t.y,e.y,i))+.5*Ye,Xg=(()=>{class n extends on{inRange(e,i,r,s){let o=(this.options.borderWidth+this.options.hitTolerance)/2;if(r!=="x"&&r!=="y"){let a={mouseX:e,mouseY:i},{path:l,ctx:c}=this;if(l){us(c,this.options),c.lineWidth+=this.options.hitTolerance;let{chart:d}=this.$context,h=e*d.currentDevicePixelRatio,p=i*d.currentDevicePixelRatio,_=c.isPointInStroke(l,h,p)||_w(this,a,s);return c.restore(),_}let u=Yd(o);return cJ(this,a,u,s)||_w(this,a,s)}return oJ(this,{mouseX:e,mouseY:i},r,{hitSize:o,useFinalPosition:s})}getCenterPoint(e){return da(this,e)}draw(e){let{x:i,y:r,x2:s,y2:o,cp:a,options:l}=this;if(e.save(),!us(e,l))return e.restore();fc(e,l);let c=Math.sqrt(Math.pow(s-i,2)+Math.pow(o-r,2));if(l.curve&&a)return _J(e,this,a,c),e.restore();let{startOpts:u,endOpts:d,startAdjust:h,endAdjust:p}=HP(this),_=Math.atan2(o-r,s-i);e.translate(i,r),e.rotate(_),e.beginPath(),e.moveTo(0+h,0),e.lineTo(c-p,0),e.shadowColor=l.borderShadowColor,e.stroke(),Aw(e,0,h,u),Aw(e,c,-p,d),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,i){let r=OK(e,i),{x:s,y:o,x2:a,y2:l}=r,c=aJ(r,e.chartArea),u=c?lJ({x:s,y:o},{x:a,y:l},e.chartArea):{x:s,y:o,x2:a,y2:l,width:Math.abs(a-s),height:Math.abs(l-o)};if(u.centerX=(a+s)/2,u.centerY=(l+o)/2,u.initProperties=pc(e,u,i),i.curve){let h={x:u.x,y:u.y},p={x:u.x2,y:u.y2};u.cp=mJ(u,i,ts(h,p))}let d=uJ(e,u,i.label);return d._visible=c,u.elements=[{type:"label",optionScope:"label",properties:d,initProperties:u.initProperties}],u}}return n.id="lineAnnotation",n})(),mP={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};Xg.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},mP),fill:!1,length:12,start:Object.assign({},mP),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},la.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Xg.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};Xg.defaultRoutes={borderColor:"color"};function oJ(n,{mouseX:t,mouseY:e},i,{hitSize:r,useFinalPosition:s}){let o=sJ(t,e,n.getProps(["x","y","x2","y2"],s),i);return CP(o,r)||_w(n,{mouseX:t,mouseY:e},s,i)}function aJ({x:n,y:t,x2:e,y2:i},{top:r,right:s,bottom:o,left:a}){return!(n<a&&e<a||n>s&&e>s||t<r&&i<r||t>o&&i>o)}function _P({x:n,y:t},e,{top:i,right:r,bottom:s,left:o}){return n<o&&(t=hP(o,{x:n,y:t},e),n=o),n>r&&(t=hP(r,{x:n,y:t},e),n=r),t<i&&(n=gw(i,{x:n,y:t},e),t=i),t>s&&(n=gw(s,{x:n,y:t},e),t=s),{x:n,y:t}}function lJ(n,t,e){let{x:i,y:r}=_P(n,t,e),{x:s,y:o}=_P(t,n,e);return{x:i,y:r,x2:s,y2:o,width:Math.abs(s-i),height:Math.abs(o-r)}}function cJ(n,{mouseX:t,mouseY:e},i=oa,r){let{x:s,y:o,x2:a,y2:l}=n.getProps(["x","y","x2","y2"],r),c=a-s,u=l-o,d=Yd(c)+Yd(u),h=d===0?-1:((t-s)*c+(e-o)*u)/d,p,_;return h<0?(p=s,_=o):h>1?(p=a,_=l):(p=s+h*c,_=o+h*u),Yd(t-p)+Yd(e-_)<=i}function _w(n,{mouseX:t,mouseY:e},i,r){let s=n.label;return s.options.display&&s.inRange(t,e,r,i)}function uJ(n,t,e){let i=e.borderWidth,r=Wt(e.padding),s=Jg(n.ctx,e),o=s.width+r.width+i,a=s.height+r.height+i;return hJ(t,e,{width:o,height:a,padding:r},n.chartArea)}function dJ(n){let{x:t,y:e,x2:i,y2:r}=n,s=Math.atan2(r-e,i-t);return s>Ye/2?s-Ye:s<Ye/-2?s+Ye:s}function hJ(n,t,e,i){let{width:r,height:s,padding:o}=e,{xAdjust:a,yAdjust:l}=t,c={x:n.x,y:n.y},u={x:n.x2,y:n.y2},d=t.rotation==="auto"?dJ(n):jt(t.rotation),h=pJ(r,s,d),p=fJ(n,t,{labelSize:h,padding:o},i),_=n.cp?mw(c,n.cp,u,p):Dw(c,u,p),A={size:h.w,min:i.left,max:i.right,padding:o.left},v={size:h.h,min:i.top,max:i.bottom,padding:o.top},b=yP(_.x,A)+a,x=yP(_.y,v)+l;return{x:b-r/2,y:x-s/2,x2:b+r/2,y2:x+s/2,centerX:b,centerY:x,pointX:_.x,pointY:_.y,width:r,height:s,rotation:Jo(d)}}function pJ(n,t,e){let i=Math.cos(e),r=Math.sin(e);return{w:Math.abs(n*i)+Math.abs(t*r),h:Math.abs(n*r)+Math.abs(t*i)}}function fJ(n,t,e,i){let r,s=gJ(n,i);return t.position==="start"?r=AP({w:n.x2-n.x,h:n.y2-n.y},e,t,s):t.position==="end"?r=1-AP({w:n.x-n.x2,h:n.y-n.y2},e,t,s):r=bw(1,t.position),r}function AP(n,t,e,i){let{labelSize:r,padding:s}=t,o=n.w*i.dx,a=n.h*i.dy,l=o>0&&(r.w/2+s.left-i.x)/o,c=a>0&&(r.h/2+s.top-i.y)/a;return Yg(Math.max(l,c),0,.25)}function gJ(n,t){let{x:e,x2:i,y:r,y2:s}=n,o=Math.min(r,s)-t.top,a=Math.min(e,i)-t.left,l=t.bottom-Math.max(r,s),c=t.right-Math.max(e,i);return{x:Math.min(a,c),y:Math.min(o,l),dx:a<=c?1:-1,dy:o<=l?1:-1}}function yP(n,t){let{size:e,min:i,max:r,padding:s}=t,o=e/2;return e>r-i?(r+i)/2:(i>=n-s-o&&(n=i+s+o),r<=n+s+o&&(n=r-s-o),n)}function HP(n){let t=n.options,e=t.arrowHeads&&t.arrowHeads.start,i=t.arrowHeads&&t.arrowHeads.end;return{startOpts:e,endOpts:i,startAdjust:vP(n,e),endAdjust:vP(n,i)}}function vP(n,t){if(!t||!t.display)return 0;let{length:e,width:i}=t,r=n.options.borderWidth/2,s={x:e,y:i+r};return Math.abs(gw(0,s,{x:0,y:r}))}function Aw(n,t,e,i){if(!i||!i.display)return;let{length:r,width:s,fill:o,backgroundColor:a,borderColor:l}=i,c=Math.abs(t-r)+e;n.beginPath(),fc(n,i),us(n,i),n.moveTo(c,-s),n.lineTo(t+e,0),n.lineTo(c,s),o===!0?(n.fillStyle=a||l,n.closePath(),n.fill(),n.shadowColor="transparent"):n.shadowColor=i.borderShadowColor,n.stroke()}function mJ(n,t,e){let{x:i,y:r,x2:s,y2:o,centerX:a,centerY:l}=n,c=Math.atan2(o-r,s-i),u=Sw(t.controlPoint,0),d={x:a+Zs(e,u.x,!1),y:l+Zs(e,u.y,!1)};return ua(d,{x:a,y:l},c)}function wP(n,{x:t,y:e},{angle:i,adjust:r},s){!s||!s.display||(n.save(),n.translate(t,e),n.rotate(i),Aw(n,0,-r,s),n.restore())}function _J(n,t,e,i){let{x:r,y:s,x2:o,y2:a,options:l}=t,{startOpts:c,endOpts:u,startAdjust:d,endAdjust:h}=HP(t),p={x:r,y:s},_={x:o,y:a},A=gP(p,e,_,0),v=gP(p,e,_,1)-Ye,b=mw(p,e,_,d/i),x=mw(p,e,_,1-h/i),N=new Path2D;n.beginPath(),N.moveTo(b.x,b.y),N.quadraticCurveTo(e.x,e.y,x.x,x.y),n.shadowColor=l.borderShadowColor,n.stroke(N),t.path=N,t.ctx=n,wP(n,b,{angle:A,adjust:d},c),wP(n,x,{angle:v,adjust:h},u)}var ca=class extends on{inRange(t,e,i,r){let s=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(i!=="x"&&i!=="y")return AJ({x:t,y:e},this.getProps(["width","height","centerX","centerY"],r),s,o);let{x:a,y:l,x2:c,y2:u}=this.getProps(["x","y","x2","y2"],r),d=i==="y"?{start:l,end:u}:{start:a,end:c},h=ua({x:t,y:e},this.getCenterPoint(r),jt(-s));return h[i]>=d.start-o-oa&&h[i]<=d.end+o+oa}getCenterPoint(t){return da(this,t)}draw(t){let{width:e,height:i,centerX:r,centerY:s,options:o}=this;t.save(),Kg(t,this.getCenterPoint(),o.rotation),fc(t,this.options),t.beginPath(),t.fillStyle=o.backgroundColor;let a=us(t,o);t.ellipse(r,s,i/2,e/2,Ye/2,0,2*Ye),t.fill(),a&&(t.shadowColor=o.borderShadowColor,t.stroke()),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,e){return WP(t,e)}};ca.id="ellipseAnnotation";ca.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},eo.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};ca.defaultRoutes={borderColor:"color",backgroundColor:"color"};ca.descriptors={label:{_fallback:!0}};function AJ(n,t,e,i){let{width:r,height:s,centerX:o,centerY:a}=t,l=r/2,c=s/2;if(l<=0||c<=0)return!1;let u=jt(e||0),d=Math.cos(u),h=Math.sin(u),p=Math.pow(d*(n.x-o)+h*(n.y-a),2),_=Math.pow(h*(n.x-o)-d*(n.y-a),2);return p/Math.pow(l+i,2)+_/Math.pow(c+i,2)<=1.0001}var dc=class extends on{inRange(t,e,i,r){let{x:s,y:o,x2:a,y2:l,width:c}=this.getProps(["x","y","x2","y2","width"],r),u=(this.options.borderWidth+this.options.hitTolerance)/2;return i!=="x"&&i!=="y"?hK({x:t,y:e},this.getCenterPoint(r),c/2,u):CP(i==="y"?{start:o,end:l,value:e}:{start:s,end:a,value:t},u)}getCenterPoint(t){return da(this,t)}draw(t){let e=this.options,i=e.borderWidth;if(e.radius<.1)return;t.save(),t.fillStyle=e.backgroundColor,fc(t,e);let r=us(t,e);vK(t,this,this.centerX,this.centerY),r&&!Gg(e.pointStyle)&&(t.shadowColor=e.borderShadowColor,t.stroke()),t.restore(),e.borderWidth=i}resolveElementProperties(t,e){let i=jP(t,e);return i.initProperties=pc(t,i,e),i}};dc.id="pointAnnotation";dc.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};dc.defaultRoutes={borderColor:"color",backgroundColor:"color"};var hc=class extends on{inRange(t,e,i,r){if(i!=="x"&&i!=="y")return this.options.radius>=.1&&this.elements.length>1&&vJ(this.elements,t,e,r);let s=ua({x:t,y:e},this.getCenterPoint(r),jt(-this.options.rotation)),o=this.elements.map(c=>i==="y"?c.bY:c.bX),a=Math.min(...o),l=Math.max(...o);return s[i]>=a&&s[i]<=l}getCenterPoint(t){return da(this,t)}draw(t){let{elements:e,options:i}=this;t.save(),t.beginPath(),t.fillStyle=i.backgroundColor,fc(t,i);let r=us(t,i),s=!0;for(let o of e)s?(t.moveTo(o.x,o.y),s=!1):t.lineTo(o.x,o.y);t.closePath(),t.fill(),r&&(t.shadowColor=i.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,e){let i=jP(t,e),{sides:r,rotation:s}=e,o=[],a=2*Ye/r,l=s*ad;for(let c=0;c<r;c++,l+=a){let u=yJ(i,e,l);u.initProperties=pc(t,i,e),o.push(u)}return i.elements=o,i}};hc.id="polygonAnnotation";hc.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};hc.defaultRoutes={borderColor:"color",backgroundColor:"color"};function yJ({centerX:n,centerY:t},{radius:e,borderWidth:i,hitTolerance:r},s){let o=(i+r)/2,a=Math.sin(s),l=Math.cos(s),c={x:n+a*e,y:t-l*e};return{type:"point",optionScope:"point",properties:{x:c.x,y:c.y,centerX:c.x,centerY:c.y,bX:n+a*(e+o),bY:t-l*(e+o)}}}function vJ(n,t,e,i){let r=!1,s=n[n.length-1].getProps(["bX","bY"],i);for(let o of n){let a=o.getProps(["bX","bY"],i);a.bY>e!=s.bY>e&&t<(s.bX-a.bX)*(e-a.bY)/(s.bY-a.bY)+a.bX&&(r=!r),s=a}return r}var Qs={box:eo,doughnutLabel:uc,ellipse:ca,label:la,line:Xg,point:dc,polygon:hc};Object.keys(Qs).forEach(n=>{bt.describe(`elements.${Qs[n].id}`,{_fallback:"plugins.annotation.common"})});var wJ={update:Object.assign},bJ=xw.concat(Hg),bP=(n,t)=>Je(t)?vw(n,t):n,yw=n=>n==="color"||n==="font";function Ew(n="line"){return Qs[n]?n:(console.warn(`Unknown annotation type: '${n}', defaulting to 'line'`),"line")}function SJ(n,t,e,i){let r=xJ(n,e.animations,i),s=t.annotations,o=MJ(t.elements,s);for(let a=0;a<s.length;a++){let l=s[a],c=YP(o,a,l.type),u=l.setContext(EJ(n,c,o,l)),d=c.resolveElementProperties(n,u);d.skip=CJ(d),"elements"in d&&(DJ(c,d.elements,u,r),delete d.elements),wn(c.x)||Object.assign(c,d),Object.assign(c,d.initProperties),d.options=GP(u),r.update(c,d)}}function CJ(n){return isNaN(n.x)||isNaN(n.y)}function xJ(n,t,e){return e==="reset"||e==="none"||e==="resize"?wJ:new Hl(n,t)}function DJ(n,t,e,i){let r=n.elements||(n.elements=[]);r.length=t.length;for(let s=0;s<t.length;s++){let o=t[s],a=o.properties,l=YP(r,s,o.type,o.initProperties),c=e[o.optionScope].override(o);a.options=GP(c),i.update(l,a)}}function YP(n,t,e,i){let r=Qs[Ew(e)],s=n[t];return(!s||!(s instanceof r))&&(s=n[t]=new r,Object.assign(s,i)),s}function GP(n){let t=Qs[Ew(n.type)],e={};e.id=n.id,e.type=n.type,e.drawTime=n.drawTime,Object.assign(e,vw(n,t.defaults),vw(n,t.defaultRoutes));for(let i of bJ)e[i]=n[i];return e}function vw(n,t){let e={};for(let i of Object.keys(t)){let r=t[i],s=n[i];yw(i)&&pt(s)?e[i]=s.map(o=>bP(o,r)):e[i]=bP(s,r)}return e}function EJ(n,t,e,i){return t.$context||(t.$context=Object.assign(Object.create(n.getContext()),{element:t,get elements(){return e.filter(r=>r&&r.options)},id:i.id,type:"annotation"}))}function MJ(n,t){let e=t.length,i=n.length;if(i<e){let r=e-i;n.splice(i,0,...new Array(r))}else i>e&&n.splice(e,i-e);return n}var TJ="3.1.0",$s=new Map,SP=n=>n.type!=="doughnutLabel",IJ=xw.concat(Hg),KP={id:"annotation",version:TJ,beforeRegister(){pK("chart.js","4.0",Dr.version)},afterRegister(){Dr.register(Qs)},afterUnregister(){Dr.unregister(Qs)},beforeInit(n){$s.set(n,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(n,t,e){let i=$s.get(n),r=i.annotations=[],s=e.annotations;Je(s)?Object.keys(s).forEach(o=>{let a=s[o];Je(a)&&(a.id=o,r.push(a))}):pt(s)&&r.push(...s),GK(r.filter(SP),n.scales)},afterDataLimits(n,t){let e=$s.get(n);YK(n,t.scale,e.annotations.filter(SP).filter(i=>i.display&&i.adjustScaleRange))},afterUpdate(n,t,e){let i=$s.get(n);jK(n,i,e),SJ(n,i,e,t.mode),i.visibleElements=i.elements.filter(r=>!r.skip&&r.options.display),HK(n,i,e)},beforeDatasetsDraw(n,t,e){Hd(n,"beforeDatasetsDraw",e.clip)},afterDatasetsDraw(n,t,e){Hd(n,"afterDatasetsDraw",e.clip)},beforeDatasetDraw(n,t,e){Hd(n,t.index,e.clip)},beforeDraw(n,t,e){Hd(n,"beforeDraw",e.clip)},afterDraw(n,t,e){Hd(n,"afterDraw",e.clip)},beforeEvent(n,t,e){let i=$s.get(n);WK(i,t.event,e)&&(t.changed=!0)},afterDestroy(n){$s.delete(n)},getAnnotations(n){let t=$s.get(n);return t?t.elements:[]},_getAnnotationElementsAtEventForMode(n,t,e){return ww(n,t,e)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:n=>!IJ.includes(n)&&n!=="init",annotations:{_allKeys:!1,_fallback:(n,t)=>`elements.${Qs[Ew(t.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:yw,_fallback:!0},_indexable:yw}},additionalOptionScopes:[""]};function Hd(n,t,e){let{ctx:i,chartArea:r}=n,s=$s.get(n);e&&Vs(i,r);let o=kJ(s.visibleElements,t).sort((a,l)=>a.element.options.z-l.element.options.z);for(let a of o)NJ(i,r,s,a);e&&Bs(i)}function kJ(n,t){let e=[];for(let i of n)if(i.options.drawTime===t&&e.push({element:i,main:!0}),i.elements&&i.elements.length)for(let r of i.elements)r.options.display&&r.options.drawTime===t&&e.push({element:r});return e}function NJ(n,t,e,i){let r=i.element;i.main?(cP(e,r,"beforeDraw"),r.draw(n,t),cP(e,r,"afterDraw")):r.draw(n,t)}var tn="top",bn="bottom",pn="right",an="left",$g="auto",to=[tn,bn,pn,an],ds="start",ha="end",JP="clippingParents",Qg="viewport",gc="popper",XP="reference",Mw=to.reduce(function(n,t){return n.concat([t+"-"+ds,t+"-"+ha])},[]),Zg=[].concat(to,[$g]).reduce(function(n,t){return n.concat([t,t+"-"+ds,t+"-"+ha])},[]),PJ="beforeRead",OJ="read",RJ="afterRead",FJ="beforeMain",LJ="main",VJ="afterMain",BJ="beforeWrite",qJ="write",jJ="afterWrite",$P=[PJ,OJ,RJ,FJ,LJ,VJ,BJ,qJ,jJ];function fn(n){return n?(n.nodeName||"").toLowerCase():null}function Bt(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var t=n.ownerDocument;return t&&t.defaultView||window}return n}function Mi(n){var t=Bt(n).Element;return n instanceof t||n instanceof Element}function ln(n){var t=Bt(n).HTMLElement;return n instanceof t||n instanceof HTMLElement}function mc(n){if(typeof ShadowRoot>"u")return!1;var t=Bt(n).ShadowRoot;return n instanceof t||n instanceof ShadowRoot}function WJ(n){var t=n.state;Object.keys(t.elements).forEach(function(e){var i=t.styles[e]||{},r=t.attributes[e]||{},s=t.elements[e];!ln(s)||!fn(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function zJ(n){var t=n.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(i){var r=t.elements[i],s=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:e[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!ln(r)||!fn(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}var QP={name:"applyStyles",enabled:!0,phase:"write",fn:WJ,effect:zJ,requires:["computeStyles"]};function gn(n){return n.split("-")[0]}var Qi=Math.max,pa=Math.min,hs=Math.round;function _c(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Gd(){return!/^((?!chrome|android).)*safari/i.test(_c())}function Ti(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var i=n.getBoundingClientRect(),r=1,s=1;t&&ln(n)&&(r=n.offsetWidth>0&&hs(i.width)/n.offsetWidth||1,s=n.offsetHeight>0&&hs(i.height)/n.offsetHeight||1);var o=Mi(n)?Bt(n):window,a=o.visualViewport,l=!Gd()&&e,c=(i.left+(l&&a?a.offsetLeft:0))/r,u=(i.top+(l&&a?a.offsetTop:0))/s,d=i.width/r,h=i.height/s;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function fa(n){var t=Ti(n),e=n.offsetWidth,i=n.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:n.offsetLeft,y:n.offsetTop,width:e,height:i}}function Kd(n,t){var e=t.getRootNode&&t.getRootNode();if(n.contains(t))return!0;if(e&&mc(e)){var i=t;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function qn(n){return Bt(n).getComputedStyle(n)}function Tw(n){return["table","td","th"].indexOf(fn(n))>=0}function Sn(n){return((Mi(n)?n.ownerDocument:n.document)||window.document).documentElement}function ps(n){return fn(n)==="html"?n:n.assignedSlot||n.parentNode||(mc(n)?n.host:null)||Sn(n)}function ZP(n){return!ln(n)||qn(n).position==="fixed"?null:n.offsetParent}function UJ(n){var t=/firefox/i.test(_c()),e=/Trident/i.test(_c());if(e&&ln(n)){var i=qn(n);if(i.position==="fixed")return null}var r=ps(n);for(mc(r)&&(r=r.host);ln(r)&&["html","body"].indexOf(fn(r))<0;){var s=qn(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function Zi(n){for(var t=Bt(n),e=ZP(n);e&&Tw(e)&&qn(e).position==="static";)e=ZP(e);return e&&(fn(e)==="html"||fn(e)==="body"&&qn(e).position==="static")?t:e||UJ(n)||t}function ga(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function ma(n,t,e){return Qi(n,pa(t,e))}function eO(n,t,e){var i=ma(n,t,e);return i>e?e:i}function Jd(){return{top:0,right:0,bottom:0,left:0}}function Xd(n){return Object.assign({},Jd(),n)}function $d(n,t){return t.reduce(function(e,i){return e[i]=n,e},{})}var HJ=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,Xd(typeof t!="number"?t:$d(t,to))};function YJ(n){var t,e=n.state,i=n.name,r=n.options,s=e.elements.arrow,o=e.modifiersData.popperOffsets,a=gn(e.placement),l=ga(a),c=[an,pn].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var d=HJ(r.padding,e),h=fa(s),p=l==="y"?tn:an,_=l==="y"?bn:pn,A=e.rects.reference[u]+e.rects.reference[l]-o[l]-e.rects.popper[u],v=o[l]-e.rects.reference[l],b=Zi(s),x=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,N=A/2-v/2,T=d[p],k=x-h[u]-d[_],C=x/2-h[u]/2+N,M=ma(T,C,k),O=l;e.modifiersData[i]=(t={},t[O]=M,t.centerOffset=M-C,t)}}function GJ(n){var t=n.state,e=n.options,i=e.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||Kd(t.elements.popper,r)&&(t.elements.arrow=r))}var Iw={name:"arrow",enabled:!0,phase:"main",fn:YJ,effect:GJ,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ii(n){return n.split("-")[1]}var KJ={top:"auto",right:"auto",bottom:"auto",left:"auto"};function JJ(n,t){var e=n.x,i=n.y,r=t.devicePixelRatio||1;return{x:hs(e*r)/r||0,y:hs(i*r)/r||0}}function tO(n){var t,e=n.popper,i=n.popperRect,r=n.placement,s=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,c=n.adaptive,u=n.roundOffsets,d=n.isFixed,h=o.x,p=h===void 0?0:h,_=o.y,A=_===void 0?0:_,v=typeof u=="function"?u({x:p,y:A}):{x:p,y:A};p=v.x,A=v.y;var b=o.hasOwnProperty("x"),x=o.hasOwnProperty("y"),N=an,T=tn,k=window;if(c){var C=Zi(e),M="clientHeight",O="clientWidth";if(C===Bt(e)&&(C=Sn(e),qn(C).position!=="static"&&a==="absolute"&&(M="scrollHeight",O="scrollWidth")),C=C,r===tn||(r===an||r===pn)&&s===ha){T=bn;var F=d&&C===k&&k.visualViewport?k.visualViewport.height:C[M];A-=F-i.height,A*=l?1:-1}if(r===an||(r===tn||r===bn)&&s===ha){N=pn;var j=d&&C===k&&k.visualViewport?k.visualViewport.width:C[O];p-=j-i.width,p*=l?1:-1}}var H=Object.assign({position:a},c&&KJ),Q=u===!0?JJ({x:p,y:A},Bt(e)):{x:p,y:A};if(p=Q.x,A=Q.y,l){var ie;return Object.assign({},H,(ie={},ie[T]=x?"0":"",ie[N]=b?"0":"",ie.transform=(k.devicePixelRatio||1)<=1?"translate("+p+"px, "+A+"px)":"translate3d("+p+"px, "+A+"px, 0)",ie))}return Object.assign({},H,(t={},t[T]=x?A+"px":"",t[N]=b?p+"px":"",t.transform="",t))}function XJ(n){var t=n.state,e=n.options,i=e.gpuAcceleration,r=i===void 0?!0:i,s=e.adaptive,o=s===void 0?!0:s,a=e.roundOffsets,l=a===void 0?!0:a,c={placement:gn(t.placement),variation:Ii(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,tO(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,tO(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var nO={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:XJ,data:{}};var em={passive:!0};function $J(n){var t=n.state,e=n.instance,i=n.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,a=o===void 0?!0:o,l=Bt(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",e.update,em)}),a&&l.addEventListener("resize",e.update,em),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",e.update,em)}),a&&l.removeEventListener("resize",e.update,em)}}var iO={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:$J,data:{}};var QJ={left:"right",right:"left",bottom:"top",top:"bottom"};function Ac(n){return n.replace(/left|right|bottom|top/g,function(t){return QJ[t]})}var ZJ={start:"end",end:"start"};function tm(n){return n.replace(/start|end/g,function(t){return ZJ[t]})}function _a(n){var t=Bt(n),e=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:e,scrollTop:i}}function Aa(n){return Ti(Sn(n)).left+_a(n).scrollLeft}function kw(n,t){var e=Bt(n),i=Sn(n),r=e.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var c=Gd();(c||!c&&t==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+Aa(n),y:l}}function Nw(n){var t,e=Sn(n),i=_a(n),r=(t=n.ownerDocument)==null?void 0:t.body,s=Qi(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Qi(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+Aa(n),l=-i.scrollTop;return qn(r||e).direction==="rtl"&&(a+=Qi(e.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function ya(n){var t=qn(n),e=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+r+i)}function nm(n){return["html","body","#document"].indexOf(fn(n))>=0?n.ownerDocument.body:ln(n)&&ya(n)?n:nm(ps(n))}function no(n,t){var e;t===void 0&&(t=[]);var i=nm(n),r=i===((e=n.ownerDocument)==null?void 0:e.body),s=Bt(i),o=r?[s].concat(s.visualViewport||[],ya(i)?i:[]):i,a=t.concat(o);return r?a:a.concat(no(ps(o)))}function yc(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function eX(n,t){var e=Ti(n,!1,t==="fixed");return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function rO(n,t,e){return t===Qg?yc(kw(n,e)):Mi(t)?eX(t,e):yc(Nw(Sn(n)))}function tX(n){var t=no(ps(n)),e=["absolute","fixed"].indexOf(qn(n).position)>=0,i=e&&ln(n)?Zi(n):n;return Mi(i)?t.filter(function(r){return Mi(r)&&Kd(r,i)&&fn(r)!=="body"}):[]}function Pw(n,t,e,i){var r=t==="clippingParents"?tX(n):[].concat(t),s=[].concat(r,[e]),o=s[0],a=s.reduce(function(l,c){var u=rO(n,c,i);return l.top=Qi(u.top,l.top),l.right=pa(u.right,l.right),l.bottom=pa(u.bottom,l.bottom),l.left=Qi(u.left,l.left),l},rO(n,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Qd(n){var t=n.reference,e=n.element,i=n.placement,r=i?gn(i):null,s=i?Ii(i):null,o=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,l;switch(r){case tn:l={x:o,y:t.y-e.height};break;case bn:l={x:o,y:t.y+t.height};break;case pn:l={x:t.x+t.width,y:a};break;case an:l={x:t.x-e.width,y:a};break;default:l={x:t.x,y:t.y}}var c=r?ga(r):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case ds:l[c]=l[c]-(t[u]/2-e[u]/2);break;case ha:l[c]=l[c]+(t[u]/2-e[u]/2);break;default:}}return l}function io(n,t){t===void 0&&(t={});var e=t,i=e.placement,r=i===void 0?n.placement:i,s=e.strategy,o=s===void 0?n.strategy:s,a=e.boundary,l=a===void 0?JP:a,c=e.rootBoundary,u=c===void 0?Qg:c,d=e.elementContext,h=d===void 0?gc:d,p=e.altBoundary,_=p===void 0?!1:p,A=e.padding,v=A===void 0?0:A,b=Xd(typeof v!="number"?v:$d(v,to)),x=h===gc?XP:gc,N=n.rects.popper,T=n.elements[_?x:h],k=Pw(Mi(T)?T:T.contextElement||Sn(n.elements.popper),l,u,o),C=Ti(n.elements.reference),M=Qd({reference:C,element:N,strategy:"absolute",placement:r}),O=yc(Object.assign({},N,M)),F=h===gc?O:C,j={top:k.top-F.top+b.top,bottom:F.bottom-k.bottom+b.bottom,left:k.left-F.left+b.left,right:F.right-k.right+b.right},H=n.modifiersData.offset;if(h===gc&&H){var Q=H[r];Object.keys(j).forEach(function(ie){var ue=[pn,bn].indexOf(ie)>=0?1:-1,G=[tn,bn].indexOf(ie)>=0?"y":"x";j[ie]+=Q[G]*ue})}return j}function Ow(n,t){t===void 0&&(t={});var e=t,i=e.placement,r=e.boundary,s=e.rootBoundary,o=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,c=l===void 0?Zg:l,u=Ii(i),d=u?a?Mw:Mw.filter(function(_){return Ii(_)===u}):to,h=d.filter(function(_){return c.indexOf(_)>=0});h.length===0&&(h=d);var p=h.reduce(function(_,A){return _[A]=io(n,{placement:A,boundary:r,rootBoundary:s,padding:o})[gn(A)],_},{});return Object.keys(p).sort(function(_,A){return p[_]-p[A]})}function nX(n){if(gn(n)===$g)return[];var t=Ac(n);return[tm(n),t,tm(t)]}function iX(n){var t=n.state,e=n.options,i=n.name;if(!t.modifiersData[i]._skip){for(var r=e.mainAxis,s=r===void 0?!0:r,o=e.altAxis,a=o===void 0?!0:o,l=e.fallbackPlacements,c=e.padding,u=e.boundary,d=e.rootBoundary,h=e.altBoundary,p=e.flipVariations,_=p===void 0?!0:p,A=e.allowedAutoPlacements,v=t.options.placement,b=gn(v),x=b===v,N=l||(x||!_?[Ac(v)]:nX(v)),T=[v].concat(N).reduce(function(we,qe){return we.concat(gn(qe)===$g?Ow(t,{placement:qe,boundary:u,rootBoundary:d,padding:c,flipVariations:_,allowedAutoPlacements:A}):qe)},[]),k=t.rects.reference,C=t.rects.popper,M=new Map,O=!0,F=T[0],j=0;j<T.length;j++){var H=T[j],Q=gn(H),ie=Ii(H)===ds,ue=[tn,bn].indexOf(Q)>=0,G=ue?"width":"height",X=io(t,{placement:H,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),te=ue?ie?pn:an:ie?bn:tn;k[G]>C[G]&&(te=Ac(te));var ve=Ac(te),he=[];if(s&&he.push(X[Q]<=0),a&&he.push(X[te]<=0,X[ve]<=0),he.every(function(we){return we})){F=H,O=!1;break}M.set(H,he)}if(O)for(var ge=_?3:1,re=function(qe){var Ce=T.find(function(je){var Ge=M.get(je);if(Ge)return Ge.slice(0,qe).every(function(Ae){return Ae})});if(Ce)return F=Ce,"break"},de=ge;de>0;de--){var me=re(de);if(me==="break")break}t.placement!==F&&(t.modifiersData[i]._skip=!0,t.placement=F,t.reset=!0)}}var Rw={name:"flip",enabled:!0,phase:"main",fn:iX,requiresIfExists:["offset"],data:{_skip:!1}};function rX(n,t,e){var i=gn(n),r=[an,tn].indexOf(i)>=0?-1:1,s=typeof e=="function"?e(Object.assign({},t,{placement:n})):e,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[an,pn].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function sX(n){var t=n.state,e=n.options,i=n.name,r=e.offset,s=r===void 0?[0,0]:r,o=Zg.reduce(function(u,d){return u[d]=rX(d,t.rects,s),u},{}),a=o[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=o}var Fw={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:sX};function oX(n){var t=n.state,e=n.name;t.modifiersData[e]=Qd({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var sO={name:"popperOffsets",enabled:!0,phase:"read",fn:oX,data:{}};function Lw(n){return n==="x"?"y":"x"}function aX(n){var t=n.state,e=n.options,i=n.name,r=e.mainAxis,s=r===void 0?!0:r,o=e.altAxis,a=o===void 0?!1:o,l=e.boundary,c=e.rootBoundary,u=e.altBoundary,d=e.padding,h=e.tether,p=h===void 0?!0:h,_=e.tetherOffset,A=_===void 0?0:_,v=io(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),b=gn(t.placement),x=Ii(t.placement),N=!x,T=ga(b),k=Lw(T),C=t.modifiersData.popperOffsets,M=t.rects.reference,O=t.rects.popper,F=typeof A=="function"?A(Object.assign({},t.rects,{placement:t.placement})):A,j=typeof F=="number"?{mainAxis:F,altAxis:F}:Object.assign({mainAxis:0,altAxis:0},F),H=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Q={x:0,y:0};if(C){if(s){var ie,ue=T==="y"?tn:an,G=T==="y"?bn:pn,X=T==="y"?"height":"width",te=C[T],ve=te+v[ue],he=te-v[G],ge=p?-O[X]/2:0,re=x===ds?M[X]:O[X],de=x===ds?-O[X]:-M[X],me=t.elements.arrow,we=p&&me?fa(me):{width:0,height:0},qe=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Jd(),Ce=qe[ue],je=qe[G],Ge=ma(0,M[X],we[X]),Ae=N?M[X]/2-ge-Ge-Ce-j.mainAxis:re-Ge-Ce-j.mainAxis,at=N?-M[X]/2+ge+Ge+je+j.mainAxis:de+Ge+je+j.mainAxis,Me=t.elements.arrow&&Zi(t.elements.arrow),We=Me?T==="y"?Me.clientTop||0:Me.clientLeft||0:0,it=(ie=H?.[T])!=null?ie:0,Ee=te+Ae-it-We,Ne=te+at-it,xe=ma(p?pa(ve,Ee):ve,te,p?Qi(he,Ne):he);C[T]=xe,Q[T]=xe-te}if(a){var He,Oe=T==="x"?tn:an,Jt=T==="x"?bn:pn,Ft=C[k],B=k==="y"?"height":"width",S=Ft+v[Oe],I=Ft-v[Jt],P=[tn,an].indexOf(b)!==-1,V=(He=H?.[k])!=null?He:0,Y=P?S:Ft-M[B]-O[B]-V+j.altAxis,$=P?Ft+M[B]+O[B]-V-j.altAxis:I,fe=p&&P?eO(Y,Ft,$):ma(p?Y:S,Ft,p?$:I);C[k]=fe,Q[k]=fe-Ft}t.modifiersData[i]=Q}}var Vw={name:"preventOverflow",enabled:!0,phase:"main",fn:aX,requiresIfExists:["offset"]};function Bw(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function qw(n){return n===Bt(n)||!ln(n)?_a(n):Bw(n)}function lX(n){var t=n.getBoundingClientRect(),e=hs(t.width)/n.offsetWidth||1,i=hs(t.height)/n.offsetHeight||1;return e!==1||i!==1}function jw(n,t,e){e===void 0&&(e=!1);var i=ln(t),r=ln(t)&&lX(t),s=Sn(t),o=Ti(n,r,e),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!e)&&((fn(t)!=="body"||ya(s))&&(a=qw(t)),ln(t)?(l=Ti(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=Aa(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function cX(n){var t=new Map,e=new Set,i=[];n.forEach(function(s){t.set(s.name,s)});function r(s){e.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var l=t.get(a);l&&r(l)}}),i.push(s)}return n.forEach(function(s){e.has(s.name)||r(s)}),i}function Ww(n){var t=cX(n);return $P.reduce(function(e,i){return e.concat(t.filter(function(r){return r.phase===i}))},[])}function zw(n){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(n())})})),t}}function Uw(n){var t=n.reduce(function(e,i){var r=e[i.name];return e[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,e},{});return Object.keys(t).map(function(e){return t[e]})}var oO={placement:"bottom",modifiers:[],strategy:"absolute"};function aO(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function lO(n){n===void 0&&(n={});var t=n,e=t.defaultModifiers,i=e===void 0?[]:e,r=t.defaultOptions,s=r===void 0?oO:r;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},oO,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,p={state:u,setOptions:function(b){var x=typeof b=="function"?b(u.options):b;A(),u.options=Object.assign({},s,u.options,x),u.scrollParents={reference:Mi(a)?no(a):a.contextElement?no(a.contextElement):[],popper:no(l)};var N=Ww(Uw([].concat(i,u.options.modifiers)));return u.orderedModifiers=N.filter(function(T){return T.enabled}),_(),p.update()},forceUpdate:function(){if(!h){var b=u.elements,x=b.reference,N=b.popper;if(aO(x,N)){u.rects={reference:jw(x,Zi(N),u.options.strategy==="fixed"),popper:fa(N)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(j){return u.modifiersData[j.name]=Object.assign({},j.data)});for(var T=0;T<u.orderedModifiers.length;T++){if(u.reset===!0){u.reset=!1,T=-1;continue}var k=u.orderedModifiers[T],C=k.fn,M=k.options,O=M===void 0?{}:M,F=k.name;typeof C=="function"&&(u=C({state:u,options:O,name:F,instance:p})||u)}}}},update:zw(function(){return new Promise(function(v){p.forceUpdate(),v(u)})}),destroy:function(){A(),h=!0}};if(!aO(a,l))return p;p.setOptions(c).then(function(v){!h&&c.onFirstUpdate&&c.onFirstUpdate(v)});function _(){u.orderedModifiers.forEach(function(v){var b=v.name,x=v.options,N=x===void 0?{}:x,T=v.effect;if(typeof T=="function"){var k=T({state:u,name:b,instance:p,options:N}),C=function(){};d.push(k||C)}})}function A(){d.forEach(function(v){return v()}),d=[]}return p}}var uX=[iO,sO,nO,QP],Hw=lO({defaultModifiers:uX});var hO=["*"];function dX(n,t){if(n&1){let e=pe();g(0,"button",1),q("click",function(){D(e);let r=R();return E(r.close())}),m()}}function hX(n,t){if(n&1&&w(0),n&2){let e=R(2);J(e.title)}}function pX(n,t){}function fX(n,t){if(n&1&&(g(0,"h3",2),ee(1,hX,1,1,"ng-template",null,0,If)(3,pX,0,0,"ng-template",4),m()),n&2){let e=Xn(2),i=R();y(3),L("ngTemplateOutlet",i.isTitleTemplate()?i.title:e)("ngTemplateOutletContext",i.context)}}var pO={animation:!0,transitionTimerDelayMs:5},fO=(()=>{class n{constructor(){this.animation=pO.animation}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function gX(n){let{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n),i=parseFloat(t),r=parseFloat(e);return(i+r)*1e3}function mX(n){return typeof n=="string"}function _X(n,t){return!t||typeof n.closest>"u"?null:n.closest(t)}function AX(n){return t=>new tt(e=>{let i=o=>n.run(()=>e.next(o)),r=o=>n.run(()=>e.error(o)),s=()=>n.run(()=>e.complete());return t.subscribe({next:i,error:r,complete:s})})}var yX=()=>{},{transitionTimerDelayMs:vX}=pO,im=new Map,Yw=(n,t,e,i)=>{let r=i.context||{},s=im.get(t);if(s)switch(i.runningTransition){case"continue":return Dn;case"stop":n.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),im.delete(t)}let o=e(t,i.animation,r)||yX;if(!i.animation||window.getComputedStyle(t).transitionProperty==="none")return n.run(()=>o()),ke(void 0).pipe(AX(n));let a=new ct,l=new ct,c=a.pipe(L_(!0));im.set(t,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});let u=gX(t);return n.runOutsideAngular(()=>{let d=ws(t,"transitionend").pipe(rr(c),An(({target:p})=>p===t)),h=So(u+vX).pipe(rr(c));mp(h,d,l).pipe(rr(c)).subscribe(()=>{im.delete(t),n.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};var wX=(()=>{class n{constructor(){this._ngbConfig=oe(fO),this.dismissible=!0,this.type="warning"}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),bX=({classList:n})=>{n.remove("show")},gO=(()=>{class n{constructor(){this._config=oe(wX),this._elementRef=oe(yn),this._zone=oe(Tt),this.animation=this._config.animation,this.dismissible=this._config.dismissible,this.type=this._config.type,this.closed=new Pt}close(){let e=Yw(this._zone,this._elementRef.nativeElement,bX,{animation:this.animation,runningTransition:"continue"});return e.subscribe(()=>this.closed.emit()),e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=ci({type:n,selectors:[["ngb-alert"]],hostAttrs:["role","alert"],hostVars:6,hostBindings:function(i,r){i&2&&(Ky("alert show"+(r.type?" alert-"+r.type:"")),Wi("fade",r.animation)("alert-dismissible",r.dismissible))},inputs:{animation:"animation",dismissible:"dismissible",type:"type"},outputs:{closed:"closed"},exportAs:["ngbAlert"],ngContentSelectors:hO,decls:2,vars:1,consts:()=>{let e;return e=$localize`:@@ngb.alert.close:Close`,[["type","button","aria-label",e,1,"btn-close"],["type","button","aria-label",e,1,"btn-close",3,"click"]]},template:function(i,r){i&1&&($y(),Qy(0),ee(1,dX,1,0,"button",0)),i&2&&(y(),Jy(r.dismissible?1:-1))},styles:[`ngb-alert{display:block}
`],encapsulation:2,changeDetection:0})}}return n})(),mO=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ji({type:n})}static{this.\u0275inj=Li({})}}return n})();var rm=(n,t)=>t?t.some(e=>e.contains(n)):!1,cO=(n,t)=>!t||_X(n,t)!=null,SX=(()=>{let n=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,t=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(n()||t()):!1})(),CX=n=>SX?()=>setTimeout(()=>n(),100):n;function xX(n,t,e,i,r,s,o,a){e&&n.runOutsideAngular(CX(()=>{let l=h=>{let p=h.target;return h.button===2||rm(p,o)?!1:e==="inside"?rm(p,s)&&cO(p,a):e==="outside"?!rm(p,s):cO(p,a)||!rm(p,s)},c=ws(t,"keydown").pipe(rr(r),An(h=>h.key==="Escape"),Zt(h=>h.preventDefault())),u=ws(t,"mousedown").pipe(ze(l),rr(r)),d=ws(t,"mouseup").pipe(q_(u),An(([h,p])=>p),F_(0),rr(r));mp([c.pipe(ze(h=>0)),d.pipe(ze(h=>1))]).subscribe(h=>n.run(()=>i(h)))}))}var xSe=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");var DX=(()=>{class n{constructor(){this._element=oe(Kt).documentElement}isRTL(){return(this._element.getAttribute("dir")||"").toLowerCase()==="rtl"}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),EX=/\s+/,MX=/  +/gi,TX={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]};function IX(n,t){let[e,i]=TX[n];return t&&i||e}var kX=/^left/,NX=/^right/,PX=/^start/,OX=/^end/;function RX(n,t){let[e,i]=t.split("-"),r=e.replace(kX,"start").replace(NX,"end"),s=[r];if(i){let o=i;(e==="left"||e==="right")&&(o=o.replace(PX,"top").replace(OX,"bottom")),s.push(`${r}-${o}`)}return n&&(s=s.map(o=>`${n}-${o}`)),s.join(" ")}function uO({placement:n,baseClass:t},e){let i=Array.isArray(n)?n:n.split(EX),r=["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"],s=i.findIndex(c=>c==="auto");s>=0&&r.forEach(function(c){i.find(u=>u.search("^"+c)!==-1)==null&&i.splice(s++,1,c)});let o=i.map(c=>IX(c,e.isRTL()));return{placement:o.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!t,phase:"write",fn({state:c}){let u=new RegExp(t+"(-[a-z]+)*","gi"),d=c.elements.popper,h=c.placement,p=d.className;p=p.replace(u,""),p+=` ${RX(t,h)}`,p=p.trim().replace(MX," "),d.className=p}},Rw,Vw,Iw,{enabled:!0,name:"flip",options:{fallbackPlacements:o}}]}}function dO(n){return n}function FX(){let n=oe(DX),t=null;return{createPopper(e){if(!t){let r=(e.updatePopperOptions||dO)(uO(e,n));t=Hw(e.hostElement,e.targetElement,r)}},update(){t&&t.update()},setOptions(e){if(t){let r=(e.updatePopperOptions||dO)(uO(e,n));t.setOptions(r)}},destroy(){t&&(t.destroy(),t=null)}}}function LX(n){return t=>(t.modifiers.push(Fw,{name:"offset",options:{offset:()=>n}}),t)}var DSe=new Date(1882,10,12),ESe=new Date(2174,10,25);var MSe=1e3*60*60*24;var Kw=1080,VX=24*Kw,BX=12*Kw+793,TSe=29*VX+BX,ISe=11*Kw+204;var Zd=class{constructor(t,e,i){this.nodes=t,this.viewRef=e,this.componentRef=i}},Gw=class{constructor(t){this._componentType=t,this._windowRef=null,this._contentRef=null,this._document=oe(Kt),this._applicationRef=oe(Yr),this._injector=oe(Ln),this._viewContainerRef=oe(qi),this._ngZone=oe(Tt)}open(t,e,i=!1){this._windowRef||(this._contentRef=this._getContentRef(t,e),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));let{nativeElement:r}=this._windowRef.location,s=new ct;ff({mixedReadWrite:()=>{s.next(),s.complete()}},{injector:this._injector});let o=s.pipe(Nt(()=>Yw(this._ngZone,r,({classList:a})=>a.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:o}}close(t=!1){return this._windowRef?Yw(this._ngZone,this._windowRef.location.nativeElement,({classList:e})=>e.remove("show"),{animation:t,runningTransition:"stop"}).pipe(Zt(()=>{this._windowRef?.destroy(),this._contentRef?.viewRef?.destroy(),this._windowRef=null,this._contentRef=null})):ke(void 0)}_getContentRef(t,e){if(t)if(t instanceof dr){let i=t.createEmbeddedView(e);return this._applicationRef.attachView(i),new Zd([i.rootNodes],i)}else return new Zd([[this._document.createTextNode(`${t}`)]]);else return new Zd([])}};var qX={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]};function jX(n){let t=(n||"").trim();if(t.length===0)return[];let e=t.split(/\s+/).map(r=>r.split(":")).map(r=>qX[r[0]]||r),i=e.filter(r=>r.includes("manual"));if(i.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(i.length===1&&e.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i.length?[]:e}function WX(n,t,e,i,r,s=0,o=0){let a=jX(t);if(a.length===0)return()=>{};let l=new Set,c=[],u;function d(p,_){n.addEventListener(p,_),c.push(()=>n.removeEventListener(p,_))}function h(p,_){clearTimeout(u),_>0?u=setTimeout(p,_):p()}for(let[p,_]of a)_?(d(p,()=>{l.add(p),h(()=>l.size>0&&i(),s)}),d(_,()=>{l.delete(p),h(()=>l.size===0&&r(),o)})):d(p,()=>e()?h(r,o):h(i,s));return()=>c.forEach(p=>p())}var zX=(()=>{class n{constructor(){this._ngbConfig=oe(fO),this.autoClose=!0,this.placement="auto",this.popperOptions=e=>e,this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),UX=0,HX=(()=>{class n{isTitleTemplate(){return this.title instanceof dr}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=ci({type:n,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip",2,"position","absolute"],hostVars:5,hostBindings:function(i,r){i&2&&(Xy("id",r.id),Ky("popover"+(r.popoverClass?" "+r.popoverClass:"")),Wi("fade",r.animation))},inputs:{animation:"animation",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:hO,decls:4,vars:1,consts:[["simpleTitle",""],["data-popper-arrow","",1,"popover-arrow"],[1,"popover-header"],[1,"popover-body"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,r){i&1&&($y(),Be(0,"div",1),ee(1,fX,4,2,"h3",2),g(2,"div",3),Qy(3),m()),i&2&&(y(),Jy(r.title?1:-1))},dependencies:[c1],encapsulation:2,changeDetection:0})}}return n})(),_O=(()=>{class n{constructor(){this._config=oe(zX),this.animation=this._config.animation,this.autoClose=this._config.autoClose,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.triggers=this._config.triggers,this.container=this._config.container,this.disablePopover=this._config.disablePopover,this.popoverClass=this._config.popoverClass,this.openDelay=this._config.openDelay,this.closeDelay=this._config.closeDelay,this.shown=new Pt,this.hidden=new Pt,this._nativeElement=oe(yn).nativeElement,this._ngZone=oe(Tt),this._document=oe(Kt),this._changeDetector=oe(Ts),this._injector=oe(Ln),this._ngbPopoverWindowId=`ngb-popover-${UX++}`,this._popupService=new Gw(HX),this._windowRef=null,this._positioning=FX()}open(e){if(!this._windowRef&&!this._isDisabled()){let{windowRef:i,transition$:r}=this._popupService.open(this.ngbPopover,e??this.popoverContext,this.animation);this._windowRef=i,this._windowRef.setInput("animation",this.animation),this._windowRef.setInput("title",this.popoverTitle),this._windowRef.setInput("context",e??this.popoverContext),this._windowRef.setInput("popoverClass",this.popoverClass),this._windowRef.setInput("id",this._ngbPopoverWindowId),this._getPositionTargetElement().setAttribute("aria-describedby",this._ngbPopoverWindowId),this.container==="body"&&this._document.body.appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._getPositionTargetElement(),targetElement:this._windowRef.location.nativeElement,placement:this.placement,baseClass:"bs-popover",updatePopperOptions:s=>this.popperOptions(LX([0,8])(s))}),Promise.resolve().then(()=>{this._positioning.update()}),this._afterRenderRef=xy({mixedReadWrite:()=>{this._positioning.update()}},{injector:this._injector})}),xX(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),r.subscribe(()=>this.shown.emit())}}close(e=this.animation){this._windowRef&&(this._getPositionTargetElement().removeAttribute("aria-describedby"),this._popupService.close(e).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this._afterRenderRef?.destroy(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return this._windowRef!=null}ngOnInit(){this._unregisterListenersFn=WX(this._nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:e,popoverTitle:i,disablePopover:r,popoverClass:s}){s&&this.isOpen()&&this._windowRef.setInput("popoverClass",s.currentValue),(e||i||r)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(!1),this._unregisterListenersFn?.()}_isDisabled(){return this.disablePopover?!0:!this.ngbPopover&&!this.popoverTitle}_getPositionTargetElement(){return(mX(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget)||this._nativeElement}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=It({type:n,selectors:[["","ngbPopover",""]],inputs:{animation:"animation",autoClose:"autoClose",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle",placement:"placement",popperOptions:"popperOptions",triggers:"triggers",positionTarget:"positionTarget",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",popoverContext:"popoverContext",openDelay:"openDelay",closeDelay:"closeDelay"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[Vi]})}}return n})(),AO=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ji({type:n})}static{this.\u0275inj=Li({})}}return n})();var kSe=new Se("live announcer delay",{providedIn:"root",factory:()=>100});function vt(n){var t=n.width,e=n.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(e<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:e}}function Ir(n,t){return n.width===t.width&&n.height===t.height}var YX=function(){function n(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return n.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(n.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),n.prototype.subscribe=function(t){var e=this,i={next:t};return this._observers.push(i),{unsubscribe:function(){e._observers=e._observers.filter(function(r){return r!==i})}}},n.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},n.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},n.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},n.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},n}();function vO(n){return new YX(n)}var GX=function(){function n(t,e,i){var r;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=vt({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=e??function(s){return s},this._allowResizeObserver=(r=i?.allowResizeObserver)!==null&&r!==void 0?r:!0,this._chooseAndInitObserver()}return n.prototype.dispose=function(){var t,e;if(this._canvasElement===null)throw new Error("Object is disposed");(t=this._canvasElementResizeObserver)===null||t===void 0||t.disconnect(),this._canvasElementResizeObserver=null,(e=this._devicePixelRatioObservable)===null||e===void 0||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(n.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bitmapSize",{get:function(){return vt({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),n.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=vt(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},n.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},n.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(n.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),n.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},n.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},n.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},n.prototype._resizeBitmap=function(t){var e=this.bitmapSize;Ir(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},n.prototype._emitBitmapSizeChanged=function(t,e){var i=this;this._bitmapSizeChangedListeners.forEach(function(r){return r.call(i,t,e)})},n.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,i=vt(this._transformBitmapSize(t,this._canvasElementClientSize)),r=Ir(this.bitmapSize,i)?null:i;e===null&&r===null||e!==null&&r!==null&&Ir(e,r)||(this._suggestedBitmapSize=r,this._emitSuggestedBitmapSizeChanged(e,r))},n.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(r){return r.call(i,t,e)})},n.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}KX().then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})},n.prototype._initDevicePixelRatioObservable=function(){var t=this;if(this._canvasElement!==null){var e=wO(this._canvasElement);if(e===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=vO(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},n.prototype._invalidateBitmapSize=function(){var t,e;if(this._canvasElement!==null){var i=wO(this._canvasElement);if(i!==null){var r=(e=(t=this._devicePixelRatioObservable)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:i.devicePixelRatio,s=this._canvasElement.getClientRects(),o=s[0]!==void 0?JX(s[0],r):vt({width:this._canvasElementClientSize.width*r,height:this._canvasElementClientSize.height*r});this._suggestNewBitmapSize(o)}}},n.prototype._initResizeObserver=function(){var t=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var i=e.find(function(o){return o.target===t._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var r=i.devicePixelContentBoxSize[0],s=vt({width:r.inlineSize,height:r.blockSize});t._suggestNewBitmapSize(s)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},n}();function Jw(n,t){if(t.type==="device-pixel-content-box")return new GX(n,t.transform,t.options);throw new Error("Unsupported binding target")}function wO(n){return n.ownerDocument.defaultView}function KX(){return new Promise(function(n){var t=new ResizeObserver(function(e){n(e.every(function(i){return"devicePixelContentBoxSize"in i})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function JX(n,t){return vt({width:Math.round(n.left*t+n.width*t)-Math.round(n.left*t),height:Math.round(n.top*t+n.height*t)-Math.round(n.top*t)})}var bO=function(){function n(t,e,i){if(e.width===0||e.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=t}return n.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},n.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(n.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),n}();function fs(n,t){var e=n.canvasElementClientSize;if(e.width===0||e.height===0)return null;var i=n.bitmapSize;if(i.width===0||i.height===0)return null;var r=n.canvasElement.getContext("2d",t);return r===null?null:new bO(r,e,i)}var h5={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},SO,lh;function Sc(n,t){let e={0:[],1:[n.lineWidth,n.lineWidth],2:[2*n.lineWidth,2*n.lineWidth],3:[6*n.lineWidth,6*n.lineWidth],4:[n.lineWidth,4*n.lineWidth]}[t];n.setLineDash(e)}function p5(n,t,e,i){n.beginPath();let r=n.lineWidth%2?.5:0;n.moveTo(e,t+r),n.lineTo(i,t+r),n.stroke()}function kn(n,t){if(!n)throw new Error("Assertion failed"+(t?": "+t:""))}function ii(n){if(n===void 0)throw new Error("Value is undefined");return n}function le(n){if(n===null)throw new Error("Value is null");return n}function so(n){return le(ii(n))}(function(n){n[n.Simple=0]="Simple",n[n.WithSteps=1]="WithSteps",n[n.Curved=2]="Curved"})(SO||(SO={})),function(n){n[n.Solid=0]="Solid",n[n.Dotted=1]="Dotted",n[n.Dashed=2]="Dashed",n[n.LargeDashed=3]="LargeDashed",n[n.SparseDotted=4]="SparseDotted"}(lh||(lh={}));var Ut=class{constructor(){this.t=[]}i(t,e,i){let r={h:t,l:e,o:i===!0};this.t.push(r)}_(t){let e=this.t.findIndex(i=>t===i.h);e>-1&&this.t.splice(e,1)}u(t){this.t=this.t.filter(e=>e.l!==t)}p(t,e,i){let r=[...this.t];this.t=this.t.filter(s=>!s.o),r.forEach(s=>s.h(t,e,i))}v(){return this.t.length>0}m(){this.t=[]}};function fi(n,...t){for(let e of t)for(let i in e)e[i]!==void 0&&Object.prototype.hasOwnProperty.call(e,i)&&!["__proto__","constructor","prototype"].includes(i)&&(typeof e[i]!="object"||n[i]===void 0||Array.isArray(e[i])?n[i]=e[i]:fi(n[i],e[i]));return n}function wa(n){return typeof n=="number"&&isFinite(n)}function ch(n){return typeof n=="number"&&n%1==0}function fh(n){return typeof n=="string"}function sm(n){return typeof n=="boolean"}function gs(n){let t=n;if(!t||typeof t!="object")return t;let e,i,r;for(i in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(i)&&(r=t[i],e[i]=r&&typeof r=="object"?gs(r):r);return e}function XX(n){return n!==null}function uh(n){return n===null?void 0:n}var f5="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function dh(n,t,e){return t===void 0&&(t=f5),`${e=e!==void 0?`${e} `:""}${n}px ${t}`}var hb=class{constructor(t){this.M={S:1,C:5,k:NaN,P:"",T:"",R:"",D:"",V:0,I:0,B:0,A:0,L:0},this.O=t}N(){let t=this.M,e=this.W(),i=this.F();return t.k===e&&t.T===i||(t.k=e,t.T=i,t.P=dh(e,i),t.A=2.5/12*e,t.V=t.A,t.I=e/12*t.C,t.B=e/12*t.C,t.L=0),t.R=this.H(),t.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}W(){return this.O.N().layout.fontSize}F(){return this.O.N().layout.fontFamily}};function Xw(n){return n<0?0:n>255?255:Math.round(n)||0}function CO(n){return .199*n[0]+.687*n[1]+.114*n[2]}var pb=class{constructor(t,e){this.q=new Map,this.Y=t,e&&(this.q=e)}j(t,e){if(t==="transparent")return t;let i=this.K(t),r=i[3];return`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${e*r})`}X(t){let e=this.K(t);return{Z:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,G:CO(e)>160?"black":"white"}}J(t){return CO(this.K(t))}tt(t,e,i){let[r,s,o,a]=this.K(t),[l,c,u,d]=this.K(e),h=[Xw(r+i*(l-r)),Xw(s+i*(c-s)),Xw(o+i*(u-o)),(p=a+i*(d-a),p<=0||p>1?Math.min(Math.max(p,0),1):Math.round(1e4*p)/1e4)];var p;return`rgba(${h[0]}, ${h[1]}, ${h[2]}, ${h[3]})`}K(t){let e=this.q.get(t);if(e)return e;let i=function(o){let a=document.createElement("div");a.style.display="none",document.body.appendChild(a),a.style.color=o;let l=window.getComputedStyle(a).color;return document.body.removeChild(a),l}(t),r=i.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!r){if(this.Y.length)for(let o of this.Y){let a=o(t);if(a)return this.q.set(t,a),a}throw new Error(`Failed to parse color: ${t}`)}let s=[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),r[4]?parseFloat(r[4]):1];return this.q.set(t,s),s}},fb=class{constructor(){this.it=[]}st(t){this.it=t}nt(t,e,i){this.it.forEach(r=>{r.nt(t,e,i)})}},Nr=class{nt(t,e,i){t.useBitmapCoordinateSpace(r=>this.et(r,e,i))}},gb=class extends Nr{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(this.rt===null||this.rt.lt===null)return;let r=this.rt.lt,s=this.rt,o=Math.max(1,Math.floor(e))%2/2,a=l=>{t.beginPath();for(let c=r.to-1;c>=r.from;--c){let u=s.ot[c],d=Math.round(u._t*e)+o,h=u.ut*i,p=l*i+o;t.moveTo(d,h),t.arc(d,h,p,0,2*Math.PI)}t.fill()};s.ct>0&&(t.fillStyle=s.dt,a(s.ft+s.ct)),t.fillStyle=s.vt,a(s.ft)}};function $X(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}var QX={from:0,to:1},mb=class{constructor(t,e,i){this.Mt=new fb,this.bt=[],this.St=[],this.xt=!0,this.O=t,this.Ct=e,this.yt=i,this.Mt.st(this.bt)}kt(t){this.Pt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}Pt(){let t=this.yt.Dt();t.length!==this.bt.length&&(this.St=t.map($X),this.bt=this.St.map(e=>{let i=new gb;return i.ht(e),i}),this.Mt.st(this.bt))}Rt(){let t=this.Ct.N().mode===2||!this.Ct.Vt(),e=this.yt.It(),i=this.Ct.Bt(),r=this.O.At();this.Pt(),e.forEach((s,o)=>{let a=this.St[o],l=s.Et(i),c=s.zt();!t&&l!==null&&s.Vt()&&c!==null?(a.vt=l.Lt,a.ft=l.ft,a.ct=l.Ot,a.ot[0].gt=l.gt,a.ot[0].ut=s.Wt().Nt(l.gt,c.Ft),a.dt=l.Ht??this.O.Ut(a.ot[0].ut/s.Wt().$t()),a.ot[0].wt=i,a.ot[0]._t=r.qt(i),a.lt=QX):a.lt=null})}},_b=class extends Nr{constructor(t){super(),this.Yt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.Yt===null)return;let s=this.Yt.jt.Vt,o=this.Yt.Kt.Vt;if(!s&&!o)return;let a=Math.round(this.Yt._t*i),l=Math.round(this.Yt.ut*r);t.lineCap="butt",s&&a>=0&&(t.lineWidth=Math.floor(this.Yt.jt.ct*i),t.strokeStyle=this.Yt.jt.R,t.fillStyle=this.Yt.jt.R,Sc(t,this.Yt.jt.Xt),function(c,u,d,h){c.beginPath();let p=c.lineWidth%2?.5:0;c.moveTo(u+p,d),c.lineTo(u+p,h),c.stroke()}(t,a,0,e.height)),o&&l>=0&&(t.lineWidth=Math.floor(this.Yt.Kt.ct*r),t.strokeStyle=this.Yt.Kt.R,t.fillStyle=this.Yt.Kt.R,Sc(t,this.Yt.Kt.Xt),p5(t,l,0,e.width))}},Ab=class{constructor(t,e){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new _b(this.Zt),this.Jt=t,this.yt=e}kt(){this.xt=!0}Tt(t){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){let t=this.Jt.Vt(),e=this.yt.Qt().N().crosshair,i=this.Zt;if(e.mode===2)return i.Kt.Vt=!1,void(i.jt.Vt=!1);i.Kt.Vt=t&&this.Jt.ti(this.yt),i.jt.Vt=t&&this.Jt.ii(),i.Kt.ct=e.horzLine.width,i.Kt.Xt=e.horzLine.style,i.Kt.R=e.horzLine.color,i.jt.ct=e.vertLine.width,i.jt.Xt=e.vertLine.style,i.jt.R=e.vertLine.color,i._t=this.Jt.si(),i.ut=this.Jt.ni()}};function ZX(n,t,e,i,r,s){n.fillRect(t+s,e,i-2*s,s),n.fillRect(t+s,e+r-s,i-2*s,s),n.fillRect(t,e,s,r),n.fillRect(t+i-s,e,s,r)}function km(n,t,e,i,r,s){n.save(),n.globalCompositeOperation="copy",n.fillStyle=s,n.fillRect(t,e,i,r),n.restore()}function xO(n,t,e,i,r,s){n.beginPath(),n.roundRect?n.roundRect(t,e,i,r,s):(n.lineTo(t+i-s[1],e),s[1]!==0&&n.arcTo(t+i,e,t+i,e+s[1],s[1]),n.lineTo(t+i,e+r-s[2]),s[2]!==0&&n.arcTo(t+i,e+r,t+i-s[2],e+r,s[2]),n.lineTo(t+s[3],e+r),s[3]!==0&&n.arcTo(t,e+r,t,e+r-s[3],s[3]),n.lineTo(t,e+s[0]),s[0]!==0&&n.arcTo(t,e,t+s[0],e,s[0]))}function DO(n,t,e,i,r,s,o=0,a=[0,0,0,0],l=""){if(n.save(),!o||!l||l===s)return xO(n,t,e,i,r,a),n.fillStyle=s,n.fill(),void n.restore();let c=o/2;var u;xO(n,t+c,e+c,i-o,r-o,(u=-c,a.map(d=>d===0?d:d+u))),s!=="transparent"&&(n.fillStyle=s,n.fill()),l!=="transparent"&&(n.lineWidth=o,n.strokeStyle=l,n.closePath(),n.stroke()),n.restore()}function g5(n,t,e,i,r,s,o){n.save(),n.globalCompositeOperation="copy";let a=n.createLinearGradient(0,0,0,r);a.addColorStop(0,s),a.addColorStop(1,o),n.fillStyle=a,n.fillRect(t,e,i,r),n.restore()}var pm=class{constructor(t,e){this.ht(t,e)}ht(t,e){this.Yt=t,this.ei=e}$t(t,e){return this.Yt.Vt?t.k+t.A+t.V:0}nt(t,e,i,r){if(!this.Yt.Vt||this.Yt.ri.length===0)return;let s=this.Yt.R,o=this.ei.Z,a=t.useBitmapCoordinateSpace(l=>{let c=l.context;c.font=e.P;let u=this.hi(l,e,i,r),d=u.ai;return u.li?DO(c,d.oi,d._i,d.ui,d.ci,o,d.di,[d.ft,0,0,d.ft],o):DO(c,d.fi,d._i,d.ui,d.ci,o,d.di,[0,d.ft,d.ft,0],o),this.Yt.pi&&(c.fillStyle=s,c.fillRect(d.fi,d.mi,d.wi-d.fi,d.gi)),this.Yt.Mi&&(c.fillStyle=e.D,c.fillRect(u.li?d.bi-d.di:0,d._i,d.di,d.Si-d._i)),u});t.useMediaCoordinateSpace(({context:l})=>{let c=a.xi;l.font=e.P,l.textAlign=a.li?"right":"left",l.textBaseline="middle",l.fillStyle=s,l.fillText(this.Yt.ri,c.Ci,(c._i+c.Si)/2+c.yi)})}hi(t,e,i,r){let{context:s,bitmapSize:o,mediaSize:a,horizontalPixelRatio:l,verticalPixelRatio:c}=t,u=this.Yt.pi||!this.Yt.ki?e.C:0,d=this.Yt.Pi?e.S:0,h=e.A+this.ei.Ti,p=e.V+this.ei.Ri,_=e.I,A=e.B,v=this.Yt.ri,b=e.k,x=i.Di(s,v),N=Math.ceil(i.Vi(s,v)),T=b+h+p,k=e.S+_+A+N+u,C=Math.max(1,Math.floor(c)),M=Math.round(T*c);M%2!=C%2&&(M+=1);let O=d>0?Math.max(1,Math.floor(d*l)):0,F=Math.round(k*l),j=Math.round(u*l),H=this.ei.Ii??this.ei.Bi,Q=Math.round(H*c)-Math.floor(.5*c),ie=Math.floor(Q+C/2-M/2),ue=ie+M,G=r==="right",X=G?a.width-d:d,te=G?o.width-O:O,ve,he,ge;return G?(ve=te-F,he=te-j,ge=X-u-_-d):(ve=te+F,he=te+j,ge=X+u+_),{li:G,ai:{_i:ie,mi:Q,Si:ue,ui:F,ci:M,ft:2*l,di:O,oi:ve,fi:te,wi:he,gi:C,bi:o.width},xi:{_i:ie/c,Si:ue/c,Ci:ge,yi:x}}}},Cc=class{constructor(t){this.Ai={Bi:0,Z:"#000",Ri:0,Ti:0},this.Ei={ri:"",Vt:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,Pi:!1},this.zi={ri:"",Vt:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,Pi:!0},this.xt=!0,this.Li=new(t||pm)(this.Ei,this.Ai),this.Oi=new(t||pm)(this.zi,this.Ai)}ri(){return this.Ni(),this.Ei.ri}Bi(){return this.Ni(),this.Ai.Bi}kt(){this.xt=!0}$t(t,e=!1){return Math.max(this.Li.$t(t,e),this.Oi.$t(t,e))}Wi(){return this.Ai.Ii||0}Fi(t){this.Ai.Ii=t}Hi(){return this.Ni(),this.Ei.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ei.Vt}Tt(t){return this.Ni(),this.Ei.pi=this.Ei.pi&&t.N().ticksVisible,this.zi.pi=this.zi.pi&&t.N().ticksVisible,this.Li.ht(this.Ei,this.Ai),this.Oi.ht(this.zi,this.Ai),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ei,this.Ai),this.Oi.ht(this.zi,this.Ai),this.Oi}Ni(){this.xt&&(this.Ei.pi=!0,this.zi.pi=!1,this.qi(this.Ei,this.zi,this.Ai))}},yb=class extends Cc{constructor(t,e,i){super(),this.Jt=t,this.Yi=e,this.ji=i}qi(t,e,i){if(t.Vt=!1,this.Jt.N().mode===2)return;let r=this.Jt.N().horzLine;if(!r.labelVisible)return;let s=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||s===null)return;let o=this.Yi.Xi().X(r.labelBackgroundColor);i.Z=o.Z,t.R=o.G;let a=2/12*this.Yi.k();i.Ti=a,i.Ri=a;let l=this.ji(this.Yi);i.Bi=l.Bi,t.ri=this.Yi.Zi(l.gt,s),t.Vt=!0}},e$=/[1-9]/g,fm=class{constructor(){this.Yt=null}ht(t){this.Yt=t}nt(t,e){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;let i=t.useMediaCoordinateSpace(({context:h})=>(h.font=e.P,Math.round(e.Gi.Vi(h,le(this.Yt).ri,e$))));if(i<=0)return;let r=e.Ji,s=i+2*r,o=s/2,a=this.Yt.Qi,l=this.Yt.Bi,c=Math.floor(l-o)+.5;c<0?(l+=Math.abs(0-c),c=Math.floor(l-o)+.5):c+s>a&&(l-=Math.abs(a-(c+s)),c=Math.floor(l-o)+.5);let u=c+s,d=Math.ceil(0+e.S+e.C+e.A+e.k+e.V);t.useBitmapCoordinateSpace(({context:h,horizontalPixelRatio:p,verticalPixelRatio:_})=>{let A=le(this.Yt);h.fillStyle=A.Z;let v=Math.round(c*p),b=Math.round(0*_),x=Math.round(u*p),N=Math.round(d*_),T=Math.round(2*p);if(h.beginPath(),h.moveTo(v,b),h.lineTo(v,N-T),h.arcTo(v,N,v+T,N,T),h.lineTo(x-T,N),h.arcTo(x,N,x,N-T,T),h.lineTo(x,b),h.fill(),A.pi){let k=Math.round(A.Bi*p),C=b,M=Math.round((C+e.C)*_);h.fillStyle=A.R;let O=Math.max(1,Math.floor(p)),F=Math.floor(.5*p);h.fillRect(k-F,C,O,M-C)}}),t.useMediaCoordinateSpace(({context:h})=>{let p=le(this.Yt),_=0+e.S+e.C+e.A+e.k/2;h.font=e.P,h.textAlign="left",h.textBaseline="middle",h.fillStyle=p.R;let A=e.Gi.Di(h,"Apr0");h.translate(c+r,_+A),h.fillText(p.ri,0,0)})}},vb=class{constructor(t,e,i){this.xt=!0,this.Gt=new fm,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Bi:NaN,pi:!0},this.Ct=t,this.ts=e,this.ji=i}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){let t=this.Zt;if(t.Vt=!1,this.Ct.N().mode===2)return;let e=this.Ct.N().vertLine;if(!e.labelVisible)return;let i=this.ts.At();if(i.Ki())return;t.Qi=i.Qi();let r=this.ji();if(r===null)return;t.Bi=r.Bi;let s=i.ss(this.Ct.Bt());t.ri=i.ns(le(s)),t.Vt=!0;let o=this.ts.Xi().X(e.labelBackgroundColor);t.Z=o.Z,t.R=o.G,t.pi=i.N().ticksVisible}},gm=class{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(t){this.rs=t}Wt(){return this.es}_s(t){this.es=t}us(t){return[]}cs(){return[]}Vt(){return!0}},Ht;(function(n){n[n.Normal=0]="Normal",n[n.Magnet=1]="Magnet",n[n.Hidden=2]="Hidden",n[n.MagnetOHLC=3]="MagnetOHLC"})(Ht||(Ht={}));var wb=class extends gm{constructor(t,e){super(),this.yt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=t,this.ys=e,this.ks=((r,s)=>o=>{let a=s(),l=r();if(o===le(this.yt).Ps())return{gt:l,Bi:a};{let c=le(o.zt());return{gt:o.Ts(a,c),Bi:a}}})(()=>this.ds,()=>this.Ss);let i=((r,s)=>()=>{let o=this.ts.At().Rs(r()),a=s();return o&&Number.isFinite(a)?{wt:o,Bi:a}:null})(()=>this.fs,()=>this.si());this.Ds=new vb(this,t,i)}N(){return this.ys}Vs(t,e){this.xs=t,this.Cs=e}Is(){this.xs=NaN,this.Cs=NaN}Bs(){return this.xs}As(){return this.Cs}Es(t,e,i){this.ws||(this.ws=!0),this.ps=!0,this.zs(t,e,i)}Bt(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.yt=null,this.Is(),this.Ns()}Ws(t){let e=this.gs.get(t);e||(e=new Ab(this,t),this.gs.set(t,e));let i=this.Ms.get(t);return i||(i=new mb(this.ts,this,t),this.Ms.set(t,i)),[e,i]}ti(t){return t===this.yt&&this.ys.horzLine.visible}ii(){return this.ys.vertLine.visible}Fs(t,e){this.ps&&this.yt===t||this.vs.clear();let i=[];return this.yt===t&&i.push(this.Hs(this.vs,e,this.ks)),i}cs(){return this.ps?[this.Ds]:[]}Us(){return this.yt}Ns(){this.ts.$s().forEach(t=>{this.gs.get(t)?.kt(),this.Ms.get(t)?.kt()}),this.vs.forEach(t=>t.kt()),this.Ds.kt()}qs(t){return t&&!t.Ps().Ki()?t.Ps():null}zs(t,e,i){this.Ys(t,e,i)&&this.Ns()}Ys(t,e,i){let r=this.bs,s=this.Ss,o=this.ds,a=this.fs,l=this.yt,c=this.qs(i);this.fs=t,this.bs=isNaN(t)?NaN:this.ts.At().qt(t),this.yt=i;let u=c!==null?c.zt():null;return c!==null&&u!==null?(this.ds=e,this.Ss=c.Nt(e,u)):(this.ds=NaN,this.Ss=NaN),r!==this.bs||s!==this.Ss||a!==this.fs||o!==this.ds||l!==this.yt}Os(){let t=this.ts.js().map(i=>i.Xs().Ks()).filter(XX),e=t.length===0?null:Math.max(...t);this.fs=e!==null?e:NaN}Hs(t,e,i){let r=t.get(e);return r===void 0&&(r=new yb(this,e,i),t.set(e,r)),r}};function Nm(n){return n==="left"||n==="right"}var In=class n{constructor(t){this.Zs=new Map,this.Gs=[],this.Js=t}Qs(t,e){let i=function(r,s){return r===void 0?s:{tn:Math.max(r.tn,s.tn),sn:r.sn||s.sn}}(this.Zs.get(t),e);this.Zs.set(t,i)}nn(){return this.Js}en(t){let e=this.Zs.get(t);return e===void 0?{tn:this.Js}:{tn:Math.max(this.Js,e.tn),sn:e.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(t){this.hn(),this.Gs=[{an:1,Ft:t}]}_n(t){this.un(),this.Gs.push({an:5,Ft:t})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(t){this.hn(),this.Gs.push({an:2,Ft:t})}fn(t){this.hn(),this.Gs.push({an:3,Ft:t})}pn(){return this.Gs}vn(t){for(let e of t.Gs)this.mn(e);this.Js=Math.max(this.Js,t.Js),t.Zs.forEach((e,i)=>{this.Qs(i,e)})}static wn(){return new n(2)}static gn(){return new n(3)}mn(t){switch(t.an){case 0:this.rn();break;case 1:this.ln(t.Ft);break;case 2:this.dn(t.Ft);break;case 3:this.fn(t.Ft);break;case 4:this.cn();break;case 5:this._n(t.Ft);break;case 6:this.un()}}un(){let t=this.Gs.findIndex(e=>e.an===5);t!==-1&&this.Gs.splice(t,1)}},EO=".";function ms(n,t){if(!wa(n))return"n/a";if(!ch(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return t===0?n.toString():("0000000000000000"+n.toString()).slice(-t)}var xc=class{constructor(t,e){if(e||(e=1),wa(t)&&ch(t)||(t=100),t<0)throw new TypeError("invalid base");this.Yi=t,this.Mn=e,this.bn()}format(t){let e=t<0?"\u2212":"";return t=Math.abs(t),e+this.Sn(t)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let t=this.Yi;for(;t>1;)t/=10,this.xn++}}Sn(t){let e=this.Yi/this.Mn,i=Math.floor(t),r="",s=this.xn!==void 0?this.xn:NaN;if(e>1){let o=+(Math.round(t*e)-i*e).toFixed(this.xn);o>=e&&(o-=e,i+=1),r=EO+ms(+o.toFixed(this.xn)*this.Mn,s)}else i=Math.round(i*e)/e,s>0&&(r=EO+ms(0,s));return i.toFixed(0)+r}},mm=class extends xc{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}},bb=class{constructor(t){this.Cn=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.yn(t):t<999995?e+this.yn(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.yn(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.yn(t/1e9)+"B")}yn(t){let e,i=Math.pow(10,this.Cn);return e=(t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.Cn).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,(r,s)=>s)}},t$=/[2-9]/g,ba=class{constructor(t=50){this.kn=0,this.Pn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=t}In(){this.kn=0,this.Dn.clear(),this.Pn=1,this.Tn=1,this.Rn={}}Vi(t,e,i){return this.Bn(t,e,i).width}Di(t,e,i){let r=this.Bn(t,e,i);return((r.actualBoundingBoxAscent||0)-(r.actualBoundingBoxDescent||0))/2}Bn(t,e,i){let r=i||t$,s=String(e).replace(r,"0");if(this.Dn.has(s))return ii(this.Dn.get(s)).An;if(this.kn===this.Vn){let a=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(a),this.Tn++,this.kn--}t.save(),t.textBaseline="middle";let o=t.measureText(s);return t.restore(),o.width===0&&e.length||(this.Dn.set(s,{An:o,En:this.Pn}),this.Rn[this.Pn]=s,this.kn++,this.Pn++),o}},Sb=class{constructor(t){this.zn=null,this.M=null,this.Ln="right",this.On=t}Nn(t,e,i){this.zn=t,this.M=e,this.Ln=i}nt(t){this.M!==null&&this.zn!==null&&this.zn.nt(t,this.M,this.On,this.Ln)}},_m=class{constructor(t,e,i){this.Wn=t,this.On=new ba(50),this.Fn=e,this.O=i,this.W=-1,this.Gt=new Sb(this.On)}Tt(){let t=this.O.Hn(this.Fn);if(t===null)return null;let e=t.Un(this.Fn)?t.$n():this.Fn.Wt();if(e===null)return null;let i=t.qn(e);if(i==="overlay")return null;let r=this.O.Yn();return r.k!==this.W&&(this.W=r.k,this.On.In()),this.Gt.Nn(this.Wn.$i(),r,i),this.Gt}},Cb=class extends Nr{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}jn(t,e){if(!this.Yt?.Vt)return null;let{ut:i,ct:r,Kn:s}=this.Yt;return e>=i-r-7&&e<=i+r+7?{Xn:this.Yt,Kn:s}:null}et({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.Yt===null||this.Yt.Vt===!1)return;let s=Math.round(this.Yt.ut*r);s<0||s>e.height||(t.lineCap="butt",t.strokeStyle=this.Yt.R,t.lineWidth=Math.floor(this.Yt.ct*i),Sc(t,this.Yt.Xt),p5(t,s,0,e.width))}},hh=class{constructor(t){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new Cb,this.xt=!0,this.Jn=t,this.Qn=t.Qt(),this.Gn.ht(this.Zn)}kt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}},xb=class extends hh{constructor(t){super(t)}te(){this.Zn.Vt=!1;let t=this.Jn.Wt(),e=t.ie().ie;if(e!==2&&e!==3)return;let i=this.Jn.N();if(!i.baseLineVisible||!this.Jn.Vt())return;let r=this.Jn.zt();r!==null&&(this.Zn.Vt=!0,this.Zn.ut=t.Nt(r.Ft,r.Ft),this.Zn.R=i.baseLineColor,this.Zn.ct=i.baseLineWidth,this.Zn.Xt=i.baseLineStyle)}},Db=class extends Nr{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}se(){return this.Yt}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){let r=this.Yt;if(r===null)return;let s=Math.max(1,Math.floor(e)),o=s%2/2,a=Math.round(r.ne.x*e)+o,l=r.ne.y*i;t.fillStyle=r.ee,t.beginPath();let c=Math.max(2,1.5*r.re)*e;t.arc(a,l,c,0,2*Math.PI,!1),t.fill(),t.fillStyle=r.he,t.beginPath(),t.arc(a,l,r.ft*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=s,t.strokeStyle=r.ae,t.beginPath(),t.arc(a,l,r.ft*e+s/2,0,2*Math.PI,!1),t.stroke()}},n$=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}],Eb=class{constructor(t){this.Gt=new Db,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=t}Me(){this.we=this.me-1,this.kt()}be(){if(this.kt(),this.ge.N().lastPriceAnimation===2){let t=performance.now(),e=this.we-t;if(e>0)return void(e<650&&(this.we+=2600));this.me=t,this.we=t+2600}}kt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);let t=this.ge.Qt().At(),e=t.ye(),i=this.ge.zt();if(e===null||i===null)return;let r=this.ge.ke(!0);if(r.Pe||!e.Te(r.Re))return;let s={x:t.qt(r.Re),y:this.ge.Wt().Nt(r.gt,i.Ft)},o=r.R,a=this.ge.N().lineWidth,l=this.De(this.Ve(),o);this.Gt.ht({ee:o,re:a,he:l.he,ae:l.ae,ft:l.ft,ne:s})}Ce(){let t=this.Gt.se();if(t!==null){let e=this.De(this.Ve(),t.ee);t.he=e.he,t.ae=e.ae,t.ft=e.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Ie(t,e,i,r){let s=i+(r-i)*e;return this.ge.Qt().Xi().j(t,s)}De(t,e){let i=t%2600/2600,r;for(let c of n$)if(i>=c.le&&i<=c.oe){r=c;break}kn(r!==void 0,"Last price animation internal logic error");let s=(i-r.le)/(r.oe-r.le);return{he:this.Ie(e,s,r.ce,r.de),ae:this.Ie(e,s,r.fe,r.pe),ft:(o=s,a=r._e,l=r.ue,a+(l-a)*o)};var o,a,l}},Mb=class extends hh{constructor(t){super(t)}te(){let t=this.Zn;t.Vt=!1;let e=this.Jn.N();if(!e.priceLineVisible||!this.Jn.Vt())return;let i=this.Jn.ke(e.priceLineSource===0);i.Pe||(t.Vt=!0,t.ut=i.Bi,t.R=this.Jn.Be(i.R),t.ct=e.priceLineWidth,t.Xt=e.priceLineStyle)}},Tb=class extends Cc{constructor(t){super(),this.Jt=t}qi(t,e,i){t.Vt=!1,e.Vt=!1;let r=this.Jt;if(!r.Vt())return;let s=r.N(),o=s.lastValueVisible,a=r.Ae()!=="",l=s.seriesLastValueMode===0,c=r.ke(!1);if(c.Pe)return;o&&(t.ri=this.Ee(c,o,l),t.Vt=t.ri.length!==0),(a||l)&&(e.ri=this.ze(c,o,a,l),e.Vt=e.ri.length>0);let u=r.Be(c.R),d=this.Jt.Qt().Xi().X(u);i.Z=d.Z,i.Bi=c.Bi,e.Ht=r.Qt().Ut(c.Bi/r.Wt().$t()),t.Ht=u,t.R=d.G,e.R=d.G}ze(t,e,i,r){let s="",o=this.Jt.Ae();return i&&o.length!==0&&(s+=`${o} `),e&&r&&(s+=this.Jt.Wt().Le()?t.Oe:t.Ne),s.trim()}Ee(t,e,i){return e?i?this.Jt.Wt().Le()?t.Ne:t.Oe:t.ri:""}};function MO(n,t,e,i){let r=Number.isFinite(t),s=Number.isFinite(e);return r&&s?n(t,e):r||s?r?t:e:i}var gi=class n{constructor(t,e){this.We=t,this.Fe=e}He(t){return t!==null&&this.We===t.We&&this.Fe===t.Fe}Ue(){return new n(this.We,this.Fe)}$e(){return this.We}qe(){return this.Fe}Ye(){return this.Fe-this.We}Ki(){return this.Fe===this.We||Number.isNaN(this.Fe)||Number.isNaN(this.We)}vn(t){return t===null?this:new n(MO(Math.min,this.$e(),t.$e(),-1/0),MO(Math.max,this.qe(),t.qe(),1/0))}je(t){if(!wa(t)||this.Fe-this.We===0)return;let e=.5*(this.Fe+this.We),i=this.Fe-e,r=this.We-e;i*=t,r*=t,this.Fe=e+i,this.We=e+r}Ke(t){wa(t)&&(this.Fe+=t,this.We+=t)}Xe(){return{minValue:this.We,maxValue:this.Fe}}static Ze(t){return t===null?null:new n(t.minValue,t.maxValue)}},Am=class n{constructor(t,e){this.Ge=t,this.Je=e||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(t){return t===null?null:new n(gi.Ze(t.priceRange),t.margins)}},Ib=class extends hh{constructor(t,e){super(t),this.ir=e}te(){let t=this.Zn;t.Vt=!1;let e=this.ir.N();if(!this.Jn.Vt()||!e.lineVisible)return;let i=this.ir.sr();i!==null&&(t.Vt=!0,t.ut=i,t.R=e.color,t.ct=e.lineWidth,t.Xt=e.lineStyle,t.Kn=this.ir.N().id)}},kb=class extends Cc{constructor(t,e){super(),this.ge=t,this.ir=e}qi(t,e,i){t.Vt=!1,e.Vt=!1;let r=this.ir.N(),s=r.axisLabelVisible,o=r.title!=="",a=this.ge;if(!s||!a.Vt())return;let l=this.ir.sr();if(l===null)return;o&&(e.ri=r.title,e.Vt=!0),e.Ht=a.Qt().Ut(l/a.Wt().$t()),t.ri=this.nr(r.price),t.Vt=!0;let c=this.ge.Qt().Xi().X(r.axisLabelColor||r.color);i.Z=c.Z;let u=r.axisLabelTextColor||c.G;t.R=u,e.R=u,i.Bi=l}nr(t){let e=this.ge.zt();return e===null?"":this.ge.Wt().Zi(t,e.Ft)}},Nb=class{constructor(t,e){this.ge=t,this.ys=e,this.er=new Ib(t,this),this.Wn=new kb(t,this),this.rr=new _m(this.Wn,t,t.Qt())}hr(t){fi(this.ys,t),this.kt(),this.ge.Qt().ar()}N(){return this.ys}lr(){return this.er}_r(){return this.rr}ur(){return this.Wn}kt(){this.er.kt(),this.Wn.kt()}sr(){let t=this.ge,e=t.Wt();if(t.Qt().At().Ki()||e.Ki())return null;let i=t.zt();return i===null?null:e.Nt(this.ys.price,i.Ft)}},Pb=class extends gm{constructor(t){super(),this.ts=t}Qt(){return this.ts}},i$={Bar:(n,t,e,i)=>{let r=t.upColor,s=t.downColor,o=le(n(e,i)),a=so(o.Ft[0])<=so(o.Ft[3]);return{cr:o.R??(a?r:s)}},Candlestick:(n,t,e,i)=>{let r=t.upColor,s=t.downColor,o=t.borderUpColor,a=t.borderDownColor,l=t.wickUpColor,c=t.wickDownColor,u=le(n(e,i)),d=so(u.Ft[0])<=so(u.Ft[3]);return{cr:u.R??(d?r:s),dr:u.Ht??(d?o:a),pr:u.vr??(d?l:c)}},Custom:(n,t,e,i)=>({cr:le(n(e,i)).R??t.color}),Area:(n,t,e,i)=>{let r=le(n(e,i));return{cr:r.vt??t.lineColor,vt:r.vt??t.lineColor,mr:r.mr??t.topColor,wr:r.wr??t.bottomColor}},Baseline:(n,t,e,i)=>{let r=le(n(e,i));return{cr:r.Ft[3]>=t.baseValue.price?t.topLineColor:t.bottomLineColor,gr:r.gr??t.topLineColor,Mr:r.Mr??t.bottomLineColor,br:r.br??t.topFillColor1,Sr:r.Sr??t.topFillColor2,Cr:r.Cr??t.bottomFillColor1,yr:r.yr??t.bottomFillColor2}},Line:(n,t,e,i)=>{let r=le(n(e,i));return{cr:r.R??t.color,vt:r.R??t.color}},Histogram:(n,t,e,i)=>({cr:le(n(e,i)).R??t.color})},Ob=class{constructor(t){this.kr=(e,i)=>i!==void 0?i.Ft:this.ge.Xs().Pr(e),this.ge=t,this.Tr=i$[t.Rr()]}Dr(t,e){return this.Tr(this.kr,this.ge.N(),t,e)}};function m5(n,t,e,i,r=0,s=t.length){let o=s-r;for(;0<o;){let a=o>>1,l=r+a;i(t[l],e)===n?(r=l+1,o-=a+1):o=a}return r}var Dc=m5.bind(null,!0),_5=m5.bind(null,!1),TO;(function(n){n[n.NearestLeft=-1]="NearestLeft",n[n.None=0]="None",n[n.NearestRight=1]="NearestRight"})(TO||(TO={}));var ro=30,Rb=class{constructor(){this.Vr=[],this.Ir=new Map,this.Br=new Map,this.Ar=[]}Er(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(t){return this.Nr(t,0)!==null}Pr(t){return this.Wr(t)}Wr(t,e=0){let i=this.Nr(t,e);return i===null?null:Ie(ne({},this.Fr(i)),{Re:this.Or(i)})}Hr(){return this.Vr}Ur(t,e,i){if(this.Ki())return null;let r=null;for(let s of i)r=om(r,this.$r(t,e,s));return r}ht(t){this.Br.clear(),this.Ir.clear(),this.Vr=t,this.Ar=t.map(e=>e.Re)}qr(){return this.Ar}Or(t){return this.Vr[t].Re}Fr(t){return this.Vr[t]}Nr(t,e){let i=this.Yr(t);if(i===null&&e!==0)switch(e){case-1:return this.jr(t);case 1:return this.Kr(t);default:throw new TypeError("Unknown search mode")}return i}jr(t){let e=this.Xr(t);return e>0&&(e-=1),e!==this.Vr.length&&this.Or(e)<t?e:null}Kr(t){let e=this.Zr(t);return e!==this.Vr.length&&t<this.Or(e)?e:null}Yr(t){let e=this.Xr(t);return e===this.Vr.length||t<this.Vr[e].Re?null:e}Xr(t){return Dc(this.Vr,t,(e,i)=>e.Re<i)}Zr(t){return _5(this.Vr,t,(e,i)=>e.Re>i)}Gr(t,e,i){let r=null;for(let s=t;s<e;s++){let o=this.Vr[s].Ft[i];Number.isNaN(o)||(r===null?r={Jr:o,Qr:o}:(o<r.Jr&&(r.Jr=o),o>r.Qr&&(r.Qr=o)))}return r}$r(t,e,i){if(this.Ki())return null;let r=null,s=le(this.Lr()),o=le(this.Ks()),a=Math.max(t,s),l=Math.min(e,o),c=Math.ceil(a/ro)*ro,u=Math.max(c,Math.floor(l/ro)*ro);{let h=this.Xr(a),p=this.Zr(Math.min(l,c,e));r=om(r,this.Gr(h,p,i))}let d=this.Ir.get(i);d===void 0&&(d=new Map,this.Ir.set(i,d));for(let h=Math.max(c+1,a);h<u;h+=ro){let p=Math.floor(h/ro),_=d.get(p);if(_===void 0){let A=this.Xr(p*ro),v=this.Zr((p+1)*ro-1);_=this.Gr(A,v,i),d.set(p,_)}r=om(r,_)}{let h=this.Xr(u),p=this.Zr(l);r=om(r,this.Gr(h,p,i))}return r}};function om(n,t){return n===null?t:t===null?n:{Jr:Math.min(n.Jr,t.Jr),Qr:Math.max(n.Qr,t.Qr)}}var Fb=class{constructor(t){this.th=t}nt(t,e,i){this.th.draw(t)}ih(t,e,i){this.th.drawBackground?.(t)}},Lb=class{constructor(t){this.Dn=null,this.sh=t}Tt(){let t=this.sh.renderer();if(t===null)return null;if(this.Dn?.nh===t)return this.Dn.eh;let e=new Fb(t);return this.Dn={nh:t,eh:e},e}rh(){return this.sh.zOrder?.()??"normal"}},ym=class{constructor(t){this.hh=null,this.ah=t}oh(){return this.ah}Ns(){this.ah.updateAllViews?.()}Ws(){let t=this.ah.paneViews?.()??[];if(this.hh?.nh===t)return this.hh.eh;let e=t.map(i=>new Lb(i));return this.hh={nh:t,eh:e},e}jn(t,e){return this.ah.hitTest?.(t,e)??null}},r$=class extends ym{us(){return[]}},Vb=class{constructor(t){this.th=t}nt(t,e,i){this.th.draw(t)}ih(t,e,i){this.th.drawBackground?.(t)}},vm=class{constructor(t){this.Dn=null,this.sh=t}Tt(){let t=this.sh.renderer();if(t===null)return null;if(this.Dn?.nh===t)return this.Dn.eh;let e=new Vb(t);return this.Dn={nh:t,eh:e},e}rh(){return this.sh.zOrder?.()??"normal"}};function A5(n){return{ri:n.text(),Bi:n.coordinate(),Ii:n.fixedCoordinate?.(),R:n.textColor(),Z:n.backColor(),Vt:n.visible?.()??!0,pi:n.tickVisible?.()??!0}}var Bb=class{constructor(t,e){this.Gt=new fm,this._h=t,this.uh=e}Tt(){return this.Gt.ht(ne({Qi:this.uh.Qi()},A5(this._h))),this.Gt}},qb=class extends Cc{constructor(t,e){super(),this._h=t,this.Yi=e}qi(t,e,i){let r=A5(this._h);i.Z=r.Z,t.R=r.R;let s=2/12*this.Yi.k();i.Ti=s,i.Ri=s,i.Bi=r.Bi,i.Ii=r.Ii,t.ri=r.ri,t.Vt=r.Vt,t.pi=r.pi}},jb=class extends ym{constructor(t,e){super(t),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=e}cs(){let t=this.ah.timeAxisViews?.()??[];if(this.dh?.nh===t)return this.dh.eh;let e=this.ge.Qt().At(),i=t.map(r=>new Bb(r,e));return this.dh={nh:t,eh:i},i}Fs(){let t=this.ah.priceAxisViews?.()??[];if(this.fh?.nh===t)return this.fh.eh;let e=this.ge.Wt(),i=t.map(r=>new qb(r,e));return this.fh={nh:t,eh:i},i}wh(){let t=this.ah.priceAxisPaneViews?.()??[];if(this.ph?.nh===t)return this.ph.eh;let e=t.map(i=>new vm(i));return this.ph={nh:t,eh:e},e}gh(){let t=this.ah.timeAxisPaneViews?.()??[];if(this.mh?.nh===t)return this.mh.eh;let e=t.map(i=>new vm(i));return this.mh={nh:t,eh:e},e}Mh(t,e){return this.ah.autoscaleInfo?.(t,e)??null}};function $w(n,t,e,i){n.forEach(r=>{t(r).forEach(s=>{s.rh()===e&&i.push(s)})})}function Qw(n){return n.Ws()}function s$(n){return n.wh()}function o$(n){return n.gh()}var a$=["Area","Line","Baseline"],Ec=class extends Pb{constructor(t,e,i,r,s){super(t),this.Yt=new Rb,this.er=new Mb(this),this.bh=[],this.Sh=new xb(this),this.xh=null,this.Ch=null,this.yh=null,this.kh=[],this.ys=i,this.Ph=e;let o=new Tb(this);this.vs=[o],this.rr=new _m(o,this,t),a$.includes(this.Ph)&&(this.xh=new Eb(this)),this.Th(),this.sh=r(this,this.Qt(),s)}m(){this.yh!==null&&clearTimeout(this.yh)}Be(t){return this.ys.priceLineColor||t}ke(t){let e={Pe:!0},i=this.Wt();if(this.Qt().At().Ki()||i.Ki()||this.Yt.Ki())return e;let r=this.Qt().At().ye(),s=this.zt();if(r===null||s===null)return e;let o,a;if(t){let d=this.Yt.Er();if(d===null)return e;o=d,a=d.Re}else{let d=this.Yt.Wr(r.bi(),-1);if(d===null||(o=this.Yt.Pr(d.Re),o===null))return e;a=d.Re}let l=o.Ft[3],c=this.Rh().Dr(a,{Ft:o}),u=i.Nt(l,s.Ft);return{Pe:!1,gt:l,ri:i.Zi(l,s.Ft),Oe:i.Dh(l),Ne:i.Vh(l,s.Ft),R:c.cr,Bi:u,Re:a}}Rh(){return this.Ch!==null||(this.Ch=new Ob(this)),this.Ch}N(){return this.ys}hr(t){let e=t.priceScaleId;e!==void 0&&e!==this.ys.priceScaleId&&this.Qt().Ih(this,e),fi(this.ys,t),t.priceFormat!==void 0&&(this.Th(),this.Qt().Bh()),this.Qt().Ah(this),this.Qt().Eh(),this.sh.kt("options")}ht(t,e){this.Yt.ht(t),this.sh.kt("data"),this.xh!==null&&(e&&e.zh?this.xh.be():t.length===0&&this.xh.Me());let i=this.Qt().Hn(this);this.Qt().Lh(i),this.Qt().Ah(this),this.Qt().Eh(),this.Qt().ar()}Oh(t){let e=new Nb(this,t);return this.bh.push(e),this.Qt().Ah(this),e}Nh(t){let e=this.bh.indexOf(t);e!==-1&&this.bh.splice(e,1),this.Qt().Ah(this)}Wh(){return this.bh}Rr(){return this.Ph}zt(){let t=this.Fh();return t===null?null:{Ft:t.Ft[3],Hh:t.wt}}Fh(){let t=this.Qt().At().ye();if(t===null)return null;let e=t.Uh();return this.Yt.Wr(e,1)}Xs(){return this.Yt}$h(t){let e=this.Yt.Pr(t);return e===null?null:this.Ph==="Bar"||this.Ph==="Candlestick"||this.Ph==="Custom"?{qh:e.Ft[0],Yh:e.Ft[1],jh:e.Ft[2],Kh:e.Ft[3]}:e.Ft[3]}Xh(t){let e=[];$w(this.kh,Qw,"top",e);let i=this.xh;return i!==null&&i.Vt()&&(this.yh===null&&i.xe()&&(this.yh=setTimeout(()=>{this.yh=null,this.Qt().Zh()},0)),i.Se(),e.unshift(i)),e}Ws(){let t=[];this.Gh()||t.push(this.Sh),t.push(this.sh,this.er);let e=this.bh.map(i=>i.lr());return t.push(...e),$w(this.kh,Qw,"normal",t),t}Jh(){return this.Qh(Qw,"bottom")}ta(t){return this.Qh(s$,t)}ia(t){return this.Qh(o$,t)}sa(t,e){return this.kh.map(i=>i.jn(t,e)).filter(i=>i!==null)}us(){return[this.rr,...this.bh.map(t=>t._r())]}Fs(t,e){if(e!==this.es&&!this.Gh())return[];let i=[...this.vs];for(let r of this.bh)i.push(r.ur());return this.kh.forEach(r=>{i.push(...r.Fs())}),i}cs(){let t=[];return this.kh.forEach(e=>{t.push(...e.cs())}),t}Mh(t,e){if(this.ys.autoscaleInfoProvider!==void 0){let i=this.ys.autoscaleInfoProvider(()=>{let r=this.na(t,e);return r===null?null:r.Xe()});return Am.Ze(i)}return this.na(t,e)}ea(){return this.ys.priceFormat.minMove}ra(){return this.ha}Ns(){this.sh.kt();for(let t of this.vs)t.kt();for(let t of this.bh)t.kt();this.er.kt(),this.Sh.kt(),this.xh?.kt(),this.kh.forEach(t=>t.Ns())}Wt(){return le(super.Wt())}Et(t){if(!((this.Ph==="Line"||this.Ph==="Area"||this.Ph==="Baseline")&&this.ys.crosshairMarkerVisible))return null;let e=this.Yt.Pr(t);return e===null?null:{gt:e.Ft[3],ft:this.aa(),Ht:this.la(),Ot:this.oa(),Lt:this._a(t)}}Ae(){return this.ys.title}Vt(){return this.ys.visible}ua(t){this.kh.push(new jb(t,this))}ca(t){this.kh=this.kh.filter(e=>e.oh()!==t)}da(){if(this.Ph==="Custom")return t=>this.sh.fa(t)}pa(){if(this.Ph==="Custom")return t=>this.sh.va(t)}ma(){return this.Yt.qr()}Gh(){return!Nm(this.Wt().wa())}na(t,e){if(!ch(t)||!ch(e)||this.Yt.Ki())return null;let i=this.Ph==="Line"||this.Ph==="Area"||this.Ph==="Baseline"||this.Ph==="Histogram"?[3]:[2,1],r=this.Yt.Ur(t,e,i),s=r!==null?new gi(r.Jr,r.Qr):null,o=null;if(this.Rr()==="Histogram"){let a=this.ys.base,l=new gi(a,a);s=s!==null?s.vn(l):l}return this.kh.forEach(a=>{let l=a.Mh(t,e);if(l?.priceRange){let c=new gi(l.priceRange.minValue,l.priceRange.maxValue);s=s!==null?s.vn(c):c}l?.margins&&(o=l.margins)}),new Am(s,o)}aa(){switch(this.Ph){case"Line":case"Area":case"Baseline":return this.ys.crosshairMarkerRadius}return 0}la(){switch(this.Ph){case"Line":case"Area":case"Baseline":{let t=this.ys.crosshairMarkerBorderColor;if(t.length!==0)return t}}return null}oa(){switch(this.Ph){case"Line":case"Area":case"Baseline":return this.ys.crosshairMarkerBorderWidth}return 0}_a(t){switch(this.Ph){case"Line":case"Area":case"Baseline":{let e=this.ys.crosshairMarkerBackgroundColor;if(e.length!==0)return e}}return this.Rh().Dr(t).cr}Th(){switch(this.ys.priceFormat.type){case"custom":this.ha={format:this.ys.priceFormat.formatter};break;case"volume":this.ha=new bb(this.ys.priceFormat.precision);break;case"percent":this.ha=new mm(this.ys.priceFormat.precision);break;default:{let t=Math.pow(10,this.ys.priceFormat.precision);this.ha=new xc(t,this.ys.priceFormat.minMove*t)}}this.es!==null&&this.es.ga()}Qh(t,e){let i=[];return $w(this.kh,t,e,i),i}},l$=[3],c$=[0,1,2,3],Wb=class{constructor(t){this.ys=t}Ma(t,e,i){let r=t;if(this.ys.mode===0)return r;let s=i.Ps(),o=s.zt();if(o===null)return r;let a=s.Nt(t,o),l=i.ba().filter(u=>u instanceof Ec).reduce((u,d)=>{if(i.Un(d)||!d.Vt())return u;let h=d.Wt(),p=d.Xs();if(h.Ki()||!p.Te(e))return u;let _=p.Pr(e);if(_===null)return u;let A=so(d.zt()),v=this.ys.mode===3?c$:l$;return u.concat(v.map(b=>h.Nt(_.Ft[b],A.Ft)))},[]);if(l.length===0)return r;l.sort((u,d)=>Math.abs(u-a)-Math.abs(d-a));let c=l[0];return r=s.Ts(c,o),r}};function ih(n,t,e){return Math.min(Math.max(n,t),e)}function am(n,t,e){return t-n<=e}function I2(n){let t=Math.ceil(n);return t%2==0?t-1:t}var zb=class extends Nr{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.Yt===null)return;let s=Math.max(1,Math.floor(i));t.lineWidth=s,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(t,()=>{let o=le(this.Yt);if(o.Sa){t.strokeStyle=o.xa,Sc(t,o.Ca),t.beginPath();for(let a of o.ya){let l=Math.round(a.ka*i);t.moveTo(l,-s),t.lineTo(l,e.height+s)}t.stroke()}if(o.Pa){t.strokeStyle=o.Ta,Sc(t,o.Ra),t.beginPath();for(let a of o.Da){let l=Math.round(a.ka*r);t.moveTo(-s,l),t.lineTo(e.width+s,l)}t.stroke()}})}},Ub=class{constructor(t){this.Gt=new zb,this.xt=!0,this.yt=t}kt(){this.xt=!0}Tt(){if(this.xt){let t=this.yt.Qt().N().grid,e={Pa:t.horzLines.visible,Sa:t.vertLines.visible,Ta:t.horzLines.color,xa:t.vertLines.color,Ra:t.horzLines.style,Ca:t.vertLines.style,Da:this.yt.Ps().Va(),ya:(this.yt.Qt().At().Va()||[]).map(i=>({ka:i.coord}))};this.Gt.ht(e),this.xt=!1}return this.Gt}},Hb=class{constructor(t){this.sh=new Ub(t)}lr(){return this.sh}},Zw={Ia:4,Ba:1e-4};function wc(n,t){let e=100*(n-t)/t;return t<0?-e:e}function u$(n,t){let e=wc(n.$e(),t),i=wc(n.qe(),t);return new gi(e,i)}function rh(n,t){let e=100*(n-t)/t+100;return t<0?-e:e}function d$(n,t){let e=rh(n.$e(),t),i=rh(n.qe(),t);return new gi(e,i)}function wm(n,t){let e=Math.abs(n);if(e<1e-15)return 0;let i=Math.log10(e+t.Ba)+t.Ia;return n<0?-i:i}function sh(n,t){let e=Math.abs(n);if(e<1e-15)return 0;let i=Math.pow(10,e-t.Ia)-t.Ba;return n<0?-i:i}function eh(n,t){if(n===null)return null;let e=wm(n.$e(),t),i=wm(n.qe(),t);return new gi(e,i)}function nh(n,t){if(n===null)return null;let e=sh(n.$e(),t),i=sh(n.qe(),t);return new gi(e,i)}function eb(n){if(n===null)return Zw;let t=Math.abs(n.qe()-n.$e());if(t>=1||t<1e-15)return Zw;let e=Math.ceil(Math.abs(Math.log10(t))),i=Zw.Ia+e;return{Ia:i,Ba:1/Math.pow(10,i)}}var oh=class{constructor(t,e){if(this.Aa=t,this.Ea=e,function(i){if(i<0)return!1;for(let r=i;r>1;r/=10)if(r%10!=0)return!1;return!0}(this.Aa))this.za=[2,2.5,2];else{this.za=[];for(let i=this.Aa;i!==1;){if(i%2==0)this.za.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.za.push(2,2.5),i/=5}if(this.za.length>100)throw new Error("something wrong with base")}}}La(t,e,i){let r=this.Aa===0?0:1/this.Aa,s=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),o=0,a=this.Ea[0];for(;;){let d=am(s,r,1e-14)&&s>r+1e-14,h=am(s,i*a,1e-14),p=am(s,1,1e-14);if(!(d&&h&&p))break;s/=a,a=this.Ea[++o%this.Ea.length]}if(s<=r+1e-14&&(s=r),s=Math.max(1,s),this.za.length>0&&(l=s,c=1,u=1e-14,Math.abs(l-c)<u))for(o=0,a=this.za[0];am(s,i*a,1e-14)&&s>r+1e-14;)s/=a,a=this.za[++o%this.za.length];var l,c,u;return s}},bm=class{constructor(t,e,i,r){this.Oa=[],this.Yi=t,this.Aa=e,this.Na=i,this.Wa=r}La(t,e){if(t<e)throw new Error("high < low");let i=this.Yi.$t(),r=(t-e)*this.Fa()/i,s=new oh(this.Aa,[2,2.5,2]),o=new oh(this.Aa,[2,2,2.5]),a=new oh(this.Aa,[2.5,2,2]),l=[];return l.push(s.La(t,e,r),o.La(t,e,r),a.La(t,e,r)),function(c){if(c.length<1)throw Error("array is empty");let u=c[0];for(let d=1;d<c.length;++d)c[d]<u&&(u=c[d]);return u}(l)}Ha(){let t=this.Yi,e=t.zt();if(e===null)return void(this.Oa=[]);let i=t.$t(),r=this.Na(i-1,e),s=this.Na(0,e),o=this.Yi.N().entireTextOnly?this.Ua()/2:0,a=o,l=i-1-o,c=Math.max(r,s),u=Math.min(r,s);if(c===u)return void(this.Oa=[]);let d=this.La(c,u);if(this.$a(e,d,c,u,a,l),t.qa()&&this.Ya(d,u,c)){let h=this.Yi.ja();this.Ka(e,d,a,l,h,2*h)}}Va(){return this.Oa}Ua(){return this.Yi.k()}Fa(){return Math.ceil(2.5*this.Ua())}$a(t,e,i,r,s,o){let a=this.Oa,l=this.Yi,c=i%e;c+=c<0?e:0;let u=i>=r?1:-1,d=null,h=0;for(let p=i-c;p>r;p-=e){let _=this.Wa(p,t,!0);d!==null&&Math.abs(_-d)<this.Fa()||_<s||_>o||(h<a.length?(a[h].ka=_,a[h].Xa=l.Za(p)):a.push({ka:_,Xa:l.Za(p)}),h++,d=_,l.Ga()&&(e=this.La(p*u,r)))}a.length=h}Ka(t,e,i,r,s,o){let a=this.Oa,l=this.Ja(t,i,s,o),c=this.Ja(t,r,-o,-s),u=this.Wa(0,t,!0)-this.Wa(e,t,!0);a.length>0&&a[0].ka-l.ka<u/2&&a.shift(),a.length>0&&c.ka-a[a.length-1].ka<u/2&&a.pop(),a.unshift(l),a.push(c)}Ja(t,e,i,r){let s=(i+r)/2,o=this.Na(e+i,t),a=this.Na(e+r,t),l=Math.min(o,a),c=Math.max(o,a),u=Math.max(.1,this.La(c,l)),d=this.Na(e+s,t),h=d-d%u,p=this.Wa(h,t,!0);return{Xa:this.Yi.Za(h),ka:p}}Ya(t,e,i){let r=so(this.Yi.Qe());return this.Yi.Ga()&&(r=nh(r,this.Yi.Qa())),r.$e()-e<t&&i-r.qe()<t}};function y5(n){return n.slice().sort((t,e)=>le(t.hs())-le(e.hs()))}var IO;(function(n){n[n.Normal=0]="Normal",n[n.Logarithmic=1]="Logarithmic",n[n.Percentage=2]="Percentage",n[n.IndexedTo100=3]="IndexedTo100"})(IO||(IO={}));var kO=new mm,NO=new xc(100,1),Yb=class{constructor(t,e,i,r,s){this.tl=0,this.il=null,this.Ge=null,this.sl=null,this.nl={el:!1,rl:null},this.hl=!1,this.al=0,this.ll=0,this.ol=new Ut,this._l=new Ut,this.ul=[],this.cl=null,this.dl=null,this.fl=null,this.pl=null,this.vl=null,this.ha=NO,this.ml=eb(null),this.wl=t,this.ys=e,this.gl=i,this.Ml=r,this.bl=s,this.Sl=new bm(this,100,this.xl.bind(this),this.Cl.bind(this))}wa(){return this.wl}N(){return this.ys}hr(t){if(fi(this.ys,t),this.ga(),t.mode!==void 0&&this.yl({ie:t.mode}),t.scaleMargins!==void 0){let e=ii(t.scaleMargins.top),i=ii(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(e+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+i}`);this.kl(),this.fl=null}}Pl(){return this.ys.autoScale}Tl(){return this.hl}Ga(){return this.ys.mode===1}Le(){return this.ys.mode===2}Rl(){return this.ys.mode===3}Qa(){return this.ml}ie(){return{sn:this.ys.autoScale,Dl:this.ys.invertScale,ie:this.ys.mode}}yl(t){let e=this.ie(),i=null;t.sn!==void 0&&(this.ys.autoScale=t.sn),t.ie!==void 0&&(this.ys.mode=t.ie,t.ie!==2&&t.ie!==3||(this.ys.autoScale=!0),this.nl.el=!1),e.ie===1&&t.ie!==e.ie&&(function(s,o){if(s===null)return!1;let a=sh(s.$e(),o),l=sh(s.qe(),o);return isFinite(a)&&isFinite(l)}(this.Ge,this.ml)?(i=nh(this.Ge,this.ml),i!==null&&this.Vl(i)):this.ys.autoScale=!0),t.ie===1&&t.ie!==e.ie&&(i=eh(this.Ge,this.ml),i!==null&&this.Vl(i));let r=e.ie!==this.ys.mode;r&&(e.ie===2||this.Le())&&this.ga(),r&&(e.ie===3||this.Rl())&&this.ga(),t.Dl!==void 0&&e.Dl!==t.Dl&&(this.ys.invertScale=t.Dl,this.Il()),this._l.p(e,this.ie())}Bl(){return this._l}k(){return this.gl.fontSize}$t(){return this.tl}Al(t){this.tl!==t&&(this.tl=t,this.kl(),this.fl=null)}El(){if(this.il)return this.il;let t=this.$t()-this.zl()-this.Ll();return this.il=t,t}Qe(){return this.Ol(),this.Ge}Vl(t,e){let i=this.Ge;(e||i===null&&t!==null||i!==null&&!i.He(t))&&(this.fl=null,this.Ge=t)}Nl(t){this.Vl(t),this.Wl(t!==null)}Ki(){return this.Ol(),this.tl===0||!this.Ge||this.Ge.Ki()}Fl(t){return this.Dl()?t:this.$t()-1-t}Nt(t,e){return this.Le()?t=wc(t,e):this.Rl()&&(t=rh(t,e)),this.Cl(t,e)}Hl(t,e,i){this.Ol();let r=this.Ll(),s=le(this.Qe()),o=s.$e(),a=s.qe(),l=this.El()-1,c=this.Dl(),u=l/(a-o),d=i===void 0?0:i.from,h=i===void 0?t.length:i.to,p=this.Ul();for(let _=d;_<h;_++){let A=t[_],v=A.gt;if(isNaN(v))continue;let b=v;p!==null&&(b=p(A.gt,e));let x=r+u*(b-o),N=c?x:this.tl-1-x;A.ut=N}}$l(t,e,i){this.Ol();let r=this.Ll(),s=le(this.Qe()),o=s.$e(),a=s.qe(),l=this.El()-1,c=this.Dl(),u=l/(a-o),d=i===void 0?0:i.from,h=i===void 0?t.length:i.to,p=this.Ul();for(let _=d;_<h;_++){let A=t[_],v=A.qh,b=A.Yh,x=A.jh,N=A.Kh;p!==null&&(v=p(A.qh,e),b=p(A.Yh,e),x=p(A.jh,e),N=p(A.Kh,e));let T=r+u*(v-o),k=c?T:this.tl-1-T;A.ql=k,T=r+u*(b-o),k=c?T:this.tl-1-T,A.Yl=k,T=r+u*(x-o),k=c?T:this.tl-1-T,A.jl=k,T=r+u*(N-o),k=c?T:this.tl-1-T,A.Kl=k}}Ts(t,e){let i=this.xl(t,e);return this.Xl(i,e)}Xl(t,e){let i=t;return this.Le()?i=function(r,s){return s<0&&(r=-r),r/100*s+s}(i,e):this.Rl()&&(i=function(r,s){return r-=100,s<0&&(r=-r),r/100*s+s}(i,e)),i}ba(){return this.ul}Dt(){return this.dl||(this.dl=y5(this.ul)),this.dl}Zl(t){this.ul.indexOf(t)===-1&&(this.ul.push(t),this.ga(),this.Gl())}Jl(t){let e=this.ul.indexOf(t);if(e===-1)throw new Error("source is not attached to scale");this.ul.splice(e,1),this.ul.length===0&&(this.yl({sn:!0}),this.Vl(null)),this.ga(),this.Gl()}zt(){let t=null;for(let e of this.ul){let i=e.zt();i!==null&&(t===null||i.Hh<t.Hh)&&(t=i)}return t===null?null:t.Ft}Dl(){return this.ys.invertScale}Va(){let t=this.zt()===null;if(this.fl!==null&&(t||this.fl.Ql===t))return this.fl.Va;this.Sl.Ha();let e=this.Sl.Va();return this.fl={Va:e,Ql:t},this.ol.p(),e}io(){return this.ol}so(t){this.Le()||this.Rl()||this.pl===null&&this.sl===null&&(this.Ki()||(this.pl=this.tl-t,this.sl=le(this.Qe()).Ue()))}no(t){if(this.Le()||this.Rl()||this.pl===null)return;this.yl({sn:!1}),(t=this.tl-t)<0&&(t=0);let e=(this.pl+.2*(this.tl-1))/(t+.2*(this.tl-1)),i=le(this.sl).Ue();e=Math.max(e,.1),i.je(e),this.Vl(i)}eo(){this.Le()||this.Rl()||(this.pl=null,this.sl=null)}ro(t){this.Pl()||this.vl===null&&this.sl===null&&(this.Ki()||(this.vl=t,this.sl=le(this.Qe()).Ue()))}ho(t){if(this.Pl()||this.vl===null)return;let e=le(this.Qe()).Ye()/(this.El()-1),i=t-this.vl;this.Dl()&&(i*=-1);let r=i*e,s=le(this.sl).Ue();s.Ke(r),this.Vl(s,!0),this.fl=null}ao(){this.Pl()||this.vl!==null&&(this.vl=null,this.sl=null)}ra(){return this.ha||this.ga(),this.ha}Zi(t,e){switch(this.ys.mode){case 2:return this.lo(wc(t,e));case 3:return this.ra().format(rh(t,e));default:return this.nr(t)}}Za(t){switch(this.ys.mode){case 2:return this.lo(t);case 3:return this.ra().format(t);default:return this.nr(t)}}Dh(t){return this.nr(t,le(this.cl).ra())}Vh(t,e){return t=wc(t,e),this.lo(t,kO)}oo(){return this.ul}_o(t){this.nl={rl:t,el:!1}}Ns(){this.ul.forEach(t=>t.Ns())}qa(){return this.ys.ensureEdgeTickMarksVisible&&this.Pl()}ja(){return this.k()/2}ga(){this.fl=null;let t=1/0;this.cl=null;for(let i of this.ul)i.hs()<t&&(t=i.hs(),this.cl=i);let e=100;this.cl!==null&&(e=Math.round(1/this.cl.ea())),this.ha=NO,this.Le()?(this.ha=kO,e=100):this.Rl()?(this.ha=new xc(100,1),e=100):this.cl!==null&&(this.ha=this.cl.ra()),this.Sl=new bm(this,e,this.xl.bind(this),this.Cl.bind(this)),this.Sl.Ha()}Gl(){this.dl=null}Xi(){return this.bl}Wl(t){this.hl=t}zl(){return this.Dl()?this.ys.scaleMargins.bottom*this.$t()+this.ll:this.ys.scaleMargins.top*this.$t()+this.al}Ll(){return this.Dl()?this.ys.scaleMargins.top*this.$t()+this.al:this.ys.scaleMargins.bottom*this.$t()+this.ll}Ol(){this.nl.el||(this.nl.el=!0,this.uo())}kl(){this.il=null}Cl(t,e){if(this.Ol(),this.Ki())return 0;t=this.Ga()&&t?wm(t,this.ml):t;let i=le(this.Qe()),r=this.Ll()+(this.El()-1)*(t-i.$e())/i.Ye();return this.Fl(r)}xl(t,e){if(this.Ol(),this.Ki())return 0;let i=this.Fl(t),r=le(this.Qe()),s=r.$e()+r.Ye()*((i-this.Ll())/(this.El()-1));return this.Ga()?sh(s,this.ml):s}Il(){this.fl=null,this.Sl.Ha()}uo(){if(this.Tl()&&!this.Pl())return;let t=this.nl.rl;if(t===null)return;let e=null,i=this.oo(),r=0,s=0;for(let l of i){if(!l.Vt())continue;let c=l.zt();if(c===null)continue;let u=l.Mh(t.Uh(),t.bi()),d=u&&u.Qe();if(d!==null){switch(this.ys.mode){case 1:d=eh(d,this.ml);break;case 2:d=u$(d,c.Ft);break;case 3:d=d$(d,c.Ft)}if(e=e===null?d:e.vn(le(d)),u!==null){let h=u.tr();h!==null&&(r=Math.max(r,h.above),s=Math.max(s,h.below))}}}if(this.qa()&&(r=Math.max(r,this.ja()),s=Math.max(s,this.ja())),r===this.al&&s===this.ll||(this.al=r,this.ll=s,this.fl=null,this.kl()),e!==null){if(e.$e()===e.qe()){let l=this.cl,c=5*(l===null||this.Le()||this.Rl()?1:l.ea());this.Ga()&&(e=nh(e,this.ml)),e=new gi(e.$e()-c,e.qe()+c),this.Ga()&&(e=eh(e,this.ml))}if(this.Ga()){let l=nh(e,this.ml),c=eb(l);if(o=c,a=this.ml,o.Ia!==a.Ia||o.Ba!==a.Ba){let u=this.sl!==null?nh(this.sl,this.ml):null;this.ml=c,e=eh(l,c),u!==null&&(this.sl=eh(u,c))}}this.Vl(e)}else this.Ge===null&&(this.Vl(new gi(-.5,.5)),this.ml=eb(null));var o,a}Ul(){return this.Le()?wc:this.Rl()?rh:this.Ga()?t=>wm(t,this.ml):null}co(t,e,i){return e===void 0?(i===void 0&&(i=this.ra()),i.format(t)):e(t)}nr(t,e){return this.co(t,this.Ml.priceFormatter,e)}lo(t,e){return this.co(t,this.Ml.percentageFormatter,e)}};function PO(n){return n instanceof Ec}var Sm=class{constructor(t,e){this.ul=[],this.do=new Map,this.tl=0,this.fo=0,this.po=1e3,this.dl=null,this.vo=new Ut,this.kh=[],this.uh=t,this.ts=e,this.mo=new Hb(this);let i=e.N();this.wo=this.Mo("left",i.leftPriceScale),this.bo=this.Mo("right",i.rightPriceScale),this.wo.Bl().i(this.So.bind(this,this.wo),this),this.bo.Bl().i(this.So.bind(this,this.bo),this),this.xo(i)}xo(t){if(t.leftPriceScale&&this.wo.hr(t.leftPriceScale),t.rightPriceScale&&this.bo.hr(t.rightPriceScale),t.localization&&(this.wo.ga(),this.bo.ga()),t.overlayPriceScales){let e=Array.from(this.do.values());for(let i of e){let r=le(i[0].Wt());r.hr(t.overlayPriceScales),t.localization&&r.ga()}}}Co(t){switch(t){case"left":return this.wo;case"right":return this.bo}return this.do.has(t)?ii(this.do.get(t))[0].Wt():null}m(){this.Qt().yo().u(this),this.wo.Bl().u(this),this.bo.Bl().u(this),this.ul.forEach(t=>{t.m&&t.m()}),this.kh=this.kh.filter(t=>{let e=t.oh();return e.detached&&e.detached(),!1}),this.vo.p()}ko(){return this.po}Po(t){this.po=t}Qt(){return this.ts}Qi(){return this.fo}$t(){return this.tl}To(t){this.fo=t,this.Ro()}Al(t){this.tl=t,this.wo.Al(t),this.bo.Al(t),this.ul.forEach(e=>{if(this.Un(e)){let i=e.Wt();i!==null&&i.Al(t)}}),this.Ro()}Do(){return this.ul.filter(PO)}ba(){return this.ul}Un(t){let e=t.Wt();return e===null||this.wo!==e&&this.bo!==e}Zl(t,e,i){this.Vo(t,e,i?t.hs():this.ul.length)}Jl(t,e){let i=this.ul.indexOf(t);kn(i!==-1,"removeDataSource: invalid data source"),this.ul.splice(i,1),e||this.ul.forEach((o,a)=>o.ls(a));let r=le(t.Wt()).wa();if(this.do.has(r)){let o=ii(this.do.get(r)),a=o.indexOf(t);a!==-1&&(o.splice(a,1),o.length===0&&this.do.delete(r))}let s=t.Wt();s&&s.ba().indexOf(t)>=0&&(s.Jl(t),this.Io(s)),this.dl=null}qn(t){return t===this.wo?"left":t===this.bo?"right":"overlay"}Bo(){return this.wo}Ao(){return this.bo}Eo(t,e){t.so(e)}zo(t,e){t.no(e),this.Ro()}Lo(t){t.eo()}Oo(t,e){t.ro(e)}No(t,e){t.ho(e),this.Ro()}Wo(t){t.ao()}Ro(){this.ul.forEach(t=>{t.Ns()})}Ps(){let t=null;return this.ts.N().rightPriceScale.visible&&this.bo.ba().length!==0?t=this.bo:this.ts.N().leftPriceScale.visible&&this.wo.ba().length!==0?t=this.wo:this.ul.length!==0&&(t=this.ul[0].Wt()),t===null&&(t=this.bo),t}$n(){let t=null;return this.ts.N().rightPriceScale.visible?t=this.bo:this.ts.N().leftPriceScale.visible&&(t=this.wo),t}Io(t){t!==null&&t.Pl()&&this.Fo(t)}Ho(t){let e=this.uh.ye();t.yl({sn:!0}),e!==null&&t._o(e),this.Ro()}Uo(){this.Fo(this.wo),this.Fo(this.bo)}$o(){this.Io(this.wo),this.Io(this.bo),this.ul.forEach(t=>{this.Un(t)&&this.Io(t.Wt())}),this.Ro(),this.ts.ar()}Dt(){return this.dl===null&&(this.dl=y5(this.ul)),this.dl}qo(t,e){e=ih(e,0,this.ul.length-1);let i=this.ul.indexOf(t);kn(i!==-1,"setSeriesOrder: invalid data source"),this.ul.splice(i,1),this.ul.splice(e,0,t),this.ul.forEach((r,s)=>r.ls(s)),this.dl=null;for(let r of[this.wo,this.bo])r.Gl(),r.ga();this.ts.ar()}It(){return this.Dt().filter(PO)}Yo(){return this.vo}jo(){return this.mo}ua(t){this.kh.push(new r$(t))}ca(t){this.kh=this.kh.filter(e=>e.oh()!==t),t.detached&&t.detached(),this.ts.ar()}Ko(){return this.kh}sa(t,e){return this.kh.map(i=>i.jn(t,e)).filter(i=>i!==null)}Fo(t){let e=t.oo();if(e&&e.length>0&&!this.uh.Ki()){let i=this.uh.ye();i!==null&&t._o(i)}t.Ns()}Vo(t,e,i){let r=this.Co(e);if(r===null&&(r=this.Mo(e,this.ts.N().overlayPriceScales)),this.ul.splice(i,0,t),!Nm(e)){let s=this.do.get(e)||[];s.push(t),this.do.set(e,s)}t.ls(i),r.Zl(t),t._s(r),this.Io(r),this.dl=null}So(t,e,i){e.ie!==i.ie&&this.Fo(t)}Mo(t,e){let i=ne({visible:!0,autoScale:!0},gs(e)),r=new Yb(t,i,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return r.Al(this.$t()),r}};function lm(n){return{Xo:n.Xo,Zo:{Kn:n.Go.externalId},Jo:n.Go.cursorStyle}}function h$(n,t,e,i){for(let r of n){let s=r.Tt(i);if(s!==null&&s.jn){let o=s.jn(t,e);if(o!==null)return{Qo:r,Zo:o}}}return null}function p$(n){return n.Ws!==void 0}function v5(n,t,e){let i=[n,...n.Dt()],r=function(s,o,a){let l,c;for(let h of s){let p=h.sa?.(o,a)??[];for(let _ of p)u=_.zOrder,d=l?.zOrder,(!d||u==="top"&&d!=="top"||u==="normal"&&d==="bottom")&&(l=_,c=h)}var u,d;return l&&c?{Go:l,Xo:c}:null}(i,t,e);if(r?.Go.zOrder==="top")return lm(r);for(let s of i){if(r&&r.Xo===s&&r.Go.zOrder!=="bottom"&&!r.Go.isBackground)return lm(r);if(p$(s)){let o=h$(s.Ws(n),t,e,n);if(o!==null)return{Xo:s,Qo:o.Qo,Zo:o.Zo}}if(r&&r.Xo===s&&r.Go.zOrder!=="bottom"&&r.Go.isBackground)return lm(r)}return r?.Go?lm(r):null}var Gb=class{constructor(t,e,i=50){this.kn=0,this.Pn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.t_=t,this.i_=e,this.Vn=i}s_(t){let e=t.time,i=this.i_.cacheKey(e),r=this.Dn.get(i);if(r!==void 0)return r.n_;if(this.kn===this.Vn){let o=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(ii(o)),this.Tn++,this.kn--}let s=this.t_(t);return this.Dn.set(i,{n_:s,En:this.Pn}),this.Rn.set(this.Pn,i),this.kn++,this.Pn++,s}},oo=class{constructor(t,e){kn(t<=e,"right should be >= left"),this.e_=t,this.r_=e}Uh(){return this.e_}bi(){return this.r_}h_(){return this.r_-this.e_+1}Te(t){return this.e_<=t&&t<=this.r_}He(t){return this.e_===t.Uh()&&this.r_===t.bi()}};function OO(n,t){return n===null||t===null?n===t:n.He(t)}var Kb=class{constructor(){this.a_=new Map,this.Dn=null,this.l_=!1}o_(t){this.l_=t,this.Dn=null}__(t,e){this.u_(e),this.Dn=null;for(let i=e;i<t.length;++i){let r=t[i],s=this.a_.get(r.timeWeight);s===void 0&&(s=[],this.a_.set(r.timeWeight,s)),s.push({index:i,time:r.time,weight:r.timeWeight,originalTime:r.originalTime})}}c_(t,e,i,r,s){let o=Math.ceil(e/t);return this.Dn!==null&&this.Dn.d_===o&&s===this.Dn.f_&&i===this.Dn.p_||(this.Dn={f_:s,p_:i,Va:this.v_(o,i,r),d_:o}),this.Dn.Va}u_(t){if(t===0)return void this.a_.clear();let e=[];this.a_.forEach((i,r)=>{t<=i[0].index?e.push(r):i.splice(Dc(i,t,s=>s.index<t),1/0)});for(let i of e)this.a_.delete(i)}v_(t,e,i){let r=[],s=o=>!e||i.has(o.index);for(let o of Array.from(this.a_.keys()).sort((a,l)=>l-a)){if(!this.a_.get(o))continue;let a=r;r=[];let l=a.length,c=0,u=ii(this.a_.get(o)),d=u.length,h=1/0,p=-1/0;for(let _=0;_<d;_++){let A=u[_],v=A.index;for(;c<l;){let b=a[c],x=b.index;if(!(x<v&&s(b))){h=x;break}c++,r.push(b),p=x,h=1/0}if(h-v>=t&&v-p>=t&&s(A))r.push(A),p=v;else if(this.l_)return a}for(;c<l;c++)s(a[c])&&r.push(a[c])}return r}},bc=class n{constructor(t){this.m_=t}w_(){return this.m_===null?null:new oo(Math.floor(this.m_.Uh()),Math.ceil(this.m_.bi()))}g_(){return this.m_}static M_(){return new n(null)}};function f$(n,t){return n.weight>t.weight?n:t}var Jb=class{constructor(t,e,i,r){this.fo=0,this.b_=null,this.S_=[],this.vl=null,this.pl=null,this.x_=new Kb,this.C_=new Map,this.y_=bc.M_(),this.k_=!0,this.P_=new Ut,this.T_=new Ut,this.R_=new Ut,this.D_=null,this.V_=null,this.I_=new Map,this.B_=-1,this.A_=[],this.ys=e,this.Ml=i,this.E_=e.rightOffset,this.z_=e.barSpacing,this.ts=t,this.i_=r,this.L_(),this.x_.o_(e.uniformDistribution),this.O_()}N(){return this.ys}N_(t){fi(this.Ml,t),this.W_(),this.L_()}hr(t,e){fi(this.ys,t),this.ys.fixLeftEdge&&this.F_(),this.ys.fixRightEdge&&this.H_(),t.barSpacing!==void 0&&this.ts.dn(t.barSpacing),t.rightOffset!==void 0&&this.ts.fn(t.rightOffset),t.minBarSpacing===void 0&&t.maxBarSpacing===void 0||this.ts.dn(t.barSpacing??this.z_),t.ignoreWhitespaceIndices!==void 0&&t.ignoreWhitespaceIndices!==this.ys.ignoreWhitespaceIndices&&this.O_(),this.W_(),this.L_(),this.R_.p()}Rs(t){return this.S_[t]?.time??null}ss(t){return this.S_[t]??null}U_(t,e){if(this.S_.length<1)return null;if(this.i_.key(t)>this.i_.key(this.S_[this.S_.length-1].time))return e?this.S_.length-1:null;let i=Dc(this.S_,this.i_.key(t),(r,s)=>this.i_.key(r.time)<s);return this.i_.key(t)<this.i_.key(this.S_[i].time)?e?i:null:i}Ki(){return this.fo===0||this.S_.length===0||this.b_===null}q_(){return this.S_.length>0}ye(){return this.Y_(),this.y_.w_()}j_(){return this.Y_(),this.y_.g_()}K_(){let t=this.ye();if(t===null)return null;let e={from:t.Uh(),to:t.bi()};return this.X_(e)}X_(t){let e=Math.round(t.from),i=Math.round(t.to),r=le(this.Z_()),s=le(this.G_());return{from:le(this.ss(Math.max(r,e))),to:le(this.ss(Math.min(s,i)))}}J_(t){return{from:le(this.U_(t.from,!0)),to:le(this.U_(t.to,!0))}}Qi(){return this.fo}To(t){if(!isFinite(t)||t<=0||this.fo===t)return;let e=this.j_(),i=this.fo;if(this.fo=t,this.k_=!0,this.ys.lockVisibleTimeRangeOnResize&&i!==0){let r=this.z_*t/i;this.z_=r}if(this.ys.fixLeftEdge&&e!==null&&e.Uh()<=0){let r=i-t;this.E_-=Math.round(r/this.z_)+1,this.k_=!0}this.Q_(),this.tu()}qt(t){if(this.Ki()||!ch(t))return 0;let e=this.iu()+this.E_-t;return this.fo-(e+.5)*this.z_-1}su(t,e){let i=this.iu(),r=e===void 0?0:e.from,s=e===void 0?t.length:e.to;for(let o=r;o<s;o++){let a=t[o].wt,l=i+this.E_-a,c=this.fo-(l+.5)*this.z_-1;t[o]._t=c}}nu(t,e){let i=Math.ceil(this.eu(t));return e&&this.ys.ignoreWhitespaceIndices&&!this.ru(i)?this.hu(i):i}fn(t){this.k_=!0,this.E_=t,this.tu(),this.ts.au(),this.ts.ar()}lu(){return this.z_}dn(t){this.ou(t),this.tu(),this.ts.au(),this.ts.ar()}_u(){return this.E_}Va(){if(this.Ki())return null;if(this.V_!==null)return this.V_;let t=this.z_,e=5*(this.ts.N().layout.fontSize+4)/8*(this.ys.tickMarkMaxCharacterLength||8),i=Math.round(e/t),r=le(this.ye()),s=Math.max(r.Uh(),r.Uh()-i),o=Math.max(r.bi(),r.bi()-i),a=this.x_.c_(t,e,this.ys.ignoreWhitespaceIndices,this.I_,this.B_),l=this.Z_()+i,c=this.G_()-i,u=this.uu(),d=this.ys.fixLeftEdge||u,h=this.ys.fixRightEdge||u,p=0;for(let _ of a){if(!(s<=_.index&&_.index<=o))continue;let A;p<this.A_.length?(A=this.A_[p],A.coord=this.qt(_.index),A.label=this.cu(_),A.weight=_.weight):(A={needAlignCoordinate:!1,coord:this.qt(_.index),label:this.cu(_),weight:_.weight},this.A_.push(A)),this.z_>e/2&&!u?A.needAlignCoordinate=!1:A.needAlignCoordinate=d&&_.index<=l||h&&_.index>=c,p++}return this.A_.length=p,this.V_=this.A_,this.A_}du(){this.k_=!0,this.dn(this.ys.barSpacing),this.fn(this.ys.rightOffset)}fu(t){this.k_=!0,this.b_=t,this.tu(),this.F_()}pu(t,e){let i=this.eu(t),r=this.lu(),s=r+e*(r/10);this.dn(s),this.ys.rightBarStaysOnScroll||this.fn(this._u()+(i-this.eu(t)))}so(t){this.vl&&this.ao(),this.pl===null&&this.D_===null&&(this.Ki()||(this.pl=t,this.vu()))}no(t){if(this.D_===null)return;let e=ih(this.fo-t,0,this.fo),i=ih(this.fo-le(this.pl),0,this.fo);e!==0&&i!==0&&this.dn(this.D_.lu*e/i)}eo(){this.pl!==null&&(this.pl=null,this.mu())}ro(t){this.vl===null&&this.D_===null&&(this.Ki()||(this.vl=t,this.vu()))}ho(t){if(this.vl===null)return;let e=(this.vl-t)/this.lu();this.E_=le(this.D_)._u+e,this.k_=!0,this.tu()}ao(){this.vl!==null&&(this.vl=null,this.mu())}wu(){this.gu(this.ys.rightOffset)}gu(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");let i=this.E_,r=performance.now();this.ts._n({Mu:s=>(s-r)/e>=1,bu:s=>{let o=(s-r)/e;return o>=1?t:i+(t-i)*o}})}kt(t,e){this.k_=!0,this.S_=t,this.x_.__(t,e),this.tu()}Su(){return this.P_}xu(){return this.T_}Cu(){return this.R_}iu(){return this.b_||0}yu(t){let e=t.h_();this.ou(this.fo/e),this.E_=t.bi()-this.iu(),this.tu(),this.k_=!0,this.ts.au(),this.ts.ar()}ku(){let t=this.Z_(),e=this.G_();t!==null&&e!==null&&this.yu(new oo(t,e+this.ys.rightOffset))}Pu(t){let e=new oo(t.from,t.to);this.yu(e)}ns(t){return this.Ml.timeFormatter!==void 0?this.Ml.timeFormatter(t.originalTime):this.i_.formatHorzItem(t.time)}O_(){if(!this.ys.ignoreWhitespaceIndices)return;this.I_.clear();let t=this.ts.js();for(let e of t)for(let i of e.ma())this.I_.set(i,!0);this.B_++}uu(){let t=this.ts.N().handleScroll,e=this.ts.N().handleScale;return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}Z_(){return this.S_.length===0?null:0}G_(){return this.S_.length===0?null:this.S_.length-1}Tu(t){return(this.fo-1-t)/this.z_}eu(t){let e=this.Tu(t),i=this.iu()+this.E_-e;return Math.round(1e6*i)/1e6}ou(t){let e=this.z_;this.z_=t,this.Q_(),e!==this.z_&&(this.k_=!0,this.Ru())}Y_(){if(!this.k_)return;if(this.k_=!1,this.Ki())return void this.Du(bc.M_());let t=this.iu(),e=this.fo/this.z_,i=this.E_+t,r=new oo(i-e+1,i);this.Du(new bc(r))}Q_(){let t=ih(this.z_,this.Vu(),this.Iu());this.z_!==t&&(this.z_=t,this.k_=!0)}Iu(){return this.ys.maxBarSpacing>0?this.ys.maxBarSpacing:.5*this.fo}Vu(){return this.ys.fixLeftEdge&&this.ys.fixRightEdge&&this.S_.length!==0?this.fo/this.S_.length:this.ys.minBarSpacing}tu(){let t=this.Bu();t!==null&&this.E_<t&&(this.E_=t,this.k_=!0);let e=this.Au();this.E_>e&&(this.E_=e,this.k_=!0)}Bu(){let t=this.Z_(),e=this.b_;return t===null||e===null?null:t-e-1+(this.ys.fixLeftEdge?this.fo/this.z_:Math.min(2,this.S_.length))}Au(){return this.ys.fixRightEdge?0:this.fo/this.z_-Math.min(2,this.S_.length)}vu(){this.D_={lu:this.lu(),_u:this._u()}}mu(){this.D_=null}cu(t){let e=this.C_.get(t.weight);return e===void 0&&(e=new Gb(i=>this.Eu(i),this.i_),this.C_.set(t.weight,e)),e.s_(t)}Eu(t){return this.i_.formatTickmark(t,this.Ml)}Du(t){let e=this.y_;this.y_=t,OO(e.w_(),this.y_.w_())||this.P_.p(),OO(e.g_(),this.y_.g_())||this.T_.p(),this.Ru()}Ru(){this.V_=null}W_(){this.Ru(),this.C_.clear()}L_(){this.i_.updateFormatter(this.Ml)}F_(){if(!this.ys.fixLeftEdge)return;let t=this.Z_();if(t===null)return;let e=this.ye();if(e===null)return;let i=e.Uh()-t;if(i<0){let r=this.E_-i-1;this.fn(r)}this.Q_()}H_(){this.tu(),this.Q_()}ru(t){return!this.ys.ignoreWhitespaceIndices||this.I_.get(t)||!1}hu(t){let e=function*(r){let s=Math.round(r),o=s<r,a=1;for(;;)o?(yield s+a,yield s-a):(yield s-a,yield s+a),a++}(t),i=this.G_();for(;i;){let r=e.next().value;if(this.I_.get(r))return r;if(r<0||r>i)break}return t}},RO,FO,LO,VO,BO;(function(n){n[n.OnTouchEnd=0]="OnTouchEnd",n[n.OnNextTap=1]="OnNextTap"})(RO||(RO={}));var Xb=class{constructor(t,e,i){this.zu=[],this.Lu=[],this.fo=0,this.Ou=null,this.Nu=new Ut,this.Wu=new Ut,this.Fu=null,this.Hu=t,this.ys=e,this.i_=i,this.bl=new pb(this.ys.layout.colorParsers),this.Uu=new hb(this),this.uh=new Jb(this,e.timeScale,this.ys.localization,i),this.Ct=new wb(this,e.crosshair),this.$u=new Wb(e.crosshair),this.qu(0),this.zu[0].Po(2e3),this.Yu=this.ju(0),this.Ku=this.ju(1)}Bh(){this.Xu(In.gn())}ar(){this.Xu(In.wn())}Zh(){this.Xu(new In(1))}Ah(t){let e=this.Zu(t);this.Xu(e)}Gu(){return this.Ou}Ju(t){if(this.Ou?.Xo===t?.Xo&&this.Ou?.Zo?.Kn===t?.Zo?.Kn)return;let e=this.Ou;this.Ou=t,e!==null&&this.Ah(e.Xo),t!==null&&t.Xo!==e?.Xo&&this.Ah(t.Xo)}N(){return this.ys}hr(t){fi(this.ys,t),this.zu.forEach(e=>e.xo(t)),t.timeScale!==void 0&&this.uh.hr(t.timeScale),t.localization!==void 0&&this.uh.N_(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Nu.p(),this.Yu=this.ju(0),this.Ku=this.ju(1),this.Bh()}Qu(t,e,i=0){let r=this.zu[i];if(r===void 0)return;if(t==="left")return fi(this.ys,{leftPriceScale:e}),r.xo({leftPriceScale:e}),this.Nu.p(),void this.Bh();if(t==="right")return fi(this.ys,{rightPriceScale:e}),r.xo({rightPriceScale:e}),this.Nu.p(),void this.Bh();let s=this.tc(t,i);s!==null&&(s.Wt.hr(e),this.Nu.p())}tc(t,e){let i=this.zu[e];if(i===void 0)return null;let r=i.Co(t);return r!==null?{Us:i,Wt:r}:null}At(){return this.uh}$s(){return this.zu}sc(){return this.Ct}nc(){return this.Wu}ec(t,e){t.Al(e),this.au()}To(t){this.fo=t,this.uh.To(this.fo),this.zu.forEach(e=>e.To(t)),this.au()}rc(t){this.zu.length!==1&&(kn(t>=0&&t<this.zu.length,"Invalid pane index"),this.zu.splice(t,1),this.Bh())}hc(t,e){if(this.zu.length<2)return;kn(t>=0&&t<this.zu.length,"Invalid pane index");let i=this.zu[t],r=this.zu.reduce((d,h)=>d+h.ko(),0),s=this.zu.reduce((d,h)=>d+h.$t(),0),o=s-30*(this.zu.length-1);e=Math.min(o,Math.max(30,e));let a=r/s,l=i.$t();i.Po(e*a);let c=e-l,u=this.zu.length-1;for(let d of this.zu)if(d!==i){let h=Math.min(o,Math.max(30,d.$t()-c/u));c-=d.$t()-h,u-=1;let p=h*a;d.Po(p)}this.Bh()}ac(t,e){kn(t>=0&&t<this.zu.length&&e>=0&&e<this.zu.length,"Invalid pane index");let i=this.zu[t],r=this.zu[e];this.zu[t]=r,this.zu[e]=i,this.Bh()}Eo(t,e,i){t.Eo(e,i)}zo(t,e,i){t.zo(e,i),this.Eh(),this.Xu(this.lc(t,2))}Lo(t,e){t.Lo(e),this.Xu(this.lc(t,2))}Oo(t,e,i){e.Pl()||t.Oo(e,i)}No(t,e,i){e.Pl()||(t.No(e,i),this.Eh(),this.Xu(this.lc(t,2)))}Wo(t,e){e.Pl()||(t.Wo(e),this.Xu(this.lc(t,2)))}Ho(t,e){t.Ho(e),this.Xu(this.lc(t,2))}oc(t){this.uh.so(t)}_c(t,e){let i=this.At();if(i.Ki()||e===0)return;let r=i.Qi();t=Math.max(1,Math.min(t,r)),i.pu(t,e),this.au()}uc(t){this.cc(0),this.dc(t),this.fc()}vc(t){this.uh.no(t),this.au()}mc(){this.uh.eo(),this.ar()}cc(t){this.uh.ro(t)}dc(t){this.uh.ho(t),this.au()}fc(){this.uh.ao(),this.ar()}js(){return this.Lu}wc(t,e,i,r,s){this.Ct.Vs(t,e);let o=NaN,a=this.uh.nu(t,!0),l=this.uh.ye();l!==null&&(a=Math.min(Math.max(l.Uh(),a),l.bi()));let c=r.Ps(),u=c.zt();if(u!==null&&(o=c.Ts(e,u)),o=this.$u.Ma(o,a,r),this.Ct.Es(a,o,r),this.Zh(),!s){let d=v5(r,t,e);this.Ju(d&&{Xo:d.Xo,Zo:d.Zo,Jo:d.Jo||null}),this.Wu.p(this.Ct.Bt(),{x:t,y:e},i)}}gc(t,e,i){let r=i.Ps(),s=r.zt(),o=r.Nt(t,le(s)),a=this.uh.U_(e,!0),l=this.uh.qt(le(a));this.wc(l,o,null,i,!0)}Mc(t){this.sc().Ls(),this.Zh(),t||this.Wu.p(null,null,null)}Eh(){let t=this.Ct.Us();if(t!==null){let e=this.Ct.Bs(),i=this.Ct.As();this.wc(e,i,null,t)}this.Ct.Ns()}bc(t,e,i){let r=this.uh.Rs(0);e!==void 0&&i!==void 0&&this.uh.kt(e,i);let s=this.uh.Rs(0),o=this.uh.iu(),a=this.uh.ye();if(a!==null&&r!==null&&s!==null){let l=a.Te(o),c=this.i_.key(r)>this.i_.key(s),u=t!==null&&t>o&&!c,d=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,h=l&&(i!==void 0||d)&&this.uh.N().shiftVisibleRangeOnNewBar;if(u&&!h){let p=t-o;this.uh.fn(this.uh._u()-p)}}this.uh.fu(t)}Lh(t){t!==null&&t.$o()}Hn(t){if(function(i){return i instanceof Sm}(t))return t;let e=this.zu.find(i=>i.Dt().includes(t));return e===void 0?null:e}au(){this.zu.forEach(t=>t.$o()),this.Eh()}m(){this.zu.forEach(t=>t.m()),this.zu.length=0,this.ys.localization.priceFormatter=void 0,this.ys.localization.percentageFormatter=void 0,this.ys.localization.timeFormatter=void 0}Sc(){return this.Uu}Yn(){return this.Uu.N()}yo(){return this.Nu}xc(t,e){let i=this.qu(e);this.Cc(t,i),this.Lu.push(t),this.Lu.length===1?this.Bh():this.ar()}yc(t){let e=this.Hn(t),i=this.Lu.indexOf(t);kn(i!==-1,"Series not found");let r=le(e);this.Lu.splice(i,1),r.Jl(t),t.m&&t.m(),this.uh.O_(),this.kc(r)}Ih(t,e){let i=le(this.Hn(t));i.Jl(t,!0),i.Zl(t,e,!0)}ku(){let t=In.wn();t.rn(),this.Xu(t)}Pc(t){let e=In.wn();e.ln(t),this.Xu(e)}cn(){let t=In.wn();t.cn(),this.Xu(t)}dn(t){let e=In.wn();e.dn(t),this.Xu(e)}fn(t){let e=In.wn();e.fn(t),this.Xu(e)}_n(t){let e=In.wn();e._n(t),this.Xu(e)}hn(){let t=In.wn();t.hn(),this.Xu(t)}Tc(){return this.ys.rightPriceScale.visible?"right":"left"}Rc(t,e){if(kn(e>=0,"Index should be greater or equal to 0"),e===this.Dc(t))return;let i=le(this.Hn(t));i.Jl(t);let r=this.qu(e);this.Cc(t,r),i.ba().length===0&&this.kc(i)}Vc(){return this.Ku}$(){return this.Yu}Ut(t){let e=this.Ku,i=this.Yu;if(e===i)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),this.Fu===null||this.Fu.mr!==i||this.Fu.wr!==e)this.Fu={mr:i,wr:e,Ic:new Map};else{let s=this.Fu.Ic.get(t);if(s!==void 0)return s}let r=this.bl.tt(i,e,t/100);return this.Fu.Ic.set(t,r),r}Bc(t){return this.zu.indexOf(t)}Xi(){return this.bl}qu(t){if(kn(t>=0,"Index should be greater or equal to 0"),(t=Math.min(this.zu.length,t))<this.zu.length)return this.zu[t];let e=new Sm(this.uh,this);this.zu.push(e);let i=In.gn();return i.Qs(t,{tn:0,sn:!0}),this.Xu(i),e}Dc(t){return this.zu.findIndex(e=>e.Do().includes(t))}lc(t,e){let i=new In(e);if(t!==null){let r=this.zu.indexOf(t);i.Qs(r,{tn:e})}return i}Zu(t,e){return e===void 0&&(e=2),this.lc(this.Hn(t),e)}Xu(t){this.Hu&&this.Hu(t),this.zu.forEach(e=>e.jo().lr().kt())}Cc(t,e){let i=t.N().priceScaleId,r=i!==void 0?i:this.Tc();e.Zl(t,r),Nm(r)||t.hr(t.N())}ju(t){let e=this.ys.layout;return e.background.type==="gradient"?t===0?e.background.topColor:e.background.bottomColor:e.background.color}kc(t){t.ba().length===0&&this.zu.length>1&&(this.zu.splice(this.Bc(t),1),this.Bh())}};function $b(n){return!wa(n)&&!fh(n)}function w5(n){return wa(n)}(function(n){n[n.Disabled=0]="Disabled",n[n.Continuous=1]="Continuous",n[n.OnDataUpdate=2]="OnDataUpdate"})(FO||(FO={})),function(n){n[n.LastBar=0]="LastBar",n[n.LastVisible=1]="LastVisible"}(LO||(LO={})),function(n){n.Solid="solid",n.VerticalGradient="gradient"}(VO||(VO={})),function(n){n[n.Year=0]="Year",n[n.Month=1]="Month",n[n.DayOfMonth=2]="DayOfMonth",n[n.Time=3]="Time",n[n.TimeWithSeconds=4]="TimeWithSeconds"}(BO||(BO={}));var qO=n=>n.getUTCFullYear();function g$(n,t,e){return t.replace(/yyyy/g,(i=>ms(qO(i),4))(n)).replace(/yy/g,(i=>ms(qO(i)%100,2))(n)).replace(/MMMM/g,((i,r)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(r,{month:"long"}))(n,e)).replace(/MMM/g,((i,r)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(r,{month:"short"}))(n,e)).replace(/MM/g,(i=>ms((r=>r.getUTCMonth()+1)(i),2))(n)).replace(/dd/g,(i=>ms((r=>r.getUTCDate())(i),2))(n))}var Cm=class{constructor(t="yyyy-MM-dd",e="default"){this.Ac=t,this.Ec=e}s_(t){return g$(t,this.Ac,this.Ec)}},Qb=class{constructor(t){this.zc=t||"%h:%m:%s"}s_(t){return this.zc.replace("%h",ms(t.getUTCHours(),2)).replace("%m",ms(t.getUTCMinutes(),2)).replace("%s",ms(t.getUTCSeconds(),2))}},m$={Lc:"yyyy-MM-dd",Oc:"%h:%m:%s",Nc:" ",Wc:"default"},Zb=class{constructor(t={}){let e=ne(ne({},m$),t);this.Fc=new Cm(e.Lc,e.Wc),this.Hc=new Qb(e.Oc),this.Uc=e.Nc}s_(t){return`${this.Fc.s_(t)}${this.Uc}${this.Hc.s_(t)}`}};function cm(n){return 60*n*60*1e3}function tb(n){return 60*n*1e3}var um=[{$c:(jO=1,1e3*jO),qc:10},{$c:tb(1),qc:20},{$c:tb(5),qc:21},{$c:tb(30),qc:22},{$c:cm(1),qc:30},{$c:cm(3),qc:31},{$c:cm(6),qc:32},{$c:cm(12),qc:33}],jO;function WO(n,t){if(n.getUTCFullYear()!==t.getUTCFullYear())return 70;if(n.getUTCMonth()!==t.getUTCMonth())return 60;if(n.getUTCDate()!==t.getUTCDate())return 50;for(let e=um.length-1;e>=0;--e)if(Math.floor(t.getTime()/um[e].$c)!==Math.floor(n.getTime()/um[e].$c))return um[e].qc;return 0}function nb(n){let t=n;if(fh(n)&&(t=k2(n)),!$b(t))throw new Error("time must be of type BusinessDay");let e=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{Yc:Math.round(e.getTime()/1e3),jc:t}}function zO(n){if(!w5(n))throw new Error("time must be of type isUTCTimestamp");return{Yc:n}}function k2(n){let t=new Date(n);if(isNaN(t.getTime()))throw new Error(`Invalid date string=${n}, expected format=yyyy-mm-dd`);return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}}function UO(n){fh(n.time)&&(n.time=k2(n.time))}var xm=class{options(){return this.ys}setOptions(t){this.ys=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?function(e){e.forEach(UO)}(t):UO(t)}createConverterToInternalObj(t){return le(function(e){return e.length===0?null:$b(e[0].time)||fh(e[0].time)?nb:zO}(t))}key(t){return typeof t=="object"&&"Yc"in t?t.Yc:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){let e=t;return e.jc===void 0?new Date(1e3*e.Yc).getTime():new Date(Date.UTC(e.jc.year,e.jc.month-1,e.jc.day)).getTime()}convertHorzItemToInternal(t){return w5(e=t)?zO(e):$b(e)?nb(e):nb(k2(e));var e}updateFormatter(t){if(!this.ys)return;let e=t.dateFormat;this.ys.timeScale.timeVisible?this.Kc=new Zb({Lc:e,Oc:this.ys.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Nc:"   ",Wc:t.locale}):this.Kc=new Cm(e,t.locale)}formatHorzItem(t){let e=t;return this.Kc.s_(new Date(1e3*e.Yc))}formatTickmark(t,e){let i=function(s,o,a){switch(s){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.weight,this.ys.timeScale.timeVisible,this.ys.timeScale.secondsVisible),r=this.ys.timeScale;if(r.tickMarkFormatter!==void 0){let s=r.tickMarkFormatter(t.originalTime,i,e.locale);if(s!==null)return s}return function(s,o,a){let l={};switch(o){case 0:l.year="numeric";break;case 1:l.month="short";break;case 2:l.day="numeric";break;case 3:l.hour12=!1,l.hour="2-digit",l.minute="2-digit";break;case 4:l.hour12=!1,l.hour="2-digit",l.minute="2-digit",l.second="2-digit"}let c=s.jc===void 0?new Date(1e3*s.Yc):new Date(Date.UTC(s.jc.year,s.jc.month-1,s.jc.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(a,l)}(t.time,i,e.locale)}maxTickMarkWeight(t){let e=t.reduce(f$,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){(function(i,r=0){if(i.length===0)return;let s=r===0?null:i[r-1].time.Yc,o=s!==null?new Date(1e3*s):null,a=0;for(let l=r;l<i.length;++l){let c=i[l],u=new Date(1e3*c.time.Yc);o!==null&&(c.timeWeight=WO(u,o)),a+=c.time.Yc-(s||c.time.Yc),s=c.time.Yc,o=u}if(r===0&&i.length>1){let l=Math.ceil(a/(i.length-1)),c=new Date(1e3*(i[0].time.Yc-l));i[0].timeWeight=WO(new Date(1e3*i[0].time.Yc),c)}})(t,e)}static Xc(t){return fi({localization:{dateFormat:"dd MMM 'yy"}},t??{})}},Mc=typeof window<"u";function HO(){return!!Mc&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function ib(){return!!Mc&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function e2(n){return n+n%2}function _$(n){Mc&&window.chrome!==void 0&&n.addEventListener("mousedown",t=>{if(t.button===1)return t.preventDefault(),!1})}var Tc=class{constructor(t,e,i){this.Zc=0,this.Gc=null,this.Jc={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.Qc=0,this.td=null,this.sd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.nd=null,this.ed=!1,this.rd=null,this.hd=null,this.ad=!1,this.ld=!1,this.od=!1,this._d=null,this.ud=null,this.dd=null,this.fd=null,this.pd=null,this.vd=null,this.md=null,this.wd=0,this.gd=!1,this.Md=!1,this.bd=!1,this.Sd=0,this.xd=null,this.Cd=!ib(),this.yd=r=>{this.kd(r)},this.Pd=r=>{if(this.Td(r)){let s=this.Rd(r);if(++this.Qc,this.td&&this.Qc>1){let{Dd:o}=this.Vd(kr(r),this.sd);o<30&&!this.od&&this.Id(s,this.Ad.Bd),this.Ed()}}else{let s=this.Rd(r);if(++this.Zc,this.Gc&&this.Zc>1){let{Dd:o}=this.Vd(kr(r),this.Jc);o<5&&!this.ld&&this.zd(s,this.Ad.Ld),this.Od()}}},this.Nd=t,this.Ad=e,this.ys=i,this.Wd()}m(){this._d!==null&&(this._d(),this._d=null),this.ud!==null&&(this.ud(),this.ud=null),this.fd!==null&&(this.fd(),this.fd=null),this.pd!==null&&(this.pd(),this.pd=null),this.vd!==null&&(this.vd(),this.vd=null),this.dd!==null&&(this.dd(),this.dd=null),this.Fd(),this.Od()}Hd(t){this.fd&&this.fd();let e=this.Ud.bind(this);if(this.fd=()=>{this.Nd.removeEventListener("mousemove",e)},this.Nd.addEventListener("mousemove",e),this.Td(t))return;let i=this.Rd(t);this.zd(i,this.Ad.$d),this.Cd=!0}Od(){this.Gc!==null&&clearTimeout(this.Gc),this.Zc=0,this.Gc=null,this.Jc={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Ed(){this.td!==null&&clearTimeout(this.td),this.Qc=0,this.td=null,this.sd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Ud(t){if(this.bd||this.hd!==null||this.Td(t))return;let e=this.Rd(t);this.zd(e,this.Ad.qd),this.Cd=!0}Yd(t){let e=rb(t.changedTouches,le(this.xd));if(e===null||(this.Sd=dm(t),this.md!==null)||this.Md)return;this.gd=!0;let i=this.Vd(kr(e),le(this.hd)),{jd:r,Kd:s,Dd:o}=i;if(this.ad||!(o<5)){if(!this.ad){let a=.5*r,l=s>=a&&!this.ys.Xd(),c=a>s&&!this.ys.Zd();l||c||(this.Md=!0),this.ad=!0,this.od=!0,this.Fd(),this.Ed()}if(!this.Md){let a=this.Rd(t,e);this.Id(a,this.Ad.Gd),vc(t)}}}Jd(t){if(t.button!==0)return;let e=this.Vd(kr(t),le(this.rd)),{Dd:i}=e;if(i>=5&&(this.ld=!0,this.Od()),this.ld){let r=this.Rd(t);this.zd(r,this.Ad.Qd)}}Vd(t,e){let i=Math.abs(e._t-t._t),r=Math.abs(e.ut-t.ut);return{jd:i,Kd:r,Dd:i+r}}tf(t){let e=rb(t.changedTouches,le(this.xd));if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e===null)return;this.xd=null,this.Sd=dm(t),this.Fd(),this.hd=null,this.vd&&(this.vd(),this.vd=null);let i=this.Rd(t,e);if(this.Id(i,this.Ad.if),++this.Qc,this.td&&this.Qc>1){let{Dd:r}=this.Vd(kr(e),this.sd);r<30&&!this.od&&this.Id(i,this.Ad.Bd),this.Ed()}else this.od||(this.Id(i,this.Ad.sf),this.Ad.sf&&vc(t));this.Qc===0&&vc(t),t.touches.length===0&&this.ed&&(this.ed=!1,vc(t))}kd(t){if(t.button!==0)return;let e=this.Rd(t);if(this.rd=null,this.bd=!1,this.pd&&(this.pd(),this.pd=null),HO()&&this.Nd.ownerDocument.documentElement.removeEventListener("mouseleave",this.yd),!this.Td(t))if(this.zd(e,this.Ad.nf),++this.Zc,this.Gc&&this.Zc>1){let{Dd:i}=this.Vd(kr(t),this.Jc);i<5&&!this.ld&&this.zd(e,this.Ad.Ld),this.Od()}else this.ld||this.zd(e,this.Ad.ef)}Fd(){this.nd!==null&&(clearTimeout(this.nd),this.nd=null)}rf(t){if(this.xd!==null)return;let e=t.changedTouches[0];this.xd=e.identifier,this.Sd=dm(t);let i=this.Nd.ownerDocument.documentElement;this.od=!1,this.ad=!1,this.Md=!1,this.hd=kr(e),this.vd&&(this.vd(),this.vd=null);{let s=this.Yd.bind(this),o=this.tf.bind(this);this.vd=()=>{i.removeEventListener("touchmove",s),i.removeEventListener("touchend",o)},i.addEventListener("touchmove",s,{passive:!1}),i.addEventListener("touchend",o,{passive:!1}),this.Fd(),this.nd=setTimeout(this.hf.bind(this,t),240)}let r=this.Rd(t,e);this.Id(r,this.Ad.af),this.td||(this.Qc=0,this.td=setTimeout(this.Ed.bind(this),500),this.sd=kr(e))}lf(t){if(t.button!==0)return;let e=this.Nd.ownerDocument.documentElement;HO()&&e.addEventListener("mouseleave",this.yd),this.ld=!1,this.rd=kr(t),this.pd&&(this.pd(),this.pd=null);{let r=this.Jd.bind(this),s=this.kd.bind(this);this.pd=()=>{e.removeEventListener("mousemove",r),e.removeEventListener("mouseup",s)},e.addEventListener("mousemove",r),e.addEventListener("mouseup",s)}if(this.bd=!0,this.Td(t))return;let i=this.Rd(t);this.zd(i,this.Ad._f),this.Gc||(this.Zc=0,this.Gc=setTimeout(this.Od.bind(this),500),this.Jc=kr(t))}Wd(){this.Nd.addEventListener("mouseenter",this.Hd.bind(this)),this.Nd.addEventListener("touchcancel",this.Fd.bind(this));{let t=this.Nd.ownerDocument,e=i=>{this.Ad.uf&&(i.composed&&this.Nd.contains(i.composedPath()[0])||i.target&&this.Nd.contains(i.target)||this.Ad.uf())};this.ud=()=>{t.removeEventListener("touchstart",e)},this._d=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}ib()&&(this.dd=()=>{this.Nd.removeEventListener("dblclick",this.Pd)},this.Nd.addEventListener("dblclick",this.Pd)),this.Nd.addEventListener("mouseleave",this.cf.bind(this)),this.Nd.addEventListener("touchstart",this.rf.bind(this),{passive:!0}),_$(this.Nd),this.Nd.addEventListener("mousedown",this.lf.bind(this)),this.df(),this.Nd.addEventListener("touchmove",()=>{},{passive:!1})}df(){this.Ad.ff===void 0&&this.Ad.pf===void 0&&this.Ad.vf===void 0||(this.Nd.addEventListener("touchstart",t=>this.mf(t.touches),{passive:!0}),this.Nd.addEventListener("touchmove",t=>{if(t.touches.length===2&&this.md!==null&&this.Ad.pf!==void 0){let e=YO(t.touches[0],t.touches[1])/this.wd;this.Ad.pf(this.md,e),vc(t)}},{passive:!1}),this.Nd.addEventListener("touchend",t=>{this.mf(t.touches)}))}mf(t){t.length===1&&(this.gd=!1),t.length!==2||this.gd||this.ed?this.wf():this.gf(t)}gf(t){let e=this.Nd.getBoundingClientRect()||{left:0,top:0};this.md={_t:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,ut:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.wd=YO(t[0],t[1]),this.Ad.ff!==void 0&&this.Ad.ff(),this.Fd()}wf(){this.md!==null&&(this.md=null,this.Ad.vf!==void 0&&this.Ad.vf())}cf(t){if(this.fd&&this.fd(),this.Td(t)||!this.Cd)return;let e=this.Rd(t);this.zd(e,this.Ad.Mf),this.Cd=!ib()}hf(t){let e=rb(t.touches,le(this.xd));if(e===null)return;let i=this.Rd(t,e);this.Id(i,this.Ad.bf),this.od=!0,this.ed=!0}Td(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents!==void 0?t.sourceCapabilities.firesTouchEvents:dm(t)<this.Sd+500}Id(t,e){e&&e.call(this.Ad,t)}zd(t,e){e&&e.call(this.Ad,t)}Rd(t,e){let i=e||t,r=this.Nd.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-r.left,localY:i.clientY-r.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,Sf:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click",xf:t.type,Cf:i.target,Qo:t.view,yf:()=>{t.type!=="touchstart"&&vc(t)}}}};function YO(n,t){let e=n.clientX-t.clientX,i=n.clientY-t.clientY;return Math.sqrt(e*e+i*i)}function vc(n){n.cancelable&&n.preventDefault()}function kr(n){return{_t:n.pageX,ut:n.pageY}}function dm(n){return n.timeStamp||performance.now()}function rb(n,t){for(let e=0;e<n.length;++e)if(n[e].identifier===t)return n[e];return null}var t2=class{constructor(t,e,i){this.kf=null,this.Pf=null,this.Tf=!0,this.Rf=null,this.Df=t,this.Vf=t.If()[e],this.Bf=t.If()[i],this.Af=document.createElement("tr"),this.Af.style.height="1px",this.Ef=document.createElement("td"),this.Ef.style.position="relative",this.Ef.style.padding="0",this.Ef.style.margin="0",this.Ef.setAttribute("colspan","3"),this.zf(),this.Af.appendChild(this.Ef),this.Tf=this.Df.N().layout.panes.enableResize,this.Tf?this.Lf():(this.kf=null,this.Pf=null)}m(){this.Pf!==null&&this.Pf.m()}Of(){return this.Af}Nf(){return vt({width:this.Vf.Nf().width,height:1})}Wf(){return vt({width:this.Vf.Wf().width,height:1*window.devicePixelRatio})}Ff(t,e,i){let r=this.Wf();t.fillStyle=this.Df.N().layout.panes.separatorColor,t.fillRect(e,i,r.width,r.height)}kt(){this.zf(),this.Df.N().layout.panes.enableResize!==this.Tf&&(this.Tf=this.Df.N().layout.panes.enableResize,this.Tf?this.Lf():(this.kf!==null&&(this.Ef.removeChild(this.kf.Hf),this.Ef.removeChild(this.kf.Uf),this.kf=null),this.Pf!==null&&(this.Pf.m(),this.Pf=null)))}Lf(){let t=document.createElement("div"),e=t.style;e.position="fixed",e.display="none",e.zIndex="49",e.top="0",e.left="0",e.width="100%",e.height="100%",e.cursor="row-resize",this.Ef.appendChild(t);let i=document.createElement("div"),r=i.style;r.position="absolute",r.zIndex="50",r.top="-4px",r.height="9px",r.width="100%",r.backgroundColor="",r.cursor="row-resize",this.Ef.appendChild(i);let s={$d:this.$f.bind(this),Mf:this.qf.bind(this),_f:this.Yf.bind(this),af:this.Yf.bind(this),Qd:this.jf.bind(this),Gd:this.jf.bind(this),nf:this.Kf.bind(this),if:this.Kf.bind(this)};this.Pf=new Tc(i,s,{Xd:()=>!1,Zd:()=>!0}),this.kf={Uf:i,Hf:t}}zf(){this.Ef.style.background=this.Df.N().layout.panes.separatorColor}$f(t){this.kf!==null&&(this.kf.Uf.style.backgroundColor=this.Df.N().layout.panes.separatorHoverColor)}qf(t){this.kf!==null&&this.Rf===null&&(this.kf.Uf.style.backgroundColor="")}Yf(t){if(this.kf===null)return;let e=this.Vf.Xf().ko()+this.Bf.Xf().ko(),i=e/(this.Vf.Nf().height+this.Bf.Nf().height),r=30*i;e<=2*r||(this.Rf={Zf:t.pageY,Gf:this.Vf.Xf().ko(),Jf:e-r,Qf:e,tp:i,ip:r},this.kf.Hf.style.display="block")}jf(t){let e=this.Rf;if(e===null)return;let i=(t.pageY-e.Zf)*e.tp,r=ih(e.Gf+i,e.ip,e.Jf);this.Vf.Xf().Po(r),this.Bf.Xf().Po(e.Qf-r),this.Df.Qt().Bh()}Kf(t){this.Rf!==null&&this.kf!==null&&(this.Rf=null,this.kf.Hf.style.display="none")}};function sb(n,t){return n.sp-t.sp}function ob(n,t,e){let i=(n.sp-t.sp)/(n.wt-t.wt);return Math.sign(i)*Math.min(Math.abs(i),e)}var n2=class{constructor(t,e,i,r){this.np=null,this.ep=null,this.rp=null,this.hp=null,this.ap=null,this.lp=0,this.op=0,this._p=t,this.up=e,this.cp=i,this.Mn=r}dp(t,e){if(this.np!==null){if(this.np.wt===e)return void(this.np.sp=t);if(Math.abs(this.np.sp-t)<this.Mn)return}this.hp=this.rp,this.rp=this.ep,this.ep=this.np,this.np={wt:e,sp:t}}le(t,e){if(this.np===null||this.ep===null||e-this.np.wt>50)return;let i=0,r=ob(this.np,this.ep,this.up),s=sb(this.np,this.ep),o=[r],a=[s];if(i+=s,this.rp!==null){let c=ob(this.ep,this.rp,this.up);if(Math.sign(c)===Math.sign(r)){let u=sb(this.ep,this.rp);if(o.push(c),a.push(u),i+=u,this.hp!==null){let d=ob(this.rp,this.hp,this.up);if(Math.sign(d)===Math.sign(r)){let h=sb(this.rp,this.hp);o.push(d),a.push(h),i+=h}}}}let l=0;for(let c=0;c<o.length;++c)l+=a[c]/i*o[c];Math.abs(l)<this._p||(this.ap={sp:t,wt:e},this.op=l,this.lp=function(c,u){let d=Math.log(u);return Math.log(1*d/-c)/d}(Math.abs(l),this.cp))}bu(t){let e=le(this.ap),i=t-e.wt;return e.sp+this.op*(Math.pow(this.cp,i)-1)/Math.log(this.cp)}Mu(t){return this.ap===null||this.fp(t)===this.lp}fp(t){let e=t-le(this.ap).wt;return Math.min(e,this.lp)}},i2=class{constructor(t,e){this.pp=void 0,this.vp=void 0,this.mp=void 0,this.ps=!1,this.wp=t,this.gp=e,this.Mp()}kt(){this.Mp()}bp(){this.pp&&this.wp.removeChild(this.pp),this.vp&&this.wp.removeChild(this.vp),this.pp=void 0,this.vp=void 0}Sp(){return this.ps!==this.xp()||this.mp!==this.Cp()}Cp(){return this.gp.Qt().Xi().J(this.gp.N().layout.textColor)>160?"dark":"light"}xp(){return this.gp.N().layout.attributionLogo}yp(){let t=new URL(location.href);return t.hostname?"&utm_source="+t.hostname+t.pathname:""}Mp(){this.Sp()&&(this.bp(),this.ps=this.xp(),this.ps&&(this.mp=this.Cp(),this.vp=document.createElement("style"),this.vp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.pp=document.createElement("a"),this.pp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.yp()}`,this.pp.title="Charting by TradingView",this.pp.id="tv-attr-logo",this.pp.target="_blank",this.pp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.pp.toggleAttribute("data-dark",this.mp==="dark"),this.wp.appendChild(this.vp),this.wp.appendChild(this.pp)))}};function Sa(n,t){let e=le(n.ownerDocument).createElement("canvas");n.appendChild(e);let i=Jw(e,{type:"device-pixel-content-box",options:{allowResizeObserver:!0},transform:(r,s)=>({width:Math.max(r.width,s.width),height:Math.max(r.height,s.height)})});return i.resizeCanvasElement(t),i}function Ca(n){n.width=1,n.height=1,n.getContext("2d")?.clearRect(0,0,1,1)}function r2(n,t,e,i){n.ih&&n.ih(t,e,i)}function hm(n,t,e,i){n.nt(t,e,i)}function s2(n,t,e,i){let r=n(e,i);for(let s of r){let o=s.Tt(i);o!==null&&t(o)}}function ab(n,t){return e=>function(i){return i.Wt!==void 0}(e)?(e.Wt()?.wa()??"")!==t?[]:e.ta?.(n)??[]:[]}function GO(n,t,e,i){if(!n.length)return;let r=0,s=n[0].$t(i,!0),o=t===1?e/2-(n[0].Wi()-s/2):n[0].Wi()-s/2-e/2;o=Math.max(0,o);for(let a=1;a<n.length;a++){let l=n[a],c=n[a-1],u=c.$t(i,!1),d=l.Wi(),h=c.Wi();if(t===1?d>h-u:d<h+u){let p=h-u*t;l.Fi(p);let _=p-t*u/2;if((t===1?_<0:_>e)&&o>0){let A=t===1?-1-_:_-e,v=Math.min(A,o);for(let b=r;b<n.length;b++)n[b].Fi(n[b].Wi()+t*v);o-=v}}else r=a,o=t===1?h-u-d:d-(h+u)}}var Dm=class{constructor(t,e,i,r){this.Yi=null,this.kp=null,this.Pp=!1,this.Tp=new ba(200),this.Rp=null,this.Dp=0,this.Vp=!1,this.Ip=()=>{this.Vp||this.yt.Bp().Qt().ar()},this.Ap=()=>{this.Vp||this.yt.Bp().Qt().ar()},this.yt=t,this.ys=e,this.gl=e.layout,this.Uu=i,this.Ep=r==="left",this.zp=ab("normal",r),this.Lp=ab("top",r),this.Op=ab("bottom",r),this.Ef=document.createElement("div"),this.Ef.style.height="100%",this.Ef.style.overflow="hidden",this.Ef.style.width="25px",this.Ef.style.left="0",this.Ef.style.position="relative",this.Np=Sa(this.Ef,vt({width:16,height:16})),this.Np.subscribeSuggestedBitmapSizeChanged(this.Ip);let s=this.Np.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Wp=Sa(this.Ef,vt({width:16,height:16})),this.Wp.subscribeSuggestedBitmapSizeChanged(this.Ap);let o=this.Wp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";let a={_f:this.Yf.bind(this),af:this.Yf.bind(this),Qd:this.jf.bind(this),Gd:this.jf.bind(this),uf:this.Fp.bind(this),nf:this.Kf.bind(this),if:this.Kf.bind(this),Ld:this.Hp.bind(this),Bd:this.Hp.bind(this),$d:this.Up.bind(this),Mf:this.qf.bind(this)};this.Pf=new Tc(this.Wp.canvasElement,a,{Xd:()=>!this.ys.handleScroll.vertTouchDrag,Zd:()=>!0})}m(){this.Pf.m(),this.Wp.unsubscribeSuggestedBitmapSizeChanged(this.Ap),Ca(this.Wp.canvasElement),this.Wp.dispose(),this.Np.unsubscribeSuggestedBitmapSizeChanged(this.Ip),Ca(this.Np.canvasElement),this.Np.dispose(),this.Yi!==null&&this.Yi.io().u(this),this.Yi=null}Of(){return this.Ef}k(){return this.gl.fontSize}$p(){let t=this.Uu.N();return this.Rp!==t.P&&(this.Tp.In(),this.Rp=t.P),t}qp(){if(this.Yi===null)return 0;let t=0,e=this.$p(),i=le(this.Np.canvasElement.getContext("2d",{colorSpace:this.yt.Bp().N().layout.colorSpace}));i.save();let r=this.Yi.Va();i.font=this.Yp(),r.length>0&&(t=Math.max(this.Tp.Vi(i,r[0].Xa),this.Tp.Vi(i,r[r.length-1].Xa)));let s=this.jp();for(let c=s.length;c--;){let u=this.Tp.Vi(i,s[c].ri());u>t&&(t=u)}let o=this.Yi.zt();if(o!==null&&this.kp!==null&&(a=this.ys.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){let c=this.Yi.Ts(1,o),u=this.Yi.Ts(this.kp.height-2,o);t=Math.max(t,this.Tp.Vi(i,this.Yi.Zi(Math.floor(Math.min(c,u))+.11111111111111,o)),this.Tp.Vi(i,this.Yi.Zi(Math.ceil(Math.max(c,u))-.11111111111111,o)))}var a;i.restore();let l=t||34;return e2(Math.ceil(e.S+e.C+e.I+e.B+5+l))}Kp(t){this.kp!==null&&Ir(this.kp,t)||(this.kp=t,this.Vp=!0,this.Np.resizeCanvasElement(t),this.Wp.resizeCanvasElement(t),this.Vp=!1,this.Ef.style.width=`${t.width}px`,this.Ef.style.height=`${t.height}px`)}Xp(){return le(this.kp).width}_s(t){this.Yi!==t&&(this.Yi!==null&&this.Yi.io().u(this),this.Yi=t,t.io().i(this.ol.bind(this),this))}Wt(){return this.Yi}In(){let t=this.yt.Xf();this.yt.Bp().Qt().Ho(t,le(this.Wt()))}Zp(t){if(this.kp===null)return;let e={colorSpace:this.yt.Bp().N().layout.colorSpace};if(t!==1){this.Gp(),this.Np.applySuggestedBitmapSize();let r=fs(this.Np,e);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.Jp(s),this.Qp(s)}),this.yt.tv(r,this.Op),this.iv(r),this.yt.tv(r,this.zp),this.sv(r))}this.Wp.applySuggestedBitmapSize();let i=fs(this.Wp,e);i!==null&&(i.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.nv(i),this.yt.tv(i,this.Lp))}Wf(){return this.Np.bitmapSize}Ff(t,e,i){let r=this.Wf();r.width>0&&r.height>0&&t.drawImage(this.Np.canvasElement,e,i)}kt(){this.Yi?.Va()}Yf(t){if(this.Yi===null||this.Yi.Ki()||!this.ys.handleScale.axisPressedMouseMove.price)return;let e=this.yt.Bp().Qt(),i=this.yt.Xf();this.Pp=!0,e.Eo(i,this.Yi,t.localY)}jf(t){if(this.Yi===null||!this.ys.handleScale.axisPressedMouseMove.price)return;let e=this.yt.Bp().Qt(),i=this.yt.Xf(),r=this.Yi;e.zo(i,r,t.localY)}Fp(){if(this.Yi===null||!this.ys.handleScale.axisPressedMouseMove.price)return;let t=this.yt.Bp().Qt(),e=this.yt.Xf(),i=this.Yi;this.Pp&&(this.Pp=!1,t.Lo(e,i))}Kf(t){if(this.Yi===null||!this.ys.handleScale.axisPressedMouseMove.price)return;let e=this.yt.Bp().Qt(),i=this.yt.Xf();this.Pp=!1,e.Lo(i,this.Yi)}Hp(t){this.ys.handleScale.axisDoubleClickReset.price&&this.In()}Up(t){this.Yi!==null&&(!this.yt.Bp().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Rl()||this.ev(1))}qf(t){this.ev(0)}jp(){let t=[],e=this.Yi===null?void 0:this.Yi;return(i=>{for(let r=0;r<i.length;++r){let s=i[r].Fs(this.yt.Xf(),e);for(let o=0;o<s.length;o++)t.push(s[o])}})(this.yt.Xf().Dt()),t}Jp({context:t,bitmapSize:e}){let{width:i,height:r}=e,s=this.yt.Xf().Qt(),o=s.$(),a=s.Vc();o===a?km(t,0,0,i,r,o):g5(t,0,0,i,r,o,a)}Qp({context:t,bitmapSize:e,horizontalPixelRatio:i}){if(this.kp===null||this.Yi===null||!this.Yi.N().borderVisible)return;t.fillStyle=this.Yi.N().borderColor;let r=Math.max(1,Math.floor(this.$p().S*i)),s;s=this.Ep?e.width-r:0,t.fillRect(s,0,r,e.height)}iv(t){if(this.kp===null||this.Yi===null)return;let e=this.Yi.Va(),i=this.Yi.N(),r=this.$p(),s=this.Ep?this.kp.width-r.C:0;i.borderVisible&&i.ticksVisible&&t.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:l})=>{o.fillStyle=i.borderColor;let c=Math.max(1,Math.floor(l)),u=Math.floor(.5*l),d=Math.round(r.C*a);o.beginPath();for(let h of e)o.rect(Math.floor(s*a),Math.round(h.ka*l)-u,d,c);o.fill()}),t.useMediaCoordinateSpace(({context:o})=>{o.font=this.Yp(),o.fillStyle=i.textColor??this.gl.textColor,o.textAlign=this.Ep?"right":"left",o.textBaseline="middle";let a=this.Ep?Math.round(s-r.I):Math.round(s+r.C+r.I),l=e.map(c=>this.Tp.Di(o,c.Xa));for(let c=e.length;c--;){let u=e[c];o.fillText(u.Xa,a,u.ka+l[c])}})}Gp(){if(this.kp===null||this.Yi===null)return;let t=this.kp.height/2,e=[],i=this.Yi.Dt().slice(),r=this.yt.Xf(),s=this.$p();this.Yi===r.$n()&&this.yt.Xf().Dt().forEach(l=>{r.Un(l)&&i.push(l)});let o=this.Yi.ba()[0],a=this.Yi;i.forEach(l=>{let c=l.Fs(r,a);c.forEach(u=>{u.Fi(null),u.Hi()&&e.push(u)}),o===l&&c.length>0&&(t=c[0].Bi())}),e.forEach(l=>l.Fi(l.Bi())),this.Yi.N().alignLabels&&this.rv(e,s,t)}rv(t,e,i){if(this.kp===null)return;let r=t.filter(o=>o.Bi()<=i),s=t.filter(o=>o.Bi()>i);r.sort((o,a)=>a.Bi()-o.Bi()),r.length&&s.length&&s.push(r[0]),s.sort((o,a)=>o.Bi()-a.Bi());for(let o of t){let a=Math.floor(o.$t(e)/2),l=o.Bi();l>-a&&l<a&&o.Fi(a),l>this.kp.height-a&&l<this.kp.height+a&&o.Fi(this.kp.height-a)}GO(r,1,this.kp.height,e),GO(s,-1,this.kp.height,e)}sv(t){if(this.kp===null)return;let e=this.jp(),i=this.$p(),r=this.Ep?"right":"left";e.forEach(s=>{s.Ui()&&s.Tt(le(this.Yi)).nt(t,i,this.Tp,r)})}nv(t){if(this.kp===null||this.Yi===null)return;let e=this.yt.Bp().Qt(),i=[],r=this.yt.Xf(),s=e.sc().Fs(r,this.Yi);s.length&&i.push(s);let o=this.$p(),a=this.Ep?"right":"left";i.forEach(l=>{l.forEach(c=>{c.Tt(le(this.Yi)).nt(t,o,this.Tp,a)})})}ev(t){this.Ef.style.cursor=t===1?"ns-resize":"default"}ol(){let t=this.qp();this.Dp<t&&this.yt.Bp().Qt().Bh(),this.Dp=t}Yp(){return dh(this.gl.fontSize,this.gl.fontFamily)}};function A$(n,t){return n.Jh?.(t)??[]}function KO(n,t){return n.Ws?.(t)??[]}function JO(n,t){return n.us?.(t)??[]}function y$(n,t){return n.Xh?.(t)??[]}var o2=class n{constructor(t,e){this.kp=vt({width:0,height:0}),this.hv=null,this.av=null,this.lv=null,this.ov=null,this._v=!1,this.uv=new Ut,this.cv=new Ut,this.dv=0,this.fv=!1,this.pv=null,this.vv=!1,this.mv=null,this.wv=null,this.Vp=!1,this.Ip=()=>{this.Vp||this.gv===null||this.ts().ar()},this.Ap=()=>{this.Vp||this.gv===null||this.ts().ar()},this.gp=t,this.gv=e,this.gv.Yo().i(this.Mv.bind(this),this,!0),this.bv=document.createElement("td"),this.bv.style.padding="0",this.bv.style.position="relative";let i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.Sv=document.createElement("td"),this.Sv.style.padding="0",this.xv=document.createElement("td"),this.xv.style.padding="0",this.bv.appendChild(i),this.Np=Sa(i,vt({width:16,height:16})),this.Np.subscribeSuggestedBitmapSizeChanged(this.Ip);let r=this.Np.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Wp=Sa(i,vt({width:16,height:16})),this.Wp.subscribeSuggestedBitmapSizeChanged(this.Ap);let s=this.Wp.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.Af=document.createElement("tr"),this.Af.appendChild(this.Sv),this.Af.appendChild(this.bv),this.Af.appendChild(this.xv),this.Cv(),this.Pf=new Tc(this.Wp.canvasElement,this,{Xd:()=>this.pv===null&&!this.gp.N().handleScroll.vertTouchDrag,Zd:()=>this.pv===null&&!this.gp.N().handleScroll.horzTouchDrag})}m(){this.hv!==null&&this.hv.m(),this.av!==null&&this.av.m(),this.lv=null,this.Wp.unsubscribeSuggestedBitmapSizeChanged(this.Ap),Ca(this.Wp.canvasElement),this.Wp.dispose(),this.Np.unsubscribeSuggestedBitmapSizeChanged(this.Ip),Ca(this.Np.canvasElement),this.Np.dispose(),this.gv!==null&&(this.gv.Yo().u(this),this.gv.m()),this.Pf.m()}Xf(){return le(this.gv)}yv(t){this.gv!==null&&this.gv.Yo().u(this),this.gv=t,this.gv!==null&&this.gv.Yo().i(n.prototype.Mv.bind(this),this,!0),this.Cv(),this.gp.If().indexOf(this)===this.gp.If().length-1?(this.lv=this.lv??new i2(this.bv,this.gp),this.lv.kt()):(this.lv?.bp(),this.lv=null)}Bp(){return this.gp}Of(){return this.Af}Cv(){if(this.gv!==null&&(this.kv(),this.ts().js().length!==0)){if(this.hv!==null){let t=this.gv.Bo();this.hv._s(le(t))}if(this.av!==null){let t=this.gv.Ao();this.av._s(le(t))}}}Pv(){this.hv!==null&&this.hv.kt(),this.av!==null&&this.av.kt()}ko(){return this.gv!==null?this.gv.ko():0}Po(t){this.gv&&this.gv.Po(t)}$d(t){if(!this.gv)return;this.Tv();let e=t.localX,i=t.localY;this.Rv(e,i,t)}_f(t){this.Tv(),this.Dv(),this.Rv(t.localX,t.localY,t)}qd(t){if(!this.gv)return;this.Tv();let e=t.localX,i=t.localY;this.Rv(e,i,t)}ef(t){this.gv!==null&&(this.Tv(),this.Vv(t))}Ld(t){this.gv!==null&&this.Iv(this.cv,t)}Bd(t){this.Ld(t)}Qd(t){this.Tv(),this.Bv(t),this.Rv(t.localX,t.localY,t)}nf(t){this.gv!==null&&(this.Tv(),this.fv=!1,this.Av(t))}sf(t){this.gv!==null&&this.Vv(t)}bf(t){if(this.fv=!0,this.pv===null){let e={x:t.localX,y:t.localY};this.Ev(e,e,t)}}Mf(t){this.gv!==null&&(this.Tv(),this.gv.Qt().Ju(null),this.zv())}Lv(){return this.uv}Ov(){return this.cv}ff(){this.dv=1,this.ts().hn()}pf(t,e){if(!this.gp.N().handleScale.pinch)return;let i=5*(e-this.dv);this.dv=e,this.ts()._c(t._t,i)}af(t){this.fv=!1,this.vv=this.pv!==null,this.Dv();let e=this.ts().sc();this.pv!==null&&e.Vt()&&(this.mv={x:e.si(),y:e.ni()},this.pv={x:t.localX,y:t.localY})}Gd(t){if(this.gv===null)return;let e=t.localX,i=t.localY;if(this.pv===null)this.Bv(t);else{this.vv=!1;let r=le(this.mv),s=r.x+(e-this.pv.x),o=r.y+(i-this.pv.y);this.Rv(s,o,t)}}if(t){this.Bp().N().trackingMode.exitMode===0&&(this.vv=!0),this.Nv(),this.Av(t)}jn(t,e){let i=this.gv;return i===null?null:v5(i,t,e)}Wv(t,e){le(e==="left"?this.hv:this.av).Kp(vt({width:t,height:this.kp.height}))}Nf(){return this.kp}Kp(t){Ir(this.kp,t)||(this.kp=t,this.Vp=!0,this.Np.resizeCanvasElement(t),this.Wp.resizeCanvasElement(t),this.Vp=!1,this.bv.style.width=t.width+"px",this.bv.style.height=t.height+"px")}Fv(){let t=le(this.gv);t.Io(t.Bo()),t.Io(t.Ao());for(let e of t.ba())if(t.Un(e)){let i=e.Wt();i!==null&&t.Io(i),e.Ns()}for(let e of t.Ko())e.Ns()}Wf(){return this.Np.bitmapSize}Ff(t,e,i){let r=this.Wf();r.width>0&&r.height>0&&t.drawImage(this.Np.canvasElement,e,i)}Zp(t){if(t===0||this.gv===null)return;t>1&&this.Fv(),this.hv!==null&&this.hv.Zp(t),this.av!==null&&this.av.Zp(t);let e={colorSpace:this.gp.N().layout.colorSpace};if(t!==1){this.Np.applySuggestedBitmapSize();let r=fs(this.Np,e);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.Jp(s)}),this.gv&&(this.Hv(r,A$),this.Uv(r),this.Hv(r,KO),this.Hv(r,JO)))}this.Wp.applySuggestedBitmapSize();let i=fs(this.Wp,e);i!==null&&(i.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.$v(i),this.Hv(i,y$),this.Hv(i,JO))}qv(){return this.hv}Yv(){return this.av}tv(t,e){this.Hv(t,e)}Mv(){this.gv!==null&&this.gv.Yo().u(this),this.gv=null}Vv(t){this.Iv(this.uv,t)}Iv(t,e){let i=e.localX,r=e.localY;t.v()&&t.p(this.ts().At().nu(i),{x:i,y:r},e)}Jp({context:t,bitmapSize:e}){let{width:i,height:r}=e,s=this.ts(),o=s.$(),a=s.Vc();o===a?km(t,0,0,i,r,a):g5(t,0,0,i,r,o,a)}Uv(t){let e=le(this.gv),i=e.jo().lr().Tt(e);i!==null&&i.nt(t,!1)}$v(t){this.jv(t,KO,hm,this.ts().sc())}Hv(t,e){let i=le(this.gv),r=i.Dt(),s=i.Ko();for(let o of s)this.jv(t,e,r2,o);for(let o of r)this.jv(t,e,r2,o);for(let o of s)this.jv(t,e,hm,o);for(let o of r)this.jv(t,e,hm,o)}jv(t,e,i,r){let s=le(this.gv),o=s.Qt().Gu(),a=o!==null&&o.Xo===r,l=o!==null&&a&&o.Zo!==void 0?o.Zo.Xn:void 0;s2(e,c=>i(c,t,a,l),r,s)}kv(){if(this.gv===null)return;let t=this.gp,e=this.gv.Bo().N().visible,i=this.gv.Ao().N().visible;e||this.hv===null||(this.Sv.removeChild(this.hv.Of()),this.hv.m(),this.hv=null),i||this.av===null||(this.xv.removeChild(this.av.Of()),this.av.m(),this.av=null);let r=t.Qt().Sc();e&&this.hv===null&&(this.hv=new Dm(this,t.N(),r,"left"),this.Sv.appendChild(this.hv.Of())),i&&this.av===null&&(this.av=new Dm(this,t.N(),r,"right"),this.xv.appendChild(this.av.Of()))}Kv(t){return t.Sf&&this.fv||this.pv!==null}Xv(t){return Math.max(0,Math.min(t,this.kp.width-1))}Zv(t){return Math.max(0,Math.min(t,this.kp.height-1))}Rv(t,e,i){this.ts().wc(this.Xv(t),this.Zv(e),i,le(this.gv))}zv(){this.ts().Mc()}Nv(){this.vv&&(this.pv=null,this.zv())}Ev(t,e,i){this.pv=t,this.vv=!1,this.Rv(e.x,e.y,i);let r=this.ts().sc();this.mv={x:r.si(),y:r.ni()}}ts(){return this.gp.Qt()}Av(t){if(!this._v)return;let e=this.ts(),i=this.Xf();if(e.Wo(i,i.Ps()),this.ov=null,this._v=!1,e.fc(),this.wv!==null){let r=performance.now(),s=e.At();this.wv.le(s._u(),r),this.wv.Mu(r)||e._n(this.wv)}}Tv(){this.pv=null}Dv(){if(this.gv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)le(document.activeElement).blur();else{let t=document.getSelection();t!==null&&t.removeAllRanges()}!this.gv.Ps().Ki()&&this.ts().At().Ki()}}Bv(t){if(this.gv===null)return;let e=this.ts(),i=e.At();if(i.Ki())return;let r=this.gp.N(),s=r.handleScroll,o=r.kineticScroll;if((!s.pressedMouseMove||t.Sf)&&(!s.horzTouchDrag&&!s.vertTouchDrag||!t.Sf))return;let a=this.gv.Ps(),l=performance.now();if(this.ov!==null||this.Kv(t)||(this.ov={x:t.clientX,y:t.clientY,Yc:l,Gv:t.localX,Jv:t.localY}),this.ov!==null&&!this._v&&(this.ov.x!==t.clientX||this.ov.y!==t.clientY)){if(t.Sf&&o.touch||!t.Sf&&o.mouse){let c=i.lu();this.wv=new n2(.2/c,7/c,.997,15/c),this.wv.dp(i._u(),this.ov.Yc)}else this.wv=null;a.Ki()||e.Oo(this.gv,a,t.localY),e.cc(t.localX),this._v=!0}this._v&&(a.Ki()||e.No(this.gv,a,t.localY),e.dc(t.localX),this.wv!==null&&this.wv.dp(i._u(),l))}},Em=class{constructor(t,e,i,r,s){this.xt=!0,this.kp=vt({width:0,height:0}),this.Ip=()=>this.Zp(3),this.Ep=t==="left",this.Uu=i.Sc,this.ys=e,this.Qv=r,this.tm=s,this.Ef=document.createElement("div"),this.Ef.style.width="25px",this.Ef.style.height="100%",this.Ef.style.overflow="hidden",this.Np=Sa(this.Ef,vt({width:16,height:16})),this.Np.subscribeSuggestedBitmapSizeChanged(this.Ip)}m(){this.Np.unsubscribeSuggestedBitmapSizeChanged(this.Ip),Ca(this.Np.canvasElement),this.Np.dispose()}Of(){return this.Ef}Nf(){return this.kp}Kp(t){Ir(this.kp,t)||(this.kp=t,this.Np.resizeCanvasElement(t),this.Ef.style.width=`${t.width}px`,this.Ef.style.height=`${t.height}px`,this.xt=!0)}Zp(t){if(t<3&&!this.xt||this.kp.width===0||this.kp.height===0)return;this.xt=!1,this.Np.applySuggestedBitmapSize();let e=fs(this.Np,{colorSpace:this.ys.layout.colorSpace});e!==null&&e.useBitmapCoordinateSpace(i=>{this.Jp(i),this.Qp(i)})}Wf(){return this.Np.bitmapSize}Ff(t,e,i){let r=this.Wf();r.width>0&&r.height>0&&t.drawImage(this.Np.canvasElement,e,i)}Qp({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:r}){if(!this.Qv())return;t.fillStyle=this.ys.timeScale.borderColor;let s=Math.floor(this.Uu.N().S*i),o=Math.floor(this.Uu.N().S*r),a=this.Ep?e.width-s:0;t.fillRect(a,0,s,o)}Jp({context:t,bitmapSize:e}){km(t,0,0,e.width,e.height,this.tm())}};function N2(n){return t=>t.ia?.(n)??[]}var v$=N2("normal"),w$=N2("top"),b$=N2("bottom"),a2=class{constructor(t,e){this.im=null,this.sm=null,this.M=null,this.nm=!1,this.kp=vt({width:0,height:0}),this.rm=new Ut,this.Tp=new ba(5),this.Vp=!1,this.Ip=()=>{this.Vp||this.gp.Qt().ar()},this.Ap=()=>{this.Vp||this.gp.Qt().ar()},this.gp=t,this.i_=e,this.ys=t.N().layout,this.pp=document.createElement("tr"),this.hm=document.createElement("td"),this.hm.style.padding="0",this.am=document.createElement("td"),this.am.style.padding="0",this.Ef=document.createElement("td"),this.Ef.style.height="25px",this.Ef.style.padding="0",this.lm=document.createElement("div"),this.lm.style.width="100%",this.lm.style.height="100%",this.lm.style.position="relative",this.lm.style.overflow="hidden",this.Ef.appendChild(this.lm),this.Np=Sa(this.lm,vt({width:16,height:16})),this.Np.subscribeSuggestedBitmapSizeChanged(this.Ip);let i=this.Np.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Wp=Sa(this.lm,vt({width:16,height:16})),this.Wp.subscribeSuggestedBitmapSizeChanged(this.Ap);let r=this.Wp.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.pp.appendChild(this.hm),this.pp.appendChild(this.Ef),this.pp.appendChild(this.am),this.om(),this.gp.Qt().yo().i(this.om.bind(this),this),this.Pf=new Tc(this.Wp.canvasElement,this,{Xd:()=>!0,Zd:()=>!this.gp.N().handleScroll.horzTouchDrag})}m(){this.Pf.m(),this.im!==null&&this.im.m(),this.sm!==null&&this.sm.m(),this.Wp.unsubscribeSuggestedBitmapSizeChanged(this.Ap),Ca(this.Wp.canvasElement),this.Wp.dispose(),this.Np.unsubscribeSuggestedBitmapSizeChanged(this.Ip),Ca(this.Np.canvasElement),this.Np.dispose()}Of(){return this.pp}_m(){return this.im}um(){return this.sm}_f(t){if(this.nm)return;this.nm=!0;let e=this.gp.Qt();!e.At().Ki()&&this.gp.N().handleScale.axisPressedMouseMove.time&&e.oc(t.localX)}af(t){this._f(t)}uf(){let t=this.gp.Qt();!t.At().Ki()&&this.nm&&(this.nm=!1,this.gp.N().handleScale.axisPressedMouseMove.time&&t.mc())}Qd(t){let e=this.gp.Qt();!e.At().Ki()&&this.gp.N().handleScale.axisPressedMouseMove.time&&e.vc(t.localX)}Gd(t){this.Qd(t)}nf(){this.nm=!1;let t=this.gp.Qt();t.At().Ki()&&!this.gp.N().handleScale.axisPressedMouseMove.time||t.mc()}if(){this.nf()}Ld(){this.gp.N().handleScale.axisDoubleClickReset.time&&this.gp.Qt().cn()}Bd(){this.Ld()}$d(){this.gp.Qt().N().handleScale.axisPressedMouseMove.time&&this.ev(1)}Mf(){this.ev(0)}Nf(){return this.kp}dm(){return this.rm}fm(t,e,i){Ir(this.kp,t)||(this.kp=t,this.Vp=!0,this.Np.resizeCanvasElement(t),this.Wp.resizeCanvasElement(t),this.Vp=!1,this.Ef.style.width=`${t.width}px`,this.Ef.style.height=`${t.height}px`,this.rm.p(t)),this.im!==null&&this.im.Kp(vt({width:e,height:t.height})),this.sm!==null&&this.sm.Kp(vt({width:i,height:t.height}))}pm(){let t=this.vm();return Math.ceil(t.S+t.C+t.k+t.A+t.V+t.wm)}kt(){this.gp.Qt().At().Va()}Wf(){return this.Np.bitmapSize}Ff(t,e,i){let r=this.Wf();r.width>0&&r.height>0&&t.drawImage(this.Np.canvasElement,e,i)}Zp(t){if(t===0)return;let e={colorSpace:this.ys.colorSpace};if(t!==1){this.Np.applySuggestedBitmapSize();let r=fs(this.Np,e);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.Jp(s),this.Qp(s),this.gm(r,b$)}),this.iv(r),this.gm(r,v$)),this.im!==null&&this.im.Zp(t),this.sm!==null&&this.sm.Zp(t)}this.Wp.applySuggestedBitmapSize();let i=fs(this.Wp,e);i!==null&&(i.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.Mm([...this.gp.Qt().js(),this.gp.Qt().sc()],i),this.gm(i,w$))}gm(t,e){let i=this.gp.Qt().js();for(let r of i)s2(e,s=>r2(s,t,!1,void 0),r,void 0);for(let r of i)s2(e,s=>hm(s,t,!1,void 0),r,void 0)}Jp({context:t,bitmapSize:e}){km(t,0,0,e.width,e.height,this.gp.Qt().Vc())}Qp({context:t,bitmapSize:e,verticalPixelRatio:i}){if(this.gp.N().timeScale.borderVisible){t.fillStyle=this.bm();let r=Math.max(1,Math.floor(this.vm().S*i));t.fillRect(0,0,e.width,r)}}iv(t){let e=this.gp.Qt().At(),i=e.Va();if(!i||i.length===0)return;let r=this.i_.maxTickMarkWeight(i),s=this.vm(),o=e.N();o.borderVisible&&o.ticksVisible&&t.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.strokeStyle=this.bm(),a.fillStyle=this.bm();let u=Math.max(1,Math.floor(l)),d=Math.floor(.5*l);a.beginPath();let h=Math.round(s.C*c);for(let p=i.length;p--;){let _=Math.round(i[p].coord*l);a.rect(_-d,0,u,h)}a.fill()}),t.useMediaCoordinateSpace(({context:a})=>{let l=s.S+s.C+s.A+s.k/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this.Yp();for(let c of i)if(c.weight<r){let u=c.needAlignCoordinate?this.Sm(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}this.gp.N().timeScale.allowBoldLabels&&(a.font=this.xm());for(let c of i)if(c.weight>=r){let u=c.needAlignCoordinate?this.Sm(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}})}Sm(t,e,i){let r=this.Tp.Vi(t,i),s=r/2,o=Math.floor(e-s)+.5;return o<0?e+=Math.abs(0-o):o+r>this.kp.width&&(e-=Math.abs(this.kp.width-(o+r))),e}Mm(t,e){let i=this.vm();for(let r of t)for(let s of r.cs())s.Tt().nt(e,i)}bm(){return this.gp.N().timeScale.borderColor}H(){return this.ys.textColor}W(){return this.ys.fontSize}Yp(){return dh(this.W(),this.ys.fontFamily)}xm(){return dh(this.W(),this.ys.fontFamily,"bold")}vm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,k:NaN,P:"",Gi:new ba,wm:0});let t=this.M,e=this.Yp();if(t.P!==e){let i=this.W();t.k=i,t.P=e,t.A=3*i/12,t.V=3*i/12,t.Ji=9*i/12,t.L=0,t.wm=4*i/12,t.Gi.In()}return this.M}ev(t){this.Ef.style.cursor=t===1?"ew-resize":"default"}om(){let t=this.gp.Qt(),e=t.N();e.leftPriceScale.visible||this.im===null||(this.hm.removeChild(this.im.Of()),this.im.m(),this.im=null),e.rightPriceScale.visible||this.sm===null||(this.am.removeChild(this.sm.Of()),this.sm.m(),this.sm=null);let i={Sc:this.gp.Qt().Sc()},r=()=>e.leftPriceScale.borderVisible&&t.At().N().borderVisible,s=()=>t.Vc();e.leftPriceScale.visible&&this.im===null&&(this.im=new Em("left",e,i,r,s),this.hm.appendChild(this.im.Of())),e.rightPriceScale.visible&&this.sm===null&&(this.sm=new Em("right",e,i,r,s),this.am.appendChild(this.sm.Of()))}},S$=!!Mc&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(n=>n.brand.includes("Chromium"))&&!!Mc&&(navigator?.userAgentData?.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0),l2=class{constructor(t,e,i){var r;this.Cm=[],this.ym=[],this.km=0,this.tl=0,this.fo=0,this.Pm=0,this.Tm=0,this.Rm=null,this.Dm=!1,this.uv=new Ut,this.cv=new Ut,this.Wu=new Ut,this.Vm=null,this.Im=null,this.wp=t,this.ys=e,this.i_=i,this.pp=document.createElement("div"),this.pp.classList.add("tv-lightweight-charts"),this.pp.style.overflow="hidden",this.pp.style.direction="ltr",this.pp.style.width="100%",this.pp.style.height="100%",(r=this.pp).style.userSelect="none",r.style.webkitUserSelect="none",r.style.msUserSelect="none",r.style.MozUserSelect="none",r.style.webkitTapHighlightColor="transparent",this.Bm=document.createElement("table"),this.Bm.setAttribute("cellspacing","0"),this.pp.appendChild(this.Bm),this.Am=this.Em.bind(this),lb(this.ys)&&this.zm(!0),this.ts=new Xb(this.Hu.bind(this),this.ys,i),this.Qt().nc().i(this.Lm.bind(this),this),this.Om=new a2(this,this.i_),this.Bm.appendChild(this.Om.Of());let s=e.autoSize&&this.Nm(),o=this.ys.width,a=this.ys.height;if(s||o===0||a===0){let l=t.getBoundingClientRect();o=o||l.width,a=a||l.height}this.Wm(o,a),this.Fm(),t.appendChild(this.pp),this.Hm(),this.ts.At().Cu().i(this.ts.Bh.bind(this.ts),this),this.ts.yo().i(this.ts.Bh.bind(this.ts),this)}Qt(){return this.ts}N(){return this.ys}If(){return this.Cm}Um(){return this.Om}m(){this.zm(!1),this.km!==0&&window.cancelAnimationFrame(this.km),this.ts.nc().u(this),this.ts.At().Cu().u(this),this.ts.yo().u(this),this.ts.m();for(let t of this.Cm)this.Bm.removeChild(t.Of()),t.Lv().u(this),t.Ov().u(this),t.m();this.Cm=[];for(let t of this.ym)this.$m(t);this.ym=[],le(this.Om).m(),this.pp.parentElement!==null&&this.pp.parentElement.removeChild(this.pp),this.Wu.m(),this.uv.m(),this.cv.m(),this.qm()}Wm(t,e,i=!1){if(this.tl===e&&this.fo===t)return;let r=function(a){let l=Math.floor(a.width),c=Math.floor(a.height);return vt({width:l-l%2,height:c-c%2})}(vt({width:t,height:e}));this.tl=r.height,this.fo=r.width;let s=this.tl+"px",o=this.fo+"px";le(this.pp).style.height=s,le(this.pp).style.width=o,this.Bm.style.height=s,this.Bm.style.width=o,i?this.Ym(In.gn(),performance.now()):this.ts.Bh()}Zp(t){t===void 0&&(t=In.gn());for(let e=0;e<this.Cm.length;e++)this.Cm[e].Zp(t.en(e).tn);this.ys.timeScale.visible&&this.Om.Zp(t.nn())}hr(t){let e=lb(this.ys);this.ts.hr(t);let i=lb(this.ys);i!==e&&this.zm(i),t.layout?.panes&&this.jm(),this.Hm(),this.Km(t)}Lv(){return this.uv}Ov(){return this.cv}nc(){return this.Wu}Xm(){this.Rm!==null&&(this.Ym(this.Rm,performance.now()),this.Rm=null);let t=this.Zm(null),e=document.createElement("canvas");e.width=t.width,e.height=t.height;let i=le(e.getContext("2d"));return this.Zm(i),e}Gm(t){return t==="left"&&!this.Jm()||t==="right"&&!this.Qm()||this.Cm.length===0?0:le(t==="left"?this.Cm[0].qv():this.Cm[0].Yv()).Xp()}tw(){return this.ys.autoSize&&this.Vm!==null}Uf(){return this.pp}iw(t){this.Im=t,this.Im?this.Uf().style.setProperty("cursor",t):this.Uf().style.removeProperty("cursor")}sw(){return this.Im}nw(t){return ii(this.Cm[t]).Nf()}jm(){this.ym.forEach(t=>{t.kt()})}Km(t){(t.autoSize!==void 0||!this.Vm||t.width===void 0&&t.height===void 0)&&(t.autoSize&&!this.Vm&&this.Nm(),t.autoSize===!1&&this.Vm!==null&&this.qm(),t.autoSize||t.width===void 0&&t.height===void 0||this.Wm(t.width||this.fo,t.height||this.tl))}Zm(t){let e=0,i=0,r=this.Cm[0],s=(a,l)=>{let c=0;for(let u=0;u<this.Cm.length;u++){let d=this.Cm[u],h=le(a==="left"?d.qv():d.Yv()),p=h.Wf();if(t!==null&&h.Ff(t,l,c),c+=p.height,u<this.Cm.length-1){let _=this.ym[u],A=_.Wf();t!==null&&_.Ff(t,l,c),c+=A.height}}};this.Jm()&&(s("left",0),e+=le(r.qv()).Wf().width);for(let a=0;a<this.Cm.length;a++){let l=this.Cm[a],c=l.Wf();if(t!==null&&l.Ff(t,e,i),i+=c.height,a<this.Cm.length-1){let u=this.ym[a],d=u.Wf();t!==null&&u.Ff(t,e,i),i+=d.height}}e+=r.Wf().width,this.Qm()&&(s("right",e),e+=le(r.Yv()).Wf().width);let o=(a,l,c)=>{le(a==="left"?this.Om._m():this.Om.um()).Ff(le(t),l,c)};if(this.ys.timeScale.visible){let a=this.Om.Wf();if(t!==null){let l=0;this.Jm()&&(o("left",l,i),l=le(r.qv()).Wf().width),this.Om.Ff(t,l,i),l+=a.width,this.Qm()&&o("right",l,i)}i+=a.height}return vt({width:e,height:i})}ew(){let t=0,e=0,i=0;for(let v of this.Cm)this.Jm()&&(e=Math.max(e,le(v.qv()).qp(),this.ys.leftPriceScale.minimumWidth)),this.Qm()&&(i=Math.max(i,le(v.Yv()).qp(),this.ys.rightPriceScale.minimumWidth)),t+=v.ko();e=e2(e),i=e2(i);let r=this.fo,s=this.tl,o=Math.max(r-e-i,0),a=1*this.ym.length,l=this.ys.timeScale.visible,c=l?Math.max(this.Om.pm(),this.ys.timeScale.minimumHeight):0;var u;c=(u=c)+u%2;let d=a+c,h=s<d?0:s-d,p=h/t,_=0,A=window.devicePixelRatio||1;for(let v=0;v<this.Cm.length;++v){let b=this.Cm[v];b.yv(this.ts.$s()[v]);let x=0,N=0;N=v===this.Cm.length-1?Math.ceil((h-_)*A)/A:Math.round(b.ko()*p*A)/A,x=Math.max(N,2),_+=x,b.Kp(vt({width:o,height:x})),this.Jm()&&b.Wv(e,"left"),this.Qm()&&b.Wv(i,"right"),b.Xf()&&this.ts.ec(b.Xf(),x)}this.Om.fm(vt({width:l?o:0,height:c}),l?e:0,l?i:0),this.ts.To(o),this.Pm!==e&&(this.Pm=e),this.Tm!==i&&(this.Tm=i)}zm(t){t?this.pp.addEventListener("wheel",this.Am,{passive:!1}):this.pp.removeEventListener("wheel",this.Am)}rw(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return S$?1/window.devicePixelRatio:1}Em(t){if(!(t.deltaX!==0&&this.ys.handleScroll.mouseWheel||t.deltaY!==0&&this.ys.handleScale.mouseWheel))return;let e=this.rw(t),i=e*t.deltaX/100,r=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),r!==0&&this.ys.handleScale.mouseWheel){let s=Math.sign(r)*Math.min(1,Math.abs(r)),o=t.clientX-this.pp.getBoundingClientRect().left;this.Qt()._c(o,s)}i!==0&&this.ys.handleScroll.mouseWheel&&this.Qt().uc(-80*i)}Ym(t,e){let i=t.nn();i===3&&this.hw(),i!==3&&i!==2||(this.aw(t),this.lw(t,e),this.Om.kt(),this.Cm.forEach(r=>{r.Pv()}),this.Rm?.nn()===3&&(this.Rm.vn(t),this.hw(),this.aw(this.Rm),this.lw(this.Rm,e),t=this.Rm,this.Rm=null)),this.Zp(t)}lw(t,e){for(let i of t.pn())this.mn(i,e)}aw(t){let e=this.ts.$s();for(let i=0;i<e.length;i++)t.en(i).sn&&e[i].Uo()}mn(t,e){let i=this.ts.At();switch(t.an){case 0:i.ku();break;case 1:i.Pu(t.Ft);break;case 2:i.dn(t.Ft);break;case 3:i.fn(t.Ft);break;case 4:i.du();break;case 5:t.Ft.Mu(e)||i.fn(t.Ft.bu(e))}}Hu(t){this.Rm!==null?this.Rm.vn(t):this.Rm=t,this.Dm||(this.Dm=!0,this.km=window.requestAnimationFrame(e=>{if(this.Dm=!1,this.km=0,this.Rm!==null){let i=this.Rm;this.Rm=null,this.Ym(i,e);for(let r of i.pn())if(r.an===5&&!r.Ft.Mu(e)){this.Qt()._n(r.Ft);break}}}))}hw(){this.Fm()}$m(t){this.Bm.removeChild(t.Of()),t.m()}Fm(){let t=this.ts.$s(),e=t.length,i=this.Cm.length;for(let r=e;r<i;r++){let s=ii(this.Cm.pop());this.Bm.removeChild(s.Of()),s.Lv().u(this),s.Ov().u(this),s.m();let o=this.ym.pop();o!==void 0&&this.$m(o)}for(let r=i;r<e;r++){let s=new o2(this,t[r]);if(s.Lv().i(this.ow.bind(this,s),this),s.Ov().i(this._w.bind(this,s),this),this.Cm.push(s),r>0){let o=new t2(this,r-1,r);this.ym.push(o),this.Bm.insertBefore(o.Of(),this.Om.Of())}this.Bm.insertBefore(s.Of(),this.Om.Of())}for(let r=0;r<e;r++){let s=t[r],o=this.Cm[r];o.Xf()!==s?o.yv(s):o.Cv()}this.Hm(),this.ew()}uw(t,e,i,r){let s=new Map;t!==null&&this.ts.js().forEach(d=>{let h=d.Xs().Wr(t);h!==null&&s.set(d,h)});let o;if(t!==null){let d=this.ts.At().ss(t)?.originalTime;d!==void 0&&(o=d)}let a=this.Qt().Gu(),l=a!==null&&a.Xo instanceof Ec?a.Xo:void 0,c=a!==null&&a.Zo!==void 0?a.Zo.Kn:void 0,u=this.cw(r);return{dw:o,Re:t??void 0,fw:e??void 0,pw:u!==-1?u:void 0,mw:l,ww:s,gw:c,Mw:i??void 0}}cw(t){let e=-1;if(t)e=this.Cm.indexOf(t);else{let i=this.Qt().sc().Us();i!==null&&(e=this.Qt().$s().indexOf(i))}return e}ow(t,e,i,r){this.uv.p(()=>this.uw(e,i,r,t))}_w(t,e,i,r){this.cv.p(()=>this.uw(e,i,r,t))}Lm(t,e,i){this.iw(this.Qt().Gu()?.Jo??null),this.Wu.p(()=>this.uw(t,e,i))}Hm(){let t=this.ys.timeScale.visible?"":"none";this.Om.Of().style.display=t}Jm(){return this.Cm[0].Xf().Bo().N().visible}Qm(){return this.Cm[0].Xf().Ao().N().visible}Nm(){return"ResizeObserver"in window&&(this.Vm=new ResizeObserver(t=>{let e=t[t.length-1];e&&this.Wm(e.contentRect.width,e.contentRect.height)}),this.Vm.observe(this.wp,{box:"border-box"}),!0)}qm(){this.Vm!==null&&this.Vm.disconnect(),this.Vm=null}};function lb(n){return!!(n.handleScroll.mouseWheel||n.handleScale.mouseWheel)}function C$(n){return n.open===void 0&&n.value===void 0}function x$(n){return function(t){return t.open!==void 0}(n)||function(t){return t.value!==void 0}(n)}function XO(n,t,e,i){let r=e.value,s={Re:t,wt:n,Ft:[r,r,r,r],dw:i};return e.color!==void 0&&(s.R=e.color),s}function D$(n,t,e,i){let r=e.value,s={Re:t,wt:n,Ft:[r,r,r,r],dw:i};return e.lineColor!==void 0&&(s.vt=e.lineColor),e.topColor!==void 0&&(s.mr=e.topColor),e.bottomColor!==void 0&&(s.wr=e.bottomColor),s}function E$(n,t,e,i){let r=e.value,s={Re:t,wt:n,Ft:[r,r,r,r],dw:i};return e.topLineColor!==void 0&&(s.gr=e.topLineColor),e.bottomLineColor!==void 0&&(s.Mr=e.bottomLineColor),e.topFillColor1!==void 0&&(s.br=e.topFillColor1),e.topFillColor2!==void 0&&(s.Sr=e.topFillColor2),e.bottomFillColor1!==void 0&&(s.Cr=e.bottomFillColor1),e.bottomFillColor2!==void 0&&(s.yr=e.bottomFillColor2),s}function M$(n,t,e,i){let r={Re:t,wt:n,Ft:[e.open,e.high,e.low,e.close],dw:i};return e.color!==void 0&&(r.R=e.color),r}function T$(n,t,e,i){let r={Re:t,wt:n,Ft:[e.open,e.high,e.low,e.close],dw:i};return e.color!==void 0&&(r.R=e.color),e.borderColor!==void 0&&(r.Ht=e.borderColor),e.wickColor!==void 0&&(r.vr=e.wickColor),r}function I$(n,t,e,i,r){let s=ii(r)(e),o=Math.max(...s),a=Math.min(...s),l=s[s.length-1],c=[l,o,a,l],p=e,{time:u,color:d}=p,h=r_(p,["time","color"]);return{Re:t,wt:n,Ft:c,dw:i,se:h,R:d}}function th(n){return n.Ft!==void 0}function $O(n,t){return t.customValues!==void 0&&(n.bw=t.customValues),n}function va(n){return(t,e,i,r,s,o)=>function(a,l){return l?l(a):C$(a)}(i,o)?$O({wt:t,Re:e,dw:r},i):$O(n(t,e,i,r,s),i)}function QO(n){return{Candlestick:va(T$),Bar:va(M$),Area:va(D$),Baseline:va(E$),Histogram:va(XO),Line:va(XO),Custom:va(I$)}[n]}function ZO(n){return{Re:0,Sw:new Map,Hh:n}}function e5(n,t){if(n!==void 0&&n.length!==0)return{xw:t.key(n[0].wt),Cw:t.key(n[n.length-1].wt)}}function t5(n){let t;return n.forEach(e=>{t===void 0&&(t=e.dw)}),ii(t)}var c2=class{constructor(t){this.yw=new Map,this.kw=new Map,this.Pw=new Map,this.Tw=[],this.i_=t}m(){this.yw.clear(),this.kw.clear(),this.Pw.clear(),this.Tw=[]}Rw(t,e){let i=this.yw.size!==0,r=!1,s=this.kw.get(t);if(s!==void 0)if(this.kw.size===1)i=!1,r=!0,this.yw.clear();else for(let l of this.Tw)l.pointData.Sw.delete(t)&&(r=!0);let o=[];if(e.length!==0){let l=e.map(p=>p.time),c=this.i_.createConverterToInternalObj(e),u=QO(t.Rr()),d=t.da(),h=t.pa();o=e.map((p,_)=>{let A=c(p.time),v=this.i_.key(A),b=this.yw.get(v);b===void 0&&(b=ZO(A),this.yw.set(v,b),r=!0);let x=u(A,b.Re,p,l[_],d,h);return b.Sw.set(t,x),x})}i&&this.Dw(),this.Vw(t,o);let a=-1;if(r){let l=[];this.yw.forEach(c=>{l.push({timeWeight:0,time:c.Hh,pointData:c,originalTime:t5(c.Sw)})}),l.sort((c,u)=>this.i_.key(c.time)-this.i_.key(u.time)),a=this.Iw(l)}return this.Bw(t,a,function(l,c,u){let d=e5(l,u),h=e5(c,u);if(d!==void 0&&h!==void 0)return{Aw:!1,zh:d.Cw>=h.Cw&&d.xw>=h.xw}}(this.kw.get(t),s,this.i_))}yc(t){return this.Rw(t,[])}Ew(t,e,i){let r=e;(function(v){v.dw===void 0&&(v.dw=v.time)})(r),this.i_.preprocessData(e);let s=this.i_.createConverterToInternalObj([e])(e.time),o=this.Pw.get(t);if(!i&&o!==void 0&&this.i_.key(s)<this.i_.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${s}`);let a=this.yw.get(this.i_.key(s));if(i&&a===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");let l=a===void 0;a===void 0&&(a=ZO(s),this.yw.set(this.i_.key(s),a));let c=QO(t.Rr()),u=t.da(),d=t.pa(),h=c(s,a.Re,e,r.dw,u,d);a.Sw.set(t,h),i?this.zw(t,h,a.Re):this.Lw(t,h);let p={zh:th(h),Aw:i};if(!l)return this.Bw(t,-1,p);let _={timeWeight:0,time:a.Hh,pointData:a,originalTime:t5(a.Sw)},A=Dc(this.Tw,this.i_.key(_.time),(v,b)=>this.i_.key(v.time)<b);this.Tw.splice(A,0,_);for(let v=A;v<this.Tw.length;++v)cb(this.Tw[v].pointData,v);return this.i_.fillWeightsForPoints(this.Tw,A),this.Bw(t,A,p)}Lw(t,e){let i=this.kw.get(t);i===void 0&&(i=[],this.kw.set(t,i));let r=i.length!==0?i[i.length-1]:null;r===null||this.i_.key(e.wt)>this.i_.key(r.wt)?th(e)&&i.push(e):th(e)?i[i.length-1]=e:i.splice(-1,1),this.Pw.set(t,e.wt)}zw(t,e,i){let r=this.kw.get(t);if(r===void 0)return;let s=Dc(r,i,(o,a)=>o.Re<a);th(e)?r[s]=e:r.splice(s,1)}Vw(t,e){e.length!==0?(this.kw.set(t,e.filter(th)),this.Pw.set(t,e[e.length-1].wt)):(this.kw.delete(t),this.Pw.delete(t))}Dw(){for(let t of this.Tw)t.pointData.Sw.size===0&&this.yw.delete(this.i_.key(t.time))}Iw(t){let e=-1;for(let i=0;i<this.Tw.length&&i<t.length;++i){let r=this.Tw[i],s=t[i];if(this.i_.key(r.time)!==this.i_.key(s.time)){e=i;break}s.timeWeight=r.timeWeight,cb(s.pointData,i)}if(e===-1&&this.Tw.length!==t.length&&(e=Math.min(this.Tw.length,t.length)),e===-1)return-1;for(let i=e;i<t.length;++i)cb(t[i].pointData,i);return this.i_.fillWeightsForPoints(t,e),this.Tw=t,e}Ow(){if(this.kw.size===0)return null;let t=0;return this.kw.forEach(e=>{e.length!==0&&(t=Math.max(t,e[e.length-1].Re))}),t}Bw(t,e,i){let r={Do:new Map,At:{iu:this.Ow()}};if(e!==-1)this.kw.forEach((s,o)=>{r.Do.set(o,{se:s,Nw:o===t?i:void 0})}),this.kw.has(t)||r.Do.set(t,{se:[],Nw:i}),r.At.Ww=this.Tw,r.At.Fw=e;else{let s=this.kw.get(t);r.Do.set(t,{se:s||[],Nw:i})}return r}};function cb(n,t){n.Re=t,n.Sw.forEach(e=>{e.Re=t})}function k$(n,t){return n.wt<t}function N$(n,t){return t<n.wt}function b5(n,t,e){let i=t.Uh(),r=t.bi(),s=Dc(n,i,k$),o=_5(n,r,N$);if(!e)return{from:s,to:o};let a=s,l=o;return s>0&&s<n.length&&n[s].wt>=i&&(a=s-1),o>0&&o<n.length&&n[o-1].wt<=r&&(l=o+1),{from:a,to:l}}var ph=class{constructor(t,e,i){this.Hw=!0,this.Uw=!0,this.$w=!0,this.qw=[],this.Yw=null,this.Jn=t,this.Qn=e,this.jw=i}kt(t){this.Hw=!0,t==="data"&&(this.Uw=!0),t==="options"&&(this.$w=!0)}Tt(){return this.Jn.Vt()?(this.Kw(),this.Yw===null?null:this.Xw):null}Zw(){this.qw=this.qw.map(t=>ne(ne({},t),this.Jn.Rh().Dr(t.wt)))}Gw(){this.Yw=null}Kw(){this.Uw&&(this.Jw(),this.Uw=!1),this.$w&&(this.Zw(),this.$w=!1),this.Hw&&(this.Qw(),this.Hw=!1)}Qw(){let t=this.Jn.Wt(),e=this.Qn.At();if(this.Gw(),e.Ki()||t.Ki())return;let i=e.ye();if(i===null||this.Jn.Xs().zr()===0)return;let r=this.Jn.zt();r!==null&&(this.Yw=b5(this.qw,i,this.jw),this.tg(t,e,r.Ft),this.ig())}},u2=class{constructor(t,e){this.sg=t,this.Yi=e}nt(t,e,i){this.sg.draw(t,this.Yi,e,i)}},d2=class extends ph{constructor(t,e,i){super(t,e,!1),this.sh=i,this.Xw=new u2(this.sh.renderer(),r=>{let s=t.zt();return s===null?null:t.Wt().Nt(r,s.Ft)})}fa(t){return this.sh.priceValueBuilder(t)}va(t){return this.sh.isWhitespace(t)}Jw(){let t=this.Jn.Rh();this.qw=this.Jn.Xs().Hr().map(e=>Ie(ne({wt:e.Re,_t:NaN},t.Dr(e.Re)),{ng:e.se}))}tg(t,e){e.su(this.qw,uh(this.Yw))}ig(){this.sh.update({bars:this.qw.map(P$),barSpacing:this.Qn.At().lu(),visibleRange:this.Yw},this.Jn.N())}};function P$(n){return{x:n._t,time:n.wt,originalData:n.ng,barColor:n.cr}}var O$={color:"#2196f3"},R$=(n,t,e)=>{let i=so(e);return new d2(n,t,i)};function P2(n){let t={value:n.Ft[3],time:n.dw};return n.bw!==void 0&&(t.customValues=n.bw),t}function n5(n){let t=P2(n);return n.R!==void 0&&(t.color=n.R),t}function F$(n){let t=P2(n);return n.vt!==void 0&&(t.lineColor=n.vt),n.mr!==void 0&&(t.topColor=n.mr),n.wr!==void 0&&(t.bottomColor=n.wr),t}function L$(n){let t=P2(n);return n.gr!==void 0&&(t.topLineColor=n.gr),n.Mr!==void 0&&(t.bottomLineColor=n.Mr),n.br!==void 0&&(t.topFillColor1=n.br),n.Sr!==void 0&&(t.topFillColor2=n.Sr),n.Cr!==void 0&&(t.bottomFillColor1=n.Cr),n.yr!==void 0&&(t.bottomFillColor2=n.yr),t}function S5(n){let t={open:n.Ft[0],high:n.Ft[1],low:n.Ft[2],close:n.Ft[3],time:n.dw};return n.bw!==void 0&&(t.customValues=n.bw),t}function V$(n){let t=S5(n);return n.R!==void 0&&(t.color=n.R),t}function B$(n){let t=S5(n),{R:e,Ht:i,vr:r}=n;return e!==void 0&&(t.color=e),i!==void 0&&(t.borderColor=i),r!==void 0&&(t.wickColor=r),t}function h2(n){return{Area:F$,Line:n5,Baseline:L$,Histogram:n5,Bar:V$,Candlestick:B$,Custom:q$}[n]}function q$(n){let t=n.dw;return Ie(ne({},n.se),{time:t})}var j$={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},W$={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},z$={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:f5,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},ub={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},U$={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function i5(){return{width:0,height:0,autoSize:!1,layout:z$,crosshair:j$,grid:W$,overlayPriceScales:ne({},ub),leftPriceScale:Ie(ne({},ub),{visible:!1}),rightPriceScale:Ie(ne({},ub),{visible:!0}),timeScale:U$,localization:{locale:Mc?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}var Mm=class{constructor(t,e,i){this.Df=t,this.eg=e,this.rg=i??0}applyOptions(t){this.Df.Qt().Qu(this.eg,t,this.rg)}options(){return this.Yi().N()}width(){return Nm(this.eg)?this.Df.Gm(this.eg):0}setVisibleRange(t){this.setAutoScale(!1),this.Yi().Nl(new gi(t.from,t.to))}getVisibleRange(){let t=this.Yi().Qe();return t===null?null:{from:t.$e(),to:t.qe()}}setAutoScale(t){this.applyOptions({autoScale:t})}Yi(){return le(this.Df.Qt().tc(this.eg,this.rg)).Wt}},p2=class{constructor(t,e,i,r){this.Df=t,this.yt=i,this.hg=e,this.ag=r}getHeight(){return this.yt.$t()}setHeight(t){let e=this.Df.Qt(),i=e.Bc(this.yt);e.hc(i,t)}paneIndex(){return this.Df.Qt().Bc(this.yt)}moveTo(t){let e=this.paneIndex();e!==t&&(kn(t>=0&&t<this.Df.If().length,"Invalid pane index"),this.Df.Qt().ac(e,t))}getSeries(){return this.yt.Do().map(t=>this.hg(t))??[]}getHTMLElement(){return this.Df.If()[this.paneIndex()].Of()}attachPrimitive(t){this.yt.ua(t),t.attached&&t.attached({chart:this.ag,requestUpdate:()=>this.yt.Qt().Bh()})}detachPrimitive(t){this.yt.ca(t)}priceScale(t){if(this.yt.Co(t)===null)throw new Error(`Cannot find price scale with id: ${t}`);return new Mm(this.Df,t,this.paneIndex())}},H$={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""},Tm=class{constructor(t){this.ir=t}applyOptions(t){this.ir.hr(t)}options(){return this.ir.N()}lg(){return this.ir}},f2=class{constructor(t,e,i,r,s,o){this.og=new Ut,this.Jn=t,this._g=e,this.ug=i,this.i_=s,this.ag=r,this.cg=o}m(){this.og.m()}priceFormatter(){return this.Jn.ra()}priceToCoordinate(t){let e=this.Jn.zt();return e===null?null:this.Jn.Wt().Nt(t,e.Ft)}coordinateToPrice(t){let e=this.Jn.zt();return e===null?null:this.Jn.Wt().Ts(t,e.Ft)}barsInLogicalRange(t){if(t===null)return null;let e=new bc(new oo(t.from,t.to)).w_(),i=this.Jn.Xs();if(i.Ki())return null;let r=i.Wr(e.Uh(),1),s=i.Wr(e.bi(),-1),o=le(i.Lr()),a=le(i.Ks());if(r!==null&&s!==null&&r.Re>s.Re)return{barsBefore:t.from-o,barsAfter:a-t.to};let l={barsBefore:r===null||r.Re===o?t.from-o:r.Re-o,barsAfter:s===null||s.Re===a?a-t.to:a-s.Re};return r!==null&&s!==null&&(l.from=r.dw,l.to=s.dw),l}setData(t){this.i_,this.Jn.Rr(),this._g.dg(this.Jn,t),this.fg("full")}update(t,e=!1){this.Jn.Rr(),this._g.pg(this.Jn,t,e),this.fg("update")}dataByIndex(t,e){let i=this.Jn.Xs().Wr(t,e);return i===null?null:h2(this.seriesType())(i)}data(){let t=h2(this.seriesType());return this.Jn.Xs().Hr().map(e=>t(e))}subscribeDataChanged(t){this.og.i(t)}unsubscribeDataChanged(t){this.og._(t)}applyOptions(t){this.Jn.hr(t)}options(){return gs(this.Jn.N())}priceScale(){return this.ug.priceScale(this.Jn.Wt().wa(),this.getPane().paneIndex())}createPriceLine(t){let e=fi(gs(H$),t),i=this.Jn.Oh(e);return new Tm(i)}removePriceLine(t){this.Jn.Nh(t.lg())}priceLines(){return this.Jn.Wh().map(t=>new Tm(t))}seriesType(){return this.Jn.Rr()}attachPrimitive(t){this.Jn.ua(t),t.attached&&t.attached({chart:this.ag,series:this,requestUpdate:()=>this.Jn.Qt().Bh(),horzScaleBehavior:this.i_})}detachPrimitive(t){this.Jn.ca(t),t.detached&&t.detached(),this.Jn.Qt().Bh()}getPane(){let t=this.Jn,e=le(this.Jn.Qt().Hn(t));return this.cg(e)}moveToPane(t){this.Jn.Qt().Rc(this.Jn,t)}seriesOrder(){let t=this.Jn.Qt().Hn(this.Jn);return t===null?-1:t.Do().indexOf(this.Jn)}setSeriesOrder(t){let e=this.Jn.Qt().Hn(this.Jn);e!==null&&e.qo(this.Jn,t)}fg(t){this.og.v()&&this.og.p(t)}},g2=class{constructor(t,e,i){this.vg=new Ut,this.T_=new Ut,this.rm=new Ut,this.ts=t,this.uh=t.At(),this.Om=e,this.uh.Su().i(this.mg.bind(this)),this.uh.xu().i(this.wg.bind(this)),this.Om.dm().i(this.gg.bind(this)),this.i_=i}m(){this.uh.Su().u(this),this.uh.xu().u(this),this.Om.dm().u(this),this.vg.m(),this.T_.m(),this.rm.m()}scrollPosition(){return this.uh._u()}scrollToPosition(t,e){e?this.uh.gu(t,1e3):this.ts.fn(t)}scrollToRealTime(){this.uh.wu()}getVisibleRange(){let t=this.uh.K_();return t===null?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){let e={from:this.i_.convertHorzItemToInternal(t.from),to:this.i_.convertHorzItemToInternal(t.to)},i=this.uh.J_(e);this.ts.Pc(i)}getVisibleLogicalRange(){let t=this.uh.j_();return t===null?null:{from:t.Uh(),to:t.bi()}}setVisibleLogicalRange(t){kn(t.from<=t.to,"The from index cannot be after the to index."),this.ts.Pc(t)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.ku()}logicalToCoordinate(t){let e=this.ts.At();return e.Ki()?null:e.qt(t)}coordinateToLogical(t){return this.uh.Ki()?null:this.uh.nu(t)}timeToIndex(t,e){let i=this.i_.convertHorzItemToInternal(t);return this.uh.U_(i,e)}timeToCoordinate(t){let e=this.timeToIndex(t,!1);return e===null?null:this.uh.qt(e)}coordinateToTime(t){let e=this.ts.At(),i=e.nu(t),r=e.ss(i);return r===null?null:r.originalTime}width(){return this.Om.Nf().width}height(){return this.Om.Nf().height}subscribeVisibleTimeRangeChange(t){this.vg.i(t)}unsubscribeVisibleTimeRangeChange(t){this.vg._(t)}subscribeVisibleLogicalRangeChange(t){this.T_.i(t)}unsubscribeVisibleLogicalRangeChange(t){this.T_._(t)}subscribeSizeChange(t){this.rm.i(t)}unsubscribeSizeChange(t){this.rm._(t)}applyOptions(t){this.uh.hr(t)}options(){return Ie(ne({},gs(this.uh.N())),{barSpacing:this.uh.lu()})}mg(){this.vg.v()&&this.vg.p(this.getVisibleRange())}wg(){this.T_.v()&&this.T_.p(this.getVisibleLogicalRange())}gg(t){this.rm.p(t.width,t.height)}};function Y$(n){if(n===void 0||n.type==="custom")return;let t=n;t.minMove!==void 0&&t.precision===void 0&&(t.precision=function(e){if(e>=1)return 0;let i=0;for(;i<8;i++){let r=Math.round(e);if(Math.abs(r-e)<1e-8)return i;e*=10}return i}(t.minMove))}function r5(n){return function(t){if(sm(t.handleScale)){let i=t.handleScale;t.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(t.handleScale!==void 0){let{axisPressedMouseMove:i,axisDoubleClickReset:r}=t.handleScale;sm(i)&&(t.handleScale.axisPressedMouseMove={time:i,price:i}),sm(r)&&(t.handleScale.axisDoubleClickReset={time:r,price:r})}let e=t.handleScroll;sm(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(n),n}var m2=class{constructor(t,e,i){this.Mg=new Map,this.bg=new Map,this.Sg=new Ut,this.xg=new Ut,this.Cg=new Ut,this.zu=new WeakMap,this.yg=new c2(e);let r=i===void 0?gs(i5()):fi(gs(i5()),r5(i));this.kg=e,this.Df=new l2(t,r,e),this.Df.Lv().i(o=>{this.Sg.v()&&this.Sg.p(this.Pg(o()))},this),this.Df.Ov().i(o=>{this.xg.v()&&this.xg.p(this.Pg(o()))},this),this.Df.nc().i(o=>{this.Cg.v()&&this.Cg.p(this.Pg(o()))},this);let s=this.Df.Qt();this.Tg=new g2(s,this.Df.Um(),this.kg)}remove(){this.Df.Lv().u(this),this.Df.Ov().u(this),this.Df.nc().u(this),this.Tg.m(),this.Df.m(),this.Mg.clear(),this.bg.clear(),this.Sg.m(),this.xg.m(),this.Cg.m(),this.yg.m()}resize(t,e,i){this.autoSizeActive()||this.Df.Wm(t,e,i)}addCustomSeries(t,e={},i=0){let r=(s=>({type:"Custom",isBuiltIn:!1,defaultOptions:ne(ne({},O$),s.defaultOptions()),Rg:R$,Dg:s}))(so(t));return this.Vg(r,e,i)}addSeries(t,e={},i=0){return this.Vg(t,e,i)}removeSeries(t){let e=ii(this.Mg.get(t)),i=this.yg.yc(e);this.Df.Qt().yc(e),this.Ig(i),this.Mg.delete(t),this.bg.delete(e)}dg(t,e){this.Ig(this.yg.Rw(t,e))}pg(t,e,i){this.Ig(this.yg.Ew(t,e,i))}subscribeClick(t){this.Sg.i(t)}unsubscribeClick(t){this.Sg._(t)}subscribeCrosshairMove(t){this.Cg.i(t)}unsubscribeCrosshairMove(t){this.Cg._(t)}subscribeDblClick(t){this.xg.i(t)}unsubscribeDblClick(t){this.xg._(t)}priceScale(t,e=0){return new Mm(this.Df,t,e)}timeScale(){return this.Tg}applyOptions(t){this.Df.hr(r5(t))}options(){return this.Df.N()}takeScreenshot(){return this.Df.Xm()}removePane(t){this.Df.Qt().rc(t)}swapPanes(t,e){this.Df.Qt().ac(t,e)}autoSizeActive(){return this.Df.tw()}chartElement(){return this.Df.Uf()}panes(){return this.Df.Qt().$s().map(t=>this.Bg(t))}paneSize(t=0){let e=this.Df.nw(t);return{height:e.height,width:e.width}}setCrosshairPosition(t,e,i){let r=this.Mg.get(i);if(r===void 0)return;let s=this.Df.Qt().Hn(r);s!==null&&this.Df.Qt().gc(t,e,s)}clearCrosshairPosition(){this.Df.Qt().Mc(!0)}horzBehaviour(){return this.kg}Vg(t,e={},i=0){kn(t.Rg!==void 0),Y$(e.priceFormat),t.type==="Candlestick"&&function(l){l.borderColor!==void 0&&(l.borderUpColor=l.borderColor,l.borderDownColor=l.borderColor),l.wickColor!==void 0&&(l.wickUpColor=l.wickColor,l.wickDownColor=l.wickColor)}(e);let r=fi(gs(h5),gs(t.defaultOptions),e),s=t.Rg,o=new Ec(this.Df.Qt(),t.type,r,s,t.Dg);this.Df.Qt().xc(o,i);let a=new f2(o,this,this,this,this.kg,l=>this.Bg(l));return this.Mg.set(a,o),this.bg.set(o,a),a}Ig(t){let e=this.Df.Qt();e.bc(t.At.iu,t.At.Ww,t.At.Fw),t.Do.forEach((i,r)=>r.ht(i.se,i.Nw)),e.At().O_(),e.au()}Ag(t){return ii(this.bg.get(t))}Pg(t){let e=new Map;t.ww.forEach((r,s)=>{let o=s.Rr(),a=h2(o)(r);if(o!=="Custom")kn(x$(a));else{let l=s.pa();kn(!l||l(a)===!1)}e.set(this.Ag(s),a)});let i=t.mw!==void 0&&this.bg.has(t.mw)?this.Ag(t.mw):void 0;return{time:t.dw,logical:t.Re,point:t.fw,paneIndex:t.pw,hoveredSeries:i,hoveredObjectId:t.gw,seriesData:e,sourceEvent:t.Mw}}Bg(t){let e=this.zu.get(t);return e||(e=new p2(this.Df,i=>this.Ag(i),t,this),this.zu.set(t,e)),e}};function G$(n){if(fh(n)){let t=document.getElementById(n);return kn(t!==null,`Cannot find element in DOM with id=${n}`),t}return n}function K$(n,t,e){let i=G$(n),r=new m2(i,t,e);return t.setOptions(r.options()),r}function dt(n,t){return K$(n,new xm,xm.Xc(t))}var Im=class extends ph{constructor(t,e){super(t,e,!0)}tg(t,e,i){e.su(this.qw,uh(this.Yw)),t.Hl(this.qw,i,uh(this.Yw))}Eg(t,e){return{wt:t,gt:e,_t:NaN,ut:NaN}}Jw(){let t=this.Jn.Rh();this.qw=this.Jn.Xs().Hr().map(e=>{let i=e.Ft[3];return this.zg(e.Re,i,t)})}};function J$(n,t,e,i,r,s,o){if(t.length===0||i.from>=t.length||i.to<=0)return;let{context:a,horizontalPixelRatio:l,verticalPixelRatio:c}=n,u=t[i.from],d=s(n,u),h=u;if(i.to-i.from<2){let p=r/2;a.beginPath();let _={_t:u._t-p,ut:u.ut},A={_t:u._t+p,ut:u.ut};a.moveTo(_._t*l,_.ut*c),a.lineTo(A._t*l,A.ut*c),o(n,d,_,A)}else{let p=(A,v)=>{o(n,d,h,v),a.beginPath(),d=A,h=v},_=h;a.beginPath(),a.moveTo(u._t*l,u.ut*c);for(let A=i.from+1;A<i.to;++A){_=t[A];let v=s(n,_);switch(e){case 0:a.lineTo(_._t*l,_.ut*c);break;case 1:a.lineTo(_._t*l,t[A-1].ut*c),v!==d&&(p(v,_),a.lineTo(_._t*l,t[A-1].ut*c)),a.lineTo(_._t*l,_.ut*c);break;case 2:{let[b,x]=X$(t,A-1,A);a.bezierCurveTo(b._t*l,b.ut*c,x._t*l,x.ut*c,_._t*l,_.ut*c);break}}e!==1&&v!==d&&(p(v,_),a.moveTo(_._t*l,_.ut*c))}(h!==_||h===_&&e===1)&&o(n,d,h,_)}}var s5=6;function db(n,t){return{_t:n._t-t._t,ut:n.ut-t.ut}}function o5(n,t){return{_t:n._t/t,ut:n.ut/t}}function X$(n,t,e){let i=Math.max(0,t-1),r=Math.min(n.length-1,e+1);var s,o;return[(s=n[t],o=o5(db(n[e],n[i]),s5),{_t:s._t+o._t,ut:s.ut+o.ut}),db(n[e],o5(db(n[r],n[t]),s5))]}function $$(n,t){let e=n.context;e.strokeStyle=t,e.stroke()}var _2=class extends Nr{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et(t){if(this.rt===null)return;let{ot:e,lt:i,Lg:r,Og:s,ct:o,Xt:a,Ng:l}=this.rt;if(i===null)return;let c=t.context;c.lineCap="butt",c.lineWidth=o*t.verticalPixelRatio,Sc(c,a),c.lineJoin="round";let u=this.Wg.bind(this);s!==void 0&&J$(t,e,s,i,r,u,$$),l&&function(d,h,p,_,A){if(_.to-_.from<=0)return;let{horizontalPixelRatio:v,verticalPixelRatio:b,context:x}=d,N=null,T=Math.max(1,Math.floor(v))%2/2,k=p*b+T;for(let C=_.to-1;C>=_.from;--C){let M=h[C];if(M){let O=A(d,M);O!==N&&(x.beginPath(),N!==null&&x.fill(),x.fillStyle=O,N=O);let F=Math.round(M._t*v)+T,j=M.ut*b;x.moveTo(F,j),x.arc(F,j,k,0,2*Math.PI)}}x.fill()}(t,e,l,i,u)}},A2=class extends _2{Wg(t,e){return e.vt}},y2=class extends Im{constructor(){super(...arguments),this.Xw=new A2}zg(t,e,i){return ne(ne({},this.Eg(t,e)),i.Dr(t))}ig(){let t=this.Jn.N(),e={ot:this.qw,Xt:t.lineStyle,Og:t.lineVisible?t.lineType:void 0,ct:t.lineWidth,Ng:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,lt:this.Yw,Lg:this.Qn.At().lu()};this.Xw.ht(e)}},ut={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Rg:(n,t)=>new y2(n,t)};var v2=class extends ph{constructor(t,e){super(t,e,!1)}tg(t,e,i){e.su(this.qw,uh(this.Yw)),t.$l(this.qw,i,uh(this.Yw))}vM(t,e,i){return{wt:t,qh:e.Ft[0],Yh:e.Ft[1],jh:e.Ft[2],Kh:e.Ft[3],_t:NaN,ql:NaN,Yl:NaN,jl:NaN,Kl:NaN}}Jw(){let t=this.Jn.Rh();this.qw=this.Jn.Xs().Hr().map(e=>this.zg(e.Re,e,t))}};var w2=class extends Nr{constructor(){super(...arguments),this.Yt=null,this.uM=0}ht(t){this.Yt=t}et(t){if(this.Yt===null||this.Yt.Xs.length===0||this.Yt.lt===null)return;let{horizontalPixelRatio:e}=t;this.uM=function(s,o){if(s>=2.5&&s<=4)return Math.floor(3*o);let a=1-.2*Math.atan(Math.max(4,s)-4)/(.5*Math.PI),l=Math.floor(s*a*o),c=Math.floor(s*o),u=Math.min(l,c);return Math.max(Math.floor(o),u)}(this.Yt.lu,e),this.uM>=2&&Math.floor(e)%2!=this.uM%2&&this.uM--;let i=this.Yt.Xs;this.Yt.mM&&this.wM(t,i,this.Yt.lt),this.Yt.Mi&&this.Qp(t,i,this.Yt.lt);let r=this.gM(e);(!this.Yt.Mi||this.uM>2*r)&&this.MM(t,i,this.Yt.lt)}wM(t,e,i){if(this.Yt===null)return;let{context:r,horizontalPixelRatio:s,verticalPixelRatio:o}=t,a="",l=Math.min(Math.floor(s),Math.floor(this.Yt.lu*s));l=Math.max(Math.floor(s),Math.min(l,this.uM));let c=Math.floor(.5*l),u=null;for(let d=i.from;d<i.to;d++){let h=e[d];h.pr!==a&&(r.fillStyle=h.pr,a=h.pr);let p=Math.round(Math.min(h.ql,h.Kl)*o),_=Math.round(Math.max(h.ql,h.Kl)*o),A=Math.round(h.Yl*o),v=Math.round(h.jl*o),b=Math.round(s*h._t)-c,x=b+l-1;u!==null&&(b=Math.max(u+1,b),b=Math.min(b,x));let N=x-b+1;r.fillRect(b,A,N,p-A),r.fillRect(b,_+1,N,v-_),u=x}}gM(t){let e=Math.floor(1*t);this.uM<=2*e&&(e=Math.floor(.5*(this.uM-1)));let i=Math.max(Math.floor(t),e);return this.uM<=2*i?Math.max(Math.floor(t),Math.floor(1*t)):i}Qp(t,e,i){if(this.Yt===null)return;let{context:r,horizontalPixelRatio:s,verticalPixelRatio:o}=t,a="",l=this.gM(s),c=null;for(let u=i.from;u<i.to;u++){let d=e[u];d.dr!==a&&(r.fillStyle=d.dr,a=d.dr);let h=Math.round(d._t*s)-Math.floor(.5*this.uM),p=h+this.uM-1,_=Math.round(Math.min(d.ql,d.Kl)*o),A=Math.round(Math.max(d.ql,d.Kl)*o);if(c!==null&&(h=Math.max(c+1,h),h=Math.min(h,p)),this.Yt.lu*s>2*l)ZX(r,h,_,p-h+1,A-_+1,l);else{let v=p-h+1;r.fillRect(h,_,v,A-_+1)}c=p}}MM(t,e,i){if(this.Yt===null)return;let{context:r,horizontalPixelRatio:s,verticalPixelRatio:o}=t,a="",l=this.gM(s);for(let c=i.from;c<i.to;c++){let u=e[c],d=Math.round(Math.min(u.ql,u.Kl)*o),h=Math.round(Math.max(u.ql,u.Kl)*o),p=Math.round(u._t*s)-Math.floor(.5*this.uM),_=p+this.uM-1;if(u.cr!==a){let A=u.cr;r.fillStyle=A,a=A}this.Yt.Mi&&(p+=l,d+=l,_-=l,h-=l),d>h||r.fillRect(p,d,_-p+1,h-d+1)}}},b2=class extends v2{constructor(){super(...arguments),this.Xw=new w2}zg(t,e,i){return ne(ne({},this.vM(t,e,i)),i.Dr(t))}ig(){let t=this.Jn.N();this.Xw.ht({Xs:this.qw,lu:this.Qn.At().lu(),mM:t.wickVisible,Mi:t.borderVisible,lt:this.Yw})}},kt={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Rg:(n,t)=>new b2(n,t)},S2=class extends Nr{constructor(){super(...arguments),this.Yt=null,this.bM=[]}ht(t){this.Yt=t,this.bM=[]}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(this.Yt===null||this.Yt.ot.length===0||this.Yt.lt===null)return;this.bM.length||this.SM(e);let r=Math.max(1,Math.floor(i)),s=Math.round(this.Yt.xM*i)-Math.floor(r/2),o=s+r;for(let a=this.Yt.lt.from;a<this.Yt.lt.to;a++){let l=this.Yt.ot[a],c=this.bM[a-this.Yt.lt.from],u=Math.round(l.ut*i),d,h;t.fillStyle=l.cr,u<=s?(d=u,h=o):(d=s,h=u-Math.floor(r/2)+r),t.fillRect(c.Uh,d,c.bi-c.Uh+1,h-d)}}SM(t){if(this.Yt===null||this.Yt.ot.length===0||this.Yt.lt===null)return void(this.bM=[]);let e=Math.ceil(this.Yt.lu*t)<=1?0:Math.max(1,Math.floor(t)),i=Math.round(this.Yt.lu*t)-e;this.bM=new Array(this.Yt.lt.to-this.Yt.lt.from);for(let s=this.Yt.lt.from;s<this.Yt.lt.to;s++){let o=this.Yt.ot[s],a=Math.round(o._t*t),l,c;if(i%2){let u=(i-1)/2;l=a-u,c=a+u}else{let u=i/2;l=a-u,c=a+u-1}this.bM[s-this.Yt.lt.from]={Uh:l,bi:c,CM:a,ne:o._t*t,wt:o.wt}}for(let s=this.Yt.lt.from+1;s<this.Yt.lt.to;s++){let o=this.bM[s-this.Yt.lt.from],a=this.bM[s-this.Yt.lt.from-1];o.wt===a.wt+1&&o.Uh-a.bi!==e+1&&(a.CM>a.ne?a.bi=o.Uh-e-1:o.Uh=a.bi+e+1)}let r=Math.ceil(this.Yt.lu*t);for(let s=this.Yt.lt.from;s<this.Yt.lt.to;s++){let o=this.bM[s-this.Yt.lt.from];o.bi<o.Uh&&(o.bi=o.Uh);let a=o.bi-o.Uh+1;r=Math.min(a,r)}if(e>0&&r<4)for(let s=this.Yt.lt.from;s<this.Yt.lt.to;s++){let o=this.bM[s-this.Yt.lt.from];o.bi-o.Uh+1>r&&(o.CM>o.ne?o.bi-=1:o.Uh+=1)}}},C2=class extends Im{constructor(){super(...arguments),this.Xw=new S2}zg(t,e,i){return ne(ne({},this.Eg(t,e)),i.Dr(t))}ig(){let t={ot:this.qw,lu:this.Qn.At().lu(),lt:this.Yw,xM:this.Jn.Wt().Nt(this.Jn.N().base,le(this.Jn.zt()).Ft)};this.Xw.ht(t)}},C5={type:"Histogram",isBuiltIn:!0,defaultOptions:{color:"#26a69a",base:0},Rg:(n,t)=>new C2(n,t)};var x2=class{constructor(t,e){this.Jn=t,this.ah=e,this.kM()}detach(){this.Jn.detachPrimitive(this.ah)}getSeries(){return this.Jn}applyOptions(t){this.ah&&this.ah.hr&&this.ah.hr(t)}kM(){this.Jn.attachPrimitive(this.ah)}},Q$={zOrder:"normal"};function ah(n,t){return I2(Math.min(Math.max(n,12),30)*t)}function Ic(n,t){switch(n){case"arrowDown":case"arrowUp":return ah(t,1);case"circle":return ah(t,.8);case"square":return ah(t,.7)}}function x5(n){return function(t){let e=Math.ceil(t);return e%2!=0?e-1:e}(ah(n,1))}function D5(n){return Math.max(ah(n,.1),3)}function a5(n,t,e){return t?n:e?Math.ceil(n/2):0}function l5(n,t,e,i){let r=(Ic("arrowUp",i)-1)/2*e.XM,s=(I2(i/2)-1)/2*e.XM;t.beginPath(),n?(t.moveTo(e._t-r,e.ut),t.lineTo(e._t,e.ut-r),t.lineTo(e._t+r,e.ut),t.lineTo(e._t+s,e.ut),t.lineTo(e._t+s,e.ut+r),t.lineTo(e._t-s,e.ut+r),t.lineTo(e._t-s,e.ut)):(t.moveTo(e._t-r,e.ut),t.lineTo(e._t,e.ut+r),t.lineTo(e._t+r,e.ut),t.lineTo(e._t+s,e.ut),t.lineTo(e._t+s,e.ut-r),t.lineTo(e._t-s,e.ut-r),t.lineTo(e._t-s,e.ut)),t.fill()}function c5(n,t,e,i,r,s){let o=(Ic("arrowUp",i)-1)/2,a=(I2(i/2)-1)/2;return r>=t-a-2&&r<=t+a+2&&s>=(n?e:e-o)-2&&s<=(n?e+o:e)+2?!0:(()=>{if(r<t-o-3||r>t+o+3||s<(n?e-o-3:e)||s>(n?e:e+o+3))return!1;let l=Math.abs(r-t);return Math.abs(s-e)+3>=l/2})()}var D2=class{constructor(){this.Yt=null,this.On=new ba,this.W=-1,this.F="",this.Rp="",this.ZM="normal"}ht(t){this.Yt=t}Nn(t,e,i){this.W===t&&this.F===e||(this.W=t,this.F=e,this.Rp=dh(t,e),this.On.In()),this.ZM=i}jn(t,e){if(this.Yt===null||this.Yt.lt===null)return null;for(let i=this.Yt.lt.from;i<this.Yt.lt.to;i++){let r=this.Yt.ot[i];if(r&&eQ(r,t,e))return{zOrder:"normal",externalId:r.Kn??""}}return null}draw(t){this.ZM!=="aboveSeries"&&t.useBitmapCoordinateSpace(e=>{this.et(e)})}drawBackground(t){this.ZM==="aboveSeries"&&t.useBitmapCoordinateSpace(e=>{this.et(e)})}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(this.Yt!==null&&this.Yt.lt!==null){t.textBaseline="middle",t.font=this.Rp;for(let r=this.Yt.lt.from;r<this.Yt.lt.to;r++){let s=this.Yt.ot[r];s.ri!==void 0&&(s.ri.Qi=this.On.Vi(t,s.ri.GM),s.ri.$t=this.W,s.ri._t=s._t-s.ri.Qi/2),Z$(s,t,e,i)}}}};function Z$(n,t,e,i){t.fillStyle=n.R,n.ri!==void 0&&function(r,s,o,a,l,c){r.save(),r.scale(l,c),r.fillText(s,o,a),r.restore()}(t,n.ri.GM,n.ri._t,n.ri.ut,e,i),function(r,s,o){if(r.zr!==0){switch(r.JM){case"arrowDown":return void l5(!1,s,o,r.zr);case"arrowUp":return void l5(!0,s,o,r.zr);case"circle":return void function(a,l,c){let u=(Ic("circle",c)-1)/2;a.beginPath(),a.arc(l._t,l.ut,u*l.XM,0,2*Math.PI,!1),a.fill()}(s,o,r.zr);case"square":return void function(a,l,c){let u=Ic("square",c),d=(u-1)*l.XM/2,h=l._t-d,p=l.ut-d;a.fillRect(h,p,u*l.XM,u*l.XM)}(s,o,r.zr)}r.JM}}(n,t,function(r,s,o){let a=Math.max(1,Math.floor(s))%2/2;return{_t:Math.round(r._t*s)+a,ut:r.ut*o,XM:s}}(n,e,i))}function eQ(n,t,e){return!(n.ri===void 0||!function(i,r,s,o,a,l){let c=o/2;return a>=i&&a<=i+s&&l>=r-c&&l<=r+c}(n.ri._t,n.ri.ut,n.ri.Qi,n.ri.$t,t,e))||function(i,r,s){if(i.zr===0)return!1;switch(i.JM){case"arrowDown":return c5(!0,i._t,i.ut,i.zr,r,s);case"arrowUp":return c5(!1,i._t,i.ut,i.zr,r,s);case"circle":return function(o,a,l,c,u){let d=2+Ic("circle",l)/2,h=o-c,p=a-u;return Math.sqrt(h*h+p*p)<=d}(i._t,i.ut,i.zr,r,s);case"square":return function(o,a,l,c,u){let d=Ic("square",l),h=(d-1)/2,p=o-h,_=a-h;return c>=p&&c<=p+d&&u>=_&&u<=_+d}(i._t,i.ut,i.zr,r,s)}}(n,t,e)}function u5(n){return n==="atPriceTop"||n==="atPriceBottom"||n==="atPriceMiddle"}function tQ(n,t,e,i,r,s,o,a){let l=function(_,A){if(u5(A.position)&&A.price!==void 0)return A.price;if("value"in(v=_)&&typeof v.value=="number")return _.value;var v;if(function(b){return"open"in b&&"high"in b&&"low"in b&&"close"in b}(_)){if(A.position==="inBar")return _.close;if(A.position==="aboveBar")return _.high;if(A.position==="belowBar")return _.low}}(e,t);if(l===void 0)return;let c=u5(t.position),u=a.timeScale(),d=wa(t.size)?Math.max(t.size,0):1,h=x5(u.options().barSpacing)*d,p=h/2;switch(n.zr=h,t.position){case"inBar":case"atPriceMiddle":return n.ut=le(o.priceToCoordinate(l)),void(n.ri!==void 0&&(n.ri.ut=n.ut+p+s+.6*r));case"aboveBar":case"atPriceTop":{let _=c?0:i.QM;return n.ut=le(o.priceToCoordinate(l))-p-_,n.ri!==void 0&&(n.ri.ut=n.ut-p-.6*r,i.QM+=1.2*r),void(c||(i.QM+=h+s))}case"belowBar":case"atPriceBottom":{let _=c?0:i.tb;return n.ut=le(o.priceToCoordinate(l))+p+_,n.ri!==void 0&&(n.ri.ut=n.ut+p+s+.6*r,i.tb+=1.2*r),void(c||(i.tb+=h+s))}}}var E2=class{constructor(t,e,i){this.ib=[],this.xt=!0,this.sb=!0,this.Gt=new D2,this.ge=t,this.gp=e,this.Yt={ot:[],lt:null},this.ys=i}renderer(){if(!this.ge.options().visible)return null;this.xt&&this.nb();let t=this.gp.options().layout;return this.Gt.Nn(t.fontSize,t.fontFamily,this.ys.zOrder),this.Gt.ht(this.Yt),this.Gt}eb(t){this.ib=t,this.kt("data")}kt(t){this.xt=!0,t==="data"&&(this.sb=!0)}rb(t){this.xt=!0,this.ys=t}zOrder(){return this.ys.zOrder==="aboveSeries"?"top":this.ys.zOrder}nb(){let t=this.gp.timeScale(),e=this.ib;this.sb&&(this.Yt.ot=e.map(c=>({wt:c.time,_t:0,ut:0,zr:0,JM:c.shape,R:c.color,Kn:c.id,hb:c.hb,ri:void 0})),this.sb=!1);let i=this.gp.options().layout;this.Yt.lt=null;let r=t.getVisibleLogicalRange();if(r===null)return;let s=new oo(Math.floor(r.from),Math.ceil(r.to));if(this.ge.data()[0]===null||this.Yt.ot.length===0)return;let o=NaN,a=D5(t.options().barSpacing),l={QM:a,tb:a};this.Yt.lt=b5(this.Yt.ot,s,!0);for(let c=this.Yt.lt.from;c<this.Yt.lt.to;c++){let u=e[c];u.time!==o&&(l.QM=a,l.tb=a,o=u.time);let d=this.Yt.ot[c];d._t=le(t.logicalToCoordinate(u.time)),u.text!==void 0&&u.text.length>0&&(d.ri={GM:u.text,_t:0,ut:0,Qi:0,$t:0});let h=this.ge.dataByIndex(u.time,0);h!==null&&tQ(d,u,h,l,i.fontSize,a,this.ge,this.gp)}this.xt=!1}};function d5(n){return ne(ne({},Q$),n)}var M2=class{constructor(t){this.sh=null,this.ib=[],this.ab=[],this.lb=null,this.ge=null,this.gp=null,this.ob=!0,this._b=null,this.ub=null,this.cb=null,this.fb=!0,this.ys=d5(t)}attached(t){this.pb(),this.gp=t.chart,this.ge=t.series,this.sh=new E2(this.ge,le(this.gp),this.ys),this.jM=t.requestUpdate,this.ge.subscribeDataChanged(e=>this.fg(e)),this.fb=!0,this.IM()}IM(){this.jM&&this.jM()}detached(){this.ge&&this.lb&&this.ge.unsubscribeDataChanged(this.lb),this.gp=null,this.ge=null,this.sh=null,this.lb=null}eb(t){this.fb=!0,this.ib=t,this.pb(),this.ob=!0,this.ub=null,this.IM()}mb(){return this.ib}paneViews(){return this.sh?[this.sh]:[]}updateAllViews(){this.wb()}hitTest(t,e){return this.sh?this.sh.renderer()?.jn(t,e)??null:null}autoscaleInfo(t,e){if(this.sh){let i=this.gb();if(i)return{priceRange:null,margins:i}}return null}hr(t){this.ys=d5(ne(ne({},this.ys),t)),this.IM&&this.IM()}gb(){let t=le(this.gp).timeScale().options().barSpacing;if(this.ob||t!==this.cb){if(this.cb=t,this.ib.length>0){let e=D5(t),i=1.5*x5(t)+2*e,r=this.Mb();this._b={above:a5(i,r.aboveBar,r.inBar),below:a5(i,r.belowBar,r.inBar)}}else this._b=null;this.ob=!1}return this._b}Mb(){return this.ub===null&&(this.ub=this.ib.reduce((t,e)=>(t[e.position]||(t[e.position]=!0),t),{inBar:!1,aboveBar:!1,belowBar:!1,atPriceTop:!1,atPriceBottom:!1,atPriceMiddle:!1})),this.ub}pb(){if(!this.fb||!this.gp||!this.ge)return;let t=this.gp.timeScale(),e=this.ge?.data();if(t.getVisibleLogicalRange()==null||!this.ge||e.length===0)return void(this.ab=[]);let i=t.timeToIndex(le(e[0].time),!0);this.ab=this.ib.map((r,s)=>{let o=t.timeToIndex(r.time,!0),a=o<i?1:-1,l=le(this.ge).dataByIndex(o,a),c={time:t.timeToIndex(le(l).time,!1),position:r.position,shape:r.shape,color:r.color,id:r.id,hb:s,text:r.text,size:r.size,price:r.price,dw:r.time};if(r.position==="atPriceTop"||r.position==="atPriceBottom"||r.position==="atPriceMiddle"){if(r.price===void 0)throw new Error(`Price is required for position ${r.position}`);return Ie(ne({},c),{position:r.position,price:r.price})}return Ie(ne({},c),{position:r.position,price:r.price})}),this.fb=!1}wb(t){this.sh&&(this.pb(),this.sh.eb(this.ab),this.sh.rb(this.ys),this.sh.kt(t))}fg(t){this.fb=!0,this.IM()}},T2=class extends x2{constructor(t,e,i){super(t,e),i&&this.setMarkers(i)}setMarkers(t){this.ah.eb(t)}markers(){return this.ah.mb()}};function xa(n,t,e){let i=new T2(n,new M2(e??{}));return t&&i.setMarkers(t),i}var E5=Ie(ne({},h5),{color:"#2196f3"});var nQ=Object.defineProperty,iQ=(n,t,e)=>t in n?nQ(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,O2=(n,t,e)=>iQ(n,typeof t!="symbol"?t+"":t,e),rQ=Ie(ne({},E5),{colors:["#2962FF","#E1575A","#F28E2C","rgb(164, 89, 209)","rgb(27, 156, 133)"]});function sQ(n){return Math.floor(n*.5)}function oQ(n,t,e=1,i){let r=Math.round(t*n),s=Math.round(e*t),o=sQ(s);return{position:r-o,length:s}}function aQ(n,t,e){let i=Math.round(e*n),r=Math.round(e*t);return{position:Math.min(i,r),length:Math.abs(r-i)+1}}var R2=class{constructor(){O2(this,"_data",null),O2(this,"_options",null)}draw(t,e){t.useBitmapCoordinateSpace(i=>this._drawImpl(i,e))}update(t,e){this._data=t,this._options=e}_drawImpl(t,e){if(this._data===null||this._data.bars.length===0||this._data.visibleRange===null||this._options===null)return;let i=this._options,r=this._data.barSpacing,s=this._data.bars.map(a=>{let l=a.originalData.values.length,c=r/(l+1),u=c/2+a.x-r/2+c/2;return{singleBarWidth:c,singleBars:a.originalData.values.map((d,h)=>({y:e(d)??0,color:i.colors[h%i.colors.length],x:u+h*c}))}}),o=e(0)??0;for(let a=this._data.visibleRange.from;a<this._data.visibleRange.to;a++){let l=s[a],c;l.singleBars.forEach(u=>{let d=aQ(o,u.y,t.verticalPixelRatio),h=oQ(u.x,t.horizontalPixelRatio,l.singleBarWidth);t.context.beginPath(),t.context.fillStyle=u.color;let p=c?h.position-c:0;t.context.fillRect(h.position-p,d.position,h.length+p,d.length),c=h.position+h.length})}}},kc=class{constructor(){O2(this,"_renderer"),this._renderer=new R2}priceValueBuilder(t){return[0,...t.values]}isWhitespace(t){var e;return!((e=t.values)!=null&&e.length)}renderer(){return this._renderer}update(t,e){this._renderer.update(t,e)}defaultOptions(){return rQ}};var ao=(()=>{class n{http;baseUrl="https://api.fyers.in/api/v1/";dataUrl="https://data.fyers.in/data-api/v1/";testUrl="https://jsonplaceholder.typicode.com/posts";constructor(e){this.http=e}auth(){let e={headers:new Fe({"Content-Type":"application/json"}),responseType:"json"},i=this.baseUrl+"auth",r={app_id:f.fyersAppId,secret_key:f.fyersSecretId};return this.http.post(i,r,e)}getTokenUrl(e,i){return this.baseUrl+"genrateToken?authorization_code="+e+"&appId="+i}getFunds(e){let i={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"},r=this.baseUrl+"funds";return this.http.get(r,i)}getPositions(e){let i={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"},r=this.baseUrl+"positions";return this.http.get(r,i)}getOrders(e){let i={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"},r=this.baseUrl+"orders";return this.http.get(r,i)}place_order(e,i){let r={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"},s=this.baseUrl+"orders";return this.http.post(s,i,r)}static \u0275fac=function(i){return new(i||n)(ae(Ct))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var T5=Ra(F2());var L2=Ra(F2());var Om=(()=>{class n{http;mapService;constructor(e,i){this.http=e,this.mapService=i}handleSocketMessage(e){console.log("AliceblueService message",e),this.parseSocketMessageNew(e)}parseSocketMessageNew(e){let i=JSON.parse(e),r=new Vd;r.token=Number(i.tk),r.exchange_code=i.e,i.lp&&(r.ltp=Number(i.lp)),i.atp&&(r.atp=Number(i.ap)),i.v&&(r.volume=Number(i.v)),i.o&&(r.open=Number(i.o)),i.h&&(r.high=Number(i.h)),i.l&&(r.low=Number(i.l)),i.c&&(r.close=Number(i.c)),r.ltp&&this.mapService.updateMaps_aliceblue(r)}parseSocketMessage(e){let i=new Uint8Array(e);if(i instanceof Uint8Array){let r=i[0];r===Mr.MARKETDATA?this.parseMarketData(i):r===Mr.COMPACT_MARKETDATA||r===Mr.SNAPQUOTE||r===Mr.FULL_SNAPQUOTE||r===Mr.DPR||(r===Mr.OI?console.log("***** RECEIVED OI"):r===Mr.MARKET_STATUS||Mr.EXCHANGE_MESSAGES)}else console.error("Error while converting binary data to byte array")}parseMarketData(e){let i=new Vd;i.exchange_code=e[1];let r=100;i.exchange_code===3&&(r=1e7),i.token=this.byteArrayToNumber(e.subarray(2,6),24),i.ltp=this.byteArrayToNumber(e.subarray(6,10),24)/r,i.ltt_unix=this.byteArrayToNumber(e.subarray(10,14),24),i.last_traded_qty=this.byteArrayToNumber(e.subarray(14,18),24),i.volume=this.byteArrayToNumber(e.subarray(18,22),24),i.best_bid=this.byteArrayToNumber(e.subarray(22,26),24)/r,i.best_bid_qty=this.byteArrayToNumber(e.subarray(26,30),24),i.best_ask=this.byteArrayToNumber(e.subarray(30,34),24)/r,i.best_ask_qty=this.byteArrayToNumber(e.subarray(34,38),24),i.total_buy_qty=this.byteArrayToNumber(e.subarray(38,46),56),i.total_sell_qty=this.byteArrayToNumber(e.subarray(46,54),56),i.atp=this.byteArrayToNumber(e.subarray(54,58),24)/r,i.exchange_timestamp=this.byteArrayToNumber(e.subarray(58,62),24),i.open=this.byteArrayToNumber(e.subarray(62,66),24)/r,i.high=this.byteArrayToNumber(e.subarray(66,70),24)/r,i.low=this.byteArrayToNumber(e.subarray(70,74),24)/r,i.close=this.byteArrayToNumber(e.subarray(74,78),24)/r,i.year_high=this.byteArrayToNumber(e.subarray(78,82),24)/r,i.year_low=this.byteArrayToNumber(e.subarray(82,86),24)/r,this.updateMaps(i)}convertPayloadToString(e){return String.fromCharCode.apply(null,e)}byteArrayToNumber(e,i){let r=0,s=0,o=0;for(s=i;s>=0;s-=8)r|=(e[o]&255)<<s,o++;return r}updateMaps(e){let i=f.mastersContract.get(e.token);if(i){let r=i.instru,s=i.strike,o=i.optionType,a=!1,l="",c=new Date(i.expiry);c.setHours(0,0,0,0);let u=f.monthlyExpiryDates;r==="USDINR"&&(u=f.monthlyExpiryDatesUSDINR);for(let p in u)if(u.hasOwnProperty(p)&&c.getTime()===u[p].getTime()){a=!0,l=p;break}let d="";if(a)d=l;else{let p=new Date(i.expiry),_=null;p.getMonth()+1===10?_="O":p.getMonth()+1===11?_="N":p.getMonth()+1===12?_="D":_=p.getMonth()+1,d=""+(p.getFullYear()-2e3)+_+("0"+p.getDate()).slice(-2)}let h=r+d+s+o;console.log("updateMaps strike is",h),h.startsWith("FINNIFTY")&&h.endsWith("FUT")&&(h="FINNIFTY",console.log("finnifty fut update")),this.mapService.setLtp(h,e.ltp),this.mapService.setAtp(h,e.atp),this.mapService.setVolume(h,e.volume)}else{let r="";e.token===26e3?r="NIFTY50":e.token===26009?r="BANKNIFTY":e.token===26037?r="FINNIFTY":e.token===1?r="USDINR":console.error(e.token,"not found in masters"),this.mapService.setLtp(r,e.ltp),this.mapService.setAtp(r,e.atp),this.mapService.setVolume(r,e.volume)}}static \u0275fac=function(i){return new(i||n)(ae(Ct),ae(Ue))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var lo=(()=>{class n{aliceblueParserService;heartbeatInterval;websocket;access_token;baseUrl="https://ant.aliceblueonline.com";socket_endpoint="wss://ws1.aliceblueonline.com/NorenWS/";user_id="AB033978";constructor(e){this.aliceblueParserService=e}isSocketConnected(){return!!(this.websocket&&this.websocket.OPEN===1)}connect(e){this.access_token=e,this.websocket=new WebSocket(this.socket_endpoint),this.websocket.onopen=()=>{this.handleOnOpen(event)},this.websocket.onmessage=i=>{this.handleOnMessage(i)},this.websocket.onerror=i=>{this.handleOnError(i)},this.websocket.onclose=i=>{this.handleOnClose(i)}}handleOnOpen(e){if(console.log("Opened Web Socket connection"),f.SocketMode==="aliceblue"){let i=JSON.stringify({susertoken:(0,L2.sha256)((0,L2.sha256)(f.AliceblueSessionId)),t:"c",actid:this.user_id+"_API",uid:this.user_id+"_API",source:"API"});this.sendMessage(i),setTimeout(()=>{this.sendInitialSubscription(),this.sendHeartbeat()},2e3),setTimeout(()=>{f.websocketEvent$.next("connected")},4e3)}}sendHeartbeat(){this.heartbeatInterval=setInterval(()=>{let e=JSON.stringify({t:"h"});this.sendMessage(e)},5e3)}sendInitialSubscription(){console.log("sending initial subscription");let e=JSON.stringify({k:"NSE|26000#NSE|26009#NSE|26037",t:"t"});this.sendMessage(e)}handleOnMessage(e){console.log("handleOnMessage",e),f.SocketMode==="aliceblue"&&this.aliceblueParserService.handleSocketMessage(e.data)}handleOnError(e){console.log("Error in WS connection",e)}handleOnClose(e){console.log("Closed WS connection",e),clearInterval(this.heartbeatInterval),this.websocket=null,setTimeout(()=>{console.log("Reconnecting websocket"),this.connect(this.access_token)},2e3)}closeSocket(){console.log("Closing WS connection manually"),this.websocket.close(),clearInterval(this.heartbeatInterval),this.websocket=null}sendMessage(e){this.websocket&&this.websocket.OPEN===1?(console.log("Sending message over websocket: "+e),this.websocket.send(e)):console.log("Cannot send the message. Socket is not yet opened or it has been closed - ",e)}static \u0275fac=function(i){return new(i||n)(ae(Om))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var co=(()=>{class n{http;webSocketService;baseUrl="https://ant.aliceblueonline.com/rest/AliceBlueAPIService/api/";constructor(e,i){this.http=e,this.webSocketService=i}getMastersContract(e){let i={responseType:"json"};this.http.get("https://v2api.aliceblueonline.com/restpy/contract_master?exch=NFO",i).subscribe(s=>{console.log("AliceblueService getMastersContract",s),this.parseContractMaster(s)},s=>{console.log("AliceblueService getMastersContract error",s)})}parseContractMaster(e){if(e){f.mastersContract.clear();for(let i in e)e[i]instanceof Array&&e[i].forEach(r=>{let s=new Ks;s.token=Number(r.token),s.instru=r.symbol,s.expiry=new Date(r.expiry_date).toDateString(),s.strike=Number(r.strike_price),s.optionType=r.option_type,s.lotSize=Number(r.lot_size),s.exchange=r.exch,s.tradingSymbol=r.trading_symbol,f.mastersContract.set(s.token,s)})}console.log("AliceblueService getMastersContract mastersContract",f.mastersContract),this.getEncKey()}getEncKey(){let e={headers:new Fe({"Content-Type":"application/json"}),responseType:"json"},i=this.baseUrl+"customer/getAPIEncpkey",r={userId:f.AliceblueUserId};this.http.post(i,r,e).subscribe(s=>{console.log("AliceblueService getEncKey res",s),s.stat=="Ok"?(f.AliceblueEncKey=s.encKey,console.log("AliceblueService encKey is",s.encKey),this.getSessionId()):console.log("AliceblueService getEncKey res stat Not OK. Check if you are logged in to Aliceblue web or mobile application.")},s=>{console.log("AliceblueService getEncKey error",s)})}getSessionId(){let e={headers:new Fe({"Content-Type":"application/json"}),responseType:"json"},i=this.baseUrl+"customer/getUserSID",r={userId:f.AliceblueUserId,userData:(0,T5.sha256)(f.AliceblueUserId+f.AliceblueApiKey+f.AliceblueEncKey)};this.http.post(i,r,e).subscribe(s=>{console.log("AliceblueService getSessionId res",s),s.stat=="Ok"?(f.AliceblueSessionId=s.sessionID,console.log("AliceblueService sessionID is",s.sessionID),this.invalidateSocketSess()):console.log("AliceblueService getSessionId res stat Not OK")},s=>{console.log("AliceblueService getSessionId error",s)})}invalidateSocketSess(){let e={headers:new Fe({Authorization:"Bearer "+f.AliceblueUserId+" "+f.AliceblueSessionId,"Content-Type":"application/json"}),responseType:"json"},i=this.baseUrl+"ws/invalidateSocketSess",r={loginType:"API"};this.http.post(i,r,e).subscribe(s=>{console.log("AliceblueService invalidateSocketSess res",s),s.stat=="Ok"?(console.log("AliceblueService invalidateSocketSess is",s.message),this.createSocketSess()):console.log("AliceblueService invalidateSocketSess res stat Not OK")},s=>{console.log("AliceblueService invalidateSocketSess error",s)})}createSocketSess(){let e={headers:new Fe({Authorization:"Bearer "+f.AliceblueUserId+" "+f.AliceblueSessionId,"Content-Type":"application/json"}),responseType:"json"},i=this.baseUrl+"ws/createSocketSess",r={loginType:"API"};this.http.post(i,r,e).subscribe(s=>{console.log("AliceblueService createSocketSess res",s),s.stat=="Ok"?(console.log("AliceblueService createSocketSess is",s.message),this.connectWebsocket(null)):console.log("AliceblueService createSocketSess res stat Not OK")},s=>{console.log("AliceblueService createSocketSess error",s)})}isSocketConnected(){return this.webSocketService.isSocketConnected()}connectWebsocket(e){this.webSocketService.connect(e)}closeWebsocket(){this.webSocketService.closeSocket()}sendSubscriptions(e){let i="";e.forEach(s=>{let o=this.findStrikeInMasters(s);o&&(i+=o.exchange+"|"+o.token+"#")}),i=i.replace(/#\s*$/,"");let r=JSON.stringify({k:i,t:"t"});console.log("sendSubscriptions: "+r),this.webSocketService.sendMessage(r)}findStrikeInMasters(e){let i=null;return f.mastersContract.forEach(r=>{if(e.expiry===r.expiry&&e.instru===r.instru&&e.strike===r.strike&&e.type===r.optionType){i=r;return}}),i}static \u0275fac=function(i){return new(i||n)(ae(Ct),ae(lo))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Lc(n){let t=n.length;for(;--t>=0;)n[t]=0}var lQ=0,fR=1,cQ=2,uQ=3,dQ=258,aS=29,Th=256,wh=Th+1+aS,Oc=30,lS=19,gR=2*wh+1,Da=15,V2=16,hQ=7,cS=256,mR=16,_R=17,AR=18,Q2=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Wm=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),pQ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),yR=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),fQ=512,As=new Array((wh+2)*2);Lc(As);var Ah=new Array(Oc*2);Lc(Ah);var bh=new Array(fQ);Lc(bh);var Sh=new Array(dQ-uQ+1);Lc(Sh);var uS=new Array(aS);Lc(uS);var zm=new Array(Oc);Lc(zm);function B2(n,t,e,i,r){this.static_tree=n,this.extra_bits=t,this.extra_base=e,this.elems=i,this.max_length=r,this.has_stree=n&&n.length}var vR,wR,bR;function q2(n,t){this.dyn_tree=n,this.max_code=0,this.stat_desc=t}var SR=n=>n<256?bh[n]:bh[256+(n>>>7)],Ch=(n,t)=>{n.pending_buf[n.pending++]=t&255,n.pending_buf[n.pending++]=t>>>8&255},ri=(n,t,e)=>{n.bi_valid>V2-e?(n.bi_buf|=t<<n.bi_valid&65535,Ch(n,n.bi_buf),n.bi_buf=t>>V2-n.bi_valid,n.bi_valid+=e-V2):(n.bi_buf|=t<<n.bi_valid&65535,n.bi_valid+=e)},Or=(n,t,e)=>{ri(n,e[t*2],e[t*2+1])},CR=(n,t)=>{let e=0;do e|=n&1,n>>>=1,e<<=1;while(--t>0);return e>>>1},gQ=n=>{n.bi_valid===16?(Ch(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)},mQ=(n,t)=>{let e=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length,c,u,d,h,p,_,A=0;for(h=0;h<=Da;h++)n.bl_count[h]=0;for(e[n.heap[n.heap_max]*2+1]=0,c=n.heap_max+1;c<gR;c++)u=n.heap[c],h=e[e[u*2+1]*2+1]+1,h>l&&(h=l,A++),e[u*2+1]=h,!(u>i)&&(n.bl_count[h]++,p=0,u>=a&&(p=o[u-a]),_=e[u*2],n.opt_len+=_*(h+p),s&&(n.static_len+=_*(r[u*2+1]+p)));if(A!==0){do{for(h=l-1;n.bl_count[h]===0;)h--;n.bl_count[h]--,n.bl_count[h+1]+=2,n.bl_count[l]--,A-=2}while(A>0);for(h=l;h!==0;h--)for(u=n.bl_count[h];u!==0;)d=n.heap[--c],!(d>i)&&(e[d*2+1]!==h&&(n.opt_len+=(h-e[d*2+1])*e[d*2],e[d*2+1]=h),u--)}},xR=(n,t,e)=>{let i=new Array(Da+1),r=0,s,o;for(s=1;s<=Da;s++)r=r+e[s-1]<<1,i[s]=r;for(o=0;o<=t;o++){let a=n[o*2+1];a!==0&&(n[o*2]=CR(i[a]++,a))}},_Q=()=>{let n,t,e,i,r,s=new Array(Da+1);for(e=0,i=0;i<aS-1;i++)for(uS[i]=e,n=0;n<1<<Q2[i];n++)Sh[e++]=i;for(Sh[e-1]=i,r=0,i=0;i<16;i++)for(zm[i]=r,n=0;n<1<<Wm[i];n++)bh[r++]=i;for(r>>=7;i<Oc;i++)for(zm[i]=r<<7,n=0;n<1<<Wm[i]-7;n++)bh[256+r++]=i;for(t=0;t<=Da;t++)s[t]=0;for(n=0;n<=143;)As[n*2+1]=8,n++,s[8]++;for(;n<=255;)As[n*2+1]=9,n++,s[9]++;for(;n<=279;)As[n*2+1]=7,n++,s[7]++;for(;n<=287;)As[n*2+1]=8,n++,s[8]++;for(xR(As,wh+1,s),n=0;n<Oc;n++)Ah[n*2+1]=5,Ah[n*2]=CR(n,5);vR=new B2(As,Q2,Th+1,wh,Da),wR=new B2(Ah,Wm,0,Oc,Da),bR=new B2(new Array(0),pQ,0,lS,hQ)},DR=n=>{let t;for(t=0;t<wh;t++)n.dyn_ltree[t*2]=0;for(t=0;t<Oc;t++)n.dyn_dtree[t*2]=0;for(t=0;t<lS;t++)n.bl_tree[t*2]=0;n.dyn_ltree[cS*2]=1,n.opt_len=n.static_len=0,n.sym_next=n.matches=0},ER=n=>{n.bi_valid>8?Ch(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},I5=(n,t,e,i)=>{let r=t*2,s=e*2;return n[r]<n[s]||n[r]===n[s]&&i[t]<=i[e]},j2=(n,t,e)=>{let i=n.heap[e],r=e<<1;for(;r<=n.heap_len&&(r<n.heap_len&&I5(t,n.heap[r+1],n.heap[r],n.depth)&&r++,!I5(t,i,n.heap[r],n.depth));)n.heap[e]=n.heap[r],e=r,r<<=1;n.heap[e]=i},k5=(n,t,e)=>{let i,r,s=0,o,a;if(n.sym_next!==0)do i=n.pending_buf[n.sym_buf+s++]&255,i+=(n.pending_buf[n.sym_buf+s++]&255)<<8,r=n.pending_buf[n.sym_buf+s++],i===0?Or(n,r,t):(o=Sh[r],Or(n,o+Th+1,t),a=Q2[o],a!==0&&(r-=uS[o],ri(n,r,a)),i--,o=SR(i),Or(n,o,e),a=Wm[o],a!==0&&(i-=zm[o],ri(n,i,a)));while(s<n.sym_next);Or(n,cS,t)},Z2=(n,t)=>{let e=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,s=t.stat_desc.elems,o,a,l=-1,c;for(n.heap_len=0,n.heap_max=gR,o=0;o<s;o++)e[o*2]!==0?(n.heap[++n.heap_len]=l=o,n.depth[o]=0):e[o*2+1]=0;for(;n.heap_len<2;)c=n.heap[++n.heap_len]=l<2?++l:0,e[c*2]=1,n.depth[c]=0,n.opt_len--,r&&(n.static_len-=i[c*2+1]);for(t.max_code=l,o=n.heap_len>>1;o>=1;o--)j2(n,e,o);c=s;do o=n.heap[1],n.heap[1]=n.heap[n.heap_len--],j2(n,e,1),a=n.heap[1],n.heap[--n.heap_max]=o,n.heap[--n.heap_max]=a,e[c*2]=e[o*2]+e[a*2],n.depth[c]=(n.depth[o]>=n.depth[a]?n.depth[o]:n.depth[a])+1,e[o*2+1]=e[a*2+1]=c,n.heap[1]=c++,j2(n,e,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],mQ(n,t),xR(e,l,n.bl_count)},N5=(n,t,e)=>{let i,r=-1,s,o=t[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),t[(e+1)*2+1]=65535,i=0;i<=e;i++)s=o,o=t[(i+1)*2+1],!(++a<l&&s===o)&&(a<c?n.bl_tree[s*2]+=a:s!==0?(s!==r&&n.bl_tree[s*2]++,n.bl_tree[mR*2]++):a<=10?n.bl_tree[_R*2]++:n.bl_tree[AR*2]++,a=0,r=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))},P5=(n,t,e)=>{let i,r=-1,s,o=t[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),i=0;i<=e;i++)if(s=o,o=t[(i+1)*2+1],!(++a<l&&s===o)){if(a<c)do Or(n,s,n.bl_tree);while(--a!==0);else s!==0?(s!==r&&(Or(n,s,n.bl_tree),a--),Or(n,mR,n.bl_tree),ri(n,a-3,2)):a<=10?(Or(n,_R,n.bl_tree),ri(n,a-3,3)):(Or(n,AR,n.bl_tree),ri(n,a-11,7));a=0,r=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}},AQ=n=>{let t;for(N5(n,n.dyn_ltree,n.l_desc.max_code),N5(n,n.dyn_dtree,n.d_desc.max_code),Z2(n,n.bl_desc),t=lS-1;t>=3&&n.bl_tree[yR[t]*2+1]===0;t--);return n.opt_len+=3*(t+1)+5+5+4,t},yQ=(n,t,e,i)=>{let r;for(ri(n,t-257,5),ri(n,e-1,5),ri(n,i-4,4),r=0;r<i;r++)ri(n,n.bl_tree[yR[r]*2+1],3);P5(n,n.dyn_ltree,t-1),P5(n,n.dyn_dtree,e-1)},vQ=n=>{let t=4093624447,e;for(e=0;e<=31;e++,t>>>=1)if(t&1&&n.dyn_ltree[e*2]!==0)return 0;if(n.dyn_ltree[9*2]!==0||n.dyn_ltree[10*2]!==0||n.dyn_ltree[13*2]!==0)return 1;for(e=32;e<Th;e++)if(n.dyn_ltree[e*2]!==0)return 1;return 0},O5=!1,wQ=n=>{O5||(_Q(),O5=!0),n.l_desc=new q2(n.dyn_ltree,vR),n.d_desc=new q2(n.dyn_dtree,wR),n.bl_desc=new q2(n.bl_tree,bR),n.bi_buf=0,n.bi_valid=0,DR(n)},MR=(n,t,e,i)=>{ri(n,(lQ<<1)+(i?1:0),3),ER(n),Ch(n,e),Ch(n,~e),e&&n.pending_buf.set(n.window.subarray(t,t+e),n.pending),n.pending+=e},bQ=n=>{ri(n,fR<<1,3),Or(n,cS,As),gQ(n)},SQ=(n,t,e,i)=>{let r,s,o=0;n.level>0?(n.strm.data_type===2&&(n.strm.data_type=vQ(n)),Z2(n,n.l_desc),Z2(n,n.d_desc),o=AQ(n),r=n.opt_len+3+7>>>3,s=n.static_len+3+7>>>3,s<=r&&(r=s)):r=s=e+5,e+4<=r&&t!==-1?MR(n,t,e,i):n.strategy===4||s===r?(ri(n,(fR<<1)+(i?1:0),3),k5(n,As,Ah)):(ri(n,(cQ<<1)+(i?1:0),3),yQ(n,n.l_desc.max_code+1,n.d_desc.max_code+1,o+1),k5(n,n.dyn_ltree,n.dyn_dtree)),DR(n),i&&ER(n)},CQ=(n,t,e)=>(n.pending_buf[n.sym_buf+n.sym_next++]=t,n.pending_buf[n.sym_buf+n.sym_next++]=t>>8,n.pending_buf[n.sym_buf+n.sym_next++]=e,t===0?n.dyn_ltree[e*2]++:(n.matches++,t--,n.dyn_ltree[(Sh[e]+Th+1)*2]++,n.dyn_dtree[SR(t)*2]++),n.sym_next===n.sym_end),xQ=wQ,DQ=MR,EQ=SQ,MQ=CQ,TQ=bQ,IQ={_tr_init:xQ,_tr_stored_block:DQ,_tr_flush_block:EQ,_tr_tally:MQ,_tr_align:TQ},kQ=(n,t,e,i)=>{let r=n&65535|0,s=n>>>16&65535|0,o=0;for(;e!==0;){o=e>2e3?2e3:e,e-=o;do r=r+t[i++]|0,s=s+r|0;while(--o);r%=65521,s%=65521}return r|s<<16|0},xh=kQ,NQ=()=>{let n,t=[];for(var e=0;e<256;e++){n=e;for(var i=0;i<8;i++)n=n&1?3988292384^n>>>1:n>>>1;t[e]=n}return t},PQ=new Uint32Array(NQ()),OQ=(n,t,e,i)=>{let r=PQ,s=i+e;n^=-1;for(let o=i;o<s;o++)n=n>>>8^r[(n^t[o])&255];return n^-1},mn=OQ,Ta={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Vc={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:RQ,_tr_stored_block:eS,_tr_flush_block:FQ,_tr_tally:po,_tr_align:LQ}=IQ,{Z_NO_FLUSH:fo,Z_PARTIAL_FLUSH:VQ,Z_FULL_FLUSH:BQ,Z_FINISH:ki,Z_BLOCK:R5,Z_OK:Cn,Z_STREAM_END:F5,Z_STREAM_ERROR:Rr,Z_DATA_ERROR:qQ,Z_BUF_ERROR:W2,Z_DEFAULT_COMPRESSION:jQ,Z_FILTERED:WQ,Z_HUFFMAN_ONLY:Lm,Z_RLE:zQ,Z_FIXED:UQ,Z_DEFAULT_STRATEGY:HQ,Z_UNKNOWN:YQ,Z_DEFLATED:Ym}=Vc,GQ=9,KQ=15,JQ=8,XQ=29,$Q=256,tS=$Q+1+XQ,QQ=30,ZQ=19,eZ=2*tS+1,tZ=15,ht=3,ho=258,Fr=ho+ht+1,nZ=32,Rc=42,dS=57,nS=69,iS=73,rS=91,sS=103,Ea=113,mh=666,jn=1,Bc=2,Ia=3,qc=4,iZ=3,Ma=(n,t)=>(n.msg=Ta[t],t),L5=n=>n*2-(n>4?9:0),uo=n=>{let t=n.length;for(;--t>=0;)n[t]=0},rZ=n=>{let t,e,i,r=n.w_size;t=n.hash_size,i=t;do e=n.head[--i],n.head[i]=e>=r?e-r:0;while(--t);t=r,i=t;do e=n.prev[--i],n.prev[i]=e>=r?e-r:0;while(--t)},sZ=(n,t,e)=>(t<<n.hash_shift^e)&n.hash_mask,go=sZ,mi=n=>{let t=n.state,e=t.pending;e>n.avail_out&&(e=n.avail_out),e!==0&&(n.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+e),n.next_out),n.next_out+=e,t.pending_out+=e,n.total_out+=e,n.avail_out-=e,t.pending-=e,t.pending===0&&(t.pending_out=0))},_i=(n,t)=>{FQ(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,t),n.block_start=n.strstart,mi(n.strm)},At=(n,t)=>{n.pending_buf[n.pending++]=t},gh=(n,t)=>{n.pending_buf[n.pending++]=t>>>8&255,n.pending_buf[n.pending++]=t&255},oS=(n,t,e,i)=>{let r=n.avail_in;return r>i&&(r=i),r===0?0:(n.avail_in-=r,t.set(n.input.subarray(n.next_in,n.next_in+r),e),n.state.wrap===1?n.adler=xh(n.adler,t,r,e):n.state.wrap===2&&(n.adler=mn(n.adler,t,r,e)),n.next_in+=r,n.total_in+=r,r)},TR=(n,t)=>{let e=n.max_chain_length,i=n.strstart,r,s,o=n.prev_length,a=n.nice_match,l=n.strstart>n.w_size-Fr?n.strstart-(n.w_size-Fr):0,c=n.window,u=n.w_mask,d=n.prev,h=n.strstart+ho,p=c[i+o-1],_=c[i+o];n.prev_length>=n.good_match&&(e>>=2),a>n.lookahead&&(a=n.lookahead);do if(r=t,!(c[r+o]!==_||c[r+o-1]!==p||c[r]!==c[i]||c[++r]!==c[i+1])){i+=2,r++;do;while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<h);if(s=ho-(h-i),i=h-ho,s>o){if(n.match_start=t,o=s,s>=a)break;p=c[i+o-1],_=c[i+o]}}while((t=d[t&u])>l&&--e!==0);return o<=n.lookahead?o:n.lookahead},Fc=n=>{let t=n.w_size,e,i,r;do{if(i=n.window_size-n.lookahead-n.strstart,n.strstart>=t+(t-Fr)&&(n.window.set(n.window.subarray(t,t+t-i),0),n.match_start-=t,n.strstart-=t,n.block_start-=t,n.insert>n.strstart&&(n.insert=n.strstart),rZ(n),i+=t),n.strm.avail_in===0)break;if(e=oS(n.strm,n.window,n.strstart+n.lookahead,i),n.lookahead+=e,n.lookahead+n.insert>=ht)for(r=n.strstart-n.insert,n.ins_h=n.window[r],n.ins_h=go(n,n.ins_h,n.window[r+1]);n.insert&&(n.ins_h=go(n,n.ins_h,n.window[r+ht-1]),n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,n.insert--,!(n.lookahead+n.insert<ht)););}while(n.lookahead<Fr&&n.strm.avail_in!==0)},IR=(n,t)=>{let e=n.pending_buf_size-5>n.w_size?n.w_size:n.pending_buf_size-5,i,r,s,o=0,a=n.strm.avail_in;do{if(i=65535,s=n.bi_valid+42>>3,n.strm.avail_out<s||(s=n.strm.avail_out-s,r=n.strstart-n.block_start,i>r+n.strm.avail_in&&(i=r+n.strm.avail_in),i>s&&(i=s),i<e&&(i===0&&t!==ki||t===fo||i!==r+n.strm.avail_in)))break;o=t===ki&&i===r+n.strm.avail_in?1:0,eS(n,0,0,o),n.pending_buf[n.pending-4]=i,n.pending_buf[n.pending-3]=i>>8,n.pending_buf[n.pending-2]=~i,n.pending_buf[n.pending-1]=~i>>8,mi(n.strm),r&&(r>i&&(r=i),n.strm.output.set(n.window.subarray(n.block_start,n.block_start+r),n.strm.next_out),n.strm.next_out+=r,n.strm.avail_out-=r,n.strm.total_out+=r,n.block_start+=r,i-=r),i&&(oS(n.strm,n.strm.output,n.strm.next_out,i),n.strm.next_out+=i,n.strm.avail_out-=i,n.strm.total_out+=i)}while(o===0);return a-=n.strm.avail_in,a&&(a>=n.w_size?(n.matches=2,n.window.set(n.strm.input.subarray(n.strm.next_in-n.w_size,n.strm.next_in),0),n.strstart=n.w_size,n.insert=n.strstart):(n.window_size-n.strstart<=a&&(n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,n.insert>n.strstart&&(n.insert=n.strstart)),n.window.set(n.strm.input.subarray(n.strm.next_in-a,n.strm.next_in),n.strstart),n.strstart+=a,n.insert+=a>n.w_size-n.insert?n.w_size-n.insert:a),n.block_start=n.strstart),n.high_water<n.strstart&&(n.high_water=n.strstart),o?qc:t!==fo&&t!==ki&&n.strm.avail_in===0&&n.strstart===n.block_start?Bc:(s=n.window_size-n.strstart,n.strm.avail_in>s&&n.block_start>=n.w_size&&(n.block_start-=n.w_size,n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,s+=n.w_size,n.insert>n.strstart&&(n.insert=n.strstart)),s>n.strm.avail_in&&(s=n.strm.avail_in),s&&(oS(n.strm,n.window,n.strstart,s),n.strstart+=s,n.insert+=s>n.w_size-n.insert?n.w_size-n.insert:s),n.high_water<n.strstart&&(n.high_water=n.strstart),s=n.bi_valid+42>>3,s=n.pending_buf_size-s>65535?65535:n.pending_buf_size-s,e=s>n.w_size?n.w_size:s,r=n.strstart-n.block_start,(r>=e||(r||t===ki)&&t!==fo&&n.strm.avail_in===0&&r<=s)&&(i=r>s?s:r,o=t===ki&&n.strm.avail_in===0&&i===r?1:0,eS(n,n.block_start,i,o),n.block_start+=i,mi(n.strm)),o?Ia:jn)},z2=(n,t)=>{let e,i;for(;;){if(n.lookahead<Fr){if(Fc(n),n.lookahead<Fr&&t===fo)return jn;if(n.lookahead===0)break}if(e=0,n.lookahead>=ht&&(n.ins_h=go(n,n.ins_h,n.window[n.strstart+ht-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),e!==0&&n.strstart-e<=n.w_size-Fr&&(n.match_length=TR(n,e)),n.match_length>=ht)if(i=po(n,n.strstart-n.match_start,n.match_length-ht),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=ht){n.match_length--;do n.strstart++,n.ins_h=go(n,n.ins_h,n.window[n.strstart+ht-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=go(n,n.ins_h,n.window[n.strstart+1]);else i=po(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(i&&(_i(n,!1),n.strm.avail_out===0))return jn}return n.insert=n.strstart<ht-1?n.strstart:ht-1,t===ki?(_i(n,!0),n.strm.avail_out===0?Ia:qc):n.sym_next&&(_i(n,!1),n.strm.avail_out===0)?jn:Bc},Nc=(n,t)=>{let e,i,r;for(;;){if(n.lookahead<Fr){if(Fc(n),n.lookahead<Fr&&t===fo)return jn;if(n.lookahead===0)break}if(e=0,n.lookahead>=ht&&(n.ins_h=go(n,n.ins_h,n.window[n.strstart+ht-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=ht-1,e!==0&&n.prev_length<n.max_lazy_match&&n.strstart-e<=n.w_size-Fr&&(n.match_length=TR(n,e),n.match_length<=5&&(n.strategy===WQ||n.match_length===ht&&n.strstart-n.match_start>4096)&&(n.match_length=ht-1)),n.prev_length>=ht&&n.match_length<=n.prev_length){r=n.strstart+n.lookahead-ht,i=po(n,n.strstart-1-n.prev_match,n.prev_length-ht),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=r&&(n.ins_h=go(n,n.ins_h,n.window[n.strstart+ht-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=ht-1,n.strstart++,i&&(_i(n,!1),n.strm.avail_out===0))return jn}else if(n.match_available){if(i=po(n,0,n.window[n.strstart-1]),i&&_i(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return jn}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(i=po(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<ht-1?n.strstart:ht-1,t===ki?(_i(n,!0),n.strm.avail_out===0?Ia:qc):n.sym_next&&(_i(n,!1),n.strm.avail_out===0)?jn:Bc},oZ=(n,t)=>{let e,i,r,s,o=n.window;for(;;){if(n.lookahead<=ho){if(Fc(n),n.lookahead<=ho&&t===fo)return jn;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=ht&&n.strstart>0&&(r=n.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){s=n.strstart+ho;do;while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<s);n.match_length=ho-(s-r),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=ht?(e=po(n,1,n.match_length-ht),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(e=po(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),e&&(_i(n,!1),n.strm.avail_out===0))return jn}return n.insert=0,t===ki?(_i(n,!0),n.strm.avail_out===0?Ia:qc):n.sym_next&&(_i(n,!1),n.strm.avail_out===0)?jn:Bc},aZ=(n,t)=>{let e;for(;;){if(n.lookahead===0&&(Fc(n),n.lookahead===0)){if(t===fo)return jn;break}if(n.match_length=0,e=po(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,e&&(_i(n,!1),n.strm.avail_out===0))return jn}return n.insert=0,t===ki?(_i(n,!0),n.strm.avail_out===0?Ia:qc):n.sym_next&&(_i(n,!1),n.strm.avail_out===0)?jn:Bc};function Pr(n,t,e,i,r){this.good_length=n,this.max_lazy=t,this.nice_length=e,this.max_chain=i,this.func=r}var _h=[new Pr(0,0,0,0,IR),new Pr(4,4,8,4,z2),new Pr(4,5,16,8,z2),new Pr(4,6,32,32,z2),new Pr(4,4,16,16,Nc),new Pr(8,16,32,32,Nc),new Pr(8,16,128,128,Nc),new Pr(8,32,128,256,Nc),new Pr(32,128,258,1024,Nc),new Pr(32,258,258,4096,Nc)],lZ=n=>{n.window_size=2*n.w_size,uo(n.head),n.max_lazy_match=_h[n.level].max_lazy,n.good_match=_h[n.level].good_length,n.nice_match=_h[n.level].nice_length,n.max_chain_length=_h[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=ht-1,n.match_available=0,n.ins_h=0};function cZ(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ym,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(eZ*2),this.dyn_dtree=new Uint16Array((2*QQ+1)*2),this.bl_tree=new Uint16Array((2*ZQ+1)*2),uo(this.dyn_ltree),uo(this.dyn_dtree),uo(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(tZ+1),this.heap=new Uint16Array(2*tS+1),uo(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*tS+1),uo(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ih=n=>{if(!n)return 1;let t=n.state;return!t||t.strm!==n||t.status!==Rc&&t.status!==dS&&t.status!==nS&&t.status!==iS&&t.status!==rS&&t.status!==sS&&t.status!==Ea&&t.status!==mh?1:0},kR=n=>{if(Ih(n))return Ma(n,Rr);n.total_in=n.total_out=0,n.data_type=YQ;let t=n.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?dS:t.wrap?Rc:Ea,n.adler=t.wrap===2?0:1,t.last_flush=-2,RQ(t),Cn},NR=n=>{let t=kR(n);return t===Cn&&lZ(n.state),t},uZ=(n,t)=>Ih(n)||n.state.wrap!==2?Rr:(n.state.gzhead=t,Cn),PR=(n,t,e,i,r,s)=>{if(!n)return Rr;let o=1;if(t===jQ&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),r<1||r>GQ||e!==Ym||i<8||i>15||t<0||t>9||s<0||s>UQ||i===8&&o!==1)return Ma(n,Rr);i===8&&(i=9);let a=new cZ;return n.state=a,a.strm=n,a.status=Rc,a.wrap=o,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+ht-1)/ht),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=t,a.strategy=s,a.method=e,NR(n)},dZ=(n,t)=>PR(n,t,Ym,KQ,JQ,HQ),hZ=(n,t)=>{if(Ih(n)||t>R5||t<0)return n?Ma(n,Rr):Rr;let e=n.state;if(!n.output||n.avail_in!==0&&!n.input||e.status===mh&&t!==ki)return Ma(n,n.avail_out===0?W2:Rr);let i=e.last_flush;if(e.last_flush=t,e.pending!==0){if(mi(n),n.avail_out===0)return e.last_flush=-1,Cn}else if(n.avail_in===0&&L5(t)<=L5(i)&&t!==ki)return Ma(n,W2);if(e.status===mh&&n.avail_in!==0)return Ma(n,W2);if(e.status===Rc&&e.wrap===0&&(e.status=Ea),e.status===Rc){let r=Ym+(e.w_bits-8<<4)<<8,s=-1;if(e.strategy>=Lm||e.level<2?s=0:e.level<6?s=1:e.level===6?s=2:s=3,r|=s<<6,e.strstart!==0&&(r|=nZ),r+=31-r%31,gh(e,r),e.strstart!==0&&(gh(e,n.adler>>>16),gh(e,n.adler&65535)),n.adler=1,e.status=Ea,mi(n),e.pending!==0)return e.last_flush=-1,Cn}if(e.status===dS){if(n.adler=0,At(e,31),At(e,139),At(e,8),e.gzhead)At(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),At(e,e.gzhead.time&255),At(e,e.gzhead.time>>8&255),At(e,e.gzhead.time>>16&255),At(e,e.gzhead.time>>24&255),At(e,e.level===9?2:e.strategy>=Lm||e.level<2?4:0),At(e,e.gzhead.os&255),e.gzhead.extra&&e.gzhead.extra.length&&(At(e,e.gzhead.extra.length&255),At(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(n.adler=mn(n.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=nS;else if(At(e,0),At(e,0),At(e,0),At(e,0),At(e,0),At(e,e.level===9?2:e.strategy>=Lm||e.level<2?4:0),At(e,iZ),e.status=Ea,mi(n),e.pending!==0)return e.last_flush=-1,Cn}if(e.status===nS){if(e.gzhead.extra){let r=e.pending,s=(e.gzhead.extra.length&65535)-e.gzindex;for(;e.pending+s>e.pending_buf_size;){let a=e.pending_buf_size-e.pending;if(e.pending_buf.set(e.gzhead.extra.subarray(e.gzindex,e.gzindex+a),e.pending),e.pending=e.pending_buf_size,e.gzhead.hcrc&&e.pending>r&&(n.adler=mn(n.adler,e.pending_buf,e.pending-r,r)),e.gzindex+=a,mi(n),e.pending!==0)return e.last_flush=-1,Cn;r=0,s-=a}let o=new Uint8Array(e.gzhead.extra);e.pending_buf.set(o.subarray(e.gzindex,e.gzindex+s),e.pending),e.pending+=s,e.gzhead.hcrc&&e.pending>r&&(n.adler=mn(n.adler,e.pending_buf,e.pending-r,r)),e.gzindex=0}e.status=iS}if(e.status===iS){if(e.gzhead.name){let r=e.pending,s;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>r&&(n.adler=mn(n.adler,e.pending_buf,e.pending-r,r)),mi(n),e.pending!==0)return e.last_flush=-1,Cn;r=0}e.gzindex<e.gzhead.name.length?s=e.gzhead.name.charCodeAt(e.gzindex++)&255:s=0,At(e,s)}while(s!==0);e.gzhead.hcrc&&e.pending>r&&(n.adler=mn(n.adler,e.pending_buf,e.pending-r,r)),e.gzindex=0}e.status=rS}if(e.status===rS){if(e.gzhead.comment){let r=e.pending,s;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>r&&(n.adler=mn(n.adler,e.pending_buf,e.pending-r,r)),mi(n),e.pending!==0)return e.last_flush=-1,Cn;r=0}e.gzindex<e.gzhead.comment.length?s=e.gzhead.comment.charCodeAt(e.gzindex++)&255:s=0,At(e,s)}while(s!==0);e.gzhead.hcrc&&e.pending>r&&(n.adler=mn(n.adler,e.pending_buf,e.pending-r,r))}e.status=sS}if(e.status===sS){if(e.gzhead.hcrc){if(e.pending+2>e.pending_buf_size&&(mi(n),e.pending!==0))return e.last_flush=-1,Cn;At(e,n.adler&255),At(e,n.adler>>8&255),n.adler=0}if(e.status=Ea,mi(n),e.pending!==0)return e.last_flush=-1,Cn}if(n.avail_in!==0||e.lookahead!==0||t!==fo&&e.status!==mh){let r=e.level===0?IR(e,t):e.strategy===Lm?aZ(e,t):e.strategy===zQ?oZ(e,t):_h[e.level].func(e,t);if((r===Ia||r===qc)&&(e.status=mh),r===jn||r===Ia)return n.avail_out===0&&(e.last_flush=-1),Cn;if(r===Bc&&(t===VQ?LQ(e):t!==R5&&(eS(e,0,0,!1),t===BQ&&(uo(e.head),e.lookahead===0&&(e.strstart=0,e.block_start=0,e.insert=0))),mi(n),n.avail_out===0))return e.last_flush=-1,Cn}return t!==ki?Cn:e.wrap<=0?F5:(e.wrap===2?(At(e,n.adler&255),At(e,n.adler>>8&255),At(e,n.adler>>16&255),At(e,n.adler>>24&255),At(e,n.total_in&255),At(e,n.total_in>>8&255),At(e,n.total_in>>16&255),At(e,n.total_in>>24&255)):(gh(e,n.adler>>>16),gh(e,n.adler&65535)),mi(n),e.wrap>0&&(e.wrap=-e.wrap),e.pending!==0?Cn:F5)},pZ=n=>{if(Ih(n))return Rr;let t=n.state.status;return n.state=null,t===Ea?Ma(n,qQ):Cn},fZ=(n,t)=>{let e=t.length;if(Ih(n))return Rr;let i=n.state,r=i.wrap;if(r===2||r===1&&i.status!==Rc||i.lookahead)return Rr;if(r===1&&(n.adler=xh(n.adler,t,e,0)),i.wrap=0,e>=i.w_size){r===0&&(uo(i.head),i.strstart=0,i.block_start=0,i.insert=0);let l=new Uint8Array(i.w_size);l.set(t.subarray(e-i.w_size,e),0),t=l,e=i.w_size}let s=n.avail_in,o=n.next_in,a=n.input;for(n.avail_in=e,n.next_in=0,n.input=t,Fc(i);i.lookahead>=ht;){let l=i.strstart,c=i.lookahead-(ht-1);do i.ins_h=go(i,i.ins_h,i.window[l+ht-1]),i.prev[l&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=l,l++;while(--c);i.strstart=l,i.lookahead=ht-1,Fc(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=ht-1,i.match_available=0,n.next_in=o,n.input=a,n.avail_in=s,i.wrap=r,Cn},gZ=dZ,mZ=PR,_Z=NR,AZ=kR,yZ=uZ,vZ=hZ,wZ=pZ,bZ=fZ,SZ="pako deflate (from Nodeca project)",yh={deflateInit:gZ,deflateInit2:mZ,deflateReset:_Z,deflateResetKeep:AZ,deflateSetHeader:yZ,deflate:vZ,deflateEnd:wZ,deflateSetDictionary:bZ,deflateInfo:SZ},CZ=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),xZ=function(n){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(let i in e)CZ(e,i)&&(n[i]=e[i])}}return n},DZ=n=>{let t=0;for(let i=0,r=n.length;i<r;i++)t+=n[i].length;let e=new Uint8Array(t);for(let i=0,r=0,s=n.length;i<s;i++){let o=n[i];e.set(o,r),r+=o.length}return e},Gm={assign:xZ,flattenChunks:DZ},OR=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{OR=!1}var Dh=new Uint8Array(256);for(let n=0;n<256;n++)Dh[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Dh[254]=Dh[254]=1;var EZ=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let t,e,i,r,s,o=n.length,a=0;for(r=0;r<o;r++)e=n.charCodeAt(r),(e&64512)===55296&&r+1<o&&(i=n.charCodeAt(r+1),(i&64512)===56320&&(e=65536+(e-55296<<10)+(i-56320),r++)),a+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(a),s=0,r=0;s<a;r++)e=n.charCodeAt(r),(e&64512)===55296&&r+1<o&&(i=n.charCodeAt(r+1),(i&64512)===56320&&(e=65536+(e-55296<<10)+(i-56320),r++)),e<128?t[s++]=e:e<2048?(t[s++]=192|e>>>6,t[s++]=128|e&63):e<65536?(t[s++]=224|e>>>12,t[s++]=128|e>>>6&63,t[s++]=128|e&63):(t[s++]=240|e>>>18,t[s++]=128|e>>>12&63,t[s++]=128|e>>>6&63,t[s++]=128|e&63);return t},MZ=(n,t)=>{if(t<65534&&n.subarray&&OR)return String.fromCharCode.apply(null,n.length===t?n:n.subarray(0,t));let e="";for(let i=0;i<t;i++)e+=String.fromCharCode(n[i]);return e},TZ=(n,t)=>{let e=t||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,t));let i,r,s=new Array(e*2);for(r=0,i=0;i<e;){let o=n[i++];if(o<128){s[r++]=o;continue}let a=Dh[o];if(a>4){s[r++]=65533,i+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&i<e;)o=o<<6|n[i++]&63,a--;if(a>1){s[r++]=65533;continue}o<65536?s[r++]=o:(o-=65536,s[r++]=55296|o>>10&1023,s[r++]=56320|o&1023)}return MZ(s,r)},IZ=(n,t)=>{t=t||n.length,t>n.length&&(t=n.length);let e=t-1;for(;e>=0&&(n[e]&192)===128;)e--;return e<0||e===0?t:e+Dh[n[e]]>t?e:t},Eh={string2buf:EZ,buf2string:TZ,utf8border:IZ};function kZ(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var RR=kZ,FR=Object.prototype.toString,{Z_NO_FLUSH:NZ,Z_SYNC_FLUSH:PZ,Z_FULL_FLUSH:OZ,Z_FINISH:RZ,Z_OK:Um,Z_STREAM_END:FZ,Z_DEFAULT_COMPRESSION:LZ,Z_DEFAULT_STRATEGY:VZ,Z_DEFLATED:BZ}=Vc;function kh(n){this.options=Gm.assign({level:LZ,method:BZ,chunkSize:16384,windowBits:15,memLevel:8,strategy:VZ},n||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new RR,this.strm.avail_out=0;let e=yh.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==Um)throw new Error(Ta[e]);if(t.header&&yh.deflateSetHeader(this.strm,t.header),t.dictionary){let i;if(typeof t.dictionary=="string"?i=Eh.string2buf(t.dictionary):FR.call(t.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(t.dictionary):i=t.dictionary,e=yh.deflateSetDictionary(this.strm,i),e!==Um)throw new Error(Ta[e]);this._dict_set=!0}}kh.prototype.push=function(n,t){let e=this.strm,i=this.options.chunkSize,r,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?RZ:NZ,typeof n=="string"?e.input=Eh.string2buf(n):FR.call(n)==="[object ArrayBuffer]"?e.input=new Uint8Array(n):e.input=n,e.next_in=0,e.avail_in=e.input.length;;){if(e.avail_out===0&&(e.output=new Uint8Array(i),e.next_out=0,e.avail_out=i),(s===PZ||s===OZ)&&e.avail_out<=6){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(r=yh.deflate(e,s),r===FZ)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),r=yh.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Um;if(e.avail_out===0){this.onData(e.output);continue}if(s>0&&e.next_out>0){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(e.avail_in===0)break}return!0};kh.prototype.onData=function(n){this.chunks.push(n)};kh.prototype.onEnd=function(n){n===Um&&(this.result=Gm.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function hS(n,t){let e=new kh(t);if(e.push(n,!0),e.err)throw e.msg||Ta[e.err];return e.result}function qZ(n,t){return t=t||{},t.raw=!0,hS(n,t)}function jZ(n,t){return t=t||{},t.gzip=!0,hS(n,t)}var WZ=kh,zZ=hS,UZ=qZ,HZ=jZ,YZ=Vc,GZ={Deflate:WZ,deflate:zZ,deflateRaw:UZ,gzip:HZ,constants:YZ},Vm=16209,KZ=16191,JZ=function(t,e){let i,r,s,o,a,l,c,u,d,h,p,_,A,v,b,x,N,T,k,C,M,O,F,j,H=t.state;i=t.next_in,F=t.input,r=i+(t.avail_in-5),s=t.next_out,j=t.output,o=s-(e-t.avail_out),a=s+(t.avail_out-257),l=H.dmax,c=H.wsize,u=H.whave,d=H.wnext,h=H.window,p=H.hold,_=H.bits,A=H.lencode,v=H.distcode,b=(1<<H.lenbits)-1,x=(1<<H.distbits)-1;e:do{_<15&&(p+=F[i++]<<_,_+=8,p+=F[i++]<<_,_+=8),N=A[p&b];t:for(;;){if(T=N>>>24,p>>>=T,_-=T,T=N>>>16&255,T===0)j[s++]=N&65535;else if(T&16){k=N&65535,T&=15,T&&(_<T&&(p+=F[i++]<<_,_+=8),k+=p&(1<<T)-1,p>>>=T,_-=T),_<15&&(p+=F[i++]<<_,_+=8,p+=F[i++]<<_,_+=8),N=v[p&x];n:for(;;){if(T=N>>>24,p>>>=T,_-=T,T=N>>>16&255,T&16){if(C=N&65535,T&=15,_<T&&(p+=F[i++]<<_,_+=8,_<T&&(p+=F[i++]<<_,_+=8)),C+=p&(1<<T)-1,C>l){t.msg="invalid distance too far back",H.mode=Vm;break e}if(p>>>=T,_-=T,T=s-o,C>T){if(T=C-T,T>u&&H.sane){t.msg="invalid distance too far back",H.mode=Vm;break e}if(M=0,O=h,d===0){if(M+=c-T,T<k){k-=T;do j[s++]=h[M++];while(--T);M=s-C,O=j}}else if(d<T){if(M+=c+d-T,T-=d,T<k){k-=T;do j[s++]=h[M++];while(--T);if(M=0,d<k){T=d,k-=T;do j[s++]=h[M++];while(--T);M=s-C,O=j}}}else if(M+=d-T,T<k){k-=T;do j[s++]=h[M++];while(--T);M=s-C,O=j}for(;k>2;)j[s++]=O[M++],j[s++]=O[M++],j[s++]=O[M++],k-=3;k&&(j[s++]=O[M++],k>1&&(j[s++]=O[M++]))}else{M=s-C;do j[s++]=j[M++],j[s++]=j[M++],j[s++]=j[M++],k-=3;while(k>2);k&&(j[s++]=j[M++],k>1&&(j[s++]=j[M++]))}}else if((T&64)===0){N=v[(N&65535)+(p&(1<<T)-1)];continue n}else{t.msg="invalid distance code",H.mode=Vm;break e}break}}else if((T&64)===0){N=A[(N&65535)+(p&(1<<T)-1)];continue t}else if(T&32){H.mode=KZ;break e}else{t.msg="invalid literal/length code",H.mode=Vm;break e}break}}while(i<r&&s<a);k=_>>3,i-=k,_-=k<<3,p&=(1<<_)-1,t.next_in=i,t.next_out=s,t.avail_in=i<r?5+(r-i):5-(i-r),t.avail_out=s<a?257+(a-s):257-(s-a),H.hold=p,H.bits=_},Pc=15,V5=852,B5=592,q5=0,U2=1,j5=2,XZ=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),$Z=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),QZ=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ZZ=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),eee=(n,t,e,i,r,s,o,a)=>{let l=a.bits,c=0,u=0,d=0,h=0,p=0,_=0,A=0,v=0,b=0,x=0,N,T,k,C,M,O=null,F,j=new Uint16Array(Pc+1),H=new Uint16Array(Pc+1),Q=null,ie,ue,G;for(c=0;c<=Pc;c++)j[c]=0;for(u=0;u<i;u++)j[t[e+u]]++;for(p=l,h=Pc;h>=1&&j[h]===0;h--);if(p>h&&(p=h),h===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<h&&j[d]===0;d++);for(p<d&&(p=d),v=1,c=1;c<=Pc;c++)if(v<<=1,v-=j[c],v<0)return-1;if(v>0&&(n===q5||h!==1))return-1;for(H[1]=0,c=1;c<Pc;c++)H[c+1]=H[c]+j[c];for(u=0;u<i;u++)t[e+u]!==0&&(o[H[t[e+u]]++]=u);if(n===q5?(O=Q=o,F=20):n===U2?(O=XZ,Q=$Z,F=257):(O=QZ,Q=ZZ,F=0),x=0,u=0,c=d,M=s,_=p,A=0,k=-1,b=1<<p,C=b-1,n===U2&&b>V5||n===j5&&b>B5)return 1;for(;;){ie=c-A,o[u]+1<F?(ue=0,G=o[u]):o[u]>=F?(ue=Q[o[u]-F],G=O[o[u]-F]):(ue=96,G=0),N=1<<c-A,T=1<<_,d=T;do T-=N,r[M+(x>>A)+T]=ie<<24|ue<<16|G|0;while(T!==0);for(N=1<<c-1;x&N;)N>>=1;if(N!==0?(x&=N-1,x+=N):x=0,u++,--j[c]===0){if(c===h)break;c=t[e+o[u]]}if(c>p&&(x&C)!==k){for(A===0&&(A=p),M+=d,_=c-A,v=1<<_;_+A<h&&(v-=j[_+A],!(v<=0));)_++,v<<=1;if(b+=1<<_,n===U2&&b>V5||n===j5&&b>B5)return 1;k=x&C,r[k]=p<<24|_<<16|M-s|0}}return x!==0&&(r[M+x]=c-A<<24|64<<16|0),a.bits=p,0},vh=eee,tee=0,LR=1,VR=2,{Z_FINISH:W5,Z_BLOCK:nee,Z_TREES:Bm,Z_OK:ka,Z_STREAM_END:iee,Z_NEED_DICT:ree,Z_STREAM_ERROR:Ni,Z_DATA_ERROR:BR,Z_MEM_ERROR:qR,Z_BUF_ERROR:see,Z_DEFLATED:z5}=Vc,Km=16180,U5=16181,H5=16182,Y5=16183,G5=16184,K5=16185,J5=16186,X5=16187,$5=16188,Q5=16189,Hm=16190,_s=16191,H2=16192,Z5=16193,Y2=16194,eR=16195,tR=16196,nR=16197,iR=16198,qm=16199,jm=16200,rR=16201,sR=16202,oR=16203,aR=16204,lR=16205,G2=16206,cR=16207,uR=16208,qt=16209,jR=16210,WR=16211,oee=852,aee=592,lee=15,cee=lee,dR=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function uee(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Na=n=>{if(!n)return 1;let t=n.state;return!t||t.strm!==n||t.mode<Km||t.mode>WR?1:0},zR=n=>{if(Na(n))return Ni;let t=n.state;return n.total_in=n.total_out=t.total=0,n.msg="",t.wrap&&(n.adler=t.wrap&1),t.mode=Km,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(oee),t.distcode=t.distdyn=new Int32Array(aee),t.sane=1,t.back=-1,ka},UR=n=>{if(Na(n))return Ni;let t=n.state;return t.wsize=0,t.whave=0,t.wnext=0,zR(n)},HR=(n,t)=>{let e;if(Na(n))return Ni;let i=n.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Ni:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=e,i.wbits=t,UR(n))},YR=(n,t)=>{if(!n)return Ni;let e=new uee;n.state=e,e.strm=n,e.window=null,e.mode=Km;let i=HR(n,t);return i!==ka&&(n.state=null),i},dee=n=>YR(n,cee),hR=!0,K2,J2,hee=n=>{if(hR){K2=new Int32Array(512),J2=new Int32Array(32);let t=0;for(;t<144;)n.lens[t++]=8;for(;t<256;)n.lens[t++]=9;for(;t<280;)n.lens[t++]=7;for(;t<288;)n.lens[t++]=8;for(vh(LR,n.lens,0,288,K2,0,n.work,{bits:9}),t=0;t<32;)n.lens[t++]=5;vh(VR,n.lens,0,32,J2,0,n.work,{bits:5}),hR=!1}n.lencode=K2,n.lenbits=9,n.distcode=J2,n.distbits=5},GR=(n,t,e,i)=>{let r,s=n.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(t.subarray(e-s.wsize,e),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),s.window.set(t.subarray(e-i,e-i+r),s.wnext),i-=r,i?(s.window.set(t.subarray(e-i,e),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0},pee=(n,t)=>{let e,i,r,s,o,a,l,c,u,d,h,p,_,A,v=0,b,x,N,T,k,C,M,O,F=new Uint8Array(4),j,H,Q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Na(n)||!n.output||!n.input&&n.avail_in!==0)return Ni;e=n.state,e.mode===_s&&(e.mode=H2),o=n.next_out,r=n.output,l=n.avail_out,s=n.next_in,i=n.input,a=n.avail_in,c=e.hold,u=e.bits,d=a,h=l,O=ka;e:for(;;)switch(e.mode){case Km:if(e.wrap===0){e.mode=H2;break}for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(e.wrap&2&&c===35615){e.wbits===0&&(e.wbits=15),e.check=0,F[0]=c&255,F[1]=c>>>8&255,e.check=mn(e.check,F,2,0),c=0,u=0,e.mode=U5;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((c&255)<<8)+(c>>8))%31){n.msg="incorrect header check",e.mode=qt;break}if((c&15)!==z5){n.msg="unknown compression method",e.mode=qt;break}if(c>>>=4,u-=4,M=(c&15)+8,e.wbits===0&&(e.wbits=M),M>15||M>e.wbits){n.msg="invalid window size",e.mode=qt;break}e.dmax=1<<e.wbits,e.flags=0,n.adler=e.check=1,e.mode=c&512?Q5:_s,c=0,u=0;break;case U5:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(e.flags=c,(e.flags&255)!==z5){n.msg="unknown compression method",e.mode=qt;break}if(e.flags&57344){n.msg="unknown header flags set",e.mode=qt;break}e.head&&(e.head.text=c>>8&1),e.flags&512&&e.wrap&4&&(F[0]=c&255,F[1]=c>>>8&255,e.check=mn(e.check,F,2,0)),c=0,u=0,e.mode=H5;case H5:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}e.head&&(e.head.time=c),e.flags&512&&e.wrap&4&&(F[0]=c&255,F[1]=c>>>8&255,F[2]=c>>>16&255,F[3]=c>>>24&255,e.check=mn(e.check,F,4,0)),c=0,u=0,e.mode=Y5;case Y5:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}e.head&&(e.head.xflags=c&255,e.head.os=c>>8),e.flags&512&&e.wrap&4&&(F[0]=c&255,F[1]=c>>>8&255,e.check=mn(e.check,F,2,0)),c=0,u=0,e.mode=G5;case G5:if(e.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}e.length=c,e.head&&(e.head.extra_len=c),e.flags&512&&e.wrap&4&&(F[0]=c&255,F[1]=c>>>8&255,e.check=mn(e.check,F,2,0)),c=0,u=0}else e.head&&(e.head.extra=null);e.mode=K5;case K5:if(e.flags&1024&&(p=e.length,p>a&&(p=a),p&&(e.head&&(M=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(i.subarray(s,s+p),M)),e.flags&512&&e.wrap&4&&(e.check=mn(e.check,i,p,s)),a-=p,s+=p,e.length-=p),e.length))break e;e.length=0,e.mode=J5;case J5:if(e.flags&2048){if(a===0)break e;p=0;do M=i[s+p++],e.head&&M&&e.length<65536&&(e.head.name+=String.fromCharCode(M));while(M&&p<a);if(e.flags&512&&e.wrap&4&&(e.check=mn(e.check,i,p,s)),a-=p,s+=p,M)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=X5;case X5:if(e.flags&4096){if(a===0)break e;p=0;do M=i[s+p++],e.head&&M&&e.length<65536&&(e.head.comment+=String.fromCharCode(M));while(M&&p<a);if(e.flags&512&&e.wrap&4&&(e.check=mn(e.check,i,p,s)),a-=p,s+=p,M)break e}else e.head&&(e.head.comment=null);e.mode=$5;case $5:if(e.flags&512){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(e.wrap&4&&c!==(e.check&65535)){n.msg="header crc mismatch",e.mode=qt;break}c=0,u=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),n.adler=e.check=0,e.mode=_s;break;case Q5:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.adler=e.check=dR(c),c=0,u=0,e.mode=Hm;case Hm:if(e.havedict===0)return n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,e.hold=c,e.bits=u,ree;n.adler=e.check=1,e.mode=_s;case _s:if(t===nee||t===Bm)break e;case H2:if(e.last){c>>>=u&7,u-=u&7,e.mode=G2;break}for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}switch(e.last=c&1,c>>>=1,u-=1,c&3){case 0:e.mode=Z5;break;case 1:if(hee(e),e.mode=qm,t===Bm){c>>>=2,u-=2;break e}break;case 2:e.mode=tR;break;case 3:n.msg="invalid block type",e.mode=qt}c>>>=2,u-=2;break;case Z5:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){n.msg="invalid stored block lengths",e.mode=qt;break}if(e.length=c&65535,c=0,u=0,e.mode=Y2,t===Bm)break e;case Y2:e.mode=eR;case eR:if(p=e.length,p){if(p>a&&(p=a),p>l&&(p=l),p===0)break e;r.set(i.subarray(s,s+p),o),a-=p,s+=p,l-=p,o+=p,e.length-=p;break}e.mode=_s;break;case tR:for(;u<14;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(e.nlen=(c&31)+257,c>>>=5,u-=5,e.ndist=(c&31)+1,c>>>=5,u-=5,e.ncode=(c&15)+4,c>>>=4,u-=4,e.nlen>286||e.ndist>30){n.msg="too many length or distance symbols",e.mode=qt;break}e.have=0,e.mode=nR;case nR:for(;e.have<e.ncode;){for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}e.lens[Q[e.have++]]=c&7,c>>>=3,u-=3}for(;e.have<19;)e.lens[Q[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,j={bits:e.lenbits},O=vh(tee,e.lens,0,19,e.lencode,0,e.work,j),e.lenbits=j.bits,O){n.msg="invalid code lengths set",e.mode=qt;break}e.have=0,e.mode=iR;case iR:for(;e.have<e.nlen+e.ndist;){for(;v=e.lencode[c&(1<<e.lenbits)-1],b=v>>>24,x=v>>>16&255,N=v&65535,!(b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(N<16)c>>>=b,u-=b,e.lens[e.have++]=N;else{if(N===16){for(H=b+2;u<H;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c>>>=b,u-=b,e.have===0){n.msg="invalid bit length repeat",e.mode=qt;break}M=e.lens[e.have-1],p=3+(c&3),c>>>=2,u-=2}else if(N===17){for(H=b+3;u<H;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=b,u-=b,M=0,p=3+(c&7),c>>>=3,u-=3}else{for(H=b+7;u<H;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=b,u-=b,M=0,p=11+(c&127),c>>>=7,u-=7}if(e.have+p>e.nlen+e.ndist){n.msg="invalid bit length repeat",e.mode=qt;break}for(;p--;)e.lens[e.have++]=M}}if(e.mode===qt)break;if(e.lens[256]===0){n.msg="invalid code -- missing end-of-block",e.mode=qt;break}if(e.lenbits=9,j={bits:e.lenbits},O=vh(LR,e.lens,0,e.nlen,e.lencode,0,e.work,j),e.lenbits=j.bits,O){n.msg="invalid literal/lengths set",e.mode=qt;break}if(e.distbits=6,e.distcode=e.distdyn,j={bits:e.distbits},O=vh(VR,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,j),e.distbits=j.bits,O){n.msg="invalid distances set",e.mode=qt;break}if(e.mode=qm,t===Bm)break e;case qm:e.mode=jm;case jm:if(a>=6&&l>=258){n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,e.hold=c,e.bits=u,JZ(n,h),o=n.next_out,r=n.output,l=n.avail_out,s=n.next_in,i=n.input,a=n.avail_in,c=e.hold,u=e.bits,e.mode===_s&&(e.back=-1);break}for(e.back=0;v=e.lencode[c&(1<<e.lenbits)-1],b=v>>>24,x=v>>>16&255,N=v&65535,!(b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(x&&(x&240)===0){for(T=b,k=x,C=N;v=e.lencode[C+((c&(1<<T+k)-1)>>T)],b=v>>>24,x=v>>>16&255,N=v&65535,!(T+b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=T,u-=T,e.back+=T}if(c>>>=b,u-=b,e.back+=b,e.length=N,x===0){e.mode=lR;break}if(x&32){e.back=-1,e.mode=_s;break}if(x&64){n.msg="invalid literal/length code",e.mode=qt;break}e.extra=x&15,e.mode=rR;case rR:if(e.extra){for(H=e.extra;u<H;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}e.length+=c&(1<<e.extra)-1,c>>>=e.extra,u-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=sR;case sR:for(;v=e.distcode[c&(1<<e.distbits)-1],b=v>>>24,x=v>>>16&255,N=v&65535,!(b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((x&240)===0){for(T=b,k=x,C=N;v=e.distcode[C+((c&(1<<T+k)-1)>>T)],b=v>>>24,x=v>>>16&255,N=v&65535,!(T+b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=T,u-=T,e.back+=T}if(c>>>=b,u-=b,e.back+=b,x&64){n.msg="invalid distance code",e.mode=qt;break}e.offset=N,e.extra=x&15,e.mode=oR;case oR:if(e.extra){for(H=e.extra;u<H;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}e.offset+=c&(1<<e.extra)-1,c>>>=e.extra,u-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){n.msg="invalid distance too far back",e.mode=qt;break}e.mode=aR;case aR:if(l===0)break e;if(p=h-l,e.offset>p){if(p=e.offset-p,p>e.whave&&e.sane){n.msg="invalid distance too far back",e.mode=qt;break}p>e.wnext?(p-=e.wnext,_=e.wsize-p):_=e.wnext-p,p>e.length&&(p=e.length),A=e.window}else A=r,_=o-e.offset,p=e.length;p>l&&(p=l),l-=p,e.length-=p;do r[o++]=A[_++];while(--p);e.length===0&&(e.mode=jm);break;case lR:if(l===0)break e;r[o++]=e.length,l--,e.mode=jm;break;case G2:if(e.wrap){for(;u<32;){if(a===0)break e;a--,c|=i[s++]<<u,u+=8}if(h-=l,n.total_out+=h,e.total+=h,e.wrap&4&&h&&(n.adler=e.check=e.flags?mn(e.check,r,h,o-h):xh(e.check,r,h,o-h)),h=l,e.wrap&4&&(e.flags?c:dR(c))!==e.check){n.msg="incorrect data check",e.mode=qt;break}c=0,u=0}e.mode=cR;case cR:if(e.wrap&&e.flags){for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(e.wrap&4&&c!==(e.total&4294967295)){n.msg="incorrect length check",e.mode=qt;break}c=0,u=0}e.mode=uR;case uR:O=iee;break e;case qt:O=BR;break e;case jR:return qR;case WR:default:return Ni}return n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,e.hold=c,e.bits=u,(e.wsize||h!==n.avail_out&&e.mode<qt&&(e.mode<G2||t!==W5))&&GR(n,n.output,n.next_out,h-n.avail_out),d-=n.avail_in,h-=n.avail_out,n.total_in+=d,n.total_out+=h,e.total+=h,e.wrap&4&&h&&(n.adler=e.check=e.flags?mn(e.check,r,h,n.next_out-h):xh(e.check,r,h,n.next_out-h)),n.data_type=e.bits+(e.last?64:0)+(e.mode===_s?128:0)+(e.mode===qm||e.mode===Y2?256:0),(d===0&&h===0||t===W5)&&O===ka&&(O=see),O},fee=n=>{if(Na(n))return Ni;let t=n.state;return t.window&&(t.window=null),n.state=null,ka},gee=(n,t)=>{if(Na(n))return Ni;let e=n.state;return(e.wrap&2)===0?Ni:(e.head=t,t.done=!1,ka)},mee=(n,t)=>{let e=t.length,i,r,s;return Na(n)||(i=n.state,i.wrap!==0&&i.mode!==Hm)?Ni:i.mode===Hm&&(r=1,r=xh(r,t,e,0),r!==i.check)?BR:(s=GR(n,t,e,e),s?(i.mode=jR,qR):(i.havedict=1,ka))},_ee=UR,Aee=HR,yee=zR,vee=dee,wee=YR,bee=pee,See=fee,Cee=gee,xee=mee,Dee="pako inflate (from Nodeca project)",ys={inflateReset:_ee,inflateReset2:Aee,inflateResetKeep:yee,inflateInit:vee,inflateInit2:wee,inflate:bee,inflateEnd:See,inflateGetHeader:Cee,inflateSetDictionary:xee,inflateInfo:Dee};function Eee(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Mee=Eee,KR=Object.prototype.toString,{Z_NO_FLUSH:Tee,Z_FINISH:Iee,Z_OK:Mh,Z_STREAM_END:X2,Z_NEED_DICT:$2,Z_STREAM_ERROR:kee,Z_DATA_ERROR:pR,Z_MEM_ERROR:Nee}=Vc;function Nh(n){this.options=Gm.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(n&&n.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new RR,this.strm.avail_out=0;let e=ys.inflateInit2(this.strm,t.windowBits);if(e!==Mh)throw new Error(Ta[e]);if(this.header=new Mee,ys.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Eh.string2buf(t.dictionary):KR.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=ys.inflateSetDictionary(this.strm,t.dictionary),e!==Mh)))throw new Error(Ta[e])}Nh.prototype.push=function(n,t){let e=this.strm,i=this.options.chunkSize,r=this.options.dictionary,s,o,a;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?Iee:Tee,KR.call(n)==="[object ArrayBuffer]"?e.input=new Uint8Array(n):e.input=n,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(i),e.next_out=0,e.avail_out=i),s=ys.inflate(e,o),s===$2&&r&&(s=ys.inflateSetDictionary(e,r),s===Mh?s=ys.inflate(e,o):s===pR&&(s=$2));e.avail_in>0&&s===X2&&e.state.wrap>0&&n[e.next_in]!==0;)ys.inflateReset(e),s=ys.inflate(e,o);switch(s){case kee:case pR:case $2:case Nee:return this.onEnd(s),this.ended=!0,!1}if(a=e.avail_out,e.next_out&&(e.avail_out===0||s===X2))if(this.options.to==="string"){let l=Eh.utf8border(e.output,e.next_out),c=e.next_out-l,u=Eh.buf2string(e.output,l);e.next_out=c,e.avail_out=i-c,c&&e.output.set(e.output.subarray(l,l+c),0),this.onData(u)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(s===Mh&&a===0)){if(s===X2)return s=ys.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};Nh.prototype.onData=function(n){this.chunks.push(n)};Nh.prototype.onEnd=function(n){n===Mh&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Gm.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function pS(n,t){let e=new Nh(t);if(e.push(n),e.err)throw e.msg||Ta[e.err];return e.result}function Pee(n,t){return t=t||{},t.raw=!0,pS(n,t)}var Oee=Nh,Ree=pS,Fee=Pee,Lee=pS,Vee=Vc,Bee={Inflate:Oee,inflate:Ree,inflateRaw:Fee,ungzip:Lee,constants:Vee},{Deflate:sCe,deflate:oCe,deflateRaw:aCe,gzip:lCe}=GZ,{Inflate:cCe,inflate:qee,inflateRaw:uCe,ungzip:dCe}=Bee;var JR=qee;var Lr=(()=>{class n{aliceblueParserService;heartbeatInterval;websocket;socket_endpoint="wss://omnefeeds.angelbroking.com/NestHtml5Mobile/socket/stream?";url2="wss://wsfeeds.angelbroking.com/NestHtml5Mobile/socket/stream";constructor(e){this.aliceblueParserService=e}isSocketConnected(){return!!(this.websocket&&this.websocket.OPEN===1)}connect(){this.websocket=new WebSocket(this.socket_endpoint),this.websocket.binaryType="arraybuffer",this.websocket.onopen=()=>{this.handleOnOpen(event)},this.websocket.onmessage=e=>{this.handleOnMessage(e)},this.websocket.onerror=e=>{this.handleOnError(e)},this.websocket.onclose=e=>{this.handleOnClose(e)}}handleOnOpen(e){console.log("Opened Web Socket connection");let i='{"task":"cn","channel":"","token":"'+f.angelFeedToken+'","user": "'+f.angelUserId+'","acctid":"'+f.angelUserId+'"}';this.sendMessage(i),this.sendHeartbeat()}sendHeartbeat(){this.heartbeatInterval=setInterval(()=>{let e='{"task":"hb","channel":"","token":"'+f.angelFeedToken+'","user": "'+f.angelUserId+'","acctid":"'+f.angelUserId+'"}';this.sendMessage(e)},59e3)}sendInitialSubscription(){console.log("sending initial subscription");let e=JSON.stringify({a:"subscribe",v:[[1,26e3],[1,26009],[3,1]],m:ow.MARKET_DATA});this.sendMessage(e)}handleOnMessage(e){console.log("handleOnMessage",e,e.data);var r=atob(e.data).split("").map(function(l){return l.charCodeAt(0)}),s=new Uint8Array(r),o=this._atos(JR(s));console.log("parsed",o);let a=JSON.parse(o)[0];a&&a.msg==="connected"&&(console.log("ANGEL WS CONNECTED"),f.websocketEvent$.next("connected"))}_atos(e){var i=[];try{for(var r=0;r<e.length;r++)i.push(String.fromCharCode(e[r]))}catch{}return i.join("")}handleOnError(e){console.log("Error in WS connection",e)}handleOnClose(e){console.log("Closed WS connection",e),clearInterval(this.heartbeatInterval),this.websocket=null,setTimeout(()=>{this.websocket&&this.websocket.OPEN===1||(console.log("Reconnecting websocket"),this.connect())},2e3)}sendMessage(e){this.websocket&&this.websocket.OPEN===1?(console.log("Sending message over websocket: "+e),this.websocket.send(e)):console.log("Cannot send the message. Socket is not yet opened or it has been closed - ",e)}static \u0275fac=function(i){return new(i||n)(ae(Om))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Jm=(()=>{class n{http;angelWS;baseUrl="https://apiconnect.angelbroking.com";constructor(e,i){this.http=e,this.angelWS=i}getAngelHeaders(){}angelLogin(){this.auth().subscribe(e=>{console.log("angel auth",e),e&&e.data&&(f.angelFeedToken=e.data.feedToken,f.angelJWTToken=e.data.jwtToken,f.angelRefreshToken=e.data.refreshToken,this.angelWS.connect())},e=>{console.log("angel auth error",e)})}getMastersContract(){let e={responseType:"json"};this.http.get("https://margincalculator.angelbroking.com/OpenAPI_File/files/OpenAPIScripMaster.json",e).subscribe(r=>{console.log("AngelService getMastersContract",r),r&&(f.mastersContract.clear(),r.forEach(s=>{let o=new Ks,a=100;s.exch_seg==="CDS"&&(a=1e7),o.instru=s.name,o.strike=Number(s.strike)/a,s.symbol.endsWith("CE")&&(o.optionType="CE"),s.symbol.endsWith("PE")&&(o.optionType="PE"),s.symbol.endsWith("FUT")&&(o.optionType="FUT"),o.tradingSymbol=s.symbol,o.lotSize=Number(s.lotsize),o.expiry=new Date(s.expiry).toDateString(),o.exchange=s.exch_seg,o.token=Number(s.token),o.token,f.mastersContract.set(o.token,o)}),this.angelLogin()),console.log("AngelService getMastersContract mastersContract",f.mastersContract)},r=>{console.log("AngelService getMastersContract error",r)})}sendSubscriptions(e){let i=[];e.forEach(o=>{let a=this.findStrikeInMasters(o)});let s='{"task":"mw","channel":"'+"nse_fo|43315&nse_fo|38692"+'","token":"'+f.angelFeedToken+'","user": "'+f.angelUserId+'","acctid":"'+f.angelUserId+'"}';console.log("angel sendSubscriptions: "+s),this.angelWS.sendMessage(s)}findStrikeInMasters(e){let i=null;return f.mastersContract.forEach(r=>{if(e.expiry===r.expiry&&e.instru===r.instru&&e.strike===r.strike&&e.type===r.optionType){i=r;return}}),i}auth(){let e={headers:new Fe({"Content-Type":"application/json",Accept:"application/json","X-UserType":"USER","X-SourceID":"WEB","X-ClientLocalIP":"192.168.0.2","X-ClientPublicIP":"101.190.74.150","X-MACAddress":"37:ab:f8:95:27:ff","X-PrivateKey":f.angelAPIKey}),responseType:"json"},i=this.baseUrl+"/rest/auth/angelbroking/user/v1/loginByPassword",r={clientcode:f.angelUserId,password:f.angelPassword};return this.http.post(i,r,e)}getFunds(e){let i={headers:new Fe({Authorization:"Bearer "+e,"Content-Type":"application/json",Accept:"application/json","X-UserType":"USER","X-SourceID":"WEB","X-ClientLocalIP":"192.168.0.2","X-ClientPublicIP":"101.190.74.150","X-MACAddress":"37:ab:f8:95:27:ff","X-PrivateKey":f.angelAPIKey}),responseType:"json"},r=this.baseUrl+"/rest/secure/angelbroking/user/v1/getRMS";return this.http.get(r,i)}getPositions(e){let i={headers:new Fe({Authorization:"Bearer "+e,"Content-Type":"application/json",Accept:"application/json","X-UserType":"USER","X-SourceID":"WEB","X-ClientLocalIP":"192.168.0.2","X-ClientPublicIP":"101.190.74.150","X-MACAddress":"37:ab:f8:95:27:ff","X-PrivateKey":f.angelAPIKey}),responseType:"json"},r=this.baseUrl+"/rest/secure/angelbroking/order/v1/getPosition";return this.http.get(r,i)}getOrders(e){let i={headers:new Fe({Authorization:"Bearer "+e,"Content-Type":"application/json",Accept:"application/json","X-UserType":"USER","X-SourceID":"WEB","X-ClientLocalIP":"192.168.0.2","X-ClientPublicIP":"101.190.74.150","X-MACAddress":"37:ab:f8:95:27:ff","X-PrivateKey":f.angelAPIKey}),responseType:"json"},r=this.baseUrl+"/rest/secure/angelbroking/order/v1/getOrderBook";return this.http.get(r,i)}place_order(e,i){let r={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"},s=this.baseUrl+"orders";return this.http.post(s,i,r)}static \u0275fac=function(i){return new(i||n)(ae(Ct),ae(Lr))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Oh=class{tradingsymbol;ltp;return1;return2;return3;return4;return5;return6;zScore4;zScore5;zScore6;combinedZ;return1_rank;return2_rank;return3_rank;return4_rank;return5_rank;return6_rank;combined_rank;dist1;dist2;dist3;dist4;dist4_rank;isDist4Within1Month;DMA200;mf;watchlist;isIndex;index;isVisible;isMatchingFilter=!0},se=class{static RS_period=55;static chartDayToFetch=2e3;static chartDaysToPlot=540;static stocksEvent$=new ct;static all_rows=[];static candlesData={};static watchlist=[];static riskFreeRate=.067;static num_shortlisted_stocks=20;static fetchFromWebsite=!0;static stocksList=[{tradingsymbol:"NIFTY 50",niftyIndicesSymbol:"ind_nifty50list.csv",stocks:[]},{tradingsymbol:"NIFTY 100",niftyIndicesSymbol:"ind_nifty100list.csv",stocks:[]},{tradingsymbol:"NIFTY 500",niftyIndicesSymbol:"ind_nifty500list.csv",stocks:[]},{tradingsymbol:"NIFTY MIDCAP 150",niftyIndicesSymbol:"ind_niftymidcap150list.csv",stocks:[]},{tradingsymbol:"NIFTYM150MOMNTM50",niftyIndicesSymbol:"ind_niftymidcap150momentum50_list.csv",stocks:[]},{tradingsymbol:"NIFTY MULTI MQ 50",niftyIndicesSymbol:"ind_nifty500MulticapMomentumQuality50_list.csv",stocks:[]},{tradingsymbol:"MOMENTUM50",niftyIndicesSymbol:"ind_nifty500Momentum50_list.csv",stocks:[]},{tradingsymbol:"NIFTY ALPHA 50",niftyIndicesSymbol:"ind_nifty_Alpha_Index.csv",stocks:[]},{tradingsymbol:"NIFTY BANK",niftyIndicesSymbol:"ind_niftybanklist.csv",stocks:[]},{tradingsymbol:"NIFTY PHARMA",niftyIndicesSymbol:"ind_niftypharmalist.csv",stocks:[]},{tradingsymbol:"NIFTY HEALTHCARE",niftyIndicesSymbol:"ind_niftyhealthcarelist.csv",stocks:[]},{tradingsymbol:"NIFTY MIDSML HLTH",niftyIndicesSymbol:"ind_niftymidsmallhealthcare_list.csv",stocks:[]},{tradingsymbol:"NIFTY IT",niftyIndicesSymbol:"ind_niftyitlist.csv",stocks:[]}]};var Xm=(()=>{class n{mapService;user_id=f.zerodhaUserId;root="wss://ws.zerodha.com/";read_timeout=10;reconnect_max_delay=0;reconnect_max_tries=0;mSubscribe="subscribe";mUnSubscribe="unsubscribe";mSetMode="mode";mAlert=10;mMessage=11;mLogout=12;mReload=13;mClearCache=14;modeFull="full";modeQuote="quote";modeLTP="ltp";ws=null;triggers={connect:[],ticks:[],disconnect:[],error:[],close:[],reconnect:[],noreconnect:[],message:[],order_update:[]};read_timer=null;last_read=null;reconnect_timer=null;auto_reconnect=!1;current_reconnection_count=0;last_reconnect_interval=0;current_ws_url=null;defaultReconnectMaxDelay=60;defaultReconnectMaxRetries=50;maximumReconnectMaxRetries=300;minimumReconnectMaxDelay=5;NseCM=1;NseFO=2;NseCD=3;BseCM=4;BseFO=5;BseCD=6;McxFO=7;McxSX=8;Indices=9;constructor(e){this.mapService=e}connect(){if(this.ws&&(this.ws.readyState===this.ws.CONNECTING||this.ws.readyState===this.ws.OPEN))return;console.log("Trying to establish Zerodha WS connection");let e=this.root+"?api_key=kitefront&user_id="+this.user_id+"&enctoken="+encodeURIComponent(f.broker_auth.replace("enctoken ",""))+"&uid="+Date.now()+"&user-agent=kite3-web&version=3.0.10";this.ws=new WebSocket(e),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{this.handleOnOpen(event)},this.ws.onmessage=i=>{this.handleOnMessage(i)},this.ws.onerror=i=>{this.handleOnError(i)},this.ws.onclose=i=>{this.handleOnClose(i)}}isSocketConnected(){return!!(this.ws&&this.ws.readyState==this.ws.OPEN)}handleOnOpen(e){console.log("Opened Zerodha Web Socket connection");let i=[256265,260105,257801,265,288009,274441,2707457];this.subscribe(i),this.setMode(this.modeFull,i),f.websocketEvent$.next("connected"),this.initStatusCheck()}initStatusCheck(){clearInterval(this.read_timer),this.last_read=new Date,this.read_timer=setInterval(()=>{if((new Date().valueOf()-this.last_read)/1e3>=this.read_timeout){f.requestStatusEvent$.next({status:"info",message:"WS Reconnecting..."}),console.log("Reconnecting WS..."),this.ws&&(this.ws.close(),this.ws=null),clearInterval(this.read_timer);let e=setTimeout(()=>{this.connect()},2e3)}},this.read_timeout*1e3)}handleOnMessage(e){if(f.logWSFeed&&console.log("handleOnMessage",e),e.data instanceof ArrayBuffer){if(e.data.byteLength>2){let i=this.parseBinary(e.data);f.logWSFeed&&console.log("Parsed binary message",i),i.forEach(r=>{this.mapService.updateMaps_zerodha(r)})}}else this.parseTextMessage(e.data);this.last_read=new Date}handleOnError(e){console.log("Error in WS connection",e)}handleOnClose(e){console.log("Closed WS connection",e),this.ws=null,setTimeout(()=>{console.log("Reconnecting websocket"),this.connect()},5e3)}closeSocket(){console.log("Closing WS connection manually"),this.ws.close(),this.ws=null}subscribe(e){return e.length>0&&this.send({a:this.mSubscribe,v:e}),e}setMode(e,i){return e||(e=this.modeFull),i.length>0&&this.send({a:this.mSetMode,v:[e,i]}),i}send(e){if(!this.ws||this.ws.readyState!==this.ws.OPEN){console.log("Cannot send the message. Socket is not yet opened or it has been closed - ",e);return}try{typeof e=="object"&&(e=JSON.stringify(e)),this.ws.send(e)}catch{this.ws.close()}}parseTextMessage(e){try{e=JSON.parse(e),console.log("text message on ws: ",e)}catch{return}if(e.type==="order"){if(e.status,e.status==="COMPLETE"){let i=this.mapService.parseSymbol(e.tradingsymbol),r=i.strike+i.type;f.requestStatusEvent$.next({status:"success",message:"COMPLETE "+r+" "+e.transaction_type+" "+e.quantity}),setTimeout(()=>{f.enableAlgo||f.miscEvent$.next("refreshAll")},500)}if(e.status==="REJECTED"){let i=this.mapService.parseSymbol(e.tradingsymbol),r=i.strike+i.type;f.requestStatusEvent$.next({status:"danger",message:"REJECTED "+r+" "+e.transaction_type+" "+e.quantity+" "+e.status_message}),setTimeout(()=>{f.enableAlgo||f.miscEvent$.next("refreshAll")},500)}}}parseBinary(e){let i=this.splitPackets(e),r=[];for(let s=0;s<i.length;s++){let o=i[s],a=this.buf2long(o.slice(0,4)),l=a&255,c=!0;l===this.Indices&&(c=!1);let u=100;if(l===this.NseCD?u=1e7:l==this.BseCD&&(u=1e4),o.byteLength===8)r.push({tradable:c,mode:this.modeLTP,instrument_token:a,last_price:this.buf2long(o.slice(4,8))/u});else if(o.byteLength===28||o.byteLength===32){let d=this.modeQuote;o.byteLength===32&&(d=this.modeFull);let h={tradable:c,mode:d,instrument_token:a,last_price:this.buf2long(o.slice(4,8))/u,ohlc:{high:this.buf2long(o.slice(8,12))/u,low:this.buf2long(o.slice(12,16))/u,open:this.buf2long(o.slice(16,20))/u,close:this.buf2long(o.slice(20,24))/u},change:this.buf2long(o.slice(24,28)),exchange_timestamp:null};if(h.ohlc.close!=0&&(h.change=(h.last_price-h.ohlc.close)*100/h.ohlc.close),o.byteLength===32){h.exchange_timestamp=null;let p=this.buf2long(o.slice(28,32));p&&(h.exchange_timestamp=new Date(p*1e3))}r.push(h)}else if(o.byteLength===44||o.byteLength===184){let d=this.modeQuote;o.byteLength===184&&(d=this.modeFull);let h={tradable:c,mode:d,instrument_token:a,last_price:this.buf2long(o.slice(4,8))/u,last_traded_quantity:this.buf2long(o.slice(8,12)),average_traded_price:this.buf2long(o.slice(12,16))/u,volume_traded:this.buf2long(o.slice(16,20)),total_buy_quantity:this.buf2long(o.slice(20,24)),total_sell_quantity:this.buf2long(o.slice(24,28)),ohlc:{open:this.buf2long(o.slice(28,32))/u,high:this.buf2long(o.slice(32,36))/u,low:this.buf2long(o.slice(36,40))/u,close:this.buf2long(o.slice(40,44))/u},change:null,last_trade_time:null,exchange_timestamp:null,oi:null,oi_day_high:null,oi_day_low:null,depth:null};if(h.ohlc.close!=0&&(h.change=(h.last_price-h.ohlc.close)*100/h.ohlc.close),o.byteLength===184){h.last_trade_time=null;let p=this.buf2long(o.slice(44,48));p&&(h.last_trade_time=new Date(p*1e3)),h.exchange_timestamp=null;let _=this.buf2long(o.slice(60,64));_&&(h.exchange_timestamp=new Date(_*1e3)),h.oi=this.buf2long(o.slice(48,52)),h.oi_day_high=this.buf2long(o.slice(52,56)),h.oi_day_low=this.buf2long(o.slice(56,60)),h.depth={buy:[],sell:[]};let A=0,v=o.slice(64,184);for(let b=0;b<10;b++)A=b*12,h.depth[b<5?"buy":"sell"].push({quantity:this.buf2long(v.slice(A,A+4)),price:this.buf2long(v.slice(A+4,A+8))/u,orders:this.buf2long(v.slice(A+8,A+10))})}r.push(h)}}return r}splitPackets(e){let i=this.buf2long(e.slice(0,2)),r=2,s=[];for(let o=0;o<i;o++){let a=this.buf2long(e.slice(r,r+2)),l=e.slice(r+2,r+2+a);s.push(l),r+=2+a}return s}buf2long(e){let i=new Uint8Array(e),r=0,s=i.length;for(let o=0,a=s-1;o<s;o++,a--)r+=i[a]<<o*8;return r}static \u0275fac=function(i){return new(i||n)(ae(Ue))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Nn=(()=>{class n{http;zerodhaWebsocketService;mapService;baseUrl="https://kite.zerodha.com/";constructor(e,i,r){this.http=e,this.zerodhaWebsocketService=i,this.mapService=r}getMastersContract(){let e={responseType:"text"};this.http.get("https://api.kite.trade/instruments",e).subscribe(r=>{console.log("zerodha instruments",r),this.parseContractMaster(r)},r=>{console.log("zerodha instruments error",r)})}parseContractMaster(e){let r=e.split(/\r|\n|\r/).filter(function(l){return l!==""}),s=this.mapService.findCurrExpiryForDisplay(f.usdinrExpiries),a="USDINR"+this.mapService.getExpiry(s)+"FUT";for(let l=1;l<r.length;l++){let c=r[l].split(","),u=c[0],d=c[1],h=c[2],p=c[3].replaceAll('"',""),_=c[4],A=c[5],v=c[6],b=c[8],x=c[9],N=c[11],T=new Ks;T.token=Number(u),T.instru=p,T.expiry=new Date(A).toDateString(),T.strike=Number(v),T.optionType=x,T.lotSize=Number(b),T.exchange=N,T.tradingSymbol=h,f.mastersContract.set(T.token,T),h===a&&N==="CDS"&&(f.USDINR_FUT_TOKEN=T.token,console.log("USDINR_FUT_TOKEN",f.USDINR_FUT_TOKEN))}console.log("ZerodhaService getMastersContract mastersContract",f.mastersContract),this.getInvestedMFData(),this.getInvestedStocksData(),this.connectWebsocket()}getInvestedMFData(){f.mfInvested.forEach(e=>{e[0]!=="NIFTYBEES"&&this.getMFData(e[0]).subscribe(i=>{console.log("zerodha getMFData response",i);let r=i.data.at(-1)[1];this.mapService.setLtp(String(e[0]),r),e[2]=r,console.log("mf ltpMap",this.mapService.ltpMap)},i=>{console.log("zerodha getMFData error",i),f.requestStatusEvent$.next({status:"danger",message:"MF Fetch Failed"})})})}getInvestedStocksData(){let e=JSON.parse(localStorage.getItem("curr_positions"+f.stocksStrategyNum));if(e&&e.trades){let r=e.trades,s=0;r.forEach((o,a)=>{s++,setTimeout(()=>{let l=new Xi;l.tradingSymbol=o.scrip,this.fetchChartData(l),a===r.length-1&&(console.log("All chart data fetches have been triggered."),f.miscEvent$.next("investedStocksFetched"))},s*200)})}let i=new Xi;i.tradingSymbol="NIFTY 50",this.fetchChartData(i)}fetchChartData(e){let i=this.findStockInMasters(e),r=new Date,s=new Date;s.setDate(s.getDate()-se.chartDayToFetch);let o=""+s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2),a=""+r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+("0"+r.getDate()).slice(-2);if(i&&i.token){let c={responseType:"json",headers:new Fe({authorization:f.broker_auth})},u="https://kite.zerodha.com/oms/instruments/historical/"+i.token+"/day?user_id="+f.zerodhaUserId+"&oi=1&from="+o+"&to="+a;this.http.get(u,c).subscribe(d=>{if(f.requestStatusEvent$.next({status:"success",message:"FETCHED "+i.tradingSymbol}),console.log("fetchChartData data:",i.tradingSymbol,d),d.data.candles){let h=d.data.candles;h.length===0&&console.log("ZERO CANDLES FOR ",i.tradingSymbol);for(let p=0;p<h.length;p++){let _=h[p],A=se.candlesData[i.tradingSymbol];A||(A={});let v=this.getDateInFormat(_[0]);A[v]=[_[1],_[2],_[3],_[4],_[5],_[6]],se.candlesData[i.tradingSymbol]=A}}console.log("candles:",Object.keys(se.candlesData).length,se.candlesData)})}}getDateInFormat(e=null){e||(e=new Date);let i=new Date(e),r=i.getDate(),s=i.getMonth()+1,o=i.getFullYear(),a=i.getHours(),l=i.getMinutes(),c=i.getSeconds();return""+(r<=9?"0"+r:r)+"-"+(s<=9?"0"+s:s)+"-"+o+" "+(a<=9?"0"+a:a)+":"+(l<=9?"0"+l:l)+":"+(c<=9?"0"+c:c)}isSocketConnected(){return this.zerodhaWebsocketService.isSocketConnected()}connectWebsocket(){this.zerodhaWebsocketService.connect()}closeWebsocket(){this.zerodhaWebsocketService.closeSocket()}sendSubscriptions(e){let i=[];e.forEach(r=>{let s=this.findStrikeInMasters(r);if(s)i.push(s.token);else{let o=this.findFutureInMasters(r);if(o)i.push(o.token);else{let a=this.findStockInMasters(r);a&&i.push(a.token)}}}),console.log("sendSubscriptions: ",i),this.zerodhaWebsocketService.subscribe(i),this.zerodhaWebsocketService.setMode(null,i)}findInMastersByToken(e){return f.mastersContract.get(e)}findStrikeInMasters(e){let i=null;return f.mastersContract.forEach(r=>{if(e.expiry===r.expiry&&e.instru===r.instru&&e.strike===r.strike&&e.type===r.optionType){i=r;return}}),i}findFutureInMasters(e){let i=null;return f.mastersContract.forEach(r=>{if(e.tradingSymbol===r.tradingSymbol&&e.exchange===r.exchange){i=r;return}}),i}findStockInMasters(e){let i=null;return f.mastersContract.forEach(r=>{if(e.tradingSymbol===r.tradingSymbol&&r.exchange==="NSE"){i=r;return}}),i}getMFData(e){let i="https://staticassets.zerodha.com/coin/historical-nav/"+e+".json";return this.http.get(i)}getFunds(){let e=f.broker_auth,i={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"};return this.http.get("https://kite.zerodha.com/oms/user/margins",i)}getPositions(){let e=f.broker_auth,i={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"};return this.http.get("https://kite.zerodha.com/oms/portfolio/positions",i)}getOrders(){let e=f.broker_auth,i={headers:new Fe({Authorization:e,"Content-Type":"application/json"}),responseType:"json"};return this.http.get("https://kite.zerodha.com/oms/orders",i)}place_order(e,i,r,s=null,o=null,a="NRML",l=f.defaultTag,c=0){let u="BUY";i<0&&(u="SELL",i=Math.abs(i));let d="MARKET",h=0;s&&(d="LIMIT",h=s),c&&(d="SL");let p={headers:new Fe({Authorization:r,"Content-Type":"application/x-www-form-urlencoded"}),responseType:"json"},_="NFO";(e.includes("SENSEX")||e.includes("BANKEX"))&&(_="BFO");let A=this.baseUrl+"oms/orders/regular";if(o){let v=new Ci().set("variety","regular").set("exchange",_).set("tradingsymbol",e).set("transaction_type",u).set("order_type",""+d).set("quantity",i).set("price",""+h).set("product",a).set("validity","DAY").set("disclosed_quantity","0").set("trigger_price",""+c).set("squareoff","0").set("stoploss","0").set("trailing_stoploss","0").set("user_id",f.zerodhaUserId).set("order_id",o).set("parent_order_id","");return A+="/"+o,this.http.put(A,v.toString(),p)}else{let v=new Ci().set("variety","regular").set("exchange",_).set("tradingsymbol",e).set("transaction_type",u).set("order_type",""+d).set("quantity",i).set("price",""+h).set("product",a).set("validity","DAY").set("disclosed_quantity","0").set("trigger_price",""+c).set("squareoff","0").set("stoploss","0").set("trailing_stoploss","0").set("user_id",f.zerodhaUserId).set("tag",l);return this.http.post(A,v.toString(),p)}}cancel_order(e){let i=f.broker_auth,r={headers:new Fe({Authorization:i,"Content-Type":"application/json"}),responseType:"json"},s="https://kite.zerodha.com/oms/orders/regular/"+e+"?order_id="+e+"&parent_order_id=&variety=regular";return this.http.delete(s,r)}nudge_order(e,i){let r={headers:new Fe({Authorization:i}),responseType:"json"},s=this.baseUrl+"oms/nudge/orders",o=[{exchange:"NFO",tradingsymbol:e,transaction_type:"BUY",variety:"regular",product:"NRML",order_type:"MARKET",quantity:1e3}];return this.http.post(s,o,r)}historical(e,i,r,s,o,a){let l={headers:new Fe({Authorization:f.broker_auth}),responseType:"json"},c="https://api.kite.trade/instruments/historical/"+e+"/"+i+"?from="+r+"&to="+s+"&continuous="+o+"&oi="+a;this.http.get(c,l).subscribe(u=>{console.log("zerodha historical",u);let d=[];for(let h=0;h<u.data.candles.length;h++){let p=u.data.candles[h],_={date:new Date(p[0]),open:p[1],high:p[2],low:p[3],close:p[4],volume:p[5]};p[6]&&(_.oi=p[6]),d.push(_)}console.log("zerodha historical result:",d)},u=>{console.log("zerodha historical error",u)})}static \u0275fac=function(i){return new(i||n)(ae(Ct),ae(Xm),ae(Ue))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var si=(()=>{class n{http;fyersService;aliceblueService;angelService;angelWS;mapService;zerodhaService;payOffEvent$=new ct;chartEvent$=new ct;stockChartEvent$=new ct;placeOrdersEvent$=new ct;mean=0;variance=1;constructor(e,i,r,s,o,a,l){this.http=e,this.fyersService=i,this.aliceblueService=r,this.angelService=s,this.angelWS=o,this.mapService=a,this.zerodhaService=l}dummyRequest(){let e="https://httpstat.us/200?sleep=10000";e="https://www.nseindia.com/api/option-chain-indices?symbol=BANKNIFTY",console.log("making dummy request"),this.http.get(e).subscribe(i=>{console.log("success",i)},i=>{console.log("error",i);let r="Error (mostly timeout)";i.error&&i.error.message?r=i.error.message:r=i.message,f.requestStatusEvent$.next({status:"danger",message:r})})}getRawCsvData(){return this.http.get("https://www.niftyindices.com/IndexConstituent/ind_nifty500list.csv",{responseType:"text"})}coinRequest(){let e={withCredentials:!0,headers:new Fe({cookie:"_ga=GA1.2.1309723177.1657258383; coin_session=pcJknMigqOhgkkMqqVzVsNrS3XcgvOy9; _pk_id.1.35a4=7cc08132c0469b55.1678078440.; signup_csrftoken=OF2XrKuTPpUNJZGGK5ODQJVW4joNdL7YjkuA7LEYwAX8SeWJqULTjbSe8Ucrqexg; AMP_MKTG_d9d4ec74fa=JTdCJTdE; _ga_Y19MKQM0YF=GS1.2.1700802963.1.0.1700802963.0.0.0; AMP_d9d4ec74fa=JTdCJTIyZGV2aWNlSWQlMjIlM0ElMjJlMjdiOGYwOS1mZWUzLTQ3OWMtYjIzNy02OTA4YjAwNTliYjQlMjIlMkMlMjJzZXNzaW9uSWQlMjIlM0ExNzAwODAyOTYyNzU0JTJDJTIyb3B0T3V0JTIyJTNBZmFsc2UlMkMlMjJsYXN0RXZlbnRUaW1lJTIyJTNBMTcwMDgwMjk3MzE3OSUyQyUyMmxhc3RFdmVudElkJTIyJTNBMiU3RA==; cf_clearance=QcTTs0eM7QOX7QqkJ..WB6SxuV4BMtvtclA_wV0RFxo-1702439681-0-1-aa6e5b56.99ac5591.5bd7611e-160.0.0; public_token=W7msMal5BeMrBUeLH4NnyEgLR6zMpAXa; _cfuvid=745C8KuaaVvRRW4gl8oox4K.jm3iqePintSSSArejws-1703667311507-0-604800000; __cf_bm=vQXpFrgA1cJCeU.22dFnMGaJyyN6rvKuZgPY7xcSysk-1703681906-1-AekhZ3Q2fm30ewvnalldMjowBNU6kpt1v9t2bR5/pcI9op+6FikhnmazsZzXrvSa4Q1/yKjPPEYrupu8554kSCQ=; _pk_ref.1.35a4=%5B%22%22%2C%22%22%2C1703682483%2C%22https%3A%2F%2Fconsole.zerodha.com%2F%22%5D; _pk_ses.1.35a4=1","x-csrftoken":"W7msMal5BeMrBUeLH4NnyEgLR6zMpAXa"})},i="https://coin.zerodha.com/api/mf/holdings";console.log("*** making coin request"),this.http.get(i,e).subscribe(r=>{console.log("*** success",r)},r=>{console.log("*** error",r);let s="Error (mostly timeout)";r.error&&r.error.message?s=r.error.message:s=r.message,f.requestStatusEvent$.next({status:"danger",message:s})})}coinRequest2(){let e={headers:new Fe({Authorization:"enctoken 2yAOdBPOZ/+KPIvhO3XXZxa6FheVGkciQfm+zluD8KX9tlc4yaVLLqqPSx/SKtZx9Uv97XGtIM02ipPEktyvV06q6l8cFidfuqAbbMVUjUihABNuDug0Vw==","Content-Type":"application/json"}),responseType:"json"},i="https://api.kite.trade/mf/holdings";console.log("*** making mf request"),this.http.get(i,e).subscribe(r=>{console.log("*** success",r)},r=>{console.log("*** error",r);let s="Error (mostly timeout)";r.error&&r.error.message?s=r.error.message:s=r.message,f.requestStatusEvent$.next({status:"danger",message:s})})}coinRequest3(){let e={headers:new Fe({Authorization:"enctoken 2yAOdBPOZ/+KPIvhO3XXZxa6FheVGkciQfm+zluD8KX9tlc4yaVLLqqPSx/SKtZx9Uv97XGtIM02ipPEktyvV06q6l8cFidfuqAbbMVUjUihABNuDug0Vw==","Content-Type":"application/json"}),responseType:"json"},i="https://staticassets.zerodha.com/coin/historical-nav/INF179K01WM1.json";console.log("*** making mf request"),this.http.get(i).subscribe(r=>{console.log("*** success",r)},r=>{console.log("*** error",r);let s="Error (mostly timeout)";r.error&&r.error.message?s=r.error.message:s=r.message,f.requestStatusEvent$.next({status:"danger",message:s})})}getZerodhaInstruments(){let e={responseType:"text"};this.http.get("https://api.kite.trade/instruments",e).subscribe(r=>{console.log("zerodha instruments",r),f.requestStatusEvent$.next({status:"success",message:"Fetched Zerodha instruments"});let o=r.split(/\r|\n|\r/).filter(function(a){return a!==""});for(let a=1;a<o.length;a++){let l=o[a].split(","),c=l[0],u=l[1],d=l[2],h=l[3].replaceAll('"',""),p=l[4],_=l[5],A=l[6],v=l[9];(h==="NIFTY"||h==="BANKNIFTY"||h==="FINNIFTY"||h==="SENSEX"||h==="BANKEX"||h==="MIDCPNIFTY")&&this.parseAndSetMaps(h,_,A,v,p),h==="NIFTY 50"&&this.mapService.setLtp("NIFTY50",p),h==="NIFTY BANK"&&this.mapService.setLtp("BANKNIFTY",p),h==="NIFTY FIN SERVICE"&&this.mapService.setLtp("FINNIFTY",p),h==="NIFTY MIDCAP SELECT (MIDCPNIFTY)"&&this.mapService.setLtp("MIDCPNIFTY",p),d==="SENSEX"&&this.mapService.setLtp("SENSEX",p),d==="BANKEX"&&this.mapService.setLtp("BANKEX",p)}},r=>{console.log("zerodha instruments error",r),f.requestStatusEvent$.next({status:"danger",message:r.status+" - Failed to fetch Zerodha instruments"})})}getNSE_OC(e){let i=e;e==="NIFTY50"&&(i="NIFTY");let r={responseType:"json"},s="https://www.nseindia.com/api/option-chain-indices?symbol="+i;this.http.get(s,r).subscribe(o=>{console.log("getNSE_OC",o),f.requestStatusEvent$.next({status:"success",message:"Fetched NSE OC of "+e});for(let[a,l]of Object.entries(o.records.data))l.hasOwnProperty("CE")&&this.parseAndSetMaps(i,l.CE.expiryDate,l.CE.strikePrice,"CE",l.CE.lastPrice),l.hasOwnProperty("PE")&&this.parseAndSetMaps(i,l.PE.expiryDate,l.PE.strikePrice,"PE",l.PE.lastPrice);this.mapService.setLtp(e,o.records.underlyingValue)},o=>{console.log("getNSE_OC error",o),f.requestStatusEvent$.next({status:"danger",message:o.status+" - Failed to fetch NSE OC of "+e})})}parseAndSetMaps(e,i,r,s,o){let a={instru:e,expiry:i,strike:r,optionType:s},l=this.mapService.getMapKey(a);this.mapService.setLtp(l,o)}uploadedMastersContract(e){if(f.SocketMode==="zerodha"){let i=String(e);this.zerodhaService.parseContractMaster(i)}else if(f.SocketMode==="aliceblue"){let i=JSON.parse(e.toString());this.aliceblueService.parseContractMaster(i)}else f.SocketMode}getMastersContract(e){if(f.SocketMode==="zerodha")this.zerodhaService.getMastersContract();else if(f.SocketMode==="aliceblue")this.aliceblueService.getMastersContract(e);else if(f.SocketMode==="angel")return this.angelService.getMastersContract()}reopenWebsocket(){f.SocketMode==="zerodha"?this.zerodhaService.connectWebsocket():f.SocketMode==="aliceblue"?this.aliceblueService.getEncKey():f.SocketMode}getDelta(e,i,r,s,o,a=!1,l=null){return this.getGreeks(e,i,r,s,o,a,l).delta}getGreeks(e,i,r,s,o,a=!1,l=null){var c=new gaussian(0,1);let u=new Date(s);e==="USDINR"?u.setHours(12,30,0):u.setHours(15,30,0);let d=new Date;a&&(d=l);let h=Math.floor((u.getTime()-d.getTime())/1e3),p=Math.floor(h/60),_=Math.floor(p/60),A=Math.floor(_/24)/365,v="NIFTY50";e==="BANKNIFTY"?v="BANKNIFTY":e==="FINNIFTY"?v="FINNIFTY":e==="USDINR"&&(v="USDINR");let b=this.mapService.getScripLTP(null,null,v,null),x=o,N=null;r==="CE"&&(N=zt.CE),r==="PE"&&(N=zt.PE);let k=this.calculateIV(e,b,i,f.INTEREST_RATE,u,N,x)/100,C=f.INTEREST_RATE/100,M=(Math.log(b/i)+(C+Math.pow(k,2)/2)*A)/(k*Math.sqrt(A)),O=(Math.log(b/i)+(C-Math.pow(k,2)/2)*A)/(k*Math.sqrt(A)),F=i*Math.exp(-1*C*A),j=b*c.cdf(M)-F*c.cdf(O),H=F*c.cdf(-1*O)-b*c.cdf(-1*M),Q=c.cdf(M),ie=Q-1,ue=c.pdf(M)/(b*k*Math.sqrt(A)),G=ue,X=b*c.pdf(M)*Math.sqrt(A)/100,te=X,ve=(-1*b*c.pdf(M)*k/(2*Math.sqrt(A))-C*F*c.cdf(O))/365,he=(-1*b*c.pdf(M)*k/(2*Math.sqrt(A))+C*F*c.cdf(-1*O))/365,ge=F*A*c.cdf(O)/100,re=-1*F*A*c.cdf(-1*O)/100,de=0,me=0,we=0,qe=0;return r==="CE"?(de=Q,me=ue,we=X,qe=ve):r==="PE"&&(de=ie,me=G,we=te,qe=he),de=Math.round((de+1e-5)*100)/100,me=Math.round((me+1e-5)*1e4)/1e4,we=Math.round((we+1e-5)*100)/100,qe=Math.round((qe+1e-5)*100)/100,{delta:de,gamma:me,vega:we,theta:qe}}getGreeks0(e,i,r,s,o,a=!1,l=null){var c=new gaussian(0,1);console.log(c);let u=new Date(s);e==="USDINR"?u.setHours(12,30,0):u.setHours(15,30,0);let d=new Date;a&&(d=l);let h=Math.floor((u.getTime()-d.getTime())/1e3),p=Math.floor(h/60),_=Math.floor(p/60),A=Math.floor(_/24)/365,v="NIFTY50";e==="BANKNIFTY"?v="BANKNIFTY":e==="FINNIFTY"?v="FINNIFTY":e==="MIDCPNIFTY"?v="MIDCPNIFTY":e==="SENSEX"?v="SENSEX":e==="BANKEX"?v="BANKEX":e==="USDINR"&&(v="USDINR");let b=this.mapService.getScripLTP(null,null,v,null),x=o,N=null;r==="CE"&&(N=zt.CE),r==="PE"&&(N=zt.PE);let k=this.calculateIV(e,b,i,f.INTEREST_RATE,u,N,x)/100,C=f.INTEREST_RATE/100,M=(Math.log(b/i)+(C+Math.pow(k,2)/2)*A)/(k*Math.sqrt(A)),O=0;r==="CE"?O=this.getCDF(M):r==="PE"&&(O=this.getCDF(M)-1),O=Math.round((O+1e-5)*100)/100;let F=Math.exp(-Math.pow(M,2)/2)/Math.sqrt(2*3.14159265358979),j=F/(b*(k*Math.sqrt(A)));j=Math.round((j+1e-5)*1e4)/1e4;let H=.01*b*Math.sqrt(A)*F;H=Math.round((H+1e-5)*100)/100;let Q=M-k*Math.sqrt(A),ie=this.getCDF(Q),ue=0;return r==="CE"?ue=-(b*k*F)/(2*Math.sqrt(A))-C*i*Math.exp(-C*A)*ie:r==="PE"&&(ue=-(b*k*F)/(2*Math.sqrt(A))+C*i*Math.exp(-C*A)*(1-ie)),ue=ue/365,ue=Math.round((ue+1e-5)*100)/100,{delta:O,gamma:j,vega:H,theta:ue}}calcHolidays(e,i){let r=0,s=new Date(e.getTime());for(;s<=i;){let o=s.getDay();(o===0||o===6)&&r++,s.setDate(s.getDate()+1)}return f.holidays.forEach(o=>{o>=e&&o<=i&&r++}),r}getLastWorkingDay(e){let i=new Date(e.getTime());for(i.setDate(i.getDate()-1);;){let r=i.getDay();if(r===0||r===6)i.setDate(i.getDate()-1);else{let s=!1;if(f.holidays.forEach(o=>{o.toLocaleDateString()===i.toLocaleDateString()&&(i.setDate(i.getDate()-1),s=!0)}),!s)break}}return i}calcWorkingDays(e,i){let r=0,s=new Date(e.getTime());for(;s<=i;){let o=s.getDay();o!==0&&o!==6&&r++,s.setDate(s.getDate()+1)}return f.holidays.forEach(o=>{o>=e&&o<=i&&r--}),r-1}calculateIV(e,i,r,s,o,a,l){let c=80,u=0,d=0;for(;c-u>1e-4;)this.calculateT0AtPoint(e,i,r,s,o,(c+u)/2,a)>l?c=(c+u)/2:u=(c+u)/2;return d=(c+u)/2,d}calculateT0AtPoint(e,i,r,s,o,a,l,c){let u=0,d=new Date(o);e==="USDINR"?d.setHours(12,30,0):d.setHours(15,30,0);let h=new Date,p=0;if(c){let v=new Date(h);v.setDate(v.getDate()+c),v.setHours(9,15,0),p=Math.floor((v.getTime()-h.getTime())/1e3)}let _=this.calcHolidays(h,d)*86400,A=Math.floor((d.getTime()-h.getTime())/1e3)-_-p;if(A>0){let x=A/60/60/24/365,N=a/100;s=s/100;let T=(Math.log(i/r)+(s+Math.pow(N,2)/2)*x)/(N*Math.sqrt(x)),k=T-N*Math.sqrt(x),C=r*Math.exp(-1*s*x);l===zt.CE&&(u=i*this.getCDF(T)-C*this.getCDF(k)),l===zt.PE&&(u=C*this.getCDF(-1*k)-i*this.getCDF(-1*T))}return u}getCDF(e){let i=Math.sqrt(this.variance);return .5*this.erfc(-(e-this.mean)/(i*Math.sqrt(2)))}erfc(e){let i=Math.abs(e),r=1/(1+i/2),s=r*Math.exp(-i*i-1.26551223+r*(1.00002368+r*(.37409196+r*(.09678418+r*(-.18628806+r*(.27886807+r*(-1.13520398+r*(1.48851587+r*(-.82215223+r*.17087277)))))))));return e>=0?s:2-s}playAudio(e){let i="";f.isProduction===!1&&(i="../");let r=new Audio;e==="success"?r.src=f.audioSuccess:e==="error"?r.src=f.audioError:e==="warn"&&(r.src=f.audioWarn),r.load(),r.play()}get(e){let i={},r=e;return this.http.get(r,i)}getZerodhaMargin(e,i,r,s){let o=[];for(let l=0;l<i.length;l++){let c=i[l];if(c.exit!==null&&c.exit===0){let u={instru:e,expiry:c.expiry,strike:this.mapService.parseScrip(c.scrip).scrip,optionType:this.mapService.parseScrip(c.scrip).type},d=this.mapService.getMapKey(u),h="SELL";c.qty>0&&(h="BUY");let p="CDS";(r.includes("NIFTY")||r.includes("BANKNIFTY")||r.includes("FINNIFTY")||r.includes("MIDCPNIFTY"))&&(p="NFO"),(r.includes("SENSEX")||r.includes("BANKEX"))&&(p="BFO");let _={exchange:p,tradingsymbol:d,transaction_type:h,variety:"regular",product:"NRML",order_type:"MARKET",quantity:Math.abs(c.qty),price:0,trigger_price:0,squareoff:0,stoploss:0};o.push(_)}}let a={headers:new Fe({Authorization:s}),responseType:"json"};return this.http.post("https://kite.zerodha.com/oms/margins/basket?consider_positions=&mode=compact",o,a)}getZerodhaMargin_old(e,i,r,s){let o=new FormData;o.append("action","calculate");for(let a=0;a<r.length;a++){let l=r[a];if(l.exit!==null&&l.exit===0){let c=l.scrip.slice(0,-2),u="";l.scrip.includes("CE")&&(u="CE"),l.scrip.includes("PE")&&(u="PE");let d="sell";l.qty>0&&(d="buy");let h="CDS";s.includes("NIFTY")&&(h="NFO");let p=1e3;(s==="NIFTY"||s==="BANKNIFTY")&&(p=1);let _=e+f.year+i;o.append("exchange[]",h),o.append("product[]","OPT"),o.append("scrip[]",_),o.append("option_type[]",u),o.append("strike_price[]",c),o.append("qty[]",Math.abs(l.qty)/p),o.append("trade[]",d)}}return this.http.post("https://zerodha.com/margin-calculator/SPAN",o)}sendSubscriptions(e){f.SocketMode==="zerodha"?this.zerodhaService.sendSubscriptions(e):f.SocketMode==="aliceblue"?this.aliceblueService.sendSubscriptions(e):f.SocketMode==="angel"&&this.angelService.sendSubscriptions(e)}connectWebsocket(e){f.SocketMode==="aliceblue"?this.aliceblueService.connectWebsocket(e):f.SocketMode==="angel"&&this.angelService.angelLogin()}closeWebsocket(){f.SocketMode==="zerodha"?this.zerodhaService.closeWebsocket():f.SocketMode==="aliceblue"?this.aliceblueService.closeWebsocket():f.SocketMode}isSocketConnected(){return f.SocketMode==="zerodha"?this.zerodhaService.isSocketConnected():f.SocketMode==="aliceblue"?this.aliceblueService.isSocketConnected():f.SocketMode==="angel"?this.angelWS.isSocketConnected():!1}auth(){return f.RestMode==="fyers"?this.fyersService.auth():null}getTokenUrl(e,i){return f.RestMode==="fyers"?this.fyersService.getTokenUrl(e,i):""}getFunds(e){return f.SocketMode==="zerodha"?this.zerodhaService.getFunds():f.RestMode==="fyers"?this.fyersService.getFunds(e):ke(null)}getPositions(e){return f.RestMode==="fyers"?this.fyersService.getPositions(e):ke(null)}getOrders(e){return f.RestMode==="fyers"?this.fyersService.getOrders(e):ke(null)}placeOrder(e,i,r,s,o,a,l,c){if(f.RestMode==="fyers"){let u={symbol:i,qty:r,type:s,side:o,productType:a,limitPrice:l,stopPrice:c,disclosedQty:0,validity:"DAY",offlineOrder:"False",stopLoss:0,takeProfit:0};return console.log("Order: "+u),this.fyersService.place_order(e,u)}return ke(null)}getQtyUptoFreezeLimit(e,i,r){let s=f.freezeLimit[e];return r&&Math.abs(r)<Math.abs(i)?s<Math.abs(r)?r<0?-s:s:r:s<Math.abs(i)?i<0?-s:s:i}static \u0275fac=function(i){return new(i||n)(ae(Ct),ae(ao),ae(co),ae(Jm),ae(Lr),ae(Ue),ae(Nn))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $m=(()=>{class n{http;mapService;fyersService;aliceblueService;zerodhaService;appService;optionChainEvent$=new ct;strategyPnLEvent$=new ct;intradayData=new Map;oc_instru;oc_year;oc_month;oc_date;oc_year2;oc_month2;oc_date2;oc_range_multiple;oc_range_higher;oc_range_lower;expiryString;expiryString2;oc_strikes;oc_strikes2;multi_oc_strikes1;multi_oc_strikes2;multi_oc_strikes3;multi_oc_strikes4;multi_oc_strikes5;ocSpotStrike;bfly_monitor;ds_monitor;charts={};candlestickSeries={};strike_interval;charts_instru;charts_expiry;charts_data={};fetch_delay=200;fetch_ce_interval;fetch_pe_interval;refresh_ce_interval;refresh_pe_interval;spot_chart_instru;spot_chart_chart;spot_candlestickSeries;spot_charts_data;single_strike_ce;single_strike_pe;single_chart_ce;single_chart_pe;single_chart_ce_candlestickSeries;single_chart_pe_candlestickSeries;constructor(e,i,r,s,o,a){this.http=e,this.mapService=i,this.fyersService=r,this.aliceblueService=s,this.zerodhaService=o,this.appService=a}getIntradayData(e,i,r){return this.intradayData.get(i+" "+r+" "+e)}loadIntradayData(e){console.log("Loading intraday data"),e.forEach(i=>{let r=JSON.parse(localStorage.getItem(i.instru+" "+i.expiry+" "+i.scrip));this.intradayData.set(i.instru+" "+i.expiry+" "+i.scrip,r)}),console.log("Loaded intraday data: ",this.intradayData)}initFetchIntraday(e){gp(500).subscribe(i=>{let r=new Date;r.setHours(17,5,0,0);let s=new Date;s.setHours(8,55,0,0);let o=new Date().getTime();o>r.getTime()||o<s.getTime()||new Date().getDay()===6||new Date().getDay()===0||e.forEach(a=>{let l=a.scrip,c=a.instru,u=a.expiry,d=null;if((l==="FUT"||l==="SPOT")&&(d=this.mapService.getScripLTP(null,null,c,null)),d){let h=this.intradayData.get(c+" "+u+" "+l);h||(h=[]);let p=new Date,_=[p.getFullYear(),p.getMonth()+1,p.getDate()].join("-")+" "+[p.getHours(),p.getMinutes()].join(":"),A=null;for(let v=0;v<h.length;v++)if(h[v].time&&h[v].time===_){A=v;break}A!==null?h[A]={time:_,price:d}:h.push({time:_,price:d}),this.intradayData.set(c+" "+u+" "+l,h)}})})}saveIntradayData(){gp(1e3).subscribe(e=>{for(let[i,r]of this.intradayData){let s=r;localStorage.setItem(i,JSON.stringify(s))}})}processOCRequest(e,i,r=null,s=null,o=null){this.oc_instru=e;let a=new Date(i);if(this.oc_year=a.getFullYear(),this.oc_month=a.getMonth()+1,this.oc_date=a.getDate(),this.oc_instru==="NIFTY"){this.oc_range_multiple=50;let l=this.mapService.getScripLTP(null,null,"NIFTY50",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+500,this.oc_range_lower=c-500}else if(this.oc_instru==="BANKNIFTY"){this.oc_range_multiple=100;let l=this.mapService.getScripLTP(null,null,"BANKNIFTY",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+1500,this.oc_range_lower=c-1500}else if(this.oc_instru==="FINNIFTY"){this.oc_range_multiple=50;let l=this.mapService.getScripLTP(null,null,"FINNIFTY",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+500,this.oc_range_lower=c-500}else if(this.oc_instru==="MIDCPNIFTY"){this.oc_range_multiple=25;let l=this.mapService.getScripLTP(null,null,"MIDCPNIFTY",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+300,this.oc_range_lower=c-300}else if(this.oc_instru==="SENSEX"){this.oc_range_multiple=100;let l=this.mapService.getScripLTP(null,null,"SENSEX",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+1500,this.oc_range_lower=c-1500}else if(this.oc_instru==="BANKEX"){this.oc_range_multiple=100;let l=this.mapService.getScripLTP(null,null,"BANKEX",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+1500,this.oc_range_lower=c-1500}else if(this.oc_instru==="USDINR"){this.oc_range_multiple=.25;let l=this.mapService.getScripLTP(null,null,"USDINR",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+2,this.oc_range_lower=c-2}this.updateOCRange(!1,r,s),o&&this.processOCRequest2(o)}processMultiOCRequest(e,i,r,s,o,a){if(this.oc_instru=e,this.oc_instru==="NIFTY"){this.oc_range_multiple=50;let l=this.mapService.getScripLTP(null,null,"NIFTY50",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+1e3,this.oc_range_lower=c-1e3}else if(this.oc_instru==="BANKNIFTY"){this.oc_range_multiple=100;let l=this.mapService.getScripLTP(null,null,"BANKNIFTY",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+1500,this.oc_range_lower=c-1500}else if(this.oc_instru==="FINNIFTY"){this.oc_range_multiple=50;let l=this.mapService.getScripLTP(null,null,"FINNIFTY",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+500,this.oc_range_lower=c-500}else if(this.oc_instru==="MIDCPNIFTY"){this.oc_range_multiple=25;let l=this.mapService.getScripLTP(null,null,"MIDCPNIFTY",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+300,this.oc_range_lower=c-300}else if(this.oc_instru==="SENSEX"){this.oc_range_multiple=100;let l=this.mapService.getScripLTP(null,null,"SENSEX",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+1500,this.oc_range_lower=c-1500}else if(this.oc_instru==="BANKEX"){this.oc_range_multiple=100;let l=this.mapService.getScripLTP(null,null,"BANKEX",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+1500,this.oc_range_lower=c-1500}else if(this.oc_instru==="USDINR"){this.oc_range_multiple=.25;let l=this.mapService.getScripLTP(null,null,"USDINR",null),c=Math.round(l/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=c+2,this.oc_range_lower=c-2}this.updateMultiOCRange(!0,e,null,null,i,r,s,o,a)}updateMultiOCRange(e=!1,i,r=null,s=null,o,a,l,c,u){let d=this.mapService.getExpiry(new Date(o),i),h=this.mapService.getExpiry(new Date(a),i),p=this.mapService.getExpiry(new Date(l),i),_=this.mapService.getExpiry(new Date(c),i),A=this.mapService.getExpiry(new Date(u),i);console.log("chartService updateMultiOCRange: ",d,h),r&&(console.log("setting oc_range_higher",r),this.oc_range_higher=Number(r)),s&&(console.log("setting oc_range_lower",s),this.oc_range_lower=Number(s)),console.log("setting",r,this.oc_range_higher,s,this.oc_range_lower,this.oc_range_multiple),this.multi_oc_strikes1=[],this.multi_oc_strikes2=[],this.multi_oc_strikes3=[],this.multi_oc_strikes4=[],this.multi_oc_strikes5=[];for(let v=this.oc_range_lower;v<=this.oc_range_higher;v+=this.oc_range_multiple)this.multi_oc_strikes1.push({symbol:this.oc_instru+d+v,strike:v,ltpCE:0,ltpPE:0,volumeCE:0,volumePE:0,isSpot:!1}),this.multi_oc_strikes2.push({symbol:this.oc_instru+h+v,strike:v,ltpCE:0,ltpPE:0,volumeCE:0,volumePE:0,isSpot:!1}),this.multi_oc_strikes3.push({symbol:this.oc_instru+p+v,strike:v,ltpCE:0,ltpPE:0,volumeCE:0,volumePE:0,isSpot:!1}),this.multi_oc_strikes4.push({symbol:this.oc_instru+_+v,strike:v,ltpCE:0,ltpPE:0,volumeCE:0,volumePE:0,isSpot:!1}),this.multi_oc_strikes5.push({symbol:this.oc_instru+A+v,strike:v,ltpCE:0,ltpPE:0,volumeCE:0,volumePE:0,isSpot:!1});if(console.log("chartService updateMultiOCRange: ",this.multi_oc_strikes1,this.multi_oc_strikes2),!f.isSimulatedStrategy&&e){let v=[];this.multi_oc_strikes1.forEach(b=>{v.push(this.mapService.getSubscriptionObject(b.strike+"CE",this.oc_instru,new Date(o).toDateString())),v.push(this.mapService.getSubscriptionObject(b.strike+"PE",this.oc_instru,new Date(o).toDateString()))}),this.multi_oc_strikes2.forEach(b=>{v.push(this.mapService.getSubscriptionObject(b.strike+"CE",this.oc_instru,new Date(a).toDateString())),v.push(this.mapService.getSubscriptionObject(b.strike+"PE",this.oc_instru,new Date(a).toDateString()))}),this.multi_oc_strikes3.forEach(b=>{v.push(this.mapService.getSubscriptionObject(b.strike+"CE",this.oc_instru,new Date(l).toDateString())),v.push(this.mapService.getSubscriptionObject(b.strike+"PE",this.oc_instru,new Date(l).toDateString()))}),this.multi_oc_strikes4.forEach(b=>{v.push(this.mapService.getSubscriptionObject(b.strike+"CE",this.oc_instru,new Date(c).toDateString())),v.push(this.mapService.getSubscriptionObject(b.strike+"PE",this.oc_instru,new Date(c).toDateString()))}),this.multi_oc_strikes5.forEach(b=>{v.push(this.mapService.getSubscriptionObject(b.strike+"CE",this.oc_instru,new Date(u).toDateString())),v.push(this.mapService.getSubscriptionObject(b.strike+"PE",this.oc_instru,new Date(u).toDateString()))}),console.log("chartService updateOCRange Subscriptions: "+v),this.appService.sendSubscriptions(v)}}updateMultiOCValues1(e){return this.multi_oc_strikes1&&this.multi_oc_strikes1.length>0&&this.multi_oc_strikes1.forEach(i=>{i.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(e),i.strike,"CE"),i.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(e),i.strike,"PE"),i.volumeCE=this.mapService.getScripVolume(this.oc_instru,new Date(e),i.strike,"CE"),i.volumePE=this.mapService.getScripVolume(this.oc_instru,new Date(e),i.strike,"PE"),i.isSpot=this.isSpotStrike(i.strike)}),this.multi_oc_strikes1}updateMultiOCValues2(e){return this.multi_oc_strikes2&&this.multi_oc_strikes2.length>0&&this.multi_oc_strikes2.forEach(i=>{i.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(e),i.strike,"CE"),i.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(e),i.strike,"PE"),i.volumeCE=this.mapService.getScripVolume(this.oc_instru,new Date(e),i.strike,"CE"),i.volumePE=this.mapService.getScripVolume(this.oc_instru,new Date(e),i.strike,"PE"),i.isSpot=this.isSpotStrike(i.strike)}),this.multi_oc_strikes2}updateMultiOCValues3(e){return this.multi_oc_strikes3&&this.multi_oc_strikes3.length>0&&this.multi_oc_strikes3.forEach(i=>{i.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(e),i.strike,"CE"),i.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(e),i.strike,"PE"),i.volumeCE=this.mapService.getScripVolume(this.oc_instru,new Date(e),i.strike,"CE"),i.volumePE=this.mapService.getScripVolume(this.oc_instru,new Date(e),i.strike,"PE"),i.isSpot=this.isSpotStrike(i.strike)}),this.multi_oc_strikes3}updateMultiOCValues4(e){return this.multi_oc_strikes4&&this.multi_oc_strikes4.length>0&&this.multi_oc_strikes4.forEach(i=>{i.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(e),i.strike,"CE"),i.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(e),i.strike,"PE"),i.volumeCE=this.mapService.getScripVolume(this.oc_instru,new Date(e),i.strike,"CE"),i.volumePE=this.mapService.getScripVolume(this.oc_instru,new Date(e),i.strike,"PE"),i.isSpot=this.isSpotStrike(i.strike)}),this.multi_oc_strikes4}updateMultiOCValues5(e){return this.multi_oc_strikes5&&this.multi_oc_strikes5.length>0&&this.multi_oc_strikes5.forEach(i=>{i.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(e),i.strike,"CE"),i.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(e),i.strike,"PE"),i.volumeCE=this.mapService.getScripVolume(this.oc_instru,new Date(e),i.strike,"CE"),i.volumePE=this.mapService.getScripVolume(this.oc_instru,new Date(e),i.strike,"PE"),i.isSpot=this.isSpotStrike(i.strike)}),this.multi_oc_strikes5}updateOCRange(e=!1,i=null,r=null){this.expiryString=this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),this.oc_instru),i&&(console.log("setting oc_range_higher",i),this.oc_range_higher=Number(i)),r&&(console.log("setting oc_range_lower",r),this.oc_range_lower=Number(r)),console.log("setting",i,this.oc_range_higher,r,this.oc_range_lower,this.oc_range_multiple),this.oc_strikes=[];for(let s=this.oc_range_lower;s<=this.oc_range_higher;s+=this.oc_range_multiple)this.oc_strikes.push({symbol:this.oc_instru+this.expiryString+s,strike:s,inCurrStrategyCE:!1,inCurrStrategyPE:!1,addCEToOrders:!1,addPEToOrders:!1,qtyInputCE:200,qtyInputPE:200,volumeCE:0,volumePE:0,deltaCE:0,gammaCE:0,vegaCE:0,thetaCE:0,deltaPE:0,gammaPE:0,vegaPE:0,thetaPE:0,ltpCE:0,ltpPE:0,qtyCE:0,qtyPE:0,costCE:0,costPE:0,inlineStrategyPnLCE:"",inlineStrategyPnLPE:"",isSpot:!1,showNudge:!1});if(!f.isSimulatedStrategy&&e){let s=[];this.oc_strikes.forEach(o=>{s.push(this.mapService.getSubscriptionObject(o.strike+"CE",this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date).toDateString())),s.push(this.mapService.getSubscriptionObject(o.strike+"PE",this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date).toDateString()))}),console.log("chartService updateOCRange Subscriptions: "+s),this.appService.sendSubscriptions(s)}}updateOCValues(){return this.oc_strikes&&this.oc_strikes.length>0&&this.oc_strikes.forEach(e=>{e.inCurrStrategyCE=this.isStrikeInCurrStrategy(e.strike+"CE"),e.inCurrStrategyPE=this.isStrikeInCurrStrategy(e.strike+"PE"),e.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"CE"),e.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"PE"),e.qtyCE=this.getQtyOfStrikeInStrategy(e.strike+"CE"),e.qtyPE=this.getQtyOfStrikeInStrategy(e.strike+"PE"),e.costCE=Math.round((this.getCostOfStrikeInStrategy(e.strike+"CE")+1e-5)*100)/100,e.costPE=Math.round((this.getCostOfStrikeInStrategy(e.strike+"PE")+1e-5)*100)/100,e.isSpot=this.isSpotStrike(e.strike),e.showNudge=this.showOILimit(this.oc_instru,e.strike)}),this.oc_strikes}processOCRequest2(e){let i=new Date(e);this.oc_year2=i.getFullYear(),this.oc_month2=i.getMonth()+1,this.oc_date2=i.getDate(),this.updateOCRange2()}updateOCRange2(){this.expiryString2=this.mapService.getExpiry(new Date(this.oc_year2,this.oc_month2-1,this.oc_date2),this.oc_instru),this.oc_strikes2=[];for(let e=this.oc_range_lower;e<=this.oc_range_higher;e+=this.oc_range_multiple)this.oc_strikes2.push({symbol:this.oc_instru+this.expiryString2+e,strike:e,ltpCE:0,ltpPE:0});if(!f.isSimulatedStrategy){let e=[];this.oc_strikes2.forEach(i=>{e.push(this.mapService.getSubscriptionObject(i.strike+"CE",this.oc_instru,new Date(this.oc_year2,this.oc_month2-1,this.oc_date2).toDateString())),e.push(this.mapService.getSubscriptionObject(i.strike+"PE",this.oc_instru,new Date(this.oc_year2,this.oc_month2-1,this.oc_date2).toDateString()))}),console.log("updateOCRange2 Subscriptions: "+e),this.appService.sendSubscriptions(e)}}updateOCValues2(){return this.oc_strikes2&&this.oc_strikes2.length>0&&this.oc_strikes2.forEach(e=>{e.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year2,this.oc_month2-1,this.oc_date2),e.strike,"CE"),e.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year2,this.oc_month2-1,this.oc_date2),e.strike,"PE"),e.isSpot=this.isSpotStrike(e.strike)}),this.oc_strikes2}updateBflyMonitorStrikes(e){if(this.oc_strikes&&this.oc_strikes.length>0){let i=this.oc_instru;this.oc_instru==="NIFTY"&&(i="NIFTY50");let r=this.mapService.getScripLTP(null,null,i,null),s=Math.round(r/this.oc_range_multiple)*this.oc_range_multiple,o=s+this.oc_range_multiple*3,a=s-this.oc_range_multiple*3;this.bfly_monitor=[];for(let l=a;l<s;l+=this.oc_range_multiple){let c=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),l,"PE"),u=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),l-this.oc_range_multiple,"PE"),d=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),l+this.oc_range_multiple,"PE"),h=c*e+u*-e/2+d*-e/2,p=Math.round(h),_=Math.round(this.oc_range_multiple*-e/2-p);this.bfly_monitor.push({symbol:this.oc_instru+this.expiryString+l,strike:l,scrip:l+"PE",maxProfit:_,maxLoss:p});let A=c*e+u*-e,v=Math.round(A),b=Math.round(this.oc_range_multiple*e-v)}for(let l=s+this.oc_range_multiple;l<=o;l+=this.oc_range_multiple){let c=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),l,"CE"),u=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),l+this.oc_range_multiple,"CE"),d=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),l-this.oc_range_multiple,"CE"),h=c*e+u*-e/2+d*-e/2,p=Math.round(h),_=Math.round(this.oc_range_multiple*-e/2-p);this.bfly_monitor.push({symbol:this.oc_instru+this.expiryString+l,strike:l,scrip:l+"CE",maxProfit:_,maxLoss:p});let A=c*e+u*-e,v=Math.round(A),b=Math.round(this.oc_range_multiple*e-v)}}return this.bfly_monitor}updateDSMonitorStrikes(e){if(this.oc_strikes&&this.oc_strikes.length>0){let i=this.oc_instru;this.oc_instru==="NIFTY"&&(i="NIFTY50");let r=this.mapService.getScripLTP(null,null,i,null),s=Math.round(r/this.oc_range_multiple)*this.oc_range_multiple,o=s+this.oc_range_multiple*3,a=s-this.oc_range_multiple*3;this.ds_monitor=[];for(let l=a;l<s;l+=this.oc_range_multiple){let c=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),l,"PE"),u=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),l-this.oc_range_multiple,"PE"),d=c*e+u*-e,h=Math.round(d),p=Math.round(this.oc_range_multiple*e-h);this.ds_monitor.push({symbol:this.oc_instru+this.expiryString+l,strike:l,scrip:l+"PE",maxProfit:-p,maxLoss:-h})}for(let l=s+this.oc_range_multiple;l<=o;l+=this.oc_range_multiple){let c=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),l,"CE"),u=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),l+this.oc_range_multiple,"CE"),d=c*e+u*-e,h=Math.round(d),p=Math.round(this.oc_range_multiple*e-h);this.ds_monitor.push({symbol:this.oc_instru+this.expiryString+l,strike:l,scrip:l+"CE",maxProfit:-p,maxLoss:-h})}}return this.ds_monitor}getQtyOfStrikeInStrategy(e){let i=f.curr_positions_trades;if(i){for(let r=0;r<i.length;r++){let s=i[r],o=new Date(this.oc_year,this.oc_month-1,this.oc_date),a=new Date(s.expiry);if(o.getDate()===a.getDate()&&s.scrip===e&&s.exit===0)return s.qty}return null}}getCostOfStrikeInStrategy(e){let i=f.curr_positions_trades;if(i){for(let r=0;r<i.length;r++){let s=i[r],o=new Date(this.oc_year,this.oc_month-1,this.oc_date),a=new Date(s.expiry);if(o.getDate()===a.getDate()&&s.scrip===e&&s.exit===0)return s.entry}return null}}isStrikeInCurrStrategy(e){let i=f.curr_positions_trades;if(i)for(let r=0;r<i.length;r++){let s=i[r],o=new Date(this.oc_year,this.oc_month-1,this.oc_date),a=new Date(s.expiry);if(s.exit===0&&o.getDate()===a.getDate()&&s.scrip===e)return!0}return!1}isChartStrikeInCurrStrategy(e){let i=f.curr_positions_trades;if(i){for(let r=0;r<i.length;r++){let s=i[r];if(s.exit===0&&s.scrip===e)return s.qty}return""}}fetchChartData(e,i,r){let s=this.mapService.getSubscriptionObject(e,i,r),o=this.zerodhaService.findStrikeInMasters(s),a=this.appService.getLastWorkingDay(new Date),l=""+a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2),c=new Date,u=""+c.getFullYear()+"-"+("0"+(c.getMonth()+1)).slice(-2)+"-"+("0"+c.getDate()).slice(-2);if(o&&o.token){let h={responseType:"json",headers:new Fe({authorization:f.broker_auth})},p="https://kite.zerodha.com/oms/instruments/historical/"+o.token+"/minute?user_id="+f.zerodhaUserId+"&oi=1&from="+l+"&to="+u;return this.http.get(p,h)}return null}updateSpotStrike(){let e="";this.oc_instru==="NIFTY"?e="NIFTY50":this.oc_instru==="BANKNIFTY"?e="BANKNIFTY":this.oc_instru==="FINNIFTY"?e="FINNIFTY":this.oc_instru==="MIDCPNIFTY"?e="MIDCPNIFTY":this.oc_instru==="SENSEX"?e="SENSEX":this.oc_instru==="BANKEX"?e="BANKEX":this.oc_instru==="USDINR"&&(e="USDINR");let i=this.mapService.getScripLTP(null,null,e,null),r=Math.round(i/this.oc_range_multiple)*this.oc_range_multiple;this.ocSpotStrike=r}isSpotStrike(e){return e===this.ocSpotStrike}showOILimit(e,i){return!!(e==="NIFTY"&&f.nfCEOILimit&&f.nfPEOILimit&&(i>f.nfCEOILimit||i<f.nfPEOILimit)||e==="BANKNIFTY"&&f.bnfCEOILimit&&f.bnfPEOILimit&&(i>f.bnfCEOILimit||i<f.bnfPEOILimit))}static \u0275fac=function(i){return new(i||n)(ae(Ct),ae(Ue),ae(ao),ae(co),ae(Nn),ae(si))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var fS=Ra(Zm());var e3=(()=>{class n{http;mapService;fyersService;aliceblueService;zerodhaService;appService;charts={};candlestickSeries={};strike_interval;charts_instru;charts_expiry;charts_data={};fetch_delay=200;fetch_ce_interval;fetch_pe_interval;refresh_ce_interval;refresh_pe_interval;spot_chart_instru;spot_chart_chart;spot_candlestickSeries;spot_charts_data;spot_chart_instru2;spot_chart_chart2;spot_candlestickSeries2;spot_charts_data2;single_strike_ce;single_strike_pe;single_chart_ce;single_chart_pe;single_chart_ce_candlestickSeries;single_chart_ce_lineSeries;single_chart_pe_candlestickSeries;single_chart_pe_lineSeries;strangle_chart_chart;strangle_strike_ce;strangle_strike_pe;strangle_chart_candlestickSeries;stock_chart_data;stock_chart_chart;stock_lineSeries1;stock_returns_data;nf_returns_data;histogram_returns_data;constructor(e,i,r,s,o,a){this.http=e,this.mapService=i,this.fyersService=r,this.aliceblueService=s,this.zerodhaService=o,this.appService=a}updateInstruExpiry(e=null,i=null){e&&(this.charts_instru=e),i&&(this.charts_expiry=i)}initSpotChart(e,i=!1){this.spot_chart_instru=e,this.spot_chart_chart&&this.spot_chart_chart.remove();let r=320,s=200;i&&(r=600,s=400);let o="spot-chart";this.spot_chart_chart=dt(o,{width:r,height:s,timeScale:{timeVisible:!0}}),this.spot_candlestickSeries=this.spot_chart_chart.addSeries(kt),this.fetchSpotChartData()}initSpotChart2(e,i=!1){this.spot_chart_instru2=e,this.spot_chart_chart2&&this.spot_chart_chart2.remove();let r=320,s=200;i&&(r=600,s=400);let o="spot-chart2";this.spot_chart_chart2=dt(o,{width:r,height:s,timeScale:{timeVisible:!0}}),this.spot_candlestickSeries2=this.spot_chart_chart2.addSeries(kt),this.fetchSpotChartData2()}fetchSpotChartData(){let e=this.appService.getLastWorkingDay(new Date),i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),r=new Date,s=""+r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+("0"+r.getDate()).slice(-2),o=this.mapService.getZerodhaInstruToken(this.spot_chart_instru);if(o){let l={responseType:"json",headers:new Fe({authorization:f.broker_auth})},c="https://kite.zerodha.com/oms/instruments/historical/"+o+"/minute?user_id="+f.zerodhaUserId+"&oi=1&from="+i+"&to="+s;this.http.get(c,l).subscribe(u=>{if(u.data.candles){let d=u.data.candles,h=[];d.length===0&&console.log("ZERO CANDLES FOR ",this.spot_chart_instru);for(let p=0;p<d.length;p++){let _=d[p],A=this.spot_charts_data;A||(A=[]);let v=_[0].replace("+0530","Z");A.push([v,_[1],_[2],_[3],_[4],_[5],_[6]]),this.spot_charts_data=A;let b={time:Date.parse(v)/1e3,open:_[1],high:_[2],low:_[3],close:_[4]};h.push(b)}this.spot_candlestickSeries.setData(h)}console.log("spot candles:",Object.keys(this.spot_chart_chart).length,this.spot_chart_chart)},u=>{console.log("zerodha spot fetch chart error",u)})}this.single_chart_ce&&this.fetchChartData(this.single_strike_ce,!1),this.single_chart_pe&&setTimeout(()=>{this.fetchChartData(this.single_strike_pe,!1)},300),setTimeout(()=>{this.updateSingleChart(this.single_strike_ce,"CE",!1),this.updateSingleChart(this.single_strike_pe,"PE",!1)},1500),this.fetchStrangleStrikesData(this.strangle_strike_ce,this.strangle_strike_pe,!1)}fetchSpotChartData2(){let e=this.appService.getLastWorkingDay(new Date),i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),r=new Date,s=""+r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+("0"+r.getDate()).slice(-2),o=this.mapService.getZerodhaInstruToken(this.spot_chart_instru2);if(o){let l={responseType:"json",headers:new Fe({authorization:f.broker_auth})},c="https://kite.zerodha.com/oms/instruments/historical/"+o+"/minute?user_id="+f.zerodhaUserId+"&oi=1&from="+i+"&to="+s;this.http.get(c,l).subscribe(u=>{if(u.data.candles){let d=u.data.candles,h=[];d.length===0&&console.log("ZERO CANDLES FOR ",this.spot_chart_instru2);for(let p=0;p<d.length;p++){let _=d[p],A=this.spot_charts_data2;A||(A=[]);let v=_[0].replace("+0530","Z");A.push([v,_[1],_[2],_[3],_[4],_[5],_[6]]),this.spot_charts_data2=A;let b={time:Date.parse(v)/1e3,open:_[1],high:_[2],low:_[3],close:_[4]};h.push(b)}this.spot_candlestickSeries2.setData(h)}console.log("spot candles:",Object.keys(this.spot_chart_chart2).length,this.spot_chart_chart2)},u=>{console.log("zerodha spot fetch chart error",u)})}}plotCurrentPrices(){let e=this.mapService.getScripLTP(null,null,this.spot_chart_instru,null),i=this.spot_charts_data,r=i[i.length-1],s={time:Date.parse(r[0])/1e3,open:r[1],high:r[2],low:r[3],close:e};this.spot_candlestickSeries.update(s);let o=this.mapService.getScripLTP(null,null,this.spot_chart_instru2,null),a=this.spot_charts_data2,l=a[a.length-1],c={time:Date.parse(l[0])/1e3,open:l[1],high:l[2],low:l[3],close:o};if(this.spot_candlestickSeries2.update(c),this.single_strike_ce){let u=this.mapService.getScripLTP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(this.single_strike_ce).scrip,this.mapService.parseScrip(this.single_strike_ce).type),d=this.charts_data[this.single_strike_ce],h=d[d.length-1],p={time:Date.parse(h[0])/1e3,open:h[1],high:h[2],low:h[3],close:u};if(this.single_chart_ce_candlestickSeries.update(p),f.showATPLine){let _=this.mapService.getScripATP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(this.single_strike_ce).scrip,this.mapService.parseScrip(this.single_strike_ce).type),A={time:Date.parse(h[0])/1e3,value:_};this.single_chart_ce_lineSeries.update(A)}else this.single_chart_ce_lineSeries.setData([])}if(this.single_strike_pe){let u=this.mapService.getScripLTP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(this.single_strike_pe).scrip,this.mapService.parseScrip(this.single_strike_pe).type),d=this.charts_data[this.single_strike_pe],h=d[d.length-1],p={time:Date.parse(h[0])/1e3,open:h[1],high:h[2],low:h[3],close:u};if(this.single_chart_pe_candlestickSeries.update(p),f.showATPLine){let _=this.mapService.getScripATP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(this.single_strike_pe).scrip,this.mapService.parseScrip(this.single_strike_pe).type),A={time:Date.parse(h[0])/1e3,value:_};this.single_chart_pe_lineSeries.update(A)}else this.single_chart_pe_lineSeries.setData([])}if(this.strangle_strike_ce&&this.strangle_strike_pe){let u=this.mapService.getScripLTP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(this.strangle_strike_ce).scrip,this.mapService.parseScrip(this.strangle_strike_ce).type),d=this.mapService.getScripLTP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(this.strangle_strike_pe).scrip,this.mapService.parseScrip(this.strangle_strike_pe).type),h=u+d,p=this.charts_data[this.strangle_strike_ce+"_"+this.strangle_strike_pe],_=p[p.length-1],A={time:Date.parse(_[0])/1e3,value:h};this.strangle_chart_candlestickSeries.update(A)}}resizeSingleCharts(e){e?(this.spot_chart_chart.resize(600,400),this.single_chart_ce&&this.single_chart_ce.resize(600,400),this.single_chart_pe&&this.single_chart_pe.resize(600,400)):(this.spot_chart_chart.resize(320,200),this.single_chart_ce&&this.single_chart_ce.resize(320,200),this.single_chart_pe&&this.single_chart_pe.resize(320,200))}updateSingleChart(e,i,r=!0,s=!1){if(e){let o=[],a=[],l=this.charts_data[e];if(!l)return;let c=this.mapService.getScripATP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(e).scrip,this.mapService.parseScrip(e).type);l.forEach(h=>{let p={time:Date.parse(h[0])/1e3,open:h[1],high:h[2],low:h[3],close:h[4]};o.push(p);let _={time:Date.parse(h[0])/1e3,value:c};a.push(_)});let u=320,d=200;if(s&&(u=600,d=400),i==="CE"){if(this.single_strike_ce=e,r){this.single_chart_ce&&this.single_chart_ce.remove();let h="chart-ce";this.single_chart_ce=dt(h,{width:u,height:d,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}}),this.single_chart_ce_candlestickSeries=this.single_chart_ce.addSeries(kt),this.single_chart_ce_lineSeries=this.single_chart_ce.addSeries(ut,{color:"#2962FF",lineWidth:2})}this.single_chart_ce_candlestickSeries.setData(o),f.showATPLine?this.single_chart_ce_lineSeries.setData(a):this.single_chart_ce_lineSeries.setData([])}else if(i==="PE"){if(this.single_strike_pe=e,r){this.single_chart_pe&&this.single_chart_pe.remove();let h="chart-pe";this.single_chart_pe=dt(h,{width:u,height:d,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}}),this.single_chart_pe_candlestickSeries=this.single_chart_pe.addSeries(kt),this.single_chart_pe_lineSeries=this.single_chart_pe.addSeries(ut,{color:"#2962FF",lineWidth:2})}this.single_chart_pe_candlestickSeries.setData(o),f.showATPLine?this.single_chart_pe_lineSeries.setData(a):this.single_chart_pe_lineSeries.setData([])}}}init_opt_charts(e,i,r,s,o,a,l){for(let c in this.charts)Object.prototype.hasOwnProperty.call(this.charts,c)&&this.charts[c].remove();this.charts={},this.fetch_ce_interval&&clearInterval(this.fetch_ce_interval),this.fetch_pe_interval&&clearInterval(this.fetch_pe_interval),this.refresh_ce_interval&&clearInterval(this.refresh_ce_interval),this.refresh_pe_interval&&clearInterval(this.refresh_pe_interval),this.charts_instru=e,this.strike_interval=a,this.charts_expiry=l,this.initForCallsPuts(i,r,a,"CE"),this.initForCallsPuts(s,o,a,"PE")}initForCallsPuts(e,i,r,s){let o=0;for(let u=i;u>=e;u-=r){let d="opt_chart_"+o+s;console.log("div_id",d);let h=dt(d,{width:320,height:200,timeScale:{timeVisible:!0}}),p=h.addSeries(kt);this.candlestickSeries[""+u+s]=p,this.charts[""+u+s]=h,o++}let a=0;for(let u=i;u>=e;u-=r)setTimeout(()=>{this.fetchChartData(u+s)},a*this.fetch_delay),a++;let l=this.fetch_ce_interval;s==="PE"&&(l=this.fetch_pe_interval),l=setInterval(()=>{let u=0;for(let d=i;d>=e;d-=r)setTimeout(()=>{this.fetchChartData(d+s)},u*this.fetch_delay),u++},6e4);let c=this.refresh_ce_interval;s==="PE"&&(c=this.refresh_pe_interval),c=setInterval(()=>{for(let u=i;u>=e;u-=r)this.plotOptChartsCurrentPrice(u+s)},1e3)}fetchChartData(e,i=!0){let r=this.mapService.getSubscriptionObject(e,this.charts_instru,this.charts_expiry),s=this.zerodhaService.findStrikeInMasters(r),o=this.appService.getLastWorkingDay(new Date),a=""+o.getFullYear()+"-"+("0"+(o.getMonth()+1)).slice(-2)+"-"+("0"+o.getDate()).slice(-2),l=new Date,c=""+l.getFullYear()+"-"+("0"+(l.getMonth()+1)).slice(-2)+"-"+("0"+l.getDate()).slice(-2);if(s&&s.token){let d={responseType:"json",headers:new Fe({authorization:f.broker_auth})},h="https://kite.zerodha.com/oms/instruments/historical/"+s.token+"/minute?user_id="+f.zerodhaUserId+"&oi=1&from="+a+"&to="+c;this.http.get(h,d).subscribe(p=>{if(p.data.candles){let _=p.data.candles;_.length===0&&console.log("ZERO CANDLES FOR ",e);let A=[];this.charts_data[e]=[];let v=[];for(let b=0;b<_.length;b++){let x=_[b],N=x[0].replace("+0530","Z");v.push([N,x[1],x[2],x[3],x[4],x[5],x[6]]);let T={time:Date.parse(N)/1e3,open:x[1],high:x[2],low:x[3],close:x[4]};A.push(T)}if(this.charts_data[e]=v,i){this.candlestickSeries[""+e].setData(A);let x=this.charts[""+e]}}console.log("candles:",Object.keys(this.charts_data).length,this.charts_data)},p=>{console.log("zerodha fetch chart error",p)})}}plotOptChartsCurrentPrice(e){let i=this.mapService.getScripLTP(this.charts_instru,this.charts_expiry,this.mapService.parseScrip(e).scrip,this.mapService.parseScrip(e).type),r=this.charts_data[e],s=r[r.length-1],o=this.candlestickSeries[""+e],a={time:Date.parse(s[0])/1e3,open:s[1],high:s[2],low:s[3],close:i};o.update(a)}fetchStrangleStrikesData(e,i,r=!0){e&&i&&(this.fetchChartData(e,!1),this.fetchChartData(i,!1),setTimeout(()=>{this.updateStrangleChart(e,i,r)},3e3))}updateStrangleChart(e,i,r=!0){if(e&&i){this.strangle_strike_ce=e,this.strangle_strike_pe=i;let s=[],o=this.charts_data[e];if(!o)return;let a=this.charts_data[i];if(!a)return;let l=this.getStrangleValues(o,a);if(this.charts_data[this.strangle_strike_ce+"_"+this.strangle_strike_pe]=l,l.forEach(c=>{let u={time:Date.parse(c[0])/1e3,value:c[1]};s.push(u)}),r){this.strangle_chart_chart&&this.strangle_chart_chart.remove();let c="strangle-chart";this.strangle_chart_chart=dt(c,{width:320,height:200,timeScale:{timeVisible:!0}}),this.strangle_chart_candlestickSeries=this.strangle_chart_chart.addSeries(ut)}this.strangle_chart_candlestickSeries.setData(s)}}initTV_charts_static(){let i=dt("tv_test",{width:400,height:200,timeScale:{timeVisible:!0}}).addSeries(kt),r="2018-06-25T09:15:00+0530";r=r.replace("+0530","Z"),i.setData([{time:Date.parse(r)/1e3,open:75.16,high:82.84,low:36.16,close:45.72},{time:Date.parse("2018-06-25T09:20:00.000Z")/1e3,open:45.12,high:53.9,low:45.12,close:48.09},{time:Date.parse("2018-06-25T09:25:00.000Z")/1e3,open:60.71,high:60.71,low:53.39,close:59.29},{time:Date.parse("2018-06-25T09:30:00.000Z")/1e3,open:68.26,high:68.26,low:59.04,close:60.5},{time:Date.parse("2018-06-25T09:35:00.000Z")/1e3,open:67.71,high:105.85,low:66.67,close:91.04},{time:Date.parse("2018-06-25T09:40:00.000Z")/1e3,open:91.04,high:121.4,low:82.7,close:111.4},{time:Date.parse("2018-06-25T09:45:00.000Z")/1e3,open:111.51,high:142.83,low:103.34,close:131.25},{time:Date.parse("2018-06-25T09:50:00.000Z")/1e3,open:131.33,high:151.17,low:77.68,close:96.43},{time:Date.parse("2018-06-25T09:55:00.000Z")/1e3,open:106.33,high:110.2,low:90.39,close:98.1},{time:Date.parse("2018-06-25T10:00:00.000Z")/1e3,open:109.87,high:114.69,low:85.66,close:111.26}])}initTV_charts_changing(){var i=dt("tv_test",{width:400,height:200}).addSeries(kt),r=[{time:"2018-10-19",open:54.62,high:55.5,low:54.52,close:54.9},{time:"2018-10-22",open:55.08,high:55.27,low:54.61,close:54.98},{time:"2018-10-23",open:56.09,high:57.47,low:56.09,close:57.21},{time:"2018-10-24",open:57,high:58.44,low:56.41,close:57.42},{time:"2018-10-25",open:57.46,high:57.63,low:56.17,close:56.43},{time:"2018-10-26",open:56.26,high:56.62,low:55.19,close:55.51},{time:"2018-10-29",open:55.81,high:57.15,low:55.72,close:56.48},{time:"2018-10-30",open:56.92,high:58.8,low:56.92,close:58.18},{time:"2018-10-31",open:58.32,high:58.32,low:56.76,close:57.09},{time:"2018-11-01",open:56.98,high:57.28,low:55.55,close:56.05},{time:"2018-11-02",open:56.34,high:57.08,low:55.92,close:56.63},{time:"2018-11-05",open:56.51,high:57.45,low:56.51,close:57.21},{time:"2018-11-06",open:57.02,high:57.35,low:56.65,close:57.21},{time:"2018-11-07",open:57.55,high:57.78,low:57.03,close:57.65},{time:"2018-11-08",open:57.7,high:58.44,low:57.66,close:58.27},{time:"2018-11-09",open:58.32,high:59.2,low:57.94,close:58.46},{time:"2018-11-12",open:58.84,high:59.4,low:58.54,close:58.72},{time:"2018-11-13",open:59.09,high:59.14,low:58.32,close:58.66},{time:"2018-11-14",open:59.13,high:59.32,low:58.41,close:58.94},{time:"2018-11-15",open:58.85,high:59.09,low:58.45,close:59.08},{time:"2018-11-16",open:59.06,high:60.39,low:58.91,close:60.21},{time:"2018-11-19",open:60.25,high:61.32,low:60.18,close:60.62},{time:"2018-11-20",open:61.03,high:61.58,low:59.17,close:59.46},{time:"2018-11-21",open:59.26,high:59.9,low:58.88,close:59.16},{time:"2018-11-23",open:58.86,high:59,low:58.29,close:58.64},{time:"2018-11-26",open:58.64,high:59.51,low:58.31,close:59.17},{time:"2018-11-27",open:59.21,high:60.7,low:59.18,close:60.65},{time:"2018-11-28",open:60.7,high:60.73,low:59.64,close:60.06},{time:"2018-11-29",open:59.42,high:59.79,low:59.26,close:59.45},{time:"2018-11-30",open:59.57,high:60.37,low:59.48,close:60.3},{time:"2018-12-03",open:59.5,high:59.75,low:57.69,close:58.16},{time:"2018-12-04",open:58.1,high:59.4,low:57.96,close:58.09},{time:"2018-12-06",open:58.18,high:58.64,low:57.16,close:58.08},{time:"2018-12-07",open:57.91,high:58.43,low:57.34,close:57.68},{time:"2018-12-10",open:57.8,high:58.37,low:56.87,close:58.27},{time:"2018-12-11",open:58.77,high:59.4,low:58.63,close:58.85},{time:"2018-12-12",open:57.79,high:58.19,low:57.23,close:57.25},{time:"2018-12-13",open:57,high:57.5,low:56.81,close:57.09},{time:"2018-12-14",open:56.95,high:57.5,low:56.75,close:57.08},{time:"2018-12-17",open:57.06,high:57.31,low:55.53,close:55.95},{time:"2018-12-18",open:55.94,high:56.69,low:55.31,close:55.65},{time:"2018-12-19",open:55.72,high:56.92,low:55.5,close:55.86},{time:"2018-12-20",open:55.92,high:56.01,low:54.26,close:55.07},{time:"2018-12-21",open:54.84,high:56.53,low:54.24,close:54.92},{time:"2018-12-24",open:54.68,high:55.04,low:52.94,close:53.05},{time:"2018-12-26",open:53.23,high:54.47,low:52.4,close:54.44},{time:"2018-12-27",open:54.31,high:55.17,low:53.35,close:55.15},{time:"2018-12-28",open:55.37,high:55.86,low:54.9,close:55.27},{time:"2018-12-31",open:55.53,high:56.23,low:55.07,close:56.22},{time:"2019-01-02",open:56.16,high:56.16,low:55.28,close:56.02},{time:"2019-01-03",open:56.3,high:56.99,low:56.06,close:56.22},{time:"2019-01-04",open:56.49,high:56.89,low:55.95,close:56.36},{time:"2019-01-07",open:56.76,high:57.26,low:56.55,close:56.72},{time:"2019-01-08",open:57.27,high:58.69,low:57.05,close:58.38},{time:"2019-01-09",open:57.68,high:57.72,low:56.85,close:57.05},{time:"2019-01-10",open:57.29,high:57.7,low:56.87,close:57.6},{time:"2019-01-11",open:57.84,high:58.26,low:57.42,close:58.02},{time:"2019-01-14",open:57.83,high:58.15,low:57.67,close:58.03},{time:"2019-01-15",open:57.74,high:58.29,low:57.58,close:58.1},{time:"2019-01-16",open:57.93,high:57.93,low:57,close:57.08},{time:"2019-01-17",open:57.16,high:57.4,low:56.21,close:56.83},{time:"2019-01-18",open:56.92,high:57.47,low:56.84,close:57.09},{time:"2019-01-22",open:57.23,high:57.39,low:56.4,close:56.99},{time:"2019-01-23",open:56.98,high:57.87,low:56.93,close:57.76},{time:"2019-01-24",open:57.61,high:57.65,low:56.5,close:57.07},{time:"2019-01-25",open:57.18,high:57.47,low:56.23,close:56.4},{time:"2019-01-28",open:56.12,high:56.22,low:54.8,close:55.07},{time:"2019-01-29",open:53.62,high:54.3,low:52.97,close:53.28},{time:"2019-01-30",open:53.1,high:54.02,low:52.28,close:54},{time:"2019-01-31",open:54.05,high:55.19,low:53.53,close:55.06},{time:"2019-02-01",open:55.21,high:55.3,low:54.47,close:54.55},{time:"2019-02-04",open:54.6,high:54.69,low:53.67,close:54.04},{time:"2019-02-05",open:54.1,high:54.34,low:53.61,close:54.14},{time:"2019-02-06",open:54.11,high:54.37,low:53.68,close:53.79},{time:"2019-02-07",open:53.61,high:53.73,low:53.02,close:53.57},{time:"2019-02-08",open:53.36,high:53.96,low:53.3,close:53.95},{time:"2019-02-11",open:54.13,high:54.37,low:53.86,close:54.05},{time:"2019-02-12",open:54.45,high:54.77,low:54.19,close:54.42},{time:"2019-02-13",open:54.35,high:54.77,low:54.28,close:54.48},{time:"2019-02-14",open:54.38,high:54.52,low:53.95,close:54.03},{time:"2019-02-15",open:54.48,high:55.19,low:54.32,close:55.16},{time:"2019-02-19",open:55.06,high:55.66,low:54.82,close:55.44},{time:"2019-02-20",open:55.37,high:55.91,low:55.24,close:55.76},{time:"2019-02-21",open:55.55,high:56.72,low:55.46,close:56.15},{time:"2019-02-22",open:56.43,high:57.13,low:56.4,close:56.92},{time:"2019-02-25",open:57,high:57.27,low:56.55,close:56.78},{time:"2019-02-26",open:56.82,high:57.09,low:56.46,close:56.64},{time:"2019-02-27",open:56.55,high:56.73,low:56.35,close:56.72},{time:"2019-02-28",open:56.74,high:57.61,low:56.72,close:56.92},{time:"2019-03-01",open:57.02,high:57.15,low:56.35,close:56.96},{time:"2019-03-04",open:57.15,high:57.34,low:55.66,close:56.24},{time:"2019-03-05",open:56.09,high:56.17,low:55.51,close:56.08},{time:"2019-03-06",open:56.19,high:56.42,low:55.45,close:55.68},{time:"2019-03-07",open:55.76,high:56.4,low:55.72,close:56.3},{time:"2019-03-08",open:56.36,high:56.68,low:56,close:56.53},{time:"2019-03-11",open:56.76,high:57.62,low:56.75,close:57.58},{time:"2019-03-12",open:57.63,high:58.11,low:57.36,close:57.43},{time:"2019-03-13",open:57.37,high:57.74,low:57.34,close:57.66},{time:"2019-03-14",open:57.71,high:58.09,low:57.51,close:57.95},{time:"2019-03-15",open:58.04,high:58.51,low:57.93,close:58.39},{time:"2019-03-18",open:58.27,high:58.32,low:57.56,close:58.07},{time:"2019-03-19",open:58.1,high:58.2,low:57.31,close:57.5},{time:"2019-03-20",open:57.51,high:58.05,low:57.11,close:57.67},{time:"2019-03-21",open:57.58,high:58.49,low:57.57,close:58.29},{time:"2019-03-22",open:58.16,high:60,low:58.13,close:59.76},{time:"2019-03-25",open:59.63,high:60.19,low:59.53,close:60.08},{time:"2019-03-26",open:60.3,high:60.69,low:60.17,close:60.63},{time:"2019-03-27",open:60.56,high:61.19,low:60.48,close:60.88},{time:"2019-03-28",open:60.88,high:60.89,low:58.44,close:59.08},{time:"2019-03-29",open:59.2,high:59.27,low:58.32,close:59.13},{time:"2019-04-01",open:59.39,high:59.41,low:58.79,close:59.09},{time:"2019-04-02",open:59.22,high:59.23,low:58.34,close:58.53},{time:"2019-04-03",open:58.78,high:59.07,low:58.41,close:58.87},{time:"2019-04-04",open:58.84,high:59.1,low:58.77,close:58.99},{time:"2019-04-05",open:59.02,high:59.09,low:58.82,close:59.09},{time:"2019-04-08",open:59.02,high:59.13,low:58.72,close:59.13},{time:"2019-04-09",open:58.37,high:58.56,low:58.04,close:58.4},{time:"2019-04-10",open:58.4,high:58.7,low:58.36,close:58.61},{time:"2019-04-11",open:58.65,high:58.73,low:58.2,close:58.56},{time:"2019-04-12",open:58.75,high:58.79,low:58.52,close:58.74},{time:"2019-04-15",open:58.91,high:58.95,low:58.59,close:58.71},{time:"2019-04-16",open:58.79,high:58.98,low:58.66,close:58.79},{time:"2019-04-17",open:58.4,high:58.46,low:57.64,close:57.78},{time:"2019-04-18",open:57.51,high:58.2,low:57.28,close:58.04},{time:"2019-04-22",open:58.14,high:58.49,low:57.89,close:58.37},{time:"2019-04-23",open:57.62,high:57.72,low:56.3,close:57.15},{time:"2019-04-24",open:57.34,high:57.57,low:56.73,close:57.08},{time:"2019-04-25",open:56.82,high:56.9,low:55.75,close:55.85},{time:"2019-04-26",open:56.06,high:56.81,low:55.83,close:56.58},{time:"2019-04-29",open:56.75,high:57.17,low:56.71,close:56.84},{time:"2019-04-30",open:56.99,high:57.45,low:56.76,close:57.19},{time:"2019-05-01",open:57.23,high:57.3,low:56.52,close:56.52},{time:"2019-05-02",open:56.81,high:58.23,low:56.68,close:56.99},{time:"2019-05-03",open:57.15,high:57.36,low:56.87,close:57.24},{time:"2019-05-06",open:56.83,high:57.09,low:56.74,close:56.91},{time:"2019-05-07",open:56.69,high:56.81,low:56.33,close:56.63},{time:"2019-05-08",open:56.66,high:56.7,low:56.25,close:56.38},{time:"2019-05-09",open:56.12,high:56.56,low:55.93,close:56.48},{time:"2019-05-10",open:56.49,high:57.04,low:56.26,close:56.91},{time:"2019-05-13",open:56.72,high:57.34,low:56.66,close:56.75},{time:"2019-05-14",open:56.76,high:57.19,low:56.5,close:56.55},{time:"2019-05-15",open:56.51,high:56.84,low:56.17,close:56.81},{time:"2019-05-16",open:57,high:57.8,low:56.82,close:57.38},{time:"2019-05-17",open:57.06,high:58.48,low:57.01,close:58.09},{time:"2019-05-20",open:59.15,high:60.54,low:58,close:59.01},{time:"2019-05-21",open:59.1,high:59.63,low:58.76,close:59.5},{time:"2019-05-22",open:59.09,high:59.37,low:58.96,close:59.25},{time:"2019-05-23",open:59,high:59.27,low:58.54,close:58.87},{time:"2019-05-24",open:59.07,high:59.36,low:58.67,close:59.32},{time:"2019-05-28",open:59.21,high:59.66,low:59.02,close:59.57}];i.setData(r);var s=r[r.length-1].close,o=r.length-1,a=o+105+Math.round(Math.random()+30),l=A(),c=o+1,u={day:29,month:5,year:2019},d=0,h={open:null,high:null,low:null,close:null,time:u};function p(b){h.open===null?(h.open=b,h.high=b,h.low=b,h.close=b):(h.close=b,h.high=Math.max(h.high,b),h.low=Math.min(h.low,b)),i.update(h)}function _(){i.setData(r),s=r[r.length-1].close,o=r.length-1,a=o+5+Math.round(Math.random()+30),l=A(),c=o+1,u={day:29,month:5,year:2019},d=0}function A(){return 10+Math.round(Math.random()*1e4)/100}function v(b){var x=new Date;return x.setUTCFullYear(b.year),x.setUTCMonth(b.month-1),x.setUTCDate(b.day+1),x.setUTCHours(0,0,0,0),{year:x.getUTCFullYear(),month:x.getUTCMonth()+1,day:x.getUTCDate()}}setInterval(function(){var b=l-s,x=a-o,N=b/x,T=s+(c-o)*N,k=.1-Math.random()*.2+1,C=T*k;if(p(C),++d===5){if(c++,u=v(u),h={open:null,high:null,low:null,close:null,time:u},d=0,c===5e3){_();return}c===a&&(s=C,o=c,a=o+5+Math.round(Math.random()+30),l=A())}},200)}processData_simulated(e,i,r,s,o=!1,a=null,l=null,c=!1,u=null){let d=Ue.stockChartData[e+"WK"+i+r];d||(d=Ue.stockChartData[e+i+r]);let h=[],p=-1;for(let k=0;k<d.length;k++){let C=d[k],M=C[0],O=new Date(M);if(a){let F=new Date(s);F.setHours(a,l),o?F&&O.getTime()>=F.getTime()&&(h.push(C),p===-1&&(p=k)):F&&O.getTime()>=F.getTime()&&O.getDate()===s.getDate()&&O.getMonth()===s.getMonth()&&O.getFullYear()===s.getFullYear()&&(h.push(C),p===-1&&(p=k))}else if(c){let F=new Date(s);F&&F.setDate(F.getDate()+1),F&&O<F&&(h.push(C),p===-1&&(p=k))}else s&&O.getDate()===s.getDate()&&O.getMonth()===s.getMonth()&&O.getFullYear()===s.getFullYear()&&(h.push(C),p===-1&&(p=k))}if(console.log("trimmedData:",h),u&&u===1)return h;let _=[],A=null,v=null,b=null,x=null,N=null,T=0;for(let k=0;k<h.length;k++){let C=h[k],M=C[0];new Date(M).getMinutes()%5===0?(A&&_.push([A,v,b,x,N,T]),A=C[0],v=C[1],b=C[2],x=C[3],N=null,T=0):(v===null&&(v=C[1]),(b===null||C[2]>b)&&(b=C[2]),(x===null||C[3]<x)&&(x=C[3]),(new Date(M).getMinutes()+1)%5===0&&(N=C[4]),k===h.length-1&&(N=C[4],_.push([A,v,b,x,N,T])),T+=C[5])}return console.log("processed_data:",_),_}initSpotChart_simulated(e,i,r=!1,s=null,o=null){this.spot_chart_instru=e,this.spot_chart_chart&&this.spot_chart_chart.remove();let a="spot-chart-simulate";this.spot_chart_chart=dt(a,{width:320,height:200,timeScale:{timeVisible:!0}}),this.spot_candlestickSeries=this.spot_chart_chart.addSeries(kt);let l=new Date().getTimezoneOffset()*6e4,c=this.processData_simulated(e,"","",i,r,s,o),u=[];for(let d=0;d<c.length;d++){let h=c[d],p=new Date(h[0]-l).toISOString(),_={time:Date.parse(p)/1e3,open:h[1],high:h[2],low:h[3],close:h[4]};u.push(_)}this.spot_candlestickSeries.setData(u),this.spot_chart_chart.timeScale().fitContent()}init_opt_charts_simulated(e,i,r,s,o,a,l){for(let c in this.charts)Object.prototype.hasOwnProperty.call(this.charts,c)&&this.charts[c].remove();this.charts={},this.charts_instru=e,this.strike_interval=a,this.charts_expiry=l,this.initForCallsPuts_simulated(i,r,a,"CE"),this.initForCallsPuts_simulated(s,o,a,"PE")}initForCallsPuts_simulated(e,i,r,s){let o=new Date().getTimezoneOffset()*6e4,a=0;for(let l=i;l>=e;l-=r){let c="opt_chart_"+a+s;console.log("div_id",c);let u=dt(c,{width:320,height:200,timeScale:{timeVisible:!0}}),d=this.processData_simulated(this.charts_instru,l,s,this.charts_expiry),h=[];for(let _=0;_<d.length;_++){let A=d[_],v=new Date(A[0]-o).toISOString(),b={time:Date.parse(v)/1e3,open:A[1],high:A[2],low:A[3],close:A[4]};h.push(b)}let p=u.addSeries(kt);p.setData(h),u.timeScale().fitContent(),this.candlestickSeries[""+l+s]=p,this.charts[""+l+s]=u,a++}}getStrangleValues(e,i){let r=[];for(let s=0;s<e.length;s++){let o=e[s],a=i[s],l;typeof o[4]<"u"?l=o[4]+a[4]:l=o[1]+a[1],r.push([o[0],l])}return r}createStockChart(){let e="stock-chart";this.stock_chart_chart&&this.stock_chart_chart.remove(),this.stock_chart_chart=dt(e,{width:1200,height:400,timeScale:{timeVisible:!0}});let i={},r=JSON.parse(localStorage.getItem("curr_positions"+f.stocksStrategyNum));r&&r.trades&&r.trades.forEach(l=>{let c=new Date(l.entryDateTime.split(" ")[0]),u=null;l.exitDateTime&&(u=new Date(l.exitDateTime.split(" ")[0]));let d=new Date,h=0;for(;c<=d;){let p=0;if(u&&c>=u)p+=l.qty*(l.exit-l.entry);else{let A=se.candlesData[l.scrip],v=new Date(c);v.setHours(0,0,0,0);let b=null;for(;!b;){let N=this.zerodhaService.getDateInFormat(v);if(b=A[N],b)break;v.setDate(v.getDate()-1)}let x=b[3];p+=l.qty*x}let _=c.toISOString().split("T")[0];_ in i||(i[_]=0),i[_]+=p,i[_]=Math.round((i[_]+1e-5)*100)/100,h=p,c.setDate(c.getDate()+1)}});let s=Object.entries(i).sort(([a],[l])=>new Date(a).getTime()-new Date(l).getTime()),o=new Date().getTimezoneOffset()*6e4;this.stock_chart_data=[];for(let[a,l]of s){let c=new Date(a),u=new Date(c.getTime()-o).toISOString(),d={time:Date.parse(u)/1e3,value:l};this.stock_chart_data.push(d)}this.stock_lineSeries1=this.stock_chart_chart.addSeries(ut,{color:"#2962FF",lineWidth:2}),this.stock_lineSeries1.setData(this.stock_chart_data),this.stock_chart_chart.timeScale().fitContent(),this.createReturnComparisonChart(s),setInterval(()=>{this.updateStockChart()},1e4)}createReturnComparisonChart(e){let i=dt("stock-chart-compare",{width:1200,height:400,rightPriceScale:{visible:!0},leftPriceScale:{visible:!0}}),r=i.addSeries(ut,{priceScaleId:"left",color:"#2962FF",lineWidth:2}),s=i.addSeries(ut,{priceScaleId:"left",color:"#FF5733",lineWidth:2}),o=i.addCustomSeries(new kc),a=new Date().getTimezoneOffset()*6e4;this.stock_returns_data=[],this.nf_returns_data=[],this.histogram_returns_data=[];let l=se.candlesData["NIFTY 50"],c=null,u=null,d=0,h=0;for(let[p,_]of e){let A=new Date(p),v=new Date(A.getTime()-a).toISOString(),b=0;c!==null&&(b=(_-c)/c*100,b=Math.round((b+1e-5)*100)/100,d+=b);let x={time:Date.parse(v)/1e3,value:d};this.stock_returns_data.push(x),c=_;let N=new Date(p);N.setHours(0,0,0,0);let T=null,k=this.zerodhaService.getDateInFormat(N);T=l[k];let C=0;if(T){let F=T[3];u!==null&&(C=(F-u)/u*100,C=Math.round((C+1e-5)*100)/100,h+=C),u=F}let M={time:Date.parse(v)/1e3,value:h};this.nf_returns_data.push(M);let O={time:Date.parse(v)/1e3,values:[b,C]};this.histogram_returns_data.push(O)}r.setData(this.stock_returns_data),s.setData(this.nf_returns_data),o.setData(this.histogram_returns_data),i.timeScale().fitContent()}updateStockChart(){let e=0,i=JSON.parse(localStorage.getItem("curr_positions"+f.stocksStrategyNum));i&&i.trades&&i.trades.forEach(l=>{if(l.exit!==0)e+=l.qty*(l.exit-l.entry);else{let c=this.mapService.getScripLTP(null,null,l.scrip,null);c||(c=0),e+=l.qty*c}});let r=this.stock_chart_data,o={time:r[r.length-1].time,value:e};this.stock_lineSeries1.update(o)}initStrangleChart_simulated(e,i,r,s,o=!1,a=null,l=null){this.initSpotChart_simulated(e,i,o,a,l),this.strangle_chart_chart&&this.strangle_chart_chart.remove();let c="strangle-chart";this.strangle_chart_chart=dt(c,{width:320,height:200,timeScale:{timeVisible:!0}});let u=new Date().getTimezoneOffset()*6e4,d=this.processData_simulated(e,r,"",i,o,a,l),h=this.processData_simulated(e,s,"",i,o,a,l),p=this.getStrangleValues(d,h);console.log("arr1",d),console.log("arr2",h),console.log("arr",p);let _=[];for(let v=0;v<p.length;v++){let b=p[v],x=new Date(b[0]-u).toISOString(),N={time:Date.parse(x)/1e3,value:b[1]};_.push(N)}this.strangle_chart_chart.addSeries(ut,{}).setData(_),this.strangle_chart_chart.timeScale().fitContent()}initForCallsPuts_simulated_0(e,i,r,s){for(let l in this.charts)Object.prototype.hasOwnProperty.call(this.charts,l)&&this.charts[l].remove();this.charts={},f.st_simulate_ce=[],f.st_simulate_pe=[];let o=new Date(i);o.setDate(o.getDate()+1),o.setHours(9),o.setMinutes(30);let a=new Date().getTimezoneOffset()*6e4;for(let l=0;l<=6;l++){let c;for(;;){console.log("ST curr date",o,c),o.setDate(o.getDate()-1),o.setHours(9),o.setMinutes(30);let X=""+("0"+o.getDate()).slice(-2)+"-"+("0"+(o.getMonth()+1)).slice(-2)+"-"+o.getFullYear()+" "+("0"+o.getHours()).slice(-2)+":"+("0"+o.getMinutes()).slice(-2)+":00";if(this.loadSimulatedOCForTime(e,X,i),c=this.mapService.getScripLTP(null,null,e,null),c)break;console.log("ST curr date going back")}let u=50;e==="BANKNIFTY"?u=100:e==="FINNIFTY"?u=50:e==="MIDCPNIFTY"?u=25:e==="SENSEX"||e==="BANKEX"?u=100:e==="USDINR"&&(u=.25);let d=Math.round(c/u)*u;console.log("ST spotstrike",d);let h=d+Number(s),p=d-Number(s),_=this.processData_simulated(e,"","",o),A=[];for(let G=0;G<_.length;G++){let X=_[G],te=new Date(X[0]-a).toISOString(),ve={time:Date.parse(te)/1e3,open:X[1],high:X[2],low:X[3],close:X[4]};A.push(ve)}let v="opt_chart_"+l+"_spot",b=dt(v,{width:320,height:240,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});b.addSeries(kt).setData(A),b.timeScale().fitContent(),this.charts["opt_chart_"+l+"_spot"]=b;let N=this.processData_simulated(e,h,"CE",o,!1,null,null,!0),T=[];for(let G=0;G<N.length;G++){let X=N[G],te=new Date(X[0]-a).toISOString(),ve={time:Date.parse(te)/1e3,open:X[1],high:X[2],low:X[3],close:X[4]};T.push(ve)}let k=this.supertrend_calc(T),C="opt_chart_"+l+"_CE";console.log("div_id_ce",C);let M=dt(C,{width:320,height:240,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});M.addSeries(kt).setData(this.getCurrDateData(o,T)),(r==="10_2"||r==="both")&&M.addSeries(ut,{lineWidth:1}).setData(this.getCurrDateData(o,k[0])),(r==="7_3"||r==="both")&&M.addSeries(ut,{lineWidth:1}).setData(this.getCurrDateData(o,k[1])),M.timeScale().fitContent(),this.charts["opt_chart_"+l+"_CE"]=M,f.st_simulate_ce.push(h+"CE");let F=this.processData_simulated(e,p,"PE",o,!1,null,null,!0),j=[];for(let G=0;G<F.length;G++){let X=F[G],te=new Date(X[0]-a).toISOString(),ve={time:Date.parse(te)/1e3,open:X[1],high:X[2],low:X[3],close:X[4]};j.push(ve)}let H=this.supertrend_calc(j),Q="opt_chart_"+l+"_PE";console.log("div_id",Q);let ie=dt(Q,{width:320,height:240,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});ie.addSeries(kt).setData(this.getCurrDateData(o,j)),(r==="10_2"||r==="both")&&ie.addSeries(ut,{lineWidth:1}).setData(this.getCurrDateData(o,H[0])),(r==="7_3"||r==="both")&&ie.addSeries(ut,{lineWidth:1}).setData(this.getCurrDateData(o,H[1])),ie.timeScale().fitContent(),this.charts["opt_chart_"+l+"_PE"]=ie,f.st_simulate_pe.push(p+"PE")}}getCurrDateData(e,i){let r=[];return i.forEach(s=>{let o=new Date(s.time*1e3);o.getDate()===e.getDate()&&o.getMonth()===e.getMonth()&&o.getFullYear()===e.getFullYear()&&r.push(s)}),r}supertrend_calc(e){let i=new fS.SuperTrend(10,2,"WEMA"),r=new fS.SuperTrend(7,3,"WEMA"),s=[],o=[];return e.forEach(a=>{let l=i.nextValue(a.high,a.low,a.close),c,u="green";l&&(c=l.superTrend,l.direction===1&&(u="red"));let d={time:a.time,value:c,color:u};s.push(d);let h=r.nextValue(a.high,a.low,a.close),p,_="green";h&&(p=h.superTrend,h.direction===1&&(_="red"));let A={time:a.time,value:p,color:_};o.push(A)}),[s,o]}loadSimulatedOCForTime(e,i,r){let s=i;console.log("ST loadSimulatedOCForTime",s);for(let[o,a]of Object.entries(Ue.simulateData))if(o===e||o.startsWith(e)&&(o.endsWith("CE")||o.endsWith("PE")))if(o===e){let l=e;e==="NIFTY"&&(l="NIFTY50"),e==="USDINR"&&(l="USDINR"),this.mapService.setLtp(l,a[s])}else{let l=o;l=l.replace(e,""),l=l.replace("WK","");let c={instru:e,expiry:r,strike:this.mapService.parseScrip(l).scrip,optionType:this.mapService.parseScrip(l).type},u=this.mapService.getMapKey(c),d=a[s];this.mapService.setLtp(u,d)}console.log("ST ltpMap",this.mapService.ltpMap)}initForCallsPuts_simulated_1(e,i,r,s,o){for(let h in this.charts)Object.prototype.hasOwnProperty.call(this.charts,h)&&this.charts[h].remove();this.charts={},f.st_simulate_charts=[],f.st_simulate_charts_values=[],f.st_simulate_charts_print=[],f.st_simulate_charts_print_strangle=[],f.st_simulate_exits=[];let a=5;s==="1min"&&(a=1);let l=new Date(i);l.setDate(l.getDate()+1),l.setHours(9),l.setMinutes(30);let c=new Date().getTimezoneOffset()*6e4;for(let h=0;h<=6;h++){let p=0;for(;;){l.setDate(l.getDate()-1),l.setHours(9),l.setMinutes(30),console.log("ST curr date",l);let b=""+("0"+l.getDate()).slice(-2)+"-"+("0"+(l.getMonth()+1)).slice(-2)+"-"+l.getFullYear()+" "+("0"+l.getHours()).slice(-2)+":"+("0"+l.getMinutes()).slice(-2)+":00";if(this.loadSimulatedOCForTime(e,b,i),this.mapService.getScripLTP(null,null,e,null))break;console.log("ST curr date going back")}if(h===0||h===1)continue;let _=500,A=50;if(e==="BANKNIFTY"?(A=100,_=6e3):e==="FINNIFTY"?A=50:e==="MIDCPNIFTY"?A=25:e==="SENSEX"||e==="BANKEX"?A=100:e==="USDINR"&&(A=.25),r){let v=this.processData_simulated(e,"","",l,!1,null,null,!1,a),b=[];for(let k=0;k<v.length;k++){let C=v[k],M=new Date(C[0]-c).toISOString(),O={time:Date.parse(M)/1e3,open:C[1],high:C[2],low:C[3],close:C[4]};b.push(O)}let x="opt_chart_"+h+"_spot",N=dt(x,{width:320,height:160,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});N.addSeries(kt).setData(b),N.timeScale().fitContent(),this.charts["opt_chart_"+h+"_spot"]=N,f.st_simulate_charts["opt_chart_"+h+"_spot"]=e}for(;;){let b=""+("0"+l.getDate()).slice(-2)+"-"+("0"+(l.getMonth()+1)).slice(-2)+"-"+l.getFullYear()+" "+("0"+l.getHours()).slice(-2)+":"+("0"+l.getMinutes()).slice(-2)+":00";this.loadSimulatedOCForTime(e,b,i);let x=this.mapService.getScripLTP(null,null,e,null);x=Math.round(x/A)*A,console.log("curr time",l);let N=this.findPremiumStrike(e,i,x,"CE",A,40,_),T=this.isSTCondition(e,N,"CE",l,a);if(T[0]===!0){if(r){let M="opt_chart_"+h+"_"+p;console.log("div_id",M);let O=dt(M,{width:320,height:180,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});O.addSeries(kt).setData(this.getCurrDateData(l,T[1])),O.addSeries(ut,{lineWidth:1}).setData(this.getCurrDateData(l,T[2])),O.timeScale().fitContent(),this.charts["opt_chart_"+h+"_"+p]=O}f.st_simulate_charts["opt_chart_"+h+"_"+p]=N+"CE "+l.toLocaleString(),f.st_simulate_charts_values["opt_chart_"+h+"_"+p]=T[3],f.st_simulate_charts_print["opt_chart_"+h+"_"+p]=N+"CE,"+l.toLocaleString()+","+T[3],p++}let k=this.findPremiumStrike(e,i,x,"PE",A,40,_),C=this.isSTCondition(e,k,"PE",l,a);if(C[0]===!0){if(r){let M="opt_chart_"+h+"_"+p;console.log("div_id",M);let O=dt(M,{width:320,height:180,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});O.addSeries(kt).setData(this.getCurrDateData(l,C[1])),O.addSeries(ut,{lineWidth:1}).setData(this.getCurrDateData(l,C[2])),O.timeScale().fitContent(),this.charts["opt_chart_"+h+"_"+p]=O}f.st_simulate_charts["opt_chart_"+h+"_"+p]=k+"PE "+l.toLocaleString(),f.st_simulate_charts_values["opt_chart_"+h+"_"+p]=C[3],f.st_simulate_charts_print["opt_chart_"+h+"_"+p]=k+"PE,"+l.toLocaleString()+","+C[3],p++}if(l.setMinutes(l.getMinutes()+a),l.getHours()>=15&&l.getMinutes()>=5)break}this.processStrangle(e,i,A,_,l,h)}let u="";for(let h in f.st_simulate_charts_print)if(Object.prototype.hasOwnProperty.call(f.st_simulate_charts_print,h)){let p=f.st_simulate_charts_print[h];u+=p+`\r
`}for(let h in f.st_simulate_charts_print_strangle)if(Object.prototype.hasOwnProperty.call(f.st_simulate_charts_print_strangle,h)){let p=f.st_simulate_charts_print_strangle[h];u+=p+`\r
`}let d=0;f.st_simulate_exits.forEach(h=>{d+=h}),console.log(`done loading\r
`,u,d)}isSTCondition(e,i,r,s,o){let a=new Date().getTimezoneOffset()*6e4,l=this.processData_simulated(e,i,r,s,!1,null,null,!0,o),c=[];for(let x=0;x<l.length;x++){let N=l[x],T=new Date(N[0]-a).toISOString(),k={time:Date.parse(T)/1e3,open:N[1],high:N[2],low:N[3],close:N[4]};c.push(k)}let u=this.supertrend_calc(c),d=new Date(s.getTime()-a).toISOString(),h=Date.parse(d)/1e3,p=u[0].find(x=>x.time===h),_=new Date(s);_.setMinutes(_.getMinutes()-o);let A=new Date(_.getTime()-a).toISOString(),v=Date.parse(A)/1e3,b=u[0].find(x=>x.time===v);if(o===5&&s.getHours()===9&&s.getMinutes()===30&&b.color==="green"&&p.color==="green"){console.log("ST found continuation at open",b,p);let x=this.findSTExit(u[0],c,s,o);return[!0,c,u[0],x]}if(b&&p&&b.color==="red"&&p.color==="green"){console.log("ST found",b,p);let x=this.findSTExit(u[0],c,s,o);return[!0,c,u[0],x]}else return[!1]}findSTExit(e,i,r,s){let o=new Date().getTimezoneOffset()*6e4,a=8,l=-8,c=null,u=null,d=null,h=null,p=null,_=null,A=null,v=null,b=new Date(r),x=new Date(b.getTime()-o).toISOString(),N=Date.parse(x)/1e3;u=i.find(F=>F.time===N).close,A=e.find(F=>F.time===N).value;let C=new Date(r),M=!0;for(;;){let F=new Date(C.getTime()-o).toISOString(),j=Date.parse(F)/1e3,H=i.find(ie=>ie.time===j);!M&&c===null&&(H.high-u>=a?c=a:H.low-u<=l&&(c=l)),M===!0?(h=999,p=u):H&&H.low<h&&(h=H.low,p=d),M===!0?d=0:H&&H.high>d&&(d=H.high);let Q=e.find(ie=>ie.time===j);if(Q&&Q.color==="red"){_=H.close;break}if(Q&&(v=Q.value),C.setMinutes(C.getMinutes()+s),C.getHours()>=15&&C.getMinutes()>=20){_=H.close;break}M=!1}c===null&&(c=_-u),f.st_simulate_exits.push(c);let O="No";return d-u>=a&&(O="Yes"),Math.round(u*10)/10+","+Math.round(d*10)/10+","+Math.round(h*10)/10+","+Math.round(_*10)/10+","+Math.round(A*10)/10+","+Math.round(v*10)/10}findPremiumStrike(e,i,r,s,o,a,l){let c,u,d=99999999;if(s==="CE")for(let h=r;h<=r+l;h+=o){let p=this.mapService.getScripLTP(e,new Date(i),h,"CE"),_=Math.abs(p-a);_<d&&(d=_,c=h,u=p)}else if(s==="PE")for(let h=r;h>=r-l;h-=o){let p=this.mapService.getScripLTP(e,new Date(i),h,"PE"),_=Math.abs(p-a);_<d&&(d=_,c=h,u=p)}return console.log("selecting for ST",c,s,u),c}processStrangle(e,i,r,s,o,a){o.setHours(9),o.setMinutes(20),console.log("strangle entry curr date",o);let l=""+("0"+o.getDate()).slice(-2)+"-"+("0"+(o.getMonth()+1)).slice(-2)+"-"+o.getFullYear(),c=l+" "+("0"+o.getHours()).slice(-2)+":"+("0"+o.getMinutes()).slice(-2)+":00";this.loadSimulatedOCForTime(e,c,i);let u=this.mapService.getScripLTP(null,null,e,null);u=Math.round(u/r)*r;let d=this.findPremiumStrike(e,i,u,"CE",r,25,s),h=this.findPremiumStrike(e,i,u,"PE",r,25,s),p=this.mapService.getScripLTP(e,new Date(i),d,"CE"),_=this.mapService.getScripLTP(e,new Date(i),h,"PE"),A=p+_;o.setHours(15),o.setMinutes(20),console.log("strangle exit curr date",o),l=""+("0"+o.getDate()).slice(-2)+"-"+("0"+(o.getMonth()+1)).slice(-2)+"-"+o.getFullYear(),c=l+" "+("0"+o.getHours()).slice(-2)+":"+("0"+o.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(e,c,i);let v=this.mapService.getScripLTP(e,new Date(i),d,"CE"),b=this.mapService.getScripLTP(e,new Date(i),h,"PE"),x=v+b;console.log("strangle",p,_,A,v,b,x),f.st_simulate_charts_print_strangle["opt_chart_"+a+"_strangle"]="strangle,"+o.toLocaleString()+","+Math.round(A*10)/10+","+Math.round(x*10)/10}static \u0275fac=function(i){return new(i||n)(ae(Ct),ae(Ue),ae(ao),ae(co),ae(Nn),ae(si))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var gS=Ra(Zm());var t3=(()=>{class n{http;mapService;fyersService;aliceblueService;zerodhaService;appService;charts={};candlestickSeries={};backtestResult=[];constructor(e,i,r,s,o,a){this.http=e,this.mapService=i,this.fyersService=r,this.aliceblueService=s,this.zerodhaService=o,this.appService=a}processData_simulated(e,i,r,s,o=!1,a=null,l=null,c=!1,u=null){let d=Ue.stockChartData[e+"WK"+i+r];d||(d=Ue.stockChartData[e+i+r]);let h=[],p=-1;for(let k=0;k<d.length;k++){let C=d[k],M=C[0],O=new Date(M);if(a){let F=new Date(s);F.setHours(a,l),o?F&&O.getTime()>=F.getTime()&&(h.push(C),p===-1&&(p=k)):F&&O.getTime()>=F.getTime()&&O.getDate()===s.getDate()&&O.getMonth()===s.getMonth()&&O.getFullYear()===s.getFullYear()&&(h.push(C),p===-1&&(p=k))}else if(c){let F=new Date(s);F&&F.setDate(F.getDate()+1),F&&O<F&&(h.push(C),p===-1&&(p=k))}else s&&O.getDate()===s.getDate()&&O.getMonth()===s.getMonth()&&O.getFullYear()===s.getFullYear()&&(h.push(C),p===-1&&(p=k))}if(console.log("trimmedData:",h),u&&u===1)return h;let _=[],A=null,v=null,b=null,x=null,N=null,T=0;for(let k=0;k<h.length;k++){let C=h[k],M=C[0];new Date(M).getMinutes()%5===0?(A&&_.push([A,v,b,x,N,T]),A=C[0],v=C[1],b=C[2],x=C[3],N=null,T=0):(v===null&&(v=C[1]),(b===null||C[2]>b)&&(b=C[2]),(x===null||C[3]<x)&&(x=C[3]),(new Date(M).getMinutes()+1)%5===0&&(N=C[4]),k===h.length-1&&(N=C[4],_.push([A,v,b,x,N,T])),T+=C[5])}return console.log("processed_data:",_),_}getCurrDateData(e,i){let r=[];return i.forEach(s=>{let o=new Date(s.time*1e3);o.getDate()===e.getDate()&&o.getMonth()===e.getMonth()&&o.getFullYear()===e.getFullYear()&&r.push(s)}),r}supertrend_calc(e){let i=new gS.SuperTrend(10,2,"WEMA"),r=new gS.SuperTrend(7,3,"WEMA"),s=[],o=[];return e.forEach(a=>{let l=i.nextValue(a.high,a.low,a.close),c,u="green";l&&(c=l.superTrend,l.direction===1&&(u="red"));let d={time:a.time,value:c,color:u};s.push(d);let h=r.nextValue(a.high,a.low,a.close),p,_="green";h&&(p=h.superTrend,h.direction===1&&(_="red"));let A={time:a.time,value:p,color:_};o.push(A)}),[s,o]}loadSimulatedOCForTime(e,i,r){let s=i;for(let[o,a]of Object.entries(Ue.simulateData))if(o===e||o.startsWith(e)&&(o.endsWith("CE")||o.endsWith("PE")))if(o===e){let l=e;e==="NIFTY"&&(l="NIFTY50"),e==="USDINR"&&(l="USDINR"),this.mapService.setLtp(l,a[s])}else{let l=o;l=l.replace(e,""),l=l.replace("WK","");let c={instru:e,expiry:r,strike:this.mapService.parseScrip(l).scrip,optionType:this.mapService.parseScrip(l).type},u=this.mapService.getMapKey(c),d=a[s];this.mapService.setLtp(u,d)}}initForCallsPuts_simulated_1(e,i,r,s,o){for(let h in this.charts)Object.prototype.hasOwnProperty.call(this.charts,h)&&this.charts[h].remove();this.charts={},f.st_simulate_charts=[],f.st_simulate_charts_values=[],f.st_simulate_charts_print=[],f.st_simulate_charts_print_strangle=[],f.st_simulate_exits=[];let a=5;s==="1min"&&(a=1);let l=new Date(i);l.setDate(l.getDate()+1),l.setHours(9),l.setMinutes(30);let c=new Date().getTimezoneOffset()*6e4;for(let h=0;h<=6;h++){let p=0;for(;;){l.setDate(l.getDate()-1),l.setHours(9),l.setMinutes(30),console.log("ST curr date",l);let b=""+("0"+l.getDate()).slice(-2)+"-"+("0"+(l.getMonth()+1)).slice(-2)+"-"+l.getFullYear()+" "+("0"+l.getHours()).slice(-2)+":"+("0"+l.getMinutes()).slice(-2)+":00";if(this.loadSimulatedOCForTime(e,b,i),this.mapService.getScripLTP(null,null,e,null))break;console.log("ST curr date going back")}if(h===0||h===1)continue;let _=1e3,A=50;if(e==="BANKNIFTY"?(A=100,_=6e3):e==="FINNIFTY"?A=50:e==="MIDCPNIFTY"?A=25:e==="SENSEX"||e==="BANKEX"?A=100:e==="USDINR"&&(A=.25),r){let v=this.processData_simulated(e,"","",l,!1,null,null,!1,a),b=[];for(let k=0;k<v.length;k++){let C=v[k],M=new Date(C[0]-c).toISOString(),O={time:Date.parse(M)/1e3,open:C[1],high:C[2],low:C[3],close:C[4]};b.push(O)}let x="opt_chart_"+h+"_spot",N=dt(x,{width:320,height:160,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});N.addSeries(kt).setData(b),N.timeScale().fitContent(),this.charts["opt_chart_"+h+"_spot"]=N,f.st_simulate_charts["opt_chart_"+h+"_spot"]=e}for(;;){let b=""+("0"+l.getDate()).slice(-2)+"-"+("0"+(l.getMonth()+1)).slice(-2)+"-"+l.getFullYear()+" "+("0"+l.getHours()).slice(-2)+":"+("0"+l.getMinutes()).slice(-2)+":00";this.loadSimulatedOCForTime(e,b,i);let x=this.mapService.getScripLTP(null,null,e,null);x=Math.round(x/A)*A,console.log("curr time",l);let N=this.findPremiumStrike(e,i,x,"CE",A,40,_),T=this.isSTCondition(e,N,"CE",l,a);if(T[0]===!0){if(r){let M="opt_chart_"+h+"_"+p;console.log("div_id",M);let O=dt(M,{width:320,height:180,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});O.addSeries(kt).setData(this.getCurrDateData(l,T[1])),O.addSeries(ut,{lineWidth:1}).setData(this.getCurrDateData(l,T[2])),O.timeScale().fitContent(),this.charts["opt_chart_"+h+"_"+p]=O}f.st_simulate_charts["opt_chart_"+h+"_"+p]=N+"CE "+l.toLocaleString(),f.st_simulate_charts_values["opt_chart_"+h+"_"+p]=T[3],f.st_simulate_charts_print["opt_chart_"+h+"_"+p]=N+"CE,"+l.toLocaleString()+","+T[3],p++}let k=this.findPremiumStrike(e,i,x,"PE",A,40,_),C=this.isSTCondition(e,k,"PE",l,a);if(C[0]===!0){if(r){let M="opt_chart_"+h+"_"+p;console.log("div_id",M);let O=dt(M,{width:320,height:180,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});O.addSeries(kt).setData(this.getCurrDateData(l,C[1])),O.addSeries(ut,{lineWidth:1}).setData(this.getCurrDateData(l,C[2])),O.timeScale().fitContent(),this.charts["opt_chart_"+h+"_"+p]=O}f.st_simulate_charts["opt_chart_"+h+"_"+p]=k+"PE "+l.toLocaleString(),f.st_simulate_charts_values["opt_chart_"+h+"_"+p]=C[3],f.st_simulate_charts_print["opt_chart_"+h+"_"+p]=k+"PE,"+l.toLocaleString()+","+C[3],p++}if(l.setMinutes(l.getMinutes()+a),l.getHours()>=15&&l.getMinutes()>=5)break}}let u="";for(let h in f.st_simulate_charts_print)if(Object.prototype.hasOwnProperty.call(f.st_simulate_charts_print,h)){let p=f.st_simulate_charts_print[h];u+=p+`\r
`}for(let h in f.st_simulate_charts_print_strangle)if(Object.prototype.hasOwnProperty.call(f.st_simulate_charts_print_strangle,h)){let p=f.st_simulate_charts_print_strangle[h];u+=p+`\r
`}let d=0;f.st_simulate_exits.forEach(h=>{d+=h}),console.log(`done loading\r
`,u,d)}isSTCondition(e,i,r,s,o){let a=new Date().getTimezoneOffset()*6e4,l=this.processData_simulated(e,i,r,s,!1,null,null,!0,o),c=[];for(let x=0;x<l.length;x++){let N=l[x],T=new Date(N[0]-a).toISOString(),k={time:Date.parse(T)/1e3,open:N[1],high:N[2],low:N[3],close:N[4]};c.push(k)}let u=this.supertrend_calc(c),d=new Date(s.getTime()-a).toISOString(),h=Date.parse(d)/1e3,p=u[0].find(x=>x.time===h),_=new Date(s);_.setMinutes(_.getMinutes()-o);let A=new Date(_.getTime()-a).toISOString(),v=Date.parse(A)/1e3,b=u[0].find(x=>x.time===v);if(o===5&&s.getHours()===9&&s.getMinutes()===30&&b.color==="green"&&p.color==="green"){console.log("ST found continuation at open",b,p);let x=this.findSTExit(u[0],c,s,o);return[!0,c,u[0],x]}if(b&&p&&b.color==="red"&&p.color==="green"){console.log("ST found",b,p);let x=this.findSTExit(u[0],c,s,o);return[!0,c,u[0],x]}else return[!1]}findSTExit(e,i,r,s){let o=new Date().getTimezoneOffset()*6e4,a=8,l=-8,c=null,u=null,d=null,h=null,p=null,_=null,A=null,v=null,b=new Date(r),x=new Date(b.getTime()-o).toISOString(),N=Date.parse(x)/1e3;u=i.find(F=>F.time===N).close,A=e.find(F=>F.time===N).value;let C=new Date(r),M=!0;for(;;){let F=new Date(C.getTime()-o).toISOString(),j=Date.parse(F)/1e3,H=i.find(ie=>ie.time===j);!M&&c===null&&(H.high-u>=a?c=a:H.low-u<=l&&(c=l)),M===!0?(h=999,p=u):H&&H.low<h&&(h=H.low,p=d),M===!0?d=0:H&&H.high>d&&(d=H.high);let Q=e.find(ie=>ie.time===j);if(Q&&Q.color==="red"){_=H.close;break}if(Q&&(v=Q.value),C.setMinutes(C.getMinutes()+s),C.getHours()>=15&&C.getMinutes()>=20){_=H.close;break}M=!1}c===null&&(c=_-u),f.st_simulate_exits.push(c);let O="No";return d-u>=a&&(O="Yes"),Math.round(u*10)/10+","+Math.round(d*10)/10+","+Math.round(h*10)/10+","+Math.round(_*10)/10+","+Math.round(A*10)/10+","+Math.round(v*10)/10}findPremiumStrike(e,i,r,s,o,a,l){let c,u,d=99999999;if(s==="CE")for(let h=r;h<=r+l;h+=o){let p=this.mapService.getScripLTP(e,new Date(i),h,"CE"),_=Math.abs(p-a);_<d&&(d=_,c=h,u=p)}else if(s==="PE")for(let h=r;h>=r-l;h-=o){let p=this.mapService.getScripLTP(e,new Date(i),h,"PE"),_=Math.abs(p-a);_<d&&(d=_,c=h,u=p)}return console.log("selecting strike",c,s,u),c}expiryStrangles(e,i){let r=150,s=100,o=50;e==="BANKNIFTY"?(o=100,r=400,s=300):e==="FINNIFTY"?o=50:e==="MIDCPNIFTY"?o=25:e==="SENSEX"||e==="BANKEX"?o=100:e==="USDINR"&&(o=.25),this.fullDayStrangle(e,i,i,o,r,9,20),this.fullDayStrangle(e,i,i,o,r,11,0),this.fullDayStrangle(e,i,i,o,s,13,30)}fullDayStrangle(e,i,r,s,o,a,l,c=null,u=null){let d=new Date(r);d.setHours(a),d.setMinutes(l);let h=""+("0"+d.getDate()).slice(-2)+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+d.getFullYear(),p=h+" "+("0"+d.getHours()).slice(-2)+":"+("0"+d.getMinutes()).slice(-2)+":00";this.loadSimulatedOCForTime(e,p,i);let _=this.mapService.getScripLTP(null,null,e,null);_=Math.round(_/s)*s;let A=_+o;c&&(A=c);let v=_-o;u&&(v=u);let b=this.mapService.getScripLTP(e,new Date(i),A,"CE"),x=this.mapService.getScripLTP(e,new Date(i),v,"PE"),N=b+x,T=-1,k=999,C=-1,M=999,O=-1;for(;!(d.getHours()>=15&&d.getMinutes()>20);){d.setMinutes(d.getMinutes()+1),h=""+("0"+d.getDate()).slice(-2)+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+d.getFullYear(),p=h+" "+("0"+d.getHours()).slice(-2)+":"+("0"+d.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(e,p,i);let Q=this.mapService.getScripLTP(e,new Date(i),A,"CE"),ie=this.mapService.getScripLTP(e,new Date(i),v,"PE");Q>T&&(T=Q),ie>C&&(C=ie),Q<k&&(k=Q),ie<M&&(M=ie),Q+ie>O&&(O=Q+ie)}d.setHours(15),d.setMinutes(20),h=""+("0"+d.getDate()).slice(-2)+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+d.getFullYear(),p=h+" "+("0"+d.getHours()).slice(-2)+":"+("0"+d.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(e,p,i);let F=this.mapService.getScripLTP(e,new Date(i),A,"CE"),j=this.mapService.getScripLTP(e,new Date(i),v,"PE"),H=F+j;console.log("strangle:",e+","+i+","+a+" "+l+","+b+","+x+","+Math.round(N*10)/10+","+F+","+j+","+Math.round(H*10)/10+","+Math.round(O*10)/10+","+T+","+k+","+C+","+M)}perDayDriver(e,i,r){let s=2e3,o=50;e==="BANKNIFTY"?(o=100,s=6e3):e==="FINNIFTY"?o=50:e==="MIDCPNIFTY"?o=25:e==="SENSEX"||e==="BANKEX"?o=100:e==="USDINR"&&(o=.25);let a=new Date(i);a.setDate(a.getDate()+1);let l=new Date().getTimezoneOffset()*6e4;for(let u=0;u<=6;u++){let d=0;for(;;){a.setDate(a.getDate()-1),a.setHours(9),a.setMinutes(30),console.log("perDayDriver curr date",a);let p=""+("0"+a.getDate()).slice(-2)+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+a.getFullYear()+" "+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)+":00";if(this.loadSimulatedOCForTime(e,p,i),this.mapService.getScripLTP(null,null,e,null))break;if(d=d+1,d==5){console.log("perDayDriver exiting");return}console.log("perDayDriver curr date going back")}if(r==="strangle_SL_reentry"){let h=this.strangle_SL_reentry(e,i,a,25,10,10,u,10,"",10,5,!1,!1),p=this.strangle_SL_reentry(e,i,a,25,10,10,u,10,"",10,5,!1,!0),_=h.ce_strike,A=h.pe_strike,v=h.live_pnl,b=p.live_pnl,x=h.ce_markers.concat(p.ce_markers),N=h.pe_markers.concat(p.pe_markers),T=h.strangle_markers.concat(p.strangle_markers),k=this.strangle_SL_reentry(e,i,a,25,9,45,u,10,"",10,5,!1,!1),C=this.strangle_SL_reentry(e,i,a,25,9,45,u,10,"",10,5,!1,!0),M=k.strangle_markers.concat(C.strangle_markers);u!==5&&u!==6&&(this.strangle_SL_reentry_charts(e,a,1,u,_,A,v,h.ce_markers,h.pe_markers,[],b),this.plotPnlChart(u,k.live_pnl,C.live_pnl,[],"_3"))}if(r==="long_fly"&&u===5){let h=this.long_fly(e,i,a,u,50),p=this.long_fly(e,i,a,u,100)}}let c="";for(let u=0;u<this.backtestResult.length;u++)c+=this.backtestResult[u]+`\r
`;console.log(`done loading strangle_SL_reentry \r
`,c)}strangle_SL_reentry(e,i,r,s,o,a,l,c,u="",d=null,h=null,p=!1,_=!1){let A=[],v=[],b=[],x=[],N,T,k=!1,C,M,O=!1,F=0,j=0,H=!1,Q=!1,ie=8,ue=1e3,G=50;e==="BANKNIFTY"?(G=100,ue=6e3):e==="FINNIFTY"?G=50:e==="MIDCPNIFTY"?G=25:e==="SENSEX"||e==="BANKEX"?G=100:e==="USDINR"&&(G=.25);let X=new Date(r);X.setHours(o),X.setMinutes(a);let te=""+("0"+X.getDate()).slice(-2)+"-"+("0"+(X.getMonth()+1)).slice(-2)+"-"+X.getFullYear(),ve=te+" "+("0"+X.getHours()).slice(-2)+":"+("0"+X.getMinutes()).slice(-2)+":00";this.loadSimulatedOCForTime(e,ve,i);let he=this.mapService.getScripLTP(null,null,e,null);he=Math.round(he/G)*G;let ge=this.findPremiumStrike(e,i,he,"CE",G,s,ue),re=this.findPremiumStrike(e,i,he,"PE",G,s,ue),de=this.mapService.getScripLTP(e,new Date(i),ge,"CE"),me=this.mapService.getScripLTP(e,new Date(i),re,"PE");f.st_simulate_charts["opt_chart_"+l+"_spot"]=e,f.st_simulate_charts["opt_chart_"+l+"_0"]=ge+"CE ",f.st_simulate_charts["opt_chart_"+l+"_1"]=re+"PE ",f.st_simulate_charts_values["opt_chart_"+l+"_0"]=de,f.st_simulate_charts_values["opt_chart_"+l+"_1"]=me;let we=de+me;o===9?f.st_simulate_charts_values["opt_chart_"+l+"_2"]=Math.round(we*10)/10:f.st_simulate_charts_values["opt_chart_"+l+"_3"]=Math.round(we*10)/10;let qe=null,Ce=null,je=null,Ge=null;if(p){let Ne=1e3;for(;!qe;){let He=this.mapService.getScripLTP(e,new Date(i),ge+Ne,"CE");if(He){qe=ge+Ne,je=He;break}else Ne+=G}let xe=1500;for(;!Ce;){let He=this.mapService.getScripLTP(e,new Date(i),re-xe,"PE");if(He){Ce=re-xe,Ge=He;break}else xe-=G}v.push([new Date(X),"H"+u+" "+je]),b.push([new Date(X),"H"+u+" "+Ge]),x.push([new Date(X),"H"+u+" "+Math.round((je+Ge)*10)/10]),console.log("strangle_SL_reentry hedges entry",qe,je,Ce,Ge)}let Ae=0,at=!0,Me=!0;for(;!(X.getHours()>=15&&X.getMinutes()>=20);){X.setMinutes(X.getMinutes()+1),te=""+("0"+X.getDate()).slice(-2)+"-"+("0"+(X.getMonth()+1)).slice(-2)+"-"+X.getFullYear(),ve=te+" "+("0"+X.getHours()).slice(-2)+":"+("0"+X.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(e,ve,i);let Ne=this.mapService.getScripLTP(e,new Date(i),ge,"CE"),xe=this.mapService.getScripLTP(e,new Date(i),re,"PE"),He=Ae;if(at&&(He+=de-Ne),Me&&(He+=me-xe),k){let Oe=this.mapService.getScripLTP(e,new Date(i),N,"CE");He+=T-Oe}if(O){let Oe=this.mapService.getScripLTP(e,new Date(i),C,"PE");He+=M-Oe}if(p){let Oe=this.mapService.getScripLTP(e,new Date(i),qe,"CE");He+=Oe-je;let Jt=this.mapService.getScripLTP(e,new Date(i),Ce,"PE");He+=Jt-Ge}if(A.push([new Date(X),He]),_&&at&&Me&&Q===!1&&Ne&&xe&&Ne>=de+ie&&(Q=!0,j+=me-xe,Ae+=me-xe,re=re+G,me=this.mapService.getScripLTP(e,new Date(i),re,"PE"),console.log("Roll In PE",Ne,re,me),x.push([new Date(X),"RIP"+u+" "+me])),at&&Ne>=de+c+ +F){if(Ae+=de-Ne,at=!1,console.log("strangle_SL_reentry CE SL hit",Ne,Ae),v.push([new Date(X),"SL"+u+" "+Ne]),x.push([new Date(X),"CE SL"+u+" "+Ne]),d){let Oe=this.mapService.getScripLTP(null,null,e,null);Oe=Math.round(Oe/G)*G,N=this.findPremiumStrike(e,i,Oe,"CE",G,d,ue),T=this.mapService.getScripLTP(e,new Date(i),N,"CE"),k=!0,console.log("strangle_SL_reentry rollout_ce_strike",N,T),v.push([new Date(X),"RO"+u+" "+T]),x.push([new Date(X),"RO"+u+" "+T])}}else if(!at&&Ne<=de&&(de=Ne,at=!0,console.log("strangle_SL_reentry CE Reentry",Ne),v.push([new Date(X),"RE"+u+" "+Ne]),x.push([new Date(X),"CE RE"+u+" "+Ne]),d&&k)){let Oe=this.mapService.getScripLTP(e,new Date(i),N,"CE");Ae+=T-Oe,k=!1,console.log("strangle_SL_reentry rollout_ce_strike orig reentry",N,Oe),v.push([new Date(X),"ROE"+u+" "+Oe]),x.push([new Date(X),"ROE"+u+" "+Oe])}if(_&&Me&&at&&H===!1&&xe&&Ne&&xe>=me+ie&&(H=!0,F+=de-Ne,Ae+=de-Ne,ge=ge-G,de=this.mapService.getScripLTP(e,new Date(i),ge,"CE"),console.log("Roll In CE",xe,ge,de),x.push([new Date(X),"RIC"+u+" "+de])),Me&&xe>=me+c+j){if(Ae+=me-xe,Me=!1,console.log("strangle_SL_reentry PE SL hit",xe,Ae),b.push([new Date(X),"SL"+u+" "+xe]),x.push([new Date(X),"PE SL"+u+" "+xe]),d){let Oe=this.mapService.getScripLTP(null,null,e,null);Oe=Math.round(Oe/G)*G,C=this.findPremiumStrike(e,i,Oe,"PE",G,d,ue),M=this.mapService.getScripLTP(e,new Date(i),C,"PE"),O=!0,console.log("strangle_SL_reentry rollout_pe_strike",C,M),b.push([new Date(X),"RO"+u+" "+M]),x.push([new Date(X),"RO"+u+" "+M])}}else if(!Me&&xe<=me&&(me=xe,Me=!0,console.log("strangle_SL_reentry PE Reentry",xe),b.push([new Date(X),"RE"+u+" "+xe]),x.push([new Date(X),"PE RE"+u+" "+xe]),d&&O)){let Oe=this.mapService.getScripLTP(e,new Date(i),C,"PE");Ae+=M-Oe,O=!1,console.log("strangle_SL_reentry rollout_pe_strike orig reentry",C,Oe),b.push([new Date(X),"ROE"+u+" "+Oe]),x.push([new Date(X),"ROE"+u+" "+Oe])}if(d){let Oe=this.mapService.getScripLTP(e,new Date(i),N,"CE");k&&Oe>=T+h&&(Ae+=T-Oe,k=!1,console.log("strangle_SL_reentry rollout_ce_strike SL hit",Oe,Ae),v.push([new Date(X),"ROE"+u+" "+Oe]),x.push([new Date(X),"ROE"+u+" "+Oe]));let Jt=this.mapService.getScripLTP(e,new Date(i),C,"PE");O&&Jt>=M+h&&(Ae+=M-Jt,O=!1,console.log("strangle_SL_reentry rollout_pe_strike SL hit",Jt,Ae),b.push([new Date(X),"ROE"+u+" "+Jt]),x.push([new Date(X),"ROE"+u+" "+Jt]))}}X.setHours(15),X.setMinutes(20),te=""+("0"+X.getDate()).slice(-2)+"-"+("0"+(X.getMonth()+1)).slice(-2)+"-"+X.getFullYear(),ve=te+" "+("0"+X.getHours()).slice(-2)+":"+("0"+X.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(e,ve,i);let We=this.mapService.getScripLTP(e,new Date(i),ge,"CE"),it=this.mapService.getScripLTP(e,new Date(i),re,"PE");if(at&&(Ae+=de-We,console.log("strangle_SL_reentry CE Exit",We,Ae)),Me&&(Ae+=me-it,console.log("strangle_SL_reentry PE Exit",it,Ae)),k){let Ne=this.mapService.getScripLTP(e,new Date(i),N,"CE");Ae+=T-Ne,console.log("strangle_SL_reentry rollout_ce_strike Exit",Ne,Ae)}if(O){let Ne=this.mapService.getScripLTP(e,new Date(i),C,"PE");Ae+=M-Ne,console.log("strangle_SL_reentry rollout_pe_strike Exit",Ne,Ae)}if(p){let Ne=this.mapService.getScripLTP(e,new Date(i),qe,"CE");Ae+=Ne-je;let xe=this.mapService.getScripLTP(e,new Date(i),Ce,"PE");Ae+=xe-Ge,console.log("strangle_SL_reentry hedges exit",qe,Ne,Ce,xe)}Ae+=F+j;let Ee=e+","+i+","+X+","+l+","+o+" "+a+","+c+","+de+","+me+","+Math.round(we*10)/10+","+Math.round(Ae*10)/10+","+d;return this.backtestResult.push(Ee),console.log("strangle_SL_reentry:",e+","+i+","+X+","+l+","+o+" "+a+","+c+","+de+","+me+","+Math.round(we*10)/10+","+Ae),l!==5&&l!==6&&console.log("live pnl compare",A[A.length-1][1],Ae),{ce_strike:ge,pe_strike:re,live_pnl:A,ce_markers:v,pe_markers:b,strangle_markers:x}}strangle_SL_reentry_charts(e,i,r,s,o,a,l,c,u,d,h,p=null){let _=new Date().getTimezoneOffset()*6e4,A=this.processData_simulated(e,"","",i,!1,null,null,!1,r),v=[];for(let re=0;re<A.length;re++){let de=A[re],me=new Date(de[0]-_).toISOString(),we={time:Date.parse(me)/1e3,open:de[1],high:de[2],low:de[3],close:de[4]};v.push(we)}let b="opt_chart_"+s+"_spot",x=dt(b,{width:320,height:200,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});x.addSeries(kt).setData(v),x.timeScale().fitContent(),this.charts["opt_chart_"+s+"_spot"]=x;let T=this.processData_simulated(e,o,"CE",i,!1,null,null,!0,r),k=[];for(let re=0;re<T.length;re++){let de=T[re],me=new Date(de[0]-_).toISOString(),we={time:Date.parse(me)/1e3,open:de[1],high:de[2],low:de[3],close:de[4]};k.push(we)}let C="opt_chart_"+s+"_0",M=dt(C,{width:320,height:200,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}}),O=M.addSeries(kt);O.setData(this.getCurrDateData(i,k));let F=[];for(let re=0;re<c.length;re++){let de=c[re],me=new Date(de[0]-_).toISOString(),we={time:Date.parse(me)/1e3,position:"belowBar",color:"#000000",shape:"arrowUp",text:de[1]};F.push(we)}xa(O,F),M.timeScale().fitContent(),this.charts["opt_chart_"+s+"_0"]=M;let j=this.processData_simulated(e,a,"PE",i,!1,null,null,!0,r),H=[];for(let re=0;re<j.length;re++){let de=j[re],me=new Date(de[0]-_).toISOString(),we={time:Date.parse(me)/1e3,open:de[1],high:de[2],low:de[3],close:de[4]};H.push(we)}let Q="opt_chart_"+s+"_1",ie=dt(Q,{width:320,height:200,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}}),ue=ie.addSeries(kt);ue.setData(this.getCurrDateData(i,H));let G=[];for(let re=0;re<u.length;re++){let de=u[re],me=new Date(de[0]-_).toISOString(),we={time:Date.parse(me)/1e3,position:"belowBar",color:"#000000",shape:"arrowUp",text:de[1]};G.push(we)}xa(ue,G),ie.timeScale().fitContent(),this.charts["opt_chart_"+s+"_1"]=ie,p||(p="_2");let X="opt_chart_"+s+p,te=dt(X,{width:320,height:200,timeScale:{timeVisible:!0}}),ve=[];for(let re=0;re<l.length;re++){let de=l[re],me=new Date(de[0]-_).toISOString(),we={time:Date.parse(me)/1e3,value:de[1]};ve.push(we)}let he=te.addSeries(ut,{lineWidth:1});if(he.setData(ve),h){let re=[];for(let me=0;me<h.length;me++){let we=h[me],qe=new Date(we[0]-_).toISOString(),Ce={time:Date.parse(qe)/1e3,value:we[1]};re.push(Ce)}te.addSeries(ut,{lineWidth:1,color:"#FF0000",lineStyle:lh.Dashed}).setData(re)}let ge=[];for(let re=0;re<d.length;re++){let de=d[re],me=new Date(de[0]-_).toISOString(),we={time:Date.parse(me)/1e3,position:"belowBar",color:"#000000",shape:"arrowUp",text:de[1]};ge.push(we)}xa(he,ge),te.timeScale().fitContent()}plotPnlChart(e,i,r,s,o){let a=new Date().getTimezoneOffset()*6e4;o||(o="_3");let l="opt_chart_"+e+o,c=dt(l,{width:320,height:200,timeScale:{timeVisible:!0}}),u=[];for(let p=0;p<i.length;p++){let _=i[p],A=new Date(_[0]-a).toISOString(),v={time:Date.parse(A)/1e3,value:_[1]};u.push(v)}let d=c.addSeries(ut,{lineWidth:1});if(d.setData(u),r){let p=[];for(let A=0;A<r.length;A++){let v=r[A],b=new Date(v[0]-a).toISOString(),x={time:Date.parse(b)/1e3,value:v[1]};p.push(x)}c.addSeries(ut,{lineWidth:1,color:"#FF0000",lineStyle:lh.Dashed}).setData(p)}let h=[];for(let p=0;p<s.length;p++){let _=s[p],A=new Date(_[0]-a).toISOString(),v={time:Date.parse(A)/1e3,position:"belowBar",color:"#000000",shape:"arrowUp",text:_[1]};h.push(v)}xa(d,h),c.timeScale().fitContent()}long_fly(e,i,r,s,o){let a=[],l=50;e==="BANKNIFTY"?l=100:e==="FINNIFTY"?l=50:e==="MIDCPNIFTY"?l=25:e==="SENSEX"||e==="BANKEX"?l=100:e==="USDINR"&&(l=.25);let c=new Date(r);c.setHours(15),c.setMinutes(20);let u=""+("0"+c.getDate()).slice(-2)+"-"+("0"+(c.getMonth()+1)).slice(-2)+"-"+c.getFullYear(),d=u+" "+("0"+c.getHours()).slice(-2)+":"+("0"+c.getMinutes()).slice(-2)+":00";this.loadSimulatedOCForTime(e,d,i);let h=this.mapService.getScripLTP(null,null,e,null);h=Math.round(h/l)*l;let p=h,_=h,A=this.mapService.getScripLTP(e,new Date(i),p,"CE"),v=this.mapService.getScripLTP(e,new Date(i),_,"PE");if(f.st_simulate_charts["opt_chart_"+s+"_spot"]=e,f.st_simulate_charts["opt_chart_"+s+"_0"]="50",f.st_simulate_charts["opt_chart_"+s+"_0"]="100",!A||!v)return console.log("CE or PE premium is None"),null;let b=p+o,x=_-o,N=this.mapService.getScripLTP(e,new Date(i),b,"CE"),T=this.mapService.getScripLTP(e,new Date(i),x,"PE");if(!N||!T)return console.log("Hedge CE or PE premium is None"),null;let k=A+v;c=new Date(i),c.setHours(15),c.setMinutes(20),u=""+("0"+c.getDate()).slice(-2)+"-"+("0"+(c.getMonth()+1)).slice(-2)+"-"+c.getFullYear(),d=u+" "+("0"+c.getHours()).slice(-2)+":"+("0"+c.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(e,d,i);let C=this.mapService.getScripLTP(e,new Date(i),p,"CE"),M=this.mapService.getScripLTP(e,new Date(i),_,"PE"),O=C+M,F=0;F+=C-A,F+=M-v;let j=this.mapService.getScripLTP(e,new Date(i),b,"CE"),H=this.mapService.getScripLTP(e,new Date(i),x,"PE");return F+=N-j,F+=T-H,F=Math.round(F*10)/10,console.log("Long fly",i,F),a}static \u0275fac=function(i){return new(i||n)(ae(Ct),ae(Ue),ae(ao),ae(co),ae(Nn),ae(si))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xn=(n,t)=>({"text-danger":n,"text-success":t}),mS=()=>[],e_=(n,t)=>({red:n,blue:t}),Uee=(n,t,e)=>({positionExited:n,positionSL:t,positionReentry:e}),Hee=(n,t)=>({positionExited:n,hidePositionRow:t}),Yee=n=>({red:n}),Gee=n=>({"sl-order-placed":n}),Kee=(n,t)=>({ocStrikeStrategyCE:n,ocStrikeSLL:t}),_S=(n,t)=>({"table-warning":n,"oc-strike":t}),Jee=(n,t)=>({ocStrikeStrategyPE:n,ocStrikeSLL:t}),Xee=()=>[0,1,2,3,4],$ee=()=>[5,6],n3=(n,t)=>({"chart-border-green":n,"chart-border-red":t});function Qee(n,t){if(n&1){let e=pe();g(0,"button",189),q("click",function(){D(e);let r=R(3);return E(r.findInstruToTrade())}),w(1,"Find Instru"),m()}}function Zee(n,t){if(n&1){let e=pe();g(0,"button",189),q("click",function(){D(e);let r=R(3);return E(r.startAlgo())}),w(1,"Start"),m()}}function ete(n,t){if(n&1){let e=pe();g(0,"button",189),q("click",function(){D(e);let r=R(3);return E(r.stopAlgo())}),w(1,"Stop"),m()}}function tte(n,t){if(n&1&&(g(0,"option",190),w(1),m()),n&2){let e=t.$implicit;L("value",e),y(),Z(" ",e," ")}}function nte(n,t){if(n&1){let e=pe();g(0,"div",21)(1,"div",22)(2,"div",75)(3,"input",185),z("ngModelChange",function(r){D(e);let s=R(2);return U(s.algoSimulated,r)||(s.algoSimulated=r),E(r)}),m(),g(4,"label",186),w(5,"Simulated"),m()(),ee(6,Qee,2,0,"button",23)(7,Zee,2,0,"button",23)(8,ete,2,0,"button",23),g(9,"select",72),z("ngModelChange",function(r){D(e);let s=R(2);return U(s.instruToTrade,r)||(s.instruToTrade=r),E(r)}),ee(10,tte,2,2,"option",25),m(),g(11,"input",187),z("ngModelChange",function(r){D(e);let s=R(2);return U(s.expiryDateToTrade,r)||(s.expiryDateToTrade=r),E(r)}),m(),g(12,"button",188),q("click",function(){D(e);let r=R(2);return E(r.recreateAlgoPos())}),w(13,"Refresh"),m()()()}if(n&2){let e=R(2);y(3),W("ngModel",e.algoSimulated),y(3),L("ngIf",!e.instruToTrade),y(),L("ngIf",!e.enableAlgo&&e.instruToTrade),y(),L("ngIf",e.enableAlgo&&e.instruToTrade),y(),W("ngModel",e.instruToTrade),y(),L("ngForOf",e.supportedInstru),y(),W("ngModel",e.expiryDateToTrade)}}function ite(n,t){if(n&1){let e=pe();g(0,"tr")(1,"td",191)(2,"input",192),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.qty,r)||(s.qty=r),E(r)}),q("ngModelChange",function(r){let s=D(e).$implicit,o=R(3);return E(o.posQtyUpdated(r,s))}),m()(),g(3,"td",191),w(4),m(),g(5,"td",191),w(6),m(),g(7,"td",191),w(8),m(),g(9,"td",191)(10,"div",193)(11,"div",194)(12,"input",195),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.sl,r)||(s.sl=r),E(r)}),m(),g(13,"span",196),w(14),m()(),g(15,"input",197),q("keyup",function(r){let s=D(e).$implicit,o=R(3);return E(o.rollAlgoStrikeKeyUp(r,s,"sl"))}),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.sl_strike,r)||(s.sl_strike=r),E(r)}),m(),g(16,"button",145),q("click",function(){let r=D(e).$implicit,s=R(3);return E(s.executeOrder(r,"currentstrike"))}),w(17,"Roll"),m()()(),g(18,"td",191)(19,"div",193)(20,"div",194)(21,"input",195),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.rollin,r)||(s.rollin=r),E(r)}),m(),g(22,"span",196),w(23),m()(),g(24,"input",197),q("keyup",function(r){let s=D(e).$implicit,o=R(3);return E(o.rollAlgoStrikeKeyUp(r,s,"rollin"))}),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.rollin_strike,r)||(s.rollin_strike=r),E(r)}),m(),g(25,"button",145),q("click",function(){let r=D(e).$implicit,s=R(3);return E(s.executeOrder(r,"currentstrike"))}),w(26,"Roll"),m()()(),g(27,"td",191)(28,"input",198),q("ngModelChange",function(r){let s=D(e).$implicit,o=R(3);return E(o.posQtyUpdated(r,s))}),m()(),g(29,"td",191),w(30),m()()}if(n&2){let e=t.$implicit,i=R(3);y(2),L("step",i.stepValue),W("ngModel",e.qty),L("ngClass",Pe(13,e_,e.qty<0,e.qty>0)),y(2),Z(" ",e.entry," "),y(2),Z(" ",e.scrip," "),y(2),Z(" ",i.getAlgoPosLTP(e.scrip)," "),y(4),W("ngModel",e.sl),y(2),J(i.getSLCount(e)),y(),W("ngModel",e.sl_strike),y(6),W("ngModel",e.rollin),y(2),J(i.getRollInCount(e)),y(),W("ngModel",e.rollin_strike),y(6),Z(" ",i.getAlgoOrderStatus(e)," ")}}function rte(n,t){if(n&1){let e=pe();g(0,"div")(1,"div",34)(2,"textarea",35),z("ngModelChange",function(r){D(e);let s=R(2);return U(s.algoLog,r)||(s.algoLog=r),E(r)}),m()(),g(3,"table",36)(4,"thead",37)(5,"tr")(6,"th",38),w(7,"Qty"),m(),g(8,"th",38),w(9,"Entry"),m(),g(10,"th",38),w(11,"Strike"),m(),g(12,"th",38),w(13,"LTP"),m(),g(14,"th",38),w(15,"SL"),m(),g(16,"th",38),w(17,"RollIn"),m(),g(18,"th",38),w(19,"Order Id"),m(),g(20,"th",38),w(21,"Order Status"),m()()(),g(22,"tbody"),ee(23,ite,31,16,"tr",166),m()(),Be(24,"hr"),m()}if(n&2){let e=R(2);y(2),W("ngModel",e.algoLog),y(21),L("ngForOf",e.algo_pos)}}function ste(n,t){if(n&1){let e=pe();g(0,"div",182)(1,"div",75)(2,"input",183),z("ngModelChange",function(r){D(e);let s=R();return U(s.show_algo,r)||(s.show_algo=r),E(r)}),m(),g(3,"label",184),w(4,"Algo"),m()(),ee(5,nte,14,7,"div",92)(6,rte,25,2,"div",68),m()}if(n&2){let e=R();y(2),W("ngModel",e.show_algo),y(3),L("ngIf",e.show_algo),y(),L("ngIf",e.show_algo)}}function ote(n,t){if(n&1){let e=pe();g(0,"button",189),q("click",function(){D(e);let r=R();return E(r.findInstruToTradeSS())}),w(1,"Find Instru"),m()}}function ate(n,t){if(n&1){let e=pe();g(0,"button",189),q("click",function(){D(e);let r=R();return E(r.startAlgoSS())}),w(1,"Start"),m()}}function lte(n,t){if(n&1){let e=pe();g(0,"button",189),q("click",function(){D(e);let r=R();return E(r.stopAlgoSS())}),w(1,"Stop"),m()}}function cte(n,t){if(n&1&&(g(0,"option",190),w(1),m()),n&2){let e=t.$implicit;L("value",e),y(),Z(" ",e," ")}}function ute(n,t){if(n&1&&(g(0,"span",42),w(1),m()),n&2){let e=R().$implicit,i=R();L("ngClass",Pe(2,xn,e.pnl<0,e.pnl>0)),y(),Z(" ",i.getPnL(e)," ")}}function dte(n,t){if(n&1&&(g(0,"tr",42)(1,"td",191),w(2),m(),g(3,"td",191),w(4),m(),g(5,"td",191),w(6),m(),g(7,"td",191),w(8),m(),g(9,"td",191),w(10),m(),g(11,"td",191),w(12),m(),g(13,"td",191),ee(14,ute,2,5,"span",199),m()()),n&2){let e=t.$implicit,i=R();L("ngClass",Mn(8,Uee,e.exit!==0,e.exit===0&&e.triggerPrice!==0&&e.qty>0,e.exit===0&&e.triggerPrice!==0&&e.qty<0)),y(2),Z(" ",e.scrip," "),y(2),Z(" ",e.qty," "),y(2),Z(" ",e.entry," "),y(2),Z(" ",i.getAlgoSSPosLTP(e.scrip)," "),y(2),Z(" ",e.triggerPrice," "),y(2),Z(" ",e.exit," "),y(2),L("ngIf",!(e.exit===0&&e.triggerPrice!==0))}}function hte(n,t){if(n&1){let e=pe();g(0,"div")(1,"div",46)(2,"input",200),z("ngModelChange",function(r){D(e);let s=R();return U(s.use_filter_expiry,r)||(s.use_filter_expiry=r),E(r)}),m(),g(3,"label",201),w(4,"Filter Expiry"),m(),g(5,"input",202),z("ngModelChange",function(r){D(e);let s=R();return U(s.filter_expiry,r)||(s.filter_expiry=r),E(r)}),m()(),g(6,"div",46)(7,"input",203),z("ngModelChange",function(r){D(e);let s=R();return U(s.hide_payoff,r)||(s.hide_payoff=r),E(r)}),m(),g(8,"label",204),w(9,"Hide Payoff"),m()(),g(10,"div",46)(11,"input",205),z("ngModelChange",function(r){D(e);let s=R();return U(s.use_hypo_future,r)||(s.use_hypo_future=r),E(r)}),m(),g(12,"label",206),w(13,"Use Hypothetical Future"),m(),g(14,"input",207),z("ngModelChange",function(r){D(e);let s=R();return U(s.hypo_future_strike,r)||(s.hypo_future_strike=r),E(r)}),m()(),g(15,"div",46)(16,"input",208),z("ngModelChange",function(r){D(e);let s=R();return U(s.hide_roll3,r)||(s.hide_roll3=r),E(r)}),m(),g(17,"label",209),w(18,"Hide Roll 3"),m()(),g(19,"div",46)(20,"input",210),z("ngModelChange",function(r){D(e);let s=R();return U(s.ce_side_overlay,r)||(s.ce_side_overlay=r),E(r)}),m(),g(21,"label",211),w(22,"CE side"),m()(),g(23,"div",46)(24,"input",212),z("ngModelChange",function(r){D(e);let s=R();return U(s.pe_side_overlay,r)||(s.pe_side_overlay=r),E(r)}),m(),g(25,"label",213),w(26,"PE side"),m()(),g(27,"div",46)(28,"input",214),z("ngModelChange",function(r){D(e);let s=R();return U(s.straddle_shiftCE_overlay,r)||(s.straddle_shiftCE_overlay=r),E(r)}),m(),g(29,"label",215),w(30,"Straddle CE shift"),m()(),g(31,"div",46)(32,"input",216),z("ngModelChange",function(r){D(e);let s=R();return U(s.straddle_shiftPE_overlay,r)||(s.straddle_shiftPE_overlay=r),E(r)}),m(),g(33,"label",217),w(34,"Straddle PE shift"),m()(),g(35,"input",218),z("ngModelChange",function(r){D(e);let s=R();return U(s.straddle_shiftQty_overlay,r)||(s.straddle_shiftQty_overlay=r),E(r)}),m(),g(36,"div",46)(37,"input",219),z("ngModelChange",function(r){D(e);let s=R();return U(s.payoff_overlay,r)||(s.payoff_overlay=r),E(r)}),q("change",function(r){D(e);let s=R();return E(s.payoffCheckboxChange(r))}),m(),g(38,"label",220),w(39,"Payoff Overlay"),m(),g(40,"input",221),z("ngModelChange",function(r){D(e);let s=R();return U(s.overlay_strike,r)||(s.overlay_strike=r),E(r)}),m()()()}if(n&2){let e=R();y(2),W("ngModel",e.use_filter_expiry),y(3),W("ngModel",e.filter_expiry),y(2),W("ngModel",e.hide_payoff),y(4),W("ngModel",e.use_hypo_future),y(3),W("ngModel",e.hypo_future_strike),y(2),W("ngModel",e.hide_roll3),y(4),W("ngModel",e.ce_side_overlay),y(4),W("ngModel",e.pe_side_overlay),y(4),W("ngModel",e.straddle_shiftCE_overlay),y(4),W("ngModel",e.straddle_shiftPE_overlay),y(3),W("ngModel",e.straddle_shiftQty_overlay),y(2),W("ngModel",e.payoff_overlay),y(3),W("ngModel",e.overlay_strike)}}function pte(n,t){if(n&1&&(g(0,"option",190),w(1),m()),n&2){let e=t.$implicit;L("value",e),y(),Z(" ",e," ")}}function fte(n,t){if(n&1&&(g(0,"option"),w(1),m()),n&2){let e=t.$implicit;y(),Z(" ",e," ")}}function gte(n,t){if(n&1&&(g(0,"option"),w(1),m()),n&2){let e=t.$implicit;y(),Z(" ",e," ")}}function mte(n,t){if(n&1){let e=pe();g(0,"div",11)(1,"select",222),z("ngModelChange",function(r){D(e);let s=R();return U(s.simulate_instru,r)||(s.simulate_instru=r),E(r)}),q("change",function(r){D(e);let s=R();return E(s.onSimulateInstruChange(r))}),ee(2,pte,2,2,"option",25),m(),g(3,"input",223),z("ngModelChange",function(r){D(e);let s=R();return U(s.simulateStartDate,r)||(s.simulateStartDate=r),E(r)}),m(),g(4,"select",224),z("ngModelChange",function(r){D(e);let s=R();return U(s.simulate_expiries_arr_value,r)||(s.simulate_expiries_arr_value=r),E(r)}),q("change",function(r){D(e);let s=R();return E(s.onSimulateExpiryChange(r))}),ee(5,fte,2,1,"option",166),m(),g(6,"input",225),z("ngModelChange",function(r){D(e);let s=R();return U(s.simulateExpiryDate,r)||(s.simulateExpiryDate=r),E(r)}),m(),g(7,"select",224),z("ngModelChange",function(r){D(e);let s=R();return U(s.simulate_expiries_arr_value2,r)||(s.simulate_expiries_arr_value2=r),E(r)}),q("change",function(r){D(e);let s=R();return E(s.onSimulateExpiryChange2(r))}),ee(8,gte,2,1,"option",166),m(),g(9,"input",225),z("ngModelChange",function(r){D(e);let s=R();return U(s.simulateExpiryDate2,r)||(s.simulateExpiryDate2=r),E(r)}),m(),g(10,"div")(11,"button",179),q("click",function(){D(e);let r=Xn(40);return E(r.click())}),w(12,"Import"),m(),g(13,"button",179),q("click",function(){D(e);let r=Xn(42);return E(r.click())}),w(14,"Import2"),m(),g(15,"button",226),q("click",function(){D(e);let r=R();return E(r.loadSimulatedNextMins(-1440))}),w(16,"-1440"),m(),g(17,"button",226),q("click",function(){D(e);let r=R();return E(r.loadSimulatedNextMins(1440))}),w(18,"+1440"),m(),g(19,"button",226),q("click",function(){D(e);let r=R();return E(r.loadSimulatedNextMins(-120))}),w(20,"-120"),m(),g(21,"button",226),q("click",function(){D(e);let r=R();return E(r.loadSimulatedNextMins(120))}),w(22,"+120"),m(),g(23,"button",226),q("click",function(){D(e);let r=R();return E(r.loadSimulatedNextMins(-15))}),w(24,"-15"),m(),g(25,"button",226),q("click",function(){D(e);let r=R();return E(r.loadSimulatedNextMins(15))}),w(26,"+15"),m(),g(27,"button",226),q("click",function(){D(e);let r=R();return E(r.loadSimulatedNextMins(-5))}),w(28,"-5"),m(),g(29,"button",226),q("click",function(){D(e);let r=R();return E(r.loadSimulatedNextMins(5))}),w(30,"+5"),m(),g(31,"button",226),q("click",function(){D(e);let r=R();return E(r.loadSimulatedNextMins(-1))}),w(32,"-1"),m(),g(33,"button",226),q("click",function(){D(e);let r=R();return E(r.loadSimulatedNextMins(1))}),w(34,"+1"),m(),g(35,"div",227)(36,"input",228),z("ngModelChange",function(r){D(e);let s=R();return U(s.show_simulate_charts,r)||(s.show_simulate_charts=r),E(r)}),m(),g(37,"label",229),w(38,"Show simulate charts"),m()(),g(39,"input",230,1),q("change",function(r){D(e);let s=R();return E(s.uploadExpiryFile(r))}),m(),g(41,"input",230,2),q("change",function(r){D(e);let s=R();return E(s.uploadExpiryFile2(r))}),m(),g(43,"div"),w(44),m()()()}if(n&2){let e=R();y(),W("ngModel",e.simulate_instru),y(),L("ngForOf",e.supportedInstru),y(),W("ngModel",e.simulateStartDate),y(),W("ngModel",e.simulate_expiries_arr_value),y(),L("ngForOf",e.simulate_expiries_arr),y(),W("ngModel",e.simulateExpiryDate),y(),W("ngModel",e.simulate_expiries_arr_value2),y(),L("ngForOf",e.simulate_expiries_arr2),y(),W("ngModel",e.simulateExpiryDate2),y(27),W("ngModel",e.show_simulate_charts),y(8),Z("Date Time: ",e.simulateCurrDateTimeString,"")}}function _te(n,t){n&1&&(g(0,"span",231),w(1," Positions/Quantities match with actual positions "),m())}function Ate(n,t){n&1&&(g(0,"span",14),w(1," Positions/Quantities do NOT match with actual positions "),m())}function yte(n,t){if(n&1&&(g(0,"option",190),w(1),m()),n&2){let e=t.$implicit;L("value",e),y(),Z(" ",e," ")}}function vte(n,t){if(n&1){let e=pe();g(0,"div",75)(1,"input",232),z("ngModelChange",function(r){D(e);let s=R();return U(s.auto_execute_rollin,r)||(s.auto_execute_rollin=r),E(r)}),m(),g(2,"label",233),w(3,"Auto rollin"),m()()}if(n&2){let e=R();y(),W("ngModel",e.auto_execute_rollin)}}function wte(n,t){if(n&1){let e=pe();g(0,"div",75)(1,"input",234),z("ngModelChange",function(r){D(e);let s=R();return U(s.auto_execute_rollout,r)||(s.auto_execute_rollout=r),E(r)}),m(),g(2,"label",235),w(3,"Auto rollout"),m()()}if(n&2){let e=R();y(),W("ngModel",e.auto_execute_rollout)}}function bte(n,t){if(n&1){let e=pe();g(0,"div",21),w(1," Secs: "),g(2,"input",236),z("ngModelChange",function(r){D(e);let s=R();return U(s.automate_roll_secs,r)||(s.automate_roll_secs=r),E(r)}),m()()}if(n&2){let e=R();y(2),W("ngModel",e.automate_roll_secs)}}function Ste(n,t){if(n&1){let e=pe();g(0,"div",21),w(1," Slabs: "),g(2,"input",237),z("ngModelChange",function(r){D(e);let s=R();return U(s.automate_slabs,r)||(s.automate_slabs=r),E(r)}),m()()}if(n&2){let e=R();y(2),W("ngModel",e.automate_slabs)}}function Cte(n,t){if(n&1){let e=pe();g(0,"div",21),w(1," Slab Qty: "),g(2,"input",238),z("ngModelChange",function(r){D(e);let s=R();return U(s.automate_slab_qty,r)||(s.automate_slab_qty=r),E(r)}),m()()}if(n&2){let e=R();y(2),W("ngModel",e.automate_slab_qty)}}function xte(n,t){if(n&1){let e=pe();g(0,"div",21),w(1," First SL%: "),g(2,"input",239),z("ngModelChange",function(r){D(e);let s=R();return U(s.automate_sl1,r)||(s.automate_sl1=r),E(r)}),m()()}if(n&2){let e=R();y(2),W("ngModel",e.automate_sl1)}}function Dte(n,t){if(n&1){let e=pe();g(0,"div",21),w(1," SL% increase: "),g(2,"input",240),z("ngModelChange",function(r){D(e);let s=R();return U(s.automate_sl_increase,r)||(s.automate_sl_increase=r),E(r)}),m()()}if(n&2){let e=R();y(2),W("ngModel",e.automate_sl_increase)}}function Ete(n,t){if(n&1){let e=pe();g(0,"div",241),w(1," Min. distance till: "),g(2,"div",242)(3,"input",243),z("ngModelChange",function(r){D(e);let s=R();return U(s.automate_time_1,r)||(s.automate_time_1=r),E(r)}),m(),g(4,"input",244),z("ngModelChange",function(r){D(e);let s=R();return U(s.automate_dist_1,r)||(s.automate_dist_1=r),E(r)}),m()(),g(5,"div",242)(6,"input",245),z("ngModelChange",function(r){D(e);let s=R();return U(s.automate_time_1,r)||(s.automate_time_1=r),E(r)}),m(),g(7,"input",246),z("ngModelChange",function(r){D(e);let s=R();return U(s.automate_dist_1,r)||(s.automate_dist_1=r),E(r)}),m()(),g(8,"div",242)(9,"input",247),z("ngModelChange",function(r){D(e);let s=R();return U(s.automate_time_1,r)||(s.automate_time_1=r),E(r)}),m(),g(10,"input",248),z("ngModelChange",function(r){D(e);let s=R();return U(s.automate_dist_1,r)||(s.automate_dist_1=r),E(r)}),m()(),g(11,"div",242)(12,"input",249),z("ngModelChange",function(r){D(e);let s=R();return U(s.automate_time_1,r)||(s.automate_time_1=r),E(r)}),m(),g(13,"input",250),z("ngModelChange",function(r){D(e);let s=R();return U(s.automate_dist_1,r)||(s.automate_dist_1=r),E(r)}),m()()()}if(n&2){let e=R();y(3),W("ngModel",e.automate_time_1),y(),W("ngModel",e.automate_dist_1),y(2),W("ngModel",e.automate_time_1),y(),W("ngModel",e.automate_dist_1),y(2),W("ngModel",e.automate_time_1),y(),W("ngModel",e.automate_dist_1),y(2),W("ngModel",e.automate_time_1),y(),W("ngModel",e.automate_dist_1)}}function Mte(n,t){if(n&1&&(g(0,"div"),w(1),Be(2,"br"),m()),n&2){let e=t.$implicit;y(),Z(" ",e,"")}}function Tte(n,t){if(n&1&&ee(0,Mte,3,1,"div",166),n&2){let e=R();L("ngForOf",e.positionPopContent)}}function Ite(n,t){if(n&1){let e=pe();g(0,"td")(1,"div",252)(2,"input",271),z("ngModelChange",function(r){D(e);let s=R().$implicit;return U(s.selected,r)||(s.selected=r),E(r)}),m(),g(3,"input",272),z("ngModelChange",function(r){D(e);let s=R().$implicit;return U(s.selectedActual,r)||(s.selectedActual=r),E(r)}),m()()()}if(n&2){let e=R().$implicit;y(2),W("ngModel",e.selected),L("disabled",e.exit!==0),y(),W("ngModel",e.selectedActual),L("disabled",e.exit!==0)}}function kte(n,t){if(n&1&&(g(0,"div",273)(1,"span",274),w(2),m(),g(3,"span"),w(4),m()()),n&2){let e=R().$implicit,i=R();y(2),Z("",i.getTotalReturnPercent(e),"%"),y(2),Z("T:",i.getTodayMovementPercent(e),"%")}}function Nte(n,t){if(n&1){let e=pe();g(0,"button",145),q("click",function(){D(e);let r=R().$implicit,s=R();return E(s.executeOrder(r,"currentstrike"))}),w(1,"B"),m()}}function Pte(n,t){if(n&1){let e=pe();g(0,"button",275),q("click",function(){D(e);let r=R().$implicit,s=R();return E(s.executeOrder(r,"currentstrike"))}),w(1,"S"),m()}}function Ote(n,t){if(n&1){let e=pe();g(0,"div")(1,"div",75)(2,"input",276),z("ngModelChange",function(r){D(e);let s=R().$implicit;return U(s.rollstrike,r)||(s.rollstrike=r),E(r)}),m(),g(3,"label",277),w(4),g(5,"div"),w(6),m()()(),g(7,"div",75)(8,"input",276),z("ngModelChange",function(r){D(e);let s=R().$implicit;return U(s.rollstrike,r)||(s.rollstrike=r),E(r)}),m(),g(9,"label",277),w(10),g(11,"div"),w(12),m()()(),g(13,"div",75)(14,"input",276),z("ngModelChange",function(r){D(e);let s=R().$implicit;return U(s.rollstrike,r)||(s.rollstrike=r),E(r)}),m(),g(15,"label",277),w(16),g(17,"div"),w(18),m()()()()}if(n&2){let e=R().$implicit,i=R();y(2),Vn("name","inlineRadioOptions-",e.scrip,""),Vn("id","inlineRadio1-",e.scrip,""),Gt("value",i.getPosRollStrike(e,2)),W("ngModel",e.rollstrike),y(),Vn("for","inlineRadio1-",e.scrip,""),y(),Z("",i.getPosRollStrike(e,2)," "),y(2),J(i.getPosRollStrikeLTP(e,2)),y(2),Vn("name","inlineRadioOptions-",e.scrip,""),Vn("id","inlineRadio2-",e.scrip,""),Gt("value",i.getPosRollStrike(e,1)),W("ngModel",e.rollstrike),y(),Vn("for","inlineRadio2-",e.scrip,""),y(),Z("",i.getPosRollStrike(e,1)," "),y(2),J(i.getPosRollStrikeLTP(e,1)),y(2),Vn("name","inlineRadioOptions-",e.scrip,""),Vn("id","inlineRadio3-",e.scrip,""),Gt("value",i.getPosRollStrike(e,-1)),W("ngModel",e.rollstrike),y(),Vn("for","inlineRadio3-",e.scrip,""),y(),Z("",i.getPosRollStrike(e,-1)," "),y(2),J(i.getPosRollStrikeLTP(e,-1))}}function Rte(n,t){if(n&1){let e=pe();g(0,"button",145),q("click",function(){D(e);let r=R(2).$implicit,s=R();return E(s.executeOrder(r,"newstrike"))}),w(1,"B"),m()}}function Fte(n,t){if(n&1){let e=pe();g(0,"button",275),q("click",function(){D(e);let r=R(2).$implicit,s=R();return E(s.executeOrder(r,"newstrike"))}),w(1,"S"),m()}}function Lte(n,t){if(n&1){let e=pe();g(0,"td",191)(1,"div",193)(2,"input",278),z("ngModelChange",function(r){D(e);let s=R().$implicit;return U(s.rollstrike_new,r)||(s.rollstrike_new=r),E(r)}),q("keyup",function(r){D(e);let s=R().$implicit,o=R();return E(o.rollStrikeKeyUp(r,s))}),m(),g(3,"div",263),w(4),m(),ee(5,Rte,2,0,"button",264)(6,Fte,2,0,"button",265),m()()}if(n&2){let e=R().$implicit,i=R();y(2),W("ngModel",e.rollstrike_new),L("ngClass",$t(5,Yee,i.isRollStrikeITM(e))),y(2),J(i.getLTP(e.expiry,e.rollstrike_new)),y(),L("ngIf",e.qty>0),y(),L("ngIf",e.qty<0)}}function Vte(n,t){if(n&1){let e=pe();g(0,"td",259)(1,"input",279),z("ngModelChange",function(r){D(e);let s=R().$implicit;return U(s.expiry,r)||(s.expiry=r),E(r)}),m()()}if(n&2){let e=R().$implicit;y(),W("ngModel",e.expiry)}}function Bte(n,t){if(n&1){let e=pe();g(0,"td",280)(1,"input",281),z("ngModelChange",function(r){D(e);let s=R().$implicit;return U(s.exit,r)||(s.exit=r),E(r)}),m()()}if(n&2){let e=R().$implicit;y(),W("ngModel",e.exit)}}function qte(n,t){if(n&1){let e=pe();g(0,"td",282)(1,"button",283),q("click",function(){D(e);let r=R().$implicit,s=R();return E(s.rollPosition(r))}),w(2,"Roll"),m()()}}function jte(n,t){if(n&1){let e=pe();g(0,"td")(1,"button",283),q("click",function(){D(e);let r=R().$implicit,s=R();return E(s.splitPosition(r))}),w(2,"+"),m()()}}function Wte(n,t){if(n&1){let e=pe();g(0,"td")(1,"button",283),q("click",function(){D(e);let r=R().$implicit,s=R();return E(s.deletePosition(r))}),w(2,"X"),m()()}}function zte(n,t){if(n&1){let e=pe();g(0,"td",284)(1,"div",193)(2,"input",285),z("ngModelChange",function(r){D(e);let s=R().$implicit;return U(s.entryDateTime,r)||(s.entryDateTime=r),E(r)}),m(),g(3,"input",286),z("ngModelChange",function(r){D(e);let s=R().$implicit;return U(s.exitDateTime,r)||(s.exitDateTime=r),E(r)}),m()()()}if(n&2){let e=R().$implicit;y(2),W("ngModel",e.entryDateTime),y(),W("ngModel",e.exitDateTime)}}function Ute(n,t){if(n&1){let e=pe();g(0,"td",284)(1,"input",287),z("ngModelChange",function(r){D(e);let s=R().$implicit;return U(s.alertPrice,r)||(s.alertPrice=r),E(r)}),m(),g(2,"span",288),w(3),m()()}if(n&2){let e=R().$implicit;y(),W("ngModel",e.alertPrice),y(2),J(e.alertStatus)}}function Hte(n,t){if(n&1){let e=pe();g(0,"td",284)(1,"div")(2,"input",289),z("ngModelChange",function(r){D(e);let s=R().$implicit;return U(s.alertPrice,r)||(s.alertPrice=r),E(r)}),m(),g(3,"span",290),w(4),m(),g(5,"input",289),z("ngModelChange",function(r){D(e);let s=R().$implicit;return U(s.alertPrice,r)||(s.alertPrice=r),E(r)}),m(),g(6,"span",290),w(7),m(),g(8,"input",289),z("ngModelChange",function(r){D(e);let s=R().$implicit;return U(s.alertPrice,r)||(s.alertPrice=r),E(r)}),m(),g(9,"span",290),w(10),m(),g(11,"input",289),z("ngModelChange",function(r){D(e);let s=R().$implicit;return U(s.alertPrice,r)||(s.alertPrice=r),E(r)}),m(),g(12,"span",290),w(13),m()(),g(14,"div")(15,"input",289),z("ngModelChange",function(r){D(e);let s=R().$implicit;return U(s.alertPrice,r)||(s.alertPrice=r),E(r)}),m(),g(16,"span",290),w(17),m(),g(18,"input",289),z("ngModelChange",function(r){D(e);let s=R().$implicit;return U(s.alertPrice,r)||(s.alertPrice=r),E(r)}),m(),g(19,"span",290),w(20),m(),g(21,"input",289),z("ngModelChange",function(r){D(e);let s=R().$implicit;return U(s.alertPrice,r)||(s.alertPrice=r),E(r)}),m(),g(22,"span",290),w(23),m(),g(24,"input",289),z("ngModelChange",function(r){D(e);let s=R().$implicit;return U(s.alertPrice,r)||(s.alertPrice=r),E(r)}),m(),g(25,"span",290),w(26),m()()()}if(n&2){let e=R().$implicit;y(2),W("ngModel",e.alertPrice),y(2),J(e.alertStatus),y(),W("ngModel",e.alertPrice),y(2),J(e.alertStatus),y(),W("ngModel",e.alertPrice),y(2),J(e.alertStatus),y(),W("ngModel",e.alertPrice),y(2),J(e.alertStatus),y(2),W("ngModel",e.alertPrice),y(2),J(e.alertStatus),y(),W("ngModel",e.alertPrice),y(2),J(e.alertStatus),y(),W("ngModel",e.alertPrice),y(2),J(e.alertStatus),y(),W("ngModel",e.alertPrice),y(2),J(e.alertStatus)}}function Yte(n,t){if(n&1){let e=pe();g(0,"tr",42)(1,"td",251)(2,"div",252)(3,"input",253),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.addToOrders,r)||(s.addToOrders=r),E(r)}),m()()(),ee(4,Ite,4,4,"td",68),g(5,"td",254)(6,"div",193)(7,"input",255),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.qty,r)||(s.qty=r),E(r)}),q("ngModelChange",function(r){let s=D(e).$implicit,o=R();return E(o.posQtyUpdated(r,s))}),m(),g(8,"input",256),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.roll_qty,r)||(s.roll_qty=r),E(r)}),m()()(),g(9,"td",257)(10,"div")(11,"span",42),w(12),m()(),ee(13,kte,5,2,"div",258),m(),g(14,"td",259)(15,"input",260),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.entry,r)||(s.entry=r),E(r)}),m(),g(16,"span",261),q("click",function(){let r=D(e).$implicit,s=R();return E(s.updateStrikePopover(r))}),w(17,"\u24D8"),m()(),g(18,"td",191)(19,"div",193)(20,"input",262),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.scrip,r)||(s.scrip=r),E(r)}),m(),g(21,"div",263),w(22),m(),ee(23,Nte,2,0,"button",264)(24,Pte,2,0,"button",265),m(),ee(25,Ote,19,30,"div",68),m(),ee(26,Lte,7,7,"td",266)(27,Vte,2,1,"td",267)(28,Bte,2,1,"td",268)(29,qte,3,0,"td",269)(30,jte,3,0,"td",68)(31,Wte,3,0,"td",68)(32,zte,4,2,"td",270)(33,Ute,4,2,"td",270)(34,Hte,27,16,"td",270),m()}if(n&2){let e=t.$implicit,i=R(),r=Xn(253);L("ngClass",Pe(28,Hee,e.exit!==0,i.hide_closed&&e.exit!==0)),y(3),W("ngModel",e.addToOrders),y(),L("ngIf",i.payoff_overlay),y(3),L("step",i.stepValue),W("ngModel",e.qty),L("ngClass",Pe(31,e_,e.qty<0,e.qty>0)),y(),L("step",i.stepValue),W("ngModel",e.roll_qty),L("ngClass",Pe(34,e_,e.roll_qty<0,e.roll_qty>0)),y(3),L("ngClass",Pe(37,xn,e.pnl<0,e.pnl>0)),y(),Z(" ",i.getPnL(e)," "),y(),L("ngIf",i.currLoadNum===i.stocksStrategyNum),y(2),W("ngModel",e.entry),y(),L("ngbPopover",r),y(4),W("ngModel",e.scrip),y(2),J(i.getLTP(e.expiry,e.scrip)),y(),L("ngIf",e.qty<0),y(),L("ngIf",e.qty>0),y(),L("ngIf",e.exit===0&&!i.hide_roll3),y(),L("ngIf",!i.hide_roll),y(),L("ngIf",!i.hide_extra),y(),L("ngIf",!i.hide_extra),y(),L("ngIf",!i.hide_roll),y(),L("ngIf",!i.hide_extra),y(),L("ngIf",!i.hide_extra),y(),L("ngIf",i.currLoadNum===i.stocksStrategyNum),y(),L("ngIf",!i.auto_execute),y(),L("ngIf",i.auto_execute)}}function Gte(n,t){if(n&1){let e=pe();g(0,"button",145),q("click",function(){D(e);let r=R(2).$implicit,s=R(2);return E(s.executeOrderSLL(r))}),w(1,"SL-L buy"),m()}}function Kte(n,t){if(n&1){let e=pe();g(0,"button",275),q("click",function(){D(e);let r=R(2).$implicit,s=R(2);return E(s.executeOrderSLL(r))}),w(1,"SL-L sell"),m()}}function Jte(n,t){if(n&1&&(g(0,"div",193),ee(1,Gte,2,0,"button",264)(2,Kte,2,0,"button",265),m()),n&2){let e=R().$implicit;y(),L("ngIf",e.qty>0),y(),L("ngIf",e.qty<0)}}function Xte(n,t){if(n&1){let e=pe();g(0,"button",283),q("click",function(){D(e);let r=R().$implicit,s=R(2);return E(s.executeOrderSLL(r))}),w(1,"Modify"),m()}}function $te(n,t){if(n&1){let e=pe();g(0,"button",283),q("click",function(){D(e);let r=R().$implicit,s=R(2);return E(s.cancelSLLOrder(r))}),w(1,"Cancel"),m()}}function Qte(n,t){if(n&1){let e=pe();g(0,"button",283),q("click",function(){D(e);let r=R().$implicit,s=R(2);return E(s.deleteSLLOrder(r))}),w(1,"X"),m()}}function Zte(n,t){if(n&1){let e=pe();g(0,"tr",42)(1,"td",251)(2,"div",193)(3,"input",293),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.qty,r)||(s.qty=r),E(r)}),m()()(),g(4,"td",191)(5,"div",193)(6,"input",294),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.scrip,r)||(s.scrip=r),E(r)}),m(),g(7,"div",263),w(8),m()()(),g(9,"td",251)(10,"input",295),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.price,r)||(s.price=r),E(r)}),m()(),g(11,"td",251)(12,"input",296),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.trigger_price,r)||(s.trigger_price=r),E(r)}),m()(),g(13,"td",251),ee(14,Jte,3,2,"div",297),m(),g(15,"td",298),ee(16,Xte,2,0,"button",299),m(),g(17,"td",298),ee(18,$te,2,0,"button",299),m(),g(19,"td",298),ee(20,Qte,2,0,"button",299),m()()}if(n&2){let e=t.$implicit,i=R(2);L("ngClass",$t(12,Gee,e.order_id!==null)),y(3),L("step",i.stepValue),W("ngModel",e.qty),L("ngClass",Pe(14,e_,e.qty<0,e.qty>0)),y(3),W("ngModel",e.scrip),y(2),J(i.getLTP(e.expiry,e.scrip)),y(2),W("ngModel",e.price),y(2),W("ngModel",e.trigger_price),y(2),L("ngIf",e.order_id===null),y(2),L("ngIf",e.order_id),y(2),L("ngIf",e.order_id),y(2),L("ngIf",e.order_id===null)}}function ene(n,t){if(n&1&&(g(0,"table",36)(1,"thead",37)(2,"tr")(3,"th",291),w(4,"Qty"),m(),g(5,"th",292),w(6,"Scrip"),m(),g(7,"th",291),w(8,"Exec. Price"),m(),g(9,"th",291),w(10,"Trigger"),m(),Be(11,"th",291)(12,"th",291)(13,"th",291)(14,"th",291),m()(),g(15,"tbody"),ee(16,Zte,21,17,"tr",39),m()()),n&2){let e=R();y(16),L("ngForOf",e.sl_trades)}}function tne(n,t){if(n&1){let e=pe();g(0,"div",300)(1,"div",96)(2,"div",301),Be(3,"canvas",302),m(),g(4,"div",303)(5,"div",304)(6,"div",305),w(7),m(),g(8,"div",305),w(9),m(),g(10,"input",306),z("ngModelChange",function(r){D(e);let s=R();return U(s.strategyAlertPrice,r)||(s.strategyAlertPrice=r),E(r)}),m(),g(11,"span",14),w(12),m()(),g(13,"div",40),w(14," Total PnL: "),g(15,"div",41)(16,"span",42),w(17),m(),g(18,"span",307),w(19),m()()(),g(20,"div",96)(21,"div",308)(22,"button",179),q("click",function(){D(e);let r=R();return E(r.addPosition())}),w(23,"Add"),m(),g(24,"button",179),q("click",function(){D(e);let r=R();return E(r.calculatePayoff())}),w(25,"Preview"),m(),g(26,"div",309)(27,"button",179),q("click",function(){D(e);let r=Xn(30);return E(r.click())}),w(28,"Import"),m(),g(29,"input",310,3),q("change",function(r){D(e);let s=R();return E(s.importCSV(r,1))}),m(),g(31,"button",179),q("click",function(){D(e);let r=R();return E(r.fetchLastOI())}),w(32,"Fetch OI"),m()(),g(33,"a",311),w(34,"View Fly Payoff"),m(),g(35,"button",145),q("click",function(){D(e);let r=R();return E(r.findDS_BuyExit())}),w(36,"DS Buy Exit"),m(),g(37,"span"),w(38),m(),g(39,"div",34)(40,"button",179),q("click",function(){D(e);let r=R();return E(r.savePositions(1))}),w(41,"Save 1"),m(),g(42,"button",179),q("click",function(){D(e);let r=R();return E(r.savePositions(2))}),w(43,"Save 2"),m(),g(44,"button",179),q("click",function(){D(e);let r=R();return E(r.savePositions(3))}),w(45,"Save 3"),m(),g(46,"button",179),q("click",function(){D(e);let r=R();return E(r.savePositions(4))}),w(47,"Save 4"),m(),g(48,"button",179),q("click",function(){D(e);let r=R();return E(r.savePositions(5))}),w(49,"Save 5"),m(),g(50,"button",179),q("click",function(){D(e);let r=R();return E(r.savePositions(6))}),w(51,"Save 6"),m(),g(52,"button",179),q("click",function(){D(e);let r=R();return E(r.savePositions(7))}),w(53,"Save 7"),m(),g(54,"button",179),q("click",function(){D(e);let r=R();return E(r.savePositions(8))}),w(55,"Save 8"),m()(),g(56,"div",34)(57,"button",179),q("click",function(){D(e);let r=R();return E(r.reloadPayoffData(1))}),w(58,"Load 1"),m(),g(59,"button",179),q("click",function(){D(e);let r=R();return E(r.reloadPayoffData(2))}),w(60,"Load 2"),m(),g(61,"button",179),q("click",function(){D(e);let r=R();return E(r.reloadPayoffData(3))}),w(62,"Load 3"),m(),g(63,"button",179),q("click",function(){D(e);let r=R();return E(r.reloadPayoffData(4))}),w(64,"Load 4"),m(),g(65,"button",179),q("click",function(){D(e);let r=R();return E(r.reloadPayoffData(5))}),w(66,"Load 5"),m(),g(67,"button",179),q("click",function(){D(e);let r=R();return E(r.reloadPayoffData(6))}),w(68,"Load 6"),m(),g(69,"button",179),q("click",function(){D(e);let r=R();return E(r.reloadPayoffData(7))}),w(70,"Load 7"),m(),g(71,"button",179),q("click",function(){D(e);let r=R();return E(r.reloadPayoffData(8))}),w(72,"Load 8"),m()(),g(73,"div",34)(74,"button",179),q("click",function(){D(e);let r=R();return E(r.exportToCSV(1))}),w(75,"Export 1"),m(),g(76,"button",179),q("click",function(){D(e);let r=R();return E(r.exportToCSV(2))}),w(77,"Export 2"),m(),g(78,"button",179),q("click",function(){D(e);let r=R();return E(r.exportToCSV(3))}),w(79,"Export 3"),m(),g(80,"button",179),q("click",function(){D(e);let r=R();return E(r.exportToCSV(4))}),w(81,"Export 4"),m(),g(82,"button",179),q("click",function(){D(e);let r=R();return E(r.exportToCSV(5))}),w(83,"Export 5"),m(),g(84,"button",179),q("click",function(){D(e);let r=R();return E(r.exportToCSV(6))}),w(85,"Export 6"),m(),g(86,"button",179),q("click",function(){D(e);let r=R();return E(r.exportToCSV(7))}),w(87,"Export 7"),m(),g(88,"button",179),q("click",function(){D(e);let r=R();return E(r.exportToCSV(8))}),w(89,"Export 8"),m()(),g(90,"div",241),w(91),m(),g(92,"div",241),w(93),g(94,"button",145),q("click",function(){D(e);let r=R();return E(r.getFunds())}),w(95,"Fetch"),m()(),g(96,"div",241),w(97),m(),g(98,"div",241),w(99),m()()()()()()}if(n&2){let e=R();y(3),L("data",e.lineChartData)("options",e.lineChartOptions)("type",e.lineChartType),y(4),Z("Sold: ",e.getSoldPremium()[0],""),y(2),Z("Current: ",e.getSoldPremium()[1],""),y(),W("ngModel",e.strategyAlertPrice),y(2),J(e.strategyAlertText),y(4),L("ngClass",Pe(16,xn,e.strategyPnl<0,e.strategyPnl>0)),y(),Z(" ",e.getStrategyPnL()," "),y(2),Z(" (",e.getStrategyPnLAfterCharges(),") "),y(19),J(e.ds_buy_exit),y(53),Z("Margin: ",e.margin,""),y(2),$n("Available Margin: ",e.avail_margin," / Used Margin: ",e.used_margin," "),y(4),Z("ROI: ",e.getROI()," %"),y(2),Z("Breakevens: ",e.breakevens,"")}}function nne(n,t){if(n&1&&(g(0,"option",190),w(1),m()),n&2){let e=t.$implicit;L("value",e),y(),Z(" ",e," ")}}function ine(n,t){if(n&1&&(g(0,"option",190),w(1),m()),n&2){let e=t.$implicit;L("value",e),y(),Z(" ",e," ")}}function rne(n,t){if(n&1){let e=pe();g(0,"div",46)(1,"input",312),z("ngModelChange",function(r){D(e);let s=R();return U(s.strangle_chart_simulate_tillend,r)||(s.strangle_chart_simulate_tillend=r),E(r)}),m(),g(2,"label",313),w(3,"Till end"),m()()}if(n&2){let e=R();y(),W("ngModel",e.strangle_chart_simulate_tillend)}}function sne(n,t){if(n&1&&(g(0,"span"),w(1),m()),n&2){let e=R();y(),$n("",e.simulateCurrDateTimeString," - Expiry: ",e.simulateExpiryDate,"")}}function one(n,t){if(n&1&&(g(0,"div",314)(1,"div",108),w(2),m()()),n&2){let e=R();y(2),J(e.charts_instru)}}function ane(n,t){n&1&&(g(0,"th",320),w(1,"Call LTP"),m())}function lne(n,t){n&1&&(g(0,"th",320),w(1,"Put LTP"),m())}function cne(n,t){if(n&1&&(g(0,"div",336),w(1),m()),n&2){let e=R().$implicit;y(),$n(" ",e.qtyCE," (",e.costCE,") ")}}function une(n,t){if(n&1&&(g(0,"div",336),w(1),m()),n&2){let e=R().$implicit;y(),Z(" ",e.sllCE," ")}}function dne(n,t){if(n&1){let e=pe();g(0,"td",337)(1,"span",328),q("click",function(){D(e);let r=R(),s=r.$implicit,o=r.index,a=R(2);return E(a.addToStrategyBuilder(s.strike,"CE",a.getCELtpForSecondExpiry(o)))}),w(2),m()()}if(n&2){let e=R().index,i=R(2);y(2),J(i.getCELtpForSecondExpiry(e))}}function hne(n,t){if(n&1&&(g(0,"div",338),w(1),m()),n&2){let e=R(3);y(),Z(" ",e.getSpotValue()," ")}}function pne(n,t){n&1&&(g(0,"div",339),w(1," N "),m())}function fne(n,t){if(n&1){let e=pe();g(0,"td",337)(1,"span",328),q("click",function(){D(e);let r=R(),s=r.$implicit,o=r.index,a=R(2);return E(a.addToStrategyBuilder(s.strike,"PE",a.getPELtpForSecondExpiry(o)))}),w(2),m()()}if(n&2){let e=R().index,i=R(2);y(2),J(i.getPELtpForSecondExpiry(e))}}function gne(n,t){if(n&1&&(g(0,"div",336),w(1),m()),n&2){let e=R().$implicit;y(),$n(" ",e.qtyPE," (",e.costPE,") ")}}function mne(n,t){if(n&1&&(g(0,"div",336),w(1),m()),n&2){let e=R().$implicit;y(),Z(" ",e.sllPE," ")}}function _ne(n,t){if(n&1){let e=pe();g(0,"tr")(1,"td",325)(2,"span",326),q("click",function(){let r=D(e).$implicit,s=R(2);return E(s.update_chart_strike(r.strike+"CE","CE",!0))}),w(3,"\u21AF"),m(),g(4,"span",327),q("click",function(){let r=D(e).$implicit,s=R(2);return E(s.addSLLOrder(r.strike,"CE",r.ltpCE))}),w(5,"\u2022"),m(),g(6,"span",328),q("click",function(){let r=D(e).$implicit,s=R(2);return E(s.addToStrategyBuilder(r.strike,"CE",r.ltpCE))}),w(7),m(),ee(8,cne,2,2,"div",329)(9,une,2,1,"div",329),m(),ee(10,dne,3,1,"td",330),g(11,"td",331),w(12),ee(13,hne,2,1,"div",332)(14,pne,2,0,"div",333),m(),ee(15,fne,3,1,"td",330),g(16,"td",325)(17,"span",328),q("click",function(){let r=D(e).$implicit,s=R(2);return E(s.addToStrategyBuilder(r.strike,"PE",r.ltpPE))}),w(18),m(),g(19,"span",334),q("click",function(){let r=D(e).$implicit,s=R(2);return E(s.update_chart_strike(r.strike+"PE","PE",!0))}),w(20,"\u21AF"),m(),g(21,"span",335),q("click",function(){let r=D(e).$implicit,s=R(2);return E(s.addSLLOrder(r.strike,"PE",r.ltpPE))}),w(22,"\u2022"),m(),ee(23,gne,2,2,"div",329)(24,mne,2,1,"div",329),m()()}if(n&2){let e=t.$implicit,i=R(2);y(),L("ngClass",Pe(14,Kee,e.inCurrStrategyCE,e.sllCE)),y(6),J(e.ltpCE),y(),L("ngIf",e.inCurrStrategyCE),y(),L("ngIf",e.sllCE),y(),L("ngIf",i.simulate_strategy||i.expiryDate2),y(),L("ngClass",Pe(17,_S,e.isSpot,!e.isSpot)),y(),Z(" ",e.strike," "),y(),L("ngIf",e.isSpot),y(),L("ngIf",e.showNudge),y(),L("ngIf",i.simulate_strategy||i.expiryDate2),y(),L("ngClass",Pe(20,Jee,e.inCurrStrategyPE,e.sllPE)),y(2),J(e.ltpPE),y(5),L("ngIf",e.inCurrStrategyPE),y(),L("ngIf",e.sllPE)}}function Ane(n,t){if(n&1&&(g(0,"div",338),w(1),m()),n&2){let e=R(4);y(),Z(" ",e.getSpotValue()," ")}}function yne(n,t){if(n&1){let e=pe();g(0,"tr")(1,"td",337)(2,"span",328),q("click",function(){let r=D(e).$implicit,s=R(3);return E(s.addToStrategyBuilder(r.strike,"CE",r.ltpCE))}),w(3),m()(),g(4,"td",331),w(5),ee(6,Ane,2,1,"div",332),m(),g(7,"td",337)(8,"span",328),q("click",function(){let r=D(e).$implicit,s=R(3);return E(s.addToStrategyBuilder(r.strike,"PE",r.ltpPE))}),w(9),m()()()}if(n&2){let e=t.$implicit;y(3),J(e.ltpCE),y(),L("ngClass",Pe(5,_S,e.isSpot,!e.isSpot)),y(),Z(" ",e.strike," "),y(),L("ngIf",e.isSpot),y(3),J(e.ltpPE)}}function vne(n,t){if(n&1&&(g(0,"table",319)(1,"thead",37)(2,"tr")(3,"th",320),w(4,"Call LTP"),m(),g(5,"th",160),w(6,"Strike"),m(),g(7,"th",320),w(8,"Put LTP"),m()()(),g(9,"tbody"),ee(10,yne,10,8,"tr",166),m()()),n&2){let e=R(2);y(10),L("ngForOf",e.oc_strikes2)}}function wne(n,t){if(n&1){let e=pe();g(0,"tr")(1,"td",340),q("click",function(){let r=D(e).$implicit,s=R(2);return E(s.addDSToStrategyBuilder(r))}),w(2),m(),g(3,"td",337)(4,"span",341),w(5),m()(),g(6,"td",337)(7,"span",342),w(8),m()()()}if(n&2){let e=t.$implicit;y(2),Z(" ",e.scrip," "),y(3),J(e.maxProfit),y(3),J(e.maxLoss)}}function bne(n,t){if(n&1){let e=pe();g(0,"tr")(1,"td",340),q("click",function(){let r=D(e).$implicit,s=R(2);return E(s.addBflyToStrategyBuilder(r))}),w(2),m(),g(3,"td",337)(4,"span",341),w(5),m()(),g(6,"td",337)(7,"span",342),w(8),m()()()}if(n&2){let e=t.$implicit;y(2),Z(" ",e.scrip," "),y(3),J(e.maxProfit),y(3),J(e.maxLoss)}}function Sne(n,t){if(n&1){let e=pe();g(0,"div")(1,"div",315)(2,"input",316),z("ngModelChange",function(r){D(e);let s=R();return U(s.inlineOC_higherRange,r)||(s.inlineOC_higherRange=r),E(r)}),m(),g(3,"input",317),z("ngModelChange",function(r){D(e);let s=R();return U(s.inlineOC_lowerRange,r)||(s.inlineOC_lowerRange=r),E(r)}),m(),g(4,"button",153),q("click",function(){D(e);let r=R();return E(r.inlineOCRangeUpdate())}),w(5,"\u2713"),m(),g(6,"input",318),z("ngModelChange",function(r){D(e);let s=R();return U(s.inlineOC_qty,r)||(s.inlineOC_qty=r),E(r)}),m(),g(7,"button",153),q("click",function(){D(e);let r=R();return E(r.inlineOCFix())}),w(8,"\u2713"),m()(),g(9,"table",319)(10,"thead",37)(11,"tr")(12,"th",320),w(13,"Call LTP"),m(),ee(14,ane,2,0,"th",321),g(15,"th",160),w(16,"Strike"),m(),ee(17,lne,2,0,"th",321),g(18,"th",320),w(19,"Put LTP"),m()()(),g(20,"tbody"),ee(21,_ne,25,23,"tr",166),m()(),ee(22,vne,11,1,"table",322),g(23,"div",315)(24,"input",318),z("ngModelChange",function(r){D(e);let s=R();return U(s.dsMonitorQty,r)||(s.dsMonitorQty=r),E(r)}),m(),w(25," Debit Spread: "),m(),g(26,"table",319)(27,"thead",37)(28,"tr")(29,"th",160),w(30,"Buy Strike"),m(),g(31,"th",320),w(32,"Profit"),m(),g(33,"th",320),w(34,"Loss"),m()()(),g(35,"tbody"),ee(36,wne,9,3,"tr",166),m()(),g(37,"div",315)(38,"input",323),z("ngModelChange",function(r){D(e);let s=R();return U(s.bflyMonitorQty,r)||(s.bflyMonitorQty=r),E(r)}),m(),w(39," Butterfly Max P&L: "),m(),g(40,"table",324)(41,"thead",37)(42,"tr")(43,"th",160),w(44,"Sell Strike"),m(),g(45,"th",320),w(46,"Profit"),m(),g(47,"th",320),w(48,"Loss"),m()()(),g(49,"tbody"),ee(50,bne,9,3,"tr",166),m()()()}if(n&2){let e=R();y(2),W("ngModel",e.inlineOC_higherRange),y(),W("ngModel",e.inlineOC_lowerRange),y(3),W("ngModel",e.inlineOC_qty),y(8),L("ngIf",e.simulate_strategy||e.expiryDate2),y(3),L("ngIf",e.simulate_strategy||e.expiryDate2),y(4),L("ngForOf",e.oc_strikes),y(),L("ngIf",e.simulate_strategy),y(2),W("ngModel",e.dsMonitorQty),y(12),L("ngForOf",e.ds_monitor),y(2),W("ngModel",e.bflyMonitorQty),y(12),L("ngForOf",e.bfly_monitor)}}function Cne(n,t){n&1&&(g(0,"div"),Be(1,"iframe",343),m())}function xne(n,t){n&1&&(g(0,"div")(1,"b"),w(2,"Update 27 Nov:"),m(),w(3," Maintain T+0 Monitor extra buying options and buy and exit whenever required. Shift straddle if spot breaching breakeven. Move other side hedge whenever required. End result for the Fly is the straddle one strike near to a side's hedge on the Expiry day. Exit the Fly if getting 3% on deployed capital in the week and move to next week. During the day, maintain your T+0 slope. Do that using extra buying and maintaining appropriate distance of hedge from straddle. If spot is nearing breakeven, make sure that side hedge distance is less than straddle combined premium. At end of the day, if required, then adjust straddle and hedges to achieve the payoff structure and T0 you want. T0 gives your pnl of the day irrespective of whether you are shifting your straddle or not. So maintaining T0 slope is important. If you are shifting straddle constantly, you might capture extra theta decay during the day, but will not be much as compared to original straddle. You will anyways be shifting the straddle at end of day. Not required to shift straddle constantly. Shift straddle has to be shifted when breakeven is breached, because loss rate increases after that at end of day. Also review payoff structure at end of day. Add another lower quantity closer hedged fly if required. "),Be(4,"br"),g(5,"b"),w(6,"Straddle Adjustments:"),m(),w(7," Move straddle legs as per the trend. Not early (to avoid random moves) and Not Late (ITM loss and lower premium) Moving frequently leads to getting lower premium over time. "),Be(8,"br"),g(9,"b"),w(10,"Hedge Adjustments:"),m(),w(11," Hedges should not be too far and not too close. Too far increases overnight risk. Too close results in late profit realization. Manage intraday moves with extra buy. Maintaining T0 is important. Move untested side hedge inside if cheap. Add extra small quantity of buy to manage T0 line according to trend. Monitor option chart for this. Look for EMA confirmation, S/R breach for adjustment of straddle and buys. Max loss on a side should be 100 points. In terms of Rs., do 100 * num. lots. Hedge should eventually be at the distance less than straddle premium. "),Be(12,"br"),g(13,"b"),w(14,"Loss less:"),m(),w(15," A side becomes loss less if NET CREDIT is GREATER than HEDGE DISTANCE on that side. Normally you would have atleast 400 credit in straddle and pay upto 200 on hedges. So net credit is 200. So straddle around 200 points away from hedge can make that side loss less. "),Be(16,"br"),g(17,"b"),w(18,"Strangle:"),m(),w(19," Sell naked far OTM CE or strangle. Exit the naked option if SL hit. Keep moving untested side naked sell inside. "),Be(20,"br"),g(21,"b"),w(22,"NEW FLY:"),m(),w(23," If BNF near of crossing breakeven, make CLOSE-HEDGED fly with lower qty at that point. Exit this new fly if BNF moving out of its breakevens. "),m())}function Dne(n,t){if(n&1&&(g(0,"div",353)(1,"div",354)(2,"div",355),w(3),m()(),g(4,"div",354)(5,"div",355),w(6),m(),g(7,"div",356),w(8),m()(),g(9,"div",354)(10,"div",355),w(11),m(),g(12,"div",356),w(13),m()(),g(14,"div",354)(15,"div",355),w(16),m(),g(17,"div",356),w(18),m()(),g(19,"div",354)(20,"div",355),w(21),m(),g(22,"div",356),w(23),m()(),g(24,"div",354)(25,"div",355),w(26),m(),g(27,"div",356),w(28),m()(),g(29,"div",354)(30,"div",355),w(31),m(),g(32,"div",356),w(33),m()(),g(34,"div",354)(35,"div",355),w(36),m(),g(37,"div",356),w(38),m()(),g(39,"div",354)(40,"div",355),w(41),m(),g(42,"div",356),w(43),m()()()),n&2){let e=t.$implicit,i=R(2);y(),Gt("id","opt_chart_"+e+"_spot"),y(2),J(i.getChartLabel("opt_chart_"+e+"_spot")),y(),Gt("id","opt_chart_"+e+"_0"),y(2),J(i.getChartLabel("opt_chart_"+e+"_0")),y(2),J(i.getChartValues("opt_chart_"+e+"_0")),y(),Gt("id","opt_chart_"+e+"_1"),y(2),J(i.getChartLabel("opt_chart_"+e+"_1")),y(2),J(i.getChartValues("opt_chart_"+e+"_1")),y(),Gt("id","opt_chart_"+e+"_2"),y(2),J(i.getChartLabel("opt_chart_"+e+"_2")),y(2),J(i.getChartValues("opt_chart_"+e+"_2")),y(),Gt("id","opt_chart_"+e+"_3"),y(2),J(i.getChartLabel("opt_chart_"+e+"_3")),y(2),J(i.getChartValues("opt_chart_"+e+"_3")),y(),Gt("id","opt_chart_"+e+"_4"),y(2),J(i.getChartLabel("opt_chart_"+e+"_4")),y(2),J(i.getChartValues("opt_chart_"+e+"_4")),y(),Gt("id","opt_chart_"+e+"_5"),y(2),J(i.getChartLabel("opt_chart_"+e+"_5")),y(2),J(i.getChartValues("opt_chart_"+e+"_5")),y(),Gt("id","opt_chart_"+e+"_6"),y(2),J(i.getChartLabel("opt_chart_"+e+"_5")),y(2),J(i.getChartValues("opt_chart_"+e+"_5")),y(),Gt("id","opt_chart_"+e+"_7"),y(2),J(i.getChartLabel("opt_chart_"+e+"_5")),y(2),J(i.getChartValues("opt_chart_"+e+"_5"))}}function Ene(n,t){if(n&1){let e=pe();g(0,"div",344)(1,"div",21)(2,"span",345),w(3),m(),g(4,"div",346)(5,"input",347),z("ngModelChange",function(r){D(e);let s=R();return U(s.st_chart_radio,r)||(s.st_chart_radio=r),E(r)}),m(),g(6,"label",348),w(7,"5 min"),m()(),g(8,"div",346)(9,"input",349),z("ngModelChange",function(r){D(e);let s=R();return U(s.st_chart_radio,r)||(s.st_chart_radio=r),E(r)}),m(),g(10,"label",350),w(11,"1 min"),m()(),g(12,"button",351),q("click",function(){D(e);let r=R();return E(r.initSTCharts1())}),w(13,"ST 10 2"),m(),g(14,"button",74),q("click",function(){D(e);let r=R();return E(r.backtestExpiryStrangles())}),w(15,"Expiry Strangles"),m(),g(16,"button",74),q("click",function(){D(e);let r=R();return E(r.backtestStrangleSL_Reentry())}),w(17,"Strangle SL Reentry"),m(),g(18,"button",74),q("click",function(){D(e);let r=R();return E(r.backtestLongFly())}),w(19,"Long Fly"),m()(),g(20,"div",137),ee(21,Dne,44,26,"div",352),m()()}if(n&2){let e=R();y(3),Z("Expiry: ",e.simulateExpiryDate,""),y(2),W("ngModel",e.st_chart_radio),y(4),W("ngModel",e.st_chart_radio),y(12),L("ngForOf",bl(4,Xee))}}function Mne(n,t){if(n&1&&(g(0,"div",353),Be(1,"div",364)(2,"div",364)(3,"div",364),m()),n&2){let e=t.index;y(),Gt("id","opt_chart_"+e+"_spot"),y(),Gt("id","opt_chart_"+e+"_CE"),y(),Gt("id","opt_chart_"+e+"_PE")}}function Tne(n,t){if(n&1&&(g(0,"div",353),Be(1,"div",364)(2,"div",364)(3,"div",364),m()),n&2){let e=t.$implicit;y(),Gt("id","opt_chart_"+e+"_spot"),y(),Gt("id","opt_chart_"+e+"_CE"),y(),Gt("id","opt_chart_"+e+"_PE")}}function Ine(n,t){if(n&1){let e=pe();g(0,"div",344)(1,"div",21)(2,"span",345),w(3),m(),g(4,"div",346)(5,"input",357),z("ngModelChange",function(r){D(e);let s=R();return U(s.st_chart_radio,r)||(s.st_chart_radio=r),E(r)}),m(),g(6,"label",358),w(7,"10 2"),m()(),g(8,"div",346)(9,"input",359),z("ngModelChange",function(r){D(e);let s=R();return U(s.st_chart_radio,r)||(s.st_chart_radio=r),E(r)}),m(),g(10,"label",360),w(11,"7 3"),m()(),g(12,"div",346)(13,"input",361),z("ngModelChange",function(r){D(e);let s=R();return U(s.st_chart_radio,r)||(s.st_chart_radio=r),E(r)}),m(),g(14,"label",362),w(15,"Both"),m()(),g(16,"input",363),z("ngModelChange",function(r){D(e);let s=R();return U(s.st_chart_strike,r)||(s.st_chart_strike=r),E(r)}),m(),g(17,"button",74),q("click",function(){D(e);let r=R();return E(r.initSTCharts())}),w(18,"Init"),m()(),g(19,"div",137),ee(20,Mne,4,3,"div",352),m(),g(21,"span",345),w(22),m(),g(23,"div",137),ee(24,Tne,4,3,"div",352),m()()}if(n&2){let e=R();y(3),Z("Expiry: ",e.simulateExpiryDate,""),y(2),W("ngModel",e.st_chart_radio),y(4),W("ngModel",e.st_chart_radio),y(4),W("ngModel",e.st_chart_radio),y(3),W("ngModel",e.st_chart_strike),y(4),L("ngForOf",bl(8,mS).constructor(5)),y(2),Z("Expiry: ",e.simulateExpiryDate,""),y(2),L("ngForOf",bl(9,$ee))}}function kne(n,t){if(n&1&&(g(0,"option",190),w(1),m()),n&2){let e=t.$implicit;L("value",e),y(),Z(" ",e," ")}}function Nne(n,t){if(n&1&&(g(0,"span"),w(1),m()),n&2){let e=R();y(),$n("",e.simulateCurrDateTimeString," - Expiry: ",e.simulateExpiryDate,"")}}function Pne(n,t){if(n&1&&(g(0,"div",314)(1,"div",108),w(2),m()()),n&2){let e=R();y(2),J(e.charts_instru)}}function One(n,t){if(n&1){let e=pe();g(0,"div",365),q("click",function(){let r=D(e).index,s=R();return E(s.update_chart_strike(s.chart_strikes_ce[r],"CE"))}),g(1,"div",366)(2,"div",108),w(3),m(),g(4,"div",109),w(5),m()()()}if(n&2){let e=t.index,i=R();y(),Gt("id","opt_chart_"+e+"CE"),L("ngClass",Pe(4,n3,i.isChartStrikeInCurrStrategy(i.chart_strikes_ce[e])>0,i.isChartStrikeInCurrStrategy(i.chart_strikes_ce[e])<0)),y(2),J(i.chart_strikes_ce[e]),y(2),J(i.isChartStrikeInCurrStrategy(i.chart_strikes_ce[e]))}}function Rne(n,t){if(n&1){let e=pe();g(0,"div",365),q("click",function(){let r=D(e).index,s=R();return E(s.update_chart_strike(s.chart_strikes_pe[r],"PE"))}),g(1,"div",366)(2,"div",108),w(3),m(),g(4,"div",109),w(5),m()()()}if(n&2){let e=t.index,i=R();y(),Gt("id","opt_chart_"+e+"PE"),L("ngClass",Pe(4,n3,i.isChartStrikeInCurrStrategy(i.chart_strikes_pe[e])>0,i.isChartStrikeInCurrStrategy(i.chart_strikes_pe[e])<0)),y(2),J(i.chart_strikes_pe[e]),y(2),J(i.isChartStrikeInCurrStrategy(i.chart_strikes_pe[e]))}}function Fne(n,t){if(n&1&&(g(0,"option",190),w(1),m()),n&2){let e=t.$implicit;L("value",e),y(),Z(" ",e," ")}}function Lne(n,t){if(n&1){let e=pe();g(0,"div",367)(1,"div",368)(2,"input",369),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.selected,r)||(s.selected=r),E(r)}),m()(),g(3,"select",370),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.instru,r)||(s.instru=r),E(r)}),ee(4,Fne,2,2,"option",25),m(),g(5,"input",371),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.scrip1,r)||(s.scrip1=r),E(r)}),m(),g(6,"input",372),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.scrip2,r)||(s.scrip2=r),E(r)}),m(),g(7,"input",373),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.expiry,r)||(s.expiry=r),E(r)}),m(),g(8,"select",370),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.compare,r)||(s.compare=r),E(r)}),g(9,"option",374),w(10,">"),m(),g(11,"option",375),w(12,"<"),m()(),g(13,"input",376),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.price,r)||(s.price=r),E(r)}),m(),g(14,"span"),w(15),m(),g(16,"span",288),w(17),m()()}if(n&2){let e=t.$implicit,i=R();y(2),W("ngModel",e.selected),y(),W("ngModel",e.instru),y(),L("ngForOf",i.supportedInstru),y(),W("ngModel",e.scrip1),y(),W("ngModel",e.scrip2),y(),W("ngModel",e.expiry),y(),W("ngModel",e.compare),y(5),W("ngModel",e.price),y(2),J(i.getAlertLtp(e)),y(2),J(e.status)}}function Vne(n,t){if(n&1&&(g(0,"option",190),w(1),m()),n&2){let e=t.$implicit;L("value",e),y(),Z(" ",e," ")}}function Bne(n,t){if(n&1&&(g(0,"div",338),w(1),m()),n&2){let e=R(2);y(),Z(" ",e.getSpotValue()," ")}}function qne(n,t){if(n&1){let e=pe();g(0,"tr")(1,"td",337)(2,"div",377)(3,"span",378),q("click",function(){let r=D(e).$implicit,s=R();return E(s.addToStrategyBuilder(r.strike,"CE",r.ltpCE))}),w(4),m(),g(5,"span",379),w(6),m()()(),g(7,"td",337)(8,"div",377)(9,"span",378),q("click",function(){let r=D(e),s=r.$implicit,o=r.index,a=R();return E(a.addToStrategyBuilder(s.strike,"CE",a.getLtpForMultiExpiry2(o)[0]))}),w(10),m(),g(11,"span",379),w(12),m()()(),g(13,"td",337)(14,"div",377)(15,"span",378),q("click",function(){let r=D(e),s=r.$implicit,o=r.index,a=R();return E(a.addToStrategyBuilder(s.strike,"CE",a.getLtpForMultiExpiry3(o)[0]))}),w(16),m(),g(17,"span",379),w(18),m()()(),g(19,"td",337)(20,"div",377)(21,"span",378),q("click",function(){let r=D(e),s=r.$implicit,o=r.index,a=R();return E(a.addToStrategyBuilder(s.strike,"CE",a.getLtpForMultiExpiry4(o)[0]))}),w(22),m(),g(23,"span",379),w(24),m()()(),g(25,"td",337)(26,"div",377)(27,"span",378),q("click",function(){let r=D(e),s=r.$implicit,o=r.index,a=R();return E(a.addToStrategyBuilder(s.strike,"CE",a.getLtpForMultiExpiry5(o)[0]))}),w(28),m(),g(29,"span",379),w(30),m()()(),g(31,"td",331),w(32),ee(33,Bne,2,1,"div",332),m(),g(34,"td",337)(35,"div",377)(36,"span",378),q("click",function(){let r=D(e),s=r.$implicit,o=r.index,a=R();return E(a.addToStrategyBuilder(s.strike,"PE",a.getLtpForMultiExpiry5(o)[1]))}),w(37),m(),g(38,"span",379),w(39),m()()(),g(40,"td",337)(41,"div",377)(42,"span",378),q("click",function(){let r=D(e),s=r.$implicit,o=r.index,a=R();return E(a.addToStrategyBuilder(s.strike,"PE",a.getLtpForMultiExpiry4(o)[1]))}),w(43),m(),g(44,"span",379),w(45),m()()(),g(46,"td",337)(47,"div",377)(48,"span",378),q("click",function(){let r=D(e),s=r.$implicit,o=r.index,a=R();return E(a.addToStrategyBuilder(s.strike,"PE",a.getLtpForMultiExpiry3(o)[1]))}),w(49),m(),g(50,"span",379),w(51),m()()(),g(52,"td",337)(53,"div",377)(54,"span",378),q("click",function(){let r=D(e),s=r.$implicit,o=r.index,a=R();return E(a.addToStrategyBuilder(s.strike,"PE",a.getLtpForMultiExpiry2(o)[1]))}),w(55),m(),g(56,"span",379),w(57),m()()(),g(58,"td",337)(59,"div",377)(60,"span",378),q("click",function(){let r=D(e).$implicit,s=R();return E(s.addToStrategyBuilder(r.strike,"PE",r.ltpPE))}),w(61),m(),g(62,"span",379),w(63),m()()()()}if(n&2){let e=t.$implicit,i=t.index,r=R();y(4),J(e.ltpCE),y(2),J(e.volumeCE),y(4),J(r.getLtpForMultiExpiry2(i)[0]),y(2),J(r.getLtpForMultiExpiry2(i)[2]),y(4),J(r.getLtpForMultiExpiry3(i)[0]),y(2),J(r.getLtpForMultiExpiry3(i)[2]),y(4),J(r.getLtpForMultiExpiry4(i)[0]),y(2),J(r.getLtpForMultiExpiry4(i)[2]),y(4),J(r.getLtpForMultiExpiry5(i)[0]),y(2),J(r.getLtpForMultiExpiry5(i)[2]),y(),L("ngClass",Pe(23,_S,e.isSpot,!e.isSpot)),y(),Z(" ",e.strike," "),y(),L("ngIf",e.isSpot),y(4),J(r.getLtpForMultiExpiry5(i)[1]),y(2),J(r.getLtpForMultiExpiry5(i)[3]),y(4),J(r.getLtpForMultiExpiry4(i)[1]),y(2),J(r.getLtpForMultiExpiry4(i)[3]),y(4),J(r.getLtpForMultiExpiry3(i)[1]),y(2),J(r.getLtpForMultiExpiry3(i)[3]),y(4),J(r.getLtpForMultiExpiry2(i)[1]),y(2),J(r.getLtpForMultiExpiry2(i)[3]),y(4),J(e.ltpPE),y(2),J(e.volumePE)}}function jne(n,t){if(n&1&&(g(0,"tr")(1,"td"),w(2),m(),g(3,"td"),w(4),m(),g(5,"td"),w(6),m(),g(7,"td"),w(8),m(),g(9,"td"),w(10),m(),g(11,"td"),w(12),m(),g(13,"td"),w(14),m(),g(15,"td"),w(16),m()()),n&2){let e,i=t.$implicit,r=R();y(2),J(i.instru),y(2),J(i.expiry_date),y(2),J(i.qty),y(2),J(i.scrip),y(2),J(r.getKnifeOrderStatus(i)[0]),y(2),J(r.getKnifeOrderStatus(i)[1]),y(2),J(r.getLTP(i.expiry_date,i.scrip,i.instru)),y(2),J((e=r.getOHLC(i.expiry_date,i.scrip,i.instru))==null?null:e.low)}}function Wne(n,t){if(n&1&&(g(0,"tr")(1,"td"),w(2),m(),g(3,"td"),w(4),m(),g(5,"td"),w(6),m(),g(7,"td"),w(8),m()()),n&2){let e=t.$implicit;y(2),Z(" ",e.instru," "),y(2),Z(" ",e.scrip," "),y(2),Z(" ",e.qty," "),y(2),Z(" ",e.price," ")}}function zne(n,t){if(n&1){let e=pe();g(0,"div")(1,"textarea",380),z("ngModelChange",function(r){D(e);let s=R();return U(s.ordersTextarea,r)||(s.ordersTextarea=r),E(r)}),q("ngModelChange",function(r){D(e);let s=R();return E(s.ordersTextareaUpdated(r))}),m(),g(2,"table",36)(3,"tbody"),ee(4,Wne,9,4,"tr",166),m()(),g(5,"div",381)(6,"input",382),z("ngModelChange",function(r){D(e);let s=R();return U(s.orders_broker,r)||(s.orders_broker=r),E(r)}),m(),g(7,"label",383),w(8,"Upstox"),m()(),g(9,"div",381)(10,"input",384),z("ngModelChange",function(r){D(e);let s=R();return U(s.orders_broker,r)||(s.orders_broker=r),E(r)}),m(),g(11,"label",385),w(12,"Zerodha"),m()(),g(13,"button",386),q("click",function(){D(e);let r=R();return E(r.addOrdersToStrategy())}),w(14,"Add"),m(),Be(15,"hr"),m()}if(n&2){let e=R();y(),W("ngModel",e.ordersTextarea),y(3),L("ngForOf",e.orders_parsed),y(2),W("ngModel",e.orders_broker),y(4),W("ngModel",e.orders_broker)}}function Une(n,t){if(n&1&&(g(0,"option",190),w(1),m()),n&2){let e=t.$implicit;L("value",e),y(),Z(" ",e," ")}}function Hne(n,t){n&1&&(g(0,"span",395),w(1,"N"),m())}function Yne(n,t){n&1&&(g(0,"span",395),w(1,"N"),m())}function Gne(n,t){if(n&1){let e=pe();g(0,"tr")(1,"td")(2,"select",387),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.instru,r)||(s.instru=r),E(r)}),ee(3,Une,2,2,"option",25),m()(),g(4,"td")(5,"input",388),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.expiry_date,r)||(s.expiry_date=r),E(r)}),m()(),g(6,"td")(7,"input",389),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.curr_qty,r)||(s.curr_qty=r),E(r)}),m()(),g(8,"td")(9,"input",390),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.curr_scrip,r)||(s.curr_scrip=r),E(r)}),m(),g(10,"span",391),w(11),m(),ee(12,Hne,2,0,"span",392),m(),g(13,"td")(14,"div",393),w(15),m()(),g(16,"td")(17,"input",394),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.new_scrip,r)||(s.new_scrip=r),E(r)}),m(),g(18,"span",391),w(19),m(),ee(20,Yne,2,0,"span",392),m(),g(21,"td")(22,"div",393),w(23),m()(),g(24,"td")(25,"button",226),q("click",function(){let r=D(e).index,s=R();return E(s.movePlaceOrder(r,-1))}),w(26,"\u2191"),m(),g(27,"button",283),q("click",function(){let r=D(e).index,s=R();return E(s.movePlaceOrder(r,1))}),w(28,"\u2193"),m()(),g(29,"td")(30,"button",179),q("click",function(){let r=D(e).$implicit,s=R();return E(s.place_roll_orders(r,!0))}),w(31,"Place"),m()()()}if(n&2){let e=t.$implicit,i=R();y(2),W("ngModel",e.instru),y(),L("ngForOf",i.supportedInstru),y(2),W("ngModel",e.expiry_date),y(2),L("ngClass",Pe(17,xn,e.curr_qty<0,e.curr_qty>0)),W("ngModel",e.curr_qty),y(2),L("ngClass",Pe(20,xn,e.curr_scrip.includes("PE"),e.curr_scrip.includes("CE"))),W("ngModel",e.curr_scrip),y(),L("ngClass",Pe(23,xn,-e.curr_qty<0,-e.curr_qty>0)),y(),J(-e.curr_qty),y(),L("ngIf",i.showOILimit(e.instru,e.curr_scrip)),y(3),J(i.getOrderLtp(e,!1)),y(2),L("ngClass",Pe(26,xn,e.new_scrip.includes("PE"),e.new_scrip.includes("CE"))),W("ngModel",e.new_scrip),y(),L("ngClass",Pe(29,xn,e.curr_qty<0,e.curr_qty>0)),y(),J(e.curr_qty),y(),L("ngIf",i.showOILimit(e.instru,e.new_scrip)),y(3),J(i.getOrderLtp(e,!0))}}function Kne(n,t){if(n&1&&(g(0,"option",190),w(1),m()),n&2){let e=t.$implicit;L("value",e),y(),Z(" ",e," ")}}function Jne(n,t){if(n&1&&(g(0,"option",190),w(1),m()),n&2){let e=t.$implicit;L("value",e),y(),Z(" ",e," ")}}function Xne(n,t){if(n&1&&(g(0,"option",190),w(1),m()),n&2){let e=t.$implicit;L("value",e),y(),Z(" ",e," ")}}function $ne(n,t){if(n&1){let e=pe();g(0,"div",396)(1,"div",5)(2,"h2",6)(3,"button",397),w(4," Straddle Charts "),m()(),g(5,"div",398)(6,"div",17)(7,"div",18)(8,"select",72),z("ngModelChange",function(r){D(e);let s=R();return U(s.straddle1instru,r)||(s.straddle1instru=r),E(r)}),ee(9,Kne,2,2,"option",25),m(),g(10,"input",399),z("ngModelChange",function(r){D(e);let s=R();return U(s.straddle1expiryDate,r)||(s.straddle1expiryDate=r),E(r)}),m(),g(11,"input",400),z("ngModelChange",function(r){D(e);let s=R();return U(s.straddle1scrip,r)||(s.straddle1scrip=r),E(r)}),m(),g(12,"select",72),z("ngModelChange",function(r){D(e);let s=R();return U(s.straddle2instru,r)||(s.straddle2instru=r),E(r)}),ee(13,Jne,2,2,"option",25),m(),g(14,"input",399),z("ngModelChange",function(r){D(e);let s=R();return U(s.straddle2expiryDate,r)||(s.straddle2expiryDate=r),E(r)}),m(),g(15,"input",400),z("ngModelChange",function(r){D(e);let s=R();return U(s.straddle2scrip,r)||(s.straddle2scrip=r),E(r)}),m(),g(16,"select",72),z("ngModelChange",function(r){D(e);let s=R();return U(s.straddle3instru,r)||(s.straddle3instru=r),E(r)}),ee(17,Xne,2,2,"option",25),m(),g(18,"input",399),z("ngModelChange",function(r){D(e);let s=R();return U(s.straddle3expiryDate,r)||(s.straddle3expiryDate=r),E(r)}),m(),g(19,"input",400),z("ngModelChange",function(r){D(e);let s=R();return U(s.straddle3scrip,r)||(s.straddle3scrip=r),E(r)}),m()(),Be(20,"div",300),m()()()()}if(n&2){let e=R();y(8),W("ngModel",e.straddle1instru),y(),L("ngForOf",e.supportedInstru),y(),W("ngModel",e.straddle1expiryDate),y(),W("ngModel",e.straddle1scrip),y(),W("ngModel",e.straddle2instru),y(),L("ngForOf",e.supportedInstru),y(),W("ngModel",e.straddle2expiryDate),y(),W("ngModel",e.straddle2scrip),y(),W("ngModel",e.straddle3instru),y(),L("ngForOf",e.supportedInstru),y(),W("ngModel",e.straddle3expiryDate),y(),W("ngModel",e.straddle3scrip)}}function Qne(n,t){n&1&&(g(0,"div",401)(1,"div",5)(2,"h2",6)(3,"button",402),w(4," Charts "),m()(),g(5,"div",403)(6,"div",17),Be(7,"iframe",404)(8,"iframe",405),m()()()())}Dr.register(...yg,KP);var i3=(()=>{class n{appService;zerodhaService;mapService;websocketService;angelWS;chartService;chartingService;backtestService;supportedInstru=f.supportedInstru;s1Trades=null;s2Trades=null;s3Trades=null;s4Trades=null;s5Trades=null;s6Trades=null;s7Trades=null;s8Trades=null;prev_positions=[];currLoadNum=null;payOffData=null;curr_positions_trades=null;sl_trades=[];expiryDate=null;expiryDate2=null;margin=null;avail_margin;used_margin;breakevens=null;cePremium=0;pePremium=0;ceWeight=0;peWeight=0;ceLots=0;peLots=0;urlToFetch="";spot=null;rest_res=null;labels=[];pnl=[];zeroline=[];instru="NIFTY";stepValue=15;strikeStepValue=100;loadOIDistance=500;mean=0;variance=1;positionPopContent=[];showInlineOC=!0;showExtraOptions=!1;simulate_instru="BANKNIFTY";simulate_strategy=!1;simulateExpiryDate="2023-02-16";simulateStartDate="2023-02-16";simulateExpiryDate2="2023-02-16";simulateStartDate2="2023-02-16";simulateCurrDateObj=new Date;simulateTimeAdv;simulateTimeMins=5;simulateCurrHour=9;simulateCurrMins=15;simulateCurrDateTimeString="";show_t0=!1;payoff_overlay=!1;straddle_shiftCE_overlay=!1;straddle_shiftPE_overlay=!1;straddle_shiftQty_overlay;hide_closed=!0;hide_roll=!1;hide_roll3=!0;hide_extra=!1;hide_payoff=!1;hide_clipboard=!0;add_strangle_chart=!1;strangle_chart_simulate_tillend=!1;strangle_chart_ce;strangle_chart_pe;multi_t0=!1;multiT0Input="1,2";show_simulate_charts=!1;use_hypo_future=!1;hypo_future_strike=74.5;use_filter_expiry=!1;filter_expiry="";payoff_range=1e3;alerts=[];ordersTextarea="";orders_parsed=[];orders_broker="zerodha";ce_side_overlay=!1;pe_side_overlay=!1;num_overlays=1;overlay_strike;charts_expiry;currExpiry="";currBnfExpiry="";currFinniftyExpiry="";currMidcapExpiry="";currSensexExpiry="";currBankexExpiry="";currUSDINRExpiry="";selectedPnL=0;selectedMaxProfit=0;selectedMaxLoss=0;matchPositions=!1;oc_strikes;oc_strikes2;multi_oc_strikes1;multi_oc_strikes2;multi_oc_strikes3;multi_oc_strikes4;multi_oc_strikes5;multiOC_instru="NIFTY";expiryDate_multi1="2025-06-05";expiryDate_multi2="2025-06-12";expiryDate_multi3="2025-06-26";expiryDate_multi4="2025-07-31";expiryDate_multi5="2025-12-24";multiOC_higherRange;multiOC_lowerRange;bfly_monitor;bflyMonitorQty;ds_monitor;dsMonitorQty;oc_instru="NIFTY";strategyAlertPrice;strategyAlertText="";inlineOC_higherRange;inlineOC_lowerRange;inlineOC_qty=-1800;inlineOC_qty_fixed=!1;currentSold=0;strategyPnl=0;strategyPnl1=0;strategyAlertPrice1;strategyAlertText1="";strategyName1="";strategyPnl2=0;strategyAlertPrice2;strategyAlertText2="";strategyName2="";strategyPnl3=0;strategyAlertPrice3;strategyAlertText3="";strategyName3="";strategyPnl4=0;strategyAlertPrice4;strategyAlertText4="";strategyName4="";strategyPnl5=0;strategyAlertPrice5;strategyAlertText5="";strategyName5="";strategyPnl6=0;strategyAlertPrice6;strategyAlertText6="";strategyName6="";strategyPnl7=0;strategyAlertPrice7;strategyAlertText7="";strategyName7="";strategyPnl8=0;strategyAlertPrice8;strategyAlertText8="";strategyName8="";use_cf=!1;use_cf_strategies=[];use_tag=!0;use_tag_strategies=[];tagSearch=f.defaultTag;tagSearch_strategies=[];use_include_guid=!0;use_include_guid_strategies=[];use_exclude_guid=!0;use_exclude_guid_strategies=[];use_curr_expiry=!1;expand_single_charts=!0;show_news=!1;saveMTM1=!1;playAlertSound=!0;place_orders=[{instru:"BANKNIFTY",expiry_date:"2023-01-05",curr_qty:-200,curr_scrip:"",new_scrip:"37200CE"},{instru:"BANKNIFTY",expiry_date:"2023-01-05",curr_qty:-200,curr_scrip:"",new_scrip:""},{instru:"BANKNIFTY",expiry_date:"2023-01-05",curr_qty:-200,curr_scrip:"",new_scrip:""},{instru:"BANKNIFTY",expiry_date:"2023-01-05",curr_qty:-200,curr_scrip:"",new_scrip:""}];broker_auth="enctoken JSZVXPxDxfYE1BwATYBtropRu0k5DrWsRVWZREuEMB2OCz91S6Gsjd1FxNdHJ92Bi/rg6AQQbp6cahr2z1ADkJyo2rQdlZ/uAjItl/1W0bza7TTuye7BOg==";auto_execute=!1;auto_execute_rollin=!0;auto_execute_rollout=!0;automate_roll_secs=5;automate_slabs=4;automate_slab_qty=-1800;automate_sl1=30;automate_sl_increase=5;automate_time_1="12:00";automate_dist_1=500;automate_time_2="13:30";automate_dist_2=500;automate_time_3="14:30";automate_dist_3=500;automate_time_4="15:31";automate_dist_4=500;knife_orders=[{instru:"NIFTY",scrip:"20000CE",expiry_date:"2023-12-28",qty:100,status:"",order_price:null,ltp:null,low:null},{instru:"NIFTY",scrip:"19000CE",expiry_date:"2023-12-28",qty:100,status:"",order_price:null,ltp:null,low:null},{instru:"NIFTY",scrip:"18000CE",expiry_date:"2023-12-28",qty:50,status:"",order_price:null,ltp:null,low:null}];knife_perc=5;auto_adjust_knife=!1;ds_buy_exit;num_charts=20;call_start_strike;call_end_strike;put_start_strike;put_end_strike;charts_multiple=100;charts_instru="BANKNIFTY";chart_strikes_ce=[];chart_strikes_pe=[];spot_chart_instru="NIFTY";spot_chart_instru2="SENSEX";spot_fetch_interval;chart_prices_interval;chart_ce;chart_pe;showATPLine=!1;st_chart_radio="5min";st_chart_strike=0;chart_strikes_ce_0;chart_strikes_pe_0;simulate_expiries_arr_value;simulate_expiries_arr;simulate_expiries_arr_value2;simulate_expiries_arr2;includeGUIDs="";excludeGUIDs="";show_algo=!1;show_algoSS=!0;algoSimulated=!1;algoLog="";enableAlgo=!1;instruToTrade="";expiryDateToTrade=null;entryInterval=null;algoInterval=null;algoSSSLPerc=40;algoTimeToEnter="10:10";algoSSQty=-30;algoSSMaxSLTimes=2;algoSSTriggerDifference=1;algoSSIncludeGUIDs="";algoSSExcludeGUIDs="";algoSS_positions=null;algoSS_sl_orders=null;algoSS_positions_UI=[];algoSS_qtyStep=15;algo_pos=[];algo_mtm=[];mfRealTime=!1;stocksStrategyNum=f.stocksStrategyNum;lineChartLabels=[];lineChartType="line";lineChartData={labels:[],datasets:[]};lineChartOptions={};straddle1instru="USDINR";straddle1expiryDate=null;straddle1scrip=null;straddle2instru="USDINR";straddle2expiryDate=null;straddle2scrip=null;straddle3instru="USDINR";straddle3expiryDate=null;straddle3scrip=null;intradayWatch=[{scrip:"FUT",instru:"USDINR",expiry:"2020-11-13"},{scrip:"74CE",instru:"USDINR",expiry:"2020-11-13"},{scrip:"74PE",instru:"USDINR",expiry:"2020-11-13"},{scrip:"74.5CE",instru:"USDINR",expiry:"2020-11-13"},{scrip:"74.5PE",instru:"USDINR",expiry:"2020-11-13"}];chart;constructor(e,i,r,s,o,a,l,c){this.appService=e,this.zerodhaService=i,this.mapService=r,this.websocketService=s,this.angelWS=o,this.chartService=a,this.chartingService=l,this.backtestService=c,this.appService.payOffEvent$.subscribe(u=>{console.log("payOffEvent subcribe: ",u);let d=[];u instanceof Array?d=u:d.push(u),d.forEach(h=>{let p;if(h.scrip)p=h.scrip;else{let A=this.mapService.parseSymbol(h.symbol);p=A.strike+A.type}let _;h.price?_=h.price:_=h.ltp,console.log("Adding scrip to strategy: "+p),this.addPosition(h.qty,p,_,h.expiry)})}),this.appService.placeOrdersEvent$.subscribe(u=>{console.log("placeOrdersEvent subcribe: ",u),this.place_orders=[],u.forEach(d=>{this.place_orders.push({instru:d.instru,expiry_date:this.currExpiry,curr_qty:null,curr_scrip:"",new_scrip:d.strike})})}),this.appService.chartEvent$.subscribe(u=>{console.log("chartEvent subcribe: ",u);let d=this.mapService.parseSymbol(u.symbol),h=d.strike+d.type;console.log("Adding scrip to chart: "+h),this.addScripToChart(h,u.type),this.appService.stockChartEvent$.next({symbol:u.symbol,type:u.type,currdate:this.simulateCurrDateObj})}),f.websocketEvent$.subscribe(u=>{console.log("chart websocketEvent: ",u),u==="connected"&&(this.doStrategiesSubscriptions(),setTimeout(()=>{this.curr_positions_trades||this.reloadPayoffData(1),this.loadOptionChain(),this.loadSpotChart()},2e3),setTimeout(()=>{this.refreshOILimits()},4e3))}),f.miscEvent$.subscribe(u=>{console.log("chart component miscEvent: ",u),u==="ordersReceived"&&this.enableAlgo&&this.refreshAlgoSSPositions(),u==="investedStocksFetched"&&setTimeout(()=>{this.chartingService.createStockChart()},2e3)})}test1(){this.chartingService.initSpotChart_simulated(this.simulate_instru,this.simulateCurrDateObj)}addBflyToStrategyBuilder(e){let i="CE";e.scrip.includes("PE")&&(i="PE");let r=this.mapService.getScripLTP(this.oc_instru,this.expiryDate,e.strike-this.strikeStepValue,i);this.addToStrategyBuilder(e.strike-this.strikeStepValue,i,r,-this.bflyMonitorQty/2),r=this.mapService.getScripLTP(this.oc_instru,this.expiryDate,e.strike,i),this.addToStrategyBuilder(e.strike,i,r,this.bflyMonitorQty),r=this.mapService.getScripLTP(this.oc_instru,this.expiryDate,e.strike+this.strikeStepValue,i),this.addToStrategyBuilder(e.strike+this.strikeStepValue,i,r,-this.bflyMonitorQty/2)}addDSToStrategyBuilder(e){let i="CE";e.scrip.includes("PE")&&(i="PE");let r=this.mapService.getScripLTP(this.oc_instru,this.expiryDate,e.strike,i);this.addToStrategyBuilder(e.strike,i,r,-this.dsMonitorQty),i==="CE"?(r=this.mapService.getScripLTP(this.oc_instru,this.expiryDate,e.strike+this.strikeStepValue,i),this.addToStrategyBuilder(e.strike+this.strikeStepValue,i,r,this.dsMonitorQty)):(r=this.mapService.getScripLTP(this.oc_instru,this.expiryDate,e.strike-this.strikeStepValue,i),this.addToStrategyBuilder(e.strike-this.strikeStepValue,i,r,this.dsMonitorQty))}addToStrategyBuilder(e,i,r,s=null){this.add_strangle_chart?(i==="CE"&&(this.strangle_chart_ce=e+i),i==="PE"&&(this.strangle_chart_pe=e+i)):(s||(s=this.inlineOC_qty),this.appService.payOffEvent$.next({scrip:e+i,ltp:r,qty:s}))}addSLLOrder(e,i,r){let s=new Date(this.expiryDate),o=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],a=("0"+s.getDate()).slice(-2),l=s.getMonth(),c=o[l],u=s.getFullYear(),d=a+c+u;this.sl_trades.push({qty:-this.inlineOC_qty,scrip:e+i,expiry:d,price:r,trigger_price:r,order_id:null})}movePlaceOrder(e,i){let r=e+i,s=this.place_orders.splice(e,1)[0];this.place_orders.splice(r,0,s)}getLTP(e,i,r=null){if(r||(r=this.instru),!this.mapService.isOption(i)){let s=this.mapService.getScripLTP(r,e,this.mapService.parseScrip(i).scrip,this.mapService.parseScrip(i).type);return s||(s=this.mapService.getScripLTP(r,e,this.mapService.parseScrip(i+"-BE").scrip,this.mapService.parseScrip(i+"-BE").type)),s}return this.mapService.getScripLTP(r,e,this.mapService.parseScrip(i).scrip,this.mapService.parseScrip(i).type)}getOHLC(e,i,r=null){return r||(r=this.instru),this.mapService.getScripOHLC(r,e,this.mapService.parseScrip(i).scrip,this.mapService.parseScrip(i).type)}reset_place_orders(){this.place_orders=[{instru:"BANKNIFTY",expiry_date:this.currExpiry,curr_qty:-300,curr_scrip:"",new_scrip:"37200CE"},{instru:"BANKNIFTY",expiry_date:this.currExpiry,curr_qty:-300,curr_scrip:"",new_scrip:""},{instru:"BANKNIFTY",expiry_date:this.currExpiry,curr_qty:-300,curr_scrip:"",new_scrip:""},{instru:"BANKNIFTY",expiry_date:this.currExpiry,curr_qty:-300,curr_scrip:"",new_scrip:""}]}add_empty_place_order(){this.place_orders.push({instru:"BANKNIFTY",expiry_date:this.currExpiry,curr_qty:null,curr_scrip:"",new_scrip:""})}addPlaceOrdersFromOC(){}addPlaceOrders(){this.place_orders=[],this.curr_positions_trades.forEach(e=>{e.addToOrders&&(this.place_orders.push({instru:this.instru,expiry_date:this.currExpiry,curr_qty:e.qty,curr_scrip:e.scrip,new_scrip:""}),e.addToOrders=!1)})}updateStrikePopover(e){this.positionPopContent=[],f.orders.forEach(i=>{i.scrip===e.scrip&&i.status==="COMPLETE"&&this.positionPopContent.push(""+i.qty+" "+i.tradedPrice)})}executeOrder(e,i){if(i==="currentstrike"){console.log(e,e.scrip);let r={instru:this.instru,expiry_date:e.expiry,curr_qty:e.roll_qty,curr_scrip:e.scrip,new_scrip:null};this.place_roll_orders(r,!0)}else if(i==="newstrike"){console.log(e,e.rollstrike_new);let r={instru:this.instru,expiry_date:e.expiry,curr_qty:-e.roll_qty,curr_scrip:e.rollstrike_new,new_scrip:null};this.place_roll_orders(r,!0)}}executeOrderSLL(e){console.log("SLL",e,e.scrip);let i={instru:this.instru,expiry_date:e.expiry,curr_qty:-e.qty,curr_scrip:e.scrip,new_scrip:null};this.place_roll_orders(i,!0,!0,e.price,e.order_id,"NRML",this.tagSearch,e.trigger_price)}cancelSLLOrder(e){this.zerodhaService.cancel_order(e.order_id).subscribe(i=>{console.log("cancelSLLOrder res: ",i),i.data&&(f.requestStatusEvent$.next({status:"info",message:"Order Cancelled"}),f.miscEvent$.next("refreshAll"))},i=>{console.log("cancelSLLOrder error",i);let r="";i.error&&i.error.message?r=i.error.message:r=i.message,f.requestStatusEvent$.next({status:"danger",message:"Order could not be cancelled: "+r})})}sortSLLPositions(){this.sl_trades.sort((e,i)=>{let r=e.scrip.slice(0,-2),s=i.scrip.slice(0,-2);return r===s&&e.scrip.includes("CE")&&i.scrip.includes("PE")?-1:r===s&&e.scrip.includes("PE")&&i.scrip.includes("CE")?1:this.compareForSorting(e.scrip,i.scrip)})}updateOCValuesForSLL(){this.oc_strikes&&this.oc_strikes.length>0&&this.oc_strikes.forEach(e=>{e.sllCE=this.isStrikeInSLL(e.strike+"CE"),e.sllPE=this.isStrikeInSLL(e.strike+"PE")})}isStrikeInSLL(e){let i="";if(this.sl_trades.length>0)for(let r=0;r<this.sl_trades.length;r++){let s=this.sl_trades[r];s.scrip===e&&(i+=s.price+",")}return i=i.replace(/,\s*$/,""),i===""&&(i=null),i}exitPositions(){confirm("Exit selected ?")&&this.curr_positions_trades.forEach(e=>{if(e.addToOrders){e.addToOrders=!1;let i=-e.qty,r=e.scrip,s={instru:this.instru,expiry:e.expiry,strike:this.mapService.parseScrip(r).scrip,optionType:this.mapService.parseScrip(r).type},o=this.mapService.getMapKey(s);console.log("placing exit order for ",o,i),this.zerodhaService.place_order(o,i,f.broker_auth).subscribe(a=>{console.log("exitPositions response",a),f.requestStatusEvent$.next({status:"secondary",message:"Placed "+r+" "+i})},a=>{console.log("exitPositions error",a);let l="Error (mostly timeout)";a.error&&a.error.message?l=a.error.message:l=a.message,f.requestStatusEvent$.next({status:"danger",message:r+" "+i+" "+l}),this.appService.playAudio("error")})}})}refreshOILimits(){this.nudgeOrder("NIFTY",this.mapService.getScripLTP(null,null,"NIFTY50",null)),this.nudgeOrder("BANKNIFTY",this.mapService.getScripLTP(null,null,"BANKNIFTY",null))}getOILimits(){return"OI Limits: NIFTY: "+f.nfCEOILimit+" "+f.nfPEOILimit+" , BANKNIFTY: "+f.bnfCEOILimit+" "+f.bnfPEOILimit}showOILimit(e,i){let r=i,s="";if(r.includes("CE")&&(s="CE"),r.includes("PE")&&(s="PE"),r=Number(r.slice(0,-2)),e==="NIFTY"&&f.nfCEOILimit&&f.nfPEOILimit){if(s==="CE")return r>f.nfCEOILimit;if(s==="PE")return r<f.nfPEOILimit}if(e==="BANKNIFTY"&&f.bnfCEOILimit&&f.bnfPEOILimit){if(s==="CE")return r>f.bnfCEOILimit;if(s==="PE")return r<f.bnfPEOILimit}return!1}nudgeOrder(e,i){let s=Math.round(i/100)*100+1e3+"CE",o={instru:e,expiry:this.currExpiry,strike:this.mapService.parseScrip(s).scrip,optionType:this.mapService.parseScrip(s).type},a=this.mapService.getMapKey(o);console.log("nudge order for ",a),this.zerodhaService.nudge_order(a,f.broker_auth).subscribe(l=>{if(console.log("nudgeOrder response",l,l.data[0][0]),l.data[0]&&l.data[0][0]&&l.data[0][0].message){let u=l.data[0][0].message.slice(-14);u=u.slice(0,-1);let d=u.split("-");e==="NIFTY"&&(f.nfPEOILimit=Number(d[0].trim()),f.nfCEOILimit=Number(d[1].trim())),e==="BANKNIFTY"&&(f.bnfPEOILimit=Number(d[0].trim()),f.bnfCEOILimit=Number(d[1].trim()))}else f.nfPEOILimit=null,f.nfCEOILimit=null,f.bnfPEOILimit=null,f.bnfCEOILimit=null},l=>{console.log("nudgeOrder error",l);let c="Error (mostly timeout)";l.error&&l.error.message?c=l.error.message:c=l.message})}getBflyMonitorQty(){let e=-1e3;return this.oc_instru==="NIFTY"?e=-1200:this.oc_instru==="BANKNIFTY"?e=-450:this.oc_instru==="FINNIFTY"?e=-1040:this.oc_instru==="MIDCPNIFTY"?e=-1950:this.oc_instru==="SENSEX"||this.oc_instru==="BANKEX"?e=-400:this.oc_instru==="USDINR"&&(e=-1e3),e}getDSMonitorQty(){let e=-1e3;return this.oc_instru==="NIFTY"?e=-500:this.oc_instru==="BANKNIFTY"?e=-210:this.oc_instru==="FINNIFTY"?e=-520:this.oc_instru==="MIDCPNIFTY"?e=-1050:this.oc_instru==="SENSEX"||this.oc_instru==="BANKEX"?e=-150:this.oc_instru==="USDINR"&&(e=-1e3),e}getSpotValue(){let e="";return this.oc_instru==="NIFTY"?e="NIFTY50":this.oc_instru==="BANKNIFTY"?e="BANKNIFTY":this.oc_instru==="FINNIFTY"?e="FINNIFTY":this.oc_instru==="MIDCPNIFTY"?e="MIDCPNIFTY":this.oc_instru==="SENSEX"?e="SENSEX":this.oc_instru==="BANKEX"?e="BANKEX":this.oc_instru==="USDINR"&&(e="USDINR"),this.mapService.getScripLTP(null,null,e,null)}loadMultiOptionChain(){this.multiOC_instru?(this.oc_instru=this.multiOC_instru,this.chartService.processMultiOCRequest(this.multiOC_instru,this.expiryDate_multi1,this.expiryDate_multi2,this.expiryDate_multi3,this.expiryDate_multi4,this.expiryDate_multi5)):console.log("No data to load")}multiOCRangeUpdate(){let e=null,i=null;this.multiOC_higherRange&&this.multiOC_higherRange!=""&&(e=this.multiOC_higherRange),this.multiOC_lowerRange&&this.multiOC_lowerRange!=""&&(i=this.multiOC_lowerRange),this.chartService.updateMultiOCRange(!0,this.oc_instru,e,i,this.expiryDate_multi1,this.expiryDate_multi2,this.expiryDate_multi3,this.expiryDate_multi4,this.expiryDate_multi5)}inlineOCRangeUpdate(){let e=null,i=null;this.inlineOC_higherRange&&this.inlineOC_higherRange!=""&&(e=this.inlineOC_higherRange),this.inlineOC_lowerRange&&this.inlineOC_lowerRange!=""&&(i=this.inlineOC_lowerRange),this.chartService.updateOCRange(!0,e,i),(this.simulate_strategy||this.expiryDate2)&&this.chartService.updateOCRange2()}inlineOCResendSub(){this.chartService.updateOCRange(!0)}rollStrikeKeyUp(e,i){console.log(e),e.key==="ArrowUp"?this.changeRollStrike(this.strikeStepValue,i):e.key==="ArrowDown"&&this.changeRollStrike(-this.strikeStepValue,i)}changeRollStrike(e,i){let r=i.rollstrike_new,s="";r.includes("CE")&&(s="CE"),r.includes("PE")&&(s="PE"),r=Number(r.slice(0,-2));let o=r+e+s;i.rollstrike_new=o}isRollStrikeITM(e){let i=e.rollstrike_new,r=Number(i.slice(0,-2)),s=Number(e.scrip.slice(0,-2));return!!(i.includes("CE")&&r<=s||i.includes("PE")&&r>=s)}checkAlerts(){this.curr_positions_trades&&this.curr_positions_trades.forEach(e=>{e.alertPrice&&this.getLTP(e.expiry,e.scrip)>e.alertPrice?(this.playAlertSound&&this.appService.playAudio("success"),e.alertStatus="Alert"):e.alertStatus=""}),this.strategyAlertPrice&&this.strategyAlertPrice!=""&&this.currentSold>=Number(this.strategyAlertPrice)?(this.strategyAlertText="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText="",this.strategyAlertPrice1&&this.strategyAlertPrice1!=""&&this.getStrategyPnL(1)<=Number(this.strategyAlertPrice1)?(this.strategyAlertText1="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText1="",this.strategyAlertPrice2&&this.strategyAlertPrice2!=""&&this.getStrategyPnL(2)<=Number(this.strategyAlertPrice2)?(this.strategyAlertText2="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText2="",this.strategyAlertPrice3&&this.strategyAlertPrice3!=""&&this.getStrategyPnL(3)<=Number(this.strategyAlertPrice3)?(this.strategyAlertText3="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText3="",this.strategyAlertPrice4&&this.strategyAlertPrice4!=""&&this.getStrategyPnL(4)<=Number(this.strategyAlertPrice4)?(this.strategyAlertText4="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText4="",this.strategyAlertPrice5&&this.strategyAlertPrice5!=""&&this.getStrategyPnL(5)<=Number(this.strategyAlertPrice5)?(this.strategyAlertText5="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText5="",this.strategyAlertPrice6&&this.strategyAlertPrice6!=""&&this.getStrategyPnL(6)<=Number(this.strategyAlertPrice6)?(this.strategyAlertText6="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText6="",this.strategyAlertPrice7&&this.strategyAlertPrice7!=""&&this.getStrategyPnL(7)<=Number(this.strategyAlertPrice7)?(this.strategyAlertText7="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText7="",this.strategyAlertPrice8&&this.strategyAlertPrice8!=""&&this.getStrategyPnL(8)<=Number(this.strategyAlertPrice8)?(this.strategyAlertText8="Alert",this.playAlertSound&&this.appService.playAudio("success")):this.strategyAlertText8=""}update_chart_strike(e,i,r=!1){i==="CE"?this.chart_ce=e:i==="PE"&&(this.chart_pe=e),console.log("update_chart_strike",this.chart_ce,this.chart_pe),r?(this.chartingService.updateInstruExpiry(this.instru,this.expiryDate),this.chartingService.fetchChartData(e,!1),setTimeout(()=>{console.log("loading chart",e,i),this.chartingService.updateSingleChart(e,i,!0,this.expand_single_charts)},1e3)):this.chartingService.updateSingleChart(e,i,!0,this.expand_single_charts)}update_strangle_chart(){this.simulate_strategy?this.chartingService.initStrangleChart_simulated(this.simulate_instru,this.simulateCurrDateObj,this.strangle_chart_ce,this.strangle_chart_pe,this.strangle_chart_simulate_tillend,this.simulateCurrDateObj.getHours(),this.simulateCurrDateObj.getMinutes()):this.chartingService.fetchStrangleStrikesData(this.strangle_chart_ce,this.strangle_chart_pe,!0)}loadSpotChart(){this.spot_fetch_interval&&clearInterval(this.spot_fetch_interval),this.chart_prices_interval&&clearInterval(this.chart_prices_interval),this.chartingService.initSpotChart(this.spot_chart_instru,this.expand_single_charts),this.chartingService.initSpotChart2(this.spot_chart_instru2,this.expand_single_charts),this.spot_fetch_interval=setInterval(()=>{this.chartingService.fetchSpotChartData(),this.chartingService.fetchSpotChartData2()},6e4),this.chart_prices_interval=setInterval(()=>{this.chartingService.plotCurrentPrices()},1e3)}update_charts_inputs(){let e;this.charts_instru==="NIFTY"?(this.charts_multiple=50,e=450,f.isSimulatedStrategy&&(e=300)):this.charts_instru==="BANKNIFTY"?(this.charts_multiple=100,e=1400,f.isSimulatedStrategy&&(e=900)):this.charts_instru==="FINNIFTY"?(this.charts_multiple=50,e=450,f.isSimulatedStrategy&&(e=300)):this.charts_instru==="MIDCPNIFTY"?(this.charts_multiple=25,e=450,f.isSimulatedStrategy&&(e=300)):this.charts_instru==="SENSEX"?(this.charts_multiple=100,e=1400,f.isSimulatedStrategy&&(e=900)):this.charts_instru==="BANKEX"?(this.charts_multiple=100,e=1400,f.isSimulatedStrategy&&(e=900)):this.charts_instru==="USDINR"&&(this.charts_multiple=.25,e=1,f.isSimulatedStrategy&&(e=.5));let i=this.mapService.getScripLTP(null,null,this.charts_instru,null),r=Math.round(i/this.charts_multiple)*this.charts_multiple;this.call_start_strike=r,this.call_end_strike=r+e,this.put_start_strike=r-e,this.put_end_strike=r}initSTCharts(){this.chartingService.initForCallsPuts_simulated_0(this.simulate_instru,this.simulateExpiryDate,this.st_chart_radio,this.st_chart_strike)}initSTCharts1(){this.chartingService.initForCallsPuts_simulated_1(this.simulate_instru,this.simulateExpiryDate,!0,this.st_chart_radio,this.st_chart_strike)}backtestExpiryStrangles(){this.backtestService.expiryStrangles(this.simulate_instru,this.simulateExpiryDate)}backtestStrangleSL_Reentry(){this.backtestService.perDayDriver(this.simulate_instru,this.simulateExpiryDate,"strangle_SL_reentry")}backtestLongFly(){this.backtestService.perDayDriver(this.simulate_instru,this.simulateExpiryDate,"long_fly")}getChartLabel(e){return e in f.st_simulate_charts?f.st_simulate_charts[e]:"None"}getChartValues(e){return e in f.st_simulate_charts_values?f.st_simulate_charts_values[e]:"None"}initCharts(){if(f.isSimulatedStrategy){this.chart_strikes_ce=[],this.chart_strikes_pe=[];for(let e=this.call_end_strike;e>=this.call_start_strike;e-=this.charts_multiple)this.chart_strikes_ce.push(e+"CE");for(let e=this.put_end_strike;e>=this.put_start_strike;e-=this.charts_multiple)this.chart_strikes_pe.push(e+"PE");this.chartingService.initSpotChart_simulated(this.charts_instru,this.simulateCurrDateObj),this.chartingService.init_opt_charts_simulated(this.charts_instru,this.call_start_strike,this.call_end_strike,this.put_start_strike,this.put_end_strike,this.charts_multiple,this.simulateCurrDateObj)}else{let e=this.charts_expiry;this.chart_strikes_ce=[],this.chart_strikes_pe=[];let i=[];for(let r=this.call_end_strike;r>=this.call_start_strike;r-=this.charts_multiple){let s=this.mapService.getSubscriptionObject(r+"CE",this.charts_instru,e);i.push(s),this.chart_strikes_ce.push(r+"CE")}for(let r=this.put_end_strike;r>=this.put_start_strike;r-=this.charts_multiple){let s=this.mapService.getSubscriptionObject(r+"PE",this.charts_instru,e);i.push(s),this.chart_strikes_pe.push(r+"PE")}console.log("options charts feed",i),this.appService.sendSubscriptions(i),this.chartingService.init_opt_charts(this.charts_instru,this.call_start_strike,this.call_end_strike,this.put_start_strike,this.put_end_strike,this.charts_multiple,e)}}onSpotChartInstruChange(e){this.chartingService.initSpotChart(this.spot_chart_instru,this.expand_single_charts)}onSpotChartInstruChange2(e){this.chartingService.initSpotChart2(this.spot_chart_instru2,this.expand_single_charts)}onChartInstruChange(e){this.update_charts_inputs()}onSimulateInstruChange(e){this.simulate_expiries_arr=[],this.simulate_instru==="NIFTY"&&(f.niftyExpiries.forEach(i=>{let r=""+i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2);this.simulate_expiries_arr.push(r)}),this.simulate_expiries_arr.reverse()),this.simulate_instru==="BANKNIFTY"&&(f.bnfExpiries.forEach(i=>{let r=""+i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2);this.simulate_expiries_arr.push(r)}),this.simulate_expiries_arr.reverse()),this.simulate_instru==="FINNIFTY"&&(f.finniftyExpiries.forEach(i=>{let r=""+i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2);this.simulate_expiries_arr.push(r)}),this.simulate_expiries_arr.reverse()),this.simulate_instru==="MIDCPNIFTY"&&(f.midcapExpiries.forEach(i=>{let r=""+i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2);this.simulate_expiries_arr.push(r)}),this.simulate_expiries_arr.reverse()),this.simulate_instru==="SENSEX"&&(f.sensexExpiries.forEach(i=>{let r=""+i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2);this.simulate_expiries_arr.push(r)}),this.simulate_expiries_arr.reverse()),this.simulate_instru==="BANKEX"&&(f.bankexExpiries.forEach(i=>{let r=""+i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2);this.simulate_expiries_arr.push(r)}),this.simulate_expiries_arr.reverse()),this.simulate_expiries_arr2=[...this.simulate_expiries_arr]}onSimulateExpiryChange(e){this.simulateExpiryDate=this.simulate_expiries_arr_value,this.simulateStartDate=this.simulate_expiries_arr_value}onSimulateExpiryChange2(e){this.simulateExpiryDate2=this.simulate_expiries_arr_value2,this.simulateStartDate2=this.simulate_expiries_arr_value2}isChartStrikeInCurrStrategy(e){return this.chartService.isChartStrikeInCurrStrategy(e)}expandSingleChartsChange(e){this.chartingService.resizeSingleCharts(this.expand_single_charts)}showATPLineChange(e){console.log("showATPLineChange",this.showATPLine),f.showATPLine=this.showATPLine}ngOnInit(){this.loadAlgoSSParams(),this.currExpiry=this.mapService.findCurrExpiryForDisplay(f.niftyExpiries),this.currBnfExpiry=this.mapService.findCurrExpiryForDisplay(f.bnfExpiries),this.currFinniftyExpiry=this.mapService.findCurrExpiryForDisplay(f.finniftyExpiries),this.currMidcapExpiry=this.mapService.findCurrExpiryForDisplay(f.midcapExpiries),this.currSensexExpiry=this.mapService.findCurrExpiryForDisplay(f.sensexExpiries),this.currBankexExpiry=this.mapService.findCurrExpiryForDisplay(f.bankexExpiries),this.currUSDINRExpiry=this.mapService.findCurrExpiryForDisplay(f.usdinrExpiries),this.charts_expiry=this.currExpiry,this.reset_place_orders(),this.onSimulateInstruChange(null);for(let c=1;c<=f.numStrategies;c++)this.use_tag_strategies[c]=!0,this.use_include_guid_strategies[c]=!0,this.use_exclude_guid_strategies[c]=!0,this.tagSearch_strategies[c]=f.defaultTag;this.alerts=[];for(let c=0;c<f.numAlerts;c+=1)this.alerts.push({selected:!1,scrip1:"40000CE",scrip2:"",instru:"BANKNIFTY",expiry:this.currExpiry,compare:">",price:20,status:""});let e=setInterval(()=>{this.alerts&&this.alerts.forEach(c=>{if(c.status="",c.selected){let u=null;if(c.scrip1){if(u=this.mapService.getScripLTP(c.instru,c.expiry,this.mapService.parseScrip(c.scrip1).scrip,this.mapService.parseScrip(c.scrip1).type),c.scrip2){let h=this.mapService.getScripLTP(c.instru,c.expiry,this.mapService.parseScrip(c.scrip2).scrip,this.mapService.parseScrip(c.scrip2).type);u+=h}}else u=this.mapService.getScripLTP(null,null,c.instru,null);c.compare===">"&&(u>c.price?(c.status="Alert",this.playAlertSound&&this.appService.playAudio("success")):c.status=""),c.compare==="<"&&(u<c.price?(c.status="Alert",this.playAlertSound&&this.appService.playAudio("success")):c.status="")}}),this.checkAlerts(),this.getStrategyPnL(),this.getStrategyPnL(1),this.getStrategyPnL(2),this.getStrategyPnL(3),this.getStrategyPnL(4),this.getStrategyPnL(5),this.getStrategyPnL(6),this.getStrategyPnL(7),this.getStrategyPnL(8)},1e3),i=setInterval(()=>{this.hide_payoff||this.updateChartData(this.payOffData),this.getCEPEWeightage(),this.updateMFRealTime()},5e3),r=setInterval(()=>{this.hide_payoff||this.getPayoff()},6e4),s=setInterval(()=>{this.chartService.updateSpotStrike(),this.oc_strikes=this.chartService.updateOCValues(),this.simulate_strategy&&this.simulateExpiryDate2&&(this.oc_strikes2=this.chartService.updateOCValues2()),this.expiryDate2&&(this.oc_strikes2=this.chartService.updateOCValues2()),this.multi_oc_strikes1=this.chartService.updateMultiOCValues1(this.expiryDate_multi1),this.multi_oc_strikes1=this.chartService.updateMultiOCValues2(this.expiryDate_multi2),this.multi_oc_strikes1=this.chartService.updateMultiOCValues3(this.expiryDate_multi3),this.multi_oc_strikes1=this.chartService.updateMultiOCValues4(this.expiryDate_multi4),this.multi_oc_strikes1=this.chartService.updateMultiOCValues5(this.expiryDate_multi5),this.simulate_strategy&&this.simulateExpiryDate2&&(this.oc_strikes2=this.chartService.updateOCValues2()),this.expiryDate2&&(this.oc_strikes2=this.chartService.updateOCValues2()),this.expiryDate_multi1&&(this.multi_oc_strikes1=this.chartService.updateMultiOCValues1(this.expiryDate_multi1),this.multi_oc_strikes2=this.chartService.updateMultiOCValues2(this.expiryDate_multi2),this.multi_oc_strikes3=this.chartService.updateMultiOCValues3(this.expiryDate_multi3),this.multi_oc_strikes4=this.chartService.updateMultiOCValues4(this.expiryDate_multi4),this.multi_oc_strikes5=this.chartService.updateMultiOCValues5(this.expiryDate_multi5))},1e3),o=setInterval(()=>{this.bfly_monitor=this.chartService.updateBflyMonitorStrikes(this.bflyMonitorQty),this.ds_monitor=this.chartService.updateDSMonitorStrikes(this.dsMonitorQty)},1e4),a=setInterval(()=>{this.auto_adjust_knife&&(f.miscEvent$.next("refreshAll"),setTimeout(()=>{this.adjustKnifeOrders()},4e3))},12e4);for(let c=1;c<=f.numStrategies;c++){let u=JSON.parse(localStorage.getItem("curr_positions"+c));u&&u.trades&&(c===1&&(this.s1Trades=u),c===2&&(this.s2Trades=u),c===3&&(this.s3Trades=u),c===4&&(this.s4Trades=u),c===5&&(this.s5Trades=u),c===6&&(this.s6Trades=u),c===7&&(this.s7Trades=u),c===8&&(this.s8Trades=u,f.stockPositions=u))}let l=setInterval(()=>{this.isMarketClosed()?clearInterval(l):this.saveMTM1&&this.saveMTMToLocal()},3e4)}ngAfterViewInit(){setTimeout(()=>{})}updateMFRealTime(){let e=this.mapService.getLtp("NIFTY50");f.mfInvested.forEach(i=>{if(i[0]!=="NIFTYBEES")if(this.mfRealTime){let r=e*Number(i[1]);r=Math.round((r+1e-5)*1e4)/1e4,this.mapService.setLtp(String(i[0]),r)}else this.mapService.setLtp(String(i[0]),Number(i[2]))})}ordersTextareaUpdated(e){this.orders_broker==="upstox"?this.parseUpstoxOrders():this.orders_broker==="zerodha"&&this.parseZerodhaOrders()}posQtyUpdated(e,i){i.roll_qty=this.appService.getQtyUptoFreezeLimit(this.instru,i.qty,this.inlineOC_qty)}parseZ1(){this.orders_parsed=[];let e=this.ordersTextarea.split(`
`);console.log(e);for(let i=0;i<e.length;i++){let r=e[i];r=r.replace(`
`,"	");let s=r.split("	");console.log(s);let o=new Rd;if(o.instru="BANKNIFTY",o.scrip=s[1].slice(-7),o.qty=Number(s[3]),o.entry=Number(s[4].replace(",",""))/o.qty,o.exit=Number(s[5].replace(",",""))/o.qty,o.strategy=this.currLoadNum,o.qty!==0&&this.orders_parsed.push(o),s[10]!==""){let a=new Rd;a.instru="BANKNIFTY",a.scrip=s[1].slice(-7),a.qty=Number(s[9]),a.entry=Number(s[11].replace(",",""))/a.qty,a.exit=0,s[10]=="sell"&&(a.qty=-a.qty),a.strategy=this.currLoadNum,this.orders_parsed.push(a)}}console.log(this.orders_parsed)}parseZerodhaOrders(){this.orders_parsed=[];let e=this.ordersTextarea.split(`COMPLETE
`);if(console.log(e),e)for(let i=0;i<e.length;i++){let r=e[i];r=r.replace(`
`,"	");let s=r.split("	"),o=new Fd;o.instru=s[2].split(" ")[0],isNaN(parseInt(s[2].split(" ")[4]))?o.scrip=s[2].split(" ")[2]+s[2].split(" ")[3]:o.scrip=s[2].split(" ")[4]+s[2].split(" ")[5],o.qty=Number(s[4].split(" ")[0]),s[1]==="SELL"&&(o.qty=-o.qty),o.price=Number(s[5].replace(",","")),o.strategy=this.currLoadNum,this.orders_parsed.push(o)}console.log(this.orders_parsed)}parseUpstoxOrders(){this.orders_parsed=[];let e=this.ordersTextarea.split(`
	
`);if(e)for(let i=0;i<e.length;i++){let s=e[i].split(`
`);console.log(s);let o=new Fd;o.instru=s[0].split(" ")[0],o.expiry=s[1].split(" ")[1],o.scrip=s[0].split(" ")[1];let a={instru:o.instru,expiry:o.expiry,strike:this.mapService.parseScrip(o.scrip).scrip,optionType:this.mapService.parseScrip(o.scrip).type};o.symbol=this.mapService.getMapKey(a);let l=s[3].split("	");o.qty=Number(l[3].split("/")[0]),l[2]==="Sell"&&(o.qty=-o.qty),o.price=Number(l[7]),o.strategy=this.currLoadNum,this.orders_parsed.push(o)}console.log(this.orders_parsed)}addOrdersToStrategy(){for(let e=0;e<this.orders_parsed.length;e++)this.addPosition(this.orders_parsed[e].qty,this.orders_parsed[e].scrip,this.orders_parsed[e].price)}exportToCSV(e){let i="Strategy_"+e+"_"+this.getDateInFormat()+".csv";console.log("exporting: ",i);let r=JSON.parse(localStorage.getItem("curr_positions"+e));if(r&&r.trades){let s=r.instru,o=r.expiry,a=r.trades;console.log("exporting:",s,o,a);let l="";if(l+=s+","+o+`\r
`,a.forEach(h=>{let p="";p+=h.qty+","+h.scrip+","+h.expiry+","+h.entry+","+h.exit+","+h.entryDateTime+","+h.exitDateTime,l+=p+`\r
`}),this.enableAlgo){l+=`END OF DATA\r
`;let h=new Date,p=""+h.getFullYear()+"-"+("0"+(h.getMonth()+1)).slice(-2)+"-"+("0"+h.getDate()).slice(-2);JSON.parse(localStorage.getItem("algo_mtm_"+p)).forEach(A=>{let v="";v+=A[0]+","+A[1],l+=v+`\r
`}),l+=`END OF MTM\r
`,l+=this.algoLog+`\r
`}else if(e===1){l+=`END OF DATA\r
`;let h=new Date,p=""+h.getFullYear()+"-"+("0"+(h.getMonth()+1)).slice(-2)+"-"+("0"+h.getDate()).slice(-2),_=JSON.parse(localStorage.getItem("mtm_1_"+p));_&&(_.forEach(A=>{let v="";v+=A[0]+","+A[1],l+=v+`\r
`}),l+=`END OF MTM\r
`,l+=this.algoLog+`\r
`)}let c=new Blob([l],{type:"application/x-msdownload"}),u=URL.createObjectURL(c),d=document.createElement("a");d.href=u,d.target="_blank",document.body.appendChild(d),d.download=i,d.click(),d.parentNode.removeChild(d)}}getDateInFormat(){let e=new Date,i=e.getDate(),r=e.getMonth()+1,s=e.getFullYear(),o=e.getHours(),a=e.getMinutes(),l=e.getSeconds();return""+(i<=9?"0"+i:i)+(r<=9?"0"+r:r)+s+"_"+(o<=9?"0"+o:o)+(a<=9?"0"+a:a)+(l<=9?"0"+l:l)}fetchLastOI(){let e=this.mapService.getScripLTP(null,null,this.instru,null),i=Math.round(e/this.strikeStepValue)*this.strikeStepValue,r=this.appService.getLastWorkingDay(new Date),s=""+r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+("0"+r.getDate()).slice(-2)+"T15:29:00+0530",o=0;for(let a=i-this.loadOIDistance;a<=i+this.loadOIDistance;a+=this.strikeStepValue)setTimeout(()=>{let l=this.chartService.fetchChartData(a+"CE",this.instru,this.expiryDate).subscribe(u=>{if(u.data.candles){let d=u.data.candles;d.length===0&&console.log("ZERO CANDLES FOR ",a+"CE"),this.updateLastDayOI(a+"CE",d,s)}},u=>{console.log("zerodha fetch chart error",u)}),c=this.chartService.fetchChartData(a+"PE",this.instru,this.expiryDate).subscribe(u=>{if(u.data.candles){let d=u.data.candles;d.length===0&&console.log("ZERO CANDLES FOR ",a+"PE"),this.updateLastDayOI(a+"PE",d,s)}},u=>{console.log("zerodha fetch chart error",u)})},o*1e3),o++}updateLastDayOI(e,i,r){if(i){let s=i.find(o=>o[0]===r);if(s){let o=s[6];this.mapService.setLastDayOI(this.instru,this.expiryDate,this.mapService.parseScrip(e).scrip,this.mapService.parseScrip(e).type,o)}}}uploadExpiryFile(e){let i=e.target.files[0],r=new FileReader;r.readAsText(i),r.onload=s=>{let o=String(r.result);this.loadExpiryFile(o)}}loadExpiryFile(e){let r=e.split(/\r|\n|\r/).filter(function(c){return c!==""}),s=r[0].split(",");for(let c=1;c<r.length;c++){let u=r[c].split(","),d=u[0];d=d.replace("NIFTY FIN SERVICE","FINNIFTY"),d=d.replace("NIFTY MIDCAP SELECT (MIDCPNIFTY)","MIDCPNIFTY"),d=d.replace("BSE INDEX BANKEX","BANKEX"),d=d.replace("WK","");let h={};h=Ue.simulateData[d],h||(h={}),h[u[1]]=Number(u[5]),Ue.simulateData[d]=h;let p=[];p=Ue.stockChartData[d],p||(p=[]);let _=u[1].split(" "),A=_[0].split("-"),v=_[1].split(":"),b=new Date(Number(A[2]),Number(A[1])-1,Number(A[0]),Number(v[0]),Number(v[1]),0).getTime();p.push([b,Number(u[2]),Number(u[3]),Number(u[4]),Number(u[5]),Number(u[6])]),Ue.stockChartData[d]=p}console.log("simulateData",Ue.simulateData),console.log("stockChartData",Ue.stockChartData),Ue.simulateData&&(f.isSimulatedStrategy=!0),this.simulateCurrDateObj=new Date(this.simulateStartDate),this.simulateCurrDateObj.setHours(this.simulateCurrHour),this.simulateCurrDateObj.setMinutes(this.simulateCurrMins),f.simulateCurrDateObj=this.simulateCurrDateObj;let o=""+("0"+this.simulateCurrDateObj.getDate()).slice(-2)+"-"+("0"+(this.simulateCurrDateObj.getMonth()+1)).slice(-2)+"-"+this.simulateCurrDateObj.getFullYear();this.simulateCurrDateTimeString=o+" "+("0"+this.simulateCurrDateObj.getHours()).slice(-2)+":"+("0"+this.simulateCurrDateObj.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(this.simulate_instru,this.simulateCurrDateTimeString,this.simulateExpiryDate);let a=null,l=null;if(this.simulate_instru==="NIFTY"){let c=this.mapService.getScripLTP(null,null,"NIFTY50",null),u=Math.round(c/50)*50;a=u+1500,l=u-1500}this.loadOptionChain(this.simulate_instru,this.simulateExpiryDate,a,l)}loadSimulatedNextMins(e=null){if((this.simulateTimeAdv==="add"||e&&e>0)&&(console.log("adding next",e),e?this.simulateCurrDateObj.setMinutes(this.simulateCurrDateObj.getMinutes()+e):this.simulateCurrDateObj.setMinutes(this.simulateCurrDateObj.getMinutes()+Number(this.simulateTimeMins)),this.simulateCurrDateObj.getHours()===15&&this.simulateCurrDateObj.getMinutes()>30||this.simulateCurrDateObj.getHours()>15)){let r=new Date(this.simulateCurrDateObj);r.setHours(15),r.setMinutes(30);let s=this.simulateCurrDateObj.getTime()-r.getTime(),o=new Date(this.simulateCurrDateObj);o.setDate(o.getDate()+1),o.setHours(9),o.setMinutes(15),o.setMilliseconds(o.getMilliseconds()+s),this.simulateCurrDateObj=new Date(o)}if((this.simulateTimeAdv==="subtract"||e&&e<0)&&(console.log("subtract next",e),e?(console.log("mins",this.simulateCurrDateObj.getMinutes()),this.simulateCurrDateObj.setMinutes(this.simulateCurrDateObj.getMinutes()+e),console.log("mins2",this.simulateCurrDateObj.getMinutes())):this.simulateCurrDateObj.setMinutes(this.simulateCurrDateObj.getMinutes()-Number(this.simulateTimeMins)),this.simulateCurrDateObj.getHours()===9&&this.simulateCurrDateObj.getMinutes()<15||this.simulateCurrDateObj.getHours()<9)){let r=new Date(this.simulateCurrDateObj);r.setHours(9),r.setMinutes(15);let s=r.getTime()-this.simulateCurrDateObj.getTime(),o=new Date(this.simulateCurrDateObj);o.setDate(o.getDate()-1),o.setHours(15),o.setMinutes(30),o.setMilliseconds(o.getMilliseconds()-s),this.simulateCurrDateObj=new Date(o)}f.simulateCurrDateObj=this.simulateCurrDateObj;let i=""+("0"+this.simulateCurrDateObj.getDate()).slice(-2)+"-"+("0"+(this.simulateCurrDateObj.getMonth()+1)).slice(-2)+"-"+this.simulateCurrDateObj.getFullYear();this.simulateCurrDateTimeString=i+" "+("0"+this.simulateCurrDateObj.getHours()).slice(-2)+":"+("0"+this.simulateCurrDateObj.getMinutes()).slice(-2)+":00",this.loadSimulatedOCForTime(this.simulate_instru,this.simulateCurrDateTimeString,this.simulateExpiryDate)}loadSimulatedOCForTime(e,i,r){let s=i;console.log("loadSimulatedOCForTime",s);for(let[o,a]of Object.entries(Ue.simulateData))if(o===e||o.startsWith(e)&&(o.endsWith("CE")||o.endsWith("PE")))if(o===e){let l=e;e==="NIFTY"&&(l="NIFTY50"),e==="USDINR"&&(l="USDINR"),this.mapService.setLtp(l,a[s])}else{let l=o;l=l.replace(e,""),l=l.replace("WK","");let c={instru:e,expiry:r,strike:this.mapService.parseScrip(l).scrip,optionType:this.mapService.parseScrip(l).type},u=this.mapService.getMapKey(c),d=a[s];this.mapService.setLtp(u,d);let h={instru:e,expiry:this.simulateExpiryDate2,strike:this.mapService.parseScrip(l).scrip,optionType:this.mapService.parseScrip(l).type},p=this.mapService.getMapKey(h);if(Ue.simulateData2[o]){let _=Ue.simulateData2[o][s];this.mapService.setLtp(p,_)}}this.addScripToChart(this.simulate_instru,null),this.getPayoff(),console.log("ltpMap",this.mapService.ltpMap)}getLtpForMultiExpiry2(e){return this.multi_oc_strikes2&&this.multi_oc_strikes2[e]?[this.multi_oc_strikes2[e].ltpCE,this.multi_oc_strikes2[e].ltpPE,this.multi_oc_strikes2[e].volumeCE,this.multi_oc_strikes2[e].volumePE]:null}getLtpForMultiExpiry3(e){return this.multi_oc_strikes3&&this.multi_oc_strikes3[e]?[this.multi_oc_strikes3[e].ltpCE,this.multi_oc_strikes3[e].ltpPE,this.multi_oc_strikes3[e].volumeCE,this.multi_oc_strikes3[e].volumePE]:null}getLtpForMultiExpiry4(e){return this.multi_oc_strikes4&&this.multi_oc_strikes4[e]?[this.multi_oc_strikes4[e].ltpCE,this.multi_oc_strikes4[e].ltpPE,this.multi_oc_strikes4[e].volumeCE,this.multi_oc_strikes4[e].volumePE]:null}getLtpForMultiExpiry5(e){return this.multi_oc_strikes5&&this.multi_oc_strikes5[e]?[this.multi_oc_strikes5[e].ltpCE,this.multi_oc_strikes5[e].ltpPE,this.multi_oc_strikes5[e].volumeCE,this.multi_oc_strikes5[e].volumePE]:null}getCELtpForSecondExpiry(e){return this.oc_strikes2&&this.oc_strikes2[e]?this.oc_strikes2[e].ltpCE:0}getPELtpForSecondExpiry(e){return this.oc_strikes2&&this.oc_strikes2[e]?this.oc_strikes2[e].ltpPE:0}uploadExpiryFile2(e){let i=e.target.files[0],r=new FileReader;r.readAsText(i),r.onload=s=>{let o=String(r.result);this.loadExpiryFile2(o)}}loadExpiryFile2(e){let r=e.split(/\r|\n|\r/).filter(function(o){return o!==""}),s=r[0].split(",");for(let o=1;o<r.length;o++){let a=r[o].split(","),l=a[0];l=l.replace("NIFTY FIN SERVICE","FINNIFTY"),l=l.replace("NIFTY MIDCAP SELECT (MIDCPNIFTY)","MIDCPNIFTY"),l=l.replace("BSE INDEX BANKEX","BANKEX"),l=l.replace("WK","");let c={};c=Ue.simulateData2[l],c||(c={}),c[a[1]]=Number(a[5]),Ue.simulateData2[l]=c;let u=[];u=Ue.stockChartData2[l],u||(u=[]);let d=a[1].split(" "),h=d[0].split("-"),p=d[1].split(":"),_=new Date(Number(h[2]),Number(h[1])-1,Number(h[0]),Number(p[0]),Number(p[1]),0).getTime();u.push([_,Number(a[2]),Number(a[3]),Number(a[4]),Number(a[5]),Number(a[6])]),Ue.stockChartData2[l]=u}console.log("simulateData2",Ue.simulateData2),console.log("stockChartData2",Ue.stockChartData2),this.loadSimulatedOCForTime(this.simulate_instru,this.simulateCurrDateTimeString,this.simulateExpiryDate),this.chartService.processOCRequest2(this.simulateExpiryDate2)}importCSV(e,i){let r=e.target.files[0],s=new FileReader;s.readAsText(r),s.onload=o=>{let a=String(s.result);console.log("csv:",a),this.loadPayoffData(i,!0,a)}}loadImportedPositions(e){let r=e.split(/\r|\n|\r/).filter(function(u){return u!==""});console.log("allTextLines: ",r);let s=r[0].split(","),o=s[0],a=s[1],l=[];for(let u=1;u<r.length;u++){if(r[u].includes("END OF DATA")){console.log('"END OF DATA" found');break}let d=r[u].split(",");l.push({qty:Number(d[0]),scrip:d[1],expiry:d[2],entry:Number(d[3]),exit:Number(d[4]),entryDateTime:d[5]&&d[5]!=="undefined"?d[5]:"",exitDateTime:d[6]&&d[6]!=="undefined"?d[6]:""})}let c={instru:"",expiry:"",trades:{}};return c.instru=o,c.expiry=a,c.trades=l,c}loadOptionChain(e=null,i=null,r=null,s=null){e&&i?(this.chartService.optionChainEvent$.next([e,i]),this.oc_instru=e,this.setInlineOCQty(this.oc_instru),this.chartService.processOCRequest(e,i,r,s,this.expiryDate2),this.bflyMonitorQty=this.getBflyMonitorQty(),this.dsMonitorQty=this.getDSMonitorQty()):this.instru&&this.expiryDate?(this.chartService.optionChainEvent$.next([this.instru,this.expiryDate]),this.oc_instru=this.instru,this.setInlineOCQty(this.oc_instru),this.chartService.processOCRequest(this.instru,this.expiryDate,r,s,this.expiryDate2),this.bflyMonitorQty=this.getBflyMonitorQty(),this.dsMonitorQty=this.getDSMonitorQty()):console.log("No data to load")}inlineOCFix(){this.inlineOC_qty_fixed=!0}setInlineOCQty(e){this.inlineOC_qty_fixed||(e==="NIFTY"?this.inlineOC_qty=-f.freezeLimit.NIFTY:e==="BANKNIFTY"?this.inlineOC_qty=-f.freezeLimit.BANKNIFTY:e==="FINNIFTY"?this.inlineOC_qty=-f.freezeLimit.FINNIFTY:e==="MIDCPNIFTY"?this.inlineOC_qty=-f.freezeLimit.MIDCPNIFTY:e==="SENSEX"?this.inlineOC_qty=-f.freezeLimit.SENSEX:e==="BANKEX"?this.inlineOC_qty=-f.freezeLimit.BANKEX:this.inlineOC_qty=-f.freezeLimit.NIFTY)}doSingleStrategySubscription(e){this.instru&&this.expiryDate&&this.curr_positions_trades?this.subscribeStrategiesPositionsFeed(this.instru,this.expiryDate,this.curr_positions_trades):console.log("Nothing to subscribe")}doStrategiesSubscriptions(){for(let e=1;e<=f.numStrategies;e++){let i=JSON.parse(localStorage.getItem("curr_positions"+e));if(i&&i.trades){e===1&&(this.s1Trades=i),e===2&&(this.s2Trades=i),e===3&&(this.s3Trades=i),e===4&&(this.s4Trades=i),e===5&&(this.s5Trades=i),e===6&&(this.s6Trades=i),e===7&&(this.s7Trades=i),e===8&&(this.s8Trades=i,f.stockPositions=i);let r=i.instru,s=i.expiry,o=i.trades;this.subscribeStrategiesPositionsFeed(r,s,o)}}this.subscribeOrders(),this.subscribeAlerts(),this.subscribeKnife()}subscribeOrders(){let e=[];this.place_orders&&this.place_orders.forEach(i=>{if(i.curr_scrip){let r=this.mapService.getSubscriptionObject(i.curr_scrip,i.instru,i.expiry_date);e.push(r)}if(i.new_scrip){let r=this.mapService.getSubscriptionObject(i.new_scrip,i.instru,i.expiry_date);e.push(r)}}),console.log("orders feed",e),this.appService.sendSubscriptions(e)}subscribeAlerts(){let e=[];this.alerts&&this.alerts.forEach(i=>{if(i.selected){if(i.scrip1){let r=this.mapService.getSubscriptionObject(i.scrip1,i.instru,i.expiry);e.push(r)}if(i.scrip2){let r=this.mapService.getSubscriptionObject(i.scrip2,i.instru,i.expiry);e.push(r)}}}),console.log("alerts feed",e),this.appService.sendSubscriptions(e)}subscribeKnife(){let e=[];this.knife_orders&&this.knife_orders.forEach(i=>{if(i.scrip){let r=this.mapService.getSubscriptionObject(i.scrip,i.instru,i.expiry_date);e.push(r)}}),console.log("knife feed",e),this.appService.sendSubscriptions(e)}subscribeStrategiesPositionsFeed(e,i,r){let s=[];r.forEach(o=>{let a=this.mapService.getSubscriptionObject(o.scrip,e,o.expiry);if(s.push(a),!this.mapService.isOption(o.scrip)){let l=this.mapService.getSubscriptionObject(o.scrip+"-BE",e,o.expiry);s.push(l)}if(o.rollstrike_new){let l=this.mapService.getSubscriptionObject(o.rollstrike_new,e,o.expiry);s.push(l)}if(o.exit===0&&this.mapService.isOption(o.scrip)){let l=o.scrip,c="";l.includes("CE")&&(c="CE"),l.includes("PE")&&(c="PE"),l=Number(l.slice(0,-2));let u=l+200+c;s.push(this.mapService.getSubscriptionObject(u,e,o.expiry)),u=l+100+c,s.push(this.mapService.getSubscriptionObject(u,e,o.expiry)),u=l-100+c,s.push(this.mapService.getSubscriptionObject(u,e,o.expiry))}}),s.push(this.mapService.getSubscriptionObject(this.hypo_future_strike+"CE",e,i)),s.push(this.mapService.getSubscriptionObject(this.hypo_future_strike+"PE",e,i)),console.log("strategies positions feed",s),this.appService.sendSubscriptions(s)}subscribeIntradayWatchFeed(e,i,r){let s=[],o=r,a="";o.includes("CE")&&(a="CE"),o.includes("PE")&&(a="PE"),console.log("subscribeIntradayWatchFeed symbol: "+o),o=o.slice(0,-2);let l=new Date(i).toDateString(),c=new Xi;c.expiry=l,c.instru=e,c.strike=Number(o),c.type=a,s.push(c),console.log("intraday watch feed",s),this.appService.sendSubscriptions(s)}loadPayoffData(e,i=!1,r=null){let s=null;i?s=this.loadImportedPositions(r):s=JSON.parse(localStorage.getItem("curr_positions"+e)),this.currLoadNum=e,console.log("curr_positions: ",s),this.curr_positions_trades=null,s&&s.trades&&(this.instru=s.instru,this.expiryDate=s.expiry,this.curr_positions_trades=s.trades,this.curr_positions_trades.forEach(o=>{o.addToOrders=!1,o.selected=!0,o.selectedActual=!0,o.roll_qty=this.appService.getQtyUptoFreezeLimit(this.instru,o.qty,this.inlineOC_qty),o.rollstrike=null,o.rollstrike_new=o.scrip,o.alertPrice=null,o.alertStatus=""}),this.instru==="NIFTY"?(this.stepValue=f.qtyStep.NIFTY,this.strikeStepValue=f.strike_diff.NIFTY,this.loadOIDistance=500):this.instru==="BANKNIFTY"?(this.stepValue=f.qtyStep.BANKNIFTY,this.strikeStepValue=f.strike_diff.BANKNIFTY,this.loadOIDistance=1e3):this.instru==="FINNIFTY"?(this.stepValue=f.qtyStep.FINNIFTY,this.strikeStepValue=f.strike_diff.FINNIFTY,this.loadOIDistance=500):this.instru==="MIDCPNIFTY"?(this.stepValue=f.qtyStep.MIDCPNIFTY,this.strikeStepValue=f.strike_diff.MIDCPNIFTY,this.loadOIDistance=300):this.instru==="SENSEX"?(this.stepValue=f.qtyStep.SENSEX,this.strikeStepValue=f.strike_diff.SENSEX,this.loadOIDistance=1e3):this.instru==="BANKEX"?(this.stepValue=f.qtyStep.BANKEX,this.strikeStepValue=f.strike_diff.BANKEX,this.loadOIDistance=1e3):(this.stepValue=1e3,this.strikeStepValue=.25,this.loadOIDistance=2),this.sortPositions()),f.curr_positions_trades=this.curr_positions_trades,this.constructUrlToFetch(),this.getCEPEWeightage()}sortPositions(){this.curr_positions_trades.sort((e,i)=>{if(e.exit!==0&&i.exit!==0)return this.compareForSorting(e.scrip,i.scrip);if(e.exit!==0&&i.exit===0)return-1;if(e.exit===0&&i.exit!==0)return 1;let r=e.scrip.slice(0,-2),s=i.scrip.slice(0,-2);if(r===s&&e.scrip.includes("CE")&&i.scrip.includes("PE"))return-1;if(r===s&&e.scrip.includes("PE")&&i.scrip.includes("CE"))return 1;if(r===s&&(e.scrip.includes("CE")&&i.scrip.includes("CE")||e.scrip.includes("PE")&&i.scrip.includes("PE"))){let o=new Date(e.expiry),a=new Date(i.expiry);return o<a?-1:1}return this.compareForSorting(e.scrip,i.scrip)})}compareForSorting(e,i){if(e.includes("CE")&&i.includes("PE"))return-1;if(e.includes("PE")&&i.includes("CE"))return 1;let r=e.slice(0,-2),s=i.slice(0,-2);return r>s?-1:1}constructUrlToFetch(){}addPosition1(e=null,i=null,r=null,s=null){this.curr_positions_trades===null&&(this.curr_positions_trades=[]);let o=new Date(this.expiryDate),a=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],l=("0"+o.getDate()).slice(-2),c=o.getMonth(),u=a[c],d=o.getFullYear(),h=l+u+d;this.curr_positions_trades.push({qty:e,scrip:i,expiry:h,entry:r,exit:s,addToOrders:!1,selected:!0,selectedActual:!1,rollstrike:null,rollstrike_new:i,roll_qty:this.appService.getQtyUptoFreezeLimit(this.instru,e,this.inlineOC_qty),alertPrice:null,alertStatus:""})}addPosition(e=null,i=null,r=null,s=null){this.curr_positions_trades===null&&(this.curr_positions_trades=[]);let o=new Date(this.expiryDate);s&&(o=new Date(s));let a=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],l=("0"+o.getDate()).slice(-2),c=o.getMonth(),u=a[c],d=o.getFullYear(),h=l+u+d;this.curr_positions_trades.push({qty:e,scrip:i,expiry:h,entry:r,exit:0,addToOrders:!1,selected:!0,selectedActual:!1,rollstrike:null,rollstrike_new:i,roll_qty:this.appService.getQtyUptoFreezeLimit(this.instru,e,this.inlineOC_qty),alertPrice:null,alertStatus:""})}addPositionCustom(e,i=null,r=null,s=null){let o=new Date(this.expiryDate),a=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],l=("0"+o.getDate()).slice(-2),c=o.getMonth(),u=a[c],d=o.getFullYear(),h=l+u+d;e.push({qty:i,scrip:r,expiry:h,entry:s,exit:0,addToOrders:!1,selected:!0,selectedActual:!1,rollstrike:null,rollstrike_new:r,roll_qty:this.appService.getQtyUptoFreezeLimit(this.instru,i,this.inlineOC_qty),alertPrice:null,alertStatus:""})}splitPosition(e){this.curr_positions_trades.push({qty:0,scrip:e.scrip,expiry:e.expiry,entry:e.entry,exit:e.exit,addToOrders:!1,selected:!0,selectedActual:!1,rollstrike:null,rollstrike_new:e.scrip,roll_qty:this.appService.getQtyUptoFreezeLimit(this.instru,0,this.inlineOC_qty),alertPrice:null,alertStatus:"",entryDateTime:e.entryDateTime,exitDateTime:e.exitDateTime})}deleteIfNotExpiry(){this.curr_positions_trades=this.curr_positions_trades.filter(e=>!!e.expiry.includes(this.filter_expiry))}deletePosition(e){let i=-100;for(let r=0;r<this.curr_positions_trades.length;r++){let s=this.curr_positions_trades[r];if(s.qty===e.qty&&s.scrip===e.scrip&&s.expiry===e.expiry&&s.entry===e.entry&&s.exit===e.exit){i=r;break}}i!==-100&&this.curr_positions_trades.splice(i,1)}deleteSLLOrder(e){let i=-100;for(let r=0;r<this.sl_trades.length;r++){let s=this.sl_trades[r];if(s.qty===e.qty&&s.scrip===e.scrip&&s.expiry===e.expiry&&s.price===e.price&&s.trigger_price===e.trigger_price){i=r;break}}i!==-100&&this.sl_trades.splice(i,1)}calculatePayoff(){this.getPayoff(),this.getMargin()}reloadPayoffData(e){this.currLoadNum&&(this.prev_positions[this.currLoadNum]=this.curr_positions_trades),this.loadPayoffData(e),this.getPayoff(),this.getMargin(),this.crossCheckPositions(),this.copyProperties(this.prev_positions[e]),this.use_cf_strategies[this.currLoadNum]?this.use_cf=this.use_cf_strategies[this.currLoadNum]:this.use_cf=!1,this.tagSearch_strategies[this.currLoadNum]?this.tagSearch=this.tagSearch_strategies[this.currLoadNum]:this.tagSearch="",this.use_tag_strategies[this.currLoadNum]?this.use_tag=this.use_tag_strategies[this.currLoadNum]:this.use_tag=!1,this.use_include_guid_strategies[this.currLoadNum]?this.use_include_guid=this.use_include_guid_strategies[this.currLoadNum]:this.use_include_guid=!1,this.use_exclude_guid_strategies[this.currLoadNum]?this.use_exclude_guid=this.use_exclude_guid_strategies[this.currLoadNum]:this.use_exclude_guid=!1,this.use_filter_expiry&&this.deleteIfNotExpiry()}getFunds(){this.appService.getFunds().subscribe(e=>{console.log("getFunds res: ",e),e.data&&e.data.equity&&(this.avail_margin=Math.round(e.data.equity.net).toLocaleString("en-IN"),this.used_margin=Math.round(e.data.equity.utilised.debits).toLocaleString("en-IN"))},e=>{console.log("getFunds error",e)})}crossCheckPositions(){if(this.curr_positions_trades){let e=[];for(let r=0;r<this.curr_positions_trades.length;r++){let s=this.curr_positions_trades[r];if(s.exit==0){let o={scrip:s.scrip,qty:s.qty};e.push(o)}}let i=[];for(let r=0;r<f.fetchedPositions.length;r++){let s=f.fetchedPositions[r];if(s.instru===this.instru&&s.netQty!==0){let o={instru:s.instru,expiry:s.expiry,strike:this.mapService.parseScrip(s.scrip).scrip,optionType:this.mapService.parseScrip(s.scrip).type},a=this.mapService.getMapKey(o),l=this.isCoveredCallPosition(a,s.netQty);if(l!==null){if(l!==0){let c={scrip:s.scrip,qty:l};i.push(c)}}else{let c={scrip:s.scrip,qty:s.netQty};i.push(c)}}}this.matchPositions=JSON.stringify(e)===JSON.stringify(i)}}isCoveredCallPosition(e,i){if(this.s5Trades)for(let r=0;r<this.s5Trades.trades.length;r++){let s=this.s5Trades.trades[r];if(s.exit===0){let o={instru:"NIFTY",expiry:s.expiry,strike:this.mapService.parseScrip(s.scrip).scrip,optionType:this.mapService.parseScrip(s.scrip).type},a=this.mapService.getMapKey(o);if(e===a){let l=0;return i<Number(s.qty)?l=i-Number(s.qty):l=Number(s.qty)-i,l}}}return null}deepEqual(e,i){let r=Object.keys,s=typeof e;return e&&i&&s==="object"&&s===typeof i?r(e).length===r(i).length&&r(e).every(a=>this.deepEqual(e[a],i[a])):e===i}mergePositions(){if(this.currLoadNum===f.stocksStrategyNum)return;let e=new Map,i=new Map;for(let r=0;r<this.curr_positions_trades.length;r++){let s=this.curr_positions_trades[r],o=s.scrip+" "+s.expiry,a=e.get(o),l=i.get(o);if(s.exit!==0)a||(a=[]),a.push(s),e.set(o,a);else if(!l)i.set(o,s);else if(l.qty==-s.qty)l.exit=s.entry,a||(a=[]),a.push(l),e.set(o,a),i.delete(o);else if(l.qty>0&&s.qty>0||l.qty<0&&s.qty<0)l.entry=(l.entry*l.qty+s.entry*s.qty)/(l.qty+s.qty),l.entry=Math.round((l.entry+1e-5)*1e4)/1e4,l.qty+=s.qty,i.set(o,l);else if(Math.abs(l.qty)>Math.abs(s.qty))l.qty=l.qty+s.qty,i.set(o,l),s.qty=-s.qty,s.exit=s.entry,s.entry=l.entry,a||(a=[]),a.push(s),e.set(o,a);else{let c=l.qty,u=l.entry;l.qty=l.qty+s.qty,l.entry=s.entry,i.set(o,l),s.qty=c,s.exit=s.entry,s.entry=u,a||(a=[]),a.push(s),e.set(o,a)}}console.log("exitedMap:",e),console.log("mergeMap:",i),this.curr_positions_trades=[];for(let[r,s]of e)s.forEach(o=>{this.curr_positions_trades.push({qty:o.qty,scrip:o.scrip,expiry:o.expiry,entry:o.entry,exit:o.exit,addToOrders:o.addToOrders,selected:o.selected,selectedActual:o.selectedActual,rollstrike:o.rollstrike,rollstrike_new:o.rollstrike_new,roll_qty:o.roll_qty,alertPrice:o.alertPrice,alertStatus:"",entryDateTime:o.entryDateTime,exitDateTime:o.exitDateTime})});for(let[r,s]of i)this.curr_positions_trades.push({qty:s.qty,scrip:s.scrip,expiry:s.expiry,entry:s.entry,exit:s.exit,addToOrders:s.addToOrders,selected:s.selected,selectedActual:s.selectedActual,rollstrike:s.rollstrike,rollstrike_new:s.rollstrike_new,roll_qty:s.roll_qty,alertPrice:s.alertPrice,alertStatus:"",entryDateTime:s.entryDateTime,exitDateTime:s.exitDateTime})}savePositions(e,i=!0){e!==f.stocksStrategyNum&&this.mergePositions(),console.log("curr_positions_trades",this.curr_positions_trades);let r=this.curr_positions_trades.map(s=>Object.assign({},s));if(console.log("c_positions",r),!i||confirm("Sure save "+e+"?")){let s={instru:"",expiry:"",trades:{}};s.instru=this.instru,s.expiry=this.expiryDate,r.forEach(o=>{delete o.addToOrders,delete o.selected,delete o.selectedActual,delete o.roll_qty,delete o.rollstrike,delete o.rollstrike_new,delete o.pnl,delete o.alertPrice,delete o.alertStatus}),s.trades=r,console.log("Saving positions: ",s),console.log("Saving positions json: ",JSON.stringify(s)),localStorage.setItem("curr_positions"+e,JSON.stringify(s)),this.reloadPayoffData(e),s&&s.trades&&(e===1&&(this.s1Trades=s),e===2&&(this.s2Trades=s),e===3&&(this.s3Trades=s),e===4&&(this.s4Trades=s),e===5&&(this.s5Trades=s),e===6&&(this.s6Trades=s),e===7&&(this.s7Trades=s),e===8&&(this.s8Trades=s,f.stockPositions=s))}}getCEPEWeightage(){}findDS_BuyExit(){let e,i;if(this.curr_positions_trades&&(this.curr_positions_trades.forEach(r=>{r.exit===0&&r.addToOrders&&(r.qty<0&&(i=r),r.qty>0&&(e=r))}),e&&i&&Math.abs(e.qty)===Math.abs(i.qty))){let r=(i.entry-.5*e.entry)/.5;this.ds_buy_exit=e.entry-r}return this.ds_buy_exit=Math.round((this.ds_buy_exit+1e-5)*100)/100,console.log("findDS_BuyExit :",this.ds_buy_exit),this.ds_buy_exit}unselectStraddlePositions(){let e=[],i,r;return this.curr_positions_trades&&(this.curr_positions_trades.forEach(s=>{if(s.exit===0){let o=s.scrip.slice(0,-2);e.includes(o)?(i=o,r=Math.abs(s.qty)):e.push(o)}}),console.log("straddle strike:",i),i&&this.curr_positions_trades.forEach(s=>{s.exit===0&&s.scrip.slice(0,-2)===i&&(s.selected=!1)}),console.log("selected:",this.curr_positions_trades)),[Number(i),Number(r)]}findStraddleHedge(e,i,r){let s;return this.curr_positions_trades&&this.curr_positions_trades.forEach(o=>{o.exit===0&&o.addToOrders&&o.scrip.includes(r)&&o.qty===i&&(s=o.scrip.slice(0,-2))}),console.log("findStraddleHedge strike:",s),Number(s)}whatIsStraddleHedge(e,i,r){let s;return this.curr_positions_trades&&this.curr_positions_trades.forEach(o=>{o.exit===0&&o.selected&&o.scrip.includes(r)&&o.qty===i&&(s=o.scrip.slice(0,-2))}),console.log("hedge strike:",s),Number(s)}payoffCheckboxChange(e){if(e.currentTarget.checked){if(this.overlay_strike){let i=this.overlay_strike,r=this.unselectStraddlePositions(),s=this.mapService.getScripLTP(this.instru,this.expiryDate,i,"CE");this.addPosition(-r[1],i+"CE",s);let o=this.mapService.getScripLTP(this.instru,this.expiryDate,i,"PE");this.addPosition(-r[1],i+"PE",o),this.calculatePayoff()}}else this.reloadPayoffData(this.currLoadNum)}getPayoff(){if(this.currLoadNum===f.stocksStrategyNum)return;let e={chart:[]},i=0;if(this.instru==="USDINR")if(this.use_hypo_future){let v=this.mapService.getScripLTP(this.instru,this.expiryDate,this.hypo_future_strike,"CE"),b=this.mapService.getScripLTP(this.instru,this.expiryDate,this.hypo_future_strike,"PE");i=v-b+this.hypo_future_strike,i=Math.round((i+1e-5)*100)/100}else i=this.mapService.getScripLTP(null,null,this.instru,null),i=Math.round((i+1e-5)*100)/100;else i=this.mapService.getScripLTP(null,null,this.instru,null),i=Math.round(i);console.log("ltp is: ",i);let r=1e3,s=1,o=50;this.instru==="BANKNIFTY"&&(r=3e3,o=100),this.instru==="USDINR"&&(r=2,s=.01,o=.25),this.payoff_range&&this.instru!=="USDINR"&&(r=this.payoff_range);let a=i-r,l=i+r,c=[],u=0,d=[],h=[],p=[],_=[],A=[];if(this.curr_positions_trades){if(this.ce_side_overlay||this.pe_side_overlay){let v=this.unselectStraddlePositions();this.curr_positions_trades.forEach(Q=>{p.push(Q),_.push(Q),A.push(Q)});let b="CE";this.pe_side_overlay&&(b="PE",o=-100);let x=this.whatIsStraddleHedge(v[0],v[1],b),N=x-o,T=this.mapService.getScripLTP(this.instru,this.expiryDate,N,"CE");this.addPositionCustom(p,-v[1],N+"CE",T);let k=this.mapService.getScripLTP(this.instru,this.expiryDate,N,"PE");this.addPositionCustom(p,-v[1],N+"PE",k),console.log("overlayPos1:",p);let C=x-2*o,M=this.mapService.getScripLTP(this.instru,this.expiryDate,C,"CE");this.addPositionCustom(_,-v[1],C+"CE",M);let O=this.mapService.getScripLTP(this.instru,this.expiryDate,C,"PE");this.addPositionCustom(_,-v[1],C+"PE",O),console.log("overlayPos2:",_);let F=x-3*o,j=this.mapService.getScripLTP(this.instru,this.expiryDate,F,"CE");this.addPositionCustom(A,-v[1],F+"CE",j);let H=this.mapService.getScripLTP(this.instru,this.expiryDate,N,"PE");this.addPositionCustom(A,-v[1],F+"PE",H),console.log("overlayPos3:",A)}if(this.straddle_shiftCE_overlay||this.straddle_shiftPE_overlay){let v=this.unselectStraddlePositions();this.curr_positions_trades.forEach(H=>{h.push(H)});let b="CE",x="PE",N=100;this.instru==="BANKNIFTY"&&(N=200),this.straddle_shiftPE_overlay&&(b="PE",x="CE",N=-N);let T=v[1];this.straddle_shiftQty_overlay&&(T=this.straddle_shiftQty_overlay);let k=v[0]+N/2,C=this.mapService.getScripLTP(this.instru,this.expiryDate,k,"CE");this.addPositionCustom(h,-T,k+"CE",C);let M=this.mapService.getScripLTP(this.instru,this.expiryDate,k,"PE");this.addPositionCustom(h,-T,k+"PE",M);let O=this.mapService.getScripLTP(this.instru,this.expiryDate,v[0],"CE");this.addPositionCustom(h,T,v[0]+"CE",O);let F=this.mapService.getScripLTP(this.instru,this.expiryDate,v[0],"PE");this.addPositionCustom(h,T,v[0]+"PE",F);let j=this.findStraddleHedge(v[0],T,x);if(j){let H=j+N,Q=this.mapService.getScripLTP(this.instru,this.expiryDate,j,x);this.addPositionCustom(h,-T,j+x,Q);let ie=this.mapService.getScripLTP(this.instru,this.expiryDate,H,x);this.addPositionCustom(h,T,H+x,ie)}console.log("shiftedPos:",h)}this.curr_positions_trades.forEach(v=>{if(v.exit&&v.exit>0){let b=this.getPnL(v);u+=b}this.payoff_overlay&&v.selectedActual===!0&&d.push(v)});for(let v=a;v<=l;v+=s){let b=0,x=0,N=0,T=0,k=0,C=0,M=0,O=0,F=[];v=Math.round((v+1e-5)*100)/100,this.payoff_overlay?(F=this.calculatePnLAtPoint(this.curr_positions_trades,v,i,!0),k+=F[0],k+=u,k=Math.round((k+1e-5)*100)/100,C+=F[1],C+=u,C=Math.round((C+1e-5)*100)/100,F=this.calculatePnLAtPoint(d,v,i,!1)):this.straddle_shiftCE_overlay||this.straddle_shiftPE_overlay?(F=this.calculatePnLAtPoint(h,v,i,!1),k+=F[0],k+=u,k=Math.round((k+1e-5)*100)/100,C+=F[1],C+=u,C=Math.round((C+1e-5)*100)/100,F=this.calculatePnLAtPoint(this.curr_positions_trades,v,i,!1)):this.ce_side_overlay||this.pe_side_overlay?(F=this.calculatePnLAtPoint(p,v,i,!0),k+=F[0],k+=u,k=Math.round((k+1e-5)*100)/100,F=this.calculatePnLAtPoint(_,v,i,!0),M+=F[0],M+=u,M=Math.round((M+1e-5)*100)/100,F=this.calculatePnLAtPoint(A,v,i,!0),O+=F[0],O+=u,O=Math.round((O+1e-5)*100)/100,F=this.calculatePnLAtPoint(this.curr_positions_trades,v,i,!1)):F=this.calculatePnLAtPoint(this.curr_positions_trades,v,i,!1),b+=F[0],b+=u,b=Math.round((b+1e-5)*100)/100,x+=F[1],x+=u,x=Math.round((x+1e-5)*100)/100,N+=F[2],N+=u,N=Math.round((N+1e-5)*100)/100,T+=F[3],T+=u,T=Math.round((T+1e-5)*100)/100,c.push(b),e.chart.push({Final:b,StockPrice:v,Today:x,T1:N,T2:T,Overlay:k,OverlayT0:C,Overlay2:M,Overlay3:O})}console.log("myPayoff:",e),this.payOffData=e,this.updateChartData(e),this.breakevens="";for(let v=1;v<e.chart.length;v++){let b=e.chart[v],x=e.chart[v-1];(b.Final>0&&x.Final<=0||b.Final<0&&x.Final>=0)&&(this.breakevens=this.breakevens+x.StockPrice+" ")}}}calculatePnLAtPoint(e,i,r,s){let o=0,a=0,l=0,c=0;return e.forEach(u=>{if(u.exit===null||u.exit===0){let d=null,h=null;u.scrip.includes("CE")&&u.qty<0&&(d=zt.CEsell,h=zt.CE),u.scrip.includes("PE")&&u.qty<0&&(d=zt.PEsell,h=zt.PE),u.scrip.includes("CE")&&u.qty>0&&(d=zt.CEbuy,h=zt.CE),u.scrip.includes("PE")&&u.qty>0&&(d=zt.PEbuy,h=zt.PE);let p=u.scrip.slice(0,-2),_=u.expiry,A=new Date(_),v=new Date(this.expiryDate);if(A.getFullYear()===v.getFullYear()&&A.getMonth()===v.getMonth()&&A.getDate()===v.getDate())s&&!u.selected?o+=this.getPnL(u):o+=this.calculatePnLAtPointForStrike(i,p,u.qty,u.entry,d);else{let b=new Date;this.simulate_strategy&&(b=this.simulateCurrDateObj);let x=this.appService.calcHolidays(b,v),N=Math.round((v.getTime()-b.getTime())/(1e3*3600*24))-x,T=this.mapService.getScripLTP(this.instru,_,this.mapService.parseScrip(u.scrip).scrip,this.mapService.parseScrip(u.scrip).type),k=this.calculateIV(r,p,f.INTEREST_RATE,_,h,T),C=this.calculateT0AtPointForStrike(i,p,f.INTEREST_RATE,_,k,h,N,u);C=C-u.entry,C=C*u.qty,o+=C}if(s&&!u.selected)a+=this.getPnL(u);else{let b=this.mapService.getScripLTP(this.instru,_,this.mapService.parseScrip(u.scrip).scrip,this.mapService.parseScrip(u.scrip).type),x=this.calculateIV(r,p,f.INTEREST_RATE,_,h,b),N=this.calculateT0AtPointForStrike(i,p,f.INTEREST_RATE,_,x,h,0,u);if(N=N-u.entry,N=N*u.qty,a+=N,this.multi_t0){let T=this.multiT0Input.split(",");if(T&&T.length>1){if(T[0]){let k=this.calculateT0AtPointForStrike(i,p,f.INTEREST_RATE,_,x,h,Number(T[0]),u);k=k-u.entry,k=k*u.qty,l+=k}if(T[1]){let k=this.calculateT0AtPointForStrike(i,p,f.INTEREST_RATE,_,x,h,Number(T[1]),u);k=k-u.entry,k=k*u.qty,c+=k}}}}}}),[o,a,l,c]}calculateIV(e,i,r,s,o,a,l){let c=80,u=0,d=0;for(;c-u>1e-4;)this.calculateT0AtPointForStrike(e,i,r,s,(c+u)/2,o,l)>a?c=(c+u)/2:u=(c+u)/2;return d=(c+u)/2,d}calculateT0AtPointForStrike(e,i,r,s,o,a,l,c){let u=0;if(c&&(f.mfInvested.find(v=>v[0]===c.scrip)||!this.mapService.isOption(c.scrip)))return this.calculatePnLAtPointforNonOption(e,c);let d=new Date(s);this.instru==="USDINR"?d.setHours(12,30,0):d.setHours(15,30,0);let h=new Date;this.simulate_strategy&&(h=this.simulateCurrDateObj);let p=0;if(l){let v=new Date(h);v.setDate(v.getDate()+l),v.setHours(9,15,0),p=Math.floor((v.getTime()-h.getTime())/1e3)}let _=this.appService.calcHolidays(h,d)*86400,A=Math.floor((d.getTime()-h.getTime())/1e3)-_-p;if(A>0){let x=A/60/60/24/365,N=o/100;r=r/100;let T=(Math.log(e/i)+(r+Math.pow(N,2)/2)*x)/(N*Math.sqrt(x)),k=T-N*Math.sqrt(x),C=i*Math.exp(-1*r*x);a===zt.CE&&(u=e*this.getCDF(T)-C*this.getCDF(k)),a===zt.PE&&(u=C*this.getCDF(-1*k)-e*this.getCDF(-1*T))}return u}getCDF(e){let i=Math.sqrt(this.variance);return .5*this.erfc(-(e-this.mean)/(i*Math.sqrt(2)))}erfc(e){let i=Math.abs(e),r=1/(1+i/2),s=r*Math.exp(-i*i-1.26551223+r*(1.00002368+r*(.37409196+r*(.09678418+r*(-.18628806+r*(.27886807+r*(-1.13520398+r*(1.48851587+r*(-.82215223+r*.17087277)))))))));return e>=0?s:2-s}calculatePnLAtPointforNonOption(e,i){let r=f.mfInvested.find(o=>o[0]===i.scrip);return e*Number(r[1])}calculatePnLAtPointForStrike(e,i,r,s,o){let a=0;return o===zt.CEsell&&(e>i?a=(i-e+s)*Math.abs(r):a=s*Math.abs(r)),o===zt.PEsell&&(e<i?a=(-i+e+s)*Math.abs(r):a=s*Math.abs(r)),o===zt.CEbuy&&(e>i?a=(-i+e-s)*Math.abs(r):a=s*-Math.abs(r)),o===zt.PEbuy&&(e<i?a=(i-e-s)*Math.abs(r):a=s*-Math.abs(r)),a!==0&&(a=Math.round((a+1e-5)*100)/100),a}getMargin(){if(this.curr_positions_trades){let e=new Date(this.expiryDate),i=f.monthsMapping[e.getMonth()+1];console.log("getMargin: ",this.curr_positions_trades),this.appService.getZerodhaMargin(this.instru,this.curr_positions_trades,this.instru,f.broker_auth).subscribe(r=>{console.log("getMargin res: ",r),r.data&&r.data.final&&(this.margin=Math.round(r.data.final.total).toLocaleString("en-IN"))},r=>{console.log("getMargin error",r)})}return null}getROI(){if(this.avail_margin&&this.used_margin){let e=parseFloat(this.avail_margin.replace(/,/g,""))+parseFloat(this.used_margin.replace(/,/g,"")),i=this.strategyPnl/e*100;return i=Math.round((i+1e-5)*100)/100,i}return null}getTotalReturnPercent(e){let i=this.getPnL(e);return i/=e.entry*e.qty,i*=100,i=Math.round(i),i}getTodayMovementPercent(e){let i=this.getOHLC(e.expiry,e.scrip),r=this.mapService.getScripLTP(this.instru,e.expiry,this.mapService.parseScrip(e.scrip).scrip,this.mapService.parseScrip(e.scrip).type);if((!i||!r)&&(i=this.getOHLC(e.expiry,e.scrip+"-BE"),r=this.mapService.getScripLTP(this.instru,e.expiry,this.mapService.parseScrip(e.scrip+"-BE").scrip,this.mapService.parseScrip(e.scrip+"-BE").type)),i&&i.close){let s=(r-i.close)*100/i.close;return Math.round(s)}return"-"}getPnL(e,i,r){let s=null,o=null;return e.exit!==null&&e.exit!==0?o=e.exit:(i||(i=this.instru),r||(r=e.expiry),o=this.mapService.getScripLTP(i,r,this.mapService.parseScrip(e.scrip).scrip,this.mapService.parseScrip(e.scrip).type),o||this.mapService.isOption(e.scrip)||(o=this.mapService.getScripLTP(i,r,this.mapService.parseScrip(e.scrip+"-BE").scrip,this.mapService.parseScrip(e.scrip+"-BE").type))),e.qty>0?s=(o-e.entry)*e.qty:e.qty<0&&(s=(e.entry-o)*-e.qty),s=Math.round((s+1e-5)*100)/100,e.pnl=s,s}getStrategyDelta(){let e=0,i=this.curr_positions_trades;i&&i.forEach(s=>{if(s.exit===null||s.exit===0){if(this.payoff_overlay&&!s.selected)return;let o="",a=s.scrip;a.includes("CE")&&(o="CE"),a.includes("PE")&&(o="PE");let l=a.slice(0,-2),c=this.mapService.getScripLTP(this.instru,s.expiry,this.mapService.parseScrip(s.scrip).scrip,this.mapService.parseScrip(s.scrip).type);e+=this.appService.getDelta(this.instru,l,o,s.expiry,c,this.simulate_strategy,this.simulateCurrDateObj)*s.qty}}),e=Math.round((e+1e-5)*100)/100;let r=" ( 50: "+Math.round((-e/50+1e-5)*100)/100+" , 100: "+Math.round((-e/100+1e-5)*100)/100+" , 150: "+Math.round((-e/150+1e-5)*100)/100+" , 200: "+Math.round((-e/200+1e-5)*100)/100+" )";return e+r}getStrategyPnLAfterCharges(){let e=this.strategyPnl,i=0,r=this.curr_positions_trades;return r&&r.forEach(s=>{let o=0;s.exit!==null&&s.exit!==0?o=40:o=20;let a=Math.abs(s.qty)*s.entry+Math.abs(s.qty)*s.exit,l=0;s.qty<0?l=s.entry*Math.abs(s.qty):l=s.exit*Math.abs(s.qty);let c=625e-6*l,u=a*53e-5,d=.18*(o+u),h=5e-5*a,p=3e-5*a;i+=o+c+u+d+h+p}),Math.round(e-i)+", "+Math.round(i)}getSoldPremium(){let e=0,i=0,r=0,s=0,o=0,a=0,l=0,c=0,u=0,d=0,h=0,p=0,_=null;return _=this.curr_positions_trades,_&&(_.forEach(A=>{if(A.exit===0&&A.qty<0){if(A.scrip.includes("CE")){i+=-A.qty*A.entry,e+=-A.qty;let v=this.mapService.getScripLTP(this.instru,A.expiry,this.mapService.parseScrip(A.scrip).scrip,this.mapService.parseScrip(A.scrip).type);c+=-A.qty*v}if(A.scrip.includes("PE")){o+=-A.qty*A.entry,s+=-A.qty;let v=this.mapService.getScripLTP(this.instru,A.expiry,this.mapService.parseScrip(A.scrip).scrip,this.mapService.parseScrip(A.scrip).type);d+=-A.qty*v}}}),e&&i&&(r=i/e,u=c/e),s&&o&&(a=o/s,h=d/s),l=r+a,l=Math.round((l+1e-5)*100)/100,p=u+h,p=Math.round((p+1e-5)*100)/100,this.currentSold=p),[l,p]}getStrategyPnL(e=null){let i=0,r=0,s=null,o=null,a=null;return e===null&&(s=this.curr_positions_trades),e===1&&this.s1Trades&&(s=this.s1Trades.trades,o=this.s1Trades.instru,a=this.s1Trades.expiry),e===2&&this.s2Trades&&(s=this.s2Trades.trades,o=this.s2Trades.instru,a=this.s2Trades.expiry),e===3&&this.s3Trades&&(s=this.s3Trades.trades,o=this.s3Trades.instru,a=this.s3Trades.expiry),e===4&&this.s4Trades&&(s=this.s4Trades.trades,o=this.s4Trades.instru,a=this.s4Trades.expiry),e===5&&this.s5Trades&&(s=this.s5Trades.trades,o=this.s5Trades.instru,a=this.s5Trades.expiry),e===6&&this.s6Trades&&(s=this.s6Trades.trades,o=this.s6Trades.instru,a=this.s6Trades.expiry),e===7&&this.s7Trades&&(s=this.s7Trades.trades,o=this.s7Trades.instru,a=this.s7Trades.expiry),e===8&&this.s8Trades&&(s=this.s8Trades.trades,o=this.s8Trades.instru,a=this.s8Trades.expiry),s&&s.forEach(l=>{if(e){let c=this.getPnL(l,o,l.expiry);i+=c}else{let c=this.getPnL(l);i+=c}}),i=Math.round((i+1e-5)*100)/100,e===null&&(this.strategyPnl=i),e===1&&this.s1Trades&&(this.strategyPnl1=i),e===2&&this.s2Trades&&(this.strategyPnl2=i),e===3&&this.s3Trades&&(this.strategyPnl3=i),e===4&&this.s4Trades&&(this.strategyPnl4=i),e===5&&this.s5Trades&&(this.strategyPnl5=i),e===6&&this.s6Trades&&(this.strategyPnl6=i),e===7&&this.s7Trades&&(this.strategyPnl7=i),e===8&&this.s8Trades&&(this.strategyPnl8=i),this.chartService.strategyPnLEvent$.next([i,r]),i}getSelectedPnL(){let e=this.curr_positions_trades,i=0,r=[];this.selectedPnL=0,this.selectedMaxProfit=0,this.selectedMaxLoss=0;let s=1e6;if(e){if(e.forEach(o=>{if(o.addToOrders){let l=o.scrip.slice(0,-2);r.push(l)}}),r.sort((o,a)=>a-o),r.length===2||r.length===3){e.forEach(a=>{if(a.addToOrders){let l=this.getPnL(a);i+=l;let c=a.entry*a.qty;this.selectedMaxLoss+=c,Math.abs(a.qty)<s&&(s=Math.abs(a.qty))}});let o=-1;for(let a=0;a<r.length-1;a++){let l=r[a]-r[a+1];l>o&&(o=l)}this.selectedMaxProfit=o*s-this.selectedMaxLoss,this.selectedPnL=Math.round((i+1e-5)*100)/100,this.selectedMaxProfit=Math.round((this.selectedMaxProfit+1e-5)*100)/100,this.selectedMaxLoss=Math.round((this.selectedMaxLoss+1e-5)*100)/100}if(r.length===4){e.forEach(a=>{if(a.addToOrders){let l=this.getPnL(a);i+=l;let c=a.entry*a.qty;this.selectedMaxProfit+=c,Math.abs(a.qty)<s&&(s=Math.abs(a.qty))}});let o=-1;for(let a=0;a<r.length-1;a++){let l=r[a]-r[a+1];l>o&&(o=l)}this.selectedPnL=Math.round((i+1e-5)*100)/100,this.selectedMaxProfit=Math.abs(Math.round((this.selectedMaxProfit+1e-5)*100)/100),this.selectedMaxLoss=o*s-this.selectedMaxProfit,this.selectedMaxLoss=Math.round((this.selectedMaxLoss+1e-5)*100)/100}}}getAlertLtp(e){if(e.selected)if(e.scrip1){let r=this.mapService.getScripLTP(e.instru,e.expiry,this.mapService.parseScrip(e.scrip1).scrip,this.mapService.parseScrip(e.scrip1).type);if(e.scrip2){let s=this.mapService.getScripLTP(e.instru,e.expiry,this.mapService.parseScrip(e.scrip1).scrip,this.mapService.parseScrip(e.scrip1).type);r+=s}return r}else return this.mapService.getScripLTP(null,null,e.instru,null);return null}addScripToChart(e,i){for(let[r,s]of Object.entries(Ue.simulateData))if(r===e||r.startsWith(this.simulate_instru)&&r.endsWith(e)){let o={chart:[]},a=this.simulateCurrDateTimeString.split(" ")[0];for(let[l,c]of Object.entries(s))l.startsWith(a)&&o.chart.push({label:l,close:c});console.log("value",a,o,s),this.updateFinChartData(o,i)}}updateFinChartData(e,i){}updateChartData(e){if(e&&e.chart&&Array.isArray(e.chart)){let i=[],r=[],s=[],o=[],a=[],l=[],c=[],u=[],d=[],h=[],p=[],_=[];e.chart.forEach(T=>{if(i.push(T.StockPrice),r.push(T.Final),h.push(0),T.StockPrice%this.strikeStepValue===0){let k=this.mapService.getScripOI(this.instru,this.expiryDate,T.StockPrice,"PE"),C=this.mapService.getScripOI(this.instru,this.expiryDate,T.StockPrice,"CE"),M=this.mapService.getScripLastDayOI(this.instru,this.expiryDate,T.StockPrice,"CE"),O=this.mapService.getScripLastDayOI(this.instru,this.expiryDate,T.StockPrice,"PE");p.push(k-O),_.push(C-M)}else p.push(0),_.push(0);this.multi_t0&&(u.push(T.T1),d.push(T.T2)),(this.payoff_overlay||this.straddle_shiftCE_overlay||this.straddle_shiftPE_overlay)&&(s.push(T.Overlay),o.push(T.OverlayT0)),(this.ce_side_overlay||this.pe_side_overlay)&&(s.push(T.Overlay),a.push(T.Overlay2),l.push(T.Overlay3)),this.show_t0&&c.push(T.Today)}),this.lineChartLabels=i,this.lineChartData={labels:i,datasets:[{data:r,label:"PnL",borderColor:"#35A4EB",fill:"origin",borderWidth:2,pointRadius:0},{data:c,label:"T+0",fill:!1,borderColor:"black",borderWidth:1,pointRadius:0},{data:u,label:"T+1",fill:!1,borderColor:"#205f87",borderWidth:1,pointRadius:0},{data:d,label:"T+2",fill:!1,borderColor:"#6fb9e8",borderWidth:1,pointRadius:0},{data:s,label:"Overlay",fill:!1,borderColor:"#35A4EB",borderWidth:2,pointRadius:0,borderDash:[10,5]},{data:o,label:"OverlayT0",fill:!1,borderColor:"black",borderWidth:1,pointRadius:0,borderDash:[10,5]},{data:a,label:"Overlay2",fill:!1,borderColor:"#35A4EB",borderWidth:2,pointRadius:0,borderDash:[10,5]},{data:l,label:"Overlay3",fill:!1,borderColor:"#35A4EB",borderWidth:2,pointRadius:0,borderDash:[10,5]},{data:p,label:"PE OI",type:"bar",yAxisID:"y1",barThickness:5,backgroundColor:"#F0A48C"},{data:_,label:"CE OI",type:"bar",yAxisID:"y1",barThickness:5,backgroundColor:"#8DD681"}]};let A=0;if(this.instru==="USDINR")if(this.use_hypo_future){let T=this.mapService.getScripLTP(this.instru,this.expiryDate,this.hypo_future_strike,"CE"),k=this.mapService.getScripLTP(this.instru,this.expiryDate,this.hypo_future_strike,"PE");A=T-k+this.hypo_future_strike,A=Math.round((A+1e-5)*100)/100}else A=this.mapService.getScripLTP(null,null,this.instru,null),A=Math.round((A+1e-5)*100)/100;else A=this.mapService.getScripLTP(null,null,this.instru,null),A=Math.round(A);let v=1/0,b=-1/0;this.lineChartData.datasets.forEach(T=>{T.data&&T.data.forEach(k=>{typeof k=="number"&&(v=Math.min(v,k),b=Math.max(b,k))})});let x=i[0],N=i[i.length-1];this.lineChartOptions={responsive:!0,animation:!1,scales:{x:{type:"linear",min:x,max:N,offset:!1,ticks:{stepSize:1,autoSkip:!1,maxTicksLimit:20}},y:{position:"left"},y1:{position:"right",grid:{display:!1},ticks:{callback:T=>Math.abs(T)>=1e5?T/1e5+"L":Math.abs(T)>=1e3?T/1e3+"K":T}}},plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1},annotation:{annotations:[{drawTime:"afterDatasetsDraw",type:"line",scaleID:"x",value:A,borderColor:"orange",borderWidth:1,label:{yAdjust:-40,display:!0,color:"orange",content:A.toString()}}]}}}}}doAnnotationsContainSymbol(e,i){for(let r=0;r<e.length;r++)if(i===e[r].value)return!0;return!1}updateIntradayChartData(){let e=[],i=[],r=[],s=this.chartService.getIntradayData("74CE","USDINR","2020-11-13"),o=this.chartService.getIntradayData("74PE","USDINR","2020-11-13"),a=this.chartService.getIntradayData("FUT","USDINR","2020-11-13");s&&s.forEach(l=>{let c=l.time;o.forEach(u=>{if(c===u.time){let d=l.price+u.price;d=Math.round((d+1e-5)*100)/100,e.push(c),i.push(d);return}}),a&&a.forEach(u=>{if(c===u.time){r.push(u.price);return}})})}rollPosition(e){console.log(e,e.rollstrike_new);let i={instru:this.instru,expiry_date:e.expiry,curr_qty:e.roll_qty,curr_scrip:e.scrip,new_scrip:e.rollstrike_new};this.place_roll_orders(i,!0)}getPosRollStrike(e,i){let r=50;this.instru==="BANKNIFTY"&&(r=100),this.instru==="USDINR"&&(r=.25);let s="";e.scrip.includes("CE")&&(s="CE"),e.scrip.includes("PE")&&(s="PE");let o=Number(e.scrip.slice(0,-2));return o=o+i*r,o+s}getPosRollStrikeLTP(e,i){let r=50;this.instru==="BANKNIFTY"&&(r=100),this.instru==="USDINR"&&(r=.25);let s="";e.scrip.includes("CE")&&(s="CE"),e.scrip.includes("PE")&&(s="PE");let o=Number(e.scrip.slice(0,-2));return o=o+i*r,this.mapService.getScripLTP(e.instru,e.expiry,o,s)}getOrderLtp(e,i=!1){let r=e.curr_scrip;return i&&(r=e.new_scrip),r?this.mapService.getScripLTP(e.instru,e.expiry_date,this.mapService.parseScrip(r).scrip,this.mapService.parseScrip(r).type):null}adjustKnifeOrders(){this.knife_orders.forEach(e=>{let i=this.getKnifeOrderStatus(e),r=i[0],s=i[1],o=i[2];if(r==="OPEN"){let a=this.getLTP(e.expiry_date,e.scrip,e.instru),l=Math.round(s+s*(f.knife_threshold_adjust1/100)),c=Math.round(s+s*(f.knife_threshold_adjust2/100));if(a&&(a<l||a>c)){console.log("Adjusting knife order",e.scrip),f.requestStatusEvent$.next({status:"info",message:"Adjusting knife order "+e.scrip}),this.appService.playAudio("success");let u=Math.round(a-a*(f.knife_threshold/100)),d={instru:e.instru,expiry_date:e.expiry_date,curr_qty:-e.qty,curr_scrip:e.scrip,new_scrip:null};u?(this.place_roll_orders(d,!0,!1,u,o,"MIS"),setTimeout(()=>{f.miscEvent$.next("refreshAll")},4e3)):f.requestStatusEvent$.next({status:"danger",message:"Limit price could not be calculated for "+e.scrip})}}})}getKnifeOrderStatus(e){let i={instru:e.instru,expiry:e.expiry_date,strike:this.mapService.parseScrip(e.scrip).scrip,optionType:this.mapService.parseScrip(e.scrip).type},r=this.mapService.getMapKey(i),s="",o=null,a=null,l=null;return f.orders.forEach(c=>{r===c.tradingsymbol&&(o===null||c.time>o)&&(s=c.status,o=c.time,a=c.tradedPrice,l=c.id)}),[s,a,l]}place_knife_orders(){this.knife_orders.forEach(e=>{this.place_knife_order(e)}),setTimeout(()=>{f.miscEvent$.next("refreshAll")},4e3)}place_knife_order(e){let i={instru:e.instru,expiry_date:e.expiry_date,curr_qty:-e.qty,curr_scrip:e.scrip,new_scrip:null},r=this.getLTP(e.expiry_date,e.scrip,e.instru),s=Math.round(r-r*(f.knife_threshold/100));s?this.place_roll_orders(i,!0,!1,s,null,"MIS"):f.requestStatusEvent$.next({status:"danger",message:"Limit price could not be calculated for "+e.scrip})}place_all_orders(){confirm("Place All ?")&&this.place_orders.forEach(e=>{this.place_roll_orders(e,!0,!1)})}place_roll_orders(e,i,r=!0,s=null,o=null,a="NRML",l=this.tagSearch,c=0,u=null){let d=!1;if(i&&r?d=confirm("Sure? "+e.curr_qty+" "+e.curr_scrip+" "+e.new_scrip):d=!0,d)if(i&&!e.curr_scrip)this.place_roll_orders(e,!1);else{let h=e.curr_qty,p=e.curr_scrip;if(i?h=-h:p=e.new_scrip,console.log("place order",h,p),h!=""&&h!=null&&p){let _={instru:e.instru,expiry:e.expiry_date,strike:this.mapService.parseScrip(p).scrip,optionType:this.mapService.parseScrip(p).type},A=this.mapService.getMapKey(_);console.log("placing ",i?"first order ":"second order ",A),this.zerodhaService.place_order(A,h,f.broker_auth,s,o,a,l,c).subscribe(v=>{console.log("place_roll_orders response",v),f.requestStatusEvent$.next({status:"secondary",message:"Placed "+p+" "+h}),i&&e.new_scrip?setTimeout(()=>{this.place_roll_orders(e,!1)},1e3):u&&(console.log("Algo - Order Id:",v.data.order_id),u=v.data.order_id)},v=>{console.log("place_roll_orders error",v);let b="Error (mostly timeout)";v.error&&v.error.message?b=v.error.message:b=v.message,f.requestStatusEvent$.next({status:"danger",message:p+" "+h+" "+b}),this.appService.playAudio("error")})}else console.log("Not valid data to place order")}}saveAsCF(){let e=this.curr_positions_trades.map(r=>Object.assign({},r));console.log("c_positions",e);let i={instru:"",expiry:"",trades:{}};i.instru=this.instru,i.expiry=this.expiryDate,e.forEach(r=>{delete r.addToOrders,delete r.selected,delete r.selectedActual,delete r.roll_qty,delete r.rollstrike,delete r.rollstrike_new,delete r.pnl,delete r.alertPrice,delete r.alertStatus}),i.trades=e,console.log("Saving positions CF: ",i),console.log("Saving positions json CF: ",JSON.stringify(i)),localStorage.setItem("cf_curr_positions"+this.currLoadNum,JSON.stringify(i))}removeCF(){localStorage.removeItem("cf_curr_positions"+this.currLoadNum)}use_cf_change(e){this.use_cf_strategies[this.currLoadNum]=this.use_cf}tagSearch_change(e){this.tagSearch_strategies[this.currLoadNum]=this.tagSearch}use_tag_change(e){this.use_tag_strategies[this.currLoadNum]=this.use_tag}use_include_guid_change(e){this.use_include_guid_strategies[this.currLoadNum]=this.use_include_guid}use_exclude_guid_change(e){this.use_exclude_guid_strategies[this.currLoadNum]=this.use_exclude_guid}refreshPositions(){console.log("refreshing positions");let e=this.curr_positions_trades;this.curr_positions_trades=[],this.sl_trades=[];let i=this.tagSearch;this.use_tag||(i="");let r=this.includeGUIDs;this.use_include_guid||(r="");let s=this.excludeGUIDs;if(this.use_exclude_guid||(s=""),f.orders.forEach(o=>{if(console.log("tag search",o.tags,i),o.instru===this.instru&&(o.tags.includes(i)&&!s.includes(o.guid)||r.includes(o.guid))&&o.status==="COMPLETE"){let a=new Date(o.expiry),l=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],c=("0"+a.getDate()).slice(-2),u=a.getMonth(),d=l[u],h=a.getFullYear(),p=c+d+h,_=""+a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2);(this.use_curr_expiry&&_===this.expiryDate||!this.use_curr_expiry)&&this.curr_positions_trades.push({qty:o.qty,scrip:o.scrip,expiry:p,entry:o.tradedPrice,exit:0,addToOrders:!1,selected:!0,selectedActual:!1,rollstrike:null,rollstrike_new:o.scrip,roll_qty:this.appService.getQtyUptoFreezeLimit(this.instru,o.qty,this.inlineOC_qty),alertPrice:null,alertStatus:""})}if(o.instru===this.instru&&o.status==="TRIGGER PENDING"&&o.triggerPrice!==0){let a=new Date(o.expiry),l=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],c=("0"+a.getDate()).slice(-2),u=a.getMonth(),d=l[u],h=a.getFullYear(),p=c+d+h;this.sl_trades.push({qty:o.qty,scrip:o.scrip,expiry:p,price:o.tradedPrice,trigger_price:o.triggerPrice,order_id:o.id})}}),console.log("this.curr_positions_trades before adding CF",this.curr_positions_trades),this.use_cf){let o=JSON.parse(localStorage.getItem("cf_curr_positions"+this.currLoadNum));o&&o.trades&&o.trades.forEach(a=>{this.curr_positions_trades.push({qty:a.qty,scrip:a.scrip,expiry:a.expiry,entry:a.entry,exit:a.exit,addToOrders:!1,selected:!0,selectedActual:!1,rollstrike:null,rollstrike_new:a.scrip,roll_qty:this.appService.getQtyUptoFreezeLimit(this.instru,a.qty,this.inlineOC_qty),alertPrice:null,alertStatus:""})}),console.log("this.curr_positions_trades after adding CF",this.curr_positions_trades)}this.mergePositions(),this.sortPositions(),console.log("this.curr_positions_trades after merge",this.curr_positions_trades),console.log("prev_positions",e),this.getPayoff(),this.getMargin(),this.crossCheckPositions(),this.copyProperties(e),this.sortSLLPositions(),this.updateOCValuesForSLL()}copyProperties(e){console.log("prev pos",e),this.curr_positions_trades&&this.curr_positions_trades.forEach(i=>{if(i.exit===0){let r=this.findInPrevious(e,i.scrip);if(console.log("chart component found",r),r&&(r.rollstrike_new&&(i.rollstrike_new=r.rollstrike_new),r.alertPrice&&(i.alertPrice=r.alertPrice),i.qty===r.qty?i.roll_qty=r.roll_qty:i.roll_qty=this.appService.getQtyUptoFreezeLimit(this.instru,i.qty,this.inlineOC_qty)),!this.show_algo&&!i.alertPrice)for(let s=0;s<f.orders.length;s++){let o=f.orders[s];if(o.scrip===i.scrip&&o.status==="COMPLETE"&&o.qty<0){i.alertPrice=o.tradedPrice+o.tradedPrice*.3;break}}}})}findInPrevious(e,i){let r=null;if(e)return e.forEach(s=>{if(s.exit===0&&s.scrip===i){r=s;return}}),r}saveMTMToLocal(){let e=new Date,i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),r=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+e.toTimeString().split(" ")[0],s=this.getStrategyPnL(1),o=JSON.parse(localStorage.getItem("mtm_1_"+i));console.log("mtm 1",this.algo_mtm),o||(o=[]),o.push([r,s]),localStorage.setItem("mtm_1_"+i,JSON.stringify(o))}startAlgo(){if(f.enableAlgo=!0,this.enableAlgo=!0,this.loadAlgoPosFromLocal(),f.expiryDateToTrade){this.loadAlgoStrategySlot(),this.recreateAlgoPos(),setTimeout(()=>{this.entryScheduler(),this.algoScheduler()},2e3);let e=setInterval(()=>{this.isMarketClosed()?clearInterval(e):this.saveAlgoMTM()},3e4)}else f.instruToTrade="",this.addToAlgoLog("No instrument found to trade today")}stopAlgo(){f.enableAlgo=!1,this.enableAlgo=!1}loadAlgoPosFromLocal(){let e=new Date,i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),r=JSON.parse(localStorage.getItem("algo_log_"+i));r&&(this.addToAlgoLog("Loading algoLog from localStorage"),this.algoLog=r,console.log("algo log",this.algoLog,r));let s=JSON.parse(localStorage.getItem("algo_slabEntered_"+i));s&&(this.addToAlgoLog("Loading slabEntered from localStorage"),f.slabEntered=s,console.log("algo slabEntered",f.slabEntered,s));let o=JSON.parse(localStorage.getItem("algo_slabOrderId_"+i));o&&(this.addToAlgoLog("Loading slabOrderId from localStorage"),f.slabOrderId=o,console.log("algo slabOrderId",f.slabOrderId,o));let a=JSON.parse(localStorage.getItem("algo_slabStrikes_"+i));a&&(this.addToAlgoLog("Loading slabStrikes from localStorage"),f.slabStrikes=a,console.log("algo slabStrikes",f.slabStrikes,a));let l=JSON.parse(localStorage.getItem("algo_slabCurrEntryPrice_"+i));l&&(this.addToAlgoLog("Loading slabCurrEntryPrice from localStorage"),f.slabCurrEntryPrice=l,console.log("algo slabCurrEntryPrice",f.slabCurrEntryPrice,l))}saveAlgoPosToLocal(){let e=new Date,i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2);localStorage.setItem("algo_log_"+i,JSON.stringify(this.algoLog)),localStorage.setItem("algo_slabEntered_"+i,JSON.stringify(f.slabEntered)),localStorage.setItem("algo_slabOrderId_"+i,JSON.stringify(f.slabOrderId)),localStorage.setItem("algo_slabStrikes_"+i,JSON.stringify(f.slabStrikes)),localStorage.setItem("algo_slabCurrEntryPrice_"+i,JSON.stringify(f.slabCurrEntryPrice))}addToAlgoLog(e){this.algoLog+=new Date().toLocaleTimeString()+" - "+e+`\r
`,console.log("ALGO "+new Date().toLocaleTimeString()+" - "+e)}rollAlgoStrikeKeyUp(e,i,r){console.log(e),e.key==="ArrowUp"?(r==="sl"&&(i.sl_strike=this.changeAlgoStrike(this.strikeStepValue,i.sl_strike,i.scrip,r)),r==="rollin"&&(i.rollin_strike=this.changeAlgoStrike(this.strikeStepValue,i.rollin_strike,i.scrip,r))):e.key==="ArrowDown"&&(r==="sl"&&(i.sl_strike=this.changeAlgoStrike(-this.strikeStepValue,i.sl_strike,i.scrip,r)),r==="rollin"&&(i.rollin_strike=this.changeAlgoStrike(-this.strikeStepValue,i.rollin_strike,i.scrip,r)))}changeAlgoStrike(e,i,r,s){let o=i,a="";o.includes("CE")&&(a="CE"),o.includes("PE")&&(a="PE"),o=Number(o.slice(0,-2));let l=Number(r.slice(0,-2)),c=o+e;return a==="CE"&&(s==="sl"&&c<l&&(c=l),s==="rollin"&&c>l&&(c=l)),a==="PE"&&(s==="sl"&&c>l&&(c=l),s==="rollin"&&c<l&&(c=l)),c+a}isMarketClosed(){let e=new Date,i=new Date;return i.setHours(15),i.setMinutes(30),i.setSeconds(0,0),e.getTime()>=i.getTime()}isSystemOkay(){return!!(this.enableAlgo&&this.zerodhaService.isSocketConnected())}findInstruToTrade(){if(f.instruToTrade="BANKNIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.bnfExpiries),f.expiryDateToTrade||(f.instruToTrade="FINNIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.finniftyExpiries)),f.expiryDateToTrade||(f.instruToTrade="SENSEX",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.sensexExpiries)),f.expiryDateToTrade||(f.instruToTrade="NIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.niftyExpiries)),f.expiryDateToTrade||(f.instruToTrade="MIDCPNIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.midcapExpiries)),f.expiryDateToTrade||(f.instruToTrade="BANKEX",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.bankexExpiries)),f.expiryDateToTrade){let e=""+f.expiryDateToTrade.getFullYear()+"-"+("0"+(f.expiryDateToTrade.getMonth()+1)).slice(-2)+"-"+("0"+f.expiryDateToTrade.getDate()).slice(-2);f.expiryDateToTrade=e}else f.instruToTrade="",this.addToAlgoLog("No instrument found to trade today");this.instruToTrade=f.instruToTrade,this.expiryDateToTrade=f.expiryDateToTrade}loadAlgoStrategySlot(){this.instru=f.instruToTrade,this.expiryDate=f.expiryDateToTrade,this.reloadPayoffData(f.algoStrategyNum),this.loadOptionChain()}entryScheduler(){console.log("ALGO "+new Date().toLocaleTimeString()+" - entryInterval starting now"),this.entryInterval=setInterval(()=>{if(this.isMarketClosed()){this.addToAlgoLog("Market closed. Stopping entryInterval"),clearInterval(this.entryInterval);return}if(!this.isSystemOkay()){console.log("ALGO "+new Date().toLocaleTimeString()+" - entryInterval - System not okay. Skipping...");return}let e=new Date,i=f.slabEntryTime[f.instruToTrade];for(let[o,a]of Object.entries(i)){let c=String(a).split(":"),u=Number(c[0]),d=Number(c[1]),h=new Date;if(h.setHours(u),h.setMinutes(d),h.setSeconds(0,0),e.getTime()>=h.getTime()&&f.slabEntered[f.instruToTrade][o]==!1){let p=f.strike_diff[f.instruToTrade],_=this.mapService.getScripLTP(null,null,f.instruToTrade,null);_=Math.round(_/p)*p;let A=f.slabEntryDist[f.instruToTrade][o],v=_+A,b=v+"CE",x=_-A,N=x+"PE",T=this.getLTP(f.expiryDateToTrade,b,f.instruToTrade),k=this.getLTP(f.expiryDateToTrade,N,f.instruToTrade);T&&k?this.algoSimulated?(this.addToAlgoLog("Enter - Slab "+o+" - "+b+" - "+f.slabQty[f.instruToTrade][o]+" - "+T+" - marked for time "+u+":"+d),this.addToAlgoLog("Enter - Slab "+o+" - "+N+" - "+f.slabQty[f.instruToTrade][o]+" - "+k+" - marked for time "+u+":"+d),f.slabStrikes[f.instruToTrade][o].CE=v,f.slabStrikes[f.instruToTrade][o].PE=x,f.slabEntered[f.instruToTrade][o]=!0,f.slabCurrEntryPrice[f.instruToTrade][o].CE=T,f.slabCurrEntryPrice[f.instruToTrade][o].PE=k,this.addPosition(f.slabQty[f.instruToTrade][o],b,T,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][o],N,k,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1)):(this.executeAlgoOrder(o,b,null,"CE"),this.executeAlgoOrder(o,N,null,"PE"),this.addToAlgoLog("Enter - Slab "+o+" - "+b+" - "+f.slabQty[f.instruToTrade][o]+" - marked for time "+u+":"+d),this.addToAlgoLog("Enter - Slab "+o+" - "+N+" - "+f.slabQty[f.instruToTrade][o]+" - marked for time "+u+":"+d)):console.log("ALGO "+new Date().toLocaleTimeString()+" - LTPs not found for entering algo",b,T,N,k)}}let r=!0,s=f.slabEntered[f.instruToTrade];for(let[o,a]of Object.entries(s))a==!1&&(r=!1);if(r){this.addToAlgoLog("All Slabs entered. Stopping entryInterval"),clearInterval(this.entryInterval);return}},1e3)}isMinDist(e){e=Number(e);let i=f.strike_diff[f.instruToTrade],r=this.mapService.getScripLTP(null,null,f.instruToTrade,null);r=Math.round(r/i)*i;let s=new Date,o=f.minDistTillTime[f.instruToTrade],a=0;for(let[l,c]of Object.entries(o)){let d=String(l).split(":"),h=Number(d[0]),p=Number(d[1]),_=new Date;if(_.setHours(h),_.setMinutes(p),_.setSeconds(0,0),s.getTime()<=_.getTime()){a=Number(c);break}}return Math.abs(r-e)>=a}sortAlgoPositions(){this.algo_pos.sort((e,i)=>{let r=e.scrip.slice(0,-2),s=i.scrip.slice(0,-2);return r===s&&e.scrip.includes("CE")&&i.scrip.includes("PE")?-1:r===s&&e.scrip.includes("PE")&&i.scrip.includes("CE")?1:this.compareForSorting(e.scrip,i.scrip)})}getAlgoPosLTP(e){return this.getLTP(f.expiryDateToTrade,e,f.instruToTrade)}recreateAlgoPos(){let e=this.algo_pos.map(r=>Object.assign({},r));console.log("algo copy",e,this.algo_pos),this.algo_pos=[];let i=f.slabStrikes[f.instruToTrade];for(let[r,s]of Object.entries(i)){let o=f.slabSL[f.instruToTrade][r],a=f.slabRollIn[f.instruToTrade][r],l=f.slabQty[f.instruToTrade][r],c="",u="";if(!this.algoSimulated){let p=!1,_=e.find(b=>b.slab==Number(r)&&b.type=="CE");if(_&&_.orderId!==f.slabOrderId[f.instruToTrade][r].CE&&_.scrip==s.CE+"CE"&&(p=!0,f.slabOrderId[f.instruToTrade][r].CE=_.orderId),(p||s.CE==""||!f.slabCurrEntryPrice[f.instruToTrade][r].CE)&&f.slabOrderId[f.instruToTrade][r].CE){let b=f.orders.find(x=>x.id===f.slabOrderId[f.instruToTrade][r].CE);b&&(f.slabStrikes[f.instruToTrade][r].CE=this.mapService.parseScrip(b.scrip).scrip,c=b.status,b.status==="COMPLETE"&&(f.slabCurrEntryPrice[f.instruToTrade][r].CE=b.tradedPrice))}let A=!1,v=e.find(b=>b.slab==Number(r)&&b.type=="PE");if(v&&v.orderId!==f.slabOrderId[f.instruToTrade][r].PE&&v.scrip==s.PE+"PE"&&(A=!0,f.slabOrderId[f.instruToTrade][r].PE=v.orderId),(A||s.PE==""||!f.slabCurrEntryPrice[f.instruToTrade][r].PE)&&f.slabOrderId[f.instruToTrade][r].PE){let b=f.orders.find(x=>x.id===f.slabOrderId[f.instruToTrade][r].PE);b&&(f.slabStrikes[f.instruToTrade][r].PE=this.mapService.parseScrip(b.scrip).scrip,u=b.status,b.status==="COMPLETE"&&(f.slabCurrEntryPrice[f.instruToTrade][r].PE=b.tradedPrice))}}let d=s.CE;if(d!==""){let p=f.slabCurrEntryPrice[f.instruToTrade][r].CE;p=Math.round((p+.001)*100)/100;let _=null,A=null,v=null,b=null,x=e.find(T=>T.slab==Number(r)&&T.type=="CE");x&&x.scrip==s.CE+"CE"?(_=x.sl,A=x.rollin,v=x.sl_strike.slice(0,-2),b=x.rollin_strike.slice(0,-2)):p&&(_=p+p*o,_=Math.round((_+.001)*100)/100,A=p-p*a,A=Math.round((A+.001)*100)/100,v=Number(d)+Number(f.strike_diff[f.instruToTrade]*f.rolloutStrikeMultiple),b=Number(d)-Number(f.strike_diff[f.instruToTrade]));let N=this.createAlgoPos(r,"CE",l,p,d+"CE",_,v+"CE",A,b+"CE",f.slabOrderId[f.instruToTrade][r].CE,c);this.algo_pos.push(N)}let h=s.PE;if(h!==""){let p=f.slabCurrEntryPrice[f.instruToTrade][r].PE;p=Math.round((p+.001)*100)/100;let _=null,A=null,v=null,b=null,x=e.find(T=>T.slab==Number(r)&&T.type=="PE");x&&x.scrip==s.PE+"PE"?(_=x.sl,A=x.rollin,v=x.sl_strike.slice(0,-2),b=x.rollin_strike.slice(0,-2)):p&&(_=p+p*o,_=Math.round((_+.001)*100)/100,A=p-p*a,A=Math.round((A+.001)*100)/100,v=Number(h)-Number(f.strike_diff[f.instruToTrade]*f.rolloutStrikeMultiple),b=Number(h)+Number(f.strike_diff[f.instruToTrade]));let N=this.createAlgoPos(r,"PE",l,p,h+"PE",_,v+"PE",A,b+"PE",f.slabOrderId[f.instruToTrade][r].PE,u);this.algo_pos.push(N)}}this.sortAlgoPositions(),this.saveAlgoPosToLocal()}createAlgoPos(e,i,r,s,o,a,l,c,u,d,h){let p=new Pg;return p.slab=e,p.type=i,p.qty=r,p.entry=s,p.scrip=o,p.sl=a,p.sl_strike=l,p.rollin=c,p.rollin_strike=u,p.orderId=d,p.orderStatus=h,p}saveAlgoMTM(){let e=new Date,i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),r=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+e.toTimeString().split(" ")[0],s=this.getStrategyPnL(f.algoStrategyNum),o=JSON.parse(localStorage.getItem("algo_mtm_"+i));console.log("algo mtm",this.algo_mtm),o||(o=[]),o.push([r,s]),localStorage.setItem("algo_mtm_"+i,JSON.stringify(o))}executeAlgoOrder(e,i,r,s){console.log("executeAlgoOrder",e,i,r,s);let o={instru:f.instruToTrade,expiry_date:f.expiryDateToTrade,curr_qty:f.slabQty[f.instruToTrade][e],curr_scrip:i,new_scrip:r};this.place_roll_orders(o,!0,!1,null,null,"NRML",this.tagSearch,0,f.slabOrderId[f.instruToTrade][e][s])}getSLCount(e){let i=f.slabSLCounter[f.instruToTrade][e.slab][e.type];return i===0?"":i}getRollInCount(e){let i=f.slabRollInCounter[f.instruToTrade][e.slab][e.type];return i===0?"":i}getAlgoOrderId(e){let i=f.orders.find(r=>r.id===f.slabOrderId[f.instruToTrade][e.slab][e.type]);return i?i.id:""}getAlgoOrderStatus(e){let i=f.orders.find(r=>r.id===f.slabOrderId[f.instruToTrade][e.slab][e.type]);return i?i.id:""}algoScheduler(){console.log("ALGO "+new Date().toLocaleTimeString()+" - algoInterval starting now"),this.algoInterval=setInterval(()=>{if(this.isMarketClosed()){this.addToAlgoLog("Market closed. Stopping algoInterval"),clearInterval(this.algoInterval);return}if(!this.isSystemOkay()){console.log("ALGO "+new Date().toLocaleTimeString()+" - algoInterval - System not okay. Skipping...");return}let e=f.slabEntered[f.instruToTrade];for(let[i,r]of Object.entries(e))if(r==!0){let s=this.algo_pos.find(a=>a.slab==Number(i)&&a.type=="CE");if(s){let a=s.scrip.slice(0,-2),l=s.entry;if(a&&l){let c=this.getLTP(f.expiryDateToTrade,a+"CE",f.instruToTrade),u=s.sl,d=s.rollin;if(c>=u){let h=f.slabSLCounter[f.instruToTrade][i].CE;if(h>=f.secsToWaitForSL){f.slabSLCounter[f.instruToTrade][i].CE=0;let p=s.sl_strike.slice(0,-2),_=p+"CE";if(this.algoSimulated){let A=this.getLTP(f.expiryDateToTrade,_,f.instruToTrade);f.slabStrikes[f.instruToTrade][i].CE=p,f.slabCurrEntryPrice[f.instruToTrade][i].CE=A,this.addPosition(-f.slabQty[f.instruToTrade][i],a+"CE",c,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][i],_,A,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"CE - "+f.slabQty[f.instruToTrade][i]+" - "+c),this.addToAlgoLog("Rollout - Slab "+i+" - "+_+" - "+f.slabQty[f.instruToTrade][i]+" - "+A)}else f.slabStrikes[f.instruToTrade][i].CE="",f.slabCurrEntryPrice[f.instruToTrade][i].CE=null,this.executeAlgoOrder(i,a+"CE",_,"CE"),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"CE - "+f.slabQty[f.instruToTrade][i]),this.addToAlgoLog("Rollout - Slab "+i+" - "+_+" - "+f.slabQty[f.instruToTrade][i])}else f.slabSLCounter[f.instruToTrade][i].CE=h+1}else f.slabSLCounter[f.instruToTrade][i].CE=0;if(c<=d||c<1){let h=f.slabRollInCounter[f.instruToTrade][i].CE;if(h>=f.secsToWaitForSL){f.slabRollInCounter[f.instruToTrade][i].CE=0;let p=s.rollin_strike.slice(0,-2);if(this.isMinDist(p)){let _=p+"CE";if(this.algoSimulated){let A=this.getLTP(f.expiryDateToTrade,_,f.instruToTrade);f.slabStrikes[f.instruToTrade][i].CE=p,f.slabCurrEntryPrice[f.instruToTrade][i].CE=A,this.addPosition(-f.slabQty[f.instruToTrade][i],a+"CE",c,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][i],_,A,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"CE - "+f.slabQty[f.instruToTrade][i]+" - "+c),this.addToAlgoLog("Rollin - Slab "+i+" - "+_+" - "+f.slabQty[f.instruToTrade][i]+" - "+A)}else f.slabStrikes[f.instruToTrade][i].CE="",f.slabCurrEntryPrice[f.instruToTrade][i].CE=null,this.executeAlgoOrder(i,a+"CE",_,"CE"),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"CE - "+f.slabQty[f.instruToTrade][i]),this.addToAlgoLog("Rollin - Slab "+i+" - "+_+" - "+f.slabQty[f.instruToTrade][i])}else console.log("ALGO "+new Date().toLocaleTimeString()+" -  Cannot Roll In CE due to min. distance",i)}else f.slabRollInCounter[f.instruToTrade][i].CE=h+1}else f.slabRollInCounter[f.instruToTrade][i].CE=0}}let o=this.algo_pos.find(a=>a.slab==Number(i)&&a.type=="PE");if(o){let a=o.scrip.slice(0,-2),l=o.entry;if(a&&l){let c=this.getLTP(f.expiryDateToTrade,a+"PE",f.instruToTrade),u=o.sl,d=o.rollin;if(c>=u){let h=f.slabSLCounter[f.instruToTrade][i].PE;if(h>=f.secsToWaitForSL){f.slabSLCounter[f.instruToTrade][i].PE=0;let p=o.sl_strike.slice(0,-2),_=p+"PE";if(this.algoSimulated){let A=this.getLTP(f.expiryDateToTrade,_,f.instruToTrade);f.slabStrikes[f.instruToTrade][i].PE=p,f.slabCurrEntryPrice[f.instruToTrade][i].PE=A,this.addPosition(-f.slabQty[f.instruToTrade][i],a+"PE",c,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][i],_,A,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"PE - "+f.slabQty[f.instruToTrade][i]+" - "+c),this.addToAlgoLog("Rollout - Slab "+i+" - "+_+" - "+f.slabQty[f.instruToTrade][i]+" - "+A)}else f.slabStrikes[f.instruToTrade][i].PE="",f.slabCurrEntryPrice[f.instruToTrade][i].PE=null,this.executeAlgoOrder(i,a+"PE",_,"PE"),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"PE - "+f.slabQty[f.instruToTrade][i]),this.addToAlgoLog("Rollout - Slab "+i+" - "+_+" - "+f.slabQty[f.instruToTrade][i])}else f.slabSLCounter[f.instruToTrade][i].PE=h+1}else f.slabSLCounter[f.instruToTrade][i].PE=0;if(c<=d||c<1){let h=f.slabRollInCounter[f.instruToTrade][i].PE;if(h>=f.secsToWaitForSL){f.slabRollInCounter[f.instruToTrade][i].PE=0;let p=o.rollin_strike.slice(0,-2);if(this.isMinDist(p)){let _=p+"PE";if(this.algoSimulated){let A=this.getLTP(f.expiryDateToTrade,_,f.instruToTrade);f.slabStrikes[f.instruToTrade][i].PE=p,f.slabCurrEntryPrice[f.instruToTrade][i].PE=A,this.addPosition(-f.slabQty[f.instruToTrade][i],a+"PE",c,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][i],_,A,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"PE - "+f.slabQty[f.instruToTrade][i]+" - "+c),this.addToAlgoLog("Rollin - Slab "+i+" - "+_+" - "+f.slabQty[f.instruToTrade][i]+" - "+A)}else f.slabStrikes[f.instruToTrade][i].PE="",f.slabCurrEntryPrice[f.instruToTrade][i].PE=null,this.executeAlgoOrder(i,a+"PE",_,"PE"),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"PE - "+f.slabQty[f.instruToTrade][i]),this.addToAlgoLog("Rollin - Slab "+i+" - "+_+" - "+f.slabQty[f.instruToTrade][i])}else console.log("ALGO "+new Date().toLocaleTimeString()+" -  Cannot Roll In PE due to min. distance",i)}else f.slabRollInCounter[f.instruToTrade][i].PE=h+1}else f.slabRollInCounter[f.instruToTrade][i].PE=0}}}},1e3)}algoSchedule2(){console.log("ALGO "+new Date().toLocaleTimeString()+" - algoInterval starting now"),this.algoInterval=setInterval(()=>{if(this.isMarketClosed()){this.addToAlgoLog("Market closed. Stopping algoInterval"),clearInterval(this.algoInterval);return}if(!this.isSystemOkay()){console.log("ALGO "+new Date().toLocaleTimeString()+" - algoInterval - System not okay. Skipping...");return}let e=f.slabEntered[f.instruToTrade];for(let[i,r]of Object.entries(e))if(r==!0){let s=f.slabSL[f.instruToTrade][i],o=f.slabRollIn[f.instruToTrade][i],a=f.slabStrikes[f.instruToTrade][i].CE,l=f.slabCurrEntryPrice[f.instruToTrade][i].CE;if(a&&l){let d=this.getLTP(f.expiryDateToTrade,a+"CE",f.instruToTrade),h=l+l*s,p=l-l*o;if(d>=h){let _=f.slabSLCounter[f.instruToTrade][i].CE;if(console.log("ALGO "+new Date().toLocaleTimeString()+" -  Counter-SL CE: ",i,d,h,_),_>=f.secsToWaitForSL){f.slabSLCounter[f.instruToTrade][i].CE=0;let A=a+f.strike_diff[f.instruToTrade]*f.rolloutStrikeMultiple,v=A+"CE";if(this.algoSimulated){let b=this.getLTP(f.expiryDateToTrade,v,f.instruToTrade);f.slabStrikes[f.instruToTrade][i].CE=A,f.slabCurrEntryPrice[f.instruToTrade][i].CE=b,this.addPosition(-f.slabQty[f.instruToTrade][i],a+"CE",d,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][i],v,b,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"CE - "+f.slabQty[f.instruToTrade][i]+" - "+d),this.addToAlgoLog("Rollout - Slab "+i+" - "+v+" - "+f.slabQty[f.instruToTrade][i]+" - "+b)}else f.slabStrikes[f.instruToTrade][i].CE="",f.slabCurrEntryPrice[f.instruToTrade][i].CE=null,this.executeAlgoOrder(i,a+"CE",v,"CE"),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"CE - "+f.slabQty[f.instruToTrade][i]),this.addToAlgoLog("Rollout - Slab "+i+" - "+v+" - "+f.slabQty[f.instruToTrade][i])}else f.slabSLCounter[f.instruToTrade][i].CE=_+1}else f.slabSLCounter[f.instruToTrade][i].CE=0;if(d<=p||d<1){let _=f.slabRollInCounter[f.instruToTrade][i].CE;if(console.log("ALGO "+new Date().toLocaleTimeString()+" -  Counter-RI CE: ",i,d,p,_),_>=f.secsToWaitForSL){f.slabRollInCounter[f.instruToTrade][i].CE=0;let A=a-f.strike_diff[f.instruToTrade];if(this.isMinDist(A)){let v=A+"CE";if(this.algoSimulated){let b=this.getLTP(f.expiryDateToTrade,v,f.instruToTrade);f.slabStrikes[f.instruToTrade][i].CE=A,f.slabCurrEntryPrice[f.instruToTrade][i].CE=b,this.addPosition(-f.slabQty[f.instruToTrade][i],a+"CE",d,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][i],v,b,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"CE - "+f.slabQty[f.instruToTrade][i]+" - "+d),this.addToAlgoLog("Rollin - Slab "+i+" - "+v+" - "+f.slabQty[f.instruToTrade][i]+" - "+b)}else f.slabStrikes[f.instruToTrade][i].CE="",f.slabCurrEntryPrice[f.instruToTrade][i].CE=null,this.executeAlgoOrder(i,a+"CE",v,"CE"),this.addToAlgoLog("Exit - Slab "+i+" - "+a+"CE - "+f.slabQty[f.instruToTrade][i]),this.addToAlgoLog("Rollin - Slab "+i+" - "+v+" - "+f.slabQty[f.instruToTrade][i])}else console.log("ALGO "+new Date().toLocaleTimeString()+" -  Cannot Roll In CE due to min. distance",i)}else f.slabRollInCounter[f.instruToTrade][i].CE=_+1}else f.slabRollInCounter[f.instruToTrade][i].CE=0}let c=f.slabStrikes[f.instruToTrade][i].PE,u=f.slabCurrEntryPrice[f.instruToTrade][i].PE;if(c&&u){let d=this.getLTP(f.expiryDateToTrade,c+"PE",f.instruToTrade),h=u+u*s,p=u-u*o;if(d>=h){let _=f.slabSLCounter[f.instruToTrade][i].PE;if(console.log("ALGO "+new Date().toLocaleTimeString()+" -  Counter-SL PE: ",i,d,h,_),_>=f.secsToWaitForSL){f.slabSLCounter[f.instruToTrade][i].PE=0;let A=c-f.strike_diff[f.instruToTrade]*f.rolloutStrikeMultiple,v=A+"PE";if(this.algoSimulated){let b=this.getLTP(f.expiryDateToTrade,v,f.instruToTrade);f.slabStrikes[f.instruToTrade][i].PE=A,f.slabCurrEntryPrice[f.instruToTrade][i].PE=b,this.addPosition(-f.slabQty[f.instruToTrade][i],c+"PE",d,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][i],v,b,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+i+" - "+c+"PE - "+f.slabQty[f.instruToTrade][i]+" - "+d),this.addToAlgoLog("Rollout - Slab "+i+" - "+v+" - "+f.slabQty[f.instruToTrade][i]+" - "+b)}else f.slabStrikes[f.instruToTrade][i].PE="",f.slabCurrEntryPrice[f.instruToTrade][i].PE=null,this.executeAlgoOrder(i,c+"PE",v,"PE"),this.addToAlgoLog("Exit - Slab "+i+" - "+c+"PE - "+f.slabQty[f.instruToTrade][i]),this.addToAlgoLog("Rollout - Slab "+i+" - "+v+" - "+f.slabQty[f.instruToTrade][i])}else f.slabSLCounter[f.instruToTrade][i].PE=_+1}else f.slabSLCounter[f.instruToTrade][i].PE=0;if(d<=p||d<1){let _=f.slabRollInCounter[f.instruToTrade][i].PE;if(console.log("ALGO "+new Date().toLocaleTimeString()+" -  Counter-RI PE: ",i,d,p,_),_>=f.secsToWaitForSL){f.slabRollInCounter[f.instruToTrade][i].PE=0;let A=c+f.strike_diff[f.instruToTrade];if(this.isMinDist(A)){let v=A+"PE";if(this.algoSimulated){let b=this.getLTP(f.expiryDateToTrade,v,f.instruToTrade);f.slabStrikes[f.instruToTrade][i].PE=A,f.slabCurrEntryPrice[f.instruToTrade][i].PE=b,this.addPosition(-f.slabQty[f.instruToTrade][i],c+"PE",d,f.expiryDateToTrade),this.addPosition(f.slabQty[f.instruToTrade][i],v,b,f.expiryDateToTrade),this.recreateAlgoPos(),this.savePositions(f.algoStrategyNum,!1),this.addToAlgoLog("Exit - Slab "+i+" - "+c+"PE - "+f.slabQty[f.instruToTrade][i]+" - "+d),this.addToAlgoLog("Rollin - Slab "+i+" - "+v+" - "+f.slabQty[f.instruToTrade][i]+" - "+b)}else f.slabStrikes[f.instruToTrade][i].PE="",f.slabCurrEntryPrice[f.instruToTrade][i].PE=null,this.executeAlgoOrder(i,c+"PE",v,"PE"),this.addToAlgoLog("Exit - Slab "+i+" - "+c+"PE - "+f.slabQty[f.instruToTrade][i]),this.addToAlgoLog("Rollin - Slab "+i+" - "+v+" - "+f.slabQty[f.instruToTrade][i])}else console.log("ALGO "+new Date().toLocaleTimeString()+" -  Cannot Roll In PE due to min. distance",i)}else f.slabRollInCounter[f.instruToTrade][i].PE=_+1}else f.slabRollInCounter[f.instruToTrade][i].PE=0}}},1e3)}startAlgoSS(){if(this.addToAlgoSSLog("Starting"),f.enableAlgo=!0,this.enableAlgo=!0,f.expiryDateToTrade){this.loadOptionChain(f.instruToTrade,f.expiryDateToTrade);let e=setInterval(()=>{this.isMarketClosed()||!this.enableAlgo?(this.addToAlgoSSLog("Stopping"),this.stopAlgoSS(),clearInterval(e)):f.miscEvent$.next("refreshAll")},1e4),i=setInterval(()=>{this.isMarketClosed()?clearInterval(i):this.saveAlgoMTMSS()},3e4)}else f.instruToTrade=""}stopAlgoSS(){this.addToAlgoSSLog("Stop triggered"),f.enableAlgo=!1,this.enableAlgo=!1}findInstruToTradeSS(){if(f.instruToTrade="BANKNIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.bnfExpiries),f.expiryDateToTrade||(f.instruToTrade="FINNIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.finniftyExpiries)),f.expiryDateToTrade||(f.instruToTrade="SENSEX",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.sensexExpiries)),f.expiryDateToTrade||(f.instruToTrade="NIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.niftyExpiries)),f.expiryDateToTrade||(f.instruToTrade="MIDCPNIFTY",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.midcapExpiries)),f.expiryDateToTrade||(f.instruToTrade="BANKEX",f.expiryDateToTrade=this.mapService.findTodayExpiry(f.bankexExpiries)),f.expiryDateToTrade){let e=""+f.expiryDateToTrade.getFullYear()+"-"+("0"+(f.expiryDateToTrade.getMonth()+1)).slice(-2)+"-"+("0"+f.expiryDateToTrade.getDate()).slice(-2);f.expiryDateToTrade=e}else f.instruToTrade="";this.instruToTrade=f.instruToTrade,this.expiryDateToTrade=f.expiryDateToTrade,this.algoSS_qtyStep=f.qtyStep[this.instruToTrade]}saveAlgoMTMSS(){let e=new Date,i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),r=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+e.toTimeString().split(" ")[0],s=this.getStrategyPnL(f.algoStrategyNum),o=JSON.parse(localStorage.getItem("algo_mtm_"+i));console.log("algo mtm",this.algo_mtm),o||(o=[]),o.push([r,s]),localStorage.setItem("algo_mtm_"+i,JSON.stringify(o))}refreshAlgoSSPositions(){this.addToAlgoSSLog("-------------------- Refreshing positions --------------------");let e=f.algoTag,i=this.algoSSIncludeGUIDs,r=this.algoSSExcludeGUIDs;this.algoSS_positions=[],this.algoSS_sl_orders=[],this.algoSS_positions_UI=[],f.orders.forEach(s=>{if(s.instru===f.instruToTrade&&(s.tags.includes(e)&&!r.includes(s.guid)||i.includes(s.guid))&&(s.status==="COMPLETE"||s.status==="TRIGGER PENDING")){let o=new Date(s.expiry),a=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],l=("0"+o.getDate()).slice(-2),c=o.getMonth(),u=a[c],d=o.getFullYear(),h=l+u+d;s.status==="COMPLETE"&&this.algoSS_positions.push({qty:s.qty,scrip:s.scrip,expiry:h,entry:s.tradedPrice,triggerPrice:s.triggerPrice,exit:0}),s.status==="TRIGGER PENDING"&&this.algoSS_sl_orders.push({qty:s.qty,scrip:s.scrip,expiry:h,entry:s.tradedPrice,triggerPrice:s.triggerPrice,exit:0})}}),console.log("this.algoSS_sl_orders",this.algoSS_sl_orders),console.log("this.algoSS_positions before merge",this.algoSS_positions),this.mergeAlgoSSPositions(),console.log("this.algoSS_positions_trades after merge",this.algoSS_positions),this.algoSS_positions.forEach(s=>{this.algoSS_positions_UI.push({qty:s.qty,scrip:s.scrip,expiry:s.expiry,entry:s.entry,triggerPrice:s.triggerPrice,exit:s.exit})}),this.algoSS_sl_orders.forEach(s=>{this.algoSS_positions_UI.push({qty:s.qty,scrip:s.scrip,expiry:s.expiry,entry:s.entry,triggerPrice:s.triggerPrice,exit:s.exit})}),this.sortPositionsAlgoSS(),this.analyzeOrdersAlgoSS()}mergeAlgoSSPositions(){let e=new Map,i=new Map;for(let r=0;r<this.algoSS_positions.length;r++){let s=this.algoSS_positions[r],o=s.scrip+" "+s.expiry,a=e.get(o),l=i.get(o);if(s.exit!==0)a||(a=[]),a.push(s),e.set(o,a);else if(!l)i.set(o,s);else if(l.qty==-s.qty)l.exit=s.entry,a||(a=[]),a.push(l),e.set(o,a),i.delete(o);else if(l.qty>0&&s.qty>0||l.qty<0&&s.qty<0)l.entry=(l.entry*l.qty+s.entry*s.qty)/(l.qty+s.qty),l.entry=Math.round((l.entry+1e-5)*1e4)/1e4,l.qty+=s.qty,i.set(o,l);else if(Math.abs(l.qty)>Math.abs(s.qty))l.qty=l.qty+s.qty,i.set(o,l),s.qty=-s.qty,s.exit=s.entry,s.entry=l.entry,a||(a=[]),a.push(s),e.set(o,a);else{let c=l.qty,u=l.entry;l.qty=l.qty+s.qty,l.entry=s.entry,i.set(o,l),s.qty=c,s.exit=s.entry,s.entry=u,a||(a=[]),a.push(s),e.set(o,a)}}console.log("exitedMap algoSS:",e),console.log("mergeMap algoSS:",i),this.algoSS_positions=[];for(let[r,s]of e)s.forEach(o=>{this.algoSS_positions.push({qty:o.qty,scrip:o.scrip,expiry:o.expiry,entry:o.entry,triggerPrice:o.triggerPrice,exit:o.exit})});for(let[r,s]of i)this.algoSS_positions.push({qty:s.qty,scrip:s.scrip,expiry:s.expiry,entry:s.entry,triggerPrice:s.triggerPrice,exit:s.exit})}sortPositionsAlgoSS(){this.algoSS_positions_UI.sort((e,i)=>{if(e.exit!==0&&i.exit!==0)return this.compareForSorting(e.scrip,i.scrip);if(e.exit!==0&&i.exit===0)return-1;if(e.exit===0&&i.exit!==0)return 1;let r=e.scrip.slice(0,-2),s=i.scrip.slice(0,-2);if(r===s&&e.scrip.includes("CE")&&i.scrip.includes("PE"))return-1;if(r===s&&e.scrip.includes("PE")&&i.scrip.includes("CE"))return 1;if(r===s&&(e.scrip.includes("CE")&&i.scrip.includes("CE")||e.scrip.includes("PE")&&i.scrip.includes("PE"))){let o=new Date(e.expiry),a=new Date(i.expiry);return o<a?-1:1}return this.compareForSorting(e.scrip,i.scrip)})}analyzeOrdersAlgoSS(){f.algoSS_CE=null,f.algoSS_CE=new Ld,f.algoSS_PE=null,f.algoSS_PE=new Ld,this.algoSS_positions.forEach(e=>{f.algoSSStrike||(f.algoSSStrike=Number(e.scrip.slice(0,-2))),e.exit===0&&(e.scrip.includes("CE")&&(f.algoSS_CE.pos_open===!0?f.algoSS_CE.multiple_pos_open=!0:f.algoSS_CE.pos_open=!0,f.algoSS_CE.entry||(f.algoSS_CE.entry=Number(e.entry))),e.scrip.includes("PE")&&(f.algoSS_PE.pos_open===!0?f.algoSS_PE.multiple_pos_open=!0:f.algoSS_PE.pos_open=!0,f.algoSS_PE.entry||(f.algoSS_PE.entry=Number(e.entry)))),e.exit!==0&&(e.scrip.includes("CE")&&(f.algoSS_CE.sl_times+=1),e.scrip.includes("PE")&&(f.algoSS_PE.sl_times+=1),e.scrip.includes("CE")&&!f.algoSS_CE.entry&&(e.qty<0?f.algoSS_CE.entry=Number(e.entry):f.algoSS_CE.entry=Number(e.exit)),e.scrip.includes("PE")&&!f.algoSS_PE.entry&&(e.qty<0?f.algoSS_PE.entry=Number(e.entry):f.algoSS_PE.entry=Number(e.exit)))}),this.algoSS_sl_orders.forEach(e=>{f.algoSSStrike||(f.algoSSStrike=Number(e.scrip.slice(0,-2))),e.scrip.includes("CE")&&(e.qty>0&&(f.algoSS_CE.sl_open===!0?f.algoSS_CE.multiple_sl_open=!0:f.algoSS_CE.sl_open=!0),e.qty<0&&(f.algoSS_CE.reentry_open===!0?f.algoSS_CE.reentry_multiple_open=!0:f.algoSS_CE.reentry_open=!0)),e.scrip.includes("PE")&&(e.qty>0&&(f.algoSS_PE.sl_open===!0?f.algoSS_PE.multiple_sl_open=!0:f.algoSS_PE.sl_open=!0),e.qty<0&&(f.algoSS_PE.reentry_open===!0?f.algoSS_PE.reentry_multiple_open=!0:f.algoSS_PE.reentry_open=!0))}),this.doAlgoSS(f.algoSS_CE,"CE"),this.doAlgoSS(f.algoSS_PE,"PE")}doAlgoSS(e,i){console.log("AlgoSS obj - ",e,i);let r=i+" - ";if(r+="Entry: "+e.entry+",",r+=" Pos Open: "+e.pos_open+",",r+=" Re Open: "+e.reentry_open+",",r+=" SL Open: "+e.sl_open+",",r+=" SL Times: "+e.sl_times+",",r+=" Mul Pos Open: "+e.multiple_pos_open+",",r+=" Mul Re Open: "+e.reentry_multiple_open+",",r+=" Mul SL Open: "+e.multiple_sl_open,this.addToAlgoSSLog(r),!e.pos_open&&!e.reentry_open)if(e.sl_times===0){this.addToAlgoSSLog("First time entry");let s=this.algoTimeToEnter.split(":"),o=Number(s[0]),a=Number(s[1]),l=new Date;if(l.getHours()===o&&l.getMinutes()>=a||l.getHours()>o){if(!f.algoSSStrike){let c=null;this.oc_instru==="NIFTY"?c=50:this.oc_instru==="BANKNIFTY"?c=100:this.oc_instru==="FINNIFTY"?c=50:this.oc_instru==="MIDCPNIFTY"?c=25:(this.oc_instru==="SENSEX"||this.oc_instru==="BANKEX")&&(c=100);let u=this.mapService.getScripLTP(null,null,f.instruToTrade,null),d=Math.round(u/c)*c;f.algoSSStrike=d}this.placeAlgoSSOrder(f.algoSSStrike+i,this.algoSSQty)}else this.addToAlgoSSLog("Time not reached")}else if(e.sl_times<this.algoSSMaxSLTimes){this.addToAlgoSSLog("Reentry");let s=Math.ceil(e.entry);this.placeAlgoSSOrder(f.algoSSStrike+i,this.algoSSQty,s-this.algoSSTriggerDifference,s)}else this.addToAlgoSSLog("No action to take - max SLs reached for "+i);else if(e.pos_open&&!e.sl_open){this.addToAlgoSSLog("Set SLL");let s=Math.ceil(e.entry),o=Math.ceil(s+s*this.algoSSSLPerc/100);this.placeAlgoSSOrder(f.algoSSStrike+i,Math.abs(this.algoSSQty),o+this.algoSSTriggerDifference,o)}else this.addToAlgoSSLog("No action to take")}placeAlgoSSOrder(e,i,r=null,s=0){if(console.log("place order",i,e),i!=""&&i!=null&&e){let o={instru:f.instruToTrade,expiry:f.expiryDateToTrade,strike:this.mapService.parseScrip(e).scrip,optionType:this.mapService.parseScrip(e).type},a=this.mapService.getMapKey(o);this.zerodhaService.place_order(a,i,f.broker_auth,r,null,"NRML",f.algoTag,s).subscribe(l=>{console.log("placeAlgoSSOrder response",l),f.requestStatusEvent$.next({status:"secondary",message:"Placed "+e+" "+i})},l=>{console.log("placeAlgoSSOrder error",l);let c="Error (mostly timeout)";l.error&&l.error.message?c=l.error.message:c=l.message,f.requestStatusEvent$.next({status:"danger",message:e+" "+i+" "+c}),this.appService.playAudio("error")})}else console.log("Not valid data to place order")}getAlgoSSPosLTP(e){return this.getLTP(f.expiryDateToTrade,e,f.instruToTrade)}getAlgoSSTotalPnl(){let e=0;return this.algoSS_positions&&this.algoSS_positions.length>0&&this.algoSS_positions.forEach(i=>{if(!(i.exit===0&&i.triggerPrice!==0)){let r=this.getPnL(i,f.instruToTrade,f.expiryDateToTrade);e+=r}}),e=Math.round((e+1e-5)*100)/100,e}saveAlgoSSParams(e){let i=new Date,r=""+i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2);this.algoSSQty>=0&&(this.algoSSQty=-this.algoSSQty);let s={algoTimeToEnter:this.algoTimeToEnter,algoSSQty:this.algoSSQty,algoSSSLPerc:this.algoSSSLPerc,algoSSMaxSLTimes:this.algoSSMaxSLTimes,algoSSTriggerDifference:this.algoSSTriggerDifference,algoSSIncludeGUIDs:this.algoSSIncludeGUIDs,algoSSExcludeGUIDs:this.algoSSExcludeGUIDs};localStorage.setItem("AlgoSSParams_"+r,JSON.stringify(s))}loadAlgoSSParams(){let e=new Date,i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),r=JSON.parse(localStorage.getItem("AlgoSSParams_"+i));r&&(this.algoTimeToEnter=r.algoTimeToEnter,this.algoSSQty=r.algoSSQty,this.algoSSSLPerc=r.algoSSSLPerc,this.algoSSMaxSLTimes=r.algoSSMaxSLTimes,this.algoSSTriggerDifference=r.algoSSTriggerDifference,this.algoSSIncludeGUIDs=r.algoSSIncludeGUIDs,this.algoSSExcludeGUIDs=r.algoSSExcludeGUIDs)}addToAlgoSSLog(e){this.algoLog+=new Date().toLocaleTimeString()+" - "+e+`\r
`,console.log("ALGO SS - "+new Date().toLocaleTimeString()+" - "+e)}test11(){let e=dt("test-container",{width:600,height:400,rightPriceScale:{visible:!0},leftPriceScale:{visible:!0}});e.addSeries(ut,{priceScaleId:"left",color:"#2962FF",lineWidth:2}).setData([{time:{year:2024,month:4,day:1},value:25.5},{time:{year:2024,month:4,day:2},value:26.7},{time:{year:2024,month:4,day:3},value:28.2},{time:{year:2024,month:4,day:4},value:27.5},{time:{year:2024,month:4,day:5},value:29.1}]),e.addSeries(ut,{priceScaleId:"left",color:"#FF5733",lineWidth:2}).setData([{time:{year:2024,month:4,day:1},value:20.3},{time:{year:2024,month:4,day:2},value:21.5},{time:{year:2024,month:4,day:3},value:23},{time:{year:2024,month:4,day:4},value:22.8},{time:{year:2024,month:4,day:5},value:24.4}]),e.addCustomSeries(new kc).setData([{time:"2024-04-01",values:[5,15]},{time:"2024-04-02",values:[8,10]},{time:"2024-04-03",values:[12,18]},{time:"2024-04-04",values:[14,20]},{time:"2024-04-05",values:[16,25]}]),e.timeScale().fitContent()}static \u0275fac=function(i){return new(i||n)(ye(si),ye(Nn),ye(Ue),ye(lo),ye(Lr),ye($m),ye(e3),ye(t3))};static \u0275cmp=ci({type:n,selectors:[["app-chart"]],viewQuery:function(i,r){if(i&1&&Zy(sw,7),i&2){let s;e1(s=t1())&&(r.chart=s.first)}},decls:484,vars:184,consts:[["popContent",""],["fileImportInputExpiry",""],["fileImportInputExpiry2",""],["fileImportInput1",""],["id","accordionPayoff",1,"accordion","mb-2"],[1,"accordion-item"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#payOffSection","aria-expanded","true","aria-controls","payOffSection",1,"accordion-button","fw-bold"],["id","payOffSection","aria-labelledby","headingOne","data-bs-parent","#accordionPayoff",1,"accordion-collapse","collapse","show","p-2"],[1,"chart-all-strategies-pnl","text-center"],[1,"d-inline-block"],[1,"mb-2"],[1,"fw-bold",3,"ngClass"],["placeholder","< Alert Price","type","number",1,"ms-4","me-2","form-control","form-control-sm","strategy_alert_field",3,"ngModelChange","ngModel"],[1,"text-danger"],[1,"d-inline-block","ps-4","pe-4"],[2,"display","flex","justify-content","space-between"],[1,"chart-flex-container"],[1,"chart-positions"],["id","algo-container-old",4,"ngIf"],["id","algo-container"],[1,"d-inline"],[1,"algo_params","d-inline"],["type","button","class","btn btn-outline-primary btn-sm me-2",3,"click",4,"ngIf"],[1,"strategy_instru","form-select","form-select-sm","me-2",2,"width","125px",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Expiry YYYY-MM-DD","id","",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","100px",3,"ngModelChange","ngModel"],["placeholder","Time","id","",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","60px",3,"change","ngModelChange","ngModel"],["placeholder","Qty","title","Quantity (ENTER NEGATIVE ONLY)","id","","type","number",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","80px",3,"change","ngModelChange","step","ngModel"],["placeholder","SL %","title","SL %","id","","type","number",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","70px",3,"change","ngModelChange","ngModel"],["placeholder","Max SL Times","title","Max SL Times","id","","type","number",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","40px",3,"change","ngModelChange","ngModel"],["placeholder","Trigger-Limit Difference","title","Trigger-Limit Difference","id","","type","number",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","40px",3,"change","ngModelChange","ngModel"],["placeholder","Include GUIDs","id","",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","300px",3,"change","ngModelChange","ngModel"],["placeholder","Exclude GUIDs","id","",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","300px",3,"change","ngModelChange","ngModel"],[1,"mt-2"],["readonly","",2,"width","100%","height","300px",3,"ngModelChange","ngModel"],[1,"table","table-sm","table-bordered","shadow","text-center"],[1,"table-light"],["scope","col",1,"width80"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"mt-2","mb-2","fw-bold"],[2,"display","inline-block","width","200px"],[3,"ngClass"],[1,"form-check","form-check-inline","use-hypo-future-class",2,"padding-left","0"],["for","use-range",1,"form-check-label"],["id","use-range","type","number","placeholder","Payoff Range",1,"ms-2","form-control","form-control-sm",2,"width","100px","display","inline-block",3,"ngModelChange","ngModel"],[1,"form-check","form-check-inline","use-hypo-future-class"],["type","checkbox","value","","id","hide-closed",1,"form-check-input",3,"ngModelChange","ngModel"],["for","hide-closed",1,"form-check-label"],["type","checkbox","value","","id","show_t0",1,"form-check-input",3,"ngModelChange","ngModel"],["for","show_t0",1,"form-check-label"],["type","checkbox","value","","id","hide-roll",1,"form-check-input",3,"ngModelChange","ngModel"],["for","hide-roll",1,"form-check-label"],["type","checkbox","value","","id","hide-extra",1,"form-check-input",3,"ngModelChange","ngModel"],["for","hide-extra",1,"form-check-label"],["type","checkbox","value","","id","show-multit0",1,"mt-2","form-check-input",3,"ngModelChange","ngModel"],["for","show-multit0",1,"form-check-label"],["type","text",1,"form-control","form-control-sm","d-inline-block","ms-2",2,"width","50px",3,"ngModelChange","ngModel"],["type","checkbox","value","","id","simulate_strategy",1,"form-check-input",3,"ngModelChange","ngModel"],["for","simulate_strategy",1,"form-check-label"],["type","checkbox","value","","id","showInlineOC",1,"form-check-input",3,"ngModelChange","ngModel"],["for","showInlineOC",1,"form-check-label"],["type","checkbox","value","","id","playAlertSound",1,"form-check-input",3,"ngModelChange","ngModel"],["for","playAlertSound",1,"form-check-label"],["type","checkbox","value","","id","showExtraOptions",1,"form-check-input",3,"ngModelChange","ngModel"],["for","showExtraOptions",1,"form-check-label"],["type","checkbox","value","","id","mfRealTime",1,"form-check-input",3,"ngModelChange","ngModel"],["for","mfRealTime",1,"form-check-label"],[4,"ngIf"],["class","mb-2",4,"ngIf"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"strategy_instru","form-select","form-select-sm","me-2",3,"ngModelChange","ngModel"],["placeholder","YYYY-MM-DD",1,"mb-1","me-3","form-control","form-control-sm","expiryDate-inputs",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-secondary","btn-sm","mb-1","me-2",3,"click"],[1,"form-check","form-check-inline"],["type","checkbox","value","","id","use_cf",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","use_cf",1,"form-check-label"],["type","checkbox","value","","id","saveMTM1",1,"form-check-input",3,"ngModelChange","ngModel"],["for","saveMTM1",1,"form-check-label"],["type","checkbox","value","","id","use_tag",1,"form-check-input","me-1","mt-2",3,"ngModelChange","change","ngModel"],["placeholder","Tag","id","tagSearch",1,"me-2","form-control","form-control-sm","d-inline-block",2,"width","200px",3,"ngModelChange","change","ngModel"],["type","checkbox","value","","id","use_include_guid",1,"form-check-input","me-1","mt-2",3,"ngModelChange","change","ngModel"],["type","text","id","includeGUIDs","placeholder","Include GUIDs",1,"form-control","form-control-sm","d-inline-block","me-2",2,"width","400px",3,"ngModelChange","ngModel"],["type","checkbox","value","","id","use_exclude_guid",1,"form-check-input","me-1","mt-2",3,"ngModelChange","change","ngModel"],["type","text","id","excludeGUIDs","placeholder","Exclude GUIDs",1,"form-control","form-control-sm","d-inline-block",2,"width","400px",3,"ngModelChange","ngModel"],[1,"form-check","form-check-inline","ms-1"],["type","checkbox","value","","id","use_curr_expiry",1,"form-check-input",3,"ngModelChange","ngModel"],["for","use_curr_expiry",1,"form-check-label"],["type","checkbox","value","","id","auto_execute",1,"form-check-input",3,"ngModelChange","ngModel"],["for","auto_execute",1,"form-check-label"],["class","form-check form-check-inline",4,"ngIf"],["class","d-inline",4,"ngIf"],["class","mt-1",4,"ngIf"],["class","table table-sm table-bordered shadow text-center",4,"ngIf"],["class","chart-chart",4,"ngIf"],[2,"display","flex"],[1,"form-check","form-check-inline","use-hypo-future-class","me-2"],["type","checkbox","value","","id","expand_single_charts",1,"form-check-input",3,"change","ngModelChange","ngModel"],["for","expand_single_charts",1,"form-check-label"],[1,"form-select","form-select-sm","d-inline-block","mb-2","me-2",2,"width","120px",3,"ngModelChange","change","ngModel"],["type","checkbox","value","","id","showATPLine",1,"form-check-input",3,"change","ngModelChange","ngModel"],["for","showATPLine",1,"form-check-label"],[2,"display","flex","flex-wrap","wrap"],["id","spot-chart",1,"opt_chart","me-4"],["id","spot-chart2",1,"opt_chart","me-4"],[1,"d-flex"],["id","chart-ce",1,"opt_chart","me-4"],[1,"chart-legend"],[1,"chart-legend-qty"],["id","chart-pe",1,"opt_chart","me-4"],["id","stock-chart",1,"opt_chart"],["id","stock-chart-compare",1,"opt_chart"],[1,"ms-2"],["type","checkbox","value","","id","add_strangle_chart",1,"form-check-input",3,"ngModelChange","ngModel"],["for","add_strangle_chart",1,"form-check-label"],["placeholder","Scrip 1",1,"me-3","form-control","form-control-sm",2,"display","inline-block","width","80px",3,"ngModelChange","ngModel"],["placeholder","Scrip 2",1,"me-3","form-control","form-control-sm",2,"display","inline-block","width","80px",3,"ngModelChange","ngModel"],["class","form-check form-check-inline use-hypo-future-class",4,"ngIf"],["type","button",1,"btn","btn-light","btn-sm","me-2",3,"click"],["class","opt_chart me-4","id","spot-chart-simulate",4,"ngIf"],["id","strangle-chart",1,"opt_chart"],["type","checkbox","value","","id","show_news",1,"form-check-input",3,"ngModelChange","ngModel"],["for","show_news",1,"form-check-label"],["href","https://www.google.com/search?sca_esv=556714279&rlz=1C5CHFA_enIN1013IN1013&sxsrf=AB5stBj127G0qRSDvJgWwiqXPwupGLEmJQ:1692010519401&q=moneycontrol+top+10&tbm=nws&source=univ&tbo=u&sa=X&ved=2ahUKEwjD_duv_tuAAxW9SGwGHWA5BBgQt8YBKAF6BAgNEAY&biw=1728&bih=930&dpr=2","target","_blank","rel","noopener noreferrer",1,"me-2"],["href","https://www.google.com/search?q=bq+prime+all+you+need+to+know&sca_esv=558740822&rlz=1C5CHFA_enIN1013IN1013&biw=1728&bih=930&tbm=nws&sxsrf=AB5stBiwZOAWiIkwVU-a2ny8zymQqmhjEQ%3A1692620043930&ei=C1XjZKi3OIuV-AaN0qyIBg&ved=0ahUKEwjo6NSD3e2AAxWLCt4KHQ0pC2EQ4dUDCA0&uact=5&oq=bq+prime+all+you+need+to+know&gs_lp=Egxnd3Mtd2l6LW5ld3MiHWJxIHByaW1lIGFsbCB5b3UgbmVlZCB0byBrbm93MgUQABiABDIIEAAYigUYhgMyCBAAGIoFGIYDMggQABiKBRiGA0jAC1COCViOCXAAeACQAQCYAXmgAe0BqgEDMC4yuAEDyAEA-AEBwgIHEAAYgAQYCogGAQ&sclient=gws-wiz-news","target","_blank","rel","noopener noreferrer",1,"me-2"],["href","https://www.cnbctv18.com/live-tv/","target","_blank","rel","noopener noreferrer",1,"me-2"],["class","opt-charts-parent-0",4,"ngIf"],[1,"opt-charts-parent"],[1,"form-select","form-select-sm","me-2","charts-inputs",3,"ngModelChange","change","ngModel"],["placeholder","Expiry",1,"charts-inputs","mb-1","me-3","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Call Lower",1,"charts-inputs","mb-1","me-3","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Call Higher",1,"charts-inputs","mb-1","me-3","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Put Lower",1,"charts-inputs","mb-1","me-3","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Put Higher",1,"charts-inputs","mb-1","me-3","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Multiple",1,"charts-inputs","mb-1","me-3","form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"charts-heading",2,"color","green"],[1,"opt_chart_wrapper_parent"],["class","opt_chart_wrapper",3,"click",4,"ngFor","ngForOf"],[2,"margin","0"],[1,"charts-heading",2,"color","red"],["id","accordionAlerts",1,"accordion","mb-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#alertsSection","aria-expanded","false","aria-controls","alertsSection",1,"accordion-button","collapsed","fw-bold"],["id","alertsSection","aria-labelledby","headingOne","data-bs-parent","#accordionAlerts",1,"accordion-collapse","collapse","p-2"],["class","alerts-flex-container",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-link",3,"click"],["id","accordionMultiOC",1,"accordion","mb-2"],["id","headingMultiOC",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#multiOCSection","aria-expanded","false","aria-controls","multiOCSection",1,"accordion-button","collapsed","fw-bold"],["id","multiOCSection","aria-labelledby","headingMultiOC","data-bs-parent","#accordionMultiOC",1,"accordion-collapse","collapse","p-2"],[1,"expiryDate-inputs","form-select","form-select-sm","me-2",3,"ngModelChange","ngModel"],["placeholder","Higher",1,"mb-1","me-2","form-control","form-control-sm","ocInputs",2,"width","80px !important",3,"ngModelChange","ngModel"],["placeholder","Lower",1,"mb-1","me-2","form-control","form-control-sm","ocInputs",2,"width","80px !important",3,"ngModelChange","ngModel"],["type","button",1,"mb-1","me-2","btn","btn-light","btn-sm",3,"click"],[1,"table","table-sm","table-bordered","shadow","mb-2","text-center","multiOCTable"],["scope","col",1,"oc-col-c1"],["scope","col",1,"oc-col-c2"],["scope","col",1,"oc-col-c3"],["scope","col",1,"oc-col-c4"],["scope","col",1,"oc-col-c5"],["scope","col",1,"text-center"],["scope","col",1,"oc-col-p5"],["scope","col",1,"oc-col-p4"],["scope","col",1,"oc-col-p3"],["scope","col",1,"oc-col-p2"],["scope","col",1,"oc-col-p1"],[4,"ngFor","ngForOf"],["id","accordionKnife",1,"accordion","mb-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#knifeSection","aria-expanded","false","aria-controls","knifeSection",1,"accordion-button","collapsed","fw-bold"],["id","knifeSection","aria-labelledby","headingOne","data-bs-parent","#accordionKnife",1,"accordion-collapse","collapse","p-2"],["type","button",1,"btn","btn-secondary","btn-sm","me-4",3,"click"],["type","checkbox","value","","id","auto_adjust_knife",1,"form-check-input",3,"ngModelChange","ngModel"],["for","auto_adjust_knife",1,"form-check-label"],[1,"table","table-sm","table-bordered","shadow","text-center",2,"max-width","1000px"],["scope","col"],["id","accordionOrders",1,"accordion","mb-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#ordersSection","aria-expanded","false","aria-controls","ordersSection",1,"accordion-button","collapsed","fw-bold"],["id","ordersSection","aria-labelledby","headingOne","data-bs-parent","#accordionOrders",1,"accordion-collapse","collapse","p-2"],[1,"place_multi_orders"],["type","button",1,"btn","btn-secondary","btn-sm","me-1",3,"click"],["class","accordion mb-2","id","accordionStraddle",4,"ngIf"],["class","accordion","id","accordionCharts",4,"ngIf"],["id","algo-container-old"],["type","checkbox","value","","id","show_algo",1,"form-check-input",3,"ngModelChange","ngModel"],["for","show_algo",1,"form-check-label"],["type","checkbox","value","","id","algoSimulated","disabled","",1,"form-check-input",3,"ngModelChange","ngModel"],["for","algoSimulated",1,"form-check-label"],["placeholder","Expiry YYYY-MM-DD","id","payOffExpiry",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-secondary","btn-sm","me-2",3,"click"],["type","button",1,"btn","btn-outline-primary","btn-sm","me-2",3,"click"],[3,"value"],[1,"nostretch"],["type","number","placeholder","Qty",1,"form-control","form-control-sm","me-1","width80",3,"ngModelChange","step","ngModel","ngClass"],[2,"display","flex","align-items","center"],[2,"display","inline-block","width","100px"],["placeholder","Scrip 11500CE","type","number",1,"form-control","form-control-sm","me-2","width60","d-inline",3,"ngModelChange","ngModel"],[2,"color","red"],["placeholder","Scrip 11500CE",1,"form-control","form-control-sm","me-2","width80",3,"keyup","ngModelChange","ngModel"],["placeholder","",1,"form-control","form-control-sm","me-1","width160",3,"ngModelChange"],[3,"ngClass",4,"ngIf"],["type","checkbox","value","","id","use-filter-expiry",1,"form-check-input",3,"ngModelChange","ngModel"],["for","use-filter-expiry",1,"form-check-label"],["placeholder","Expiry",1,"ms-2","form-control","form-control-sm",2,"width","80px","display","inline-block",3,"ngModelChange","ngModel"],["type","checkbox","value","","id","hide-payoff",1,"form-check-input",3,"ngModelChange","ngModel"],["for","hide-payoff",1,"form-check-label"],["type","checkbox","value","","id","use-hypo-future",1,"form-check-input",3,"ngModelChange","ngModel"],["for","use-hypo-future",1,"form-check-label"],["type","number","placeholder","Closest Strike",1,"ms-2","form-control","form-control-sm",2,"width","80px","display","inline-block",3,"ngModelChange","ngModel"],["type","checkbox","value","","id","hide-roll3",1,"form-check-input",3,"ngModelChange","ngModel"],["for","hide-roll3",1,"form-check-label"],["type","checkbox","value","","id","ce_side_overlay",1,"form-check-input",3,"ngModelChange","ngModel"],["for","ce_side_overlay",1,"form-check-label"],["type","checkbox","value","","id","pe_side_overlay",1,"form-check-input",3,"ngModelChange","ngModel"],["for","pe_side_overlay",1,"form-check-label"],["type","checkbox","value","","id","straddle_shiftCE_overlay",1,"form-check-input",3,"ngModelChange","ngModel"],["for","straddle_shiftCE_overlay",1,"form-check-label"],["type","checkbox","value","","id","straddle_shiftPE_overlay",1,"form-check-input",3,"ngModelChange","ngModel"],["for","straddle_shiftPE_overlay",1,"form-check-label"],["type","number","placeholder","Straddle Qty",1,"me-3","form-control","form-control-sm",2,"width","100px","display","inline-block",3,"ngModelChange","ngModel"],["type","checkbox","value","","id","payoff_overlay",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","payoff_overlay",1,"form-check-label"],["type","number","placeholder","Overlay strike",1,"ms-2","form-control","form-control-sm",2,"width","100px","display","inline-block",3,"ngModelChange","ngModel"],[1,"strategy_instru","form-select","form-select-sm","me-2",3,"ngModelChange","change","ngModel"],["placeholder","Start YYYY-MM-DD",1,"simulateDate","mb-1","me-3","form-control","form-control-sm",2,"width","120px !important",3,"ngModelChange","ngModel"],[1,"strategy_instru","form-select","form-select-sm","me-2",2,"width","120px !important",3,"ngModelChange","change","ngModel"],["placeholder","Expiry YYYY-MM-DD",1,"simulateDate","mb-1","me-3","form-control","form-control-sm",2,"width","120px !important",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-light","btn-sm","me-1",3,"click"],[1,"form-check-inline","use-hypo-future-class"],["type","checkbox","value","","id","show_simulate_charts",1,"form-check-input",3,"ngModelChange","ngModel"],["for","show_simulate_charts",1,"form-check-label"],["type","file","name","File Upload Expiry","accept",".csv",2,"display","none",3,"change"],[1,"text-success"],["type","checkbox","value","","id","auto_execute_rollin",1,"form-check-input",3,"ngModelChange","ngModel"],["for","auto_execute_rollin",1,"form-check-label"],["type","checkbox","value","","id","auto_execute_rollout",1,"form-check-input",3,"ngModelChange","ngModel"],["for","auto_execute_rollout",1,"form-check-label"],["placeholder","Seconds","id","automate_roll_secs",1,"d-inline","width32","me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Slabs","id","automate_slabs",1,"d-inline","width32","me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Qty per slab","id","automate_slab_qty",1,"d-inline","width60","me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","First SL%","id","automate_sl1",1,"d-inline","width48","me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","SL% increase","id","automate_sl_increase",1,"d-inline","width32","me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"mt-1"],[1,"d-inline","me-2"],["placeholder","Time 1","id","automate_time_1",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Distance 1","id","automate_dist_1",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Time 2","id","automate_time_2",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Distance 2","id","automate_dist_2",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Time 3","id","automate_time_3",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Distance 3","id","automate_dist_3",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Time 4","id","automate_time_4",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Distance 4","id","automate_dist_4",1,"d-inline","width80","me-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"width32"],[1,"form-check-inline","posCheckbox"],["type","checkbox","value","",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],[1,"width160"],["type","number","placeholder","Qty",1,"form-control","form-control-sm","me-1",3,"ngModelChange","step","ngModel","ngClass"],["type","number","placeholder","Roll Qty",1,"form-control","form-control-sm",3,"ngModelChange","step","ngModel","ngClass"],[1,"fw-bold","width48",2,"padding-top","8px"],["style","font-size: 10px; margin-top: 2px; white-space: nowrap; overflow: hidden;",4,"ngIf"],[1,"width110"],["type","number","placeholder","Entry",1,"form-control","form-control-sm",2,"max-width","80px !important","display","inline",3,"ngModelChange","ngModel"],["placement","bottom",1,"cursor-pointer","ms-1",3,"click","ngbPopover"],["placeholder","Scrip 11500CE",1,"form-control","form-control-sm","me-2","width80",3,"ngModelChange","ngModel"],[2,"display","inline-block","width","60px"],["type","button","class","btn btn-link",3,"click",4,"ngIf"],["type","button","class","btn btn-link red",3,"click",4,"ngIf"],["class","nostretch",4,"ngIf"],["class","width110",4,"ngIf"],["class","width80",4,"ngIf"],["style","text-align: left;",4,"ngIf"],["class","",4,"ngIf"],["type","checkbox","value","",1,"form-check-input","me-1",3,"ngModelChange","ngModel","disabled"],["type","checkbox","value","",1,"form-check-input",3,"ngModelChange","ngModel","disabled"],[2,"font-size","10px","margin-top","2px","white-space","nowrap","overflow","hidden"],[2,"margin-right","4px"],["type","button",1,"btn","btn-link","red",3,"click"],["type","radio",1,"form-check-input",3,"ngModelChange","name","id","value","ngModel"],[1,"form-check-label",3,"for"],["placeholder","Scrip 11500CE",1,"form-control","form-control-sm","me-2","width80",3,"ngModelChange","keyup","ngModel","ngClass"],["placeholder","Expiry 01OCT2020",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"width80"],["type","number","placeholder","Exit",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[2,"text-align","left"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],[1,""],["placeholder","Entry Date",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Exit Date",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["type","number","placeholder","> Alert",1,"form-control","form-control-sm","d-inline-block","width80",3,"ngModelChange","ngModel"],[1,"text-danger","ms-2"],["type","","placeholder","> Alert",1,"d-inline-block","width48","height16","me-1",3,"ngModelChange","ngModel"],[1,"text-danger","me-1"],["scope","col",1,"width32"],["scope","col",1,"nostretch"],["type","number","placeholder","Qty",1,"form-control","form-control-sm",3,"ngModelChange","step","ngModel","ngClass"],["placeholder","11500CE",1,"form-control","form-control-sm","me-2","width80",3,"ngModelChange","ngModel"],["type","number","placeholder","Price",1,"form-control","form-control-sm","me-1",2,"max-width","80px !important",3,"ngModelChange","ngModel"],["type","number","placeholder","Trigger Price",1,"form-control","form-control-sm",2,"max-width","80px !important",3,"ngModelChange","ngModel"],["style","display: flex; align-items: center;",4,"ngIf"],[1,"width32",2,"text-align","left"],["type","button","class","btn btn-light btn-sm",3,"click",4,"ngIf"],[1,"chart-chart"],[2,"min-width","600px","max-width","600px","margin-right","20px"],["baseChart","",3,"data","options","type"],[2,"min-width","450px"],[1,"mt-1","mb-2"],[1,"me-4","strategy_alert_field"],["placeholder","> Alert Price","type","number",1,"me-2","form-control","form-control-sm","strategy_alert_field",3,"ngModelChange","ngModel"],[2,"font-weight","normal"],[2,"margin-right","20px"],[1,"me-3",2,"display","inline-block"],["type","file","name","File Upload 1","accept",".csv",2,"display","none",3,"change"],["href","assets/flyrr.png","target","_blank","rel","noopener noreferrer"],["type","checkbox","value","","id","strangle_chart_simulate_tillend",1,"form-check-input",3,"ngModelChange","ngModel"],["for","strangle_chart_simulate_tillend",1,"form-check-label"],["id","spot-chart-simulate",1,"opt_chart","me-4"],[2,"width","268px"],["placeholder","Higher",1,"mb-1","me-2","form-control","form-control-sm","ocInputs",2,"width","54px !important",3,"ngModelChange","ngModel"],["placeholder","Lower",1,"mb-1","me-2","form-control","form-control-sm","ocInputs",2,"width","54px !important",3,"ngModelChange","ngModel"],["placeholder","Qty","type","number",1,"mb-1","form-control","form-control-sm","ocInputs",3,"ngModelChange","ngModel"],[1,"table","table-sm","table-bordered","shadow","mb-2","text-center"],["scope","col",1,"oc-col"],["class","oc-col","scope","col",4,"ngIf"],["class","table table-sm table-bordered shadow mb-2 text-center",4,"ngIf"],["placeholder","Sell Qty","type","number",1,"mb-1","form-control","form-control-sm","ocInputs",3,"ngModelChange","ngModel"],[1,"table","table-sm","table-bordered","shadow","mb-0","text-center"],[2,"position","relative",3,"ngClass"],[1,"cursor-pointer",2,"position","absolute","left","4px","font-size","14px","transform","rotateX(180deg) rotate(-20deg)",3,"click"],[1,"cursor-pointer",2,"position","absolute","right","4px","top","-5px","font-size","24px",3,"click"],[1,"cursor-pointer","text-primary","fw-bold",3,"click"],["class","ocStrategyStrikeQty fw-bold",4,"ngIf"],["style","position: relative;",4,"ngIf"],[1,"fw-bold","text-center",3,"ngClass"],["class","ocStrategyStrikeQty oc-strike-spot",4,"ngIf"],["style","color: orange;",4,"ngIf"],[1,"cursor-pointer",2,"position","absolute","right","4px","font-size","14px","transform","rotateX(180deg) rotate(-20deg)",3,"click"],[1,"cursor-pointer",2,"position","absolute","left","4px","top","-5px","font-size","24px",3,"click"],[1,"ocStrategyStrikeQty","fw-bold"],[2,"position","relative"],[1,"ocStrategyStrikeQty","oc-strike-spot"],[2,"color","orange"],[1,"cursor-pointer","text-center","oc-strike",3,"click"],[1,"text-success","fw-bold"],[1,"text-danger","fw-bold"],["height","800","width","100%","src",_f`https://pulse.zerodha.com/`],[1,"opt-charts-parent-0"],[1,"me-4"],[1,"form-check-inline","mt-0"],["type","radio","value","5min","id","5min",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","5min",1,"form-check-label"],["type","radio","value","1min","id","1min",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","1min",1,"form-check-label"],["type","button","title","Charts of ST 10 2 for 40 premiums whenever ST breach. Also prints ST entry exit and strangle 25 fullday entry exit in console",1,"btn","btn-secondary","btn-sm","mb-1","me-2",3,"click"],["class","opt_chart_wrapper-0",4,"ngFor","ngForOf"],[1,"opt_chart_wrapper-0"],[1,"opt_chart-0",3,"id"],[1,"chart-legend-0"],[1,"chart-legend-values"],["type","radio","value","10_2","id","st102",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","st102",1,"form-check-label"],["type","radio","value","7_3","id","st73",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","st73",1,"form-check-label"],["type","radio","value","both","id","stBoth",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","stBoth",1,"form-check-label"],["placeholder","0",1,"form-control","form-control-sm","me-2","mb-2","width80","d-inline",3,"ngModelChange","ngModel"],[1,"opt_chart-0",2,"width","320px","height","240px","background-color","grey",3,"id"],[1,"opt_chart_wrapper",3,"click"],[1,"opt_chart",3,"id","ngClass"],[1,"alerts-flex-container"],[1,"form-check-inline"],["type","checkbox","value","",1,"form-check-input",3,"ngModelChange","ngModel"],[1,"alert_field","form-select","form-select-sm","me-2",3,"ngModelChange","ngModel"],["placeholder","Scrip1",1,"me-2","mb-1","form-control","form-control-sm","alert_field",3,"ngModelChange","ngModel"],["placeholder","Scrip2",1,"me-2","mb-1","form-control","form-control-sm","alert_field",3,"ngModelChange","ngModel"],["placeholder","Expiry YYYY-MM-DD",1,"me-2","mb-1","form-control","form-control-sm","alert_field",3,"ngModelChange","ngModel"],["value",">"],["value","<"],["placeholder","Price","type","number",1,"me-2","mb-1","form-control","form-control-sm","alert_field",3,"ngModelChange","ngModel"],[1,"muliOCRowDiv"],[1,"cursor-pointer","text-primary","fw-bold","multiOCLTP",3,"click"],[1,"volume"],["rows","5",2,"width","100%",3,"ngModelChange","ngModel"],[1,"confirmation-check","form-check-inline","mt-0"],["type","radio","value","upstox","id","upstox_orders",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","upstox_orders",1,"form-check-label"],["type","radio","value","zerodha","id","zerodha_orders",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","zerodha_orders",1,"form-check-label"],["type","button",1,"btn","btn-secondary","btn-sm",2,"margin-top","-7px",3,"click"],[1,"form-select","form-select-sm","me-2",2,"width","120px","display","inline-block",3,"ngModelChange","ngModel"],["id","place_expiry_date","placeholder","place_expiry_date",1,"form-control","me-2",2,"width","120px","display","inline-block",3,"ngModelChange","ngModel"],["id","place_qty","placeholder","qty",1,"form-control","fw-bold","me-2",2,"width","120px","display","inline-block",3,"ngModelChange","ngClass","ngModel"],["id","curr_pos","placeholder","curr_pos",1,"form-control","fw-bold","me-1",2,"width","120px","display","inline-block",3,"ngModelChange","ngClass","ngModel"],[2,"text-align","left","font-size","10px",3,"ngClass"],["style","color: orange; font-weight: bold; margin-left: 4px;",4,"ngIf"],[1,"me-2",2,"display","inline-block"],["id","new_pos","placeholder","new_pos",1,"form-control","fw-bold","me-1",2,"width","120px","display","inline-block",3,"ngModelChange","ngClass","ngModel"],[2,"color","orange","font-weight","bold","margin-left","4px"],["id","accordionStraddle",1,"accordion","mb-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#straddleSection","aria-expanded","true","aria-controls","straddleSection",1,"accordion-button","collapsed","fw-bold"],["id","straddleSection","aria-labelledby","headingOne","data-bs-parent","#accordionStraddle",1,"accordion-collapse","collapse","p-2"],["placeholder","Expiry YYYY-MM-DD","id","payOffExpiry",1,"me-2","mb-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["placeholder","Scrip","id","payOffExpiry",1,"mb-1","form-control","form-control-sm",3,"ngModelChange","ngModel"],["id","accordionCharts",1,"accordion"],["type","button","data-toggle","collapse","data-target","#chartsSection","aria-expanded","true","aria-controls","chartsSection",1,"accordion-button","collapsed","fw-bold"],["id","chartsSection","aria-labelledby","headingOne","data-parent","#accordionCharts",1,"accordion-collapse","collapse","p-2"],["height","600","width","760","src",_f`https://ssltvc.forexprostools.com/?pair_ID=8985&height=600&width=760&interval=300&plotStyle=candles&domain_ID=56&lang_ID=56&timezone_ID=20`],["height","600","width","760","src",_f`https://ssltvc.forexprostools.com/?pair_ID=160&height=600&width=760&interval=300&plotStyle=candles&domain_ID=56&lang_ID=56&timezone_ID=20`]],template:function(i,r){if(i&1){let s=pe();g(0,"div",4)(1,"div",5)(2,"h2",6)(3,"button",7),w(4," Strategy Payoff "),m()(),g(5,"div",8)(6,"div",9)(7,"div",10)(8,"div",10)(9,"div",11),w(10," Strategy 1: "),g(11,"span",12),w(12),m()(),g(13,"div",11)(14,"input",13),z("ngModelChange",function(a){return D(s),U(r.strategyAlertPrice1,a)||(r.strategyAlertPrice1=a),E(a)}),m(),g(15,"span",14),w(16),m()()(),g(17,"div",15),w(18,"|"),m()(),g(19,"div",10)(20,"div",10)(21,"div",11),w(22," Strategy 2: "),g(23,"span",12),w(24),m()(),g(25,"div",11)(26,"input",13),z("ngModelChange",function(a){return D(s),U(r.strategyAlertPrice2,a)||(r.strategyAlertPrice2=a),E(a)}),m(),g(27,"span",14),w(28),m()()(),g(29,"div",15),w(30,"|"),m()(),g(31,"div",10)(32,"div",10)(33,"div",11),w(34," Strategy 3: "),g(35,"span",12),w(36),m()(),g(37,"div",11)(38,"input",13),z("ngModelChange",function(a){return D(s),U(r.strategyAlertPrice3,a)||(r.strategyAlertPrice3=a),E(a)}),m(),g(39,"span",14),w(40),m()()(),g(41,"div",15),w(42,"|"),m()(),g(43,"div",10)(44,"div",10)(45,"div",11),w(46," Strategy 4: "),g(47,"span",12),w(48),m()(),g(49,"div",11)(50,"input",13),z("ngModelChange",function(a){return D(s),U(r.strategyAlertPrice4,a)||(r.strategyAlertPrice4=a),E(a)}),m(),g(51,"span",14),w(52),m()()(),g(53,"div",15),w(54,"|"),m()(),g(55,"div",10)(56,"div",10)(57,"div",11),w(58," Strategy 5: "),g(59,"span",12),w(60),m()(),g(61,"div",11)(62,"input",13),z("ngModelChange",function(a){return D(s),U(r.strategyAlertPrice5,a)||(r.strategyAlertPrice5=a),E(a)}),m(),g(63,"span",14),w(64),m()()(),g(65,"div",15),w(66,"|"),m()(),g(67,"div",10)(68,"div",10)(69,"div",11),w(70," Strategy 6: "),g(71,"span",12),w(72),m()(),g(73,"div",11)(74,"input",13),z("ngModelChange",function(a){return D(s),U(r.strategyAlertPrice6,a)||(r.strategyAlertPrice6=a),E(a)}),m(),g(75,"span",14),w(76),m()()(),g(77,"div",15),w(78,"|"),m()(),g(79,"div",10)(80,"div",10)(81,"div",11),w(82," Strategy 7: "),g(83,"span",12),w(84),m()(),g(85,"div",11)(86,"input",13),z("ngModelChange",function(a){return D(s),U(r.strategyAlertPrice7,a)||(r.strategyAlertPrice7=a),E(a)}),m(),g(87,"span",14),w(88),m()()(),g(89,"div",15),w(90,"|"),m()(),g(91,"div",10)(92,"div",10)(93,"div",11),w(94," Strategy 8: "),g(95,"span",12),w(96),m()(),g(97,"div",11)(98,"input",13),z("ngModelChange",function(a){return D(s),U(r.strategyAlertPrice8,a)||(r.strategyAlertPrice8=a),E(a)}),m(),g(99,"span",14),w(100),m()()()()(),Be(101,"hr"),g(102,"div",16)(103,"div",17)(104,"div",18)(105,"div"),ee(106,ste,7,3,"div",19),g(107,"div",20)(108,"div",21)(109,"div",22),ee(110,ote,2,0,"button",23)(111,ate,2,0,"button",23)(112,lte,2,0,"button",23),g(113,"select",24),z("ngModelChange",function(a){return D(s),U(r.instruToTrade,a)||(r.instruToTrade=a),E(a)}),ee(114,cte,2,2,"option",25),m(),g(115,"input",26),z("ngModelChange",function(a){return D(s),U(r.expiryDateToTrade,a)||(r.expiryDateToTrade=a),E(a)}),m(),g(116,"input",27),q("change",function(a){return D(s),E(r.saveAlgoSSParams(a))}),z("ngModelChange",function(a){return D(s),U(r.algoTimeToEnter,a)||(r.algoTimeToEnter=a),E(a)}),m(),g(117,"input",28),q("change",function(a){return D(s),E(r.saveAlgoSSParams(a))}),z("ngModelChange",function(a){return D(s),U(r.algoSSQty,a)||(r.algoSSQty=a),E(a)}),m(),g(118,"input",29),q("change",function(a){return D(s),E(r.saveAlgoSSParams(a))}),z("ngModelChange",function(a){return D(s),U(r.algoSSSLPerc,a)||(r.algoSSSLPerc=a),E(a)}),m(),g(119,"input",30),q("change",function(a){return D(s),E(r.saveAlgoSSParams(a))}),z("ngModelChange",function(a){return D(s),U(r.algoSSMaxSLTimes,a)||(r.algoSSMaxSLTimes=a),E(a)}),m(),g(120,"input",31),q("change",function(a){return D(s),E(r.saveAlgoSSParams(a))}),z("ngModelChange",function(a){return D(s),U(r.algoSSTriggerDifference,a)||(r.algoSSTriggerDifference=a),E(a)}),m(),g(121,"input",32),q("change",function(a){return D(s),E(r.saveAlgoSSParams(a))}),z("ngModelChange",function(a){return D(s),U(r.algoSSIncludeGUIDs,a)||(r.algoSSIncludeGUIDs=a),E(a)}),m(),g(122,"input",33),q("change",function(a){return D(s),E(r.saveAlgoSSParams(a))}),z("ngModelChange",function(a){return D(s),U(r.algoSSExcludeGUIDs,a)||(r.algoSSExcludeGUIDs=a),E(a)}),m(),g(123,"div",34)(124,"textarea",35),z("ngModelChange",function(a){return D(s),U(r.algoLog,a)||(r.algoLog=a),E(a)}),m()()()(),g(125,"div",34)(126,"table",36)(127,"thead",37)(128,"tr")(129,"th",38),w(130,"Strike"),m(),g(131,"th",38),w(132,"Qty"),m(),g(133,"th",38),w(134,"Price"),m(),g(135,"th",38),w(136,"LTP"),m(),g(137,"th",38),w(138,"Trigger"),m(),g(139,"th",38),w(140,"Exit"),m(),g(141,"th",38),w(142,"PnL"),m()()(),g(143,"tbody"),ee(144,dte,15,12,"tr",39),m()(),g(145,"div",40),w(146," Total PnL: "),g(147,"div",41)(148,"span",42),w(149),m()()(),Be(150,"hr"),m()(),g(151,"div",43)(152,"label",44),w(153,"Range"),m(),g(154,"input",45),z("ngModelChange",function(a){return D(s),U(r.payoff_range,a)||(r.payoff_range=a),E(a)}),m()(),g(155,"div",46)(156,"input",47),z("ngModelChange",function(a){return D(s),U(r.hide_closed,a)||(r.hide_closed=a),E(a)}),m(),g(157,"label",48),w(158,"Hide Closed"),m()(),g(159,"div",46)(160,"input",49),z("ngModelChange",function(a){return D(s),U(r.show_t0,a)||(r.show_t0=a),E(a)}),m(),g(161,"label",50),w(162,"Show T+0"),m()(),g(163,"div",46)(164,"input",51),z("ngModelChange",function(a){return D(s),U(r.hide_roll,a)||(r.hide_roll=a),E(a)}),m(),g(165,"label",52),w(166,"Hide Roll"),m()(),g(167,"div",46)(168,"input",53),z("ngModelChange",function(a){return D(s),U(r.hide_extra,a)||(r.hide_extra=a),E(a)}),m(),g(169,"label",54),w(170,"Hide Extra"),m()(),g(171,"div",46)(172,"input",55),z("ngModelChange",function(a){return D(s),U(r.multi_t0,a)||(r.multi_t0=a),E(a)}),m(),g(173,"label",56),w(174,"Multi T+0"),m(),g(175,"input",57),z("ngModelChange",function(a){return D(s),U(r.multiT0Input,a)||(r.multiT0Input=a),E(a)}),m()(),g(176,"div",46)(177,"input",58),z("ngModelChange",function(a){return D(s),U(r.simulate_strategy,a)||(r.simulate_strategy=a),E(a)}),m(),g(178,"label",59),w(179,"Simulate Strategy"),m()(),g(180,"div",46)(181,"input",60),z("ngModelChange",function(a){return D(s),U(r.showInlineOC,a)||(r.showInlineOC=a),E(a)}),m(),g(182,"label",61),w(183,"Option Chain"),m()(),g(184,"div",46)(185,"input",62),z("ngModelChange",function(a){return D(s),U(r.playAlertSound,a)||(r.playAlertSound=a),E(a)}),m(),g(186,"label",63),w(187,"Play Alert"),m()(),g(188,"div",46)(189,"input",64),z("ngModelChange",function(a){return D(s),U(r.showExtraOptions,a)||(r.showExtraOptions=a),E(a)}),m(),g(190,"label",65),w(191,"Extra Options"),m()(),g(192,"div",46)(193,"input",66),z("ngModelChange",function(a){return D(s),U(r.mfRealTime,a)||(r.mfRealTime=a),E(a)}),m(),g(194,"label",67),w(195,"MF realtime"),m()(),ee(196,hte,41,13,"div",68)(197,mte,45,11,"div",69),g(198,"div",11),w(199),ee(200,_te,2,0,"span",70)(201,Ate,2,0,"span",71),m(),g(202,"select",72),z("ngModelChange",function(a){return D(s),U(r.instru,a)||(r.instru=a),E(a)}),ee(203,yte,2,2,"option",25),m(),g(204,"input",73),z("ngModelChange",function(a){return D(s),U(r.expiryDate,a)||(r.expiryDate=a),E(a)}),m(),g(205,"input",73),z("ngModelChange",function(a){return D(s),U(r.expiryDate2,a)||(r.expiryDate2=a),E(a)}),m(),g(206,"button",74),q("click",function(){return D(s),E(r.doSingleStrategySubscription())}),w(207,"Refresh LTPs"),m(),g(208,"button",74),q("click",function(){return D(s),E(r.loadOptionChain())}),w(209,"Load OC"),m(),g(210,"button",74),q("click",function(){return D(s),E(r.addPlaceOrders())}),w(211,"+ Place Orders"),m(),g(212,"button",74),q("click",function(){return D(s),E(r.exitPositions())}),w(213,"Exit"),m(),g(214,"button",74),q("click",function(){return D(s),E(r.saveAsCF())}),w(215,"Save CF"),m(),g(216,"button",74),q("click",function(){return D(s),E(r.removeCF())}),w(217,"Remove CF"),m(),g(218,"div",75)(219,"input",76),z("ngModelChange",function(a){return D(s),U(r.use_cf,a)||(r.use_cf=a),E(a)}),q("change",function(a){return D(s),E(r.use_cf_change(a))}),m(),g(220,"label",77),w(221,"Use CF"),m()(),g(222,"div",75)(223,"input",78),z("ngModelChange",function(a){return D(s),U(r.saveMTM1,a)||(r.saveMTM1=a),E(a)}),m(),g(224,"label",79),w(225,"MTM 1"),m()(),g(226,"div")(227,"button",74),q("click",function(){return D(s),E(r.refreshPositions())}),w(228,"Refresh"),m(),g(229,"input",80),z("ngModelChange",function(a){return D(s),U(r.use_tag,a)||(r.use_tag=a),E(a)}),q("change",function(a){return D(s),E(r.use_tag_change(a))}),m(),g(230,"input",81),z("ngModelChange",function(a){return D(s),U(r.tagSearch,a)||(r.tagSearch=a),E(a)}),q("change",function(a){return D(s),E(r.tagSearch_change(a))}),m(),g(231,"input",82),z("ngModelChange",function(a){return D(s),U(r.use_include_guid,a)||(r.use_include_guid=a),E(a)}),q("change",function(a){return D(s),E(r.use_include_guid_change(a))}),m(),g(232,"input",83),z("ngModelChange",function(a){return D(s),U(r.includeGUIDs,a)||(r.includeGUIDs=a),E(a)}),m(),g(233,"input",84),z("ngModelChange",function(a){return D(s),U(r.use_exclude_guid,a)||(r.use_exclude_guid=a),E(a)}),q("change",function(a){return D(s),E(r.use_exclude_guid_change(a))}),m(),g(234,"input",85),z("ngModelChange",function(a){return D(s),U(r.excludeGUIDs,a)||(r.excludeGUIDs=a),E(a)}),m(),g(235,"div",86)(236,"input",87),z("ngModelChange",function(a){return D(s),U(r.use_curr_expiry,a)||(r.use_curr_expiry=a),E(a)}),m(),g(237,"label",88),w(238,"Curr Expiry"),m()()(),g(239,"div",34)(240,"div",75)(241,"input",89),z("ngModelChange",function(a){return D(s),U(r.auto_execute,a)||(r.auto_execute=a),E(a)}),m(),g(242,"label",90),w(243,"Auto execute"),m()(),ee(244,vte,4,1,"div",91)(245,wte,4,1,"div",91)(246,bte,3,1,"div",92)(247,Ste,3,1,"div",92)(248,Cte,3,1,"div",92)(249,xte,3,1,"div",92)(250,Dte,3,1,"div",92),m(),ee(251,Ete,14,8,"div",93)(252,Tte,1,1,"ng-template",null,0,If),g(254,"table",36)(255,"tbody"),ee(256,Yte,35,40,"tr",39),m()(),ee(257,ene,17,1,"table",94),m()(),ee(258,tne,100,19,"div",95),g(259,"div",96)(260,"div")(261,"div")(262,"div",97)(263,"input",98),q("change",function(a){return D(s),E(r.expandSingleChartsChange(a))}),z("ngModelChange",function(a){return D(s),U(r.expand_single_charts,a)||(r.expand_single_charts=a),E(a)}),m(),g(264,"label",99),w(265,"Expand"),m()(),g(266,"select",100),z("ngModelChange",function(a){return D(s),U(r.spot_chart_instru,a)||(r.spot_chart_instru=a),E(a)}),q("change",function(a){return D(s),E(r.onSpotChartInstruChange(a))}),ee(267,nne,2,2,"option",25),m(),g(268,"select",100),z("ngModelChange",function(a){return D(s),U(r.spot_chart_instru2,a)||(r.spot_chart_instru2=a),E(a)}),q("change",function(a){return D(s),E(r.onSpotChartInstruChange2(a))}),ee(269,ine,2,2,"option",25),m(),g(270,"div",97)(271,"input",101),q("change",function(a){return D(s),E(r.showATPLineChange(a))}),z("ngModelChange",function(a){return D(s),U(r.showATPLine,a)||(r.showATPLine=a),E(a)}),m(),g(272,"label",102),w(273,"Show ATP"),m()()(),g(274,"div",103),Be(275,"div",104)(276,"div",105),g(277,"div",106)(278,"div",107)(279,"div",108),w(280),m(),g(281,"div",109),w(282),m()(),g(283,"div",110)(284,"div",108),w(285),m(),g(286,"div",109),w(287),m()()()(),Be(288,"div",111)(289,"div",112),g(290,"div"),w(291,"Daily Return - Blue: Stocks, Red: Nifty"),m()(),g(292,"div",113)(293,"div")(294,"div",46)(295,"input",114),z("ngModelChange",function(a){return D(s),U(r.add_strangle_chart,a)||(r.add_strangle_chart=a),E(a)}),m(),g(296,"label",115),w(297,"Add to strangle"),m()(),g(298,"input",116),z("ngModelChange",function(a){return D(s),U(r.strangle_chart_ce,a)||(r.strangle_chart_ce=a),E(a)}),m(),g(299,"input",117),z("ngModelChange",function(a){return D(s),U(r.strangle_chart_pe,a)||(r.strangle_chart_pe=a),E(a)}),m(),ee(300,rne,4,1,"div",118),g(301,"button",119),q("click",function(){return D(s),E(r.update_strangle_chart())}),w(302,"\u2713"),m(),ee(303,sne,2,2,"span",68),m(),g(304,"div",106),ee(305,one,3,1,"div",120),Be(306,"div",121),m()()()(),ee(307,Sne,51,11,"div",68),m(),Be(308,"hr"),g(309,"div")(310,"div")(311,"div",46)(312,"input",122),z("ngModelChange",function(a){return D(s),U(r.show_news,a)||(r.show_news=a),E(a)}),m(),g(313,"label",123),w(314,"Show News"),m()(),g(315,"a",124),w(316,"mc"),m(),g(317,"a",125),w(318,"bqprime"),m(),g(319,"a",126),w(320,"live-tv"),m()(),ee(321,Cne,2,0,"div",68),m(),ee(322,xne,24,0,"div",68),m()()(),ee(323,Ene,22,5,"div",127)(324,Ine,25,10,"div",127),g(325,"div",128)(326,"select",129),z("ngModelChange",function(a){return D(s),U(r.charts_instru,a)||(r.charts_instru=a),E(a)}),q("change",function(a){return D(s),E(r.onChartInstruChange(a))}),ee(327,kne,2,2,"option",25),m(),g(328,"input",130),z("ngModelChange",function(a){return D(s),U(r.charts_expiry,a)||(r.charts_expiry=a),E(a)}),m(),g(329,"input",131),z("ngModelChange",function(a){return D(s),U(r.call_start_strike,a)||(r.call_start_strike=a),E(a)}),m(),g(330,"input",132),z("ngModelChange",function(a){return D(s),U(r.call_end_strike,a)||(r.call_end_strike=a),E(a)}),m(),g(331,"input",133),z("ngModelChange",function(a){return D(s),U(r.put_start_strike,a)||(r.put_start_strike=a),E(a)}),m(),g(332,"input",134),z("ngModelChange",function(a){return D(s),U(r.put_end_strike,a)||(r.put_end_strike=a),E(a)}),m(),g(333,"input",135),z("ngModelChange",function(a){return D(s),U(r.charts_multiple,a)||(r.charts_multiple=a),E(a)}),m(),g(334,"button",74),q("click",function(){return D(s),E(r.initCharts())}),w(335,"Init Charts"),m(),g(336,"button",74),q("click",function(){return D(s),E(r.onChartInstruChange(null))}),w(337,"Update Range"),m(),ee(338,Nne,2,2,"span",68),g(339,"div",136),w(340,"CALLS"),m(),g(341,"div",137),ee(342,Pne,3,1,"div",120)(343,One,6,7,"div",138),m(),Be(344,"hr",139),g(345,"div",140),w(346,"PUTS"),m(),g(347,"div",137),ee(348,Rne,6,7,"div",138),m()(),g(349,"div",141)(350,"div",5)(351,"h2",6)(352,"button",142),w(353," Alerts "),m()(),g(354,"div",143),ee(355,Lne,18,10,"div",144),g(356,"button",145),q("click",function(){return D(s),E(r.subscribeAlerts())}),w(357,"Refresh LTPs"),m()()()(),g(358,"div",146)(359,"div",5)(360,"h2",147)(361,"button",148),w(362," Multi OC "),m()(),g(363,"div",149)(364,"div")(365,"select",150),z("ngModelChange",function(a){return D(s),U(r.multiOC_instru,a)||(r.multiOC_instru=a),E(a)}),ee(366,Vne,2,2,"option",25),m(),g(367,"input",151),z("ngModelChange",function(a){return D(s),U(r.multiOC_higherRange,a)||(r.multiOC_higherRange=a),E(a)}),m(),g(368,"input",152),z("ngModelChange",function(a){return D(s),U(r.multiOC_lowerRange,a)||(r.multiOC_lowerRange=a),E(a)}),m(),g(369,"input",73),z("ngModelChange",function(a){return D(s),U(r.expiryDate_multi1,a)||(r.expiryDate_multi1=a),E(a)}),m(),g(370,"input",73),z("ngModelChange",function(a){return D(s),U(r.expiryDate_multi2,a)||(r.expiryDate_multi2=a),E(a)}),m(),g(371,"input",73),z("ngModelChange",function(a){return D(s),U(r.expiryDate_multi3,a)||(r.expiryDate_multi3=a),E(a)}),m(),g(372,"input",73),z("ngModelChange",function(a){return D(s),U(r.expiryDate_multi4,a)||(r.expiryDate_multi4=a),E(a)}),m(),g(373,"input",73),z("ngModelChange",function(a){return D(s),U(r.expiryDate_multi5,a)||(r.expiryDate_multi5=a),E(a)}),m(),g(374,"button",74),q("click",function(){return D(s),E(r.loadMultiOptionChain())}),w(375,"Load OC"),m(),g(376,"button",153),q("click",function(){return D(s),E(r.multiOCRangeUpdate())}),w(377,"\u2713"),m()(),g(378,"table",154)(379,"thead",37)(380,"tr")(381,"th",155),w(382),m(),g(383,"th",156),w(384),m(),g(385,"th",157),w(386),m(),g(387,"th",158),w(388),m(),g(389,"th",159),w(390),m(),g(391,"th",160),w(392,"Strike"),m(),g(393,"th",161),w(394),m(),g(395,"th",162),w(396),m(),g(397,"th",163),w(398),m(),g(399,"th",164),w(400),m(),g(401,"th",165),w(402),m()()(),g(403,"tbody"),ee(404,qne,64,26,"tr",166),m()()()()(),g(405,"div",167)(406,"div",5)(407,"h2",6)(408,"button",168),w(409," Knife Orders "),m()(),g(410,"div",169)(411,"div")(412,"div")(413,"button",170),q("click",function(){return D(s),E(r.place_knife_orders())}),w(414,"Place All"),m(),g(415,"div",46)(416,"input",171),z("ngModelChange",function(a){return D(s),U(r.auto_adjust_knife,a)||(r.auto_adjust_knife=a),E(a)}),m(),g(417,"label",172),w(418,"Auto adjust"),m()()(),g(419,"table",173)(420,"thead",37)(421,"tr")(422,"th",174),w(423,"Instru"),m(),g(424,"th",174),w(425,"Expiry"),m(),g(426,"th",174),w(427,"Qty"),m(),g(428,"th",174),w(429,"Scrip"),m(),g(430,"th",174),w(431,"Status"),m(),g(432,"th",174),w(433,"Price"),m(),g(434,"th",174),w(435,"LTP"),m(),g(436,"th",174),w(437,"Low"),m()()(),g(438,"tbody"),ee(439,jne,17,8,"tr",166),m()()()()()(),g(440,"div",175)(441,"div",5)(442,"h2",6)(443,"button",176),w(444," Place Orders "),m()(),g(445,"div",177),ee(446,zne,16,4,"div",68),g(447,"div",178)(448,"div")(449,"button",179),q("click",function(){return D(s),E(r.place_all_orders())}),w(450,"Place All"),m(),g(451,"button",179),q("click",function(){return D(s),E(r.reset_place_orders())}),w(452,"Reset"),m(),g(453,"button",179),q("click",function(){return D(s),E(r.add_empty_place_order())}),w(454,"Add"),m(),g(455,"button",145),q("click",function(){return D(s),E(r.subscribeOrders())}),w(456,"Refresh LTPs"),m(),g(457,"button",145),q("click",function(){return D(s),E(r.refreshOILimits())}),w(458,"Refresh OI Limits"),m()(),g(459,"div"),w(460),m(),g(461,"table",173)(462,"thead",37)(463,"tr")(464,"th",174),w(465,"Instru"),m(),g(466,"th",174),w(467,"Expiry"),m(),g(468,"th",174),w(469,"Curr Qty"),m(),g(470,"th",174),w(471,"Curr Scrip"),m(),g(472,"th",174),w(473,"Curr LTP"),m(),g(474,"th",174),w(475,"New Scrip"),m(),g(476,"th",174),w(477,"New LTP"),m(),Be(478,"th",174)(479,"th",174),m()(),g(480,"tbody"),ee(481,Gne,32,32,"tr",166),m()()()()()(),ee(482,$ne,21,12,"div",180)(483,Qne,9,0,"div",181)}i&2&&(y(11),L("ngClass",Pe(155,xn,r.strategyPnl1<0,r.strategyPnl1>0)),y(),Z("",r.strategyPnl1," "),y(2),W("ngModel",r.strategyAlertPrice1),y(2),J(r.strategyAlertText1),y(7),L("ngClass",Pe(158,xn,r.strategyPnl2<0,r.strategyPnl2>0)),y(),Z("",r.strategyPnl2," "),y(2),W("ngModel",r.strategyAlertPrice2),y(2),J(r.strategyAlertText2),y(7),L("ngClass",Pe(161,xn,r.strategyPnl3<0,r.strategyPnl3>0)),y(),Z("",r.strategyPnl3," "),y(2),W("ngModel",r.strategyAlertPrice3),y(2),J(r.strategyAlertText3),y(7),L("ngClass",Pe(164,xn,r.strategyPnl4<0,r.strategyPnl4>0)),y(),Z("",r.strategyPnl4," "),y(2),W("ngModel",r.strategyAlertPrice4),y(2),J(r.strategyAlertText4),y(7),L("ngClass",Pe(167,xn,r.strategyPnl5<0,r.strategyPnl5>0)),y(),Z("",r.strategyPnl5," "),y(2),W("ngModel",r.strategyAlertPrice5),y(2),J(r.strategyAlertText5),y(7),L("ngClass",Pe(170,xn,r.strategyPnl6<0,r.strategyPnl6>0)),y(),Z("",r.strategyPnl6," "),y(2),W("ngModel",r.strategyAlertPrice6),y(2),J(r.strategyAlertText6),y(7),L("ngClass",Pe(173,xn,r.strategyPnl7<0,r.strategyPnl7>0)),y(),Z("",r.strategyPnl7," "),y(2),W("ngModel",r.strategyAlertPrice7),y(2),J(r.strategyAlertText7),y(7),L("ngClass",Pe(176,xn,r.strategyPnl8<0,r.strategyPnl8>0)),y(),Z("",r.strategyPnl8," "),y(2),W("ngModel",r.strategyAlertPrice8),y(2),J(r.strategyAlertText8),y(6),L("ngIf",!1),y(4),L("ngIf",!r.instruToTrade),y(),L("ngIf",!r.enableAlgo&&r.instruToTrade),y(),L("ngIf",r.enableAlgo&&r.instruToTrade),y(),W("ngModel",r.instruToTrade),y(),L("ngForOf",r.supportedInstru),y(),W("ngModel",r.expiryDateToTrade),y(),W("ngModel",r.algoTimeToEnter),y(),L("step",r.algoSS_qtyStep),W("ngModel",r.algoSSQty),y(),W("ngModel",r.algoSSSLPerc),y(),W("ngModel",r.algoSSMaxSLTimes),y(),W("ngModel",r.algoSSTriggerDifference),y(),W("ngModel",r.algoSSIncludeGUIDs),y(),W("ngModel",r.algoSSExcludeGUIDs),y(2),W("ngModel",r.algoLog),y(20),L("ngForOf",r.algoSS_positions_UI),y(4),L("ngClass",Pe(179,xn,r.getAlgoSSTotalPnl()<0,r.getAlgoSSTotalPnl()>0)),y(),Z(" ",r.getAlgoSSTotalPnl()," "),y(5),W("ngModel",r.payoff_range),y(2),W("ngModel",r.hide_closed),y(4),W("ngModel",r.show_t0),y(4),W("ngModel",r.hide_roll),y(4),W("ngModel",r.hide_extra),y(4),W("ngModel",r.multi_t0),y(3),W("ngModel",r.multiT0Input),y(2),W("ngModel",r.simulate_strategy),y(4),W("ngModel",r.showInlineOC),y(4),W("ngModel",r.playAlertSound),y(4),W("ngModel",r.showExtraOptions),y(4),W("ngModel",r.mfRealTime),y(3),L("ngIf",r.showExtraOptions),y(),L("ngIf",r.simulate_strategy===!0),y(2),Z(" Loaded Strategy ",r.currLoadNum," "),y(),L("ngIf",r.matchPositions),y(),L("ngIf",!r.matchPositions),y(),W("ngModel",r.instru),y(),L("ngForOf",r.supportedInstru),y(),W("ngModel",r.expiryDate),y(),W("ngModel",r.expiryDate2),y(14),W("ngModel",r.use_cf),y(4),W("ngModel",r.saveMTM1),y(6),W("ngModel",r.use_tag),y(),W("ngModel",r.tagSearch),y(),W("ngModel",r.use_include_guid),y(),W("ngModel",r.includeGUIDs),y(),W("ngModel",r.use_exclude_guid),y(),W("ngModel",r.excludeGUIDs),y(2),W("ngModel",r.use_curr_expiry),y(5),W("ngModel",r.auto_execute),y(3),L("ngIf",r.auto_execute),y(),L("ngIf",r.auto_execute),y(),L("ngIf",r.auto_execute),y(),L("ngIf",r.auto_execute),y(),L("ngIf",r.auto_execute),y(),L("ngIf",r.auto_execute),y(),L("ngIf",r.auto_execute),y(),L("ngIf",r.auto_execute),y(5),L("ngForOf",r.curr_positions_trades),y(),L("ngIf",r.sl_trades.length>0),y(),L("ngIf",!r.hide_payoff),y(5),W("ngModel",r.expand_single_charts),y(3),W("ngModel",r.spot_chart_instru),y(),L("ngForOf",r.supportedInstru),y(),W("ngModel",r.spot_chart_instru2),y(),L("ngForOf",r.supportedInstru),y(2),W("ngModel",r.showATPLine),y(9),J(r.chart_ce),y(2),J(r.isChartStrikeInCurrStrategy(r.chart_ce)),y(3),J(r.chart_pe),y(2),J(r.isChartStrikeInCurrStrategy(r.chart_pe)),y(8),W("ngModel",r.add_strangle_chart),y(3),W("ngModel",r.strangle_chart_ce),y(),W("ngModel",r.strangle_chart_pe),y(),L("ngIf",r.simulate_strategy),y(3),L("ngIf",r.simulate_strategy),y(2),L("ngIf",r.simulate_strategy),y(2),L("ngIf",r.showInlineOC),y(5),W("ngModel",r.show_news),y(9),L("ngIf",r.show_news),y(),L("ngIf",!1),y(),L("ngIf",r.simulate_strategy),y(),L("ngIf",!1),y(2),W("ngModel",r.charts_instru),y(),L("ngForOf",r.supportedInstru),y(),W("ngModel",r.charts_expiry),y(),W("ngModel",r.call_start_strike),y(),W("ngModel",r.call_end_strike),y(),W("ngModel",r.put_start_strike),y(),W("ngModel",r.put_end_strike),y(),W("ngModel",r.charts_multiple),y(5),L("ngIf",r.simulate_strategy),y(4),L("ngIf",r.simulate_strategy),y(),L("ngForOf",bl(182,mS).constructor(r.num_charts)),y(5),L("ngForOf",bl(183,mS).constructor(r.num_charts)),y(7),L("ngForOf",r.alerts),y(10),W("ngModel",r.multiOC_instru),y(),L("ngForOf",r.supportedInstru),y(),W("ngModel",r.multiOC_higherRange),y(),W("ngModel",r.multiOC_lowerRange),y(),W("ngModel",r.expiryDate_multi1),y(),W("ngModel",r.expiryDate_multi2),y(),W("ngModel",r.expiryDate_multi3),y(),W("ngModel",r.expiryDate_multi4),y(),W("ngModel",r.expiryDate_multi5),y(9),Z("",r.expiryDate_multi1," CE"),y(2),Z("",r.expiryDate_multi2," CE"),y(2),Z("",r.expiryDate_multi3," CE"),y(2),Z("",r.expiryDate_multi4," CE"),y(2),Z("",r.expiryDate_multi5," CE"),y(4),Z("",r.expiryDate_multi5," PE"),y(2),Z("",r.expiryDate_multi4," PE"),y(2),Z("",r.expiryDate_multi3," PE"),y(2),Z("",r.expiryDate_multi2," PE"),y(2),Z("",r.expiryDate_multi1," PE"),y(2),L("ngForOf",r.multi_oc_strikes1),y(12),W("ngModel",r.auto_adjust_knife),y(23),L("ngForOf",r.knife_orders),y(7),L("ngIf",!r.hide_clipboard),y(14),Z(" ",r.getOILimits()," "),y(21),L("ngForOf",r.place_orders),y(),L("ngIf",!1),y(),L("ngIf",!1))},dependencies:[sw,AO,_O,Xs,jg,Wg,Tr,sa,ra,lc,zd,Js,cs,mr,Fo,gr,Xr],styles:[`[_nghost-%COMP%], input[_ngcontent-%COMP%], .input-group-text[_ngcontent-%COMP%], select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-size:12px!important}.use-hypo-future-class[_ngcontent-%COMP%]{margin-bottom:15px}.chart-flex-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:column}.posCheckbox[_ngcontent-%COMP%]{margin:8px auto!important;padding-left:8px}.simulateDate[_ngcontent-%COMP%]{width:20%;display:inline-block}.simulateTimeAdv[_ngcontent-%COMP%], .simulateTimeMins[_ngcontent-%COMP%]{width:10%;display:inline-block}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.ocInputs[_ngcontent-%COMP%]{display:inline-block;width:70px}.ocStrategyStrikeQty[_ngcontent-%COMP%]{font-size:.6rem;color:#000}.oc-strike[_ngcontent-%COMP%]{background-color:#e9ecef;width:60px}.sl-order-placed[_ngcontent-%COMP%]{background-color:#e1f4ff}.oc-strike-spot[_ngcontent-%COMP%]{width:60px;margin:0 auto}.oc-col-actions[_ngcontent-%COMP%]{width:19rem}.oc-col[_ngcontent-%COMP%]{width:5rem}.algo-pos-col[_ngcontent-%COMP%]{width:32px!important}.ocStrikeStrategyCE[_ngcontent-%COMP%]{background-color:#ccffc9!important}.ocStrikeStrategyPE[_ngcontent-%COMP%]{background-color:#ffdede!important}.ocStrikeSLL[_ngcontent-%COMP%]{background-color:#e1f4ff!important}.width16[_ngcontent-%COMP%]{width:16px!important}.width32[_ngcontent-%COMP%]{width:32px!important}.width48[_ngcontent-%COMP%]{width:48px!important}.width60[_ngcontent-%COMP%]{width:60px!important}.width80[_ngcontent-%COMP%]{width:80px!important}.width110[_ngcontent-%COMP%]{width:110px!important}.width160[_ngcontent-%COMP%]{width:160px!important}.height16[_ngcontent-%COMP%]{height:16px!important}.nostretch[_ngcontent-%COMP%]{white-space:nowrap;width:1%}.charts-heading[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:24px;font-weight:700;margin:4px}.opt_chart[_ngcontent-%COMP%]{position:relative}.opt_chart-0[_ngcontent-%COMP%]{margin-bottom:4px;position:relative}.chart-border-green[_ngcontent-%COMP%]{border:2px solid green}.chart-border-red[_ngcontent-%COMP%]{border:2px solid red}.opt_chart_wrapper_parent[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.opt_chart_wrapper[_ngcontent-%COMP%]{display:flex;margin-right:12px;margin-bottom:12px}.opt_chart_wrapper-0[_ngcontent-%COMP%]{display:flex;margin-right:4px;margin-bottom:4px;flex-direction:column}.expiryDate-inputs[_ngcontent-%COMP%], .charts-inputs[_ngcontent-%COMP%]{width:10%;display:inline-block}.chart-legend[_ngcontent-%COMP%]{position:absolute;left:4px;top:2px;z-index:2;font-size:18px;line-height:28px;font-weight:300;color:#000}.chart-legend-qty[_ngcontent-%COMP%]{position:absolute;left:92px;top:2px;z-index:2;font-size:18px;line-height:28px;font-weight:300;color:#000}.chart-legend-0[_ngcontent-%COMP%]{position:absolute;left:4px;top:2px;z-index:2;font-size:14px;line-height:16px;font-weight:300;color:#000}.chart-legend-values[_ngcontent-%COMP%]{position:absolute;left:4px;top:18px;z-index:2;font-size:14px;line-height:16px;font-weight:300;color:#000}.strategy_alert_field[_ngcontent-%COMP%]{width:100px;display:inline-block}.alert_field[_ngcontent-%COMP%]{width:10%;display:inline-block}.chart-positions[_ngcontent-%COMP%]{min-width:400px;display:flex;padding-right:8px}.chart-finchart[_ngcontent-%COMP%]{min-width:700px}#payOffExpiry[_ngcontent-%COMP%]{width:20%;display:inline-block}.positionExited[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#949fb133}.positionSL[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#e1f4ff}.positionReentry[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#ffd5d5}.hidePositionRow[_ngcontent-%COMP%]{display:none}.strategy_instru[_ngcontent-%COMP%]{width:20%;display:inline-block}.multiOCTable[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1020;background:#fff}.muliOCRowDiv[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.multiOCLTP[_ngcontent-%COMP%]{width:50px;text-align:left;display:inline-block}.volume[_ngcontent-%COMP%]{color:#000;font-size:10px;font-weight:400;margin-left:5px}.positions-roll-sugg[_ngcontent-%COMP%]{text-align:left!important}.green[_ngcontent-%COMP%]{color:green}.red[_ngcontent-%COMP%]{color:tomato}.blue[_ngcontent-%COMP%]{color:#00f}
/*# sourceMappingURL=chart.component-77CHP6RR.css.map */`]})}return n})();var er=Ra(Zm());var l3=Ra(r3());function Zne(n){if(n.length===0)return 0;var t=n[0],e=0,i;if(typeof t!="number")return Number.NaN;for(var r=1;r<n.length;r++){if(typeof n[r]!="number")return Number.NaN;i=t+n[r],Math.abs(t)>=Math.abs(n[r])?e+=t-i+n[r]:e+=n[r]-i+t,t=i}return t+e}function _o(n){if(n.length===0)throw new Error("mean requires at least one data point");return Zne(n)/n.length}function eie(n,t){var e=_o(n),i=0,r,s;if(t===2)for(s=0;s<n.length;s++)r=n[s]-e,i+=r*r;else for(s=0;s<n.length;s++)i+=Math.pow(n[s]-e,t);return i}function vS(n){if(n.length===0)throw new Error("variance requires at least one data point");return eie(n,2)/n.length}function wS(n,t){if(n.length!==t.length)throw new Error("sampleCovariance requires samples with equal lengths");if(n.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var e=_o(n),i=_o(t),r=0,s=0;s<n.length;s++)r+=(n[s]-e)*(t[s]-i);var o=n.length-1;return r/o}var s3=function(){this.totalCount=0,this.data={}};s3.prototype.train=function(t,e){this.data[e]||(this.data[e]={});for(var i in t){var r=t[i];this.data[e][i]===void 0&&(this.data[e][i]={}),this.data[e][i][r]===void 0&&(this.data[e][i][r]=0),this.data[e][i][r]++}this.totalCount++};s3.prototype.score=function(t){var e={},i;for(var r in t){var s=t[r];for(i in this.data)e[i]={},this.data[i][r]?e[i][r+"_"+s]=(this.data[i][r][s]||0)/this.totalCount:e[i][r+"_"+s]=0}var o={};for(i in e){o[i]=0;for(var a in e[i])o[i]+=e[i][a]}return o};var o3=function(){this.weights=[],this.bias=0};o3.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var e=0,i=0;i<this.weights.length;i++)e+=this.weights[i]*t[i];return e+=this.bias,e>0?1:0};o3.prototype.train=function(t,e){if(e!==0&&e!==1)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var i=this.predict(t);if(typeof i=="number"&&i!==e){for(var r=e-i,s=0;s<this.weights.length;s++)this.weights[s]+=r*t[s];this.bias+=r}return this};var ZCe=607/128,exe=Math.log(Math.sqrt(2*Math.PI));var txe=Math.sqrt(2*Math.PI);var tie=Math.sqrt(2*Math.PI);function nie(n){for(var t=n,e=n,i=1;i<15;i++)e*=n*n/(2*i+1),t+=e;return Math.round((.5+t/tie*Math.exp(-n*n/2))*1e4)/1e4}var iie=[];for(t_=0;t_<=3.09;t_+=.01)iie.push(nie(t_));var t_;var a3=(()=>{class n{http;delay=300;constructor(e){this.http=e}getRawCsvData(e){let i=`https://www.niftyindices.com/IndexConstituent/${e}`;return this.http.get(i,{responseType:"text"}).pipe(ze(r=>{let s=r.split(`
`);return s[s.length-1].trim()===""&&s.pop(),{csvData:s.join(`
`),niftyIndicesSymbol:e}}),ir(r=>(console.error("Error fetching CSV:",r),ke({csvData:"",niftyIndicesSymbol:e}))))}loadIndicesData(){let e=[];for(let r=0;r<se.all_rows.length;r++){let s=se.all_rows[r];s.isIndex&&e.push(s)}let i=0;for(let r=0;r<e.length;r++){let s=e[r];i++,setTimeout(()=>{console.log("item",i,s);let o=!1;r===e.length-1&&(o=!0,console.log("last item",e.length-1)),this.fetchChartData(s,o)},i*this.delay)}}loadStocksData(e){let i=[];for(let o=0;o<se.all_rows.length;o++){let a=se.all_rows[o];a.index===e.index&&i.push(a)}let r=se.all_rows.find(o=>o.tradingsymbol==="NIFTY 50");i.push(r);let s=0;for(let o=0;o<i.length;o++){let a=i[o];(a.index===e.index||a.tradingsymbol==="NIFTY 50")&&(s++,setTimeout(()=>{console.log("item",s,a);let l=!1;o===i.length-1&&(l=!0,console.log("last item",i.length-1)),this.fetchChartData(a,l)},s*this.delay))}}loadStocksDataFromJson(e){let i=e.target.files[0],r=new FileReader;r.onload=s=>{try{let o=JSON.parse(s.target.result);se.candlesData=o,console.log("All stocks fetched",se.candlesData),this.calculations()}catch(o){console.error("Error parsing JSON:",o)}},r.readAsText(i)}fetchChartData(e,i){let r=this.findStockInMasters(e);if(r||(e.tradingsymbol=e.tradingsymbol+"-BE",r=this.findStockInMasters(e)),r?console.log("fetchChartData element:",r.tradingSymbol,r.token,r.exchange):console.log('Stock not found after appending "-BE"',e.tradingsymbol,se.stocksList),r&&r.token){let s=new Date,o=new Date;o.setDate(o.getDate()-se.chartDayToFetch);let a=""+o.getFullYear()+"-"+("0"+(o.getMonth()+1)).slice(-2)+"-"+("0"+o.getDate()).slice(-2),l=""+s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2),u={responseType:"json",headers:new Fe({authorization:f.broker_auth})},d="https://kite.zerodha.com/oms/instruments/historical/"+r.token+"/day?user_id="+f.zerodhaUserId+"&oi=1&from="+a+"&to="+l;this.http.get(d,u).subscribe(h=>{if(f.requestStatusEvent$.next({status:"success",message:"FETCHED "+r.tradingSymbol}),console.log("fetchChartData data:",r.tradingSymbol,h),h.data.candles){let p=h.data.candles;p.length===0&&console.log("ZERO CANDLES FOR ",r.tradingSymbol);for(let _=0;_<p.length;_++){let A=p[_],v=se.candlesData[r.tradingSymbol];v||(v={});let b=this.getDateInFormat(A[0]);v[b]=[A[1],A[2],A[3],A[4],A[5],A[6]],se.candlesData[r.tradingSymbol]=v}}console.log("candles:",Object.keys(se.candlesData).length,se.candlesData),i===!0&&(console.log("All stocks fetched",se.candlesData),this.calculations())})}else i===!0&&(console.log("All stocks fetched (else case)",se.candlesData),this.calculations())}findStockInMasters(e){let i=null;return f.mastersContract.forEach(r=>{if(e.tradingsymbol===r.tradingSymbol&&r.exchange==="NSE"){i=r;return}}),i}convertDateToFormat(e){let i=e;return new Date(i).toLocaleDateString("en-GB").replace(/\//g,"-")}getDateInFormat(e=null){e||(e=new Date);let i=new Date(e),r=i.getDate(),s=i.getMonth()+1,o=i.getFullYear(),a=i.getHours(),l=i.getMinutes(),c=i.getSeconds();return""+(r<=9?"0"+r:r)+"-"+(s<=9?"0"+s:s)+"-"+o+" "+(a<=9?"0"+a:a)+":"+(l<=9?"0"+l:l)+":"+(c<=9?"0"+c:c)}calculations(){for(let d=0;d<se.all_rows.length;d++){let h=se.all_rows[d],p=se.candlesData[h.tradingsymbol];if(p){let _=this.getReturns(h,p,0);h.ltp=_,h.return1=this.getReturns(h,p,1),h.return2=this.getReturns(h,p,5),h.return3=this.getReturns(h,p,21),h.return4=this.getReturns(h,p,63),h.return5=this.getReturns(h,p,126),h.return6=this.getReturns(h,p,252),h.dist4=this.getDist(h,p,252),h.isDist4Within1Month=this.checkIsDist4Within1Month(h),h.DMA200=this.getMovingAverage(p,200)}else h.ltp=0,h.return1=-100,h.return2=-100,h.return3=-100,h.return4=-100,h.return5=-100,h.return6=-100,h.dist4=-100,h.isDist4Within1Month=!1,h.DMA200=999999999999}let e=se.all_rows.filter(d=>!d.isIndex&&d.return4>-100).map(d=>d.return4),i=se.all_rows.filter(d=>!d.isIndex&&d.return5>-100).map(d=>d.return5),r=se.all_rows.filter(d=>!d.isIndex&&d.return6>-100).map(d=>d.return6),s=this.mean(e),o=this.standardDeviation(e),a=this.mean(i),l=this.standardDeviation(i),c=this.mean(r),u=this.standardDeviation(r);for(let d=0;d<se.all_rows.length;d++){let h=se.all_rows[d];h.return5>-100&&h.return6>-100?(h.zScore4=(h.return4-s)/o,h.zScore5=(h.return5-a)/l,h.zScore6=(h.return6-c)/u,h.combinedZ=h.zScore4+h.zScore5+h.zScore6,h.combinedZ=Math.round((h.combinedZ+1e-5)*100)/100):(h.zScore4=-999,h.zScore5=-999,h.zScore5=-999,h.combinedZ=-999)}this.sortByReturns("return1"),this.sortByReturns("return2"),this.sortByReturns("return3"),this.sortByReturns("return4"),this.sortByReturns("return6"),this.sortByReturns("dist4"),this.sortByReturns("return5");for(let d=0;d<se.all_rows.length;d++){let h=se.all_rows[d];h.combined_rank=-(h.return4_rank+h.return5_rank+h.return6_rank)}}checkIsDist4Within1Month(e){let i=se.candlesData[e.tradingsymbol],r=[],s=Object.keys(i).sort((l,c)=>this.parseDate(l).getTime()-this.parseDate(c).getTime());for(let l of s)r.push(i[l][3]);let o=Math.max(...r);return r.slice(-20).includes(o)}getMovingAverageFromDate(e,i,r){let s=0;for(let o=0;o<i;o++){let a=new Date(r);a.setDate(a.getDate()-o),a.setHours(0,0,0,0);let l=this.getDateInFormat(a),c=e[l];c&&(s+=c[3])}return s===0?0:Math.floor(s/i)}getMovingAverage(e,i){if(e.length<i)return 9999999999;let r=0;for(let s=0;s<i;s++)Object.values(e)[Object.keys(e).length-1-s]!==void 0&&(r+=Object.values(e)[Object.keys(e).length-1-s][3]);return Math.floor(r/i)}getHighInPeriod(e,i,r){let s=0;for(let o=i;o>=0;o--){let a=new Date(r);a.setDate(a.getDate()-o),a.setHours(0,0,0,0);let l=this.getDateInFormat(a),c=e[l];if(c){let u=c[1];u>s&&(s=u)}}return s}getDist(e,i,r){let s=0;for(let a=r;a>=0;a--){let l=this.getDataOfDate(e,i,a);if(l){let c=l[1];c>s&&(s=c)}}let o=(e.ltp-s)*100/s;return Math.round((o+1e-5)*100)/100}getReturnsApproach2(e,i,r){let s=null,o=null,a=0;for(;!s&&!(a>10);){let c=new Date(r);c.setDate(c.getDate()-i+a),c.setHours(0,0,0,0),o=this.getDateInFormat(c),s=e[o],a++}let l=null;if(s){let c=this.getDateInFormat(r);l=(e[c][3]-s[3])*100/s[3]}return l}getReturns(e,i,r,s=0){let o=Object.values(i)[Object.keys(i).length-1-s][3];if(r===0)return o;if(Object.keys(i).length-1-s<0||Object.keys(i).length-1-s-r<0)return 0;if(o){if(Object.values(i)[Object.keys(i).length-1-s-r]===void 0)return 0;let a=Object.values(i)[Object.keys(i).length-1-s-r][3],l=(o-a)*100/a;return l=Math.round((l+1e-5)*100)/100,l}return 0}getRSReturns(e,i,r,s=0){if(r===0)return 0;let o=0,a=Object.values(i)[Object.keys(i).length-1-s];if(a&&(o=a[3]),o){let l=Object.values(i)[Object.keys(i).length-1-s-r];if(l){let c=l[3],u=o/c;return u=Math.round((u+1e-5)*100)/100,u}else return 0}else return 0}getDataOfDate(e,i,r){return Object.values(i)[Object.keys(i).length-1-r]}sortByReturns(e="return5",i=null){let r=[],s=[];for(let o=0;o<se.all_rows.length;o++){let a=se.all_rows[o];a.isIndex&&s.push(a)}s=this.sortStocks(s,e),console.log("sort",s);for(let o=0;o<s.length;o++){let a=s[o],l=se.all_rows.filter(c=>c.index===a.tradingsymbol&&!c.isIndex);for(let c=0;c<l.length;c++){let u=l[c];i?this.isMatchingFilterCriteria(u,i)?u.isMatchingFilter=!0:u.isMatchingFilter=!1:u.isMatchingFilter=!0}l=this.sortStocks(l,e),r.push(a);for(let c=0;c<l.length;c++){let u=l[c];u[`${e}_rank`]=c+1,r.push(u)}}se.all_rows=r,se.stocksEvent$.next("refresh")}isMatchingFilterCriteria(e,i){for(let r in i){if(!i[r].selected)continue;let s=i[r].type;if(s==="non-value"&&r==="DMA200"&&e.DMA200>e.ltp||s==="value"&&e[r]<=i[r].value||s==="index"&&!this.isStockInIndex(r,e.tradingsymbol))return!1}return!0}isStockInIndex(e,i){return se.stocksList.find(r=>r.tradingsymbol===e)?.stocks.includes(i)||!1}sortStocks(e,i){return e.sort((r,s)=>s.isMatchingFilter!==r.isMatchingFilter?s.isMatchingFilter?1:-1:s[i]-r[i])}loadWatchlistFromLS(){se.watchlist=JSON.parse(localStorage.getItem("stocks_watchlist")),se.watchlist===null&&(se.watchlist=[]),console.log("loading watchlist from LS:",se.watchlist)}backtest1(e="NIFTY 500",i=1,r=5){let o=new Date().getDate()+(6-new Date().getDay()-1)-7,a=new Date;a.setDate(o),o=a.getDate()+(6-a.getDay()-1)-7,a.setDate(o),a.setHours(0,0,0,0),console.log("Last to Last Week: ",a);let l=se.all_rows.find(p=>p.tradingsymbol===e),c=se.all_rows.filter(p=>p.index===l.tradingsymbol&&!p.isIndex),u=new Date(a),d=0,h=[];for(let p=0;p<156;p++){let _=c.map(b=>Object.assign({},b));for(let b=0;b<_.length;b++){let x=_[b],N=se.candlesData[x.tradingsymbol];if(!N)continue;let T=null,k=null,C=0;for(;!T;){let G=new Date(u);G.setDate(G.getDate()-C),k=this.getDateInFormat(G),T=N[k],C++}let M=u.getDay(),O=u.getDate()-M+(M==0?-6:1),F=new Date(u);F.setDate(O);let j=null,H=null;for(C=0;!j;){let G=new Date(F);G.setDate(G.getDate()+C),H=this.getDateInFormat(G),j=N[H],C++}let Q=j[0],ue=(T[3]-Q)*100/Q;ue=Math.round((ue+1e-5)*100)/100,x.return2=ue}_.sort((b,x)=>x.return2-b.return2),console.log("stocksInIndexCopy",p,u,_);let A=0;for(let b=i-1;b<r;b++){let x=_[b],N=se.candlesData[x.tradingsymbol],T=null,k=null,C=0;for(;!T;){let G=new Date(u);G.setDate(G.getDate()-C),k=this.getDateInFormat(G),T=N[k],C++}let M=new Date(u),O=7-M.getDay()+5,F=new Date(M.setDate(M.getDate()+O)),j=null,H=null;for(C=0;!j;){let G=new Date(F);G.setDate(G.getDate()-C),H=this.getDateInFormat(G),j=N[H],C++}let Q=T[3],ue=(j[3]-Q)*100/Q;ue=Math.round((ue+1e-5)*100)/100,console.log("Curr Week Returns:",x.tradingsymbol,ue,k,H),A+=ue}d+=A,h.push(A),console.log("cum_returns",u,A);let v=u.getDate()+(6-u.getDay()-1)-7;u.setDate(v)}console.log("all_returns",d),this.exportBacktest(h)}exportBacktest(e){let i="stocks_backtest.csv";console.log("exporting: ",i);let r="";for(let l=0;l<e.length;l++){let c=e[l];r+=c+`\r
`}let s=new Blob([r],{type:"application/x-msdownload"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.target="_blank",document.body.appendChild(a),a.download=i,a.click(),a.parentNode.removeChild(a)}backtestMomentum1(e="NIFTY 500",i=20,r="3MReturns"){let s=1e6,o=s/i,a=[],l=se.all_rows.find(p=>p.tradingsymbol===e),c=se.all_rows.filter(p=>p.index===l.tradingsymbol&&!p.isIndex),u=0,d=[],h;for(let p=416;p>0;p--){let _=c.map(k=>Object.assign({},k)),A=[];for(let k=0;k<_.length;k++){let C=_[k],M=se.candlesData[C.tradingsymbol];if(!M)continue;let O=null,F=null,j=null,H=0;for(;!O&&!(H>10);)F=this.getLastToLastWeekDay(p,2),F.setDate(F.getDate()+H),F.setHours(0,0,0,0),j=this.getDateInFormat(F),O=M[j],H++;if(!O)continue;h=F;let Q=this.getReturnsApproach2(M,30,F),ie=this.getReturnsApproach2(M,90,F),ue=this.getReturnsApproach2(M,180,F),G=this.getReturnsApproach2(M,365,F),X=this.getHighInPeriod(M,365,F),te=0;X!==0&&(te=(O[3]-X)*100/X);let ve=this.getMovingAverageFromDate(M,200,F);ie&&ie>0&&ue&&ue>0&&G&&G>0&&te!==0&&Math.abs(te)<25&&ve!==0&&O[3]>ve&&A.push({tradingsymbol:C.tradingsymbol,oneYearReturn:G,sixMonthsReturn:ue,threeMonthsReturn:ie,oneMonthReturn:Q,dataAtCurrDate:O,currDate_obj:F})}let v=this.flattenToArray(A);console.log("flattenData",v.length,v);let b=this.flattenIndividual({tradingsymbol:"NIFTY MIDCAP 150",currDate_obj:h});if(console.log("benchmark",b.length,b),r==="3MReturns"?A=this.getTopStocksWith3MReturns(A,i,p):r==="6MReturns"?A=this.getTopStocksWith6MReturns(A,i,p):r==="1YReturns"?A=this.getTopStocksWith1YReturns(A,i,p):r==="1MReturns"?A=this.getTopStocksWith1MReturn(A,i,p):r==="Alpha"?(A=this.getTopStocksWithAlphas(v,b,i),console.log("alpha selectedStocks",A)):r==="JensenAlpha"?(A=this.getTopStocksWithJensenAlphas(v,b,i),console.log("jensenalpha selectedStocks",A)):r==="NormalizedMomentum"&&(A=this.getTopStocksWithNormalizedMomentum(v,i)),r!=="3MReturns"&&r!=="6MReturns"&&r!=="1YReturns"&&r!=="1MReturns"){let k=[];for(let C=0;C<A.length;C++){let M=A[C];k.push({tradingsymbol:M.stock,dataAtCurrDate:M.dataAtCurrDate})}A=k}console.log("selectedStocks",A,this.getLastToLastWeekDay(p,2));let x=0,N=0,T=null;for(let k=0;k<A.length;k++){let C=A[k].tradingsymbol,M=se.candlesData[C],O=A[k].dataAtCurrDate,F=null,j=null,H=null,Q=0;for(;!F&&!(Q>10);)j=this.getLastWeekDay(p,2),j.setDate(j.getDate()+Q),j.setHours(0,0,0,0),H=this.getDateInFormat(j),T=H,F=M[H],Q++;let ie=0,ue=null,G=null;if(F){ue=O[3],G=F[3],ie=(G-ue)*100/ue,ie=Math.round((ie+1e-5)*100)/100;let X=0,te=s/A.length;X=te+ie/100*te,N+=X,x+=ie,console.log("Curr Week Returns:",C,ie,X,te,this.getLastToLastWeekDay(p,2),ue,G)}}N!==0&&(s=N),u+=x,d.push(s),console.log("cum_returns",this.getLastToLastWeekDay(p,2),s,x)}console.log("all_returns",u),this.exportBacktest(d)}backtestMomentum2(e="NIFTY 500",i=20,r="3MReturns"){let s=1e6,o=0,a={},l=s/i,c=[],u=se.all_rows.find(A=>A.tradingsymbol===e),d=se.all_rows.filter(A=>A.index===u.tradingsymbol&&!A.isIndex),h=0,p=[],_;for(let A=416;A>0;A--){let v=d.map(M=>Object.assign({},M)),b=[];for(let M=0;M<v.length;M++){let O=v[M],F=se.candlesData[O.tradingsymbol];if(!F)continue;let j=null,H=null,Q=null,ie=0;for(;!j&&!(ie>10);)H=this.getLastToLastWeekDay(A,2),H.setDate(H.getDate()+ie),H.setHours(0,0,0,0),Q=this.getDateInFormat(H),j=F[Q],ie++;if(!j)continue;_=H;let ue=this.getReturnsApproach2(F,30,H),G=this.getReturnsApproach2(F,90,H),X=this.getReturnsApproach2(F,180,H),te=this.getReturnsApproach2(F,365,H),ve=this.getHighInPeriod(F,365,H),he=0;ve!==0&&(he=(j[3]-ve)*100/ve);let ge=this.getMovingAverageFromDate(F,200,H);he!==0&&Math.abs(he)<=25&&ge!==0&&j[3]>=ge&&b.push({tradingsymbol:O.tradingsymbol,oneYearReturn:te,sixMonthsReturn:X,threeMonthsReturn:G,oneMonthReturn:ue,dataAtCurrDate:j,currDate_obj:H})}let x=this.flattenToArray(b);console.log("flattenData",x.length,x);let N=this.flattenIndividual({tradingsymbol:"NIFTY MIDCAP 150",currDate_obj:_});if(console.log("benchmark",N.length,N),r==="3MReturns"?b=this.getTopStocksWith3MReturns(b,i,A):r==="6MReturns"?b=this.getTopStocksWith6MReturns(b,i,A,"filter"):r==="1YReturns"?b=this.getTopStocksWith1YReturns(b,i,A):r==="1MReturns"?b=this.getTopStocksWith1MReturn(b,i,A):r==="Alpha"?(b=this.getTopStocksWithAlphas(x,N,i),console.log("alpha selectedStocks",b)):r==="JensenAlpha"?(b=this.getTopStocksWithJensenAlphas(x,N,i),console.log("jensenalpha selectedStocks",b)):r==="NormalizedMomentum"?b=this.getTopStocksWithNormalizedMomentum(x,i):r==="WeightedMomentum"&&(b=this.getTopStocksWithWeightedReturns(b,i,A)),r!=="3MReturns"&&r!=="6MReturns"&&r!=="1YReturns"&&r!=="1MReturns"&&r!=="WeightedMomentum"){let M=[];for(let O=0;O<b.length;O++){let F=b[O];M.push({tradingsymbol:F.stock,dataAtCurrDate:F.dataAtCurrDate})}b=M}console.log("selectedStocks",b,this.getLastToLastWeekDay(A,2));let T=0,k=0,C=null;for(let M=0;M<b.length;M++){let O=b[M].tradingsymbol,F=se.candlesData[O],j=b[M].dataAtCurrDate,H=null,Q=null,ie=null,ue=0;for(;!H&&!(ue>10);)Q=this.getLastWeekDay(A,2),Q.setDate(Q.getDate()+ue),Q.setHours(0,0,0,0),ie=this.getDateInFormat(Q),C=ie,H=F[ie],ue++;let G=0,X=null,te=null;if(H){X=j[3],te=H[3],G=(te-X)*100/X,G=Math.round((G+1e-5)*100)/100;let ve=0,he=s/i;ve=he+G/100*he,k+=ve,o=0,b.length<i&&(o=(i-b.length)*he),k+=o,T+=G,a.hasOwnProperty(O)||(a[O]={return:0,count:0}),a[O].return+=G,a[O].count+=1,console.log("Curr Week Returns:",O,G,ve,he,this.getLastToLastWeekDay(A,2),X,te)}}k!==0&&(s=k),h+=T,p.push(s),console.log("cum_returns",this.getLastToLastWeekDay(A,2),s,T)}console.log("all_returns",h),console.log("stockDetails",a),this.exportBacktest(p)}backtestIndexAboveMA(e){let i=e.split(`
`),r=i[0].split(","),s=[],o=0,a=0,l=0,c=0;for(let u=1;u<i.length-1;u++){let d=i[u].split(",");if(d.length<r.length)continue;let h=this.convertDateToFormat(d[0]),p=parseFloat(d[4].replace(/"/g,"")),_=parseFloat(d[5].replace(/"/g,"")),A="HOLD",v=0;if(u===1&&p>_&&(A="BUY",o=1,a=p),u>1){o===1&&(v=p-a,l=c+v);let b=i[u-1].split(","),x=parseFloat(b[4].replace(/"/g,"")),N=parseFloat(b[5].replace(/"/g,""));p>_&&x<=N&&o===0?(A="BUY",o=1,a=p):p<_&&x>=N&&o===1&&(A="SELL",o=0,c=l)}s.push({Date:h,Close:p,MA:_,Signal:A,DailyPnL:v.toFixed(2),CumulativePnL:l.toFixed(2)})}this.exportCSV(s)}parseDate(e){let[i,r,s,o,a,l]=e.split(/[- :]/);return new Date(s,r-1,i,o,a,l)}flattenToArray(e){let i=[];for(let r=0;r<e.length;r++){let s=e[r],o=se.candlesData[s.tradingsymbol],a=new Date(s.currDate_obj),l=new Date(s.currDate_obj);l.setFullYear(a.getFullYear()-1);let c=[],u=Object.keys(o).sort((d,h)=>this.parseDate(d).getTime()-this.parseDate(h).getTime());for(let d of u){let h=this.parseDate(d);h>=l&&h<=a&&c.push(o[d][3])}i.push({stock:s.tradingsymbol,dailyPrices:c,dataAtCurrDate:s.dataAtCurrDate,currDate_obj:s.currDate_obj})}return i}flattenIndividual(e){let i=[],r=se.candlesData[e.tradingsymbol],s=new Date(e.currDate_obj),o=new Date(e.currDate_obj);o.setFullYear(s.getFullYear()-1);let a=[],l=Object.keys(r).sort((c,u)=>this.parseDate(c).getTime()-this.parseDate(u).getTime());for(let c of l){let u=this.parseDate(c);u>=o&&u<=s&&a.push(r[c][3])}return a}calculateDailyReturns(e){return e.slice(1).map((i,r)=>(i-e[r])/e[r])}getTopStocksWithWeightedReturns(e,i,r){return e.sort((s,o)=>.4*o.oneYearReturn+.3*o.sixMonthsReturn+.3*o.threeMonthsReturn-(.4*s.oneYearReturn+.3*s.sixMonthsReturn+.3*s.threeMonthsReturn)),console.log("selectedStocks sorted by weighted returns",e,this.getLastToLastWeekDay(r,2)),e.slice(0,i)}getTopStocksWith3MReturns(e,i,r){return e.sort((s,o)=>o.threeMonthsReturn-s.threeMonthsReturn),console.log("selectedStocks sorted",e,this.getLastToLastWeekDay(r,2)),e.slice(0,i)}getTopStocksWith6MReturns(e,i,r,s="sort"){return e.sort((o,a)=>a.sixMonthsReturn-o.sixMonthsReturn),console.log("selectedStocks sorted",e,this.getLastToLastWeekDay(r,2)),s==="filter"?e.slice(0,i):e}getTopStocksWith1YReturns(e,i,r){return e.sort((s,o)=>o.oneYearReturn-s.oneYearReturn),console.log("selectedStocks sorted",e,this.getLastToLastWeekDay(r,2)),e.slice(0,i)}getTopStocksWith1MReturn(e,i,r){return e.sort((s,o)=>o.oneMonthReturn-s.oneMonthReturn),console.log("selectedStocks sorted",e,this.getLastToLastWeekDay(r,2)),e.slice(0,i)}getTopStocksWithAlphas(e,i,r){let s=this.calculateDailyReturns(i);return e.map(a=>{let l=this.calculateDailyReturns(a.dailyPrices),c=Math.min(l.length,s.length);if(c<50)return console.warn(`Skipping stock ${a.stock} due to insufficient data length.`),null;let u=l.slice(0,c),d=s.slice(0,c),h=_o(u),p=_o(d),_=wS(u,d),A=vS(d);if(A===0)return console.warn(`Benchmark variance is zero, cannot calculate alpha for stock ${a.stock}.`),null;let v=_/A,b=h-v*p;return Ie(ne({},a),{dailyReturns:u,alpha:b})}).filter(a=>a!==null).sort((a,l)=>l.alpha-a.alpha).slice(0,r)}getTopStocksWithJensenAlphas(e,i,r){let s=this.calculateDailyReturns(i);return e.map(a=>{let l=this.calculateDailyReturns(a.dailyPrices),c=Math.min(l.length,s.length);if(c<50)return console.warn(`Skipping stock ${a.stock} due to insufficient data length.`),null;let u=l.slice(0,c),d=s.slice(0,c),h=_o(u),p=_o(d),_=wS(u,d),A=vS(d);if(A===0)return console.warn(`Benchmark variance is zero, cannot calculate Jensen's alpha for stock ${a.stock}.`),null;let v=_/A,b=h-(se.riskFreeRate+v*(p-se.riskFreeRate));return Ie(ne({},a),{dailyReturns:u,jensenAlpha:b})}).filter(a=>a!==null).sort((a,l)=>l.jensenAlpha-a.jensenAlpha).slice(0,r)}getTopStocksWithNormalizedMomentum(e,i){e.forEach(d=>{d.Daily_Returns=this.calculateDailyReturns(d.dailyPrices)}),e.forEach(d=>{let h=d.dailyPrices.length,p=d.dailyPrices[h-1],_=h>252?d.dailyPrices[h-252-1]:d.dailyPrices[0],A=h>126?d.dailyPrices[h-126-1]:d.dailyPrices[0],v=h>63?d.dailyPrices[h-63-1]:d.dailyPrices[0];d["12M_Return"]=p/_-1,d["6M_Return"]=p/A-1,d["3M_Return"]=p/v-1}),e.forEach(d=>{let h=this.standardDeviation(d.Daily_Returns);d.Volatility=h*Math.sqrt(252)}),e.forEach(d=>{d.MR12=d["12M_Return"]/d.Volatility,d.MR6=d["6M_Return"]/d.Volatility,d.MR3=d["3M_Return"]/d.Volatility});let r=this.mean(e.map(d=>d.MR12)),s=this.standardDeviation(e.map(d=>d.MR12)),o=this.mean(e.map(d=>d.MR6)),a=this.standardDeviation(e.map(d=>d.MR6)),l=this.mean(e.map(d=>d.MR3)),c=this.standardDeviation(e.map(d=>d.MR3));e.forEach(d=>{d.Z_MR12=(d.MR12-r)/s,d.Z_MR6=(d.MR6-o)/a,d.Z_MR3=(d.MR3-l)/c}),e.forEach(d=>{d.Weighted_Z=.2*d.Z_MR12+.3*d.Z_MR6+.5*d.Z_MR3}),e.forEach(d=>{d.Normalized_Momentum_Score=d.Weighted_Z>=0?1+d.Weighted_Z:Math.pow(1-d.Weighted_Z,-1)});let u=e.sort((d,h)=>h.Normalized_Momentum_Score-d.Normalized_Momentum_Score).slice(0,i);return console.log("Top Stocks:",u),u}mean(e){return e.reduce((i,r)=>i+r,0)/e.length}standardDeviation(e){let i=this.mean(e);return Math.sqrt(e.reduce((r,s)=>r+Math.pow(s-i,2),0)/e.length)}convertToCSV(e){if(e.length===0)return"";let i=Object.keys(e[0]).join(","),r=e.map(s=>Object.values(s).join(","));return[i,...r].join(`
`)}exportCSV(e){let i=this.convertToCSV(e),r=new Blob([i],{type:"text/csv"}),s=window.URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.download="output.csv",document.body.appendChild(o),o.click(),document.body.removeChild(o)}findDifferenceInArrays(e,i){let r=[];for(let s=0;s<e.length;s++){let o=e[s],a=!1;for(let l=0;l<i.length;l++)if(o.tradingsymbol===i[l].tradingsymbol){a=!0;break}a||r.push(o)}return r}getLastWeekDay(e,i){let r=new Date,s=r.getDay(),o=new Date(r);return o.setDate(r.getDate()-(s+7-i)%7-7*(e+1)),o}getLastToLastWeekDay(e,i){let r=this.getLastWeekDay(e,i),s=new Date(r);return s.setDate(r.getDate()-7),s}static \u0275fac=function(i){return new(i||n)(ae(Ct))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var oie=n=>({"d-none":n}),nn=(n,t)=>({green:n,red:t}),aie=(n,t,e,i,r)=>({"notmatchingfilter-row":n,indexRow:t,niftyRow:e,"watchlist-row":i,"d-none":r}),lie=n=>({stockHolding:n}),bS=(n,t,e)=>({green:n,red:t,rankShortlisted:e});function cie(n,t){n&1&&(g(0,"div",43),w(1,"1M"),m())}function uie(n,t){n&1&&(g(0,"div",44),w(1,"M150M50"),m())}function die(n,t){n&1&&(g(0,"div",44),w(1,"N500M50"),m())}function hie(n,t){n&1&&(g(0,"div",44),w(1,"500MQ50"),m())}function pie(n,t){n&1&&(g(0,"div",44),w(1,"A50"),m())}function fie(n,t){n&1&&(g(0,"div",45),w(1,"N50"),m())}function gie(n,t){n&1&&(g(0,"div",45),w(1,"N100"),m())}function mie(n,t){n&1&&(g(0,"div",45),w(1,"M150"),m())}function _ie(n,t){if(n&1){let e=pe();g(0,"input",49),z("ngModelChange",function(r){D(e);let s=R().$implicit,o=R();return U(o.filterCriteria[s].value,r)||(o.filterCriteria[s].value=r),E(r)}),q("input",function(){D(e);let r=R(2);return E(r.filterData())}),m()}if(n&2){let e=R().$implicit,i=R();W("ngModel",i.filterCriteria[e].value),L("disabled",!i.filterCriteria[e].selected)}}function Aie(n,t){if(n&1){let e=pe();g(0,"div",46)(1,"label")(2,"input",47),z("ngModelChange",function(r){let s=D(e).$implicit,o=R();return U(o.filterCriteria[s].selected,r)||(o.filterCriteria[s].selected=r),E(r)}),q("change",function(){D(e);let r=R();return E(r.filterData())}),m(),w(3),m(),ee(4,_ie,1,2,"input",48),m()}if(n&2){let e=t.$implicit,i=R();y(2),W("ngModel",i.filterCriteria[e].selected),y(),Z(" ",i.filterKeysLabels[e]," "),y(),L("ngIf",e==="return4"||e==="return5"||e==="return6"||e==="dist4")}}function yie(n,t){if(n&1){let e=pe();g(0,"span",65),q("click",function(){D(e);let r=R().$implicit,s=R();return E(s.expandCollapseIndex(r))}),w(1,"\u2261"),m()}}function vie(n,t){if(n&1){let e=pe();g(0,"span",66),q("click",function(){D(e);let r=R().$implicit,s=R();return E(s.loadStocksData(r))}),w(1,"\u21BB"),m()}}function wie(n,t){if(n&1){let e=pe();g(0,"span",67),q("click",function(){D(e);let r=R().$implicit,s=R();return E(s.plotRSCharts(r))}),w(1,"RS"),m()}}function bie(n,t){if(n&1){let e=pe();g(0,"span",68),q("click",function(){D(e);let r=R().$implicit,s=R();return E(s.addToWatchlist(r))}),w(1,"W"),m()}}function Sie(n,t){if(n&1){let e=pe();g(0,"span",69),q("click",function(){D(e);let r=R().$implicit,s=R();return E(s.removeFromWatchlist(r))}),w(1,"X"),m()}}function Cie(n,t){if(n&1&&(g(0,"span",70),w(1,"\u2714 "),g(2,"span",50),w(3),m()()),n&2){let e=R().$implicit,i=R();y(2),L("ngClass",Pe(2,nn,i.getStockPnL(e)>0,i.getStockPnL(e)<0)),y(),J(i.getStockPnL(e))}}function xie(n,t){if(n&1&&(g(0,"span",8),w(1),m()),n&2){let e=R().$implicit;y(),Z("(",e.return1_rank,")")}}function Die(n,t){if(n&1&&(g(0,"span",8),w(1),m()),n&2){let e=R().$implicit;y(),Z("(",e.return2_rank,")")}}function Eie(n,t){if(n&1&&(g(0,"span",8),w(1),m()),n&2){let e=R().$implicit;y(),Z("(",e.return3_rank,")")}}function Mie(n,t){if(n&1&&(g(0,"span",8),w(1),m()),n&2){let e=R().$implicit;y(),Z("(",e.return4_rank,")")}}function Tie(n,t){if(n&1&&(g(0,"span",8),w(1),m()),n&2){let e=R().$implicit;y(),Z("(",e.return5_rank,")")}}function Iie(n,t){if(n&1&&(g(0,"span",8),w(1),m()),n&2){let e=R().$implicit;y(),Z("(",e.return6_rank,")")}}function kie(n,t){if(n&1&&(g(0,"span",8),w(1),m()),n&2){let e=R().$implicit;y(),Z("(",e.dist4_rank,")")}}function Nie(n,t){n&1&&(g(0,"div",43),w(1,"1M"),m())}function Pie(n,t){n&1&&(g(0,"div",44),w(1,"M150M50"),m())}function Oie(n,t){n&1&&(g(0,"div",44),w(1,"500M50"),m())}function Rie(n,t){n&1&&(g(0,"div",44),w(1,"500MQ50"),m())}function Fie(n,t){n&1&&(g(0,"div",44),w(1,"A50"),m())}function Lie(n,t){n&1&&(g(0,"div",45),w(1,"N50"),m())}function Vie(n,t){n&1&&(g(0,"div",45),w(1,"N100"),m())}function Bie(n,t){n&1&&(g(0,"div",45),w(1,"M150"),m())}function qie(n,t){if(n&1&&(g(0,"div"),ee(1,Pie,2,0,"div",11)(2,Oie,2,0,"div",11)(3,Rie,2,0,"div",11)(4,Fie,2,0,"div",11)(5,Lie,2,0,"div",12)(6,Vie,2,0,"div",12)(7,Bie,2,0,"div",12),m()),n&2){let e=R().$implicit,i=R();y(),L("ngIf",i.isStockInIndex("NIFTYM150MOMNTM50",e.tradingsymbol)&&e.index!=="NIFTYM150MOMNTM50"),y(),L("ngIf",i.isStockInIndex("MOMENTUM50",e.tradingsymbol)&&e.index!=="MOMENTUM50"),y(),L("ngIf",i.isStockInIndex("NIFTY MULTI MQ 50",e.tradingsymbol)&&e.index!=="NIFTY MULTI MQ 50"),y(),L("ngIf",i.isStockInIndex("NIFTY ALPHA 50",e.tradingsymbol)&&e.index!=="NIFTY ALPHA 50"),y(),L("ngIf",i.isStockInIndex("NIFTY 50",e.tradingsymbol)),y(),L("ngIf",i.isStockInIndex("NIFTY 100",e.tradingsymbol)),y(),L("ngIf",i.isStockInIndex("NIFTY MIDCAP 150",e.tradingsymbol))}}function jie(n,t){if(n&1){let e=pe();Ef(0),g(1,"tr",50)(2,"td",51),ee(3,yie,2,0,"span",52)(4,vie,2,0,"span",53)(5,wie,2,0,"span",54)(6,bie,2,0,"span",55)(7,Sie,2,0,"span",56),g(8,"span",57),q("click",function(){let r=D(e).$implicit,s=R();return E(s.openPopup(r))}),w(9,"\u2197"),m()(),g(10,"td",50)(11,"a",58),w(12),m(),ee(13,Cie,4,5,"span",59),m(),g(14,"td"),w(15),m(),g(16,"td",50),w(17),m(),g(18,"td",50)(19,"div",60)(20,"span",61),w(21),m(),ee(22,xie,2,1,"span",62),m()(),g(23,"td",50)(24,"div",60)(25,"span",61),w(26),m(),ee(27,Die,2,1,"span",62),m()(),g(28,"td",50)(29,"div",60)(30,"span",61),w(31),m(),ee(32,Eie,2,1,"span",62),m()(),g(33,"td",50)(34,"div",60)(35,"span",61),w(36),m(),ee(37,Mie,2,1,"span",62),m()(),g(38,"td",50)(39,"div",60)(40,"span",61),w(41),m(),ee(42,Tie,2,1,"span",62),m()(),g(43,"td",50)(44,"div",60)(45,"span",61),w(46),m(),ee(47,Iie,2,1,"span",62),m()(),g(48,"td")(49,"div",60)(50,"span",61),w(51),m()()(),g(52,"td")(53,"div",60)(54,"span",61),w(55),m()()(),g(56,"td",50)(57,"div",60)(58,"span",61),w(59),m(),ee(60,kie,2,1,"span",62)(61,Nie,2,0,"div",9),m()(),g(62,"td",63),ee(63,qie,8,7,"div",64),m()(),Mf()}if(n&2){let e=t.$implicit,i=R();y(),L("ngClass",NE(38,aie,!e.isMatchingFilter,e.isIndex,e.isIndex&&e.tradingsymbol==="NIFTY 50",e.watchlist,i.isRowHidden(e)||i.isRowHiddenFilter(e))),y(2),L("ngIf",e.isIndex===!0),y(),L("ngIf",e.isIndex===!0),y(),L("ngIf",e.isIndex===!0),y(),L("ngIf",e.isIndex===!1&&e.watchlist===!1),y(),L("ngIf",e.watchlist),y(3),L("ngClass",$t(44,lie,i.isStockHolding(e))),y(),L("href","https://www.google.com/search?q="+e.tradingsymbol+"&tbm=nws",wl),y(),Z(" ",e.tradingsymbol," "),y(),L("ngIf",i.isStockInHoldings(e)),y(2),J(e.ltp),y(),L("ngClass",Pe(46,nn,e.ltp>e.DMA200,e.ltp<e.DMA200)),y(),J(e.DMA200),y(),L("ngClass",Pe(49,nn,e.return1>0,e.return1<0)),y(3),J(e.return1),y(),L("ngIf",!e.isIndex),y(),L("ngClass",Pe(52,nn,e.return2>0,e.return2<0)),y(3),J(e.return2),y(),L("ngIf",!e.isIndex),y(),L("ngClass",Pe(55,nn,e.return3>0,e.return3<0)),y(3),J(e.return3),y(),L("ngIf",!e.isIndex),y(),L("ngClass",Mn(58,bS,e.return4>0,e.return4<0,e.return4_rank<=i.num_shortlisted_stocks)),y(3),J(e.return4),y(),L("ngIf",!e.isIndex),y(),L("ngClass",Mn(62,bS,e.return5>0,e.return5<0,e.return5_rank<=i.num_shortlisted_stocks)),y(3),J(e.return5),y(),L("ngIf",!e.isIndex),y(),L("ngClass",Mn(66,bS,e.return6>0,e.return6<0,e.return6_rank<=i.num_shortlisted_stocks)),y(3),J(e.return6),y(),L("ngIf",!e.isIndex),y(4),J(e.combined_rank),y(4),J(e.combinedZ),y(),L("ngClass",Pe(70,nn,e.dist4>=-15,e.dist4<-15)),y(3),J(e.dist4),y(),L("ngIf",!e.isIndex),y(),L("ngIf",!e.isIndex&&e.isDist4Within1Month),y(2),L("ngIf",!e.isIndex)}}var c3=(()=>{class n{appService;zerodhaService;mapService;websocketService;angelWS;stocksService;handleKeyDown(e){if(e.key==="Escape")this.closePopup();else if(e.key==="ArrowUp"){if(this.showPopup){e.preventDefault();let i=se.all_rows.findIndex(r=>r.tradingsymbol===this.popupChart2.tradingsymbol&&r.index===this.popupChart2.index);if(i>0){let r=se.all_rows[i-1];console.log("Previous object:",r),this.openPopup(r)}else console.log("No previous item found or target is at the start.")}}else if(e.key==="ArrowDown"&&this.showPopup){e.preventDefault();let i=se.all_rows.findIndex(r=>r.tradingsymbol===this.popupChart2.tradingsymbol&&r.index===this.popupChart2.index);if(i>=0&&i<se.all_rows.length-1){let r=se.all_rows[i+1];console.log("Next object:",r),this.openPopup(r)}else console.log("No next item found or target is at the end.")}}all_rows=[];watchlist_rows=[];showPopup=!1;popupChart2=null;charts={};hideNonWatchlist=!1;showST=!1;stPeriod=10;stVol=2;showEMA1=!1;emaPeriod1=21;showEMA2=!1;emaPeriod2=55;showSMA=!0;smaPeriod=200;lastColumnSort="return5";enableFilter=!1;enableFilter3M=!1;filter3M=0;enableFilter6M=!1;filter6M=0;enableFilter1Y=!1;filter1Y=0;enableFilter52WHD=!1;filter52WHD=27;enableFilterDMA=!1;num_shortlisted_stocks=se.num_shortlisted_stocks;selectedFilters=[];filterKeys=["return4","return5","return6","dist4","DMA200","NIFTYM150MOMNTM50","MOMENTUM50","NIFTY MULTI MQ 50","NIFTY ALPHA 50"];filterKeysLabels={return4:"3M%",return5:"6M%",return6:"1Y%",dist4:"52WHD%",DMA200:"200DMA",NIFTYM150MOMNTM50:"NIFTYM150MOMNTM50",MOMENTUM50:"MOMENTUM50","NIFTY MULTI MQ 50":"NIFTY MULTI MQ 50","NIFTY ALPHA 50":"NIFTY ALPHA 50"};filterCriteria={return4:{selected:!1,value:0,type:"value"},return5:{selected:!1,value:0,type:"value"},return6:{selected:!1,value:0,type:"value"},dist4:{selected:!1,value:-27,type:"value"},DMA200:{selected:!1,type:"non-value"},NIFTYM150MOMNTM50:{selected:!1,type:"index"},MOMENTUM50:{selected:!1,type:"index"},"NIFTY MULTI MQ 50":{selected:!1,type:"index"},"NIFTY ALPHA 50":{selected:!1,type:"index"}};constructor(e,i,r,s,o,a){this.appService=e,this.zerodhaService=i,this.mapService=r,this.websocketService=s,this.angelWS=o,this.stocksService=a,se.stocksEvent$.subscribe(l=>{console.log("stocksEvent subcribe: ",l),l==="refresh"&&(this.all_rows=se.all_rows)})}ngOnInit(){}fetchAllStocksInIndices(){if(!se.fetchFromWebsite){this.initialProcessing();return}let e=[];se.stocksList.forEach(i=>{let r=this.stocksService.getRawCsvData(i.niftyIndicesSymbol);e.push(r)}),Qc(e).subscribe({next:i=>{i.forEach(r=>{if(console.log("Response Data:",r),r&&r.csvData){let s=l3.parse(r.csvData,{header:!0}).data;console.log("Parsed Data:",s);let o=s.map(l=>l.Symbol),a=se.stocksList.find(l=>l.niftyIndicesSymbol===r.niftyIndicesSymbol);a&&(a.stocks=[...o])}else console.error("No 'csvData' found in response:",r)}),f.requestStatusEvent$.next({status:"success",message:"Fetched all stocks in indices. Please verify."}),this.initialProcessing()},error:i=>{console.error("Error during API call:",i)}})}initialProcessing(){console.log("initialProcessing"),this.all_rows=[],this.watchlist_rows=[];for(let e=0;e<se.stocksList.length;e++){let i=se.stocksList[e],r=new Oh;r.tradingsymbol=i.tradingsymbol,r.watchlist=!1,r.isIndex=!0,r.index=r.tradingsymbol,r.isVisible=!0,this.all_rows.push(r);for(let s=0;s<i.stocks.length;s++){let o=i.stocks[s],a=new Oh;a.tradingsymbol=o,a.watchlist=!1,a.isIndex=!1,a.index=i.tradingsymbol,a.isVisible=!1,this.all_rows.push(a)}}se.all_rows=this.all_rows,this.loadWatchlistFromLS();for(let e=0;e<se.watchlist.length;e++){let i=se.watchlist[e],r=se.all_rows.filter(s=>s.tradingsymbol===i);for(let s=0;s<r.length;s++){let o=r[s];o.watchlist=!0,console.log("Entry from watchlist:",o)}}}ngAfterViewInit(){setTimeout(()=>{})}isStockInIndex(e,i){return se.stocksList.find(r=>r.tradingsymbol===e)?.stocks.includes(i)||!1}isStockInHoldings(e){return e.isIndex?!1:!!(f.stockPositions&&f.stockPositions.trades&&f.stockPositions.trades.filter(r=>r.scrip===e.tradingsymbol&&r.exit===0).length>0)}getStockPnL(e){if(e.isIndex)return 0;if(f.stockPositions&&f.stockPositions.trades){let i=f.stockPositions.trades.filter(r=>r.scrip===e.tradingsymbol&&r.exit===0);if(i.length>0)return i[0].pnl}return 0}isRowHidden(e){return e.isIndex?!1:this.hideNonWatchlist?this.isStockInHoldings(e)?!1:!e.watchlist:!e.isVisible}isRowHiddenFilter(e){if(e.isIndex)return!1;let i=!1;return this.enableFilter&&(this.enableFilter3M&&e.return4<this.filter3M&&(i=!0),i===!1&&this.enableFilter6M&&e.return5<this.filter6M&&(i=!0),i===!1&&this.enableFilter1Y&&e.return6<this.filter1Y&&(i=!0),i===!1&&this.enableFilter52WHD&&e.dist4<-this.filter52WHD&&(i=!0),i===!1&&this.enableFilterDMA&&e.ltp<e.DMA200)?!0:i}openPopup(e){this.showPopup=!0,this.popupChart2=e,this.plotPopupChart(e)}getChartInfo(e){let i;return e===1&&(i=se.all_rows.find(s=>s.tradingsymbol==="NIFTY 50")),e===2&&(i=this.popupChart2),i?[i.return1,i.return2,i.return3,i.return4,i.return5,i.return6,i.dist4,i.return1_rank,i.return2_rank,i.return3_rank,i.return4_rank,i.return5_rank,i.return6_rank,i.dist4_rank,i.isDist4Within1Month]:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}plotPopupChart(e){let i=new Date().getTimezoneOffset()*6e4,r=[],s=[],o=[],a=[],l=[],c=[],u=[],d=[],h=[],p=[],_=[],A=[],v=[],b=new er.SuperTrend(this.stPeriod,this.stVol,"WEMA"),x=new er.SuperTrend(this.stPeriod,this.stVol,"WEMA"),N=new er.EMA(this.emaPeriod1),T=new er.EMA(this.emaPeriod2),k=new er.EMA(this.emaPeriod1),C=new er.EMA(this.emaPeriod2),M=new er.SMA(this.smaPeriod),O=new er.SMA(this.smaPeriod),F=se.candlesData[e.tradingsymbol],j=se.candlesData[e.index],H=se.candlesData["NIFTY 50"];for(let Me=se.chartDaysToPlot;Me>=0;Me--){let We=null,it=null,Ee=null,Ne=null,xe=null,He=null;if(F){We=this.stocksService.getDataOfDate(e,F,Me),it=this.stocksService.getDataOfDate(e,j,Me),Ee=this.stocksService.getDataOfDate(e,H,Me);let Oe=Object.keys(F)[Object.keys(F).length-1-Me],Jt=null;if(Oe)Jt=Oe.split(" ");else continue;let Ft=Jt[0].split("-"),B=new Date(parseInt(Ft[2]),parseInt(Ft[1])-1,parseInt(Ft[0]),0,0,0,0).getTime(),S=new Date(B-i).toISOString(),I={time:Date.parse(S)/1e3,open:Ee[0],high:Ee[1],low:Ee[2],close:Ee[3]};r.push(I);let P=b.nextValue(Ee[1],Ee[2],Ee[3]),V,Y="green";P&&(V=P.superTrend,P.direction===1&&(Y="red"));let $={time:Date.parse(S)/1e3,value:V,color:Y};s.push($);let fe=N.nextValue(Ee[3]),_e={time:Date.parse(S)/1e3,value:fe,color:"brown"};o.push(_e);let Re=T.nextValue(Ee[3]),be={time:Date.parse(S)/1e3,value:Re,color:"blue"};a.push(be);let Xe=M.nextValue(Ee[3]),Te={time:Date.parse(S)/1e3,value:Xe,color:"red"};h.push(Te);let rn={time:Date.parse(S)/1e3,open:We[0],high:We[1],low:We[2],close:We[3]};l.push(rn);let Mt="#26a69a";parseInt(We[3])<parseInt(We[0])&&(Mt="#ef5350");let Vr={time:Date.parse(S)/1e3,value:We[4],color:Mt};v.push(Vr);let tr=x.nextValue(We[1],We[2],We[3]),jc,Wc="green";tr&&(jc=tr.superTrend,tr.direction===1&&(Wc="red"));let Lh={time:Date.parse(S)/1e3,value:jc,color:Wc};c.push(Lh);let Oa=k.nextValue(We[3]),zc={time:Date.parse(S)/1e3,value:Oa,color:"brown"};u.push(zc);let _3=C.nextValue(We[3]),A3={time:Date.parse(S)/1e3,value:_3,color:"blue"};d.push(A3);let y3=O.nextValue(We[3]),v3={time:Date.parse(S)/1e3,value:y3,color:"red"};p.push(v3),Ne=this.stocksService.getRSReturns(e,F,55,Me),xe=this.stocksService.getRSReturns(e,j,55,Me),He=this.stocksService.getRSReturns(e,H,55,Me);let SS=Ne/xe-1,CS="green";SS<0&&(CS="red");let xS=Ne/He-1,DS="green";xS<0&&(DS="red");let w3={time:Date.parse(S)/1e3,value:SS,color:CS};_.push(w3);let b3={time:Date.parse(S)/1e3,value:xS,color:DS};A.push(b3)}}console.log(e.tradingsymbol,r,l);let Q="chart-popup-1",ie=this.charts[Q];ie&&ie.remove();let ue=Q;console.log("chartId1",ue);let G=dt(ue,{width:1200,height:320,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});G.addSeries(kt).setData(r),this.showST&&G.addSeries(ut,{lineWidth:1}).setData(s),this.showEMA1&&G.addSeries(ut,{lineWidth:1}).setData(o),this.showEMA2&&G.addSeries(ut,{lineWidth:1}).setData(a),this.showSMA&&G.addSeries(ut,{lineWidth:1}).setData(h),G.timeScale().fitContent(),this.charts[Q]=G;let te="chart-popup-2",ve=this.charts[te];ve&&ve.remove();let he=te;console.log("chartId2",he);let ge=dt(he,{width:1200,height:320,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}}),re=ge.addSeries(kt);re.setData(l),this.showST&&ge.addSeries(ut,{lineWidth:1}).setData(c),this.showEMA1&&ge.addSeries(ut,{lineWidth:1}).setData(u),this.showEMA2&&ge.addSeries(ut,{lineWidth:1}).setData(d),this.showSMA&&ge.addSeries(ut,{lineWidth:1}).setData(p);let de=ge.addSeries(C5,{color:"#26a69a",priceFormat:{type:"volume"},priceScaleId:""});de.priceScale().applyOptions({scaleMargins:{top:.7,bottom:0}}),de.setData(v);let me=[],we=[];f.stockPositions&&f.stockPositions.trades&&(we=f.stockPositions.trades.filter(Me=>Me.scrip===e.tradingsymbol)),we.forEach(Me=>{let We=new Date(Me.entryDateTime).getTime(),it=new Date(We-i).toISOString();if(me.push({time:Date.parse(it)/1e3,position:"belowBar",color:"green",shape:"arrowUp",text:`Buy @ ${Me.entry}`}),Me.exit!==0){let Ee=new Date(Me.exitDateTime).getTime(),Ne=new Date(Ee-i).toISOString();me.push({time:Date.parse(Ne)/1e3,position:"aboveBar",color:"red",shape:"arrowDown",text:`Sell @ ${Me.exit}`})}}),console.log("markers",me),xa(re,me),ge.timeScale().fitContent(),this.charts[te]=ge;let qe="chart-popup-3",Ce=this.charts[qe];Ce&&Ce.remove();let je=qe;console.log("chartId3",je);let Ge=dt(je,{width:1200,height:150,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});Ge.addSeries(ut,{lineWidth:2}).setData(_),Ge.addSeries(ut,{lineWidth:1}).setData(A),Ge.timeScale().fitContent(),this.charts[qe]=Ge}closePopup(){this.showPopup=!1}loadStocksData(e){this.stocksService.loadStocksData(e)}plotRSCharts(e){for(let i=0;i<se.all_rows.length;i++){let r=se.all_rows[i];r.index===e.index&&this.plotRSChart(r)}}plotRSChart(e){let i=new Date().getTimezoneOffset()*6e4,r=[],s=[];for(let h=756;h>=0;h--){let p=null,_=null,A=null,v=se.candlesData[e.tradingsymbol],b=se.candlesData[e.index],x=se.candlesData["NIFTY 50"];if(v){p=this.stocksService.getRSReturns(e,v,55,h),_=this.stocksService.getRSReturns(e,b,55,h),A=this.stocksService.getRSReturns(e,x,55,h);let N=p/_-1,T="green";N<0&&(T="red");let k=p/A-1,C="green";k<0&&(C="red");let M=Object.keys(v)[Object.keys(v).length-1-h],O=null;if(M)O=M.split(" ");else continue;let F=O[0].split("-"),j=new Date(parseInt(F[2]),parseInt(F[1])-1,parseInt(F[0]),0,0,0,0).getTime(),H=new Date(j-i).toISOString(),Q={time:Date.parse(H)/1e3,value:N,color:T};r.push(Q);let ie={time:Date.parse(H)/1e3,value:k,color:C};s.push(ie)}}console.log(e.tradingsymbol,r);let o="chart-"+e.tradingsymbol,a=this.charts[o];a&&a.remove();let l=o;console.log("chartId",l);let c=dt(l,{width:280,height:100,timeScale:{timeVisible:!0},crosshair:{mode:Ht.Normal}});c.addSeries(ut,{lineWidth:2}).setData(r),c.addSeries(ut,{lineWidth:1}).setData(s),c.timeScale().fitContent(),this.charts[o]=c}getChartLabel(e){return e==="chart-popup-1"?"NIFTY 50":e==="chart-popup-2"&&this.popupChart2?this.popupChart2.tradingsymbol:null}addToWatchlist(e){if(!se.watchlist.includes(e.tradingsymbol)){se.watchlist.push(e.tradingsymbol),this.saveWatchlistToLS();let i=se.all_rows.filter(r=>r.tradingsymbol===e.tradingsymbol);for(let r=0;r<i.length;r++){let s=i[r];s.watchlist=!0}}}countWatchlist(){let e=0,i=se.all_rows.filter(r=>r.index==="NIFTY 500"&&!r.isIndex);for(let r=0;r<i.length;r++)i[r].watchlist&&e++;return e}removeFromWatchlist(e){let i=se.watchlist.indexOf(e.tradingsymbol);i>-1&&se.watchlist.splice(i,1),this.saveWatchlistToLS();let r=se.all_rows.filter(s=>s.tradingsymbol===e.tradingsymbol);for(let s=0;s<r.length;s++){let o=r[s];o.watchlist=!1}}saveWatchlistToLS(){localStorage.setItem("stocks_watchlist",JSON.stringify(se.watchlist))}loadWatchlistFromLS(){se.watchlist=JSON.parse(localStorage.getItem("stocks_watchlist")),se.watchlist===null&&(se.watchlist=[])}exportWatchlist(){let e="watchlist.csv";console.log("exporting: ",e);let i="";se.watchlist.forEach(a=>{i+=a+`\r
`});let r=new Blob([i],{type:"application/x-msdownload"}),s=URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.target="_blank",document.body.appendChild(o),o.download=e,o.click(),o.parentNode.removeChild(o)}importStocksData(e){this.stocksService.loadStocksDataFromJson(e)}importWatchlist(e){let i=e.target.files[0],r=new FileReader;r.readAsText(i),r.onload=s=>{let l=String(r.result).split(/\r|\n|\r/).filter(function(c){return c!==""});se.watchlist=[];for(let c=0;c<l.length;c++){let d=l[c].split(",")[0];se.watchlist.push(d)}this.saveWatchlistToLS();for(let c=0;c<se.watchlist.length;c++){let u=se.watchlist[c],d=se.all_rows.filter(h=>h.tradingsymbol===u);for(let h=0;h<d.length;h++){let p=d[h];p.watchlist=!0,console.log("Entry from watchlist:",p)}}}}fetchAllIndices(){this.stocksService.loadIndicesData()}filterData(){this.sortTableColumn(this.lastColumnSort)}sortTableColumn(e){console.log("sortTableColumn this.selectedFilters",this.filterCriteria);let i=this.lastColumnSort;e&&(i=e,this.lastColumnSort=e),this.stocksService.sortByReturns(i,this.filterCriteria)}isStockHolding(e){}expandCollapseIndex(e){for(let i=0;i<this.all_rows.length;i++){let r=this.all_rows[i];!r.isIndex&&r.index===e.tradingsymbol&&(r.isVisible=!r.isVisible)}}backtest1(){this.stocksService.backtestMomentum2("NIFTY 500",20,"6MReturns")}backtestIndexMA(e){let i=e.target.files[0],r=new FileReader;r.onload=()=>{let s=r.result;this.stocksService.backtestIndexAboveMA(s)},r.readAsText(i)}static \u0275fac=function(i){return new(i||n)(ye(si),ye(Nn),ye(Ue),ye(lo),ye(Lr),ye(a3))};static \u0275cmp=ci({type:n,selectors:[["app-stocks"]],hostBindings:function(i,r){i&1&&q("keydown",function(o){return r.handleKeyDown(o)},!1,PD)},decls:156,vars:103,consts:[["fileImportInputExpiry",""],["fileImportInputStocks",""],["backtestIndexMA_",""],[1,"custom-popup",3,"ngClass"],[1,"custom-popup-close",3,"click"],[1,"table","table-sm","table-bordered","mb-0",2,"table-layout","fixed"],[1,"chart-popup-table"],[1,"chart-popup-table",3,"ngClass"],[1,"rank"],["class","stockChip stockChipGreen","style","margin-left: 5px;",4,"ngIf"],[1,"mt-2","mb-2"],["class","stockChip stockChipRed",4,"ngIf"],["class","stockChip",4,"ngIf"],["id","chart-popup-1",1,"chart-stock"],[1,"chart-legend"],["id","chart-popup-2",1,"chart-stock"],["id","chart-popup-3",1,"chart-stock"],["type","button",1,"btn","btn-link",3,"click"],["type","file","name","File Upload Expiry","accept",".csv",2,"display","none",3,"change"],["type","file","name","File Upload Stocks","accept",".json",2,"display","none",3,"change"],["type","file","name","backtestIndexMA","accept",".csv",2,"display","none",3,"change"],[1,"form-check","form-check-inline","use-hypo-future-class","ms-4"],["type","checkbox","value","","id","show-st",1,"mt-2","form-check-input",3,"ngModelChange","ngModel"],["for","show-st",1,"form-check-label"],["type","text",1,"form-control","form-control-sm","d-inline-block","ms-2",2,"width","50px",3,"ngModelChange","ngModel"],[1,"form-check","form-check-inline","use-hypo-future-class","ms-2"],["type","checkbox","value","","id","hide-nonwatch",1,"form-check-input",3,"ngModelChange","ngModel"],["for","hide-nonwatch",1,"form-check-label"],["type","checkbox","value","","id","show-ema1",1,"mt-2","form-check-input",3,"ngModelChange","ngModel"],["for","show-ema1",1,"form-check-label"],["type","checkbox","value","","id","show-ema2",1,"mt-2","form-check-input",3,"ngModelChange","ngModel"],["for","show-ema2",1,"form-check-label"],["type","checkbox","value","","id","show-sma",1,"mt-2","form-check-input",3,"ngModelChange","ngModel"],["for","show-ema",1,"form-check-label"],[2,"display","flex","gap","20px","margin","10px 0 20px 0","align-items","center"],["style","display: flex; gap: 5px; align-items: center;",4,"ngFor","ngForOf"],[1,"table","table-sm","table-bordered","shadow","mb-0","text-center"],[1,"table-light"],["scope","col",1,"s-col"],["scope","col",1,"s-col","cursor-pointer",3,"click"],["title","Combined Rank (3+6+12)","scope","col",1,"s-col","cursor-pointer",3,"click"],["scope","col","title","52 Week High Dist %",1,"s-col","cursor-pointer",3,"click"],[4,"ngFor","ngForOf"],[1,"stockChip","stockChipGreen",2,"margin-left","5px"],[1,"stockChip","stockChipRed"],[1,"stockChip"],[2,"display","flex","gap","5px","align-items","center"],["type","checkbox",3,"ngModelChange","change","ngModel"],["type","number",3,"ngModel","disabled","ngModelChange","input",4,"ngIf"],["type","number",3,"ngModelChange","input","ngModel","disabled"],[3,"ngClass"],[2,"width","40px"],["class","cursor-pointer me-3","title","Show/Hide Stocks in this Index",3,"click",4,"ngIf"],["class","cursor-pointer me-3","title","Fetch Data of Stocks in this Index",3,"click",4,"ngIf"],["class","cursor-pointer me-3","title","Plot RS Charts of Stocks in this Index",3,"click",4,"ngIf"],["class","cursor-pointer me-3","title","Add to Watchlist",3,"click",4,"ngIf"],["class","cursor-pointer me-3","title","Remove from Watchlist",3,"click",4,"ngIf"],["title","Open Popup",1,"cursor-pointer",3,"click"],["target","_blank","rel","noopener noreferrer",3,"href"],["style","margin-left: 5px;",4,"ngIf"],[2,"display","flex","align-items","center"],[1,"returns-value"],["class","rank",4,"ngIf"],[1,"text-start"],[4,"ngIf"],["title","Show/Hide Stocks in this Index",1,"cursor-pointer","me-3",3,"click"],["title","Fetch Data of Stocks in this Index",1,"cursor-pointer","me-3",3,"click"],["title","Plot RS Charts of Stocks in this Index",1,"cursor-pointer","me-3",3,"click"],["title","Add to Watchlist",1,"cursor-pointer","me-3",3,"click"],["title","Remove from Watchlist",1,"cursor-pointer","me-3",3,"click"],[2,"margin-left","5px"]],template:function(i,r){if(i&1){let s=pe();g(0,"div",3)(1,"span",4),q("click",function(){return D(s),E(r.closePopup())}),w(2,"\u2715"),m(),g(3,"div")(4,"table",5)(5,"tbody")(6,"tr")(7,"td",6),w(8,"NIFTY 50"),m(),g(9,"td",7),w(10),m(),g(11,"td",7),w(12),m(),g(13,"td",7),w(14),m(),g(15,"td",7),w(16),m(),g(17,"td",7),w(18),m(),g(19,"td",7),w(20),m(),g(21,"td",7),w(22),m()()()(),g(23,"table",5)(24,"tbody")(25,"tr")(26,"td",6),w(27,"Stock"),m(),g(28,"td",7),w(29),g(30,"span",8),w(31),m()(),g(32,"td",7),w(33),g(34,"span",8),w(35),m()(),g(36,"td",7),w(37),g(38,"span",8),w(39),m()(),g(40,"td",7),w(41),g(42,"span",8),w(43),m()(),g(44,"td",7),w(45),g(46,"span",8),w(47),m()(),g(48,"td",7),w(49),g(50,"span",8),w(51),m()(),g(52,"td",7),w(53),g(54,"span",8),w(55),m(),ee(56,cie,2,0,"div",9),m()()()(),g(57,"div",10),ee(58,uie,2,0,"div",11)(59,die,2,0,"div",11)(60,hie,2,0,"div",11)(61,pie,2,0,"div",11)(62,fie,2,0,"div",12)(63,gie,2,0,"div",12)(64,mie,2,0,"div",12),m()(),g(65,"div",13)(66,"div",14),w(67),m()(),g(68,"div",15)(69,"div",14),w(70),m()(),Be(71,"div",16),m(),g(72,"div")(73,"div")(74,"span"),w(75,"RS - Dark Line: Index, Light Line: Nifty 50"),m(),g(76,"button",17),q("click",function(){return D(s),E(r.fetchAllStocksInIndices())}),w(77,"Fetch Stocks List"),m(),g(78,"button",17),q("click",function(){return D(s),E(r.fetchAllIndices())}),w(79,"Fetch Indices Values"),m(),g(80,"button",17),q("click",function(){return D(s),E(r.exportWatchlist())}),w(81,"Export Watchlist"),m(),g(82,"button",17),q("click",function(){D(s);let a=Xn(85);return E(a.click())}),w(83,"Import Watchlist"),m(),g(84,"input",18,0),q("change",function(a){return D(s),E(r.importWatchlist(a))}),m(),g(86,"button",17),q("click",function(){D(s);let a=Xn(89);return E(a.click())}),w(87,"Import Stocks Data"),m(),g(88,"input",19,1),q("change",function(a){return D(s),E(r.importStocksData(a))}),m(),g(90,"button",17),q("click",function(){return D(s),E(r.backtest1())}),w(91,"Backtest1"),m(),g(92,"button",17),q("click",function(){D(s);let a=Xn(95);return E(a.click())}),w(93,"backtestIndexMA"),m(),g(94,"input",20,2),q("change",function(a){return D(s),E(r.backtestIndexMA(a))}),m(),g(96,"div",21)(97,"input",22),z("ngModelChange",function(a){return D(s),U(r.showST,a)||(r.showST=a),E(a)}),m(),g(98,"label",23),w(99,"ST"),m(),g(100,"input",24),z("ngModelChange",function(a){return D(s),U(r.stPeriod,a)||(r.stPeriod=a),E(a)}),m(),g(101,"input",24),z("ngModelChange",function(a){return D(s),U(r.stVol,a)||(r.stVol=a),E(a)}),m()(),g(102,"div",25)(103,"input",26),z("ngModelChange",function(a){return D(s),U(r.hideNonWatchlist,a)||(r.hideNonWatchlist=a),E(a)}),m(),g(104,"label",27),w(105,"Hide Non-Watchlist"),m()(),g(106,"div",25)(107,"input",28),z("ngModelChange",function(a){return D(s),U(r.showEMA1,a)||(r.showEMA1=a),E(a)}),m(),g(108,"label",29),w(109,"EMA 1"),m(),g(110,"input",24),z("ngModelChange",function(a){return D(s),U(r.emaPeriod1,a)||(r.emaPeriod1=a),E(a)}),m()(),g(111,"div",25)(112,"input",30),z("ngModelChange",function(a){return D(s),U(r.showEMA2,a)||(r.showEMA2=a),E(a)}),m(),g(113,"label",31),w(114,"EMA 2"),m(),g(115,"input",24),z("ngModelChange",function(a){return D(s),U(r.emaPeriod2,a)||(r.emaPeriod2=a),E(a)}),m()(),g(116,"div",25)(117,"input",32),z("ngModelChange",function(a){return D(s),U(r.showSMA,a)||(r.showSMA=a),E(a)}),m(),g(118,"label",33),w(119,"SMA"),m(),g(120,"input",24),z("ngModelChange",function(a){return D(s),U(r.smaPeriod,a)||(r.smaPeriod=a),E(a)}),m()()(),g(121,"div",34),ee(122,Aie,5,3,"div",35),g(123,"span"),w(124),m()(),g(125,"table",36)(126,"thead",37)(127,"tr"),Be(128,"th",38),g(129,"th",38),w(130,"Name"),m(),g(131,"th",38),w(132,"LTP"),m(),g(133,"th",38),w(134,"200DMA"),m(),g(135,"th",39),q("click",function(){return D(s),E(r.sortTableColumn("return1"))}),w(136,"1D%"),m(),g(137,"th",39),q("click",function(){return D(s),E(r.sortTableColumn("return2"))}),w(138,"5D%"),m(),g(139,"th",39),q("click",function(){return D(s),E(r.sortTableColumn("return3"))}),w(140,"1M%"),m(),g(141,"th",39),q("click",function(){return D(s),E(r.sortTableColumn("return4"))}),w(142,"3M%"),m(),g(143,"th",39),q("click",function(){return D(s),E(r.sortTableColumn("return5"))}),w(144,"6M%"),m(),g(145,"th",39),q("click",function(){return D(s),E(r.sortTableColumn("return6"))}),w(146,"1Y%"),m(),g(147,"th",40),q("click",function(){return D(s),E(r.sortTableColumn("combined_rank"))}),w(148,"CR"),m(),g(149,"th",39),q("click",function(){return D(s),E(r.sortTableColumn("combinedZ"))}),w(150,"Z"),m(),g(151,"th",41),q("click",function(){return D(s),E(r.sortTableColumn("dist4"))}),w(152,"52WHD%"),m(),Be(153,"th",38),m()(),g(154,"tbody"),ee(155,jie,64,73,"ng-container",42),m()()()}i&2&&(L("ngClass",$t(59,oie,r.showPopup===!1)),y(9),L("ngClass",Pe(61,nn,r.getChartInfo(1)[0]>0,r.getChartInfo(1)[0]<0)),y(),Z("1D%: ",r.getChartInfo(1)[0],""),y(),L("ngClass",Pe(64,nn,r.getChartInfo(1)[1]>0,r.getChartInfo(1)[1]<0)),y(),Z("5D%: ",r.getChartInfo(1)[1],""),y(),L("ngClass",Pe(67,nn,r.getChartInfo(1)[2]>0,r.getChartInfo(1)[2]<0)),y(),Z("1M%: ",r.getChartInfo(1)[2],""),y(),L("ngClass",Pe(70,nn,r.getChartInfo(1)[3]>0,r.getChartInfo(1)[3]<0)),y(),Z("3M%: ",r.getChartInfo(1)[3],""),y(),L("ngClass",Pe(73,nn,r.getChartInfo(1)[4]>0,r.getChartInfo(1)[4]<0)),y(),Z("6M%: ",r.getChartInfo(1)[4],""),y(),L("ngClass",Pe(76,nn,r.getChartInfo(1)[5]>0,r.getChartInfo(1)[5]<0)),y(),Z("1Y%: ",r.getChartInfo(1)[5],""),y(),L("ngClass",Pe(79,nn,r.getChartInfo(1)[6]>=-15,r.getChartInfo(1)[6]<-15)),y(),Z("52WHD%: ",r.getChartInfo(1)[6],""),y(6),L("ngClass",Pe(82,nn,r.getChartInfo(2)[0]>0,r.getChartInfo(2)[0]<0)),y(),Z("1D%: ",r.getChartInfo(2)[0],""),y(2),Z("(",r.getChartInfo(2)[7],")"),y(),L("ngClass",Pe(85,nn,r.getChartInfo(2)[1]>0,r.getChartInfo(2)[1]<0)),y(),Z("5D%: ",r.getChartInfo(2)[1],""),y(2),Z("(",r.getChartInfo(2)[8],")"),y(),L("ngClass",Pe(88,nn,r.getChartInfo(2)[2]>0,r.getChartInfo(2)[2]<0)),y(),Z("1M%: ",r.getChartInfo(2)[2],""),y(2),Z("(",r.getChartInfo(2)[9],")"),y(),L("ngClass",Pe(91,nn,r.getChartInfo(2)[3]>0,r.getChartInfo(2)[3]<0)),y(),Z("3M%: ",r.getChartInfo(2)[3],""),y(2),Z("(",r.getChartInfo(2)[10],")"),y(),L("ngClass",Pe(94,nn,r.getChartInfo(2)[4]>0,r.getChartInfo(2)[4]<0)),y(),Z("6M%: ",r.getChartInfo(2)[4],""),y(2),Z("(",r.getChartInfo(2)[11],")"),y(),L("ngClass",Pe(97,nn,r.getChartInfo(2)[5]>0,r.getChartInfo(2)[5]<0)),y(),Z("1Y%: ",r.getChartInfo(2)[5],""),y(2),Z("(",r.getChartInfo(2)[12],")"),y(),L("ngClass",Pe(100,nn,r.getChartInfo(2)[6]>=-27,r.getChartInfo(2)[6]<-27)),y(),Z("52WHD%: ",r.getChartInfo(2)[6],""),y(2),Z("(",r.getChartInfo(2)[13],")"),y(),L("ngIf",r.getChartInfo(2)[14]),y(2),L("ngIf",r.isStockInIndex("NIFTYM150MOMNTM50",r.popupChart2==null?null:r.popupChart2.tradingsymbol)),y(),L("ngIf",r.isStockInIndex("MOMENTUM50",r.popupChart2==null?null:r.popupChart2.tradingsymbol)),y(),L("ngIf",r.isStockInIndex("NIFTY MULTI MQ 50",r.popupChart2==null?null:r.popupChart2.tradingsymbol)),y(),L("ngIf",r.isStockInIndex("NIFTY ALPHA 50",r.popupChart2==null?null:r.popupChart2.tradingsymbol)),y(),L("ngIf",r.isStockInIndex("NIFTY 50",r.popupChart2==null?null:r.popupChart2.tradingsymbol)),y(),L("ngIf",r.isStockInIndex("NIFTY 100",r.popupChart2==null?null:r.popupChart2.tradingsymbol)),y(),L("ngIf",r.isStockInIndex("NIFTY MIDCAP 150",r.popupChart2==null?null:r.popupChart2.tradingsymbol)),y(3),J(r.getChartLabel("chart-popup-1")),y(3),J(r.getChartLabel("chart-popup-2")),y(27),W("ngModel",r.showST),y(3),W("ngModel",r.stPeriod),y(),W("ngModel",r.stVol),y(2),W("ngModel",r.hideNonWatchlist),y(4),W("ngModel",r.showEMA1),y(3),W("ngModel",r.emaPeriod1),y(2),W("ngModel",r.showEMA2),y(3),W("ngModel",r.emaPeriod2),y(2),W("ngModel",r.showSMA),y(3),W("ngModel",r.smaPeriod),y(2),L("ngForOf",r.filterKeys),y(2),Z("Watchlist: ",r.countWatchlist(),""),y(31),L("ngForOf",r.all_rows))},dependencies:[Xs,Tr,sa,ra,Js,cs,mr,Fo,gr,Xr],styles:[`[_nghost-%COMP%], input[_ngcontent-%COMP%], .input-group-text[_ngcontent-%COMP%], select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-size:12px!important}.indexRow[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#d8f5ff;font-weight:700}.niftyRow[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#c3e4ef}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.custom-popup[_ngcontent-%COMP%]{position:fixed;top:0;width:1240px;height:100%;right:0;background:#fff;padding:20px;box-shadow:#0000003d 0 3px 8px;overflow:scroll;z-index:1021}.custom-popup-close[_ngcontent-%COMP%]{cursor:pointer;font-size:18px;position:absolute;right:5px;top:0}.green[_ngcontent-%COMP%]{color:green}.red[_ngcontent-%COMP%]{color:tomato}.chart-stock[_ngcontent-%COMP%]{position:relative}.chart-legend[_ngcontent-%COMP%]{position:absolute;left:4px;top:2px;z-index:2;font-size:18px;line-height:28px;font-weight:300;color:#000}.chart-popup-table[_ngcontent-%COMP%]{width:120px;white-space:nowrap}.watchlist-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#e1ebfe!important}.notmatchingfilter-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#d3d3d3}.stockChip[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:4px;display:inline-block;margin-right:4px;padding:0 4px}.stockChipRed[_ngcontent-%COMP%]{background:tomato;color:#fff}.stockChipGreen[_ngcontent-%COMP%]{background:#28a745;color:#fff}.rank[_ngcontent-%COMP%]{color:#000;font-size:10px;margin-left:5px}.returns-value[_ngcontent-%COMP%]{width:50px;text-align:right;display:inline-block}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1020;background:#fff}.rankShortlisted[_ngcontent-%COMP%]{background:#c9eec9!important}
/*# sourceMappingURL=stocks.component-NIVTV23B.css.map */`]})}return n})();var u3={number:"2.1",buildTime:"25-Dec-2025 15:47:35 IST"};var d3=(()=>{class n{http;constructor(e){this.http=e}static \u0275fac=function(i){return new(i||n)(ae(Ct))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zie(n,t){if(n&1){let e=pe();g(0,"button",29),q("click",function(){D(e);let r=R();return r.searchQuery="",E(r.applyFilters())}),w(1," \xD7 "),m()}}function Uie(n,t){if(n&1){let e=pe();g(0,"div",30),q("click",function(){let r=D(e).$implicit,s=R();return E(s.toggleFilter(r))}),w(1),m()}if(n&2){let e=t.$implicit;Wi("active",e.active),y(),Z(" ",e.label," ")}}function Hie(n,t){if(n&1){let e=pe();g(0,"div",30),q("click",function(){let r=D(e).$implicit,s=R();return E(s.toggleFilter(r))}),w(1),m()}if(n&2){let e=t.$implicit;Wi("active",e.active),y(),Z(" ",e.label," ")}}function Yie(n,t){n&1&&(g(0,"span",46),w(1,"Easy Apply"),m())}function Gie(n,t){n&1&&(g(0,"span",47),w(1,"Applied"),m())}function Kie(n,t){n&1&&(g(0,"span",48),w(1,"Clicked"),m())}function Jie(n,t){n&1&&(g(0,"span",49),w(1,"Not Applicable"),m())}function Xie(n,t){if(n&1){let e=pe();g(0,"div",31),q("click",function(){let r=D(e).$implicit,s=R();return E(s.selectJob(r))}),g(1,"div",32)(2,"h3",33),w(3),m(),g(4,"div",34),ee(5,Yie,2,0,"span",35)(6,Gie,2,0,"span",36)(7,Kie,2,0,"span",37)(8,Jie,2,0,"span",38),m()(),g(9,"div",39),w(10),m(),g(11,"div",40)(12,"span",41),w(13),m(),g(14,"span",42),w(15,"\u2022"),m(),g(16,"span",43),w(17),m()(),g(18,"div",44),q("click",function(r){return D(e),E(r.stopPropagation())}),g(19,"label")(20,"input",45),q("change",function(r){let s=D(e).$implicit,o=R();return E(o.onNotApplicableChange(s,r))}),m(),g(21,"span"),w(22,"Not Applicable"),m()()()()}if(n&2){let e=t.$implicit,i=R();Wi("selected",i.selectedJob===e),y(3),J(e.job_title),y(2),L("ngIf",e.easy_apply),y(),L("ngIf",e.applied),y(),L("ngIf",i.isClicked(e)),y(),L("ngIf",i.isNotApplicable(e)),y(2),J(e.company_name),y(3),J(e.location),y(4),J(e.posted_time),y(3),L("checked",i.isNotApplicable(e))}}function $ie(n,t){n&1&&(g(0,"div",50)(1,"p"),w(2,"No jobs found matching the current filters."),m(),g(3,"p",51),w(4,"Try adjusting your filters or upload job data files."),m()())}function Qie(n,t){n&1&&(g(0,"div",52),cf(),g(1,"svg",53),Be(2,"circle",54)(3,"path",55),m(),uf(),g(4,"p"),w(5,"Select a job to view details"),m()())}function Zie(n,t){n&1&&(g(0,"span",46),w(1,"Easy Apply"),m())}function ere(n,t){n&1&&(g(0,"span",47),w(1,"Applied"),m())}function tre(n,t){if(n&1&&(g(0,"span",72),w(1),m()),n&2){let e=t.$implicit;Wi("b2b",e==="B2B")("saas",e==="SaaS")("b2c",e==="B2C"),y(),Z(" ",e," ")}}function nre(n,t){if(n&1&&(g(0,"div",70),ee(1,tre,2,7,"span",71),m()),n&2){let e=R(2);y(),L("ngForOf",e.getJobKeywords(e.selectedJob))}}function ire(n,t){if(n&1&&(g(0,"span",76),w(1),m()),n&2){let e=R(3);y(),Z(" Clicked ",e.getClickedDate(e.selectedJob)," ")}}function rre(n,t){if(n&1){let e=pe();g(0,"div",73)(1,"a",74),q("click",function(r){D(e);let s=R(2);return E(s.onExternalApplicationClick(s.selectedJob,r))}),w(2," External Application "),m(),ee(3,ire,2,1,"span",75),m()}if(n&2){let e=R(2);y(),L("href",e.selectedJob.external_link,wl),y(2),L("ngIf",e.getClickedDate(e.selectedJob))}}function sre(n,t){if(n&1&&(g(0,"a",80)(1,"div",81),w(2),m(),g(3,"div",82),w(4),m()()),n&2){let e=t.$implicit;L("href",e.profile_link,wl),y(2),J(e.name.charAt(0)),y(2),J(e.name)}}function ore(n,t){if(n&1&&(g(0,"div",77)(1,"h3"),w(2,"Hiring Team"),m(),g(3,"div",78),ee(4,sre,5,3,"a",79),m()()),n&2){let e=R(2);y(4),L("ngForOf",e.selectedJob.hiring_team)}}function are(n,t){if(n&1&&(g(0,"div",86)(1,"div",87),w(2),m(),g(3,"div",88),w(4,"Total Applicants"),m()()),n&2){let e=R(3);y(2),J(e.selectedJob.applicant_stats.total_applicants)}}function lre(n,t){if(n&1&&(g(0,"div",86)(1,"div",87),w(2),m(),g(3,"div",88),w(4,"Recent Applicants"),m()()),n&2){let e=R(3);y(2),J(e.selectedJob.applicant_stats.recent_applicants)}}function cre(n,t){if(n&1&&(g(0,"div",83)(1,"h3"),w(2,"Applicant Statistics"),m(),g(3,"div",84),ee(4,are,5,1,"div",85)(5,lre,5,1,"div",85),m()()),n&2){let e=R(2);y(4),L("ngIf",e.selectedJob.applicant_stats.total_applicants),y(),L("ngIf",e.selectedJob.applicant_stats.recent_applicants)}}function ure(n,t){if(n&1){let e=pe();g(0,"div",56)(1,"div",57)(2,"h2"),w(3),m(),g(4,"div",58),ee(5,Zie,2,0,"span",35)(6,ere,2,0,"span",36),m()(),g(7,"div",59),w(8),m(),g(9,"div",60)(10,"span",41),w(11),m(),g(12,"span",42),w(13,"\u2022"),m(),g(14,"span",43),w(15),m()(),g(16,"div",61)(17,"label")(18,"input",45),q("change",function(r){D(e);let s=R();return E(s.onNotApplicableChange(s.selectedJob,r))}),m(),g(19,"span"),w(20,"Mark as Not Applicable"),m()()(),ee(21,nre,2,1,"div",62),g(22,"div",63)(23,"a",64),w(24," View on LinkedIn "),m(),ee(25,rre,4,2,"div",65),m(),ee(26,ore,5,1,"div",66)(27,cre,6,2,"div",67),g(28,"div",68)(29,"h3"),w(30,"Job Description"),m(),Be(31,"div",69),m()()}if(n&2){let e=R();y(3),J(e.selectedJob.job_title),y(2),L("ngIf",e.selectedJob.easy_apply),y(),L("ngIf",e.selectedJob.applied),y(2),J(e.selectedJob.company_name),y(3),J(e.selectedJob.location),y(4),J(e.selectedJob.posted_time),y(3),L("checked",e.isNotApplicable(e.selectedJob)),y(3),L("ngIf",e.getJobKeywords(e.selectedJob).length>0),y(2),L("href",e.selectedJob.job_link,wl),y(2),L("ngIf",e.selectedJob.external_link),y(),L("ngIf",e.selectedJob.hiring_team&&e.selectedJob.hiring_team.length>0),y(),L("ngIf",e.selectedJob.applicant_stats&&(e.selectedJob.applicant_stats.total_applicants||e.selectedJob.applicant_stats.recent_applicants)),y(4),L("innerHTML",e.formatJobDescription(e.selectedJob.job_description),kD)}}var h3=(()=>{class n{linkedinService;constructor(e){this.linkedinService=e}ngOnInit(){}allJobs=[];filteredJobs=[];selectedJob=null;searchQuery="";filterChips=[{label:"Not Applied",active:!0,type:"notApplied"},{label:"Not Easy Apply",active:!1,type:"notEasyApply"},{label:"Not Clicked",active:!1,type:"notClicked"},{label:"Hide Not Applicable",active:!1,type:"notApplicable"},{label:"Sort by Time",active:!1,type:"sortByTime"},{label:"Past 24 Hours",active:!1,type:"past24Hours"}];locationChips=[{label:"Germany",active:!1,type:"location",value:"Germany"},{label:"Spain",active:!1,type:"location",value:"Spain"},{label:"Denmark",active:!1,type:"location",value:"Denmark"},{label:"Netherlands",active:!1,type:"location",value:"Netherlands"},{label:"Austria",active:!1,type:"location",value:"Austria"},{label:"Dubai",active:!1,type:"location",value:"Dubai"},{label:"Sweden",active:!1,type:"location",value:"Sweden"},{label:"Finland",active:!1,type:"location",value:"Finland"},{label:"Singapore",active:!1,type:"location",value:"Singapore"}];onFileSelected(e){let i=e.target;if(!i.files||i.files.length===0)return;let r=Array.from(i.files),s=0;r.forEach(o=>{let a=new FileReader;a.onload=l=>{try{let c=l.target?.result,u=JSON.parse(c);u.jobs&&Array.isArray(u.jobs)&&(this.allJobs=[...this.allJobs,...u.jobs])}catch(c){console.error("Error parsing JSON file:",c)}s++,s===r.length&&this.applyFilters()},a.readAsText(o)})}toggleFilter(e){e.active=!e.active,this.applyFilters()}onSearchChange(e){let i=e.target;this.searchQuery=i.value,this.applyFilters()}getTotalJobsCount(){return this.allJobs.length}getRemainingJobsCount(){return this.allJobs.filter(e=>{if(e.applied||e.easy_apply)return!1;if(e.external_link){let i=this.generateJobKey(e);if(localStorage.getItem(i))return!1}return!this.isNotApplicable(e)}).length}applyFilters(){let e=[...this.allJobs];if(this.searchQuery.trim()){let u=this.searchQuery.toLowerCase();e=e.filter(d=>d.job_title.toLowerCase().includes(u)||d.company_name.toLowerCase().includes(u)||d.location.toLowerCase().includes(u)||d.posted_time.toLowerCase().includes(u)||d.job_description&&d.job_description.toLowerCase().includes(u)||d.external_link&&d.external_link.toLowerCase().includes(u)||d.hiring_team.some(h=>h.name.toLowerCase().includes(u)))}this.filterChips.find(u=>u.type==="notApplied")?.active&&(e=e.filter(u=>!u.applied)),this.filterChips.find(u=>u.type==="notEasyApply")?.active&&(e=e.filter(u=>!u.easy_apply)),this.filterChips.find(u=>u.type==="notClicked")?.active&&(e=e.filter(u=>{if(!u.external_link)return!0;let d=this.generateJobKey(u);return!localStorage.getItem(d)})),this.filterChips.find(u=>u.type==="notApplicable")?.active&&(e=e.filter(u=>!this.isNotApplicable(u)));let a=this.locationChips.filter(u=>u.active);a.length>0&&(e=e.filter(u=>a.some(d=>u.location.toLowerCase().includes(d.value.toLowerCase())))),this.filterChips.find(u=>u.type==="past24Hours")?.active&&(e=e.filter(u=>this.isWithinPast24Hours(u.posted_time))),this.filterChips.find(u=>u.type==="sortByTime")?.active&&e.sort((u,d)=>this.parseTimeToMinutes(u.posted_time)-this.parseTimeToMinutes(d.posted_time)),this.filteredJobs=e,this.selectedJob&&!this.filteredJobs.includes(this.selectedJob)&&(this.selectedJob=null)}parseTimeToMinutes(e){let i=e.toLowerCase().replace("reposted","").trim(),r=i.match(/(\d+)\s*minute/);if(r)return parseInt(r[1]);let s=i.match(/(\d+)\s*hour/);if(s)return parseInt(s[1])*60;let o=i.match(/(\d+)\s*day/);if(o)return parseInt(o[1])*1440;let a=i.match(/(\d+)\s*week/);if(a)return parseInt(a[1])*10080;let l=i.match(/(\d+)\s*month/);return l?parseInt(l[1])*43200:999999}isWithinPast24Hours(e){return this.parseTimeToMinutes(e)<=1440}selectJob(e){this.selectedJob=e}formatJobDescription(e){return e?e.replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>").replace(/^/,"<p>").replace(/$/,"</p>"):""}generateJobKey(e){return`job_${e.job_title}_${e.company_name}_${e.location}`.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,"").toLowerCase()}onExternalApplicationClick(e,i){i.preventDefault();let r=this.generateJobKey(e),s={jobTitle:e.job_title,companyName:e.company_name,location:e.location,clickedDate:new Date().toISOString()};localStorage.setItem(r,JSON.stringify(s)),window.open(e.external_link,"_blank","noopener,noreferrer");let o=this.filteredJobs.findIndex(a=>a===this.selectedJob);o!==-1&&(this.filteredJobs=[...this.filteredJobs],this.selectedJob=this.filteredJobs[o])}getClickedDate(e){let i=this.generateJobKey(e),r=localStorage.getItem(i);if(!r)return null;try{let s=JSON.parse(r),o=new Date(s.clickedDate);return this.formatClickedDate(o)}catch{return null}}formatClickedDate(e){let r=new Date().getTime()-e.getTime(),s=Math.floor(r/(1e3*60*60*24));if(s===0)return"today";if(s===1)return"yesterday";if(s<7)return`${s} days ago`;{let o=e.getMonth()+1,a=e.getDate(),l=e.getFullYear();return`${o}/${a}/${l}`}}getJobKeywords(e){if(!e.job_description)return[];let i=e.job_description.toLowerCase(),r=[];return i.includes("b2b")&&r.push("B2B"),i.includes("saas")&&r.push("SaaS"),i.includes("b2c")&&r.push("B2C"),r}generateNotApplicableKey(e){return`not_applicable_${e.job_title}_${e.company_name}_${e.location}`.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,"").toLowerCase()}isNotApplicable(e){let i=this.generateNotApplicableKey(e);return localStorage.getItem(i)==="true"}isClicked(e){if(!e.external_link)return!1;let i=this.generateJobKey(e);return localStorage.getItem(i)!==null}onNotApplicableChange(e,i){let r=i.target,s=this.generateNotApplicableKey(e);r.checked?localStorage.setItem(s,"true"):localStorage.removeItem(s);let o=this.filteredJobs.findIndex(a=>a===this.selectedJob);o!==-1&&(this.filteredJobs=[...this.filteredJobs],this.selectedJob=this.filteredJobs[o])}static \u0275fac=function(i){return new(i||n)(ye(d3))};static \u0275cmp=ci({type:n,selectors:[["app-linkedin"]],decls:39,vars:11,consts:[[1,"job-listings-container"],[1,"upload-section"],["for","file-upload",1,"upload-button"],["width","20","height","20","viewBox","0 0 20 20","fill","none"],["d","M10 4V16M4 10H16","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["id","file-upload","type","file","multiple","","accept",".json",2,"display","none",3,"change"],[1,"job-counts"],[1,"count-item"],[1,"count-label"],[1,"count-value"],[1,"count-item","remaining"],[1,"search-container"],["width","20","height","20","viewBox","0 0 20 20","fill","none",1,"search-icon"],["cx","8.5","cy","8.5","r","5.5","stroke","currentColor","stroke-width","2"],["d","M12.5 12.5L16.5 16.5","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["type","text","placeholder","Search jobs by title, company, location, keywords...",1,"search-input",3,"ngModelChange","input","ngModel"],["class","clear-search",3,"click",4,"ngIf"],[1,"filter-chips-container"],["class","filter-chip",3,"active","click",4,"ngFor","ngForOf"],[1,"filter-chips-container","location-chips"],[1,"chips-label"],[1,"panels-container"],[1,"left-panel"],[1,"job-count"],["class","job-item",3,"selected","click",4,"ngFor","ngForOf"],["class","no-jobs",4,"ngIf"],[1,"right-panel"],["class","no-selection",4,"ngIf"],["class","job-details",4,"ngIf"],[1,"clear-search",3,"click"],[1,"filter-chip",3,"click"],[1,"job-item",3,"click"],[1,"job-item-header"],[1,"job-title"],[1,"job-badges"],["class","badge easy-apply",4,"ngIf"],["class","badge applied",4,"ngIf"],["class","badge clicked",4,"ngIf"],["class","badge not-applicable",4,"ngIf"],[1,"company-name"],[1,"job-meta"],[1,"location"],[1,"separator"],[1,"posted-time"],[1,"job-item-checkbox",3,"click"],["type","checkbox",3,"change","checked"],[1,"badge","easy-apply"],[1,"badge","applied"],[1,"badge","clicked"],[1,"badge","not-applicable"],[1,"no-jobs"],[1,"hint"],[1,"no-selection"],["width","80","height","80","viewBox","0 0 80 80","fill","none"],["cx","40","cy","40","r","30","stroke","#ccc","stroke-width","2"],["d","M40 30V50M30 40H50","stroke","#ccc","stroke-width","2","stroke-linecap","round"],[1,"job-details"],[1,"details-header"],[1,"details-badges"],[1,"details-company"],[1,"details-meta"],[1,"not-applicable-checkbox"],["class","keyword-tags",4,"ngIf"],[1,"details-actions"],["target","_blank","rel","noopener noreferrer",1,"action-button","primary",3,"href"],["class","external-app-container",4,"ngIf"],["class","hiring-team",4,"ngIf"],["class","applicant-stats",4,"ngIf"],[1,"job-description"],[3,"innerHTML"],[1,"keyword-tags"],["class","keyword-tag",3,"b2b","saas","b2c",4,"ngFor","ngForOf"],[1,"keyword-tag"],[1,"external-app-container"],["target","_blank","rel","noopener noreferrer",1,"action-button","secondary",3,"click","href"],["class","clicked-date",4,"ngIf"],[1,"clicked-date"],[1,"hiring-team"],[1,"team-members"],["target","_blank","rel","noopener noreferrer","class","team-member",3,"href",4,"ngFor","ngForOf"],["target","_blank","rel","noopener noreferrer",1,"team-member",3,"href"],[1,"member-avatar"],[1,"member-name"],[1,"applicant-stats"],[1,"stats-grid"],["class","stat-item",4,"ngIf"],[1,"stat-item"],[1,"stat-value"],[1,"stat-label"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"div",1)(2,"label",2),cf(),g(3,"svg",3),Be(4,"path",4),m(),w(5," Upload JSON Files "),m(),uf(),g(6,"input",5),q("change",function(o){return r.onFileSelected(o)}),m()(),g(7,"div",6)(8,"div",7)(9,"span",8),w(10,"Total Jobs:"),m(),g(11,"span",9),w(12),m()(),g(13,"div",10)(14,"span",8),w(15,"Remaining Jobs:"),m(),g(16,"span",9),w(17),m()()(),g(18,"div",11),cf(),g(19,"svg",12),Be(20,"circle",13)(21,"path",14),m(),uf(),g(22,"input",15),z("ngModelChange",function(o){return U(r.searchQuery,o)||(r.searchQuery=o),o}),q("input",function(o){return r.onSearchChange(o)}),m(),ee(23,zie,2,0,"button",16),m(),g(24,"div",17),ee(25,Uie,2,3,"div",18),m(),g(26,"div",19)(27,"div",20),w(28,"Locations:"),m(),ee(29,Hie,2,3,"div",18),m(),g(30,"div",21)(31,"div",22)(32,"div",23),w(33),m(),ee(34,Xie,23,11,"div",24)(35,$ie,5,0,"div",25),m(),g(36,"div",26),ee(37,Qie,6,0,"div",27)(38,ure,32,13,"div",28),m()()()),i&2&&(y(12),J(r.getTotalJobsCount()),y(5),J(r.getRemainingJobsCount()),y(5),W("ngModel",r.searchQuery),y(),L("ngIf",r.searchQuery),y(2),L("ngForOf",r.filterChips),y(4),L("ngForOf",r.locationChips),y(4),Z("",r.filteredJobs.length," jobs found"),y(),L("ngForOf",r.filteredJobs),y(),L("ngIf",r.filteredJobs.length===0),y(2),L("ngIf",!r.selectedJob),y(),L("ngIf",r.selectedJob))},dependencies:[Xs,Tr,Js,cs,mr,gr,Xr],styles:[`.job-listings-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:20px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif}.upload-section[_ngcontent-%COMP%]{margin-bottom:20px}.upload-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;background:#0a66c2;color:#fff;border-radius:24px;cursor:pointer;font-weight:600;font-size:14px;transition:background .2s}.upload-button[_ngcontent-%COMP%]:hover{background:#004182}.job-counts[_ngcontent-%COMP%]{display:flex;gap:24px;margin-bottom:16px;padding:16px;background:#fff;border-radius:8px;border:1px solid #e5e7eb}.count-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.count-item.remaining[_ngcontent-%COMP%]{padding-left:24px;border-left:2px solid #e5e7eb}.count-label[_ngcontent-%COMP%]{font-size:14px;color:#666;font-weight:500}.count-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#0a66c2}.count-item.remaining[_ngcontent-%COMP%]   .count-value[_ngcontent-%COMP%]{color:#16a34a}.search-container[_ngcontent-%COMP%]{position:relative;margin-bottom:16px}.search-icon[_ngcontent-%COMP%]{position:absolute;left:16px;top:50%;transform:translateY(-50%);color:#9ca3af;pointer-events:none}.search-input[_ngcontent-%COMP%]{width:100%;padding:14px 48px;border:2px solid #e5e7eb;border-radius:8px;font-size:15px;transition:all .2s;outline:none}.search-input[_ngcontent-%COMP%]:focus{border-color:#0a66c2;box-shadow:0 0 0 3px #0a66c21a}.clear-search[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:#e5e7eb;border:none;width:28px;height:28px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:20px;color:#666;transition:all .2s}.clear-search[_ngcontent-%COMP%]:hover{background:#d1d5db}.filter-chips-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:20px;padding:16px;background:#f3f6f8;border-radius:8px}.filter-chip[_ngcontent-%COMP%]{padding:8px 16px;background:#fff;border:1px solid #d0d5dd;border-radius:20px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s;-webkit-user-select:none;user-select:none}.filter-chip[_ngcontent-%COMP%]:hover{border-color:#0a66c2;background:#f0f7ff}.filter-chip.active[_ngcontent-%COMP%]{background:#0a66c2;color:#fff;border-color:#0a66c2}.filter-chips-container.location-chips[_ngcontent-%COMP%]{background:#fef9f3;border:1px solid #fed7aa;display:flex;align-items:center}.chips-label[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#92400e;margin-right:8px;white-space:nowrap}.panels-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:400px 1fr;gap:20px;min-height:600px}.left-panel[_ngcontent-%COMP%]{border:1px solid #d0d5dd;border-radius:8px;background:#fff;overflow-y:auto;max-height:800px}.job-count[_ngcontent-%COMP%]{padding:16px;font-size:14px;color:#666;border-bottom:1px solid #e5e5e5;font-weight:500}.job-item[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #e5e5e5;cursor:pointer;transition:background .2s}.job-item[_ngcontent-%COMP%]:hover{background:#f3f6f8}.job-item.selected[_ngcontent-%COMP%]{background:#eef3f8;border-left:3px solid #0a66c2}.job-item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:12px;margin-bottom:8px}.job-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#000;margin:0;line-height:1.3;flex:1}.job-badges[_ngcontent-%COMP%]{display:flex;gap:4px;flex-shrink:0}.badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:11px;font-weight:600;text-transform:uppercase;white-space:nowrap}.badge.easy-apply[_ngcontent-%COMP%]{background:#e7f3e7;color:#057642}.badge.applied[_ngcontent-%COMP%]{background:#e0e7ff;color:#3538cd}.badge.clicked[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.badge.not-applicable[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.company-name[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-bottom:6px}.job-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:13px;color:#666;margin-bottom:8px}.job-item-checkbox[_ngcontent-%COMP%]{padding-top:8px;margin-top:8px;border-top:1px solid #f0f0f0}.job-item-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;-webkit-user-select:none;user-select:none;font-size:13px;color:#666;padding:4px 0}.job-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer;accent-color:#dc2626;margin:0}.job-item-checkbox[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.job-item-checkbox[_ngcontent-%COMP%]:hover   label[_ngcontent-%COMP%]{color:#dc2626}.separator[_ngcontent-%COMP%]{color:#d0d5dd}.no-jobs[_ngcontent-%COMP%]{padding:60px 20px;text-align:center;color:#666}.no-jobs[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0}.no-jobs[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:14px;color:#999}.right-panel[_ngcontent-%COMP%]{border:1px solid #d0d5dd;border-radius:8px;background:#fff;overflow-y:auto;max-height:800px}.no-selection[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:400px;color:#999;gap:16px}.job-details[_ngcontent-%COMP%]{padding:24px}.details-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:16px;margin-bottom:12px}.details-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#000;margin:0;line-height:1.3}.details-badges[_ngcontent-%COMP%]{display:flex;gap:8px;flex-shrink:0}.details-company[_ngcontent-%COMP%]{font-size:18px;color:#666;margin-bottom:12px;font-weight:500}.details-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#666;margin-bottom:16px}.not-applicable-checkbox[_ngcontent-%COMP%]{margin-bottom:20px;padding:12px;background:#f9fafb;border-radius:8px;border:1px solid #e5e7eb}.not-applicable-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer;-webkit-user-select:none;user-select:none}.not-applicable-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer;accent-color:#dc2626}.not-applicable-checkbox[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#374151}.keyword-tags[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:16px}.keyword-tag[_ngcontent-%COMP%]{padding:6px 12px;border-radius:6px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.keyword-tag.b2b[_ngcontent-%COMP%]{background:#e0f2fe;color:#0369a1;border:1px solid #7dd3fc}.keyword-tag.saas[_ngcontent-%COMP%]{background:#f0fdf4;color:#15803d;border:1px solid #86efac}.keyword-tag.b2c[_ngcontent-%COMP%]{background:#fef3c7;color:#a16207;border:1px solid #fde047}.details-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:32px;flex-wrap:wrap}.external-app-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.clicked-date[_ngcontent-%COMP%]{font-size:13px;color:#15803d;font-weight:500;padding:8px 12px;background:#f0fdf4;border-radius:6px;border:1px solid #bbf7d0;white-space:nowrap}.action-button[_ngcontent-%COMP%]{padding:12px 24px;border-radius:24px;font-weight:600;font-size:14px;text-decoration:none;text-align:center;transition:all .2s;display:inline-block}.action-button.primary[_ngcontent-%COMP%]{background:#0a66c2;color:#fff}.action-button.primary[_ngcontent-%COMP%]:hover{background:#004182}.action-button.secondary[_ngcontent-%COMP%]{background:#fff;color:#0a66c2;border:1px solid #0a66c2}.action-button.secondary[_ngcontent-%COMP%]:hover{background:#f0f7ff}.hiring-team[_ngcontent-%COMP%]{margin-bottom:32px}.hiring-team[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin:0 0 16px;color:#000}.team-members[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px}.team-member[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;background:#f3f6f8;border-radius:8px;text-decoration:none;color:#000;transition:background .2s}.team-member[_ngcontent-%COMP%]:hover{background:#e5e8eb}.member-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:#0a66c2;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:16px}.member-name[_ngcontent-%COMP%]{font-weight:500;font-size:14px}.applicant-stats[_ngcontent-%COMP%]{margin-bottom:32px}.applicant-stats[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin:0 0 16px;color:#000}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:16px}.stat-item[_ngcontent-%COMP%]{padding:16px;background:#f3f6f8;border-radius:8px;text-align:center}.stat-value[_ngcontent-%COMP%]{font-size:28px;font-weight:600;color:#0a66c2;margin-bottom:4px}.stat-label[_ngcontent-%COMP%]{font-size:13px;color:#666}.job-description[_ngcontent-%COMP%]{margin-top:32px;padding-top:32px;border-top:1px solid #e5e5e5}.job-description[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin:0 0 16px;color:#000}.job-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.6;color:#333;margin:12px 0;font-size:16px}.job-description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:16px;line-height:1.6;color:#333}@media (max-width: 1024px){.panels-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.left-panel[_ngcontent-%COMP%], .right-panel[_ngcontent-%COMP%]{max-height:none}}.left-panel[_ngcontent-%COMP%]::-webkit-scrollbar, .right-panel[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.left-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track, .right-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.left-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .right-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:4px}.left-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .right-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}
/*# sourceMappingURL=linkedin.component-7EQWVXBZ.css.map */`]})}return n})();var p3=(()=>{class n{http;holdingsMap={"ADANIPORTS.NS":{holding:!1,average:null},"ASIANPAINT.NS":{holding:!0,average:3098.95}};backtestMap={};shortlistedStocks=[];append="";auth="";marketwatch="";from_date="";to_date="";expiry_date="";instruments=[];delay=500;data={};niftyReturn={};constructor(e){this.http=e}getZerodhaInstruments(e,i,r,s,o,a=!1){this.append=e,this.auth=i,this.from_date=r,this.to_date=s,this.expiry_date=o;let l={responseType:"text"};this.http.get("https://api.kite.trade/instruments",l).subscribe(u=>{console.log("zerodha instruments",u);let h=u.split(/\r|\n|\r/).filter(function(p){return p!==""});this.instruments=[];for(let p=1;p<h.length;p++){let _=h[p].split(","),A=_[2],v=_[3].replaceAll('"',""),b=_[5];a?(v==="NIFTY"&&b===this.expiry_date||v==="NIFTY 50")&&this.instruments.push(h[p]):((v==="NIFTY"||v==="BANKNIFTY"||v==="FINNIFTY"||v==="MIDCPNIFTY"||v==="SENSEX"||v==="BANKEX")&&b===this.expiry_date||v==="NIFTY 50"||v==="NIFTY BANK"||v==="NIFTY FIN SERVICE"||v==="NIFTY MIDCAP SELECT (MIDCPNIFTY)"||A==="SENSEX"||v==="BSE INDEX BANKEX")&&this.instruments.push(h[p])}console.log("Instruments to fetch: ",this.instruments.length);for(let p=0;p<this.instruments.length;p++)setTimeout(()=>{let _=this.instruments[p];console.log("item",p,_);let A=!1;p===this.instruments.length-1&&(A=!0,console.log("last item",this.instruments.length-1)),this.getItem(_,A)},p*this.delay)},u=>{console.log("zerodha instruments error",u)})}fetchCandles(e,i,r,s,o,a){this.append=e,this.auth=i,this.marketwatch=r,this.from_date=s,this.to_date=o,this.expiry_date=a;for(let l=0;l<this.instruments.length;l++)setTimeout(()=>{let c=this.instruments[l];console.log("item",l,c),this.getItem(c,!1)},l*this.delay)}getItem(e,i){let s={responseType:"json",headers:new Fe({authorization:this.auth})},o=e.split(","),a=o[0],l=o[1],c=o[2],u=o[3].replaceAll('"',""),d=o[4],h=o[5],p=o[6],_=o[9],A=u+this.append+p+_;u==="NIFTY 50"&&(A="NIFTY"),u==="NIFTY BANK"&&(A="BANKNIFTY"),u==="NIFTY FIN SERVICE"&&(A="NIFTY FIN SERVICE"),u==="NIFTY MIDCAP SELECT (MIDCPNIFTY)"&&(A="NIFTY MIDCAP SELECT (MIDCPNIFTY)"),c==="SENSEX"&&(A="SENSEX"),u==="BSE INDEX BANKEX"&&(A="BSE INDEX BANKEX");let v="https://kite.zerodha.com/oms/instruments/historical/"+a+"/minute?user_id="+f.zerodhaUserId+"&oi=1&from="+this.from_date+"&to="+this.to_date;this.http.get(v,s).subscribe(b=>{if(console.log("scrip data:",A,b),b.data.candles){let x=b.data.candles;x.length===0&&console.log("ZERO CANDLES FOR ",A);for(let N=0;N<x.length;N++){let T=x[N],k=this.data[A];k||(k={});let C=this.getDateInFormat(T[0]);k[C]=[T[1],T[2],T[3],T[4],T[5],T[6]],this.data[A]=k}}console.log("candles:",Object.keys(this.data).length,this.data),i===!0&&this.exportToCSV()})}getDataFromThirdParty(e,i,r,s,o,a,l,c){this.append=i,this.from_date=r,this.to_date=s,this.expiry_date=o,this.delay=15e3;let u=50;e==="CNXBAN"&&(u=100);let d=0;for(let h=c;h<=l;h+=u)setTimeout(()=>{console.log("item",h),this.getDataItemFromThirdParty(e,h+"CE",h,"",o,a),setTimeout(()=>{this.getDataItemFromThirdParty(e,h+"PE","",h,o,a)},5e3),setTimeout(()=>{this.getDataItemFromThirdParty(e,"","","",o,a)},1e4)},d*this.delay),d++}getDataItemFromThirdParty(e,i,r,s,o,a){let l={headers:new Fe({"Content-type":"application/json; charset=UTF-8"}),responseType:"json"},c="https://icici-historial.up.railway.app/ohlc",u=JSON.stringify({ce_strike:""+r,pe_strike:""+s,index_symbol:e,expiry:o,startdate:a}),d=e+this.append+i;i===""&&(d=e),this.http.post(c,u,l).subscribe(h=>{console.log("getDataFromThirdParty response",h);let p=h.combined;(!p||p.date.length===0)&&console.log("ZERO CANDLES FOR ",d);for(let _=0;_<p.date.length;_++){let A=p.date[_],v=p.open[_],b=p.high[_],x=p.low[_],N=p.close[_],T=this.data[d];T||(T={});let k=this.getDateInFormat(A);T[k]=[v,b,x,N,0,0],this.data[d]=T}console.log("candles:",Object.keys(this.data).length,this.data)},h=>{console.log("getDataFromThirdParty error",h)})}exportToCSV(){let e="Monthly";this.append==="WK"&&(e="Weekly");let i=this.expiry_date+" "+e+".csv";if(console.log("exporting: ",i),this.data){let r=0,s="";s+=`Ticker,Date/Time,Open,High,Low,Close,Volume,Open Interest\r
`;for(let c in this.data){for(let u in this.data[c]){let d="",h=this.data[c][u];d+=c+","+u+","+h[0]+","+h[1]+","+h[2]+","+h[3]+","+h[4]+","+h[5],s+=d+`\r
`,r++}if(r>2e6){let u=new Blob([s],{type:"application/x-msdownload"}),d=URL.createObjectURL(u),h=document.createElement("a");h.href=d,h.target="_blank",document.body.appendChild(h),h.download=i,h.click(),h.parentNode.removeChild(h),s="",r=0}}let o=new Blob([s],{type:"application/x-msdownload"}),a=URL.createObjectURL(o),l=document.createElement("a");l.href=a,l.target="_blank",document.body.appendChild(l),l.download=i,l.click(),l.parentNode.removeChild(l)}localStorage.setItem("export_"+this.expiry_date,JSON.stringify("true")),f.isHistoricalRunning=!1}getDateInFormat(e=null){e||(e=new Date);let i=new Date(e),r=i.getDate(),s=i.getMonth()+1,o=i.getFullYear(),a=i.getHours(),l=i.getMinutes(),c=i.getSeconds();return""+(r<=9?"0"+r:r)+"-"+(s<=9?"0"+s:s)+"-"+o+" "+(a<=9?"0"+a:a)+":"+(l<=9?"0"+l:l)+":"+(c<=9?"0"+c:c)}loadHoldings(){let e=0,i=[],r=0,s=0;for(let o in f.holdings)if(f.holdings.hasOwnProperty(o)){let a=null,l="",c="",u=null;if(f.holdings[o].avgp){a=(f.holdings[o].ltp-f.holdings[o].avgp)*100/f.holdings[o].avgp,a=Math.round((a+1e-5)*100)/100;let A=f.holdings[o].avgp,v=f.holdings[o].ltp;o==="NIFTY 50"&&(A=A/92.4,v=v/92.4),o==="NIFTY BANK"&&(A=A/100,v=v/100),u=A*f.holdings[o].qty,r+=u,s+=v*f.holdings[o].qty,u=Math.round(u)}let d=-999,h=null;for(let A=0;A<f.holdings[o].support.length;A++){let v=f.holdings[o].support[A],b=(f.holdings[o].ltp-v)*100/v;b<0&&b>d&&(d=b,h=v),console.log(o,f.holdings[o].ltp,v,b)}h!==null&&(d=Math.round((d+1e-5)*100)/100,l=d+" ("+h+")");let p=999,_=null;for(let A=0;A<f.holdings[o].resistance.length;A++){let v=f.holdings[o].resistance[A],b=(f.holdings[o].ltp-v)*100/v;b>0&&b<p&&(p=b,_=v)}_!==null&&(p=Math.round((p+1e-5)*100)/100,c=p+" ("+_+")"),i.push({scrip:o,volume:f.holdings[o].volume,ltp:f.holdings[o].ltp,oned:f.holdings[o].oned,onew:f.holdings[o].onew,onem:f.holdings[o].onem,threem:f.holdings[o].threem,fiftytwow:f.holdings[o].fiftytwow,avgp:a,support:l,resistance:c,buyvalue:u})}return e=(s-r)*100/r,e=Math.round((e+1e-5)*100)/100,r=Math.round(r),s=Math.round(s),{portfolio_return:e,holdings:i,total_inv:r,current_val:s}}fetchStocksData(){let e={responseType:"json"};this.http.get("https://www.nseindia.com/api/equity-stockIndices?index=NIFTY%2050",e).subscribe(r=>{console.log("now stocks data: ",r),r.data.forEach(o=>{if(f.holdings.hasOwnProperty(o.symbol)){f.holdings[o.symbol].ltp=Math.round((o.lastPrice+1e-5)*100)/100,f.holdings[o.symbol].volume=Math.round((o.totalTradedVolume+1e-5)*100)/100,f.holdings[o.symbol].oned=Math.round((o.pChange+1e-5)*100)/100,f.holdings[o.symbol].onem=Math.round((o.perChange30d+1e-5)*100)/100;let a=(o.lastPrice-o.yearHigh)*100/o.yearHigh;f.holdings[o.symbol].fiftytwow=Math.round((a+1e-5)*100)/100}})}),setTimeout(()=>{this.fetchIndicesData()},2e3),setTimeout(()=>{this.fetchHistoricalData()},4e3)}fetchIndicesData(){let e={responseType:"json"};this.http.get("https://www.nseindia.com/api/allIndices",e).subscribe(r=>{console.log("indices data: ",r),r.data.forEach(o=>{if(f.holdings.hasOwnProperty(o.index)){f.holdings[o.index].ltp=Math.round((o.last+1e-5)*100)/100,f.holdings[o.index].oned=Math.round((o.percentChange+1e-5)*100)/100,f.holdings[o.index].onem=Math.round((o.perChange30d+1e-5)*100)/100;let a=(o.last-o.yearHigh)*100/o.yearHigh;f.holdings[o.index].fiftytwow=Math.round((a+1e-5)*100)/100}})})}fetchHistoricalData(){let e={responseType:"json"},i=new Date,r=new Date;r.setDate(r.getDate()-150);let s="https://query1.finance.yahoo.com/v8/finance/chart/";for(let o in f.holdings)if(f.holdings.hasOwnProperty(o)){let a=o+".NS";a==="NIFTY 50.NS"&&(a="%5ENSEI"),a==="NIFTY BANK.NS"&&(a="%5ENSEBANK");let l=s+a+"?formatted=true&lang=en-US&region=US&includeAdjustedClose=true&interval=1d&range=1y";this.http.get(l,e).subscribe(c=>{if(c){let d=c.chart.result[0].indicators.adjclose[0].adjclose;if(d instanceof Array){let h=f.holdings[o].ltp;if(!h){h=c.chart.result[0].meta.regularMarketPrice,f.holdings[o].ltp=h;let A=c.chart.result[0].meta.regularMarketTime,v=1,b=c.chart.result[0].timestamp;new Date(A*1e3).getDate()===new Date(b[b.length-1]*1e3).getDate()&&(v=2);let x=d[d.length-v];x=(h-x)*100/x,x=Math.round((x+1e-5)*100)/100,f.holdings[o].oned=x;let N=d[d.length-30];N=(h-N)*100/N,N=Math.round((N+1e-5)*100)/100,f.holdings[o].onem=N;let T=c.chart.result[0].indicators.quote[0].high;var u=Math.max.apply(null,T);let k=(h-u)*100/u;f.holdings[o].fiftytwow=Math.round((k+1e-5)*100)/100}let p=d[d.length-7];p=(h-p)*100/p,p=Math.round((p+1e-5)*100)/100;let _=d[d.length-90];_=(h-_)*100/_,_=Math.round((_+1e-5)*100)/100,console.log(o,p,_),f.holdings[o].onew=p,f.holdings[o].threem=_}}})}}exportBacktest(){console.log(this.backtestMap);let e="Backtest "+this.getDateInFormat()+".csv";if(console.log("exporting: ",e),this.backtestMap){let i="";i+=`ExitDate,Portfolio,Nifty,S1,S2,S3,S4,S5,S6,S7,S8,S9,S10\r
`;for(let a in this.backtestMap){this.shortlistedStocks=[];for(let p in this.backtestMap[a])if(this.backtestMap[a][p].fiftytwow>-10){let _=Object.assign({},this.backtestMap[a][p]);_.scrip=p,this.shortlistedStocks.push(_)}this.shortlistedStocks.sort((p,_)=>p.onem>_.onem?-1:1),console.log("shortlistedStocks:",this.shortlistedStocks);let l=this.shortlistedStocks.slice(0,10);console.log("finalStocks:",l);let c=0,u="";for(let p=0;p<l.length;p++){let _=(l[p].last-l[p].entry)*100/l[p].entry;_=Math.round((_+1e-5)*100)/100,c+=_,u+=","+_}let d=c/l.length;d=Math.round((d+1e-5)*100)/100,console.log(d,this.niftyReturn[a]);let h=""+a+","+d+","+this.niftyReturn[a]+u+`\r
`;console.log(h),i+=h}let r=new Blob([i],{type:"application/x-msdownload"}),s=URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.target="_blank",document.body.appendChild(o),o.download=e,o.click(),o.parentNode.removeChild(o)}}backtestStocks(){this.backtest52W1M()}backtest52W1M(){let e={responseType:"json"},i="https://query1.finance.yahoo.com/v8/finance/chart/",r=12,s=new Date;for(let o=13;o<=24;o++){let a=new Date;a.setDate(s.getDate()-30*o);let l=new Date;l.setDate(s.getDate()-30*o-365);for(let c in f.holdings)if(f.holdings.hasOwnProperty(c)){let u=c+".NS";u==="NIFTY 50.NS"&&(u="%5ENSEI"),u==="NIFTY BANK.NS"&&(u="%5ENSEBANK");let d=i+u+"?formatted=true&lang=en-US&region=US&includeAdjustedClose=true&interval=1d&period1=";d+=Math.floor(l.getTime()/1e3)+"&period2="+Math.floor(a.getTime()/1e3),this.http.get(d,e).subscribe(h=>{if(h){let _=h.chart.result[0].indicators.adjclose[0].adjclose;if(_ instanceof Array){let A={};if(A.last=_[_.length-1],A.entry=_[_.length-22],c==="NIFTY 50"){let N=(A.last-A.entry)*100/A.entry;N=Math.round((N+1e-5)*100)/100,this.niftyReturn[a.toLocaleDateString()]=N}let v=_[_.length-43];v=(A.entry-v)*100/v,v=Math.round((v+1e-5)*100)/100,A.onem=v;let b=h.chart.result[0].indicators.quote[0].high;b=b.slice(0,-21);var p=Math.max.apply(null,b);let x=(A.entry-p)*100/p;A.fiftytwow=Math.round((x+1e-5)*100)/100,this.backtestMap[a.toLocaleDateString()]||(this.backtestMap[a.toLocaleDateString()]={}),this.backtestMap[a.toLocaleDateString()][c]=A}}})}}}static \u0275fac=function(i){return new(i||n)(ae(Ct))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var f3=(()=>{class n{http;mapService;zerodhaService;appService;initSchedule=null;chartFetchSchedule=null;constructor(e,i,r,s){this.http=e,this.mapService=i,this.zerodhaService=r,this.appService=s}initScheduler(){this.initSchedule=setInterval(()=>{console.log("initScheduler",new Date().getSeconds());let e=new Date;if(e.getHours()==10&&e.getMinutes()==10&&e.getSeconds()==0){clearInterval(this.initSchedule);let i="BANKNIFTY",r=500,s=50;i==="BANKNIFTY"?(s=100,r=2e3):i==="FINNIFTY"?s=50:i==="MIDCPNIFTY"?s=25:i==="SENSEX"||i==="BANKEX"?s=100:i==="USDINR"&&(s=.25);let o=this.mapService.getScripLTP(null,null,"BANKNIFTY",null);o=Math.round(o/s)*s;let a=this.findPremiumStrike("BANKNIFTY","2023-06-01",o,"CE",s,25,r),l=this.findPremiumStrike("BANKNIFTY","2023-06-01",o,"PE",s,25,r);f.isIStrangleInit=!0,setTimeout(()=>{this.scheduler()},2e3)}},1e3)}initNow(){f.isIStrangleInit||(f.isIStrangleInit=!0,clearInterval(this.initSchedule),setTimeout(()=>{this.scheduler()},2e3))}scheduler(){this.chartFetchSchedule=setInterval(()=>{if(f.isIStrangleEnabled&&f.isIStrangleInit&&(console.log("scheduler",new Date().getSeconds()),new Date().getSeconds()==0)){let i=this.mapService.getSubscriptionObject("44900CE","BANKNIFTY","2023-06-01"),r=this.zerodhaService.findStrikeInMasters(i);console.log("scheduler element",r),r&&r.token&&this.getZerodhaChartData(r.token,"44900CE")}},1e3)}getZerodhaChartData(e,i){let r=this.appService.getLastWorkingDay(new Date),s=""+r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+("0"+r.getDate()).slice(-2),o=new Date,a=""+o.getFullYear()+"-"+("0"+(o.getMonth()+1)).slice(-2)+"-"+("0"+o.getDate()).slice(-2),c={responseType:"json",headers:new Fe({authorization:f.broker_auth})},u="https://kite.zerodha.com/oms/instruments/historical/"+e+"/minute?user_id="+f.zerodhaUserId+"&oi=1&from="+s+"&to="+a;this.http.get(u,c).subscribe(d=>{if(d.data.candles){let h=d.data.candles,p=[],_=[];for(let A=0;A<h.length;A++){let v=h[A],b=v[0].replace("+0530","Z");_.push([b,v[1],v[2],v[3],v[4],v[5],v[6]]);let x={time:new Date(Date.parse(b)),open:v[1],high:v[2],low:v[3],close:v[4]};p.push(x)}console.log("getZerodhaChartData current data",i,p[p.length-1])}},d=>{console.log("getZerodhaChartData fetch chart error",d)})}findPremiumStrike(e,i,r,s,o,a,l){let c,u,d=99999999;if(s==="CE")for(let h=r;h<=r+l;h+=o){let p=this.mapService.getScripLTP(e,new Date(i),h,"CE"),_=Math.abs(p-a);_<d&&(d=_,c=h,u=p)}else if(s==="PE")for(let h=r;h>=r-l;h-=o){let p=this.mapService.getScripLTP(e,new Date(i),h,"PE"),_=Math.abs(p-a);_<d&&(d=_,c=h,u=p)}return console.log("findPremiumStrike",c,s,u),c}static \u0275fac=function(i){return new(i||n)(ae(Ct),ae(Ue),ae(Nn),ae(si))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var pre=n=>({hidePositionRow:n}),g3=(n,t)=>({red:n,blue:t}),fre=n=>({green:n}),gre=(n,t)=>({"text-danger":n,"text-success":t}),Rh=n=>({ocStrikeStrategyCE:n}),mre=(n,t)=>({"table-warning":n,"oc-strike":t}),Fh=n=>({ocStrikeStrategyPE:n}),_re=n=>({stockHolding:n}),Ao=(n,t,e)=>({green:n,red:t,"bold-higher":e});function Are(n,t){if(n&1){let e=pe();g(0,"p")(1,"ngb-alert",131),q("closed",function(){let r=D(e).$implicit,s=R();return E(s.close(r))}),w(2),m()()}if(n&2){let e=t.$implicit;y(),L("type",e.type),y(),J(e.message)}}function yre(n,t){n&1&&(g(0,"span"),w(1,"https://api.kite.trade/instruments"),m())}function vre(n,t){n&1&&(g(0,"span"),w(1,"https://v2api.aliceblueonline.com/restpy/contract_master?exch=NFO"),m())}function wre(n,t){if(n&1){let e=pe();g(0,"button",10),q("click",function(){D(e);let r=R();return E(r.login())}),w(1,"Login"),m()}}function bre(n,t){n&1&&(g(0,"span"),w(1,"Websocket is connected"),m())}function Sre(n,t){n&1&&(g(0,"span"),w(1,"Websocket is not connected"),m())}function Cre(n,t){if(n&1){let e=pe();g(0,"button",10),q("click",function(){D(e);let r=R();return E(r.closeWebsocket())}),w(1,"Close & reopen"),m()}}function xre(n,t){if(n&1&&(g(0,"tr",133)(1,"td"),w(2),m(),g(3,"td"),w(4),m(),g(5,"td",133),w(6),m(),g(7,"td"),w(8),m(),g(9,"td"),w(10),m()()),n&2){let e=t.$implicit,i=R(2);L("ngClass",$t(7,pre,i.hide_exited_positions&&e.netQty===0)),y(2),J(e.instru),y(2),J(e.scrip),y(),L("ngClass",Pe(9,g3,e.netQty<0,e.netQty>0)),y(),J(e.netQty),y(2),J(e.buyAvg),y(2),J(e.sellAvg)}}function Dre(n,t){if(n&1&&(g(0,"tbody"),ee(1,xre,11,12,"tr",132),m()),n&2){let e=R();y(),L("ngForOf",e.positions)}}function Ere(n,t){if(n&1&&(g(0,"span"),w(1),m()),n&2){let e=R().$implicit;y(),Z("(",e.triggerPrice,")")}}function Mre(n,t){if(n&1){let e=pe();g(0,"tr")(1,"td")(2,"div",134)(3,"input",135),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.addToOrders,r)||(s.addToOrders=r),E(r)}),m()()(),g(4,"td"),w(5),m(),g(6,"td"),w(7),m(),g(8,"td"),w(9),m(),g(10,"td"),w(11),m(),g(12,"td",133),w(13),m(),g(14,"td"),w(15),ee(16,Ere,2,1,"span",18),m(),g(17,"td",133),w(18),m(),g(19,"td"),w(20),m(),g(21,"td"),w(22),m(),g(23,"td"),w(24),m(),g(25,"td"),w(26),m()()}if(n&2){let e=t.$implicit;y(3),W("ngModel",e.addToOrders),y(2),J(e.time),y(2),J(e.expiry),y(2),J(e.instru),y(2),J(e.scrip),y(),L("ngClass",Pe(15,g3,e.qty<0,e.qty>0)),y(),J(e.qty),y(2),Z("",e.tradedPrice," "),y(),L("ngIf",e.triggerPrice!=0),y(),L("ngClass",$t(18,fre,e.status=="COMPLETE")),y(),J(e.status),y(2),J(e.tags),y(2),J(e.guid),y(2),J(e.id),y(2),J(e.message)}}function Tre(n,t){if(n&1&&(g(0,"tbody"),ee(1,Mre,27,20,"tr",4),m()),n&2){let e=R();y(),L("ngForOf",e.orders.slice(0,e.orders_rows))}}function Ire(n,t){if(n&1&&(g(0,"span",142),w(1),m()),n&2){let e=t.$implicit;y(),n1(" ",e.strikeCE,"CE ",e.ltpCE," , ",e.strikePE,"PE ",e.ltpPE," ")}}function kre(n,t){if(n&1&&(g(0,"span",142),w(1),m()),n&2){let e=t.$implicit;y(),Su(" ",e.action,": ",e.strike," ",e.ltp," ")}}function Nre(n,t){if(n&1){let e=pe();g(0,"div",136)(1,"span",137),w(2," Strategy PnL: "),g(3,"span",138),w(4),m()(),ee(5,Ire,2,4,"span",139)(6,kre,2,3,"span",139),g(7,"span",140),w(8),m(),g(9,"span"),w(10," Combined SL: "),g(11,"input",141),z("ngModelChange",function(r){D(e);let s=R();return U(s.combined_SL,r)||(s.combined_SL=r),E(r)}),m()()()}if(n&2){let e=R();y(3),L("ngClass",Pe(7,gre,e.getStrategyPnL()<0,e.getStrategyPnL()>0)),y(),$n(" ",e.getStrategyPnL()," , ",e.strategyPointsProfit,""),y(),L("ngForOf",e.suggestions),y(),L("ngForOf",e.adjust_sugg),y(2),Z("Current Premium: ",e.combined_premium,""),y(3),W("ngModel",e.combined_SL)}}function Pre(n,t){n&1&&(g(0,"th",101),w(1,"Greeks"),m())}function Ore(n,t){n&1&&(g(0,"th",101),w(1,"Greeks"),m())}function Rre(n,t){if(n&1&&(g(0,"td",133)(1,"span",155),w(2),m(),g(3,"span",155),w(4),m(),g(5,"span",155),w(6),m(),g(7,"span",155),w(8),m()()),n&2){let e=R().$implicit;L("ngClass",$t(5,Rh,e.inCurrStrategyCE)),y(2),Z(" D: ",e.deltaCE," "),y(2),Z(" G: ",e.gammaCE," "),y(2),Z(" V: ",e.vegaCE," "),y(2),Z(" T: ",e.thetaCE," ")}}function Fre(n,t){if(n&1&&(g(0,"div",156),w(1),m()),n&2){let e=R().$implicit;y(),$n(" ",e.qtyCE," (",e.costCE,") ")}}function Lre(n,t){if(n&1&&(g(0,"div",157),w(1),m()),n&2){let e=R(2);y(),Z(" ",e.getSpotValue()," ")}}function Vre(n,t){n&1&&(g(0,"div",158),w(1," N "),m())}function Bre(n,t){if(n&1&&(g(0,"div",156),w(1),m()),n&2){let e=R().$implicit;y(),$n(" ",e.qtyPE," (",e.costPE,") ")}}function qre(n,t){if(n&1&&(g(0,"td",133)(1,"span",155),w(2),m(),g(3,"span",155),w(4),m(),g(5,"span",155),w(6),m(),g(7,"span",155),w(8),m()()),n&2){let e=R().$implicit;L("ngClass",$t(5,Fh,e.inCurrStrategyPE)),y(2),Z(" D: ",e.deltaPE," "),y(2),Z(" G: ",e.gammaPE," "),y(2),Z(" V: ",e.vegaPE," "),y(2),Z(" T: ",e.thetaPE," ")}}function jre(n,t){if(n&1){let e=pe();g(0,"tr")(1,"td",133)(2,"div",143)(3,"div",144)(4,"input",145),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.addCEToOrders,r)||(s.addCEToOrders=r),E(r)}),m()(),g(5,"input",146),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.qtyInputCE,r)||(s.qtyInputCE=r),E(r)}),m(),g(6,"button",147),q("click",function(){let r=D(e).$implicit,s=R();return E(s.addToStrategyBuilder(r,"CE"))}),w(7,"SB"),m(),g(8,"button",89),q("click",function(){let r=D(e).$implicit,s=R();return E(s.addToChart(r,"CE"))}),w(9,"C"),m()()(),g(10,"td",148),w(11),m(),g(12,"td",133),w(13),m(),ee(14,Rre,9,7,"td",149),g(15,"td",150),w(16),ee(17,Fre,2,2,"div",151),m(),g(18,"td",152),w(19),ee(20,Lre,2,1,"div",153)(21,Vre,2,0,"div",154),m(),g(22,"td",150),w(23),ee(24,Bre,2,2,"div",151),m(),ee(25,qre,9,7,"td",149),g(26,"td",133),w(27),m(),g(28,"td",148),w(29),m(),g(30,"td",133)(31,"div",143)(32,"div",144)(33,"input",145),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.addPEToOrders,r)||(s.addPEToOrders=r),E(r)}),m()(),g(34,"input",146),z("ngModelChange",function(r){let s=D(e).$implicit;return U(s.qtyInputPE,r)||(s.qtyInputPE=r),E(r)}),m(),g(35,"button",147),q("click",function(){let r=D(e).$implicit,s=R();return E(s.addToStrategyBuilder(r,"PE"))}),w(36,"SB"),m(),g(37,"button",89),q("click",function(){let r=D(e).$implicit,s=R();return E(s.addToChart(r,"PE"))}),w(38,"C"),m()()()()}if(n&2){let e=t.$implicit,i=R();y(),L("ngClass",$t(30,Rh,e.inCurrStrategyCE)),y(3),W("ngModel",e.addCEToOrders),y(),Vn("id","oc-qty-CE-",e.symbol,""),W("ngModel",e.qtyInputCE),y(5),L("ngClass",$t(32,Rh,e.inCurrStrategyCE)),y(),J(e.inlineStrategyPnLCE),y(),L("ngClass",$t(34,Rh,e.inCurrStrategyCE)),y(),J(e.volumeCE),y(),L("ngIf",i.show_greeks),y(),L("ngClass",$t(36,Rh,e.inCurrStrategyCE)),y(),Z(" ",e.ltpCE," "),y(),L("ngIf",e.inCurrStrategyCE),y(),L("ngClass",Pe(38,mre,e.isSpot,!e.isSpot)),y(),Z(" ",e.strike," "),y(),L("ngIf",e.isSpot),y(),L("ngIf",e.showNudge),y(),L("ngClass",$t(41,Fh,e.inCurrStrategyPE)),y(),Z(" ",e.ltpPE," "),y(),L("ngIf",e.inCurrStrategyPE),y(),L("ngIf",i.show_greeks),y(),L("ngClass",$t(43,Fh,e.inCurrStrategyPE)),y(),J(e.volumePE),y(),L("ngClass",$t(45,Fh,e.inCurrStrategyPE)),y(),J(e.inlineStrategyPnLPE),y(),L("ngClass",$t(47,Fh,e.inCurrStrategyPE)),y(3),W("ngModel",e.addPEToOrders),y(),Vn("id","oc-qty-PE-",e.symbol,""),W("ngModel",e.qtyInputPE)}}function Wre(n,t){if(n&1&&(g(0,"tr")(1,"td",133),w(2),m(),g(3,"td"),w(4),m(),g(5,"td",133),w(6),m(),g(7,"td",133),w(8),m(),g(9,"td",133),w(10),m(),g(11,"td",133),w(12),m(),g(13,"td",133),w(14),m(),g(15,"td",133),w(16),m(),g(17,"td",133),w(18),m(),g(19,"td",133),w(20),m(),g(21,"td"),w(22),m()()),n&2){let e=t.$implicit,i=R();y(),L("ngClass",$t(20,_re,i.isStockHolding(e.scrip))),y(),J(e.scrip),y(2),J(e.ltp),y(),L("ngClass",Mn(22,Ao,e.oned>0,e.oned<0,e.oned>2||e.oned<-2)),y(),J(e.oned),y(),L("ngClass",Mn(26,Ao,e.onew>0,e.onew<0,e.onew>5||e.onew<-5)),y(),J(e.onew),y(),L("ngClass",Mn(30,Ao,e.onem>0,e.onem<0,e.onem>7||e.onem<-7)),y(),J(e.onem),y(),L("ngClass",Mn(34,Ao,e.threem>0,e.threem<0,e.threem>10||e.threem<-10)),y(),J(e.threem),y(),L("ngClass",Mn(38,Ao,e.fiftytwow>0,e.fiftytwow<0,e.fiftytwow>10||e.fiftytwow<-10)),y(),J(e.fiftytwow),y(),L("ngClass",Mn(42,Ao,e.avgp>0,e.avgp<0,e.avgp>5||e.avgp<-5)),y(),J(e.avgp),y(),L("ngClass",Mn(46,Ao,e.support>0,e.support<0,e.support>5||e.support<-5)),y(),J(e.support),y(),L("ngClass",Mn(50,Ao,e.resistance>0,e.resistance<0,e.resistance>5||e.resistance<-5)),y(),J(e.resistance),y(2),J(e.buyvalue)}}var m3=(()=>{class n{route;appService;mapService;websocketService;chartService;angelService;angelWS;holdingsService;zerodhaService;zerodhaWebsocketService;algoService;version=u3;title="trades-ng19";access_token=null;user_id=null;auth_code=null;lastRequestStatus=null;positions=[];orders=[];log_ws_feed=!1;hide_positions=!1;hide_exited_positions=!0;hide_orders=!1;disable_order_buttons=!0;lastPositionsUpdateTime="";lastOrdersUpdateTime="";positionsPnL=0;stranglePositions=[];debitSpreadPositions=[];newexpiry="NIFTY20618";newstrike=1e4;newoption="CE";newqty=50;newblock=0;newlimit=0;newstop=0;newProductType="INTRADAY";newOrderType=2;nifty_oc_check=!0;usdinr_oc_check=!1;oc_instru="NIFTY";oc_year=2021;oc_month=6;oc_date=3;show_greeks=!1;checked_instrument="USDINR";oc_range_higher=16e3;oc_range_lower=14e3;oc_range_multiple=50;oc_strikes=[];oc_product_type="MARGIN";ws_vendor="zerodha";auth_acc="1";auth_acc_1="";auth_acc_2="";totalBalance;availableBalance;utilizedBalance;mean=0;variance=1;ws_access_token="yriZAzfnEWhCaAWh3JUuSqqL2ZtjX3dWv317ooTmhh78YCsdK3mkgz1dMdrKvyv7rRrU5WRvUnVf3gsoFiUQbATK32G6drt3CVbiqMVExLn0Hi51JdMIryRHPp2nHrso";ocSpotStrike;strategyPnL=0;strategyPointsProfit=0;suggestions=[];adjust_sugg=[];portfolio_return=0;holdings=[];total_inv=0;current_val=0;combined_SL=0;combined_premium=0;maxProfit=0;maxLoss=0;profitLossRatio=0;qty_default=200;qty_strategy_pts=400;diff_strategy_pts=200;strategy_pts=!1;alerts=[];fetchNSEOC_secs=null;latest_ten=!0;orders_rows=9;orders_update=!1;completeOrders=f.completeOrders;baby_name="";baby_surname="bhadane";babyNameNumber=0;historical_instru="NIFTY";historical_append="WK";historical_date="2023-03-29";historical_upper=18500;historical_lower=16e3;zerodha_auth="enctoken Sr2gbgdlEM7yRuGdXWtOu9YrTyyuMHHqBJ+F4N1UXSDmSpEH8UrrAkE9Ii7DCbAb3CkRMtRVhbcnC9Qv+rY7LcLVgyz2lGZg4VqnFFnl19PrXXPH7qxXuA==";zerodha_marketwatch='{"status":"success","data":[{"id":108696388,"name":"1","items":[{"id":673211353,"weight":1,"tradingsymbol":"INDIA VIX","instrument_token":264969,"segment":"INDICES","exchange":"NSE","expiry":""},{"id":816421144,"weight":2,"tradingsymbol":"NIFTY 50","instrument_token":256265,"segment":"INDICES","exchange":"NSE","expiry":""},{"id":903805357,"weight":6,"tradingsymbol":"NIFTYBEES","instrument_token":2707457,"segment":"NSE","exchange":"NSE","expiry":""},{"id":915508605,"weight":7,"tradingsymbol":"ICICINIFTY","instrument_token":7565569,"segment":"NSE","exchange":"NSE","expiry":""},{"id":915630019,"weight":8,"tradingsymbol":"KOTAKBKETF","instrument_token":1497857,"segment":"NSE","exchange":"NSE","expiry":""},{"id":915630692,"weight":9,"tradingsymbol":"KOTAKNIFTY","instrument_token":4634113,"segment":"NSE","exchange":"NSE","expiry":""},{"id":916079116,"weight":10,"tradingsymbol":"SETFNIF50","instrument_token":2605057,"segment":"NSE","exchange":"NSE","expiry":""},{"id":2963445776,"weight":11,"tradingsymbol":"LIQUIDBEES","instrument_token":2817537,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3185499175,"weight":12,"tradingsymbol":"BANKBEES","instrument_token":2928385,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3325591374,"weight":13,"tradingsymbol":"NIFTY BANK","instrument_token":260105,"segment":"INDICES","exchange":"NSE","expiry":""}]},{"id":108696392,"name":"Watchlist 2","items":[{"id":2542203093,"weight":19,"tradingsymbol":"INDIA VIX","instrument_token":264969,"segment":"INDICES","exchange":"NSE","expiry":""},{"id":3380116369,"weight":20,"tradingsymbol":"BANKNIFTY2211340400CE","instrument_token":11244546,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"},{"id":3384256979,"weight":21,"tradingsymbol":"BANKNIFTY2211340500CE","instrument_token":11245570,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"},{"id":3384259326,"weight":22,"tradingsymbol":"BANKNIFTY2211340600CE","instrument_token":11246082,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"},{"id":3384262349,"weight":23,"tradingsymbol":"BANKNIFTY2211340700CE","instrument_token":11246594,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"},{"id":3384265324,"weight":24,"tradingsymbol":"BANKNIFTY2211340800CE","instrument_token":11247106,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"},{"id":3384267715,"weight":25,"tradingsymbol":"BANKNIFTY2211340900CE","instrument_token":11249922,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"},{"id":3384270013,"weight":26,"tradingsymbol":"BANKNIFTY2211341000CE","instrument_token":11250434,"segment":"NFO-OPT","exchange":"NFO","expiry":"2022-01-13"}]},{"id":108696391,"name":"3","items":[]},{"id":108696390,"name":"4","items":[{"id":3350520016,"weight":3,"tradingsymbol":"USDINR22107FUT","instrument_token":1838339,"segment":"CDS-FUT","exchange":"CDS","expiry":"2022-01-07"},{"id":3352324563,"weight":4,"tradingsymbol":"USDINR2210774.75CE","instrument_token":2084099,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3352325735,"weight":5,"tradingsymbol":"USDINR22JAN74.75CE","instrument_token":2331907,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-27"},{"id":3357694089,"weight":6,"tradingsymbol":"USDINR2210774PE","instrument_token":2082819,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3352326484,"weight":6,"tradingsymbol":"USDINR2211474.75CE","instrument_token":2277379,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-14"},{"id":3352327889,"weight":7,"tradingsymbol":"USDINR22JAN74.5CE","instrument_token":2331395,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-27"},{"id":3352328068,"weight":8,"tradingsymbol":"USDINR2210774.5CE","instrument_token":2083587,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3352328218,"weight":9,"tradingsymbol":"USDINR2211474.5CE","instrument_token":2274563,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-14"},{"id":3352330098,"weight":10,"tradingsymbol":"USDINR22JAN74.25PE","instrument_token":2331139,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-27"},{"id":3352330606,"weight":11,"tradingsymbol":"USDINR2210774.25PE","instrument_token":2083331,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3352330853,"weight":12,"tradingsymbol":"USDINR2211474.25PE","instrument_token":2228483,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-14"},{"id":3352331692,"weight":13,"tradingsymbol":"USDINR22JAN74.5PE","instrument_token":2331651,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-27"},{"id":3352331872,"weight":14,"tradingsymbol":"USDINR2210774.5PE","instrument_token":2083843,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3352332088,"weight":15,"tradingsymbol":"USDINR2211474.5PE","instrument_token":2275843,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-14"}]},{"id":108696389,"name":"5","items":[{"id":3348892336,"weight":0,"tradingsymbol":"USDINR2210775.5CE","instrument_token":2085635,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348944443,"weight":1,"tradingsymbol":"USDINR2210775CE","instrument_token":2084611,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348963455,"weight":2,"tradingsymbol":"USDINR2210776.5CE","instrument_token":2087683,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348963507,"weight":3,"tradingsymbol":"USDINR2210776.25CE","instrument_token":2087171,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348963586,"weight":4,"tradingsymbol":"USDINR2210776CE","instrument_token":2086659,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348963744,"weight":5,"tradingsymbol":"USDINR2210775.75CE","instrument_token":2086147,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348963890,"weight":6,"tradingsymbol":"USDINR2210775.25CE","instrument_token":2085123,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964092,"weight":7,"tradingsymbol":"USDINR2210774.25CE","instrument_token":2083075,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964200,"weight":8,"tradingsymbol":"USDINR2210774.75CE","instrument_token":2084099,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964250,"weight":9,"tradingsymbol":"USDINR2210774.5CE","instrument_token":2083587,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964298,"weight":10,"tradingsymbol":"USDINR2210774CE","instrument_token":2082563,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964379,"weight":11,"tradingsymbol":"USDINR2210773.75CE","instrument_token":2082051,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964434,"weight":12,"tradingsymbol":"USDINR2210773.5CE","instrument_token":2081539,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964547,"weight":13,"tradingsymbol":"USDINR2210773.25CE","instrument_token":2081027,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964591,"weight":14,"tradingsymbol":"USDINR2210773CE","instrument_token":2080515,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964657,"weight":15,"tradingsymbol":"USDINR2210772.75CE","instrument_token":2080003,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964687,"weight":16,"tradingsymbol":"USDINR2210772.5CE","instrument_token":2079491,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964729,"weight":17,"tradingsymbol":"USDINR2210772.25CE","instrument_token":2078979,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348967699,"weight":18,"tradingsymbol":"USDINR2210776.25PE","instrument_token":2087427,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348965608,"weight":18,"tradingsymbol":"USDINR2210776PE","instrument_token":2086915,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348964780,"weight":18,"tradingsymbol":"USDINR2210772CE","instrument_token":2078467,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348965675,"weight":19,"tradingsymbol":"USDINR2210775.75PE","instrument_token":2086403,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348967763,"weight":19,"tradingsymbol":"USDINR2210776.5PE","instrument_token":2087939,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348965724,"weight":20,"tradingsymbol":"USDINR2210775.5PE","instrument_token":2085891,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348965816,"weight":21,"tradingsymbol":"USDINR2210775.25PE","instrument_token":2085379,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348965993,"weight":22,"tradingsymbol":"USDINR2210775PE","instrument_token":2084867,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966094,"weight":23,"tradingsymbol":"USDINR2210774.75PE","instrument_token":2084355,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966143,"weight":24,"tradingsymbol":"USDINR2210774.5PE","instrument_token":2083843,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966207,"weight":25,"tradingsymbol":"USDINR2210774.25PE","instrument_token":2083331,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966278,"weight":26,"tradingsymbol":"USDINR2210774PE","instrument_token":2082819,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966366,"weight":27,"tradingsymbol":"USDINR2210773.75PE","instrument_token":2082307,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966427,"weight":28,"tradingsymbol":"USDINR2210773.5PE","instrument_token":2081795,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966465,"weight":29,"tradingsymbol":"USDINR2210773.25PE","instrument_token":2081283,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966553,"weight":30,"tradingsymbol":"USDINR2210773PE","instrument_token":2080771,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966621,"weight":31,"tradingsymbol":"USDINR2210772.75PE","instrument_token":2080259,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966683,"weight":32,"tradingsymbol":"USDINR2210772.5PE","instrument_token":2079747,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966740,"weight":33,"tradingsymbol":"USDINR2210772.25PE","instrument_token":2079235,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3348966840,"weight":34,"tradingsymbol":"USDINR2210772PE","instrument_token":2078723,"segment":"CDS-OPT","exchange":"CDS","expiry":"2022-01-07"},{"id":3349002726,"weight":35,"tradingsymbol":"USDINR22107FUT","instrument_token":1838339,"segment":"CDS-FUT","exchange":"CDS","expiry":"2022-01-07"}]},{"id":1432148480,"name":"MW 6","items":[{"id":3153225189,"weight":4,"tradingsymbol":"INDIA VIX","instrument_token":264969,"segment":"INDICES","exchange":"NSE","expiry":""}]},{"id":1439682075,"name":"MW 7","items":[{"id":3160458234,"weight":1,"tradingsymbol":"INDIA VIX","instrument_token":264969,"segment":"INDICES","exchange":"NSE","expiry":""},{"id":3186435109,"weight":2,"tradingsymbol":"NIFTYBEES","instrument_token":2707457,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186401941,"weight":3,"tradingsymbol":"CIPLA","instrument_token":177665,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186406251,"weight":4,"tradingsymbol":"DIVISLAB","instrument_token":2800641,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186408123,"weight":5,"tradingsymbol":"TCS","instrument_token":2953217,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186408254,"weight":6,"tradingsymbol":"INFY","instrument_token":408065,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186414542,"weight":7,"tradingsymbol":"TECHM","instrument_token":3465729,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186425692,"weight":8,"tradingsymbol":"RELIANCE","instrument_token":738561,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186409602,"weight":9,"tradingsymbol":"ASIANPAINT","instrument_token":60417,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186428516,"weight":10,"tradingsymbol":"BHARTIARTL","instrument_token":2714625,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186410885,"weight":11,"tradingsymbol":"POWERGRID","instrument_token":3834113,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186411996,"weight":12,"tradingsymbol":"NESTLEIND","instrument_token":4598529,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186427537,"weight":13,"tradingsymbol":"KOTAKBANK","instrument_token":492033,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3186565769,"weight":14,"tradingsymbol":"BAJAJFINSV","instrument_token":4268801,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3261642640,"weight":15,"tradingsymbol":"SBILIFE","instrument_token":5582849,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3261648555,"weight":16,"tradingsymbol":"LT","instrument_token":2939649,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3261672641,"weight":17,"tradingsymbol":"GRASIM","instrument_token":315393,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3261674006,"weight":18,"tradingsymbol":"TITAN","instrument_token":897537,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3261755095,"weight":19,"tradingsymbol":"BANKBEES","instrument_token":2928385,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3262029921,"weight":20,"tradingsymbol":"VBL","instrument_token":4843777,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3262031465,"weight":21,"tradingsymbol":"RADICO","instrument_token":2813441,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3380025273,"weight":22,"tradingsymbol":"PIDILITIND","instrument_token":681985,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3380026008,"weight":23,"tradingsymbol":"SUNPHARMA","instrument_token":857857,"segment":"NSE","exchange":"NSE","expiry":""},{"id":3380027033,"weight":24,"tradingsymbol":"DMART","instrument_token":5097729,"segment":"NSE","exchange":"NSE","expiry":""}]}]}';zerodha_from_date="2021-12-08";zerodha_to_date="2022-01-07";zerodha_expiry_date="Jan-07-2021";longTermExpiryExport="2023-12-28";greeksMonitoringIntervalInitial;greeksMonitoringInterval;nextGreeksTime=new Date;greeksData=new Map;initialGreeksData=new Map;ordersSubscription;positionsSubscription;constructor(e,i,r,s,o,a,l,c,u,d,h){this.route=e,this.appService=i,this.mapService=r,this.websocketService=s,this.chartService=o,this.angelService=a,this.angelWS=l,this.holdingsService=c,this.zerodhaService=u,this.zerodhaWebsocketService=d,this.algoService=h,this.route.queryParams.subscribe(p=>{console.log("params",p),p&&p.access_token&&(this.access_token=p.access_token),p&&p.user_id&&(this.user_id=p.user_id)}),f.requestStatusEvent$.subscribe(p=>{console.log("app requestStatusEvent: ",p),this.lastRequestStatus=p;let _=p.status,A=p.message,v={type:_,message:A};this.alerts.unshift(v),setTimeout(()=>{this.alerts.splice(this.alerts.indexOf(v),1)},5e3)}),f.websocketEvent$.subscribe(p=>{console.log("app websocketEvent: ",p),p==="connected"&&(this.refreshAll(),this.subscribeUSDINR())}),f.miscEvent$.subscribe(p=>{console.log("app miscEvent: ",p),p==="refreshAll"&&this.refreshAll()})}log_ws_feed_change(){f.logWSFeed=this.log_ws_feed}subscribeUSDINR(){let e=[],i=this.mapService.findCurrExpiryForDisplay(f.usdinrExpiries),r=this.mapService.getExpiry(i,"USDINR");e.push(this.mapService.getSubscriptionObjectForFuture("USDINR"+r+"FUT","CDS")),console.log("subscribeUSDINR feed",e),this.appService.sendSubscriptions(e)}close(e){this.alerts.splice(this.alerts.indexOf(e),1)}changeLatestTen(e){e.target.checked?this.orders_rows=10:this.orders_rows=1e3}getBeesRatio(){let e=this.getInstruLTP("NIFTY50"),i=this.getInstruLTP("NIFTYBEES"),r=e/i;return Math.round((r+1e-5)*100)/100}getInstruLTP(e){return this.mapService.getScripLTP(null,null,e,null)}auth_change(e){f.broker_auth=e,console.log("auth change",e),localStorage.setItem("broker_auth",JSON.stringify(e))}auth_change_num(e,i){console.log("auth_change_num",e,i),localStorage.setItem("broker_auth_"+i,JSON.stringify(e)),i==this.auth_acc&&(f.broker_auth=e)}auth_radio_change(e){console.log("auth_radio_change",e),this.auth_acc=="1"?f.broker_auth=this.auth_acc_1:this.auth_acc=="2"&&(f.broker_auth=this.auth_acc_2),console.log("AppConstants.broker_auth",f.broker_auth)}calcBabyName(e){console.log(e,this.baby_name,this.baby_surname);let i=0;for(let r of this.baby_name)f.babyNamesLetters[r.toUpperCase()]&&(i+=f.babyNamesLetters[r.toUpperCase()]),console.log(i,r,f.babyNamesLetters[r.toUpperCase()]);for(let r of this.baby_surname)f.babyNamesLetters[r.toUpperCase()]&&(i+=f.babyNamesLetters[r.toUpperCase()]),console.log(i,r,f.babyNamesLetters[r.toUpperCase()]);for(this.babyNameNumber=0;i;)this.babyNameNumber+=i%10,i=Math.floor(i/10);if(this.babyNameNumber>=10){let r=this.babyNameNumber;for(this.babyNameNumber=0;r;)this.babyNameNumber+=r%10,r=Math.floor(r/10)}}test1(){this.refreshAll(),this.refreshAll()}ngOnInit(){this.auth_acc_1=JSON.parse(localStorage.getItem("broker_auth_1")),this.auth_acc_2=JSON.parse(localStorage.getItem("broker_auth_2")),this.auth_acc=="1"?f.broker_auth=this.auth_acc_1:this.auth_acc=="2"&&(f.broker_auth=this.auth_acc_2),this.zerodha_auth=f.broker_auth,this.calcBabyName(null),this.mapService.setLtp("NIFTY50",18e3),this.mapService.setLtp("BANKNIFTY",4e4),this.mapService.setLtp("FINNIFTY",18500),this.mapService.setLtp("MIDCPNIFTY",8e3),this.mapService.setLtp("SENSEX",65e3),this.mapService.setLtp("BANKEX",5e4),window.location.href.includes("localhost")&&(f.isProduction=!1),console.log(window.location.href,f.isProduction),this.zerodha_expiry_date=this.mapService.findCurrExpiryForDisplay(f.niftyExpiries),this.zerodha_to_date=this.mapService.findCurrExpiryForDisplay(f.niftyExpiries);let e=new Date(this.mapService.findCurrExpiryForDisplay(f.niftyExpiries));e.setDate(e.getDate()-10),this.zerodha_from_date=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2);let i=setInterval(()=>{this.updateSpotStrike(),this.updateOCValues()},5e3),r=setInterval(()=>{},2e3);this.chartService.strategyPnLEvent$.subscribe(a=>{this.strategyPnL=a[0],this.strategyPointsProfit=a[1]}),this.chartService.optionChainEvent$.subscribe(a=>{console.log("received oc:",a);let l=a[0],c=a[1];this.processOCRequest(l,c)});let s=setInterval(()=>{this.orders_update&&this.getOrders()},1e4),o=setInterval(()=>{if(!f.isHistoricalRunning){let a=new Date;if(a.getHours()===15&&a.getMinutes()>=31||a.getHours()>=16){let l=""+a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2);if(JSON.parse(localStorage.getItem("export_"+l))!=="true"){f.isHistoricalRunning=!0;let u="WK",d=20;(this.mapService.isMonthlyExpiry(l,"NIFTY")||this.mapService.isMonthlyExpiry(l,"FINNIFTY")||this.mapService.isMonthlyExpiry(l,"MIDCPNIFTY")||this.mapService.isMonthlyExpiry(l,"SENSEX")||this.mapService.isMonthlyExpiry(l,"BANKEX")||this.mapService.isMonthlyExpiry(l,"USDINR"))&&(u="",d=60);let h=new Date(a);h.setDate(a.getDate()-d);let p=""+h.getFullYear()+"-"+("0"+(h.getMonth()+1)).slice(-2)+"-"+("0"+h.getDate()).slice(-2);console.log("Starting to fetch expiry data"),this.holdingsService.getZerodhaInstruments(u,f.broker_auth,p,l,l)}}}},1e4)}exportLongTermOptions(){let e=new Date(this.longTermExpiryExport),i=""+e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),r="",s=550,o=0;for(let a=0;a<s;a+=50)setTimeout(()=>{console.log("Starting to fetch expiry data");let l=new Date(e);l.setDate(e.getDate()-a);let c=""+l.getFullYear()+"-"+("0"+(l.getMonth()+1)).slice(-2)+"-"+("0"+l.getDate()).slice(-2),u=new Date(e);u.setDate(e.getDate()-a-50);let d=""+u.getFullYear()+"-"+("0"+(u.getMonth()+1)).slice(-2)+"-"+("0"+u.getDate()).slice(-2);this.holdingsService.getZerodhaInstruments(r,f.broker_auth,d,c,i,!0)},o*12e4),o++}ngAfterViewInit(){setTimeout(()=>{})}fetchHistorical(){this.holdingsService.getZerodhaInstruments(this.historical_append,this.zerodha_auth,this.zerodha_from_date,this.zerodha_to_date,this.zerodha_expiry_date)}fetchHistoricalThirdParty(){this.holdingsService.getDataFromThirdParty(this.historical_instru,this.historical_append,this.zerodha_from_date,this.zerodha_to_date,this.zerodha_expiry_date,this.historical_date,this.historical_upper,this.historical_lower)}exportHistorical(){this.holdingsService.exportToCSV()}processOCRequest(e,i){this.oc_instru=e;let r=new Date(i);if(this.oc_year=r.getFullYear(),this.oc_month=r.getMonth()+1,this.oc_date=r.getDate(),this.oc_instru==="NIFTY"){this.oc_range_multiple=50;let s=this.mapService.getScripLTP(null,null,"NIFTY50",null),o=Math.round(s/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=o+500,this.oc_range_lower=o-500}else if(this.oc_instru==="BANKNIFTY"){this.oc_range_multiple=100;let s=this.mapService.getScripLTP(null,null,"BANKNIFTY",null),o=Math.round(s/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=o+1500,this.oc_range_lower=o-1500}else if(this.oc_instru==="FINNIFTY"){this.oc_range_multiple=50;let s=this.mapService.getScripLTP(null,null,"FINNIFTY",null),o=Math.round(s/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=o+500,this.oc_range_lower=o-500}else if(this.oc_instru==="MIDCPNIFTY"){this.oc_range_multiple=25;let s=this.mapService.getScripLTP(null,null,"MIDCPNIFTY",null),o=Math.round(s/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=o+500,this.oc_range_lower=o-500}else if(this.oc_instru==="SENSEX"){this.oc_range_multiple=100;let s=this.mapService.getScripLTP(null,null,"SENSEX",null),o=Math.round(s/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=o+1500,this.oc_range_lower=o-1500}else if(this.oc_instru==="BANKEX"){this.oc_range_multiple=100;let s=this.mapService.getScripLTP(null,null,"BANKEX",null),o=Math.round(s/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=o+1500,this.oc_range_lower=o-1500}else if(this.oc_instru==="USDINR"){this.oc_range_multiple=.25;let s=this.mapService.getScripLTP(null,null,"USDINR",null),o=Math.round(s/this.oc_range_multiple)*this.oc_range_multiple;this.oc_range_higher=o+2,this.oc_range_lower=o-2}this.updateOCRange()}getStrategyPnL(){return this.strategyPnL}getGreeks(e,i){let r=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e,i),s=new Date(this.oc_year,this.oc_month-1,this.oc_date);return this.appService.getGreeks(this.oc_instru,e,i,s,r,f.isSimulatedStrategy,f.simulateCurrDateObj)}checkNifty(){this.nifty_oc_check?(this.usdinr_oc_check=!1,this.checked_instrument="NIFTY"):(this.usdinr_oc_check=!0,this.checked_instrument="USDINR")}checkUSDINR(){this.usdinr_oc_check?(this.nifty_oc_check=!1,this.checked_instrument="USDINR"):(this.nifty_oc_check=!0,this.checked_instrument="NIFTY")}login(){this.auth()}auth(){this.appService.auth().subscribe(e=>{console.log("app auth",e),e&&(f.requestStatusEvent$.next(e),e.authorization_code&&(this.auth_code=e.authorization_code,this.generateAccessToken()))},e=>{console.log("app auth error",e),f.requestStatusEvent$.next(e.error.message+", "+e.message)})}generateAccessToken(){if(this.auth_code){let e=this.appService.getTokenUrl(this.auth_code,f.fyersAppId);console.log("tokenUrl",e);let i=window.open(e)}}getFunds(){console.log("app getting Funds"),this.appService.getFunds(this.access_token).subscribe(e=>{console.log("app getFunds",e),e&&(this.totalBalance=e.fund_limit[8].equityAmount.toLocaleString(),this.availableBalance=e.fund_limit[9].equityAmount.toLocaleString(),this.utilizedBalance=e.fund_limit[6].equityAmount.toLocaleString())},e=>{console.log("app getPositions error",e),f.requestStatusEvent$.next(e.error.message+", "+e.message)})}includePosPnLInSum1(e){e.includeInSum1=!e.includeInSum1}includePosPnLInSum2(e){e.includeInSum2=!e.includeInSum2}includePosPnLInSum3(e){e.includeInSum3=!e.includeInSum3}includePosPnLInSum4(e){e.includeInSum4=!e.includeInSum4}getPositionsPnLSum(e){let i=0;return this.positions&&(this.positions.forEach(r=>{e===1&&r.includeInSum1&&(i+=r.pnl),e===2&&r.includeInSum2&&(i+=r.pnl),e===3&&r.includeInSum3&&(i+=r.pnl),e===4&&r.includeInSum4&&(i+=r.pnl)}),i=Math.round((i+1e-5)*100)/100,this.positionsPnL=i),i}getMastersStatus(){return f.mastersContract.size?"Masters Contract is available":"Masters Contract not available yet"}uploadExpiryFile(e){}import_establishWSVendor(e){f.SocketMode=this.ws_vendor;let i=e.target.files[0],r=new FileReader;r.readAsText(i),r.onload=s=>{console.log("imported master",r.result),this.appService.uploadedMastersContract(r.result)}}establishWSVendor(){f.SocketMode=this.ws_vendor,this.appService.getMastersContract(this.ws_access_token)}closeWebsocket(){this.appService.closeWebsocket()}reopenWebsocket(){this.appService.reopenWebsocket()}getZerodhaInstruments(){this.appService.getZerodhaInstruments()}uploadNames(e){let i=[],r=e.target.files[0].name,s=e.target.files[0],o=new FileReader;o.readAsText(s),o.onload=a=>{let u=String(o.result).split(/\r|\n|\r/).filter(function(A){return A!==""});for(let A=0;A<u.length;A++)this.baby_name=u[A],this.baby_surname="bhadane",this.calcBabyName(null),i.push([u[A],this.babyNameNumber]);console.log("arr",i);let d="";for(let A=0;A<i.length;A++){let v="";v+=i[A][0]+",Bhadane,"+i[A][1],d+=v+`\r
`}let h=new Blob([d],{type:"application/x-msdownload"}),p=URL.createObjectURL(h),_=document.createElement("a");_.href=p,_.target="_blank",document.body.appendChild(_),_.download="only_boys.csv",_.click(),_.parentNode.removeChild(_)}}uploadNSEOC(e){let i=e.target.files[0].name,r="NIFTY";i.includes("BANKNIFTY")&&(r="BANKNIFTY"),i.includes("FINNIFTY")&&(r="FINNIFTY");let o=i.replace(".csv","").slice("-11");console.log("nse oc file",i,o,r);let a=e.target.files[0],l=new FileReader;l.readAsText(a),l.onload=c=>{let u=String(l.result);this.parseNSEOC(u,r,o)}}parseNSEOC(e,i,r){let o=e.split(/\r|\n|\r/).filter(function(a){return a!==""});for(let a=2;a<o.length;a++){let l=o[a].match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g),c=Number(l[4].replaceAll('"',"").replace(",","").replace("-","0")),u=Number(l[16].replaceAll('"',"").replace(",","").replace("-","0")),d=Number(l[10].replaceAll('"',"").replace(",","").replace("-","0"));this.appService.parseAndSetMaps(i,r,d,"CE",c),this.appService.parseAndSetMaps(i,r,d,"PE",u)}}getNSE_OC(e){this.appService.getNSE_OC(e)}isSocketConnected(){return this.appService.isSocketConnected()}getPositions(){console.log("app getting Positions"),f.RestMode==="zerodha"?(this.positionsSubscription&&this.positionsSubscription.unsubscribe(),this.positionsSubscription=this.zerodhaService.getPositions().subscribe(e=>{console.log("zerodha getPositions response",e),this.mapPositions(e),this.positionsSubscription.unsubscribe()},e=>{console.log("zerodha getPositions error",e),f.requestStatusEvent$.next({status:"danger",message:"Positions Fetch Failed"})})):this.appService.getPositions(this.access_token).subscribe(e=>{console.log("app getPositions",e),e&&(this.lastPositionsUpdateTime=new Date().toLocaleTimeString(),f.requestStatusEvent$.next(e),this.mapPositions(e))},e=>{console.log("app getPositions error",e),f.requestStatusEvent$.next(e.error.message+", "+e.message)})}mapPositions(e){this.positions=[],f.RestMode==="zerodha"&&(e.data.net.forEach(r=>{let s=new Od;s.id=r.id;let o=r.tradingsymbol,a=this.mapService.parseSymbol(o);s.instru=a.instru,s.scrip=a.strike+a.type;let l=this.zerodhaService.findInMastersByToken(r.instrument_token);l&&l.expiry&&(s.expiry=l.expiry),s.netQty=r.quantity,s.buyAvg=r.buy_price,s.sellAvg=r.sell_price,s.pnl=r.pnl,this.positions.push(s)}),this.sortPositions(),console.log("positions",this.positions)),f.RestMode==="fyers"&&e.netPositions instanceof Array&&e.netPositions.forEach(i=>{let r=new Od;r.id=i.id,r.scrip=i.symbol,r.netQty=i.netQty,r.buyAvg=i.buyAvg,r.sellAvg=i.sellAvg,r.type=i.productType,r.realizedProfit=i.realizedProfit,r.pnl=i.pl,this.positions.push(r)}),f.fetchedPositions=this.positions}sortPositions(){this.positions.sort((e,i)=>{if(e.instru!==i.instru)return e.instru.localeCompare(i.instru);let r=e.scrip.slice(0,-2),s=i.scrip.slice(0,-2);if(r===s&&e.scrip.includes("CE")&&i.scrip.includes("PE"))return-1;if(r===s&&e.scrip.includes("PE")&&i.scrip.includes("CE"))return 1;if(r===s&&(e.scrip.includes("CE")&&i.scrip.includes("CE")||e.scrip.includes("PE")&&i.scrip.includes("PE"))){let o=new Date(e.expiry),a=new Date(i.expiry);return o<a?-1:1}return this.compareForSorting(e.scrip,i.scrip)})}compareForSorting(e,i){if(e.includes("CE")&&i.includes("PE"))return-1;if(e.includes("PE")&&i.includes("CE"))return 1;let r=e.slice(0,-2),s=i.slice(0,-2);return r>s?-1:1}getOrders(){console.log("app getting Orders"),f.RestMode==="zerodha"?(this.ordersSubscription&&this.ordersSubscription.unsubscribe(),this.ordersSubscription=this.zerodhaService.getOrders().subscribe(e=>{console.log("zerodha getOrders response",e),this.mapOrders(e),this.ordersSubscription.unsubscribe(),f.miscEvent$.next("ordersReceived")},e=>{console.log("zerodha getOrder error",e),f.requestStatusEvent$.next({status:"danger",message:"Orders Fetch Failed"})})):this.appService.getOrders(this.access_token).subscribe(e=>{console.log("app getOrders",e),e&&(this.lastOrdersUpdateTime=new Date().toLocaleTimeString(),f.requestStatusEvent$.next(e),this.mapOrders(e))},e=>{console.log("app getOrders error",e),f.requestStatusEvent$.next(e.error.message+", "+e.message)})}sortOrders(){this.orders.sort((e,i)=>e.time>i.time?-1:e.time<i.time?1:0)}mapOrders(e){this.orders=[];let i=!1,r=f.completeOrders;f.completeOrders=0,f.RestMode==="zerodha"&&(e.data.forEach(o=>{let a=new Og;a.addToOrders=!1,a.guid=o.guid,a.id=o.order_id,a.time=o.order_timestamp.split(" ")[1];let l=o.tradingsymbol,c=this.mapService.parseSymbol(l);a.instru=c.instru,a.scrip=c.strike+c.type;let u=this.zerodhaService.findInMastersByToken(o.instrument_token);u&&u.expiry&&(a.expiry=u.expiry),a.qty=o.quantity,o.transaction_type==="SELL"&&(a.qty=-a.qty),a.triggerPrice=o.trigger_price,a.status=o.status,a.status==="COMPLETE"&&(f.completeOrders+=1),a.status.includes("PENDING")&&a.status!=="TRIGGER PENDING"&&(i=!0),a.status.includes("TRIGGER PENDING")?a.tradedPrice=o.price:a.tradedPrice=o.average_price,a.message=o.status_message,a.tradingsymbol=o.tradingsymbol,o.tags?(a.tags="",o.tags.forEach(d=>{a.tags+=d+","}),a.tags=a.tags.replace(/,\s*$/,"")):a.tags="",this.orders.push(a)}),this.sortOrders(),f.orders=this.orders),this.completeOrders=f.completeOrders,r+f.placedOrders>this.completeOrders||(f.placedOrders=0),i&&(f.requestStatusEvent$.next({status:"warning",message:"Order Pending. Refetching..."}),setTimeout(()=>{f.enableAlgo||this.refreshAll()},2e3)),f.RestMode==="fyers"&&e.orderBook instanceof Array&&e.orderBook.forEach(s=>{let o=new Ng;o.id=s.id,o.scrip=s.symbol,o.qty=s.qty,o.status=s.status,o.message=s.message,o.type=s.type,o.limit=s.limitPrice,o.stop=s.stopPrice,o.tradedPrice=s.tradedPrice,o.side=s.side,o.orderDateTime=s.orderDateTime,this.orders.push(o)})}getCMP(){return 0}getOrderStatus(e){return e===1?"Cancelled":e===2?"Filled":e===3?"Unknown":e===4?"Transit":e===5?"Rejected":e===6?"Pending":"Not Found"}getOrderType(e){return e===1?"Limit":e===2?"Market":e===3?"SL-M":e===4?"SL":"Not Found"}newOrder(e){let i="NSE:"+this.newexpiry+this.newstrike+this.newoption;this.appService.placeOrder(this.access_token,i,this.newqty,this.newOrderType,e,this.newProductType,this.newlimit,this.newstop).subscribe(r=>{console.log("app newOrder",r),this.refreshAll(),r&&f.requestStatusEvent$.next(r)},r=>{console.log("app newOrder error",r),f.requestStatusEvent$.next(r.error.message+", "+r.message),this.refreshAll()})}resetNewOrder(){this.newexpiry="NIFTY20618",this.newstrike=1e4,this.newoption="CE",this.newqty=50,this.newblock=0,this.newOrderType=2,this.newProductType="INTRADAY",this.newlimit=0,this.newstop=0}exitSelected(){this.positions&&confirm("Exit Selected?")&&this.positions.forEach(e=>{(e.includeInSum1||e.includeInSum2||e.includeInSum3||e.includeInSum4)&&this.exitPosition(e,!0)})}exitPosition(e,i=!1){let r=Number(document.getElementById("pos-qty-"+e.id).value);r||(r=Math.abs(e.netQty));let s=0;e.netQty>0?s=-1:e.netQty<0&&(s=1);let o=2;console.log("placing order: ",e.scrip,r,o,s,e.type,0);let a=i;i===!1&&(a=confirm("Exit "+r+" Qty with "+(s===-1?"Sell order":"Buy order")+" Sure?")),a&&this.appService.placeOrder(this.access_token,e.scrip,r,o,s,e.type,0,0).subscribe(l=>{console.log("app exitPosition",l),this.refreshAll(),l&&(f.requestStatusEvent$.next(l),this.appService.playAudio("success"))},l=>{console.log("app exitPosition error",l),f.requestStatusEvent$.next(l.error.message+", "+l.message),this.refreshAll(),this.appService.playAudio("error")})}refreshAll(){this.getPositions(),this.getOrders()}addToStrategyBuilder(e,i){this.appService.payOffEvent$.next({symbol:e.symbol+i,ltp:this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,i),qty:this.qty_default})}addToChart(e,i){this.appService.chartEvent$.next({symbol:e.symbol+i,type:i})}getQtyOfStrikeInStrategy(e){let i=f.curr_positions_trades;if(i){for(let r=0;r<i.length;r++){let s=i[r],o=new Date(this.oc_year,this.oc_month-1,this.oc_date),a=new Date(s.expiry);if(o.getDate()===a.getDate()&&s.scrip===e&&s.exit===0)return s.qty}return null}}getCostOfStrikeInStrategy(e){let i=f.curr_positions_trades;if(i){for(let r=0;r<i.length;r++){let s=i[r],o=new Date(this.oc_year,this.oc_month-1,this.oc_date),a=new Date(s.expiry);if(o.getDate()===a.getDate()&&s.scrip===e&&s.exit===0)return s.entry}return null}}isStrikeInCurrStrategy(e){let i=f.curr_positions_trades;if(i){for(let r=0;r<i.length;r++){let s=i[r],o=new Date(this.oc_year,this.oc_month-1,this.oc_date),a=new Date(s.expiry);if(s.exit===0&&o.getDate()===a.getDate()&&s.scrip===e)return!0}return!1}return!1}ocOrder(e,i,r){let s="NSE:"+r.symbol+i,o=r.strike,a=this.oc_product_type,l;console.log("ocOrder qty: oc-qty-"+i+"-"+r.symbol);let c=Number(document.getElementById("oc-qty-"+i+"-"+r.symbol).value);l=document.getElementById("oc-limit-"+i+"-"+r.symbol).value;let u=2;l?u=1:l=0,console.log("placing order: ",s,c,u===2?"Market":"Limit",e,a,l),this.appService.placeOrder(this.access_token,s,c,u,e,a,l,0).subscribe(d=>{console.log("app ocOrder",d),this.refreshAll(),d&&(f.requestStatusEvent$.next(s+" "+c+" "+(u===2?"Market":"Limit")+" "+d),this.appService.playAudio("success"))},d=>{console.log("app ocOrder error",d),f.requestStatusEvent$.next(d.error.message+", "+d.message),this.refreshAll(),this.appService.playAudio("error")})}isAnyOpenPosition(){let e=f.curr_positions_trades;if(e){for(let i=0;i<e.length;i++)if(e[i].exit===0)return!0}return!1}autoSuggest(){this.findInitialPositions(),this.checkAdjustments()}findInitialPositions(){if(this.suggestions=[],!this.isAnyOpenPosition())for(let e=this.oc_range_lower;e<=this.oc_range_higher;e+=this.oc_range_multiple){let i=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e,"CE");if(i>=16&&i<=28){let r=this.getGreeks(e,"CE").delta;if(r>0&&Math.abs(r)<1)for(let s=this.oc_range_lower;s<=this.oc_range_higher;s+=this.oc_range_multiple){let o=this.getGreeks(s,"PE").delta;if(Math.abs(r+o)<=.025){let a=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),s,"PE");a&&this.suggestions.push({strikeCE:e,deltaCE:r,ltpCE:i,strikePE:s,deltaPE:o,ltpPE:a})}}}}}checkAdjustments(){let e=f.curr_positions_trades,i=0,r=0,s=0,o=0,a=0,l=0;if(this.adjust_sugg=[],this.combined_premium=0,e){for(let c=0;c<e.length;c++){let u=e[c],d=new Date(this.oc_year,this.oc_month-1,this.oc_date),h=new Date(u.expiry);if(u.exit===0&&u.qty<0){let p="";u.scrip.includes("CE")&&(p="CE"),u.scrip.includes("PE")&&(p="PE");let _=u.scrip.slice(0,-2),A=this.getGreeks(_,p).delta*u.qty,v=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),_,p)*u.qty;p==="CE"?(r+=v,i+=A,s+=u.qty):p==="PE"&&(a+=v,o+=A,l+=u.qty)}}r!==0&&a!==0&&(r=r/s,a=a/l,this.combined_premium=r+a,this.combined_premium=Math.round((this.combined_premium+1e-5)*100)/100,this.combined_SL&&this.combined_premium>=this.combined_SL&&this.appService.playAudio("warn")),i!==0&&o!==0&&r&&a&&(i=i/s,o=o/l,Math.abs(i+o)>.04&&(this.roll("CE",o),this.roll("PE",i)))}}roll(e,i){for(let r=this.oc_range_lower;r<=this.oc_range_higher;r+=this.oc_range_multiple){let s=this.oc_instru+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),this.oc_instru)+r,o=this.getGreeks(r,e).delta;if(Math.abs(i+o)<=.025){let a=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),r,e);a&&this.adjust_sugg.push({action:"Adjust "+e,strike:r+e,ltp:a})}}}sortTableColumn(e){console.log("sort"),this.holdings.sort((i,r)=>i.scrip==="NIFTYBEES"?-1:r.scrip==="NIFTYBEES"?1:i[e]>r[e]?-1:i[e]<r[e]?1:0)}fetchStocks(){this.holdingsService.fetchStocksData()}loadHoldings(){let e=this.holdingsService.loadHoldings();this.portfolio_return=e.portfolio_return,this.holdings=e.holdings,this.total_inv=e.total_inv,this.current_val=e.current_val,console.log("stocks:",this.holdings)}backtestStocks(){this.holdingsService.backtestStocks()}exportBacktest(){this.holdingsService.exportBacktest()}isStockHolding(e){return!!f.holdings[e].avgp}updateOCRange(){this.oc_strikes=[];for(let e=this.oc_range_lower;e<=this.oc_range_higher;e+=this.oc_range_multiple)this.oc_strikes.push({symbol:this.oc_instru+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),this.oc_instru)+e,strike:e,inCurrStrategyCE:!1,inCurrStrategyPE:!1,addCEToOrders:!1,addPEToOrders:!1,qtyInputCE:200,qtyInputPE:200,volumeCE:0,volumePE:0,deltaCE:0,gammaCE:0,vegaCE:0,thetaCE:0,deltaPE:0,gammaPE:0,vegaPE:0,thetaPE:0,ltpCE:0,ltpPE:0,qtyCE:0,qtyPE:0,costCE:0,costPE:0,inlineStrategyPnLCE:"",inlineStrategyPnLPE:"",isSpot:!1,showNudge:!1});if(!f.isSimulatedStrategy){let e=[];this.oc_strikes.forEach(i=>{e.push(this.mapService.getSubscriptionObject(i.strike+"CE",this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date).toDateString())),e.push(this.mapService.getSubscriptionObject(i.strike+"PE",this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date).toDateString()))}),console.log("updateOCRange Subscriptions: "+e),this.appService.sendSubscriptions(e)}}updateOCValues(){this.oc_strikes&&this.oc_strikes.length>0&&this.oc_strikes.forEach(e=>{if(e.inCurrStrategyCE=this.isStrikeInCurrStrategy(e.strike+"CE"),e.inCurrStrategyPE=this.isStrikeInCurrStrategy(e.strike+"PE"),e.volumeCE=this.getVolume(e.symbol+"CE"),e.volumePE=this.getVolume(e.symbol+"PE"),e.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"CE"),e.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"PE"),e.qtyCE=this.getQtyOfStrikeInStrategy(e.strike+"CE"),e.qtyPE=this.getQtyOfStrikeInStrategy(e.strike+"PE"),e.costCE=this.getCostOfStrikeInStrategy(e.strike+"CE"),e.costPE=this.getCostOfStrikeInStrategy(e.strike+"PE"),e.isSpot=this.isSpotStrike(e.strike),e.showNudge=this.showOILimit(this.oc_instru,e.strike),this.show_greeks){let i=this.getGreeks(e.strike,"CE");e.deltaCE=i.delta,e.gammaCE=i.gamma,e.vegaCE=i.vega,e.thetaCE=i.theta;let r=this.getGreeks(e.strike,"PE");e.deltaPE=r.delta,e.gammaPE=r.gamma,e.vegaPE=r.vega,e.thetaPE=r.theta}})}showOILimit(e,i){return!!(e==="NIFTY"&&f.nfCEOILimit&&f.nfPEOILimit&&(i>f.nfCEOILimit||i<f.nfPEOILimit)||e==="BANKNIFTY"&&f.bnfCEOILimit&&f.bnfPEOILimit&&(i>f.bnfCEOILimit||i<f.bnfPEOILimit))}refreshInlineStategyPnL(){this.oc_strikes&&this.oc_strikes.length>0&&this.oc_strikes.forEach(e=>{e.inCurrStrategyCE=this.isStrikeInCurrStrategy(e.strike+"CE"),e.inCurrStrategyPE=this.isStrikeInCurrStrategy(e.strike+"PE"),e.volumeCE=this.getVolume(e.symbol+"CE"),e.volumePE=this.getVolume(e.symbol+"PE"),e.deltaCE=this.getGreeks(e.strike,"CE").delta,e.deltaPE=this.getGreeks(e.strike,"PE").delta,e.ltpCE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"CE"),e.ltpPE=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"PE"),e.qtyCE=this.getQtyOfStrikeInStrategy(e.strike+"CE"),e.qtyPE=this.getQtyOfStrikeInStrategy(e.strike+"PE"),e.costCE=this.getCostOfStrikeInStrategy(e.strike+"CE"),e.costPE=this.getCostOfStrikeInStrategy(e.strike+"PE"),e.isSpot=this.isSpotStrike(e.strike);let i=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"CE"),r=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike,"PE"),s=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike+this.diff_strategy_pts,"CE"),o=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike-this.diff_strategy_pts,"PE"),a=this.oc_instru+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),this.oc_instru)+(e.strike-this.diff_strategy_pts)+"CE",l=this.oc_instru+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),this.oc_instru)+(e.strike+this.diff_strategy_pts)+"PE",c=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike-this.diff_strategy_pts,"CE"),u=this.mapService.getScripLTP(this.oc_instru,new Date(this.oc_year,this.oc_month-1,this.oc_date),e.strike+this.diff_strategy_pts,"PE"),d=i*this.qty_strategy_pts+s*-this.qty_strategy_pts,h=r*this.qty_strategy_pts+o*-this.qty_strategy_pts,p=Math.round(d),_=Math.round(h),A=Math.round(this.diff_strategy_pts*this.qty_strategy_pts-p),v=Math.round(this.diff_strategy_pts*this.qty_strategy_pts-_),b=i*-this.qty_strategy_pts+s*this.qty_strategy_pts/2+c*this.qty_strategy_pts/2,x=r*-this.qty_strategy_pts+o*this.qty_strategy_pts/2+u*this.qty_strategy_pts/2,N=Math.round(b),T=Math.round(x),k=Math.round(this.diff_strategy_pts*this.qty_strategy_pts/2-N),C=Math.round(this.diff_strategy_pts*this.qty_strategy_pts/2-T);e.inlineStrategyPnLCE="DS: "+A+" , "+p+`
Bfly: `+k+" , "+N,e.inlineStrategyPnLPE="DS: "+v+" , "+_+`
Bfly: `+C+" , "+T})}clearOC(){this.oc_strikes=[]}getSpotValue(){let e="";return this.oc_instru==="NIFTY"?e="NIFTY50":this.oc_instru==="BANKNIFTY"?e="BANKNIFTY":this.oc_instru==="FINNIFTY"?e="FINNIFTY":this.oc_instru==="MIDCPNIFTY"?e="MIDCPNIFTY":this.oc_instru==="SENSEX"?e="SENSEX":this.oc_instru==="BANKEX"?e="BANKEX":this.oc_instru==="USDINR"&&(e="USDINR"),this.mapService.getScripLTP(null,null,e,null)}updateSpotStrike(){let e="";this.oc_instru==="NIFTY"?e="NIFTY50":this.oc_instru==="BANKNIFTY"?e="BANKNIFTY":this.oc_instru==="FINNIFTY"?e="FINNIFTY":this.oc_instru==="MIDCPNIFTY"?e="MIDCPNIFTY":this.oc_instru==="SENSEX"?e="SENSEX":this.oc_instru==="BANKEX"?e="BANKEX":this.oc_instru==="USDINR"&&(e="USDINR");let i=this.mapService.getScripLTP(null,null,e,null),r=Math.round(i/this.oc_range_multiple)*this.oc_range_multiple;this.ocSpotStrike=r}isSpotStrike(e){return e===this.ocSpotStrike}getPosPnL(e){if(e.cmp){let i=null,r=0;if(e.realizedProfit&&(r=e.realizedProfit),e.netQty===0)return e.pnl;if(e.netQty>0){let s=(e.cmp-e.buyAvg)*e.netQty;i=r+s}else if(e.netQty<0){let s=(e.sellAvg-e.cmp)*-e.netQty;i=r+s}return e.scrip.includes("USDINR")&&(i*=1e3),e.pnl=Math.round((i+1e-5)*100)/100,e.pnl}else return e.pnl}getAtp(e){return this.mapService.getAtp(e)}getVolume(e){let i=this.mapService.getVolume(e);return i&&i.toLocaleString()}getOI(e){this.mapService.getOI(e)}getChgOI(e){this.mapService.getChgOI(e)}connectWS(){f.SocketMode=this.ws_vendor,this.appService.connectWebsocket(this.ws_access_token)}addOrdersToStrategy(){let e=[];this.orders.forEach(i=>{i.addToOrders&&e.push({scrip:i.scrip,price:i.tradedPrice,qty:i.qty,expiry:i.expiry})}),this.appService.payOffEvent$.next(e)}addPlaceOrders(){let e=[];this.oc_strikes.forEach(i=>{i.addCEToOrders&&(e.push({instru:this.oc_instru,strike:i.strike+"CE"}),i.addCEToOrders=!1),i.addPEToOrders&&(e.push({instru:this.oc_instru,strike:i.strike+"PE"}),i.addPEToOrders=!1)}),this.appService.placeOrdersEvent$.next(e)}calcMaxProfitLoss(){let e=[];this.maxProfit=0,this.maxLoss=0;let i=1e6;if(this.oc_strikes.forEach(r=>{r.addCEToOrders&&e.push(r.strike),r.addPEToOrders&&e.push(r.strike)}),e.sort((r,s)=>s-r),e.length===2||e.length===3){this.oc_strikes.forEach(s=>{if(s.addCEToOrders){let o=s.ltpCE*s.qtyInputCE;this.maxLoss+=o,Math.abs(s.qtyInputCE)<i&&(i=Math.abs(s.qtyInputCE))}if(s.addPEToOrders){let o=s.ltpPE*s.qtyInputPE;this.maxLoss+=o,Math.abs(s.qtyInputPE)<i&&(i=Math.abs(s.qtyInputPE))}});let r=-1;for(let s=0;s<e.length-1;s++){let o=e[s]-e[s+1];o>r&&(r=o)}this.maxProfit=r*i-this.maxLoss,this.profitLossRatio=this.maxProfit/this.maxLoss,this.profitLossRatio=Math.round((this.profitLossRatio+1e-5)*100)/100}if(e.length===4){this.oc_strikes.forEach(s=>{if(s.addCEToOrders){let o=s.ltpCE*s.qtyInputCE;this.maxProfit+=o,Math.abs(s.qtyInputCE)<i&&(i=Math.abs(s.qtyInputCE))}if(s.addPEToOrders){let o=s.ltpPE*s.qtyInputPE;this.maxProfit+=o,Math.abs(s.qtyInputPE)<i&&(i=Math.abs(s.qtyInputPE))}});let r=-1;for(let s=0;s<e.length-1;s++){let o=e[s]-e[s+1];o>r&&(r=o)}console.log("strikes, maxdiff, qty",e,r,i),this.maxProfit=Math.abs(this.maxProfit),this.maxLoss=r*i-this.maxProfit,this.profitLossRatio=this.maxProfit/this.maxLoss,this.profitLossRatio=Math.round((this.profitLossRatio+1e-5)*100)/100}}startMonitoringGreeks(){let e=new Date;e.setHours(19,37,0),this.greeksMonitoringIntervalInitial=setInterval(()=>{let i=new Date;console.log("Finding greeks start time ",e,i),i>=e&&(console.log("Found start time ",e),clearInterval(this.greeksMonitoringIntervalInitial),this.nextGreeksTime=i,this.nextGreeksTime.setMinutes(i.getMinutes()+1,0),this.setInitialGreeksData(),this.recordGreeks())},1e3)}setInitialGreeksData(){let e="NIFTY",i=50,r=this.mapService.getScripLTP(null,null,"NIFTY50",null),s=Math.round(r/i)*i,o=e+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),e)+s,a=this.getGreeks(s,"CE");this.initialGreeksData.set("CE",a);let l=this.getGreeks(s,"PE");this.initialGreeksData.set("PE",l),console.log("Initial greeks for ",s,this.initialGreeksData)}recordGreeks(){console.log("Recording greeks"),this.greeksMonitoringIntervalInitial=setInterval(()=>{new Date>=this.nextGreeksTime&&(console.log("Found next time ",this.nextGreeksTime),this.nextGreeksTime.setMinutes(this.nextGreeksTime.getMinutes()+1,0),this.getGreeksSum())},1e3)}getGreeksSum(){let e=new Date,i=[e.getHours(),e.getMinutes()].join(":"),r="NIFTY",s=50,o=this.mapService.getScripLTP(null,null,"NIFTY50",null),a=Math.round(o/s)*s,l=a+500,c=a-500,u=0,d=0,h=0,p=0,_=0,A=0;for(let b=l;b>=a;b-=s){let x=r+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),r)+b,N=this.getGreeks(b,"CE"),T=this.initialGreeksData.get("CE").vega-N.vega;u+=T;let k=this.initialGreeksData.get("CE").delta-N.delta;h+=k;let C=this.initialGreeksData.get("CE").theta-N.theta;_+=C}for(let b=c;b<=a;b+=s){let x=r+this.mapService.getExpiry(new Date(this.oc_year,this.oc_month-1,this.oc_date),r)+b,N=this.getGreeks(b,"PE"),T=this.initialGreeksData.get("PE").vega-N.vega;d+=T;let k=this.initialGreeksData.get("PE").delta-N.delta;p+=k;let C=this.initialGreeksData.get("PE").theta-N.theta;A+=C}let v={CE:{delta:h,gamma:0,vega:u,theta:_},PE:{delta:p,gamma:0,vega:d,theta:A}};this.greeksData.set(i,v),console.log("greeksData",this.greeksData)}static \u0275fac=function(i){return new(i||n)(ye(vr),ye(si),ye(Ue),ye(lo),ye($m),ye(Jm),ye(Lr),ye(p3),ye(Nn),ye(Xm),ye(f3))};static \u0275cmp=ci({type:n,selectors:[["app-root"]],decls:395,vars:68,consts:[["fileImportInputNSEOC",""],["fileImportInputExpiry",""],[1,"main-content"],[1,"alertMessage"],[4,"ngFor","ngForOf"],[1,"d-flex","mb-4","align-items-center"],["placeholder","Baby First Name",1,"form-control","form-control-sm","me-2",3,"ngModelChange","keyup","ngModel"],["placeholder","Surname",1,"form-control","form-control-sm","me-2",3,"ngModelChange","keyup","ngModel"],[1,"top-content","d-flex"],[1,"me-auto"],["type","button",1,"btn","btn-link",3,"click"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],["type","file","name","File Upload NSE OC",2,"display","none",3,"change"],[1,"confirmation-check","form-check-inline","mt-0"],["type","radio","name","ws_vendor","value","zerodha","id","zerodha_ws",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","zerodha_ws",1,"form-check-label"],["type","radio","name","ws_vendor","value","aliceblue","id","aliceblue_ws",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],["for","aliceblue_ws",1,"form-check-label"],[4,"ngIf"],["type","file","name","File Upload Master Contract",2,"display","none",3,"change"],["type","button","class","btn btn-link",3,"click",4,"ngIf"],[1,"confirmation-check","form-check","mt-2"],["type","radio","name","auth_radio","value","1","id","auth_select_1",1,"form-check-input","me-1",3,"ngModelChange","change","ngModel"],["placeholder","Authorization 1",1,"form-control","me-2",2,"max-width","1000px","display","inline-block",3,"ngModelChange","ngModel"],["type","radio","name","auth_radio","value","2","id","auth_select_2",1,"form-check-input","me-1",3,"ngModelChange","change","ngModel"],["placeholder","Authorization 2",1,"form-control","me-2",2,"max-width","1000px","display","inline-block",3,"ngModelChange","ngModel"],[1,"d-flex"],[1,""],[1,"table","table-sm","table-bordered","mb-0",2,"width","200px"],[2,"width","50%"],[1,"ms-1"],[1,"form-check-inline","mt-4"],["type","checkbox","value","","name","log_ws_feed","id","log_ws_feed",1,"form-check-input","me-2",3,"ngModelChange","change","ngModel"],["for","log_ws_feed",1,"form-check-label","me-1"],["placeholder","Expiry YYYY-MM-DD",1,"d-inline","form-control","form-control-sm",2,"width","100px",3,"ngModelChange","ngModel"],[1,"d-inline","ms-3"],["id","accordionLinkedIn",1,"accordion","mt-4"],[1,"accordion-item"],["id","headingLinkedIn",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseLinkedIn","aria-expanded","false","aria-controls","collapseLinkedIn",1,"accordion-button","fw-bold","collapsed"],["id","collapseLinkedIn","aria-labelledby","headingLinkedIn","data-bs-parent","#accordionLinkedIn",1,"accordion-collapse","collapse"],[1,"accordion-body"],["id","accordionStocks",1,"accordion","mt-4"],["id","headingStocks",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseStock","aria-expanded","false","aria-controls","collapseStock",1,"accordion-button","fw-bold","collapsed"],["id","collapseStock","aria-labelledby","headingStocks","data-bs-parent","#accordionStocks",1,"accordion-collapse","collapse"],[2,"margin-top","0.5rem"],["type","button",1,"btn","btn-secondary","btn-sm","refresh-btn",3,"click"],[1,"flex-container"],[1,"positions_div"],[1,"table-title"],[1,"fw-bold"],[1,"ms-auto","float-end"],[1,"form-check-inline"],["for","hide-positions",1,"form-check-label","me-1"],["type","checkbox","value","","name","hide-positions","id","hide-positions",1,"form-check-input","me-2",3,"ngModelChange","ngModel"],["for","hide-exited-positions",1,"form-check-label","me-1"],["type","checkbox","value","","name","hide-exited-ositions","id","hide-exited-positions",1,"form-check-input","me-2",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-secondary","btn-sm","refresh-btn","me-1",3,"click"],["type","button",1,"btn","btn-secondary","btn-sm","refresh-btn",3,"click","disabled"],[1,"table","table-sm","table-bordered","shadow","text-center"],[1,"table-light"],["scope","col"],[1,"orderbook_div"],["for","hide-orders",1,"form-check-label","me-1"],["type","checkbox","value","","id","hide-orders",1,"form-check-input",3,"ngModelChange","ngModel"],["for","orders-update",1,"form-check-label","me-1"],["type","checkbox","value","","id","orders-updates",1,"form-check-input",3,"ngModelChange","ngModel"],["for","latest-ten",1,"form-check-label","me-1"],["type","checkbox","value","","id","latest-ten",1,"form-check-input",3,"change","ngModelChange","ngModel"],["class","algo-suggestions-main shadow-sm p-3 mb-5 bg-white",4,"ngIf"],[2,"width","50% !important"],[1,"option-chain"],[1,"new-input","form-select","form-select-sm",3,"ngModelChange","ngModel"],["value","NIFTY"],["value","BANKNIFTY"],["value","FINNIFTY"],["value","MIDCPNIFTY"],["value","SENSEX"],["value","USDINR"],["id","strategy-qty","type","number","placeholder","Qty Default",1,"ms-2","form-control","form-control-sm",2,"display","inline","width","70px",3,"ngModelChange","ngModel"],[2,"display","inline-block","margin-left","20px","margin-right","10px"],[1,"input-group","input-group-sm","new-input-prepend-expiry"],[1,"input-group-prepend"],[1,"input-group-text"],["type","number",1,"form-control",3,"ngModelChange","ngModel"],[1,"input-group","input-group-sm","new-input-prepend-oc"],["type","number","min","0","step","50",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","50","step","50",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],["type","button",1,"btn","btn-secondary","btn-sm","ms-1",3,"click"],[1,"confirmation-check","form-check-inline","ms-2"],["type","checkbox","value","","id","show_greeks",1,"form-check-input",3,"ngModelChange","ngModel"],["for","show_greeks",1,"form-check-label","ms-1"],["id","strategypoints-qty","type","number","placeholder","Qty Points",1,"me-1","form-control","form-control-sm",2,"display","inline","width","70px",3,"ngModelChange","ngModel"],["id","strategypoints-diff","type","number","placeholder","Diff Points",1,"me-1","form-control","form-control-sm",2,"display","inline","width","70px",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-secondary","btn-sm","ms-1","me-1",3,"click"],[1,"table","table-sm","table-bordered","shadow","mb-0","text-center"],[1,"text-center"],["colspan","4","scope","col"],["scope","col",1,"oc-col-actions"],["scope","col",1,"oc-col"],["class","oc-col","scope","col",4,"ngIf"],["scope","col",1,"text-center"],["id","accordionHistorical",1,"accordion","mb-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#historicalSection","aria-expanded","false","aria-controls","historicalSection",1,"accordion-button","collapsed","fw-bold"],["id","historicalSection","aria-labelledby","headingStocks","data-bs-parent","#accordionHistorical",1,"accordion-collapse","collapse","p-2"],[1,"historical_input","mb-2"],["for","historical_append",1,"historical_label"],["name","historical_append","placeholder","historical_append",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","zerodha_auth",1,"historical_label"],["name","zerodha_auth","placeholder","zerodha_auth",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","zerodha_from_date",1,"historical_label"],["name","zerodha_from_date","placeholder","zerodha_from_date",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","zerodha_to_date",1,"historical_label"],["name","zerodha_to_date","placeholder","zerodha_to_date",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","zerodha_expiry_date",1,"historical_label"],["name","zerodha_expiry_date","placeholder","zerodha_expiry_date",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["value","CNXBAN"],["value","NIFFIN"],["for","historical_date",1,"historical_label"],["name","historical_date","placeholder","historical_date",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","historical_upper",1,"historical_label"],["name","historical_upper","type","number","placeholder","historical_upper",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","historical_lower",1,"historical_label"],["name","historical_lower","type","number","placeholder","historical_lower",1,"me-2","form-control","form-control-sm",3,"ngModelChange","ngModel"],["id","accordionHoldings",1,"accordion","mb-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#holdingsSection","aria-expanded","true","aria-controls","holdingsSection",1,"accordion-button","collapsed","fw-bold"],["id","holdingsSection","aria-labelledby","headingStocks","data-bs-parent","#accordionHoldings",1,"accordion-collapse","collapse","p-2"],["scope","col",1,"oc-col",3,"click"],[3,"closed","type"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"form-check-inline","posCheckbox"],["type","checkbox","value","",1,"form-check-input","me-1",3,"ngModelChange","ngModel"],[1,"algo-suggestions-main","shadow-sm","p-3","mb-5","bg-white"],[1,"me-2"],[1,"fw-bold",3,"ngClass"],["class","suggest-positions",4,"ngFor","ngForOf"],[1,"ms-4","me-3"],["type","number","placeholder","Combined SL",1,"ms-2","form-control","form-control-sm",2,"width","70px","display","inline",3,"ngModelChange","ngModel"],[1,"suggest-positions"],[1,"positions-row-actions"],[1,"form-check-inline","posCheckbox","me-1"],["type","checkbox","value","",1,"form-check-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Qty",1,"pos-input","form-control","form-control-sm",3,"ngModelChange","ngModel","id"],["type","button",1,"btn","btn-secondary","btn-sm","me-1",3,"click"],[2,"white-space","pre-line","width","124px",3,"ngClass"],[3,"ngClass",4,"ngIf"],[1,"text-primary","fw-bold",3,"ngClass"],["class","ocStrategyStrikeQty",4,"ngIf"],[1,"fw-bold","text-center",3,"ngClass"],["class","ocStrategyStrikeQty oc-strike-spot",4,"ngIf"],["style","color: orange;",4,"ngIf"],[1,"greeksOC"],[1,"ocStrategyStrikeQty"],[1,"ocStrategyStrikeQty","oc-strike-spot"],[2,"color","orange"]],template:function(i,r){if(i&1){let s=pe();g(0,"div",2)(1,"div",3),ee(2,Are,3,2,"p",4),m(),g(3,"div",5)(4,"input",6),z("ngModelChange",function(a){return D(s),U(r.baby_name,a)||(r.baby_name=a),E(a)}),q("keyup",function(a){return D(s),E(r.calcBabyName(a))}),m(),g(5,"input",7),z("ngModelChange",function(a){return D(s),U(r.baby_surname,a)||(r.baby_surname=a),E(a)}),q("keyup",function(a){return D(s),E(r.calcBabyName(a))}),m(),g(6,"span"),w(7),m()(),g(8,"small"),w(9),m(),g(10,"div"),w(11,"Disclaimer: The application is only for my personal use and not for any commercial purposes."),m(),g(12,"div",8)(13,"div",9)(14,"div")(15,"span"),w(16,"Fetch NSE OC:"),m(),g(17,"button",10),q("click",function(){return D(s),E(r.getNSE_OC("NIFTY50"))}),w(18,"NIFTY"),m(),g(19,"button",10),q("click",function(){return D(s),E(r.getNSE_OC("BANKNIFTY"))}),w(20,"BANKNIFTY"),m(),g(21,"button",10),q("click",function(){return D(s),E(r.getNSE_OC("FINNIFTY"))}),w(22,"FINNIFTY"),m(),g(23,"button",11),q("click",function(){D(s);let a=Xn(26);return E(a.click())}),w(24,"\u2191"),m(),g(25,"input",12,0),q("change",function(a){return D(s),E(r.uploadNSEOC(a))}),m()(),g(27,"div",13)(28,"input",14),z("ngModelChange",function(a){return D(s),U(r.ws_vendor,a)||(r.ws_vendor=a),E(a)}),m(),g(29,"label",15),w(30,"Zerodha"),m()(),g(31,"div",13)(32,"input",16),z("ngModelChange",function(a){return D(s),U(r.ws_vendor,a)||(r.ws_vendor=a),E(a)}),m(),g(33,"label",17),w(34,"Aliceblue"),m()(),g(35,"button",10),q("click",function(){return D(s),E(r.establishWSVendor())}),w(36,"Fetch & Connect"),m(),g(37,"button",10),q("click",function(){D(s);let a=Xn(42);return E(a.click())}),w(38,"Import & Connect"),m(),ee(39,yre,2,0,"span",18)(40,vre,2,0,"span",18),g(41,"input",19,1),q("change",function(a){return D(s),E(r.import_establishWSVendor(a))}),m(),g(43,"div")(44,"span"),w(45),m(),ee(46,wre,2,0,"button",20),m(),g(47,"div"),ee(48,bre,2,0,"span",18)(49,Sre,2,0,"span",18)(50,Cre,2,0,"button",20),g(51,"button",10),q("click",function(){return D(s),E(r.reopenWebsocket())}),w(52,"Connect"),m()(),g(53,"div",21)(54,"input",22),z("ngModelChange",function(a){return D(s),U(r.auth_acc,a)||(r.auth_acc=a),E(a)}),q("change",function(a){return D(s),E(r.auth_radio_change(a))}),m(),g(55,"input",23),q("ngModelChange",function(a){return D(s),E(r.auth_change_num(a,"1"))}),z("ngModelChange",function(a){return D(s),U(r.auth_acc_1,a)||(r.auth_acc_1=a),E(a)}),m()(),g(56,"div",21)(57,"input",24),z("ngModelChange",function(a){return D(s),U(r.auth_acc,a)||(r.auth_acc=a),E(a)}),q("change",function(a){return D(s),E(r.auth_radio_change(a))}),m(),g(58,"input",25),q("ngModelChange",function(a){return D(s),E(r.auth_change_num(a,"2"))}),z("ngModelChange",function(a){return D(s),U(r.auth_acc_2,a)||(r.auth_acc_2=a),E(a)}),m()()(),g(59,"div")(60,"div",26)(61,"div",27)(62,"table",28)(63,"tbody")(64,"tr")(65,"td",29),w(66,"Nifty"),m(),g(67,"td"),w(68),m()()()()(),g(69,"div",30)(70,"table",28)(71,"tbody")(72,"tr")(73,"td",29),w(74,"BNF"),m(),g(75,"td"),w(76),m()()()()(),g(77,"div",30)(78,"table",28)(79,"tbody")(80,"tr")(81,"td",29),w(82,"Finnifty"),m(),g(83,"td"),w(84),m()()()()()(),g(85,"div",31)(86,"input",32),z("ngModelChange",function(a){return D(s),U(r.log_ws_feed,a)||(r.log_ws_feed=a),E(a)}),q("change",function(){return D(s),E(r.log_ws_feed_change())}),m(),g(87,"label",33),w(88,"Log WS Feed"),m()(),g(89,"button",10),q("click",function(){return D(s),E(r.exportLongTermOptions())}),w(90,"Export Long Term Nifty"),m(),g(91,"input",34),z("ngModelChange",function(a){return D(s),U(r.longTermExpiryExport,a)||(r.longTermExpiryExport=a),E(a)}),m(),g(92,"div",35),w(93),m()()(),g(94,"div",36)(95,"div",37)(96,"h2",38)(97,"button",39),w(98," LinkedIn "),m()(),g(99,"div",40)(100,"div",41),Be(101,"app-linkedin"),m()()()(),g(102,"div",42)(103,"div",37)(104,"h2",43)(105,"button",44),w(106," Stocks "),m()(),g(107,"div",45)(108,"div",41),Be(109,"app-stocks"),m()()()(),Be(110,"hr",46),g(111,"button",47),q("click",function(){return D(s),E(r.refreshAll())}),w(112,"Refresh All"),m(),g(113,"span"),w(114),m(),g(115,"div",48)(116,"div",49)(117,"div",50)(118,"span",51),w(119,"Positions"),m(),g(120,"div",52)(121,"div",53)(122,"label",54),w(123,"Hide"),m(),g(124,"input",55),z("ngModelChange",function(a){return D(s),U(r.hide_positions,a)||(r.hide_positions=a),E(a)}),m()(),g(125,"div",53)(126,"label",56),w(127,"Hide Exited"),m(),g(128,"input",57),z("ngModelChange",function(a){return D(s),U(r.hide_exited_positions,a)||(r.hide_exited_positions=a),E(a)}),m()(),g(129,"button",58),q("click",function(){return D(s),E(r.getPositions())}),w(130,"Refresh"),m(),g(131,"button",59),q("click",function(){return D(s),E(r.exitSelected())}),w(132,"Exit selected"),m()()(),g(133,"table",60)(134,"thead",61)(135,"tr")(136,"th",62),w(137,"Instru"),m(),g(138,"th",62),w(139,"Scrip"),m(),g(140,"th",62),w(141,"NetQty"),m(),g(142,"th",62),w(143,"BuyAvg"),m(),g(144,"th",62),w(145,"SellAvg"),m()()(),ee(146,Dre,2,1,"tbody",18),m()(),g(147,"div",63)(148,"div",50)(149,"div",26)(150,"span",51),w(151,"Orders"),m(),g(152,"span"),w(153),m(),g(154,"div",52)(155,"div",53)(156,"label",64),w(157,"Hide"),m(),g(158,"input",65),z("ngModelChange",function(a){return D(s),U(r.hide_orders,a)||(r.hide_orders=a),E(a)}),m()(),g(159,"div",53)(160,"label",66),w(161,"Auto-Update"),m(),g(162,"input",67),z("ngModelChange",function(a){return D(s),U(r.orders_update,a)||(r.orders_update=a),E(a)}),m()(),g(163,"div",53)(164,"label",68),w(165,"Latest 10"),m(),g(166,"input",69),q("change",function(a){return D(s),E(r.changeLatestTen(a))}),z("ngModelChange",function(a){return D(s),U(r.latest_ten,a)||(r.latest_ten=a),E(a)}),m()(),g(167,"button",58),q("click",function(){return D(s),E(r.getOrders())}),w(168,"Refresh"),m(),g(169,"button",47),q("click",function(){return D(s),E(r.addOrdersToStrategy())}),w(170,"Add to Strategy"),m()()()(),g(171,"table",60)(172,"thead",61)(173,"tr"),Be(174,"th"),g(175,"th",62),w(176,"Time"),m(),g(177,"th",62),w(178,"Expiry"),m(),g(179,"th",62),w(180,"Instru"),m(),g(181,"th",62),w(182,"Scrip"),m(),g(183,"th",62),w(184,"Qty"),m(),g(185,"th",62),w(186,"Price"),m(),g(187,"th",62),w(188,"Status"),m(),g(189,"th",62),w(190,"Tags"),m(),g(191,"th",62),w(192,"GUID"),m(),g(193,"th",62),w(194,"OrderId"),m(),g(195,"th",62),w(196,"Message"),m()()(),ee(197,Tre,2,1,"tbody",18),m()()(),ee(198,Nre,12,10,"div",70),Be(199,"app-chart",71)(200,"hr"),g(201,"div",72)(202,"select",73),z("ngModelChange",function(a){return D(s),U(r.oc_instru,a)||(r.oc_instru=a),E(a)}),g(203,"option",74),w(204,"NIFTY"),m(),g(205,"option",75),w(206,"BANKNIFTY"),m(),g(207,"option",76),w(208,"FINNIFTY"),m(),g(209,"option",77),w(210,"MIDCPNIFTY"),m(),g(211,"option",78),w(212,"SENSEX"),m(),g(213,"option",79),w(214,"USDINR"),m()(),g(215,"input",80),z("ngModelChange",function(a){return D(s),U(r.qty_default,a)||(r.qty_default=a),E(a)}),m(),g(216,"div",81),w(217,"Expiry: "),m(),g(218,"div",82)(219,"div",83)(220,"div",84),w(221,"Year"),m()(),g(222,"input",85),z("ngModelChange",function(a){return D(s),U(r.oc_year,a)||(r.oc_year=a),E(a)}),m()(),g(223,"div",82)(224,"div",83)(225,"div",84),w(226,"Month"),m()(),g(227,"input",85),z("ngModelChange",function(a){return D(s),U(r.oc_month,a)||(r.oc_month=a),E(a)}),m()(),g(228,"div",82)(229,"div",83)(230,"div",84),w(231,"Date"),m()(),g(232,"input",85),z("ngModelChange",function(a){return D(s),U(r.oc_date,a)||(r.oc_date=a),E(a)}),m()(),g(233,"div",81),w(234,"Strike range: "),m(),g(235,"div",86)(236,"div",83)(237,"div",84),w(238,"Higher"),m()(),g(239,"input",87),z("ngModelChange",function(a){return D(s),U(r.oc_range_higher,a)||(r.oc_range_higher=a),E(a)}),m()(),g(240,"div",86)(241,"div",83)(242,"div",84),w(243,"Lower"),m()(),g(244,"input",87),z("ngModelChange",function(a){return D(s),U(r.oc_range_lower,a)||(r.oc_range_lower=a),E(a)}),m()(),g(245,"div",86)(246,"div",83)(247,"div",84),w(248,"Multiple"),m()(),g(249,"input",88),z("ngModelChange",function(a){return D(s),U(r.oc_range_multiple,a)||(r.oc_range_multiple=a),E(a)}),m()(),g(250,"button",89),q("click",function(){return D(s),E(r.updateOCRange())}),w(251,"Update"),m(),g(252,"button",90),q("click",function(){return D(s),E(r.clearOC())}),w(253,"Clear"),m(),g(254,"button",90),q("click",function(){return D(s),E(r.addPlaceOrders())}),w(255,"Add - Place Orders"),m(),g(256,"div",91)(257,"input",92),z("ngModelChange",function(a){return D(s),U(r.show_greeks,a)||(r.show_greeks=a),E(a)}),m(),g(258,"label",93),w(259,"Greeks"),m()(),g(260,"div")(261,"input",94),z("ngModelChange",function(a){return D(s),U(r.qty_strategy_pts,a)||(r.qty_strategy_pts=a),E(a)}),m(),g(262,"input",95),z("ngModelChange",function(a){return D(s),U(r.diff_strategy_pts,a)||(r.diff_strategy_pts=a),E(a)}),m(),g(263,"button",89),q("click",function(){return D(s),E(r.refreshInlineStategyPnL())}),w(264,"P&L"),m(),g(265,"button",96),q("click",function(){return D(s),E(r.calcMaxProfitLoss())}),w(266,"Sel. P&L"),m(),g(267,"span"),w(268),m()(),g(269,"table",97)(270,"thead",61)(271,"tr",98)(272,"th",99),w(273,"Calls"),m(),Be(274,"th",62),g(275,"th",99),w(276,"Puts"),m()(),g(277,"tr"),Be(278,"th",100)(279,"th",101),g(280,"th",101),w(281,"Volume"),m(),ee(282,Pre,2,0,"th",102),g(283,"th",101),w(284,"LTP"),m(),g(285,"th",103),w(286,"Strike"),m(),g(287,"th",101),w(288,"LTP"),m(),ee(289,Ore,2,0,"th",102),g(290,"th",101),w(291,"Volume"),m(),Be(292,"th",101)(293,"th",100),m()(),g(294,"tbody"),ee(295,jre,39,49,"tr",4),m()()(),Be(296,"hr"),g(297,"div",104)(298,"div",37)(299,"h2",43)(300,"button",105),w(301," Historical "),m()(),g(302,"div",106),w(303," For Weekly expiry, enter WK in append field. By default, Nifty/BNF expiries dates will be shown. For Finnifty, update the date fields. "),g(304,"div",107)(305,"label",108),w(306,"Append"),m(),g(307,"input",109),z("ngModelChange",function(a){return D(s),U(r.historical_append,a)||(r.historical_append=a),E(a)}),m()(),g(308,"div",107)(309,"label",110),w(310,"Authorization"),m(),g(311,"input",111),z("ngModelChange",function(a){return D(s),U(r.zerodha_auth,a)||(r.zerodha_auth=a),E(a)}),m()(),g(312,"div",107)(313,"label",112),w(314,"From Date"),m(),g(315,"input",113),z("ngModelChange",function(a){return D(s),U(r.zerodha_from_date,a)||(r.zerodha_from_date=a),E(a)}),m()(),g(316,"div",107)(317,"label",114),w(318,"To Date"),m(),g(319,"input",115),z("ngModelChange",function(a){return D(s),U(r.zerodha_to_date,a)||(r.zerodha_to_date=a),E(a)}),m()(),g(320,"div",107)(321,"label",116),w(322,"Expiry Date"),m(),g(323,"input",117),z("ngModelChange",function(a){return D(s),U(r.zerodha_expiry_date,a)||(r.zerodha_expiry_date=a),E(a)}),m()(),g(324,"div"),w(325,'Third Party: Update Append, Expiry date, instru, Date, upper range and lower range. See the range of instru for the period you want. In one call, 2.5 days data is received. See the day upto which data is received in response payload. Then update "Date" to this date.'),m(),g(326,"select",118),z("ngModelChange",function(a){return D(s),U(r.historical_instru,a)||(r.historical_instru=a),E(a)}),g(327,"option",74),w(328,"NIFTY"),m(),g(329,"option",119),w(330,"BANKNIFTY"),m(),g(331,"option",120),w(332,"FINNIFTY"),m()(),g(333,"div",107)(334,"label",121),w(335,"Date"),m(),g(336,"input",122),z("ngModelChange",function(a){return D(s),U(r.historical_date,a)||(r.historical_date=a),E(a)}),m()(),g(337,"div",107)(338,"label",123),w(339,"Upper Range"),m(),g(340,"input",124),z("ngModelChange",function(a){return D(s),U(r.historical_upper,a)||(r.historical_upper=a),E(a)}),m()(),g(341,"div",107)(342,"label",125),w(343,"Lower Range"),m(),g(344,"input",126),z("ngModelChange",function(a){return D(s),U(r.historical_lower,a)||(r.historical_lower=a),E(a)}),m()(),g(345,"button",10),q("click",function(){return D(s),E(r.fetchHistorical())}),w(346,"Fetch Historical"),m(),g(347,"button",10),q("click",function(){return D(s),E(r.fetchHistoricalThirdParty())}),w(348,"Fetch Historical Third Party"),m(),g(349,"button",10),q("click",function(){return D(s),E(r.exportHistorical())}),w(350,"Export"),m()()()(),g(351,"div",127)(352,"div",37)(353,"h2",43)(354,"button",128),w(355," Stocks - old "),m()(),g(356,"div",129)(357,"div"),w(358),m(),g(359,"table",97)(360,"thead",61)(361,"tr")(362,"th",101),w(363,"Scrip"),m(),g(364,"th",101),w(365,"LTP"),m(),g(366,"th",130),q("click",function(){return D(s),E(r.sortTableColumn("oned"))}),w(367,"1D%"),m(),g(368,"th",130),q("click",function(){return D(s),E(r.sortTableColumn("onew"))}),w(369,"1W%"),m(),g(370,"th",130),q("click",function(){return D(s),E(r.sortTableColumn("onem"))}),w(371,"1M%"),m(),g(372,"th",130),q("click",function(){return D(s),E(r.sortTableColumn("threem"))}),w(373,"3M%"),m(),g(374,"th",130),q("click",function(){return D(s),E(r.sortTableColumn("fiftytwow"))}),w(375,"52W H%"),m(),g(376,"th",130),q("click",function(){return D(s),E(r.sortTableColumn("avgp"))}),w(377,"Avg%"),m(),g(378,"th",130),q("click",function(){return D(s),E(r.sortTableColumn("support"))}),w(379,"Support"),m(),g(380,"th",130),q("click",function(){return D(s),E(r.sortTableColumn("resistance"))}),w(381,"Resistance"),m(),g(382,"th",130),q("click",function(){return D(s),E(r.sortTableColumn("buyvalue"))}),w(383,"BuyValue"),m()()(),g(384,"tbody"),ee(385,Wre,23,54,"tr",4),m()(),g(386,"button",10),q("click",function(){return D(s),E(r.fetchStocks())}),w(387,"Fetch Stocks data"),m(),g(388,"button",10),q("click",function(){return D(s),E(r.loadHoldings())}),w(389,"Load"),m(),g(390,"button",10),q("click",function(){return D(s),E(r.backtestStocks())}),w(391,"Backtest"),m(),g(392,"button",10),q("click",function(){return D(s),E(r.exportBacktest())}),w(393,"Export Backtest"),m()()()()(),Be(394,"router-outlet")}i&2&&(y(2),L("ngForOf",r.alerts),y(2),W("ngModel",r.baby_name),y(),W("ngModel",r.baby_surname),y(2),J(r.babyNameNumber),y(2),$n("Version: ",r.version.number," | Built: ",r.version.buildTime,""),y(19),W("ngModel",r.ws_vendor),y(4),W("ngModel",r.ws_vendor),y(7),L("ngIf",r.ws_vendor==="zerodha"),y(),L("ngIf",r.ws_vendor==="aliceblue"),y(5),J(r.getMastersStatus()),y(),L("ngIf",!r.access_token),y(2),L("ngIf",r.isSocketConnected()),y(),L("ngIf",!r.isSocketConnected()),y(),L("ngIf",r.isSocketConnected()),y(4),W("ngModel",r.auth_acc),y(),W("ngModel",r.auth_acc_1),y(2),W("ngModel",r.auth_acc),y(),W("ngModel",r.auth_acc_2),y(10),J(r.getInstruLTP("NIFTY50")),y(8),J(r.getInstruLTP("BANKNIFTY")),y(8),J(r.getInstruLTP("FINNIFTY")),y(2),W("ngModel",r.log_ws_feed),y(5),W("ngModel",r.longTermExpiryExport),y(2),$n("Bees ratio: ",r.getBeesRatio()," : ",r.getInstruLTP("NIFTYBEES"),""),y(21),$n("Positions last update: ",r.lastPositionsUpdateTime," | Orders last update: ",r.lastOrdersUpdateTime,""),y(10),W("ngModel",r.hide_positions),y(4),W("ngModel",r.hide_exited_positions),y(3),L("disabled",r.disable_order_buttons),y(15),L("ngIf",!r.hide_positions),y(7),Z("\xA0 (",r.completeOrders,")"),y(5),W("ngModel",r.hide_orders),y(4),W("ngModel",r.orders_update),y(4),W("ngModel",r.latest_ten),y(31),L("ngIf",!r.hide_orders),y(),L("ngIf",!1),y(4),W("ngModel",r.oc_instru),y(13),W("ngModel",r.qty_default),y(7),W("ngModel",r.oc_year),y(5),W("ngModel",r.oc_month),y(5),W("ngModel",r.oc_date),y(7),W("ngModel",r.oc_range_higher),y(5),W("ngModel",r.oc_range_lower),y(5),W("ngModel",r.oc_range_multiple),y(8),W("ngModel",r.show_greeks),y(4),W("ngModel",r.qty_strategy_pts),y(),W("ngModel",r.diff_strategy_pts),y(6),Su("Profit: ",r.maxProfit,", Loss: ",r.maxLoss,", Ratio: ",r.profitLossRatio,""),y(14),L("ngIf",r.show_greeks),y(7),L("ngIf",r.show_greeks),y(6),L("ngForOf",r.oc_strikes),y(12),W("ngModel",r.historical_append),y(4),W("ngModel",r.zerodha_auth),y(4),W("ngModel",r.zerodha_from_date),y(4),W("ngModel",r.zerodha_to_date),y(4),W("ngModel",r.zerodha_expiry_date),y(3),W("ngModel",r.historical_instru),y(10),W("ngModel",r.historical_date),y(4),W("ngModel",r.historical_upper),y(4),W("ngModel",r.historical_lower),y(14),Su("Portfolio return: ",r.portfolio_return,"% Total inv.: ",r.total_inv," Current val.: ",r.current_val,""),y(27),L("ngForOf",r.holdings))},dependencies:[Xu,mO,gO,i3,c3,h3,Xs,jg,Wg,Tr,sa,ra,lc,zd,Js,hw,cs,mr,Fo,gr,Xr],styles:[`[_nghost-%COMP%], input[_ngcontent-%COMP%], .input-group-text[_ngcontent-%COMP%], select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-size:12px!important}button[_ngcontent-%COMP%]{margin-top:-4px}.greeksOC[_ngcontent-%COMP%]{display:block}.alertMessage[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0;z-index:999}.stockHolding[_ngcontent-%COMP%]{color:#00f}.green[_ngcontent-%COMP%]{color:green}.red[_ngcontent-%COMP%]{color:tomato}.blue[_ngcontent-%COMP%]{color:#00f}.bold-higher[_ngcontent-%COMP%]{font-weight:700;font-size:12px!important}.historical_label[_ngcontent-%COMP%]{margin-bottom:0!important}.algo-suggestions-main[_ngcontent-%COMP%]{position:sticky;top:0;z-index:999}.suggest-positions[_ngcontent-%COMP%]{border:1px solid #b5b5b5;padding:5px;border-radius:5px;margin-right:15px;font-weight:700}table[_ngcontent-%COMP%]{background-color:#fff;border:2px solid #dee2e6}.ocStrategyStrikeQty[_ngcontent-%COMP%]{font-size:.6rem;color:#000}.oc-strike[_ngcontent-%COMP%]{background-color:#e9ecef;width:60px}.oc-strike-spot[_ngcontent-%COMP%]{width:60px;margin:0 auto}.oc-col-actions[_ngcontent-%COMP%]{width:19rem}.oc-col[_ngcontent-%COMP%]{width:5rem}.lastRequestStatus[_ngcontent-%COMP%]{margin-top:10px}.main-content[_ngcontent-%COMP%]{padding:10px;background-color:#f8f9fa}.flex-container[_ngcontent-%COMP%]{margin-top:10px;display:flex}.positions_div[_ngcontent-%COMP%]{flex:1;margin-right:20px}.orderbook_div[_ngcontent-%COMP%]{flex:2}.pos-input[_ngcontent-%COMP%]{width:60px;display:inline-block;margin-right:5px}.refresh-btn[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:5px}.table-title[_ngcontent-%COMP%]{margin-bottom:5px}.new-input[_ngcontent-%COMP%]{margin-top:5px;margin-right:5px;width:120px;display:inline-block}.new-input-prepend[_ngcontent-%COMP%]{margin-top:5px;margin-right:5px;width:150px;display:inline-flex}.new-input-prepend-expiry[_ngcontent-%COMP%]{margin-top:5px;margin-right:5px;width:120px;display:inline-flex}.new-input-prepend-oc[_ngcontent-%COMP%]{margin-top:5px;margin-right:5px;width:130px;display:inline-flex}.new-input-btn[_ngcontent-%COMP%]{margin-right:5px;margin-top:5px}.confirmation-check[_ngcontent-%COMP%]{margin-top:15px}.new-order-div[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;border-radius:5px;background-color:#fff}.ocStrikeStrategyCE[_ngcontent-%COMP%]{background-color:#ccffc9!important}.ocStrikeStrategyPE[_ngcontent-%COMP%]{background-color:#ffdede!important}.hidePositionRow[_ngcontent-%COMP%]{display:none}
/*# sourceMappingURL=app.component-NONQMIG2.css.map */`]})}return n})();A1(m3,FN).catch(n=>console.error(n));
//# sourceMappingURL=main-Q4RE6EXV.js.map
